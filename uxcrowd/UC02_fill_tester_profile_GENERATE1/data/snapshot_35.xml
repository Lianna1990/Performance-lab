<?xml version="1.0" encoding="utf-8"?>
<HTTPSnapshot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="35">
  <HTTPTask id="388" hostname="prod.uxcrowd.ru" path="/assets/gulp/sup_js.js" url="https://prod.uxcrowd.ru/assets/gulp/sup_js.js" ip="127.0.0.1" port="443" connectionId="12" origin="Primary" frame="1" startDateTime="2019-10-18T15:08:51.800+03:00" startTime="80862015" endTime="80862968">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Host" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>cHJvZC51eGNyb3dkLnJ1</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IHJ2OjQ4LjApIEdlY2tvLzIwMTAwMTAxIEZpcmVmb3gvNDguMA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ki8q</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>cnUtUlUscnU7cT0wLjgsZW4tVVM7cT0wLjUsZW47cT0wLjM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZSwgYnI=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Referer" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cHM6Ly9wcm9kLnV4Y3Jvd2QucnUv</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIC9hc3NldHMvZ3VscC9zdXBfanMuanMgSFRUUC8xLjENCkhvc3Q6IHByb2QudXhjcm93ZC5ydQ0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IHJ2OjQ4LjApIEdlY2tvLzIwMTAwMTAxIEZpcmVmb3gvNDguMA0KQWNjZXB0OiAqLyoNCkFjY2VwdC1MYW5ndWFnZTogcnUtUlUscnU7cT0wLjgsZW4tVVM7cT0wLjUsZW47cT0wLjMNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZSwgYnINClJlZmVyZXI6IGh0dHBzOi8vcHJvZC51eGNyb3dkLnJ1Lw0KQ29ubmVjdGlvbjoga2VlcC1hbGl2ZQ0KDQo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <contentLenght>1892351</contentLenght>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Server" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bmdpbng=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>RnJpLCAxOCBPY3QgMjAxOSAxMjowNzoxOCBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Type" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdDsgY2hhcnNldD1VVEYtOA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Length" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MTg5MjM1MQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Last-Modified" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>V2VkLCAyNSBTZXAgMjAxOSAxNToyMTowNiBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>IjVkOGI4NWUyLTFjZGZmZiI=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cache-Control" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bXVzdC1yZXZhbGlkYXRl</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Ranges" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Security-Policy-Report-Only" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZGVmYXVsdC1zcmMgaHR0cHM6OyBzY3JpcHQtc3JjIGh0dHBzOiAndW5zYWZlLWV2YWwnICd1bnNhZmUtaW5saW5lJzsgc3R5bGUtc3JjIGh0dHBzOiAndW5zYWZlLWlubGluZSc7IGltZy1zcmMgaHR0cHM6IGRhdGE6OyBmb250LXNyYyBodHRwczogZGF0YTo7IHJlcG9ydC11cmkgL2NzcC1yZXBvcnQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Strict-Transport-Security" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bWF4LWFnZT04NjQwMDs=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Security-Policy-Report-Only" index="11">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZGVmYXVsdC1zcmMgaHR0cHM6OyBzY3JpcHQtc3JjIGh0dHBzOiAndW5zYWZlLWV2YWwnICd1bnNhZmUtaW5saW5lJzsgc3R5bGUtc3JjIGh0dHBzOiAndW5zYWZlLWlubGluZSc7IGltZy1zcmMgaHR0cHM6IGRhdGE6OyBmb250LXNyYyBodHRwczogZGF0YTo7IHJlcG9ydC11cmkgL2NzcC1yZXBvcnQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIE9LDQpTZXJ2ZXI6IG5naW54DQpEYXRlOiBGcmksIDE4IE9jdCAyMDE5IDEyOjA3OjE4IEdNVA0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0OyBjaGFyc2V0PVVURi04DQpDb250ZW50LUxlbmd0aDogMTg5MjM1MQ0KQ29ubmVjdGlvbjoga2VlcC1hbGl2ZQ0KTGFzdC1Nb2RpZmllZDogV2VkLCAyNSBTZXAgMjAxOSAxNToyMTowNiBHTVQNCkVUYWc6ICI1ZDhiODVlMi0xY2RmZmYiDQpDYWNoZS1Db250cm9sOiBtdXN0LXJldmFsaWRhdGUNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpDb250ZW50LVNlY3VyaXR5LVBvbGljeS1SZXBvcnQtT25seTogZGVmYXVsdC1zcmMgaHR0cHM6OyBzY3JpcHQtc3JjIGh0dHBzOiAndW5zYWZlLWV2YWwnICd1bnNhZmUtaW5saW5lJzsgc3R5bGUtc3JjIGh0dHBzOiAndW5zYWZlLWlubGluZSc7IGltZy1zcmMgaHR0cHM6IGRhdGE6OyBmb250LXNyYyBodHRwczogZGF0YTo7IHJlcG9ydC11cmkgL2NzcC1yZXBvcnQNClN0cmljdC1UcmFuc3BvcnQtU2VjdXJpdHk6IG1heC1hZ2U9ODY0MDA7DQpDb250ZW50LVNlY3VyaXR5LVBvbGljeS1SZXBvcnQtT25seTogZGVmYXVsdC1zcmMgaHR0cHM6OyBzY3JpcHQtc3JjIGh0dHBzOiAndW5zYWZlLWV2YWwnICd1bnNhZmUtaW5saW5lJzsgc3R5bGUtc3JjIGh0dHBzOiAndW5zYWZlLWlubGluZSc7IGltZy1zcmMgaHR0cHM6IGRhdGE6OyBmb250LXNyYyBodHRwczogZGF0YTo7IHJlcG9ydC11cmkgL2NzcC1yZXBvcnQNCg0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>LyoKIEFuZ3VsYXJKUyB2MS41LjgKIChjKSAyMDEwLTIwMTYgR29vZ2xlLCBJbmMuIGh0dHA6Ly9hbmd1bGFyanMub3JnCiBMaWNlbnNlOiBNSVQKKi8KKGZ1bmN0aW9uKEMpeyd1c2Ugc3RyaWN0JztmdW5jdGlvbiBOKGEpe3JldHVybiBmdW5jdGlvbigpe3ZhciBiPWFyZ3VtZW50c1swXSxkO2Q9IlsiKyhhP2ErIjoiOiIiKStiKyJdIGh0dHA6Ly9lcnJvcnMuYW5ndWxhcmpzLm9yZy8xLjUuOC8iKyhhP2ErIi8iOiIiKStiO2ZvcihiPTE7Yjxhcmd1bWVudHMubGVuZ3RoO2IrKyl7ZD1kKygxPT1iPyI/IjoiJiIpKyJwIisoYi0xKSsiPSI7dmFyIGM9ZW5jb2RlVVJJQ29tcG9uZW50LGU7ZT1hcmd1bWVudHNbYl07ZT0iZnVuY3Rpb24iPT10eXBlb2YgZT9lLnRvU3RyaW5nKCkucmVwbGFjZSgvIFx7W1xzXFNdKiQvLCIiKToidW5kZWZpbmVkIj09dHlwZW9mIGU/InVuZGVmaW5lZCI6InN0cmluZyIhPXR5cGVvZiBlP0pTT04uc3RyaW5naWZ5KGUpOmU7ZCs9YyhlKX1yZXR1cm4gRXJyb3IoZCl9fWZ1bmN0aW9uIHRhKGEpe2lmKG51bGw9PWF8fFZhKGEpKXJldHVybiExO2lmKEwoYSl8fEcoYSl8fEYmJmEgaW5zdGFuY2VvZiBGKXJldHVybiEwOwp2YXIgYj0ibGVuZ3RoImluIE9iamVjdChhKSYmYS5sZW5ndGg7cmV0dXJuIFQoYikmJigwPD1iJiYoYi0xIGluIGF8fGEgaW5zdGFuY2VvZiBBcnJheSl8fCJmdW5jdGlvbiI9PXR5cGVvZiBhLml0ZW0pfWZ1bmN0aW9uIHEoYSxiLGQpe3ZhciBjLGU7aWYoYSlpZih6KGEpKWZvcihjIGluIGEpInByb3RvdHlwZSI9PWN8fCJsZW5ndGgiPT1jfHwibmFtZSI9PWN8fGEuaGFzT3duUHJvcGVydHkmJiFhLmhhc093blByb3BlcnR5KGMpfHxiLmNhbGwoZCxhW2NdLGMsYSk7ZWxzZSBpZihMKGEpfHx0YShhKSl7dmFyIGY9Im9iamVjdCIhPT10eXBlb2YgYTtjPTA7Zm9yKGU9YS5sZW5ndGg7YzxlO2MrKykoZnx8YyBpbiBhKSYmYi5jYWxsKGQsYVtjXSxjLGEpfWVsc2UgaWYoYS5mb3JFYWNoJiZhLmZvckVhY2ghPT1xKWEuZm9yRWFjaChiLGQsYSk7ZWxzZSBpZihzYyhhKSlmb3IoYyBpbiBhKWIuY2FsbChkLGFbY10sYyxhKTtlbHNlIGlmKCJmdW5jdGlvbiI9PT10eXBlb2YgYS5oYXNPd25Qcm9wZXJ0eSlmb3IoYyBpbiBhKWEuaGFzT3duUHJvcGVydHkoYykmJgpiLmNhbGwoZCxhW2NdLGMsYSk7ZWxzZSBmb3IoYyBpbiBhKXVhLmNhbGwoYSxjKSYmYi5jYWxsKGQsYVtjXSxjLGEpO3JldHVybiBhfWZ1bmN0aW9uIHRjKGEsYixkKXtmb3IodmFyIGM9T2JqZWN0LmtleXMoYSkuc29ydCgpLGU9MDtlPGMubGVuZ3RoO2UrKyliLmNhbGwoZCxhW2NbZV1dLGNbZV0pO3JldHVybiBjfWZ1bmN0aW9uIHVjKGEpe3JldHVybiBmdW5jdGlvbihiLGQpe2EoZCxiKX19ZnVuY3Rpb24gWWQoKXtyZXR1cm4rK3BifWZ1bmN0aW9uIFBiKGEsYixkKXtmb3IodmFyIGM9YS4kJGhhc2hLZXksZT0wLGY9Yi5sZW5ndGg7ZTxmOysrZSl7dmFyIGc9YltlXTtpZihEKGcpfHx6KGcpKWZvcih2YXIgaD1PYmplY3Qua2V5cyhnKSxrPTAsbD1oLmxlbmd0aDtrPGw7aysrKXt2YXIgbT1oW2tdLG49Z1ttXTtkJiZEKG4pP2RhKG4pP2FbbV09bmV3IERhdGUobi52YWx1ZU9mKCkpOldhKG4pP2FbbV09bmV3IFJlZ0V4cChuKTpuLm5vZGVOYW1lP2FbbV09bi5jbG9uZU5vZGUoITApOgpRYihuKT9hW21dPW4uY2xvbmUoKTooRChhW21dKXx8KGFbbV09TChuKT9bXTp7fSksUGIoYVttXSxbbl0sITApKTphW21dPW59fWM/YS4kJGhhc2hLZXk9YzpkZWxldGUgYS4kJGhhc2hLZXk7cmV0dXJuIGF9ZnVuY3Rpb24gUyhhKXtyZXR1cm4gUGIoYSx2YS5jYWxsKGFyZ3VtZW50cywxKSwhMSl9ZnVuY3Rpb24gWmQoYSl7cmV0dXJuIFBiKGEsdmEuY2FsbChhcmd1bWVudHMsMSksITApfWZ1bmN0aW9uIFooYSl7cmV0dXJuIHBhcnNlSW50KGEsMTApfWZ1bmN0aW9uIFJiKGEsYil7cmV0dXJuIFMoT2JqZWN0LmNyZWF0ZShhKSxiKX1mdW5jdGlvbiBBKCl7fWZ1bmN0aW9uIFhhKGEpe3JldHVybiBhfWZ1bmN0aW9uIGhhKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBhfX1mdW5jdGlvbiB2YyhhKXtyZXR1cm4geihhLnRvU3RyaW5nKSYmYS50b1N0cmluZyE9PW1hfWZ1bmN0aW9uIHkoYSl7cmV0dXJuInVuZGVmaW5lZCI9PT10eXBlb2YgYX1mdW5jdGlvbiB3KGEpe3JldHVybiJ1bmRlZmluZWQiIT09CnR5cGVvZiBhfWZ1bmN0aW9uIEQoYSl7cmV0dXJuIG51bGwhPT1hJiYib2JqZWN0Ij09PXR5cGVvZiBhfWZ1bmN0aW9uIHNjKGEpe3JldHVybiBudWxsIT09YSYmIm9iamVjdCI9PT10eXBlb2YgYSYmIXdjKGEpfWZ1bmN0aW9uIEcoYSl7cmV0dXJuInN0cmluZyI9PT10eXBlb2YgYX1mdW5jdGlvbiBUKGEpe3JldHVybiJudW1iZXIiPT09dHlwZW9mIGF9ZnVuY3Rpb24gZGEoYSl7cmV0dXJuIltvYmplY3QgRGF0ZV0iPT09bWEuY2FsbChhKX1mdW5jdGlvbiB6KGEpe3JldHVybiJmdW5jdGlvbiI9PT10eXBlb2YgYX1mdW5jdGlvbiBXYShhKXtyZXR1cm4iW29iamVjdCBSZWdFeHBdIj09PW1hLmNhbGwoYSl9ZnVuY3Rpb24gVmEoYSl7cmV0dXJuIGEmJmEud2luZG93PT09YX1mdW5jdGlvbiBZYShhKXtyZXR1cm4gYSYmYS4kZXZhbEFzeW5jJiZhLiR3YXRjaH1mdW5jdGlvbiBHYShhKXtyZXR1cm4iYm9vbGVhbiI9PT10eXBlb2YgYX1mdW5jdGlvbiAkZChhKXtyZXR1cm4gYSYmVChhLmxlbmd0aCkmJgphZS50ZXN0KG1hLmNhbGwoYSkpfWZ1bmN0aW9uIFFiKGEpe3JldHVybiEoIWF8fCEoYS5ub2RlTmFtZXx8YS5wcm9wJiZhLmF0dHImJmEuZmluZCkpfWZ1bmN0aW9uIGJlKGEpe3ZhciBiPXt9O2E9YS5zcGxpdCgiLCIpO3ZhciBkO2ZvcihkPTA7ZDxhLmxlbmd0aDtkKyspYlthW2RdXT0hMDtyZXR1cm4gYn1mdW5jdGlvbiB3YShhKXtyZXR1cm4gUShhLm5vZGVOYW1lfHxhWzBdJiZhWzBdLm5vZGVOYW1lKX1mdW5jdGlvbiBaYShhLGIpe3ZhciBkPWEuaW5kZXhPZihiKTswPD1kJiZhLnNwbGljZShkLDEpO3JldHVybiBkfWZ1bmN0aW9uIHBhKGEsYil7ZnVuY3Rpb24gZChhLGIpe3ZhciBkPWIuJCRoYXNoS2V5LGU7aWYoTChhKSl7ZT0wO2Zvcih2YXIgZj1hLmxlbmd0aDtlPGY7ZSsrKWIucHVzaChjKGFbZV0pKX1lbHNlIGlmKHNjKGEpKWZvcihlIGluIGEpYltlXT1jKGFbZV0pO2Vsc2UgaWYoYSYmImZ1bmN0aW9uIj09PXR5cGVvZiBhLmhhc093blByb3BlcnR5KWZvcihlIGluIGEpYS5oYXNPd25Qcm9wZXJ0eShlKSYmCihiW2VdPWMoYVtlXSkpO2Vsc2UgZm9yKGUgaW4gYSl1YS5jYWxsKGEsZSkmJihiW2VdPWMoYVtlXSkpO2Q/Yi4kJGhhc2hLZXk9ZDpkZWxldGUgYi4kJGhhc2hLZXk7cmV0dXJuIGJ9ZnVuY3Rpb24gYyhhKXtpZighRChhKSlyZXR1cm4gYTt2YXIgYj1mLmluZGV4T2YoYSk7aWYoLTEhPT1iKXJldHVybiBnW2JdO2lmKFZhKGEpfHxZYShhKSl0aHJvdyB4YSgiY3B3cyIpO3ZhciBiPSExLGM9ZShhKTt2b2lkIDA9PT1jJiYoYz1MKGEpP1tdOk9iamVjdC5jcmVhdGUod2MoYSkpLGI9ITApO2YucHVzaChhKTtnLnB1c2goYyk7cmV0dXJuIGI/ZChhLGMpOmN9ZnVuY3Rpb24gZShhKXtzd2l0Y2gobWEuY2FsbChhKSl7Y2FzZSAiW29iamVjdCBJbnQ4QXJyYXldIjpjYXNlICJbb2JqZWN0IEludDE2QXJyYXldIjpjYXNlICJbb2JqZWN0IEludDMyQXJyYXldIjpjYXNlICJbb2JqZWN0IEZsb2F0MzJBcnJheV0iOmNhc2UgIltvYmplY3QgRmxvYXQ2NEFycmF5XSI6Y2FzZSAiW29iamVjdCBVaW50OEFycmF5XSI6Y2FzZSAiW29iamVjdCBVaW50OENsYW1wZWRBcnJheV0iOmNhc2UgIltvYmplY3QgVWludDE2QXJyYXldIjpjYXNlICJbb2JqZWN0IFVpbnQzMkFycmF5XSI6cmV0dXJuIG5ldyBhLmNvbnN0cnVjdG9yKGMoYS5idWZmZXIpLAphLmJ5dGVPZmZzZXQsYS5sZW5ndGgpO2Nhc2UgIltvYmplY3QgQXJyYXlCdWZmZXJdIjppZighYS5zbGljZSl7dmFyIGI9bmV3IEFycmF5QnVmZmVyKGEuYnl0ZUxlbmd0aCk7KG5ldyBVaW50OEFycmF5KGIpKS5zZXQobmV3IFVpbnQ4QXJyYXkoYSkpO3JldHVybiBifXJldHVybiBhLnNsaWNlKDApO2Nhc2UgIltvYmplY3QgQm9vbGVhbl0iOmNhc2UgIltvYmplY3QgTnVtYmVyXSI6Y2FzZSAiW29iamVjdCBTdHJpbmddIjpjYXNlICJbb2JqZWN0IERhdGVdIjpyZXR1cm4gbmV3IGEuY29uc3RydWN0b3IoYS52YWx1ZU9mKCkpO2Nhc2UgIltvYmplY3QgUmVnRXhwXSI6cmV0dXJuIGI9bmV3IFJlZ0V4cChhLnNvdXJjZSxhLnRvU3RyaW5nKCkubWF0Y2goL1teXC9dKiQvKVswXSksYi5sYXN0SW5kZXg9YS5sYXN0SW5kZXgsYjtjYXNlICJbb2JqZWN0IEJsb2JdIjpyZXR1cm4gbmV3IGEuY29uc3RydWN0b3IoW2FdLHt0eXBlOmEudHlwZX0pfWlmKHooYS5jbG9uZU5vZGUpKXJldHVybiBhLmNsb25lTm9kZSghMCl9CnZhciBmPVtdLGc9W107aWYoYil7aWYoJGQoYil8fCJbb2JqZWN0IEFycmF5QnVmZmVyXSI9PT1tYS5jYWxsKGIpKXRocm93IHhhKCJjcHRhIik7aWYoYT09PWIpdGhyb3cgeGEoImNwaSIpO0woYik/Yi5sZW5ndGg9MDpxKGIsZnVuY3Rpb24oYSxkKXsiJCRoYXNoS2V5IiE9PWQmJmRlbGV0ZSBiW2RdfSk7Zi5wdXNoKGEpO2cucHVzaChiKTtyZXR1cm4gZChhLGIpfXJldHVybiBjKGEpfWZ1bmN0aW9uIG5hKGEsYil7aWYoYT09PWIpcmV0dXJuITA7aWYobnVsbD09PWF8fG51bGw9PT1iKXJldHVybiExO2lmKGEhPT1hJiZiIT09YilyZXR1cm4hMDt2YXIgZD10eXBlb2YgYSxjO2lmKGQ9PXR5cGVvZiBiJiYib2JqZWN0Ij09ZClpZihMKGEpKXtpZighTChiKSlyZXR1cm4hMTtpZigoZD1hLmxlbmd0aCk9PWIubGVuZ3RoKXtmb3IoYz0wO2M8ZDtjKyspaWYoIW5hKGFbY10sYltjXSkpcmV0dXJuITE7cmV0dXJuITB9fWVsc2V7aWYoZGEoYSkpcmV0dXJuIGRhKGIpP25hKGEuZ2V0VGltZSgpLApiLmdldFRpbWUoKSk6ITE7aWYoV2EoYSkpcmV0dXJuIFdhKGIpP2EudG9TdHJpbmcoKT09Yi50b1N0cmluZygpOiExO2lmKFlhKGEpfHxZYShiKXx8VmEoYSl8fFZhKGIpfHxMKGIpfHxkYShiKXx8V2EoYikpcmV0dXJuITE7ZD1VKCk7Zm9yKGMgaW4gYSlpZigiJCIhPT1jLmNoYXJBdCgwKSYmIXooYVtjXSkpe2lmKCFuYShhW2NdLGJbY10pKXJldHVybiExO2RbY109ITB9Zm9yKGMgaW4gYilpZighKGMgaW4gZCkmJiIkIiE9PWMuY2hhckF0KDApJiZ3KGJbY10pJiYheihiW2NdKSlyZXR1cm4hMTtyZXR1cm4hMH1yZXR1cm4hMX1mdW5jdGlvbiAkYShhLGIsZCl7cmV0dXJuIGEuY29uY2F0KHZhLmNhbGwoYixkKSl9ZnVuY3Rpb24gYWIoYSxiKXt2YXIgZD0yPGFyZ3VtZW50cy5sZW5ndGg/dmEuY2FsbChhcmd1bWVudHMsMik6W107cmV0dXJuIXooYil8fGIgaW5zdGFuY2VvZiBSZWdFeHA/YjpkLmxlbmd0aD9mdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoP2IuYXBwbHkoYSwKJGEoZCxhcmd1bWVudHMsMCkpOmIuYXBwbHkoYSxkKX06ZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD9iLmFwcGx5KGEsYXJndW1lbnRzKTpiLmNhbGwoYSl9fWZ1bmN0aW9uIGNlKGEsYil7dmFyIGQ9Yjsic3RyaW5nIj09PXR5cGVvZiBhJiYiJCI9PT1hLmNoYXJBdCgwKSYmIiQiPT09YS5jaGFyQXQoMSk/ZD12b2lkIDA6VmEoYik/ZD0iJFdJTkRPVyI6YiYmQy5kb2N1bWVudD09PWI/ZD0iJERPQ1VNRU5UIjpZYShiKSYmKGQ9IiRTQ09QRSIpO3JldHVybiBkfWZ1bmN0aW9uIGJiKGEsYil7aWYoIXkoYSkpcmV0dXJuIFQoYil8fChiPWI/MjpudWxsKSxKU09OLnN0cmluZ2lmeShhLGNlLGIpfWZ1bmN0aW9uIHhjKGEpe3JldHVybiBHKGEpP0pTT04ucGFyc2UoYSk6YX1mdW5jdGlvbiB5YyhhLGIpe2E9YS5yZXBsYWNlKGRlLCIiKTt2YXIgZD1EYXRlLnBhcnNlKCJKYW4gMDEsIDE5NzAgMDA6MDA6MDAgIithKS82RTQ7cmV0dXJuIGlzTmFOKGQpP2I6ZH1mdW5jdGlvbiBTYihhLApiLGQpe2Q9ZD8tMToxO3ZhciBjPWEuZ2V0VGltZXpvbmVPZmZzZXQoKTtiPXljKGIsYyk7ZCo9Yi1jO2E9bmV3IERhdGUoYS5nZXRUaW1lKCkpO2Euc2V0TWludXRlcyhhLmdldE1pbnV0ZXMoKStkKTtyZXR1cm4gYX1mdW5jdGlvbiB5YShhKXthPUYoYSkuY2xvbmUoKTt0cnl7YS5lbXB0eSgpfWNhdGNoKGIpe312YXIgZD1GKCI8ZGl2PiIpLmFwcGVuZChhKS5odG1sKCk7dHJ5e3JldHVybiBhWzBdLm5vZGVUeXBlPT09TWE/UShkKTpkLm1hdGNoKC9eKDxbXj5dKz4pLylbMV0ucmVwbGFjZSgvXjwoW1x3XC1dKykvLGZ1bmN0aW9uKGEsYil7cmV0dXJuIjwiK1EoYil9KX1jYXRjaChjKXtyZXR1cm4gUShkKX19ZnVuY3Rpb24gemMoYSl7dHJ5e3JldHVybiBkZWNvZGVVUklDb21wb25lbnQoYSl9Y2F0Y2goYil7fX1mdW5jdGlvbiBBYyhhKXt2YXIgYj17fTtxKChhfHwiIikuc3BsaXQoIiYiKSxmdW5jdGlvbihhKXt2YXIgYyxlLGY7YSYmKGU9YT1hLnJlcGxhY2UoL1wrL2csIiUyMCIpLApjPWEuaW5kZXhPZigiPSIpLC0xIT09YyYmKGU9YS5zdWJzdHJpbmcoMCxjKSxmPWEuc3Vic3RyaW5nKGMrMSkpLGU9emMoZSksdyhlKSYmKGY9dyhmKT96YyhmKTohMCx1YS5jYWxsKGIsZSk/TChiW2VdKT9iW2VdLnB1c2goZik6YltlXT1bYltlXSxmXTpiW2VdPWYpKX0pO3JldHVybiBifWZ1bmN0aW9uIFRiKGEpe3ZhciBiPVtdO3EoYSxmdW5jdGlvbihhLGMpe0woYSk/cShhLGZ1bmN0aW9uKGEpe2IucHVzaChlYShjLCEwKSsoITA9PT1hPyIiOiI9IitlYShhLCEwKSkpfSk6Yi5wdXNoKGVhKGMsITApKyghMD09PWE/IiI6Ij0iK2VhKGEsITApKSl9KTtyZXR1cm4gYi5sZW5ndGg/Yi5qb2luKCImIik6IiJ9ZnVuY3Rpb24gcWIoYSl7cmV0dXJuIGVhKGEsITApLnJlcGxhY2UoLyUyNi9naSwiJiIpLnJlcGxhY2UoLyUzRC9naSwiPSIpLnJlcGxhY2UoLyUyQi9naSwiKyIpfWZ1bmN0aW9uIGVhKGEsYil7cmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChhKS5yZXBsYWNlKC8lNDAvZ2ksCiJAIikucmVwbGFjZSgvJTNBL2dpLCI6IikucmVwbGFjZSgvJTI0L2csIiQiKS5yZXBsYWNlKC8lMkMvZ2ksIiwiKS5yZXBsYWNlKC8lM0IvZ2ksIjsiKS5yZXBsYWNlKC8lMjAvZyxiPyIlMjAiOiIrIil9ZnVuY3Rpb24gZWUoYSxiKXt2YXIgZCxjLGU9TmEubGVuZ3RoO2ZvcihjPTA7YzxlOysrYylpZihkPU5hW2NdK2IsRyhkPWEuZ2V0QXR0cmlidXRlKGQpKSlyZXR1cm4gZDtyZXR1cm4gbnVsbH1mdW5jdGlvbiBmZShhLGIpe3ZhciBkLGMsZT17fTtxKE5hLGZ1bmN0aW9uKGIpe2IrPSJhcHAiOyFkJiZhLmhhc0F0dHJpYnV0ZSYmYS5oYXNBdHRyaWJ1dGUoYikmJihkPWEsYz1hLmdldEF0dHJpYnV0ZShiKSl9KTtxKE5hLGZ1bmN0aW9uKGIpe2IrPSJhcHAiO3ZhciBlOyFkJiYoZT1hLnF1ZXJ5U2VsZWN0b3IoIlsiK2IucmVwbGFjZSgiOiIsIlxcOiIpKyJdIikpJiYoZD1lLGM9ZS5nZXRBdHRyaWJ1dGUoYikpfSk7ZCYmKGUuc3RyaWN0RGk9bnVsbCE9PWVlKGQsInN0cmljdC1kaSIpLApiKGQsYz9bY106W10sZSkpfWZ1bmN0aW9uIEJjKGEsYixkKXtEKGQpfHwoZD17fSk7ZD1TKHtzdHJpY3REaTohMX0sZCk7dmFyIGM9ZnVuY3Rpb24oKXthPUYoYSk7aWYoYS5pbmplY3RvcigpKXt2YXIgYz1hWzBdPT09Qy5kb2N1bWVudD8iZG9jdW1lbnQiOnlhKGEpO3Rocm93IHhhKCJidHN0cnBkIixjLnJlcGxhY2UoLzwvLCImbHQ7IikucmVwbGFjZSgvPi8sIiZndDsiKSk7fWI9Ynx8W107Yi51bnNoaWZ0KFsiJHByb3ZpZGUiLGZ1bmN0aW9uKGIpe2IudmFsdWUoIiRyb290RWxlbWVudCIsYSl9XSk7ZC5kZWJ1Z0luZm9FbmFibGVkJiZiLnB1c2goWyIkY29tcGlsZVByb3ZpZGVyIixmdW5jdGlvbihhKXthLmRlYnVnSW5mb0VuYWJsZWQoITApfV0pO2IudW5zaGlmdCgibmciKTtjPWNiKGIsZC5zdHJpY3REaSk7Yy5pbnZva2UoWyIkcm9vdFNjb3BlIiwiJHJvb3RFbGVtZW50IiwiJGNvbXBpbGUiLCIkaW5qZWN0b3IiLGZ1bmN0aW9uKGEsYixjLGQpe2EuJGFwcGx5KGZ1bmN0aW9uKCl7Yi5kYXRhKCIkaW5qZWN0b3IiLApkKTtjKGIpKGEpfSl9XSk7cmV0dXJuIGN9LGU9L15OR19FTkFCTEVfREVCVUdfSU5GTyEvLGY9L15OR19ERUZFUl9CT09UU1RSQVAhLztDJiZlLnRlc3QoQy5uYW1lKSYmKGQuZGVidWdJbmZvRW5hYmxlZD0hMCxDLm5hbWU9Qy5uYW1lLnJlcGxhY2UoZSwiIikpO2lmKEMmJiFmLnRlc3QoQy5uYW1lKSlyZXR1cm4gYygpO0MubmFtZT1DLm5hbWUucmVwbGFjZShmLCIiKTtjYS5yZXN1bWVCb290c3RyYXA9ZnVuY3Rpb24oYSl7cShhLGZ1bmN0aW9uKGEpe2IucHVzaChhKX0pO3JldHVybiBjKCl9O3ooY2EucmVzdW1lRGVmZXJyZWRCb290c3RyYXApJiZjYS5yZXN1bWVEZWZlcnJlZEJvb3RzdHJhcCgpfWZ1bmN0aW9uIGdlKCl7Qy5uYW1lPSJOR19FTkFCTEVfREVCVUdfSU5GTyEiK0MubmFtZTtDLmxvY2F0aW9uLnJlbG9hZCgpfWZ1bmN0aW9uIGhlKGEpe2E9Y2EuZWxlbWVudChhKS5pbmplY3RvcigpO2lmKCFhKXRocm93IHhhKCJ0ZXN0Iik7cmV0dXJuIGEuZ2V0KCIkJHRlc3RhYmlsaXR5Iil9CmZ1bmN0aW9uIENjKGEsYil7Yj1ifHwiXyI7cmV0dXJuIGEucmVwbGFjZShpZSxmdW5jdGlvbihhLGMpe3JldHVybihjP2I6IiIpK2EudG9Mb3dlckNhc2UoKX0pfWZ1bmN0aW9uIGplKCl7dmFyIGE7aWYoIURjKXt2YXIgYj1yYigpOyhxYT15KGIpP0MualF1ZXJ5OmI/Q1tiXTp2b2lkIDApJiZxYS5mbi5vbj8oRj1xYSxTKHFhLmZuLHtzY29wZTpPYS5zY29wZSxpc29sYXRlU2NvcGU6T2EuaXNvbGF0ZVNjb3BlLGNvbnRyb2xsZXI6T2EuY29udHJvbGxlcixpbmplY3RvcjpPYS5pbmplY3Rvcixpbmhlcml0ZWREYXRhOk9hLmluaGVyaXRlZERhdGF9KSxhPXFhLmNsZWFuRGF0YSxxYS5jbGVhbkRhdGE9ZnVuY3Rpb24oYil7Zm9yKHZhciBjLGU9MCxmO251bGwhPShmPWJbZV0pO2UrKykoYz1xYS5fZGF0YShmLCJldmVudHMiKSkmJmMuJGRlc3Ryb3kmJnFhKGYpLnRyaWdnZXJIYW5kbGVyKCIkZGVzdHJveSIpO2EoYil9KTpGPU87Y2EuZWxlbWVudD1GO0RjPSEwfX1mdW5jdGlvbiBzYihhLApiLGQpe2lmKCFhKXRocm93IHhhKCJhcmVxIixifHwiPyIsZHx8InJlcXVpcmVkIik7cmV0dXJuIGF9ZnVuY3Rpb24gUGEoYSxiLGQpe2QmJkwoYSkmJihhPWFbYS5sZW5ndGgtMV0pO3NiKHooYSksYiwibm90IGEgZnVuY3Rpb24sIGdvdCAiKyhhJiYib2JqZWN0Ij09PXR5cGVvZiBhP2EuY29uc3RydWN0b3IubmFtZXx8Ik9iamVjdCI6dHlwZW9mIGEpKTtyZXR1cm4gYX1mdW5jdGlvbiBRYShhLGIpe2lmKCJoYXNPd25Qcm9wZXJ0eSI9PT1hKXRocm93IHhhKCJiYWRuYW1lIixiKTt9ZnVuY3Rpb24gRWMoYSxiLGQpe2lmKCFiKXJldHVybiBhO2I9Yi5zcGxpdCgiLiIpO2Zvcih2YXIgYyxlPWEsZj1iLmxlbmd0aCxnPTA7ZzxmO2crKyljPWJbZ10sYSYmKGE9KGU9YSlbY10pO3JldHVybiFkJiZ6KGEpP2FiKGUsYSk6YX1mdW5jdGlvbiB0YihhKXtmb3IodmFyIGI9YVswXSxkPWFbYS5sZW5ndGgtMV0sYyxlPTE7YiE9PWQmJihiPWIubmV4dFNpYmxpbmcpO2UrKylpZihjfHxhW2VdIT09CmIpY3x8KGM9Rih2YS5jYWxsKGEsMCxlKSkpLGMucHVzaChiKTtyZXR1cm4gY3x8YX1mdW5jdGlvbiBVKCl7cmV0dXJuIE9iamVjdC5jcmVhdGUobnVsbCl9ZnVuY3Rpb24ga2UoYSl7ZnVuY3Rpb24gYihhLGIsYyl7cmV0dXJuIGFbYl18fChhW2JdPWMoKSl9dmFyIGQ9TigiJGluamVjdG9yIiksYz1OKCJuZyIpO2E9YihhLCJhbmd1bGFyIixPYmplY3QpO2EuJCRtaW5FcnI9YS4kJG1pbkVycnx8TjtyZXR1cm4gYihhLCJtb2R1bGUiLGZ1bmN0aW9uKCl7dmFyIGE9e307cmV0dXJuIGZ1bmN0aW9uKGYsZyxoKXtpZigiaGFzT3duUHJvcGVydHkiPT09Zil0aHJvdyBjKCJiYWRuYW1lIiwibW9kdWxlIik7ZyYmYS5oYXNPd25Qcm9wZXJ0eShmKSYmKGFbZl09bnVsbCk7cmV0dXJuIGIoYSxmLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShiLGQsZSxmKXtmfHwoZj1jKTtyZXR1cm4gZnVuY3Rpb24oKXtmW2V8fCJwdXNoIl0oW2IsZCxhcmd1bWVudHNdKTtyZXR1cm4gUn19ZnVuY3Rpb24gYihhLApkKXtyZXR1cm4gZnVuY3Rpb24oYixlKXtlJiZ6KGUpJiYoZS4kJG1vZHVsZU5hbWU9Zik7Yy5wdXNoKFthLGQsYXJndW1lbnRzXSk7cmV0dXJuIFJ9fWlmKCFnKXRocm93IGQoIm5vbW9kIixmKTt2YXIgYz1bXSxlPVtdLHA9W10sdT1hKCIkaW5qZWN0b3IiLCJpbnZva2UiLCJwdXNoIixlKSxSPXtfaW52b2tlUXVldWU6YyxfY29uZmlnQmxvY2tzOmUsX3J1bkJsb2NrczpwLHJlcXVpcmVzOmcsbmFtZTpmLHByb3ZpZGVyOmIoIiRwcm92aWRlIiwicHJvdmlkZXIiKSxmYWN0b3J5OmIoIiRwcm92aWRlIiwiZmFjdG9yeSIpLHNlcnZpY2U6YigiJHByb3ZpZGUiLCJzZXJ2aWNlIiksdmFsdWU6YSgiJHByb3ZpZGUiLCJ2YWx1ZSIpLGNvbnN0YW50OmEoIiRwcm92aWRlIiwiY29uc3RhbnQiLCJ1bnNoaWZ0IiksZGVjb3JhdG9yOmIoIiRwcm92aWRlIiwiZGVjb3JhdG9yIiksYW5pbWF0aW9uOmIoIiRhbmltYXRlUHJvdmlkZXIiLCJyZWdpc3RlciIpLGZpbHRlcjpiKCIkZmlsdGVyUHJvdmlkZXIiLAoicmVnaXN0ZXIiKSxjb250cm9sbGVyOmIoIiRjb250cm9sbGVyUHJvdmlkZXIiLCJyZWdpc3RlciIpLGRpcmVjdGl2ZTpiKCIkY29tcGlsZVByb3ZpZGVyIiwiZGlyZWN0aXZlIiksY29tcG9uZW50OmIoIiRjb21waWxlUHJvdmlkZXIiLCJjb21wb25lbnQiKSxjb25maWc6dSxydW46ZnVuY3Rpb24oYSl7cC5wdXNoKGEpO3JldHVybiB0aGlzfX07aCYmdShoKTtyZXR1cm4gUn0pfX0pfWZ1bmN0aW9uIGlhKGEsYil7aWYoTChhKSl7Yj1ifHxbXTtmb3IodmFyIGQ9MCxjPWEubGVuZ3RoO2Q8YztkKyspYltkXT1hW2RdfWVsc2UgaWYoRChhKSlmb3IoZCBpbiBiPWJ8fHt9LGEpaWYoIiQiIT09ZC5jaGFyQXQoMCl8fCIkIiE9PWQuY2hhckF0KDEpKWJbZF09YVtkXTtyZXR1cm4gYnx8YX1mdW5jdGlvbiBsZShhKXtTKGEse2Jvb3RzdHJhcDpCYyxjb3B5OnBhLGV4dGVuZDpTLG1lcmdlOlpkLGVxdWFsczpuYSxlbGVtZW50OkYsZm9yRWFjaDpxLGluamVjdG9yOmNiLG5vb3A6QSxiaW5kOmFiLAp0b0pzb246YmIsZnJvbUpzb246eGMsaWRlbnRpdHk6WGEsaXNVbmRlZmluZWQ6eSxpc0RlZmluZWQ6dyxpc1N0cmluZzpHLGlzRnVuY3Rpb246eixpc09iamVjdDpELGlzTnVtYmVyOlQsaXNFbGVtZW50OlFiLGlzQXJyYXk6TCx2ZXJzaW9uOm1lLGlzRGF0ZTpkYSxsb3dlcmNhc2U6USx1cHBlcmNhc2U6dWIsY2FsbGJhY2tzOnskJGNvdW50ZXI6MH0sZ2V0VGVzdGFiaWxpdHk6aGUsJCRtaW5FcnI6TiwkJGNzcDpCYSxyZWxvYWRXaXRoRGVidWdJbmZvOmdlfSk7VWI9a2UoQyk7VWIoIm5nIixbIm5nTG9jYWxlIl0sWyIkcHJvdmlkZSIsZnVuY3Rpb24oYSl7YS5wcm92aWRlcih7JCRzYW5pdGl6ZVVyaTpuZX0pO2EucHJvdmlkZXIoIiRjb21waWxlIixGYykuZGlyZWN0aXZlKHthOm9lLGlucHV0OkdjLHRleHRhcmVhOkdjLGZvcm06cGUsc2NyaXB0OnFlLHNlbGVjdDpyZSxzdHlsZTpzZSxvcHRpb246dGUsbmdCaW5kOnVlLG5nQmluZEh0bWw6dmUsbmdCaW5kVGVtcGxhdGU6d2UsbmdDbGFzczp4ZSwKbmdDbGFzc0V2ZW46eWUsbmdDbGFzc09kZDp6ZSxuZ0Nsb2FrOkFlLG5nQ29udHJvbGxlcjpCZSxuZ0Zvcm06Q2UsbmdIaWRlOkRlLG5nSWY6RWUsbmdJbmNsdWRlOkZlLG5nSW5pdDpHZSxuZ05vbkJpbmRhYmxlOkhlLG5nUGx1cmFsaXplOkllLG5nUmVwZWF0OkplLG5nU2hvdzpLZSxuZ1N0eWxlOkxlLG5nU3dpdGNoOk1lLG5nU3dpdGNoV2hlbjpOZSxuZ1N3aXRjaERlZmF1bHQ6T2UsbmdPcHRpb25zOlBlLG5nVHJhbnNjbHVkZTpRZSxuZ01vZGVsOlJlLG5nTGlzdDpTZSxuZ0NoYW5nZTpUZSxwYXR0ZXJuOkhjLG5nUGF0dGVybjpIYyxyZXF1aXJlZDpJYyxuZ1JlcXVpcmVkOkljLG1pbmxlbmd0aDpKYyxuZ01pbmxlbmd0aDpKYyxtYXhsZW5ndGg6S2MsbmdNYXhsZW5ndGg6S2MsbmdWYWx1ZTpVZSxuZ01vZGVsT3B0aW9uczpWZX0pLmRpcmVjdGl2ZSh7bmdJbmNsdWRlOldlfSkuZGlyZWN0aXZlKHZiKS5kaXJlY3RpdmUoTGMpO2EucHJvdmlkZXIoeyRhbmNob3JTY3JvbGw6WGUsCiRhbmltYXRlOlllLCRhbmltYXRlQ3NzOlplLCQkYW5pbWF0ZUpzOiRlLCQkYW5pbWF0ZVF1ZXVlOmFmLCQkQW5pbWF0ZVJ1bm5lcjpiZiwkJGFuaW1hdGVBc3luY1J1bjpjZiwkYnJvd3NlcjpkZiwkY2FjaGVGYWN0b3J5OmVmLCRjb250cm9sbGVyOmZmLCRkb2N1bWVudDpnZiwkZXhjZXB0aW9uSGFuZGxlcjpoZiwkZmlsdGVyOk1jLCQkZm9yY2VSZWZsb3c6amYsJGludGVycG9sYXRlOmtmLCRpbnRlcnZhbDpsZiwkaHR0cDptZiwkaHR0cFBhcmFtU2VyaWFsaXplcjpuZiwkaHR0cFBhcmFtU2VyaWFsaXplckpRTGlrZTpvZiwkaHR0cEJhY2tlbmQ6cGYsJHhockZhY3Rvcnk6cWYsJGpzb25wQ2FsbGJhY2tzOnJmLCRsb2NhdGlvbjpzZiwkbG9nOnRmLCRwYXJzZTp1Ziwkcm9vdFNjb3BlOnZmLCRxOndmLCQkcTp4Ziwkc2NlOnlmLCRzY2VEZWxlZ2F0ZTp6Ziwkc25pZmZlcjpBZiwkdGVtcGxhdGVDYWNoZTpCZiwkdGVtcGxhdGVSZXF1ZXN0OkNmLCQkdGVzdGFiaWxpdHk6RGYsJHRpbWVvdXQ6RWYsCiR3aW5kb3c6RmYsJCRyQUY6R2YsJCRqcUxpdGU6SGYsJCRIYXNoTWFwOklmLCQkY29va2llUmVhZGVyOkpmfSl9XSl9ZnVuY3Rpb24gZGIoYSl7cmV0dXJuIGEucmVwbGFjZShLZixmdW5jdGlvbihhLGQsYyxlKXtyZXR1cm4gZT9jLnRvVXBwZXJDYXNlKCk6Y30pLnJlcGxhY2UoTGYsIk1veiQxIil9ZnVuY3Rpb24gTmMoYSl7YT1hLm5vZGVUeXBlO3JldHVybiAxPT09YXx8IWF8fDk9PT1hfWZ1bmN0aW9uIE9jKGEsYil7dmFyIGQsYyxlPWIuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGY9W107aWYoVmIudGVzdChhKSl7ZD1lLmFwcGVuZENoaWxkKGIuY3JlYXRlRWxlbWVudCgiZGl2IikpO2M9KE1mLmV4ZWMoYSl8fFsiIiwiIl0pWzFdLnRvTG93ZXJDYXNlKCk7Yz1qYVtjXXx8amEuX2RlZmF1bHQ7ZC5pbm5lckhUTUw9Y1sxXSthLnJlcGxhY2UoTmYsIjwkMT48LyQyPiIpK2NbMl07Zm9yKGM9Y1swXTtjLS07KWQ9ZC5sYXN0Q2hpbGQ7Zj0kYShmLGQuY2hpbGROb2Rlcyk7ZD1lLmZpcnN0Q2hpbGQ7CmQudGV4dENvbnRlbnQ9IiJ9ZWxzZSBmLnB1c2goYi5jcmVhdGVUZXh0Tm9kZShhKSk7ZS50ZXh0Q29udGVudD0iIjtlLmlubmVySFRNTD0iIjtxKGYsZnVuY3Rpb24oYSl7ZS5hcHBlbmRDaGlsZChhKX0pO3JldHVybiBlfWZ1bmN0aW9uIFBjKGEsYil7dmFyIGQ9YS5wYXJlbnROb2RlO2QmJmQucmVwbGFjZUNoaWxkKGIsYSk7Yi5hcHBlbmRDaGlsZChhKX1mdW5jdGlvbiBPKGEpe2lmKGEgaW5zdGFuY2VvZiBPKXJldHVybiBhO3ZhciBiO0coYSkmJihhPVcoYSksYj0hMCk7aWYoISh0aGlzIGluc3RhbmNlb2YgTykpe2lmKGImJiI8IiE9YS5jaGFyQXQoMCkpdGhyb3cgV2IoIm5vc2VsIik7cmV0dXJuIG5ldyBPKGEpfWlmKGIpe2I9Qy5kb2N1bWVudDt2YXIgZDthPShkPU9mLmV4ZWMoYSkpP1tiLmNyZWF0ZUVsZW1lbnQoZFsxXSldOihkPU9jKGEsYikpP2QuY2hpbGROb2RlczpbXX1RYyh0aGlzLGEpfWZ1bmN0aW9uIFhiKGEpe3JldHVybiBhLmNsb25lTm9kZSghMCl9ZnVuY3Rpb24gd2IoYSwKYil7Ynx8ZWIoYSk7aWYoYS5xdWVyeVNlbGVjdG9yQWxsKWZvcih2YXIgZD1hLnF1ZXJ5U2VsZWN0b3JBbGwoIioiKSxjPTAsZT1kLmxlbmd0aDtjPGU7YysrKWViKGRbY10pfWZ1bmN0aW9uIFJjKGEsYixkLGMpe2lmKHcoYykpdGhyb3cgV2IoIm9mZmFyZ3MiKTt2YXIgZT0oYz14YihhKSkmJmMuZXZlbnRzLGY9YyYmYy5oYW5kbGU7aWYoZilpZihiKXt2YXIgZz1mdW5jdGlvbihiKXt2YXIgYz1lW2JdO3coZCkmJlphKGN8fFtdLGQpO3coZCkmJmMmJjA8Yy5sZW5ndGh8fChhLnJlbW92ZUV2ZW50TGlzdGVuZXIoYixmLCExKSxkZWxldGUgZVtiXSl9O3EoYi5zcGxpdCgiICIpLGZ1bmN0aW9uKGEpe2coYSk7eWJbYV0mJmcoeWJbYV0pfSl9ZWxzZSBmb3IoYiBpbiBlKSIkZGVzdHJveSIhPT1iJiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoYixmLCExKSxkZWxldGUgZVtiXX1mdW5jdGlvbiBlYihhLGIpe3ZhciBkPWEubmczMzksYz1kJiZmYltkXTtjJiYoYj9kZWxldGUgYy5kYXRhW2JdOgooYy5oYW5kbGUmJihjLmV2ZW50cy4kZGVzdHJveSYmYy5oYW5kbGUoe30sIiRkZXN0cm95IiksUmMoYSkpLGRlbGV0ZSBmYltkXSxhLm5nMzM5PXZvaWQgMCkpfWZ1bmN0aW9uIHhiKGEsYil7dmFyIGQ9YS5uZzMzOSxkPWQmJmZiW2RdO2ImJiFkJiYoYS5uZzMzOT1kPSsrUGYsZD1mYltkXT17ZXZlbnRzOnt9LGRhdGE6e30saGFuZGxlOnZvaWQgMH0pO3JldHVybiBkfWZ1bmN0aW9uIFliKGEsYixkKXtpZihOYyhhKSl7dmFyIGM9dyhkKSxlPSFjJiZiJiYhRChiKSxmPSFiO2E9KGE9eGIoYSwhZSkpJiZhLmRhdGE7aWYoYylhW2JdPWQ7ZWxzZXtpZihmKXJldHVybiBhO2lmKGUpcmV0dXJuIGEmJmFbYl07UyhhLGIpfX19ZnVuY3Rpb24gemIoYSxiKXtyZXR1cm4gYS5nZXRBdHRyaWJ1dGU/LTE8KCIgIisoYS5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fCIiKSsiICIpLnJlcGxhY2UoL1tcblx0XS9nLCIgIikuaW5kZXhPZigiICIrYisiICIpOiExfWZ1bmN0aW9uIEFiKGEsYil7YiYmYS5zZXRBdHRyaWJ1dGUmJgpxKGIuc3BsaXQoIiAiKSxmdW5jdGlvbihiKXthLnNldEF0dHJpYnV0ZSgiY2xhc3MiLFcoKCIgIisoYS5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fCIiKSsiICIpLnJlcGxhY2UoL1tcblx0XS9nLCIgIikucmVwbGFjZSgiICIrVyhiKSsiICIsIiAiKSkpfSl9ZnVuY3Rpb24gQmIoYSxiKXtpZihiJiZhLnNldEF0dHJpYnV0ZSl7dmFyIGQ9KCIgIisoYS5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fCIiKSsiICIpLnJlcGxhY2UoL1tcblx0XS9nLCIgIik7cShiLnNwbGl0KCIgIiksZnVuY3Rpb24oYSl7YT1XKGEpOy0xPT09ZC5pbmRleE9mKCIgIithKyIgIikmJihkKz1hKyIgIil9KTthLnNldEF0dHJpYnV0ZSgiY2xhc3MiLFcoZCkpfX1mdW5jdGlvbiBRYyhhLGIpe2lmKGIpaWYoYi5ub2RlVHlwZSlhW2EubGVuZ3RoKytdPWI7ZWxzZXt2YXIgZD1iLmxlbmd0aDtpZigibnVtYmVyIj09PXR5cGVvZiBkJiZiLndpbmRvdyE9PWIpe2lmKGQpZm9yKHZhciBjPTA7YzxkO2MrKylhW2EubGVuZ3RoKytdPQpiW2NdfWVsc2UgYVthLmxlbmd0aCsrXT1ifX1mdW5jdGlvbiBTYyhhLGIpe3JldHVybiBDYihhLCIkIisoYnx8Im5nQ29udHJvbGxlciIpKyJDb250cm9sbGVyIil9ZnVuY3Rpb24gQ2IoYSxiLGQpezk9PWEubm9kZVR5cGUmJihhPWEuZG9jdW1lbnRFbGVtZW50KTtmb3IoYj1MKGIpP2I6W2JdO2E7KXtmb3IodmFyIGM9MCxlPWIubGVuZ3RoO2M8ZTtjKyspaWYodyhkPUYuZGF0YShhLGJbY10pKSlyZXR1cm4gZDthPWEucGFyZW50Tm9kZXx8MTE9PT1hLm5vZGVUeXBlJiZhLmhvc3R9fWZ1bmN0aW9uIFRjKGEpe2Zvcih3YihhLCEwKTthLmZpcnN0Q2hpbGQ7KWEucmVtb3ZlQ2hpbGQoYS5maXJzdENoaWxkKX1mdW5jdGlvbiBEYihhLGIpe2J8fHdiKGEpO3ZhciBkPWEucGFyZW50Tm9kZTtkJiZkLnJlbW92ZUNoaWxkKGEpfWZ1bmN0aW9uIFFmKGEsYil7Yj1ifHxDO2lmKCJjb21wbGV0ZSI9PT1iLmRvY3VtZW50LnJlYWR5U3RhdGUpYi5zZXRUaW1lb3V0KGEpO2Vsc2UgRihiKS5vbigibG9hZCIsCmEpfWZ1bmN0aW9uIFVjKGEsYil7dmFyIGQ9RWJbYi50b0xvd2VyQ2FzZSgpXTtyZXR1cm4gZCYmVmNbd2EoYSldJiZkfWZ1bmN0aW9uIFJmKGEsYil7dmFyIGQ9ZnVuY3Rpb24oYyxkKXtjLmlzRGVmYXVsdFByZXZlbnRlZD1mdW5jdGlvbigpe3JldHVybiBjLmRlZmF1bHRQcmV2ZW50ZWR9O3ZhciBmPWJbZHx8Yy50eXBlXSxnPWY/Zi5sZW5ndGg6MDtpZihnKXtpZih5KGMuaW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKSl7dmFyIGg9Yy5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb247Yy5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb249ZnVuY3Rpb24oKXtjLmltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD0hMDtjLnN0b3BQcm9wYWdhdGlvbiYmYy5zdG9wUHJvcGFnYXRpb24oKTtoJiZoLmNhbGwoYyl9fWMuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9ZnVuY3Rpb24oKXtyZXR1cm4hMD09PWMuaW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkfTt2YXIgaz1mLnNwZWNpYWxIYW5kbGVyV3JhcHBlcnx8ClNmOzE8ZyYmKGY9aWEoZikpO2Zvcih2YXIgbD0wO2w8ZztsKyspYy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpfHxrKGEsYyxmW2xdKX19O2QuZWxlbT1hO3JldHVybiBkfWZ1bmN0aW9uIFNmKGEsYixkKXtkLmNhbGwoYSxiKX1mdW5jdGlvbiBUZihhLGIsZCl7dmFyIGM9Yi5yZWxhdGVkVGFyZ2V0O2MmJihjPT09YXx8VWYuY2FsbChhLGMpKXx8ZC5jYWxsKGEsYil9ZnVuY3Rpb24gSGYoKXt0aGlzLiRnZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gUyhPLHtoYXNDbGFzczpmdW5jdGlvbihhLGIpe2EuYXR0ciYmKGE9YVswXSk7cmV0dXJuIHpiKGEsYil9LGFkZENsYXNzOmZ1bmN0aW9uKGEsYil7YS5hdHRyJiYoYT1hWzBdKTtyZXR1cm4gQmIoYSxiKX0scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYSxiKXthLmF0dHImJihhPWFbMF0pO3JldHVybiBBYihhLGIpfX0pfX1mdW5jdGlvbiBDYShhLGIpe3ZhciBkPWEmJmEuJCRoYXNoS2V5O2lmKGQpcmV0dXJuImZ1bmN0aW9uIj09PXR5cGVvZiBkJiYKKGQ9YS4kJGhhc2hLZXkoKSksZDtkPXR5cGVvZiBhO3JldHVybiBkPSJmdW5jdGlvbiI9PWR8fCJvYmplY3QiPT1kJiZudWxsIT09YT9hLiQkaGFzaEtleT1kKyI6IisoYnx8WWQpKCk6ZCsiOiIrYX1mdW5jdGlvbiBSYShhLGIpe2lmKGIpe3ZhciBkPTA7dGhpcy5uZXh0VWlkPWZ1bmN0aW9uKCl7cmV0dXJuKytkfX1xKGEsdGhpcy5wdXQsdGhpcyl9ZnVuY3Rpb24gV2MoYSl7YT0oRnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSkrIiAiKS5yZXBsYWNlKFZmLCIiKTtyZXR1cm4gYS5tYXRjaChXZil8fGEubWF0Y2goWGYpfWZ1bmN0aW9uIFlmKGEpe3JldHVybihhPVdjKGEpKT8iZnVuY3Rpb24oIisoYVsxXXx8IiIpLnJlcGxhY2UoL1tcc1xyXG5dKy8sIiAiKSsiKSI6ImZuIn1mdW5jdGlvbiBjYihhLGIpe2Z1bmN0aW9uIGQoYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7aWYoRChiKSlxKGIsdWMoYSkpO2Vsc2UgcmV0dXJuIGEoYixjKX19ZnVuY3Rpb24gYyhhLGIpe1FhKGEsCiJzZXJ2aWNlIik7aWYoeihiKXx8TChiKSliPXAuaW5zdGFudGlhdGUoYik7aWYoIWIuJGdldCl0aHJvdyBIYSgicGdldCIsYSk7cmV0dXJuIG5bYSsiUHJvdmlkZXIiXT1ifWZ1bmN0aW9uIGUoYSxiKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYz1CLmludm9rZShiLHRoaXMpO2lmKHkoYykpdGhyb3cgSGEoInVuZGVmIixhKTtyZXR1cm4gY319ZnVuY3Rpb24gZihhLGIsZCl7cmV0dXJuIGMoYSx7JGdldDohMSE9PWQ/ZShhLGIpOmJ9KX1mdW5jdGlvbiBnKGEpe3NiKHkoYSl8fEwoYSksIm1vZHVsZXNUb0xvYWQiLCJub3QgYW4gYXJyYXkiKTt2YXIgYj1bXSxjO3EoYSxmdW5jdGlvbihhKXtmdW5jdGlvbiBkKGEpe3ZhciBiLGM7Yj0wO2ZvcihjPWEubGVuZ3RoO2I8YztiKyspe3ZhciBlPWFbYl0sZj1wLmdldChlWzBdKTtmW2VbMV1dLmFwcGx5KGYsZVsyXSl9fWlmKCFtLmdldChhKSl7bS5wdXQoYSwhMCk7dHJ5e0coYSk/KGM9VWIoYSksYj1iLmNvbmNhdChnKGMucmVxdWlyZXMpKS5jb25jYXQoYy5fcnVuQmxvY2tzKSwKZChjLl9pbnZva2VRdWV1ZSksZChjLl9jb25maWdCbG9ja3MpKTp6KGEpP2IucHVzaChwLmludm9rZShhKSk6TChhKT9iLnB1c2gocC5pbnZva2UoYSkpOlBhKGEsIm1vZHVsZSIpfWNhdGNoKGUpe3Rocm93IEwoYSkmJihhPWFbYS5sZW5ndGgtMV0pLGUubWVzc2FnZSYmZS5zdGFjayYmLTE9PWUuc3RhY2suaW5kZXhPZihlLm1lc3NhZ2UpJiYoZT1lLm1lc3NhZ2UrIlxuIitlLnN0YWNrKSxIYSgibW9kdWxlcnIiLGEsZS5zdGFja3x8ZS5tZXNzYWdlfHxlKTt9fX0pO3JldHVybiBifWZ1bmN0aW9uIGgoYSxjKXtmdW5jdGlvbiBkKGIsZSl7aWYoYS5oYXNPd25Qcm9wZXJ0eShiKSl7aWYoYVtiXT09PWspdGhyb3cgSGEoImNkZXAiLGIrIiA8LSAiK2wuam9pbigiIDwtICIpKTtyZXR1cm4gYVtiXX10cnl7cmV0dXJuIGwudW5zaGlmdChiKSxhW2JdPWssYVtiXT1jKGIsZSl9Y2F0Y2goZil7dGhyb3cgYVtiXT09PWsmJmRlbGV0ZSBhW2JdLGY7fWZpbmFsbHl7bC5zaGlmdCgpfX1mdW5jdGlvbiBlKGEsCmMsZil7dmFyIGc9W107YT1jYi4kJGFubm90YXRlKGEsYixmKTtmb3IodmFyIGg9MCxrPWEubGVuZ3RoO2g8aztoKyspe3ZhciBsPWFbaF07aWYoInN0cmluZyIhPT10eXBlb2YgbCl0aHJvdyBIYSgiaXRrbiIsbCk7Zy5wdXNoKGMmJmMuaGFzT3duUHJvcGVydHkobCk/Y1tsXTpkKGwsZikpfXJldHVybiBnfXJldHVybntpbnZva2U6ZnVuY3Rpb24oYSxiLGMsZCl7InN0cmluZyI9PT10eXBlb2YgYyYmKGQ9YyxjPW51bGwpO2M9ZShhLGMsZCk7TChhKSYmKGE9YVthLmxlbmd0aC0xXSk7ZD0xMT49RWE/ITE6ImZ1bmN0aW9uIj09PXR5cGVvZiBhJiYvXig/OmNsYXNzXGJ8Y29uc3RydWN0b3JcKCkvLnRlc3QoRnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSkrIiAiKTtyZXR1cm4gZD8oYy51bnNoaWZ0KG51bGwpLG5ldyAoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuYXBwbHkoYSxjKSkpOmEuYXBwbHkoYixjKX0saW5zdGFudGlhdGU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPQpMKGEpP2FbYS5sZW5ndGgtMV06YTthPWUoYSxiLGMpO2EudW5zaGlmdChudWxsKTtyZXR1cm4gbmV3IChGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5hcHBseShkLGEpKX0sZ2V0OmQsYW5ub3RhdGU6Y2IuJCRhbm5vdGF0ZSxoYXM6ZnVuY3Rpb24oYil7cmV0dXJuIG4uaGFzT3duUHJvcGVydHkoYisiUHJvdmlkZXIiKXx8YS5oYXNPd25Qcm9wZXJ0eShiKX19fWI9ITA9PT1iO3ZhciBrPXt9LGw9W10sbT1uZXcgUmEoW10sITApLG49eyRwcm92aWRlOntwcm92aWRlcjpkKGMpLGZhY3Rvcnk6ZChmKSxzZXJ2aWNlOmQoZnVuY3Rpb24oYSxiKXtyZXR1cm4gZihhLFsiJGluamVjdG9yIixmdW5jdGlvbihhKXtyZXR1cm4gYS5pbnN0YW50aWF0ZShiKX1dKX0pLHZhbHVlOmQoZnVuY3Rpb24oYSxiKXtyZXR1cm4gZihhLGhhKGIpLCExKX0pLGNvbnN0YW50OmQoZnVuY3Rpb24oYSxiKXtRYShhLCJjb25zdGFudCIpO25bYV09Yjt1W2FdPWJ9KSxkZWNvcmF0b3I6ZnVuY3Rpb24oYSxiKXt2YXIgYz0KcC5nZXQoYSsiUHJvdmlkZXIiKSxkPWMuJGdldDtjLiRnZXQ9ZnVuY3Rpb24oKXt2YXIgYT1CLmludm9rZShkLGMpO3JldHVybiBCLmludm9rZShiLG51bGwseyRkZWxlZ2F0ZTphfSl9fX19LHA9bi4kaW5qZWN0b3I9aChuLGZ1bmN0aW9uKGEsYil7Y2EuaXNTdHJpbmcoYikmJmwucHVzaChiKTt0aHJvdyBIYSgidW5wciIsbC5qb2luKCIgPC0gIikpO30pLHU9e30sUj1oKHUsZnVuY3Rpb24oYSxiKXt2YXIgYz1wLmdldChhKyJQcm92aWRlciIsYik7cmV0dXJuIEIuaW52b2tlKGMuJGdldCxjLHZvaWQgMCxhKX0pLEI9UjtuLiRpbmplY3RvclByb3ZpZGVyPXskZ2V0OmhhKFIpfTt2YXIgcj1nKGEpLEI9Ui5nZXQoIiRpbmplY3RvciIpO0Iuc3RyaWN0RGk9YjtxKHIsZnVuY3Rpb24oYSl7YSYmQi5pbnZva2UoYSl9KTtyZXR1cm4gQn1mdW5jdGlvbiBYZSgpe3ZhciBhPSEwO3RoaXMuZGlzYWJsZUF1dG9TY3JvbGxpbmc9ZnVuY3Rpb24oKXthPSExfTt0aGlzLiRnZXQ9WyIkd2luZG93IiwKIiRsb2NhdGlvbiIsIiRyb290U2NvcGUiLGZ1bmN0aW9uKGIsZCxjKXtmdW5jdGlvbiBlKGEpe3ZhciBiPW51bGw7QXJyYXkucHJvdG90eXBlLnNvbWUuY2FsbChhLGZ1bmN0aW9uKGEpe2lmKCJhIj09PXdhKGEpKXJldHVybiBiPWEsITB9KTtyZXR1cm4gYn1mdW5jdGlvbiBmKGEpe2lmKGEpe2Euc2Nyb2xsSW50b1ZpZXcoKTt2YXIgYztjPWcueU9mZnNldDt6KGMpP2M9YygpOlFiKGMpPyhjPWNbMF0sYz0iZml4ZWQiIT09Yi5nZXRDb21wdXRlZFN0eWxlKGMpLnBvc2l0aW9uPzA6Yy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20pOlQoYyl8fChjPTApO2MmJihhPWEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wLGIuc2Nyb2xsQnkoMCxhLWMpKX1lbHNlIGIuc2Nyb2xsVG8oMCwwKX1mdW5jdGlvbiBnKGEpe2E9RyhhKT9hOmQuaGFzaCgpO3ZhciBiO2E/KGI9aC5nZXRFbGVtZW50QnlJZChhKSk/ZihiKTooYj1lKGguZ2V0RWxlbWVudHNCeU5hbWUoYSkpKT9mKGIpOiJ0b3AiPT09CmEmJmYobnVsbCk6ZihudWxsKX12YXIgaD1iLmRvY3VtZW50O2EmJmMuJHdhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIGQuaGFzaCgpfSxmdW5jdGlvbihhLGIpe2E9PT1iJiYiIj09PWF8fFFmKGZ1bmN0aW9uKCl7Yy4kZXZhbEFzeW5jKGcpfSl9KTtyZXR1cm4gZ31dfWZ1bmN0aW9uIGdiKGEsYil7aWYoIWEmJiFiKXJldHVybiIiO2lmKCFhKXJldHVybiBiO2lmKCFiKXJldHVybiBhO0woYSkmJihhPWEuam9pbigiICIpKTtMKGIpJiYoYj1iLmpvaW4oIiAiKSk7cmV0dXJuIGErIiAiK2J9ZnVuY3Rpb24gWmYoYSl7RyhhKSYmKGE9YS5zcGxpdCgiICIpKTt2YXIgYj1VKCk7cShhLGZ1bmN0aW9uKGEpe2EubGVuZ3RoJiYoYlthXT0hMCl9KTtyZXR1cm4gYn1mdW5jdGlvbiBJYShhKXtyZXR1cm4gRChhKT9hOnt9fWZ1bmN0aW9uICRmKGEsYixkLGMpe2Z1bmN0aW9uIGUoYSl7dHJ5e2EuYXBwbHkobnVsbCx2YS5jYWxsKGFyZ3VtZW50cywxKSl9ZmluYWxseXtpZihSLS0sMD09PVIpZm9yKDtCLmxlbmd0aDspdHJ5e0IucG9wKCkoKX1jYXRjaChiKXtkLmVycm9yKGIpfX19CmZ1bmN0aW9uIGYoKXt0PW51bGw7ZygpO2goKX1mdW5jdGlvbiBnKCl7cj1LKCk7cj15KHIpP251bGw6cjtuYShyLEUpJiYocj1FKTtFPXJ9ZnVuY3Rpb24gaCgpe2lmKHYhPT1rLnVybCgpfHxKIT09cil2PWsudXJsKCksSj1yLHEoTSxmdW5jdGlvbihhKXthKGsudXJsKCkscil9KX12YXIgaz10aGlzLGw9YS5sb2NhdGlvbixtPWEuaGlzdG9yeSxuPWEuc2V0VGltZW91dCxwPWEuY2xlYXJUaW1lb3V0LHU9e307ay5pc01vY2s9ITE7dmFyIFI9MCxCPVtdO2suJCRjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdD1lO2suJCRpbmNPdXRzdGFuZGluZ1JlcXVlc3RDb3VudD1mdW5jdGlvbigpe1IrK307ay5ub3RpZnlXaGVuTm9PdXRzdGFuZGluZ1JlcXVlc3RzPWZ1bmN0aW9uKGEpezA9PT1SP2EoKTpCLnB1c2goYSl9O3ZhciByLEosdj1sLmhyZWYsZmE9Yi5maW5kKCJiYXNlIiksdD1udWxsLEs9Yy5oaXN0b3J5P2Z1bmN0aW9uKCl7dHJ5e3JldHVybiBtLnN0YXRlfWNhdGNoKGEpe319OgpBO2coKTtKPXI7ay51cmw9ZnVuY3Rpb24oYixkLGUpe3koZSkmJihlPW51bGwpO2whPT1hLmxvY2F0aW9uJiYobD1hLmxvY2F0aW9uKTttIT09YS5oaXN0b3J5JiYobT1hLmhpc3RvcnkpO2lmKGIpe3ZhciBmPUo9PT1lO2lmKHY9PT1iJiYoIWMuaGlzdG9yeXx8ZikpcmV0dXJuIGs7dmFyIGg9diYmSmEodik9PT1KYShiKTt2PWI7Sj1lOyFjLmhpc3Rvcnl8fGgmJmY/KGh8fCh0PWIpLGQ/bC5yZXBsYWNlKGIpOmg/KGQ9bCxlPWIuaW5kZXhPZigiIyIpLGU9LTE9PT1lPyIiOmIuc3Vic3RyKGUpLGQuaGFzaD1lKTpsLmhyZWY9YixsLmhyZWYhPT1iJiYodD1iKSk6KG1bZD8icmVwbGFjZVN0YXRlIjoicHVzaFN0YXRlIl0oZSwiIixiKSxnKCksSj1yKTt0JiYodD1iKTtyZXR1cm4ga31yZXR1cm4gdHx8bC5ocmVmLnJlcGxhY2UoLyUyNy9nLCInIil9O2suc3RhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gcn07dmFyIE09W10sSD0hMSxFPW51bGw7ay5vblVybENoYW5nZT1mdW5jdGlvbihiKXtpZighSCl7aWYoYy5oaXN0b3J5KUYoYSkub24oInBvcHN0YXRlIiwKZik7RihhKS5vbigiaGFzaGNoYW5nZSIsZik7SD0hMH1NLnB1c2goYik7cmV0dXJuIGJ9O2suJCRhcHBsaWNhdGlvbkRlc3Ryb3llZD1mdW5jdGlvbigpe0YoYSkub2ZmKCJoYXNoY2hhbmdlIHBvcHN0YXRlIixmKX07ay4kJGNoZWNrVXJsQ2hhbmdlPWg7ay5iYXNlSHJlZj1mdW5jdGlvbigpe3ZhciBhPWZhLmF0dHIoImhyZWYiKTtyZXR1cm4gYT9hLnJlcGxhY2UoL14oaHR0cHM/XDopP1wvXC9bXlwvXSovLCIiKToiIn07ay5kZWZlcj1mdW5jdGlvbihhLGIpe3ZhciBjO1IrKztjPW4oZnVuY3Rpb24oKXtkZWxldGUgdVtjXTtlKGEpfSxifHwwKTt1W2NdPSEwO3JldHVybiBjfTtrLmRlZmVyLmNhbmNlbD1mdW5jdGlvbihhKXtyZXR1cm4gdVthXT8oZGVsZXRlIHVbYV0scChhKSxlKEEpLCEwKTohMX19ZnVuY3Rpb24gZGYoKXt0aGlzLiRnZXQ9WyIkd2luZG93IiwiJGxvZyIsIiRzbmlmZmVyIiwiJGRvY3VtZW50IixmdW5jdGlvbihhLGIsZCxjKXtyZXR1cm4gbmV3ICRmKGEsYyxiLApkKX1dfWZ1bmN0aW9uIGVmKCl7dGhpcy4kZ2V0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGMpe2Z1bmN0aW9uIGUoYSl7YSE9biYmKHA/cD09YSYmKHA9YS5uKTpwPWEsZihhLm4sYS5wKSxmKGEsbiksbj1hLG4ubj1udWxsKX1mdW5jdGlvbiBmKGEsYil7YSE9YiYmKGEmJihhLnA9YiksYiYmKGIubj1hKSl9aWYoYSBpbiBiKXRocm93IE4oIiRjYWNoZUZhY3RvcnkiKSgiaWlkIixhKTt2YXIgZz0wLGg9Uyh7fSxjLHtpZDphfSksaz1VKCksbD1jJiZjLmNhcGFjaXR5fHxOdW1iZXIuTUFYX1ZBTFVFLG09VSgpLG49bnVsbCxwPW51bGw7cmV0dXJuIGJbYV09e3B1dDpmdW5jdGlvbihhLGIpe2lmKCF5KGIpKXtpZihsPE51bWJlci5NQVhfVkFMVUUpe3ZhciBjPW1bYV18fChtW2FdPXtrZXk6YX0pO2UoYyl9YSBpbiBrfHxnKys7a1thXT1iO2c+bCYmdGhpcy5yZW1vdmUocC5rZXkpO3JldHVybiBifX0sZ2V0OmZ1bmN0aW9uKGEpe2lmKGw8TnVtYmVyLk1BWF9WQUxVRSl7dmFyIGI9bVthXTsKaWYoIWIpcmV0dXJuO2UoYil9cmV0dXJuIGtbYV19LHJlbW92ZTpmdW5jdGlvbihhKXtpZihsPE51bWJlci5NQVhfVkFMVUUpe3ZhciBiPW1bYV07aWYoIWIpcmV0dXJuO2I9PW4mJihuPWIucCk7Yj09cCYmKHA9Yi5uKTtmKGIubixiLnApO2RlbGV0ZSBtW2FdfWEgaW4gayYmKGRlbGV0ZSBrW2FdLGctLSl9LHJlbW92ZUFsbDpmdW5jdGlvbigpe2s9VSgpO2c9MDttPVUoKTtuPXA9bnVsbH0sZGVzdHJveTpmdW5jdGlvbigpe209aD1rPW51bGw7ZGVsZXRlIGJbYV19LGluZm86ZnVuY3Rpb24oKXtyZXR1cm4gUyh7fSxoLHtzaXplOmd9KX19fXZhciBiPXt9O2EuaW5mbz1mdW5jdGlvbigpe3ZhciBhPXt9O3EoYixmdW5jdGlvbihiLGUpe2FbZV09Yi5pbmZvKCl9KTtyZXR1cm4gYX07YS5nZXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGJbYV19O3JldHVybiBhfX1mdW5jdGlvbiBCZigpe3RoaXMuJGdldD1bIiRjYWNoZUZhY3RvcnkiLGZ1bmN0aW9uKGEpe3JldHVybiBhKCJ0ZW1wbGF0ZXMiKX1dfQpmdW5jdGlvbiBGYyhhLGIpe2Z1bmN0aW9uIGQoYSxiLGMpe3ZhciBkPS9eXHMqKFtAJjxdfD0oXCo/KSkoXD8/KVxzKihcdyopXHMqJC8sZT1VKCk7cShhLGZ1bmN0aW9uKGEsZil7aWYoYSBpbiBuKWVbZl09blthXTtlbHNle3ZhciBnPWEubWF0Y2goZCk7aWYoIWcpdGhyb3cgZ2EoImlzY3AiLGIsZixhLGM/ImNvbnRyb2xsZXIgYmluZGluZ3MgZGVmaW5pdGlvbiI6Imlzb2xhdGUgc2NvcGUgZGVmaW5pdGlvbiIpO2VbZl09e21vZGU6Z1sxXVswXSxjb2xsZWN0aW9uOiIqIj09PWdbMl0sb3B0aW9uYWw6Ij8iPT09Z1szXSxhdHRyTmFtZTpnWzRdfHxmfTtnWzRdJiYoblthXT1lW2ZdKX19KTtyZXR1cm4gZX1mdW5jdGlvbiBjKGEpe3ZhciBiPWEuY2hhckF0KDApO2lmKCFifHxiIT09UShiKSl0aHJvdyBnYSgiYmFkZGlyIixhKTtpZihhIT09YS50cmltKCkpdGhyb3cgZ2EoImJhZGRpciIsYSk7fWZ1bmN0aW9uIGUoYSl7dmFyIGI9YS5yZXF1aXJlfHxhLmNvbnRyb2xsZXImJmEubmFtZTsKIUwoYikmJkQoYikmJnEoYixmdW5jdGlvbihhLGMpe3ZhciBkPWEubWF0Y2gobCk7YS5zdWJzdHJpbmcoZFswXS5sZW5ndGgpfHwoYltjXT1kWzBdK2MpfSk7cmV0dXJuIGJ9dmFyIGY9e30sZz0vXlxzKmRpcmVjdGl2ZVw6XHMqKFtcd1wtXSspXHMrKC4qKSQvLGg9LygoW1x3XC1dKykoPzpcOihbXjtdKykpPzs/KS8saz1iZSgibmdTcmMsbmdTcmNzZXQsc3JjLHNyY3NldCIpLGw9L14oPzooXF5cXj8pPyhcPyk/KFxeXF4/KT8pPy8sbT0vXihvblthLXpdK3xmb3JtYWN0aW9uKSQvLG49VSgpO3RoaXMuZGlyZWN0aXZlPWZ1bmN0aW9uIEIoYixkKXtRYShiLCJkaXJlY3RpdmUiKTtHKGIpPyhjKGIpLHNiKGQsImRpcmVjdGl2ZUZhY3RvcnkiKSxmLmhhc093blByb3BlcnR5KGIpfHwoZltiXT1bXSxhLmZhY3RvcnkoYisiRGlyZWN0aXZlIixbIiRpbmplY3RvciIsIiRleGNlcHRpb25IYW5kbGVyIixmdW5jdGlvbihhLGMpe3ZhciBkPVtdO3EoZltiXSxmdW5jdGlvbihmLGcpe3RyeXt2YXIgaD0KYS5pbnZva2UoZik7eihoKT9oPXtjb21waWxlOmhhKGgpfTohaC5jb21waWxlJiZoLmxpbmsmJihoLmNvbXBpbGU9aGEoaC5saW5rKSk7aC5wcmlvcml0eT1oLnByaW9yaXR5fHwwO2guaW5kZXg9ZztoLm5hbWU9aC5uYW1lfHxiO2gucmVxdWlyZT1lKGgpO2gucmVzdHJpY3Q9aC5yZXN0cmljdHx8IkVBIjtoLiQkbW9kdWxlTmFtZT1mLiQkbW9kdWxlTmFtZTtkLnB1c2goaCl9Y2F0Y2goayl7YyhrKX19KTtyZXR1cm4gZH1dKSksZltiXS5wdXNoKGQpKTpxKGIsdWMoQikpO3JldHVybiB0aGlzfTt0aGlzLmNvbXBvbmVudD1mdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSl7ZnVuY3Rpb24gZShiKXtyZXR1cm4geihiKXx8TChiKT9mdW5jdGlvbihjLGQpe3JldHVybiBhLmludm9rZShiLHRoaXMseyRlbGVtZW50OmMsJGF0dHJzOmR9KX06Yn12YXIgZj1iLnRlbXBsYXRlfHxiLnRlbXBsYXRlVXJsP2IudGVtcGxhdGU6IiIsZz17Y29udHJvbGxlcjpkLGNvbnRyb2xsZXJBczpYYyhiLmNvbnRyb2xsZXIpfHwKYi5jb250cm9sbGVyQXN8fCIkY3RybCIsdGVtcGxhdGU6ZShmKSx0ZW1wbGF0ZVVybDplKGIudGVtcGxhdGVVcmwpLHRyYW5zY2x1ZGU6Yi50cmFuc2NsdWRlLHNjb3BlOnt9LGJpbmRUb0NvbnRyb2xsZXI6Yi5iaW5kaW5nc3x8e30scmVzdHJpY3Q6IkUiLHJlcXVpcmU6Yi5yZXF1aXJlfTtxKGIsZnVuY3Rpb24oYSxiKXsiJCI9PT1iLmNoYXJBdCgwKSYmKGdbYl09YSl9KTtyZXR1cm4gZ312YXIgZD1iLmNvbnRyb2xsZXJ8fGZ1bmN0aW9uKCl7fTtxKGIsZnVuY3Rpb24oYSxiKXsiJCI9PT1iLmNoYXJBdCgwKSYmKGNbYl09YSx6KGQpJiYoZFtiXT1hKSl9KTtjLiRpbmplY3Q9WyIkaW5qZWN0b3IiXTtyZXR1cm4gdGhpcy5kaXJlY3RpdmUoYSxjKX07dGhpcy5hSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdD1mdW5jdGlvbihhKXtyZXR1cm4gdyhhKT8oYi5hSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdChhKSx0aGlzKTpiLmFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0KCl9O3RoaXMuaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0PQpmdW5jdGlvbihhKXtyZXR1cm4gdyhhKT8oYi5pbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3QoYSksdGhpcyk6Yi5pbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3QoKX07dmFyIHA9ITA7dGhpcy5kZWJ1Z0luZm9FbmFibGVkPWZ1bmN0aW9uKGEpe3JldHVybiB3KGEpPyhwPWEsdGhpcyk6cH07dmFyIHU9MTA7dGhpcy5vbkNoYW5nZXNUdGw9ZnVuY3Rpb24oYSl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHU9YSx0aGlzKTp1fTt0aGlzLiRnZXQ9WyIkaW5qZWN0b3IiLCIkaW50ZXJwb2xhdGUiLCIkZXhjZXB0aW9uSGFuZGxlciIsIiR0ZW1wbGF0ZVJlcXVlc3QiLCIkcGFyc2UiLCIkY29udHJvbGxlciIsIiRyb290U2NvcGUiLCIkc2NlIiwiJGFuaW1hdGUiLCIkJHNhbml0aXplVXJpIixmdW5jdGlvbihhLGIsYyxlLG4sdCxLLE0sSCxFKXtmdW5jdGlvbiBJKCl7dHJ5e2lmKCEtLXFhKXRocm93IFk9dm9pZCAwLGdhKCJpbmZjaG5nIix1KTtLLiRhcHBseShmdW5jdGlvbigpe2Zvcih2YXIgYT0KW10sYj0wLGM9WS5sZW5ndGg7YjxjOysrYil0cnl7WVtiXSgpfWNhdGNoKGQpe2EucHVzaChkKX1ZPXZvaWQgMDtpZihhLmxlbmd0aCl0aHJvdyBhO30pfWZpbmFsbHl7cWErK319ZnVuY3Rpb24gRGEoYSxiKXtpZihiKXt2YXIgYz1PYmplY3Qua2V5cyhiKSxkLGUsZjtkPTA7Zm9yKGU9Yy5sZW5ndGg7ZDxlO2QrKylmPWNbZF0sdGhpc1tmXT1iW2ZdfWVsc2UgdGhpcy4kYXR0cj17fTt0aGlzLiQkZWxlbWVudD1hfWZ1bmN0aW9uIFAoYSxiLGMpe3BhLmlubmVySFRNTD0iPHNwYW4gIitiKyI+IjtiPXBhLmZpcnN0Q2hpbGQuYXR0cmlidXRlczt2YXIgZD1iWzBdO2IucmVtb3ZlTmFtZWRJdGVtKGQubmFtZSk7ZC52YWx1ZT1jO2EuYXR0cmlidXRlcy5zZXROYW1lZEl0ZW0oZCl9ZnVuY3Rpb24geChhLGIpe3RyeXthLmFkZENsYXNzKGIpfWNhdGNoKGMpe319ZnVuY3Rpb24gYWEoYSxiLGMsZCxlKXthIGluc3RhbmNlb2YgRnx8KGE9RihhKSk7Zm9yKHZhciBmPS9cUysvLGc9MCxoPWEubGVuZ3RoO2c8Cmg7ZysrKXt2YXIgaz1hW2ddO2subm9kZVR5cGU9PT1NYSYmay5ub2RlVmFsdWUubWF0Y2goZikmJlBjKGssYVtnXT1DLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKSl9dmFyIGw9cyhhLGIsYSxjLGQsZSk7YWEuJCRhZGRTY29wZUNsYXNzKGEpO3ZhciBtPW51bGw7cmV0dXJuIGZ1bmN0aW9uKGIsYyxkKXtzYihiLCJzY29wZSIpO2UmJmUubmVlZHNOZXdTY29wZSYmKGI9Yi4kcGFyZW50LiRuZXcoKSk7ZD1kfHx7fTt2YXIgZj1kLnBhcmVudEJvdW5kVHJhbnNjbHVkZUZuLGc9ZC50cmFuc2NsdWRlQ29udHJvbGxlcnM7ZD1kLmZ1dHVyZVBhcmVudEVsZW1lbnQ7ZiYmZi4kJGJvdW5kVHJhbnNjbHVkZSYmKGY9Zi4kJGJvdW5kVHJhbnNjbHVkZSk7bXx8KG09KGQ9ZCYmZFswXSk/ImZvcmVpZ25vYmplY3QiIT09d2EoZCkmJm1hLmNhbGwoZCkubWF0Y2goL1NWRy8pPyJzdmciOiJodG1sIjoiaHRtbCIpO2Q9Imh0bWwiIT09bT9GKGRhKG0sRigiPGRpdj4iKS5hcHBlbmQoYSkuaHRtbCgpKSk6CmM/T2EuY2xvbmUuY2FsbChhKTphO2lmKGcpZm9yKHZhciBoIGluIGcpZC5kYXRhKCIkIitoKyJDb250cm9sbGVyIixnW2hdLmluc3RhbmNlKTthYS4kJGFkZFNjb3BlSW5mbyhkLGIpO2MmJmMoZCxiKTtsJiZsKGIsZCxkLGYpO3JldHVybiBkfX1mdW5jdGlvbiBzKGEsYixjLGQsZSxmKXtmdW5jdGlvbiBnKGEsYyxkLGUpe3ZhciBmLGssbCxtLHAscix2O2lmKG4pZm9yKHY9QXJyYXkoYy5sZW5ndGgpLG09MDttPGgubGVuZ3RoO20rPTMpZj1oW21dLHZbZl09Y1tmXTtlbHNlIHY9YzttPTA7Zm9yKHA9aC5sZW5ndGg7bTxwOylrPXZbaFttKytdXSxjPWhbbSsrXSxmPWhbbSsrXSxjPyhjLnNjb3BlPyhsPWEuJG5ldygpLGFhLiQkYWRkU2NvcGVJbmZvKEYoayksbCkpOmw9YSxyPWMudHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQ/emEoYSxjLnRyYW5zY2x1ZGUsZSk6IWMudGVtcGxhdGVPblRoaXNFbGVtZW50JiZlP2U6IWUmJmI/emEoYSxiKTpudWxsLGMoZixsLGssZCxyKSk6ZiYmZihhLAprLmNoaWxkTm9kZXMsdm9pZCAwLGUpfWZvcih2YXIgaD1bXSxrLGwsbSxwLG4scj0wO3I8YS5sZW5ndGg7cisrKXtrPW5ldyBEYTtsPSRiKGFbcl0sW10saywwPT09cj9kOnZvaWQgMCxlKTsoZj1sLmxlbmd0aD9vYShsLGFbcl0sayxiLGMsbnVsbCxbXSxbXSxmKTpudWxsKSYmZi5zY29wZSYmYWEuJCRhZGRTY29wZUNsYXNzKGsuJCRlbGVtZW50KTtrPWYmJmYudGVybWluYWx8fCEobT1hW3JdLmNoaWxkTm9kZXMpfHwhbS5sZW5ndGg/bnVsbDpzKG0sZj8oZi50cmFuc2NsdWRlT25UaGlzRWxlbWVudHx8IWYudGVtcGxhdGVPblRoaXNFbGVtZW50KSYmZi50cmFuc2NsdWRlOmIpO2lmKGZ8fGspaC5wdXNoKHIsZixrKSxwPSEwLG49bnx8ZjtmPW51bGx9cmV0dXJuIHA/ZzpudWxsfWZ1bmN0aW9uIHphKGEsYixjKXtmdW5jdGlvbiBkKGUsZixnLGgsayl7ZXx8KGU9YS4kbmV3KCExLGspLGUuJCR0cmFuc2NsdWRlZD0hMCk7cmV0dXJuIGIoZSxmLHtwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbjpjLAp0cmFuc2NsdWRlQ29udHJvbGxlcnM6ZyxmdXR1cmVQYXJlbnRFbGVtZW50Omh9KX12YXIgZT1kLiQkc2xvdHM9VSgpLGY7Zm9yKGYgaW4gYi4kJHNsb3RzKWVbZl09Yi4kJHNsb3RzW2ZdP3phKGEsYi4kJHNsb3RzW2ZdLGMpOm51bGw7cmV0dXJuIGR9ZnVuY3Rpb24gJGIoYSxiLGMsZCxlKXt2YXIgZj1jLiRhdHRyO3N3aXRjaChhLm5vZGVUeXBlKXtjYXNlIDE6TyhiLEFhKHdhKGEpKSwiRSIsZCxlKTtmb3IodmFyIGcsayxsLG0scD1hLmF0dHJpYnV0ZXMsbj0wLHI9cCYmcC5sZW5ndGg7bjxyO24rKyl7dmFyIHY9ITEsdT0hMTtnPXBbbl07az1nLm5hbWU7bD1XKGcudmFsdWUpO2c9QWEoayk7aWYobT1CYS50ZXN0KGcpKWs9ay5yZXBsYWNlKFljLCIiKS5zdWJzdHIoOCkucmVwbGFjZSgvXyguKS9nLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudG9VcHBlckNhc2UoKX0pOyhnPWcubWF0Y2goQ2EpKSYmVihnWzFdKSYmKHY9ayx1PWsuc3Vic3RyKDAsay5sZW5ndGgtNSkrImVuZCIsaz0Kay5zdWJzdHIoMCxrLmxlbmd0aC02KSk7Zz1BYShrLnRvTG93ZXJDYXNlKCkpO2ZbZ109aztpZihtfHwhYy5oYXNPd25Qcm9wZXJ0eShnKSljW2ddPWwsVWMoYSxnKSYmKGNbZ109ITApO2lhKGEsYixsLGcsbSk7TyhiLGcsIkEiLGQsZSx2LHUpfWY9YS5jbGFzc05hbWU7RChmKSYmKGY9Zi5hbmltVmFsKTtpZihHKGYpJiYiIiE9PWYpZm9yKDthPWguZXhlYyhmKTspZz1BYShhWzJdKSxPKGIsZywiQyIsZCxlKSYmKGNbZ109VyhhWzNdKSksZj1mLnN1YnN0cihhLmluZGV4K2FbMF0ubGVuZ3RoKTticmVhaztjYXNlIE1hOmlmKDExPT09RWEpZm9yKDthLnBhcmVudE5vZGUmJmEubmV4dFNpYmxpbmcmJmEubmV4dFNpYmxpbmcubm9kZVR5cGU9PT1NYTspYS5ub2RlVmFsdWUrPWEubmV4dFNpYmxpbmcubm9kZVZhbHVlLGEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhLm5leHRTaWJsaW5nKTtjYShiLGEubm9kZVZhbHVlKTticmVhaztjYXNlIDg6aGIoYSxiLGMsZCxlKX1iLnNvcnQoWik7CnJldHVybiBifWZ1bmN0aW9uIGhiKGEsYixjLGQsZSl7dHJ5e3ZhciBmPWcuZXhlYyhhLm5vZGVWYWx1ZSk7aWYoZil7dmFyIGg9QWEoZlsxXSk7TyhiLGgsIk0iLGQsZSkmJihjW2hdPVcoZlsyXSkpfX1jYXRjaChrKXt9fWZ1bmN0aW9uIE4oYSxiLGMpe3ZhciBkPVtdLGU9MDtpZihiJiZhLmhhc0F0dHJpYnV0ZSYmYS5oYXNBdHRyaWJ1dGUoYikpe2Rve2lmKCFhKXRocm93IGdhKCJ1dGVyZGlyIixiLGMpOzE9PWEubm9kZVR5cGUmJihhLmhhc0F0dHJpYnV0ZShiKSYmZSsrLGEuaGFzQXR0cmlidXRlKGMpJiZlLS0pO2QucHVzaChhKTthPWEubmV4dFNpYmxpbmd9d2hpbGUoMDxlKX1lbHNlIGQucHVzaChhKTtyZXR1cm4gRihkKX1mdW5jdGlvbiBaYyhhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGQsZSxmLGcsaCl7ZT1OKGVbMF0sYixjKTtyZXR1cm4gYShkLGUsZixnLGgpfX1mdW5jdGlvbiBhYyhhLGIsYyxkLGUsZil7dmFyIGc7cmV0dXJuIGE/YWEoYixjLGQsZSxmKTpmdW5jdGlvbigpe2d8fAooZz1hYShiLGMsZCxlLGYpLGI9Yz1mPW51bGwpO3JldHVybiBnLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19ZnVuY3Rpb24gb2EoYSxiLGQsZSxmLGcsaCxrLGwpe2Z1bmN0aW9uIG0oYSxiLGMsZCl7aWYoYSl7YyYmKGE9WmMoYSxjLGQpKTthLnJlcXVpcmU9eC5yZXF1aXJlO2EuZGlyZWN0aXZlTmFtZT1JO2lmKHU9PT14fHx4LiQkaXNvbGF0ZVNjb3BlKWE9amEoYSx7aXNvbGF0ZVNjb3BlOiEwfSk7aC5wdXNoKGEpfWlmKGIpe2MmJihiPVpjKGIsYyxkKSk7Yi5yZXF1aXJlPXgucmVxdWlyZTtiLmRpcmVjdGl2ZU5hbWU9STtpZih1PT09eHx8eC4kJGlzb2xhdGVTY29wZSliPWphKGIse2lzb2xhdGVTY29wZTohMH0pO2sucHVzaChiKX19ZnVuY3Rpb24gcChhLGUsZixnLGwpe2Z1bmN0aW9uIG0oYSxiLGMsZCl7dmFyIGU7WWEoYSl8fChkPWMsYz1iLGI9YSxhPXZvaWQgMCk7ZmEmJihlPXQpO2N8fChjPWZhP0kucGFyZW50KCk6SSk7aWYoZCl7dmFyIGY9bC4kJHNsb3RzW2RdO2lmKGYpcmV0dXJuIGYoYSwKYixlLGMscyk7aWYoeShmKSl0aHJvdyBnYSgibm9zbG90IixkLHlhKEkpKTt9ZWxzZSByZXR1cm4gbChhLGIsZSxjLHMpfXZhciBuLEUseCxNLEIsdCxQLEk7Yj09PWY/KGc9ZCxJPWQuJCRlbGVtZW50KTooST1GKGYpLGc9bmV3IERhKEksZCkpO0I9ZTt1P009ZS4kbmV3KCEwKTpyJiYoQj1lLiRwYXJlbnQpO2wmJihQPW0sUC4kJGJvdW5kVHJhbnNjbHVkZT1sLFAuaXNTbG90RmlsbGVkPWZ1bmN0aW9uKGEpe3JldHVybiEhbC4kJHNsb3RzW2FdfSk7diYmKHQ9YWcoSSxnLFAsdixNLGUsdSkpO3UmJihhYS4kJGFkZFNjb3BlSW5mbyhJLE0sITAsIShIJiYoSD09PXV8fEg9PT11LiQkb3JpZ2luYWxEaXJlY3RpdmUpKSksYWEuJCRhZGRTY29wZUNsYXNzKEksITApLE0uJCRpc29sYXRlQmluZGluZ3M9dS4kJGlzb2xhdGVCaW5kaW5ncyxFPWthKGUsZyxNLE0uJCRpc29sYXRlQmluZGluZ3MsdSksRS5yZW1vdmVXYXRjaGVzJiZNLiRvbigiJGRlc3Ryb3kiLEUucmVtb3ZlV2F0Y2hlcykpOwpmb3IobiBpbiB0KXtFPXZbbl07eD10W25dO3ZhciBaYj1FLiQkYmluZGluZ3MuYmluZFRvQ29udHJvbGxlcjt4LmJpbmRpbmdJbmZvPXguaWRlbnRpZmllciYmWmI/a2EoQixnLHguaW5zdGFuY2UsWmIsRSk6e307dmFyIEs9eCgpO0shPT14Lmluc3RhbmNlJiYoeC5pbnN0YW5jZT1LLEkuZGF0YSgiJCIrRS5uYW1lKyJDb250cm9sbGVyIixLKSx4LmJpbmRpbmdJbmZvLnJlbW92ZVdhdGNoZXMmJnguYmluZGluZ0luZm8ucmVtb3ZlV2F0Y2hlcygpLHguYmluZGluZ0luZm89a2EoQixnLHguaW5zdGFuY2UsWmIsRSkpfXEodixmdW5jdGlvbihhLGIpe3ZhciBjPWEucmVxdWlyZTthLmJpbmRUb0NvbnRyb2xsZXImJiFMKGMpJiZEKGMpJiZTKHRbYl0uaW5zdGFuY2UsaWIoYixjLEksdCkpfSk7cSh0LGZ1bmN0aW9uKGEpe3ZhciBiPWEuaW5zdGFuY2U7aWYoeihiLiRvbkNoYW5nZXMpKXRyeXtiLiRvbkNoYW5nZXMoYS5iaW5kaW5nSW5mby5pbml0aWFsQ2hhbmdlcyl9Y2F0Y2goZCl7YyhkKX1pZih6KGIuJG9uSW5pdCkpdHJ5e2IuJG9uSW5pdCgpfWNhdGNoKGUpe2MoZSl9eihiLiRkb0NoZWNrKSYmCihCLiR3YXRjaChmdW5jdGlvbigpe2IuJGRvQ2hlY2soKX0pLGIuJGRvQ2hlY2soKSk7eihiLiRvbkRlc3Ryb3kpJiZCLiRvbigiJGRlc3Ryb3kiLGZ1bmN0aW9uKCl7Yi4kb25EZXN0cm95KCl9KX0pO249MDtmb3IoRT1oLmxlbmd0aDtuPEU7bisrKXg9aFtuXSxsYSh4LHguaXNvbGF0ZVNjb3BlP006ZSxJLGcseC5yZXF1aXJlJiZpYih4LmRpcmVjdGl2ZU5hbWUseC5yZXF1aXJlLEksdCksUCk7dmFyIHM9ZTt1JiYodS50ZW1wbGF0ZXx8bnVsbD09PXUudGVtcGxhdGVVcmwpJiYocz1NKTthJiZhKHMsZi5jaGlsZE5vZGVzLHZvaWQgMCxsKTtmb3Iobj1rLmxlbmd0aC0xOzA8PW47bi0tKXg9a1tuXSxsYSh4LHguaXNvbGF0ZVNjb3BlP006ZSxJLGcseC5yZXF1aXJlJiZpYih4LmRpcmVjdGl2ZU5hbWUseC5yZXF1aXJlLEksdCksUCk7cSh0LGZ1bmN0aW9uKGEpe2E9YS5pbnN0YW5jZTt6KGEuJHBvc3RMaW5rKSYmYS4kcG9zdExpbmsoKX0pfWw9bHx8e307Zm9yKHZhciBuPS1OdW1iZXIuTUFYX1ZBTFVFLApyPWwubmV3U2NvcGVEaXJlY3RpdmUsdj1sLmNvbnRyb2xsZXJEaXJlY3RpdmVzLHU9bC5uZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUsSD1sLnRlbXBsYXRlRGlyZWN0aXZlLEU9bC5ub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlLE09ITEsQj0hMSxmYT1sLmhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlLHQ9ZC4kJGVsZW1lbnQ9RihiKSx4LEksUCxLPWUscyxGYT0hMSx6YT0hMSx3LEE9MCxDPWEubGVuZ3RoO0E8QztBKyspe3g9YVtBXTt2YXIgRz14LiQkc3RhcnQsaGI9eC4kJGVuZDtHJiYodD1OKGIsRyxoYikpO1A9dm9pZCAwO2lmKG4+eC5wcmlvcml0eSlicmVhaztpZih3PXguc2NvcGUpeC50ZW1wbGF0ZVVybHx8KEQodyk/KFgoIm5ldy9pc29sYXRlZCBzY29wZSIsdXx8cix4LHQpLHU9eCk6WCgibmV3L2lzb2xhdGVkIHNjb3BlIix1LHgsdCkpLHI9cnx8eDtJPXgubmFtZTtpZighRmEmJih4LnJlcGxhY2UmJih4LnRlbXBsYXRlVXJsfHx4LnRlbXBsYXRlKXx8eC50cmFuc2NsdWRlJiYKIXguJCR0bGIpKXtmb3Iodz1BKzE7RmE9YVt3KytdOylpZihGYS50cmFuc2NsdWRlJiYhRmEuJCR0bGJ8fEZhLnJlcGxhY2UmJihGYS50ZW1wbGF0ZVVybHx8RmEudGVtcGxhdGUpKXt6YT0hMDticmVha31GYT0hMH0heC50ZW1wbGF0ZVVybCYmeC5jb250cm9sbGVyJiYodz14LmNvbnRyb2xsZXIsdj12fHxVKCksWCgiJyIrSSsiJyBjb250cm9sbGVyIix2W0ldLHgsdCksdltJXT14KTtpZih3PXgudHJhbnNjbHVkZSlpZihNPSEwLHguJCR0bGJ8fChYKCJ0cmFuc2NsdXNpb24iLEUseCx0KSxFPXgpLCJlbGVtZW50Ij09dylmYT0hMCxuPXgucHJpb3JpdHksUD10LHQ9ZC4kJGVsZW1lbnQ9RihhYS4kJGNyZWF0ZUNvbW1lbnQoSSxkW0ldKSksYj10WzBdLGVhKGYsdmEuY2FsbChQLDApLGIpLFBbMF0uJCRwYXJlbnROb2RlPVBbMF0ucGFyZW50Tm9kZSxLPWFjKHphLFAsZSxuLGcmJmcubmFtZSx7bm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZTpFfSk7ZWxzZXt2YXIgb2E9VSgpO1A9RihYYihiKSkuY29udGVudHMoKTsKaWYoRCh3KSl7UD1bXTt2YXIgUT1VKCksTz1VKCk7cSh3LGZ1bmN0aW9uKGEsYil7dmFyIGM9Ij8iPT09YS5jaGFyQXQoMCk7YT1jP2Euc3Vic3RyaW5nKDEpOmE7UVthXT1iO29hW2JdPW51bGw7T1tiXT1jfSk7cSh0LmNvbnRlbnRzKCksZnVuY3Rpb24oYSl7dmFyIGI9UVtBYSh3YShhKSldO2I/KE9bYl09ITAsb2FbYl09b2FbYl18fFtdLG9hW2JdLnB1c2goYSkpOlAucHVzaChhKX0pO3EoTyxmdW5jdGlvbihhLGIpe2lmKCFhKXRocm93IGdhKCJyZXFzbG90IixiKTt9KTtmb3IodmFyIFYgaW4gb2Epb2FbVl0mJihvYVtWXT1hYyh6YSxvYVtWXSxlKSl9dC5lbXB0eSgpO0s9YWMoemEsUCxlLHZvaWQgMCx2b2lkIDAse25lZWRzTmV3U2NvcGU6eC4kJGlzb2xhdGVTY29wZXx8eC4kJG5ld1Njb3BlfSk7Sy4kJHNsb3RzPW9hfWlmKHgudGVtcGxhdGUpaWYoQj0hMCxYKCJ0ZW1wbGF0ZSIsSCx4LHQpLEg9eCx3PXooeC50ZW1wbGF0ZSk/eC50ZW1wbGF0ZSh0LGQpOngudGVtcGxhdGUsCnc9eGEodykseC5yZXBsYWNlKXtnPXg7UD1WYi50ZXN0KHcpPyRjKGRhKHgudGVtcGxhdGVOYW1lc3BhY2UsVyh3KSkpOltdO2I9UFswXTtpZigxIT1QLmxlbmd0aHx8MSE9PWIubm9kZVR5cGUpdGhyb3cgZ2EoInRwbHJ0IixJLCIiKTtlYShmLHQsYik7Qz17JGF0dHI6e319O3c9JGIoYixbXSxDKTt2YXIgWj1hLnNwbGljZShBKzEsYS5sZW5ndGgtKEErMSkpOyh1fHxyKSYmVCh3LHUscik7YT1hLmNvbmNhdCh3KS5jb25jYXQoWik7JChkLEMpO0M9YS5sZW5ndGh9ZWxzZSB0Lmh0bWwodyk7aWYoeC50ZW1wbGF0ZVVybClCPSEwLFgoInRlbXBsYXRlIixILHgsdCksSD14LHgucmVwbGFjZSYmKGc9eCkscD1iYShhLnNwbGljZShBLGEubGVuZ3RoLUEpLHQsZCxmLE0mJkssaCxrLHtjb250cm9sbGVyRGlyZWN0aXZlczp2LG5ld1Njb3BlRGlyZWN0aXZlOnIhPT14JiZyLG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZTp1LHRlbXBsYXRlRGlyZWN0aXZlOkgsbm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZTpFfSksCkM9YS5sZW5ndGg7ZWxzZSBpZih4LmNvbXBpbGUpdHJ5e3M9eC5jb21waWxlKHQsZCxLKTt2YXIgWT14LiQkb3JpZ2luYWxEaXJlY3RpdmV8fHg7eihzKT9tKG51bGwsYWIoWSxzKSxHLGhiKTpzJiZtKGFiKFkscy5wcmUpLGFiKFkscy5wb3N0KSxHLGhiKX1jYXRjaChjYSl7YyhjYSx5YSh0KSl9eC50ZXJtaW5hbCYmKHAudGVybWluYWw9ITAsbj1NYXRoLm1heChuLHgucHJpb3JpdHkpKX1wLnNjb3BlPXImJiEwPT09ci5zY29wZTtwLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50PU07cC50ZW1wbGF0ZU9uVGhpc0VsZW1lbnQ9QjtwLnRyYW5zY2x1ZGU9SztsLmhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlPWZhO3JldHVybiBwfWZ1bmN0aW9uIGliKGEsYixjLGQpe3ZhciBlO2lmKEcoYikpe3ZhciBmPWIubWF0Y2gobCk7Yj1iLnN1YnN0cmluZyhmWzBdLmxlbmd0aCk7dmFyIGc9ZlsxXXx8ZlszXSxmPSI/Ij09PWZbMl07Il5eIj09PWc/Yz1jLnBhcmVudCgpOmU9KGU9ZCYmZFtiXSkmJgplLmluc3RhbmNlO2lmKCFlKXt2YXIgaD0iJCIrYisiQ29udHJvbGxlciI7ZT1nP2MuaW5oZXJpdGVkRGF0YShoKTpjLmRhdGEoaCl9aWYoIWUmJiFmKXRocm93IGdhKCJjdHJlcSIsYixhKTt9ZWxzZSBpZihMKGIpKWZvcihlPVtdLGc9MCxmPWIubGVuZ3RoO2c8ZjtnKyspZVtnXT1pYihhLGJbZ10sYyxkKTtlbHNlIEQoYikmJihlPXt9LHEoYixmdW5jdGlvbihiLGYpe2VbZl09aWIoYSxiLGMsZCl9KSk7cmV0dXJuIGV8fG51bGx9ZnVuY3Rpb24gYWcoYSxiLGMsZCxlLGYsZyl7dmFyIGg9VSgpLGs7Zm9yKGsgaW4gZCl7dmFyIGw9ZFtrXSxtPXskc2NvcGU6bD09PWd8fGwuJCRpc29sYXRlU2NvcGU/ZTpmLCRlbGVtZW50OmEsJGF0dHJzOmIsJHRyYW5zY2x1ZGU6Y30scD1sLmNvbnRyb2xsZXI7IkAiPT1wJiYocD1iW2wubmFtZV0pO209dChwLG0sITAsbC5jb250cm9sbGVyQXMpO2hbbC5uYW1lXT1tO2EuZGF0YSgiJCIrbC5uYW1lKyJDb250cm9sbGVyIixtLmluc3RhbmNlKX1yZXR1cm4gaH0KZnVuY3Rpb24gVChhLGIsYyl7Zm9yKHZhciBkPTAsZT1hLmxlbmd0aDtkPGU7ZCsrKWFbZF09UmIoYVtkXSx7JCRpc29sYXRlU2NvcGU6YiwkJG5ld1Njb3BlOmN9KX1mdW5jdGlvbiBPKGIsZSxnLGgsayxsLG0pe2lmKGU9PT1rKXJldHVybiBudWxsO2s9bnVsbDtpZihmLmhhc093blByb3BlcnR5KGUpKXt2YXIgcDtlPWEuZ2V0KGUrIkRpcmVjdGl2ZSIpO2Zvcih2YXIgbj0wLHI9ZS5sZW5ndGg7bjxyO24rKyl0cnl7aWYocD1lW25dLCh5KGgpfHxoPnAucHJpb3JpdHkpJiYtMSE9cC5yZXN0cmljdC5pbmRleE9mKGcpKXtsJiYocD1SYihwLHskJHN0YXJ0OmwsJCRlbmQ6bX0pKTtpZighcC4kJGJpbmRpbmdzKXt2YXIgdT1wLHY9cCx4PXAubmFtZSxIPXtpc29sYXRlU2NvcGU6bnVsbCxiaW5kVG9Db250cm9sbGVyOm51bGx9O0Qodi5zY29wZSkmJighMD09PXYuYmluZFRvQ29udHJvbGxlcj8oSC5iaW5kVG9Db250cm9sbGVyPWQodi5zY29wZSx4LCEwKSxILmlzb2xhdGVTY29wZT17fSk6CkguaXNvbGF0ZVNjb3BlPWQodi5zY29wZSx4LCExKSk7RCh2LmJpbmRUb0NvbnRyb2xsZXIpJiYoSC5iaW5kVG9Db250cm9sbGVyPWQodi5iaW5kVG9Db250cm9sbGVyLHgsITApKTtpZihEKEguYmluZFRvQ29udHJvbGxlcikpe3ZhciBFPXYuY29udHJvbGxlcixNPXYuY29udHJvbGxlckFzO2lmKCFFKXRocm93IGdhKCJub2N0cmwiLHgpO2lmKCFYYyhFLE0pKXRocm93IGdhKCJub2lkZW50Iix4KTt9dmFyIHQ9dS4kJGJpbmRpbmdzPUg7RCh0Lmlzb2xhdGVTY29wZSkmJihwLiQkaXNvbGF0ZUJpbmRpbmdzPXQuaXNvbGF0ZVNjb3BlKX1iLnB1c2gocCk7az1wfX1jYXRjaChJKXtjKEkpfX1yZXR1cm4ga31mdW5jdGlvbiBWKGIpe2lmKGYuaGFzT3duUHJvcGVydHkoYikpZm9yKHZhciBjPWEuZ2V0KGIrIkRpcmVjdGl2ZSIpLGQ9MCxlPWMubGVuZ3RoO2Q8ZTtkKyspaWYoYj1jW2RdLGIubXVsdGlFbGVtZW50KXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uICQoYSxiKXt2YXIgYz1iLiRhdHRyLApkPWEuJGF0dHI7cShhLGZ1bmN0aW9uKGQsZSl7IiQiIT1lLmNoYXJBdCgwKSYmKGJbZV0mJmJbZV0hPT1kJiYoZCs9KCJzdHlsZSI9PT1lPyI7IjoiICIpK2JbZV0pLGEuJHNldChlLGQsITAsY1tlXSkpfSk7cShiLGZ1bmN0aW9uKGIsZSl7YS5oYXNPd25Qcm9wZXJ0eShlKXx8IiQiPT09ZS5jaGFyQXQoMCl8fChhW2VdPWIsImNsYXNzIiE9PWUmJiJzdHlsZSIhPT1lJiYoZFtlXT1jW2VdKSl9KX1mdW5jdGlvbiBiYShhLGIsYyxkLGYsZyxoLGspe3ZhciBsPVtdLG0scCxuPWJbMF0scj1hLnNoaWZ0KCksdT1SYihyLHt0ZW1wbGF0ZVVybDpudWxsLHRyYW5zY2x1ZGU6bnVsbCxyZXBsYWNlOm51bGwsJCRvcmlnaW5hbERpcmVjdGl2ZTpyfSksSD16KHIudGVtcGxhdGVVcmwpP3IudGVtcGxhdGVVcmwoYixjKTpyLnRlbXBsYXRlVXJsLEU9ci50ZW1wbGF0ZU5hbWVzcGFjZTtiLmVtcHR5KCk7ZShIKS50aGVuKGZ1bmN0aW9uKGUpe3ZhciB2LE07ZT14YShlKTtpZihyLnJlcGxhY2Upe2U9ClZiLnRlc3QoZSk/JGMoZGEoRSxXKGUpKSk6W107dj1lWzBdO2lmKDEhPWUubGVuZ3RofHwxIT09di5ub2RlVHlwZSl0aHJvdyBnYSgidHBscnQiLHIubmFtZSxIKTtlPXskYXR0cjp7fX07ZWEoZCxiLHYpO3ZhciBCPSRiKHYsW10sZSk7RChyLnNjb3BlKSYmVChCLCEwKTthPUIuY29uY2F0KGEpOyQoYyxlKX1lbHNlIHY9bixiLmh0bWwoZSk7YS51bnNoaWZ0KHUpO209b2EoYSx2LGMsZixiLHIsZyxoLGspO3EoZCxmdW5jdGlvbihhLGMpe2E9PXYmJihkW2NdPWJbMF0pfSk7Zm9yKHA9cyhiWzBdLmNoaWxkTm9kZXMsZik7bC5sZW5ndGg7KXtlPWwuc2hpZnQoKTtNPWwuc2hpZnQoKTt2YXIgdD1sLnNoaWZ0KCksST1sLnNoaWZ0KCksQj1iWzBdO2lmKCFlLiQkZGVzdHJveWVkKXtpZihNIT09bil7dmFyIFA9TS5jbGFzc05hbWU7ay5oYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSYmci5yZXBsYWNlfHwoQj1YYih2KSk7ZWEodCxGKE0pLEIpO3goRihCKSxQKX1NPW0udHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQ/CnphKGUsbS50cmFuc2NsdWRlLEkpOkk7bShwLGUsQixkLE0pfX1sPW51bGx9KTtyZXR1cm4gZnVuY3Rpb24oYSxiLGMsZCxlKXthPWU7Yi4kJGRlc3Ryb3llZHx8KGw/bC5wdXNoKGIsYyxkLGEpOihtLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50JiYoYT16YShiLG0udHJhbnNjbHVkZSxlKSksbShwLGIsYyxkLGEpKSl9fWZ1bmN0aW9uIFooYSxiKXt2YXIgYz1iLnByaW9yaXR5LWEucHJpb3JpdHk7cmV0dXJuIDAhPT1jP2M6YS5uYW1lIT09Yi5uYW1lP2EubmFtZTxiLm5hbWU/LTE6MTphLmluZGV4LWIuaW5kZXh9ZnVuY3Rpb24gWChhLGIsYyxkKXtmdW5jdGlvbiBlKGEpe3JldHVybiBhPyIgKG1vZHVsZTogIithKyIpIjoiIn1pZihiKXRocm93IGdhKCJtdWx0aWRpciIsYi5uYW1lLGUoYi4kJG1vZHVsZU5hbWUpLGMubmFtZSxlKGMuJCRtb2R1bGVOYW1lKSxhLHlhKGQpKTt9ZnVuY3Rpb24gY2EoYSxjKXt2YXIgZD1iKGMsITApO2QmJmEucHVzaCh7cHJpb3JpdHk6MCxjb21waWxlOmZ1bmN0aW9uKGEpe2E9CmEucGFyZW50KCk7dmFyIGI9ISFhLmxlbmd0aDtiJiZhYS4kJGFkZEJpbmRpbmdDbGFzcyhhKTtyZXR1cm4gZnVuY3Rpb24oYSxjKXt2YXIgZT1jLnBhcmVudCgpO2J8fGFhLiQkYWRkQmluZGluZ0NsYXNzKGUpO2FhLiQkYWRkQmluZGluZ0luZm8oZSxkLmV4cHJlc3Npb25zKTthLiR3YXRjaChkLGZ1bmN0aW9uKGEpe2NbMF0ubm9kZVZhbHVlPWF9KX19fSl9ZnVuY3Rpb24gZGEoYSxiKXthPVEoYXx8Imh0bWwiKTtzd2l0Y2goYSl7Y2FzZSAic3ZnIjpjYXNlICJtYXRoIjp2YXIgYz1DLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2MuaW5uZXJIVE1MPSI8IithKyI+IitiKyI8LyIrYSsiPiI7cmV0dXJuIGMuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzO2RlZmF1bHQ6cmV0dXJuIGJ9fWZ1bmN0aW9uIGhhKGEsYil7aWYoInNyY2RvYyI9PWIpcmV0dXJuIE0uSFRNTDt2YXIgYz13YShhKTtpZigieGxpbmtIcmVmIj09Ynx8ImZvcm0iPT1jJiYiYWN0aW9uIj09Ynx8ImltZyIhPQpjJiYoInNyYyI9PWJ8fCJuZ1NyYyI9PWIpKXJldHVybiBNLlJFU09VUkNFX1VSTH1mdW5jdGlvbiBpYShhLGMsZCxlLGYpe3ZhciBnPWhhKGEsZSk7Zj1rW2VdfHxmO3ZhciBoPWIoZCwhMCxnLGYpO2lmKGgpe2lmKCJtdWx0aXBsZSI9PT1lJiYic2VsZWN0Ij09PXdhKGEpKXRocm93IGdhKCJzZWxtdWx0aSIseWEoYSkpO2MucHVzaCh7cHJpb3JpdHk6MTAwLGNvbXBpbGU6ZnVuY3Rpb24oKXtyZXR1cm57cHJlOmZ1bmN0aW9uKGEsYyxrKXtjPWsuJCRvYnNlcnZlcnN8fChrLiQkb2JzZXJ2ZXJzPVUoKSk7aWYobS50ZXN0KGUpKXRocm93IGdhKCJub2RvbWV2ZW50cyIpO3ZhciBsPWtbZV07bCE9PWQmJihoPWwmJmIobCwhMCxnLGYpLGQ9bCk7aCYmKGtbZV09aChhKSwoY1tlXXx8KGNbZV09W10pKS4kJGludGVyPSEwLChrLiQkb2JzZXJ2ZXJzJiZrLiQkb2JzZXJ2ZXJzW2VdLiQkc2NvcGV8fGEpLiR3YXRjaChoLGZ1bmN0aW9uKGEsYil7ImNsYXNzIj09PWUmJmEhPWI/ay4kdXBkYXRlQ2xhc3MoYSwKYik6ay4kc2V0KGUsYSl9KSl9fX19KX19ZnVuY3Rpb24gZWEoYSxiLGMpe3ZhciBkPWJbMF0sZT1iLmxlbmd0aCxmPWQucGFyZW50Tm9kZSxnLGg7aWYoYSlmb3IoZz0wLGg9YS5sZW5ndGg7ZzxoO2crKylpZihhW2ddPT1kKXthW2crK109YztoPWcrZS0xO2Zvcih2YXIgaz1hLmxlbmd0aDtnPGs7ZysrLGgrKyloPGs/YVtnXT1hW2hdOmRlbGV0ZSBhW2ddO2EubGVuZ3RoLT1lLTE7YS5jb250ZXh0PT09ZCYmKGEuY29udGV4dD1jKTticmVha31mJiZmLnJlcGxhY2VDaGlsZChjLGQpO2E9Qy5kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7Zm9yKGc9MDtnPGU7ZysrKWEuYXBwZW5kQ2hpbGQoYltnXSk7Ri5oYXNEYXRhKGQpJiYoRi5kYXRhKGMsRi5kYXRhKGQpKSxGKGQpLm9mZigiJGRlc3Ryb3kiKSk7Ri5jbGVhbkRhdGEoYS5xdWVyeVNlbGVjdG9yQWxsKCIqIikpO2ZvcihnPTE7ZzxlO2crKylkZWxldGUgYltnXTtiWzBdPWM7Yi5sZW5ndGg9MX1mdW5jdGlvbiBqYShhLApiKXtyZXR1cm4gUyhmdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sYSxiKX1mdW5jdGlvbiBsYShhLGIsZCxlLGYsZyl7dHJ5e2EoYixkLGUsZixnKX1jYXRjaChoKXtjKGgseWEoZCkpfX1mdW5jdGlvbiBrYShhLGMsZCxlLGYpe2Z1bmN0aW9uIGcoYixjLGUpe3ooZC4kb25DaGFuZ2VzKSYmYyE9PWUmJihZfHwoYS4kJHBvc3REaWdlc3QoSSksWT1bXSksbXx8KG09e30sWS5wdXNoKGgpKSxtW2JdJiYoZT1tW2JdLnByZXZpb3VzVmFsdWUpLG1bYl09bmV3IEZiKGUsYykpfWZ1bmN0aW9uIGgoKXtkLiRvbkNoYW5nZXMobSk7bT12b2lkIDB9dmFyIGs9W10sbD17fSxtO3EoZSxmdW5jdGlvbihlLGgpe3ZhciBtPWUuYXR0ck5hbWUscD1lLm9wdGlvbmFsLHYsdSx4LEg7c3dpdGNoKGUubW9kZSl7Y2FzZSAiQCI6cHx8dWEuY2FsbChjLG0pfHwoZFtoXT1jW21dPXZvaWQgMCk7Yy4kb2JzZXJ2ZShtLGZ1bmN0aW9uKGEpe2lmKEcoYSl8fEdhKGEpKWcoaCxhLGRbaF0pLApkW2hdPWF9KTtjLiQkb2JzZXJ2ZXJzW21dLiQkc2NvcGU9YTt2PWNbbV07Ryh2KT9kW2hdPWIodikoYSk6R2EodikmJihkW2hdPXYpO2xbaF09bmV3IEZiKGJjLGRbaF0pO2JyZWFrO2Nhc2UgIj0iOmlmKCF1YS5jYWxsKGMsbSkpe2lmKHApYnJlYWs7Y1ttXT12b2lkIDB9aWYocCYmIWNbbV0pYnJlYWs7dT1uKGNbbV0pO0g9dS5saXRlcmFsP25hOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PT1ifHxhIT09YSYmYiE9PWJ9O3g9dS5hc3NpZ258fGZ1bmN0aW9uKCl7dj1kW2hdPXUoYSk7dGhyb3cgZ2EoIm5vbmFzc2lnbiIsY1ttXSxtLGYubmFtZSk7fTt2PWRbaF09dShhKTtwPWZ1bmN0aW9uKGIpe0goYixkW2hdKXx8KEgoYix2KT94KGEsYj1kW2hdKTpkW2hdPWIpO3JldHVybiB2PWJ9O3AuJHN0YXRlZnVsPSEwO3A9ZS5jb2xsZWN0aW9uP2EuJHdhdGNoQ29sbGVjdGlvbihjW21dLHApOmEuJHdhdGNoKG4oY1ttXSxwKSxudWxsLHUubGl0ZXJhbCk7ay5wdXNoKHApO2JyZWFrO2Nhc2UgIjwiOmlmKCF1YS5jYWxsKGMsCm0pKXtpZihwKWJyZWFrO2NbbV09dm9pZCAwfWlmKHAmJiFjW21dKWJyZWFrO3U9bihjW21dKTt2YXIgRT1kW2hdPXUoYSk7bFtoXT1uZXcgRmIoYmMsZFtoXSk7cD1hLiR3YXRjaCh1LGZ1bmN0aW9uKGEsYil7aWYoYj09PWEpe2lmKGI9PT1FKXJldHVybjtiPUV9ZyhoLGEsYik7ZFtoXT1hfSx1LmxpdGVyYWwpO2sucHVzaChwKTticmVhaztjYXNlICImIjp1PWMuaGFzT3duUHJvcGVydHkobSk/bihjW21dKTpBO2lmKHU9PT1BJiZwKWJyZWFrO2RbaF09ZnVuY3Rpb24oYil7cmV0dXJuIHUoYSxiKX19fSk7cmV0dXJue2luaXRpYWxDaGFuZ2VzOmwscmVtb3ZlV2F0Y2hlczprLmxlbmd0aCYmZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPWsubGVuZ3RoO2E8YjsrK2Epa1thXSgpfX19dmFyIHRhPS9eXHcvLHBhPUMuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikscWE9dSxZO0RhLnByb3RvdHlwZT17JG5vcm1hbGl6ZTpBYSwkYWRkQ2xhc3M6ZnVuY3Rpb24oYSl7YSYmMDxhLmxlbmd0aCYmCkguYWRkQ2xhc3ModGhpcy4kJGVsZW1lbnQsYSl9LCRyZW1vdmVDbGFzczpmdW5jdGlvbihhKXthJiYwPGEubGVuZ3RoJiZILnJlbW92ZUNsYXNzKHRoaXMuJCRlbGVtZW50LGEpfSwkdXBkYXRlQ2xhc3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hZChhLGIpO2MmJmMubGVuZ3RoJiZILmFkZENsYXNzKHRoaXMuJCRlbGVtZW50LGMpOyhjPWFkKGIsYSkpJiZjLmxlbmd0aCYmSC5yZW1vdmVDbGFzcyh0aGlzLiQkZWxlbWVudCxjKX0sJHNldDpmdW5jdGlvbihhLGIsZCxlKXt2YXIgZj1VYyh0aGlzLiQkZWxlbWVudFswXSxhKSxnPWJkW2FdLGg9YTtmPyh0aGlzLiQkZWxlbWVudC5wcm9wKGEsYiksZT1mKTpnJiYodGhpc1tnXT1iLGg9Zyk7dGhpc1thXT1iO2U/dGhpcy4kYXR0clthXT1lOihlPXRoaXMuJGF0dHJbYV0pfHwodGhpcy4kYXR0clthXT1lPUNjKGEsIi0iKSk7Zj13YSh0aGlzLiQkZWxlbWVudCk7aWYoImEiPT09ZiYmKCJocmVmIj09PWF8fCJ4bGlua0hyZWYiPT09YSl8fCJpbWciPT09CmYmJiJzcmMiPT09YSl0aGlzW2FdPWI9RShiLCJzcmMiPT09YSk7ZWxzZSBpZigiaW1nIj09PWYmJiJzcmNzZXQiPT09YSYmdyhiKSl7Zm9yKHZhciBmPSIiLGc9VyhiKSxrPS8oXHMrXGQreFxzKix8XHMrXGQrd1xzKix8XHMrLHwsXHMrKS8saz0vXHMvLnRlc3QoZyk/azovKCwpLyxnPWcuc3BsaXQoayksaz1NYXRoLmZsb29yKGcubGVuZ3RoLzIpLGw9MDtsPGs7bCsrKXZhciBtPTIqbCxmPWYrRShXKGdbbV0pLCEwKSxmPWYrKCIgIitXKGdbbSsxXSkpO2c9VyhnWzIqbF0pLnNwbGl0KC9ccy8pO2YrPUUoVyhnWzBdKSwhMCk7Mj09PWcubGVuZ3RoJiYoZis9IiAiK1coZ1sxXSkpO3RoaXNbYV09Yj1mfSExIT09ZCYmKG51bGw9PT1ifHx5KGIpP3RoaXMuJCRlbGVtZW50LnJlbW92ZUF0dHIoZSk6dGEudGVzdChlKT90aGlzLiQkZWxlbWVudC5hdHRyKGUsYik6UCh0aGlzLiQkZWxlbWVudFswXSxlLGIpKTsoYT10aGlzLiQkb2JzZXJ2ZXJzKSYmcShhW2hdLGZ1bmN0aW9uKGEpe3RyeXthKGIpfWNhdGNoKGQpe2MoZCl9fSl9LAokb2JzZXJ2ZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD1jLiQkb2JzZXJ2ZXJzfHwoYy4kJG9ic2VydmVycz1VKCkpLGU9ZFthXXx8KGRbYV09W10pO2UucHVzaChiKTtLLiRldmFsQXN5bmMoZnVuY3Rpb24oKXtlLiQkaW50ZXJ8fCFjLmhhc093blByb3BlcnR5KGEpfHx5KGNbYV0pfHxiKGNbYV0pfSk7cmV0dXJuIGZ1bmN0aW9uKCl7WmEoZSxiKX19fTt2YXIgcmE9Yi5zdGFydFN5bWJvbCgpLHNhPWIuZW5kU3ltYm9sKCkseGE9Int7Ij09cmEmJiJ9fSI9PXNhP1hhOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoL1x7XHsvZyxyYSkucmVwbGFjZSgvfX0vZyxzYSl9LEJhPS9ebmdBdHRyW0EtWl0vLENhPS9eKC4rKVN0YXJ0JC87YWEuJCRhZGRCaW5kaW5nSW5mbz1wP2Z1bmN0aW9uKGEsYil7dmFyIGM9YS5kYXRhKCIkYmluZGluZyIpfHxbXTtMKGIpP2M9Yy5jb25jYXQoYik6Yy5wdXNoKGIpO2EuZGF0YSgiJGJpbmRpbmciLGMpfTpBO2FhLiQkYWRkQmluZGluZ0NsYXNzPQpwP2Z1bmN0aW9uKGEpe3goYSwibmctYmluZGluZyIpfTpBO2FhLiQkYWRkU2NvcGVJbmZvPXA/ZnVuY3Rpb24oYSxiLGMsZCl7YS5kYXRhKGM/ZD8iJGlzb2xhdGVTY29wZU5vVGVtcGxhdGUiOiIkaXNvbGF0ZVNjb3BlIjoiJHNjb3BlIixiKX06QTthYS4kJGFkZFNjb3BlQ2xhc3M9cD9mdW5jdGlvbihhLGIpe3goYSxiPyJuZy1pc29sYXRlLXNjb3BlIjoibmctc2NvcGUiKX06QTthYS4kJGNyZWF0ZUNvbW1lbnQ9ZnVuY3Rpb24oYSxiKXt2YXIgYz0iIjtwJiYoYz0iICIrKGF8fCIiKSsiOiAiLGImJihjKz1iKyIgIikpO3JldHVybiBDLmRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoYyl9O3JldHVybiBhYX1dfWZ1bmN0aW9uIEZiKGEsYil7dGhpcy5wcmV2aW91c1ZhbHVlPWE7dGhpcy5jdXJyZW50VmFsdWU9Yn1mdW5jdGlvbiBBYShhKXtyZXR1cm4gZGIoYS5yZXBsYWNlKFljLCIiKSl9ZnVuY3Rpb24gYWQoYSxiKXt2YXIgZD0iIixjPWEuc3BsaXQoL1xzKy8pLGU9Yi5zcGxpdCgvXHMrLyksCmY9MDthOmZvcig7ZjxjLmxlbmd0aDtmKyspe2Zvcih2YXIgZz1jW2ZdLGg9MDtoPGUubGVuZ3RoO2grKylpZihnPT1lW2hdKWNvbnRpbnVlIGE7ZCs9KDA8ZC5sZW5ndGg/IiAiOiIiKStnfXJldHVybiBkfWZ1bmN0aW9uICRjKGEpe2E9RihhKTt2YXIgYj1hLmxlbmd0aDtpZigxPj1iKXJldHVybiBhO2Zvcig7Yi0tOyk4PT09YVtiXS5ub2RlVHlwZSYmYmcuY2FsbChhLGIsMSk7cmV0dXJuIGF9ZnVuY3Rpb24gWGMoYSxiKXtpZihiJiZHKGIpKXJldHVybiBiO2lmKEcoYSkpe3ZhciBkPWNkLmV4ZWMoYSk7aWYoZClyZXR1cm4gZFszXX19ZnVuY3Rpb24gZmYoKXt2YXIgYT17fSxiPSExO3RoaXMuaGFzPWZ1bmN0aW9uKGIpe3JldHVybiBhLmhhc093blByb3BlcnR5KGIpfTt0aGlzLnJlZ2lzdGVyPWZ1bmN0aW9uKGIsYyl7UWEoYiwiY29udHJvbGxlciIpO0QoYik/UyhhLGIpOmFbYl09Y307dGhpcy5hbGxvd0dsb2JhbHM9ZnVuY3Rpb24oKXtiPSEwfTt0aGlzLiRnZXQ9WyIkaW5qZWN0b3IiLAoiJHdpbmRvdyIsZnVuY3Rpb24oZCxjKXtmdW5jdGlvbiBlKGEsYixjLGQpe2lmKCFhfHwhRChhLiRzY29wZSkpdGhyb3cgTigiJGNvbnRyb2xsZXIiKSgibm9zY3AiLGQsYik7YS4kc2NvcGVbYl09Y31yZXR1cm4gZnVuY3Rpb24oZixnLGgsayl7dmFyIGwsbSxuO2g9ITA9PT1oO2smJkcoaykmJihuPWspO2lmKEcoZikpe2s9Zi5tYXRjaChjZCk7aWYoIWspdGhyb3cgY2coImN0cmxmbXQiLGYpO209a1sxXTtuPW58fGtbM107Zj1hLmhhc093blByb3BlcnR5KG0pP2FbbV06RWMoZy4kc2NvcGUsbSwhMCl8fChiP0VjKGMsbSwhMCk6dm9pZCAwKTtQYShmLG0sITApfWlmKGgpcmV0dXJuIGg9KEwoZik/ZltmLmxlbmd0aC0xXTpmKS5wcm90b3R5cGUsbD1PYmplY3QuY3JlYXRlKGh8fG51bGwpLG4mJmUoZyxuLGwsbXx8Zi5uYW1lKSxTKGZ1bmN0aW9uKCl7dmFyIGE9ZC5pbnZva2UoZixsLGcsbSk7YSE9PWwmJihEKGEpfHx6KGEpKSYmKGw9YSxuJiZlKGcsbixsLG18fGYubmFtZSkpO3JldHVybiBsfSwKe2luc3RhbmNlOmwsaWRlbnRpZmllcjpufSk7bD1kLmluc3RhbnRpYXRlKGYsZyxtKTtuJiZlKGcsbixsLG18fGYubmFtZSk7cmV0dXJuIGx9fV19ZnVuY3Rpb24gZ2YoKXt0aGlzLiRnZXQ9WyIkd2luZG93IixmdW5jdGlvbihhKXtyZXR1cm4gRihhLmRvY3VtZW50KX1dfWZ1bmN0aW9uIGhmKCl7dGhpcy4kZ2V0PVsiJGxvZyIsZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIsZCl7YS5lcnJvci5hcHBseShhLGFyZ3VtZW50cyl9fV19ZnVuY3Rpb24gY2MoYSl7cmV0dXJuIEQoYSk/ZGEoYSk/YS50b0lTT1N0cmluZygpOmJiKGEpOmF9ZnVuY3Rpb24gbmYoKXt0aGlzLiRnZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oYSl7aWYoIWEpcmV0dXJuIiI7dmFyIGI9W107dGMoYSxmdW5jdGlvbihhLGMpe251bGw9PT1hfHx5KGEpfHwoTChhKT9xKGEsZnVuY3Rpb24oYSl7Yi5wdXNoKGVhKGMpKyI9IitlYShjYyhhKSkpfSk6Yi5wdXNoKGVhKGMpKyI9IitlYShjYyhhKSkpKX0pOwpyZXR1cm4gYi5qb2luKCImIil9fX1mdW5jdGlvbiBvZigpe3RoaXMuJGdldD1mdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsZSxmKXtudWxsPT09YXx8eShhKXx8KEwoYSk/cShhLGZ1bmN0aW9uKGEsYyl7YihhLGUrIlsiKyhEKGEpP2M6IiIpKyJdIil9KTpEKGEpJiYhZGEoYSk/dGMoYSxmdW5jdGlvbihhLGMpe2IoYSxlKyhmPyIiOiJbIikrYysoZj8iIjoiXSIpKX0pOmQucHVzaChlYShlKSsiPSIrZWEoY2MoYSkpKSl9aWYoIWEpcmV0dXJuIiI7dmFyIGQ9W107YihhLCIiLCEwKTtyZXR1cm4gZC5qb2luKCImIil9fX1mdW5jdGlvbiBkYyhhLGIpe2lmKEcoYSkpe3ZhciBkPWEucmVwbGFjZShkZywiIikudHJpbSgpO2lmKGQpe3ZhciBjPWIoIkNvbnRlbnQtVHlwZSIpOyhjPWMmJjA9PT1jLmluZGV4T2YoZGQpKXx8KGM9KGM9ZC5tYXRjaChlZykpJiZmZ1tjWzBdXS50ZXN0KGQpKTtjJiYoYT14YyhkKSl9fXJldHVybiBhfWZ1bmN0aW9uIGVkKGEpe3ZhciBiPQpVKCksZDtHKGEpP3EoYS5zcGxpdCgiXG4iKSxmdW5jdGlvbihhKXtkPWEuaW5kZXhPZigiOiIpO3ZhciBlPVEoVyhhLnN1YnN0cigwLGQpKSk7YT1XKGEuc3Vic3RyKGQrMSkpO2UmJihiW2VdPWJbZV0/YltlXSsiLCAiK2E6YSl9KTpEKGEpJiZxKGEsZnVuY3Rpb24oYSxkKXt2YXIgZj1RKGQpLGc9VyhhKTtmJiYoYltmXT1iW2ZdP2JbZl0rIiwgIitnOmcpfSk7cmV0dXJuIGJ9ZnVuY3Rpb24gZmQoYSl7dmFyIGI7cmV0dXJuIGZ1bmN0aW9uKGQpe2J8fChiPWVkKGEpKTtyZXR1cm4gZD8oZD1iW1EoZCldLHZvaWQgMD09PWQmJihkPW51bGwpLGQpOmJ9fWZ1bmN0aW9uIGdkKGEsYixkLGMpe2lmKHooYykpcmV0dXJuIGMoYSxiLGQpO3EoYyxmdW5jdGlvbihjKXthPWMoYSxiLGQpfSk7cmV0dXJuIGF9ZnVuY3Rpb24gbWYoKXt2YXIgYT10aGlzLmRlZmF1bHRzPXt0cmFuc2Zvcm1SZXNwb25zZTpbZGNdLHRyYW5zZm9ybVJlcXVlc3Q6W2Z1bmN0aW9uKGEpe3JldHVybiBEKGEpJiYiW29iamVjdCBGaWxlXSIhPT0KbWEuY2FsbChhKSYmIltvYmplY3QgQmxvYl0iIT09bWEuY2FsbChhKSYmIltvYmplY3QgRm9ybURhdGFdIiE9PW1hLmNhbGwoYSk/YmIoYSk6YX1dLGhlYWRlcnM6e2NvbW1vbjp7QWNjZXB0OiJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L3BsYWluLCAqLyoifSxwb3N0OmlhKGVjKSxwdXQ6aWEoZWMpLHBhdGNoOmlhKGVjKX0seHNyZkNvb2tpZU5hbWU6IlhTUkYtVE9LRU4iLHhzcmZIZWFkZXJOYW1lOiJYLVhTUkYtVE9LRU4iLHBhcmFtU2VyaWFsaXplcjoiJGh0dHBQYXJhbVNlcmlhbGl6ZXIifSxiPSExO3RoaXMudXNlQXBwbHlBc3luYz1mdW5jdGlvbihhKXtyZXR1cm4gdyhhKT8oYj0hIWEsdGhpcyk6Yn07dmFyIGQ9ITA7dGhpcy51c2VMZWdhY3lQcm9taXNlRXh0ZW5zaW9ucz1mdW5jdGlvbihhKXtyZXR1cm4gdyhhKT8oZD0hIWEsdGhpcyk6ZH07dmFyIGM9dGhpcy5pbnRlcmNlcHRvcnM9W107dGhpcy4kZ2V0PVsiJGh0dHBCYWNrZW5kIiwiJCRjb29raWVSZWFkZXIiLCIkY2FjaGVGYWN0b3J5IiwKIiRyb290U2NvcGUiLCIkcSIsIiRpbmplY3RvciIsZnVuY3Rpb24oZSxmLGcsaCxrLGwpe2Z1bmN0aW9uIG0oYil7ZnVuY3Rpb24gYyhhLGIpe2Zvcih2YXIgZD0wLGU9Yi5sZW5ndGg7ZDxlOyl7dmFyIGY9YltkKytdLGc9YltkKytdO2E9YS50aGVuKGYsZyl9Yi5sZW5ndGg9MDtyZXR1cm4gYX1mdW5jdGlvbiBlKGEsYil7dmFyIGMsZD17fTtxKGEsZnVuY3Rpb24oYSxlKXt6KGEpPyhjPWEoYiksbnVsbCE9YyYmKGRbZV09YykpOmRbZV09YX0pO3JldHVybiBkfWZ1bmN0aW9uIGYoYSl7dmFyIGI9Uyh7fSxhKTtiLmRhdGE9Z2QoYS5kYXRhLGEuaGVhZGVycyxhLnN0YXR1cyxnLnRyYW5zZm9ybVJlc3BvbnNlKTthPWEuc3RhdHVzO3JldHVybiAyMDA8PWEmJjMwMD5hP2I6ay5yZWplY3QoYil9aWYoIUQoYikpdGhyb3cgTigiJGh0dHAiKSgiYmFkcmVxIixiKTtpZighRyhiLnVybCkpdGhyb3cgTigiJGh0dHAiKSgiYmFkcmVxIixiLnVybCk7dmFyIGc9Uyh7bWV0aG9kOiJnZXQiLHRyYW5zZm9ybVJlcXVlc3Q6YS50cmFuc2Zvcm1SZXF1ZXN0LAp0cmFuc2Zvcm1SZXNwb25zZTphLnRyYW5zZm9ybVJlc3BvbnNlLHBhcmFtU2VyaWFsaXplcjphLnBhcmFtU2VyaWFsaXplcn0sYik7Zy5oZWFkZXJzPWZ1bmN0aW9uKGIpe3ZhciBjPWEuaGVhZGVycyxkPVMoe30sYi5oZWFkZXJzKSxmLGcsaCxjPVMoe30sYy5jb21tb24sY1tRKGIubWV0aG9kKV0pO2E6Zm9yKGYgaW4gYyl7Zz1RKGYpO2ZvcihoIGluIGQpaWYoUShoKT09PWcpY29udGludWUgYTtkW2ZdPWNbZl19cmV0dXJuIGUoZCxpYShiKSl9KGIpO2cubWV0aG9kPXViKGcubWV0aG9kKTtnLnBhcmFtU2VyaWFsaXplcj1HKGcucGFyYW1TZXJpYWxpemVyKT9sLmdldChnLnBhcmFtU2VyaWFsaXplcik6Zy5wYXJhbVNlcmlhbGl6ZXI7dmFyIGg9W10sbT1bXSxwPWsud2hlbihnKTtxKFIsZnVuY3Rpb24oYSl7KGEucmVxdWVzdHx8YS5yZXF1ZXN0RXJyb3IpJiZoLnVuc2hpZnQoYS5yZXF1ZXN0LGEucmVxdWVzdEVycm9yKTsoYS5yZXNwb25zZXx8YS5yZXNwb25zZUVycm9yKSYmbS5wdXNoKGEucmVzcG9uc2UsCmEucmVzcG9uc2VFcnJvcil9KTtwPWMocCxoKTtwPXAudGhlbihmdW5jdGlvbihiKXt2YXIgYz1iLmhlYWRlcnMsZD1nZChiLmRhdGEsZmQoYyksdm9pZCAwLGIudHJhbnNmb3JtUmVxdWVzdCk7eShkKSYmcShjLGZ1bmN0aW9uKGEsYil7ImNvbnRlbnQtdHlwZSI9PT1RKGIpJiZkZWxldGUgY1tiXX0pO3koYi53aXRoQ3JlZGVudGlhbHMpJiYheShhLndpdGhDcmVkZW50aWFscykmJihiLndpdGhDcmVkZW50aWFscz1hLndpdGhDcmVkZW50aWFscyk7cmV0dXJuIG4oYixkKS50aGVuKGYsZil9KTtwPWMocCxtKTtkPyhwLnN1Y2Nlc3M9ZnVuY3Rpb24oYSl7UGEoYSwiZm4iKTtwLnRoZW4oZnVuY3Rpb24oYil7YShiLmRhdGEsYi5zdGF0dXMsYi5oZWFkZXJzLGcpfSk7cmV0dXJuIHB9LHAuZXJyb3I9ZnVuY3Rpb24oYSl7UGEoYSwiZm4iKTtwLnRoZW4obnVsbCxmdW5jdGlvbihiKXthKGIuZGF0YSxiLnN0YXR1cyxiLmhlYWRlcnMsZyl9KTtyZXR1cm4gcH0pOihwLnN1Y2Nlc3M9aGQoInN1Y2Nlc3MiKSwKcC5lcnJvcj1oZCgiZXJyb3IiKSk7cmV0dXJuIHB9ZnVuY3Rpb24gbihjLGQpe2Z1bmN0aW9uIGcoYSl7aWYoYSl7dmFyIGM9e307cShhLGZ1bmN0aW9uKGEsZCl7Y1tkXT1mdW5jdGlvbihjKXtmdW5jdGlvbiBkKCl7YShjKX1iP2guJGFwcGx5QXN5bmMoZCk6aC4kJHBoYXNlP2QoKTpoLiRhcHBseShkKX19KTtyZXR1cm4gY319ZnVuY3Rpb24gbChhLGMsZCxlKXtmdW5jdGlvbiBmKCl7bihjLGEsZCxlKX1FJiYoMjAwPD1hJiYzMDA+YT9FLnB1dChQLFthLGMsZWQoZCksZV0pOkUucmVtb3ZlKFApKTtiP2guJGFwcGx5QXN5bmMoZik6KGYoKSxoLiQkcGhhc2V8fGguJGFwcGx5KCkpfWZ1bmN0aW9uIG4oYSxiLGQsZSl7Yj0tMTw9Yj9iOjA7KDIwMDw9YiYmMzAwPmI/TS5yZXNvbHZlOk0ucmVqZWN0KSh7ZGF0YTphLHN0YXR1czpiLGhlYWRlcnM6ZmQoZCksY29uZmlnOmMsc3RhdHVzVGV4dDplfSl9ZnVuY3Rpb24gdChhKXtuKGEuZGF0YSxhLnN0YXR1cyxpYShhLmhlYWRlcnMoKSksCmEuc3RhdHVzVGV4dCl9ZnVuY3Rpb24gUigpe3ZhciBhPW0ucGVuZGluZ1JlcXVlc3RzLmluZGV4T2YoYyk7LTEhPT1hJiZtLnBlbmRpbmdSZXF1ZXN0cy5zcGxpY2UoYSwxKX12YXIgTT1rLmRlZmVyKCksSD1NLnByb21pc2UsRSxJLERhPWMuaGVhZGVycyxQPXAoYy51cmwsYy5wYXJhbVNlcmlhbGl6ZXIoYy5wYXJhbXMpKTttLnBlbmRpbmdSZXF1ZXN0cy5wdXNoKGMpO0gudGhlbihSLFIpOyFjLmNhY2hlJiYhYS5jYWNoZXx8ITE9PT1jLmNhY2hlfHwiR0VUIiE9PWMubWV0aG9kJiYiSlNPTlAiIT09Yy5tZXRob2R8fChFPUQoYy5jYWNoZSk/Yy5jYWNoZTpEKGEuY2FjaGUpP2EuY2FjaGU6dSk7RSYmKEk9RS5nZXQoUCksdyhJKT9JJiZ6KEkudGhlbik/SS50aGVuKHQsdCk6TChJKT9uKElbMV0sSVswXSxpYShJWzJdKSxJWzNdKTpuKEksMjAwLHt9LCJPSyIpOkUucHV0KFAsSCkpO3koSSkmJigoST1pZChjLnVybCk/ZigpW2MueHNyZkNvb2tpZU5hbWV8fGEueHNyZkNvb2tpZU5hbWVdOgp2b2lkIDApJiYoRGFbYy54c3JmSGVhZGVyTmFtZXx8YS54c3JmSGVhZGVyTmFtZV09SSksZShjLm1ldGhvZCxQLGQsbCxEYSxjLnRpbWVvdXQsYy53aXRoQ3JlZGVudGlhbHMsYy5yZXNwb25zZVR5cGUsZyhjLmV2ZW50SGFuZGxlcnMpLGcoYy51cGxvYWRFdmVudEhhbmRsZXJzKSkpO3JldHVybiBIfWZ1bmN0aW9uIHAoYSxiKXswPGIubGVuZ3RoJiYoYSs9KC0xPT1hLmluZGV4T2YoIj8iKT8iPyI6IiYiKStiKTtyZXR1cm4gYX12YXIgdT1nKCIkaHR0cCIpO2EucGFyYW1TZXJpYWxpemVyPUcoYS5wYXJhbVNlcmlhbGl6ZXIpP2wuZ2V0KGEucGFyYW1TZXJpYWxpemVyKTphLnBhcmFtU2VyaWFsaXplcjt2YXIgUj1bXTtxKGMsZnVuY3Rpb24oYSl7Ui51bnNoaWZ0KEcoYSk/bC5nZXQoYSk6bC5pbnZva2UoYSkpfSk7bS5wZW5kaW5nUmVxdWVzdHM9W107KGZ1bmN0aW9uKGEpe3EoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe21bYV09ZnVuY3Rpb24oYixjKXtyZXR1cm4gbShTKHt9LGN8fHt9LAp7bWV0aG9kOmEsdXJsOmJ9KSl9fSl9KSgiZ2V0IiwiZGVsZXRlIiwiaGVhZCIsImpzb25wIik7KGZ1bmN0aW9uKGEpe3EoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe21bYV09ZnVuY3Rpb24oYixjLGQpe3JldHVybiBtKFMoe30sZHx8e30se21ldGhvZDphLHVybDpiLGRhdGE6Y30pKX19KX0pKCJwb3N0IiwicHV0IiwicGF0Y2giKTttLmRlZmF1bHRzPWE7cmV0dXJuIG19XX1mdW5jdGlvbiBxZigpe3RoaXMuJGdldD1mdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgQy5YTUxIdHRwUmVxdWVzdH19fWZ1bmN0aW9uIHBmKCl7dGhpcy4kZ2V0PVsiJGJyb3dzZXIiLCIkanNvbnBDYWxsYmFja3MiLCIkZG9jdW1lbnQiLCIkeGhyRmFjdG9yeSIsZnVuY3Rpb24oYSxiLGQsYyl7cmV0dXJuIGdnKGEsYyxhLmRlZmVyLGIsZFswXSl9XX1mdW5jdGlvbiBnZyhhLGIsZCxjLGUpe2Z1bmN0aW9uIGYoYSxiLGQpe2E9YS5yZXBsYWNlKCJKU09OX0NBTExCQUNLIixiKTt2YXIgZj0KZS5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKSxtPW51bGw7Zi50eXBlPSJ0ZXh0L2phdmFzY3JpcHQiO2Yuc3JjPWE7Zi5hc3luYz0hMDttPWZ1bmN0aW9uKGEpe2YucmVtb3ZlRXZlbnRMaXN0ZW5lcigibG9hZCIsbSwhMSk7Zi5yZW1vdmVFdmVudExpc3RlbmVyKCJlcnJvciIsbSwhMSk7ZS5ib2R5LnJlbW92ZUNoaWxkKGYpO2Y9bnVsbDt2YXIgZz0tMSx1PSJ1bmtub3duIjthJiYoImxvYWQiIT09YS50eXBlfHxjLndhc0NhbGxlZChiKXx8KGE9e3R5cGU6ImVycm9yIn0pLHU9YS50eXBlLGc9ImVycm9yIj09PWEudHlwZT80MDQ6MjAwKTtkJiZkKGcsdSl9O2YuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsbSwhMSk7Zi5hZGRFdmVudExpc3RlbmVyKCJlcnJvciIsbSwhMSk7ZS5ib2R5LmFwcGVuZENoaWxkKGYpO3JldHVybiBtfXJldHVybiBmdW5jdGlvbihlLGgsayxsLG0sbixwLHUsUixCKXtmdW5jdGlvbiByKCl7ZmEmJmZhKCk7dCYmdC5hYm9ydCgpfWZ1bmN0aW9uIEooYixjLGUsCmYsZyl7dyhNKSYmZC5jYW5jZWwoTSk7ZmE9dD1udWxsO2IoYyxlLGYsZyk7YS4kJGNvbXBsZXRlT3V0c3RhbmRpbmdSZXF1ZXN0KEEpfWEuJCRpbmNPdXRzdGFuZGluZ1JlcXVlc3RDb3VudCgpO2g9aHx8YS51cmwoKTtpZigianNvbnAiPT09UShlKSl2YXIgdj1jLmNyZWF0ZUNhbGxiYWNrKGgpLGZhPWYoaCx2LGZ1bmN0aW9uKGEsYil7dmFyIGQ9MjAwPT09YSYmYy5nZXRSZXNwb25zZSh2KTtKKGwsYSxkLCIiLGIpO2MucmVtb3ZlQ2FsbGJhY2sodil9KTtlbHNle3ZhciB0PWIoZSxoKTt0Lm9wZW4oZSxoLCEwKTtxKG0sZnVuY3Rpb24oYSxiKXt3KGEpJiZ0LnNldFJlcXVlc3RIZWFkZXIoYixhKX0pO3Qub25sb2FkPWZ1bmN0aW9uKCl7dmFyIGE9dC5zdGF0dXNUZXh0fHwiIixiPSJyZXNwb25zZSJpbiB0P3QucmVzcG9uc2U6dC5yZXNwb25zZVRleHQsYz0xMjIzPT09dC5zdGF0dXM/MjA0OnQuc3RhdHVzOzA9PT1jJiYoYz1iPzIwMDoiZmlsZSI9PVkoaCkucHJvdG9jb2w/NDA0OgowKTtKKGwsYyxiLHQuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCksYSl9O2U9ZnVuY3Rpb24oKXtKKGwsLTEsbnVsbCxudWxsLCIiKX07dC5vbmVycm9yPWU7dC5vbmFib3J0PWU7cShSLGZ1bmN0aW9uKGEsYil7dC5hZGRFdmVudExpc3RlbmVyKGIsYSl9KTtxKEIsZnVuY3Rpb24oYSxiKXt0LnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKGIsYSl9KTtwJiYodC53aXRoQ3JlZGVudGlhbHM9ITApO2lmKHUpdHJ5e3QucmVzcG9uc2VUeXBlPXV9Y2F0Y2goSyl7aWYoImpzb24iIT09dSl0aHJvdyBLO310LnNlbmQoeShrKT9udWxsOmspfWlmKDA8bil2YXIgTT1kKHIsbik7ZWxzZSBuJiZ6KG4udGhlbikmJm4udGhlbihyKX19ZnVuY3Rpb24ga2YoKXt2YXIgYT0ie3siLGI9In19Ijt0aGlzLnN0YXJ0U3ltYm9sPWZ1bmN0aW9uKGIpe3JldHVybiBiPyhhPWIsdGhpcyk6YX07dGhpcy5lbmRTeW1ib2w9ZnVuY3Rpb24oYSl7cmV0dXJuIGE/KGI9YSx0aGlzKTpifTt0aGlzLiRnZXQ9WyIkcGFyc2UiLAoiJGV4Y2VwdGlvbkhhbmRsZXIiLCIkc2NlIixmdW5jdGlvbihkLGMsZSl7ZnVuY3Rpb24gZihhKXtyZXR1cm4iXFxcXFxcIithfWZ1bmN0aW9uIGcoYyl7cmV0dXJuIGMucmVwbGFjZShuLGEpLnJlcGxhY2UocCxiKX1mdW5jdGlvbiBoKGEsYixjLGQpe3ZhciBlO3JldHVybiBlPWEuJHdhdGNoKGZ1bmN0aW9uKGEpe2UoKTtyZXR1cm4gZChhKX0sYixjKX1mdW5jdGlvbiBrKGYsayxwLG4pe2Z1bmN0aW9uIEooYSl7dHJ5e3ZhciBiPWE7YT1wP2UuZ2V0VHJ1c3RlZChwLGIpOmUudmFsdWVPZihiKTt2YXIgZDtpZihuJiYhdyhhKSlkPWE7ZWxzZSBpZihudWxsPT1hKWQ9IiI7ZWxzZXtzd2l0Y2godHlwZW9mIGEpe2Nhc2UgInN0cmluZyI6YnJlYWs7Y2FzZSAibnVtYmVyIjphPSIiK2E7YnJlYWs7ZGVmYXVsdDphPWJiKGEpfWQ9YX1yZXR1cm4gZH1jYXRjaChnKXtjKEthLmludGVycihmLGcpKX19aWYoIWYubGVuZ3RofHwtMT09PWYuaW5kZXhPZihhKSl7dmFyIHY7a3x8KGs9ZyhmKSwKdj1oYShrKSx2LmV4cD1mLHYuZXhwcmVzc2lvbnM9W10sdi4kJHdhdGNoRGVsZWdhdGU9aCk7cmV0dXJuIHZ9bj0hIW47dmFyIHEsdCxLPTAsTT1bXSxIPVtdO3Y9Zi5sZW5ndGg7Zm9yKHZhciBFPVtdLEk9W107Szx2OylpZigtMSE9KHE9Zi5pbmRleE9mKGEsSykpJiYtMSE9KHQ9Zi5pbmRleE9mKGIscStsKSkpSyE9PXEmJkUucHVzaChnKGYuc3Vic3RyaW5nKEsscSkpKSxLPWYuc3Vic3RyaW5nKHErbCx0KSxNLnB1c2goSyksSC5wdXNoKGQoSyxKKSksSz10K20sSS5wdXNoKEUubGVuZ3RoKSxFLnB1c2goIiIpO2Vsc2V7SyE9PXYmJkUucHVzaChnKGYuc3Vic3RyaW5nKEspKSk7YnJlYWt9cCYmMTxFLmxlbmd0aCYmS2EudGhyb3dOb2NvbmNhdChmKTtpZigha3x8TS5sZW5ndGgpe3ZhciBEYT1mdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPU0ubGVuZ3RoO2I8YztiKyspe2lmKG4mJnkoYVtiXSkpcmV0dXJuO0VbSVtiXV09YVtiXX1yZXR1cm4gRS5qb2luKCIiKX07cmV0dXJuIFMoZnVuY3Rpb24oYSl7dmFyIGI9CjAsZD1NLmxlbmd0aCxlPUFycmF5KGQpO3RyeXtmb3IoO2I8ZDtiKyspZVtiXT1IW2JdKGEpO3JldHVybiBEYShlKX1jYXRjaChnKXtjKEthLmludGVycihmLGcpKX19LHtleHA6ZixleHByZXNzaW9uczpNLCQkd2F0Y2hEZWxlZ2F0ZTpmdW5jdGlvbihhLGIpe3ZhciBjO3JldHVybiBhLiR3YXRjaEdyb3VwKEgsZnVuY3Rpb24oZCxlKXt2YXIgZj1EYShkKTt6KGIpJiZiLmNhbGwodGhpcyxmLGQhPT1lP2M6ZixhKTtjPWZ9KX19KX19dmFyIGw9YS5sZW5ndGgsbT1iLmxlbmd0aCxuPW5ldyBSZWdFeHAoYS5yZXBsYWNlKC8uL2csZiksImciKSxwPW5ldyBSZWdFeHAoYi5yZXBsYWNlKC8uL2csZiksImciKTtrLnN0YXJ0U3ltYm9sPWZ1bmN0aW9uKCl7cmV0dXJuIGF9O2suZW5kU3ltYm9sPWZ1bmN0aW9uKCl7cmV0dXJuIGJ9O3JldHVybiBrfV19ZnVuY3Rpb24gbGYoKXt0aGlzLiRnZXQ9WyIkcm9vdFNjb3BlIiwiJHdpbmRvdyIsIiRxIiwiJCRxIiwiJGJyb3dzZXIiLGZ1bmN0aW9uKGEsCmIsZCxjLGUpe2Z1bmN0aW9uIGYoZixrLGwsbSl7ZnVuY3Rpb24gbigpe3A/Zi5hcHBseShudWxsLHUpOmYocil9dmFyIHA9NDxhcmd1bWVudHMubGVuZ3RoLHU9cD92YS5jYWxsKGFyZ3VtZW50cyw0KTpbXSxSPWIuc2V0SW50ZXJ2YWwscT1iLmNsZWFySW50ZXJ2YWwscj0wLEo9dyhtKSYmIW0sdj0oSj9jOmQpLmRlZmVyKCksZmE9di5wcm9taXNlO2w9dyhsKT9sOjA7ZmEuJCRpbnRlcnZhbElkPVIoZnVuY3Rpb24oKXtKP2UuZGVmZXIobik6YS4kZXZhbEFzeW5jKG4pO3Yubm90aWZ5KHIrKyk7MDxsJiZyPj1sJiYodi5yZXNvbHZlKHIpLHEoZmEuJCRpbnRlcnZhbElkKSxkZWxldGUgZ1tmYS4kJGludGVydmFsSWRdKTtKfHxhLiRhcHBseSgpfSxrKTtnW2ZhLiQkaW50ZXJ2YWxJZF09djtyZXR1cm4gZmF9dmFyIGc9e307Zi5jYW5jZWw9ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJmEuJCRpbnRlcnZhbElkIGluIGc/KGdbYS4kJGludGVydmFsSWRdLnJlamVjdCgiY2FuY2VsZWQiKSxiLmNsZWFySW50ZXJ2YWwoYS4kJGludGVydmFsSWQpLApkZWxldGUgZ1thLiQkaW50ZXJ2YWxJZF0sITApOiExfTtyZXR1cm4gZn1dfWZ1bmN0aW9uIGZjKGEpe2E9YS5zcGxpdCgiLyIpO2Zvcih2YXIgYj1hLmxlbmd0aDtiLS07KWFbYl09cWIoYVtiXSk7cmV0dXJuIGEuam9pbigiLyIpfWZ1bmN0aW9uIGpkKGEsYil7dmFyIGQ9WShhKTtiLiQkcHJvdG9jb2w9ZC5wcm90b2NvbDtiLiQkaG9zdD1kLmhvc3RuYW1lO2IuJCRwb3J0PVooZC5wb3J0KXx8aGdbZC5wcm90b2NvbF18fG51bGx9ZnVuY3Rpb24ga2QoYSxiKXt2YXIgZD0iLyIhPT1hLmNoYXJBdCgwKTtkJiYoYT0iLyIrYSk7dmFyIGM9WShhKTtiLiQkcGF0aD1kZWNvZGVVUklDb21wb25lbnQoZCYmIi8iPT09Yy5wYXRobmFtZS5jaGFyQXQoMCk/Yy5wYXRobmFtZS5zdWJzdHJpbmcoMSk6Yy5wYXRobmFtZSk7Yi4kJHNlYXJjaD1BYyhjLnNlYXJjaCk7Yi4kJGhhc2g9ZGVjb2RlVVJJQ29tcG9uZW50KGMuaGFzaCk7Yi4kJHBhdGgmJiIvIiE9Yi4kJHBhdGguY2hhckF0KDApJiYoYi4kJHBhdGg9CiIvIitiLiQkcGF0aCl9ZnVuY3Rpb24ga2EoYSxiKXtpZigwPT09Yi5sYXN0SW5kZXhPZihhLDApKXJldHVybiBiLnN1YnN0cihhLmxlbmd0aCl9ZnVuY3Rpb24gSmEoYSl7dmFyIGI9YS5pbmRleE9mKCIjIik7cmV0dXJuLTE9PWI/YTphLnN1YnN0cigwLGIpfWZ1bmN0aW9uIGpiKGEpe3JldHVybiBhLnJlcGxhY2UoLygjLispfCMkLywiJDEiKX1mdW5jdGlvbiBnYyhhLGIsZCl7dGhpcy4kJGh0bWw1PSEwO2Q9ZHx8IiI7amQoYSx0aGlzKTt0aGlzLiQkcGFyc2U9ZnVuY3Rpb24oYSl7dmFyIGQ9a2EoYixhKTtpZighRyhkKSl0aHJvdyBHYigiaXB0aHByZngiLGEsYik7a2QoZCx0aGlzKTt0aGlzLiQkcGF0aHx8KHRoaXMuJCRwYXRoPSIvIik7dGhpcy4kJGNvbXBvc2UoKX07dGhpcy4kJGNvbXBvc2U9ZnVuY3Rpb24oKXt2YXIgYT1UYih0aGlzLiQkc2VhcmNoKSxkPXRoaXMuJCRoYXNoPyIjIitxYih0aGlzLiQkaGFzaCk6IiI7dGhpcy4kJHVybD1mYyh0aGlzLiQkcGF0aCkrKGE/Ij8iKwphOiIiKStkO3RoaXMuJCRhYnNVcmw9Yit0aGlzLiQkdXJsLnN1YnN0cigxKX07dGhpcy4kJHBhcnNlTGlua1VybD1mdW5jdGlvbihjLGUpe2lmKGUmJiIjIj09PWVbMF0pcmV0dXJuIHRoaXMuaGFzaChlLnNsaWNlKDEpKSwhMDt2YXIgZixnO3coZj1rYShhLGMpKT8oZz1mLGc9dyhmPWthKGQsZikpP2IrKGthKCIvIixmKXx8Zik6YStnKTp3KGY9a2EoYixjKSk/Zz1iK2Y6Yj09YysiLyImJihnPWIpO2cmJnRoaXMuJCRwYXJzZShnKTtyZXR1cm4hIWd9fWZ1bmN0aW9uIGhjKGEsYixkKXtqZChhLHRoaXMpO3RoaXMuJCRwYXJzZT1mdW5jdGlvbihjKXt2YXIgZT1rYShhLGMpfHxrYShiLGMpLGY7eShlKXx8IiMiIT09ZS5jaGFyQXQoMCk/dGhpcy4kJGh0bWw1P2Y9ZTooZj0iIix5KGUpJiYoYT1jLHRoaXMucmVwbGFjZSgpKSk6KGY9a2EoZCxlKSx5KGYpJiYoZj1lKSk7a2QoZix0aGlzKTtjPXRoaXMuJCRwYXRoO3ZhciBlPWEsZz0vXlwvW0EtWl06KFwvLiopLzswPT09Zi5sYXN0SW5kZXhPZihlLAowKSYmKGY9Zi5yZXBsYWNlKGUsIiIpKTtnLmV4ZWMoZil8fChjPShmPWcuZXhlYyhjKSk/ZlsxXTpjKTt0aGlzLiQkcGF0aD1jO3RoaXMuJCRjb21wb3NlKCl9O3RoaXMuJCRjb21wb3NlPWZ1bmN0aW9uKCl7dmFyIGI9VGIodGhpcy4kJHNlYXJjaCksZT10aGlzLiQkaGFzaD8iIyIrcWIodGhpcy4kJGhhc2gpOiIiO3RoaXMuJCR1cmw9ZmModGhpcy4kJHBhdGgpKyhiPyI/IitiOiIiKStlO3RoaXMuJCRhYnNVcmw9YSsodGhpcy4kJHVybD9kK3RoaXMuJCR1cmw6IiIpfTt0aGlzLiQkcGFyc2VMaW5rVXJsPWZ1bmN0aW9uKGIsZCl7cmV0dXJuIEphKGEpPT1KYShiKT8odGhpcy4kJHBhcnNlKGIpLCEwKTohMX19ZnVuY3Rpb24gbGQoYSxiLGQpe3RoaXMuJCRodG1sNT0hMDtoYy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy4kJHBhcnNlTGlua1VybD1mdW5jdGlvbihjLGUpe2lmKGUmJiIjIj09PWVbMF0pcmV0dXJuIHRoaXMuaGFzaChlLnNsaWNlKDEpKSwhMDt2YXIgZixnO2E9PUphKGMpPwpmPWM6KGc9a2EoYixjKSk/Zj1hK2QrZzpiPT09YysiLyImJihmPWIpO2YmJnRoaXMuJCRwYXJzZShmKTtyZXR1cm4hIWZ9O3RoaXMuJCRjb21wb3NlPWZ1bmN0aW9uKCl7dmFyIGI9VGIodGhpcy4kJHNlYXJjaCksZT10aGlzLiQkaGFzaD8iIyIrcWIodGhpcy4kJGhhc2gpOiIiO3RoaXMuJCR1cmw9ZmModGhpcy4kJHBhdGgpKyhiPyI/IitiOiIiKStlO3RoaXMuJCRhYnNVcmw9YStkK3RoaXMuJCR1cmx9fWZ1bmN0aW9uIEhiKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0aGlzW2FdfX1mdW5jdGlvbiBtZChhLGIpe3JldHVybiBmdW5jdGlvbihkKXtpZih5KGQpKXJldHVybiB0aGlzW2FdO3RoaXNbYV09YihkKTt0aGlzLiQkY29tcG9zZSgpO3JldHVybiB0aGlzfX1mdW5jdGlvbiBzZigpe3ZhciBhPSIiLGI9e2VuYWJsZWQ6ITEscmVxdWlyZUJhc2U6ITAscmV3cml0ZUxpbmtzOiEwfTt0aGlzLmhhc2hQcmVmaXg9ZnVuY3Rpb24oYil7cmV0dXJuIHcoYik/KGE9Yix0aGlzKToKYX07dGhpcy5odG1sNU1vZGU9ZnVuY3Rpb24oYSl7cmV0dXJuIEdhKGEpPyhiLmVuYWJsZWQ9YSx0aGlzKTpEKGEpPyhHYShhLmVuYWJsZWQpJiYoYi5lbmFibGVkPWEuZW5hYmxlZCksR2EoYS5yZXF1aXJlQmFzZSkmJihiLnJlcXVpcmVCYXNlPWEucmVxdWlyZUJhc2UpLEdhKGEucmV3cml0ZUxpbmtzKSYmKGIucmV3cml0ZUxpbmtzPWEucmV3cml0ZUxpbmtzKSx0aGlzKTpifTt0aGlzLiRnZXQ9WyIkcm9vdFNjb3BlIiwiJGJyb3dzZXIiLCIkc25pZmZlciIsIiRyb290RWxlbWVudCIsIiR3aW5kb3ciLGZ1bmN0aW9uKGQsYyxlLGYsZyl7ZnVuY3Rpb24gaChhLGIsZCl7dmFyIGU9bC51cmwoKSxmPWwuJCRzdGF0ZTt0cnl7Yy51cmwoYSxiLGQpLGwuJCRzdGF0ZT1jLnN0YXRlKCl9Y2F0Y2goZyl7dGhyb3cgbC51cmwoZSksbC4kJHN0YXRlPWYsZzt9fWZ1bmN0aW9uIGsoYSxiKXtkLiRicm9hZGNhc3QoIiRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3MiLGwuYWJzVXJsKCksYSxsLiQkc3RhdGUsCmIpfXZhciBsLG07bT1jLmJhc2VIcmVmKCk7dmFyIG49Yy51cmwoKSxwO2lmKGIuZW5hYmxlZCl7aWYoIW0mJmIucmVxdWlyZUJhc2UpdGhyb3cgR2IoIm5vYmFzZSIpO3A9bi5zdWJzdHJpbmcoMCxuLmluZGV4T2YoIi8iLG4uaW5kZXhPZigiLy8iKSsyKSkrKG18fCIvIik7bT1lLmhpc3Rvcnk/Z2M6bGR9ZWxzZSBwPUphKG4pLG09aGM7dmFyIHU9cC5zdWJzdHIoMCxKYShwKS5sYXN0SW5kZXhPZigiLyIpKzEpO2w9bmV3IG0ocCx1LCIjIithKTtsLiQkcGFyc2VMaW5rVXJsKG4sbik7bC4kJHN0YXRlPWMuc3RhdGUoKTt2YXIgUj0vXlxzKihqYXZhc2NyaXB0fG1haWx0byk6L2k7Zi5vbigiY2xpY2siLGZ1bmN0aW9uKGEpe2lmKGIucmV3cml0ZUxpbmtzJiYhYS5jdHJsS2V5JiYhYS5tZXRhS2V5JiYhYS5zaGlmdEtleSYmMiE9YS53aGljaCYmMiE9YS5idXR0b24pe2Zvcih2YXIgZT1GKGEudGFyZ2V0KTsiYSIhPT13YShlWzBdKTspaWYoZVswXT09PWZbMF18fCEoZT1lLnBhcmVudCgpKVswXSlyZXR1cm47CnZhciBoPWUucHJvcCgiaHJlZiIpLGs9ZS5hdHRyKCJocmVmIil8fGUuYXR0cigieGxpbms6aHJlZiIpO0QoaCkmJiJbb2JqZWN0IFNWR0FuaW1hdGVkU3RyaW5nXSI9PT1oLnRvU3RyaW5nKCkmJihoPVkoaC5hbmltVmFsKS5ocmVmKTtSLnRlc3QoaCl8fCFofHxlLmF0dHIoInRhcmdldCIpfHxhLmlzRGVmYXVsdFByZXZlbnRlZCgpfHwhbC4kJHBhcnNlTGlua1VybChoLGspfHwoYS5wcmV2ZW50RGVmYXVsdCgpLGwuYWJzVXJsKCkhPWMudXJsKCkmJihkLiRhcHBseSgpLGcuYW5ndWxhclsiZmYtNjg0MjA4LXByZXZlbnREZWZhdWx0Il09ITApKX19KTtqYihsLmFic1VybCgpKSE9amIobikmJmMudXJsKGwuYWJzVXJsKCksITApO3ZhciBxPSEwO2Mub25VcmxDaGFuZ2UoZnVuY3Rpb24oYSxiKXt5KGthKHUsYSkpP2cubG9jYXRpb24uaHJlZj1hOihkLiRldmFsQXN5bmMoZnVuY3Rpb24oKXt2YXIgYz1sLmFic1VybCgpLGU9bC4kJHN0YXRlLGY7YT1qYihhKTtsLiQkcGFyc2UoYSk7bC4kJHN0YXRlPQpiO2Y9ZC4kYnJvYWRjYXN0KCIkbG9jYXRpb25DaGFuZ2VTdGFydCIsYSxjLGIsZSkuZGVmYXVsdFByZXZlbnRlZDtsLmFic1VybCgpPT09YSYmKGY/KGwuJCRwYXJzZShjKSxsLiQkc3RhdGU9ZSxoKGMsITEsZSkpOihxPSExLGsoYyxlKSkpfSksZC4kJHBoYXNlfHxkLiRkaWdlc3QoKSl9KTtkLiR3YXRjaChmdW5jdGlvbigpe3ZhciBhPWpiKGMudXJsKCkpLGI9amIobC5hYnNVcmwoKSksZj1jLnN0YXRlKCksZz1sLiQkcmVwbGFjZSxtPWEhPT1ifHxsLiQkaHRtbDUmJmUuaGlzdG9yeSYmZiE9PWwuJCRzdGF0ZTtpZihxfHxtKXE9ITEsZC4kZXZhbEFzeW5jKGZ1bmN0aW9uKCl7dmFyIGI9bC5hYnNVcmwoKSxjPWQuJGJyb2FkY2FzdCgiJGxvY2F0aW9uQ2hhbmdlU3RhcnQiLGIsYSxsLiQkc3RhdGUsZikuZGVmYXVsdFByZXZlbnRlZDtsLmFic1VybCgpPT09YiYmKGM/KGwuJCRwYXJzZShhKSxsLiQkc3RhdGU9Zik6KG0mJmgoYixnLGY9PT1sLiQkc3RhdGU/bnVsbDpsLiQkc3RhdGUpLAprKGEsZikpKX0pO2wuJCRyZXBsYWNlPSExfSk7cmV0dXJuIGx9XX1mdW5jdGlvbiB0Zigpe3ZhciBhPSEwLGI9dGhpczt0aGlzLmRlYnVnRW5hYmxlZD1mdW5jdGlvbihiKXtyZXR1cm4gdyhiKT8oYT1iLHRoaXMpOmF9O3RoaXMuJGdldD1bIiR3aW5kb3ciLGZ1bmN0aW9uKGQpe2Z1bmN0aW9uIGMoYSl7YSBpbnN0YW5jZW9mIEVycm9yJiYoYS5zdGFjaz9hPWEubWVzc2FnZSYmLTE9PT1hLnN0YWNrLmluZGV4T2YoYS5tZXNzYWdlKT8iRXJyb3I6ICIrYS5tZXNzYWdlKyJcbiIrYS5zdGFjazphLnN0YWNrOmEuc291cmNlVVJMJiYoYT1hLm1lc3NhZ2UrIlxuIithLnNvdXJjZVVSTCsiOiIrYS5saW5lKSk7cmV0dXJuIGF9ZnVuY3Rpb24gZShhKXt2YXIgYj1kLmNvbnNvbGV8fHt9LGU9YlthXXx8Yi5sb2d8fEE7YT0hMTt0cnl7YT0hIWUuYXBwbHl9Y2F0Y2goayl7fXJldHVybiBhP2Z1bmN0aW9uKCl7dmFyIGE9W107cShhcmd1bWVudHMsZnVuY3Rpb24oYil7YS5wdXNoKGMoYikpfSk7CnJldHVybiBlLmFwcGx5KGIsYSl9OmZ1bmN0aW9uKGEsYil7ZShhLG51bGw9PWI/IiI6Yil9fXJldHVybntsb2c6ZSgibG9nIiksaW5mbzplKCJpbmZvIiksd2FybjplKCJ3YXJuIiksZXJyb3I6ZSgiZXJyb3IiKSxkZWJ1ZzpmdW5jdGlvbigpe3ZhciBjPWUoImRlYnVnIik7cmV0dXJuIGZ1bmN0aW9uKCl7YSYmYy5hcHBseShiLGFyZ3VtZW50cyl9fSgpfX1dfWZ1bmN0aW9uIFNhKGEsYil7aWYoIl9fZGVmaW5lR2V0dGVyX18iPT09YXx8Il9fZGVmaW5lU2V0dGVyX18iPT09YXx8Il9fbG9va3VwR2V0dGVyX18iPT09YXx8Il9fbG9va3VwU2V0dGVyX18iPT09YXx8Il9fcHJvdG9fXyI9PT1hKXRocm93IFgoImlzZWNmbGQiLGIpO3JldHVybiBhfWZ1bmN0aW9uIGlnKGEpe3JldHVybiBhKyIifWZ1bmN0aW9uIHJhKGEsYil7aWYoYSl7aWYoYS5jb25zdHJ1Y3Rvcj09PWEpdGhyb3cgWCgiaXNlY2ZuIixiKTtpZihhLndpbmRvdz09PWEpdGhyb3cgWCgiaXNlY3dpbmRvdyIsYik7aWYoYS5jaGlsZHJlbiYmCihhLm5vZGVOYW1lfHxhLnByb3AmJmEuYXR0ciYmYS5maW5kKSl0aHJvdyBYKCJpc2VjZG9tIixiKTtpZihhPT09T2JqZWN0KXRocm93IFgoImlzZWNvYmoiLGIpO31yZXR1cm4gYX1mdW5jdGlvbiBuZChhLGIpe2lmKGEpe2lmKGEuY29uc3RydWN0b3I9PT1hKXRocm93IFgoImlzZWNmbiIsYik7aWYoYT09PWpnfHxhPT09a2d8fGE9PT1sZyl0aHJvdyBYKCJpc2VjZmYiLGIpO319ZnVuY3Rpb24gSWIoYSxiKXtpZihhJiYoYT09PSgwKS5jb25zdHJ1Y3Rvcnx8YT09PSghMSkuY29uc3RydWN0b3J8fGE9PT0iIi5jb25zdHJ1Y3Rvcnx8YT09PXt9LmNvbnN0cnVjdG9yfHxhPT09W10uY29uc3RydWN0b3J8fGE9PT1GdW5jdGlvbi5jb25zdHJ1Y3RvcikpdGhyb3cgWCgiaXNlY2FmIixiKTt9ZnVuY3Rpb24gbWcoYSxiKXtyZXR1cm4idW5kZWZpbmVkIiE9PXR5cGVvZiBhP2E6Yn1mdW5jdGlvbiBvZChhLGIpe3JldHVybiJ1bmRlZmluZWQiPT09dHlwZW9mIGE/YjoidW5kZWZpbmVkIj09PQp0eXBlb2YgYj9hOmErYn1mdW5jdGlvbiBWKGEsYil7dmFyIGQsYztzd2l0Y2goYS50eXBlKXtjYXNlIHMuUHJvZ3JhbTpkPSEwO3EoYS5ib2R5LGZ1bmN0aW9uKGEpe1YoYS5leHByZXNzaW9uLGIpO2Q9ZCYmYS5leHByZXNzaW9uLmNvbnN0YW50fSk7YS5jb25zdGFudD1kO2JyZWFrO2Nhc2Ugcy5MaXRlcmFsOmEuY29uc3RhbnQ9ITA7YS50b1dhdGNoPVtdO2JyZWFrO2Nhc2Ugcy5VbmFyeUV4cHJlc3Npb246VihhLmFyZ3VtZW50LGIpO2EuY29uc3RhbnQ9YS5hcmd1bWVudC5jb25zdGFudDthLnRvV2F0Y2g9YS5hcmd1bWVudC50b1dhdGNoO2JyZWFrO2Nhc2Ugcy5CaW5hcnlFeHByZXNzaW9uOlYoYS5sZWZ0LGIpO1YoYS5yaWdodCxiKTthLmNvbnN0YW50PWEubGVmdC5jb25zdGFudCYmYS5yaWdodC5jb25zdGFudDthLnRvV2F0Y2g9YS5sZWZ0LnRvV2F0Y2guY29uY2F0KGEucmlnaHQudG9XYXRjaCk7YnJlYWs7Y2FzZSBzLkxvZ2ljYWxFeHByZXNzaW9uOlYoYS5sZWZ0LGIpO1YoYS5yaWdodCwKYik7YS5jb25zdGFudD1hLmxlZnQuY29uc3RhbnQmJmEucmlnaHQuY29uc3RhbnQ7YS50b1dhdGNoPWEuY29uc3RhbnQ/W106W2FdO2JyZWFrO2Nhc2Ugcy5Db25kaXRpb25hbEV4cHJlc3Npb246VihhLnRlc3QsYik7VihhLmFsdGVybmF0ZSxiKTtWKGEuY29uc2VxdWVudCxiKTthLmNvbnN0YW50PWEudGVzdC5jb25zdGFudCYmYS5hbHRlcm5hdGUuY29uc3RhbnQmJmEuY29uc2VxdWVudC5jb25zdGFudDthLnRvV2F0Y2g9YS5jb25zdGFudD9bXTpbYV07YnJlYWs7Y2FzZSBzLklkZW50aWZpZXI6YS5jb25zdGFudD0hMTthLnRvV2F0Y2g9W2FdO2JyZWFrO2Nhc2Ugcy5NZW1iZXJFeHByZXNzaW9uOlYoYS5vYmplY3QsYik7YS5jb21wdXRlZCYmVihhLnByb3BlcnR5LGIpO2EuY29uc3RhbnQ9YS5vYmplY3QuY29uc3RhbnQmJighYS5jb21wdXRlZHx8YS5wcm9wZXJ0eS5jb25zdGFudCk7YS50b1dhdGNoPVthXTticmVhaztjYXNlIHMuQ2FsbEV4cHJlc3Npb246ZD1hLmZpbHRlcj8hYihhLmNhbGxlZS5uYW1lKS4kc3RhdGVmdWw6CiExO2M9W107cShhLmFyZ3VtZW50cyxmdW5jdGlvbihhKXtWKGEsYik7ZD1kJiZhLmNvbnN0YW50O2EuY29uc3RhbnR8fGMucHVzaC5hcHBseShjLGEudG9XYXRjaCl9KTthLmNvbnN0YW50PWQ7YS50b1dhdGNoPWEuZmlsdGVyJiYhYihhLmNhbGxlZS5uYW1lKS4kc3RhdGVmdWw/YzpbYV07YnJlYWs7Y2FzZSBzLkFzc2lnbm1lbnRFeHByZXNzaW9uOlYoYS5sZWZ0LGIpO1YoYS5yaWdodCxiKTthLmNvbnN0YW50PWEubGVmdC5jb25zdGFudCYmYS5yaWdodC5jb25zdGFudDthLnRvV2F0Y2g9W2FdO2JyZWFrO2Nhc2Ugcy5BcnJheUV4cHJlc3Npb246ZD0hMDtjPVtdO3EoYS5lbGVtZW50cyxmdW5jdGlvbihhKXtWKGEsYik7ZD1kJiZhLmNvbnN0YW50O2EuY29uc3RhbnR8fGMucHVzaC5hcHBseShjLGEudG9XYXRjaCl9KTthLmNvbnN0YW50PWQ7YS50b1dhdGNoPWM7YnJlYWs7Y2FzZSBzLk9iamVjdEV4cHJlc3Npb246ZD0hMDtjPVtdO3EoYS5wcm9wZXJ0aWVzLGZ1bmN0aW9uKGEpe1YoYS52YWx1ZSwKYik7ZD1kJiZhLnZhbHVlLmNvbnN0YW50JiYhYS5jb21wdXRlZDthLnZhbHVlLmNvbnN0YW50fHxjLnB1c2guYXBwbHkoYyxhLnZhbHVlLnRvV2F0Y2gpfSk7YS5jb25zdGFudD1kO2EudG9XYXRjaD1jO2JyZWFrO2Nhc2Ugcy5UaGlzRXhwcmVzc2lvbjphLmNvbnN0YW50PSExO2EudG9XYXRjaD1bXTticmVhaztjYXNlIHMuTG9jYWxzRXhwcmVzc2lvbjphLmNvbnN0YW50PSExLGEudG9XYXRjaD1bXX19ZnVuY3Rpb24gcGQoYSl7aWYoMT09YS5sZW5ndGgpe2E9YVswXS5leHByZXNzaW9uO3ZhciBiPWEudG9XYXRjaDtyZXR1cm4gMSE9PWIubGVuZ3RoP2I6YlswXSE9PWE/Yjp2b2lkIDB9fWZ1bmN0aW9uIHFkKGEpe3JldHVybiBhLnR5cGU9PT1zLklkZW50aWZpZXJ8fGEudHlwZT09PXMuTWVtYmVyRXhwcmVzc2lvbn1mdW5jdGlvbiByZChhKXtpZigxPT09YS5ib2R5Lmxlbmd0aCYmcWQoYS5ib2R5WzBdLmV4cHJlc3Npb24pKXJldHVybnt0eXBlOnMuQXNzaWdubWVudEV4cHJlc3Npb24sCmxlZnQ6YS5ib2R5WzBdLmV4cHJlc3Npb24scmlnaHQ6e3R5cGU6cy5OR1ZhbHVlUGFyYW1ldGVyfSxvcGVyYXRvcjoiPSJ9fWZ1bmN0aW9uIHNkKGEpe3JldHVybiAwPT09YS5ib2R5Lmxlbmd0aHx8MT09PWEuYm9keS5sZW5ndGgmJihhLmJvZHlbMF0uZXhwcmVzc2lvbi50eXBlPT09cy5MaXRlcmFsfHxhLmJvZHlbMF0uZXhwcmVzc2lvbi50eXBlPT09cy5BcnJheUV4cHJlc3Npb258fGEuYm9keVswXS5leHByZXNzaW9uLnR5cGU9PT1zLk9iamVjdEV4cHJlc3Npb24pfWZ1bmN0aW9uIHRkKGEsYil7dGhpcy5hc3RCdWlsZGVyPWE7dGhpcy4kZmlsdGVyPWJ9ZnVuY3Rpb24gdWQoYSxiKXt0aGlzLmFzdEJ1aWxkZXI9YTt0aGlzLiRmaWx0ZXI9Yn1mdW5jdGlvbiBKYihhKXtyZXR1cm4iY29uc3RydWN0b3IiPT1hfWZ1bmN0aW9uIGljKGEpe3JldHVybiB6KGEudmFsdWVPZik/YS52YWx1ZU9mKCk6bmcuY2FsbChhKX1mdW5jdGlvbiB1Zigpe3ZhciBhPVUoKSxiPVUoKSxkPXsidHJ1ZSI6ITAsCiJmYWxzZSI6ITEsIm51bGwiOm51bGwsdW5kZWZpbmVkOnZvaWQgMH0sYyxlO3RoaXMuYWRkTGl0ZXJhbD1mdW5jdGlvbihhLGIpe2RbYV09Yn07dGhpcy5zZXRJZGVudGlmaWVyRm5zPWZ1bmN0aW9uKGEsYil7Yz1hO2U9YjtyZXR1cm4gdGhpc307dGhpcy4kZ2V0PVsiJGZpbHRlciIsZnVuY3Rpb24oZil7ZnVuY3Rpb24gZyhjLGQsZSl7dmFyIGcsayxIO2U9ZXx8Sjtzd2l0Y2godHlwZW9mIGMpe2Nhc2UgInN0cmluZyI6SD1jPWMudHJpbSgpO3ZhciBFPWU/YjphO2c9RVtIXTtpZighZyl7IjoiPT09Yy5jaGFyQXQoMCkmJiI6Ij09PWMuY2hhckF0KDEpJiYoaz0hMCxjPWMuc3Vic3RyaW5nKDIpKTtnPWU/cjpCO3ZhciBxPW5ldyBqYyhnKTtnPShuZXcga2MocSxmLGcpKS5wYXJzZShjKTtnLmNvbnN0YW50P2cuJCR3YXRjaERlbGVnYXRlPXA6az9nLiQkd2F0Y2hEZWxlZ2F0ZT1nLmxpdGVyYWw/bjptOmcuaW5wdXRzJiYoZy4kJHdhdGNoRGVsZWdhdGU9bCk7ZSYmKGc9aChnKSk7RVtIXT0KZ31yZXR1cm4gdShnLGQpO2Nhc2UgImZ1bmN0aW9uIjpyZXR1cm4gdShjLGQpO2RlZmF1bHQ6cmV0dXJuIHUoQSxkKX19ZnVuY3Rpb24gaChhKXtmdW5jdGlvbiBiKGMsZCxlLGYpe3ZhciBnPUo7Sj0hMDt0cnl7cmV0dXJuIGEoYyxkLGUsZil9ZmluYWxseXtKPWd9fWlmKCFhKXJldHVybiBhO2IuJCR3YXRjaERlbGVnYXRlPWEuJCR3YXRjaERlbGVnYXRlO2IuYXNzaWduPWgoYS5hc3NpZ24pO2IuY29uc3RhbnQ9YS5jb25zdGFudDtiLmxpdGVyYWw9YS5saXRlcmFsO2Zvcih2YXIgYz0wO2EuaW5wdXRzJiZjPGEuaW5wdXRzLmxlbmd0aDsrK2MpYS5pbnB1dHNbY109aChhLmlucHV0c1tjXSk7Yi5pbnB1dHM9YS5pbnB1dHM7cmV0dXJuIGJ9ZnVuY3Rpb24gayhhLGIpe3JldHVybiBudWxsPT1hfHxudWxsPT1iP2E9PT1iOiJvYmplY3QiPT09dHlwZW9mIGEmJihhPWljKGEpLCJvYmplY3QiPT09dHlwZW9mIGEpPyExOmE9PT1ifHxhIT09YSYmYiE9PWJ9ZnVuY3Rpb24gbChhLGIsYyxkLAplKXt2YXIgZj1kLmlucHV0cyxnO2lmKDE9PT1mLmxlbmd0aCl7dmFyIGg9ayxmPWZbMF07cmV0dXJuIGEuJHdhdGNoKGZ1bmN0aW9uKGEpe3ZhciBiPWYoYSk7ayhiLGgpfHwoZz1kKGEsdm9pZCAwLHZvaWQgMCxbYl0pLGg9YiYmaWMoYikpO3JldHVybiBnfSxiLGMsZSl9Zm9yKHZhciBsPVtdLG09W10scD0wLG49Zi5sZW5ndGg7cDxuO3ArKylsW3BdPWssbVtwXT1udWxsO3JldHVybiBhLiR3YXRjaChmdW5jdGlvbihhKXtmb3IodmFyIGI9ITEsYz0wLGU9Zi5sZW5ndGg7YzxlO2MrKyl7dmFyIGg9ZltjXShhKTtpZihifHwoYj0hayhoLGxbY10pKSltW2NdPWgsbFtjXT1oJiZpYyhoKX1iJiYoZz1kKGEsdm9pZCAwLHZvaWQgMCxtKSk7cmV0dXJuIGd9LGIsYyxlKX1mdW5jdGlvbiBtKGEsYixjLGQpe3ZhciBlLGY7cmV0dXJuIGU9YS4kd2F0Y2goZnVuY3Rpb24oYSl7cmV0dXJuIGQoYSl9LGZ1bmN0aW9uKGEsYyxkKXtmPWE7eihiKSYmYi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dyhhKSYmCmQuJCRwb3N0RGlnZXN0KGZ1bmN0aW9uKCl7dyhmKSYmZSgpfSl9LGMpfWZ1bmN0aW9uIG4oYSxiLGMsZCl7ZnVuY3Rpb24gZShhKXt2YXIgYj0hMDtxKGEsZnVuY3Rpb24oYSl7dyhhKXx8KGI9ITEpfSk7cmV0dXJuIGJ9dmFyIGYsZztyZXR1cm4gZj1hLiR3YXRjaChmdW5jdGlvbihhKXtyZXR1cm4gZChhKX0sZnVuY3Rpb24oYSxjLGQpe2c9YTt6KGIpJiZiLmNhbGwodGhpcyxhLGMsZCk7ZShhKSYmZC4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKXtlKGcpJiZmKCl9KX0sYyl9ZnVuY3Rpb24gcChhLGIsYyxkKXt2YXIgZTtyZXR1cm4gZT1hLiR3YXRjaChmdW5jdGlvbihhKXtlKCk7cmV0dXJuIGQoYSl9LGIsYyl9ZnVuY3Rpb24gdShhLGIpe2lmKCFiKXJldHVybiBhO3ZhciBjPWEuJCR3YXRjaERlbGVnYXRlLGQ9ITEsYz1jIT09biYmYyE9PW0/ZnVuY3Rpb24oYyxlLGYsZyl7Zj1kJiZnP2dbMF06YShjLGUsZixnKTtyZXR1cm4gYihmLGMsZSl9OmZ1bmN0aW9uKGMsZCxlLGYpe2U9YShjLApkLGUsZik7Yz1iKGUsYyxkKTtyZXR1cm4gdyhlKT9jOmV9O2EuJCR3YXRjaERlbGVnYXRlJiZhLiQkd2F0Y2hEZWxlZ2F0ZSE9PWw/Yy4kJHdhdGNoRGVsZWdhdGU9YS4kJHdhdGNoRGVsZWdhdGU6Yi4kc3RhdGVmdWx8fChjLiQkd2F0Y2hEZWxlZ2F0ZT1sLGQ9IWEuaW5wdXRzLGMuaW5wdXRzPWEuaW5wdXRzP2EuaW5wdXRzOlthXSk7cmV0dXJuIGN9dmFyIFI9QmEoKS5ub1Vuc2FmZUV2YWwsQj17Y3NwOlIsZXhwZW5zaXZlQ2hlY2tzOiExLGxpdGVyYWxzOnBhKGQpLGlzSWRlbnRpZmllclN0YXJ0OnooYykmJmMsaXNJZGVudGlmaWVyQ29udGludWU6eihlKSYmZX0scj17Y3NwOlIsZXhwZW5zaXZlQ2hlY2tzOiEwLGxpdGVyYWxzOnBhKGQpLGlzSWRlbnRpZmllclN0YXJ0OnooYykmJmMsaXNJZGVudGlmaWVyQ29udGludWU6eihlKSYmZX0sSj0hMTtnLiQkcnVubmluZ0V4cGVuc2l2ZUNoZWNrcz1mdW5jdGlvbigpe3JldHVybiBKfTtyZXR1cm4gZ31dfWZ1bmN0aW9uIHdmKCl7dGhpcy4kZ2V0PQpbIiRyb290U2NvcGUiLCIkZXhjZXB0aW9uSGFuZGxlciIsZnVuY3Rpb24oYSxiKXtyZXR1cm4gdmQoZnVuY3Rpb24oYil7YS4kZXZhbEFzeW5jKGIpfSxiKX1dfWZ1bmN0aW9uIHhmKCl7dGhpcy4kZ2V0PVsiJGJyb3dzZXIiLCIkZXhjZXB0aW9uSGFuZGxlciIsZnVuY3Rpb24oYSxiKXtyZXR1cm4gdmQoZnVuY3Rpb24oYil7YS5kZWZlcihiKX0sYil9XX1mdW5jdGlvbiB2ZChhLGIpe2Z1bmN0aW9uIGQoKXt0aGlzLiQkc3RhdGU9e3N0YXR1czowfX1mdW5jdGlvbiBjKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGMpe2IuY2FsbChhLGMpfX1mdW5jdGlvbiBlKGMpeyFjLnByb2Nlc3NTY2hlZHVsZWQmJmMucGVuZGluZyYmKGMucHJvY2Vzc1NjaGVkdWxlZD0hMCxhKGZ1bmN0aW9uKCl7dmFyIGEsZCxlO2U9Yy5wZW5kaW5nO2MucHJvY2Vzc1NjaGVkdWxlZD0hMTtjLnBlbmRpbmc9dm9pZCAwO2Zvcih2YXIgZj0wLGc9ZS5sZW5ndGg7ZjxnOysrZil7ZD1lW2ZdWzBdO2E9ZVtmXVtjLnN0YXR1c107CnRyeXt6KGEpP2QucmVzb2x2ZShhKGMudmFsdWUpKToxPT09Yy5zdGF0dXM/ZC5yZXNvbHZlKGMudmFsdWUpOmQucmVqZWN0KGMudmFsdWUpfWNhdGNoKGgpe2QucmVqZWN0KGgpLGIoaCl9fX0pKX1mdW5jdGlvbiBmKCl7dGhpcy5wcm9taXNlPW5ldyBkfXZhciBnPU4oIiRxIixUeXBlRXJyb3IpLGg9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgZjthLnJlc29sdmU9YyhhLGEucmVzb2x2ZSk7YS5yZWplY3Q9YyhhLGEucmVqZWN0KTthLm5vdGlmeT1jKGEsYS5ub3RpZnkpO3JldHVybiBhfTtTKGQucHJvdG90eXBlLHt0aGVuOmZ1bmN0aW9uKGEsYixjKXtpZih5KGEpJiZ5KGIpJiZ5KGMpKXJldHVybiB0aGlzO3ZhciBkPW5ldyBmO3RoaXMuJCRzdGF0ZS5wZW5kaW5nPXRoaXMuJCRzdGF0ZS5wZW5kaW5nfHxbXTt0aGlzLiQkc3RhdGUucGVuZGluZy5wdXNoKFtkLGEsYixjXSk7MDx0aGlzLiQkc3RhdGUuc3RhdHVzJiZlKHRoaXMuJCRzdGF0ZSk7cmV0dXJuIGQucHJvbWlzZX0sImNhdGNoIjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy50aGVuKG51bGwsCmEpfSwiZmluYWxseSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uKGIpe3JldHVybiBsKGIsITAsYSl9LGZ1bmN0aW9uKGIpe3JldHVybiBsKGIsITEsYSl9LGIpfX0pO1MoZi5wcm90b3R5cGUse3Jlc29sdmU6ZnVuY3Rpb24oYSl7dGhpcy5wcm9taXNlLiQkc3RhdGUuc3RhdHVzfHwoYT09PXRoaXMucHJvbWlzZT90aGlzLiQkcmVqZWN0KGcoInFjeWNsZSIsYSkpOnRoaXMuJCRyZXNvbHZlKGEpKX0sJCRyZXNvbHZlOmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGQoYSl7a3x8KGs9ITAsaC4kJHJlc29sdmUoYSkpfWZ1bmN0aW9uIGYoYSl7a3x8KGs9ITAsaC4kJHJlamVjdChhKSl9dmFyIGcsaD10aGlzLGs9ITE7dHJ5e2lmKEQoYSl8fHooYSkpZz1hJiZhLnRoZW47eihnKT8odGhpcy5wcm9taXNlLiQkc3RhdGUuc3RhdHVzPS0xLGcuY2FsbChhLGQsZixjKHRoaXMsdGhpcy5ub3RpZnkpKSk6KHRoaXMucHJvbWlzZS4kJHN0YXRlLnZhbHVlPWEsdGhpcy5wcm9taXNlLiQkc3RhdGUuc3RhdHVzPQoxLGUodGhpcy5wcm9taXNlLiQkc3RhdGUpKX1jYXRjaChsKXtmKGwpLGIobCl9fSxyZWplY3Q6ZnVuY3Rpb24oYSl7dGhpcy5wcm9taXNlLiQkc3RhdGUuc3RhdHVzfHx0aGlzLiQkcmVqZWN0KGEpfSwkJHJlamVjdDpmdW5jdGlvbihhKXt0aGlzLnByb21pc2UuJCRzdGF0ZS52YWx1ZT1hO3RoaXMucHJvbWlzZS4kJHN0YXRlLnN0YXR1cz0yO2UodGhpcy5wcm9taXNlLiQkc3RhdGUpfSxub3RpZnk6ZnVuY3Rpb24oYyl7dmFyIGQ9dGhpcy5wcm9taXNlLiQkc3RhdGUucGVuZGluZzswPj10aGlzLnByb21pc2UuJCRzdGF0ZS5zdGF0dXMmJmQmJmQubGVuZ3RoJiZhKGZ1bmN0aW9uKCl7Zm9yKHZhciBhLGUsZj0wLGc9ZC5sZW5ndGg7ZjxnO2YrKyl7ZT1kW2ZdWzBdO2E9ZFtmXVszXTt0cnl7ZS5ub3RpZnkoeihhKT9hKGMpOmMpfWNhdGNoKGgpe2IoaCl9fX0pfX0pO3ZhciBrPWZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IGY7Yj9jLnJlc29sdmUoYSk6Yy5yZWplY3QoYSk7cmV0dXJuIGMucHJvbWlzZX0sCmw9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPW51bGw7dHJ5e3ooYykmJihkPWMoKSl9Y2F0Y2goZSl7cmV0dXJuIGsoZSwhMSl9cmV0dXJuIGQmJnooZC50aGVuKT9kLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gayhhLGIpfSxmdW5jdGlvbihhKXtyZXR1cm4gayhhLCExKX0pOmsoYSxiKX0sbT1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1uZXcgZjtlLnJlc29sdmUoYSk7cmV0dXJuIGUucHJvbWlzZS50aGVuKGIsYyxkKX0sbj1mdW5jdGlvbihhKXtpZigheihhKSl0aHJvdyBnKCJub3JzbHZyIixhKTt2YXIgYj1uZXcgZjthKGZ1bmN0aW9uKGEpe2IucmVzb2x2ZShhKX0sZnVuY3Rpb24oYSl7Yi5yZWplY3QoYSl9KTtyZXR1cm4gYi5wcm9taXNlfTtuLnByb3RvdHlwZT1kLnByb3RvdHlwZTtuLmRlZmVyPWg7bi5yZWplY3Q9ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IGY7Yi5yZWplY3QoYSk7cmV0dXJuIGIucHJvbWlzZX07bi53aGVuPW07bi5yZXNvbHZlPW07bi5hbGw9ZnVuY3Rpb24oYSl7dmFyIGI9Cm5ldyBmLGM9MCxkPUwoYSk/W106e307cShhLGZ1bmN0aW9uKGEsZSl7YysrO20oYSkudGhlbihmdW5jdGlvbihhKXtkLmhhc093blByb3BlcnR5KGUpfHwoZFtlXT1hLC0tY3x8Yi5yZXNvbHZlKGQpKX0sZnVuY3Rpb24oYSl7ZC5oYXNPd25Qcm9wZXJ0eShlKXx8Yi5yZWplY3QoYSl9KX0pOzA9PT1jJiZiLnJlc29sdmUoZCk7cmV0dXJuIGIucHJvbWlzZX07bi5yYWNlPWZ1bmN0aW9uKGEpe3ZhciBiPWgoKTtxKGEsZnVuY3Rpb24oYSl7bShhKS50aGVuKGIucmVzb2x2ZSxiLnJlamVjdCl9KTtyZXR1cm4gYi5wcm9taXNlfTtyZXR1cm4gbn1mdW5jdGlvbiBHZigpe3RoaXMuJGdldD1bIiR3aW5kb3ciLCIkdGltZW91dCIsZnVuY3Rpb24oYSxiKXt2YXIgZD1hLnJlcXVlc3RBbmltYXRpb25GcmFtZXx8YS53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUsYz1hLmNhbmNlbEFuaW1hdGlvbkZyYW1lfHxhLndlYmtpdENhbmNlbEFuaW1hdGlvbkZyYW1lfHxhLndlYmtpdENhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZSwKZT0hIWQsZj1lP2Z1bmN0aW9uKGEpe3ZhciBiPWQoYSk7cmV0dXJuIGZ1bmN0aW9uKCl7YyhiKX19OmZ1bmN0aW9uKGEpe3ZhciBjPWIoYSwxNi42NiwhMSk7cmV0dXJuIGZ1bmN0aW9uKCl7Yi5jYW5jZWwoYyl9fTtmLnN1cHBvcnRlZD1lO3JldHVybiBmfV19ZnVuY3Rpb24gdmYoKXtmdW5jdGlvbiBhKGEpe2Z1bmN0aW9uIGIoKXt0aGlzLiQkd2F0Y2hlcnM9dGhpcy4kJG5leHRTaWJsaW5nPXRoaXMuJCRjaGlsZEhlYWQ9dGhpcy4kJGNoaWxkVGFpbD1udWxsO3RoaXMuJCRsaXN0ZW5lcnM9e307dGhpcy4kJGxpc3RlbmVyQ291bnQ9e307dGhpcy4kJHdhdGNoZXJzQ291bnQ9MDt0aGlzLiRpZD0rK3BiO3RoaXMuJCRDaGlsZFNjb3BlPW51bGx9Yi5wcm90b3R5cGU9YTtyZXR1cm4gYn12YXIgYj0xMCxkPU4oIiRyb290U2NvcGUiKSxjPW51bGwsZT1udWxsO3RoaXMuZGlnZXN0VHRsPWZ1bmN0aW9uKGEpe2FyZ3VtZW50cy5sZW5ndGgmJihiPWEpO3JldHVybiBifTt0aGlzLiRnZXQ9ClsiJGV4Y2VwdGlvbkhhbmRsZXIiLCIkcGFyc2UiLCIkYnJvd3NlciIsZnVuY3Rpb24oZixnLGgpe2Z1bmN0aW9uIGsoYSl7YS5jdXJyZW50U2NvcGUuJCRkZXN0cm95ZWQ9ITB9ZnVuY3Rpb24gbChhKXs5PT09RWEmJihhLiQkY2hpbGRIZWFkJiZsKGEuJCRjaGlsZEhlYWQpLGEuJCRuZXh0U2libGluZyYmbChhLiQkbmV4dFNpYmxpbmcpKTthLiRwYXJlbnQ9YS4kJG5leHRTaWJsaW5nPWEuJCRwcmV2U2libGluZz1hLiQkY2hpbGRIZWFkPWEuJCRjaGlsZFRhaWw9YS4kcm9vdD1hLiQkd2F0Y2hlcnM9bnVsbH1mdW5jdGlvbiBtKCl7dGhpcy4kaWQ9KytwYjt0aGlzLiQkcGhhc2U9dGhpcy4kcGFyZW50PXRoaXMuJCR3YXRjaGVycz10aGlzLiQkbmV4dFNpYmxpbmc9dGhpcy4kJHByZXZTaWJsaW5nPXRoaXMuJCRjaGlsZEhlYWQ9dGhpcy4kJGNoaWxkVGFpbD1udWxsO3RoaXMuJHJvb3Q9dGhpczt0aGlzLiQkZGVzdHJveWVkPSExO3RoaXMuJCRsaXN0ZW5lcnM9e307dGhpcy4kJGxpc3RlbmVyQ291bnQ9Cnt9O3RoaXMuJCR3YXRjaGVyc0NvdW50PTA7dGhpcy4kJGlzb2xhdGVCaW5kaW5ncz1udWxsfWZ1bmN0aW9uIG4oYSl7aWYoSi4kJHBoYXNlKXRocm93IGQoImlucHJvZyIsSi4kJHBoYXNlKTtKLiQkcGhhc2U9YX1mdW5jdGlvbiBwKGEsYil7ZG8gYS4kJHdhdGNoZXJzQ291bnQrPWI7d2hpbGUoYT1hLiRwYXJlbnQpfWZ1bmN0aW9uIHUoYSxiLGMpe2RvIGEuJCRsaXN0ZW5lckNvdW50W2NdLT1iLDA9PT1hLiQkbGlzdGVuZXJDb3VudFtjXSYmZGVsZXRlIGEuJCRsaXN0ZW5lckNvdW50W2NdO3doaWxlKGE9YS4kcGFyZW50KX1mdW5jdGlvbiBzKCl7fWZ1bmN0aW9uIEIoKXtmb3IoO3QubGVuZ3RoOyl0cnl7dC5zaGlmdCgpKCl9Y2F0Y2goYSl7ZihhKX1lPW51bGx9ZnVuY3Rpb24gcigpe251bGw9PT1lJiYoZT1oLmRlZmVyKGZ1bmN0aW9uKCl7Si4kYXBwbHkoQil9KSl9bS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOm0sJG5ldzpmdW5jdGlvbihiLGMpe3ZhciBkO2M9Y3x8dGhpcztiPwooZD1uZXcgbSxkLiRyb290PXRoaXMuJHJvb3QpOih0aGlzLiQkQ2hpbGRTY29wZXx8KHRoaXMuJCRDaGlsZFNjb3BlPWEodGhpcykpLGQ9bmV3IHRoaXMuJCRDaGlsZFNjb3BlKTtkLiRwYXJlbnQ9YztkLiQkcHJldlNpYmxpbmc9Yy4kJGNoaWxkVGFpbDtjLiQkY2hpbGRIZWFkPyhjLiQkY2hpbGRUYWlsLiQkbmV4dFNpYmxpbmc9ZCxjLiQkY2hpbGRUYWlsPWQpOmMuJCRjaGlsZEhlYWQ9Yy4kJGNoaWxkVGFpbD1kOyhifHxjIT10aGlzKSYmZC4kb24oIiRkZXN0cm95IixrKTtyZXR1cm4gZH0sJHdhdGNoOmZ1bmN0aW9uKGEsYixkLGUpe3ZhciBmPWcoYSk7aWYoZi4kJHdhdGNoRGVsZWdhdGUpcmV0dXJuIGYuJCR3YXRjaERlbGVnYXRlKHRoaXMsYixkLGYsYSk7dmFyIGg9dGhpcyxrPWguJCR3YXRjaGVycyxsPXtmbjpiLGxhc3Q6cyxnZXQ6ZixleHA6ZXx8YSxlcTohIWR9O2M9bnVsbDt6KGIpfHwobC5mbj1BKTtrfHwoaz1oLiQkd2F0Y2hlcnM9W10pO2sudW5zaGlmdChsKTtwKHRoaXMsCjEpO3JldHVybiBmdW5jdGlvbigpezA8PVphKGssbCkmJnAoaCwtMSk7Yz1udWxsfX0sJHdhdGNoR3JvdXA6ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKCl7aD0hMTtrPyhrPSExLGIoZSxlLGcpKTpiKGUsZCxnKX12YXIgZD1BcnJheShhLmxlbmd0aCksZT1BcnJheShhLmxlbmd0aCksZj1bXSxnPXRoaXMsaD0hMSxrPSEwO2lmKCFhLmxlbmd0aCl7dmFyIGw9ITA7Zy4kZXZhbEFzeW5jKGZ1bmN0aW9uKCl7bCYmYihlLGUsZyl9KTtyZXR1cm4gZnVuY3Rpb24oKXtsPSExfX1pZigxPT09YS5sZW5ndGgpcmV0dXJuIHRoaXMuJHdhdGNoKGFbMF0sZnVuY3Rpb24oYSxjLGYpe2VbMF09YTtkWzBdPWM7YihlLGE9PT1jP2U6ZCxmKX0pO3EoYSxmdW5jdGlvbihhLGIpe3ZhciBrPWcuJHdhdGNoKGEsZnVuY3Rpb24oYSxmKXtlW2JdPWE7ZFtiXT1mO2h8fChoPSEwLGcuJGV2YWxBc3luYyhjKSl9KTtmLnB1c2goayl9KTtyZXR1cm4gZnVuY3Rpb24oKXtmb3IoO2YubGVuZ3RoOylmLnNoaWZ0KCkoKX19LAokd2F0Y2hDb2xsZWN0aW9uOmZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhKXtlPWE7dmFyIGIsZCxnLGg7aWYoIXkoZSkpe2lmKEQoZSkpaWYodGEoZSkpZm9yKGYhPT1uJiYoZj1uLHU9Zi5sZW5ndGg9MCxsKyspLGE9ZS5sZW5ndGgsdSE9PWEmJihsKyssZi5sZW5ndGg9dT1hKSxiPTA7YjxhO2IrKyloPWZbYl0sZz1lW2JdLGQ9aCE9PWgmJmchPT1nLGR8fGg9PT1nfHwobCsrLGZbYl09Zyk7ZWxzZXtmIT09cCYmKGY9cD17fSx1PTAsbCsrKTthPTA7Zm9yKGIgaW4gZSl1YS5jYWxsKGUsYikmJihhKyssZz1lW2JdLGg9ZltiXSxiIGluIGY/KGQ9aCE9PWgmJmchPT1nLGR8fGg9PT1nfHwobCsrLGZbYl09ZykpOih1KyssZltiXT1nLGwrKykpO2lmKHU+YSlmb3IoYiBpbiBsKyssZil1YS5jYWxsKGUsYil8fCh1LS0sZGVsZXRlIGZbYl0pfWVsc2UgZiE9PWUmJihmPWUsbCsrKTtyZXR1cm4gbH19Yy4kc3RhdGVmdWw9ITA7dmFyIGQ9dGhpcyxlLGYsaCxrPTE8Yi5sZW5ndGgsbD0wLG09CmcoYSxjKSxuPVtdLHA9e30scj0hMCx1PTA7cmV0dXJuIHRoaXMuJHdhdGNoKG0sZnVuY3Rpb24oKXtyPyhyPSExLGIoZSxlLGQpKTpiKGUsaCxkKTtpZihrKWlmKEQoZSkpaWYodGEoZSkpe2g9QXJyYXkoZS5sZW5ndGgpO2Zvcih2YXIgYT0wO2E8ZS5sZW5ndGg7YSsrKWhbYV09ZVthXX1lbHNlIGZvcihhIGluIGg9e30sZSl1YS5jYWxsKGUsYSkmJihoW2FdPWVbYV0pO2Vsc2UgaD1lfSl9LCRkaWdlc3Q6ZnVuY3Rpb24oKXt2YXIgYSxnLGssbCxtLHAsdSxyLHE9Yix0LHk9W10sQSxDO24oIiRkaWdlc3QiKTtoLiQkY2hlY2tVcmxDaGFuZ2UoKTt0aGlzPT09SiYmbnVsbCE9PWUmJihoLmRlZmVyLmNhbmNlbChlKSxCKCkpO2M9bnVsbDtkb3tyPSExO3Q9dGhpcztmb3IocD0wO3A8di5sZW5ndGg7cCsrKXt0cnl7Qz12W3BdLEMuc2NvcGUuJGV2YWwoQy5leHByZXNzaW9uLEMubG9jYWxzKX1jYXRjaChGKXtmKEYpfWM9bnVsbH12Lmxlbmd0aD0wO2E6ZG97aWYocD10LiQkd2F0Y2hlcnMpZm9yKHU9CnAubGVuZ3RoO3UtLTspdHJ5e2lmKGE9cFt1XSlpZihtPWEuZ2V0LChnPW0odCkpIT09KGs9YS5sYXN0KSYmIShhLmVxP25hKGcsayk6Im51bWJlciI9PT10eXBlb2YgZyYmIm51bWJlciI9PT10eXBlb2YgayYmaXNOYU4oZykmJmlzTmFOKGspKSlyPSEwLGM9YSxhLmxhc3Q9YS5lcT9wYShnLG51bGwpOmcsbD1hLmZuLGwoZyxrPT09cz9nOmssdCksNT5xJiYoQT00LXEseVtBXXx8KHlbQV09W10pLHlbQV0ucHVzaCh7bXNnOnooYS5leHApPyJmbjogIisoYS5leHAubmFtZXx8YS5leHAudG9TdHJpbmcoKSk6YS5leHAsbmV3VmFsOmcsb2xkVmFsOmt9KSk7ZWxzZSBpZihhPT09Yyl7cj0hMTticmVhayBhfX1jYXRjaChHKXtmKEcpfWlmKCEocD10LiQkd2F0Y2hlcnNDb3VudCYmdC4kJGNoaWxkSGVhZHx8dCE9PXRoaXMmJnQuJCRuZXh0U2libGluZykpZm9yKDt0IT09dGhpcyYmIShwPXQuJCRuZXh0U2libGluZyk7KXQ9dC4kcGFyZW50fXdoaWxlKHQ9cCk7aWYoKHJ8fHYubGVuZ3RoKSYmCiFxLS0pdGhyb3cgSi4kJHBoYXNlPW51bGwsZCgiaW5mZGlnIixiLHkpO313aGlsZShyfHx2Lmxlbmd0aCk7Zm9yKEouJCRwaGFzZT1udWxsO0s8dy5sZW5ndGg7KXRyeXt3W0srK10oKX1jYXRjaChEKXtmKEQpfXcubGVuZ3RoPUs9MH0sJGRlc3Ryb3k6ZnVuY3Rpb24oKXtpZighdGhpcy4kJGRlc3Ryb3llZCl7dmFyIGE9dGhpcy4kcGFyZW50O3RoaXMuJGJyb2FkY2FzdCgiJGRlc3Ryb3kiKTt0aGlzLiQkZGVzdHJveWVkPSEwO3RoaXM9PT1KJiZoLiQkYXBwbGljYXRpb25EZXN0cm95ZWQoKTtwKHRoaXMsLXRoaXMuJCR3YXRjaGVyc0NvdW50KTtmb3IodmFyIGIgaW4gdGhpcy4kJGxpc3RlbmVyQ291bnQpdSh0aGlzLHRoaXMuJCRsaXN0ZW5lckNvdW50W2JdLGIpO2EmJmEuJCRjaGlsZEhlYWQ9PXRoaXMmJihhLiQkY2hpbGRIZWFkPXRoaXMuJCRuZXh0U2libGluZyk7YSYmYS4kJGNoaWxkVGFpbD09dGhpcyYmKGEuJCRjaGlsZFRhaWw9dGhpcy4kJHByZXZTaWJsaW5nKTt0aGlzLiQkcHJldlNpYmxpbmcmJgoodGhpcy4kJHByZXZTaWJsaW5nLiQkbmV4dFNpYmxpbmc9dGhpcy4kJG5leHRTaWJsaW5nKTt0aGlzLiQkbmV4dFNpYmxpbmcmJih0aGlzLiQkbmV4dFNpYmxpbmcuJCRwcmV2U2libGluZz10aGlzLiQkcHJldlNpYmxpbmcpO3RoaXMuJGRlc3Ryb3k9dGhpcy4kZGlnZXN0PXRoaXMuJGFwcGx5PXRoaXMuJGV2YWxBc3luYz10aGlzLiRhcHBseUFzeW5jPUE7dGhpcy4kb249dGhpcy4kd2F0Y2g9dGhpcy4kd2F0Y2hHcm91cD1mdW5jdGlvbigpe3JldHVybiBBfTt0aGlzLiQkbGlzdGVuZXJzPXt9O3RoaXMuJCRuZXh0U2libGluZz1udWxsO2wodGhpcyl9fSwkZXZhbDpmdW5jdGlvbihhLGIpe3JldHVybiBnKGEpKHRoaXMsYil9LCRldmFsQXN5bmM6ZnVuY3Rpb24oYSxiKXtKLiQkcGhhc2V8fHYubGVuZ3RofHxoLmRlZmVyKGZ1bmN0aW9uKCl7di5sZW5ndGgmJkouJGRpZ2VzdCgpfSk7di5wdXNoKHtzY29wZTp0aGlzLGV4cHJlc3Npb246ZyhhKSxsb2NhbHM6Yn0pfSwkJHBvc3REaWdlc3Q6ZnVuY3Rpb24oYSl7dy5wdXNoKGEpfSwKJGFwcGx5OmZ1bmN0aW9uKGEpe3RyeXtuKCIkYXBwbHkiKTt0cnl7cmV0dXJuIHRoaXMuJGV2YWwoYSl9ZmluYWxseXtKLiQkcGhhc2U9bnVsbH19Y2F0Y2goYil7ZihiKX1maW5hbGx5e3RyeXtKLiRkaWdlc3QoKX1jYXRjaChjKXt0aHJvdyBmKGMpLGM7fX19LCRhcHBseUFzeW5jOmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXtjLiRldmFsKGEpfXZhciBjPXRoaXM7YSYmdC5wdXNoKGIpO2E9ZyhhKTtyKCl9LCRvbjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuJCRsaXN0ZW5lcnNbYV07Y3x8KHRoaXMuJCRsaXN0ZW5lcnNbYV09Yz1bXSk7Yy5wdXNoKGIpO3ZhciBkPXRoaXM7ZG8gZC4kJGxpc3RlbmVyQ291bnRbYV18fChkLiQkbGlzdGVuZXJDb3VudFthXT0wKSxkLiQkbGlzdGVuZXJDb3VudFthXSsrO3doaWxlKGQ9ZC4kcGFyZW50KTt2YXIgZT10aGlzO3JldHVybiBmdW5jdGlvbigpe3ZhciBkPWMuaW5kZXhPZihiKTstMSE9PWQmJihjW2RdPW51bGwsdShlLDEsYSkpfX0sJGVtaXQ6ZnVuY3Rpb24oYSwKYil7dmFyIGM9W10sZCxlPXRoaXMsZz0hMSxoPXtuYW1lOmEsdGFyZ2V0U2NvcGU6ZSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXtnPSEwfSxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe2guZGVmYXVsdFByZXZlbnRlZD0hMH0sZGVmYXVsdFByZXZlbnRlZDohMX0saz0kYShbaF0sYXJndW1lbnRzLDEpLGwsbTtkb3tkPWUuJCRsaXN0ZW5lcnNbYV18fGM7aC5jdXJyZW50U2NvcGU9ZTtsPTA7Zm9yKG09ZC5sZW5ndGg7bDxtO2wrKylpZihkW2xdKXRyeXtkW2xdLmFwcGx5KG51bGwsayl9Y2F0Y2gobil7ZihuKX1lbHNlIGQuc3BsaWNlKGwsMSksbC0tLG0tLTtpZihnKXJldHVybiBoLmN1cnJlbnRTY29wZT1udWxsLGg7ZT1lLiRwYXJlbnR9d2hpbGUoZSk7aC5jdXJyZW50U2NvcGU9bnVsbDtyZXR1cm4gaH0sJGJyb2FkY2FzdDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD10aGlzLGU9e25hbWU6YSx0YXJnZXRTY29wZTp0aGlzLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7ZS5kZWZhdWx0UHJldmVudGVkPQohMH0sZGVmYXVsdFByZXZlbnRlZDohMX07aWYoIXRoaXMuJCRsaXN0ZW5lckNvdW50W2FdKXJldHVybiBlO2Zvcih2YXIgZz0kYShbZV0sYXJndW1lbnRzLDEpLGgsaztjPWQ7KXtlLmN1cnJlbnRTY29wZT1jO2Q9Yy4kJGxpc3RlbmVyc1thXXx8W107aD0wO2ZvcihrPWQubGVuZ3RoO2g8aztoKyspaWYoZFtoXSl0cnl7ZFtoXS5hcHBseShudWxsLGcpfWNhdGNoKGwpe2YobCl9ZWxzZSBkLnNwbGljZShoLDEpLGgtLSxrLS07aWYoIShkPWMuJCRsaXN0ZW5lckNvdW50W2FdJiZjLiQkY2hpbGRIZWFkfHxjIT09dGhpcyYmYy4kJG5leHRTaWJsaW5nKSlmb3IoO2MhPT10aGlzJiYhKGQ9Yy4kJG5leHRTaWJsaW5nKTspYz1jLiRwYXJlbnR9ZS5jdXJyZW50U2NvcGU9bnVsbDtyZXR1cm4gZX19O3ZhciBKPW5ldyBtLHY9Si4kJGFzeW5jUXVldWU9W10sdz1KLiQkcG9zdERpZ2VzdFF1ZXVlPVtdLHQ9Si4kJGFwcGx5QXN5bmNRdWV1ZT1bXSxLPTA7cmV0dXJuIEp9XX1mdW5jdGlvbiBuZSgpe3ZhciBhPQovXlxzKihodHRwcz98ZnRwfG1haWx0b3x0ZWx8ZmlsZSk6LyxiPS9eXHMqKChodHRwcz98ZnRwfGZpbGV8YmxvYik6fGRhdGE6aW1hZ2VcLykvO3RoaXMuYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3Q9ZnVuY3Rpb24oYil7cmV0dXJuIHcoYik/KGE9Yix0aGlzKTphfTt0aGlzLmltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdD1mdW5jdGlvbihhKXtyZXR1cm4gdyhhKT8oYj1hLHRoaXMpOmJ9O3RoaXMuJGdldD1mdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihkLGMpe3ZhciBlPWM/YjphLGY7Zj1ZKGQpLmhyZWY7cmV0dXJuIiI9PT1mfHxmLm1hdGNoKGUpP2Q6InVuc2FmZToiK2Z9fX1mdW5jdGlvbiBvZyhhKXtpZigic2VsZiI9PT1hKXJldHVybiBhO2lmKEcoYSkpe2lmKC0xPGEuaW5kZXhPZigiKioqIikpdGhyb3cgc2EoIml3Y2FyZCIsYSk7YT13ZChhKS5yZXBsYWNlKCJcXCpcXCoiLCIuKiIpLnJlcGxhY2UoIlxcKiIsIlteOi8uPyY7XSoiKTtyZXR1cm4gbmV3IFJlZ0V4cCgiXiIrCmErIiQiKX1pZihXYShhKSlyZXR1cm4gbmV3IFJlZ0V4cCgiXiIrYS5zb3VyY2UrIiQiKTt0aHJvdyBzYSgiaW1hdGNoZXIiKTt9ZnVuY3Rpb24geGQoYSl7dmFyIGI9W107dyhhKSYmcShhLGZ1bmN0aW9uKGEpe2IucHVzaChvZyhhKSl9KTtyZXR1cm4gYn1mdW5jdGlvbiB6Zigpe3RoaXMuU0NFX0NPTlRFWFRTPWxhO3ZhciBhPVsic2VsZiJdLGI9W107dGhpcy5yZXNvdXJjZVVybFdoaXRlbGlzdD1mdW5jdGlvbihiKXthcmd1bWVudHMubGVuZ3RoJiYoYT14ZChiKSk7cmV0dXJuIGF9O3RoaXMucmVzb3VyY2VVcmxCbGFja2xpc3Q9ZnVuY3Rpb24oYSl7YXJndW1lbnRzLmxlbmd0aCYmKGI9eGQoYSkpO3JldHVybiBifTt0aGlzLiRnZXQ9WyIkaW5qZWN0b3IiLGZ1bmN0aW9uKGQpe2Z1bmN0aW9uIGMoYSxiKXtyZXR1cm4ic2VsZiI9PT1hP2lkKGIpOiEhYS5leGVjKGIuaHJlZil9ZnVuY3Rpb24gZShhKXt2YXIgYj1mdW5jdGlvbihhKXt0aGlzLiQkdW53cmFwVHJ1c3RlZFZhbHVlPQpmdW5jdGlvbigpe3JldHVybiBhfX07YSYmKGIucHJvdG90eXBlPW5ldyBhKTtiLnByb3RvdHlwZS52YWx1ZU9mPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJCR1bndyYXBUcnVzdGVkVmFsdWUoKX07Yi5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kJHVud3JhcFRydXN0ZWRWYWx1ZSgpLnRvU3RyaW5nKCl9O3JldHVybiBifXZhciBmPWZ1bmN0aW9uKGEpe3Rocm93IHNhKCJ1bnNhZmUiKTt9O2QuaGFzKCIkc2FuaXRpemUiKSYmKGY9ZC5nZXQoIiRzYW5pdGl6ZSIpKTt2YXIgZz1lKCksaD17fTtoW2xhLkhUTUxdPWUoZyk7aFtsYS5DU1NdPWUoZyk7aFtsYS5VUkxdPWUoZyk7aFtsYS5KU109ZShnKTtoW2xhLlJFU09VUkNFX1VSTF09ZShoW2xhLlVSTF0pO3JldHVybnt0cnVzdEFzOmZ1bmN0aW9uKGEsYil7dmFyIGM9aC5oYXNPd25Qcm9wZXJ0eShhKT9oW2FdOm51bGw7aWYoIWMpdGhyb3cgc2EoImljb250ZXh0IixhLGIpO2lmKG51bGw9PT1ifHx5KGIpfHwKIiI9PT1iKXJldHVybiBiO2lmKCJzdHJpbmciIT09dHlwZW9mIGIpdGhyb3cgc2EoIml0eXBlIixhKTtyZXR1cm4gbmV3IGMoYil9LGdldFRydXN0ZWQ6ZnVuY3Rpb24oZCxlKXtpZihudWxsPT09ZXx8eShlKXx8IiI9PT1lKXJldHVybiBlO3ZhciBnPWguaGFzT3duUHJvcGVydHkoZCk/aFtkXTpudWxsO2lmKGcmJmUgaW5zdGFuY2VvZiBnKXJldHVybiBlLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCk7aWYoZD09PWxhLlJFU09VUkNFX1VSTCl7dmFyIGc9WShlLnRvU3RyaW5nKCkpLG4scCx1PSExO249MDtmb3IocD1hLmxlbmd0aDtuPHA7bisrKWlmKGMoYVtuXSxnKSl7dT0hMDticmVha31pZih1KWZvcihuPTAscD1iLmxlbmd0aDtuPHA7bisrKWlmKGMoYltuXSxnKSl7dT0hMTticmVha31pZih1KXJldHVybiBlO3Rocm93IHNhKCJpbnNlY3VybCIsZS50b1N0cmluZygpKTt9aWYoZD09PWxhLkhUTUwpcmV0dXJuIGYoZSk7dGhyb3cgc2EoInVuc2FmZSIpO30sdmFsdWVPZjpmdW5jdGlvbihhKXtyZXR1cm4gYSBpbnN0YW5jZW9mCmc/YS4kJHVud3JhcFRydXN0ZWRWYWx1ZSgpOmF9fX1dfWZ1bmN0aW9uIHlmKCl7dmFyIGE9ITA7dGhpcy5lbmFibGVkPWZ1bmN0aW9uKGIpe2FyZ3VtZW50cy5sZW5ndGgmJihhPSEhYik7cmV0dXJuIGF9O3RoaXMuJGdldD1bIiRwYXJzZSIsIiRzY2VEZWxlZ2F0ZSIsZnVuY3Rpb24oYixkKXtpZihhJiY4PkVhKXRocm93IHNhKCJpZXF1aXJrcyIpO3ZhciBjPWlhKGxhKTtjLmlzRW5hYmxlZD1mdW5jdGlvbigpe3JldHVybiBhfTtjLnRydXN0QXM9ZC50cnVzdEFzO2MuZ2V0VHJ1c3RlZD1kLmdldFRydXN0ZWQ7Yy52YWx1ZU9mPWQudmFsdWVPZjthfHwoYy50cnVzdEFzPWMuZ2V0VHJ1c3RlZD1mdW5jdGlvbihhLGIpe3JldHVybiBifSxjLnZhbHVlT2Y9WGEpO2MucGFyc2VBcz1mdW5jdGlvbihhLGQpe3ZhciBlPWIoZCk7cmV0dXJuIGUubGl0ZXJhbCYmZS5jb25zdGFudD9lOmIoZCxmdW5jdGlvbihiKXtyZXR1cm4gYy5nZXRUcnVzdGVkKGEsYil9KX07dmFyIGU9Yy5wYXJzZUFzLApmPWMuZ2V0VHJ1c3RlZCxnPWMudHJ1c3RBcztxKGxhLGZ1bmN0aW9uKGEsYil7dmFyIGQ9UShiKTtjW2RiKCJwYXJzZV9hc18iK2QpXT1mdW5jdGlvbihiKXtyZXR1cm4gZShhLGIpfTtjW2RiKCJnZXRfdHJ1c3RlZF8iK2QpXT1mdW5jdGlvbihiKXtyZXR1cm4gZihhLGIpfTtjW2RiKCJ0cnVzdF9hc18iK2QpXT1mdW5jdGlvbihiKXtyZXR1cm4gZyhhLGIpfX0pO3JldHVybiBjfV19ZnVuY3Rpb24gQWYoKXt0aGlzLiRnZXQ9WyIkd2luZG93IiwiJGRvY3VtZW50IixmdW5jdGlvbihhLGIpe3ZhciBkPXt9LGM9IShhLmNocm9tZSYmYS5jaHJvbWUuYXBwJiZhLmNocm9tZS5hcHAucnVudGltZSkmJmEuaGlzdG9yeSYmYS5oaXN0b3J5LnB1c2hTdGF0ZSxlPVooKC9hbmRyb2lkIChcZCspLy5leGVjKFEoKGEubmF2aWdhdG9yfHx7fSkudXNlckFnZW50KSl8fFtdKVsxXSksZj0vQm94ZWUvaS50ZXN0KChhLm5hdmlnYXRvcnx8e30pLnVzZXJBZ2VudCksZz1iWzBdfHx7fSxoLGs9L14oTW96fHdlYmtpdHxtcykoPz1bQS1aXSkvLApsPWcuYm9keSYmZy5ib2R5LnN0eWxlLG09ITEsbj0hMTtpZihsKXtmb3IodmFyIHAgaW4gbClpZihtPWsuZXhlYyhwKSl7aD1tWzBdO2g9aFswXS50b1VwcGVyQ2FzZSgpK2guc3Vic3RyKDEpO2JyZWFrfWh8fChoPSJXZWJraXRPcGFjaXR5ImluIGwmJiJ3ZWJraXQiKTttPSEhKCJ0cmFuc2l0aW9uImluIGx8fGgrIlRyYW5zaXRpb24iaW4gbCk7bj0hISgiYW5pbWF0aW9uImluIGx8fGgrIkFuaW1hdGlvbiJpbiBsKTshZXx8bSYmbnx8KG09RyhsLndlYmtpdFRyYW5zaXRpb24pLG49RyhsLndlYmtpdEFuaW1hdGlvbikpfXJldHVybntoaXN0b3J5OiEoIWN8fDQ+ZXx8ZiksaGFzRXZlbnQ6ZnVuY3Rpb24oYSl7aWYoImlucHV0Ij09PWEmJjExPj1FYSlyZXR1cm4hMTtpZih5KGRbYV0pKXt2YXIgYj1nLmNyZWF0ZUVsZW1lbnQoImRpdiIpO2RbYV09Im9uIithIGluIGJ9cmV0dXJuIGRbYV19LGNzcDpCYSgpLHZlbmRvclByZWZpeDpoLHRyYW5zaXRpb25zOm0sYW5pbWF0aW9uczpuLGFuZHJvaWQ6ZX19XX0KZnVuY3Rpb24gQ2YoKXt2YXIgYTt0aGlzLmh0dHBPcHRpb25zPWZ1bmN0aW9uKGIpe3JldHVybiBiPyhhPWIsdGhpcyk6YX07dGhpcy4kZ2V0PVsiJHRlbXBsYXRlQ2FjaGUiLCIkaHR0cCIsIiRxIiwiJHNjZSIsZnVuY3Rpb24oYixkLGMsZSl7ZnVuY3Rpb24gZihnLGgpe2YudG90YWxQZW5kaW5nUmVxdWVzdHMrKztpZighRyhnKXx8eShiLmdldChnKSkpZz1lLmdldFRydXN0ZWRSZXNvdXJjZVVybChnKTt2YXIgaz1kLmRlZmF1bHRzJiZkLmRlZmF1bHRzLnRyYW5zZm9ybVJlc3BvbnNlO0woayk/az1rLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4gYSE9PWRjfSk6az09PWRjJiYoaz1udWxsKTtyZXR1cm4gZC5nZXQoZyxTKHtjYWNoZTpiLHRyYW5zZm9ybVJlc3BvbnNlOmt9LGEpKVsiZmluYWxseSJdKGZ1bmN0aW9uKCl7Zi50b3RhbFBlbmRpbmdSZXF1ZXN0cy0tfSkudGhlbihmdW5jdGlvbihhKXtiLnB1dChnLGEuZGF0YSk7cmV0dXJuIGEuZGF0YX0sZnVuY3Rpb24oYSl7aWYoIWgpdGhyb3cgcGcoInRwbG9hZCIsCmcsYS5zdGF0dXMsYS5zdGF0dXNUZXh0KTtyZXR1cm4gYy5yZWplY3QoYSl9KX1mLnRvdGFsUGVuZGluZ1JlcXVlc3RzPTA7cmV0dXJuIGZ9XX1mdW5jdGlvbiBEZigpe3RoaXMuJGdldD1bIiRyb290U2NvcGUiLCIkYnJvd3NlciIsIiRsb2NhdGlvbiIsZnVuY3Rpb24oYSxiLGQpe3JldHVybntmaW5kQmluZGluZ3M6ZnVuY3Rpb24oYSxiLGQpe2E9YS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJuZy1iaW5kaW5nIik7dmFyIGc9W107cShhLGZ1bmN0aW9uKGEpe3ZhciBjPWNhLmVsZW1lbnQoYSkuZGF0YSgiJGJpbmRpbmciKTtjJiZxKGMsZnVuY3Rpb24oYyl7ZD8obmV3IFJlZ0V4cCgiKF58XFxzKSIrd2QoYikrIihcXHN8XFx8fCQpIikpLnRlc3QoYykmJmcucHVzaChhKTotMSE9Yy5pbmRleE9mKGIpJiZnLnB1c2goYSl9KX0pO3JldHVybiBnfSxmaW5kTW9kZWxzOmZ1bmN0aW9uKGEsYixkKXtmb3IodmFyIGc9WyJuZy0iLCJkYXRhLW5nLSIsIm5nXFw6Il0saD0wO2g8Zy5sZW5ndGg7KytoKXt2YXIgaz0KYS5xdWVyeVNlbGVjdG9yQWxsKCJbIitnW2hdKyJtb2RlbCIrKGQ/Ij0iOiIqPSIpKyciJytiKyciXScpO2lmKGsubGVuZ3RoKXJldHVybiBrfX0sZ2V0TG9jYXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gZC51cmwoKX0sc2V0TG9jYXRpb246ZnVuY3Rpb24oYil7YiE9PWQudXJsKCkmJihkLnVybChiKSxhLiRkaWdlc3QoKSl9LHdoZW5TdGFibGU6ZnVuY3Rpb24oYSl7Yi5ub3RpZnlXaGVuTm9PdXRzdGFuZGluZ1JlcXVlc3RzKGEpfX19XX1mdW5jdGlvbiBFZigpe3RoaXMuJGdldD1bIiRyb290U2NvcGUiLCIkYnJvd3NlciIsIiRxIiwiJCRxIiwiJGV4Y2VwdGlvbkhhbmRsZXIiLGZ1bmN0aW9uKGEsYixkLGMsZSl7ZnVuY3Rpb24gZihmLGssbCl7eihmKXx8KGw9ayxrPWYsZj1BKTt2YXIgbT12YS5jYWxsKGFyZ3VtZW50cywzKSxuPXcobCkmJiFsLHA9KG4/YzpkKS5kZWZlcigpLHU9cC5wcm9taXNlLHE7cT1iLmRlZmVyKGZ1bmN0aW9uKCl7dHJ5e3AucmVzb2x2ZShmLmFwcGx5KG51bGwsCm0pKX1jYXRjaChiKXtwLnJlamVjdChiKSxlKGIpfWZpbmFsbHl7ZGVsZXRlIGdbdS4kJHRpbWVvdXRJZF19bnx8YS4kYXBwbHkoKX0sayk7dS4kJHRpbWVvdXRJZD1xO2dbcV09cDtyZXR1cm4gdX12YXIgZz17fTtmLmNhbmNlbD1mdW5jdGlvbihhKXtyZXR1cm4gYSYmYS4kJHRpbWVvdXRJZCBpbiBnPyhnW2EuJCR0aW1lb3V0SWRdLnJlamVjdCgiY2FuY2VsZWQiKSxkZWxldGUgZ1thLiQkdGltZW91dElkXSxiLmRlZmVyLmNhbmNlbChhLiQkdGltZW91dElkKSk6ITF9O3JldHVybiBmfV19ZnVuY3Rpb24gWShhKXtFYSYmKCQuc2V0QXR0cmlidXRlKCJocmVmIixhKSxhPSQuaHJlZik7JC5zZXRBdHRyaWJ1dGUoImhyZWYiLGEpO3JldHVybntocmVmOiQuaHJlZixwcm90b2NvbDokLnByb3RvY29sPyQucHJvdG9jb2wucmVwbGFjZSgvOiQvLCIiKToiIixob3N0OiQuaG9zdCxzZWFyY2g6JC5zZWFyY2g/JC5zZWFyY2gucmVwbGFjZSgvXlw/LywiIik6IiIsaGFzaDokLmhhc2g/JC5oYXNoLnJlcGxhY2UoL14jLywKIiIpOiIiLGhvc3RuYW1lOiQuaG9zdG5hbWUscG9ydDokLnBvcnQscGF0aG5hbWU6Ii8iPT09JC5wYXRobmFtZS5jaGFyQXQoMCk/JC5wYXRobmFtZToiLyIrJC5wYXRobmFtZX19ZnVuY3Rpb24gaWQoYSl7YT1HKGEpP1koYSk6YTtyZXR1cm4gYS5wcm90b2NvbD09PXlkLnByb3RvY29sJiZhLmhvc3Q9PT15ZC5ob3N0fWZ1bmN0aW9uIEZmKCl7dGhpcy4kZ2V0PWhhKEMpfWZ1bmN0aW9uIHpkKGEpe2Z1bmN0aW9uIGIoYSl7dHJ5e3JldHVybiBkZWNvZGVVUklDb21wb25lbnQoYSl9Y2F0Y2goYil7cmV0dXJuIGF9fXZhciBkPWFbMF18fHt9LGM9e30sZT0iIjtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYSxnLGgsayxsO2E9ZC5jb29raWV8fCIiO2lmKGEhPT1lKWZvcihlPWEsYT1lLnNwbGl0KCI7ICIpLGM9e30saD0wO2g8YS5sZW5ndGg7aCsrKWc9YVtoXSxrPWcuaW5kZXhPZigiPSIpLDA8ayYmKGw9YihnLnN1YnN0cmluZygwLGspKSx5KGNbbF0pJiYoY1tsXT1iKGcuc3Vic3RyaW5nKGsrCjEpKSkpO3JldHVybiBjfX1mdW5jdGlvbiBKZigpe3RoaXMuJGdldD16ZH1mdW5jdGlvbiBNYyhhKXtmdW5jdGlvbiBiKGQsYyl7aWYoRChkKSl7dmFyIGU9e307cShkLGZ1bmN0aW9uKGEsYyl7ZVtjXT1iKGMsYSl9KTtyZXR1cm4gZX1yZXR1cm4gYS5mYWN0b3J5KGQrIkZpbHRlciIsYyl9dGhpcy5yZWdpc3Rlcj1iO3RoaXMuJGdldD1bIiRpbmplY3RvciIsZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBhLmdldChiKyJGaWx0ZXIiKX19XTtiKCJjdXJyZW5jeSIsQWQpO2IoImRhdGUiLEJkKTtiKCJmaWx0ZXIiLHFnKTtiKCJqc29uIixyZyk7YigibGltaXRUbyIsc2cpO2IoImxvd2VyY2FzZSIsdGcpO2IoIm51bWJlciIsQ2QpO2IoIm9yZGVyQnkiLERkKTtiKCJ1cHBlcmNhc2UiLHVnKX1mdW5jdGlvbiBxZygpe3JldHVybiBmdW5jdGlvbihhLGIsZCxjKXtpZighdGEoYSkpe2lmKG51bGw9PWEpcmV0dXJuIGE7dGhyb3cgTigiZmlsdGVyIikoIm5vdGFycmF5IiwKYSk7fWM9Y3x8IiQiO3ZhciBlO3N3aXRjaChsYyhiKSl7Y2FzZSAiZnVuY3Rpb24iOmJyZWFrO2Nhc2UgImJvb2xlYW4iOmNhc2UgIm51bGwiOmNhc2UgIm51bWJlciI6Y2FzZSAic3RyaW5nIjplPSEwO2Nhc2UgIm9iamVjdCI6Yj12ZyhiLGQsYyxlKTticmVhaztkZWZhdWx0OnJldHVybiBhfXJldHVybiBBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwoYSxiKX19ZnVuY3Rpb24gdmcoYSxiLGQsYyl7dmFyIGU9RChhKSYmZCBpbiBhOyEwPT09Yj9iPW5hOnooYil8fChiPWZ1bmN0aW9uKGEsYil7aWYoeShhKSlyZXR1cm4hMTtpZihudWxsPT09YXx8bnVsbD09PWIpcmV0dXJuIGE9PT1iO2lmKEQoYil8fEQoYSkmJiF2YyhhKSlyZXR1cm4hMTthPVEoIiIrYSk7Yj1RKCIiK2IpO3JldHVybi0xIT09YS5pbmRleE9mKGIpfSk7cmV0dXJuIGZ1bmN0aW9uKGYpe3JldHVybiBlJiYhRChmKT9MYShmLGFbZF0sYixkLCExKTpMYShmLGEsYixkLGMpfX1mdW5jdGlvbiBMYShhLGIsZCxjLGUsCmYpe3ZhciBnPWxjKGEpLGg9bGMoYik7aWYoInN0cmluZyI9PT1oJiYiISI9PT1iLmNoYXJBdCgwKSlyZXR1cm4hTGEoYSxiLnN1YnN0cmluZygxKSxkLGMsZSk7aWYoTChhKSlyZXR1cm4gYS5zb21lKGZ1bmN0aW9uKGEpe3JldHVybiBMYShhLGIsZCxjLGUpfSk7c3dpdGNoKGcpe2Nhc2UgIm9iamVjdCI6dmFyIGs7aWYoZSl7Zm9yKGsgaW4gYSlpZigiJCIhPT1rLmNoYXJBdCgwKSYmTGEoYVtrXSxiLGQsYywhMCkpcmV0dXJuITA7cmV0dXJuIGY/ITE6TGEoYSxiLGQsYywhMSl9aWYoIm9iamVjdCI9PT1oKXtmb3IoayBpbiBiKWlmKGY9YltrXSwheihmKSYmIXkoZikmJihnPWs9PT1jLCFMYShnP2E6YVtrXSxmLGQsYyxnLGcpKSlyZXR1cm4hMTtyZXR1cm4hMH1yZXR1cm4gZChhLGIpO2Nhc2UgImZ1bmN0aW9uIjpyZXR1cm4hMTtkZWZhdWx0OnJldHVybiBkKGEsYil9fWZ1bmN0aW9uIGxjKGEpe3JldHVybiBudWxsPT09YT8ibnVsbCI6dHlwZW9mIGF9ZnVuY3Rpb24gQWQoYSl7dmFyIGI9CmEuTlVNQkVSX0ZPUk1BVFM7cmV0dXJuIGZ1bmN0aW9uKGEsYyxlKXt5KGMpJiYoYz1iLkNVUlJFTkNZX1NZTSk7eShlKSYmKGU9Yi5QQVRURVJOU1sxXS5tYXhGcmFjKTtyZXR1cm4gbnVsbD09YT9hOkVkKGEsYi5QQVRURVJOU1sxXSxiLkdST1VQX1NFUCxiLkRFQ0lNQUxfU0VQLGUpLnJlcGxhY2UoL1x1MDBBNC9nLGMpfX1mdW5jdGlvbiBDZChhKXt2YXIgYj1hLk5VTUJFUl9GT1JNQVRTO3JldHVybiBmdW5jdGlvbihhLGMpe3JldHVybiBudWxsPT1hP2E6RWQoYSxiLlBBVFRFUk5TWzBdLGIuR1JPVVBfU0VQLGIuREVDSU1BTF9TRVAsYyl9fWZ1bmN0aW9uIHdnKGEpe3ZhciBiPTAsZCxjLGUsZixnOy0xPChjPWEuaW5kZXhPZihGZCkpJiYoYT1hLnJlcGxhY2UoRmQsIiIpKTswPChlPWEuc2VhcmNoKC9lL2kpKT8oMD5jJiYoYz1lKSxjKz0rYS5zbGljZShlKzEpLGE9YS5zdWJzdHJpbmcoMCxlKSk6MD5jJiYoYz1hLmxlbmd0aCk7Zm9yKGU9MDthLmNoYXJBdChlKT09bWM7ZSsrKTsKaWYoZT09KGc9YS5sZW5ndGgpKWQ9WzBdLGM9MTtlbHNle2ZvcihnLS07YS5jaGFyQXQoZyk9PW1jOylnLS07Yy09ZTtkPVtdO2ZvcihmPTA7ZTw9ZztlKyssZisrKWRbZl09K2EuY2hhckF0KGUpfWM+R2QmJihkPWQuc3BsaWNlKDAsR2QtMSksYj1jLTEsYz0xKTtyZXR1cm57ZDpkLGU6YixpOmN9fWZ1bmN0aW9uIHhnKGEsYixkLGMpe3ZhciBlPWEuZCxmPWUubGVuZ3RoLWEuaTtiPXkoYik/TWF0aC5taW4oTWF0aC5tYXgoZCxmKSxjKTorYjtkPWIrYS5pO2M9ZVtkXTtpZigwPGQpe2Uuc3BsaWNlKE1hdGgubWF4KGEuaSxkKSk7Zm9yKHZhciBnPWQ7ZzxlLmxlbmd0aDtnKyspZVtnXT0wfWVsc2UgZm9yKGY9TWF0aC5tYXgoMCxmKSxhLmk9MSxlLmxlbmd0aD1NYXRoLm1heCgxLGQ9YisxKSxlWzBdPTAsZz0xO2c8ZDtnKyspZVtnXT0wO2lmKDU8PWMpaWYoMD5kLTEpe2ZvcihjPTA7Yz5kO2MtLSllLnVuc2hpZnQoMCksYS5pKys7ZS51bnNoaWZ0KDEpO2EuaSsrfWVsc2UgZVtkLTFdKys7CmZvcig7ZjxNYXRoLm1heCgwLGIpO2YrKyllLnB1c2goMCk7aWYoYj1lLnJlZHVjZVJpZ2h0KGZ1bmN0aW9uKGEsYixjLGQpe2IrPWE7ZFtjXT1iJTEwO3JldHVybiBNYXRoLmZsb29yKGIvMTApfSwwKSllLnVuc2hpZnQoYiksYS5pKyt9ZnVuY3Rpb24gRWQoYSxiLGQsYyxlKXtpZighRyhhKSYmIVQoYSl8fGlzTmFOKGEpKXJldHVybiIiO3ZhciBmPSFpc0Zpbml0ZShhKSxnPSExLGg9TWF0aC5hYnMoYSkrIiIsaz0iIjtpZihmKWs9Ilx1MjIxZSI7ZWxzZXtnPXdnKGgpO3hnKGcsZSxiLm1pbkZyYWMsYi5tYXhGcmFjKTtrPWcuZDtoPWcuaTtlPWcuZTtmPVtdO2ZvcihnPWsucmVkdWNlKGZ1bmN0aW9uKGEsYil7cmV0dXJuIGEmJiFifSwhMCk7MD5oOylrLnVuc2hpZnQoMCksaCsrOzA8aD9mPWsuc3BsaWNlKGgsay5sZW5ndGgpOihmPWssaz1bMF0pO2g9W107Zm9yKGsubGVuZ3RoPj1iLmxnU2l6ZSYmaC51bnNoaWZ0KGsuc3BsaWNlKC1iLmxnU2l6ZSxrLmxlbmd0aCkuam9pbigiIikpO2subGVuZ3RoPgpiLmdTaXplOyloLnVuc2hpZnQoay5zcGxpY2UoLWIuZ1NpemUsay5sZW5ndGgpLmpvaW4oIiIpKTtrLmxlbmd0aCYmaC51bnNoaWZ0KGsuam9pbigiIikpO2s9aC5qb2luKGQpO2YubGVuZ3RoJiYoays9YytmLmpvaW4oIiIpKTtlJiYoays9ImUrIitlKX1yZXR1cm4gMD5hJiYhZz9iLm5lZ1ByZStrK2IubmVnU3VmOmIucG9zUHJlK2srYi5wb3NTdWZ9ZnVuY3Rpb24gS2IoYSxiLGQsYyl7dmFyIGU9IiI7aWYoMD5hfHxjJiYwPj1hKWM/YT0tYSsxOihhPS1hLGU9Ii0iKTtmb3IoYT0iIithO2EubGVuZ3RoPGI7KWE9bWMrYTtkJiYoYT1hLnN1YnN0cihhLmxlbmd0aC1iKSk7cmV0dXJuIGUrYX1mdW5jdGlvbiBiYShhLGIsZCxjLGUpe2Q9ZHx8MDtyZXR1cm4gZnVuY3Rpb24oZil7Zj1mWyJnZXQiK2FdKCk7aWYoMDxkfHxmPi1kKWYrPWQ7MD09PWYmJi0xMj09ZCYmKGY9MTIpO3JldHVybiBLYihmLGIsYyxlKX19ZnVuY3Rpb24ga2IoYSxiLGQpe3JldHVybiBmdW5jdGlvbihjLGUpe3ZhciBmPQpjWyJnZXQiK2FdKCksZz11YigoZD8iU1RBTkRBTE9ORSI6IiIpKyhiPyJTSE9SVCI6IiIpK2EpO3JldHVybiBlW2ddW2ZdfX1mdW5jdGlvbiBIZChhKXt2YXIgYj0obmV3IERhdGUoYSwwLDEpKS5nZXREYXkoKTtyZXR1cm4gbmV3IERhdGUoYSwwLCg0Pj1iPzU6MTIpLWIpfWZ1bmN0aW9uIElkKGEpe3JldHVybiBmdW5jdGlvbihiKXt2YXIgZD1IZChiLmdldEZ1bGxZZWFyKCkpO2I9K25ldyBEYXRlKGIuZ2V0RnVsbFllYXIoKSxiLmdldE1vbnRoKCksYi5nZXREYXRlKCkrKDQtYi5nZXREYXkoKSkpLStkO2I9MStNYXRoLnJvdW5kKGIvNjA0OEU1KTtyZXR1cm4gS2IoYixhKX19ZnVuY3Rpb24gbmMoYSxiKXtyZXR1cm4gMD49YS5nZXRGdWxsWWVhcigpP2IuRVJBU1swXTpiLkVSQVNbMV19ZnVuY3Rpb24gQmQoYSl7ZnVuY3Rpb24gYihhKXt2YXIgYjtpZihiPWEubWF0Y2goZCkpe2E9bmV3IERhdGUoMCk7dmFyIGY9MCxnPTAsaD1iWzhdP2Euc2V0VVRDRnVsbFllYXI6YS5zZXRGdWxsWWVhciwKaz1iWzhdP2Euc2V0VVRDSG91cnM6YS5zZXRIb3VycztiWzldJiYoZj1aKGJbOV0rYlsxMF0pLGc9WihiWzldK2JbMTFdKSk7aC5jYWxsKGEsWihiWzFdKSxaKGJbMl0pLTEsWihiWzNdKSk7Zj1aKGJbNF18fDApLWY7Zz1aKGJbNV18fDApLWc7aD1aKGJbNl18fDApO2I9TWF0aC5yb3VuZCgxRTMqcGFyc2VGbG9hdCgiMC4iKyhiWzddfHwwKSkpO2suY2FsbChhLGYsZyxoLGIpfXJldHVybiBhfXZhciBkPS9eKFxkezR9KS0/KFxkXGQpLT8oXGRcZCkoPzpUKFxkXGQpKD86Oj8oXGRcZCkoPzo6PyhcZFxkKSg/OlwuKFxkKykpPyk/KT8oWnwoWystXSkoXGRcZCk6PyhcZFxkKSk/KT8kLztyZXR1cm4gZnVuY3Rpb24oYyxkLGYpe3ZhciBnPSIiLGg9W10sayxsO2Q9ZHx8Im1lZGl1bURhdGUiO2Q9YS5EQVRFVElNRV9GT1JNQVRTW2RdfHxkO0coYykmJihjPXlnLnRlc3QoYyk/WihjKTpiKGMpKTtUKGMpJiYoYz1uZXcgRGF0ZShjKSk7aWYoIWRhKGMpfHwhaXNGaW5pdGUoYy5nZXRUaW1lKCkpKXJldHVybiBjOwpmb3IoO2Q7KShsPXpnLmV4ZWMoZCkpPyhoPSRhKGgsbCwxKSxkPWgucG9wKCkpOihoLnB1c2goZCksZD1udWxsKTt2YXIgbT1jLmdldFRpbWV6b25lT2Zmc2V0KCk7ZiYmKG09eWMoZixtKSxjPVNiKGMsZiwhMCkpO3EoaCxmdW5jdGlvbihiKXtrPUFnW2JdO2crPWs/ayhjLGEuREFURVRJTUVfRk9STUFUUyxtKToiJyciPT09Yj8iJyI6Yi5yZXBsYWNlKC8oXid8JyQpL2csIiIpLnJlcGxhY2UoLycnL2csIiciKX0pO3JldHVybiBnfX1mdW5jdGlvbiByZygpe3JldHVybiBmdW5jdGlvbihhLGIpe3koYikmJihiPTIpO3JldHVybiBiYihhLGIpfX1mdW5jdGlvbiBzZygpe3JldHVybiBmdW5jdGlvbihhLGIsZCl7Yj1JbmZpbml0eT09PU1hdGguYWJzKE51bWJlcihiKSk/TnVtYmVyKGIpOlooYik7aWYoaXNOYU4oYikpcmV0dXJuIGE7VChhKSYmKGE9YS50b1N0cmluZygpKTtpZighdGEoYSkpcmV0dXJuIGE7ZD0hZHx8aXNOYU4oZCk/MDpaKGQpO2Q9MD5kP01hdGgubWF4KDAsYS5sZW5ndGgrCmQpOmQ7cmV0dXJuIDA8PWI/b2MoYSxkLGQrYik6MD09PWQ/b2MoYSxiLGEubGVuZ3RoKTpvYyhhLE1hdGgubWF4KDAsZCtiKSxkKX19ZnVuY3Rpb24gb2MoYSxiLGQpe3JldHVybiBHKGEpP2Euc2xpY2UoYixkKTp2YS5jYWxsKGEsYixkKX1mdW5jdGlvbiBEZChhKXtmdW5jdGlvbiBiKGIpe3JldHVybiBiLm1hcChmdW5jdGlvbihiKXt2YXIgYz0xLGQ9WGE7aWYoeihiKSlkPWI7ZWxzZSBpZihHKGIpKXtpZigiKyI9PWIuY2hhckF0KDApfHwiLSI9PWIuY2hhckF0KDApKWM9Ii0iPT1iLmNoYXJBdCgwKT8tMToxLGI9Yi5zdWJzdHJpbmcoMSk7aWYoIiIhPT1iJiYoZD1hKGIpLGQuY29uc3RhbnQpKXZhciBlPWQoKSxkPWZ1bmN0aW9uKGEpe3JldHVybiBhW2VdfX1yZXR1cm57Z2V0OmQsZGVzY2VuZGluZzpjfX0pfWZ1bmN0aW9uIGQoYSl7c3dpdGNoKHR5cGVvZiBhKXtjYXNlICJudW1iZXIiOmNhc2UgImJvb2xlYW4iOmNhc2UgInN0cmluZyI6cmV0dXJuITA7ZGVmYXVsdDpyZXR1cm4hMX19CmZ1bmN0aW9uIGMoYSxiKXt2YXIgYz0wLGQ9YS50eXBlLGs9Yi50eXBlO2lmKGQ9PT1rKXt2YXIgaz1hLnZhbHVlLGw9Yi52YWx1ZTsic3RyaW5nIj09PWQ/KGs9ay50b0xvd2VyQ2FzZSgpLGw9bC50b0xvd2VyQ2FzZSgpKToib2JqZWN0Ij09PWQmJihEKGspJiYoaz1hLmluZGV4KSxEKGwpJiYobD1iLmluZGV4KSk7ayE9PWwmJihjPWs8bD8tMToxKX1lbHNlIGM9ZDxrPy0xOjE7cmV0dXJuIGN9cmV0dXJuIGZ1bmN0aW9uKGEsZixnLGgpe2lmKG51bGw9PWEpcmV0dXJuIGE7aWYoIXRhKGEpKXRocm93IE4oIm9yZGVyQnkiKSgibm90YXJyYXkiLGEpO0woZil8fChmPVtmXSk7MD09PWYubGVuZ3RoJiYoZj1bIisiXSk7dmFyIGs9YihmKSxsPWc/LTE6MSxtPXooaCk/aDpjO2E9QXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKGEsZnVuY3Rpb24oYSxiKXtyZXR1cm57dmFsdWU6YSx0aWVCcmVha2VyOnt2YWx1ZTpiLHR5cGU6Im51bWJlciIsaW5kZXg6Yn0scHJlZGljYXRlVmFsdWVzOmsubWFwKGZ1bmN0aW9uKGMpe3ZhciBlPQpjLmdldChhKTtjPXR5cGVvZiBlO2lmKG51bGw9PT1lKWM9InN0cmluZyIsZT0ibnVsbCI7ZWxzZSBpZigib2JqZWN0Ij09PWMpYTp7aWYoeihlLnZhbHVlT2YpJiYoZT1lLnZhbHVlT2YoKSxkKGUpKSlicmVhayBhO3ZjKGUpJiYoZT1lLnRvU3RyaW5nKCksZChlKSl9cmV0dXJue3ZhbHVlOmUsdHlwZTpjLGluZGV4OmJ9fSl9fSk7YS5zb3J0KGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD1rLmxlbmd0aDtjPGQ7YysrKXt2YXIgZT1tKGEucHJlZGljYXRlVmFsdWVzW2NdLGIucHJlZGljYXRlVmFsdWVzW2NdKTtpZihlKXJldHVybiBlKmtbY10uZGVzY2VuZGluZypsfXJldHVybiBtKGEudGllQnJlYWtlcixiLnRpZUJyZWFrZXIpKmx9KTtyZXR1cm4gYT1hLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS52YWx1ZX0pfX1mdW5jdGlvbiBUYShhKXt6KGEpJiYoYT17bGluazphfSk7YS5yZXN0cmljdD1hLnJlc3RyaWN0fHwiQUMiO3JldHVybiBoYShhKX1mdW5jdGlvbiBKZChhLGIsZCwKYyxlKXt2YXIgZj10aGlzLGc9W107Zi4kZXJyb3I9e307Zi4kJHN1Y2Nlc3M9e307Zi4kcGVuZGluZz12b2lkIDA7Zi4kbmFtZT1lKGIubmFtZXx8Yi5uZ0Zvcm18fCIiKShkKTtmLiRkaXJ0eT0hMTtmLiRwcmlzdGluZT0hMDtmLiR2YWxpZD0hMDtmLiRpbnZhbGlkPSExO2YuJHN1Ym1pdHRlZD0hMTtmLiQkcGFyZW50Rm9ybT1MYjtmLiRyb2xsYmFja1ZpZXdWYWx1ZT1mdW5jdGlvbigpe3EoZyxmdW5jdGlvbihhKXthLiRyb2xsYmFja1ZpZXdWYWx1ZSgpfSl9O2YuJGNvbW1pdFZpZXdWYWx1ZT1mdW5jdGlvbigpe3EoZyxmdW5jdGlvbihhKXthLiRjb21taXRWaWV3VmFsdWUoKX0pfTtmLiRhZGRDb250cm9sPWZ1bmN0aW9uKGEpe1FhKGEuJG5hbWUsImlucHV0Iik7Zy5wdXNoKGEpO2EuJG5hbWUmJihmW2EuJG5hbWVdPWEpO2EuJCRwYXJlbnRGb3JtPWZ9O2YuJCRyZW5hbWVDb250cm9sPWZ1bmN0aW9uKGEsYil7dmFyIGM9YS4kbmFtZTtmW2NdPT09YSYmZGVsZXRlIGZbY107ZltiXT0KYTthLiRuYW1lPWJ9O2YuJHJlbW92ZUNvbnRyb2w9ZnVuY3Rpb24oYSl7YS4kbmFtZSYmZlthLiRuYW1lXT09PWEmJmRlbGV0ZSBmW2EuJG5hbWVdO3EoZi4kcGVuZGluZyxmdW5jdGlvbihiLGMpe2YuJHNldFZhbGlkaXR5KGMsbnVsbCxhKX0pO3EoZi4kZXJyb3IsZnVuY3Rpb24oYixjKXtmLiRzZXRWYWxpZGl0eShjLG51bGwsYSl9KTtxKGYuJCRzdWNjZXNzLGZ1bmN0aW9uKGIsYyl7Zi4kc2V0VmFsaWRpdHkoYyxudWxsLGEpfSk7WmEoZyxhKTthLiQkcGFyZW50Rm9ybT1MYn07S2Qoe2N0cmw6dGhpcywkZWxlbWVudDphLHNldDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YVtiXTtkPy0xPT09ZC5pbmRleE9mKGMpJiZkLnB1c2goYyk6YVtiXT1bY119LHVuc2V0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hW2JdO2QmJihaYShkLGMpLDA9PT1kLmxlbmd0aCYmZGVsZXRlIGFbYl0pfSwkYW5pbWF0ZTpjfSk7Zi4kc2V0RGlydHk9ZnVuY3Rpb24oKXtjLnJlbW92ZUNsYXNzKGEsVWEpO2MuYWRkQ2xhc3MoYSwKTWIpO2YuJGRpcnR5PSEwO2YuJHByaXN0aW5lPSExO2YuJCRwYXJlbnRGb3JtLiRzZXREaXJ0eSgpfTtmLiRzZXRQcmlzdGluZT1mdW5jdGlvbigpe2Muc2V0Q2xhc3MoYSxVYSxNYisiIG5nLXN1Ym1pdHRlZCIpO2YuJGRpcnR5PSExO2YuJHByaXN0aW5lPSEwO2YuJHN1Ym1pdHRlZD0hMTtxKGcsZnVuY3Rpb24oYSl7YS4kc2V0UHJpc3RpbmUoKX0pfTtmLiRzZXRVbnRvdWNoZWQ9ZnVuY3Rpb24oKXtxKGcsZnVuY3Rpb24oYSl7YS4kc2V0VW50b3VjaGVkKCl9KX07Zi4kc2V0U3VibWl0dGVkPWZ1bmN0aW9uKCl7Yy5hZGRDbGFzcyhhLCJuZy1zdWJtaXR0ZWQiKTtmLiRzdWJtaXR0ZWQ9ITA7Zi4kJHBhcmVudEZvcm0uJHNldFN1Ym1pdHRlZCgpfX1mdW5jdGlvbiBwYyhhKXthLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24oYil7cmV0dXJuIGEuJGlzRW1wdHkoYik/YjpiLnRvU3RyaW5nKCl9KX1mdW5jdGlvbiBsYihhLGIsZCxjLGUsZil7dmFyIGc9UShiWzBdLnR5cGUpO2lmKCFlLmFuZHJvaWQpe3ZhciBoPQohMTtiLm9uKCJjb21wb3NpdGlvbnN0YXJ0IixmdW5jdGlvbigpe2g9ITB9KTtiLm9uKCJjb21wb3NpdGlvbmVuZCIsZnVuY3Rpb24oKXtoPSExO2woKX0pfXZhciBrLGw9ZnVuY3Rpb24oYSl7ayYmKGYuZGVmZXIuY2FuY2VsKGspLGs9bnVsbCk7aWYoIWgpe3ZhciBlPWIudmFsKCk7YT1hJiZhLnR5cGU7InBhc3N3b3JkIj09PWd8fGQubmdUcmltJiYiZmFsc2UiPT09ZC5uZ1RyaW18fChlPVcoZSkpOyhjLiR2aWV3VmFsdWUhPT1lfHwiIj09PWUmJmMuJCRoYXNOYXRpdmVWYWxpZGF0b3JzKSYmYy4kc2V0Vmlld1ZhbHVlKGUsYSl9fTtpZihlLmhhc0V2ZW50KCJpbnB1dCIpKWIub24oImlucHV0IixsKTtlbHNle3ZhciBtPWZ1bmN0aW9uKGEsYixjKXtrfHwoaz1mLmRlZmVyKGZ1bmN0aW9uKCl7az1udWxsO2ImJmIudmFsdWU9PT1jfHxsKGEpfSkpfTtiLm9uKCJrZXlkb3duIixmdW5jdGlvbihhKXt2YXIgYj1hLmtleUNvZGU7OTE9PT1ifHwxNTxiJiYxOT5ifHwzNzw9YiYmNDA+PWJ8fAptKGEsdGhpcyx0aGlzLnZhbHVlKX0pO2lmKGUuaGFzRXZlbnQoInBhc3RlIikpYi5vbigicGFzdGUgY3V0IixtKX1iLm9uKCJjaGFuZ2UiLGwpO2lmKExkW2ddJiZjLiQkaGFzTmF0aXZlVmFsaWRhdG9ycyYmZz09PWQudHlwZSliLm9uKCJrZXlkb3duIHdoZWVsIG1vdXNlZG93biIsZnVuY3Rpb24oYSl7aWYoIWspe3ZhciBiPXRoaXMudmFsaWRpdHksYz1iLmJhZElucHV0LGQ9Yi50eXBlTWlzbWF0Y2g7az1mLmRlZmVyKGZ1bmN0aW9uKCl7az1udWxsO2IuYmFkSW5wdXQ9PT1jJiZiLnR5cGVNaXNtYXRjaD09PWR8fGwoYSl9KX19KTtjLiRyZW5kZXI9ZnVuY3Rpb24oKXt2YXIgYT1jLiRpc0VtcHR5KGMuJHZpZXdWYWx1ZSk/IiI6Yy4kdmlld1ZhbHVlO2IudmFsKCkhPT1hJiZiLnZhbChhKX19ZnVuY3Rpb24gTmIoYSxiKXtyZXR1cm4gZnVuY3Rpb24oZCxjKXt2YXIgZSxmO2lmKGRhKGQpKXJldHVybiBkO2lmKEcoZCkpeyciJz09ZC5jaGFyQXQoMCkmJiciJz09ZC5jaGFyQXQoZC5sZW5ndGgtCjEpJiYoZD1kLnN1YnN0cmluZygxLGQubGVuZ3RoLTEpKTtpZihCZy50ZXN0KGQpKXJldHVybiBuZXcgRGF0ZShkKTthLmxhc3RJbmRleD0wO2lmKGU9YS5leGVjKGQpKXJldHVybiBlLnNoaWZ0KCksZj1jP3t5eXl5OmMuZ2V0RnVsbFllYXIoKSxNTTpjLmdldE1vbnRoKCkrMSxkZDpjLmdldERhdGUoKSxISDpjLmdldEhvdXJzKCksbW06Yy5nZXRNaW51dGVzKCksc3M6Yy5nZXRTZWNvbmRzKCksc3NzOmMuZ2V0TWlsbGlzZWNvbmRzKCkvMUUzfTp7eXl5eToxOTcwLE1NOjEsZGQ6MSxISDowLG1tOjAsc3M6MCxzc3M6MH0scShlLGZ1bmN0aW9uKGEsYyl7YzxiLmxlbmd0aCYmKGZbYltjXV09K2EpfSksbmV3IERhdGUoZi55eXl5LGYuTU0tMSxmLmRkLGYuSEgsZi5tbSxmLnNzfHwwLDFFMypmLnNzc3x8MCl9cmV0dXJuIE5hTn19ZnVuY3Rpb24gbWIoYSxiLGQsYyl7cmV0dXJuIGZ1bmN0aW9uKGUsZixnLGgsayxsLG0pe2Z1bmN0aW9uIG4oYSl7cmV0dXJuIGEmJiEoYS5nZXRUaW1lJiYKYS5nZXRUaW1lKCkhPT1hLmdldFRpbWUoKSl9ZnVuY3Rpb24gcChhKXtyZXR1cm4gdyhhKSYmIWRhKGEpP2QoYSl8fHZvaWQgMDphfU1kKGUsZixnLGgpO2xiKGUsZixnLGgsayxsKTt2YXIgdT1oJiZoLiRvcHRpb25zJiZoLiRvcHRpb25zLnRpbWV6b25lLHE7aC4kJHBhcnNlck5hbWU9YTtoLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24oYSl7aWYoaC4kaXNFbXB0eShhKSlyZXR1cm4gbnVsbDtpZihiLnRlc3QoYSkpcmV0dXJuIGE9ZChhLHEpLHUmJihhPVNiKGEsdSkpLGF9KTtoLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24oYSl7aWYoYSYmIWRhKGEpKXRocm93IG5iKCJkYXRlZm10IixhKTtpZihuKGEpKXJldHVybihxPWEpJiZ1JiYocT1TYihxLHUsITApKSxtKCJkYXRlIikoYSxjLHUpO3E9bnVsbDtyZXR1cm4iIn0pO2lmKHcoZy5taW4pfHxnLm5nTWluKXt2YXIgcztoLiR2YWxpZGF0b3JzLm1pbj1mdW5jdGlvbihhKXtyZXR1cm4hbihhKXx8eShzKXx8ZChhKT49c307Zy4kb2JzZXJ2ZSgibWluIiwKZnVuY3Rpb24oYSl7cz1wKGEpO2guJHZhbGlkYXRlKCl9KX1pZih3KGcubWF4KXx8Zy5uZ01heCl7dmFyIHI7aC4kdmFsaWRhdG9ycy5tYXg9ZnVuY3Rpb24oYSl7cmV0dXJuIW4oYSl8fHkocil8fGQoYSk8PXJ9O2cuJG9ic2VydmUoIm1heCIsZnVuY3Rpb24oYSl7cj1wKGEpO2guJHZhbGlkYXRlKCl9KX19fWZ1bmN0aW9uIE1kKGEsYixkLGMpeyhjLiQkaGFzTmF0aXZlVmFsaWRhdG9ycz1EKGJbMF0udmFsaWRpdHkpKSYmYy4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKGEpe3ZhciBjPWIucHJvcCgidmFsaWRpdHkiKXx8e307cmV0dXJuIGMuYmFkSW5wdXR8fGMudHlwZU1pc21hdGNoP3ZvaWQgMDphfSl9ZnVuY3Rpb24gTmQoYSxiLGQsYyxlKXtpZih3KGMpKXthPWEoYyk7aWYoIWEuY29uc3RhbnQpdGhyb3cgbmIoImNvbnN0ZXhwciIsZCxjKTtyZXR1cm4gYShiKX1yZXR1cm4gZX1mdW5jdGlvbiBxYyhhLGIpe2E9Im5nQ2xhc3MiK2E7cmV0dXJuWyIkYW5pbWF0ZSIsZnVuY3Rpb24oZCl7ZnVuY3Rpb24gYyhhLApiKXt2YXIgYz1bXSxkPTA7YTpmb3IoO2Q8YS5sZW5ndGg7ZCsrKXtmb3IodmFyIGU9YVtkXSxtPTA7bTxiLmxlbmd0aDttKyspaWYoZT09YlttXSljb250aW51ZSBhO2MucHVzaChlKX1yZXR1cm4gY31mdW5jdGlvbiBlKGEpe3ZhciBiPVtdO3JldHVybiBMKGEpPyhxKGEsZnVuY3Rpb24oYSl7Yj1iLmNvbmNhdChlKGEpKX0pLGIpOkcoYSk/YS5zcGxpdCgiICIpOkQoYSk/KHEoYSxmdW5jdGlvbihhLGMpe2EmJihiPWIuY29uY2F0KGMuc3BsaXQoIiAiKSkpfSksYik6YX1yZXR1cm57cmVzdHJpY3Q6IkFDIixsaW5rOmZ1bmN0aW9uKGYsZyxoKXtmdW5jdGlvbiBrKGEpe2E9bChhLDEpO2guJGFkZENsYXNzKGEpfWZ1bmN0aW9uIGwoYSxiKXt2YXIgYz1nLmRhdGEoIiRjbGFzc0NvdW50cyIpfHxVKCksZD1bXTtxKGEsZnVuY3Rpb24oYSl7aWYoMDxifHxjW2FdKWNbYV09KGNbYV18fDApK2IsY1thXT09PSsoMDxiKSYmZC5wdXNoKGEpfSk7Zy5kYXRhKCIkY2xhc3NDb3VudHMiLGMpO3JldHVybiBkLmpvaW4oIiAiKX0KZnVuY3Rpb24gbShhLGIpe3ZhciBlPWMoYixhKSxmPWMoYSxiKSxlPWwoZSwxKSxmPWwoZiwtMSk7ZSYmZS5sZW5ndGgmJmQuYWRkQ2xhc3MoZyxlKTtmJiZmLmxlbmd0aCYmZC5yZW1vdmVDbGFzcyhnLGYpfWZ1bmN0aW9uIG4oYSl7aWYoITA9PT1ifHwoZi4kaW5kZXgmMSk9PT1iKXt2YXIgYz1lKGF8fFtdKTtpZighcClrKGMpO2Vsc2UgaWYoIW5hKGEscCkpe3ZhciBkPWUocCk7bShkLGMpfX1wPUwoYSk/YS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGlhKGEpfSk6aWEoYSl9dmFyIHA7Zi4kd2F0Y2goaFthXSxuLCEwKTtoLiRvYnNlcnZlKCJjbGFzcyIsZnVuY3Rpb24oYil7bihmLiRldmFsKGhbYV0pKX0pOyJuZ0NsYXNzIiE9PWEmJmYuJHdhdGNoKCIkaW5kZXgiLGZ1bmN0aW9uKGMsZCl7dmFyIGc9YyYxO2lmKGchPT0oZCYxKSl7dmFyIG09ZShmLiRldmFsKGhbYV0pKTtnPT09Yj9rKG0pOihnPWwobSwtMSksaC4kcmVtb3ZlQ2xhc3MoZykpfX0pfX19XX1mdW5jdGlvbiBLZChhKXtmdW5jdGlvbiBiKGEsCmIpe2ImJiFmW2FdPyhrLmFkZENsYXNzKGUsYSksZlthXT0hMCk6IWImJmZbYV0mJihrLnJlbW92ZUNsYXNzKGUsYSksZlthXT0hMSl9ZnVuY3Rpb24gZChhLGMpe2E9YT8iLSIrQ2MoYSwiLSIpOiIiO2Iob2IrYSwhMD09PWMpO2IoT2QrYSwhMT09PWMpfXZhciBjPWEuY3RybCxlPWEuJGVsZW1lbnQsZj17fSxnPWEuc2V0LGg9YS51bnNldCxrPWEuJGFuaW1hdGU7ZltPZF09IShmW29iXT1lLmhhc0NsYXNzKG9iKSk7Yy4kc2V0VmFsaWRpdHk9ZnVuY3Rpb24oYSxlLGYpe3koZSk/KGMuJHBlbmRpbmd8fChjLiRwZW5kaW5nPXt9KSxnKGMuJHBlbmRpbmcsYSxmKSk6KGMuJHBlbmRpbmcmJmgoYy4kcGVuZGluZyxhLGYpLFBkKGMuJHBlbmRpbmcpJiYoYy4kcGVuZGluZz12b2lkIDApKTtHYShlKT9lPyhoKGMuJGVycm9yLGEsZiksZyhjLiQkc3VjY2VzcyxhLGYpKTooZyhjLiRlcnJvcixhLGYpLGgoYy4kJHN1Y2Nlc3MsYSxmKSk6KGgoYy4kZXJyb3IsYSxmKSxoKGMuJCRzdWNjZXNzLAphLGYpKTtjLiRwZW5kaW5nPyhiKFFkLCEwKSxjLiR2YWxpZD1jLiRpbnZhbGlkPXZvaWQgMCxkKCIiLG51bGwpKTooYihRZCwhMSksYy4kdmFsaWQ9UGQoYy4kZXJyb3IpLGMuJGludmFsaWQ9IWMuJHZhbGlkLGQoIiIsYy4kdmFsaWQpKTtlPWMuJHBlbmRpbmcmJmMuJHBlbmRpbmdbYV0/dm9pZCAwOmMuJGVycm9yW2FdPyExOmMuJCRzdWNjZXNzW2FdPyEwOm51bGw7ZChhLGUpO2MuJCRwYXJlbnRGb3JtLiRzZXRWYWxpZGl0eShhLGUsYyl9fWZ1bmN0aW9uIFBkKGEpe2lmKGEpZm9yKHZhciBiIGluIGEpaWYoYS5oYXNPd25Qcm9wZXJ0eShiKSlyZXR1cm4hMTtyZXR1cm4hMH12YXIgQ2c9L15cLyguKylcLyhbYS16XSopJC8sdWE9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxRPWZ1bmN0aW9uKGEpe3JldHVybiBHKGEpP2EudG9Mb3dlckNhc2UoKTphfSx1Yj1mdW5jdGlvbihhKXtyZXR1cm4gRyhhKT9hLnRvVXBwZXJDYXNlKCk6YX0sRWEsRixxYSx2YT1bXS5zbGljZSwKYmc9W10uc3BsaWNlLERnPVtdLnB1c2gsbWE9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyx3Yz1PYmplY3QuZ2V0UHJvdG90eXBlT2YseGE9TigibmciKSxjYT1DLmFuZ3VsYXJ8fChDLmFuZ3VsYXI9e30pLFViLHBiPTA7RWE9Qy5kb2N1bWVudC5kb2N1bWVudE1vZGU7QS4kaW5qZWN0PVtdO1hhLiRpbmplY3Q9W107dmFyIEw9QXJyYXkuaXNBcnJheSxhZT0vXlxbb2JqZWN0ICg/OlVpbnQ4fFVpbnQ4Q2xhbXBlZHxVaW50MTZ8VWludDMyfEludDh8SW50MTZ8SW50MzJ8RmxvYXQzMnxGbG9hdDY0KUFycmF5XF0kLyxXPWZ1bmN0aW9uKGEpe3JldHVybiBHKGEpP2EudHJpbSgpOmF9LHdkPWZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoLyhbLSgpXFtcXXt9Kz8qLiRcXnwsOiM8IVxcXSkvZywiXFwkMSIpLnJlcGxhY2UoL1x4MDgvZywiXFx4MDgiKX0sQmE9ZnVuY3Rpb24oKXtpZighdyhCYS5ydWxlcykpe3ZhciBhPUMuZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiW25nLWNzcF0iKXx8CkMuZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiW2RhdGEtbmctY3NwXSIpO2lmKGEpe3ZhciBiPWEuZ2V0QXR0cmlidXRlKCJuZy1jc3AiKXx8YS5nZXRBdHRyaWJ1dGUoImRhdGEtbmctY3NwIik7QmEucnVsZXM9e25vVW5zYWZlRXZhbDohYnx8LTEhPT1iLmluZGV4T2YoIm5vLXVuc2FmZS1ldmFsIiksbm9JbmxpbmVTdHlsZTohYnx8LTEhPT1iLmluZGV4T2YoIm5vLWlubGluZS1zdHlsZSIpfX1lbHNle2E9QmE7dHJ5e25ldyBGdW5jdGlvbigiIiksYj0hMX1jYXRjaChkKXtiPSEwfWEucnVsZXM9e25vVW5zYWZlRXZhbDpiLG5vSW5saW5lU3R5bGU6ITF9fX1yZXR1cm4gQmEucnVsZXN9LHJiPWZ1bmN0aW9uKCl7aWYodyhyYi5uYW1lXykpcmV0dXJuIHJiLm5hbWVfO3ZhciBhLGIsZD1OYS5sZW5ndGgsYyxlO2ZvcihiPTA7YjxkOysrYilpZihjPU5hW2JdLGE9Qy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJbIitjLnJlcGxhY2UoIjoiLCJcXDoiKSsianFdIikpe2U9YS5nZXRBdHRyaWJ1dGUoYysKImpxIik7YnJlYWt9cmV0dXJuIHJiLm5hbWVfPWV9LGRlPS86L2csTmE9WyJuZy0iLCJkYXRhLW5nLSIsIm5nOiIsIngtbmctIl0saWU9L1tBLVpdL2csRGM9ITEsTWE9MyxtZT17ZnVsbDoiMS41LjgiLG1ham9yOjEsbWlub3I6NSxkb3Q6OCxjb2RlTmFtZToiYXJiaXRyYXJ5LWZhbGxiYWNrcyJ9O08uZXhwYW5kbz0ibmczMzkiO3ZhciBmYj1PLmNhY2hlPXt9LFBmPTE7Ty5fZGF0YT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jYWNoZVthW3RoaXMuZXhwYW5kb11dfHx7fX07dmFyIEtmPS8oW1w6XC1cX10rKC4pKS9nLExmPS9ebW96KFtBLVpdKS8seWI9e21vdXNlbGVhdmU6Im1vdXNlb3V0Iixtb3VzZWVudGVyOiJtb3VzZW92ZXIifSxXYj1OKCJqcUxpdGUiKSxPZj0vXjwoW1x3LV0rKVxzKlwvPz4oPzo8XC9cMT58KSQvLFZiPS88fCYjP1x3KzsvLE1mPS88KFtcdzotXSspLyxOZj0vPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbXHc6LV0rKVtePl0qKVwvPi9naSwKamE9e29wdGlvbjpbMSwnPHNlbGVjdCBtdWx0aXBsZT0ibXVsdGlwbGUiPicsIjwvc2VsZWN0PiJdLHRoZWFkOlsxLCI8dGFibGU+IiwiPC90YWJsZT4iXSxjb2w6WzIsIjx0YWJsZT48Y29sZ3JvdXA+IiwiPC9jb2xncm91cD48L3RhYmxlPiJdLHRyOlsyLCI8dGFibGU+PHRib2R5PiIsIjwvdGJvZHk+PC90YWJsZT4iXSx0ZDpbMywiPHRhYmxlPjx0Ym9keT48dHI+IiwiPC90cj48L3Rib2R5PjwvdGFibGU+Il0sX2RlZmF1bHQ6WzAsIiIsIiJdfTtqYS5vcHRncm91cD1qYS5vcHRpb247amEudGJvZHk9amEudGZvb3Q9amEuY29sZ3JvdXA9amEuY2FwdGlvbj1qYS50aGVhZDtqYS50aD1qYS50ZDt2YXIgVWY9Qy5Ob2RlLnByb3RvdHlwZS5jb250YWluc3x8ZnVuY3Rpb24oYSl7cmV0dXJuISEodGhpcy5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihhKSYxNil9LE9hPU8ucHJvdG90eXBlPXtyZWFkeTpmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7ZHx8KGQ9ITAsYSgpKX12YXIgZD0hMTsiY29tcGxldGUiPT09CkMuZG9jdW1lbnQucmVhZHlTdGF0ZT9DLnNldFRpbWVvdXQoYik6KHRoaXMub24oIkRPTUNvbnRlbnRMb2FkZWQiLGIpLE8oQykub24oImxvYWQiLGIpKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXt2YXIgYT1bXTtxKHRoaXMsZnVuY3Rpb24oYil7YS5wdXNoKCIiK2IpfSk7cmV0dXJuIlsiK2Euam9pbigiLCAiKSsiXSJ9LGVxOmZ1bmN0aW9uKGEpe3JldHVybiAwPD1hP0YodGhpc1thXSk6Rih0aGlzW3RoaXMubGVuZ3RoK2FdKX0sbGVuZ3RoOjAscHVzaDpEZyxzb3J0OltdLnNvcnQsc3BsaWNlOltdLnNwbGljZX0sRWI9e307cSgibXVsdGlwbGUgc2VsZWN0ZWQgY2hlY2tlZCBkaXNhYmxlZCByZWFkT25seSByZXF1aXJlZCBvcGVuIi5zcGxpdCgiICIpLGZ1bmN0aW9uKGEpe0ViW1EoYSldPWF9KTt2YXIgVmM9e307cSgiaW5wdXQgc2VsZWN0IG9wdGlvbiB0ZXh0YXJlYSBidXR0b24gZm9ybSBkZXRhaWxzIi5zcGxpdCgiICIpLGZ1bmN0aW9uKGEpe1ZjW2FdPSEwfSk7dmFyIGJkPXtuZ01pbmxlbmd0aDoibWlubGVuZ3RoIiwKbmdNYXhsZW5ndGg6Im1heGxlbmd0aCIsbmdNaW46Im1pbiIsbmdNYXg6Im1heCIsbmdQYXR0ZXJuOiJwYXR0ZXJuIn07cSh7ZGF0YTpZYixyZW1vdmVEYXRhOmViLGhhc0RhdGE6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiIGluIGZiW2EubmczMzldKXJldHVybiEwO3JldHVybiExfSxjbGVhbkRhdGE6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsZD1hLmxlbmd0aDtiPGQ7YisrKWViKGFbYl0pfX0sZnVuY3Rpb24oYSxiKXtPW2JdPWF9KTtxKHtkYXRhOlliLGluaGVyaXRlZERhdGE6Q2Isc2NvcGU6ZnVuY3Rpb24oYSl7cmV0dXJuIEYuZGF0YShhLCIkc2NvcGUiKXx8Q2IoYS5wYXJlbnROb2RlfHxhLFsiJGlzb2xhdGVTY29wZSIsIiRzY29wZSJdKX0saXNvbGF0ZVNjb3BlOmZ1bmN0aW9uKGEpe3JldHVybiBGLmRhdGEoYSwiJGlzb2xhdGVTY29wZSIpfHxGLmRhdGEoYSwiJGlzb2xhdGVTY29wZU5vVGVtcGxhdGUiKX0sY29udHJvbGxlcjpTYyxpbmplY3RvcjpmdW5jdGlvbihhKXtyZXR1cm4gQ2IoYSwKIiRpbmplY3RvciIpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGEsYil7YS5yZW1vdmVBdHRyaWJ1dGUoYil9LGhhc0NsYXNzOnpiLGNzczpmdW5jdGlvbihhLGIsZCl7Yj1kYihiKTtpZih3KGQpKWEuc3R5bGVbYl09ZDtlbHNlIHJldHVybiBhLnN0eWxlW2JdfSxhdHRyOmZ1bmN0aW9uKGEsYixkKXt2YXIgYz1hLm5vZGVUeXBlO2lmKGMhPT1NYSYmMiE9PWMmJjghPT1jKWlmKGM9UShiKSxFYltjXSlpZih3KGQpKWQ/KGFbYl09ITAsYS5zZXRBdHRyaWJ1dGUoYixjKSk6KGFbYl09ITEsYS5yZW1vdmVBdHRyaWJ1dGUoYykpO2Vsc2UgcmV0dXJuIGFbYl18fChhLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKGIpfHxBKS5zcGVjaWZpZWQ/Yzp2b2lkIDA7ZWxzZSBpZih3KGQpKWEuc2V0QXR0cmlidXRlKGIsZCk7ZWxzZSBpZihhLmdldEF0dHJpYnV0ZSlyZXR1cm4gYT1hLmdldEF0dHJpYnV0ZShiLDIpLG51bGw9PT1hP3ZvaWQgMDphfSxwcm9wOmZ1bmN0aW9uKGEsYixkKXtpZih3KGQpKWFbYl09CmQ7ZWxzZSByZXR1cm4gYVtiXX0sdGV4dDpmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxkKXtpZih5KGQpKXt2YXIgYz1hLm5vZGVUeXBlO3JldHVybiAxPT09Y3x8Yz09PU1hP2EudGV4dENvbnRlbnQ6IiJ9YS50ZXh0Q29udGVudD1kfWEuJGR2PSIiO3JldHVybiBhfSgpLHZhbDpmdW5jdGlvbihhLGIpe2lmKHkoYikpe2lmKGEubXVsdGlwbGUmJiJzZWxlY3QiPT09d2EoYSkpe3ZhciBkPVtdO3EoYS5vcHRpb25zLGZ1bmN0aW9uKGEpe2Euc2VsZWN0ZWQmJmQucHVzaChhLnZhbHVlfHxhLnRleHQpfSk7cmV0dXJuIDA9PT1kLmxlbmd0aD9udWxsOmR9cmV0dXJuIGEudmFsdWV9YS52YWx1ZT1ifSxodG1sOmZ1bmN0aW9uKGEsYil7aWYoeShiKSlyZXR1cm4gYS5pbm5lckhUTUw7d2IoYSwhMCk7YS5pbm5lckhUTUw9Yn0sZW1wdHk6VGN9LGZ1bmN0aW9uKGEsYil7Ty5wcm90b3R5cGVbYl09ZnVuY3Rpb24oYixjKXt2YXIgZSxmLGc9dGhpcy5sZW5ndGg7aWYoYSE9PVRjJiZ5KDI9PWEubGVuZ3RoJiYKYSE9PXpiJiZhIT09U2M/YjpjKSl7aWYoRChiKSl7Zm9yKGU9MDtlPGc7ZSsrKWlmKGE9PT1ZYilhKHRoaXNbZV0sYik7ZWxzZSBmb3IoZiBpbiBiKWEodGhpc1tlXSxmLGJbZl0pO3JldHVybiB0aGlzfWU9YS4kZHY7Zz15KGUpP01hdGgubWluKGcsMSk6Zztmb3IoZj0wO2Y8ZztmKyspe3ZhciBoPWEodGhpc1tmXSxiLGMpO2U9ZT9lK2g6aH1yZXR1cm4gZX1mb3IoZT0wO2U8ZztlKyspYSh0aGlzW2VdLGIsYyk7cmV0dXJuIHRoaXN9fSk7cSh7cmVtb3ZlRGF0YTplYixvbjpmdW5jdGlvbihhLGIsZCxjKXtpZih3KGMpKXRocm93IFdiKCJvbmFyZ3MiKTtpZihOYyhhKSl7Yz14YihhLCEwKTt2YXIgZT1jLmV2ZW50cyxmPWMuaGFuZGxlO2Z8fChmPWMuaGFuZGxlPVJmKGEsZSkpO2M9MDw9Yi5pbmRleE9mKCIgIik/Yi5zcGxpdCgiICIpOltiXTtmb3IodmFyIGc9Yy5sZW5ndGgsaD1mdW5jdGlvbihiLGMsZyl7dmFyIGg9ZVtiXTtofHwoaD1lW2JdPVtdLGguc3BlY2lhbEhhbmRsZXJXcmFwcGVyPQpjLCIkZGVzdHJveSI9PT1ifHxnfHxhLmFkZEV2ZW50TGlzdGVuZXIoYixmLCExKSk7aC5wdXNoKGQpfTtnLS07KWI9Y1tnXSx5YltiXT8oaCh5YltiXSxUZiksaChiLHZvaWQgMCwhMCkpOmgoYil9fSxvZmY6UmMsb25lOmZ1bmN0aW9uKGEsYixkKXthPUYoYSk7YS5vbihiLGZ1bmN0aW9uIGUoKXthLm9mZihiLGQpO2Eub2ZmKGIsZSl9KTthLm9uKGIsZCl9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKGEsYil7dmFyIGQsYz1hLnBhcmVudE5vZGU7d2IoYSk7cShuZXcgTyhiKSxmdW5jdGlvbihiKXtkP2MuaW5zZXJ0QmVmb3JlKGIsZC5uZXh0U2libGluZyk6Yy5yZXBsYWNlQ2hpbGQoYixhKTtkPWJ9KX0sY2hpbGRyZW46ZnVuY3Rpb24oYSl7dmFyIGI9W107cShhLmNoaWxkTm9kZXMsZnVuY3Rpb24oYSl7MT09PWEubm9kZVR5cGUmJmIucHVzaChhKX0pO3JldHVybiBifSxjb250ZW50czpmdW5jdGlvbihhKXtyZXR1cm4gYS5jb250ZW50RG9jdW1lbnR8fGEuY2hpbGROb2Rlc3x8W119LGFwcGVuZDpmdW5jdGlvbihhLApiKXt2YXIgZD1hLm5vZGVUeXBlO2lmKDE9PT1kfHwxMT09PWQpe2I9bmV3IE8oYik7Zm9yKHZhciBkPTAsYz1iLmxlbmd0aDtkPGM7ZCsrKWEuYXBwZW5kQ2hpbGQoYltkXSl9fSxwcmVwZW5kOmZ1bmN0aW9uKGEsYil7aWYoMT09PWEubm9kZVR5cGUpe3ZhciBkPWEuZmlyc3RDaGlsZDtxKG5ldyBPKGIpLGZ1bmN0aW9uKGIpe2EuaW5zZXJ0QmVmb3JlKGIsZCl9KX19LHdyYXA6ZnVuY3Rpb24oYSxiKXtQYyhhLEYoYikuZXEoMCkuY2xvbmUoKVswXSl9LHJlbW92ZTpEYixkZXRhY2g6ZnVuY3Rpb24oYSl7RGIoYSwhMCl9LGFmdGVyOmZ1bmN0aW9uKGEsYil7dmFyIGQ9YSxjPWEucGFyZW50Tm9kZTtiPW5ldyBPKGIpO2Zvcih2YXIgZT0wLGY9Yi5sZW5ndGg7ZTxmO2UrKyl7dmFyIGc9YltlXTtjLmluc2VydEJlZm9yZShnLGQubmV4dFNpYmxpbmcpO2Q9Z319LGFkZENsYXNzOkJiLHJlbW92ZUNsYXNzOkFiLHRvZ2dsZUNsYXNzOmZ1bmN0aW9uKGEsYixkKXtiJiZxKGIuc3BsaXQoIiAiKSwKZnVuY3Rpb24oYil7dmFyIGU9ZDt5KGUpJiYoZT0hemIoYSxiKSk7KGU/QmI6QWIpKGEsYil9KX0scGFyZW50OmZ1bmN0aW9uKGEpe3JldHVybihhPWEucGFyZW50Tm9kZSkmJjExIT09YS5ub2RlVHlwZT9hOm51bGx9LG5leHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEubmV4dEVsZW1lbnRTaWJsaW5nfSxmaW5kOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWU/YS5nZXRFbGVtZW50c0J5VGFnTmFtZShiKTpbXX0sY2xvbmU6WGIsdHJpZ2dlckhhbmRsZXI6ZnVuY3Rpb24oYSxiLGQpe3ZhciBjLGUsZj1iLnR5cGV8fGIsZz14YihhKTtpZihnPShnPWcmJmcuZXZlbnRzKSYmZ1tmXSljPXtwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe3RoaXMuZGVmYXVsdFByZXZlbnRlZD0hMH0saXNEZWZhdWx0UHJldmVudGVkOmZ1bmN0aW9uKCl7cmV0dXJuITA9PT10aGlzLmRlZmF1bHRQcmV2ZW50ZWR9LHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3RoaXMuaW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkPQohMH0saXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hMD09PXRoaXMuaW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkfSxzdG9wUHJvcGFnYXRpb246QSx0eXBlOmYsdGFyZ2V0OmF9LGIudHlwZSYmKGM9UyhjLGIpKSxiPWlhKGcpLGU9ZD9bY10uY29uY2F0KGQpOltjXSxxKGIsZnVuY3Rpb24oYil7Yy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpfHxiLmFwcGx5KGEsZSl9KX19LGZ1bmN0aW9uKGEsYil7Ty5wcm90b3R5cGVbYl09ZnVuY3Rpb24oYixjLGUpe2Zvcih2YXIgZixnPTAsaD10aGlzLmxlbmd0aDtnPGg7ZysrKXkoZik/KGY9YSh0aGlzW2ddLGIsYyxlKSx3KGYpJiYoZj1GKGYpKSk6UWMoZixhKHRoaXNbZ10sYixjLGUpKTtyZXR1cm4gdyhmKT9mOnRoaXN9O08ucHJvdG90eXBlLmJpbmQ9Ty5wcm90b3R5cGUub247Ty5wcm90b3R5cGUudW5iaW5kPU8ucHJvdG90eXBlLm9mZn0pO1JhLnByb3RvdHlwZT17cHV0OmZ1bmN0aW9uKGEsCmIpe3RoaXNbQ2EoYSx0aGlzLm5leHRVaWQpXT1ifSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXNbQ2EoYSx0aGlzLm5leHRVaWQpXX0scmVtb3ZlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXNbYT1DYShhLHRoaXMubmV4dFVpZCldO2RlbGV0ZSB0aGlzW2FdO3JldHVybiBifX07dmFyIElmPVtmdW5jdGlvbigpe3RoaXMuJGdldD1bZnVuY3Rpb24oKXtyZXR1cm4gUmF9XX1dLFdmPS9eKFteXChdKz8pPT4vLFhmPS9eW15cKF0qXChccyooW15cKV0qKVwpL20sRWc9LywvLEZnPS9eXHMqKF8/KShcUys/KVwxXHMqJC8sVmY9LygoXC9cLy4qJCl8KFwvXCpbXHNcU10qP1wqXC8pKS9tZyxIYT1OKCIkaW5qZWN0b3IiKTtjYi4kJGFubm90YXRlPWZ1bmN0aW9uKGEsYixkKXt2YXIgYztpZigiZnVuY3Rpb24iPT09dHlwZW9mIGEpe2lmKCEoYz1hLiRpbmplY3QpKXtjPVtdO2lmKGEubGVuZ3RoKXtpZihiKXRocm93IEcoZCkmJmR8fChkPWEubmFtZXx8WWYoYSkpLEhhKCJzdHJpY3RkaSIsZCk7CmI9V2MoYSk7cShiWzFdLnNwbGl0KEVnKSxmdW5jdGlvbihhKXthLnJlcGxhY2UoRmcsZnVuY3Rpb24oYSxiLGQpe2MucHVzaChkKX0pfSl9YS4kaW5qZWN0PWN9fWVsc2UgTChhKT8oYj1hLmxlbmd0aC0xLFBhKGFbYl0sImZuIiksYz1hLnNsaWNlKDAsYikpOlBhKGEsImZuIiwhMCk7cmV0dXJuIGN9O3ZhciBSZD1OKCIkYW5pbWF0ZSIpLCRlPWZ1bmN0aW9uKCl7dGhpcy4kZ2V0PUF9LGFmPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFJhLGI9W107dGhpcy4kZ2V0PVsiJCRBbmltYXRlUnVubmVyIiwiJHJvb3RTY29wZSIsZnVuY3Rpb24oZCxjKXtmdW5jdGlvbiBlKGEsYixjKXt2YXIgZD0hMTtiJiYoYj1HKGIpP2Iuc3BsaXQoIiAiKTpMKGIpP2I6W10scShiLGZ1bmN0aW9uKGIpe2ImJihkPSEwLGFbYl09Yyl9KSk7cmV0dXJuIGR9ZnVuY3Rpb24gZigpe3EoYixmdW5jdGlvbihiKXt2YXIgYz1hLmdldChiKTtpZihjKXt2YXIgZD1aZihiLmF0dHIoImNsYXNzIikpLGU9IiIsZj0iIjtxKGMsCmZ1bmN0aW9uKGEsYil7YSE9PSEhZFtiXSYmKGE/ZSs9KGUubGVuZ3RoPyIgIjoiIikrYjpmKz0oZi5sZW5ndGg/IiAiOiIiKStiKX0pO3EoYixmdW5jdGlvbihhKXtlJiZCYihhLGUpO2YmJkFiKGEsZil9KTthLnJlbW92ZShiKX19KTtiLmxlbmd0aD0wfXJldHVybntlbmFibGVkOkEsb246QSxvZmY6QSxwaW46QSxwdXNoOmZ1bmN0aW9uKGcsaCxrLGwpe2wmJmwoKTtrPWt8fHt9O2suZnJvbSYmZy5jc3Moay5mcm9tKTtrLnRvJiZnLmNzcyhrLnRvKTtpZihrLmFkZENsYXNzfHxrLnJlbW92ZUNsYXNzKWlmKGg9ay5hZGRDbGFzcyxsPWsucmVtb3ZlQ2xhc3Msaz1hLmdldChnKXx8e30saD1lKGssaCwhMCksbD1lKGssbCwhMSksaHx8bClhLnB1dChnLGspLGIucHVzaChnKSwxPT09Yi5sZW5ndGgmJmMuJCRwb3N0RGlnZXN0KGYpO2c9bmV3IGQ7Zy5jb21wbGV0ZSgpO3JldHVybiBnfX19XX0sWWU9WyIkcHJvdmlkZSIsZnVuY3Rpb24oYSl7dmFyIGI9dGhpczt0aGlzLiQkcmVnaXN0ZXJlZEFuaW1hdGlvbnM9Ck9iamVjdC5jcmVhdGUobnVsbCk7dGhpcy5yZWdpc3Rlcj1mdW5jdGlvbihkLGMpe2lmKGQmJiIuIiE9PWQuY2hhckF0KDApKXRocm93IFJkKCJub3Rjc2VsIixkKTt2YXIgZT1kKyItYW5pbWF0aW9uIjtiLiQkcmVnaXN0ZXJlZEFuaW1hdGlvbnNbZC5zdWJzdHIoMSldPWU7YS5mYWN0b3J5KGUsYyl9O3RoaXMuY2xhc3NOYW1lRmlsdGVyPWZ1bmN0aW9uKGEpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoJiYodGhpcy4kJGNsYXNzTmFtZUZpbHRlcj1hIGluc3RhbmNlb2YgUmVnRXhwP2E6bnVsbCkmJi8oXHMrfFwvKW5nLWFuaW1hdGUoXHMrfFwvKS8udGVzdCh0aGlzLiQkY2xhc3NOYW1lRmlsdGVyLnRvU3RyaW5nKCkpKXRocm93IFJkKCJub25nY2xzIiwibmctYW5pbWF0ZSIpO3JldHVybiB0aGlzLiQkY2xhc3NOYW1lRmlsdGVyfTt0aGlzLiRnZXQ9WyIkJGFuaW1hdGVRdWV1ZSIsZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGMsZCl7aWYoZCl7dmFyIGg7YTp7Zm9yKGg9MDtoPGQubGVuZ3RoO2grKyl7dmFyIGs9CmRbaF07aWYoMT09PWsubm9kZVR5cGUpe2g9azticmVhayBhfX1oPXZvaWQgMH0haHx8aC5wYXJlbnROb2RlfHxoLnByZXZpb3VzRWxlbWVudFNpYmxpbmd8fChkPW51bGwpfWQ/ZC5hZnRlcihhKTpjLnByZXBlbmQoYSl9cmV0dXJue29uOmEub24sb2ZmOmEub2ZmLHBpbjphLnBpbixlbmFibGVkOmEuZW5hYmxlZCxjYW5jZWw6ZnVuY3Rpb24oYSl7YS5lbmQmJmEuZW5kKCl9LGVudGVyOmZ1bmN0aW9uKGUsZixnLGgpe2Y9ZiYmRihmKTtnPWcmJkYoZyk7Zj1mfHxnLnBhcmVudCgpO2IoZSxmLGcpO3JldHVybiBhLnB1c2goZSwiZW50ZXIiLElhKGgpKX0sbW92ZTpmdW5jdGlvbihlLGYsZyxoKXtmPWYmJkYoZik7Zz1nJiZGKGcpO2Y9Znx8Zy5wYXJlbnQoKTtiKGUsZixnKTtyZXR1cm4gYS5wdXNoKGUsIm1vdmUiLElhKGgpKX0sbGVhdmU6ZnVuY3Rpb24oYixjKXtyZXR1cm4gYS5wdXNoKGIsImxlYXZlIixJYShjKSxmdW5jdGlvbigpe2IucmVtb3ZlKCl9KX0sYWRkQ2xhc3M6ZnVuY3Rpb24oYiwKYyxnKXtnPUlhKGcpO2cuYWRkQ2xhc3M9Z2IoZy5hZGRjbGFzcyxjKTtyZXR1cm4gYS5wdXNoKGIsImFkZENsYXNzIixnKX0scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYixjLGcpe2c9SWEoZyk7Zy5yZW1vdmVDbGFzcz1nYihnLnJlbW92ZUNsYXNzLGMpO3JldHVybiBhLnB1c2goYiwicmVtb3ZlQ2xhc3MiLGcpfSxzZXRDbGFzczpmdW5jdGlvbihiLGMsZyxoKXtoPUlhKGgpO2guYWRkQ2xhc3M9Z2IoaC5hZGRDbGFzcyxjKTtoLnJlbW92ZUNsYXNzPWdiKGgucmVtb3ZlQ2xhc3MsZyk7cmV0dXJuIGEucHVzaChiLCJzZXRDbGFzcyIsaCl9LGFuaW1hdGU6ZnVuY3Rpb24oYixjLGcsaCxrKXtrPUlhKGspO2suZnJvbT1rLmZyb20/UyhrLmZyb20sYyk6YztrLnRvPWsudG8/UyhrLnRvLGcpOmc7ay50ZW1wQ2xhc3Nlcz1nYihrLnRlbXBDbGFzc2VzLGh8fCJuZy1pbmxpbmUtYW5pbWF0ZSIpO3JldHVybiBhLnB1c2goYiwiYW5pbWF0ZSIsayl9fX1dfV0sY2Y9ZnVuY3Rpb24oKXt0aGlzLiRnZXQ9ClsiJCRyQUYiLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYil7ZC5wdXNoKGIpOzE8ZC5sZW5ndGh8fGEoZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPGQubGVuZ3RoO2ErKylkW2FdKCk7ZD1bXX0pfXZhciBkPVtdO3JldHVybiBmdW5jdGlvbigpe3ZhciBhPSExO2IoZnVuY3Rpb24oKXthPSEwfSk7cmV0dXJuIGZ1bmN0aW9uKGQpe2E/ZCgpOmIoZCl9fX1dfSxiZj1mdW5jdGlvbigpe3RoaXMuJGdldD1bIiRxIiwiJHNuaWZmZXIiLCIkJGFuaW1hdGVBc3luY1J1biIsIiRkb2N1bWVudCIsIiR0aW1lb3V0IixmdW5jdGlvbihhLGIsZCxjLGUpe2Z1bmN0aW9uIGYoYSl7dGhpcy5zZXRIb3N0KGEpO3ZhciBiPWQoKTt0aGlzLl9kb25lQ2FsbGJhY2tzPVtdO3RoaXMuX3RpY2s9ZnVuY3Rpb24oYSl7dmFyIGQ9Y1swXTtkJiZkLmhpZGRlbj9lKGEsMCwhMSk6YihhKX07dGhpcy5fc3RhdGU9MH1mLmNoYWluPWZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYygpe2lmKGQ9PT1hLmxlbmd0aCliKCEwKTsKZWxzZSBhW2RdKGZ1bmN0aW9uKGEpeyExPT09YT9iKCExKTooZCsrLGMoKSl9KX12YXIgZD0wO2MoKX07Zi5hbGw9ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGYpe2U9ZSYmZjsrK2Q9PT1hLmxlbmd0aCYmYihlKX12YXIgZD0wLGU9ITA7cShhLGZ1bmN0aW9uKGEpe2EuZG9uZShjKX0pfTtmLnByb3RvdHlwZT17c2V0SG9zdDpmdW5jdGlvbihhKXt0aGlzLmhvc3Q9YXx8e319LGRvbmU6ZnVuY3Rpb24oYSl7Mj09PXRoaXMuX3N0YXRlP2EoKTp0aGlzLl9kb25lQ2FsbGJhY2tzLnB1c2goYSl9LHByb2dyZXNzOkEsZ2V0UHJvbWlzZTpmdW5jdGlvbigpe2lmKCF0aGlzLnByb21pc2Upe3ZhciBiPXRoaXM7dGhpcy5wcm9taXNlPWEoZnVuY3Rpb24oYSxjKXtiLmRvbmUoZnVuY3Rpb24oYil7ITE9PT1iP2MoKTphKCl9KX0pfXJldHVybiB0aGlzLnByb21pc2V9LHRoZW46ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5nZXRQcm9taXNlKCkudGhlbihhLGIpfSwiY2F0Y2giOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdldFByb21pc2UoKVsiY2F0Y2giXShhKX0sCiJmaW5hbGx5IjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRQcm9taXNlKClbImZpbmFsbHkiXShhKX0scGF1c2U6ZnVuY3Rpb24oKXt0aGlzLmhvc3QucGF1c2UmJnRoaXMuaG9zdC5wYXVzZSgpfSxyZXN1bWU6ZnVuY3Rpb24oKXt0aGlzLmhvc3QucmVzdW1lJiZ0aGlzLmhvc3QucmVzdW1lKCl9LGVuZDpmdW5jdGlvbigpe3RoaXMuaG9zdC5lbmQmJnRoaXMuaG9zdC5lbmQoKTt0aGlzLl9yZXNvbHZlKCEwKX0sY2FuY2VsOmZ1bmN0aW9uKCl7dGhpcy5ob3N0LmNhbmNlbCYmdGhpcy5ob3N0LmNhbmNlbCgpO3RoaXMuX3Jlc29sdmUoITEpfSxjb21wbGV0ZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzOzA9PT1iLl9zdGF0ZSYmKGIuX3N0YXRlPTEsYi5fdGljayhmdW5jdGlvbigpe2IuX3Jlc29sdmUoYSl9KSl9LF9yZXNvbHZlOmZ1bmN0aW9uKGEpezIhPT10aGlzLl9zdGF0ZSYmKHEodGhpcy5fZG9uZUNhbGxiYWNrcyxmdW5jdGlvbihiKXtiKGEpfSksdGhpcy5fZG9uZUNhbGxiYWNrcy5sZW5ndGg9CjAsdGhpcy5fc3RhdGU9Mil9fTtyZXR1cm4gZn1dfSxaZT1mdW5jdGlvbigpe3RoaXMuJGdldD1bIiQkckFGIiwiJHEiLCIkJEFuaW1hdGVSdW5uZXIiLGZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gZnVuY3Rpb24oYixlKXtmdW5jdGlvbiBmKCl7YShmdW5jdGlvbigpe2cuYWRkQ2xhc3MmJihiLmFkZENsYXNzKGcuYWRkQ2xhc3MpLGcuYWRkQ2xhc3M9bnVsbCk7Zy5yZW1vdmVDbGFzcyYmKGIucmVtb3ZlQ2xhc3MoZy5yZW1vdmVDbGFzcyksZy5yZW1vdmVDbGFzcz1udWxsKTtnLnRvJiYoYi5jc3MoZy50byksZy50bz1udWxsKTtofHxrLmNvbXBsZXRlKCk7aD0hMH0pO3JldHVybiBrfXZhciBnPWV8fHt9O2cuJCRwcmVwYXJlZHx8KGc9cGEoZykpO2cuY2xlYW51cFN0eWxlcyYmKGcuZnJvbT1nLnRvPW51bGwpO2cuZnJvbSYmKGIuY3NzKGcuZnJvbSksZy5mcm9tPW51bGwpO3ZhciBoLGs9bmV3IGQ7cmV0dXJue3N0YXJ0OmYsZW5kOmZ9fX1dfSxnYT1OKCIkY29tcGlsZSIpLGJjPW5ldyBmdW5jdGlvbigpe307CkZjLiRpbmplY3Q9WyIkcHJvdmlkZSIsIiQkc2FuaXRpemVVcmlQcm92aWRlciJdO0ZiLnByb3RvdHlwZS5pc0ZpcnN0Q2hhbmdlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJldmlvdXNWYWx1ZT09PWJjfTt2YXIgWWM9L14oKD86eHxkYXRhKVtcOlwtX10pL2ksY2c9TigiJGNvbnRyb2xsZXIiKSxjZD0vXihcUyspKFxzK2FzXHMrKFtcdyRdKykpPyQvLGpmPWZ1bmN0aW9uKCl7dGhpcy4kZ2V0PVsiJGRvY3VtZW50IixmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7Yj8hYi5ub2RlVHlwZSYmYiBpbnN0YW5jZW9mIEYmJihiPWJbMF0pOmI9YVswXS5ib2R5O3JldHVybiBiLm9mZnNldFdpZHRoKzF9fV19LGRkPSJhcHBsaWNhdGlvbi9qc29uIixlYz17IkNvbnRlbnQtVHlwZSI6ZGQrIjtjaGFyc2V0PXV0Zi04In0sZWc9L15cW3xeXHsoPyFceykvLGZnPXsiWyI6L10kLywieyI6L30kL30sZGc9L15cKVxdXH0nLD9cbi8sR2c9TigiJGh0dHAiKSxoZD1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXt0aHJvdyBHZygibGVnYWN5IiwKYSk7fX0sS2E9Y2EuJGludGVycG9sYXRlTWluRXJyPU4oIiRpbnRlcnBvbGF0ZSIpO0thLnRocm93Tm9jb25jYXQ9ZnVuY3Rpb24oYSl7dGhyb3cgS2EoIm5vY29uY2F0IixhKTt9O0thLmludGVycj1mdW5jdGlvbihhLGIpe3JldHVybiBLYSgiaW50ZXJyIixhLGIudG9TdHJpbmcoKSl9O3ZhciByZj1mdW5jdGlvbigpe3RoaXMuJGdldD1bIiR3aW5kb3ciLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7dmFyIGI9ZnVuY3Rpb24oYSl7Yi5kYXRhPWE7Yi5jYWxsZWQ9ITB9O2IuaWQ9YTtyZXR1cm4gYn12YXIgZD1hLmFuZ3VsYXIuY2FsbGJhY2tzLGM9e307cmV0dXJue2NyZWF0ZUNhbGxiYWNrOmZ1bmN0aW9uKGEpe2E9Il8iKyhkLiQkY291bnRlcisrKS50b1N0cmluZygzNik7dmFyIGY9ImFuZ3VsYXIuY2FsbGJhY2tzLiIrYSxnPWIoYSk7Y1tmXT1kW2FdPWc7cmV0dXJuIGZ9LHdhc0NhbGxlZDpmdW5jdGlvbihhKXtyZXR1cm4gY1thXS5jYWxsZWR9LGdldFJlc3BvbnNlOmZ1bmN0aW9uKGEpe3JldHVybiBjW2FdLmRhdGF9LApyZW1vdmVDYWxsYmFjazpmdW5jdGlvbihhKXtkZWxldGUgZFtjW2FdLmlkXTtkZWxldGUgY1thXX19fV19LEhnPS9eKFteXD8jXSopKFw/KFteI10qKSk/KCMoLiopKT8kLyxoZz17aHR0cDo4MCxodHRwczo0NDMsZnRwOjIxfSxHYj1OKCIkbG9jYXRpb24iKSxJZz17JCRhYnNVcmw6IiIsJCRodG1sNTohMSwkJHJlcGxhY2U6ITEsYWJzVXJsOkhiKCIkJGFic1VybCIpLHVybDpmdW5jdGlvbihhKXtpZih5KGEpKXJldHVybiB0aGlzLiQkdXJsO3ZhciBiPUhnLmV4ZWMoYSk7KGJbMV18fCIiPT09YSkmJnRoaXMucGF0aChkZWNvZGVVUklDb21wb25lbnQoYlsxXSkpOyhiWzJdfHxiWzFdfHwiIj09PWEpJiZ0aGlzLnNlYXJjaChiWzNdfHwiIik7dGhpcy5oYXNoKGJbNV18fCIiKTtyZXR1cm4gdGhpc30scHJvdG9jb2w6SGIoIiQkcHJvdG9jb2wiKSxob3N0OkhiKCIkJGhvc3QiKSxwb3J0OkhiKCIkJHBvcnQiKSxwYXRoOm1kKCIkJHBhdGgiLGZ1bmN0aW9uKGEpe2E9bnVsbCE9PWE/YS50b1N0cmluZygpOgoiIjtyZXR1cm4iLyI9PWEuY2hhckF0KDApP2E6Ii8iK2F9KSxzZWFyY2g6ZnVuY3Rpb24oYSxiKXtzd2l0Y2goYXJndW1lbnRzLmxlbmd0aCl7Y2FzZSAwOnJldHVybiB0aGlzLiQkc2VhcmNoO2Nhc2UgMTppZihHKGEpfHxUKGEpKWE9YS50b1N0cmluZygpLHRoaXMuJCRzZWFyY2g9QWMoYSk7ZWxzZSBpZihEKGEpKWE9cGEoYSx7fSkscShhLGZ1bmN0aW9uKGIsYyl7bnVsbD09YiYmZGVsZXRlIGFbY119KSx0aGlzLiQkc2VhcmNoPWE7ZWxzZSB0aHJvdyBHYigiaXNyY2hhcmciKTticmVhaztkZWZhdWx0OnkoYil8fG51bGw9PT1iP2RlbGV0ZSB0aGlzLiQkc2VhcmNoW2FdOnRoaXMuJCRzZWFyY2hbYV09Yn10aGlzLiQkY29tcG9zZSgpO3JldHVybiB0aGlzfSxoYXNoOm1kKCIkJGhhc2giLGZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT09YT9hLnRvU3RyaW5nKCk6IiJ9KSxyZXBsYWNlOmZ1bmN0aW9uKCl7dGhpcy4kJHJlcGxhY2U9ITA7cmV0dXJuIHRoaXN9fTtxKFtsZCxoYyxnY10sCmZ1bmN0aW9uKGEpe2EucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoSWcpO2EucHJvdG90eXBlLnN0YXRlPWZ1bmN0aW9uKGIpe2lmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVybiB0aGlzLiQkc3RhdGU7aWYoYSE9PWdjfHwhdGhpcy4kJGh0bWw1KXRocm93IEdiKCJub3N0YXRlIik7dGhpcy4kJHN0YXRlPXkoYik/bnVsbDpiO3JldHVybiB0aGlzfX0pO3ZhciBYPU4oIiRwYXJzZSIpLGpnPUZ1bmN0aW9uLnByb3RvdHlwZS5jYWxsLGtnPUZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseSxsZz1GdW5jdGlvbi5wcm90b3R5cGUuYmluZCxPYj1VKCk7cSgiKyAtICogLyAlID09PSAhPT0gPT0gIT0gPCA+IDw9ID49ICYmIHx8ICEgPSB8Ii5zcGxpdCgiICIpLGZ1bmN0aW9uKGEpe09iW2FdPSEwfSk7dmFyIEpnPXtuOiJcbiIsZjoiXGYiLHI6IlxyIix0OiJcdCIsdjoiXHYiLCInIjoiJyIsJyInOiciJ30samM9ZnVuY3Rpb24oYSl7dGhpcy5vcHRpb25zPWF9O2pjLnByb3RvdHlwZT17Y29uc3RydWN0b3I6amMsCmxleDpmdW5jdGlvbihhKXt0aGlzLnRleHQ9YTt0aGlzLmluZGV4PTA7Zm9yKHRoaXMudG9rZW5zPVtdO3RoaXMuaW5kZXg8dGhpcy50ZXh0Lmxlbmd0aDspaWYoYT10aGlzLnRleHQuY2hhckF0KHRoaXMuaW5kZXgpLCciJz09PWF8fCInIj09PWEpdGhpcy5yZWFkU3RyaW5nKGEpO2Vsc2UgaWYodGhpcy5pc051bWJlcihhKXx8Ii4iPT09YSYmdGhpcy5pc051bWJlcih0aGlzLnBlZWsoKSkpdGhpcy5yZWFkTnVtYmVyKCk7ZWxzZSBpZih0aGlzLmlzSWRlbnRpZmllclN0YXJ0KHRoaXMucGVla011bHRpY2hhcigpKSl0aGlzLnJlYWRJZGVudCgpO2Vsc2UgaWYodGhpcy5pcyhhLCIoKXt9W10uLDs6PyIpKXRoaXMudG9rZW5zLnB1c2goe2luZGV4OnRoaXMuaW5kZXgsdGV4dDphfSksdGhpcy5pbmRleCsrO2Vsc2UgaWYodGhpcy5pc1doaXRlc3BhY2UoYSkpdGhpcy5pbmRleCsrO2Vsc2V7dmFyIGI9YSt0aGlzLnBlZWsoKSxkPWIrdGhpcy5wZWVrKDIpLGM9T2JbYl0sZT1PYltkXTtPYlthXXx8CmN8fGU/KGE9ZT9kOmM/YjphLHRoaXMudG9rZW5zLnB1c2goe2luZGV4OnRoaXMuaW5kZXgsdGV4dDphLG9wZXJhdG9yOiEwfSksdGhpcy5pbmRleCs9YS5sZW5ndGgpOnRoaXMudGhyb3dFcnJvcigiVW5leHBlY3RlZCBuZXh0IGNoYXJhY3RlciAiLHRoaXMuaW5kZXgsdGhpcy5pbmRleCsxKX1yZXR1cm4gdGhpcy50b2tlbnN9LGlzOmZ1bmN0aW9uKGEsYil7cmV0dXJuLTEhPT1iLmluZGV4T2YoYSl9LHBlZWs6ZnVuY3Rpb24oYSl7YT1hfHwxO3JldHVybiB0aGlzLmluZGV4K2E8dGhpcy50ZXh0Lmxlbmd0aD90aGlzLnRleHQuY2hhckF0KHRoaXMuaW5kZXgrYSk6ITF9LGlzTnVtYmVyOmZ1bmN0aW9uKGEpe3JldHVybiIwIjw9YSYmIjkiPj1hJiYic3RyaW5nIj09PXR5cGVvZiBhfSxpc1doaXRlc3BhY2U6ZnVuY3Rpb24oYSl7cmV0dXJuIiAiPT09YXx8IlxyIj09PWF8fCJcdCI9PT1hfHwiXG4iPT09YXx8Ilx2Ij09PWF8fCJcdTAwYTAiPT09YX0saXNJZGVudGlmaWVyU3RhcnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMub3B0aW9ucy5pc0lkZW50aWZpZXJTdGFydD8KdGhpcy5vcHRpb25zLmlzSWRlbnRpZmllclN0YXJ0KGEsdGhpcy5jb2RlUG9pbnRBdChhKSk6dGhpcy5pc1ZhbGlkSWRlbnRpZmllclN0YXJ0KGEpfSxpc1ZhbGlkSWRlbnRpZmllclN0YXJ0OmZ1bmN0aW9uKGEpe3JldHVybiJhIjw9YSYmInoiPj1hfHwiQSI8PWEmJiJaIj49YXx8Il8iPT09YXx8IiQiPT09YX0saXNJZGVudGlmaWVyQ29udGludWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMub3B0aW9ucy5pc0lkZW50aWZpZXJDb250aW51ZT90aGlzLm9wdGlvbnMuaXNJZGVudGlmaWVyQ29udGludWUoYSx0aGlzLmNvZGVQb2ludEF0KGEpKTp0aGlzLmlzVmFsaWRJZGVudGlmaWVyQ29udGludWUoYSl9LGlzVmFsaWRJZGVudGlmaWVyQ29udGludWU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5pc1ZhbGlkSWRlbnRpZmllclN0YXJ0KGEsYil8fHRoaXMuaXNOdW1iZXIoYSl9LGNvZGVQb2ludEF0OmZ1bmN0aW9uKGEpe3JldHVybiAxPT09YS5sZW5ndGg/YS5jaGFyQ29kZUF0KDApOgooYS5jaGFyQ29kZUF0KDApPDwxMCkrYS5jaGFyQ29kZUF0KDEpLTU2NjEzODg4fSxwZWVrTXVsdGljaGFyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50ZXh0LmNoYXJBdCh0aGlzLmluZGV4KSxiPXRoaXMucGVlaygpO2lmKCFiKXJldHVybiBhO3ZhciBkPWEuY2hhckNvZGVBdCgwKSxjPWIuY2hhckNvZGVBdCgwKTtyZXR1cm4gNTUyOTY8PWQmJjU2MzE5Pj1kJiY1NjMyMDw9YyYmNTczNDM+PWM/YStiOmF9LGlzRXhwT3BlcmF0b3I6ZnVuY3Rpb24oYSl7cmV0dXJuIi0iPT09YXx8IisiPT09YXx8dGhpcy5pc051bWJlcihhKX0sdGhyb3dFcnJvcjpmdW5jdGlvbihhLGIsZCl7ZD1kfHx0aGlzLmluZGV4O2I9dyhiKT8icyAiK2IrIi0iK3RoaXMuaW5kZXgrIiBbIit0aGlzLnRleHQuc3Vic3RyaW5nKGIsZCkrIl0iOiIgIitkO3Rocm93IFgoImxleGVyciIsYSxiLHRoaXMudGV4dCk7fSxyZWFkTnVtYmVyOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPSIiLGI9dGhpcy5pbmRleDt0aGlzLmluZGV4PAp0aGlzLnRleHQubGVuZ3RoOyl7dmFyIGQ9USh0aGlzLnRleHQuY2hhckF0KHRoaXMuaW5kZXgpKTtpZigiLiI9PWR8fHRoaXMuaXNOdW1iZXIoZCkpYSs9ZDtlbHNle3ZhciBjPXRoaXMucGVlaygpO2lmKCJlIj09ZCYmdGhpcy5pc0V4cE9wZXJhdG9yKGMpKWErPWQ7ZWxzZSBpZih0aGlzLmlzRXhwT3BlcmF0b3IoZCkmJmMmJnRoaXMuaXNOdW1iZXIoYykmJiJlIj09YS5jaGFyQXQoYS5sZW5ndGgtMSkpYSs9ZDtlbHNlIGlmKCF0aGlzLmlzRXhwT3BlcmF0b3IoZCl8fGMmJnRoaXMuaXNOdW1iZXIoYyl8fCJlIiE9YS5jaGFyQXQoYS5sZW5ndGgtMSkpYnJlYWs7ZWxzZSB0aGlzLnRocm93RXJyb3IoIkludmFsaWQgZXhwb25lbnQiKX10aGlzLmluZGV4Kyt9dGhpcy50b2tlbnMucHVzaCh7aW5kZXg6Yix0ZXh0OmEsY29uc3RhbnQ6ITAsdmFsdWU6TnVtYmVyKGEpfSl9LHJlYWRJZGVudDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuaW5kZXg7Zm9yKHRoaXMuaW5kZXgrPXRoaXMucGVla011bHRpY2hhcigpLmxlbmd0aDt0aGlzLmluZGV4PAp0aGlzLnRleHQubGVuZ3RoOyl7dmFyIGI9dGhpcy5wZWVrTXVsdGljaGFyKCk7aWYoIXRoaXMuaXNJZGVudGlmaWVyQ29udGludWUoYikpYnJlYWs7dGhpcy5pbmRleCs9Yi5sZW5ndGh9dGhpcy50b2tlbnMucHVzaCh7aW5kZXg6YSx0ZXh0OnRoaXMudGV4dC5zbGljZShhLHRoaXMuaW5kZXgpLGlkZW50aWZpZXI6ITB9KX0scmVhZFN0cmluZzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmluZGV4O3RoaXMuaW5kZXgrKztmb3IodmFyIGQ9IiIsYz1hLGU9ITE7dGhpcy5pbmRleDx0aGlzLnRleHQubGVuZ3RoOyl7dmFyIGY9dGhpcy50ZXh0LmNoYXJBdCh0aGlzLmluZGV4KSxjPWMrZjtpZihlKSJ1Ij09PWY/KGU9dGhpcy50ZXh0LnN1YnN0cmluZyh0aGlzLmluZGV4KzEsdGhpcy5pbmRleCs1KSxlLm1hdGNoKC9bXGRhLWZdezR9L2kpfHx0aGlzLnRocm93RXJyb3IoIkludmFsaWQgdW5pY29kZSBlc2NhcGUgW1xcdSIrZSsiXSIpLHRoaXMuaW5kZXgrPTQsZCs9U3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChlLAoxNikpKTpkKz1KZ1tmXXx8ZixlPSExO2Vsc2UgaWYoIlxcIj09PWYpZT0hMDtlbHNle2lmKGY9PT1hKXt0aGlzLmluZGV4Kys7dGhpcy50b2tlbnMucHVzaCh7aW5kZXg6Yix0ZXh0OmMsY29uc3RhbnQ6ITAsdmFsdWU6ZH0pO3JldHVybn1kKz1mfXRoaXMuaW5kZXgrK310aGlzLnRocm93RXJyb3IoIlVudGVybWluYXRlZCBxdW90ZSIsYil9fTt2YXIgcz1mdW5jdGlvbihhLGIpe3RoaXMubGV4ZXI9YTt0aGlzLm9wdGlvbnM9Yn07cy5Qcm9ncmFtPSJQcm9ncmFtIjtzLkV4cHJlc3Npb25TdGF0ZW1lbnQ9IkV4cHJlc3Npb25TdGF0ZW1lbnQiO3MuQXNzaWdubWVudEV4cHJlc3Npb249IkFzc2lnbm1lbnRFeHByZXNzaW9uIjtzLkNvbmRpdGlvbmFsRXhwcmVzc2lvbj0iQ29uZGl0aW9uYWxFeHByZXNzaW9uIjtzLkxvZ2ljYWxFeHByZXNzaW9uPSJMb2dpY2FsRXhwcmVzc2lvbiI7cy5CaW5hcnlFeHByZXNzaW9uPSJCaW5hcnlFeHByZXNzaW9uIjtzLlVuYXJ5RXhwcmVzc2lvbj0iVW5hcnlFeHByZXNzaW9uIjsKcy5DYWxsRXhwcmVzc2lvbj0iQ2FsbEV4cHJlc3Npb24iO3MuTWVtYmVyRXhwcmVzc2lvbj0iTWVtYmVyRXhwcmVzc2lvbiI7cy5JZGVudGlmaWVyPSJJZGVudGlmaWVyIjtzLkxpdGVyYWw9IkxpdGVyYWwiO3MuQXJyYXlFeHByZXNzaW9uPSJBcnJheUV4cHJlc3Npb24iO3MuUHJvcGVydHk9IlByb3BlcnR5IjtzLk9iamVjdEV4cHJlc3Npb249Ik9iamVjdEV4cHJlc3Npb24iO3MuVGhpc0V4cHJlc3Npb249IlRoaXNFeHByZXNzaW9uIjtzLkxvY2Fsc0V4cHJlc3Npb249IkxvY2Fsc0V4cHJlc3Npb24iO3MuTkdWYWx1ZVBhcmFtZXRlcj0iTkdWYWx1ZVBhcmFtZXRlciI7cy5wcm90b3R5cGU9e2FzdDpmdW5jdGlvbihhKXt0aGlzLnRleHQ9YTt0aGlzLnRva2Vucz10aGlzLmxleGVyLmxleChhKTthPXRoaXMucHJvZ3JhbSgpOzAhPT10aGlzLnRva2Vucy5sZW5ndGgmJnRoaXMudGhyb3dFcnJvcigiaXMgYW4gdW5leHBlY3RlZCB0b2tlbiIsdGhpcy50b2tlbnNbMF0pO3JldHVybiBhfSwKcHJvZ3JhbTpmdW5jdGlvbigpe2Zvcih2YXIgYT1bXTs7KWlmKDA8dGhpcy50b2tlbnMubGVuZ3RoJiYhdGhpcy5wZWVrKCJ9IiwiKSIsIjsiLCJdIikmJmEucHVzaCh0aGlzLmV4cHJlc3Npb25TdGF0ZW1lbnQoKSksIXRoaXMuZXhwZWN0KCI7IikpcmV0dXJue3R5cGU6cy5Qcm9ncmFtLGJvZHk6YX19LGV4cHJlc3Npb25TdGF0ZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm57dHlwZTpzLkV4cHJlc3Npb25TdGF0ZW1lbnQsZXhwcmVzc2lvbjp0aGlzLmZpbHRlckNoYWluKCl9fSxmaWx0ZXJDaGFpbjpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmV4cHJlc3Npb24oKTt0aGlzLmV4cGVjdCgifCIpOylhPXRoaXMuZmlsdGVyKGEpO3JldHVybiBhfSxleHByZXNzaW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXNzaWdubWVudCgpfSxhc3NpZ25tZW50OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50ZXJuYXJ5KCk7dGhpcy5leHBlY3QoIj0iKSYmKGE9e3R5cGU6cy5Bc3NpZ25tZW50RXhwcmVzc2lvbiwKbGVmdDphLHJpZ2h0OnRoaXMuYXNzaWdubWVudCgpLG9wZXJhdG9yOiI9In0pO3JldHVybiBhfSx0ZXJuYXJ5OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5sb2dpY2FsT1IoKSxiLGQ7cmV0dXJuIHRoaXMuZXhwZWN0KCI/IikmJihiPXRoaXMuZXhwcmVzc2lvbigpLHRoaXMuY29uc3VtZSgiOiIpKT8oZD10aGlzLmV4cHJlc3Npb24oKSx7dHlwZTpzLkNvbmRpdGlvbmFsRXhwcmVzc2lvbix0ZXN0OmEsYWx0ZXJuYXRlOmIsY29uc2VxdWVudDpkfSk6YX0sbG9naWNhbE9SOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMubG9naWNhbEFORCgpO3RoaXMuZXhwZWN0KCJ8fCIpOylhPXt0eXBlOnMuTG9naWNhbEV4cHJlc3Npb24sb3BlcmF0b3I6Inx8IixsZWZ0OmEscmlnaHQ6dGhpcy5sb2dpY2FsQU5EKCl9O3JldHVybiBhfSxsb2dpY2FsQU5EOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuZXF1YWxpdHkoKTt0aGlzLmV4cGVjdCgiJiYiKTspYT17dHlwZTpzLkxvZ2ljYWxFeHByZXNzaW9uLApvcGVyYXRvcjoiJiYiLGxlZnQ6YSxyaWdodDp0aGlzLmVxdWFsaXR5KCl9O3JldHVybiBhfSxlcXVhbGl0eTpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLnJlbGF0aW9uYWwoKSxiO2I9dGhpcy5leHBlY3QoIj09IiwiIT0iLCI9PT0iLCIhPT0iKTspYT17dHlwZTpzLkJpbmFyeUV4cHJlc3Npb24sb3BlcmF0b3I6Yi50ZXh0LGxlZnQ6YSxyaWdodDp0aGlzLnJlbGF0aW9uYWwoKX07cmV0dXJuIGF9LHJlbGF0aW9uYWw6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5hZGRpdGl2ZSgpLGI7Yj10aGlzLmV4cGVjdCgiPCIsIj4iLCI8PSIsIj49Iik7KWE9e3R5cGU6cy5CaW5hcnlFeHByZXNzaW9uLG9wZXJhdG9yOmIudGV4dCxsZWZ0OmEscmlnaHQ6dGhpcy5hZGRpdGl2ZSgpfTtyZXR1cm4gYX0sYWRkaXRpdmU6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5tdWx0aXBsaWNhdGl2ZSgpLGI7Yj10aGlzLmV4cGVjdCgiKyIsIi0iKTspYT17dHlwZTpzLkJpbmFyeUV4cHJlc3Npb24sb3BlcmF0b3I6Yi50ZXh0LApsZWZ0OmEscmlnaHQ6dGhpcy5tdWx0aXBsaWNhdGl2ZSgpfTtyZXR1cm4gYX0sbXVsdGlwbGljYXRpdmU6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy51bmFyeSgpLGI7Yj10aGlzLmV4cGVjdCgiKiIsIi8iLCIlIik7KWE9e3R5cGU6cy5CaW5hcnlFeHByZXNzaW9uLG9wZXJhdG9yOmIudGV4dCxsZWZ0OmEscmlnaHQ6dGhpcy51bmFyeSgpfTtyZXR1cm4gYX0sdW5hcnk6ZnVuY3Rpb24oKXt2YXIgYTtyZXR1cm4oYT10aGlzLmV4cGVjdCgiKyIsIi0iLCIhIikpP3t0eXBlOnMuVW5hcnlFeHByZXNzaW9uLG9wZXJhdG9yOmEudGV4dCxwcmVmaXg6ITAsYXJndW1lbnQ6dGhpcy51bmFyeSgpfTp0aGlzLnByaW1hcnkoKX0scHJpbWFyeTpmdW5jdGlvbigpe3ZhciBhO3RoaXMuZXhwZWN0KCIoIik/KGE9dGhpcy5maWx0ZXJDaGFpbigpLHRoaXMuY29uc3VtZSgiKSIpKTp0aGlzLmV4cGVjdCgiWyIpP2E9dGhpcy5hcnJheURlY2xhcmF0aW9uKCk6dGhpcy5leHBlY3QoInsiKT9hPXRoaXMub2JqZWN0KCk6CnRoaXMuc2VsZlJlZmVyZW50aWFsLmhhc093blByb3BlcnR5KHRoaXMucGVlaygpLnRleHQpP2E9cGEodGhpcy5zZWxmUmVmZXJlbnRpYWxbdGhpcy5jb25zdW1lKCkudGV4dF0pOnRoaXMub3B0aW9ucy5saXRlcmFscy5oYXNPd25Qcm9wZXJ0eSh0aGlzLnBlZWsoKS50ZXh0KT9hPXt0eXBlOnMuTGl0ZXJhbCx2YWx1ZTp0aGlzLm9wdGlvbnMubGl0ZXJhbHNbdGhpcy5jb25zdW1lKCkudGV4dF19OnRoaXMucGVlaygpLmlkZW50aWZpZXI/YT10aGlzLmlkZW50aWZpZXIoKTp0aGlzLnBlZWsoKS5jb25zdGFudD9hPXRoaXMuY29uc3RhbnQoKTp0aGlzLnRocm93RXJyb3IoIm5vdCBhIHByaW1hcnkgZXhwcmVzc2lvbiIsdGhpcy5wZWVrKCkpO2Zvcih2YXIgYjtiPXRoaXMuZXhwZWN0KCIoIiwiWyIsIi4iKTspIigiPT09Yi50ZXh0PyhhPXt0eXBlOnMuQ2FsbEV4cHJlc3Npb24sY2FsbGVlOmEsYXJndW1lbnRzOnRoaXMucGFyc2VBcmd1bWVudHMoKX0sdGhpcy5jb25zdW1lKCIpIikpOgoiWyI9PT1iLnRleHQ/KGE9e3R5cGU6cy5NZW1iZXJFeHByZXNzaW9uLG9iamVjdDphLHByb3BlcnR5OnRoaXMuZXhwcmVzc2lvbigpLGNvbXB1dGVkOiEwfSx0aGlzLmNvbnN1bWUoIl0iKSk6Ii4iPT09Yi50ZXh0P2E9e3R5cGU6cy5NZW1iZXJFeHByZXNzaW9uLG9iamVjdDphLHByb3BlcnR5OnRoaXMuaWRlbnRpZmllcigpLGNvbXB1dGVkOiExfTp0aGlzLnRocm93RXJyb3IoIklNUE9TU0lCTEUiKTtyZXR1cm4gYX0sZmlsdGVyOmZ1bmN0aW9uKGEpe2E9W2FdO2Zvcih2YXIgYj17dHlwZTpzLkNhbGxFeHByZXNzaW9uLGNhbGxlZTp0aGlzLmlkZW50aWZpZXIoKSxhcmd1bWVudHM6YSxmaWx0ZXI6ITB9O3RoaXMuZXhwZWN0KCI6Iik7KWEucHVzaCh0aGlzLmV4cHJlc3Npb24oKSk7cmV0dXJuIGJ9LHBhcnNlQXJndW1lbnRzOmZ1bmN0aW9uKCl7dmFyIGE9W107aWYoIikiIT09dGhpcy5wZWVrVG9rZW4oKS50ZXh0KXtkbyBhLnB1c2godGhpcy5maWx0ZXJDaGFpbigpKTt3aGlsZSh0aGlzLmV4cGVjdCgiLCIpKQp9cmV0dXJuIGF9LGlkZW50aWZpZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmNvbnN1bWUoKTthLmlkZW50aWZpZXJ8fHRoaXMudGhyb3dFcnJvcigiaXMgbm90IGEgdmFsaWQgaWRlbnRpZmllciIsYSk7cmV0dXJue3R5cGU6cy5JZGVudGlmaWVyLG5hbWU6YS50ZXh0fX0sY29uc3RhbnQ6ZnVuY3Rpb24oKXtyZXR1cm57dHlwZTpzLkxpdGVyYWwsdmFsdWU6dGhpcy5jb25zdW1lKCkudmFsdWV9fSxhcnJheURlY2xhcmF0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9W107aWYoIl0iIT09dGhpcy5wZWVrVG9rZW4oKS50ZXh0KXtkb3tpZih0aGlzLnBlZWsoIl0iKSlicmVhazthLnB1c2godGhpcy5leHByZXNzaW9uKCkpfXdoaWxlKHRoaXMuZXhwZWN0KCIsIikpfXRoaXMuY29uc3VtZSgiXSIpO3JldHVybnt0eXBlOnMuQXJyYXlFeHByZXNzaW9uLGVsZW1lbnRzOmF9fSxvYmplY3Q6ZnVuY3Rpb24oKXt2YXIgYT1bXSxiO2lmKCJ9IiE9PXRoaXMucGVla1Rva2VuKCkudGV4dCl7ZG97aWYodGhpcy5wZWVrKCJ9IikpYnJlYWs7CmI9e3R5cGU6cy5Qcm9wZXJ0eSxraW5kOiJpbml0In07dGhpcy5wZWVrKCkuY29uc3RhbnQ/KGIua2V5PXRoaXMuY29uc3RhbnQoKSxiLmNvbXB1dGVkPSExLHRoaXMuY29uc3VtZSgiOiIpLGIudmFsdWU9dGhpcy5leHByZXNzaW9uKCkpOnRoaXMucGVlaygpLmlkZW50aWZpZXI/KGIua2V5PXRoaXMuaWRlbnRpZmllcigpLGIuY29tcHV0ZWQ9ITEsdGhpcy5wZWVrKCI6Iik/KHRoaXMuY29uc3VtZSgiOiIpLGIudmFsdWU9dGhpcy5leHByZXNzaW9uKCkpOmIudmFsdWU9Yi5rZXkpOnRoaXMucGVlaygiWyIpPyh0aGlzLmNvbnN1bWUoIlsiKSxiLmtleT10aGlzLmV4cHJlc3Npb24oKSx0aGlzLmNvbnN1bWUoIl0iKSxiLmNvbXB1dGVkPSEwLHRoaXMuY29uc3VtZSgiOiIpLGIudmFsdWU9dGhpcy5leHByZXNzaW9uKCkpOnRoaXMudGhyb3dFcnJvcigiaW52YWxpZCBrZXkiLHRoaXMucGVlaygpKTthLnB1c2goYil9d2hpbGUodGhpcy5leHBlY3QoIiwiKSl9dGhpcy5jb25zdW1lKCJ9Iik7CnJldHVybnt0eXBlOnMuT2JqZWN0RXhwcmVzc2lvbixwcm9wZXJ0aWVzOmF9fSx0aHJvd0Vycm9yOmZ1bmN0aW9uKGEsYil7dGhyb3cgWCgic3ludGF4IixiLnRleHQsYSxiLmluZGV4KzEsdGhpcy50ZXh0LHRoaXMudGV4dC5zdWJzdHJpbmcoYi5pbmRleCkpO30sY29uc3VtZTpmdW5jdGlvbihhKXtpZigwPT09dGhpcy50b2tlbnMubGVuZ3RoKXRocm93IFgoInVlb2UiLHRoaXMudGV4dCk7dmFyIGI9dGhpcy5leHBlY3QoYSk7Ynx8dGhpcy50aHJvd0Vycm9yKCJpcyB1bmV4cGVjdGVkLCBleHBlY3RpbmcgWyIrYSsiXSIsdGhpcy5wZWVrKCkpO3JldHVybiBifSxwZWVrVG9rZW46ZnVuY3Rpb24oKXtpZigwPT09dGhpcy50b2tlbnMubGVuZ3RoKXRocm93IFgoInVlb2UiLHRoaXMudGV4dCk7cmV0dXJuIHRoaXMudG9rZW5zWzBdfSxwZWVrOmZ1bmN0aW9uKGEsYixkLGMpe3JldHVybiB0aGlzLnBlZWtBaGVhZCgwLGEsYixkLGMpfSxwZWVrQWhlYWQ6ZnVuY3Rpb24oYSxiLGQsYyxlKXtpZih0aGlzLnRva2Vucy5sZW5ndGg+CmEpe2E9dGhpcy50b2tlbnNbYV07dmFyIGY9YS50ZXh0O2lmKGY9PT1ifHxmPT09ZHx8Zj09PWN8fGY9PT1lfHwhKGJ8fGR8fGN8fGUpKXJldHVybiBhfXJldHVybiExfSxleHBlY3Q6ZnVuY3Rpb24oYSxiLGQsYyl7cmV0dXJuKGE9dGhpcy5wZWVrKGEsYixkLGMpKT8odGhpcy50b2tlbnMuc2hpZnQoKSxhKTohMX0sc2VsZlJlZmVyZW50aWFsOnsidGhpcyI6e3R5cGU6cy5UaGlzRXhwcmVzc2lvbn0sJGxvY2Fsczp7dHlwZTpzLkxvY2Fsc0V4cHJlc3Npb259fX07dGQucHJvdG90eXBlPXtjb21waWxlOmZ1bmN0aW9uKGEsYil7dmFyIGQ9dGhpcyxjPXRoaXMuYXN0QnVpbGRlci5hc3QoYSk7dGhpcy5zdGF0ZT17bmV4dElkOjAsZmlsdGVyczp7fSxleHBlbnNpdmVDaGVja3M6Yixmbjp7dmFyczpbXSxib2R5OltdLG93bjp7fX0sYXNzaWduOnt2YXJzOltdLGJvZHk6W10sb3duOnt9fSxpbnB1dHM6W119O1YoYyxkLiRmaWx0ZXIpO3ZhciBlPSIiLGY7dGhpcy5zdGFnZT0iYXNzaWduIjsKaWYoZj1yZChjKSl0aGlzLnN0YXRlLmNvbXB1dGluZz0iYXNzaWduIixlPXRoaXMubmV4dElkKCksdGhpcy5yZWN1cnNlKGYsZSksdGhpcy5yZXR1cm5fKGUpLGU9ImZuLmFzc2lnbj0iK3RoaXMuZ2VuZXJhdGVGdW5jdGlvbigiYXNzaWduIiwicyx2LGwiKTtmPXBkKGMuYm9keSk7ZC5zdGFnZT0iaW5wdXRzIjtxKGYsZnVuY3Rpb24oYSxiKXt2YXIgYz0iZm4iK2I7ZC5zdGF0ZVtjXT17dmFyczpbXSxib2R5OltdLG93bjp7fX07ZC5zdGF0ZS5jb21wdXRpbmc9Yzt2YXIgZT1kLm5leHRJZCgpO2QucmVjdXJzZShhLGUpO2QucmV0dXJuXyhlKTtkLnN0YXRlLmlucHV0cy5wdXNoKGMpO2Eud2F0Y2hJZD1ifSk7dGhpcy5zdGF0ZS5jb21wdXRpbmc9ImZuIjt0aGlzLnN0YWdlPSJtYWluIjt0aGlzLnJlY3Vyc2UoYyk7ZT0nIicrdGhpcy5VU0UrIiAiK3RoaXMuU1RSSUNUKyciO1xuJyt0aGlzLmZpbHRlclByZWZpeCgpKyJ2YXIgZm49Iit0aGlzLmdlbmVyYXRlRnVuY3Rpb24oImZuIiwicyxsLGEsaSIpKwplK3RoaXMud2F0Y2hGbnMoKSsicmV0dXJuIGZuOyI7ZT0obmV3IEZ1bmN0aW9uKCIkZmlsdGVyIiwiZW5zdXJlU2FmZU1lbWJlck5hbWUiLCJlbnN1cmVTYWZlT2JqZWN0IiwiZW5zdXJlU2FmZUZ1bmN0aW9uIiwiZ2V0U3RyaW5nVmFsdWUiLCJlbnN1cmVTYWZlQXNzaWduQ29udGV4dCIsImlmRGVmaW5lZCIsInBsdXMiLCJ0ZXh0IixlKSkodGhpcy4kZmlsdGVyLFNhLHJhLG5kLGlnLEliLG1nLG9kLGEpO3RoaXMuc3RhdGU9dGhpcy5zdGFnZT12b2lkIDA7ZS5saXRlcmFsPXNkKGMpO2UuY29uc3RhbnQ9Yy5jb25zdGFudDtyZXR1cm4gZX0sVVNFOiJ1c2UiLFNUUklDVDoic3RyaWN0Iix3YXRjaEZuczpmdW5jdGlvbigpe3ZhciBhPVtdLGI9dGhpcy5zdGF0ZS5pbnB1dHMsZD10aGlzO3EoYixmdW5jdGlvbihiKXthLnB1c2goInZhciAiK2IrIj0iK2QuZ2VuZXJhdGVGdW5jdGlvbihiLCJzIikpfSk7Yi5sZW5ndGgmJmEucHVzaCgiZm4uaW5wdXRzPVsiK2Iuam9pbigiLCIpKyJdOyIpOwpyZXR1cm4gYS5qb2luKCIiKX0sZ2VuZXJhdGVGdW5jdGlvbjpmdW5jdGlvbihhLGIpe3JldHVybiJmdW5jdGlvbigiK2IrIil7Iit0aGlzLnZhcnNQcmVmaXgoYSkrdGhpcy5ib2R5KGEpKyJ9OyJ9LGZpbHRlclByZWZpeDpmdW5jdGlvbigpe3ZhciBhPVtdLGI9dGhpcztxKHRoaXMuc3RhdGUuZmlsdGVycyxmdW5jdGlvbihkLGMpe2EucHVzaChkKyI9JGZpbHRlcigiK2IuZXNjYXBlKGMpKyIpIil9KTtyZXR1cm4gYS5sZW5ndGg/InZhciAiK2Euam9pbigiLCIpKyI7IjoiIn0sdmFyc1ByZWZpeDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5zdGF0ZVthXS52YXJzLmxlbmd0aD8idmFyICIrdGhpcy5zdGF0ZVthXS52YXJzLmpvaW4oIiwiKSsiOyI6IiJ9LGJvZHk6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuc3RhdGVbYV0uYm9keS5qb2luKCIiKX0scmVjdXJzZTpmdW5jdGlvbihhLGIsZCxjLGUsZil7dmFyIGcsaCxrPXRoaXMsbCxtLG47Yz1jfHxBO2lmKCFmJiZ3KGEud2F0Y2hJZCkpYj0KYnx8dGhpcy5uZXh0SWQoKSx0aGlzLmlmXygiaSIsdGhpcy5sYXp5QXNzaWduKGIsdGhpcy5jb21wdXRlZE1lbWJlcigiaSIsYS53YXRjaElkKSksdGhpcy5sYXp5UmVjdXJzZShhLGIsZCxjLGUsITApKTtlbHNlIHN3aXRjaChhLnR5cGUpe2Nhc2Ugcy5Qcm9ncmFtOnEoYS5ib2R5LGZ1bmN0aW9uKGIsYyl7ay5yZWN1cnNlKGIuZXhwcmVzc2lvbix2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKGEpe2g9YX0pO2MhPT1hLmJvZHkubGVuZ3RoLTE/ay5jdXJyZW50KCkuYm9keS5wdXNoKGgsIjsiKTprLnJldHVybl8oaCl9KTticmVhaztjYXNlIHMuTGl0ZXJhbDptPXRoaXMuZXNjYXBlKGEudmFsdWUpO3RoaXMuYXNzaWduKGIsbSk7YyhtKTticmVhaztjYXNlIHMuVW5hcnlFeHByZXNzaW9uOnRoaXMucmVjdXJzZShhLmFyZ3VtZW50LHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oYSl7aD1hfSk7bT1hLm9wZXJhdG9yKyIoIit0aGlzLmlmRGVmaW5lZChoLDApKyIpIjt0aGlzLmFzc2lnbihiLG0pOwpjKG0pO2JyZWFrO2Nhc2Ugcy5CaW5hcnlFeHByZXNzaW9uOnRoaXMucmVjdXJzZShhLmxlZnQsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbihhKXtnPWF9KTt0aGlzLnJlY3Vyc2UoYS5yaWdodCx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKGEpe2g9YX0pO209IisiPT09YS5vcGVyYXRvcj90aGlzLnBsdXMoZyxoKToiLSI9PT1hLm9wZXJhdG9yP3RoaXMuaWZEZWZpbmVkKGcsMCkrYS5vcGVyYXRvcit0aGlzLmlmRGVmaW5lZChoLDApOiIoIitnKyIpIithLm9wZXJhdG9yKyIoIitoKyIpIjt0aGlzLmFzc2lnbihiLG0pO2MobSk7YnJlYWs7Y2FzZSBzLkxvZ2ljYWxFeHByZXNzaW9uOmI9Ynx8dGhpcy5uZXh0SWQoKTtrLnJlY3Vyc2UoYS5sZWZ0LGIpO2suaWZfKCImJiI9PT1hLm9wZXJhdG9yP2I6ay5ub3QoYiksay5sYXp5UmVjdXJzZShhLnJpZ2h0LGIpKTtjKGIpO2JyZWFrO2Nhc2Ugcy5Db25kaXRpb25hbEV4cHJlc3Npb246Yj1ifHx0aGlzLm5leHRJZCgpO2sucmVjdXJzZShhLnRlc3QsCmIpO2suaWZfKGIsay5sYXp5UmVjdXJzZShhLmFsdGVybmF0ZSxiKSxrLmxhenlSZWN1cnNlKGEuY29uc2VxdWVudCxiKSk7YyhiKTticmVhaztjYXNlIHMuSWRlbnRpZmllcjpiPWJ8fHRoaXMubmV4dElkKCk7ZCYmKGQuY29udGV4dD0iaW5wdXRzIj09PWsuc3RhZ2U/InMiOnRoaXMuYXNzaWduKHRoaXMubmV4dElkKCksdGhpcy5nZXRIYXNPd25Qcm9wZXJ0eSgibCIsYS5uYW1lKSsiP2w6cyIpLGQuY29tcHV0ZWQ9ITEsZC5uYW1lPWEubmFtZSk7U2EoYS5uYW1lKTtrLmlmXygiaW5wdXRzIj09PWsuc3RhZ2V8fGsubm90KGsuZ2V0SGFzT3duUHJvcGVydHkoImwiLGEubmFtZSkpLGZ1bmN0aW9uKCl7ay5pZl8oImlucHV0cyI9PT1rLnN0YWdlfHwicyIsZnVuY3Rpb24oKXtlJiYxIT09ZSYmay5pZl8oay5ub3Qoay5ub25Db21wdXRlZE1lbWJlcigicyIsYS5uYW1lKSksay5sYXp5QXNzaWduKGsubm9uQ29tcHV0ZWRNZW1iZXIoInMiLGEubmFtZSksInt9IikpO2suYXNzaWduKGIsay5ub25Db21wdXRlZE1lbWJlcigicyIsCmEubmFtZSkpfSl9LGImJmsubGF6eUFzc2lnbihiLGsubm9uQ29tcHV0ZWRNZW1iZXIoImwiLGEubmFtZSkpKTsoay5zdGF0ZS5leHBlbnNpdmVDaGVja3N8fEpiKGEubmFtZSkpJiZrLmFkZEVuc3VyZVNhZmVPYmplY3QoYik7YyhiKTticmVhaztjYXNlIHMuTWVtYmVyRXhwcmVzc2lvbjpnPWQmJihkLmNvbnRleHQ9dGhpcy5uZXh0SWQoKSl8fHRoaXMubmV4dElkKCk7Yj1ifHx0aGlzLm5leHRJZCgpO2sucmVjdXJzZShhLm9iamVjdCxnLHZvaWQgMCxmdW5jdGlvbigpe2suaWZfKGsubm90TnVsbChnKSxmdW5jdGlvbigpe2UmJjEhPT1lJiZrLmFkZEVuc3VyZVNhZmVBc3NpZ25Db250ZXh0KGcpO2lmKGEuY29tcHV0ZWQpaD1rLm5leHRJZCgpLGsucmVjdXJzZShhLnByb3BlcnR5LGgpLGsuZ2V0U3RyaW5nVmFsdWUoaCksay5hZGRFbnN1cmVTYWZlTWVtYmVyTmFtZShoKSxlJiYxIT09ZSYmay5pZl8oay5ub3Qoay5jb21wdXRlZE1lbWJlcihnLGgpKSxrLmxhenlBc3NpZ24oay5jb21wdXRlZE1lbWJlcihnLApoKSwie30iKSksbT1rLmVuc3VyZVNhZmVPYmplY3Qoay5jb21wdXRlZE1lbWJlcihnLGgpKSxrLmFzc2lnbihiLG0pLGQmJihkLmNvbXB1dGVkPSEwLGQubmFtZT1oKTtlbHNle1NhKGEucHJvcGVydHkubmFtZSk7ZSYmMSE9PWUmJmsuaWZfKGsubm90KGsubm9uQ29tcHV0ZWRNZW1iZXIoZyxhLnByb3BlcnR5Lm5hbWUpKSxrLmxhenlBc3NpZ24oay5ub25Db21wdXRlZE1lbWJlcihnLGEucHJvcGVydHkubmFtZSksInt9IikpO209ay5ub25Db21wdXRlZE1lbWJlcihnLGEucHJvcGVydHkubmFtZSk7aWYoay5zdGF0ZS5leHBlbnNpdmVDaGVja3N8fEpiKGEucHJvcGVydHkubmFtZSkpbT1rLmVuc3VyZVNhZmVPYmplY3QobSk7ay5hc3NpZ24oYixtKTtkJiYoZC5jb21wdXRlZD0hMSxkLm5hbWU9YS5wcm9wZXJ0eS5uYW1lKX19LGZ1bmN0aW9uKCl7ay5hc3NpZ24oYiwidW5kZWZpbmVkIil9KTtjKGIpfSwhIWUpO2JyZWFrO2Nhc2Ugcy5DYWxsRXhwcmVzc2lvbjpiPWJ8fHRoaXMubmV4dElkKCk7CmEuZmlsdGVyPyhoPWsuZmlsdGVyKGEuY2FsbGVlLm5hbWUpLGw9W10scShhLmFyZ3VtZW50cyxmdW5jdGlvbihhKXt2YXIgYj1rLm5leHRJZCgpO2sucmVjdXJzZShhLGIpO2wucHVzaChiKX0pLG09aCsiKCIrbC5qb2luKCIsIikrIikiLGsuYXNzaWduKGIsbSksYyhiKSk6KGg9ay5uZXh0SWQoKSxnPXt9LGw9W10say5yZWN1cnNlKGEuY2FsbGVlLGgsZyxmdW5jdGlvbigpe2suaWZfKGsubm90TnVsbChoKSxmdW5jdGlvbigpe2suYWRkRW5zdXJlU2FmZUZ1bmN0aW9uKGgpO3EoYS5hcmd1bWVudHMsZnVuY3Rpb24oYSl7ay5yZWN1cnNlKGEsay5uZXh0SWQoKSx2b2lkIDAsZnVuY3Rpb24oYSl7bC5wdXNoKGsuZW5zdXJlU2FmZU9iamVjdChhKSl9KX0pO2cubmFtZT8oay5zdGF0ZS5leHBlbnNpdmVDaGVja3N8fGsuYWRkRW5zdXJlU2FmZU9iamVjdChnLmNvbnRleHQpLG09ay5tZW1iZXIoZy5jb250ZXh0LGcubmFtZSxnLmNvbXB1dGVkKSsiKCIrbC5qb2luKCIsIikrIikiKTptPQpoKyIoIitsLmpvaW4oIiwiKSsiKSI7bT1rLmVuc3VyZVNhZmVPYmplY3QobSk7ay5hc3NpZ24oYixtKX0sZnVuY3Rpb24oKXtrLmFzc2lnbihiLCJ1bmRlZmluZWQiKX0pO2MoYil9KSk7YnJlYWs7Y2FzZSBzLkFzc2lnbm1lbnRFeHByZXNzaW9uOmg9dGhpcy5uZXh0SWQoKTtnPXt9O2lmKCFxZChhLmxlZnQpKXRocm93IFgoImx2YWwiKTt0aGlzLnJlY3Vyc2UoYS5sZWZ0LHZvaWQgMCxnLGZ1bmN0aW9uKCl7ay5pZl8oay5ub3ROdWxsKGcuY29udGV4dCksZnVuY3Rpb24oKXtrLnJlY3Vyc2UoYS5yaWdodCxoKTtrLmFkZEVuc3VyZVNhZmVPYmplY3Qoay5tZW1iZXIoZy5jb250ZXh0LGcubmFtZSxnLmNvbXB1dGVkKSk7ay5hZGRFbnN1cmVTYWZlQXNzaWduQ29udGV4dChnLmNvbnRleHQpO209ay5tZW1iZXIoZy5jb250ZXh0LGcubmFtZSxnLmNvbXB1dGVkKSthLm9wZXJhdG9yK2g7ay5hc3NpZ24oYixtKTtjKGJ8fG0pfSl9LDEpO2JyZWFrO2Nhc2Ugcy5BcnJheUV4cHJlc3Npb246bD0KW107cShhLmVsZW1lbnRzLGZ1bmN0aW9uKGEpe2sucmVjdXJzZShhLGsubmV4dElkKCksdm9pZCAwLGZ1bmN0aW9uKGEpe2wucHVzaChhKX0pfSk7bT0iWyIrbC5qb2luKCIsIikrIl0iO3RoaXMuYXNzaWduKGIsbSk7YyhtKTticmVhaztjYXNlIHMuT2JqZWN0RXhwcmVzc2lvbjpsPVtdO249ITE7cShhLnByb3BlcnRpZXMsZnVuY3Rpb24oYSl7YS5jb21wdXRlZCYmKG49ITApfSk7bj8oYj1ifHx0aGlzLm5leHRJZCgpLHRoaXMuYXNzaWduKGIsInt9IikscShhLnByb3BlcnRpZXMsZnVuY3Rpb24oYSl7YS5jb21wdXRlZD8oZz1rLm5leHRJZCgpLGsucmVjdXJzZShhLmtleSxnKSk6Zz1hLmtleS50eXBlPT09cy5JZGVudGlmaWVyP2Eua2V5Lm5hbWU6IiIrYS5rZXkudmFsdWU7aD1rLm5leHRJZCgpO2sucmVjdXJzZShhLnZhbHVlLGgpO2suYXNzaWduKGsubWVtYmVyKGIsZyxhLmNvbXB1dGVkKSxoKX0pKToocShhLnByb3BlcnRpZXMsZnVuY3Rpb24oYil7ay5yZWN1cnNlKGIudmFsdWUsCmEuY29uc3RhbnQ/dm9pZCAwOmsubmV4dElkKCksdm9pZCAwLGZ1bmN0aW9uKGEpe2wucHVzaChrLmVzY2FwZShiLmtleS50eXBlPT09cy5JZGVudGlmaWVyP2Iua2V5Lm5hbWU6IiIrYi5rZXkudmFsdWUpKyI6IithKX0pfSksbT0ieyIrbC5qb2luKCIsIikrIn0iLHRoaXMuYXNzaWduKGIsbSkpO2MoYnx8bSk7YnJlYWs7Y2FzZSBzLlRoaXNFeHByZXNzaW9uOnRoaXMuYXNzaWduKGIsInMiKTtjKCJzIik7YnJlYWs7Y2FzZSBzLkxvY2Fsc0V4cHJlc3Npb246dGhpcy5hc3NpZ24oYiwibCIpO2MoImwiKTticmVhaztjYXNlIHMuTkdWYWx1ZVBhcmFtZXRlcjp0aGlzLmFzc2lnbihiLCJ2IiksYygidiIpfX0sZ2V0SGFzT3duUHJvcGVydHk6ZnVuY3Rpb24oYSxiKXt2YXIgZD1hKyIuIitiLGM9dGhpcy5jdXJyZW50KCkub3duO2MuaGFzT3duUHJvcGVydHkoZCl8fChjW2RdPXRoaXMubmV4dElkKCExLGErIiYmKCIrdGhpcy5lc2NhcGUoYikrIiBpbiAiK2ErIikiKSk7cmV0dXJuIGNbZF19LAphc3NpZ246ZnVuY3Rpb24oYSxiKXtpZihhKXJldHVybiB0aGlzLmN1cnJlbnQoKS5ib2R5LnB1c2goYSwiPSIsYiwiOyIpLGF9LGZpbHRlcjpmdW5jdGlvbihhKXt0aGlzLnN0YXRlLmZpbHRlcnMuaGFzT3duUHJvcGVydHkoYSl8fCh0aGlzLnN0YXRlLmZpbHRlcnNbYV09dGhpcy5uZXh0SWQoITApKTtyZXR1cm4gdGhpcy5zdGF0ZS5maWx0ZXJzW2FdfSxpZkRlZmluZWQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4iaWZEZWZpbmVkKCIrYSsiLCIrdGhpcy5lc2NhcGUoYikrIikifSxwbHVzOmZ1bmN0aW9uKGEsYil7cmV0dXJuInBsdXMoIithKyIsIitiKyIpIn0scmV0dXJuXzpmdW5jdGlvbihhKXt0aGlzLmN1cnJlbnQoKS5ib2R5LnB1c2goInJldHVybiAiLGEsIjsiKX0saWZfOmZ1bmN0aW9uKGEsYixkKXtpZighMD09PWEpYigpO2Vsc2V7dmFyIGM9dGhpcy5jdXJyZW50KCkuYm9keTtjLnB1c2goImlmKCIsYSwiKXsiKTtiKCk7Yy5wdXNoKCJ9Iik7ZCYmKGMucHVzaCgiZWxzZXsiKSwKZCgpLGMucHVzaCgifSIpKX19LG5vdDpmdW5jdGlvbihhKXtyZXR1cm4iISgiK2ErIikifSxub3ROdWxsOmZ1bmN0aW9uKGEpe3JldHVybiBhKyIhPW51bGwifSxub25Db21wdXRlZE1lbWJlcjpmdW5jdGlvbihhLGIpe3ZhciBkPS9bXiRfYS16QS1aMC05XS9nO3JldHVybi9bJF9hLXpBLVpdWyRfYS16QS1aMC05XSovLnRlc3QoYik/YSsiLiIrYjphKydbIicrYi5yZXBsYWNlKGQsdGhpcy5zdHJpbmdFc2NhcGVGbikrJyJdJ30sY29tcHV0ZWRNZW1iZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSsiWyIrYisiXSJ9LG1lbWJlcjpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGQ/dGhpcy5jb21wdXRlZE1lbWJlcihhLGIpOnRoaXMubm9uQ29tcHV0ZWRNZW1iZXIoYSxiKX0sYWRkRW5zdXJlU2FmZU9iamVjdDpmdW5jdGlvbihhKXt0aGlzLmN1cnJlbnQoKS5ib2R5LnB1c2godGhpcy5lbnN1cmVTYWZlT2JqZWN0KGEpLCI7Iil9LGFkZEVuc3VyZVNhZmVNZW1iZXJOYW1lOmZ1bmN0aW9uKGEpe3RoaXMuY3VycmVudCgpLmJvZHkucHVzaCh0aGlzLmVuc3VyZVNhZmVNZW1iZXJOYW1lKGEpLAoiOyIpfSxhZGRFbnN1cmVTYWZlRnVuY3Rpb246ZnVuY3Rpb24oYSl7dGhpcy5jdXJyZW50KCkuYm9keS5wdXNoKHRoaXMuZW5zdXJlU2FmZUZ1bmN0aW9uKGEpLCI7Iil9LGFkZEVuc3VyZVNhZmVBc3NpZ25Db250ZXh0OmZ1bmN0aW9uKGEpe3RoaXMuY3VycmVudCgpLmJvZHkucHVzaCh0aGlzLmVuc3VyZVNhZmVBc3NpZ25Db250ZXh0KGEpLCI7Iil9LGVuc3VyZVNhZmVPYmplY3Q6ZnVuY3Rpb24oYSl7cmV0dXJuImVuc3VyZVNhZmVPYmplY3QoIithKyIsdGV4dCkifSxlbnN1cmVTYWZlTWVtYmVyTmFtZTpmdW5jdGlvbihhKXtyZXR1cm4iZW5zdXJlU2FmZU1lbWJlck5hbWUoIithKyIsdGV4dCkifSxlbnN1cmVTYWZlRnVuY3Rpb246ZnVuY3Rpb24oYSl7cmV0dXJuImVuc3VyZVNhZmVGdW5jdGlvbigiK2ErIix0ZXh0KSJ9LGdldFN0cmluZ1ZhbHVlOmZ1bmN0aW9uKGEpe3RoaXMuYXNzaWduKGEsImdldFN0cmluZ1ZhbHVlKCIrYSsiKSIpfSxlbnN1cmVTYWZlQXNzaWduQ29udGV4dDpmdW5jdGlvbihhKXtyZXR1cm4iZW5zdXJlU2FmZUFzc2lnbkNvbnRleHQoIisKYSsiLHRleHQpIn0sbGF6eVJlY3Vyc2U6ZnVuY3Rpb24oYSxiLGQsYyxlLGYpe3ZhciBnPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKCl7Zy5yZWN1cnNlKGEsYixkLGMsZSxmKX19LGxhenlBc3NpZ246ZnVuY3Rpb24oYSxiKXt2YXIgZD10aGlzO3JldHVybiBmdW5jdGlvbigpe2QuYXNzaWduKGEsYil9fSxzdHJpbmdFc2NhcGVSZWdleDovW14gYS16QS1aMC05XS9nLHN0cmluZ0VzY2FwZUZuOmZ1bmN0aW9uKGEpe3JldHVybiJcXHUiKygiMDAwMCIrYS5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTQpfSxlc2NhcGU6ZnVuY3Rpb24oYSl7aWYoRyhhKSlyZXR1cm4iJyIrYS5yZXBsYWNlKHRoaXMuc3RyaW5nRXNjYXBlUmVnZXgsdGhpcy5zdHJpbmdFc2NhcGVGbikrIiciO2lmKFQoYSkpcmV0dXJuIGEudG9TdHJpbmcoKTtpZighMD09PWEpcmV0dXJuInRydWUiO2lmKCExPT09YSlyZXR1cm4iZmFsc2UiO2lmKG51bGw9PT1hKXJldHVybiJudWxsIjtpZigidW5kZWZpbmVkIj09PQp0eXBlb2YgYSlyZXR1cm4idW5kZWZpbmVkIjt0aHJvdyBYKCJlc2MiKTt9LG5leHRJZDpmdW5jdGlvbihhLGIpe3ZhciBkPSJ2Iit0aGlzLnN0YXRlLm5leHRJZCsrO2F8fHRoaXMuY3VycmVudCgpLnZhcnMucHVzaChkKyhiPyI9IitiOiIiKSk7cmV0dXJuIGR9LGN1cnJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGF0ZVt0aGlzLnN0YXRlLmNvbXB1dGluZ119fTt1ZC5wcm90b3R5cGU9e2NvbXBpbGU6ZnVuY3Rpb24oYSxiKXt2YXIgZD10aGlzLGM9dGhpcy5hc3RCdWlsZGVyLmFzdChhKTt0aGlzLmV4cHJlc3Npb249YTt0aGlzLmV4cGVuc2l2ZUNoZWNrcz1iO1YoYyxkLiRmaWx0ZXIpO3ZhciBlLGY7aWYoZT1yZChjKSlmPXRoaXMucmVjdXJzZShlKTtlPXBkKGMuYm9keSk7dmFyIGc7ZSYmKGc9W10scShlLGZ1bmN0aW9uKGEsYil7dmFyIGM9ZC5yZWN1cnNlKGEpO2EuaW5wdXQ9YztnLnB1c2goYyk7YS53YXRjaElkPWJ9KSk7dmFyIGg9W107cShjLmJvZHksZnVuY3Rpb24oYSl7aC5wdXNoKGQucmVjdXJzZShhLmV4cHJlc3Npb24pKX0pOwplPTA9PT1jLmJvZHkubGVuZ3RoP0E6MT09PWMuYm9keS5sZW5ndGg/aFswXTpmdW5jdGlvbihhLGIpe3ZhciBjO3EoaCxmdW5jdGlvbihkKXtjPWQoYSxiKX0pO3JldHVybiBjfTtmJiYoZS5hc3NpZ249ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBmKGEsYyxiKX0pO2cmJihlLmlucHV0cz1nKTtlLmxpdGVyYWw9c2QoYyk7ZS5jb25zdGFudD1jLmNvbnN0YW50O3JldHVybiBlfSxyZWN1cnNlOmZ1bmN0aW9uKGEsYixkKXt2YXIgYyxlLGY9dGhpcyxnO2lmKGEuaW5wdXQpcmV0dXJuIHRoaXMuaW5wdXRzKGEuaW5wdXQsYS53YXRjaElkKTtzd2l0Y2goYS50eXBlKXtjYXNlIHMuTGl0ZXJhbDpyZXR1cm4gdGhpcy52YWx1ZShhLnZhbHVlLGIpO2Nhc2Ugcy5VbmFyeUV4cHJlc3Npb246cmV0dXJuIGU9dGhpcy5yZWN1cnNlKGEuYXJndW1lbnQpLHRoaXNbInVuYXJ5IithLm9wZXJhdG9yXShlLGIpO2Nhc2Ugcy5CaW5hcnlFeHByZXNzaW9uOnJldHVybiBjPXRoaXMucmVjdXJzZShhLmxlZnQpLAplPXRoaXMucmVjdXJzZShhLnJpZ2h0KSx0aGlzWyJiaW5hcnkiK2Eub3BlcmF0b3JdKGMsZSxiKTtjYXNlIHMuTG9naWNhbEV4cHJlc3Npb246cmV0dXJuIGM9dGhpcy5yZWN1cnNlKGEubGVmdCksZT10aGlzLnJlY3Vyc2UoYS5yaWdodCksdGhpc1siYmluYXJ5IithLm9wZXJhdG9yXShjLGUsYik7Y2FzZSBzLkNvbmRpdGlvbmFsRXhwcmVzc2lvbjpyZXR1cm4gdGhpc1sidGVybmFyeT86Il0odGhpcy5yZWN1cnNlKGEudGVzdCksdGhpcy5yZWN1cnNlKGEuYWx0ZXJuYXRlKSx0aGlzLnJlY3Vyc2UoYS5jb25zZXF1ZW50KSxiKTtjYXNlIHMuSWRlbnRpZmllcjpyZXR1cm4gU2EoYS5uYW1lLGYuZXhwcmVzc2lvbiksZi5pZGVudGlmaWVyKGEubmFtZSxmLmV4cGVuc2l2ZUNoZWNrc3x8SmIoYS5uYW1lKSxiLGQsZi5leHByZXNzaW9uKTtjYXNlIHMuTWVtYmVyRXhwcmVzc2lvbjpyZXR1cm4gYz10aGlzLnJlY3Vyc2UoYS5vYmplY3QsITEsISFkKSxhLmNvbXB1dGVkfHwoU2EoYS5wcm9wZXJ0eS5uYW1lLApmLmV4cHJlc3Npb24pLGU9YS5wcm9wZXJ0eS5uYW1lKSxhLmNvbXB1dGVkJiYoZT10aGlzLnJlY3Vyc2UoYS5wcm9wZXJ0eSkpLGEuY29tcHV0ZWQ/dGhpcy5jb21wdXRlZE1lbWJlcihjLGUsYixkLGYuZXhwcmVzc2lvbik6dGhpcy5ub25Db21wdXRlZE1lbWJlcihjLGUsZi5leHBlbnNpdmVDaGVja3MsYixkLGYuZXhwcmVzc2lvbik7Y2FzZSBzLkNhbGxFeHByZXNzaW9uOnJldHVybiBnPVtdLHEoYS5hcmd1bWVudHMsZnVuY3Rpb24oYSl7Zy5wdXNoKGYucmVjdXJzZShhKSl9KSxhLmZpbHRlciYmKGU9dGhpcy4kZmlsdGVyKGEuY2FsbGVlLm5hbWUpKSxhLmZpbHRlcnx8KGU9dGhpcy5yZWN1cnNlKGEuY2FsbGVlLCEwKSksYS5maWx0ZXI/ZnVuY3Rpb24oYSxjLGQsZil7Zm9yKHZhciBuPVtdLHA9MDtwPGcubGVuZ3RoOysrcCluLnB1c2goZ1twXShhLGMsZCxmKSk7YT1lLmFwcGx5KHZvaWQgMCxuLGYpO3JldHVybiBiP3tjb250ZXh0OnZvaWQgMCxuYW1lOnZvaWQgMCx2YWx1ZTphfToKYX06ZnVuY3Rpb24oYSxjLGQsbSl7dmFyIG49ZShhLGMsZCxtKSxwO2lmKG51bGwhPW4udmFsdWUpe3JhKG4uY29udGV4dCxmLmV4cHJlc3Npb24pO25kKG4udmFsdWUsZi5leHByZXNzaW9uKTtwPVtdO2Zvcih2YXIgcT0wO3E8Zy5sZW5ndGg7KytxKXAucHVzaChyYShnW3FdKGEsYyxkLG0pLGYuZXhwcmVzc2lvbikpO3A9cmEobi52YWx1ZS5hcHBseShuLmNvbnRleHQscCksZi5leHByZXNzaW9uKX1yZXR1cm4gYj97dmFsdWU6cH06cH07Y2FzZSBzLkFzc2lnbm1lbnRFeHByZXNzaW9uOnJldHVybiBjPXRoaXMucmVjdXJzZShhLmxlZnQsITAsMSksZT10aGlzLnJlY3Vyc2UoYS5yaWdodCksZnVuY3Rpb24oYSxkLGcsbSl7dmFyIG49YyhhLGQsZyxtKTthPWUoYSxkLGcsbSk7cmEobi52YWx1ZSxmLmV4cHJlc3Npb24pO0liKG4uY29udGV4dCk7bi5jb250ZXh0W24ubmFtZV09YTtyZXR1cm4gYj97dmFsdWU6YX06YX07Y2FzZSBzLkFycmF5RXhwcmVzc2lvbjpyZXR1cm4gZz1bXSxxKGEuZWxlbWVudHMsCmZ1bmN0aW9uKGEpe2cucHVzaChmLnJlY3Vyc2UoYSkpfSksZnVuY3Rpb24oYSxjLGQsZSl7Zm9yKHZhciBmPVtdLHA9MDtwPGcubGVuZ3RoOysrcClmLnB1c2goZ1twXShhLGMsZCxlKSk7cmV0dXJuIGI/e3ZhbHVlOmZ9OmZ9O2Nhc2Ugcy5PYmplY3RFeHByZXNzaW9uOnJldHVybiBnPVtdLHEoYS5wcm9wZXJ0aWVzLGZ1bmN0aW9uKGEpe2EuY29tcHV0ZWQ/Zy5wdXNoKHtrZXk6Zi5yZWN1cnNlKGEua2V5KSxjb21wdXRlZDohMCx2YWx1ZTpmLnJlY3Vyc2UoYS52YWx1ZSl9KTpnLnB1c2goe2tleTphLmtleS50eXBlPT09cy5JZGVudGlmaWVyP2Eua2V5Lm5hbWU6IiIrYS5rZXkudmFsdWUsY29tcHV0ZWQ6ITEsdmFsdWU6Zi5yZWN1cnNlKGEudmFsdWUpfSl9KSxmdW5jdGlvbihhLGMsZCxlKXtmb3IodmFyIGY9e30scD0wO3A8Zy5sZW5ndGg7KytwKWdbcF0uY29tcHV0ZWQ/ZltnW3BdLmtleShhLGMsZCxlKV09Z1twXS52YWx1ZShhLGMsZCxlKTpmW2dbcF0ua2V5XT1nW3BdLnZhbHVlKGEsCmMsZCxlKTtyZXR1cm4gYj97dmFsdWU6Zn06Zn07Y2FzZSBzLlRoaXNFeHByZXNzaW9uOnJldHVybiBmdW5jdGlvbihhKXtyZXR1cm4gYj97dmFsdWU6YX06YX07Y2FzZSBzLkxvY2Fsc0V4cHJlc3Npb246cmV0dXJuIGZ1bmN0aW9uKGEsYyl7cmV0dXJuIGI/e3ZhbHVlOmN9OmN9O2Nhc2Ugcy5OR1ZhbHVlUGFyYW1ldGVyOnJldHVybiBmdW5jdGlvbihhLGMsZCl7cmV0dXJuIGI/e3ZhbHVlOmR9OmR9fX0sInVuYXJ5KyI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZnVuY3Rpb24oZCxjLGUsZil7ZD1hKGQsYyxlLGYpO2Q9dyhkKT8rZDowO3JldHVybiBiP3t2YWx1ZTpkfTpkfX0sInVuYXJ5LSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZnVuY3Rpb24oZCxjLGUsZil7ZD1hKGQsYyxlLGYpO2Q9dyhkKT8tZDowO3JldHVybiBiP3t2YWx1ZTpkfTpkfX0sInVuYXJ5ISI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZnVuY3Rpb24oZCxjLGUsZil7ZD0hYShkLGMsZSxmKTtyZXR1cm4gYj97dmFsdWU6ZH06CmR9fSwiYmluYXJ5KyI6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBmdW5jdGlvbihjLGUsZixnKXt2YXIgaD1hKGMsZSxmLGcpO2M9YihjLGUsZixnKTtoPW9kKGgsYyk7cmV0dXJuIGQ/e3ZhbHVlOmh9Omh9fSwiYmluYXJ5LSI6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBmdW5jdGlvbihjLGUsZixnKXt2YXIgaD1hKGMsZSxmLGcpO2M9YihjLGUsZixnKTtoPSh3KGgpP2g6MCktKHcoYyk/YzowKTtyZXR1cm4gZD97dmFsdWU6aH06aH19LCJiaW5hcnkqIjpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGZ1bmN0aW9uKGMsZSxmLGcpe2M9YShjLGUsZixnKSpiKGMsZSxmLGcpO3JldHVybiBkP3t2YWx1ZTpjfTpjfX0sImJpbmFyeS8iOmZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gZnVuY3Rpb24oYyxlLGYsZyl7Yz1hKGMsZSxmLGcpL2IoYyxlLGYsZyk7cmV0dXJuIGQ/e3ZhbHVlOmN9OmN9fSwiYmluYXJ5JSI6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBmdW5jdGlvbihjLGUsZixnKXtjPWEoYyxlLApmLGcpJWIoYyxlLGYsZyk7cmV0dXJuIGQ/e3ZhbHVlOmN9OmN9fSwiYmluYXJ5PT09IjpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGZ1bmN0aW9uKGMsZSxmLGcpe2M9YShjLGUsZixnKT09PWIoYyxlLGYsZyk7cmV0dXJuIGQ/e3ZhbHVlOmN9OmN9fSwiYmluYXJ5IT09IjpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGZ1bmN0aW9uKGMsZSxmLGcpe2M9YShjLGUsZixnKSE9PWIoYyxlLGYsZyk7cmV0dXJuIGQ/e3ZhbHVlOmN9OmN9fSwiYmluYXJ5PT0iOmZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gZnVuY3Rpb24oYyxlLGYsZyl7Yz1hKGMsZSxmLGcpPT1iKGMsZSxmLGcpO3JldHVybiBkP3t2YWx1ZTpjfTpjfX0sImJpbmFyeSE9IjpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGZ1bmN0aW9uKGMsZSxmLGcpe2M9YShjLGUsZixnKSE9YihjLGUsZixnKTtyZXR1cm4gZD97dmFsdWU6Y306Y319LCJiaW5hcnk8IjpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGZ1bmN0aW9uKGMsZSxmLGcpe2M9YShjLGUsCmYsZyk8YihjLGUsZixnKTtyZXR1cm4gZD97dmFsdWU6Y306Y319LCJiaW5hcnk+IjpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGZ1bmN0aW9uKGMsZSxmLGcpe2M9YShjLGUsZixnKT5iKGMsZSxmLGcpO3JldHVybiBkP3t2YWx1ZTpjfTpjfX0sImJpbmFyeTw9IjpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGZ1bmN0aW9uKGMsZSxmLGcpe2M9YShjLGUsZixnKTw9YihjLGUsZixnKTtyZXR1cm4gZD97dmFsdWU6Y306Y319LCJiaW5hcnk+PSI6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBmdW5jdGlvbihjLGUsZixnKXtjPWEoYyxlLGYsZyk+PWIoYyxlLGYsZyk7cmV0dXJuIGQ/e3ZhbHVlOmN9OmN9fSwiYmluYXJ5JiYiOmZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gZnVuY3Rpb24oYyxlLGYsZyl7Yz1hKGMsZSxmLGcpJiZiKGMsZSxmLGcpO3JldHVybiBkP3t2YWx1ZTpjfTpjfX0sImJpbmFyeXx8IjpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGZ1bmN0aW9uKGMsZSxmLGcpe2M9YShjLGUsZixnKXx8CmIoYyxlLGYsZyk7cmV0dXJuIGQ/e3ZhbHVlOmN9OmN9fSwidGVybmFyeT86IjpmdW5jdGlvbihhLGIsZCxjKXtyZXR1cm4gZnVuY3Rpb24oZSxmLGcsaCl7ZT1hKGUsZixnLGgpP2IoZSxmLGcsaCk6ZChlLGYsZyxoKTtyZXR1cm4gYz97dmFsdWU6ZX06ZX19LHZhbHVlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGI/e2NvbnRleHQ6dm9pZCAwLG5hbWU6dm9pZCAwLHZhbHVlOmF9OmF9fSxpZGVudGlmaWVyOmZ1bmN0aW9uKGEsYixkLGMsZSl7cmV0dXJuIGZ1bmN0aW9uKGYsZyxoLGspe2Y9ZyYmYSBpbiBnP2c6ZjtjJiYxIT09YyYmZiYmIWZbYV0mJihmW2FdPXt9KTtnPWY/ZlthXTp2b2lkIDA7YiYmcmEoZyxlKTtyZXR1cm4gZD97Y29udGV4dDpmLG5hbWU6YSx2YWx1ZTpnfTpnfX0sY29tcHV0ZWRNZW1iZXI6ZnVuY3Rpb24oYSxiLGQsYyxlKXtyZXR1cm4gZnVuY3Rpb24oZixnLGgsayl7dmFyIGw9YShmLGcsaCxrKSxtLG47bnVsbCE9bCYmKG09YihmLApnLGgsayksbSs9IiIsU2EobSxlKSxjJiYxIT09YyYmKEliKGwpLGwmJiFsW21dJiYobFttXT17fSkpLG49bFttXSxyYShuLGUpKTtyZXR1cm4gZD97Y29udGV4dDpsLG5hbWU6bSx2YWx1ZTpufTpufX0sbm9uQ29tcHV0ZWRNZW1iZXI6ZnVuY3Rpb24oYSxiLGQsYyxlLGYpe3JldHVybiBmdW5jdGlvbihnLGgsayxsKXtnPWEoZyxoLGssbCk7ZSYmMSE9PWUmJihJYihnKSxnJiYhZ1tiXSYmKGdbYl09e30pKTtoPW51bGwhPWc/Z1tiXTp2b2lkIDA7KGR8fEpiKGIpKSYmcmEoaCxmKTtyZXR1cm4gYz97Y29udGV4dDpnLG5hbWU6Yix2YWx1ZTpofTpofX0saW5wdXRzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGQsYyxlLGYpe3JldHVybiBmP2ZbYl06YShkLGMsZSl9fX07dmFyIGtjPWZ1bmN0aW9uKGEsYixkKXt0aGlzLmxleGVyPWE7dGhpcy4kZmlsdGVyPWI7dGhpcy5vcHRpb25zPWQ7dGhpcy5hc3Q9bmV3IHMoYSxkKTt0aGlzLmFzdENvbXBpbGVyPWQuY3NwP25ldyB1ZCh0aGlzLmFzdCwKYik6bmV3IHRkKHRoaXMuYXN0LGIpfTtrYy5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOmtjLHBhcnNlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmFzdENvbXBpbGVyLmNvbXBpbGUoYSx0aGlzLm9wdGlvbnMuZXhwZW5zaXZlQ2hlY2tzKX19O3ZhciBuZz1PYmplY3QucHJvdG90eXBlLnZhbHVlT2Ysc2E9TigiJHNjZSIpLGxhPXtIVE1MOiJodG1sIixDU1M6ImNzcyIsVVJMOiJ1cmwiLFJFU09VUkNFX1VSTDoicmVzb3VyY2VVcmwiLEpTOiJqcyJ9LHBnPU4oIiRjb21waWxlIiksJD1DLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKSx5ZD1ZKEMubG9jYXRpb24uaHJlZik7emQuJGluamVjdD1bIiRkb2N1bWVudCJdO01jLiRpbmplY3Q9WyIkcHJvdmlkZSJdO3ZhciBHZD0yMixGZD0iLiIsbWM9IjAiO0FkLiRpbmplY3Q9WyIkbG9jYWxlIl07Q2QuJGluamVjdD1bIiRsb2NhbGUiXTt2YXIgQWc9e3l5eXk6YmEoIkZ1bGxZZWFyIiw0LDAsITEsITApLHl5OmJhKCJGdWxsWWVhciIsMiwwLAohMCwhMCkseTpiYSgiRnVsbFllYXIiLDEsMCwhMSwhMCksTU1NTTprYigiTW9udGgiKSxNTU06a2IoIk1vbnRoIiwhMCksTU06YmEoIk1vbnRoIiwyLDEpLE06YmEoIk1vbnRoIiwxLDEpLExMTEw6a2IoIk1vbnRoIiwhMSwhMCksZGQ6YmEoIkRhdGUiLDIpLGQ6YmEoIkRhdGUiLDEpLEhIOmJhKCJIb3VycyIsMiksSDpiYSgiSG91cnMiLDEpLGhoOmJhKCJIb3VycyIsMiwtMTIpLGg6YmEoIkhvdXJzIiwxLC0xMiksbW06YmEoIk1pbnV0ZXMiLDIpLG06YmEoIk1pbnV0ZXMiLDEpLHNzOmJhKCJTZWNvbmRzIiwyKSxzOmJhKCJTZWNvbmRzIiwxKSxzc3M6YmEoIk1pbGxpc2Vjb25kcyIsMyksRUVFRTprYigiRGF5IiksRUVFOmtiKCJEYXkiLCEwKSxhOmZ1bmN0aW9uKGEsYil7cmV0dXJuIDEyPmEuZ2V0SG91cnMoKT9iLkFNUE1TWzBdOmIuQU1QTVNbMV19LFo6ZnVuY3Rpb24oYSxiLGQpe2E9LTEqZDtyZXR1cm4gYT0oMDw9YT8iKyI6IiIpKyhLYihNYXRoWzA8YT8iZmxvb3IiOiJjZWlsIl0oYS8KNjApLDIpK0tiKE1hdGguYWJzKGElNjApLDIpKX0sd3c6SWQoMiksdzpJZCgxKSxHOm5jLEdHOm5jLEdHRzpuYyxHR0dHOmZ1bmN0aW9uKGEsYil7cmV0dXJuIDA+PWEuZ2V0RnVsbFllYXIoKT9iLkVSQU5BTUVTWzBdOmIuRVJBTkFNRVNbMV19fSx6Zz0vKCg/OlteeU1MZEhobXNhWkV3RyddKyl8KD86Jyg/OlteJ118JycpKicpfCg/OkUrfHkrfE0rfEwrfGQrfEgrfGgrfG0rfHMrfGF8WnxHK3x3KykpKC4qKS8seWc9L15cLT9cZCskLztCZC4kaW5qZWN0PVsiJGxvY2FsZSJdO3ZhciB0Zz1oYShRKSx1Zz1oYSh1Yik7RGQuJGluamVjdD1bIiRwYXJzZSJdO3ZhciBvZT1oYSh7cmVzdHJpY3Q6IkUiLGNvbXBpbGU6ZnVuY3Rpb24oYSxiKXtpZighYi5ocmVmJiYhYi54bGlua0hyZWYpcmV0dXJuIGZ1bmN0aW9uKGEsYil7aWYoImEiPT09YlswXS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXt2YXIgZT0iW29iamVjdCBTVkdBbmltYXRlZFN0cmluZ10iPT09bWEuY2FsbChiLnByb3AoImhyZWYiKSk/CiJ4bGluazpocmVmIjoiaHJlZiI7Yi5vbigiY2xpY2siLGZ1bmN0aW9uKGEpe2IuYXR0cihlKXx8YS5wcmV2ZW50RGVmYXVsdCgpfSl9fX19KSx2Yj17fTtxKEViLGZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gZChhLGQsZSl7YS4kd2F0Y2goZVtjXSxmdW5jdGlvbihhKXtlLiRzZXQoYiwhIWEpfSl9aWYoIm11bHRpcGxlIiE9YSl7dmFyIGM9QWEoIm5nLSIrYiksZT1kOyJjaGVja2VkIj09PWEmJihlPWZ1bmN0aW9uKGEsYixlKXtlLm5nTW9kZWwhPT1lW2NdJiZkKGEsYixlKX0pO3ZiW2NdPWZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OiJBIixwcmlvcml0eToxMDAsbGluazplfX19fSk7cShiZCxmdW5jdGlvbihhLGIpe3ZiW2JdPWZ1bmN0aW9uKCl7cmV0dXJue3ByaW9yaXR5OjEwMCxsaW5rOmZ1bmN0aW9uKGEsYyxlKXtpZigibmdQYXR0ZXJuIj09PWImJiIvIj09ZS5uZ1BhdHRlcm4uY2hhckF0KDApJiYoYz1lLm5nUGF0dGVybi5tYXRjaChDZykpKXtlLiRzZXQoIm5nUGF0dGVybiIsCm5ldyBSZWdFeHAoY1sxXSxjWzJdKSk7cmV0dXJufWEuJHdhdGNoKGVbYl0sZnVuY3Rpb24oYSl7ZS4kc2V0KGIsYSl9KX19fX0pO3EoWyJzcmMiLCJzcmNzZXQiLCJocmVmIl0sZnVuY3Rpb24oYSl7dmFyIGI9QWEoIm5nLSIrYSk7dmJbYl09ZnVuY3Rpb24oKXtyZXR1cm57cHJpb3JpdHk6OTksbGluazpmdW5jdGlvbihkLGMsZSl7dmFyIGY9YSxnPWE7ImhyZWYiPT09YSYmIltvYmplY3QgU1ZHQW5pbWF0ZWRTdHJpbmddIj09PW1hLmNhbGwoYy5wcm9wKCJocmVmIikpJiYoZz0ieGxpbmtIcmVmIixlLiRhdHRyW2ddPSJ4bGluazpocmVmIixmPW51bGwpO2UuJG9ic2VydmUoYixmdW5jdGlvbihiKXtiPyhlLiRzZXQoZyxiKSxFYSYmZiYmYy5wcm9wKGYsZVtnXSkpOiJocmVmIj09PWEmJmUuJHNldChnLG51bGwpfSl9fX19KTt2YXIgTGI9eyRhZGRDb250cm9sOkEsJCRyZW5hbWVDb250cm9sOmZ1bmN0aW9uKGEsYil7YS4kbmFtZT1ifSwkcmVtb3ZlQ29udHJvbDpBLCRzZXRWYWxpZGl0eTpBLAokc2V0RGlydHk6QSwkc2V0UHJpc3RpbmU6QSwkc2V0U3VibWl0dGVkOkF9O0pkLiRpbmplY3Q9WyIkZWxlbWVudCIsIiRhdHRycyIsIiRzY29wZSIsIiRhbmltYXRlIiwiJGludGVycG9sYXRlIl07dmFyIFNkPWZ1bmN0aW9uKGEpe3JldHVyblsiJHRpbWVvdXQiLCIkcGFyc2UiLGZ1bmN0aW9uKGIsZCl7ZnVuY3Rpb24gYyhhKXtyZXR1cm4iIj09PWE/ZCgndGhpc1siIl0nKS5hc3NpZ246ZChhKS5hc3NpZ258fEF9cmV0dXJue25hbWU6ImZvcm0iLHJlc3RyaWN0OmE/IkVBQyI6IkUiLHJlcXVpcmU6WyJmb3JtIiwiXl4/Zm9ybSJdLGNvbnRyb2xsZXI6SmQsY29tcGlsZTpmdW5jdGlvbihkLGYpe2QuYWRkQ2xhc3MoVWEpLmFkZENsYXNzKG9iKTt2YXIgZz1mLm5hbWU/Im5hbWUiOmEmJmYubmdGb3JtPyJuZ0Zvcm0iOiExO3JldHVybntwcmU6ZnVuY3Rpb24oYSxkLGUsZil7dmFyIG49ZlswXTtpZighKCJhY3Rpb24iaW4gZSkpe3ZhciBwPWZ1bmN0aW9uKGIpe2EuJGFwcGx5KGZ1bmN0aW9uKCl7bi4kY29tbWl0Vmlld1ZhbHVlKCk7Cm4uJHNldFN1Ym1pdHRlZCgpfSk7Yi5wcmV2ZW50RGVmYXVsdCgpfTtkWzBdLmFkZEV2ZW50TGlzdGVuZXIoInN1Ym1pdCIscCwhMSk7ZC5vbigiJGRlc3Ryb3kiLGZ1bmN0aW9uKCl7YihmdW5jdGlvbigpe2RbMF0ucmVtb3ZlRXZlbnRMaXN0ZW5lcigic3VibWl0IixwLCExKX0sMCwhMSl9KX0oZlsxXXx8bi4kJHBhcmVudEZvcm0pLiRhZGRDb250cm9sKG4pO3ZhciBxPWc/YyhuLiRuYW1lKTpBO2cmJihxKGEsbiksZS4kb2JzZXJ2ZShnLGZ1bmN0aW9uKGIpe24uJG5hbWUhPT1iJiYocShhLHZvaWQgMCksbi4kJHBhcmVudEZvcm0uJCRyZW5hbWVDb250cm9sKG4sYikscT1jKG4uJG5hbWUpLHEoYSxuKSl9KSk7ZC5vbigiJGRlc3Ryb3kiLGZ1bmN0aW9uKCl7bi4kJHBhcmVudEZvcm0uJHJlbW92ZUNvbnRyb2wobik7cShhLHZvaWQgMCk7UyhuLExiKX0pfX19fX1dfSxwZT1TZCgpLENlPVNkKCEwKSxCZz0vXlxkezQsfS1bMDFdXGQtWzAtM11cZFRbMC0yXVxkOlswLTVdXGQ6WzAtNV1cZFwuXGQrKD86WystXVswLTJdXGQ6WzAtNV1cZHxaKSQvLApLZz0vXlthLXpdW2EtelxkListXSo6XC8qKD86W146QF0rKD86OlteQF0rKT9AKT8oPzpbXlxzOi8/I10rfFxbW2EtZlxkOl0rXF0pKD86OlxkKyk/KD86XC9bXj8jXSopPyg/Olw/W14jXSopPyg/OiMuKik/JC9pLExnPS9eKD89LnsxLDI1NH0kKSg/PS57MSw2NH1AKVstISMkJSYnKitcLzAtOT0/QS1aXl9gYS16e3x9fl0rKFwuWy0hIyQlJicqK1wvMC05PT9BLVpeX2BhLXp7fH1+XSspKkBbQS1aYS16MC05XShbQS1aYS16MC05LV17MCw2MX1bQS1aYS16MC05XSk/KFwuW0EtWmEtejAtOV0oW0EtWmEtejAtOS1dezAsNjF9W0EtWmEtejAtOV0pPykqJC8sTWc9L15ccyooXC18XCspPyhcZCt8KFxkKihcLlxkKikpKShbZUVdWystXT9cZCspP1xzKiQvLFRkPS9eKFxkezQsfSktKFxkezJ9KS0oXGR7Mn0pJC8sVWQ9L14oXGR7NCx9KS0oXGRcZCktKFxkXGQpVChcZFxkKTooXGRcZCkoPzo6KFxkXGQpKFwuXGR7MSwzfSk/KT8kLyxyYz0vXihcZHs0LH0pLVcoXGRcZCkkLyxWZD0vXihcZHs0LH0pLShcZFxkKSQvLApXZD0vXihcZFxkKTooXGRcZCkoPzo6KFxkXGQpKFwuXGR7MSwzfSk/KT8kLyxMZD1VKCk7cShbImRhdGUiLCJkYXRldGltZS1sb2NhbCIsIm1vbnRoIiwidGltZSIsIndlZWsiXSxmdW5jdGlvbihhKXtMZFthXT0hMH0pO3ZhciBYZD17dGV4dDpmdW5jdGlvbihhLGIsZCxjLGUsZil7bGIoYSxiLGQsYyxlLGYpO3BjKGMpfSxkYXRlOm1iKCJkYXRlIixUZCxOYihUZCxbInl5eXkiLCJNTSIsImRkIl0pLCJ5eXl5LU1NLWRkIiksImRhdGV0aW1lLWxvY2FsIjptYigiZGF0ZXRpbWVsb2NhbCIsVWQsTmIoVWQsInl5eXkgTU0gZGQgSEggbW0gc3Mgc3NzIi5zcGxpdCgiICIpKSwieXl5eS1NTS1kZFRISDptbTpzcy5zc3MiKSx0aW1lOm1iKCJ0aW1lIixXZCxOYihXZCxbIkhIIiwibW0iLCJzcyIsInNzcyJdKSwiSEg6bW06c3Muc3NzIiksd2VlazptYigid2VlayIscmMsZnVuY3Rpb24oYSxiKXtpZihkYShhKSlyZXR1cm4gYTtpZihHKGEpKXtyYy5sYXN0SW5kZXg9MDt2YXIgZD1yYy5leGVjKGEpOwppZihkKXt2YXIgYz0rZFsxXSxlPStkWzJdLGY9ZD0wLGc9MCxoPTAsaz1IZChjKSxlPTcqKGUtMSk7YiYmKGQ9Yi5nZXRIb3VycygpLGY9Yi5nZXRNaW51dGVzKCksZz1iLmdldFNlY29uZHMoKSxoPWIuZ2V0TWlsbGlzZWNvbmRzKCkpO3JldHVybiBuZXcgRGF0ZShjLDAsay5nZXREYXRlKCkrZSxkLGYsZyxoKX19cmV0dXJuIE5hTn0sInl5eXktV3d3IiksbW9udGg6bWIoIm1vbnRoIixWZCxOYihWZCxbInl5eXkiLCJNTSJdKSwieXl5eS1NTSIpLG51bWJlcjpmdW5jdGlvbihhLGIsZCxjLGUsZil7TWQoYSxiLGQsYyk7bGIoYSxiLGQsYyxlLGYpO2MuJCRwYXJzZXJOYW1lPSJudW1iZXIiO2MuJHBhcnNlcnMucHVzaChmdW5jdGlvbihhKXtpZihjLiRpc0VtcHR5KGEpKXJldHVybiBudWxsO2lmKE1nLnRlc3QoYSkpcmV0dXJuIHBhcnNlRmxvYXQoYSl9KTtjLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24oYSl7aWYoIWMuJGlzRW1wdHkoYSkpe2lmKCFUKGEpKXRocm93IG5iKCJudW1mbXQiLAphKTthPWEudG9TdHJpbmcoKX1yZXR1cm4gYX0pO2lmKHcoZC5taW4pfHxkLm5nTWluKXt2YXIgZztjLiR2YWxpZGF0b3JzLm1pbj1mdW5jdGlvbihhKXtyZXR1cm4gYy4kaXNFbXB0eShhKXx8eShnKXx8YT49Z307ZC4kb2JzZXJ2ZSgibWluIixmdW5jdGlvbihhKXt3KGEpJiYhVChhKSYmKGE9cGFyc2VGbG9hdChhKSk7Zz1UKGEpJiYhaXNOYU4oYSk/YTp2b2lkIDA7Yy4kdmFsaWRhdGUoKX0pfWlmKHcoZC5tYXgpfHxkLm5nTWF4KXt2YXIgaDtjLiR2YWxpZGF0b3JzLm1heD1mdW5jdGlvbihhKXtyZXR1cm4gYy4kaXNFbXB0eShhKXx8eShoKXx8YTw9aH07ZC4kb2JzZXJ2ZSgibWF4IixmdW5jdGlvbihhKXt3KGEpJiYhVChhKSYmKGE9cGFyc2VGbG9hdChhKSk7aD1UKGEpJiYhaXNOYU4oYSk/YTp2b2lkIDA7Yy4kdmFsaWRhdGUoKX0pfX0sdXJsOmZ1bmN0aW9uKGEsYixkLGMsZSxmKXtsYihhLGIsZCxjLGUsZik7cGMoYyk7Yy4kJHBhcnNlck5hbWU9InVybCI7Yy4kdmFsaWRhdG9ycy51cmw9CmZ1bmN0aW9uKGEsYil7dmFyIGQ9YXx8YjtyZXR1cm4gYy4kaXNFbXB0eShkKXx8S2cudGVzdChkKX19LGVtYWlsOmZ1bmN0aW9uKGEsYixkLGMsZSxmKXtsYihhLGIsZCxjLGUsZik7cGMoYyk7Yy4kJHBhcnNlck5hbWU9ImVtYWlsIjtjLiR2YWxpZGF0b3JzLmVtYWlsPWZ1bmN0aW9uKGEsYil7dmFyIGQ9YXx8YjtyZXR1cm4gYy4kaXNFbXB0eShkKXx8TGcudGVzdChkKX19LHJhZGlvOmZ1bmN0aW9uKGEsYixkLGMpe3koZC5uYW1lKSYmYi5hdHRyKCJuYW1lIiwrK3BiKTtiLm9uKCJjbGljayIsZnVuY3Rpb24oYSl7YlswXS5jaGVja2VkJiZjLiRzZXRWaWV3VmFsdWUoZC52YWx1ZSxhJiZhLnR5cGUpfSk7Yy4kcmVuZGVyPWZ1bmN0aW9uKCl7YlswXS5jaGVja2VkPWQudmFsdWU9PWMuJHZpZXdWYWx1ZX07ZC4kb2JzZXJ2ZSgidmFsdWUiLGMuJHJlbmRlcil9LGNoZWNrYm94OmZ1bmN0aW9uKGEsYixkLGMsZSxmLGcsaCl7dmFyIGs9TmQoaCxhLCJuZ1RydWVWYWx1ZSIsZC5uZ1RydWVWYWx1ZSwKITApLGw9TmQoaCxhLCJuZ0ZhbHNlVmFsdWUiLGQubmdGYWxzZVZhbHVlLCExKTtiLm9uKCJjbGljayIsZnVuY3Rpb24oYSl7Yy4kc2V0Vmlld1ZhbHVlKGJbMF0uY2hlY2tlZCxhJiZhLnR5cGUpfSk7Yy4kcmVuZGVyPWZ1bmN0aW9uKCl7YlswXS5jaGVja2VkPWMuJHZpZXdWYWx1ZX07Yy4kaXNFbXB0eT1mdW5jdGlvbihhKXtyZXR1cm4hMT09PWF9O2MuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbihhKXtyZXR1cm4gbmEoYSxrKX0pO2MuJHBhcnNlcnMucHVzaChmdW5jdGlvbihhKXtyZXR1cm4gYT9rOmx9KX0saGlkZGVuOkEsYnV0dG9uOkEsc3VibWl0OkEscmVzZXQ6QSxmaWxlOkF9LEdjPVsiJGJyb3dzZXIiLCIkc25pZmZlciIsIiRmaWx0ZXIiLCIkcGFyc2UiLGZ1bmN0aW9uKGEsYixkLGMpe3JldHVybntyZXN0cmljdDoiRSIscmVxdWlyZTpbIj9uZ01vZGVsIl0sbGluazp7cHJlOmZ1bmN0aW9uKGUsZixnLGgpe2hbMF0mJihYZFtRKGcudHlwZSldfHxYZC50ZXh0KShlLGYsCmcsaFswXSxiLGEsZCxjKX19fX1dLE5nPS9eKHRydWV8ZmFsc2V8XGQrKSQvLFVlPWZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OiJBIixwcmlvcml0eToxMDAsY29tcGlsZTpmdW5jdGlvbihhLGIpe3JldHVybiBOZy50ZXN0KGIubmdWYWx1ZSk/ZnVuY3Rpb24oYSxiLGUpe2UuJHNldCgidmFsdWUiLGEuJGV2YWwoZS5uZ1ZhbHVlKSl9OmZ1bmN0aW9uKGEsYixlKXthLiR3YXRjaChlLm5nVmFsdWUsZnVuY3Rpb24oYSl7ZS4kc2V0KCJ2YWx1ZSIsYSl9KX19fX0sdWU9WyIkY29tcGlsZSIsZnVuY3Rpb24oYSl7cmV0dXJue3Jlc3RyaWN0OiJBQyIsY29tcGlsZTpmdW5jdGlvbihiKXthLiQkYWRkQmluZGluZ0NsYXNzKGIpO3JldHVybiBmdW5jdGlvbihiLGMsZSl7YS4kJGFkZEJpbmRpbmdJbmZvKGMsZS5uZ0JpbmQpO2M9Y1swXTtiLiR3YXRjaChlLm5nQmluZCxmdW5jdGlvbihhKXtjLnRleHRDb250ZW50PXkoYSk/IiI6YX0pfX19fV0sd2U9WyIkaW50ZXJwb2xhdGUiLCIkY29tcGlsZSIsCmZ1bmN0aW9uKGEsYil7cmV0dXJue2NvbXBpbGU6ZnVuY3Rpb24oZCl7Yi4kJGFkZEJpbmRpbmdDbGFzcyhkKTtyZXR1cm4gZnVuY3Rpb24oYyxkLGYpe2M9YShkLmF0dHIoZi4kYXR0ci5uZ0JpbmRUZW1wbGF0ZSkpO2IuJCRhZGRCaW5kaW5nSW5mbyhkLGMuZXhwcmVzc2lvbnMpO2Q9ZFswXTtmLiRvYnNlcnZlKCJuZ0JpbmRUZW1wbGF0ZSIsZnVuY3Rpb24oYSl7ZC50ZXh0Q29udGVudD15KGEpPyIiOmF9KX19fX1dLHZlPVsiJHNjZSIsIiRwYXJzZSIsIiRjb21waWxlIixmdW5jdGlvbihhLGIsZCl7cmV0dXJue3Jlc3RyaWN0OiJBIixjb21waWxlOmZ1bmN0aW9uKGMsZSl7dmFyIGY9YihlLm5nQmluZEh0bWwpLGc9YihlLm5nQmluZEh0bWwsZnVuY3Rpb24oYil7cmV0dXJuIGEudmFsdWVPZihiKX0pO2QuJCRhZGRCaW5kaW5nQ2xhc3MoYyk7cmV0dXJuIGZ1bmN0aW9uKGIsYyxlKXtkLiQkYWRkQmluZGluZ0luZm8oYyxlLm5nQmluZEh0bWwpO2IuJHdhdGNoKGcsZnVuY3Rpb24oKXt2YXIgZD0KZihiKTtjLmh0bWwoYS5nZXRUcnVzdGVkSHRtbChkKXx8IiIpfSl9fX19XSxUZT1oYSh7cmVzdHJpY3Q6IkEiLHJlcXVpcmU6Im5nTW9kZWwiLGxpbms6ZnVuY3Rpb24oYSxiLGQsYyl7Yy4kdmlld0NoYW5nZUxpc3RlbmVycy5wdXNoKGZ1bmN0aW9uKCl7YS4kZXZhbChkLm5nQ2hhbmdlKX0pfX0pLHhlPXFjKCIiLCEwKSx6ZT1xYygiT2RkIiwwKSx5ZT1xYygiRXZlbiIsMSksQWU9VGEoe2NvbXBpbGU6ZnVuY3Rpb24oYSxiKXtiLiRzZXQoIm5nQ2xvYWsiLHZvaWQgMCk7YS5yZW1vdmVDbGFzcygibmctY2xvYWsiKX19KSxCZT1bZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6IkEiLHNjb3BlOiEwLGNvbnRyb2xsZXI6IkAiLHByaW9yaXR5OjUwMH19XSxMYz17fSxPZz17Ymx1cjohMCxmb2N1czohMH07cSgiY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNldXAgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlbW92ZSBtb3VzZWVudGVyIG1vdXNlbGVhdmUga2V5ZG93biBrZXl1cCBrZXlwcmVzcyBzdWJtaXQgZm9jdXMgYmx1ciBjb3B5IGN1dCBwYXN0ZSIuc3BsaXQoIiAiKSwKZnVuY3Rpb24oYSl7dmFyIGI9QWEoIm5nLSIrYSk7TGNbYl09WyIkcGFyc2UiLCIkcm9vdFNjb3BlIixmdW5jdGlvbihkLGMpe3JldHVybntyZXN0cmljdDoiQSIsY29tcGlsZTpmdW5jdGlvbihlLGYpe3ZhciBnPWQoZltiXSxudWxsLCEwKTtyZXR1cm4gZnVuY3Rpb24oYixkKXtkLm9uKGEsZnVuY3Rpb24oZCl7dmFyIGU9ZnVuY3Rpb24oKXtnKGIseyRldmVudDpkfSl9O09nW2FdJiZjLiQkcGhhc2U/Yi4kZXZhbEFzeW5jKGUpOmIuJGFwcGx5KGUpfSl9fX19XX0pO3ZhciBFZT1bIiRhbmltYXRlIiwiJGNvbXBpbGUiLGZ1bmN0aW9uKGEsYil7cmV0dXJue211bHRpRWxlbWVudDohMCx0cmFuc2NsdWRlOiJlbGVtZW50Iixwcmlvcml0eTo2MDAsdGVybWluYWw6ITAscmVzdHJpY3Q6IkEiLCQkdGxiOiEwLGxpbms6ZnVuY3Rpb24oZCxjLGUsZixnKXt2YXIgaCxrLGw7ZC4kd2F0Y2goZS5uZ0lmLGZ1bmN0aW9uKGQpe2Q/a3x8ZyhmdW5jdGlvbihkLGYpe2s9ZjtkW2QubGVuZ3RoKytdPQpiLiQkY3JlYXRlQ29tbWVudCgiZW5kIG5nSWYiLGUubmdJZik7aD17Y2xvbmU6ZH07YS5lbnRlcihkLGMucGFyZW50KCksYyl9KToobCYmKGwucmVtb3ZlKCksbD1udWxsKSxrJiYoay4kZGVzdHJveSgpLGs9bnVsbCksaCYmKGw9dGIoaC5jbG9uZSksYS5sZWF2ZShsKS50aGVuKGZ1bmN0aW9uKCl7bD1udWxsfSksaD1udWxsKSl9KX19fV0sRmU9WyIkdGVtcGxhdGVSZXF1ZXN0IiwiJGFuY2hvclNjcm9sbCIsIiRhbmltYXRlIixmdW5jdGlvbihhLGIsZCl7cmV0dXJue3Jlc3RyaWN0OiJFQ0EiLHByaW9yaXR5OjQwMCx0ZXJtaW5hbDohMCx0cmFuc2NsdWRlOiJlbGVtZW50Iixjb250cm9sbGVyOmNhLm5vb3AsY29tcGlsZTpmdW5jdGlvbihjLGUpe3ZhciBmPWUubmdJbmNsdWRlfHxlLnNyYyxnPWUub25sb2FkfHwiIixoPWUuYXV0b3Njcm9sbDtyZXR1cm4gZnVuY3Rpb24oYyxlLG0sbixwKXt2YXIgcT0wLHMsQixyLHk9ZnVuY3Rpb24oKXtCJiYoQi5yZW1vdmUoKSxCPW51bGwpO3MmJgoocy4kZGVzdHJveSgpLHM9bnVsbCk7ciYmKGQubGVhdmUocikudGhlbihmdW5jdGlvbigpe0I9bnVsbH0pLEI9cixyPW51bGwpfTtjLiR3YXRjaChmLGZ1bmN0aW9uKGYpe3ZhciBtPWZ1bmN0aW9uKCl7IXcoaCl8fGgmJiFjLiRldmFsKGgpfHxiKCl9LHQ9KytxO2Y/KGEoZiwhMCkudGhlbihmdW5jdGlvbihhKXtpZighYy4kJGRlc3Ryb3llZCYmdD09PXEpe3ZhciBiPWMuJG5ldygpO24udGVtcGxhdGU9YTthPXAoYixmdW5jdGlvbihhKXt5KCk7ZC5lbnRlcihhLG51bGwsZSkudGhlbihtKX0pO3M9YjtyPWE7cy4kZW1pdCgiJGluY2x1ZGVDb250ZW50TG9hZGVkIixmKTtjLiRldmFsKGcpfX0sZnVuY3Rpb24oKXtjLiQkZGVzdHJveWVkfHx0IT09cXx8KHkoKSxjLiRlbWl0KCIkaW5jbHVkZUNvbnRlbnRFcnJvciIsZikpfSksYy4kZW1pdCgiJGluY2x1ZGVDb250ZW50UmVxdWVzdGVkIixmKSk6KHkoKSxuLnRlbXBsYXRlPW51bGwpfSl9fX19XSxXZT1bIiRjb21waWxlIixmdW5jdGlvbihhKXtyZXR1cm57cmVzdHJpY3Q6IkVDQSIsCnByaW9yaXR5Oi00MDAscmVxdWlyZToibmdJbmNsdWRlIixsaW5rOmZ1bmN0aW9uKGIsZCxjLGUpe21hLmNhbGwoZFswXSkubWF0Y2goL1NWRy8pPyhkLmVtcHR5KCksYShPYyhlLnRlbXBsYXRlLEMuZG9jdW1lbnQpLmNoaWxkTm9kZXMpKGIsZnVuY3Rpb24oYSl7ZC5hcHBlbmQoYSl9LHtmdXR1cmVQYXJlbnRFbGVtZW50OmR9KSk6KGQuaHRtbChlLnRlbXBsYXRlKSxhKGQuY29udGVudHMoKSkoYikpfX19XSxHZT1UYSh7cHJpb3JpdHk6NDUwLGNvbXBpbGU6ZnVuY3Rpb24oKXtyZXR1cm57cHJlOmZ1bmN0aW9uKGEsYixkKXthLiRldmFsKGQubmdJbml0KX19fX0pLFNlPWZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OiJBIixwcmlvcml0eToxMDAscmVxdWlyZToibmdNb2RlbCIsbGluazpmdW5jdGlvbihhLGIsZCxjKXt2YXIgZT1iLmF0dHIoZC4kYXR0ci5uZ0xpc3QpfHwiLCAiLGY9ImZhbHNlIiE9PWQubmdUcmltLGc9Zj9XKGUpOmU7Yy4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKGEpe2lmKCF5KGEpKXt2YXIgYj0KW107YSYmcShhLnNwbGl0KGcpLGZ1bmN0aW9uKGEpe2EmJmIucHVzaChmP1coYSk6YSl9KTtyZXR1cm4gYn19KTtjLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24oYSl7aWYoTChhKSlyZXR1cm4gYS5qb2luKGUpfSk7Yy4kaXNFbXB0eT1mdW5jdGlvbihhKXtyZXR1cm4hYXx8IWEubGVuZ3RofX19fSxvYj0ibmctdmFsaWQiLE9kPSJuZy1pbnZhbGlkIixVYT0ibmctcHJpc3RpbmUiLE1iPSJuZy1kaXJ0eSIsUWQ9Im5nLXBlbmRpbmciLG5iPU4oIm5nTW9kZWwiKSxQZz1bIiRzY29wZSIsIiRleGNlcHRpb25IYW5kbGVyIiwiJGF0dHJzIiwiJGVsZW1lbnQiLCIkcGFyc2UiLCIkYW5pbWF0ZSIsIiR0aW1lb3V0IiwiJHJvb3RTY29wZSIsIiRxIiwiJGludGVycG9sYXRlIixmdW5jdGlvbihhLGIsZCxjLGUsZixnLGgsayxsKXt0aGlzLiRtb2RlbFZhbHVlPXRoaXMuJHZpZXdWYWx1ZT1OdW1iZXIuTmFOO3RoaXMuJCRyYXdNb2RlbFZhbHVlPXZvaWQgMDt0aGlzLiR2YWxpZGF0b3JzPXt9Owp0aGlzLiRhc3luY1ZhbGlkYXRvcnM9e307dGhpcy4kcGFyc2Vycz1bXTt0aGlzLiRmb3JtYXR0ZXJzPVtdO3RoaXMuJHZpZXdDaGFuZ2VMaXN0ZW5lcnM9W107dGhpcy4kdW50b3VjaGVkPSEwO3RoaXMuJHRvdWNoZWQ9ITE7dGhpcy4kcHJpc3RpbmU9ITA7dGhpcy4kZGlydHk9ITE7dGhpcy4kdmFsaWQ9ITA7dGhpcy4kaW52YWxpZD0hMTt0aGlzLiRlcnJvcj17fTt0aGlzLiQkc3VjY2Vzcz17fTt0aGlzLiRwZW5kaW5nPXZvaWQgMDt0aGlzLiRuYW1lPWwoZC5uYW1lfHwiIiwhMSkoYSk7dGhpcy4kJHBhcmVudEZvcm09TGI7dmFyIG09ZShkLm5nTW9kZWwpLG49bS5hc3NpZ24scD1tLHU9bixzPW51bGwsQixyPXRoaXM7dGhpcy4kJHNldE9wdGlvbnM9ZnVuY3Rpb24oYSl7aWYoKHIuJG9wdGlvbnM9YSkmJmEuZ2V0dGVyU2V0dGVyKXt2YXIgYj1lKGQubmdNb2RlbCsiKCkiKSxmPWUoZC5uZ01vZGVsKyIoJCQkcCkiKTtwPWZ1bmN0aW9uKGEpe3ZhciBjPW0oYSk7eihjKSYmKGM9YihhKSk7CnJldHVybiBjfTt1PWZ1bmN0aW9uKGEsYil7eihtKGEpKT9mKGEseyQkJHA6Yn0pOm4oYSxiKX19ZWxzZSBpZighbS5hc3NpZ24pdGhyb3cgbmIoIm5vbmFzc2lnbiIsZC5uZ01vZGVsLHlhKGMpKTt9O3RoaXMuJHJlbmRlcj1BO3RoaXMuJGlzRW1wdHk9ZnVuY3Rpb24oYSl7cmV0dXJuIHkoYSl8fCIiPT09YXx8bnVsbD09PWF8fGEhPT1hfTt0aGlzLiQkdXBkYXRlRW1wdHlDbGFzc2VzPWZ1bmN0aW9uKGEpe3IuJGlzRW1wdHkoYSk/KGYucmVtb3ZlQ2xhc3MoYywibmctbm90LWVtcHR5IiksZi5hZGRDbGFzcyhjLCJuZy1lbXB0eSIpKTooZi5yZW1vdmVDbGFzcyhjLCJuZy1lbXB0eSIpLGYuYWRkQ2xhc3MoYywibmctbm90LWVtcHR5IikpfTt2YXIgSj0wO0tkKHtjdHJsOnRoaXMsJGVsZW1lbnQ6YyxzZXQ6ZnVuY3Rpb24oYSxiKXthW2JdPSEwfSx1bnNldDpmdW5jdGlvbihhLGIpe2RlbGV0ZSBhW2JdfSwkYW5pbWF0ZTpmfSk7dGhpcy4kc2V0UHJpc3RpbmU9ZnVuY3Rpb24oKXtyLiRkaXJ0eT0KITE7ci4kcHJpc3RpbmU9ITA7Zi5yZW1vdmVDbGFzcyhjLE1iKTtmLmFkZENsYXNzKGMsVWEpfTt0aGlzLiRzZXREaXJ0eT1mdW5jdGlvbigpe3IuJGRpcnR5PSEwO3IuJHByaXN0aW5lPSExO2YucmVtb3ZlQ2xhc3MoYyxVYSk7Zi5hZGRDbGFzcyhjLE1iKTtyLiQkcGFyZW50Rm9ybS4kc2V0RGlydHkoKX07dGhpcy4kc2V0VW50b3VjaGVkPWZ1bmN0aW9uKCl7ci4kdG91Y2hlZD0hMTtyLiR1bnRvdWNoZWQ9ITA7Zi5zZXRDbGFzcyhjLCJuZy11bnRvdWNoZWQiLCJuZy10b3VjaGVkIil9O3RoaXMuJHNldFRvdWNoZWQ9ZnVuY3Rpb24oKXtyLiR0b3VjaGVkPSEwO3IuJHVudG91Y2hlZD0hMTtmLnNldENsYXNzKGMsIm5nLXRvdWNoZWQiLCJuZy11bnRvdWNoZWQiKX07dGhpcy4kcm9sbGJhY2tWaWV3VmFsdWU9ZnVuY3Rpb24oKXtnLmNhbmNlbChzKTtyLiR2aWV3VmFsdWU9ci4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWU7ci4kcmVuZGVyKCl9O3RoaXMuJHZhbGlkYXRlPWZ1bmN0aW9uKCl7aWYoIVQoci4kbW9kZWxWYWx1ZSl8fAohaXNOYU4oci4kbW9kZWxWYWx1ZSkpe3ZhciBhPXIuJCRyYXdNb2RlbFZhbHVlLGI9ci4kdmFsaWQsYz1yLiRtb2RlbFZhbHVlLGQ9ci4kb3B0aW9ucyYmci4kb3B0aW9ucy5hbGxvd0ludmFsaWQ7ci4kJHJ1blZhbGlkYXRvcnMoYSxyLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZSxmdW5jdGlvbihlKXtkfHxiPT09ZXx8KHIuJG1vZGVsVmFsdWU9ZT9hOnZvaWQgMCxyLiRtb2RlbFZhbHVlIT09YyYmci4kJHdyaXRlTW9kZWxUb1Njb3BlKCkpfSl9fTt0aGlzLiQkcnVuVmFsaWRhdG9ycz1mdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZCgpe3ZhciBjPSEwO3Eoci4kdmFsaWRhdG9ycyxmdW5jdGlvbihkLGUpe3ZhciBnPWQoYSxiKTtjPWMmJmc7ZihlLGcpfSk7cmV0dXJuIGM/ITA6KHEoci4kYXN5bmNWYWxpZGF0b3JzLGZ1bmN0aW9uKGEsYil7ZihiLG51bGwpfSksITEpfWZ1bmN0aW9uIGUoKXt2YXIgYz1bXSxkPSEwO3Eoci4kYXN5bmNWYWxpZGF0b3JzLGZ1bmN0aW9uKGUsZyl7dmFyIGg9CmUoYSxiKTtpZighaHx8IXooaC50aGVuKSl0aHJvdyBuYigibm9wcm9taXNlIixoKTtmKGcsdm9pZCAwKTtjLnB1c2goaC50aGVuKGZ1bmN0aW9uKCl7ZihnLCEwKX0sZnVuY3Rpb24oKXtkPSExO2YoZywhMSl9KSl9KTtjLmxlbmd0aD9rLmFsbChjKS50aGVuKGZ1bmN0aW9uKCl7ZyhkKX0sQSk6ZyghMCl9ZnVuY3Rpb24gZihhLGIpe2g9PT1KJiZyLiRzZXRWYWxpZGl0eShhLGIpfWZ1bmN0aW9uIGcoYSl7aD09PUomJmMoYSl9SisrO3ZhciBoPUo7KGZ1bmN0aW9uKCl7dmFyIGE9ci4kJHBhcnNlck5hbWV8fCJwYXJzZSI7aWYoeShCKSlmKGEsbnVsbCk7ZWxzZSByZXR1cm4gQnx8KHEoci4kdmFsaWRhdG9ycyxmdW5jdGlvbihhLGIpe2YoYixudWxsKX0pLHEoci4kYXN5bmNWYWxpZGF0b3JzLGZ1bmN0aW9uKGEsYil7ZihiLG51bGwpfSkpLGYoYSxCKSxCO3JldHVybiEwfSkoKT9kKCk/ZSgpOmcoITEpOmcoITEpfTt0aGlzLiRjb21taXRWaWV3VmFsdWU9ZnVuY3Rpb24oKXt2YXIgYT0Kci4kdmlld1ZhbHVlO2cuY2FuY2VsKHMpO2lmKHIuJCRsYXN0Q29tbWl0dGVkVmlld1ZhbHVlIT09YXx8IiI9PT1hJiZyLiQkaGFzTmF0aXZlVmFsaWRhdG9ycylyLiQkdXBkYXRlRW1wdHlDbGFzc2VzKGEpLHIuJCRsYXN0Q29tbWl0dGVkVmlld1ZhbHVlPWEsci4kcHJpc3RpbmUmJnRoaXMuJHNldERpcnR5KCksdGhpcy4kJHBhcnNlQW5kVmFsaWRhdGUoKX07dGhpcy4kJHBhcnNlQW5kVmFsaWRhdGU9ZnVuY3Rpb24oKXt2YXIgYj1yLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZTtpZihCPXkoYik/dm9pZCAwOiEwKWZvcih2YXIgYz0wO2M8ci4kcGFyc2Vycy5sZW5ndGg7YysrKWlmKGI9ci4kcGFyc2Vyc1tjXShiKSx5KGIpKXtCPSExO2JyZWFrfVQoci4kbW9kZWxWYWx1ZSkmJmlzTmFOKHIuJG1vZGVsVmFsdWUpJiYoci4kbW9kZWxWYWx1ZT1wKGEpKTt2YXIgZD1yLiRtb2RlbFZhbHVlLGU9ci4kb3B0aW9ucyYmci4kb3B0aW9ucy5hbGxvd0ludmFsaWQ7ci4kJHJhd01vZGVsVmFsdWU9CmI7ZSYmKHIuJG1vZGVsVmFsdWU9YixyLiRtb2RlbFZhbHVlIT09ZCYmci4kJHdyaXRlTW9kZWxUb1Njb3BlKCkpO3IuJCRydW5WYWxpZGF0b3JzKGIsci4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWUsZnVuY3Rpb24oYSl7ZXx8KHIuJG1vZGVsVmFsdWU9YT9iOnZvaWQgMCxyLiRtb2RlbFZhbHVlIT09ZCYmci4kJHdyaXRlTW9kZWxUb1Njb3BlKCkpfSl9O3RoaXMuJCR3cml0ZU1vZGVsVG9TY29wZT1mdW5jdGlvbigpe3UoYSxyLiRtb2RlbFZhbHVlKTtxKHIuJHZpZXdDaGFuZ2VMaXN0ZW5lcnMsZnVuY3Rpb24oYSl7dHJ5e2EoKX1jYXRjaChjKXtiKGMpfX0pfTt0aGlzLiRzZXRWaWV3VmFsdWU9ZnVuY3Rpb24oYSxiKXtyLiR2aWV3VmFsdWU9YTtyLiRvcHRpb25zJiYhci4kb3B0aW9ucy51cGRhdGVPbkRlZmF1bHR8fHIuJCRkZWJvdW5jZVZpZXdWYWx1ZUNvbW1pdChiKX07dGhpcy4kJGRlYm91bmNlVmlld1ZhbHVlQ29tbWl0PWZ1bmN0aW9uKGIpe3ZhciBjPTAsZD1yLiRvcHRpb25zOwpkJiZ3KGQuZGVib3VuY2UpJiYoZD1kLmRlYm91bmNlLFQoZCk/Yz1kOlQoZFtiXSk/Yz1kW2JdOlQoZFsiZGVmYXVsdCJdKSYmKGM9ZFsiZGVmYXVsdCJdKSk7Zy5jYW5jZWwocyk7Yz9zPWcoZnVuY3Rpb24oKXtyLiRjb21taXRWaWV3VmFsdWUoKX0sYyk6aC4kJHBoYXNlP3IuJGNvbW1pdFZpZXdWYWx1ZSgpOmEuJGFwcGx5KGZ1bmN0aW9uKCl7ci4kY29tbWl0Vmlld1ZhbHVlKCl9KX07YS4kd2F0Y2goZnVuY3Rpb24oKXt2YXIgYj1wKGEpO2lmKGIhPT1yLiRtb2RlbFZhbHVlJiYoci4kbW9kZWxWYWx1ZT09PXIuJG1vZGVsVmFsdWV8fGI9PT1iKSl7ci4kbW9kZWxWYWx1ZT1yLiQkcmF3TW9kZWxWYWx1ZT1iO0I9dm9pZCAwO2Zvcih2YXIgYz1yLiRmb3JtYXR0ZXJzLGQ9Yy5sZW5ndGgsZT1iO2QtLTspZT1jW2RdKGUpO3IuJHZpZXdWYWx1ZSE9PWUmJihyLiQkdXBkYXRlRW1wdHlDbGFzc2VzKGUpLHIuJHZpZXdWYWx1ZT1yLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZT1lLHIuJHJlbmRlcigpLApyLiQkcnVuVmFsaWRhdG9ycyhiLGUsQSkpfXJldHVybiBifSl9XSxSZT1bIiRyb290U2NvcGUiLGZ1bmN0aW9uKGEpe3JldHVybntyZXN0cmljdDoiQSIscmVxdWlyZTpbIm5nTW9kZWwiLCJeP2Zvcm0iLCJeP25nTW9kZWxPcHRpb25zIl0sY29udHJvbGxlcjpQZyxwcmlvcml0eToxLGNvbXBpbGU6ZnVuY3Rpb24oYil7Yi5hZGRDbGFzcyhVYSkuYWRkQ2xhc3MoIm5nLXVudG91Y2hlZCIpLmFkZENsYXNzKG9iKTtyZXR1cm57cHJlOmZ1bmN0aW9uKGEsYixlLGYpe3ZhciBnPWZbMF07Yj1mWzFdfHxnLiQkcGFyZW50Rm9ybTtnLiQkc2V0T3B0aW9ucyhmWzJdJiZmWzJdLiRvcHRpb25zKTtiLiRhZGRDb250cm9sKGcpO2UuJG9ic2VydmUoIm5hbWUiLGZ1bmN0aW9uKGEpe2cuJG5hbWUhPT1hJiZnLiQkcGFyZW50Rm9ybS4kJHJlbmFtZUNvbnRyb2woZyxhKX0pO2EuJG9uKCIkZGVzdHJveSIsZnVuY3Rpb24oKXtnLiQkcGFyZW50Rm9ybS4kcmVtb3ZlQ29udHJvbChnKX0pfSxwb3N0OmZ1bmN0aW9uKGIsCmMsZSxmKXt2YXIgZz1mWzBdO2lmKGcuJG9wdGlvbnMmJmcuJG9wdGlvbnMudXBkYXRlT24pYy5vbihnLiRvcHRpb25zLnVwZGF0ZU9uLGZ1bmN0aW9uKGEpe2cuJCRkZWJvdW5jZVZpZXdWYWx1ZUNvbW1pdChhJiZhLnR5cGUpfSk7Yy5vbigiYmx1ciIsZnVuY3Rpb24oKXtnLiR0b3VjaGVkfHwoYS4kJHBoYXNlP2IuJGV2YWxBc3luYyhnLiRzZXRUb3VjaGVkKTpiLiRhcHBseShnLiRzZXRUb3VjaGVkKSl9KX19fX19XSxRZz0vKFxzK3xeKWRlZmF1bHQoXHMrfCQpLyxWZT1mdW5jdGlvbigpe3JldHVybntyZXN0cmljdDoiQSIsY29udHJvbGxlcjpbIiRzY29wZSIsIiRhdHRycyIsZnVuY3Rpb24oYSxiKXt2YXIgZD10aGlzO3RoaXMuJG9wdGlvbnM9cGEoYS4kZXZhbChiLm5nTW9kZWxPcHRpb25zKSk7dyh0aGlzLiRvcHRpb25zLnVwZGF0ZU9uKT8odGhpcy4kb3B0aW9ucy51cGRhdGVPbkRlZmF1bHQ9ITEsdGhpcy4kb3B0aW9ucy51cGRhdGVPbj1XKHRoaXMuJG9wdGlvbnMudXBkYXRlT24ucmVwbGFjZShRZywKZnVuY3Rpb24oKXtkLiRvcHRpb25zLnVwZGF0ZU9uRGVmYXVsdD0hMDtyZXR1cm4iICJ9KSkpOnRoaXMuJG9wdGlvbnMudXBkYXRlT25EZWZhdWx0PSEwfV19fSxIZT1UYSh7dGVybWluYWw6ITAscHJpb3JpdHk6MUUzfSksUmc9TigibmdPcHRpb25zIiksU2c9L15ccyooW1xzXFNdKz8pKD86XHMrYXNccysoW1xzXFNdKz8pKT8oPzpccytncm91cFxzK2J5XHMrKFtcc1xTXSs/KSk/KD86XHMrZGlzYWJsZVxzK3doZW5ccysoW1xzXFNdKz8pKT9ccytmb3JccysoPzooW1wkXHddW1wkXHddKil8KD86XChccyooW1wkXHddW1wkXHddKilccyosXHMqKFtcJFx3XVtcJFx3XSopXHMqXCkpKVxzK2luXHMrKFtcc1xTXSs/KSg/OlxzK3RyYWNrXHMrYnlccysoW1xzXFNdKz8pKT8kLyxQZT1bIiRjb21waWxlIiwiJGRvY3VtZW50IiwiJHBhcnNlIixmdW5jdGlvbihhLGIsZCl7ZnVuY3Rpb24gYyhhLGIsYyl7ZnVuY3Rpb24gZShhLGIsYyxkLGYpe3RoaXMuc2VsZWN0VmFsdWU9YTt0aGlzLnZpZXdWYWx1ZT0KYjt0aGlzLmxhYmVsPWM7dGhpcy5ncm91cD1kO3RoaXMuZGlzYWJsZWQ9Zn1mdW5jdGlvbiBmKGEpe3ZhciBiO2lmKCFxJiZ0YShhKSliPWE7ZWxzZXtiPVtdO2Zvcih2YXIgYyBpbiBhKWEuaGFzT3duUHJvcGVydHkoYykmJiIkIiE9PWMuY2hhckF0KDApJiZiLnB1c2goYyl9cmV0dXJuIGJ9dmFyIG49YS5tYXRjaChTZyk7aWYoIW4pdGhyb3cgUmcoImlleHAiLGEseWEoYikpO3ZhciBwPW5bNV18fG5bN10scT1uWzZdO2E9LyBhcyAvLnRlc3QoblswXSkmJm5bMV07dmFyIHM9bls5XTtiPWQoblsyXT9uWzFdOnApO3ZhciB3PWEmJmQoYSl8fGIscj1zJiZkKHMpLHk9cz9mdW5jdGlvbihhLGIpe3JldHVybiByKGMsYil9OmZ1bmN0aW9uKGEpe3JldHVybiBDYShhKX0sdj1mdW5jdGlvbihhLGIpe3JldHVybiB5KGEsRShhLGIpKX0sQT1kKG5bMl18fG5bMV0pLHQ9ZChuWzNdfHwiIiksSz1kKG5bNF18fCIiKSx6PWQobls4XSksSD17fSxFPXE/ZnVuY3Rpb24oYSxiKXtIW3FdPWI7SFtwXT0KYTtyZXR1cm4gSH06ZnVuY3Rpb24oYSl7SFtwXT1hO3JldHVybiBIfTtyZXR1cm57dHJhY2tCeTpzLGdldFRyYWNrQnlWYWx1ZTp2LGdldFdhdGNoYWJsZXM6ZCh6LGZ1bmN0aW9uKGEpe3ZhciBiPVtdO2E9YXx8W107Zm9yKHZhciBkPWYoYSksZT1kLmxlbmd0aCxnPTA7ZzxlO2crKyl7dmFyIGg9YT09PWQ/ZzpkW2ddLGw9YVtoXSxoPUUobCxoKSxsPXkobCxoKTtiLnB1c2gobCk7aWYoblsyXXx8blsxXSlsPUEoYyxoKSxiLnB1c2gobCk7bls0XSYmKGg9SyhjLGgpLGIucHVzaChoKSl9cmV0dXJuIGJ9KSxnZXRPcHRpb25zOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPVtdLGI9e30sZD16KGMpfHxbXSxnPWYoZCksaD1nLmxlbmd0aCxuPTA7bjxoO24rKyl7dmFyIHA9ZD09PWc/bjpnW25dLHE9RShkW3BdLHApLHI9dyhjLHEpLHA9eShyLHEpLHU9QShjLHEpLEg9dChjLHEpLHE9SyhjLHEpLHI9bmV3IGUocCxyLHUsSCxxKTthLnB1c2gocik7YltwXT1yfXJldHVybntpdGVtczphLHNlbGVjdFZhbHVlTWFwOmIsCmdldE9wdGlvbkZyb21WaWV3VmFsdWU6ZnVuY3Rpb24oYSl7cmV0dXJuIGJbdihhKV19LGdldFZpZXdWYWx1ZUZyb21PcHRpb246ZnVuY3Rpb24oYSl7cmV0dXJuIHM/Y2EuY29weShhLnZpZXdWYWx1ZSk6YS52aWV3VmFsdWV9fX19fXZhciBlPUMuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIiksZj1DLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGdyb3VwIik7cmV0dXJue3Jlc3RyaWN0OiJBIix0ZXJtaW5hbDohMCxyZXF1aXJlOlsic2VsZWN0IiwibmdNb2RlbCJdLGxpbms6e3ByZTpmdW5jdGlvbihhLGIsYyxkKXtkWzBdLnJlZ2lzdGVyT3B0aW9uPUF9LHBvc3Q6ZnVuY3Rpb24oZCxoLGssbCl7ZnVuY3Rpb24gbShhLGIpe2EuZWxlbWVudD1iO2IuZGlzYWJsZWQ9YS5kaXNhYmxlZDthLmxhYmVsIT09Yi5sYWJlbCYmKGIubGFiZWw9YS5sYWJlbCxiLnRleHRDb250ZW50PWEubGFiZWwpO2EudmFsdWUhPT1iLnZhbHVlJiYoYi52YWx1ZT1hLnNlbGVjdFZhbHVlKX1mdW5jdGlvbiBuKCl7dmFyIGE9CnQmJnAucmVhZFZhbHVlKCk7aWYodClmb3IodmFyIGI9dC5pdGVtcy5sZW5ndGgtMTswPD1iO2ItLSl7dmFyIGM9dC5pdGVtc1tiXTt3KGMuZ3JvdXApP0RiKGMuZWxlbWVudC5wYXJlbnROb2RlKTpEYihjLmVsZW1lbnQpfXQ9Sy5nZXRPcHRpb25zKCk7dmFyIGQ9e307diYmaC5wcmVwZW5kKEIpO3QuaXRlbXMuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYjtpZih3KGEuZ3JvdXApKXtiPWRbYS5ncm91cF07Ynx8KGI9Zi5jbG9uZU5vZGUoITEpLEMuYXBwZW5kQ2hpbGQoYiksYi5sYWJlbD1udWxsPT09YS5ncm91cD8ibnVsbCI6YS5ncm91cCxkW2EuZ3JvdXBdPWIpO3ZhciBjPWUuY2xvbmVOb2RlKCExKX1lbHNlIGI9QyxjPWUuY2xvbmVOb2RlKCExKTtiLmFwcGVuZENoaWxkKGMpO20oYSxjKX0pO2hbMF0uYXBwZW5kQ2hpbGQoQyk7cy4kcmVuZGVyKCk7cy4kaXNFbXB0eShhKXx8KGI9cC5yZWFkVmFsdWUoKSwoSy50cmFja0J5fHx5P25hKGEsYik6YT09PWIpfHwocy4kc2V0Vmlld1ZhbHVlKGIpLApzLiRyZW5kZXIoKSkpfXZhciBwPWxbMF0scz1sWzFdLHk9ay5tdWx0aXBsZSxCO2w9MDtmb3IodmFyIHI9aC5jaGlsZHJlbigpLEE9ci5sZW5ndGg7bDxBO2wrKylpZigiIj09PXJbbF0udmFsdWUpe0I9ci5lcShsKTticmVha312YXIgdj0hIUIsej1GKGUuY2xvbmVOb2RlKCExKSk7ei52YWwoIj8iKTt2YXIgdCxLPWMoay5uZ09wdGlvbnMsaCxkKSxDPWJbMF0uY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO3k/KHMuJGlzRW1wdHk9ZnVuY3Rpb24oYSl7cmV0dXJuIWF8fDA9PT1hLmxlbmd0aH0scC53cml0ZVZhbHVlPWZ1bmN0aW9uKGEpe3QuaXRlbXMuZm9yRWFjaChmdW5jdGlvbihhKXthLmVsZW1lbnQuc2VsZWN0ZWQ9ITF9KTthJiZhLmZvckVhY2goZnVuY3Rpb24oYSl7aWYoYT10LmdldE9wdGlvbkZyb21WaWV3VmFsdWUoYSkpYS5lbGVtZW50LnNlbGVjdGVkPSEwfSl9LHAucmVhZFZhbHVlPWZ1bmN0aW9uKCl7dmFyIGE9aC52YWwoKXx8W10sYj1bXTtxKGEsZnVuY3Rpb24oYSl7KGE9CnQuc2VsZWN0VmFsdWVNYXBbYV0pJiYhYS5kaXNhYmxlZCYmYi5wdXNoKHQuZ2V0Vmlld1ZhbHVlRnJvbU9wdGlvbihhKSl9KTtyZXR1cm4gYn0sSy50cmFja0J5JiZkLiR3YXRjaENvbGxlY3Rpb24oZnVuY3Rpb24oKXtpZihMKHMuJHZpZXdWYWx1ZSkpcmV0dXJuIHMuJHZpZXdWYWx1ZS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIEsuZ2V0VHJhY2tCeVZhbHVlKGEpfSl9LGZ1bmN0aW9uKCl7cy4kcmVuZGVyKCl9KSk6KHAud3JpdGVWYWx1ZT1mdW5jdGlvbihhKXt2YXIgYj10LmdldE9wdGlvbkZyb21WaWV3VmFsdWUoYSk7Yj8oaFswXS52YWx1ZSE9PWIuc2VsZWN0VmFsdWUmJih6LnJlbW92ZSgpLHZ8fEIucmVtb3ZlKCksaFswXS52YWx1ZT1iLnNlbGVjdFZhbHVlLGIuZWxlbWVudC5zZWxlY3RlZD0hMCksYi5lbGVtZW50LnNldEF0dHJpYnV0ZSgic2VsZWN0ZWQiLCJzZWxlY3RlZCIpKTpudWxsPT09YXx8dj8oei5yZW1vdmUoKSx2fHxoLnByZXBlbmQoQiksaC52YWwoIiIpLEIucHJvcCgic2VsZWN0ZWQiLAohMCksQi5hdHRyKCJzZWxlY3RlZCIsITApKToodnx8Qi5yZW1vdmUoKSxoLnByZXBlbmQoeiksaC52YWwoIj8iKSx6LnByb3AoInNlbGVjdGVkIiwhMCksei5hdHRyKCJzZWxlY3RlZCIsITApKX0scC5yZWFkVmFsdWU9ZnVuY3Rpb24oKXt2YXIgYT10LnNlbGVjdFZhbHVlTWFwW2gudmFsKCldO3JldHVybiBhJiYhYS5kaXNhYmxlZD8odnx8Qi5yZW1vdmUoKSx6LnJlbW92ZSgpLHQuZ2V0Vmlld1ZhbHVlRnJvbU9wdGlvbihhKSk6bnVsbH0sSy50cmFja0J5JiZkLiR3YXRjaChmdW5jdGlvbigpe3JldHVybiBLLmdldFRyYWNrQnlWYWx1ZShzLiR2aWV3VmFsdWUpfSxmdW5jdGlvbigpe3MuJHJlbmRlcigpfSkpO3Y/KEIucmVtb3ZlKCksYShCKShkKSxCLnJlbW92ZUNsYXNzKCJuZy1zY29wZSIpKTpCPUYoZS5jbG9uZU5vZGUoITEpKTtoLmVtcHR5KCk7bigpO2QuJHdhdGNoQ29sbGVjdGlvbihLLmdldFdhdGNoYWJsZXMsbil9fX19XSxJZT1bIiRsb2NhbGUiLCIkaW50ZXJwb2xhdGUiLAoiJGxvZyIsZnVuY3Rpb24oYSxiLGQpe3ZhciBjPS97fS9nLGU9L153aGVuKE1pbnVzKT8oLispJC87cmV0dXJue2xpbms6ZnVuY3Rpb24oZixnLGgpe2Z1bmN0aW9uIGsoYSl7Zy50ZXh0KGF8fCIiKX12YXIgbD1oLmNvdW50LG09aC4kYXR0ci53aGVuJiZnLmF0dHIoaC4kYXR0ci53aGVuKSxuPWgub2Zmc2V0fHwwLHA9Zi4kZXZhbChtKXx8e30scz17fSx3PWIuc3RhcnRTeW1ib2woKSxCPWIuZW5kU3ltYm9sKCkscj13K2wrIi0iK24rQix6PWNhLm5vb3AsdjtxKGgsZnVuY3Rpb24oYSxiKXt2YXIgYz1lLmV4ZWMoYik7YyYmKGM9KGNbMV0/Ii0iOiIiKStRKGNbMl0pLHBbY109Zy5hdHRyKGguJGF0dHJbYl0pKX0pO3EocCxmdW5jdGlvbihhLGQpe3NbZF09YihhLnJlcGxhY2UoYyxyKSl9KTtmLiR3YXRjaChsLGZ1bmN0aW9uKGIpe3ZhciBjPXBhcnNlRmxvYXQoYiksZT1pc05hTihjKTtlfHxjIGluIHB8fChjPWEucGx1cmFsQ2F0KGMtbikpO2M9PT12fHxlJiZUKHYpJiZpc05hTih2KXx8Cih6KCksZT1zW2NdLHkoZSk/KG51bGwhPWImJmQuZGVidWcoIm5nUGx1cmFsaXplOiBubyBydWxlIGRlZmluZWQgZm9yICciK2MrIicgaW4gIittKSx6PUEsaygpKTp6PWYuJHdhdGNoKGUsayksdj1jKX0pfX19XSxKZT1bIiRwYXJzZSIsIiRhbmltYXRlIiwiJGNvbXBpbGUiLGZ1bmN0aW9uKGEsYixkKXt2YXIgYz1OKCJuZ1JlcGVhdCIpLGU9ZnVuY3Rpb24oYSxiLGMsZCxlLG0sbil7YVtjXT1kO2UmJihhW2VdPW0pO2EuJGluZGV4PWI7YS4kZmlyc3Q9MD09PWI7YS4kbGFzdD1iPT09bi0xO2EuJG1pZGRsZT0hKGEuJGZpcnN0fHxhLiRsYXN0KTthLiRvZGQ9IShhLiRldmVuPTA9PT0oYiYxKSl9O3JldHVybntyZXN0cmljdDoiQSIsbXVsdGlFbGVtZW50OiEwLHRyYW5zY2x1ZGU6ImVsZW1lbnQiLHByaW9yaXR5OjFFMyx0ZXJtaW5hbDohMCwkJHRsYjohMCxjb21waWxlOmZ1bmN0aW9uKGYsZyl7dmFyIGg9Zy5uZ1JlcGVhdCxrPWQuJCRjcmVhdGVDb21tZW50KCJlbmQgbmdSZXBlYXQiLApoKSxsPWgubWF0Y2goL15ccyooW1xzXFNdKz8pXHMraW5ccysoW1xzXFNdKz8pKD86XHMrYXNccysoW1xzXFNdKz8pKT8oPzpccyt0cmFja1xzK2J5XHMrKFtcc1xTXSs/KSk/XHMqJC8pO2lmKCFsKXRocm93IGMoImlleHAiLGgpO3ZhciBtPWxbMV0sbj1sWzJdLHA9bFszXSxzPWxbNF0sbD1tLm1hdGNoKC9eKD86KFxzKltcJFx3XSspfFwoXHMqKFtcJFx3XSspXHMqLFxzKihbXCRcd10rKVxzKlwpKSQvKTtpZighbCl0aHJvdyBjKCJpaWRleHAiLG0pO3ZhciB3PWxbM118fGxbMV0seT1sWzJdO2lmKHAmJighL15bJGEtekEtWl9dWyRhLXpBLVowLTlfXSokLy50ZXN0KHApfHwvXihudWxsfHVuZGVmaW5lZHx0aGlzfFwkaW5kZXh8XCRmaXJzdHxcJG1pZGRsZXxcJGxhc3R8XCRldmVufFwkb2RkfFwkcGFyZW50fFwkcm9vdHxcJGlkKSQvLnRlc3QocCkpKXRocm93IGMoImJhZGlkZW50IixwKTt2YXIgcix6LHYsQSx0PXskaWQ6Q2F9O3M/cj1hKHMpOih2PWZ1bmN0aW9uKGEsYil7cmV0dXJuIENhKGIpfSwKQT1mdW5jdGlvbihhKXtyZXR1cm4gYX0pO3JldHVybiBmdW5jdGlvbihhLGQsZixnLGwpe3ImJih6PWZ1bmN0aW9uKGIsYyxkKXt5JiYodFt5XT1iKTt0W3ddPWM7dC4kaW5kZXg9ZDtyZXR1cm4gcihhLHQpfSk7dmFyIG09VSgpO2EuJHdhdGNoQ29sbGVjdGlvbihuLGZ1bmN0aW9uKGYpe3ZhciBnLG4scj1kWzBdLHMsdT1VKCksdCxDLEYsRSxHLEQsSDtwJiYoYVtwXT1mKTtpZih0YShmKSlHPWYsbj16fHx2O2Vsc2UgZm9yKEggaW4gbj16fHxBLEc9W10sZil1YS5jYWxsKGYsSCkmJiIkIiE9PUguY2hhckF0KDApJiZHLnB1c2goSCk7dD1HLmxlbmd0aDtIPUFycmF5KHQpO2ZvcihnPTA7Zzx0O2crKylpZihDPWY9PT1HP2c6R1tnXSxGPWZbQ10sRT1uKEMsRixnKSxtW0VdKUQ9bVtFXSxkZWxldGUgbVtFXSx1W0VdPUQsSFtnXT1EO2Vsc2V7aWYodVtFXSl0aHJvdyBxKEgsZnVuY3Rpb24oYSl7YSYmYS5zY29wZSYmKG1bYS5pZF09YSl9KSxjKCJkdXBlcyIsaCxFLEYpO0hbZ109e2lkOkUsCnNjb3BlOnZvaWQgMCxjbG9uZTp2b2lkIDB9O3VbRV09ITB9Zm9yKHMgaW4gbSl7RD1tW3NdO0U9dGIoRC5jbG9uZSk7Yi5sZWF2ZShFKTtpZihFWzBdLnBhcmVudE5vZGUpZm9yKGc9MCxuPUUubGVuZ3RoO2c8bjtnKyspRVtnXS4kJE5HX1JFTU9WRUQ9ITA7RC5zY29wZS4kZGVzdHJveSgpfWZvcihnPTA7Zzx0O2crKylpZihDPWY9PT1HP2c6R1tnXSxGPWZbQ10sRD1IW2ddLEQuc2NvcGUpe3M9cjtkbyBzPXMubmV4dFNpYmxpbmc7d2hpbGUocyYmcy4kJE5HX1JFTU9WRUQpO0QuY2xvbmVbMF0hPXMmJmIubW92ZSh0YihELmNsb25lKSxudWxsLHIpO3I9RC5jbG9uZVtELmNsb25lLmxlbmd0aC0xXTtlKEQuc2NvcGUsZyx3LEYseSxDLHQpfWVsc2UgbChmdW5jdGlvbihhLGMpe0Quc2NvcGU9Yzt2YXIgZD1rLmNsb25lTm9kZSghMSk7YVthLmxlbmd0aCsrXT1kO2IuZW50ZXIoYSxudWxsLHIpO3I9ZDtELmNsb25lPWE7dVtELmlkXT1EO2UoRC5zY29wZSxnLHcsRix5LEMsdCl9KTttPQp1fSl9fX19XSxLZT1bIiRhbmltYXRlIixmdW5jdGlvbihhKXtyZXR1cm57cmVzdHJpY3Q6IkEiLG11bHRpRWxlbWVudDohMCxsaW5rOmZ1bmN0aW9uKGIsZCxjKXtiLiR3YXRjaChjLm5nU2hvdyxmdW5jdGlvbihiKXthW2I/InJlbW92ZUNsYXNzIjoiYWRkQ2xhc3MiXShkLCJuZy1oaWRlIix7dGVtcENsYXNzZXM6Im5nLWhpZGUtYW5pbWF0ZSJ9KX0pfX19XSxEZT1bIiRhbmltYXRlIixmdW5jdGlvbihhKXtyZXR1cm57cmVzdHJpY3Q6IkEiLG11bHRpRWxlbWVudDohMCxsaW5rOmZ1bmN0aW9uKGIsZCxjKXtiLiR3YXRjaChjLm5nSGlkZSxmdW5jdGlvbihiKXthW2I/ImFkZENsYXNzIjoicmVtb3ZlQ2xhc3MiXShkLCJuZy1oaWRlIix7dGVtcENsYXNzZXM6Im5nLWhpZGUtYW5pbWF0ZSJ9KX0pfX19XSxMZT1UYShmdW5jdGlvbihhLGIsZCl7YS4kd2F0Y2goZC5uZ1N0eWxlLGZ1bmN0aW9uKGEsZCl7ZCYmYSE9PWQmJnEoZCxmdW5jdGlvbihhLGMpe2IuY3NzKGMsIiIpfSk7YSYmYi5jc3MoYSl9LAohMCl9KSxNZT1bIiRhbmltYXRlIiwiJGNvbXBpbGUiLGZ1bmN0aW9uKGEsYil7cmV0dXJue3JlcXVpcmU6Im5nU3dpdGNoIixjb250cm9sbGVyOlsiJHNjb3BlIixmdW5jdGlvbigpe3RoaXMuY2FzZXM9e319XSxsaW5rOmZ1bmN0aW9uKGQsYyxlLGYpe3ZhciBnPVtdLGg9W10saz1bXSxsPVtdLG09ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZnVuY3Rpb24oKXthLnNwbGljZShiLDEpfX07ZC4kd2F0Y2goZS5uZ1N3aXRjaHx8ZS5vbixmdW5jdGlvbihjKXt2YXIgZCxlO2Q9MDtmb3IoZT1rLmxlbmd0aDtkPGU7KytkKWEuY2FuY2VsKGtbZF0pO2Q9ay5sZW5ndGg9MDtmb3IoZT1sLmxlbmd0aDtkPGU7KytkKXt2YXIgcz10YihoW2RdLmNsb25lKTtsW2RdLiRkZXN0cm95KCk7KGtbZF09YS5sZWF2ZShzKSkudGhlbihtKGssZCkpfWgubGVuZ3RoPTA7bC5sZW5ndGg9MDsoZz1mLmNhc2VzWyIhIitjXXx8Zi5jYXNlc1siPyJdKSYmcShnLGZ1bmN0aW9uKGMpe2MudHJhbnNjbHVkZShmdW5jdGlvbihkLAplKXtsLnB1c2goZSk7dmFyIGY9Yy5lbGVtZW50O2RbZC5sZW5ndGgrK109Yi4kJGNyZWF0ZUNvbW1lbnQoImVuZCBuZ1N3aXRjaFdoZW4iKTtoLnB1c2goe2Nsb25lOmR9KTthLmVudGVyKGQsZi5wYXJlbnQoKSxmKX0pfSl9KX19fV0sTmU9VGEoe3RyYW5zY2x1ZGU6ImVsZW1lbnQiLHByaW9yaXR5OjEyMDAscmVxdWlyZToiXm5nU3dpdGNoIixtdWx0aUVsZW1lbnQ6ITAsbGluazpmdW5jdGlvbihhLGIsZCxjLGUpe2MuY2FzZXNbIiEiK2QubmdTd2l0Y2hXaGVuXT1jLmNhc2VzWyIhIitkLm5nU3dpdGNoV2hlbl18fFtdO2MuY2FzZXNbIiEiK2QubmdTd2l0Y2hXaGVuXS5wdXNoKHt0cmFuc2NsdWRlOmUsZWxlbWVudDpifSl9fSksT2U9VGEoe3RyYW5zY2x1ZGU6ImVsZW1lbnQiLHByaW9yaXR5OjEyMDAscmVxdWlyZToiXm5nU3dpdGNoIixtdWx0aUVsZW1lbnQ6ITAsbGluazpmdW5jdGlvbihhLGIsZCxjLGUpe2MuY2FzZXNbIj8iXT1jLmNhc2VzWyI/Il18fFtdO2MuY2FzZXNbIj8iXS5wdXNoKHt0cmFuc2NsdWRlOmUsCmVsZW1lbnQ6Yn0pfX0pLFRnPU4oIm5nVHJhbnNjbHVkZSIpLFFlPVsiJGNvbXBpbGUiLGZ1bmN0aW9uKGEpe3JldHVybntyZXN0cmljdDoiRUFDIix0ZXJtaW5hbDohMCxjb21waWxlOmZ1bmN0aW9uKGIpe3ZhciBkPWEoYi5jb250ZW50cygpKTtiLmVtcHR5KCk7cmV0dXJuIGZ1bmN0aW9uKGEsYixmLGcsaCl7ZnVuY3Rpb24gaygpe2QoYSxmdW5jdGlvbihhKXtiLmFwcGVuZChhKX0pfWlmKCFoKXRocm93IFRnKCJvcnBoYW4iLHlhKGIpKTtmLm5nVHJhbnNjbHVkZT09PWYuJGF0dHIubmdUcmFuc2NsdWRlJiYoZi5uZ1RyYW5zY2x1ZGU9IiIpO2Y9Zi5uZ1RyYW5zY2x1ZGV8fGYubmdUcmFuc2NsdWRlU2xvdDtoKGZ1bmN0aW9uKGEsYyl7YS5sZW5ndGg/Yi5hcHBlbmQoYSk6KGsoKSxjLiRkZXN0cm95KCkpfSxudWxsLGYpO2YmJiFoLmlzU2xvdEZpbGxlZChmKSYmaygpfX19fV0scWU9WyIkdGVtcGxhdGVDYWNoZSIsZnVuY3Rpb24oYSl7cmV0dXJue3Jlc3RyaWN0OiJFIix0ZXJtaW5hbDohMCwKY29tcGlsZTpmdW5jdGlvbihiLGQpeyJ0ZXh0L25nLXRlbXBsYXRlIj09ZC50eXBlJiZhLnB1dChkLmlkLGJbMF0udGV4dCl9fX1dLFVnPXskc2V0Vmlld1ZhbHVlOkEsJHJlbmRlcjpBfSxWZz1bIiRlbGVtZW50IiwiJHNjb3BlIixmdW5jdGlvbihhLGIpe3ZhciBkPXRoaXMsYz1uZXcgUmE7ZC5uZ01vZGVsQ3RybD1VZztkLnVua25vd25PcHRpb249RihDLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKTtkLnJlbmRlclVua25vd25PcHRpb249ZnVuY3Rpb24oYil7Yj0iPyAiK0NhKGIpKyIgPyI7ZC51bmtub3duT3B0aW9uLnZhbChiKTthLnByZXBlbmQoZC51bmtub3duT3B0aW9uKTthLnZhbChiKX07Yi4kb24oIiRkZXN0cm95IixmdW5jdGlvbigpe2QucmVuZGVyVW5rbm93bk9wdGlvbj1BfSk7ZC5yZW1vdmVVbmtub3duT3B0aW9uPWZ1bmN0aW9uKCl7ZC51bmtub3duT3B0aW9uLnBhcmVudCgpJiZkLnVua25vd25PcHRpb24ucmVtb3ZlKCl9O2QucmVhZFZhbHVlPWZ1bmN0aW9uKCl7ZC5yZW1vdmVVbmtub3duT3B0aW9uKCk7CnJldHVybiBhLnZhbCgpfTtkLndyaXRlVmFsdWU9ZnVuY3Rpb24oYil7ZC5oYXNPcHRpb24oYik/KGQucmVtb3ZlVW5rbm93bk9wdGlvbigpLGEudmFsKGIpLCIiPT09YiYmZC5lbXB0eU9wdGlvbi5wcm9wKCJzZWxlY3RlZCIsITApKTpudWxsPT1iJiZkLmVtcHR5T3B0aW9uPyhkLnJlbW92ZVVua25vd25PcHRpb24oKSxhLnZhbCgiIikpOmQucmVuZGVyVW5rbm93bk9wdGlvbihiKX07ZC5hZGRPcHRpb249ZnVuY3Rpb24oYSxiKXtpZig4IT09YlswXS5ub2RlVHlwZSl7UWEoYSwnIm9wdGlvbiB2YWx1ZSInKTsiIj09PWEmJihkLmVtcHR5T3B0aW9uPWIpO3ZhciBnPWMuZ2V0KGEpfHwwO2MucHV0KGEsZysxKTtkLm5nTW9kZWxDdHJsLiRyZW5kZXIoKTtiWzBdLmhhc0F0dHJpYnV0ZSgic2VsZWN0ZWQiKSYmKGJbMF0uc2VsZWN0ZWQ9ITApfX07ZC5yZW1vdmVPcHRpb249ZnVuY3Rpb24oYSl7dmFyIGI9Yy5nZXQoYSk7YiYmKDE9PT1iPyhjLnJlbW92ZShhKSwiIj09PWEmJihkLmVtcHR5T3B0aW9uPQp2b2lkIDApKTpjLnB1dChhLGItMSkpfTtkLmhhc09wdGlvbj1mdW5jdGlvbihhKXtyZXR1cm4hIWMuZ2V0KGEpfTtkLnJlZ2lzdGVyT3B0aW9uPWZ1bmN0aW9uKGEsYixjLGgsayl7aWYoaCl7dmFyIGw7Yy4kb2JzZXJ2ZSgidmFsdWUiLGZ1bmN0aW9uKGEpe3cobCkmJmQucmVtb3ZlT3B0aW9uKGwpO2w9YTtkLmFkZE9wdGlvbihhLGIpfSl9ZWxzZSBrP2EuJHdhdGNoKGssZnVuY3Rpb24oYSxlKXtjLiRzZXQoInZhbHVlIixhKTtlIT09YSYmZC5yZW1vdmVPcHRpb24oZSk7ZC5hZGRPcHRpb24oYSxiKX0pOmQuYWRkT3B0aW9uKGMudmFsdWUsYik7Yi5vbigiJGRlc3Ryb3kiLGZ1bmN0aW9uKCl7ZC5yZW1vdmVPcHRpb24oYy52YWx1ZSk7ZC5uZ01vZGVsQ3RybC4kcmVuZGVyKCl9KX19XSxyZT1mdW5jdGlvbigpe3JldHVybntyZXN0cmljdDoiRSIscmVxdWlyZTpbInNlbGVjdCIsIj9uZ01vZGVsIl0sY29udHJvbGxlcjpWZyxwcmlvcml0eToxLGxpbms6e3ByZTpmdW5jdGlvbihhLGIsCmQsYyl7dmFyIGU9Y1sxXTtpZihlKXt2YXIgZj1jWzBdO2YubmdNb2RlbEN0cmw9ZTtiLm9uKCJjaGFuZ2UiLGZ1bmN0aW9uKCl7YS4kYXBwbHkoZnVuY3Rpb24oKXtlLiRzZXRWaWV3VmFsdWUoZi5yZWFkVmFsdWUoKSl9KX0pO2lmKGQubXVsdGlwbGUpe2YucmVhZFZhbHVlPWZ1bmN0aW9uKCl7dmFyIGE9W107cShiLmZpbmQoIm9wdGlvbiIpLGZ1bmN0aW9uKGIpe2Iuc2VsZWN0ZWQmJmEucHVzaChiLnZhbHVlKX0pO3JldHVybiBhfTtmLndyaXRlVmFsdWU9ZnVuY3Rpb24oYSl7dmFyIGM9bmV3IFJhKGEpO3EoYi5maW5kKCJvcHRpb24iKSxmdW5jdGlvbihhKXthLnNlbGVjdGVkPXcoYy5nZXQoYS52YWx1ZSkpfSl9O3ZhciBnLGg9TmFOO2EuJHdhdGNoKGZ1bmN0aW9uKCl7aCE9PWUuJHZpZXdWYWx1ZXx8bmEoZyxlLiR2aWV3VmFsdWUpfHwoZz1pYShlLiR2aWV3VmFsdWUpLGUuJHJlbmRlcigpKTtoPWUuJHZpZXdWYWx1ZX0pO2UuJGlzRW1wdHk9ZnVuY3Rpb24oYSl7cmV0dXJuIWF8fAowPT09YS5sZW5ndGh9fX19LHBvc3Q6ZnVuY3Rpb24oYSxiLGQsYyl7dmFyIGU9Y1sxXTtpZihlKXt2YXIgZj1jWzBdO2UuJHJlbmRlcj1mdW5jdGlvbigpe2Yud3JpdGVWYWx1ZShlLiR2aWV3VmFsdWUpfX19fX19LHRlPVsiJGludGVycG9sYXRlIixmdW5jdGlvbihhKXtyZXR1cm57cmVzdHJpY3Q6IkUiLHByaW9yaXR5OjEwMCxjb21waWxlOmZ1bmN0aW9uKGIsZCl7aWYodyhkLnZhbHVlKSl2YXIgYz1hKGQudmFsdWUsITApO2Vsc2V7dmFyIGU9YShiLnRleHQoKSwhMCk7ZXx8ZC4kc2V0KCJ2YWx1ZSIsYi50ZXh0KCkpfXJldHVybiBmdW5jdGlvbihhLGIsZCl7dmFyIGs9Yi5wYXJlbnQoKTsoaz1rLmRhdGEoIiRzZWxlY3RDb250cm9sbGVyIil8fGsucGFyZW50KCkuZGF0YSgiJHNlbGVjdENvbnRyb2xsZXIiKSkmJmsucmVnaXN0ZXJPcHRpb24oYSxiLGQsYyxlKX19fX1dLHNlPWhhKHtyZXN0cmljdDoiRSIsdGVybWluYWw6ITF9KSxJYz1mdW5jdGlvbigpe3JldHVybntyZXN0cmljdDoiQSIsCnJlcXVpcmU6Ij9uZ01vZGVsIixsaW5rOmZ1bmN0aW9uKGEsYixkLGMpe2MmJihkLnJlcXVpcmVkPSEwLGMuJHZhbGlkYXRvcnMucmVxdWlyZWQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4hZC5yZXF1aXJlZHx8IWMuJGlzRW1wdHkoYil9LGQuJG9ic2VydmUoInJlcXVpcmVkIixmdW5jdGlvbigpe2MuJHZhbGlkYXRlKCl9KSl9fX0sSGM9ZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6IkEiLHJlcXVpcmU6Ij9uZ01vZGVsIixsaW5rOmZ1bmN0aW9uKGEsYixkLGMpe2lmKGMpe3ZhciBlLGY9ZC5uZ1BhdHRlcm58fGQucGF0dGVybjtkLiRvYnNlcnZlKCJwYXR0ZXJuIixmdW5jdGlvbihhKXtHKGEpJiYwPGEubGVuZ3RoJiYoYT1uZXcgUmVnRXhwKCJeIithKyIkIikpO2lmKGEmJiFhLnRlc3QpdGhyb3cgTigibmdQYXR0ZXJuIikoIm5vcmVnZXhwIixmLGEseWEoYikpO2U9YXx8dm9pZCAwO2MuJHZhbGlkYXRlKCl9KTtjLiR2YWxpZGF0b3JzLnBhdHRlcm49ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYy4kaXNFbXB0eShiKXx8CnkoZSl8fGUudGVzdChiKX19fX19LEtjPWZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OiJBIixyZXF1aXJlOiI/bmdNb2RlbCIsbGluazpmdW5jdGlvbihhLGIsZCxjKXtpZihjKXt2YXIgZT0tMTtkLiRvYnNlcnZlKCJtYXhsZW5ndGgiLGZ1bmN0aW9uKGEpe2E9WihhKTtlPWlzTmFOKGEpPy0xOmE7Yy4kdmFsaWRhdGUoKX0pO2MuJHZhbGlkYXRvcnMubWF4bGVuZ3RoPWZ1bmN0aW9uKGEsYil7cmV0dXJuIDA+ZXx8Yy4kaXNFbXB0eShiKXx8Yi5sZW5ndGg8PWV9fX19fSxKYz1mdW5jdGlvbigpe3JldHVybntyZXN0cmljdDoiQSIscmVxdWlyZToiP25nTW9kZWwiLGxpbms6ZnVuY3Rpb24oYSxiLGQsYyl7aWYoYyl7dmFyIGU9MDtkLiRvYnNlcnZlKCJtaW5sZW5ndGgiLGZ1bmN0aW9uKGEpe2U9WihhKXx8MDtjLiR2YWxpZGF0ZSgpfSk7Yy4kdmFsaWRhdG9ycy5taW5sZW5ndGg9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYy4kaXNFbXB0eShiKXx8Yi5sZW5ndGg+PWV9fX19fTtDLmFuZ3VsYXIuYm9vdHN0cmFwPwpDLmNvbnNvbGUmJmNvbnNvbGUubG9nKCJXQVJOSU5HOiBUcmllZCB0byBsb2FkIGFuZ3VsYXIgbW9yZSB0aGFuIG9uY2UuIik6KGplKCksbGUoY2EpLGNhLm1vZHVsZSgibmdMb2NhbGUiLFtdLFsiJHByb3ZpZGUiLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7YSs9IiI7dmFyIGI9YS5pbmRleE9mKCIuIik7cmV0dXJuLTE9PWI/MDphLmxlbmd0aC1iLTF9YS52YWx1ZSgiJGxvY2FsZSIse0RBVEVUSU1FX0ZPUk1BVFM6e0FNUE1TOlsiQU0iLCJQTSJdLERBWToiU3VuZGF5IE1vbmRheSBUdWVzZGF5IFdlZG5lc2RheSBUaHVyc2RheSBGcmlkYXkgU2F0dXJkYXkiLnNwbGl0KCIgIiksRVJBTkFNRVM6WyJCZWZvcmUgQ2hyaXN0IiwiQW5ubyBEb21pbmkiXSxFUkFTOlsiQkMiLCJBRCJdLEZJUlNUREFZT0ZXRUVLOjYsTU9OVEg6IkphbnVhcnkgRmVicnVhcnkgTWFyY2ggQXByaWwgTWF5IEp1bmUgSnVseSBBdWd1c3QgU2VwdGVtYmVyIE9jdG9iZXIgTm92ZW1iZXIgRGVjZW1iZXIiLnNwbGl0KCIgIiksClNIT1JUREFZOiJTdW4gTW9uIFR1ZSBXZWQgVGh1IEZyaSBTYXQiLnNwbGl0KCIgIiksU0hPUlRNT05USDoiSmFuIEZlYiBNYXIgQXByIE1heSBKdW4gSnVsIEF1ZyBTZXAgT2N0IE5vdiBEZWMiLnNwbGl0KCIgIiksU1RBTkRBTE9ORU1PTlRIOiJKYW51YXJ5IEZlYnJ1YXJ5IE1hcmNoIEFwcmlsIE1heSBKdW5lIEp1bHkgQXVndXN0IFNlcHRlbWJlciBPY3RvYmVyIE5vdmVtYmVyIERlY2VtYmVyIi5zcGxpdCgiICIpLFdFRUtFTkRSQU5HRTpbNSw2XSxmdWxsRGF0ZToiRUVFRSwgTU1NTSBkLCB5Iixsb25nRGF0ZToiTU1NTSBkLCB5IixtZWRpdW06Ik1NTSBkLCB5IGg6bW06c3MgYSIsbWVkaXVtRGF0ZToiTU1NIGQsIHkiLG1lZGl1bVRpbWU6Img6bW06c3MgYSIsInNob3J0IjoiTS9kL3l5IGg6bW0gYSIsc2hvcnREYXRlOiJNL2QveXkiLHNob3J0VGltZToiaDptbSBhIn0sTlVNQkVSX0ZPUk1BVFM6e0NVUlJFTkNZX1NZTToiJCIsREVDSU1BTF9TRVA6Ii4iLEdST1VQX1NFUDoiLCIsClBBVFRFUk5TOlt7Z1NpemU6MyxsZ1NpemU6MyxtYXhGcmFjOjMsbWluRnJhYzowLG1pbkludDoxLG5lZ1ByZToiLSIsbmVnU3VmOiIiLHBvc1ByZToiIixwb3NTdWY6IiJ9LHtnU2l6ZTozLGxnU2l6ZTozLG1heEZyYWM6MixtaW5GcmFjOjIsbWluSW50OjEsbmVnUHJlOiItXHUwMGE0IixuZWdTdWY6IiIscG9zUHJlOiJcdTAwYTQiLHBvc1N1ZjoiIn1dfSxpZDoiZW4tdXMiLGxvY2FsZUlEOiJlbl9VUyIscGx1cmFsQ2F0OmZ1bmN0aW9uKGEsYyl7dmFyIGU9YXwwLGY9Yzt2b2lkIDA9PT1mJiYoZj1NYXRoLm1pbihiKGEpLDMpKTtNYXRoLnBvdygxMCxmKTtyZXR1cm4gMT09ZSYmMD09Zj8ib25lIjoib3RoZXIifX0pfV0pLEYoQy5kb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtmZShDLmRvY3VtZW50LEJjKX0pKX0pKHdpbmRvdyk7IXdpbmRvdy5hbmd1bGFyLiQkY3NwKCkubm9JbmxpbmVTdHlsZSYmd2luZG93LmFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5oZWFkKS5wcmVwZW5kKCc8c3R5bGUgdHlwZT0idGV4dC9jc3MiPkBjaGFyc2V0ICJVVEYtOCI7W25nXFw6Y2xvYWtdLFtuZy1jbG9ha10sW2RhdGEtbmctY2xvYWtdLFt4LW5nLWNsb2FrXSwubmctY2xvYWssLngtbmctY2xvYWssLm5nLWhpZGU6bm90KC5uZy1oaWRlLWFuaW1hdGUpe2Rpc3BsYXk6bm9uZSAhaW1wb3J0YW50O31uZ1xcOmZvcm17ZGlzcGxheTpibG9jazt9Lm5nLWFuaW1hdGUtc2hpbXt2aXNpYmlsaXR5OmhpZGRlbjt9Lm5nLWFuY2hvcntwb3NpdGlvbjphYnNvbHV0ZTt9PC9zdHlsZT4nKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9YW5ndWxhci5taW4uanMubWFwCgovKioKICogU3RhdGUtYmFzZWQgcm91dGluZyBmb3IgQW5ndWxhckpTCiAqIEB2ZXJzaW9uIHYwLjMuMQogKiBAbGluayBodHRwOi8vYW5ndWxhci11aS5naXRodWIuY29tLwogKiBAbGljZW5zZSBNSVQgTGljZW5zZSwgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQKICovCiJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlJiYidW5kZWZpbmVkIiE9dHlwZW9mIGV4cG9ydHMmJm1vZHVsZS5leHBvcnRzPT09ZXhwb3J0cyYmKG1vZHVsZS5leHBvcnRzPSJ1aS5yb3V0ZXIiKSxmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGQoYSxiKXtyZXR1cm4gUihuZXcoUihmdW5jdGlvbigpe30se3Byb3RvdHlwZTphfSkpLGIpfWZ1bmN0aW9uIGUoYSl7cmV0dXJuIFEoYXJndW1lbnRzLGZ1bmN0aW9uKGIpe2IhPT1hJiZRKGIsZnVuY3Rpb24oYixjKXthLmhhc093blByb3BlcnR5KGMpfHwoYVtjXT1iKX0pfSksYX1mdW5jdGlvbiBmKGEsYil7dmFyIGM9W107Zm9yKHZhciBkIGluIGEucGF0aCl7aWYoYS5wYXRoW2RdIT09Yi5wYXRoW2RdKWJyZWFrO2MucHVzaChhLnBhdGhbZF0pfXJldHVybiBjfWZ1bmN0aW9uIGcoYSl7aWYoT2JqZWN0LmtleXMpcmV0dXJuIE9iamVjdC5rZXlzKGEpO3ZhciBiPVtdO3JldHVybiBRKGEsZnVuY3Rpb24oYSxjKXtiLnB1c2goYyl9KSxifWZ1bmN0aW9uIGgoYSxiKXtpZihBcnJheS5wcm90b3R5cGUuaW5kZXhPZilyZXR1cm4gYS5pbmRleE9mKGIsTnVtYmVyKGFyZ3VtZW50c1syXSl8fDApO3ZhciBjPWEubGVuZ3RoPj4+MCxkPU51bWJlcihhcmd1bWVudHNbMl0pfHwwO2ZvcihkPTA+ZD9NYXRoLmNlaWwoZCk6TWF0aC5mbG9vcihkKSwwPmQmJihkKz1jKTtjPmQ7ZCsrKWlmKGQgaW4gYSYmYVtkXT09PWIpcmV0dXJuIGQ7cmV0dXJuLTF9ZnVuY3Rpb24gaShhLGIsYyxkKXt2YXIgZSxpPWYoYyxkKSxqPXt9LGs9W107Zm9yKHZhciBsIGluIGkpaWYoaVtsXSYmaVtsXS5wYXJhbXMmJihlPWcoaVtsXS5wYXJhbXMpLGUubGVuZ3RoKSlmb3IodmFyIG0gaW4gZSloKGssZVttXSk+PTB8fChrLnB1c2goZVttXSksaltlW21dXT1hW2VbbV1dKTtyZXR1cm4gUih7fSxqLGIpfWZ1bmN0aW9uIGooYSxiLGMpe2lmKCFjKXtjPVtdO2Zvcih2YXIgZCBpbiBhKWMucHVzaChkKX1mb3IodmFyIGU9MDtlPGMubGVuZ3RoO2UrKyl7dmFyIGY9Y1tlXTtpZihhW2ZdIT1iW2ZdKXJldHVybiExfXJldHVybiEwfWZ1bmN0aW9uIGsoYSxiKXt2YXIgYz17fTtyZXR1cm4gUShhLGZ1bmN0aW9uKGEpe2NbYV09YlthXX0pLGN9ZnVuY3Rpb24gbChhKXt2YXIgYj17fSxjPUFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoQXJyYXkucHJvdG90eXBlLEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSk7cmV0dXJuIFEoYyxmdW5jdGlvbihjKXtjIGluIGEmJihiW2NdPWFbY10pfSksYn1mdW5jdGlvbiBtKGEpe3ZhciBiPXt9LGM9QXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShBcnJheS5wcm90b3R5cGUsQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpKTtmb3IodmFyIGQgaW4gYSktMT09aChjLGQpJiYoYltkXT1hW2RdKTtyZXR1cm4gYn1mdW5jdGlvbiBuKGEsYil7dmFyIGM9UChhKSxkPWM/W106e307cmV0dXJuIFEoYSxmdW5jdGlvbihhLGUpe2IoYSxlKSYmKGRbYz9kLmxlbmd0aDplXT1hKX0pLGR9ZnVuY3Rpb24gbyhhLGIpe3ZhciBjPVAoYSk/W106e307cmV0dXJuIFEoYSxmdW5jdGlvbihhLGQpe2NbZF09YihhLGQpfSksY31mdW5jdGlvbiBwKGEsYil7dmFyIGQ9MSxmPTIsaT17fSxqPVtdLGs9aSxsPVIoYS53aGVuKGkpLHskJHByb21pc2VzOmksJCR2YWx1ZXM6aX0pO3RoaXMuc3R1ZHk9ZnVuY3Rpb24oaSl7ZnVuY3Rpb24gbihhLGMpe2lmKHNbY10hPT1mKXtpZihyLnB1c2goYyksc1tjXT09PWQpdGhyb3cgci5zcGxpY2UoMCxoKHIsYykpLG5ldyBFcnJvcigiQ3ljbGljIGRlcGVuZGVuY3k6ICIrci5qb2luKCIgLT4gIikpO2lmKHNbY109ZCxOKGEpKXEucHVzaChjLFtmdW5jdGlvbigpe3JldHVybiBiLmdldChhKX1dLGopO2Vsc2V7dmFyIGU9Yi5hbm5vdGF0ZShhKTtRKGUsZnVuY3Rpb24oYSl7YSE9PWMmJmkuaGFzT3duUHJvcGVydHkoYSkmJm4oaVthXSxhKX0pLHEucHVzaChjLGEsZSl9ci5wb3AoKSxzW2NdPWZ9fWZ1bmN0aW9uIG8oYSl7cmV0dXJuIE8oYSkmJmEudGhlbiYmYS4kJHByb21pc2VzfWlmKCFPKGkpKXRocm93IG5ldyBFcnJvcigiJ2ludm9jYWJsZXMnIG11c3QgYmUgYW4gb2JqZWN0Iik7dmFyIHA9ZyhpfHx7fSkscT1bXSxyPVtdLHM9e307cmV0dXJuIFEoaSxuKSxpPXI9cz1udWxsLGZ1bmN0aW9uKGQsZixnKXtmdW5jdGlvbiBoKCl7LS11fHwodnx8ZSh0LGYuJCR2YWx1ZXMpLHIuJCR2YWx1ZXM9dCxyLiQkcHJvbWlzZXM9ci4kJHByb21pc2VzfHwhMCxkZWxldGUgci4kJGluaGVyaXRlZFZhbHVlcyxuLnJlc29sdmUodCkpfWZ1bmN0aW9uIGkoYSl7ci4kJGZhaWx1cmU9YSxuLnJlamVjdChhKX1mdW5jdGlvbiBqKGMsZSxmKXtmdW5jdGlvbiBqKGEpe2wucmVqZWN0KGEpLGkoYSl9ZnVuY3Rpb24gaygpe2lmKCFMKHIuJCRmYWlsdXJlKSl0cnl7bC5yZXNvbHZlKGIuaW52b2tlKGUsZyx0KSksbC5wcm9taXNlLnRoZW4oZnVuY3Rpb24oYSl7dFtjXT1hLGgoKX0sail9Y2F0Y2goYSl7aihhKX19dmFyIGw9YS5kZWZlcigpLG09MDtRKGYsZnVuY3Rpb24oYSl7cy5oYXNPd25Qcm9wZXJ0eShhKSYmIWQuaGFzT3duUHJvcGVydHkoYSkmJihtKyssc1thXS50aGVuKGZ1bmN0aW9uKGIpe3RbYV09YiwtLW18fGsoKX0saikpfSksbXx8aygpLHNbY109bC5wcm9taXNlfWlmKG8oZCkmJmc9PT1jJiYoZz1mLGY9ZCxkPW51bGwpLGQpe2lmKCFPKGQpKXRocm93IG5ldyBFcnJvcigiJ2xvY2FscycgbXVzdCBiZSBhbiBvYmplY3QiKX1lbHNlIGQ9aztpZihmKXtpZighbyhmKSl0aHJvdyBuZXcgRXJyb3IoIidwYXJlbnQnIG11c3QgYmUgYSBwcm9taXNlIHJldHVybmVkIGJ5ICRyZXNvbHZlLnJlc29sdmUoKSIpfWVsc2UgZj1sO3ZhciBuPWEuZGVmZXIoKSxyPW4ucHJvbWlzZSxzPXIuJCRwcm9taXNlcz17fSx0PVIoe30sZCksdT0xK3EubGVuZ3RoLzMsdj0hMTtpZihMKGYuJCRmYWlsdXJlKSlyZXR1cm4gaShmLiQkZmFpbHVyZSkscjtmLiQkaW5oZXJpdGVkVmFsdWVzJiZlKHQsbShmLiQkaW5oZXJpdGVkVmFsdWVzLHApKSxSKHMsZi4kJHByb21pc2VzKSxmLiQkdmFsdWVzPyh2PWUodCxtKGYuJCR2YWx1ZXMscCkpLHIuJCRpbmhlcml0ZWRWYWx1ZXM9bShmLiQkdmFsdWVzLHApLGgoKSk6KGYuJCRpbmhlcml0ZWRWYWx1ZXMmJihyLiQkaW5oZXJpdGVkVmFsdWVzPW0oZi4kJGluaGVyaXRlZFZhbHVlcyxwKSksZi50aGVuKGgsaSkpO2Zvcih2YXIgdz0wLHg9cS5sZW5ndGg7eD53O3crPTMpZC5oYXNPd25Qcm9wZXJ0eShxW3ddKT9oKCk6aihxW3ddLHFbdysxXSxxW3crMl0pO3JldHVybiByfX0sdGhpcy5yZXNvbHZlPWZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLnN0dWR5KGEpKGIsYyxkKX19ZnVuY3Rpb24gcShhLGIsYyl7dGhpcy5mcm9tQ29uZmlnPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gTChhLnRlbXBsYXRlKT90aGlzLmZyb21TdHJpbmcoYS50ZW1wbGF0ZSxiKTpMKGEudGVtcGxhdGVVcmwpP3RoaXMuZnJvbVVybChhLnRlbXBsYXRlVXJsLGIpOkwoYS50ZW1wbGF0ZVByb3ZpZGVyKT90aGlzLmZyb21Qcm92aWRlcihhLnRlbXBsYXRlUHJvdmlkZXIsYixjKTpudWxsfSx0aGlzLmZyb21TdHJpbmc9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gTShhKT9hKGIpOmF9LHRoaXMuZnJvbVVybD1mdW5jdGlvbihjLGQpe3JldHVybiBNKGMpJiYoYz1jKGQpKSxudWxsPT1jP251bGw6YS5nZXQoYyx7Y2FjaGU6YixoZWFkZXJzOntBY2NlcHQ6InRleHQvaHRtbCJ9fSkudGhlbihmdW5jdGlvbihhKXtyZXR1cm4gYS5kYXRhfSl9LHRoaXMuZnJvbVByb3ZpZGVyPWZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gYy5pbnZva2UoYSxudWxsLGR8fHtwYXJhbXM6Yn0pfX1mdW5jdGlvbiByKGEsYixlKXtmdW5jdGlvbiBmKGIsYyxkLGUpe2lmKHEucHVzaChiKSxvW2JdKXJldHVybiBvW2JdO2lmKCEvXlx3KyhbLS5dK1x3KykqKD86XFtcXSk/JC8udGVzdChiKSl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgcGFyYW1ldGVyIG5hbWUgJyIrYisiJyBpbiBwYXR0ZXJuICciK2ErIiciKTtpZihwW2JdKXRocm93IG5ldyBFcnJvcigiRHVwbGljYXRlIHBhcmFtZXRlciBuYW1lICciK2IrIicgaW4gcGF0dGVybiAnIithKyInIik7cmV0dXJuIHBbYl09bmV3IFUuUGFyYW0oYixjLGQsZSkscFtiXX1mdW5jdGlvbiBnKGEsYixjLGQpe3ZhciBlPVsiIiwiIl0sZj1hLnJlcGxhY2UoL1tcXFxbXF1cXiQqKz8uKCl8e31dL2csIlxcJCYiKTtpZighYilyZXR1cm4gZjtzd2l0Y2goYyl7Y2FzZSExOmU9WyIoIiwiKSIrKGQ/Ij8iOiIiKV07YnJlYWs7Y2FzZSEwOmY9Zi5yZXBsYWNlKC9cLyQvLCIiKSxlPVsiKD86LygiLCIpfC8pPyJdO2JyZWFrO2RlZmF1bHQ6ZT1bIigiK2MrInwiLCIpPyJdfXJldHVybiBmK2VbMF0rYitlWzFdfWZ1bmN0aW9uIGgoZSxmKXt2YXIgZyxoLGksaixrO3JldHVybiBnPWVbMl18fGVbM10saz1iLnBhcmFtc1tnXSxpPWEuc3Vic3RyaW5nKG0sZS5pbmRleCksaD1mP2VbNF06ZVs0XXx8KCIqIj09ZVsxXT8iLioiOm51bGwpLGgmJihqPVUudHlwZShoKXx8ZChVLnR5cGUoInN0cmluZyIpLHtwYXR0ZXJuOm5ldyBSZWdFeHAoaCxiLmNhc2VJbnNlbnNpdGl2ZT8iaSI6Yyl9KSkse2lkOmcscmVnZXhwOmgsc2VnbWVudDppLHR5cGU6aixjZmc6a319Yj1SKHtwYXJhbXM6e319LE8oYik/Yjp7fSk7dmFyIGksaj0vKFs6Kl0pKFtcd1xbXF1dKyl8XHsoW1x3XFtcXV0rKSg/Olw6XHMqKCg/Oltee31cXF0rfFxcLnxceyg/Oltee31cXF0rfFxcLikqXH0pKykpP1x9L2csaz0vKFs6XT8pKFtcd1xbXF0uLV0rKXxceyhbXHdcW1xdLi1dKykoPzpcOlxzKigoPzpbXnt9XFxdK3xcXC58XHsoPzpbXnt9XFxdK3xcXC4pKlx9KSspKT9cfS9nLGw9Il4iLG09MCxuPXRoaXMuc2VnbWVudHM9W10sbz1lP2UucGFyYW1zOnt9LHA9dGhpcy5wYXJhbXM9ZT9lLnBhcmFtcy4kJG5ldygpOm5ldyBVLlBhcmFtU2V0LHE9W107dGhpcy5zb3VyY2U9YTtmb3IodmFyIHIscyx0OyhpPWouZXhlYyhhKSkmJihyPWgoaSwhMSksIShyLnNlZ21lbnQuaW5kZXhPZigiPyIpPj0wKSk7KXM9ZihyLmlkLHIudHlwZSxyLmNmZywicGF0aCIpLGwrPWcoci5zZWdtZW50LHMudHlwZS5wYXR0ZXJuLnNvdXJjZSxzLnNxdWFzaCxzLmlzT3B0aW9uYWwpLG4ucHVzaChyLnNlZ21lbnQpLG09ai5sYXN0SW5kZXg7dD1hLnN1YnN0cmluZyhtKTt2YXIgdT10LmluZGV4T2YoIj8iKTtpZih1Pj0wKXt2YXIgdj10aGlzLnNvdXJjZVNlYXJjaD10LnN1YnN0cmluZyh1KTtpZih0PXQuc3Vic3RyaW5nKDAsdSksdGhpcy5zb3VyY2VQYXRoPWEuc3Vic3RyaW5nKDAsbSt1KSx2Lmxlbmd0aD4wKWZvcihtPTA7aT1rLmV4ZWModik7KXI9aChpLCEwKSxzPWYoci5pZCxyLnR5cGUsci5jZmcsInNlYXJjaCIpLG09ai5sYXN0SW5kZXh9ZWxzZSB0aGlzLnNvdXJjZVBhdGg9YSx0aGlzLnNvdXJjZVNlYXJjaD0iIjtsKz1nKHQpKyhiLnN0cmljdD09PSExPyIvPyI6IiIpKyIkIixuLnB1c2godCksdGhpcy5yZWdleHA9bmV3IFJlZ0V4cChsLGIuY2FzZUluc2Vuc2l0aXZlPyJpIjpjKSx0aGlzLnByZWZpeD1uWzBdLHRoaXMuJCRwYXJhbU5hbWVzPXF9ZnVuY3Rpb24gcyhhKXtSKHRoaXMsYSl9ZnVuY3Rpb24gdCgpe2Z1bmN0aW9uIGEoYSl7cmV0dXJuIG51bGwhPWE/YS50b1N0cmluZygpLnJlcGxhY2UoL34vZywifn4iKS5yZXBsYWNlKC9cLy9nLCJ+MkYiKTphfWZ1bmN0aW9uIGUoYSl7cmV0dXJuIG51bGwhPWE/YS50b1N0cmluZygpLnJlcGxhY2UoL34yRi9nLCIvIikucmVwbGFjZSgvfn4vZywifiIpOmF9ZnVuY3Rpb24gZigpe3JldHVybntzdHJpY3Q6cCxjYXNlSW5zZW5zaXRpdmU6bX19ZnVuY3Rpb24gaShhKXtyZXR1cm4gTShhKXx8UChhKSYmTShhW2EubGVuZ3RoLTFdKX1mdW5jdGlvbiBqKCl7Zm9yKDt3Lmxlbmd0aDspe3ZhciBhPXcuc2hpZnQoKTtpZihhLnBhdHRlcm4pdGhyb3cgbmV3IEVycm9yKCJZb3UgY2Fubm90IG92ZXJyaWRlIGEgdHlwZSdzIC5wYXR0ZXJuIGF0IHJ1bnRpbWUuIik7Yi5leHRlbmQodVthLm5hbWVdLGwuaW52b2tlKGEuZGVmKSl9fWZ1bmN0aW9uIGsoYSl7Uih0aGlzLGF8fHt9KX1VPXRoaXM7dmFyIGwsbT0hMSxwPSEwLHE9ITEsdT17fSx2PSEwLHc9W10seD17c3RyaW5nOntlbmNvZGU6YSxkZWNvZGU6ZSxpczpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YXx8IUwoYSl8fCJzdHJpbmciPT10eXBlb2YgYX0scGF0dGVybjovW15cL10qL30sImludCI6e2VuY29kZTphLGRlY29kZTpmdW5jdGlvbihhKXtyZXR1cm4gcGFyc2VJbnQoYSwxMCl9LGlzOmZ1bmN0aW9uKGEpe3JldHVybiBMKGEpJiZ0aGlzLmRlY29kZShhLnRvU3RyaW5nKCkpPT09YX0scGF0dGVybjovXGQrL30sYm9vbDp7ZW5jb2RlOmZ1bmN0aW9uKGEpe3JldHVybiBhPzE6MH0sZGVjb2RlOmZ1bmN0aW9uKGEpe3JldHVybiAwIT09cGFyc2VJbnQoYSwxMCl9LGlzOmZ1bmN0aW9uKGEpe3JldHVybiBhPT09ITB8fGE9PT0hMX0scGF0dGVybjovMHwxL30sZGF0ZTp7ZW5jb2RlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmlzKGEpP1thLmdldEZ1bGxZZWFyKCksKCIwIisoYS5nZXRNb250aCgpKzEpKS5zbGljZSgtMiksKCIwIithLmdldERhdGUoKSkuc2xpY2UoLTIpXS5qb2luKCItIik6Y30sZGVjb2RlOmZ1bmN0aW9uKGEpe2lmKHRoaXMuaXMoYSkpcmV0dXJuIGE7dmFyIGI9dGhpcy5jYXB0dXJlLmV4ZWMoYSk7cmV0dXJuIGI/bmV3IERhdGUoYlsxXSxiWzJdLTEsYlszXSk6Y30saXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBEYXRlJiYhaXNOYU4oYS52YWx1ZU9mKCkpfSxlcXVhbHM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5pcyhhKSYmdGhpcy5pcyhiKSYmYS50b0lTT1N0cmluZygpPT09Yi50b0lTT1N0cmluZygpfSxwYXR0ZXJuOi9bMC05XXs0fS0oPzowWzEtOV18MVswLTJdKS0oPzowWzEtOV18WzEtMl1bMC05XXwzWzAtMV0pLyxjYXB0dXJlOi8oWzAtOV17NH0pLSgwWzEtOV18MVswLTJdKS0oMFsxLTldfFsxLTJdWzAtOV18M1swLTFdKS99LGpzb246e2VuY29kZTpiLnRvSnNvbixkZWNvZGU6Yi5mcm9tSnNvbixpczpiLmlzT2JqZWN0LGVxdWFsczpiLmVxdWFscyxwYXR0ZXJuOi9bXlwvXSovfSxhbnk6e2VuY29kZTpiLmlkZW50aXR5LGRlY29kZTpiLmlkZW50aXR5LGVxdWFsczpiLmVxdWFscyxwYXR0ZXJuOi8uKi99fTt0LiQkZ2V0RGVmYXVsdFZhbHVlPWZ1bmN0aW9uKGEpe2lmKCFpKGEudmFsdWUpKXJldHVybiBhLnZhbHVlO2lmKCFsKXRocm93IG5ldyBFcnJvcigiSW5qZWN0YWJsZSBmdW5jdGlvbnMgY2Fubm90IGJlIGNhbGxlZCBhdCBjb25maWd1cmF0aW9uIHRpbWUiKTtyZXR1cm4gbC5pbnZva2UoYS52YWx1ZSl9LHRoaXMuY2FzZUluc2Vuc2l0aXZlPWZ1bmN0aW9uKGEpe3JldHVybiBMKGEpJiYobT1hKSxtfSx0aGlzLnN0cmljdE1vZGU9ZnVuY3Rpb24oYSl7cmV0dXJuIEwoYSkmJihwPWEpLHB9LHRoaXMuZGVmYXVsdFNxdWFzaFBvbGljeT1mdW5jdGlvbihhKXtpZighTChhKSlyZXR1cm4gcTtpZihhIT09ITAmJmEhPT0hMSYmIU4oYSkpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHNxdWFzaCBwb2xpY3k6ICIrYSsiLiBWYWxpZCBwb2xpY2llczogZmFsc2UsIHRydWUsIGFyYml0cmFyeS1zdHJpbmciKTtyZXR1cm4gcT1hLGF9LHRoaXMuY29tcGlsZT1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgcihhLFIoZigpLGIpKX0sdGhpcy5pc01hdGNoZXI9ZnVuY3Rpb24oYSl7aWYoIU8oYSkpcmV0dXJuITE7dmFyIGI9ITA7cmV0dXJuIFEoci5wcm90b3R5cGUsZnVuY3Rpb24oYyxkKXtNKGMpJiYoYj1iJiZMKGFbZF0pJiZNKGFbZF0pKX0pLGJ9LHRoaXMudHlwZT1mdW5jdGlvbihhLGIsYyl7aWYoIUwoYikpcmV0dXJuIHVbYV07aWYodS5oYXNPd25Qcm9wZXJ0eShhKSl0aHJvdyBuZXcgRXJyb3IoIkEgdHlwZSBuYW1lZCAnIithKyInIGhhcyBhbHJlYWR5IGJlZW4gZGVmaW5lZC4iKTtyZXR1cm4gdVthXT1uZXcgcyhSKHtuYW1lOmF9LGIpKSxjJiYody5wdXNoKHtuYW1lOmEsZGVmOmN9KSx2fHxqKCkpLHRoaXN9LFEoeCxmdW5jdGlvbihhLGIpe3VbYl09bmV3IHMoUih7bmFtZTpifSxhKSl9KSx1PWQodSx7fSksdGhpcy4kZ2V0PVsiJGluamVjdG9yIixmdW5jdGlvbihhKXtyZXR1cm4gbD1hLHY9ITEsaigpLFEoeCxmdW5jdGlvbihhLGIpe3VbYl18fCh1W2JdPW5ldyBzKGEpKX0pLHRoaXN9XSx0aGlzLlBhcmFtPWZ1bmN0aW9uKGEsZCxlLGYpe2Z1bmN0aW9uIGooYSl7dmFyIGI9TyhhKT9nKGEpOltdLGM9LTE9PT1oKGIsInZhbHVlIikmJi0xPT09aChiLCJ0eXBlIikmJi0xPT09aChiLCJzcXVhc2giKSYmLTE9PT1oKGIsImFycmF5Iik7cmV0dXJuIGMmJihhPXt2YWx1ZTphfSksYS4kJGZuPWkoYS52YWx1ZSk/YS52YWx1ZTpmdW5jdGlvbigpe3JldHVybiBhLnZhbHVlfSxhfWZ1bmN0aW9uIGsoYyxkLGUpe2lmKGMudHlwZSYmZCl0aHJvdyBuZXcgRXJyb3IoIlBhcmFtICciK2ErIicgaGFzIHR3byB0eXBlIGNvbmZpZ3VyYXRpb25zLiIpO3JldHVybiBkP2Q6Yy50eXBlP2IuaXNTdHJpbmcoYy50eXBlKT91W2MudHlwZV06Yy50eXBlIGluc3RhbmNlb2Ygcz9jLnR5cGU6bmV3IHMoYy50eXBlKToiY29uZmlnIj09PWU/dS5hbnk6dS5zdHJpbmd9ZnVuY3Rpb24gbSgpe3ZhciBiPXthcnJheToic2VhcmNoIj09PWY/ImF1dG8iOiExfSxjPWEubWF0Y2goL1xbXF0kLyk/e2FycmF5OiEwfTp7fTtyZXR1cm4gUihiLGMsZSkuYXJyYXl9ZnVuY3Rpb24gcChhLGIpe3ZhciBjPWEuc3F1YXNoO2lmKCFifHxjPT09ITEpcmV0dXJuITE7aWYoIUwoYyl8fG51bGw9PWMpcmV0dXJuIHE7aWYoYz09PSEwfHxOKGMpKXJldHVybiBjO3Rocm93IG5ldyBFcnJvcigiSW52YWxpZCBzcXVhc2ggcG9saWN5OiAnIitjKyInLiBWYWxpZCBwb2xpY2llczogZmFsc2UsIHRydWUsIG9yIGFyYml0cmFyeSBzdHJpbmciKX1mdW5jdGlvbiByKGEsYixkLGUpe3ZhciBmLGcsaT1be2Zyb206IiIsdG86ZHx8Yj9jOiIifSx7ZnJvbTpudWxsLHRvOmR8fGI/YzoiIn1dO3JldHVybiBmPVAoYS5yZXBsYWNlKT9hLnJlcGxhY2U6W10sTihlKSYmZi5wdXNoKHtmcm9tOmUsdG86Y30pLGc9byhmLGZ1bmN0aW9uKGEpe3JldHVybiBhLmZyb219KSxuKGksZnVuY3Rpb24oYSl7cmV0dXJuLTE9PT1oKGcsYS5mcm9tKX0pLmNvbmNhdChmKX1mdW5jdGlvbiB0KCl7aWYoIWwpdGhyb3cgbmV3IEVycm9yKCJJbmplY3RhYmxlIGZ1bmN0aW9ucyBjYW5ub3QgYmUgY2FsbGVkIGF0IGNvbmZpZ3VyYXRpb24gdGltZSIpO3ZhciBhPWwuaW52b2tlKGUuJCRmbik7aWYobnVsbCE9PWEmJmEhPT1jJiYheC50eXBlLmlzKGEpKXRocm93IG5ldyBFcnJvcigiRGVmYXVsdCB2YWx1ZSAoIithKyIpIGZvciBwYXJhbWV0ZXIgJyIreC5pZCsiJyBpcyBub3QgYW4gaW5zdGFuY2Ugb2YgVHlwZSAoIit4LnR5cGUubmFtZSsiKSIpO3JldHVybiBhfWZ1bmN0aW9uIHYoYSl7ZnVuY3Rpb24gYihhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIGIuZnJvbT09PWF9fWZ1bmN0aW9uIGMoYSl7dmFyIGM9byhuKHgucmVwbGFjZSxiKGEpKSxmdW5jdGlvbihhKXtyZXR1cm4gYS50b30pO3JldHVybiBjLmxlbmd0aD9jWzBdOmF9cmV0dXJuIGE9YyhhKSxMKGEpP3gudHlwZS4kbm9ybWFsaXplKGEpOnQoKX1mdW5jdGlvbiB3KCl7cmV0dXJuIntQYXJhbToiK2ErIiAiK2QrIiBzcXVhc2g6ICciK0ErIicgb3B0aW9uYWw6ICIreisifSJ9dmFyIHg9dGhpcztlPWooZSksZD1rKGUsZCxmKTt2YXIgeT1tKCk7ZD15P2QuJGFzQXJyYXkoeSwic2VhcmNoIj09PWYpOmQsInN0cmluZyIhPT1kLm5hbWV8fHl8fCJwYXRoIiE9PWZ8fGUudmFsdWUhPT1jfHwoZS52YWx1ZT0iIik7dmFyIHo9ZS52YWx1ZSE9PWMsQT1wKGUseiksQj1yKGUseSx6LEEpO1IodGhpcyx7aWQ6YSx0eXBlOmQsbG9jYXRpb246ZixhcnJheTp5LHNxdWFzaDpBLHJlcGxhY2U6Qixpc09wdGlvbmFsOnosdmFsdWU6dixkeW5hbWljOmMsY29uZmlnOmUsdG9TdHJpbmc6d30pfSxrLnByb3RvdHlwZT17JCRuZXc6ZnVuY3Rpb24oKXtyZXR1cm4gZCh0aGlzLFIobmV3IGsseyQkcGFyZW50OnRoaXN9KSl9LCQka2V5czpmdW5jdGlvbigpe2Zvcih2YXIgYT1bXSxiPVtdLGM9dGhpcyxkPWcoay5wcm90b3R5cGUpO2M7KWIucHVzaChjKSxjPWMuJCRwYXJlbnQ7cmV0dXJuIGIucmV2ZXJzZSgpLFEoYixmdW5jdGlvbihiKXtRKGcoYiksZnVuY3Rpb24oYil7LTE9PT1oKGEsYikmJi0xPT09aChkLGIpJiZhLnB1c2goYil9KX0pLGF9LCQkdmFsdWVzOmZ1bmN0aW9uKGEpe3ZhciBiPXt9LGM9dGhpcztyZXR1cm4gUShjLiQka2V5cygpLGZ1bmN0aW9uKGQpe2JbZF09Y1tkXS52YWx1ZShhJiZhW2RdKX0pLGJ9LCQkZXF1YWxzOmZ1bmN0aW9uKGEsYil7dmFyIGM9ITAsZD10aGlzO3JldHVybiBRKGQuJCRrZXlzKCksZnVuY3Rpb24oZSl7dmFyIGY9YSYmYVtlXSxnPWImJmJbZV07ZFtlXS50eXBlLmVxdWFscyhmLGcpfHwoYz0hMSl9KSxjfSwkJHZhbGlkYXRlczpmdW5jdGlvbihhKXt2YXIgZCxlLGYsZyxoLGk9dGhpcy4kJGtleXMoKTtmb3IoZD0wO2Q8aS5sZW5ndGgmJihlPXRoaXNbaVtkXV0sZj1hW2lbZF1dLGYhPT1jJiZudWxsIT09Znx8IWUuaXNPcHRpb25hbCk7ZCsrKXtpZihnPWUudHlwZS4kbm9ybWFsaXplKGYpLCFlLnR5cGUuaXMoZykpcmV0dXJuITE7aWYoaD1lLnR5cGUuZW5jb2RlKGcpLGIuaXNTdHJpbmcoaCkmJiFlLnR5cGUucGF0dGVybi5leGVjKGgpKXJldHVybiExfXJldHVybiEwfSwkJHBhcmVudDpjfSx0aGlzLlBhcmFtU2V0PWt9ZnVuY3Rpb24gdShhLGQpe2Z1bmN0aW9uIGUoYSl7dmFyIGI9L15cXigoPzpcXFteYS16QS1aMC05XXxbXlxcXFtcXVxeJCorPy4oKXx7fV0rKSopLy5leGVjKGEuc291cmNlKTtyZXR1cm4gbnVsbCE9Yj9iWzFdLnJlcGxhY2UoL1xcKC4pL2csIiQxIik6IiJ9ZnVuY3Rpb24gZihhLGIpe3JldHVybiBhLnJlcGxhY2UoL1wkKFwkfFxkezEsMn0pLyxmdW5jdGlvbihhLGMpe3JldHVybiBiWyIkIj09PWM/MDpOdW1iZXIoYyldfSl9ZnVuY3Rpb24gZyhhLGIsYyl7aWYoIWMpcmV0dXJuITE7dmFyIGQ9YS5pbnZva2UoYixiLHskbWF0Y2g6Y30pO3JldHVybiBMKGQpP2Q6ITB9ZnVuY3Rpb24gaChkLGUsZixnLGgpe2Z1bmN0aW9uIG0oYSxiLGMpe3JldHVybiIvIj09PXE/YTpiP3Euc2xpY2UoMCwtMSkrYTpjP3Euc2xpY2UoMSkrYTphfWZ1bmN0aW9uIG4oYSl7ZnVuY3Rpb24gYihhKXt2YXIgYj1hKGYsZCk7cmV0dXJuIGI/KE4oYikmJmQucmVwbGFjZSgpLnVybChiKSwhMCk6ITF9aWYoIWF8fCFhLmRlZmF1bHRQcmV2ZW50ZWQpe3AmJmQudXJsKCk9PT1wO3A9Yzt2YXIgZSxnPWoubGVuZ3RoO2ZvcihlPTA7Zz5lO2UrKylpZihiKGpbZV0pKXJldHVybjtrJiZiKGspfX1mdW5jdGlvbiBvKCl7cmV0dXJuIGk9aXx8ZS4kb24oIiRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3MiLG4pfXZhciBwLHE9Zy5iYXNlSHJlZigpLHI9ZC51cmwoKTtyZXR1cm4gbHx8bygpLHtzeW5jOmZ1bmN0aW9uKCl7bigpfSxsaXN0ZW46ZnVuY3Rpb24oKXtyZXR1cm4gbygpfSx1cGRhdGU6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/dm9pZChyPWQudXJsKCkpOnZvaWQoZC51cmwoKSE9PXImJihkLnVybChyKSxkLnJlcGxhY2UoKSkpfSxwdXNoOmZ1bmN0aW9uKGEsYixlKXt2YXIgZj1hLmZvcm1hdChifHx7fSk7bnVsbCE9PWYmJmImJmJbIiMiXSYmKGYrPSIjIitiWyIjIl0pLGQudXJsKGYpLHA9ZSYmZS4kJGF2b2lkUmVzeW5jP2QudXJsKCk6YyxlJiZlLnJlcGxhY2UmJmQucmVwbGFjZSgpfSxocmVmOmZ1bmN0aW9uKGMsZSxmKXtpZighYy52YWxpZGF0ZXMoZSkpcmV0dXJuIG51bGw7dmFyIGc9YS5odG1sNU1vZGUoKTtiLmlzT2JqZWN0KGcpJiYoZz1nLmVuYWJsZWQpLGc9ZyYmaC5oaXN0b3J5O3ZhciBpPWMuZm9ybWF0KGUpO2lmKGY9Znx8e30sZ3x8bnVsbD09PWl8fChpPSIjIithLmhhc2hQcmVmaXgoKStpKSxudWxsIT09aSYmZSYmZVsiIyJdJiYoaSs9IiMiK2VbIiMiXSksaT1tKGksZyxmLmFic29sdXRlKSwhZi5hYnNvbHV0ZXx8IWkpcmV0dXJuIGk7dmFyIGo9IWcmJmk/Ii8iOiIiLGs9ZC5wb3J0KCk7cmV0dXJuIGs9ODA9PT1rfHw0NDM9PT1rPyIiOiI6IitrLFtkLnByb3RvY29sKCksIjovLyIsZC5ob3N0KCksayxqLGldLmpvaW4oIiIpfX19dmFyIGksaj1bXSxrPW51bGwsbD0hMTt0aGlzLnJ1bGU9ZnVuY3Rpb24oYSl7aWYoIU0oYSkpdGhyb3cgbmV3IEVycm9yKCIncnVsZScgbXVzdCBiZSBhIGZ1bmN0aW9uIik7cmV0dXJuIGoucHVzaChhKSx0aGlzfSx0aGlzLm90aGVyd2lzZT1mdW5jdGlvbihhKXtpZihOKGEpKXt2YXIgYj1hO2E9ZnVuY3Rpb24oKXtyZXR1cm4gYn19ZWxzZSBpZighTShhKSl0aHJvdyBuZXcgRXJyb3IoIidydWxlJyBtdXN0IGJlIGEgZnVuY3Rpb24iKTtyZXR1cm4gaz1hLHRoaXN9LHRoaXMud2hlbj1mdW5jdGlvbihhLGIpe3ZhciBjLGg9TihiKTtpZihOKGEpJiYoYT1kLmNvbXBpbGUoYSkpLCFoJiYhTShiKSYmIVAoYikpdGhyb3cgbmV3IEVycm9yKCJpbnZhbGlkICdoYW5kbGVyJyBpbiB3aGVuKCkiKTt2YXIgaT17bWF0Y2hlcjpmdW5jdGlvbihhLGIpe3JldHVybiBoJiYoYz1kLmNvbXBpbGUoYiksYj1bIiRtYXRjaCIsZnVuY3Rpb24oYSl7cmV0dXJuIGMuZm9ybWF0KGEpfV0pLFIoZnVuY3Rpb24oYyxkKXtyZXR1cm4gZyhjLGIsYS5leGVjKGQucGF0aCgpLGQuc2VhcmNoKCkpKX0se3ByZWZpeDpOKGEucHJlZml4KT9hLnByZWZpeDoiIn0pfSxyZWdleDpmdW5jdGlvbihhLGIpe2lmKGEuZ2xvYmFsfHxhLnN0aWNreSl0aHJvdyBuZXcgRXJyb3IoIndoZW4oKSBSZWdFeHAgbXVzdCBub3QgYmUgZ2xvYmFsIG9yIHN0aWNreSIpO3JldHVybiBoJiYoYz1iLGI9WyIkbWF0Y2giLGZ1bmN0aW9uKGEpe3JldHVybiBmKGMsYSl9XSksUihmdW5jdGlvbihjLGQpe3JldHVybiBnKGMsYixhLmV4ZWMoZC5wYXRoKCkpKX0se3ByZWZpeDplKGEpfSl9fSxqPXttYXRjaGVyOmQuaXNNYXRjaGVyKGEpLHJlZ2V4OmEgaW5zdGFuY2VvZiBSZWdFeHB9O2Zvcih2YXIgayBpbiBqKWlmKGpba10pcmV0dXJuIHRoaXMucnVsZShpW2tdKGEsYikpO3Rocm93IG5ldyBFcnJvcigiaW52YWxpZCAnd2hhdCcgaW4gd2hlbigpIil9LHRoaXMuZGVmZXJJbnRlcmNlcHQ9ZnVuY3Rpb24oYSl7YT09PWMmJihhPSEwKSxsPWF9LHRoaXMuJGdldD1oLGguJGluamVjdD1bIiRsb2NhdGlvbiIsIiRyb290U2NvcGUiLCIkaW5qZWN0b3IiLCIkYnJvd3NlciIsIiRzbmlmZmVyIl19ZnVuY3Rpb24gdihhLGUpe2Z1bmN0aW9uIGYoYSl7cmV0dXJuIDA9PT1hLmluZGV4T2YoIi4iKXx8MD09PWEuaW5kZXhPZigiXiIpfWZ1bmN0aW9uIG0oYSxiKXtpZighYSlyZXR1cm4gYzt2YXIgZD1OKGEpLGU9ZD9hOmEubmFtZSxnPWYoZSk7aWYoZyl7aWYoIWIpdGhyb3cgbmV3IEVycm9yKCJObyByZWZlcmVuY2UgcG9pbnQgZ2l2ZW4gZm9yIHBhdGggJyIrZSsiJyIpO2I9bShiKTtmb3IodmFyIGg9ZS5zcGxpdCgiLiIpLGk9MCxqPWgubGVuZ3RoLGs9YjtqPmk7aSsrKWlmKCIiIT09aFtpXXx8MCE9PWkpe2lmKCJeIiE9PWhbaV0pYnJlYWs7aWYoIWsucGFyZW50KXRocm93IG5ldyBFcnJvcigiUGF0aCAnIitlKyInIG5vdCB2YWxpZCBmb3Igc3RhdGUgJyIrYi5uYW1lKyInIik7az1rLnBhcmVudH1lbHNlIGs9YjtoPWguc2xpY2UoaSkuam9pbigiLiIpLGU9ay5uYW1lKyhrLm5hbWUmJmg/Ii4iOiIiKStofXZhciBsPXpbZV07cmV0dXJuIWx8fCFkJiYoZHx8bCE9PWEmJmwuc2VsZiE9PWEpP2M6bH1mdW5jdGlvbiBuKGEsYil7QVthXXx8KEFbYV09W10pLEFbYV0ucHVzaChiKX1mdW5jdGlvbiBwKGEpe2Zvcih2YXIgYj1BW2FdfHxbXTtiLmxlbmd0aDspcShiLnNoaWZ0KCkpfWZ1bmN0aW9uIHEoYil7Yj1kKGIse3NlbGY6YixyZXNvbHZlOmIucmVzb2x2ZXx8e30sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uYW1lfX0pO3ZhciBjPWIubmFtZTtpZighTihjKXx8Yy5pbmRleE9mKCJAIik+PTApdGhyb3cgbmV3IEVycm9yKCJTdGF0ZSBtdXN0IGhhdmUgYSB2YWxpZCBuYW1lIik7aWYoei5oYXNPd25Qcm9wZXJ0eShjKSl0aHJvdyBuZXcgRXJyb3IoIlN0YXRlICciK2MrIicgaXMgYWxyZWFkeSBkZWZpbmVkIik7dmFyIGU9LTEhPT1jLmluZGV4T2YoIi4iKT9jLnN1YnN0cmluZygwLGMubGFzdEluZGV4T2YoIi4iKSk6TihiLnBhcmVudCk/Yi5wYXJlbnQ6TyhiLnBhcmVudCkmJk4oYi5wYXJlbnQubmFtZSk/Yi5wYXJlbnQubmFtZToiIjtpZihlJiYheltlXSlyZXR1cm4gbihlLGIuc2VsZik7Zm9yKHZhciBmIGluIEMpTShDW2ZdKSYmKGJbZl09Q1tmXShiLEMuJGRlbGVnYXRlc1tmXSkpO3JldHVybiB6W2NdPWIsIWJbQl0mJmIudXJsJiZhLndoZW4oYi51cmwsWyIkbWF0Y2giLCIkc3RhdGVQYXJhbXMiLGZ1bmN0aW9uKGEsYyl7eS4kY3VycmVudC5uYXZpZ2FibGU9PWImJmooYSxjKXx8eS50cmFuc2l0aW9uVG8oYixhLHtpbmhlcml0OiEwLGxvY2F0aW9uOiExfSl9XSkscChjKSxifWZ1bmN0aW9uIHIoYSl7cmV0dXJuIGEuaW5kZXhPZigiKiIpPi0xfWZ1bmN0aW9uIHMoYSl7Zm9yKHZhciBiPWEuc3BsaXQoIi4iKSxjPXkuJGN1cnJlbnQubmFtZS5zcGxpdCgiLiIpLGQ9MCxlPWIubGVuZ3RoO2U+ZDtkKyspIioiPT09YltkXSYmKGNbZF09IioiKTtyZXR1cm4iKioiPT09YlswXSYmKGM9Yy5zbGljZShoKGMsYlsxXSkpLGMudW5zaGlmdCgiKioiKSksIioqIj09PWJbYi5sZW5ndGgtMV0mJihjLnNwbGljZShoKGMsYltiLmxlbmd0aC0yXSkrMSxOdW1iZXIuTUFYX1ZBTFVFKSxjLnB1c2goIioqIikpLGIubGVuZ3RoIT1jLmxlbmd0aD8hMTpjLmpvaW4oIiIpPT09Yi5qb2luKCIiKX1mdW5jdGlvbiB0KGEsYil7cmV0dXJuIE4oYSkmJiFMKGIpP0NbYV06TShiKSYmTihhKT8oQ1thXSYmIUMuJGRlbGVnYXRlc1thXSYmKEMuJGRlbGVnYXRlc1thXT1DW2FdKSxDW2FdPWIsdGhpcyk6dGhpc31mdW5jdGlvbiB1KGEsYil7cmV0dXJuIE8oYSk/Yj1hOmIubmFtZT1hLHEoYiksdGhpc31mdW5jdGlvbiB2KGEsZSxmLGgsbCxuLHAscSx0KXtmdW5jdGlvbiB1KGIsYyxkLGYpe3ZhciBnPWEuJGJyb2FkY2FzdCgiJHN0YXRlTm90Rm91bmQiLGIsYyxkKTtpZihnLmRlZmF1bHRQcmV2ZW50ZWQpcmV0dXJuIHAudXBkYXRlKCksRDtpZighZy5yZXRyeSlyZXR1cm4gbnVsbDtpZihmLiRyZXRyeSlyZXR1cm4gcC51cGRhdGUoKSxFO3ZhciBoPXkudHJhbnNpdGlvbj1lLndoZW4oZy5yZXRyeSk7cmV0dXJuIGgudGhlbihmdW5jdGlvbigpe3JldHVybiBoIT09eS50cmFuc2l0aW9uP0E6KGIub3B0aW9ucy4kcmV0cnk9ITAseS50cmFuc2l0aW9uVG8oYi50byxiLnRvUGFyYW1zLGIub3B0aW9ucykpfSxmdW5jdGlvbigpe3JldHVybiBEfSkscC51cGRhdGUoKSxofWZ1bmN0aW9uIHYoYSxjLGQsZyxpLGope2Z1bmN0aW9uIG0oKXt2YXIgYz1bXTtyZXR1cm4gUShhLnZpZXdzLGZ1bmN0aW9uKGQsZSl7dmFyIGc9ZC5yZXNvbHZlJiZkLnJlc29sdmUhPT1hLnJlc29sdmU/ZC5yZXNvbHZlOnt9O2cuJHRlbXBsYXRlPVtmdW5jdGlvbigpe3JldHVybiBmLmxvYWQoZSx7dmlldzpkLGxvY2FsczppLmdsb2JhbHMscGFyYW1zOm4sbm90aWZ5Omoubm90aWZ5fSl8fCIifV0sYy5wdXNoKGwucmVzb2x2ZShnLGkuZ2xvYmFscyxpLnJlc29sdmUsYSkudGhlbihmdW5jdGlvbihjKXtpZihNKGQuY29udHJvbGxlclByb3ZpZGVyKXx8UChkLmNvbnRyb2xsZXJQcm92aWRlcikpe3ZhciBmPWIuZXh0ZW5kKHt9LGcsaS5nbG9iYWxzKTtjLiQkY29udHJvbGxlcj1oLmludm9rZShkLmNvbnRyb2xsZXJQcm92aWRlcixudWxsLGYpfWVsc2UgYy4kJGNvbnRyb2xsZXI9ZC5jb250cm9sbGVyO2MuJCRzdGF0ZT1hLGMuJCRjb250cm9sbGVyQXM9ZC5jb250cm9sbGVyQXMsYy4kJHJlc29sdmVBcz1kLnJlc29sdmVBcyxpW2VdPWN9KSl9KSxlLmFsbChjKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGkuZ2xvYmFsc30pfXZhciBuPWQ/YzprKGEucGFyYW1zLiQka2V5cygpLGMpLG89eyRzdGF0ZVBhcmFtczpufTtpLnJlc29sdmU9bC5yZXNvbHZlKGEucmVzb2x2ZSxvLGkucmVzb2x2ZSxhKTt2YXIgcD1baS5yZXNvbHZlLnRoZW4oZnVuY3Rpb24oYSl7aS5nbG9iYWxzPWF9KV07cmV0dXJuIGcmJnAucHVzaChnKSxlLmFsbChwKS50aGVuKG0pLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuIGl9KX12YXIgQT1lLnJlamVjdChuZXcgRXJyb3IoInRyYW5zaXRpb24gc3VwZXJzZWRlZCIpKSxDPWUucmVqZWN0KG5ldyBFcnJvcigidHJhbnNpdGlvbiBwcmV2ZW50ZWQiKSksRD1lLnJlamVjdChuZXcgRXJyb3IoInRyYW5zaXRpb24gYWJvcnRlZCIpKSxFPWUucmVqZWN0KG5ldyBFcnJvcigidHJhbnNpdGlvbiBmYWlsZWQiKSk7cmV0dXJuIHgubG9jYWxzPXtyZXNvbHZlOm51bGwsZ2xvYmFsczp7JHN0YXRlUGFyYW1zOnt9fX0seT17cGFyYW1zOnt9LGN1cnJlbnQ6eC5zZWxmLCRjdXJyZW50OngsdHJhbnNpdGlvbjpudWxsfSx5LnJlbG9hZD1mdW5jdGlvbihhKXtyZXR1cm4geS50cmFuc2l0aW9uVG8oeS5jdXJyZW50LG4se3JlbG9hZDphfHwhMCxpbmhlcml0OiExLG5vdGlmeTohMH0pfSx5LmdvPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4geS50cmFuc2l0aW9uVG8oYSxiLFIoe2luaGVyaXQ6ITAscmVsYXRpdmU6eS4kY3VycmVudH0sYykpfSx5LnRyYW5zaXRpb25Ubz1mdW5jdGlvbihiLGMsZil7Yz1jfHx7fSxmPVIoe2xvY2F0aW9uOiEwLGluaGVyaXQ6ITEscmVsYXRpdmU6bnVsbCxub3RpZnk6ITAscmVsb2FkOiExLCRyZXRyeTohMX0sZnx8e30pO3ZhciBnLGo9eS4kY3VycmVudCxsPXkucGFyYW1zLG89ai5wYXRoLHE9bShiLGYucmVsYXRpdmUpLHI9Y1siIyJdO2lmKCFMKHEpKXt2YXIgcz17dG86Yix0b1BhcmFtczpjLG9wdGlvbnM6Zn0sdD11KHMsai5zZWxmLGwsZik7aWYodClyZXR1cm4gdDtpZihiPXMudG8sYz1zLnRvUGFyYW1zLGY9cy5vcHRpb25zLHE9bShiLGYucmVsYXRpdmUpLCFMKHEpKXtpZighZi5yZWxhdGl2ZSl0aHJvdyBuZXcgRXJyb3IoIk5vIHN1Y2ggc3RhdGUgJyIrYisiJyIpO3Rocm93IG5ldyBFcnJvcigiQ291bGQgbm90IHJlc29sdmUgJyIrYisiJyBmcm9tIHN0YXRlICciK2YucmVsYXRpdmUrIiciKX19aWYocVtCXSl0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCB0cmFuc2l0aW9uIHRvIGFic3RyYWN0IHN0YXRlICciK2IrIiciKTtpZihmLmluaGVyaXQmJihjPWkobixjfHx7fSx5LiRjdXJyZW50LHEpKSwhcS5wYXJhbXMuJCR2YWxpZGF0ZXMoYykpcmV0dXJuIEU7Yz1xLnBhcmFtcy4kJHZhbHVlcyhjKSxiPXE7dmFyIHo9Yi5wYXRoLEQ9MCxGPXpbRF0sRz14LmxvY2FscyxIPVtdO2lmKGYucmVsb2FkKXtpZihOKGYucmVsb2FkKXx8TyhmLnJlbG9hZCkpe2lmKE8oZi5yZWxvYWQpJiYhZi5yZWxvYWQubmFtZSl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgcmVsb2FkIHN0YXRlIG9iamVjdCIpO3ZhciBJPWYucmVsb2FkPT09ITA/b1swXTptKGYucmVsb2FkKTtpZihmLnJlbG9hZCYmIUkpdGhyb3cgbmV3IEVycm9yKCJObyBzdWNoIHJlbG9hZCBzdGF0ZSAnIisoTihmLnJlbG9hZCk/Zi5yZWxvYWQ6Zi5yZWxvYWQubmFtZSkrIiciKTtmb3IoO0YmJkY9PT1vW0RdJiZGIT09STspRz1IW0RdPUYubG9jYWxzLEQrKyxGPXpbRF19fWVsc2UgZm9yKDtGJiZGPT09b1tEXSYmRi5vd25QYXJhbXMuJCRlcXVhbHMoYyxsKTspRz1IW0RdPUYubG9jYWxzLEQrKyxGPXpbRF07aWYodyhiLGMsaixsLEcsZikpcmV0dXJuIHImJihjWyIjIl09cikseS5wYXJhbXM9YyxTKHkucGFyYW1zLG4pLFMoayhiLnBhcmFtcy4kJGtleXMoKSxuKSxiLmxvY2Fscy5nbG9iYWxzLiRzdGF0ZVBhcmFtcyksZi5sb2NhdGlvbiYmYi5uYXZpZ2FibGUmJmIubmF2aWdhYmxlLnVybCYmKHAucHVzaChiLm5hdmlnYWJsZS51cmwsYyx7JCRhdm9pZFJlc3luYzohMCxyZXBsYWNlOiJyZXBsYWNlIj09PWYubG9jYXRpb259KSxwLnVwZGF0ZSghMCkpLHkudHJhbnNpdGlvbj1udWxsLGUud2hlbih5LmN1cnJlbnQpO2lmKGM9ayhiLnBhcmFtcy4kJGtleXMoKSxjfHx7fSksciYmKGNbIiMiXT1yKSxmLm5vdGlmeSYmYS4kYnJvYWRjYXN0KCIkc3RhdGVDaGFuZ2VTdGFydCIsYi5zZWxmLGMsai5zZWxmLGwsZikuZGVmYXVsdFByZXZlbnRlZClyZXR1cm4gYS4kYnJvYWRjYXN0KCIkc3RhdGVDaGFuZ2VDYW5jZWwiLGIuc2VsZixjLGouc2VsZixsKSxudWxsPT15LnRyYW5zaXRpb24mJnAudXBkYXRlKCksQztmb3IodmFyIEo9ZS53aGVuKEcpLEs9RDtLPHoubGVuZ3RoO0srKyxGPXpbS10pRz1IW0tdPWQoRyksSj12KEYsYyxGPT09YixKLEcsZik7dmFyIE09eS50cmFuc2l0aW9uPUoudGhlbihmdW5jdGlvbigpe3ZhciBkLGUsZztpZih5LnRyYW5zaXRpb24hPT1NKXJldHVybiBBO2ZvcihkPW8ubGVuZ3RoLTE7ZD49RDtkLS0pZz1vW2RdLGcuc2VsZi5vbkV4aXQmJmguaW52b2tlKGcuc2VsZi5vbkV4aXQsZy5zZWxmLGcubG9jYWxzLmdsb2JhbHMpLGcubG9jYWxzPW51bGw7Zm9yKGQ9RDtkPHoubGVuZ3RoO2QrKyllPXpbZF0sZS5sb2NhbHM9SFtkXSxlLnNlbGYub25FbnRlciYmaC5pbnZva2UoZS5zZWxmLm9uRW50ZXIsZS5zZWxmLGUubG9jYWxzLmdsb2JhbHMpO3JldHVybiB5LnRyYW5zaXRpb24hPT1NP0E6KHkuJGN1cnJlbnQ9Yix5LmN1cnJlbnQ9Yi5zZWxmLHkucGFyYW1zPWMsUyh5LnBhcmFtcyxuKSx5LnRyYW5zaXRpb249bnVsbCxmLmxvY2F0aW9uJiZiLm5hdmlnYWJsZSYmcC5wdXNoKGIubmF2aWdhYmxlLnVybCxiLm5hdmlnYWJsZS5sb2NhbHMuZ2xvYmFscy4kc3RhdGVQYXJhbXMseyQkYXZvaWRSZXN5bmM6ITAscmVwbGFjZToicmVwbGFjZSI9PT1mLmxvY2F0aW9ufSksZi5ub3RpZnkmJmEuJGJyb2FkY2FzdCgiJHN0YXRlQ2hhbmdlU3VjY2VzcyIsYi5zZWxmLGMsai5zZWxmLGwpLHAudXBkYXRlKCEwKSx5LmN1cnJlbnQpfSkudGhlbihudWxsLGZ1bmN0aW9uKGQpe3JldHVybiB5LnRyYW5zaXRpb24hPT1NP0E6KHkudHJhbnNpdGlvbj1udWxsLGc9YS4kYnJvYWRjYXN0KCIkc3RhdGVDaGFuZ2VFcnJvciIsYi5zZWxmLGMsai5zZWxmLGwsZCksZy5kZWZhdWx0UHJldmVudGVkfHxwLnVwZGF0ZSgpLGUucmVqZWN0KGQpKX0pO3JldHVybiBNfSx5LmlzPWZ1bmN0aW9uKGEsYixkKXtkPVIoe3JlbGF0aXZlOnkuJGN1cnJlbnR9LGR8fHt9KTt2YXIgZT1tKGEsZC5yZWxhdGl2ZSk7cmV0dXJuIEwoZSk/eS4kY3VycmVudCE9PWU/ITE6Yj9qKGUucGFyYW1zLiQkdmFsdWVzKGIpLG4pOiEwOmN9LHkuaW5jbHVkZXM9ZnVuY3Rpb24oYSxiLGQpe2lmKGQ9Uih7cmVsYXRpdmU6eS4kY3VycmVudH0sZHx8e30pLE4oYSkmJnIoYSkpe2lmKCFzKGEpKXJldHVybiExO2E9eS4kY3VycmVudC5uYW1lfXZhciBlPW0oYSxkLnJlbGF0aXZlKTtyZXR1cm4gTChlKT9MKHkuJGN1cnJlbnQuaW5jbHVkZXNbZS5uYW1lXSk/Yj9qKGUucGFyYW1zLiQkdmFsdWVzKGIpLG4sZyhiKSk6ITA6ITE6Y30seS5ocmVmPWZ1bmN0aW9uKGEsYixkKXtkPVIoe2xvc3N5OiEwLGluaGVyaXQ6ITAsYWJzb2x1dGU6ITEscmVsYXRpdmU6eS4kY3VycmVudH0sZHx8e30pO3ZhciBlPW0oYSxkLnJlbGF0aXZlKTtpZighTChlKSlyZXR1cm4gbnVsbDtkLmluaGVyaXQmJihiPWkobixifHx7fSx5LiRjdXJyZW50LGUpKTt2YXIgZj1lJiZkLmxvc3N5P2UubmF2aWdhYmxlOmU7cmV0dXJuIGYmJmYudXJsIT09YyYmbnVsbCE9PWYudXJsP3AuaHJlZihmLnVybCxrKGUucGFyYW1zLiQka2V5cygpLmNvbmNhdCgiIyIpLGJ8fHt9KSx7YWJzb2x1dGU6ZC5hYnNvbHV0ZX0pOm51bGx9LHkuZ2V0PWZ1bmN0aW9uKGEsYil7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIG8oZyh6KSxmdW5jdGlvbihhKXtyZXR1cm4gelthXS5zZWxmfSk7dmFyIGM9bShhLGJ8fHkuJGN1cnJlbnQpO3JldHVybiBjJiZjLnNlbGY/Yy5zZWxmOm51bGx9LHl9ZnVuY3Rpb24gdyhhLGIsYyxkLGUsZil7ZnVuY3Rpb24gZyhhLGIsYyl7ZnVuY3Rpb24gZChiKXtyZXR1cm4ic2VhcmNoIiE9YS5wYXJhbXNbYl0ubG9jYXRpb259dmFyIGU9YS5wYXJhbXMuJCRrZXlzKCkuZmlsdGVyKGQpLGY9bC5hcHBseSh7fSxbYS5wYXJhbXNdLmNvbmNhdChlKSksZz1uZXcgVS5QYXJhbVNldChmKTtyZXR1cm4gZy4kJGVxdWFscyhiLGMpfXJldHVybiFmLnJlbG9hZCYmYT09PWMmJihlPT09Yy5sb2NhbHN8fGEuc2VsZi5yZWxvYWRPblNlYXJjaD09PSExJiZnKGMsZCxiKSk/ITA6dm9pZCAwfXZhciB4LHksej17fSxBPXt9LEI9ImFic3RyYWN0IixDPXtwYXJlbnQ6ZnVuY3Rpb24oYSl7aWYoTChhLnBhcmVudCkmJmEucGFyZW50KXJldHVybiBtKGEucGFyZW50KTt2YXIgYj0vXiguKylcLlteLl0rJC8uZXhlYyhhLm5hbWUpO3JldHVybiBiP20oYlsxXSk6eH0sZGF0YTpmdW5jdGlvbihhKXtyZXR1cm4gYS5wYXJlbnQmJmEucGFyZW50LmRhdGEmJihhLmRhdGE9YS5zZWxmLmRhdGE9ZChhLnBhcmVudC5kYXRhLGEuZGF0YSkpLGEuZGF0YX0sdXJsOmZ1bmN0aW9uKGEpe3ZhciBiPWEudXJsLGM9e3BhcmFtczphLnBhcmFtc3x8e319O2lmKE4oYikpcmV0dXJuIl4iPT1iLmNoYXJBdCgwKT9lLmNvbXBpbGUoYi5zdWJzdHJpbmcoMSksYyk6KGEucGFyZW50Lm5hdmlnYWJsZXx8eCkudXJsLmNvbmNhdChiLGMpO2lmKCFifHxlLmlzTWF0Y2hlcihiKSlyZXR1cm4gYjt0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgdXJsICciK2IrIicgaW4gc3RhdGUgJyIrYSsiJyIpfSxuYXZpZ2FibGU6ZnVuY3Rpb24oYSl7cmV0dXJuIGEudXJsP2E6YS5wYXJlbnQ/YS5wYXJlbnQubmF2aWdhYmxlOm51bGx9LG93blBhcmFtczpmdW5jdGlvbihhKXt2YXIgYj1hLnVybCYmYS51cmwucGFyYW1zfHxuZXcgVS5QYXJhbVNldDtyZXR1cm4gUShhLnBhcmFtc3x8e30sZnVuY3Rpb24oYSxjKXtiW2NdfHwoYltjXT1uZXcgVS5QYXJhbShjLG51bGwsYSwiY29uZmlnIikpfSksYn0scGFyYW1zOmZ1bmN0aW9uKGEpe3ZhciBiPWwoYS5vd25QYXJhbXMsYS5vd25QYXJhbXMuJCRrZXlzKCkpO3JldHVybiBhLnBhcmVudCYmYS5wYXJlbnQucGFyYW1zP1IoYS5wYXJlbnQucGFyYW1zLiQkbmV3KCksYik6bmV3IFUuUGFyYW1TZXR9LHZpZXdzOmZ1bmN0aW9uKGEpe3ZhciBiPXt9O3JldHVybiBRKEwoYS52aWV3cyk/YS52aWV3czp7IiI6YX0sZnVuY3Rpb24oYyxkKXtkLmluZGV4T2YoIkAiKTwwJiYoZCs9IkAiK2EucGFyZW50Lm5hbWUpLGMucmVzb2x2ZUFzPWMucmVzb2x2ZUFzfHxhLnJlc29sdmVBc3x8IiRyZXNvbHZlIixiW2RdPWN9KSxifSxwYXRoOmZ1bmN0aW9uKGEpe3JldHVybiBhLnBhcmVudD9hLnBhcmVudC5wYXRoLmNvbmNhdChhKTpbXX0saW5jbHVkZXM6ZnVuY3Rpb24oYSl7dmFyIGI9YS5wYXJlbnQ/Uih7fSxhLnBhcmVudC5pbmNsdWRlcyk6e307cmV0dXJuIGJbYS5uYW1lXT0hMCxifSwkZGVsZWdhdGVzOnt9fTt4PXEoe25hbWU6IiIsdXJsOiJeIix2aWV3czpudWxsLCJhYnN0cmFjdCI6ITB9KSx4Lm5hdmlnYWJsZT1udWxsLHRoaXMuZGVjb3JhdG9yPXQsdGhpcy5zdGF0ZT11LHRoaXMuJGdldD12LHYuJGluamVjdD1bIiRyb290U2NvcGUiLCIkcSIsIiR2aWV3IiwiJGluamVjdG9yIiwiJHJlc29sdmUiLCIkc3RhdGVQYXJhbXMiLCIkdXJsUm91dGVyIiwiJGxvY2F0aW9uIiwiJHVybE1hdGNoZXJGYWN0b3J5Il19ZnVuY3Rpb24gdygpe2Z1bmN0aW9uIGEoYSxiKXtyZXR1cm57bG9hZDpmdW5jdGlvbihhLGMpe3ZhciBkLGU9e3RlbXBsYXRlOm51bGwsY29udHJvbGxlcjpudWxsLHZpZXc6bnVsbCxsb2NhbHM6bnVsbCxub3RpZnk6ITAsYXN5bmM6ITAscGFyYW1zOnt9fTtyZXR1cm4gYz1SKGUsYyksYy52aWV3JiYoZD1iLmZyb21Db25maWcoYy52aWV3LGMucGFyYW1zLGMubG9jYWxzKSksZH19fXRoaXMuJGdldD1hLGEuJGluamVjdD1bIiRyb290U2NvcGUiLCIkdGVtcGxhdGVGYWN0b3J5Il19ZnVuY3Rpb24geCgpe3ZhciBhPSExO3RoaXMudXNlQW5jaG9yU2Nyb2xsPWZ1bmN0aW9uKCl7YT0hMH0sdGhpcy4kZ2V0PVsiJGFuY2hvclNjcm9sbCIsIiR0aW1lb3V0IixmdW5jdGlvbihiLGMpe3JldHVybiBhP2I6ZnVuY3Rpb24oYSl7cmV0dXJuIGMoZnVuY3Rpb24oKXthWzBdLnNjcm9sbEludG9WaWV3KCl9LDAsITEpfX1dfWZ1bmN0aW9uIHkoYSxjLGQsZSxmKXtmdW5jdGlvbiBnKCl7cmV0dXJuIGMuaGFzP2Z1bmN0aW9uKGEpe3JldHVybiBjLmhhcyhhKT9jLmdldChhKTpudWxsfTpmdW5jdGlvbihhKXt0cnl7cmV0dXJuIGMuZ2V0KGEpfWNhdGNoKGIpe3JldHVybiBudWxsfX19ZnVuY3Rpb24gaChhLGMpe3ZhciBkPWZ1bmN0aW9uKCl7cmV0dXJue2VudGVyOmZ1bmN0aW9uKGEsYixjKXtiLmFmdGVyKGEpLGMoKX0sbGVhdmU6ZnVuY3Rpb24oYSxiKXthLnJlbW92ZSgpLGIoKX19fTtpZihrKXJldHVybntlbnRlcjpmdW5jdGlvbihhLGMsZCl7Yi52ZXJzaW9uLm1pbm9yPjI/ay5lbnRlcihhLG51bGwsYykudGhlbihkKTprLmVudGVyKGEsbnVsbCxjLGQpfSxsZWF2ZTpmdW5jdGlvbihhLGMpe2IudmVyc2lvbi5taW5vcj4yP2subGVhdmUoYSkudGhlbihjKTprLmxlYXZlKGEsYyl9fTtpZihqKXt2YXIgZT1qJiZqKGMsYSk7cmV0dXJue2VudGVyOmZ1bmN0aW9uKGEsYixjKXtlLmVudGVyKGEsbnVsbCxiKSxjKCl9LGxlYXZlOmZ1bmN0aW9uKGEsYil7ZS5sZWF2ZShhKSxiKCl9fX1yZXR1cm4gZCgpfXZhciBpPWcoKSxqPWkoIiRhbmltYXRvciIpLGs9aSgiJGFuaW1hdGUiKSxsPXtyZXN0cmljdDoiRUNBIix0ZXJtaW5hbDohMCxwcmlvcml0eTo0MDAsdHJhbnNjbHVkZToiZWxlbWVudCIsY29tcGlsZTpmdW5jdGlvbihjLGcsaSl7cmV0dXJuIGZ1bmN0aW9uKGMsZyxqKXtmdW5jdGlvbiBrKCl7aWYobSYmKG0ucmVtb3ZlKCksbT1udWxsKSxvJiYoby4kZGVzdHJveSgpLG89bnVsbCksbil7dmFyIGE9bi5kYXRhKCIkdWlWaWV3QW5pbSIpO3MubGVhdmUobixmdW5jdGlvbigpe2EuJCRhbmltTGVhdmUucmVzb2x2ZSgpLG09bnVsbH0pLG09bixuPW51bGx9fWZ1bmN0aW9uIGwoaCl7dmFyIGwsbT1BKGMsaixnLGUpLHQ9bSYmYS4kY3VycmVudCYmYS4kY3VycmVudC5sb2NhbHNbbV07aWYoaHx8dCE9PXApe2w9Yy4kbmV3KCkscD1hLiRjdXJyZW50LmxvY2Fsc1ttXSxsLiRlbWl0KCIkdmlld0NvbnRlbnRMb2FkaW5nIixtKTt2YXIgdT1pKGwsZnVuY3Rpb24oYSl7dmFyIGU9Zi5kZWZlcigpLGg9Zi5kZWZlcigpLGk9eyRhbmltRW50ZXI6ZS5wcm9taXNlLCRhbmltTGVhdmU6aC5wcm9taXNlLCQkYW5pbUxlYXZlOmh9O2EuZGF0YSgiJHVpVmlld0FuaW0iLGkpLHMuZW50ZXIoYSxnLGZ1bmN0aW9uKCl7ZS5yZXNvbHZlKCksbyYmby4kZW1pdCgiJHZpZXdDb250ZW50QW5pbWF0aW9uRW5kZWQiKSwoYi5pc0RlZmluZWQocikmJiFyfHxjLiRldmFsKHIpKSYmZChhKX0pLGsoKX0pO249dSxvPWwsby4kZW1pdCgiJHZpZXdDb250ZW50TG9hZGVkIixtKSxvLiRldmFsKHEpfX12YXIgbSxuLG8scCxxPWoub25sb2FkfHwiIixyPWouYXV0b3Njcm9sbCxzPWgoaixjKTtnLmluaGVyaXRlZERhdGEoIiR1aVZpZXciKTtjLiRvbigiJHN0YXRlQ2hhbmdlU3VjY2VzcyIsZnVuY3Rpb24oKXtsKCExKX0pLGwoITApfX19O3JldHVybiBsfWZ1bmN0aW9uIHooYSxjLGQsZSl7cmV0dXJue3Jlc3RyaWN0OiJFQ0EiLHByaW9yaXR5Oi00MDAsY29tcGlsZTpmdW5jdGlvbihmKXt2YXIgZz1mLmh0bWwoKTtyZXR1cm4gZnVuY3Rpb24oZixoLGkpe3ZhciBqPWQuJGN1cnJlbnQsaz1BKGYsaSxoLGUpLGw9aiYmai5sb2NhbHNba107aWYobCl7aC5kYXRhKCIkdWlWaWV3Iix7bmFtZTprLHN0YXRlOmwuJCRzdGF0ZX0pLGguaHRtbChsLiR0ZW1wbGF0ZT9sLiR0ZW1wbGF0ZTpnKTt2YXIgbT1iLmV4dGVuZCh7fSxsKTtmW2wuJCRyZXNvbHZlQXNdPW07dmFyIG49YShoLmNvbnRlbnRzKCkpO2lmKGwuJCRjb250cm9sbGVyKXtsLiRzY29wZT1mLGwuJGVsZW1lbnQ9aDt2YXIgbz1jKGwuJCRjb250cm9sbGVyLGwpO2wuJCRjb250cm9sbGVyQXMmJihmW2wuJCRjb250cm9sbGVyQXNdPW8sZltsLiQkY29udHJvbGxlckFzXVtsLiQkcmVzb2x2ZUFzXT1tKSxNKG8uJG9uSW5pdCkmJm8uJG9uSW5pdCgpLGguZGF0YSgiJG5nQ29udHJvbGxlckNvbnRyb2xsZXIiLG8pLGguY2hpbGRyZW4oKS5kYXRhKCIkbmdDb250cm9sbGVyQ29udHJvbGxlciIsbyl9bihmKX19fX19ZnVuY3Rpb24gQShhLGIsYyxkKXt2YXIgZT1kKGIudWlWaWV3fHxiLm5hbWV8fCIiKShhKSxmPWMuaW5oZXJpdGVkRGF0YSgiJHVpVmlldyIpO3JldHVybiBlLmluZGV4T2YoIkAiKT49MD9lOmUrIkAiKyhmP2Yuc3RhdGUubmFtZToiIil9ZnVuY3Rpb24gQihhLGIpe3ZhciBjLGQ9YS5tYXRjaCgvXlxzKih7W159XSp9KVxzKiQvKTtpZihkJiYoYT1iKyIoIitkWzFdKyIpIiksYz1hLnJlcGxhY2UoL1xuL2csIiAiKS5tYXRjaCgvXihbXihdKz8pXHMqKFwoKC4qKVwpKT8kLyksIWN8fDQhPT1jLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgc3RhdGUgcmVmICciK2ErIiciKTtyZXR1cm57c3RhdGU6Y1sxXSxwYXJhbUV4cHI6Y1szXXx8bnVsbH19ZnVuY3Rpb24gQyhhKXt2YXIgYj1hLnBhcmVudCgpLmluaGVyaXRlZERhdGEoIiR1aVZpZXciKTtyZXR1cm4gYiYmYi5zdGF0ZSYmYi5zdGF0ZS5uYW1lP2Iuc3RhdGU6dm9pZCAwfWZ1bmN0aW9uIEQoYSl7dmFyIGI9IltvYmplY3QgU1ZHQW5pbWF0ZWRTdHJpbmddIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhLnByb3AoImhyZWYiKSksYz0iRk9STSI9PT1hWzBdLm5vZGVOYW1lO3JldHVybnthdHRyOmM/ImFjdGlvbiI6Yj8ieGxpbms6aHJlZiI6ImhyZWYiLGlzQW5jaG9yOiJBIj09PWEucHJvcCgidGFnTmFtZSIpLnRvVXBwZXJDYXNlKCksY2xpY2thYmxlOiFjfX1mdW5jdGlvbiBFKGEsYixjLGQsZSl7cmV0dXJuIGZ1bmN0aW9uKGYpe3ZhciBnPWYud2hpY2h8fGYuYnV0dG9uLGg9ZSgpO2lmKCEoZz4xfHxmLmN0cmxLZXl8fGYubWV0YUtleXx8Zi5zaGlmdEtleXx8YS5hdHRyKCJ0YXJnZXQiKSkpe3ZhciBpPWMoZnVuY3Rpb24oKXtiLmdvKGguc3RhdGUsaC5wYXJhbXMsaC5vcHRpb25zKX0pO2YucHJldmVudERlZmF1bHQoKTt2YXIgaj1kLmlzQW5jaG9yJiYhaC5ocmVmPzE6MDtmLnByZXZlbnREZWZhdWx0PWZ1bmN0aW9uKCl7ai0tPD0wJiZjLmNhbmNlbChpKX19fX1mdW5jdGlvbiBGKGEsYil7cmV0dXJue3JlbGF0aXZlOkMoYSl8fGIuJGN1cnJlbnQsaW5oZXJpdDohMH19ZnVuY3Rpb24gRyhhLGMpe3JldHVybntyZXN0cmljdDoiQSIscmVxdWlyZTpbIj9edWlTcmVmQWN0aXZlIiwiP151aVNyZWZBY3RpdmVFcSJdLGxpbms6ZnVuY3Rpb24oZCxlLGYsZyl7dmFyIGgsaT1CKGYudWlTcmVmLGEuY3VycmVudC5uYW1lKSxqPXtzdGF0ZTppLnN0YXRlLGhyZWY6bnVsbCxwYXJhbXM6bnVsbH0saz1EKGUpLGw9Z1sxXXx8Z1swXSxtPW51bGw7ai5vcHRpb25zPVIoRihlLGEpLGYudWlTcmVmT3B0cz9kLiRldmFsKGYudWlTcmVmT3B0cyk6e30pO3ZhciBuPWZ1bmN0aW9uKGMpe2MmJihqLnBhcmFtcz1iLmNvcHkoYykpLGouaHJlZj1hLmhyZWYoaS5zdGF0ZSxqLnBhcmFtcyxqLm9wdGlvbnMpLG0mJm0oKSxsJiYobT1sLiQkYWRkU3RhdGVJbmZvKGkuc3RhdGUsai5wYXJhbXMpKSxudWxsIT09ai5ocmVmJiZmLiRzZXQoay5hdHRyLGouaHJlZil9O2kucGFyYW1FeHByJiYoZC4kd2F0Y2goaS5wYXJhbUV4cHIsZnVuY3Rpb24oYSl7YSE9PWoucGFyYW1zJiZuKGEpfSwhMCksai5wYXJhbXM9Yi5jb3B5KGQuJGV2YWwoaS5wYXJhbUV4cHIpKSksbigpLGsuY2xpY2thYmxlJiYoaD1FKGUsYSxjLGssZnVuY3Rpb24oKXtyZXR1cm4gan0pLGUuYmluZCgiY2xpY2siLGgpLGQuJG9uKCIkZGVzdHJveSIsZnVuY3Rpb24oKXtlLnVuYmluZCgiY2xpY2siLGgpfSkpfX19ZnVuY3Rpb24gSChhLGIpe3JldHVybntyZXN0cmljdDoiQSIscmVxdWlyZTpbIj9edWlTcmVmQWN0aXZlIiwiP151aVNyZWZBY3RpdmVFcSJdLGxpbms6ZnVuY3Rpb24oYyxkLGUsZil7ZnVuY3Rpb24gZyhiKXttLnN0YXRlPWJbMF0sbS5wYXJhbXM9YlsxXSxtLm9wdGlvbnM9YlsyXSxtLmhyZWY9YS5ocmVmKG0uc3RhdGUsbS5wYXJhbXMsbS5vcHRpb25zKSxuJiZuKCksaiYmKG49ai4kJGFkZFN0YXRlSW5mbyhtLnN0YXRlLG0ucGFyYW1zKSksbS5ocmVmJiZlLiRzZXQoaS5hdHRyLG0uaHJlZil9dmFyIGgsaT1EKGQpLGo9ZlsxXXx8ZlswXSxrPVtlLnVpU3RhdGUsZS51aVN0YXRlUGFyYW1zfHxudWxsLGUudWlTdGF0ZU9wdHN8fG51bGxdLGw9IlsiK2subWFwKGZ1bmN0aW9uKGEpe3JldHVybiBhfHwibnVsbCJ9KS5qb2luKCIsICIpKyJdIixtPXtzdGF0ZTpudWxsLHBhcmFtczpudWxsLG9wdGlvbnM6bnVsbCxocmVmOm51bGx9LG49bnVsbDtjLiR3YXRjaChsLGcsITApLGcoYy4kZXZhbChsKSksaS5jbGlja2FibGUmJihoPUUoZCxhLGIsaSxmdW5jdGlvbigpe3JldHVybiBtfSksZC5iaW5kKCJjbGljayIsaCksYy4kb24oIiRkZXN0cm95IixmdW5jdGlvbigpe2QudW5iaW5kKCJjbGljayIsaCl9KSl9fX1mdW5jdGlvbiBJKGEsYixjKXtyZXR1cm57cmVzdHJpY3Q6IkEiLGNvbnRyb2xsZXI6WyIkc2NvcGUiLCIkZWxlbWVudCIsIiRhdHRycyIsIiR0aW1lb3V0IixmdW5jdGlvbihiLGQsZSxmKXtmdW5jdGlvbiBnKGIsYyxlKXt2YXIgZj1hLmdldChiLEMoZCkpLGc9aChiLGMpLGk9e3N0YXRlOmZ8fHtuYW1lOmJ9LHBhcmFtczpjLGhhc2g6Z307cmV0dXJuIHAucHVzaChpKSxxW2ddPWUsZnVuY3Rpb24oKXt2YXIgYT1wLmluZGV4T2YoaSk7LTEhPT1hJiZwLnNwbGljZShhLDEpfX1mdW5jdGlvbiBoKGEsYyl7aWYoIU4oYSkpdGhyb3cgbmV3IEVycm9yKCJzdGF0ZSBzaG91bGQgYmUgYSBzdHJpbmciKTtyZXR1cm4gTyhjKT9hK1QoYyk6KGM9Yi4kZXZhbChjKSxPKGMpP2ErVChjKTphKX1mdW5jdGlvbiBpKCl7Zm9yKHZhciBhPTA7YTxwLmxlbmd0aDthKyspbChwW2FdLnN0YXRlLHBbYV0ucGFyYW1zKT9qKGQscVtwW2FdLmhhc2hdKTprKGQscVtwW2FdLmhhc2hdKSxtKHBbYV0uc3RhdGUscFthXS5wYXJhbXMpP2ooZCxuKTprKGQsbil9ZnVuY3Rpb24gaihhLGIpe2YoZnVuY3Rpb24oKXthLmFkZENsYXNzKGIpfSl9ZnVuY3Rpb24gayhhLGIpe2EucmVtb3ZlQ2xhc3MoYil9ZnVuY3Rpb24gbChiLGMpe3JldHVybiBhLmluY2x1ZGVzKGIubmFtZSxjKX1mdW5jdGlvbiBtKGIsYyl7cmV0dXJuIGEuaXMoYi5uYW1lLGMpfXZhciBuLG8scD1bXSxxPXt9O249YyhlLnVpU3JlZkFjdGl2ZUVxfHwiIiwhMSkoYik7dHJ5e289Yi4kZXZhbChlLnVpU3JlZkFjdGl2ZSl9Y2F0Y2gocil7fW89b3x8YyhlLnVpU3JlZkFjdGl2ZXx8IiIsITEpKGIpLE8obykmJlEobyxmdW5jdGlvbihjLGQpe2lmKE4oYykpe3ZhciBlPUIoYyxhLmN1cnJlbnQubmFtZSk7ZyhlLnN0YXRlLGIuJGV2YWwoZS5wYXJhbUV4cHIpLGQpfX0pLHRoaXMuJCRhZGRTdGF0ZUluZm89ZnVuY3Rpb24oYSxiKXtpZighKE8obykmJnAubGVuZ3RoPjApKXt2YXIgYz1nKGEsYixvKTtyZXR1cm4gaSgpLGN9fSxiLiRvbigiJHN0YXRlQ2hhbmdlU3VjY2VzcyIsaSksaSgpfV19fWZ1bmN0aW9uIEooYSl7dmFyIGI9ZnVuY3Rpb24oYixjKXtyZXR1cm4gYS5pcyhiLGMpfTtyZXR1cm4gYi4kc3RhdGVmdWw9ITAsYn1mdW5jdGlvbiBLKGEpe3ZhciBiPWZ1bmN0aW9uKGIsYyxkKXtyZXR1cm4gYS5pbmNsdWRlcyhiLGMsZCl9O3JldHVybiBiLiRzdGF0ZWZ1bD0hMCxifXZhciBMPWIuaXNEZWZpbmVkLE09Yi5pc0Z1bmN0aW9uLE49Yi5pc1N0cmluZyxPPWIuaXNPYmplY3QsUD1iLmlzQXJyYXksUT1iLmZvckVhY2gsUj1iLmV4dGVuZCxTPWIuY29weSxUPWIudG9Kc29uO2IubW9kdWxlKCJ1aS5yb3V0ZXIudXRpbCIsWyJuZyJdKSxiLm1vZHVsZSgidWkucm91dGVyLnJvdXRlciIsWyJ1aS5yb3V0ZXIudXRpbCJdKSxiLm1vZHVsZSgidWkucm91dGVyLnN0YXRlIixbInVpLnJvdXRlci5yb3V0ZXIiLCJ1aS5yb3V0ZXIudXRpbCJdKSxiLm1vZHVsZSgidWkucm91dGVyIixbInVpLnJvdXRlci5zdGF0ZSJdKSxiLm1vZHVsZSgidWkucm91dGVyLmNvbXBhdCIsWyJ1aS5yb3V0ZXIiXSkscC4kaW5qZWN0PVsiJHEiLCIkaW5qZWN0b3IiXSxiLm1vZHVsZSgidWkucm91dGVyLnV0aWwiKS5zZXJ2aWNlKCIkcmVzb2x2ZSIscCkscS4kaW5qZWN0PVsiJGh0dHAiLCIkdGVtcGxhdGVDYWNoZSIsIiRpbmplY3RvciJdLGIubW9kdWxlKCJ1aS5yb3V0ZXIudXRpbCIpLnNlcnZpY2UoIiR0ZW1wbGF0ZUZhY3RvcnkiLHEpO3ZhciBVO3IucHJvdG90eXBlLmNvbmNhdD1mdW5jdGlvbihhLGIpe3ZhciBjPXtjYXNlSW5zZW5zaXRpdmU6VS5jYXNlSW5zZW5zaXRpdmUoKSxzdHJpY3Q6VS5zdHJpY3RNb2RlKCksc3F1YXNoOlUuZGVmYXVsdFNxdWFzaFBvbGljeSgpfTtyZXR1cm4gbmV3IHIodGhpcy5zb3VyY2VQYXRoK2ErdGhpcy5zb3VyY2VTZWFyY2gsUihjLGIpLHRoaXMpfSxyLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNvdXJjZX0sci5wcm90b3R5cGUuZXhlYz1mdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSl7ZnVuY3Rpb24gYihhKXtyZXR1cm4gYS5zcGxpdCgiIikucmV2ZXJzZSgpLmpvaW4oIiIpfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIGEucmVwbGFjZSgvXFwtL2csIi0iKX12YXIgZD1iKGEpLnNwbGl0KC8tKD8hXFwpLyksZT1vKGQsYik7cmV0dXJuIG8oZSxjKS5yZXZlcnNlKCl9dmFyIGQ9dGhpcy5yZWdleHAuZXhlYyhhKTtpZighZClyZXR1cm4gbnVsbDtiPWJ8fHt9O3ZhciBlLGYsZyxoPXRoaXMucGFyYW1ldGVycygpLGk9aC5sZW5ndGgsaj10aGlzLnNlZ21lbnRzLmxlbmd0aC0xLGs9e307aWYoaiE9PWQubGVuZ3RoLTEpdGhyb3cgbmV3IEVycm9yKCJVbmJhbGFuY2VkIGNhcHR1cmUgZ3JvdXAgaW4gcm91dGUgJyIrdGhpcy5zb3VyY2UrIiciKTt2YXIgbCxtO2ZvcihlPTA7aj5lO2UrKyl7Zm9yKGc9aFtlXSxsPXRoaXMucGFyYW1zW2ddLG09ZFtlKzFdLGY9MDtmPGwucmVwbGFjZS5sZW5ndGg7ZisrKWwucmVwbGFjZVtmXS5mcm9tPT09bSYmKG09bC5yZXBsYWNlW2ZdLnRvKTttJiZsLmFycmF5PT09ITAmJihtPWMobSkpLEwobSkmJihtPWwudHlwZS5kZWNvZGUobSkpLGtbZ109bC52YWx1ZShtKX1mb3IoO2k+ZTtlKyspe2ZvcihnPWhbZV0sa1tnXT10aGlzLnBhcmFtc1tnXS52YWx1ZShiW2ddKSxsPXRoaXMucGFyYW1zW2ddLG09YltnXSxmPTA7ZjxsLnJlcGxhY2UubGVuZ3RoO2YrKylsLnJlcGxhY2VbZl0uZnJvbT09PW0mJihtPWwucmVwbGFjZVtmXS50byk7TChtKSYmKG09bC50eXBlLmRlY29kZShtKSksa1tnXT1sLnZhbHVlKG0pfXJldHVybiBrfSxyLnByb3RvdHlwZS5wYXJhbWV0ZXJzPWZ1bmN0aW9uKGEpe3JldHVybiBMKGEpP3RoaXMucGFyYW1zW2FdfHxudWxsOnRoaXMuJCRwYXJhbU5hbWVzfSxyLnByb3RvdHlwZS52YWxpZGF0ZXM9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucGFyYW1zLiQkdmFsaWRhdGVzKGEpfSxyLnByb3RvdHlwZS5mb3JtYXQ9ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtyZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KGEpLnJlcGxhY2UoLy0vZyxmdW5jdGlvbihhKXtyZXR1cm4iJTVDJSIrYS5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpfSl9YT1hfHx7fTt2YXIgYz10aGlzLnNlZ21lbnRzLGQ9dGhpcy5wYXJhbWV0ZXJzKCksZT10aGlzLnBhcmFtcztpZighdGhpcy52YWxpZGF0ZXMoYSkpcmV0dXJuIG51bGw7dmFyIGYsZz0hMSxoPWMubGVuZ3RoLTEsaT1kLmxlbmd0aCxqPWNbMF07Zm9yKGY9MDtpPmY7ZisrKXt2YXIgaz1oPmYsbD1kW2ZdLG09ZVtsXSxuPW0udmFsdWUoYVtsXSkscD1tLmlzT3B0aW9uYWwmJm0udHlwZS5lcXVhbHMobS52YWx1ZSgpLG4pLHE9cD9tLnNxdWFzaDohMSxyPW0udHlwZS5lbmNvZGUobik7aWYoayl7dmFyIHM9Y1tmKzFdLHQ9ZisxPT09aDtpZihxPT09ITEpbnVsbCE9ciYmKGorPVAocik/byhyLGIpLmpvaW4oIi0iKTplbmNvZGVVUklDb21wb25lbnQocikpLGorPXM7ZWxzZSBpZihxPT09ITApe3ZhciB1PWoubWF0Y2goL1wvJC8pPy9cLz8oLiopLzovKC4qKS87ais9cy5tYXRjaCh1KVsxXX1lbHNlIE4ocSkmJihqKz1xK3MpO3QmJm0uc3F1YXNoPT09ITAmJiIvIj09PWouc2xpY2UoLTEpJiYoaj1qLnNsaWNlKDAsLTEpKX1lbHNle2lmKG51bGw9PXJ8fHAmJnEhPT0hMSljb250aW51ZTtpZihQKHIpfHwocj1bcl0pLDA9PT1yLmxlbmd0aCljb250aW51ZTtyPW8ocixlbmNvZGVVUklDb21wb25lbnQpLmpvaW4oIiYiK2wrIj0iKSxqKz0oZz8iJiI6Ij8iKSsobCsiPSIrciksZz0hMH19cmV0dXJuIGp9LHMucHJvdG90eXBlLmlzPWZ1bmN0aW9uKGEsYil7cmV0dXJuITB9LHMucHJvdG90eXBlLmVuY29kZT1mdW5jdGlvbihhLGIpe3JldHVybiBhfSxzLnByb3RvdHlwZS5kZWNvZGU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYX0scy5wcm90b3R5cGUuZXF1YWxzPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PWJ9LHMucHJvdG90eXBlLiRzdWJQYXR0ZXJuPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5wYXR0ZXJuLnRvU3RyaW5nKCk7cmV0dXJuIGEuc3Vic3RyKDEsYS5sZW5ndGgtMil9LHMucHJvdG90eXBlLnBhdHRlcm49Ly4qLyxzLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJ7VHlwZToiK3RoaXMubmFtZSsifSJ9LHMucHJvdG90eXBlLiRub3JtYWxpemU9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaXMoYSk/YTp0aGlzLmRlY29kZShhKX0scy5wcm90b3R5cGUuJGFzQXJyYXk9ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBkKGEsYil7ZnVuY3Rpb24gZChhLGIpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBhW2JdLmFwcGx5KGEsYXJndW1lbnRzKX19ZnVuY3Rpb24gZShhKXtyZXR1cm4gUChhKT9hOkwoYSk/W2FdOltdfWZ1bmN0aW9uIGYoYSl7c3dpdGNoKGEubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIGM7Y2FzZSAxOnJldHVybiJhdXRvIj09PWI/YVswXTphO2RlZmF1bHQ6cmV0dXJuIGF9fWZ1bmN0aW9uIGcoYSl7cmV0dXJuIWF9ZnVuY3Rpb24gaChhLGIpe3JldHVybiBmdW5jdGlvbihjKXtpZihQKGMpJiYwPT09Yy5sZW5ndGgpcmV0dXJuIGM7Yz1lKGMpO3ZhciBkPW8oYyxhKTtyZXR1cm4gYj09PSEwPzA9PT1uKGQsZykubGVuZ3RoOmYoZCl9fWZ1bmN0aW9uIGkoYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7dmFyIGQ9ZShiKSxmPWUoYyk7aWYoZC5sZW5ndGghPT1mLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIGc9MDtnPGQubGVuZ3RoO2crKylpZighYShkW2ddLGZbZ10pKXJldHVybiExO3JldHVybiEwfX10aGlzLmVuY29kZT1oKGQoYSwiZW5jb2RlIikpLHRoaXMuZGVjb2RlPWgoZChhLCJkZWNvZGUiKSksdGhpcy5pcz1oKGQoYSwiaXMiKSwhMCksdGhpcy5lcXVhbHM9aShkKGEsImVxdWFscyIpKSx0aGlzLnBhdHRlcm49YS5wYXR0ZXJuLHRoaXMuJG5vcm1hbGl6ZT1oKGQoYSwiJG5vcm1hbGl6ZSIpKSx0aGlzLm5hbWU9YS5uYW1lLHRoaXMuJGFycmF5TW9kZT1ifWlmKCFhKXJldHVybiB0aGlzO2lmKCJhdXRvIj09PWEmJiFiKXRocm93IG5ldyBFcnJvcigiJ2F1dG8nIGFycmF5IG1vZGUgaXMgZm9yIHF1ZXJ5IHBhcmFtZXRlcnMgb25seSIpO3JldHVybiBuZXcgZCh0aGlzLGEpfSxiLm1vZHVsZSgidWkucm91dGVyLnV0aWwiKS5wcm92aWRlcigiJHVybE1hdGNoZXJGYWN0b3J5Iix0KSxiLm1vZHVsZSgidWkucm91dGVyLnV0aWwiKS5ydW4oWyIkdXJsTWF0Y2hlckZhY3RvcnkiLGZ1bmN0aW9uKGEpe31dKSx1LiRpbmplY3Q9WyIkbG9jYXRpb25Qcm92aWRlciIsIiR1cmxNYXRjaGVyRmFjdG9yeVByb3ZpZGVyIl0sYi5tb2R1bGUoInVpLnJvdXRlci5yb3V0ZXIiKS5wcm92aWRlcigiJHVybFJvdXRlciIsdSksdi4kaW5qZWN0PVsiJHVybFJvdXRlclByb3ZpZGVyIiwiJHVybE1hdGNoZXJGYWN0b3J5UHJvdmlkZXIiXSxiLm1vZHVsZSgidWkucm91dGVyLnN0YXRlIikuZmFjdG9yeSgiJHN0YXRlUGFyYW1zIixmdW5jdGlvbigpe3JldHVybnt9fSkuY29uc3RhbnQoIiRzdGF0ZS5ydW50aW1lIix7YXV0b2luamVjdDohMH0pLnByb3ZpZGVyKCIkc3RhdGUiLHYpLnJ1bihbIiRpbmplY3RvciIsZnVuY3Rpb24oYSl7CmEuZ2V0KCIkc3RhdGUucnVudGltZSIpLmF1dG9pbmplY3QmJmEuZ2V0KCIkc3RhdGUiKX1dKSx3LiRpbmplY3Q9W10sYi5tb2R1bGUoInVpLnJvdXRlci5zdGF0ZSIpLnByb3ZpZGVyKCIkdmlldyIsdyksYi5tb2R1bGUoInVpLnJvdXRlci5zdGF0ZSIpLnByb3ZpZGVyKCIkdWlWaWV3U2Nyb2xsIix4KSx5LiRpbmplY3Q9WyIkc3RhdGUiLCIkaW5qZWN0b3IiLCIkdWlWaWV3U2Nyb2xsIiwiJGludGVycG9sYXRlIiwiJHEiXSx6LiRpbmplY3Q9WyIkY29tcGlsZSIsIiRjb250cm9sbGVyIiwiJHN0YXRlIiwiJGludGVycG9sYXRlIl0sYi5tb2R1bGUoInVpLnJvdXRlci5zdGF0ZSIpLmRpcmVjdGl2ZSgidWlWaWV3Iix5KSxiLm1vZHVsZSgidWkucm91dGVyLnN0YXRlIikuZGlyZWN0aXZlKCJ1aVZpZXciLHopLEcuJGluamVjdD1bIiRzdGF0ZSIsIiR0aW1lb3V0Il0sSC4kaW5qZWN0PVsiJHN0YXRlIiwiJHRpbWVvdXQiXSxJLiRpbmplY3Q9WyIkc3RhdGUiLCIkc3RhdGVQYXJhbXMiLCIkaW50ZXJwb2xhdGUiXSxiLm1vZHVsZSgidWkucm91dGVyLnN0YXRlIikuZGlyZWN0aXZlKCJ1aVNyZWYiLEcpLmRpcmVjdGl2ZSgidWlTcmVmQWN0aXZlIixJKS5kaXJlY3RpdmUoInVpU3JlZkFjdGl2ZUVxIixJKS5kaXJlY3RpdmUoInVpU3RhdGUiLEgpLEouJGluamVjdD1bIiRzdGF0ZSJdLEsuJGluamVjdD1bIiRzdGF0ZSJdLGIubW9kdWxlKCJ1aS5yb3V0ZXIuc3RhdGUiKS5maWx0ZXIoImlzU3RhdGUiLEopLmZpbHRlcigiaW5jbHVkZWRCeVN0YXRlIixLKX0od2luZG93LHdpbmRvdy5hbmd1bGFyKTsKIWZ1bmN0aW9uKGUsbil7aWYoIm9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYib2JqZWN0Ij09dHlwZW9mIG1vZHVsZSltb2R1bGUuZXhwb3J0cz1uKCk7ZWxzZSBpZigiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZShbXSxuKTtlbHNle3ZhciByPW4oKTtmb3IodmFyIHQgaW4gcikoIm9iamVjdCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHM6ZSlbdF09clt0XX19KHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oZSl7ZnVuY3Rpb24gbih0KXtpZihyW3RdKXJldHVybiByW3RdLmV4cG9ydHM7dmFyIG89clt0XT17ZXhwb3J0czp7fSxpZDp0LGxvYWRlZDohMX07cmV0dXJuIGVbdF0uY2FsbChvLmV4cG9ydHMsbyxvLmV4cG9ydHMsbiksby5sb2FkZWQ9ITAsby5leHBvcnRzfXZhciByPXt9O3JldHVybiBuLm09ZSxuLmM9cixuLnA9IiIsbigwKX0oW2Z1bmN0aW9uKGUsbixyKXsidXNlIHN0cmljdCI7ZS5leHBvcnRzPSJuZ0ZpbGVTYXZlciIsYW5ndWxhci5tb2R1bGUoIm5nRmlsZVNhdmVyIixbXSkuZmFjdG9yeSgiRmlsZVNhdmVyIixbIkJsb2IiLCJTYXZlQXMiLCJGaWxlU2F2ZXJVdGlscyIscigxKV0pLmZhY3RvcnkoIkZpbGVTYXZlclV0aWxzIixbcigyKV0pLmZhY3RvcnkoIkJsb2IiLFsiJHdpbmRvdyIsIkZpbGVTYXZlclV0aWxzIixyKDMpXSkuZmFjdG9yeSgiU2F2ZUFzIixbIiR3aW5kb3ciLCJGaWxlU2F2ZXJVdGlscyIscig0KV0pfSxmdW5jdGlvbihlLG4peyJ1c2Ugc3RyaWN0IjtlLmV4cG9ydHM9ZnVuY3Rpb24oZSxuLHIpe2Z1bmN0aW9uIHQoZSx0LG8pe3RyeXtuKGUsdCxvKX1jYXRjaChpKXtyLmhhbmRsZUVycm9ycyhpLm1lc3NhZ2UpfX1yZXR1cm57c2F2ZUFzOmZ1bmN0aW9uKGUsbixvKXtyZXR1cm4gci5pc0Jsb2JJbnN0YW5jZShlKXx8ci5oYW5kbGVFcnJvcnMoIkRhdGEgYXJndW1lbnQgc2hvdWxkIGJlIGEgYmxvYiBpbnN0YW5jZSIpLHIuaXNTdHJpbmcobil8fHIuaGFuZGxlRXJyb3JzKCJGaWxlbmFtZSBhcmd1bWVudCBzaG91bGQgYmUgYSBzdHJpbmciKSx0KGUsbixvKX19fX0sZnVuY3Rpb24oZSxuKXsidXNlIHN0cmljdCI7ZS5leHBvcnRzPWZ1bmN0aW9uKCl7cmV0dXJue2hhbmRsZUVycm9yczpmdW5jdGlvbihlKXt0aHJvdyBuZXcgRXJyb3IoZSl9LGlzU3RyaW5nOmZ1bmN0aW9uKGUpe3JldHVybiJzdHJpbmciPT10eXBlb2YgZXx8ZSBpbnN0YW5jZW9mIFN0cmluZ30saXNVbmRlZmluZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuInVuZGVmaW5lZCI9PXR5cGVvZiBlfSxpc0Jsb2JJbnN0YW5jZTpmdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIEJsb2J9fX19LGZ1bmN0aW9uKGUsbil7InVzZSBzdHJpY3QiO2UuZXhwb3J0cz1mdW5jdGlvbihlLG4pe3ZhciByPWUuQmxvYjtyZXR1cm4gbi5pc1VuZGVmaW5lZChyKSYmbi5oYW5kbGVFcnJvcnMoIkJsb2IgaXMgbm90IHN1cHBvcnRlZC4gUGxlYXNlIGluY2x1ZGUgYmxvYiBwb2x5ZmlsbGwiKSxyfX0sZnVuY3Rpb24oZSxuKXsidXNlIHN0cmljdCI7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsbil7dmFyIHI9ZS5zYXZlQXM7cmV0dXJuIG4uaXNVbmRlZmluZWQocikmJm4uaGFuZGxlRXJyb3JzKCJzYXZlQXMgaXMgbm90IHN1cHBvcnRlZC4gUGxlYXNlIGluY2x1ZGUgc2F2ZUFzIHBvbHlmaWxsIikscn19XSl9KTsKLyohIG5nc3RvcmFnZSAwLjMuMTAgfCBDb3B5cmlnaHQgKGMpIDIwMTYgR2lhcyBLYXkgTGVlIHwgTUlUIExpY2Vuc2UgKi8hZnVuY3Rpb24oYSxiKXsidXNlIHN0cmljdCI7ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoWyJhbmd1bGFyIl0sYik6YS5oYXNPd25Qcm9wZXJ0eSgiYW5ndWxhciIpP2IoYS5hbmd1bGFyKToib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHMmJihtb2R1bGUuZXhwb3J0cz1iKHJlcXVpcmUoImFuZ3VsYXIiKSkpfSh0aGlzLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEsYil7dmFyIGM7dHJ5e2M9YVtiXX1jYXRjaChkKXtjPSExfWlmKGMpe3ZhciBlPSJfXyIrTWF0aC5yb3VuZCgxZTcqTWF0aC5yYW5kb20oKSk7dHJ5e2FbYl0uc2V0SXRlbShlLGUpLGFbYl0ucmVtb3ZlSXRlbShlLGUpfWNhdGNoKGQpe2M9ITF9fXJldHVybiBjfWZ1bmN0aW9uIGMoYyl7dmFyIGQ9Yih3aW5kb3csYyk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU9Im5nU3RvcmFnZS0iO3RoaXMuc2V0S2V5UHJlZml4PWZ1bmN0aW9uKGEpe2lmKCJzdHJpbmciIT10eXBlb2YgYSl0aHJvdyBuZXcgVHlwZUVycm9yKCJbbmdTdG9yYWdlXSAtICIrYysiUHJvdmlkZXIuc2V0S2V5UHJlZml4KCkgZXhwZWN0cyBhIFN0cmluZy4iKTtlPWF9O3ZhciBmPWEudG9Kc29uLGc9YS5mcm9tSnNvbjt0aGlzLnNldFNlcmlhbGl6ZXI9ZnVuY3Rpb24oYSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGEpdGhyb3cgbmV3IFR5cGVFcnJvcigiW25nU3RvcmFnZV0gLSAiK2MrIlByb3ZpZGVyLnNldFNlcmlhbGl6ZXIgZXhwZWN0cyBhIGZ1bmN0aW9uLiIpO2Y9YX0sdGhpcy5zZXREZXNlcmlhbGl6ZXI9ZnVuY3Rpb24oYSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGEpdGhyb3cgbmV3IFR5cGVFcnJvcigiW25nU3RvcmFnZV0gLSAiK2MrIlByb3ZpZGVyLnNldERlc2VyaWFsaXplciBleHBlY3RzIGEgZnVuY3Rpb24uIik7Zz1hfSx0aGlzLnN1cHBvcnRlZD1mdW5jdGlvbigpe3JldHVybiEhZH0sdGhpcy5nZXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGQmJmcoZC5nZXRJdGVtKGUrYSkpfSx0aGlzLnNldD1mdW5jdGlvbihhLGIpe3JldHVybiBkJiZkLnNldEl0ZW0oZSthLGYoYikpfSx0aGlzLnJlbW92ZT1mdW5jdGlvbihhKXtkJiZkLnJlbW92ZUl0ZW0oZSthKX0sdGhpcy4kZ2V0PVsiJHJvb3RTY29wZSIsIiR3aW5kb3ciLCIkbG9nIiwiJHRpbWVvdXQiLCIkZG9jdW1lbnQiLGZ1bmN0aW9uKGQsaCxpLGosayl7dmFyIGwsbSxuPWUubGVuZ3RoLG89YihoLGMpLHA9b3x8KGkud2FybigiVGhpcyBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgV2ViIFN0b3JhZ2UhIikse3NldEl0ZW06YS5ub29wLGdldEl0ZW06YS5ub29wLHJlbW92ZUl0ZW06YS5ub29wfSkscT17JGRlZmF1bHQ6ZnVuY3Rpb24oYil7Zm9yKHZhciBjIGluIGIpYS5pc0RlZmluZWQocVtjXSl8fChxW2NdPWEuY29weShiW2NdKSk7cmV0dXJuIHEuJHN5bmMoKSxxfSwkcmVzZXQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiIGluIHEpIiQiPT09YlswXXx8ZGVsZXRlIHFbYl0mJnAucmVtb3ZlSXRlbShlK2IpO3JldHVybiBxLiRkZWZhdWx0KGEpfSwkc3luYzpmdW5jdGlvbigpe2Zvcih2YXIgYSxiPTAsYz1wLmxlbmd0aDtjPmI7YisrKShhPXAua2V5KGIpKSYmZT09PWEuc2xpY2UoMCxuKSYmKHFbYS5zbGljZShuKV09ZyhwLmdldEl0ZW0oYSkpKX0sJGFwcGx5OmZ1bmN0aW9uKCl7dmFyIGI7aWYobT1udWxsLCFhLmVxdWFscyhxLGwpKXtiPWEuY29weShsKSxhLmZvckVhY2gocSxmdW5jdGlvbihjLGQpe2EuaXNEZWZpbmVkKGMpJiYiJCIhPT1kWzBdJiYocC5zZXRJdGVtKGUrZCxmKGMpKSxkZWxldGUgYltkXSl9KTtmb3IodmFyIGMgaW4gYilwLnJlbW92ZUl0ZW0oZStjKTtsPWEuY29weShxKX19LCRzdXBwb3J0ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIW99fTtyZXR1cm4gcS4kc3luYygpLGw9YS5jb3B5KHEpLGQuJHdhdGNoKGZ1bmN0aW9uKCl7bXx8KG09aihxLiRhcHBseSwxMDAsITEpKX0pLGguYWRkRXZlbnRMaXN0ZW5lciYmaC5hZGRFdmVudExpc3RlbmVyKCJzdG9yYWdlIixmdW5jdGlvbihiKXtpZihiLmtleSl7dmFyIGM9a1swXTtjLmhhc0ZvY3VzJiZjLmhhc0ZvY3VzKCl8fGUhPT1iLmtleS5zbGljZSgwLG4pfHwoYi5uZXdWYWx1ZT9xW2Iua2V5LnNsaWNlKG4pXT1nKGIubmV3VmFsdWUpOmRlbGV0ZSBxW2Iua2V5LnNsaWNlKG4pXSxsPWEuY29weShxKSxkLiRhcHBseSgpKX19KSxoLmFkZEV2ZW50TGlzdGVuZXImJmguYWRkRXZlbnRMaXN0ZW5lcigiYmVmb3JldW5sb2FkIixmdW5jdGlvbigpe3EuJGFwcGx5KCl9KSxxfV19fXJldHVybiBhPWEmJmEubW9kdWxlP2E6d2luZG93LmFuZ3VsYXIsYS5tb2R1bGUoIm5nU3RvcmFnZSIsW10pLnByb3ZpZGVyKCIkbG9jYWxTdG9yYWdlIixjKCJsb2NhbFN0b3JhZ2UiKSkucHJvdmlkZXIoIiRzZXNzaW9uU3RvcmFnZSIsYygic2Vzc2lvblN0b3JhZ2UiKSl9KTsKLyoKIEFuZ3VsYXJKUyB2MS41LjgKIChjKSAyMDEwLTIwMTYgR29vZ2xlLCBJbmMuIGh0dHA6Ly9hbmd1bGFyanMub3JnCiBMaWNlbnNlOiBNSVQKKi8KKGZ1bmN0aW9uKFAsZCl7J3VzZSBzdHJpY3QnO2Z1bmN0aW9uIEcodCxnKXtnPWd8fHt9O2QuZm9yRWFjaChnLGZ1bmN0aW9uKGQscSl7ZGVsZXRlIGdbcV19KTtmb3IodmFyIHEgaW4gdCkhdC5oYXNPd25Qcm9wZXJ0eShxKXx8IiQiPT09cS5jaGFyQXQoMCkmJiIkIj09PXEuY2hhckF0KDEpfHwoZ1txXT10W3FdKTtyZXR1cm4gZ312YXIgej1kLiQkbWluRXJyKCIkcmVzb3VyY2UiKSxNPS9eKFwuW2EtekEtWl8kQF1bMC05YS16QS1aXyRAXSopKyQvO2QubW9kdWxlKCJuZ1Jlc291cmNlIixbIm5nIl0pLnByb3ZpZGVyKCIkcmVzb3VyY2UiLGZ1bmN0aW9uKCl7dmFyIHQ9L15odHRwcz86XC9cL1teXC9dKi8sZz10aGlzO3RoaXMuZGVmYXVsdHM9e3N0cmlwVHJhaWxpbmdTbGFzaGVzOiEwLGNhbmNlbGxhYmxlOiExLGFjdGlvbnM6e2dldDp7bWV0aG9kOiJHRVQifSxzYXZlOnttZXRob2Q6IlBPU1QifSxxdWVyeTp7bWV0aG9kOiJHRVQiLGlzQXJyYXk6ITB9LHJlbW92ZTp7bWV0aG9kOiJERUxFVEUifSwKImRlbGV0ZSI6e21ldGhvZDoiREVMRVRFIn19fTt0aGlzLiRnZXQ9WyIkaHR0cCIsIiRsb2ciLCIkcSIsIiR0aW1lb3V0IixmdW5jdGlvbihxLEwsSCxJKXtmdW5jdGlvbiBBKGQsaCl7cmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChkKS5yZXBsYWNlKC8lNDAvZ2ksIkAiKS5yZXBsYWNlKC8lM0EvZ2ksIjoiKS5yZXBsYWNlKC8lMjQvZywiJCIpLnJlcGxhY2UoLyUyQy9naSwiLCIpLnJlcGxhY2UoLyUyMC9nLGg/IiUyMCI6IisiKX1mdW5jdGlvbiBCKGQsaCl7dGhpcy50ZW1wbGF0ZT1kO3RoaXMuZGVmYXVsdHM9dih7fSxnLmRlZmF1bHRzLGgpO3RoaXMudXJsUGFyYW1zPXt9fWZ1bmN0aW9uIEooZSxoLG4sayl7ZnVuY3Rpb24gYihhLGMpe3ZhciBiPXt9O2M9dih7fSxoLGMpO3UoYyxmdW5jdGlvbihjLGgpe3goYykmJihjPWMoYSkpO3ZhciBmO2lmKGMmJmMuY2hhckF0JiYiQCI9PWMuY2hhckF0KDApKXtmPWE7dmFyIGw9Yy5zdWJzdHIoMSk7aWYobnVsbD09bHx8IiI9PT1sfHwiaGFzT3duUHJvcGVydHkiPT09Cmx8fCFNLnRlc3QoIi4iK2wpKXRocm93IHooImJhZG1lbWJlciIsbCk7Zm9yKHZhciBsPWwuc3BsaXQoIi4iKSxtPTAsaz1sLmxlbmd0aDttPGsmJmQuaXNEZWZpbmVkKGYpO20rKyl7dmFyIHI9bFttXTtmPW51bGwhPT1mP2Zbcl06dm9pZCAwfX1lbHNlIGY9YztiW2hdPWZ9KTtyZXR1cm4gYn1mdW5jdGlvbiBOKGEpe3JldHVybiBhLnJlc291cmNlfWZ1bmN0aW9uIG0oYSl7RyhhfHx7fSx0aGlzKX12YXIgdD1uZXcgQihlLGspO249dih7fSxnLmRlZmF1bHRzLmFjdGlvbnMsbik7bS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIGE9dih7fSx0aGlzKTtkZWxldGUgYS4kcHJvbWlzZTtkZWxldGUgYS4kcmVzb2x2ZWQ7cmV0dXJuIGF9O3UobixmdW5jdGlvbihhLGMpe3ZhciBoPS9eKFBPU1R8UFVUfFBBVENIKSQvaS50ZXN0KGEubWV0aG9kKSxlPWEudGltZW91dCxFPWQuaXNEZWZpbmVkKGEuY2FuY2VsbGFibGUpP2EuY2FuY2VsbGFibGU6ayYmZC5pc0RlZmluZWQoay5jYW5jZWxsYWJsZSk/CmsuY2FuY2VsbGFibGU6Zy5kZWZhdWx0cy5jYW5jZWxsYWJsZTtlJiYhZC5pc051bWJlcihlKSYmKEwuZGVidWcoIm5nUmVzb3VyY2U6XG4gIE9ubHkgbnVtZXJpYyB2YWx1ZXMgYXJlIGFsbG93ZWQgYXMgYHRpbWVvdXRgLlxuICBQcm9taXNlcyBhcmUgbm90IHN1cHBvcnRlZCBpbiAkcmVzb3VyY2UsIGJlY2F1c2UgdGhlIHNhbWUgdmFsdWUgd291bGQgYmUgdXNlZCBmb3IgbXVsdGlwbGUgcmVxdWVzdHMuIElmIHlvdSBhcmUgbG9va2luZyBmb3IgYSB3YXkgdG8gY2FuY2VsIHJlcXVlc3RzLCB5b3Ugc2hvdWxkIHVzZSB0aGUgYGNhbmNlbGxhYmxlYCBvcHRpb24uIiksZGVsZXRlIGEudGltZW91dCxlPW51bGwpO21bY109ZnVuY3Rpb24oZixsLGssZyl7dmFyIHI9e30sbix3LEM7c3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpe2Nhc2UgNDpDPWcsdz1rO2Nhc2UgMzpjYXNlIDI6aWYoeChsKSl7aWYoeChmKSl7dz1mO0M9bDticmVha313PWw7Qz1rfWVsc2V7cj1mO249bDt3PWs7YnJlYWt9Y2FzZSAxOngoZik/Cnc9ZjpoP249ZjpyPWY7YnJlYWs7Y2FzZSAwOmJyZWFrO2RlZmF1bHQ6dGhyb3cgeigiYmFkYXJncyIsYXJndW1lbnRzLmxlbmd0aCk7fXZhciBEPXRoaXMgaW5zdGFuY2VvZiBtLHA9RD9uOmEuaXNBcnJheT9bXTpuZXcgbShuKSxzPXt9LEE9YS5pbnRlcmNlcHRvciYmYS5pbnRlcmNlcHRvci5yZXNwb25zZXx8TixCPWEuaW50ZXJjZXB0b3ImJmEuaW50ZXJjZXB0b3IucmVzcG9uc2VFcnJvcnx8dm9pZCAwLHksRjt1KGEsZnVuY3Rpb24oYSxjKXtzd2l0Y2goYyl7ZGVmYXVsdDpzW2NdPU8oYSk7Y2FzZSAicGFyYW1zIjpjYXNlICJpc0FycmF5IjpjYXNlICJpbnRlcmNlcHRvciI6Y2FzZSAiY2FuY2VsbGFibGUiOn19KTshRCYmRSYmKHk9SC5kZWZlcigpLHMudGltZW91dD15LnByb21pc2UsZSYmKEY9SSh5LnJlc29sdmUsZSkpKTtoJiYocy5kYXRhPW4pO3Quc2V0VXJsUGFyYW1zKHMsdih7fSxiKG4sYS5wYXJhbXN8fHt9KSxyKSxhLnVybCk7cj1xKHMpLnRoZW4oZnVuY3Rpb24oZil7dmFyIGI9CmYuZGF0YTtpZihiKXtpZihkLmlzQXJyYXkoYikhPT0hIWEuaXNBcnJheSl0aHJvdyB6KCJiYWRjZmciLGMsYS5pc0FycmF5PyJhcnJheSI6Im9iamVjdCIsZC5pc0FycmF5KGIpPyJhcnJheSI6Im9iamVjdCIscy5tZXRob2Qscy51cmwpO2lmKGEuaXNBcnJheSlwLmxlbmd0aD0wLHUoYixmdW5jdGlvbihhKXsib2JqZWN0Ij09PXR5cGVvZiBhP3AucHVzaChuZXcgbShhKSk6cC5wdXNoKGEpfSk7ZWxzZXt2YXIgbD1wLiRwcm9taXNlO0coYixwKTtwLiRwcm9taXNlPWx9fWYucmVzb3VyY2U9cDtyZXR1cm4gZn0sZnVuY3Rpb24oYSl7KEN8fEspKGEpO3JldHVybiBILnJlamVjdChhKX0pO3JbImZpbmFsbHkiXShmdW5jdGlvbigpe3AuJHJlc29sdmVkPSEwOyFEJiZFJiYocC4kY2FuY2VsUmVxdWVzdD1kLm5vb3AsSS5jYW5jZWwoRikseT1GPXMudGltZW91dD1udWxsKX0pO3I9ci50aGVuKGZ1bmN0aW9uKGEpe3ZhciBjPUEoYSk7KHd8fEspKGMsYS5oZWFkZXJzKTtyZXR1cm4gY30sQik7CnJldHVybiBEP3I6KHAuJHByb21pc2U9cixwLiRyZXNvbHZlZD0hMSxFJiYocC4kY2FuY2VsUmVxdWVzdD15LnJlc29sdmUpLHApfTttLnByb3RvdHlwZVsiJCIrY109ZnVuY3Rpb24oYSxiLGQpe3goYSkmJihkPWIsYj1hLGE9e30pO2E9bVtjXS5jYWxsKHRoaXMsYSx0aGlzLGIsZCk7cmV0dXJuIGEuJHByb21pc2V8fGF9fSk7bS5iaW5kPWZ1bmN0aW9uKGEpe3JldHVybiBKKGUsdih7fSxoLGEpLG4pfTtyZXR1cm4gbX12YXIgSz1kLm5vb3AsdT1kLmZvckVhY2gsdj1kLmV4dGVuZCxPPWQuY29weSx4PWQuaXNGdW5jdGlvbjtCLnByb3RvdHlwZT17c2V0VXJsUGFyYW1zOmZ1bmN0aW9uKGUsaCxuKXt2YXIgaz10aGlzLGI9bnx8ay50ZW1wbGF0ZSxnLG0scT0iIixhPWsudXJsUGFyYW1zPXt9O3UoYi5zcGxpdCgvXFcvKSxmdW5jdGlvbihjKXtpZigiaGFzT3duUHJvcGVydHkiPT09Yyl0aHJvdyB6KCJiYWRuYW1lIik7IS9eXGQrJC8udGVzdChjKSYmYyYmKG5ldyBSZWdFeHAoIihefFteXFxcXF0pOiIrCmMrIihcXFd8JCkiKSkudGVzdChiKSYmKGFbY109e2lzUXVlcnlQYXJhbVZhbHVlOihuZXcgUmVnRXhwKCJcXD8uKj06IitjKyIoPzpcXFd8JCkiKSkudGVzdChiKX0pfSk7Yj1iLnJlcGxhY2UoL1xcOi9nLCI6Iik7Yj1iLnJlcGxhY2UodCxmdW5jdGlvbihhKXtxPWE7cmV0dXJuIiJ9KTtoPWh8fHt9O3Uoay51cmxQYXJhbXMsZnVuY3Rpb24oYSxlKXtnPWguaGFzT3duUHJvcGVydHkoZSk/aFtlXTprLmRlZmF1bHRzW2VdO2QuaXNEZWZpbmVkKGcpJiZudWxsIT09Zz8obT1hLmlzUXVlcnlQYXJhbVZhbHVlP0EoZywhMCk6QShnLCEwKS5yZXBsYWNlKC8lMjYvZ2ksIiYiKS5yZXBsYWNlKC8lM0QvZ2ksIj0iKS5yZXBsYWNlKC8lMkIvZ2ksIisiKSxiPWIucmVwbGFjZShuZXcgUmVnRXhwKCI6IitlKyIoXFxXfCQpIiwiZyIpLGZ1bmN0aW9uKGEsYyl7cmV0dXJuIG0rY30pKTpiPWIucmVwbGFjZShuZXcgUmVnRXhwKCIoLz8pOiIrZSsiKFxcV3wkKSIsImciKSxmdW5jdGlvbihhLGMsYil7cmV0dXJuIi8iPT0KYi5jaGFyQXQoMCk/YjpjK2J9KX0pO2suZGVmYXVsdHMuc3RyaXBUcmFpbGluZ1NsYXNoZXMmJihiPWIucmVwbGFjZSgvXC8rJC8sIiIpfHwiLyIpO2I9Yi5yZXBsYWNlKC9cL1wuKD89XHcrKCR8XD8pKS8sIi4iKTtlLnVybD1xK2IucmVwbGFjZSgvXC9cXFwuLywiLy4iKTt1KGgsZnVuY3Rpb24oYSxiKXtrLnVybFBhcmFtc1tiXXx8KGUucGFyYW1zPWUucGFyYW1zfHx7fSxlLnBhcmFtc1tiXT1hKX0pfX07cmV0dXJuIEp9XX0pfSkod2luZG93LHdpbmRvdy5hbmd1bGFyKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9YW5ndWxhci1yZXNvdXJjZS5taW4uanMubWFwCgovKgogKiBhbmd1bGFyLXVpLWJvb3RzdHJhcAogKiBodHRwOi8vYW5ndWxhci11aS5naXRodWIuaW8vYm9vdHN0cmFwLwoKICogVmVyc2lvbjogMi4xLjQgLSAyMDE2LTA5LTIzCiAqIExpY2Vuc2U6IE1JVAogKi9hbmd1bGFyLm1vZHVsZSgidWkuYm9vdHN0cmFwIiwgWyJ1aS5ib290c3RyYXAuY29sbGFwc2UiLCJ1aS5ib290c3RyYXAudGFiaW5kZXgiLCJ1aS5ib290c3RyYXAuYWNjb3JkaW9uIiwidWkuYm9vdHN0cmFwLmFsZXJ0IiwidWkuYm9vdHN0cmFwLmJ1dHRvbnMiLCJ1aS5ib290c3RyYXAuY2Fyb3VzZWwiLCJ1aS5ib290c3RyYXAuZGF0ZXBhcnNlciIsInVpLmJvb3RzdHJhcC5pc0NsYXNzIiwidWkuYm9vdHN0cmFwLmRhdGVwaWNrZXIiLCJ1aS5ib290c3RyYXAucG9zaXRpb24iLCJ1aS5ib290c3RyYXAuZGF0ZXBpY2tlclBvcHVwIiwidWkuYm9vdHN0cmFwLmRlYm91bmNlIiwidWkuYm9vdHN0cmFwLmRyb3Bkb3duIiwidWkuYm9vdHN0cmFwLnN0YWNrZWRNYXAiLCJ1aS5ib290c3RyYXAubW9kYWwiLCJ1aS5ib290c3RyYXAucGFnaW5nIiwidWkuYm9vdHN0cmFwLnBhZ2VyIiwidWkuYm9vdHN0cmFwLnBhZ2luYXRpb24iLCJ1aS5ib290c3RyYXAudG9vbHRpcCIsInVpLmJvb3RzdHJhcC5wb3BvdmVyIiwidWkuYm9vdHN0cmFwLnByb2dyZXNzYmFyIiwidWkuYm9vdHN0cmFwLnJhdGluZyIsInVpLmJvb3RzdHJhcC50YWJzIiwidWkuYm9vdHN0cmFwLnRpbWVwaWNrZXIiLCJ1aS5ib290c3RyYXAudHlwZWFoZWFkIl0pOwphbmd1bGFyLm1vZHVsZSgndWkuYm9vdHN0cmFwLmNvbGxhcHNlJywgW10pCgogIC5kaXJlY3RpdmUoJ3VpYkNvbGxhcHNlJywgWyckYW5pbWF0ZScsICckcScsICckcGFyc2UnLCAnJGluamVjdG9yJywgZnVuY3Rpb24oJGFuaW1hdGUsICRxLCAkcGFyc2UsICRpbmplY3RvcikgewogICAgdmFyICRhbmltYXRlQ3NzID0gJGluamVjdG9yLmhhcygnJGFuaW1hdGVDc3MnKSA/ICRpbmplY3Rvci5nZXQoJyRhbmltYXRlQ3NzJykgOiBudWxsOwogICAgcmV0dXJuIHsKICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7CiAgICAgICAgdmFyIGV4cGFuZGluZ0V4cHIgPSAkcGFyc2UoYXR0cnMuZXhwYW5kaW5nKSwKICAgICAgICAgIGV4cGFuZGVkRXhwciA9ICRwYXJzZShhdHRycy5leHBhbmRlZCksCiAgICAgICAgICBjb2xsYXBzaW5nRXhwciA9ICRwYXJzZShhdHRycy5jb2xsYXBzaW5nKSwKICAgICAgICAgIGNvbGxhcHNlZEV4cHIgPSAkcGFyc2UoYXR0cnMuY29sbGFwc2VkKSwKICAgICAgICAgIGhvcml6b250YWwgPSBmYWxzZSwKICAgICAgICAgIGNzcyA9IHt9LAogICAgICAgICAgY3NzVG8gPSB7fTsKCiAgICAgICAgaW5pdCgpOwoKICAgICAgICBmdW5jdGlvbiBpbml0KCkgewogICAgICAgICAgaG9yaXpvbnRhbCA9ICEhKCdob3Jpem9udGFsJyBpbiBhdHRycyk7CiAgICAgICAgICBpZiAoaG9yaXpvbnRhbCkgewogICAgICAgICAgICBjc3MgPSB7CiAgICAgICAgICAgICAgd2lkdGg6ICcnCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGNzc1RvID0ge3dpZHRoOiAnMCd9OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY3NzID0gewogICAgICAgICAgICAgIGhlaWdodDogJycKICAgICAgICAgICAgfTsKICAgICAgICAgICAgY3NzVG8gPSB7aGVpZ2h0OiAnMCd9OwogICAgICAgICAgfQogICAgICAgICAgaWYgKCFzY29wZS4kZXZhbChhdHRycy51aWJDb2xsYXBzZSkpIHsKICAgICAgICAgICAgZWxlbWVudC5hZGRDbGFzcygnaW4nKQogICAgICAgICAgICAgIC5hZGRDbGFzcygnY29sbGFwc2UnKQogICAgICAgICAgICAgIC5hdHRyKCdhcmlhLWV4cGFuZGVkJywgdHJ1ZSkKICAgICAgICAgICAgICAuYXR0cignYXJpYS1oaWRkZW4nLCBmYWxzZSkKICAgICAgICAgICAgICAuY3NzKGNzcyk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZXRTY3JvbGxGcm9tRWxlbWVudChlbGVtZW50KSB7CiAgICAgICAgICBpZiAoaG9yaXpvbnRhbCkgewogICAgICAgICAgICByZXR1cm4ge3dpZHRoOiBlbGVtZW50LnNjcm9sbFdpZHRoICsgJ3B4J307CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4ge2hlaWdodDogZWxlbWVudC5zY3JvbGxIZWlnaHQgKyAncHgnfTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGV4cGFuZCgpIHsKICAgICAgICAgIGlmIChlbGVtZW50Lmhhc0NsYXNzKCdjb2xsYXBzZScpICYmIGVsZW1lbnQuaGFzQ2xhc3MoJ2luJykpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgICRxLnJlc29sdmUoZXhwYW5kaW5nRXhwcihzY29wZSkpCiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ2NvbGxhcHNlJykKICAgICAgICAgICAgICAgIC5hZGRDbGFzcygnY29sbGFwc2luZycpCiAgICAgICAgICAgICAgICAuYXR0cignYXJpYS1leHBhbmRlZCcsIHRydWUpCiAgICAgICAgICAgICAgICAuYXR0cignYXJpYS1oaWRkZW4nLCBmYWxzZSk7CgogICAgICAgICAgICAgIGlmICgkYW5pbWF0ZUNzcykgewogICAgICAgICAgICAgICAgJGFuaW1hdGVDc3MoZWxlbWVudCwgewogICAgICAgICAgICAgICAgICBhZGRDbGFzczogJ2luJywKICAgICAgICAgICAgICAgICAgZWFzaW5nOiAnZWFzZScsCiAgICAgICAgICAgICAgICAgIGNzczogewogICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiAnaGlkZGVuJwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICB0bzogZ2V0U2Nyb2xsRnJvbUVsZW1lbnQoZWxlbWVudFswXSkKICAgICAgICAgICAgICAgIH0pLnN0YXJ0KClbJ2ZpbmFsbHknXShleHBhbmREb25lKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgJGFuaW1hdGUuYWRkQ2xhc3MoZWxlbWVudCwgJ2luJywgewogICAgICAgICAgICAgICAgICBjc3M6IHsKICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbicKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgdG86IGdldFNjcm9sbEZyb21FbGVtZW50KGVsZW1lbnRbMF0pCiAgICAgICAgICAgICAgICB9KS50aGVuKGV4cGFuZERvbmUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBleHBhbmREb25lKCkgewogICAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcygnY29sbGFwc2luZycpCiAgICAgICAgICAgIC5hZGRDbGFzcygnY29sbGFwc2UnKQogICAgICAgICAgICAuY3NzKGNzcyk7CiAgICAgICAgICBleHBhbmRlZEV4cHIoc2NvcGUpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY29sbGFwc2UoKSB7CiAgICAgICAgICBpZiAoIWVsZW1lbnQuaGFzQ2xhc3MoJ2NvbGxhcHNlJykgJiYgIWVsZW1lbnQuaGFzQ2xhc3MoJ2luJykpIHsKICAgICAgICAgICAgcmV0dXJuIGNvbGxhcHNlRG9uZSgpOwogICAgICAgICAgfQoKICAgICAgICAgICRxLnJlc29sdmUoY29sbGFwc2luZ0V4cHIoc2NvcGUpKQogICAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHsKICAgICAgICAgICAgICBlbGVtZW50CiAgICAgICAgICAgICAgLy8gSU1QT1JUQU5UOiBUaGUgd2lkdGggbXVzdCBiZSBzZXQgYmVmb3JlIGFkZGluZyAiY29sbGFwc2luZyIgY2xhc3MuCiAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlLCB0aGUgYnJvd3NlciBhdHRlbXB0cyB0byBhbmltYXRlIGZyb20gd2lkdGggMCAoaW4KICAgICAgICAgICAgICAvLyBjb2xsYXBzaW5nIGNsYXNzKSB0byB0aGUgZ2l2ZW4gd2lkdGggaGVyZS4KICAgICAgICAgICAgICAgIC5jc3MoZ2V0U2Nyb2xsRnJvbUVsZW1lbnQoZWxlbWVudFswXSkpCiAgICAgICAgICAgICAgICAvLyBpbml0aWFsbHkgYWxsIHBhbmVsIGNvbGxhcHNlIGhhdmUgdGhlIGNvbGxhcHNlIGNsYXNzLCB0aGlzIHJlbW92YWwKICAgICAgICAgICAgICAgIC8vIHByZXZlbnRzIHRoZSBhbmltYXRpb24gZnJvbSBqdW1waW5nIHRvIGNvbGxhcHNlZCBzdGF0ZQogICAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKCdjb2xsYXBzZScpCiAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ2NvbGxhcHNpbmcnKQogICAgICAgICAgICAgICAgLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCBmYWxzZSkKICAgICAgICAgICAgICAgIC5hdHRyKCdhcmlhLWhpZGRlbicsIHRydWUpOwoKICAgICAgICAgICAgICBpZiAoJGFuaW1hdGVDc3MpIHsKICAgICAgICAgICAgICAgICRhbmltYXRlQ3NzKGVsZW1lbnQsIHsKICAgICAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3M6ICdpbicsCiAgICAgICAgICAgICAgICAgIHRvOiBjc3NUbwogICAgICAgICAgICAgICAgfSkuc3RhcnQoKVsnZmluYWxseSddKGNvbGxhcHNlRG9uZSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICRhbmltYXRlLnJlbW92ZUNsYXNzKGVsZW1lbnQsICdpbicsIHsKICAgICAgICAgICAgICAgICAgdG86IGNzc1RvCiAgICAgICAgICAgICAgICB9KS50aGVuKGNvbGxhcHNlRG9uZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNvbGxhcHNlRG9uZSgpIHsKICAgICAgICAgIGVsZW1lbnQuY3NzKGNzc1RvKTsgLy8gUmVxdWlyZWQgc28gdGhhdCBjb2xsYXBzZSB3b3JrcyB3aGVuIGFuaW1hdGlvbiBpcyBkaXNhYmxlZAogICAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcygnY29sbGFwc2luZycpCiAgICAgICAgICAgIC5hZGRDbGFzcygnY29sbGFwc2UnKTsKICAgICAgICAgIGNvbGxhcHNlZEV4cHIoc2NvcGUpOwogICAgICAgIH0KCiAgICAgICAgc2NvcGUuJHdhdGNoKGF0dHJzLnVpYkNvbGxhcHNlLCBmdW5jdGlvbihzaG91bGRDb2xsYXBzZSkgewogICAgICAgICAgaWYgKHNob3VsZENvbGxhcHNlKSB7CiAgICAgICAgICAgIGNvbGxhcHNlKCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBleHBhbmQoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfTsKICB9XSk7Cgphbmd1bGFyLm1vZHVsZSgndWkuYm9vdHN0cmFwLnRhYmluZGV4JywgW10pCgouZGlyZWN0aXZlKCd1aWJUYWJpbmRleFRvZ2dsZScsIGZ1bmN0aW9uKCkgewogIHJldHVybiB7CiAgICByZXN0cmljdDogJ0EnLAogICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW0sIGF0dHJzKSB7CiAgICAgIGF0dHJzLiRvYnNlcnZlKCdkaXNhYmxlZCcsIGZ1bmN0aW9uKGRpc2FibGVkKSB7CiAgICAgICAgYXR0cnMuJHNldCgndGFiaW5kZXgnLCBkaXNhYmxlZCA/IC0xIDogbnVsbCk7CiAgICAgIH0pOwogICAgfQogIH07Cn0pOwoKYW5ndWxhci5tb2R1bGUoJ3VpLmJvb3RzdHJhcC5hY2NvcmRpb24nLCBbJ3VpLmJvb3RzdHJhcC5jb2xsYXBzZScsICd1aS5ib290c3RyYXAudGFiaW5kZXgnXSkKCi5jb25zdGFudCgndWliQWNjb3JkaW9uQ29uZmlnJywgewogIGNsb3NlT3RoZXJzOiB0cnVlCn0pCgouY29udHJvbGxlcignVWliQWNjb3JkaW9uQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRhdHRycycsICd1aWJBY2NvcmRpb25Db25maWcnLCBmdW5jdGlvbigkc2NvcGUsICRhdHRycywgYWNjb3JkaW9uQ29uZmlnKSB7CiAgLy8gVGhpcyBhcnJheSBrZWVwcyB0cmFjayBvZiB0aGUgYWNjb3JkaW9uIGdyb3VwcwogIHRoaXMuZ3JvdXBzID0gW107CgogIC8vIEVuc3VyZSB0aGF0IGFsbCB0aGUgZ3JvdXBzIGluIHRoaXMgYWNjb3JkaW9uIGFyZSBjbG9zZWQsIHVubGVzcyBjbG9zZS1vdGhlcnMgZXhwbGljaXRseSBzYXlzIG5vdCB0bwogIHRoaXMuY2xvc2VPdGhlcnMgPSBmdW5jdGlvbihvcGVuR3JvdXApIHsKICAgIHZhciBjbG9zZU90aGVycyA9IGFuZ3VsYXIuaXNEZWZpbmVkKCRhdHRycy5jbG9zZU90aGVycykgPwogICAgICAkc2NvcGUuJGV2YWwoJGF0dHJzLmNsb3NlT3RoZXJzKSA6IGFjY29yZGlvbkNvbmZpZy5jbG9zZU90aGVyczsKICAgIGlmIChjbG9zZU90aGVycykgewogICAgICBhbmd1bGFyLmZvckVhY2godGhpcy5ncm91cHMsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgICAgaWYgKGdyb3VwICE9PSBvcGVuR3JvdXApIHsKICAgICAgICAgIGdyb3VwLmlzT3BlbiA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfTsKCiAgLy8gVGhpcyBpcyBjYWxsZWQgZnJvbSB0aGUgYWNjb3JkaW9uLWdyb3VwIGRpcmVjdGl2ZSB0byBhZGQgaXRzZWxmIHRvIHRoZSBhY2NvcmRpb24KICB0aGlzLmFkZEdyb3VwID0gZnVuY3Rpb24oZ3JvdXBTY29wZSkgewogICAgdmFyIHRoYXQgPSB0aGlzOwogICAgdGhpcy5ncm91cHMucHVzaChncm91cFNjb3BlKTsKCiAgICBncm91cFNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbihldmVudCkgewogICAgICB0aGF0LnJlbW92ZUdyb3VwKGdyb3VwU2NvcGUpOwogICAgfSk7CiAgfTsKCiAgLy8gVGhpcyBpcyBjYWxsZWQgZnJvbSB0aGUgYWNjb3JkaW9uLWdyb3VwIGRpcmVjdGl2ZSB3aGVuIHRvIHJlbW92ZSBpdHNlbGYKICB0aGlzLnJlbW92ZUdyb3VwID0gZnVuY3Rpb24oZ3JvdXApIHsKICAgIHZhciBpbmRleCA9IHRoaXMuZ3JvdXBzLmluZGV4T2YoZ3JvdXApOwogICAgaWYgKGluZGV4ICE9PSAtMSkgewogICAgICB0aGlzLmdyb3Vwcy5zcGxpY2UoaW5kZXgsIDEpOwogICAgfQogIH07Cn1dKQoKLy8gVGhlIGFjY29yZGlvbiBkaXJlY3RpdmUgc2ltcGx5IHNldHMgdXAgdGhlIGRpcmVjdGl2ZSBjb250cm9sbGVyCi8vIGFuZCBhZGRzIGFuIGFjY29yZGlvbiBDU1MgY2xhc3MgdG8gaXRzZWxmIGVsZW1lbnQuCi5kaXJlY3RpdmUoJ3VpYkFjY29yZGlvbicsIGZ1bmN0aW9uKCkgewogIHJldHVybiB7CiAgICBjb250cm9sbGVyOiAnVWliQWNjb3JkaW9uQ29udHJvbGxlcicsCiAgICBjb250cm9sbGVyQXM6ICdhY2NvcmRpb24nLAogICAgdHJhbnNjbHVkZTogdHJ1ZSwKICAgIHRlbXBsYXRlVXJsOiBmdW5jdGlvbihlbGVtZW50LCBhdHRycykgewogICAgICByZXR1cm4gYXR0cnMudGVtcGxhdGVVcmwgfHwgJ3VpYi90ZW1wbGF0ZS9hY2NvcmRpb24vYWNjb3JkaW9uLmh0bWwnOwogICAgfQogIH07Cn0pCgovLyBUaGUgYWNjb3JkaW9uLWdyb3VwIGRpcmVjdGl2ZSBpbmRpY2F0ZXMgYSBibG9jayBvZiBodG1sIHRoYXQgd2lsbCBleHBhbmQgYW5kIGNvbGxhcHNlIGluIGFuIGFjY29yZGlvbgouZGlyZWN0aXZlKCd1aWJBY2NvcmRpb25Hcm91cCcsIGZ1bmN0aW9uKCkgewogIHJldHVybiB7CiAgICByZXF1aXJlOiAnXnVpYkFjY29yZGlvbicsICAgICAgICAgLy8gV2UgbmVlZCB0aGlzIGRpcmVjdGl2ZSB0byBiZSBpbnNpZGUgYW4gYWNjb3JkaW9uCiAgICB0cmFuc2NsdWRlOiB0cnVlLCAgICAgICAgICAgICAgLy8gSXQgdHJhbnNjbHVkZXMgdGhlIGNvbnRlbnRzIG9mIHRoZSBkaXJlY3RpdmUgaW50byB0aGUgdGVtcGxhdGUKICAgIHJlc3RyaWN0OiAnQScsCiAgICB0ZW1wbGF0ZVVybDogZnVuY3Rpb24oZWxlbWVudCwgYXR0cnMpIHsKICAgICAgcmV0dXJuIGF0dHJzLnRlbXBsYXRlVXJsIHx8ICd1aWIvdGVtcGxhdGUvYWNjb3JkaW9uL2FjY29yZGlvbi1ncm91cC5odG1sJzsKICAgIH0sCiAgICBzY29wZTogewogICAgICBoZWFkaW5nOiAnQCcsICAgICAgICAgICAgICAgLy8gSW50ZXJwb2xhdGUgdGhlIGhlYWRpbmcgYXR0cmlidXRlIG9udG8gdGhpcyBzY29wZQogICAgICBwYW5lbENsYXNzOiAnQD8nLCAgICAgICAgICAgLy8gRGl0dG8gd2l0aCBwYW5lbENsYXNzCiAgICAgIGlzT3BlbjogJz0/JywKICAgICAgaXNEaXNhYmxlZDogJz0/JwogICAgfSwKICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCkgewogICAgICB0aGlzLnNldEhlYWRpbmcgPSBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgdGhpcy5oZWFkaW5nID0gZWxlbWVudDsKICAgICAgfTsKICAgIH0sCiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIGFjY29yZGlvbkN0cmwpIHsKICAgICAgZWxlbWVudC5hZGRDbGFzcygncGFuZWwnKTsKICAgICAgYWNjb3JkaW9uQ3RybC5hZGRHcm91cChzY29wZSk7CgogICAgICBzY29wZS5vcGVuQ2xhc3MgPSBhdHRycy5vcGVuQ2xhc3MgfHwgJ3BhbmVsLW9wZW4nOwogICAgICBzY29wZS5wYW5lbENsYXNzID0gYXR0cnMucGFuZWxDbGFzcyB8fCAncGFuZWwtZGVmYXVsdCc7CiAgICAgIHNjb3BlLiR3YXRjaCgnaXNPcGVuJywgZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICBlbGVtZW50LnRvZ2dsZUNsYXNzKHNjb3BlLm9wZW5DbGFzcywgISF2YWx1ZSk7CiAgICAgICAgaWYgKHZhbHVlKSB7CiAgICAgICAgICBhY2NvcmRpb25DdHJsLmNsb3NlT3RoZXJzKHNjb3BlKTsKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgc2NvcGUudG9nZ2xlT3BlbiA9IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgIGlmICghc2NvcGUuaXNEaXNhYmxlZCkgewogICAgICAgICAgaWYgKCEkZXZlbnQgfHwgJGV2ZW50LndoaWNoID09PSAzMikgewogICAgICAgICAgICBzY29wZS5pc09wZW4gPSAhc2NvcGUuaXNPcGVuOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfTsKCiAgICAgIHZhciBpZCA9ICdhY2NvcmRpb25ncm91cC0nICsgc2NvcGUuJGlkICsgJy0nICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDApOwogICAgICBzY29wZS5oZWFkaW5nSWQgPSBpZCArICctdGFiJzsKICAgICAgc2NvcGUucGFuZWxJZCA9IGlkICsgJy1wYW5lbCc7CiAgICB9CiAgfTsKfSkKCi8vIFVzZSBhY2NvcmRpb24taGVhZGluZyBiZWxvdyBhbiBhY2NvcmRpb24tZ3JvdXAgdG8gcHJvdmlkZSBhIGhlYWRpbmcgY29udGFpbmluZyBIVE1MCi5kaXJlY3RpdmUoJ3VpYkFjY29yZGlvbkhlYWRpbmcnLCBmdW5jdGlvbigpIHsKICByZXR1cm4gewogICAgdHJhbnNjbHVkZTogdHJ1ZSwgICAvLyBHcmFiIHRoZSBjb250ZW50cyB0byBiZSB1c2VkIGFzIHRoZSBoZWFkaW5nCiAgICB0ZW1wbGF0ZTogJycsICAgICAgIC8vIEluIGVmZmVjdCByZW1vdmUgdGhpcyBlbGVtZW50IQogICAgcmVwbGFjZTogdHJ1ZSwKICAgIHJlcXVpcmU6ICdedWliQWNjb3JkaW9uR3JvdXAnLAogICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBhY2NvcmRpb25Hcm91cEN0cmwsIHRyYW5zY2x1ZGUpIHsKICAgICAgLy8gUGFzcyB0aGUgaGVhZGluZyB0byB0aGUgYWNjb3JkaW9uLWdyb3VwIGNvbnRyb2xsZXIKICAgICAgLy8gc28gdGhhdCBpdCBjYW4gYmUgdHJhbnNjbHVkZWQgaW50byB0aGUgcmlnaHQgcGxhY2UgaW4gdGhlIHRlbXBsYXRlCiAgICAgIC8vIFtUaGUgc2Vjb25kIHBhcmFtZXRlciB0byB0cmFuc2NsdWRlIGNhdXNlcyB0aGUgZWxlbWVudHMgdG8gYmUgY2xvbmVkIHNvIHRoYXQgdGhleSB3b3JrIGluIG5nLXJlcGVhdF0KICAgICAgYWNjb3JkaW9uR3JvdXBDdHJsLnNldEhlYWRpbmcodHJhbnNjbHVkZShzY29wZSwgYW5ndWxhci5ub29wKSk7CiAgICB9CiAgfTsKfSkKCi8vIFVzZSBpbiB0aGUgYWNjb3JkaW9uLWdyb3VwIHRlbXBsYXRlIHRvIGluZGljYXRlIHdoZXJlIHlvdSB3YW50IHRoZSBoZWFkaW5nIHRvIGJlIHRyYW5zY2x1ZGVkCi8vIFlvdSBtdXN0IHByb3ZpZGUgdGhlIHByb3BlcnR5IG9uIHRoZSBhY2NvcmRpb24tZ3JvdXAgY29udHJvbGxlciB0aGF0IHdpbGwgaG9sZCB0aGUgdHJhbnNjbHVkZWQgZWxlbWVudAouZGlyZWN0aXZlKCd1aWJBY2NvcmRpb25UcmFuc2NsdWRlJywgZnVuY3Rpb24oKSB7CiAgcmV0dXJuIHsKICAgIHJlcXVpcmU6ICdedWliQWNjb3JkaW9uR3JvdXAnLAogICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjb250cm9sbGVyKSB7CiAgICAgIHNjb3BlLiR3YXRjaChmdW5jdGlvbigpIHsgcmV0dXJuIGNvbnRyb2xsZXJbYXR0cnMudWliQWNjb3JkaW9uVHJhbnNjbHVkZV07IH0sIGZ1bmN0aW9uKGhlYWRpbmcpIHsKICAgICAgICBpZiAoaGVhZGluZykgewogICAgICAgICAgdmFyIGVsZW0gPSBhbmd1bGFyLmVsZW1lbnQoZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKGdldEhlYWRlclNlbGVjdG9ycygpKSk7CiAgICAgICAgICBlbGVtLmh0bWwoJycpOwogICAgICAgICAgZWxlbS5hcHBlbmQoaGVhZGluZyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9OwoKICBmdW5jdGlvbiBnZXRIZWFkZXJTZWxlY3RvcnMoKSB7CiAgICAgIHJldHVybiAndWliLWFjY29yZGlvbi1oZWFkZXIsJyArCiAgICAgICAgICAnZGF0YS11aWItYWNjb3JkaW9uLWhlYWRlciwnICsKICAgICAgICAgICd4LXVpYi1hY2NvcmRpb24taGVhZGVyLCcgKwogICAgICAgICAgJ3VpYlxcOmFjY29yZGlvbi1oZWFkZXIsJyArCiAgICAgICAgICAnW3VpYi1hY2NvcmRpb24taGVhZGVyXSwnICsKICAgICAgICAgICdbZGF0YS11aWItYWNjb3JkaW9uLWhlYWRlcl0sJyArCiAgICAgICAgICAnW3gtdWliLWFjY29yZGlvbi1oZWFkZXJdJzsKICB9Cn0pOwoKYW5ndWxhci5tb2R1bGUoJ3VpLmJvb3RzdHJhcC5hbGVydCcsIFtdKQoKLmNvbnRyb2xsZXIoJ1VpYkFsZXJ0Q29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRlbGVtZW50JywgJyRhdHRycycsICckaW50ZXJwb2xhdGUnLCAnJHRpbWVvdXQnLCBmdW5jdGlvbigkc2NvcGUsICRlbGVtZW50LCAkYXR0cnMsICRpbnRlcnBvbGF0ZSwgJHRpbWVvdXQpIHsKICAkc2NvcGUuY2xvc2VhYmxlID0gISEkYXR0cnMuY2xvc2U7CiAgJGVsZW1lbnQuYWRkQ2xhc3MoJ2FsZXJ0Jyk7CiAgJGF0dHJzLiRzZXQoJ3JvbGUnLCAnYWxlcnQnKTsKICBpZiAoJHNjb3BlLmNsb3NlYWJsZSkgewogICAgJGVsZW1lbnQuYWRkQ2xhc3MoJ2FsZXJ0LWRpc21pc3NpYmxlJyk7CiAgfQoKICB2YXIgZGlzbWlzc09uVGltZW91dCA9IGFuZ3VsYXIuaXNEZWZpbmVkKCRhdHRycy5kaXNtaXNzT25UaW1lb3V0KSA/CiAgICAkaW50ZXJwb2xhdGUoJGF0dHJzLmRpc21pc3NPblRpbWVvdXQpKCRzY29wZS4kcGFyZW50KSA6IG51bGw7CgogIGlmIChkaXNtaXNzT25UaW1lb3V0KSB7CiAgICAkdGltZW91dChmdW5jdGlvbigpIHsKICAgICAgJHNjb3BlLmNsb3NlKCk7CiAgICB9LCBwYXJzZUludChkaXNtaXNzT25UaW1lb3V0LCAxMCkpOwogIH0KfV0pCgouZGlyZWN0aXZlKCd1aWJBbGVydCcsIGZ1bmN0aW9uKCkgewogIHJldHVybiB7CiAgICBjb250cm9sbGVyOiAnVWliQWxlcnRDb250cm9sbGVyJywKICAgIGNvbnRyb2xsZXJBczogJ2FsZXJ0JywKICAgIHJlc3RyaWN0OiAnQScsCiAgICB0ZW1wbGF0ZVVybDogZnVuY3Rpb24oZWxlbWVudCwgYXR0cnMpIHsKICAgICAgcmV0dXJuIGF0dHJzLnRlbXBsYXRlVXJsIHx8ICd1aWIvdGVtcGxhdGUvYWxlcnQvYWxlcnQuaHRtbCc7CiAgICB9LAogICAgdHJhbnNjbHVkZTogdHJ1ZSwKICAgIHNjb3BlOiB7CiAgICAgIGNsb3NlOiAnJicKICAgIH0KICB9Owp9KTsKCmFuZ3VsYXIubW9kdWxlKCd1aS5ib290c3RyYXAuYnV0dG9ucycsIFtdKQoKLmNvbnN0YW50KCd1aWJCdXR0b25Db25maWcnLCB7CiAgYWN0aXZlQ2xhc3M6ICdhY3RpdmUnLAogIHRvZ2dsZUV2ZW50OiAnY2xpY2snCn0pCgouY29udHJvbGxlcignVWliQnV0dG9uc0NvbnRyb2xsZXInLCBbJ3VpYkJ1dHRvbkNvbmZpZycsIGZ1bmN0aW9uKGJ1dHRvbkNvbmZpZykgewogIHRoaXMuYWN0aXZlQ2xhc3MgPSBidXR0b25Db25maWcuYWN0aXZlQ2xhc3MgfHwgJ2FjdGl2ZSc7CiAgdGhpcy50b2dnbGVFdmVudCA9IGJ1dHRvbkNvbmZpZy50b2dnbGVFdmVudCB8fCAnY2xpY2snOwp9XSkKCi5kaXJlY3RpdmUoJ3VpYkJ0blJhZGlvJywgWyckcGFyc2UnLCBmdW5jdGlvbigkcGFyc2UpIHsKICByZXR1cm4gewogICAgcmVxdWlyZTogWyd1aWJCdG5SYWRpbycsICduZ01vZGVsJ10sCiAgICBjb250cm9sbGVyOiAnVWliQnV0dG9uc0NvbnRyb2xsZXInLAogICAgY29udHJvbGxlckFzOiAnYnV0dG9ucycsCiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIGN0cmxzKSB7CiAgICAgIHZhciBidXR0b25zQ3RybCA9IGN0cmxzWzBdLCBuZ01vZGVsQ3RybCA9IGN0cmxzWzFdOwogICAgICB2YXIgdW5jaGVja2FibGVFeHByID0gJHBhcnNlKGF0dHJzLnVpYlVuY2hlY2thYmxlKTsKCiAgICAgIGVsZW1lbnQuZmluZCgnaW5wdXQnKS5jc3Moe2Rpc3BsYXk6ICdub25lJ30pOwoKICAgICAgLy9tb2RlbCAtPiBVSQogICAgICBuZ01vZGVsQ3RybC4kcmVuZGVyID0gZnVuY3Rpb24oKSB7CiAgICAgICAgZWxlbWVudC50b2dnbGVDbGFzcyhidXR0b25zQ3RybC5hY3RpdmVDbGFzcywgYW5ndWxhci5lcXVhbHMobmdNb2RlbEN0cmwuJG1vZGVsVmFsdWUsIHNjb3BlLiRldmFsKGF0dHJzLnVpYkJ0blJhZGlvKSkpOwogICAgICB9OwoKICAgICAgLy91aS0+bW9kZWwKICAgICAgZWxlbWVudC5vbihidXR0b25zQ3RybC50b2dnbGVFdmVudCwgZnVuY3Rpb24oKSB7CiAgICAgICAgaWYgKGF0dHJzLmRpc2FibGVkKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB2YXIgaXNBY3RpdmUgPSBlbGVtZW50Lmhhc0NsYXNzKGJ1dHRvbnNDdHJsLmFjdGl2ZUNsYXNzKTsKCiAgICAgICAgaWYgKCFpc0FjdGl2ZSB8fCBhbmd1bGFyLmlzRGVmaW5lZChhdHRycy51bmNoZWNrYWJsZSkpIHsKICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHsKICAgICAgICAgICAgbmdNb2RlbEN0cmwuJHNldFZpZXdWYWx1ZShpc0FjdGl2ZSA/IG51bGwgOiBzY29wZS4kZXZhbChhdHRycy51aWJCdG5SYWRpbykpOwogICAgICAgICAgICBuZ01vZGVsQ3RybC4kcmVuZGVyKCk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgaWYgKGF0dHJzLnVpYlVuY2hlY2thYmxlKSB7CiAgICAgICAgc2NvcGUuJHdhdGNoKHVuY2hlY2thYmxlRXhwciwgZnVuY3Rpb24odW5jaGVja2FibGUpIHsKICAgICAgICAgIGF0dHJzLiRzZXQoJ3VuY2hlY2thYmxlJywgdW5jaGVja2FibGUgPyAnJyA6IHVuZGVmaW5lZCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9Owp9XSkKCi5kaXJlY3RpdmUoJ3VpYkJ0bkNoZWNrYm94JywgZnVuY3Rpb24oKSB7CiAgcmV0dXJuIHsKICAgIHJlcXVpcmU6IFsndWliQnRuQ2hlY2tib3gnLCAnbmdNb2RlbCddLAogICAgY29udHJvbGxlcjogJ1VpYkJ1dHRvbnNDb250cm9sbGVyJywKICAgIGNvbnRyb2xsZXJBczogJ2J1dHRvbicsCiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIGN0cmxzKSB7CiAgICAgIHZhciBidXR0b25zQ3RybCA9IGN0cmxzWzBdLCBuZ01vZGVsQ3RybCA9IGN0cmxzWzFdOwoKICAgICAgZWxlbWVudC5maW5kKCdpbnB1dCcpLmNzcyh7ZGlzcGxheTogJ25vbmUnfSk7CgogICAgICBmdW5jdGlvbiBnZXRUcnVlVmFsdWUoKSB7CiAgICAgICAgcmV0dXJuIGdldENoZWNrYm94VmFsdWUoYXR0cnMuYnRuQ2hlY2tib3hUcnVlLCB0cnVlKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gZ2V0RmFsc2VWYWx1ZSgpIHsKICAgICAgICByZXR1cm4gZ2V0Q2hlY2tib3hWYWx1ZShhdHRycy5idG5DaGVja2JveEZhbHNlLCBmYWxzZSk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGdldENoZWNrYm94VmFsdWUoYXR0cmlidXRlLCBkZWZhdWx0VmFsdWUpIHsKICAgICAgICByZXR1cm4gYW5ndWxhci5pc0RlZmluZWQoYXR0cmlidXRlKSA/IHNjb3BlLiRldmFsKGF0dHJpYnV0ZSkgOiBkZWZhdWx0VmFsdWU7CiAgICAgIH0KCiAgICAgIC8vbW9kZWwgLT4gVUkKICAgICAgbmdNb2RlbEN0cmwuJHJlbmRlciA9IGZ1bmN0aW9uKCkgewogICAgICAgIGVsZW1lbnQudG9nZ2xlQ2xhc3MoYnV0dG9uc0N0cmwuYWN0aXZlQ2xhc3MsIGFuZ3VsYXIuZXF1YWxzKG5nTW9kZWxDdHJsLiRtb2RlbFZhbHVlLCBnZXRUcnVlVmFsdWUoKSkpOwogICAgICB9OwoKICAgICAgLy91aS0+bW9kZWwKICAgICAgZWxlbWVudC5vbihidXR0b25zQ3RybC50b2dnbGVFdmVudCwgZnVuY3Rpb24oKSB7CiAgICAgICAgaWYgKGF0dHJzLmRpc2FibGVkKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7CiAgICAgICAgICBuZ01vZGVsQ3RybC4kc2V0Vmlld1ZhbHVlKGVsZW1lbnQuaGFzQ2xhc3MoYnV0dG9uc0N0cmwuYWN0aXZlQ2xhc3MpID8gZ2V0RmFsc2VWYWx1ZSgpIDogZ2V0VHJ1ZVZhbHVlKCkpOwogICAgICAgICAgbmdNb2RlbEN0cmwuJHJlbmRlcigpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9Owp9KTsKCmFuZ3VsYXIubW9kdWxlKCd1aS5ib290c3RyYXAuY2Fyb3VzZWwnLCBbXSkKCi5jb250cm9sbGVyKCdVaWJDYXJvdXNlbENvbnRyb2xsZXInLCBbJyRzY29wZScsICckZWxlbWVudCcsICckaW50ZXJ2YWwnLCAnJHRpbWVvdXQnLCAnJGFuaW1hdGUnLCBmdW5jdGlvbigkc2NvcGUsICRlbGVtZW50LCAkaW50ZXJ2YWwsICR0aW1lb3V0LCAkYW5pbWF0ZSkgewogIHZhciBzZWxmID0gdGhpcywKICAgIHNsaWRlcyA9IHNlbGYuc2xpZGVzID0gJHNjb3BlLnNsaWRlcyA9IFtdLAogICAgU0xJREVfRElSRUNUSU9OID0gJ3VpYi1zbGlkZURpcmVjdGlvbicsCiAgICBjdXJyZW50SW5kZXggPSAkc2NvcGUuYWN0aXZlLAogICAgY3VycmVudEludGVydmFsLCBpc1BsYXlpbmcsIGJ1ZmZlcmVkVHJhbnNpdGlvbnMgPSBbXTsKCiAgdmFyIGRlc3Ryb3llZCA9IGZhbHNlOwogICRlbGVtZW50LmFkZENsYXNzKCdjYXJvdXNlbCcpOwoKICBzZWxmLmFkZFNsaWRlID0gZnVuY3Rpb24oc2xpZGUsIGVsZW1lbnQpIHsKICAgIHNsaWRlcy5wdXNoKHsKICAgICAgc2xpZGU6IHNsaWRlLAogICAgICBlbGVtZW50OiBlbGVtZW50CiAgICB9KTsKICAgIHNsaWRlcy5zb3J0KGZ1bmN0aW9uKGEsIGIpIHsKICAgICAgcmV0dXJuICthLnNsaWRlLmluZGV4IC0gK2Iuc2xpZGUuaW5kZXg7CiAgICB9KTsKICAgIC8vaWYgdGhpcyBpcyB0aGUgZmlyc3Qgc2xpZGUgb3IgdGhlIHNsaWRlIGlzIHNldCB0byBhY3RpdmUsIHNlbGVjdCBpdAogICAgaWYgKHNsaWRlLmluZGV4ID09PSAkc2NvcGUuYWN0aXZlIHx8IHNsaWRlcy5sZW5ndGggPT09IDEgJiYgIWFuZ3VsYXIuaXNOdW1iZXIoJHNjb3BlLmFjdGl2ZSkpIHsKICAgICAgaWYgKCRzY29wZS4kY3VycmVudFRyYW5zaXRpb24pIHsKICAgICAgICAkc2NvcGUuJGN1cnJlbnRUcmFuc2l0aW9uID0gbnVsbDsKICAgICAgfQoKICAgICAgY3VycmVudEluZGV4ID0gc2xpZGUuaW5kZXg7CiAgICAgICRzY29wZS5hY3RpdmUgPSBzbGlkZS5pbmRleDsKICAgICAgc2V0QWN0aXZlKGN1cnJlbnRJbmRleCk7CiAgICAgIHNlbGYuc2VsZWN0KHNsaWRlc1tmaW5kU2xpZGVJbmRleChzbGlkZSldKTsKICAgICAgaWYgKHNsaWRlcy5sZW5ndGggPT09IDEpIHsKICAgICAgICAkc2NvcGUucGxheSgpOwogICAgICB9CiAgICB9CiAgfTsKCiAgc2VsZi5nZXRDdXJyZW50SW5kZXggPSBmdW5jdGlvbigpIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2xpZGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgIGlmIChzbGlkZXNbaV0uc2xpZGUuaW5kZXggPT09IGN1cnJlbnRJbmRleCkgewogICAgICAgIHJldHVybiBpOwogICAgICB9CiAgICB9CiAgfTsKCiAgc2VsZi5uZXh0ID0gJHNjb3BlLm5leHQgPSBmdW5jdGlvbigpIHsKICAgIHZhciBuZXdJbmRleCA9IChzZWxmLmdldEN1cnJlbnRJbmRleCgpICsgMSkgJSBzbGlkZXMubGVuZ3RoOwoKICAgIGlmIChuZXdJbmRleCA9PT0gMCAmJiAkc2NvcGUubm9XcmFwKCkpIHsKICAgICAgJHNjb3BlLnBhdXNlKCk7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICByZXR1cm4gc2VsZi5zZWxlY3Qoc2xpZGVzW25ld0luZGV4XSwgJ25leHQnKTsKICB9OwoKICBzZWxmLnByZXYgPSAkc2NvcGUucHJldiA9IGZ1bmN0aW9uKCkgewogICAgdmFyIG5ld0luZGV4ID0gc2VsZi5nZXRDdXJyZW50SW5kZXgoKSAtIDEgPCAwID8gc2xpZGVzLmxlbmd0aCAtIDEgOiBzZWxmLmdldEN1cnJlbnRJbmRleCgpIC0gMTsKCiAgICBpZiAoJHNjb3BlLm5vV3JhcCgpICYmIG5ld0luZGV4ID09PSBzbGlkZXMubGVuZ3RoIC0gMSkgewogICAgICAkc2NvcGUucGF1c2UoKTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHJldHVybiBzZWxmLnNlbGVjdChzbGlkZXNbbmV3SW5kZXhdLCAncHJldicpOwogIH07CgogIHNlbGYucmVtb3ZlU2xpZGUgPSBmdW5jdGlvbihzbGlkZSkgewogICAgdmFyIGluZGV4ID0gZmluZFNsaWRlSW5kZXgoc2xpZGUpOwoKICAgIHZhciBidWZmZXJlZEluZGV4ID0gYnVmZmVyZWRUcmFuc2l0aW9ucy5pbmRleE9mKHNsaWRlc1tpbmRleF0pOwogICAgaWYgKGJ1ZmZlcmVkSW5kZXggIT09IC0xKSB7CiAgICAgIGJ1ZmZlcmVkVHJhbnNpdGlvbnMuc3BsaWNlKGJ1ZmZlcmVkSW5kZXgsIDEpOwogICAgfQoKICAgIC8vZ2V0IHRoZSBpbmRleCBvZiB0aGUgc2xpZGUgaW5zaWRlIHRoZSBjYXJvdXNlbAogICAgc2xpZGVzLnNwbGljZShpbmRleCwgMSk7CiAgICBpZiAoc2xpZGVzLmxlbmd0aCA+IDAgJiYgY3VycmVudEluZGV4ID09PSBpbmRleCkgewogICAgICBpZiAoaW5kZXggPj0gc2xpZGVzLmxlbmd0aCkgewogICAgICAgIGN1cnJlbnRJbmRleCA9IHNsaWRlcy5sZW5ndGggLSAxOwogICAgICAgICRzY29wZS5hY3RpdmUgPSBjdXJyZW50SW5kZXg7CiAgICAgICAgc2V0QWN0aXZlKGN1cnJlbnRJbmRleCk7CiAgICAgICAgc2VsZi5zZWxlY3Qoc2xpZGVzW3NsaWRlcy5sZW5ndGggLSAxXSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY3VycmVudEluZGV4ID0gaW5kZXg7CiAgICAgICAgJHNjb3BlLmFjdGl2ZSA9IGN1cnJlbnRJbmRleDsKICAgICAgICBzZXRBY3RpdmUoY3VycmVudEluZGV4KTsKICAgICAgICBzZWxmLnNlbGVjdChzbGlkZXNbaW5kZXhdKTsKICAgICAgfQogICAgfSBlbHNlIGlmIChjdXJyZW50SW5kZXggPiBpbmRleCkgewogICAgICBjdXJyZW50SW5kZXgtLTsKICAgICAgJHNjb3BlLmFjdGl2ZSA9IGN1cnJlbnRJbmRleDsKICAgIH0KCiAgICAvL2NsZWFuIHRoZSBhY3RpdmUgdmFsdWUgd2hlbiBubyBtb3JlIHNsaWRlCiAgICBpZiAoc2xpZGVzLmxlbmd0aCA9PT0gMCkgewogICAgICBjdXJyZW50SW5kZXggPSBudWxsOwogICAgICAkc2NvcGUuYWN0aXZlID0gbnVsbDsKICAgICAgY2xlYXJCdWZmZXJlZFRyYW5zaXRpb25zKCk7CiAgICB9CiAgfTsKCiAgLyogZGlyZWN0aW9uOiAicHJldiIgb3IgIm5leHQiICovCiAgc2VsZi5zZWxlY3QgPSAkc2NvcGUuc2VsZWN0ID0gZnVuY3Rpb24obmV4dFNsaWRlLCBkaXJlY3Rpb24pIHsKICAgIHZhciBuZXh0SW5kZXggPSBmaW5kU2xpZGVJbmRleChuZXh0U2xpZGUuc2xpZGUpOwogICAgLy9EZWNpZGUgZGlyZWN0aW9uIGlmIGl0J3Mgbm90IGdpdmVuCiAgICBpZiAoZGlyZWN0aW9uID09PSB1bmRlZmluZWQpIHsKICAgICAgZGlyZWN0aW9uID0gbmV4dEluZGV4ID4gc2VsZi5nZXRDdXJyZW50SW5kZXgoKSA/ICduZXh0JyA6ICdwcmV2JzsKICAgIH0KICAgIC8vUHJldmVudCB0aGlzIHVzZXItdHJpZ2dlcmVkIHRyYW5zaXRpb24gZnJvbSBvY2N1cnJpbmcgaWYgdGhlcmUgaXMgYWxyZWFkeSBvbmUgaW4gcHJvZ3Jlc3MKICAgIGlmIChuZXh0U2xpZGUuc2xpZGUuaW5kZXggIT09IGN1cnJlbnRJbmRleCAmJgogICAgICAhJHNjb3BlLiRjdXJyZW50VHJhbnNpdGlvbikgewogICAgICBnb05leHQobmV4dFNsaWRlLnNsaWRlLCBuZXh0SW5kZXgsIGRpcmVjdGlvbik7CiAgICB9IGVsc2UgaWYgKG5leHRTbGlkZSAmJiBuZXh0U2xpZGUuc2xpZGUuaW5kZXggIT09IGN1cnJlbnRJbmRleCAmJiAkc2NvcGUuJGN1cnJlbnRUcmFuc2l0aW9uKSB7CiAgICAgIGJ1ZmZlcmVkVHJhbnNpdGlvbnMucHVzaChzbGlkZXNbbmV4dEluZGV4XSk7CiAgICB9CiAgfTsKCiAgLyogQWxsb3cgb3V0c2lkZSBwZW9wbGUgdG8gY2FsbCBpbmRleE9mIG9uIHNsaWRlcyBhcnJheSAqLwogICRzY29wZS5pbmRleE9mU2xpZGUgPSBmdW5jdGlvbihzbGlkZSkgewogICAgcmV0dXJuICtzbGlkZS5zbGlkZS5pbmRleDsKICB9OwoKICAkc2NvcGUuaXNBY3RpdmUgPSBmdW5jdGlvbihzbGlkZSkgewogICAgcmV0dXJuICRzY29wZS5hY3RpdmUgPT09IHNsaWRlLnNsaWRlLmluZGV4OwogIH07CgogICRzY29wZS5pc1ByZXZEaXNhYmxlZCA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuICRzY29wZS5hY3RpdmUgPT09IDAgJiYgJHNjb3BlLm5vV3JhcCgpOwogIH07CgogICRzY29wZS5pc05leHREaXNhYmxlZCA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuICRzY29wZS5hY3RpdmUgPT09IHNsaWRlcy5sZW5ndGggLSAxICYmICRzY29wZS5ub1dyYXAoKTsKICB9OwoKICAkc2NvcGUucGF1c2UgPSBmdW5jdGlvbigpIHsKICAgIGlmICghJHNjb3BlLm5vUGF1c2UpIHsKICAgICAgaXNQbGF5aW5nID0gZmFsc2U7CiAgICAgIHJlc2V0VGltZXIoKTsKICAgIH0KICB9OwoKICAkc2NvcGUucGxheSA9IGZ1bmN0aW9uKCkgewogICAgaWYgKCFpc1BsYXlpbmcpIHsKICAgICAgaXNQbGF5aW5nID0gdHJ1ZTsKICAgICAgcmVzdGFydFRpbWVyKCk7CiAgICB9CiAgfTsKCiAgJGVsZW1lbnQub24oJ21vdXNlZW50ZXInLCAkc2NvcGUucGF1c2UpOwogICRlbGVtZW50Lm9uKCdtb3VzZWxlYXZlJywgJHNjb3BlLnBsYXkpOwoKICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkgewogICAgZGVzdHJveWVkID0gdHJ1ZTsKICAgIHJlc2V0VGltZXIoKTsKICB9KTsKCiAgJHNjb3BlLiR3YXRjaCgnbm9UcmFuc2l0aW9uJywgZnVuY3Rpb24obm9UcmFuc2l0aW9uKSB7CiAgICAkYW5pbWF0ZS5lbmFibGVkKCRlbGVtZW50LCAhbm9UcmFuc2l0aW9uKTsKICB9KTsKCiAgJHNjb3BlLiR3YXRjaCgnaW50ZXJ2YWwnLCByZXN0YXJ0VGltZXIpOwoKICAkc2NvcGUuJHdhdGNoQ29sbGVjdGlvbignc2xpZGVzJywgcmVzZXRUcmFuc2l0aW9uKTsKCiAgJHNjb3BlLiR3YXRjaCgnYWN0aXZlJywgZnVuY3Rpb24oaW5kZXgpIHsKICAgIGlmIChhbmd1bGFyLmlzTnVtYmVyKGluZGV4KSAmJiBjdXJyZW50SW5kZXggIT09IGluZGV4KSB7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2xpZGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHNsaWRlc1tpXS5zbGlkZS5pbmRleCA9PT0gaW5kZXgpIHsKICAgICAgICAgIGluZGV4ID0gaTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdmFyIHNsaWRlID0gc2xpZGVzW2luZGV4XTsKICAgICAgaWYgKHNsaWRlKSB7CiAgICAgICAgc2V0QWN0aXZlKGluZGV4KTsKICAgICAgICBzZWxmLnNlbGVjdChzbGlkZXNbaW5kZXhdKTsKICAgICAgICBjdXJyZW50SW5kZXggPSBpbmRleDsKICAgICAgfQogICAgfQogIH0pOwoKICBmdW5jdGlvbiBjbGVhckJ1ZmZlcmVkVHJhbnNpdGlvbnMoKSB7CiAgICB3aGlsZSAoYnVmZmVyZWRUcmFuc2l0aW9ucy5sZW5ndGgpIHsKICAgICAgYnVmZmVyZWRUcmFuc2l0aW9ucy5zaGlmdCgpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gZ2V0U2xpZGVCeUluZGV4KGluZGV4KSB7CiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHNsaWRlcy5sZW5ndGg7IGkgPCBsOyArK2kpIHsKICAgICAgaWYgKHNsaWRlc1tpXS5pbmRleCA9PT0gaW5kZXgpIHsKICAgICAgICByZXR1cm4gc2xpZGVzW2ldOwogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiBzZXRBY3RpdmUoaW5kZXgpIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2xpZGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHNsaWRlc1tpXS5zbGlkZS5hY3RpdmUgPSBpID09PSBpbmRleDsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGdvTmV4dChzbGlkZSwgaW5kZXgsIGRpcmVjdGlvbikgewogICAgaWYgKGRlc3Ryb3llZCkgewogICAgICByZXR1cm47CiAgICB9CgogICAgYW5ndWxhci5leHRlbmQoc2xpZGUsIHtkaXJlY3Rpb246IGRpcmVjdGlvbn0pOwogICAgYW5ndWxhci5leHRlbmQoc2xpZGVzW2N1cnJlbnRJbmRleF0uc2xpZGUgfHwge30sIHtkaXJlY3Rpb246IGRpcmVjdGlvbn0pOwogICAgaWYgKCRhbmltYXRlLmVuYWJsZWQoJGVsZW1lbnQpICYmICEkc2NvcGUuJGN1cnJlbnRUcmFuc2l0aW9uICYmCiAgICAgIHNsaWRlc1tpbmRleF0uZWxlbWVudCAmJiBzZWxmLnNsaWRlcy5sZW5ndGggPiAxKSB7CiAgICAgIHNsaWRlc1tpbmRleF0uZWxlbWVudC5kYXRhKFNMSURFX0RJUkVDVElPTiwgc2xpZGUuZGlyZWN0aW9uKTsKICAgICAgdmFyIGN1cnJlbnRJZHggPSBzZWxmLmdldEN1cnJlbnRJbmRleCgpOwoKICAgICAgaWYgKGFuZ3VsYXIuaXNOdW1iZXIoY3VycmVudElkeCkgJiYgc2xpZGVzW2N1cnJlbnRJZHhdLmVsZW1lbnQpIHsKICAgICAgICBzbGlkZXNbY3VycmVudElkeF0uZWxlbWVudC5kYXRhKFNMSURFX0RJUkVDVElPTiwgc2xpZGUuZGlyZWN0aW9uKTsKICAgICAgfQoKICAgICAgJHNjb3BlLiRjdXJyZW50VHJhbnNpdGlvbiA9IHRydWU7CiAgICAgICRhbmltYXRlLm9uKCdhZGRDbGFzcycsIHNsaWRlc1tpbmRleF0uZWxlbWVudCwgZnVuY3Rpb24oZWxlbWVudCwgcGhhc2UpIHsKICAgICAgICBpZiAocGhhc2UgPT09ICdjbG9zZScpIHsKICAgICAgICAgICRzY29wZS4kY3VycmVudFRyYW5zaXRpb24gPSBudWxsOwogICAgICAgICAgJGFuaW1hdGUub2ZmKCdhZGRDbGFzcycsIGVsZW1lbnQpOwogICAgICAgICAgaWYgKGJ1ZmZlcmVkVHJhbnNpdGlvbnMubGVuZ3RoKSB7CiAgICAgICAgICAgIHZhciBuZXh0U2xpZGUgPSBidWZmZXJlZFRyYW5zaXRpb25zLnBvcCgpLnNsaWRlOwogICAgICAgICAgICB2YXIgbmV4dEluZGV4ID0gbmV4dFNsaWRlLmluZGV4OwogICAgICAgICAgICB2YXIgbmV4dERpcmVjdGlvbiA9IG5leHRJbmRleCA+IHNlbGYuZ2V0Q3VycmVudEluZGV4KCkgPyAnbmV4dCcgOiAncHJldic7CiAgICAgICAgICAgIGNsZWFyQnVmZmVyZWRUcmFuc2l0aW9ucygpOwoKICAgICAgICAgICAgZ29OZXh0KG5leHRTbGlkZSwgbmV4dEluZGV4LCBuZXh0RGlyZWN0aW9uKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfQoKICAgICRzY29wZS5hY3RpdmUgPSBzbGlkZS5pbmRleDsKICAgIGN1cnJlbnRJbmRleCA9IHNsaWRlLmluZGV4OwogICAgc2V0QWN0aXZlKGluZGV4KTsKCiAgICAvL2V2ZXJ5IHRpbWUgeW91IGNoYW5nZSBzbGlkZXMsIHJlc2V0IHRoZSB0aW1lcgogICAgcmVzdGFydFRpbWVyKCk7CiAgfQoKICBmdW5jdGlvbiBmaW5kU2xpZGVJbmRleChzbGlkZSkgewogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzbGlkZXMubGVuZ3RoOyBpKyspIHsKICAgICAgaWYgKHNsaWRlc1tpXS5zbGlkZSA9PT0gc2xpZGUpIHsKICAgICAgICByZXR1cm4gaTsKICAgICAgfQogICAgfQogIH0KCiAgZnVuY3Rpb24gcmVzZXRUaW1lcigpIHsKICAgIGlmIChjdXJyZW50SW50ZXJ2YWwpIHsKICAgICAgJGludGVydmFsLmNhbmNlbChjdXJyZW50SW50ZXJ2YWwpOwogICAgICBjdXJyZW50SW50ZXJ2YWwgPSBudWxsOwogICAgfQogIH0KCiAgZnVuY3Rpb24gcmVzZXRUcmFuc2l0aW9uKHNsaWRlcykgewogICAgaWYgKCFzbGlkZXMubGVuZ3RoKSB7CiAgICAgICRzY29wZS4kY3VycmVudFRyYW5zaXRpb24gPSBudWxsOwogICAgICBjbGVhckJ1ZmZlcmVkVHJhbnNpdGlvbnMoKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHJlc3RhcnRUaW1lcigpIHsKICAgIHJlc2V0VGltZXIoKTsKICAgIHZhciBpbnRlcnZhbCA9ICskc2NvcGUuaW50ZXJ2YWw7CiAgICBpZiAoIWlzTmFOKGludGVydmFsKSAmJiBpbnRlcnZhbCA+IDApIHsKICAgICAgY3VycmVudEludGVydmFsID0gJGludGVydmFsKHRpbWVyRm4sIGludGVydmFsKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHRpbWVyRm4oKSB7CiAgICB2YXIgaW50ZXJ2YWwgPSArJHNjb3BlLmludGVydmFsOwogICAgaWYgKGlzUGxheWluZyAmJiAhaXNOYU4oaW50ZXJ2YWwpICYmIGludGVydmFsID4gMCAmJiBzbGlkZXMubGVuZ3RoKSB7CiAgICAgICRzY29wZS5uZXh0KCk7CiAgICB9IGVsc2UgewogICAgICAkc2NvcGUucGF1c2UoKTsKICAgIH0KICB9Cn1dKQoKLmRpcmVjdGl2ZSgndWliQ2Fyb3VzZWwnLCBmdW5jdGlvbigpIHsKICByZXR1cm4gewogICAgdHJhbnNjbHVkZTogdHJ1ZSwKICAgIGNvbnRyb2xsZXI6ICdVaWJDYXJvdXNlbENvbnRyb2xsZXInLAogICAgY29udHJvbGxlckFzOiAnY2Fyb3VzZWwnLAogICAgcmVzdHJpY3Q6ICdBJywKICAgIHRlbXBsYXRlVXJsOiBmdW5jdGlvbihlbGVtZW50LCBhdHRycykgewogICAgICByZXR1cm4gYXR0cnMudGVtcGxhdGVVcmwgfHwgJ3VpYi90ZW1wbGF0ZS9jYXJvdXNlbC9jYXJvdXNlbC5odG1sJzsKICAgIH0sCiAgICBzY29wZTogewogICAgICBhY3RpdmU6ICc9JywKICAgICAgaW50ZXJ2YWw6ICc9JywKICAgICAgbm9UcmFuc2l0aW9uOiAnPScsCiAgICAgIG5vUGF1c2U6ICc9JywKICAgICAgbm9XcmFwOiAnJicKICAgIH0KICB9Owp9KQoKLmRpcmVjdGl2ZSgndWliU2xpZGUnLCBbJyRhbmltYXRlJywgZnVuY3Rpb24oJGFuaW1hdGUpIHsKICByZXR1cm4gewogICAgcmVxdWlyZTogJ151aWJDYXJvdXNlbCcsCiAgICByZXN0cmljdDogJ0EnLAogICAgdHJhbnNjbHVkZTogdHJ1ZSwKICAgIHRlbXBsYXRlVXJsOiBmdW5jdGlvbihlbGVtZW50LCBhdHRycykgewogICAgICByZXR1cm4gYXR0cnMudGVtcGxhdGVVcmwgfHwgJ3VpYi90ZW1wbGF0ZS9jYXJvdXNlbC9zbGlkZS5odG1sJzsKICAgIH0sCiAgICBzY29wZTogewogICAgICBhY3R1YWw6ICc9PycsCiAgICAgIGluZGV4OiAnPT8nCiAgICB9LAogICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY2Fyb3VzZWxDdHJsKSB7CiAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoJ2l0ZW0nKTsKICAgICAgY2Fyb3VzZWxDdHJsLmFkZFNsaWRlKHNjb3BlLCBlbGVtZW50KTsKICAgICAgLy93aGVuIHRoZSBzY29wZSBpcyBkZXN0cm95ZWQgdGhlbiByZW1vdmUgdGhlIHNsaWRlIGZyb20gdGhlIGN1cnJlbnQgc2xpZGVzIGFycmF5CiAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHsKICAgICAgICBjYXJvdXNlbEN0cmwucmVtb3ZlU2xpZGUoc2NvcGUpOwogICAgICB9KTsKCiAgICAgIHNjb3BlLiR3YXRjaCgnYWN0aXZlJywgZnVuY3Rpb24oYWN0aXZlKSB7CiAgICAgICAgJGFuaW1hdGVbYWN0aXZlID8gJ2FkZENsYXNzJyA6ICdyZW1vdmVDbGFzcyddKGVsZW1lbnQsICdhY3RpdmUnKTsKICAgICAgfSk7CiAgICB9CiAgfTsKfV0pCgouYW5pbWF0aW9uKCcuaXRlbScsIFsnJGFuaW1hdGVDc3MnLApmdW5jdGlvbigkYW5pbWF0ZUNzcykgewogIHZhciBTTElERV9ESVJFQ1RJT04gPSAndWliLXNsaWRlRGlyZWN0aW9uJzsKCiAgZnVuY3Rpb24gcmVtb3ZlQ2xhc3MoZWxlbWVudCwgY2xhc3NOYW1lLCBjYWxsYmFjaykgewogICAgZWxlbWVudC5yZW1vdmVDbGFzcyhjbGFzc05hbWUpOwogICAgaWYgKGNhbGxiYWNrKSB7CiAgICAgIGNhbGxiYWNrKCk7CiAgICB9CiAgfQoKICByZXR1cm4gewogICAgYmVmb3JlQWRkQ2xhc3M6IGZ1bmN0aW9uKGVsZW1lbnQsIGNsYXNzTmFtZSwgZG9uZSkgewogICAgICBpZiAoY2xhc3NOYW1lID09PSAnYWN0aXZlJykgewogICAgICAgIHZhciBzdG9wcGVkID0gZmFsc2U7CiAgICAgICAgdmFyIGRpcmVjdGlvbiA9IGVsZW1lbnQuZGF0YShTTElERV9ESVJFQ1RJT04pOwogICAgICAgIHZhciBkaXJlY3Rpb25DbGFzcyA9IGRpcmVjdGlvbiA9PT0gJ25leHQnID8gJ2xlZnQnIDogJ3JpZ2h0JzsKICAgICAgICB2YXIgcmVtb3ZlQ2xhc3NGbiA9IHJlbW92ZUNsYXNzLmJpbmQodGhpcywgZWxlbWVudCwKICAgICAgICAgIGRpcmVjdGlvbkNsYXNzICsgJyAnICsgZGlyZWN0aW9uLCBkb25lKTsKICAgICAgICBlbGVtZW50LmFkZENsYXNzKGRpcmVjdGlvbik7CgogICAgICAgICRhbmltYXRlQ3NzKGVsZW1lbnQsIHthZGRDbGFzczogZGlyZWN0aW9uQ2xhc3N9KQogICAgICAgICAgLnN0YXJ0KCkKICAgICAgICAgIC5kb25lKHJlbW92ZUNsYXNzRm4pOwoKICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgICAgICBzdG9wcGVkID0gdHJ1ZTsKICAgICAgICB9OwogICAgICB9CiAgICAgIGRvbmUoKTsKICAgIH0sCiAgICBiZWZvcmVSZW1vdmVDbGFzczogZnVuY3Rpb24gKGVsZW1lbnQsIGNsYXNzTmFtZSwgZG9uZSkgewogICAgICBpZiAoY2xhc3NOYW1lID09PSAnYWN0aXZlJykgewogICAgICAgIHZhciBzdG9wcGVkID0gZmFsc2U7CiAgICAgICAgdmFyIGRpcmVjdGlvbiA9IGVsZW1lbnQuZGF0YShTTElERV9ESVJFQ1RJT04pOwogICAgICAgIHZhciBkaXJlY3Rpb25DbGFzcyA9IGRpcmVjdGlvbiA9PT0gJ25leHQnID8gJ2xlZnQnIDogJ3JpZ2h0JzsKICAgICAgICB2YXIgcmVtb3ZlQ2xhc3NGbiA9IHJlbW92ZUNsYXNzLmJpbmQodGhpcywgZWxlbWVudCwgZGlyZWN0aW9uQ2xhc3MsIGRvbmUpOwoKICAgICAgICAkYW5pbWF0ZUNzcyhlbGVtZW50LCB7YWRkQ2xhc3M6IGRpcmVjdGlvbkNsYXNzfSkKICAgICAgICAgIC5zdGFydCgpCiAgICAgICAgICAuZG9uZShyZW1vdmVDbGFzc0ZuKTsKCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgICAgc3RvcHBlZCA9IHRydWU7CiAgICAgICAgfTsKICAgICAgfQogICAgICBkb25lKCk7CiAgICB9CiAgfTsKfV0pOwoKYW5ndWxhci5tb2R1bGUoJ3VpLmJvb3RzdHJhcC5kYXRlcGFyc2VyJywgW10pCgouc2VydmljZSgndWliRGF0ZVBhcnNlcicsIFsnJGxvZycsICckbG9jYWxlJywgJ2RhdGVGaWx0ZXInLCAnb3JkZXJCeUZpbHRlcicsIGZ1bmN0aW9uKCRsb2csICRsb2NhbGUsIGRhdGVGaWx0ZXIsIG9yZGVyQnlGaWx0ZXIpIHsKICAvLyBQdWxsZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vbWJvc3RvY2svZDMvYmxvYi9tYXN0ZXIvc3JjL2Zvcm1hdC9yZXF1b3RlLmpzCiAgdmFyIFNQRUNJQUxfQ0hBUkFDVEVSU19SRUdFWFAgPSAvW1xcXF5cJFwqXCtcP1x8XFtcXVwoXClcLlx7XH1dL2c7CgogIHZhciBsb2NhbGVJZDsKICB2YXIgZm9ybWF0Q29kZVRvUmVnZXg7CgogIHRoaXMuaW5pdCA9IGZ1bmN0aW9uKCkgewogICAgbG9jYWxlSWQgPSAkbG9jYWxlLmlkOwoKICAgIHRoaXMucGFyc2VycyA9IHt9OwogICAgdGhpcy5mb3JtYXR0ZXJzID0ge307CgogICAgZm9ybWF0Q29kZVRvUmVnZXggPSBbCiAgICAgIHsKICAgICAgICBrZXk6ICd5eXl5JywKICAgICAgICByZWdleDogJ1xcZHs0fScsCiAgICAgICAgYXBwbHk6IGZ1bmN0aW9uKHZhbHVlKSB7IHRoaXMueWVhciA9ICt2YWx1ZTsgfSwKICAgICAgICBmb3JtYXR0ZXI6IGZ1bmN0aW9uKGRhdGUpIHsKICAgICAgICAgIHZhciBfZGF0ZSA9IG5ldyBEYXRlKCk7CiAgICAgICAgICBfZGF0ZS5zZXRGdWxsWWVhcihNYXRoLmFicyhkYXRlLmdldEZ1bGxZZWFyKCkpKTsKICAgICAgICAgIHJldHVybiBkYXRlRmlsdGVyKF9kYXRlLCAneXl5eScpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgewogICAgICAgIGtleTogJ3l5JywKICAgICAgICByZWdleDogJ1xcZHsyfScsCiAgICAgICAgYXBwbHk6IGZ1bmN0aW9uKHZhbHVlKSB7IHZhbHVlID0gK3ZhbHVlOyB0aGlzLnllYXIgPSB2YWx1ZSA8IDY5ID8gdmFsdWUgKyAyMDAwIDogdmFsdWUgKyAxOTAwOyB9LAogICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24oZGF0ZSkgewogICAgICAgICAgdmFyIF9kYXRlID0gbmV3IERhdGUoKTsKICAgICAgICAgIF9kYXRlLnNldEZ1bGxZZWFyKE1hdGguYWJzKGRhdGUuZ2V0RnVsbFllYXIoKSkpOwogICAgICAgICAgcmV0dXJuIGRhdGVGaWx0ZXIoX2RhdGUsICd5eScpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgewogICAgICAgIGtleTogJ3knLAogICAgICAgIHJlZ2V4OiAnXFxkezEsNH0nLAogICAgICAgIGFwcGx5OiBmdW5jdGlvbih2YWx1ZSkgeyB0aGlzLnllYXIgPSArdmFsdWU7IH0sCiAgICAgICAgZm9ybWF0dGVyOiBmdW5jdGlvbihkYXRlKSB7CiAgICAgICAgICB2YXIgX2RhdGUgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgX2RhdGUuc2V0RnVsbFllYXIoTWF0aC5hYnMoZGF0ZS5nZXRGdWxsWWVhcigpKSk7CiAgICAgICAgICByZXR1cm4gZGF0ZUZpbHRlcihfZGF0ZSwgJ3knKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHsKICAgICAgICBrZXk6ICdNIScsCiAgICAgICAgcmVnZXg6ICcwP1sxLTldfDFbMC0yXScsCiAgICAgICAgYXBwbHk6IGZ1bmN0aW9uKHZhbHVlKSB7IHRoaXMubW9udGggPSB2YWx1ZSAtIDE7IH0sCiAgICAgICAgZm9ybWF0dGVyOiBmdW5jdGlvbihkYXRlKSB7CiAgICAgICAgICB2YXIgdmFsdWUgPSBkYXRlLmdldE1vbnRoKCk7CiAgICAgICAgICBpZiAoL15bMC05XSQvLnRlc3QodmFsdWUpKSB7CiAgICAgICAgICAgIHJldHVybiBkYXRlRmlsdGVyKGRhdGUsICdNTScpOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBkYXRlRmlsdGVyKGRhdGUsICdNJyk7CiAgICAgICAgfQogICAgICB9LAogICAgICB7CiAgICAgICAga2V5OiAnTU1NTScsCiAgICAgICAgcmVnZXg6ICRsb2NhbGUuREFURVRJTUVfRk9STUFUUy5NT05USC5qb2luKCd8JyksCiAgICAgICAgYXBwbHk6IGZ1bmN0aW9uKHZhbHVlKSB7IHRoaXMubW9udGggPSAkbG9jYWxlLkRBVEVUSU1FX0ZPUk1BVFMuTU9OVEguaW5kZXhPZih2YWx1ZSk7IH0sCiAgICAgICAgZm9ybWF0dGVyOiBmdW5jdGlvbihkYXRlKSB7IHJldHVybiBkYXRlRmlsdGVyKGRhdGUsICdNTU1NJyk7IH0KICAgICAgfSwKICAgICAgewogICAgICAgIGtleTogJ01NTScsCiAgICAgICAgcmVnZXg6ICRsb2NhbGUuREFURVRJTUVfRk9STUFUUy5TSE9SVE1PTlRILmpvaW4oJ3wnKSwKICAgICAgICBhcHBseTogZnVuY3Rpb24odmFsdWUpIHsgdGhpcy5tb250aCA9ICRsb2NhbGUuREFURVRJTUVfRk9STUFUUy5TSE9SVE1PTlRILmluZGV4T2YodmFsdWUpOyB9LAogICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24oZGF0ZSkgeyByZXR1cm4gZGF0ZUZpbHRlcihkYXRlLCAnTU1NJyk7IH0KICAgICAgfSwKICAgICAgewogICAgICAgIGtleTogJ01NJywKICAgICAgICByZWdleDogJzBbMS05XXwxWzAtMl0nLAogICAgICAgIGFwcGx5OiBmdW5jdGlvbih2YWx1ZSkgeyB0aGlzLm1vbnRoID0gdmFsdWUgLSAxOyB9LAogICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24oZGF0ZSkgeyByZXR1cm4gZGF0ZUZpbHRlcihkYXRlLCAnTU0nKTsgfQogICAgICB9LAogICAgICB7CiAgICAgICAga2V5OiAnTScsCiAgICAgICAgcmVnZXg6ICdbMS05XXwxWzAtMl0nLAogICAgICAgIGFwcGx5OiBmdW5jdGlvbih2YWx1ZSkgeyB0aGlzLm1vbnRoID0gdmFsdWUgLSAxOyB9LAogICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24oZGF0ZSkgeyByZXR1cm4gZGF0ZUZpbHRlcihkYXRlLCAnTScpOyB9CiAgICAgIH0sCiAgICAgIHsKICAgICAgICBrZXk6ICdkIScsCiAgICAgICAgcmVnZXg6ICdbMC0yXT9bMC05XXsxfXwzWzAtMV17MX0nLAogICAgICAgIGFwcGx5OiBmdW5jdGlvbih2YWx1ZSkgeyB0aGlzLmRhdGUgPSArdmFsdWU7IH0sCiAgICAgICAgZm9ybWF0dGVyOiBmdW5jdGlvbihkYXRlKSB7CiAgICAgICAgICB2YXIgdmFsdWUgPSBkYXRlLmdldERhdGUoKTsKICAgICAgICAgIGlmICgvXlsxLTldJC8udGVzdCh2YWx1ZSkpIHsKICAgICAgICAgICAgcmV0dXJuIGRhdGVGaWx0ZXIoZGF0ZSwgJ2RkJyk7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIGRhdGVGaWx0ZXIoZGF0ZSwgJ2QnKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHsKICAgICAgICBrZXk6ICdkZCcsCiAgICAgICAgcmVnZXg6ICdbMC0yXVswLTldezF9fDNbMC0xXXsxfScsCiAgICAgICAgYXBwbHk6IGZ1bmN0aW9uKHZhbHVlKSB7IHRoaXMuZGF0ZSA9ICt2YWx1ZTsgfSwKICAgICAgICBmb3JtYXR0ZXI6IGZ1bmN0aW9uKGRhdGUpIHsgcmV0dXJuIGRhdGVGaWx0ZXIoZGF0ZSwgJ2RkJyk7IH0KICAgICAgfSwKICAgICAgewogICAgICAgIGtleTogJ2QnLAogICAgICAgIHJlZ2V4OiAnWzEtMl0/WzAtOV17MX18M1swLTFdezF9JywKICAgICAgICBhcHBseTogZnVuY3Rpb24odmFsdWUpIHsgdGhpcy5kYXRlID0gK3ZhbHVlOyB9LAogICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24oZGF0ZSkgeyByZXR1cm4gZGF0ZUZpbHRlcihkYXRlLCAnZCcpOyB9CiAgICAgIH0sCiAgICAgIHsKICAgICAgICBrZXk6ICdFRUVFJywKICAgICAgICByZWdleDogJGxvY2FsZS5EQVRFVElNRV9GT1JNQVRTLkRBWS5qb2luKCd8JyksCiAgICAgICAgZm9ybWF0dGVyOiBmdW5jdGlvbihkYXRlKSB7IHJldHVybiBkYXRlRmlsdGVyKGRhdGUsICdFRUVFJyk7IH0KICAgICAgfSwKICAgICAgewogICAgICAgIGtleTogJ0VFRScsCiAgICAgICAgcmVnZXg6ICRsb2NhbGUuREFURVRJTUVfRk9STUFUUy5TSE9SVERBWS5qb2luKCd8JyksCiAgICAgICAgZm9ybWF0dGVyOiBmdW5jdGlvbihkYXRlKSB7IHJldHVybiBkYXRlRmlsdGVyKGRhdGUsICdFRUUnKTsgfQogICAgICB9LAogICAgICB7CiAgICAgICAga2V5OiAnSEgnLAogICAgICAgIHJlZ2V4OiAnKD86MHwxKVswLTldfDJbMC0zXScsCiAgICAgICAgYXBwbHk6IGZ1bmN0aW9uKHZhbHVlKSB7IHRoaXMuaG91cnMgPSArdmFsdWU7IH0sCiAgICAgICAgZm9ybWF0dGVyOiBmdW5jdGlvbihkYXRlKSB7IHJldHVybiBkYXRlRmlsdGVyKGRhdGUsICdISCcpOyB9CiAgICAgIH0sCiAgICAgIHsKICAgICAgICBrZXk6ICdoaCcsCiAgICAgICAgcmVnZXg6ICcwWzAtOV18MVswLTJdJywKICAgICAgICBhcHBseTogZnVuY3Rpb24odmFsdWUpIHsgdGhpcy5ob3VycyA9ICt2YWx1ZTsgfSwKICAgICAgICBmb3JtYXR0ZXI6IGZ1bmN0aW9uKGRhdGUpIHsgcmV0dXJuIGRhdGVGaWx0ZXIoZGF0ZSwgJ2hoJyk7IH0KICAgICAgfSwKICAgICAgewogICAgICAgIGtleTogJ0gnLAogICAgICAgIHJlZ2V4OiAnMT9bMC05XXwyWzAtM10nLAogICAgICAgIGFwcGx5OiBmdW5jdGlvbih2YWx1ZSkgeyB0aGlzLmhvdXJzID0gK3ZhbHVlOyB9LAogICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24oZGF0ZSkgeyByZXR1cm4gZGF0ZUZpbHRlcihkYXRlLCAnSCcpOyB9CiAgICAgIH0sCiAgICAgIHsKICAgICAgICBrZXk6ICdoJywKICAgICAgICByZWdleDogJ1swLTldfDFbMC0yXScsCiAgICAgICAgYXBwbHk6IGZ1bmN0aW9uKHZhbHVlKSB7IHRoaXMuaG91cnMgPSArdmFsdWU7IH0sCiAgICAgICAgZm9ybWF0dGVyOiBmdW5jdGlvbihkYXRlKSB7IHJldHVybiBkYXRlRmlsdGVyKGRhdGUsICdoJyk7IH0KICAgICAgfSwKICAgICAgewogICAgICAgIGtleTogJ21tJywKICAgICAgICByZWdleDogJ1swLTVdWzAtOV0nLAogICAgICAgIGFwcGx5OiBmdW5jdGlvbih2YWx1ZSkgeyB0aGlzLm1pbnV0ZXMgPSArdmFsdWU7IH0sCiAgICAgICAgZm9ybWF0dGVyOiBmdW5jdGlvbihkYXRlKSB7IHJldHVybiBkYXRlRmlsdGVyKGRhdGUsICdtbScpOyB9CiAgICAgIH0sCiAgICAgIHsKICAgICAgICBrZXk6ICdtJywKICAgICAgICByZWdleDogJ1swLTldfFsxLTVdWzAtOV0nLAogICAgICAgIGFwcGx5OiBmdW5jdGlvbih2YWx1ZSkgeyB0aGlzLm1pbnV0ZXMgPSArdmFsdWU7IH0sCiAgICAgICAgZm9ybWF0dGVyOiBmdW5jdGlvbihkYXRlKSB7IHJldHVybiBkYXRlRmlsdGVyKGRhdGUsICdtJyk7IH0KICAgICAgfSwKICAgICAgewogICAgICAgIGtleTogJ3NzcycsCiAgICAgICAgcmVnZXg6ICdbMC05XVswLTldWzAtOV0nLAogICAgICAgIGFwcGx5OiBmdW5jdGlvbih2YWx1ZSkgeyB0aGlzLm1pbGxpc2Vjb25kcyA9ICt2YWx1ZTsgfSwKICAgICAgICBmb3JtYXR0ZXI6IGZ1bmN0aW9uKGRhdGUpIHsgcmV0dXJuIGRhdGVGaWx0ZXIoZGF0ZSwgJ3NzcycpOyB9CiAgICAgIH0sCiAgICAgIHsKICAgICAgICBrZXk6ICdzcycsCiAgICAgICAgcmVnZXg6ICdbMC01XVswLTldJywKICAgICAgICBhcHBseTogZnVuY3Rpb24odmFsdWUpIHsgdGhpcy5zZWNvbmRzID0gK3ZhbHVlOyB9LAogICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24oZGF0ZSkgeyByZXR1cm4gZGF0ZUZpbHRlcihkYXRlLCAnc3MnKTsgfQogICAgICB9LAogICAgICB7CiAgICAgICAga2V5OiAncycsCiAgICAgICAgcmVnZXg6ICdbMC05XXxbMS01XVswLTldJywKICAgICAgICBhcHBseTogZnVuY3Rpb24odmFsdWUpIHsgdGhpcy5zZWNvbmRzID0gK3ZhbHVlOyB9LAogICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24oZGF0ZSkgeyByZXR1cm4gZGF0ZUZpbHRlcihkYXRlLCAncycpOyB9CiAgICAgIH0sCiAgICAgIHsKICAgICAgICBrZXk6ICdhJywKICAgICAgICByZWdleDogJGxvY2FsZS5EQVRFVElNRV9GT1JNQVRTLkFNUE1TLmpvaW4oJ3wnKSwKICAgICAgICBhcHBseTogZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICAgIGlmICh0aGlzLmhvdXJzID09PSAxMikgewogICAgICAgICAgICB0aGlzLmhvdXJzID0gMDsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAodmFsdWUgPT09ICdQTScpIHsKICAgICAgICAgICAgdGhpcy5ob3VycyArPSAxMjsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24oZGF0ZSkgeyByZXR1cm4gZGF0ZUZpbHRlcihkYXRlLCAnYScpOyB9CiAgICAgIH0sCiAgICAgIHsKICAgICAgICBrZXk6ICdaJywKICAgICAgICByZWdleDogJ1srLV1cXGR7NH0nLAogICAgICAgIGFwcGx5OiBmdW5jdGlvbih2YWx1ZSkgewogICAgICAgICAgdmFyIG1hdGNoZXMgPSB2YWx1ZS5tYXRjaCgvKFsrLV0pKFxkezJ9KShcZHsyfSkvKSwKICAgICAgICAgICAgc2lnbiA9IG1hdGNoZXNbMV0sCiAgICAgICAgICAgIGhvdXJzID0gbWF0Y2hlc1syXSwKICAgICAgICAgICAgbWludXRlcyA9IG1hdGNoZXNbM107CiAgICAgICAgICB0aGlzLmhvdXJzICs9IHRvSW50KHNpZ24gKyBob3Vycyk7CiAgICAgICAgICB0aGlzLm1pbnV0ZXMgKz0gdG9JbnQoc2lnbiArIG1pbnV0ZXMpOwogICAgICAgIH0sCiAgICAgICAgZm9ybWF0dGVyOiBmdW5jdGlvbihkYXRlKSB7CiAgICAgICAgICByZXR1cm4gZGF0ZUZpbHRlcihkYXRlLCAnWicpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgewogICAgICAgIGtleTogJ3d3JywKICAgICAgICByZWdleDogJ1swLTRdWzAtOV18NVswLTNdJywKICAgICAgICBmb3JtYXR0ZXI6IGZ1bmN0aW9uKGRhdGUpIHsgcmV0dXJuIGRhdGVGaWx0ZXIoZGF0ZSwgJ3d3Jyk7IH0KICAgICAgfSwKICAgICAgewogICAgICAgIGtleTogJ3cnLAogICAgICAgIHJlZ2V4OiAnWzAtOV18WzEtNF1bMC05XXw1WzAtM10nLAogICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24oZGF0ZSkgeyByZXR1cm4gZGF0ZUZpbHRlcihkYXRlLCAndycpOyB9CiAgICAgIH0sCiAgICAgIHsKICAgICAgICBrZXk6ICdHR0dHJywKICAgICAgICByZWdleDogJGxvY2FsZS5EQVRFVElNRV9GT1JNQVRTLkVSQU5BTUVTLmpvaW4oJ3wnKS5yZXBsYWNlKC9ccy9nLCAnXFxzJyksCiAgICAgICAgZm9ybWF0dGVyOiBmdW5jdGlvbihkYXRlKSB7IHJldHVybiBkYXRlRmlsdGVyKGRhdGUsICdHR0dHJyk7IH0KICAgICAgfSwKICAgICAgewogICAgICAgIGtleTogJ0dHRycsCiAgICAgICAgcmVnZXg6ICRsb2NhbGUuREFURVRJTUVfRk9STUFUUy5FUkFTLmpvaW4oJ3wnKSwKICAgICAgICBmb3JtYXR0ZXI6IGZ1bmN0aW9uKGRhdGUpIHsgcmV0dXJuIGRhdGVGaWx0ZXIoZGF0ZSwgJ0dHRycpOyB9CiAgICAgIH0sCiAgICAgIHsKICAgICAgICBrZXk6ICdHRycsCiAgICAgICAgcmVnZXg6ICRsb2NhbGUuREFURVRJTUVfRk9STUFUUy5FUkFTLmpvaW4oJ3wnKSwKICAgICAgICBmb3JtYXR0ZXI6IGZ1bmN0aW9uKGRhdGUpIHsgcmV0dXJuIGRhdGVGaWx0ZXIoZGF0ZSwgJ0dHJyk7IH0KICAgICAgfSwKICAgICAgewogICAgICAgIGtleTogJ0cnLAogICAgICAgIHJlZ2V4OiAkbG9jYWxlLkRBVEVUSU1FX0ZPUk1BVFMuRVJBUy5qb2luKCd8JyksCiAgICAgICAgZm9ybWF0dGVyOiBmdW5jdGlvbihkYXRlKSB7IHJldHVybiBkYXRlRmlsdGVyKGRhdGUsICdHJyk7IH0KICAgICAgfQogICAgXTsKICB9OwoKICB0aGlzLmluaXQoKTsKCiAgZnVuY3Rpb24gY3JlYXRlUGFyc2VyKGZvcm1hdCkgewogICAgdmFyIG1hcCA9IFtdLCByZWdleCA9IGZvcm1hdC5zcGxpdCgnJyk7CgogICAgLy8gY2hlY2sgZm9yIGxpdGVyYWwgdmFsdWVzCiAgICB2YXIgcXVvdGVJbmRleCA9IGZvcm1hdC5pbmRleE9mKCdcJycpOwogICAgaWYgKHF1b3RlSW5kZXggPiAtMSkgewogICAgICB2YXIgaW5MaXRlcmFsID0gZmFsc2U7CiAgICAgIGZvcm1hdCA9IGZvcm1hdC5zcGxpdCgnJyk7CiAgICAgIGZvciAodmFyIGkgPSBxdW90ZUluZGV4OyBpIDwgZm9ybWF0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKGluTGl0ZXJhbCkgewogICAgICAgICAgaWYgKGZvcm1hdFtpXSA9PT0gJ1wnJykgewogICAgICAgICAgICBpZiAoaSArIDEgPCBmb3JtYXQubGVuZ3RoICYmIGZvcm1hdFtpKzFdID09PSAnXCcnKSB7IC8vIGVzY2FwZWQgc2luZ2xlIHF1b3RlCiAgICAgICAgICAgICAgZm9ybWF0W2krMV0gPSAnJCc7CiAgICAgICAgICAgICAgcmVnZXhbaSsxXSA9ICcnOwogICAgICAgICAgICB9IGVsc2UgeyAvLyBlbmQgb2YgbGl0ZXJhbAogICAgICAgICAgICAgIHJlZ2V4W2ldID0gJyc7CiAgICAgICAgICAgICAgaW5MaXRlcmFsID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGZvcm1hdFtpXSA9ICckJzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKGZvcm1hdFtpXSA9PT0gJ1wnJykgeyAvLyBzdGFydCBvZiBsaXRlcmFsCiAgICAgICAgICAgIGZvcm1hdFtpXSA9ICckJzsKICAgICAgICAgICAgcmVnZXhbaV0gPSAnJzsKICAgICAgICAgICAgaW5MaXRlcmFsID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZvcm1hdCA9IGZvcm1hdC5qb2luKCcnKTsKICAgIH0KCiAgICBhbmd1bGFyLmZvckVhY2goZm9ybWF0Q29kZVRvUmVnZXgsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgdmFyIGluZGV4ID0gZm9ybWF0LmluZGV4T2YoZGF0YS5rZXkpOwoKICAgICAgaWYgKGluZGV4ID4gLTEpIHsKICAgICAgICBmb3JtYXQgPSBmb3JtYXQuc3BsaXQoJycpOwoKICAgICAgICByZWdleFtpbmRleF0gPSAnKCcgKyBkYXRhLnJlZ2V4ICsgJyknOwogICAgICAgIGZvcm1hdFtpbmRleF0gPSAnJCc7IC8vIEN1c3RvbSBzeW1ib2wgdG8gZGVmaW5lIGNvbnN1bWVkIHBhcnQgb2YgZm9ybWF0CiAgICAgICAgZm9yICh2YXIgaSA9IGluZGV4ICsgMSwgbiA9IGluZGV4ICsgZGF0YS5rZXkubGVuZ3RoOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICByZWdleFtpXSA9ICcnOwogICAgICAgICAgZm9ybWF0W2ldID0gJyQnOwogICAgICAgIH0KICAgICAgICBmb3JtYXQgPSBmb3JtYXQuam9pbignJyk7CgogICAgICAgIG1hcC5wdXNoKHsKICAgICAgICAgIGluZGV4OiBpbmRleCwKICAgICAgICAgIGtleTogZGF0YS5rZXksCiAgICAgICAgICBhcHBseTogZGF0YS5hcHBseSwKICAgICAgICAgIG1hdGNoZXI6IGRhdGEucmVnZXgKICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CgogICAgcmV0dXJuIHsKICAgICAgcmVnZXg6IG5ldyBSZWdFeHAoJ14nICsgcmVnZXguam9pbignJykgKyAnJCcpLAogICAgICBtYXA6IG9yZGVyQnlGaWx0ZXIobWFwLCAnaW5kZXgnKQogICAgfTsKICB9CgogIGZ1bmN0aW9uIGNyZWF0ZUZvcm1hdHRlcihmb3JtYXQpIHsKICAgIHZhciBmb3JtYXR0ZXJzID0gW107CiAgICB2YXIgaSA9IDA7CiAgICB2YXIgZm9ybWF0dGVyLCBsaXRlcmFsSWR4OwogICAgd2hpbGUgKGkgPCBmb3JtYXQubGVuZ3RoKSB7CiAgICAgIGlmIChhbmd1bGFyLmlzTnVtYmVyKGxpdGVyYWxJZHgpKSB7CiAgICAgICAgaWYgKGZvcm1hdC5jaGFyQXQoaSkgPT09ICdcJycpIHsKICAgICAgICAgIGlmIChpICsgMSA+PSBmb3JtYXQubGVuZ3RoIHx8IGZvcm1hdC5jaGFyQXQoaSArIDEpICE9PSAnXCcnKSB7CiAgICAgICAgICAgIGZvcm1hdHRlcnMucHVzaChjb25zdHJ1Y3RMaXRlcmFsRm9ybWF0dGVyKGZvcm1hdCwgbGl0ZXJhbElkeCwgaSkpOwogICAgICAgICAgICBsaXRlcmFsSWR4ID0gbnVsbDsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKGkgPT09IGZvcm1hdC5sZW5ndGgpIHsKICAgICAgICAgIHdoaWxlIChsaXRlcmFsSWR4IDwgZm9ybWF0Lmxlbmd0aCkgewogICAgICAgICAgICBmb3JtYXR0ZXIgPSBjb25zdHJ1Y3RGb3JtYXR0ZXJGcm9tSWR4KGZvcm1hdCwgbGl0ZXJhbElkeCk7CiAgICAgICAgICAgIGZvcm1hdHRlcnMucHVzaChmb3JtYXR0ZXIpOwogICAgICAgICAgICBsaXRlcmFsSWR4ID0gZm9ybWF0dGVyLmVuZElkeDsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGkrKzsKICAgICAgICBjb250aW51ZTsKICAgICAgfQoKICAgICAgaWYgKGZvcm1hdC5jaGFyQXQoaSkgPT09ICdcJycpIHsKICAgICAgICBsaXRlcmFsSWR4ID0gaTsKICAgICAgICBpKys7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KCiAgICAgIGZvcm1hdHRlciA9IGNvbnN0cnVjdEZvcm1hdHRlckZyb21JZHgoZm9ybWF0LCBpKTsKCiAgICAgIGZvcm1hdHRlcnMucHVzaChmb3JtYXR0ZXIucGFyc2VyKTsKICAgICAgaSA9IGZvcm1hdHRlci5lbmRJZHg7CiAgICB9CgogICAgcmV0dXJuIGZvcm1hdHRlcnM7CiAgfQoKICBmdW5jdGlvbiBjb25zdHJ1Y3RMaXRlcmFsRm9ybWF0dGVyKGZvcm1hdCwgbGl0ZXJhbElkeCwgZW5kSWR4KSB7CiAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBmb3JtYXQuc3Vic3RyKGxpdGVyYWxJZHggKyAxLCBlbmRJZHggLSBsaXRlcmFsSWR4IC0gMSk7CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gY29uc3RydWN0Rm9ybWF0dGVyRnJvbUlkeChmb3JtYXQsIGkpIHsKICAgIHZhciBjdXJyZW50UG9zU3RyID0gZm9ybWF0LnN1YnN0cihpKTsKICAgIGZvciAodmFyIGogPSAwOyBqIDwgZm9ybWF0Q29kZVRvUmVnZXgubGVuZ3RoOyBqKyspIHsKICAgICAgaWYgKG5ldyBSZWdFeHAoJ14nICsgZm9ybWF0Q29kZVRvUmVnZXhbal0ua2V5KS50ZXN0KGN1cnJlbnRQb3NTdHIpKSB7CiAgICAgICAgdmFyIGRhdGEgPSBmb3JtYXRDb2RlVG9SZWdleFtqXTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgZW5kSWR4OiBpICsgZGF0YS5rZXkubGVuZ3RoLAogICAgICAgICAgcGFyc2VyOiBkYXRhLmZvcm1hdHRlcgogICAgICAgIH07CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gewogICAgICBlbmRJZHg6IGkgKyAxLAogICAgICBwYXJzZXI6IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBjdXJyZW50UG9zU3RyLmNoYXJBdCgwKTsKICAgICAgfQogICAgfTsKICB9CgogIHRoaXMuZmlsdGVyID0gZnVuY3Rpb24oZGF0ZSwgZm9ybWF0KSB7CiAgICBpZiAoIWFuZ3VsYXIuaXNEYXRlKGRhdGUpIHx8IGlzTmFOKGRhdGUpIHx8ICFmb3JtYXQpIHsKICAgICAgcmV0dXJuICcnOwogICAgfQoKICAgIGZvcm1hdCA9ICRsb2NhbGUuREFURVRJTUVfRk9STUFUU1tmb3JtYXRdIHx8IGZvcm1hdDsKCiAgICBpZiAoJGxvY2FsZS5pZCAhPT0gbG9jYWxlSWQpIHsKICAgICAgdGhpcy5pbml0KCk7CiAgICB9CgogICAgaWYgKCF0aGlzLmZvcm1hdHRlcnNbZm9ybWF0XSkgewogICAgICB0aGlzLmZvcm1hdHRlcnNbZm9ybWF0XSA9IGNyZWF0ZUZvcm1hdHRlcihmb3JtYXQpOwogICAgfQoKICAgIHZhciBmb3JtYXR0ZXJzID0gdGhpcy5mb3JtYXR0ZXJzW2Zvcm1hdF07CgogICAgcmV0dXJuIGZvcm1hdHRlcnMucmVkdWNlKGZ1bmN0aW9uKHN0ciwgZm9ybWF0dGVyKSB7CiAgICAgIHJldHVybiBzdHIgKyBmb3JtYXR0ZXIoZGF0ZSk7CiAgICB9LCAnJyk7CiAgfTsKCiAgdGhpcy5wYXJzZSA9IGZ1bmN0aW9uKGlucHV0LCBmb3JtYXQsIGJhc2VEYXRlKSB7CiAgICBpZiAoIWFuZ3VsYXIuaXNTdHJpbmcoaW5wdXQpIHx8ICFmb3JtYXQpIHsKICAgICAgcmV0dXJuIGlucHV0OwogICAgfQoKICAgIGZvcm1hdCA9ICRsb2NhbGUuREFURVRJTUVfRk9STUFUU1tmb3JtYXRdIHx8IGZvcm1hdDsKICAgIGZvcm1hdCA9IGZvcm1hdC5yZXBsYWNlKFNQRUNJQUxfQ0hBUkFDVEVSU19SRUdFWFAsICdcXCQmJyk7CgogICAgaWYgKCRsb2NhbGUuaWQgIT09IGxvY2FsZUlkKSB7CiAgICAgIHRoaXMuaW5pdCgpOwogICAgfQoKICAgIGlmICghdGhpcy5wYXJzZXJzW2Zvcm1hdF0pIHsKICAgICAgdGhpcy5wYXJzZXJzW2Zvcm1hdF0gPSBjcmVhdGVQYXJzZXIoZm9ybWF0LCAnYXBwbHknKTsKICAgIH0KCiAgICB2YXIgcGFyc2VyID0gdGhpcy5wYXJzZXJzW2Zvcm1hdF0sCiAgICAgICAgcmVnZXggPSBwYXJzZXIucmVnZXgsCiAgICAgICAgbWFwID0gcGFyc2VyLm1hcCwKICAgICAgICByZXN1bHRzID0gaW5wdXQubWF0Y2gocmVnZXgpLAogICAgICAgIHR6T2Zmc2V0ID0gZmFsc2U7CiAgICBpZiAocmVzdWx0cyAmJiByZXN1bHRzLmxlbmd0aCkgewogICAgICB2YXIgZmllbGRzLCBkdDsKICAgICAgaWYgKGFuZ3VsYXIuaXNEYXRlKGJhc2VEYXRlKSAmJiAhaXNOYU4oYmFzZURhdGUuZ2V0VGltZSgpKSkgewogICAgICAgIGZpZWxkcyA9IHsKICAgICAgICAgIHllYXI6IGJhc2VEYXRlLmdldEZ1bGxZZWFyKCksCiAgICAgICAgICBtb250aDogYmFzZURhdGUuZ2V0TW9udGgoKSwKICAgICAgICAgIGRhdGU6IGJhc2VEYXRlLmdldERhdGUoKSwKICAgICAgICAgIGhvdXJzOiBiYXNlRGF0ZS5nZXRIb3VycygpLAogICAgICAgICAgbWludXRlczogYmFzZURhdGUuZ2V0TWludXRlcygpLAogICAgICAgICAgc2Vjb25kczogYmFzZURhdGUuZ2V0U2Vjb25kcygpLAogICAgICAgICAgbWlsbGlzZWNvbmRzOiBiYXNlRGF0ZS5nZXRNaWxsaXNlY29uZHMoKQogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKGJhc2VEYXRlKSB7CiAgICAgICAgICAkbG9nLndhcm4oJ2RhdGVwYXJzZXI6JywgJ2Jhc2VEYXRlIGlzIG5vdCBhIHZhbGlkIGRhdGUnKTsKICAgICAgICB9CiAgICAgICAgZmllbGRzID0geyB5ZWFyOiAxOTAwLCBtb250aDogMCwgZGF0ZTogMSwgaG91cnM6IDAsIG1pbnV0ZXM6IDAsIHNlY29uZHM6IDAsIG1pbGxpc2Vjb25kczogMCB9OwogICAgICB9CgogICAgICBmb3IgKHZhciBpID0gMSwgbiA9IHJlc3VsdHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgdmFyIG1hcHBlciA9IG1hcFtpIC0gMV07CiAgICAgICAgaWYgKG1hcHBlci5tYXRjaGVyID09PSAnWicpIHsKICAgICAgICAgIHR6T2Zmc2V0ID0gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIGlmIChtYXBwZXIuYXBwbHkpIHsKICAgICAgICAgIG1hcHBlci5hcHBseS5jYWxsKGZpZWxkcywgcmVzdWx0c1tpXSk7CiAgICAgICAgfQogICAgICB9CgogICAgICB2YXIgZGF0ZXNldHRlciA9IHR6T2Zmc2V0ID8gRGF0ZS5wcm90b3R5cGUuc2V0VVRDRnVsbFllYXIgOgogICAgICAgIERhdGUucHJvdG90eXBlLnNldEZ1bGxZZWFyOwogICAgICB2YXIgdGltZXNldHRlciA9IHR6T2Zmc2V0ID8gRGF0ZS5wcm90b3R5cGUuc2V0VVRDSG91cnMgOgogICAgICAgIERhdGUucHJvdG90eXBlLnNldEhvdXJzOwoKICAgICAgaWYgKGlzVmFsaWQoZmllbGRzLnllYXIsIGZpZWxkcy5tb250aCwgZmllbGRzLmRhdGUpKSB7CiAgICAgICAgaWYgKGFuZ3VsYXIuaXNEYXRlKGJhc2VEYXRlKSAmJiAhaXNOYU4oYmFzZURhdGUuZ2V0VGltZSgpKSAmJiAhdHpPZmZzZXQpIHsKICAgICAgICAgIGR0ID0gbmV3IERhdGUoYmFzZURhdGUpOwogICAgICAgICAgZGF0ZXNldHRlci5jYWxsKGR0LCBmaWVsZHMueWVhciwgZmllbGRzLm1vbnRoLCBmaWVsZHMuZGF0ZSk7CiAgICAgICAgICB0aW1lc2V0dGVyLmNhbGwoZHQsIGZpZWxkcy5ob3VycywgZmllbGRzLm1pbnV0ZXMsCiAgICAgICAgICAgIGZpZWxkcy5zZWNvbmRzLCBmaWVsZHMubWlsbGlzZWNvbmRzKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZHQgPSBuZXcgRGF0ZSgwKTsKICAgICAgICAgIGRhdGVzZXR0ZXIuY2FsbChkdCwgZmllbGRzLnllYXIsIGZpZWxkcy5tb250aCwgZmllbGRzLmRhdGUpOwogICAgICAgICAgdGltZXNldHRlci5jYWxsKGR0LCBmaWVsZHMuaG91cnMgfHwgMCwgZmllbGRzLm1pbnV0ZXMgfHwgMCwKICAgICAgICAgICAgZmllbGRzLnNlY29uZHMgfHwgMCwgZmllbGRzLm1pbGxpc2Vjb25kcyB8fCAwKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBkdDsKICAgIH0KICB9OwoKICAvLyBDaGVjayBpZiBkYXRlIGlzIHZhbGlkIGZvciBzcGVjaWZpYyBtb250aCAoYW5kIHllYXIgZm9yIEZlYnJ1YXJ5KS4KICAvLyBNb250aDogMCA9IEphbiwgMSA9IEZlYiwgZXRjCiAgZnVuY3Rpb24gaXNWYWxpZCh5ZWFyLCBtb250aCwgZGF0ZSkgewogICAgaWYgKGRhdGUgPCAxKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBpZiAobW9udGggPT09IDEgJiYgZGF0ZSA+IDI4KSB7CiAgICAgIHJldHVybiBkYXRlID09PSAyOSAmJiAoeWVhciAlIDQgPT09IDAgJiYgeWVhciAlIDEwMCAhPT0gMCB8fCB5ZWFyICUgNDAwID09PSAwKTsKICAgIH0KCiAgICBpZiAobW9udGggPT09IDMgfHwgbW9udGggPT09IDUgfHwgbW9udGggPT09IDggfHwgbW9udGggPT09IDEwKSB7CiAgICAgIHJldHVybiBkYXRlIDwgMzE7CiAgICB9CgogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiB0b0ludChzdHIpIHsKICAgIHJldHVybiBwYXJzZUludChzdHIsIDEwKTsKICB9CgogIHRoaXMudG9UaW1lem9uZSA9IHRvVGltZXpvbmU7CiAgdGhpcy5mcm9tVGltZXpvbmUgPSBmcm9tVGltZXpvbmU7CiAgdGhpcy50aW1lem9uZVRvT2Zmc2V0ID0gdGltZXpvbmVUb09mZnNldDsKICB0aGlzLmFkZERhdGVNaW51dGVzID0gYWRkRGF0ZU1pbnV0ZXM7CiAgdGhpcy5jb252ZXJ0VGltZXpvbmVUb0xvY2FsID0gY29udmVydFRpbWV6b25lVG9Mb2NhbDsKCiAgZnVuY3Rpb24gdG9UaW1lem9uZShkYXRlLCB0aW1lem9uZSkgewogICAgcmV0dXJuIGRhdGUgJiYgdGltZXpvbmUgPyBjb252ZXJ0VGltZXpvbmVUb0xvY2FsKGRhdGUsIHRpbWV6b25lKSA6IGRhdGU7CiAgfQoKICBmdW5jdGlvbiBmcm9tVGltZXpvbmUoZGF0ZSwgdGltZXpvbmUpIHsKICAgIHJldHVybiBkYXRlICYmIHRpbWV6b25lID8gY29udmVydFRpbWV6b25lVG9Mb2NhbChkYXRlLCB0aW1lem9uZSwgdHJ1ZSkgOiBkYXRlOwogIH0KCiAgLy9odHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL2Jsb2IvNjIyYzQyMTY5Njk5ZWMwN2ZjNmRhYWExOWZlNmQyMjRlNWQyZjcwZS9zcmMvQW5ndWxhci5qcyNMMTIwNwogIGZ1bmN0aW9uIHRpbWV6b25lVG9PZmZzZXQodGltZXpvbmUsIGZhbGxiYWNrKSB7CiAgICB0aW1lem9uZSA9IHRpbWV6b25lLnJlcGxhY2UoLzovZywgJycpOwogICAgdmFyIHJlcXVlc3RlZFRpbWV6b25lT2Zmc2V0ID0gRGF0ZS5wYXJzZSgnSmFuIDAxLCAxOTcwIDAwOjAwOjAwICcgKyB0aW1lem9uZSkgLyA2MDAwMDsKICAgIHJldHVybiBpc05hTihyZXF1ZXN0ZWRUaW1lem9uZU9mZnNldCkgPyBmYWxsYmFjayA6IHJlcXVlc3RlZFRpbWV6b25lT2Zmc2V0OwogIH0KCiAgZnVuY3Rpb24gYWRkRGF0ZU1pbnV0ZXMoZGF0ZSwgbWludXRlcykgewogICAgZGF0ZSA9IG5ldyBEYXRlKGRhdGUuZ2V0VGltZSgpKTsKICAgIGRhdGUuc2V0TWludXRlcyhkYXRlLmdldE1pbnV0ZXMoKSArIG1pbnV0ZXMpOwogICAgcmV0dXJuIGRhdGU7CiAgfQoKICBmdW5jdGlvbiBjb252ZXJ0VGltZXpvbmVUb0xvY2FsKGRhdGUsIHRpbWV6b25lLCByZXZlcnNlKSB7CiAgICByZXZlcnNlID0gcmV2ZXJzZSA/IC0xIDogMTsKICAgIHZhciBkYXRlVGltZXpvbmVPZmZzZXQgPSBkYXRlLmdldFRpbWV6b25lT2Zmc2V0KCk7CiAgICB2YXIgdGltZXpvbmVPZmZzZXQgPSB0aW1lem9uZVRvT2Zmc2V0KHRpbWV6b25lLCBkYXRlVGltZXpvbmVPZmZzZXQpOwogICAgcmV0dXJuIGFkZERhdGVNaW51dGVzKGRhdGUsIHJldmVyc2UgKiAodGltZXpvbmVPZmZzZXQgLSBkYXRlVGltZXpvbmVPZmZzZXQpKTsKICB9Cn1dKTsKCi8vIEF2b2lkaW5nIHVzZSBvZiBuZy1jbGFzcyBhcyBpdCBjcmVhdGVzIGEgbG90IG9mIHdhdGNoZXJzIHdoZW4gYSBjbGFzcyBpcyB0byBiZSBhcHBsaWVkIHRvCi8vIGF0IG1vc3Qgb25lIGVsZW1lbnQuCmFuZ3VsYXIubW9kdWxlKCd1aS5ib290c3RyYXAuaXNDbGFzcycsIFtdKQouZGlyZWN0aXZlKCd1aWJJc0NsYXNzJywgWwogICAgICAgICAnJGFuaW1hdGUnLApmdW5jdGlvbiAoJGFuaW1hdGUpIHsKICAvLyAgICAgICAgICAgICAgICAgICAgMTExMTExMTEgICAgICAgICAgMjIyMjIyMjIKICB2YXIgT05fUkVHRVhQID0gL15ccyooW1xzXFNdKz8pXHMrb25ccysoW1xzXFNdKz8pXHMqJC87CiAgLy8gICAgICAgICAgICAgICAgICAgIDExMTExMTExICAgICAgICAgICAyMjIyMjIyMgogIHZhciBJU19SRUdFWFAgPSAvXlxzKihbXHNcU10rPylccytmb3JccysoW1xzXFNdKz8pXHMqJC87CgogIHZhciBkYXRhUGVyVHJhY2tlZCA9IHt9OwoKICByZXR1cm4gewogICAgcmVzdHJpY3Q6ICdBJywKICAgIGNvbXBpbGU6IGZ1bmN0aW9uKHRFbGVtZW50LCB0QXR0cnMpIHsKICAgICAgdmFyIGxpbmtlZFNjb3BlcyA9IFtdOwogICAgICB2YXIgaW5zdGFuY2VzID0gW107CiAgICAgIHZhciBleHBUb0RhdGEgPSB7fTsKICAgICAgdmFyIGxhc3RBY3RpdmF0ZWQgPSBudWxsOwogICAgICB2YXIgb25FeHBNYXRjaGVzID0gdEF0dHJzLnVpYklzQ2xhc3MubWF0Y2goT05fUkVHRVhQKTsKICAgICAgdmFyIG9uRXhwID0gb25FeHBNYXRjaGVzWzJdOwogICAgICB2YXIgZXhwc1N0ciA9IG9uRXhwTWF0Y2hlc1sxXTsKICAgICAgdmFyIGV4cHMgPSBleHBzU3RyLnNwbGl0KCcsJyk7CgogICAgICByZXR1cm4gbGlua0ZuOwoKICAgICAgZnVuY3Rpb24gbGlua0ZuKHNjb3BlLCBlbGVtZW50LCBhdHRycykgewogICAgICAgIGxpbmtlZFNjb3Blcy5wdXNoKHNjb3BlKTsKICAgICAgICBpbnN0YW5jZXMucHVzaCh7CiAgICAgICAgICBzY29wZTogc2NvcGUsCiAgICAgICAgICBlbGVtZW50OiBlbGVtZW50CiAgICAgICAgfSk7CgogICAgICAgIGV4cHMuZm9yRWFjaChmdW5jdGlvbihleHAsIGspIHsKICAgICAgICAgIGFkZEZvckV4cChleHAsIHNjb3BlKTsKICAgICAgICB9KTsKCiAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIHJlbW92ZVNjb3BlKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gYWRkRm9yRXhwKGV4cCwgc2NvcGUpIHsKICAgICAgICB2YXIgbWF0Y2hlcyA9IGV4cC5tYXRjaChJU19SRUdFWFApOwogICAgICAgIHZhciBjbGF6eiA9IHNjb3BlLiRldmFsKG1hdGNoZXNbMV0pOwogICAgICAgIHZhciBjb21wYXJlV2l0aEV4cCA9IG1hdGNoZXNbMl07CiAgICAgICAgdmFyIGRhdGEgPSBleHBUb0RhdGFbZXhwXTsKICAgICAgICBpZiAoIWRhdGEpIHsKICAgICAgICAgIHZhciB3YXRjaEZuID0gZnVuY3Rpb24oY29tcGFyZVdpdGhWYWwpIHsKICAgICAgICAgICAgdmFyIG5ld0FjdGl2YXRlZCA9IG51bGw7CiAgICAgICAgICAgIGluc3RhbmNlcy5zb21lKGZ1bmN0aW9uKGluc3RhbmNlKSB7CiAgICAgICAgICAgICAgdmFyIHRoaXNWYWwgPSBpbnN0YW5jZS5zY29wZS4kZXZhbChvbkV4cCk7CiAgICAgICAgICAgICAgaWYgKHRoaXNWYWwgPT09IGNvbXBhcmVXaXRoVmFsKSB7CiAgICAgICAgICAgICAgICBuZXdBY3RpdmF0ZWQgPSBpbnN0YW5jZTsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGlmIChkYXRhLmxhc3RBY3RpdmF0ZWQgIT09IG5ld0FjdGl2YXRlZCkgewogICAgICAgICAgICAgIGlmIChkYXRhLmxhc3RBY3RpdmF0ZWQpIHsKICAgICAgICAgICAgICAgICRhbmltYXRlLnJlbW92ZUNsYXNzKGRhdGEubGFzdEFjdGl2YXRlZC5lbGVtZW50LCBjbGF6eik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChuZXdBY3RpdmF0ZWQpIHsKICAgICAgICAgICAgICAgICRhbmltYXRlLmFkZENsYXNzKG5ld0FjdGl2YXRlZC5lbGVtZW50LCBjbGF6eik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGRhdGEubGFzdEFjdGl2YXRlZCA9IG5ld0FjdGl2YXRlZDsKICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgICAgIGV4cFRvRGF0YVtleHBdID0gZGF0YSA9IHsKICAgICAgICAgICAgbGFzdEFjdGl2YXRlZDogbnVsbCwKICAgICAgICAgICAgc2NvcGU6IHNjb3BlLAogICAgICAgICAgICB3YXRjaEZuOiB3YXRjaEZuLAogICAgICAgICAgICBjb21wYXJlV2l0aEV4cDogY29tcGFyZVdpdGhFeHAsCiAgICAgICAgICAgIHdhdGNoZXI6IHNjb3BlLiR3YXRjaChjb21wYXJlV2l0aEV4cCwgd2F0Y2hGbikKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgIGRhdGEud2F0Y2hGbihzY29wZS4kZXZhbChjb21wYXJlV2l0aEV4cCkpOwogICAgICB9CgogICAgICBmdW5jdGlvbiByZW1vdmVTY29wZShlKSB7CiAgICAgICAgdmFyIHJlbW92ZWRTY29wZSA9IGUudGFyZ2V0U2NvcGU7CiAgICAgICAgdmFyIGluZGV4ID0gbGlua2VkU2NvcGVzLmluZGV4T2YocmVtb3ZlZFNjb3BlKTsKICAgICAgICBsaW5rZWRTY29wZXMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICBpbnN0YW5jZXMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICBpZiAobGlua2VkU2NvcGVzLmxlbmd0aCkgewogICAgICAgICAgdmFyIG5ld1dhdGNoU2NvcGUgPSBsaW5rZWRTY29wZXNbMF07CiAgICAgICAgICBhbmd1bGFyLmZvckVhY2goZXhwVG9EYXRhLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgICAgICAgIGlmIChkYXRhLnNjb3BlID09PSByZW1vdmVkU2NvcGUpIHsKICAgICAgICAgICAgICBkYXRhLndhdGNoZXIgPSBuZXdXYXRjaFNjb3BlLiR3YXRjaChkYXRhLmNvbXBhcmVXaXRoRXhwLCBkYXRhLndhdGNoRm4pOwogICAgICAgICAgICAgIGRhdGEuc2NvcGUgPSBuZXdXYXRjaFNjb3BlOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZXhwVG9EYXRhID0ge307CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKfV0pOwphbmd1bGFyLm1vZHVsZSgndWkuYm9vdHN0cmFwLmRhdGVwaWNrZXInLCBbJ3VpLmJvb3RzdHJhcC5kYXRlcGFyc2VyJywgJ3VpLmJvb3RzdHJhcC5pc0NsYXNzJ10pCgoudmFsdWUoJyRkYXRlcGlja2VyU3VwcHJlc3NFcnJvcicsIGZhbHNlKQoKLnZhbHVlKCckZGF0ZXBpY2tlckxpdGVyYWxXYXJuaW5nJywgdHJ1ZSkKCi5jb25zdGFudCgndWliRGF0ZXBpY2tlckNvbmZpZycsIHsKICBkYXRlcGlja2VyTW9kZTogJ2RheScsCiAgZm9ybWF0RGF5OiAnZGQnLAogIGZvcm1hdE1vbnRoOiAnTU1NTScsCiAgZm9ybWF0WWVhcjogJ3l5eXknLAogIGZvcm1hdERheUhlYWRlcjogJ0VFRScsCiAgZm9ybWF0RGF5VGl0bGU6ICdNTU1NIHl5eXknLAogIGZvcm1hdE1vbnRoVGl0bGU6ICd5eXl5JywKICBtYXhEYXRlOiBudWxsLAogIG1heE1vZGU6ICd5ZWFyJywKICBtaW5EYXRlOiBudWxsLAogIG1pbk1vZGU6ICdkYXknLAogIG1vbnRoQ29sdW1uczogMywKICBuZ01vZGVsT3B0aW9uczoge30sCiAgc2hvcnRjdXRQcm9wYWdhdGlvbjogZmFsc2UsCiAgc2hvd1dlZWtzOiB0cnVlLAogIHllYXJDb2x1bW5zOiA1LAogIHllYXJSb3dzOiA0Cn0pCgouY29udHJvbGxlcignVWliRGF0ZXBpY2tlckNvbnRyb2xsZXInLCBbJyRzY29wZScsICckZWxlbWVudCcsICckYXR0cnMnLCAnJHBhcnNlJywgJyRpbnRlcnBvbGF0ZScsICckbG9jYWxlJywgJyRsb2cnLCAnZGF0ZUZpbHRlcicsICd1aWJEYXRlcGlja2VyQ29uZmlnJywgJyRkYXRlcGlja2VyTGl0ZXJhbFdhcm5pbmcnLCAnJGRhdGVwaWNrZXJTdXBwcmVzc0Vycm9yJywgJ3VpYkRhdGVQYXJzZXInLAogIGZ1bmN0aW9uKCRzY29wZSwgJGVsZW1lbnQsICRhdHRycywgJHBhcnNlLCAkaW50ZXJwb2xhdGUsICRsb2NhbGUsICRsb2csIGRhdGVGaWx0ZXIsIGRhdGVwaWNrZXJDb25maWcsICRkYXRlcGlja2VyTGl0ZXJhbFdhcm5pbmcsICRkYXRlcGlja2VyU3VwcHJlc3NFcnJvciwgZGF0ZVBhcnNlcikgewogIHZhciBzZWxmID0gdGhpcywKICAgICAgbmdNb2RlbEN0cmwgPSB7ICRzZXRWaWV3VmFsdWU6IGFuZ3VsYXIubm9vcCB9LCAvLyBudWxsTW9kZWxDdHJsOwogICAgICBuZ01vZGVsT3B0aW9ucyA9IHt9LAogICAgICB3YXRjaExpc3RlbmVycyA9IFtdOwoKICAkZWxlbWVudC5hZGRDbGFzcygndWliLWRhdGVwaWNrZXInKTsKICAkYXR0cnMuJHNldCgncm9sZScsICdhcHBsaWNhdGlvbicpOwoKICBpZiAoISRzY29wZS5kYXRlcGlja2VyT3B0aW9ucykgewogICAgJHNjb3BlLmRhdGVwaWNrZXJPcHRpb25zID0ge307CiAgfQoKICAvLyBNb2RlcyBjaGFpbgogIHRoaXMubW9kZXMgPSBbJ2RheScsICdtb250aCcsICd5ZWFyJ107CgogIFsKICAgICdjdXN0b21DbGFzcycsCiAgICAnZGF0ZURpc2FibGVkJywKICAgICdkYXRlcGlja2VyTW9kZScsCiAgICAnZm9ybWF0RGF5JywKICAgICdmb3JtYXREYXlIZWFkZXInLAogICAgJ2Zvcm1hdERheVRpdGxlJywKICAgICdmb3JtYXRNb250aCcsCiAgICAnZm9ybWF0TW9udGhUaXRsZScsCiAgICAnZm9ybWF0WWVhcicsCiAgICAnbWF4RGF0ZScsCiAgICAnbWF4TW9kZScsCiAgICAnbWluRGF0ZScsCiAgICAnbWluTW9kZScsCiAgICAnbW9udGhDb2x1bW5zJywKICAgICdzaG93V2Vla3MnLAogICAgJ3Nob3J0Y3V0UHJvcGFnYXRpb24nLAogICAgJ3N0YXJ0aW5nRGF5JywKICAgICd5ZWFyQ29sdW1ucycsCiAgICAneWVhclJvd3MnCiAgXS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkgewogICAgc3dpdGNoIChrZXkpIHsKICAgICAgY2FzZSAnY3VzdG9tQ2xhc3MnOgogICAgICBjYXNlICdkYXRlRGlzYWJsZWQnOgogICAgICAgICRzY29wZVtrZXldID0gJHNjb3BlLmRhdGVwaWNrZXJPcHRpb25zW2tleV0gfHwgYW5ndWxhci5ub29wOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdkYXRlcGlja2VyTW9kZSc6CiAgICAgICAgJHNjb3BlLmRhdGVwaWNrZXJNb2RlID0gYW5ndWxhci5pc0RlZmluZWQoJHNjb3BlLmRhdGVwaWNrZXJPcHRpb25zLmRhdGVwaWNrZXJNb2RlKSA/CiAgICAgICAgICAkc2NvcGUuZGF0ZXBpY2tlck9wdGlvbnMuZGF0ZXBpY2tlck1vZGUgOiBkYXRlcGlja2VyQ29uZmlnLmRhdGVwaWNrZXJNb2RlOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdmb3JtYXREYXknOgogICAgICBjYXNlICdmb3JtYXREYXlIZWFkZXInOgogICAgICBjYXNlICdmb3JtYXREYXlUaXRsZSc6CiAgICAgIGNhc2UgJ2Zvcm1hdE1vbnRoJzoKICAgICAgY2FzZSAnZm9ybWF0TW9udGhUaXRsZSc6CiAgICAgIGNhc2UgJ2Zvcm1hdFllYXInOgogICAgICAgIHNlbGZba2V5XSA9IGFuZ3VsYXIuaXNEZWZpbmVkKCRzY29wZS5kYXRlcGlja2VyT3B0aW9uc1trZXldKSA/CiAgICAgICAgICAkaW50ZXJwb2xhdGUoJHNjb3BlLmRhdGVwaWNrZXJPcHRpb25zW2tleV0pKCRzY29wZS4kcGFyZW50KSA6CiAgICAgICAgICBkYXRlcGlja2VyQ29uZmlnW2tleV07CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ21vbnRoQ29sdW1ucyc6CiAgICAgIGNhc2UgJ3Nob3dXZWVrcyc6CiAgICAgIGNhc2UgJ3Nob3J0Y3V0UHJvcGFnYXRpb24nOgogICAgICBjYXNlICd5ZWFyQ29sdW1ucyc6CiAgICAgIGNhc2UgJ3llYXJSb3dzJzoKICAgICAgICBzZWxmW2tleV0gPSBhbmd1bGFyLmlzRGVmaW5lZCgkc2NvcGUuZGF0ZXBpY2tlck9wdGlvbnNba2V5XSkgPwogICAgICAgICAgJHNjb3BlLmRhdGVwaWNrZXJPcHRpb25zW2tleV0gOiBkYXRlcGlja2VyQ29uZmlnW2tleV07CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3N0YXJ0aW5nRGF5JzoKICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoJHNjb3BlLmRhdGVwaWNrZXJPcHRpb25zLnN0YXJ0aW5nRGF5KSkgewogICAgICAgICAgc2VsZi5zdGFydGluZ0RheSA9ICRzY29wZS5kYXRlcGlja2VyT3B0aW9ucy5zdGFydGluZ0RheTsKICAgICAgICB9IGVsc2UgaWYgKGFuZ3VsYXIuaXNOdW1iZXIoZGF0ZXBpY2tlckNvbmZpZy5zdGFydGluZ0RheSkpIHsKICAgICAgICAgIHNlbGYuc3RhcnRpbmdEYXkgPSBkYXRlcGlja2VyQ29uZmlnLnN0YXJ0aW5nRGF5OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzZWxmLnN0YXJ0aW5nRGF5ID0gKCRsb2NhbGUuREFURVRJTUVfRk9STUFUUy5GSVJTVERBWU9GV0VFSyArIDgpICUgNzsKICAgICAgICB9CgogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdtYXhEYXRlJzoKICAgICAgY2FzZSAnbWluRGF0ZSc6CiAgICAgICAgJHNjb3BlLiR3YXRjaCgnZGF0ZXBpY2tlck9wdGlvbnMuJyArIGtleSwgZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICAgIGlmICh2YWx1ZSkgewogICAgICAgICAgICBpZiAoYW5ndWxhci5pc0RhdGUodmFsdWUpKSB7CiAgICAgICAgICAgICAgc2VsZltrZXldID0gZGF0ZVBhcnNlci5mcm9tVGltZXpvbmUobmV3IERhdGUodmFsdWUpLCBuZ01vZGVsT3B0aW9ucy50aW1lem9uZSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgaWYgKCRkYXRlcGlja2VyTGl0ZXJhbFdhcm5pbmcpIHsKICAgICAgICAgICAgICAgICRsb2cud2FybignTGl0ZXJhbCBkYXRlIHN1cHBvcnQgaGFzIGJlZW4gZGVwcmVjYXRlZCwgcGxlYXNlIHN3aXRjaCB0byBkYXRlIG9iamVjdCB1c2FnZScpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgc2VsZltrZXldID0gbmV3IERhdGUoZGF0ZUZpbHRlcih2YWx1ZSwgJ21lZGl1bScpKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc2VsZltrZXldID0gZGF0ZXBpY2tlckNvbmZpZ1trZXldID8KICAgICAgICAgICAgICBkYXRlUGFyc2VyLmZyb21UaW1lem9uZShuZXcgRGF0ZShkYXRlcGlja2VyQ29uZmlnW2tleV0pLCBuZ01vZGVsT3B0aW9ucy50aW1lem9uZSkgOgogICAgICAgICAgICAgIG51bGw7CiAgICAgICAgICB9CgogICAgICAgICAgc2VsZi5yZWZyZXNoVmlldygpOwogICAgICAgIH0pOwoKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnbWF4TW9kZSc6CiAgICAgIGNhc2UgJ21pbk1vZGUnOgogICAgICAgIGlmICgkc2NvcGUuZGF0ZXBpY2tlck9wdGlvbnNba2V5XSkgewogICAgICAgICAgJHNjb3BlLiR3YXRjaChmdW5jdGlvbigpIHsgcmV0dXJuICRzY29wZS5kYXRlcGlja2VyT3B0aW9uc1trZXldOyB9LCBmdW5jdGlvbih2YWx1ZSkgewogICAgICAgICAgICBzZWxmW2tleV0gPSAkc2NvcGVba2V5XSA9IGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSA/IHZhbHVlIDogJHNjb3BlLmRhdGVwaWNrZXJPcHRpb25zW2tleV07CiAgICAgICAgICAgIGlmIChrZXkgPT09ICdtaW5Nb2RlJyAmJiBzZWxmLm1vZGVzLmluZGV4T2YoJHNjb3BlLmRhdGVwaWNrZXJPcHRpb25zLmRhdGVwaWNrZXJNb2RlKSA8IHNlbGYubW9kZXMuaW5kZXhPZihzZWxmW2tleV0pIHx8CiAgICAgICAgICAgICAga2V5ID09PSAnbWF4TW9kZScgJiYgc2VsZi5tb2Rlcy5pbmRleE9mKCRzY29wZS5kYXRlcGlja2VyT3B0aW9ucy5kYXRlcGlja2VyTW9kZSkgPiBzZWxmLm1vZGVzLmluZGV4T2Yoc2VsZltrZXldKSkgewogICAgICAgICAgICAgICRzY29wZS5kYXRlcGlja2VyTW9kZSA9IHNlbGZba2V5XTsKICAgICAgICAgICAgICAkc2NvcGUuZGF0ZXBpY2tlck9wdGlvbnMuZGF0ZXBpY2tlck1vZGUgPSBzZWxmW2tleV07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzZWxmW2tleV0gPSAkc2NvcGVba2V5XSA9IGRhdGVwaWNrZXJDb25maWdba2V5XSB8fCBudWxsOwogICAgICAgIH0KCiAgICAgICAgYnJlYWs7CiAgICB9CiAgfSk7CgogICRzY29wZS51bmlxdWVJZCA9ICdkYXRlcGlja2VyLScgKyAkc2NvcGUuJGlkICsgJy0nICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDApOwoKICAkc2NvcGUuZGlzYWJsZWQgPSBhbmd1bGFyLmlzRGVmaW5lZCgkYXR0cnMuZGlzYWJsZWQpIHx8IGZhbHNlOwogIGlmIChhbmd1bGFyLmlzRGVmaW5lZCgkYXR0cnMubmdEaXNhYmxlZCkpIHsKICAgIHdhdGNoTGlzdGVuZXJzLnB1c2goJHNjb3BlLiRwYXJlbnQuJHdhdGNoKCRhdHRycy5uZ0Rpc2FibGVkLCBmdW5jdGlvbihkaXNhYmxlZCkgewogICAgICAkc2NvcGUuZGlzYWJsZWQgPSBkaXNhYmxlZDsKICAgICAgc2VsZi5yZWZyZXNoVmlldygpOwogICAgfSkpOwogIH0KCiAgJHNjb3BlLmlzQWN0aXZlID0gZnVuY3Rpb24oZGF0ZU9iamVjdCkgewogICAgaWYgKHNlbGYuY29tcGFyZShkYXRlT2JqZWN0LmRhdGUsIHNlbGYuYWN0aXZlRGF0ZSkgPT09IDApIHsKICAgICAgJHNjb3BlLmFjdGl2ZURhdGVJZCA9IGRhdGVPYmplY3QudWlkOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIHJldHVybiBmYWxzZTsKICB9OwoKICB0aGlzLmluaXQgPSBmdW5jdGlvbihuZ01vZGVsQ3RybF8pIHsKICAgIG5nTW9kZWxDdHJsID0gbmdNb2RlbEN0cmxfOwogICAgbmdNb2RlbE9wdGlvbnMgPSBuZ01vZGVsQ3RybF8uJG9wdGlvbnMgfHwKICAgICAgJHNjb3BlLmRhdGVwaWNrZXJPcHRpb25zLm5nTW9kZWxPcHRpb25zIHx8CiAgICAgIGRhdGVwaWNrZXJDb25maWcubmdNb2RlbE9wdGlvbnM7CiAgICBpZiAoJHNjb3BlLmRhdGVwaWNrZXJPcHRpb25zLmluaXREYXRlKSB7CiAgICAgIHNlbGYuYWN0aXZlRGF0ZSA9IGRhdGVQYXJzZXIuZnJvbVRpbWV6b25lKCRzY29wZS5kYXRlcGlja2VyT3B0aW9ucy5pbml0RGF0ZSwgbmdNb2RlbE9wdGlvbnMudGltZXpvbmUpIHx8IG5ldyBEYXRlKCk7CiAgICAgICRzY29wZS4kd2F0Y2goJ2RhdGVwaWNrZXJPcHRpb25zLmluaXREYXRlJywgZnVuY3Rpb24oaW5pdERhdGUpIHsKICAgICAgICBpZiAoaW5pdERhdGUgJiYgKG5nTW9kZWxDdHJsLiRpc0VtcHR5KG5nTW9kZWxDdHJsLiRtb2RlbFZhbHVlKSB8fCBuZ01vZGVsQ3RybC4kaW52YWxpZCkpIHsKICAgICAgICAgIHNlbGYuYWN0aXZlRGF0ZSA9IGRhdGVQYXJzZXIuZnJvbVRpbWV6b25lKGluaXREYXRlLCBuZ01vZGVsT3B0aW9ucy50aW1lem9uZSk7CiAgICAgICAgICBzZWxmLnJlZnJlc2hWaWV3KCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIHNlbGYuYWN0aXZlRGF0ZSA9IG5ldyBEYXRlKCk7CiAgICB9CgogICAgdmFyIGRhdGUgPSBuZ01vZGVsQ3RybC4kbW9kZWxWYWx1ZSA/IG5ldyBEYXRlKG5nTW9kZWxDdHJsLiRtb2RlbFZhbHVlKSA6IG5ldyBEYXRlKCk7CiAgICB0aGlzLmFjdGl2ZURhdGUgPSAhaXNOYU4oZGF0ZSkgPwogICAgICBkYXRlUGFyc2VyLmZyb21UaW1lem9uZShkYXRlLCBuZ01vZGVsT3B0aW9ucy50aW1lem9uZSkgOgogICAgICBkYXRlUGFyc2VyLmZyb21UaW1lem9uZShuZXcgRGF0ZSgpLCBuZ01vZGVsT3B0aW9ucy50aW1lem9uZSk7CgogICAgbmdNb2RlbEN0cmwuJHJlbmRlciA9IGZ1bmN0aW9uKCkgewogICAgICBzZWxmLnJlbmRlcigpOwogICAgfTsKICB9OwoKICB0aGlzLnJlbmRlciA9IGZ1bmN0aW9uKCkgewogICAgaWYgKG5nTW9kZWxDdHJsLiR2aWV3VmFsdWUpIHsKICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShuZ01vZGVsQ3RybC4kdmlld1ZhbHVlKSwKICAgICAgICAgIGlzVmFsaWQgPSAhaXNOYU4oZGF0ZSk7CgogICAgICBpZiAoaXNWYWxpZCkgewogICAgICAgIHRoaXMuYWN0aXZlRGF0ZSA9IGRhdGVQYXJzZXIuZnJvbVRpbWV6b25lKGRhdGUsIG5nTW9kZWxPcHRpb25zLnRpbWV6b25lKTsKICAgICAgfSBlbHNlIGlmICghJGRhdGVwaWNrZXJTdXBwcmVzc0Vycm9yKSB7CiAgICAgICAgJGxvZy5lcnJvcignRGF0ZXBpY2tlciBkaXJlY3RpdmU6ICJuZy1tb2RlbCIgdmFsdWUgbXVzdCBiZSBhIERhdGUgb2JqZWN0Jyk7CiAgICAgIH0KICAgIH0KICAgIHRoaXMucmVmcmVzaFZpZXcoKTsKICB9OwoKICB0aGlzLnJlZnJlc2hWaWV3ID0gZnVuY3Rpb24oKSB7CiAgICBpZiAodGhpcy5lbGVtZW50KSB7CiAgICAgICRzY29wZS5zZWxlY3RlZER0ID0gbnVsbDsKICAgICAgdGhpcy5fcmVmcmVzaFZpZXcoKTsKICAgICAgaWYgKCRzY29wZS5hY3RpdmVEdCkgewogICAgICAgICRzY29wZS5hY3RpdmVEYXRlSWQgPSAkc2NvcGUuYWN0aXZlRHQudWlkOwogICAgICB9CgogICAgICB2YXIgZGF0ZSA9IG5nTW9kZWxDdHJsLiR2aWV3VmFsdWUgPyBuZXcgRGF0ZShuZ01vZGVsQ3RybC4kdmlld1ZhbHVlKSA6IG51bGw7CiAgICAgIGRhdGUgPSBkYXRlUGFyc2VyLmZyb21UaW1lem9uZShkYXRlLCBuZ01vZGVsT3B0aW9ucy50aW1lem9uZSk7CiAgICAgIG5nTW9kZWxDdHJsLiRzZXRWYWxpZGl0eSgnZGF0ZURpc2FibGVkJywgIWRhdGUgfHwKICAgICAgICB0aGlzLmVsZW1lbnQgJiYgIXRoaXMuaXNEaXNhYmxlZChkYXRlKSk7CiAgICB9CiAgfTsKCiAgdGhpcy5jcmVhdGVEYXRlT2JqZWN0ID0gZnVuY3Rpb24oZGF0ZSwgZm9ybWF0KSB7CiAgICB2YXIgbW9kZWwgPSBuZ01vZGVsQ3RybC4kdmlld1ZhbHVlID8gbmV3IERhdGUobmdNb2RlbEN0cmwuJHZpZXdWYWx1ZSkgOiBudWxsOwogICAgbW9kZWwgPSBkYXRlUGFyc2VyLmZyb21UaW1lem9uZShtb2RlbCwgbmdNb2RlbE9wdGlvbnMudGltZXpvbmUpOwogICAgdmFyIHRvZGF5ID0gbmV3IERhdGUoKTsKICAgIHRvZGF5ID0gZGF0ZVBhcnNlci5mcm9tVGltZXpvbmUodG9kYXksIG5nTW9kZWxPcHRpb25zLnRpbWV6b25lKTsKICAgIHZhciB0aW1lID0gdGhpcy5jb21wYXJlKGRhdGUsIHRvZGF5KTsKICAgIHZhciBkdCA9IHsKICAgICAgZGF0ZTogZGF0ZSwKICAgICAgbGFiZWw6IGRhdGVQYXJzZXIuZmlsdGVyKGRhdGUsIGZvcm1hdCksCiAgICAgIHNlbGVjdGVkOiBtb2RlbCAmJiB0aGlzLmNvbXBhcmUoZGF0ZSwgbW9kZWwpID09PSAwLAogICAgICBkaXNhYmxlZDogdGhpcy5pc0Rpc2FibGVkKGRhdGUpLAogICAgICBwYXN0OiB0aW1lIDwgMCwKICAgICAgY3VycmVudDogdGltZSA9PT0gMCwKICAgICAgZnV0dXJlOiB0aW1lID4gMCwKICAgICAgY3VzdG9tQ2xhc3M6IHRoaXMuY3VzdG9tQ2xhc3MoZGF0ZSkgfHwgbnVsbAogICAgfTsKCiAgICBpZiAobW9kZWwgJiYgdGhpcy5jb21wYXJlKGRhdGUsIG1vZGVsKSA9PT0gMCkgewogICAgICAkc2NvcGUuc2VsZWN0ZWREdCA9IGR0OwogICAgfQoKICAgIGlmIChzZWxmLmFjdGl2ZURhdGUgJiYgdGhpcy5jb21wYXJlKGR0LmRhdGUsIHNlbGYuYWN0aXZlRGF0ZSkgPT09IDApIHsKICAgICAgJHNjb3BlLmFjdGl2ZUR0ID0gZHQ7CiAgICB9CgogICAgcmV0dXJuIGR0OwogIH07CgogIHRoaXMuaXNEaXNhYmxlZCA9IGZ1bmN0aW9uKGRhdGUpIHsKICAgIHJldHVybiAkc2NvcGUuZGlzYWJsZWQgfHwKICAgICAgdGhpcy5taW5EYXRlICYmIHRoaXMuY29tcGFyZShkYXRlLCB0aGlzLm1pbkRhdGUpIDwgMCB8fAogICAgICB0aGlzLm1heERhdGUgJiYgdGhpcy5jb21wYXJlKGRhdGUsIHRoaXMubWF4RGF0ZSkgPiAwIHx8CiAgICAgICRzY29wZS5kYXRlRGlzYWJsZWQgJiYgJHNjb3BlLmRhdGVEaXNhYmxlZCh7ZGF0ZTogZGF0ZSwgbW9kZTogJHNjb3BlLmRhdGVwaWNrZXJNb2RlfSk7CiAgfTsKCiAgdGhpcy5jdXN0b21DbGFzcyA9IGZ1bmN0aW9uKGRhdGUpIHsKICAgIHJldHVybiAkc2NvcGUuY3VzdG9tQ2xhc3Moe2RhdGU6IGRhdGUsIG1vZGU6ICRzY29wZS5kYXRlcGlja2VyTW9kZX0pOwogIH07CgogIC8vIFNwbGl0IGFycmF5IGludG8gc21hbGxlciBhcnJheXMKICB0aGlzLnNwbGl0ID0gZnVuY3Rpb24oYXJyLCBzaXplKSB7CiAgICB2YXIgYXJyYXlzID0gW107CiAgICB3aGlsZSAoYXJyLmxlbmd0aCA+IDApIHsKICAgICAgYXJyYXlzLnB1c2goYXJyLnNwbGljZSgwLCBzaXplKSk7CiAgICB9CiAgICByZXR1cm4gYXJyYXlzOwogIH07CgogICRzY29wZS5zZWxlY3QgPSBmdW5jdGlvbihkYXRlKSB7CiAgICBpZiAoJHNjb3BlLmRhdGVwaWNrZXJNb2RlID09PSBzZWxmLm1pbk1vZGUpIHsKICAgICAgdmFyIGR0ID0gbmdNb2RlbEN0cmwuJHZpZXdWYWx1ZSA/IGRhdGVQYXJzZXIuZnJvbVRpbWV6b25lKG5ldyBEYXRlKG5nTW9kZWxDdHJsLiR2aWV3VmFsdWUpLCBuZ01vZGVsT3B0aW9ucy50aW1lem9uZSkgOiBuZXcgRGF0ZSgwLCAwLCAwLCAwLCAwLCAwLCAwKTsKICAgICAgZHQuc2V0RnVsbFllYXIoZGF0ZS5nZXRGdWxsWWVhcigpLCBkYXRlLmdldE1vbnRoKCksIGRhdGUuZ2V0RGF0ZSgpKTsKICAgICAgZHQgPSBkYXRlUGFyc2VyLnRvVGltZXpvbmUoZHQsIG5nTW9kZWxPcHRpb25zLnRpbWV6b25lKTsKICAgICAgbmdNb2RlbEN0cmwuJHNldFZpZXdWYWx1ZShkdCk7CiAgICAgIG5nTW9kZWxDdHJsLiRyZW5kZXIoKTsKICAgIH0gZWxzZSB7CiAgICAgIHNlbGYuYWN0aXZlRGF0ZSA9IGRhdGU7CiAgICAgIHNldE1vZGUoc2VsZi5tb2Rlc1tzZWxmLm1vZGVzLmluZGV4T2YoJHNjb3BlLmRhdGVwaWNrZXJNb2RlKSAtIDFdKTsKCiAgICAgICRzY29wZS4kZW1pdCgndWliOmRhdGVwaWNrZXIubW9kZScpOwogICAgfQoKICAgICRzY29wZS4kYnJvYWRjYXN0KCd1aWI6ZGF0ZXBpY2tlci5mb2N1cycpOwogIH07CgogICRzY29wZS5tb3ZlID0gZnVuY3Rpb24oZGlyZWN0aW9uKSB7CiAgICB2YXIgeWVhciA9IHNlbGYuYWN0aXZlRGF0ZS5nZXRGdWxsWWVhcigpICsgZGlyZWN0aW9uICogKHNlbGYuc3RlcC55ZWFycyB8fCAwKSwKICAgICAgICBtb250aCA9IHNlbGYuYWN0aXZlRGF0ZS5nZXRNb250aCgpICsgZGlyZWN0aW9uICogKHNlbGYuc3RlcC5tb250aHMgfHwgMCk7CiAgICBzZWxmLmFjdGl2ZURhdGUuc2V0RnVsbFllYXIoeWVhciwgbW9udGgsIDEpOwogICAgc2VsZi5yZWZyZXNoVmlldygpOwogIH07CgogICRzY29wZS50b2dnbGVNb2RlID0gZnVuY3Rpb24oZGlyZWN0aW9uKSB7CiAgICBkaXJlY3Rpb24gPSBkaXJlY3Rpb24gfHwgMTsKCiAgICBpZiAoJHNjb3BlLmRhdGVwaWNrZXJNb2RlID09PSBzZWxmLm1heE1vZGUgJiYgZGlyZWN0aW9uID09PSAxIHx8CiAgICAgICRzY29wZS5kYXRlcGlja2VyTW9kZSA9PT0gc2VsZi5taW5Nb2RlICYmIGRpcmVjdGlvbiA9PT0gLTEpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHNldE1vZGUoc2VsZi5tb2Rlc1tzZWxmLm1vZGVzLmluZGV4T2YoJHNjb3BlLmRhdGVwaWNrZXJNb2RlKSArIGRpcmVjdGlvbl0pOwoKICAgICRzY29wZS4kZW1pdCgndWliOmRhdGVwaWNrZXIubW9kZScpOwogIH07CgogIC8vIEtleSBldmVudCBtYXBwZXIKICAkc2NvcGUua2V5cyA9IHsgMTM6ICdlbnRlcicsIDMyOiAnc3BhY2UnLCAzMzogJ3BhZ2V1cCcsIDM0OiAncGFnZWRvd24nLCAzNTogJ2VuZCcsIDM2OiAnaG9tZScsIDM3OiAnbGVmdCcsIDM4OiAndXAnLCAzOTogJ3JpZ2h0JywgNDA6ICdkb3duJyB9OwoKICB2YXIgZm9jdXNFbGVtZW50ID0gZnVuY3Rpb24oKSB7CiAgICBzZWxmLmVsZW1lbnRbMF0uZm9jdXMoKTsKICB9OwoKICAvLyBMaXN0ZW4gZm9yIGZvY3VzIHJlcXVlc3RzIGZyb20gcG9wdXAgZGlyZWN0aXZlCiAgJHNjb3BlLiRvbigndWliOmRhdGVwaWNrZXIuZm9jdXMnLCBmb2N1c0VsZW1lbnQpOwoKICAkc2NvcGUua2V5ZG93biA9IGZ1bmN0aW9uKGV2dCkgewogICAgdmFyIGtleSA9ICRzY29wZS5rZXlzW2V2dC53aGljaF07CgogICAgaWYgKCFrZXkgfHwgZXZ0LnNoaWZ0S2V5IHx8IGV2dC5hbHRLZXkgfHwgJHNjb3BlLmRpc2FibGVkKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBldnQucHJldmVudERlZmF1bHQoKTsKICAgIGlmICghc2VsZi5zaG9ydGN1dFByb3BhZ2F0aW9uKSB7CiAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTsKICAgIH0KCiAgICBpZiAoa2V5ID09PSAnZW50ZXInIHx8IGtleSA9PT0gJ3NwYWNlJykgewogICAgICBpZiAoc2VsZi5pc0Rpc2FibGVkKHNlbGYuYWN0aXZlRGF0ZSkpIHsKICAgICAgICByZXR1cm47IC8vIGRvIG5vdGhpbmcKICAgICAgfQogICAgICAkc2NvcGUuc2VsZWN0KHNlbGYuYWN0aXZlRGF0ZSk7CiAgICB9IGVsc2UgaWYgKGV2dC5jdHJsS2V5ICYmIChrZXkgPT09ICd1cCcgfHwga2V5ID09PSAnZG93bicpKSB7CiAgICAgICRzY29wZS50b2dnbGVNb2RlKGtleSA9PT0gJ3VwJyA/IDEgOiAtMSk7CiAgICB9IGVsc2UgewogICAgICBzZWxmLmhhbmRsZUtleURvd24oa2V5LCBldnQpOwogICAgICBzZWxmLnJlZnJlc2hWaWV3KCk7CiAgICB9CiAgfTsKCiAgJGVsZW1lbnQub24oJ2tleWRvd24nLCBmdW5jdGlvbihldnQpIHsKICAgICRzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7CiAgICAgICRzY29wZS5rZXlkb3duKGV2dCk7CiAgICB9KTsKICB9KTsKCiAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHsKICAgIC8vQ2xlYXIgYWxsIHdhdGNoIGxpc3RlbmVycyBvbiBkZXN0cm95CiAgICB3aGlsZSAod2F0Y2hMaXN0ZW5lcnMubGVuZ3RoKSB7CiAgICAgIHdhdGNoTGlzdGVuZXJzLnNoaWZ0KCkoKTsKICAgIH0KICB9KTsKCiAgZnVuY3Rpb24gc2V0TW9kZShtb2RlKSB7CiAgICAkc2NvcGUuZGF0ZXBpY2tlck1vZGUgPSBtb2RlOwogICAgJHNjb3BlLmRhdGVwaWNrZXJPcHRpb25zLmRhdGVwaWNrZXJNb2RlID0gbW9kZTsKICB9Cn1dKQoKLmNvbnRyb2xsZXIoJ1VpYkRheXBpY2tlckNvbnRyb2xsZXInLCBbJyRzY29wZScsICckZWxlbWVudCcsICdkYXRlRmlsdGVyJywgZnVuY3Rpb24oc2NvcGUsICRlbGVtZW50LCBkYXRlRmlsdGVyKSB7CiAgdmFyIERBWVNfSU5fTU9OVEggPSBbMzEsIDI4LCAzMSwgMzAsIDMxLCAzMCwgMzEsIDMxLCAzMCwgMzEsIDMwLCAzMV07CgogIHRoaXMuc3RlcCA9IHsgbW9udGhzOiAxIH07CiAgdGhpcy5lbGVtZW50ID0gJGVsZW1lbnQ7CiAgZnVuY3Rpb24gZ2V0RGF5c0luTW9udGgoeWVhciwgbW9udGgpIHsKICAgIHJldHVybiBtb250aCA9PT0gMSAmJiB5ZWFyICUgNCA9PT0gMCAmJgogICAgICAoeWVhciAlIDEwMCAhPT0gMCB8fCB5ZWFyICUgNDAwID09PSAwKSA/IDI5IDogREFZU19JTl9NT05USFttb250aF07CiAgfQoKICB0aGlzLmluaXQgPSBmdW5jdGlvbihjdHJsKSB7CiAgICBhbmd1bGFyLmV4dGVuZChjdHJsLCB0aGlzKTsKICAgIHNjb3BlLnNob3dXZWVrcyA9IGN0cmwuc2hvd1dlZWtzOwogICAgY3RybC5yZWZyZXNoVmlldygpOwogIH07CgogIHRoaXMuZ2V0RGF0ZXMgPSBmdW5jdGlvbihzdGFydERhdGUsIG4pIHsKICAgIHZhciBkYXRlcyA9IG5ldyBBcnJheShuKSwgY3VycmVudCA9IG5ldyBEYXRlKHN0YXJ0RGF0ZSksIGkgPSAwLCBkYXRlOwogICAgd2hpbGUgKGkgPCBuKSB7CiAgICAgIGRhdGUgPSBuZXcgRGF0ZShjdXJyZW50KTsKICAgICAgZGF0ZXNbaSsrXSA9IGRhdGU7CiAgICAgIGN1cnJlbnQuc2V0RGF0ZShjdXJyZW50LmdldERhdGUoKSArIDEpOwogICAgfQogICAgcmV0dXJuIGRhdGVzOwogIH07CgogIHRoaXMuX3JlZnJlc2hWaWV3ID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgeWVhciA9IHRoaXMuYWN0aXZlRGF0ZS5nZXRGdWxsWWVhcigpLAogICAgICBtb250aCA9IHRoaXMuYWN0aXZlRGF0ZS5nZXRNb250aCgpLAogICAgICBmaXJzdERheU9mTW9udGggPSBuZXcgRGF0ZSh0aGlzLmFjdGl2ZURhdGUpOwoKICAgIGZpcnN0RGF5T2ZNb250aC5zZXRGdWxsWWVhcih5ZWFyLCBtb250aCwgMSk7CgogICAgdmFyIGRpZmZlcmVuY2UgPSB0aGlzLnN0YXJ0aW5nRGF5IC0gZmlyc3REYXlPZk1vbnRoLmdldERheSgpLAogICAgICBudW1EaXNwbGF5ZWRGcm9tUHJldmlvdXNNb250aCA9IGRpZmZlcmVuY2UgPiAwID8KICAgICAgICA3IC0gZGlmZmVyZW5jZSA6IC0gZGlmZmVyZW5jZSwKICAgICAgZmlyc3REYXRlID0gbmV3IERhdGUoZmlyc3REYXlPZk1vbnRoKTsKCiAgICBpZiAobnVtRGlzcGxheWVkRnJvbVByZXZpb3VzTW9udGggPiAwKSB7CiAgICAgIGZpcnN0RGF0ZS5zZXREYXRlKC1udW1EaXNwbGF5ZWRGcm9tUHJldmlvdXNNb250aCArIDEpOwogICAgfQoKICAgIC8vIDQyIGlzIHRoZSBudW1iZXIgb2YgZGF5cyBvbiBhIHNpeC13ZWVrIGNhbGVuZGFyCiAgICB2YXIgZGF5cyA9IHRoaXMuZ2V0RGF0ZXMoZmlyc3REYXRlLCA0Mik7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDQyOyBpICsrKSB7CiAgICAgIGRheXNbaV0gPSBhbmd1bGFyLmV4dGVuZCh0aGlzLmNyZWF0ZURhdGVPYmplY3QoZGF5c1tpXSwgdGhpcy5mb3JtYXREYXkpLCB7CiAgICAgICAgc2Vjb25kYXJ5OiBkYXlzW2ldLmdldE1vbnRoKCkgIT09IG1vbnRoLAogICAgICAgIHVpZDogc2NvcGUudW5pcXVlSWQgKyAnLScgKyBpCiAgICAgIH0pOwogICAgfQoKICAgIHNjb3BlLmxhYmVscyA9IG5ldyBBcnJheSg3KTsKICAgIGZvciAodmFyIGogPSAwOyBqIDwgNzsgaisrKSB7CiAgICAgIHNjb3BlLmxhYmVsc1tqXSA9IHsKICAgICAgICBhYmJyOiBkYXRlRmlsdGVyKGRheXNbal0uZGF0ZSwgdGhpcy5mb3JtYXREYXlIZWFkZXIpLAogICAgICAgIGZ1bGw6IGRhdGVGaWx0ZXIoZGF5c1tqXS5kYXRlLCAnRUVFRScpCiAgICAgIH07CiAgICB9CgogICAgc2NvcGUudGl0bGUgPSBkYXRlRmlsdGVyKHRoaXMuYWN0aXZlRGF0ZSwgdGhpcy5mb3JtYXREYXlUaXRsZSk7CiAgICBzY29wZS5yb3dzID0gdGhpcy5zcGxpdChkYXlzLCA3KTsKCiAgICBpZiAoc2NvcGUuc2hvd1dlZWtzKSB7CiAgICAgIHNjb3BlLndlZWtOdW1iZXJzID0gW107CiAgICAgIHZhciB0aHVyc2RheUluZGV4ID0gKDQgKyA3IC0gdGhpcy5zdGFydGluZ0RheSkgJSA3LAogICAgICAgICAgbnVtV2Vla3MgPSBzY29wZS5yb3dzLmxlbmd0aDsKICAgICAgZm9yICh2YXIgY3VyV2VlayA9IDA7IGN1cldlZWsgPCBudW1XZWVrczsgY3VyV2VlaysrKSB7CiAgICAgICAgc2NvcGUud2Vla051bWJlcnMucHVzaCgKICAgICAgICAgIGdldElTTzg2MDFXZWVrTnVtYmVyKHNjb3BlLnJvd3NbY3VyV2Vla11bdGh1cnNkYXlJbmRleF0uZGF0ZSkpOwogICAgICB9CiAgICB9CiAgfTsKCiAgdGhpcy5jb21wYXJlID0gZnVuY3Rpb24oZGF0ZTEsIGRhdGUyKSB7CiAgICB2YXIgX2RhdGUxID0gbmV3IERhdGUoZGF0ZTEuZ2V0RnVsbFllYXIoKSwgZGF0ZTEuZ2V0TW9udGgoKSwgZGF0ZTEuZ2V0RGF0ZSgpKTsKICAgIHZhciBfZGF0ZTIgPSBuZXcgRGF0ZShkYXRlMi5nZXRGdWxsWWVhcigpLCBkYXRlMi5nZXRNb250aCgpLCBkYXRlMi5nZXREYXRlKCkpOwogICAgX2RhdGUxLnNldEZ1bGxZZWFyKGRhdGUxLmdldEZ1bGxZZWFyKCkpOwogICAgX2RhdGUyLnNldEZ1bGxZZWFyKGRhdGUyLmdldEZ1bGxZZWFyKCkpOwogICAgcmV0dXJuIF9kYXRlMSAtIF9kYXRlMjsKICB9OwoKICBmdW5jdGlvbiBnZXRJU084NjAxV2Vla051bWJlcihkYXRlKSB7CiAgICB2YXIgY2hlY2tEYXRlID0gbmV3IERhdGUoZGF0ZSk7CiAgICBjaGVja0RhdGUuc2V0RGF0ZShjaGVja0RhdGUuZ2V0RGF0ZSgpICsgNCAtIChjaGVja0RhdGUuZ2V0RGF5KCkgfHwgNykpOyAvLyBUaHVyc2RheQogICAgdmFyIHRpbWUgPSBjaGVja0RhdGUuZ2V0VGltZSgpOwogICAgY2hlY2tEYXRlLnNldE1vbnRoKDApOyAvLyBDb21wYXJlIHdpdGggSmFuIDEKICAgIGNoZWNrRGF0ZS5zZXREYXRlKDEpOwogICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yb3VuZCgodGltZSAtIGNoZWNrRGF0ZSkgLyA4NjQwMDAwMCkgLyA3KSArIDE7CiAgfQoKICB0aGlzLmhhbmRsZUtleURvd24gPSBmdW5jdGlvbihrZXksIGV2dCkgewogICAgdmFyIGRhdGUgPSB0aGlzLmFjdGl2ZURhdGUuZ2V0RGF0ZSgpOwoKICAgIGlmIChrZXkgPT09ICdsZWZ0JykgewogICAgICBkYXRlID0gZGF0ZSAtIDE7CiAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ3VwJykgewogICAgICBkYXRlID0gZGF0ZSAtIDc7CiAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ3JpZ2h0JykgewogICAgICBkYXRlID0gZGF0ZSArIDE7CiAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ2Rvd24nKSB7CiAgICAgIGRhdGUgPSBkYXRlICsgNzsKICAgIH0gZWxzZSBpZiAoa2V5ID09PSAncGFnZXVwJyB8fCBrZXkgPT09ICdwYWdlZG93bicpIHsKICAgICAgdmFyIG1vbnRoID0gdGhpcy5hY3RpdmVEYXRlLmdldE1vbnRoKCkgKyAoa2V5ID09PSAncGFnZXVwJyA/IC0gMSA6IDEpOwogICAgICB0aGlzLmFjdGl2ZURhdGUuc2V0TW9udGgobW9udGgsIDEpOwogICAgICBkYXRlID0gTWF0aC5taW4oZ2V0RGF5c0luTW9udGgodGhpcy5hY3RpdmVEYXRlLmdldEZ1bGxZZWFyKCksIHRoaXMuYWN0aXZlRGF0ZS5nZXRNb250aCgpKSwgZGF0ZSk7CiAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ2hvbWUnKSB7CiAgICAgIGRhdGUgPSAxOwogICAgfSBlbHNlIGlmIChrZXkgPT09ICdlbmQnKSB7CiAgICAgIGRhdGUgPSBnZXREYXlzSW5Nb250aCh0aGlzLmFjdGl2ZURhdGUuZ2V0RnVsbFllYXIoKSwgdGhpcy5hY3RpdmVEYXRlLmdldE1vbnRoKCkpOwogICAgfQogICAgdGhpcy5hY3RpdmVEYXRlLnNldERhdGUoZGF0ZSk7CiAgfTsKfV0pCgouY29udHJvbGxlcignVWliTW9udGhwaWNrZXJDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGVsZW1lbnQnLCAnZGF0ZUZpbHRlcicsIGZ1bmN0aW9uKHNjb3BlLCAkZWxlbWVudCwgZGF0ZUZpbHRlcikgewogIHRoaXMuc3RlcCA9IHsgeWVhcnM6IDEgfTsKICB0aGlzLmVsZW1lbnQgPSAkZWxlbWVudDsKCiAgdGhpcy5pbml0ID0gZnVuY3Rpb24oY3RybCkgewogICAgYW5ndWxhci5leHRlbmQoY3RybCwgdGhpcyk7CiAgICBjdHJsLnJlZnJlc2hWaWV3KCk7CiAgfTsKCiAgdGhpcy5fcmVmcmVzaFZpZXcgPSBmdW5jdGlvbigpIHsKICAgIHZhciBtb250aHMgPSBuZXcgQXJyYXkoMTIpLAogICAgICAgIHllYXIgPSB0aGlzLmFjdGl2ZURhdGUuZ2V0RnVsbFllYXIoKSwKICAgICAgICBkYXRlOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTI7IGkrKykgewogICAgICBkYXRlID0gbmV3IERhdGUodGhpcy5hY3RpdmVEYXRlKTsKICAgICAgZGF0ZS5zZXRGdWxsWWVhcih5ZWFyLCBpLCAxKTsKICAgICAgbW9udGhzW2ldID0gYW5ndWxhci5leHRlbmQodGhpcy5jcmVhdGVEYXRlT2JqZWN0KGRhdGUsIHRoaXMuZm9ybWF0TW9udGgpLCB7CiAgICAgICAgdWlkOiBzY29wZS51bmlxdWVJZCArICctJyArIGkKICAgICAgfSk7CiAgICB9CgogICAgc2NvcGUudGl0bGUgPSBkYXRlRmlsdGVyKHRoaXMuYWN0aXZlRGF0ZSwgdGhpcy5mb3JtYXRNb250aFRpdGxlKTsKICAgIHNjb3BlLnJvd3MgPSB0aGlzLnNwbGl0KG1vbnRocywgdGhpcy5tb250aENvbHVtbnMpOwogICAgc2NvcGUueWVhckhlYWRlckNvbHNwYW4gPSB0aGlzLm1vbnRoQ29sdW1ucyA+IDMgPyB0aGlzLm1vbnRoQ29sdW1ucyAtIDIgOiAxOwogIH07CgogIHRoaXMuY29tcGFyZSA9IGZ1bmN0aW9uKGRhdGUxLCBkYXRlMikgewogICAgdmFyIF9kYXRlMSA9IG5ldyBEYXRlKGRhdGUxLmdldEZ1bGxZZWFyKCksIGRhdGUxLmdldE1vbnRoKCkpOwogICAgdmFyIF9kYXRlMiA9IG5ldyBEYXRlKGRhdGUyLmdldEZ1bGxZZWFyKCksIGRhdGUyLmdldE1vbnRoKCkpOwogICAgX2RhdGUxLnNldEZ1bGxZZWFyKGRhdGUxLmdldEZ1bGxZZWFyKCkpOwogICAgX2RhdGUyLnNldEZ1bGxZZWFyKGRhdGUyLmdldEZ1bGxZZWFyKCkpOwogICAgcmV0dXJuIF9kYXRlMSAtIF9kYXRlMjsKICB9OwoKICB0aGlzLmhhbmRsZUtleURvd24gPSBmdW5jdGlvbihrZXksIGV2dCkgewogICAgdmFyIGRhdGUgPSB0aGlzLmFjdGl2ZURhdGUuZ2V0TW9udGgoKTsKCiAgICBpZiAoa2V5ID09PSAnbGVmdCcpIHsKICAgICAgZGF0ZSA9IGRhdGUgLSAxOwogICAgfSBlbHNlIGlmIChrZXkgPT09ICd1cCcpIHsKICAgICAgZGF0ZSA9IGRhdGUgLSB0aGlzLm1vbnRoQ29sdW1uczsKICAgIH0gZWxzZSBpZiAoa2V5ID09PSAncmlnaHQnKSB7CiAgICAgIGRhdGUgPSBkYXRlICsgMTsKICAgIH0gZWxzZSBpZiAoa2V5ID09PSAnZG93bicpIHsKICAgICAgZGF0ZSA9IGRhdGUgKyB0aGlzLm1vbnRoQ29sdW1uczsKICAgIH0gZWxzZSBpZiAoa2V5ID09PSAncGFnZXVwJyB8fCBrZXkgPT09ICdwYWdlZG93bicpIHsKICAgICAgdmFyIHllYXIgPSB0aGlzLmFjdGl2ZURhdGUuZ2V0RnVsbFllYXIoKSArIChrZXkgPT09ICdwYWdldXAnID8gLSAxIDogMSk7CiAgICAgIHRoaXMuYWN0aXZlRGF0ZS5zZXRGdWxsWWVhcih5ZWFyKTsKICAgIH0gZWxzZSBpZiAoa2V5ID09PSAnaG9tZScpIHsKICAgICAgZGF0ZSA9IDA7CiAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ2VuZCcpIHsKICAgICAgZGF0ZSA9IDExOwogICAgfQogICAgdGhpcy5hY3RpdmVEYXRlLnNldE1vbnRoKGRhdGUpOwogIH07Cn1dKQoKLmNvbnRyb2xsZXIoJ1VpYlllYXJwaWNrZXJDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGVsZW1lbnQnLCAnZGF0ZUZpbHRlcicsIGZ1bmN0aW9uKHNjb3BlLCAkZWxlbWVudCwgZGF0ZUZpbHRlcikgewogIHZhciBjb2x1bW5zLCByYW5nZTsKICB0aGlzLmVsZW1lbnQgPSAkZWxlbWVudDsKCiAgZnVuY3Rpb24gZ2V0U3RhcnRpbmdZZWFyKHllYXIpIHsKICAgIHJldHVybiBwYXJzZUludCgoeWVhciAtIDEpIC8gcmFuZ2UsIDEwKSAqIHJhbmdlICsgMTsKICB9CgogIHRoaXMueWVhcnBpY2tlckluaXQgPSBmdW5jdGlvbigpIHsKICAgIGNvbHVtbnMgPSB0aGlzLnllYXJDb2x1bW5zOwogICAgcmFuZ2UgPSB0aGlzLnllYXJSb3dzICogY29sdW1uczsKICAgIHRoaXMuc3RlcCA9IHsgeWVhcnM6IHJhbmdlIH07CiAgfTsKCiAgdGhpcy5fcmVmcmVzaFZpZXcgPSBmdW5jdGlvbigpIHsKICAgIHZhciB5ZWFycyA9IG5ldyBBcnJheShyYW5nZSksIGRhdGU7CgogICAgZm9yICh2YXIgaSA9IDAsIHN0YXJ0ID0gZ2V0U3RhcnRpbmdZZWFyKHRoaXMuYWN0aXZlRGF0ZS5nZXRGdWxsWWVhcigpKTsgaSA8IHJhbmdlOyBpKyspIHsKICAgICAgZGF0ZSA9IG5ldyBEYXRlKHRoaXMuYWN0aXZlRGF0ZSk7CiAgICAgIGRhdGUuc2V0RnVsbFllYXIoc3RhcnQgKyBpLCAwLCAxKTsKICAgICAgeWVhcnNbaV0gPSBhbmd1bGFyLmV4dGVuZCh0aGlzLmNyZWF0ZURhdGVPYmplY3QoZGF0ZSwgdGhpcy5mb3JtYXRZZWFyKSwgewogICAgICAgIHVpZDogc2NvcGUudW5pcXVlSWQgKyAnLScgKyBpCiAgICAgIH0pOwogICAgfQoKICAgIHNjb3BlLnRpdGxlID0gW3llYXJzWzBdLmxhYmVsLCB5ZWFyc1tyYW5nZSAtIDFdLmxhYmVsXS5qb2luKCcgLSAnKTsKICAgIHNjb3BlLnJvd3MgPSB0aGlzLnNwbGl0KHllYXJzLCBjb2x1bW5zKTsKICAgIHNjb3BlLmNvbHVtbnMgPSBjb2x1bW5zOwogIH07CgogIHRoaXMuY29tcGFyZSA9IGZ1bmN0aW9uKGRhdGUxLCBkYXRlMikgewogICAgcmV0dXJuIGRhdGUxLmdldEZ1bGxZZWFyKCkgLSBkYXRlMi5nZXRGdWxsWWVhcigpOwogIH07CgogIHRoaXMuaGFuZGxlS2V5RG93biA9IGZ1bmN0aW9uKGtleSwgZXZ0KSB7CiAgICB2YXIgZGF0ZSA9IHRoaXMuYWN0aXZlRGF0ZS5nZXRGdWxsWWVhcigpOwoKICAgIGlmIChrZXkgPT09ICdsZWZ0JykgewogICAgICBkYXRlID0gZGF0ZSAtIDE7CiAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ3VwJykgewogICAgICBkYXRlID0gZGF0ZSAtIGNvbHVtbnM7CiAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ3JpZ2h0JykgewogICAgICBkYXRlID0gZGF0ZSArIDE7CiAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ2Rvd24nKSB7CiAgICAgIGRhdGUgPSBkYXRlICsgY29sdW1uczsKICAgIH0gZWxzZSBpZiAoa2V5ID09PSAncGFnZXVwJyB8fCBrZXkgPT09ICdwYWdlZG93bicpIHsKICAgICAgZGF0ZSArPSAoa2V5ID09PSAncGFnZXVwJyA/IC0gMSA6IDEpICogcmFuZ2U7CiAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ2hvbWUnKSB7CiAgICAgIGRhdGUgPSBnZXRTdGFydGluZ1llYXIodGhpcy5hY3RpdmVEYXRlLmdldEZ1bGxZZWFyKCkpOwogICAgfSBlbHNlIGlmIChrZXkgPT09ICdlbmQnKSB7CiAgICAgIGRhdGUgPSBnZXRTdGFydGluZ1llYXIodGhpcy5hY3RpdmVEYXRlLmdldEZ1bGxZZWFyKCkpICsgcmFuZ2UgLSAxOwogICAgfQogICAgdGhpcy5hY3RpdmVEYXRlLnNldEZ1bGxZZWFyKGRhdGUpOwogIH07Cn1dKQoKLmRpcmVjdGl2ZSgndWliRGF0ZXBpY2tlcicsIGZ1bmN0aW9uKCkgewogIHJldHVybiB7CiAgICB0ZW1wbGF0ZVVybDogZnVuY3Rpb24oZWxlbWVudCwgYXR0cnMpIHsKICAgICAgcmV0dXJuIGF0dHJzLnRlbXBsYXRlVXJsIHx8ICd1aWIvdGVtcGxhdGUvZGF0ZXBpY2tlci9kYXRlcGlja2VyLmh0bWwnOwogICAgfSwKICAgIHNjb3BlOiB7CiAgICAgIGRhdGVwaWNrZXJPcHRpb25zOiAnPT8nCiAgICB9LAogICAgcmVxdWlyZTogWyd1aWJEYXRlcGlja2VyJywgJ15uZ01vZGVsJ10sCiAgICByZXN0cmljdDogJ0EnLAogICAgY29udHJvbGxlcjogJ1VpYkRhdGVwaWNrZXJDb250cm9sbGVyJywKICAgIGNvbnRyb2xsZXJBczogJ2RhdGVwaWNrZXInLAogICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjdHJscykgewogICAgICB2YXIgZGF0ZXBpY2tlckN0cmwgPSBjdHJsc1swXSwgbmdNb2RlbEN0cmwgPSBjdHJsc1sxXTsKCiAgICAgIGRhdGVwaWNrZXJDdHJsLmluaXQobmdNb2RlbEN0cmwpOwogICAgfQogIH07Cn0pCgouZGlyZWN0aXZlKCd1aWJEYXlwaWNrZXInLCBmdW5jdGlvbigpIHsKICByZXR1cm4gewogICAgdGVtcGxhdGVVcmw6IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHJzKSB7CiAgICAgIHJldHVybiBhdHRycy50ZW1wbGF0ZVVybCB8fCAndWliL3RlbXBsYXRlL2RhdGVwaWNrZXIvZGF5Lmh0bWwnOwogICAgfSwKICAgIHJlcXVpcmU6IFsnXnVpYkRhdGVwaWNrZXInLCAndWliRGF5cGlja2VyJ10sCiAgICByZXN0cmljdDogJ0EnLAogICAgY29udHJvbGxlcjogJ1VpYkRheXBpY2tlckNvbnRyb2xsZXInLAogICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjdHJscykgewogICAgICB2YXIgZGF0ZXBpY2tlckN0cmwgPSBjdHJsc1swXSwKICAgICAgICBkYXlwaWNrZXJDdHJsID0gY3RybHNbMV07CgogICAgICBkYXlwaWNrZXJDdHJsLmluaXQoZGF0ZXBpY2tlckN0cmwpOwogICAgfQogIH07Cn0pCgouZGlyZWN0aXZlKCd1aWJNb250aHBpY2tlcicsIGZ1bmN0aW9uKCkgewogIHJldHVybiB7CiAgICB0ZW1wbGF0ZVVybDogZnVuY3Rpb24oZWxlbWVudCwgYXR0cnMpIHsKICAgICAgcmV0dXJuIGF0dHJzLnRlbXBsYXRlVXJsIHx8ICd1aWIvdGVtcGxhdGUvZGF0ZXBpY2tlci9tb250aC5odG1sJzsKICAgIH0sCiAgICByZXF1aXJlOiBbJ151aWJEYXRlcGlja2VyJywgJ3VpYk1vbnRocGlja2VyJ10sCiAgICByZXN0cmljdDogJ0EnLAogICAgY29udHJvbGxlcjogJ1VpYk1vbnRocGlja2VyQ29udHJvbGxlcicsCiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIGN0cmxzKSB7CiAgICAgIHZhciBkYXRlcGlja2VyQ3RybCA9IGN0cmxzWzBdLAogICAgICAgIG1vbnRocGlja2VyQ3RybCA9IGN0cmxzWzFdOwoKICAgICAgbW9udGhwaWNrZXJDdHJsLmluaXQoZGF0ZXBpY2tlckN0cmwpOwogICAgfQogIH07Cn0pCgouZGlyZWN0aXZlKCd1aWJZZWFycGlja2VyJywgZnVuY3Rpb24oKSB7CiAgcmV0dXJuIHsKICAgIHRlbXBsYXRlVXJsOiBmdW5jdGlvbihlbGVtZW50LCBhdHRycykgewogICAgICByZXR1cm4gYXR0cnMudGVtcGxhdGVVcmwgfHwgJ3VpYi90ZW1wbGF0ZS9kYXRlcGlja2VyL3llYXIuaHRtbCc7CiAgICB9LAogICAgcmVxdWlyZTogWydedWliRGF0ZXBpY2tlcicsICd1aWJZZWFycGlja2VyJ10sCiAgICByZXN0cmljdDogJ0EnLAogICAgY29udHJvbGxlcjogJ1VpYlllYXJwaWNrZXJDb250cm9sbGVyJywKICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY3RybHMpIHsKICAgICAgdmFyIGN0cmwgPSBjdHJsc1swXTsKICAgICAgYW5ndWxhci5leHRlbmQoY3RybCwgY3RybHNbMV0pOwogICAgICBjdHJsLnllYXJwaWNrZXJJbml0KCk7CgogICAgICBjdHJsLnJlZnJlc2hWaWV3KCk7CiAgICB9CiAgfTsKfSk7Cgphbmd1bGFyLm1vZHVsZSgndWkuYm9vdHN0cmFwLnBvc2l0aW9uJywgW10pCgovKioKICogQSBzZXQgb2YgdXRpbGl0eSBtZXRob2RzIGZvciB3b3JraW5nIHdpdGggdGhlIERPTS4KICogSXQgaXMgbWVhbnQgdG8gYmUgdXNlZCB3aGVyZSB3ZSBuZWVkIHRvIGFic29sdXRlLXBvc2l0aW9uIGVsZW1lbnRzIGluCiAqIHJlbGF0aW9uIHRvIGFub3RoZXIgZWxlbWVudCAodGhpcyBpcyB0aGUgY2FzZSBmb3IgdG9vbHRpcHMsIHBvcG92ZXJzLAogKiB0eXBlYWhlYWQgc3VnZ2VzdGlvbnMgZXRjLikuCiAqLwogIC5mYWN0b3J5KCckdWliUG9zaXRpb24nLCBbJyRkb2N1bWVudCcsICckd2luZG93JywgZnVuY3Rpb24oJGRvY3VtZW50LCAkd2luZG93KSB7CiAgICAvKioKICAgICAqIFVzZWQgYnkgc2Nyb2xsYmFyV2lkdGgoKSBmdW5jdGlvbiB0byBjYWNoZSBzY3JvbGxiYXIncyB3aWR0aC4KICAgICAqIERvIG5vdCBhY2Nlc3MgdGhpcyB2YXJpYWJsZSBkaXJlY3RseSwgdXNlIHNjcm9sbGJhcldpZHRoKCkgaW5zdGVhZC4KICAgICAqLwogICAgdmFyIFNDUk9MTEJBUl9XSURUSDsKICAgIC8qKgogICAgICogc2Nyb2xsYmFyIG9uIGJvZHkgYW5kIGh0bWwgZWxlbWVudCBpbiBJRSBhbmQgRWRnZSBvdmVybGF5CiAgICAgKiBjb250ZW50IGFuZCBzaG91bGQgYmUgY29uc2lkZXJlZCAwIHdpZHRoLgogICAgICovCiAgICB2YXIgQk9EWV9TQ1JPTExCQVJfV0lEVEg7CiAgICB2YXIgT1ZFUkZMT1dfUkVHRVggPSB7CiAgICAgIG5vcm1hbDogLyhhdXRvfHNjcm9sbCkvLAogICAgICBoaWRkZW46IC8oYXV0b3xzY3JvbGx8aGlkZGVuKS8KICAgIH07CiAgICB2YXIgUExBQ0VNRU5UX1JFR0VYID0gewogICAgICBhdXRvOiAvXHM/YXV0bz9ccz8vaSwKICAgICAgcHJpbWFyeTogL14odG9wfGJvdHRvbXxsZWZ0fHJpZ2h0KSQvLAogICAgICBzZWNvbmRhcnk6IC9eKHRvcHxib3R0b218bGVmdHxyaWdodHxjZW50ZXIpJC8sCiAgICAgIHZlcnRpY2FsOiAvXih0b3B8Ym90dG9tKSQvCiAgICB9OwogICAgdmFyIEJPRFlfUkVHRVggPSAvKEhUTUx8Qk9EWSkvOwoKICAgIHJldHVybiB7CgogICAgICAvKioKICAgICAgICogUHJvdmlkZXMgYSByYXcgRE9NIGVsZW1lbnQgZnJvbSBhIGpRdWVyeS9qUUxpdGUgZWxlbWVudC4KICAgICAgICoKICAgICAgICogQHBhcmFtIHtlbGVtZW50fSBlbGVtIC0gVGhlIGVsZW1lbnQgdG8gY29udmVydC4KICAgICAgICoKICAgICAgICogQHJldHVybnMge2VsZW1lbnR9IEEgSFRNTCBlbGVtZW50LgogICAgICAgKi8KICAgICAgZ2V0UmF3Tm9kZTogZnVuY3Rpb24oZWxlbSkgewogICAgICAgIHJldHVybiBlbGVtLm5vZGVOYW1lID8gZWxlbSA6IGVsZW1bMF0gfHwgZWxlbTsKICAgICAgfSwKCiAgICAgIC8qKgogICAgICAgKiBQcm92aWRlcyBhIHBhcnNlZCBudW1iZXIgZm9yIGEgc3R5bGUgcHJvcGVydHkuICBTdHJpcHMKICAgICAgICogdW5pdHMgYW5kIGNhc3RzIGludmFsaWQgbnVtYmVycyB0byAwLgogICAgICAgKgogICAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBUaGUgc3R5bGUgdmFsdWUgdG8gcGFyc2UuCiAgICAgICAqCiAgICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IEEgdmFsaWQgbnVtYmVyLgogICAgICAgKi8KICAgICAgcGFyc2VTdHlsZTogZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICB2YWx1ZSA9IHBhcnNlRmxvYXQodmFsdWUpOwogICAgICAgIHJldHVybiBpc0Zpbml0ZSh2YWx1ZSkgPyB2YWx1ZSA6IDA7CiAgICAgIH0sCgogICAgICAvKioKICAgICAgICogUHJvdmlkZXMgdGhlIGNsb3Nlc3QgcG9zaXRpb25lZCBhbmNlc3Rvci4KICAgICAgICoKICAgICAgICogQHBhcmFtIHtlbGVtZW50fSBlbGVtZW50IC0gVGhlIGVsZW1lbnQgdG8gZ2V0IHRoZSBvZmZlc3QgcGFyZW50IGZvci4KICAgICAgICoKICAgICAgICogQHJldHVybnMge2VsZW1lbnR9IFRoZSBjbG9zZXN0IHBvc2l0aW9uZWQgYW5jZXN0b3IuCiAgICAgICAqLwogICAgICBvZmZzZXRQYXJlbnQ6IGZ1bmN0aW9uKGVsZW0pIHsKICAgICAgICBlbGVtID0gdGhpcy5nZXRSYXdOb2RlKGVsZW0pOwoKICAgICAgICB2YXIgb2Zmc2V0UGFyZW50ID0gZWxlbS5vZmZzZXRQYXJlbnQgfHwgJGRvY3VtZW50WzBdLmRvY3VtZW50RWxlbWVudDsKCiAgICAgICAgZnVuY3Rpb24gaXNTdGF0aWNQb3NpdGlvbmVkKGVsKSB7CiAgICAgICAgICByZXR1cm4gKCR3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbCkucG9zaXRpb24gfHwgJ3N0YXRpYycpID09PSAnc3RhdGljJzsKICAgICAgICB9CgogICAgICAgIHdoaWxlIChvZmZzZXRQYXJlbnQgJiYgb2Zmc2V0UGFyZW50ICE9PSAkZG9jdW1lbnRbMF0uZG9jdW1lbnRFbGVtZW50ICYmIGlzU3RhdGljUG9zaXRpb25lZChvZmZzZXRQYXJlbnQpKSB7CiAgICAgICAgICBvZmZzZXRQYXJlbnQgPSBvZmZzZXRQYXJlbnQub2Zmc2V0UGFyZW50OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIG9mZnNldFBhcmVudCB8fCAkZG9jdW1lbnRbMF0uZG9jdW1lbnRFbGVtZW50OwogICAgICB9LAoKICAgICAgLyoqCiAgICAgICAqIFByb3ZpZGVzIHRoZSBzY3JvbGxiYXIgd2lkdGgsIGNvbmNlcHQgZnJvbSBUV0JTIG1lYXN1cmVTY3JvbGxiYXIoKQogICAgICAgKiBmdW5jdGlvbiBpbiBodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvanMvbW9kYWwuanMKICAgICAgICogSW4gSUUgYW5kIEVkZ2UsIHNjb2xsYmFyIG9uIGJvZHkgYW5kIGh0bWwgZWxlbWVudCBvdmVybGF5IGFuZCBzaG91bGQKICAgICAgICogcmV0dXJuIGEgd2lkdGggb2YgMC4KICAgICAgICoKICAgICAgICogQHJldHVybnMge251bWJlcn0gVGhlIHdpZHRoIG9mIHRoZSBicm93c2VyIHNjb2xsYmFyLgogICAgICAgKi8KICAgICAgc2Nyb2xsYmFyV2lkdGg6IGZ1bmN0aW9uKGlzQm9keSkgewogICAgICAgIGlmIChpc0JvZHkpIHsKICAgICAgICAgIGlmIChhbmd1bGFyLmlzVW5kZWZpbmVkKEJPRFlfU0NST0xMQkFSX1dJRFRIKSkgewogICAgICAgICAgICB2YXIgYm9keUVsZW0gPSAkZG9jdW1lbnQuZmluZCgnYm9keScpOwogICAgICAgICAgICBib2R5RWxlbS5hZGRDbGFzcygndWliLXBvc2l0aW9uLWJvZHktc2Nyb2xsYmFyLW1lYXN1cmUnKTsKICAgICAgICAgICAgQk9EWV9TQ1JPTExCQVJfV0lEVEggPSAkd2luZG93LmlubmVyV2lkdGggLSBib2R5RWxlbVswXS5jbGllbnRXaWR0aDsKICAgICAgICAgICAgQk9EWV9TQ1JPTExCQVJfV0lEVEggPSBpc0Zpbml0ZShCT0RZX1NDUk9MTEJBUl9XSURUSCkgPyBCT0RZX1NDUk9MTEJBUl9XSURUSCA6IDA7CiAgICAgICAgICAgIGJvZHlFbGVtLnJlbW92ZUNsYXNzKCd1aWItcG9zaXRpb24tYm9keS1zY3JvbGxiYXItbWVhc3VyZScpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIEJPRFlfU0NST0xMQkFSX1dJRFRIOwogICAgICAgIH0KCiAgICAgICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQoU0NST0xMQkFSX1dJRFRIKSkgewogICAgICAgICAgdmFyIHNjcm9sbEVsZW0gPSBhbmd1bGFyLmVsZW1lbnQoJzxkaXYgY2xhc3M9InVpYi1wb3NpdGlvbi1zY3JvbGxiYXItbWVhc3VyZSI+PC9kaXY+Jyk7CiAgICAgICAgICAkZG9jdW1lbnQuZmluZCgnYm9keScpLmFwcGVuZChzY3JvbGxFbGVtKTsKICAgICAgICAgIFNDUk9MTEJBUl9XSURUSCA9IHNjcm9sbEVsZW1bMF0ub2Zmc2V0V2lkdGggLSBzY3JvbGxFbGVtWzBdLmNsaWVudFdpZHRoOwogICAgICAgICAgU0NST0xMQkFSX1dJRFRIID0gaXNGaW5pdGUoU0NST0xMQkFSX1dJRFRIKSA/IFNDUk9MTEJBUl9XSURUSCA6IDA7CiAgICAgICAgICBzY3JvbGxFbGVtLnJlbW92ZSgpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIFNDUk9MTEJBUl9XSURUSDsKICAgICAgfSwKCiAgICAgIC8qKgogICAgICAgKiBQcm92aWRlcyB0aGUgcGFkZGluZyByZXF1aXJlZCBvbiBhbiBlbGVtZW50IHRvIHJlcGxhY2UgdGhlIHNjcm9sbGJhci4KICAgICAgICoKICAgICAgICogQHJldHVybnMge29iamVjdH0gQW4gb2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOgogICAgICAgKiAgIDx1bD4KICAgICAgICogICAgIDxsaT4qKnNjcm9sbGJhcldpZHRoKio6IHRoZSB3aWR0aCBvZiB0aGUgc2Nyb2xsYmFyPC9saT4KICAgICAgICogICAgIDxsaT4qKndpZHRoT3ZlcmZsb3cqKjogd2hldGhlciB0aGUgdGhlIHdpZHRoIGlzIG92ZXJmbG93aW5nPC9saT4KICAgICAgICogICAgIDxsaT4qKnJpZ2h0Kio6IHRoZSBhbW91bnQgb2YgcmlnaHQgcGFkZGluZyBvbiB0aGUgZWxlbWVudCBuZWVkZWQgdG8gcmVwbGFjZSB0aGUgc2Nyb2xsYmFyPC9saT4KICAgICAgICogICAgIDxsaT4qKnJpZ2h0T3JpZ2luYWwqKjogdGhlIGFtb3VudCBvZiByaWdodCBwYWRkaW5nIGN1cnJlbnRseSBvbiB0aGUgZWxlbWVudDwvbGk+CiAgICAgICAqICAgICA8bGk+KipoZWlnaHRPdmVyZmxvdyoqOiB3aGV0aGVyIHRoZSB0aGUgaGVpZ2h0IGlzIG92ZXJmbG93aW5nPC9saT4KICAgICAgICogICAgIDxsaT4qKmJvdHRvbSoqOiB0aGUgYW1vdW50IG9mIGJvdHRvbSBwYWRkaW5nIG9uIHRoZSBlbGVtZW50IG5lZWRlZCB0byByZXBsYWNlIHRoZSBzY3JvbGxiYXI8L2xpPgogICAgICAgKiAgICAgPGxpPioqYm90dG9tT3JpZ2luYWwqKjogdGhlIGFtb3VudCBvZiBib3R0b20gcGFkZGluZyBjdXJyZW50bHkgb24gdGhlIGVsZW1lbnQ8L2xpPgogICAgICAgKiAgIDwvdWw+CiAgICAgICAqLwogICAgICBzY3JvbGxiYXJQYWRkaW5nOiBmdW5jdGlvbihlbGVtKSB7CiAgICAgICAgZWxlbSA9IHRoaXMuZ2V0UmF3Tm9kZShlbGVtKTsKCiAgICAgICAgdmFyIGVsZW1TdHlsZSA9ICR3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtKTsKICAgICAgICB2YXIgcGFkZGluZ1JpZ2h0ID0gdGhpcy5wYXJzZVN0eWxlKGVsZW1TdHlsZS5wYWRkaW5nUmlnaHQpOwogICAgICAgIHZhciBwYWRkaW5nQm90dG9tID0gdGhpcy5wYXJzZVN0eWxlKGVsZW1TdHlsZS5wYWRkaW5nQm90dG9tKTsKICAgICAgICB2YXIgc2Nyb2xsUGFyZW50ID0gdGhpcy5zY3JvbGxQYXJlbnQoZWxlbSwgZmFsc2UsIHRydWUpOwogICAgICAgIHZhciBzY3JvbGxiYXJXaWR0aCA9IHRoaXMuc2Nyb2xsYmFyV2lkdGgoc2Nyb2xsUGFyZW50LCBCT0RZX1JFR0VYLnRlc3Qoc2Nyb2xsUGFyZW50LnRhZ05hbWUpKTsKCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHNjcm9sbGJhcldpZHRoOiBzY3JvbGxiYXJXaWR0aCwKICAgICAgICAgIHdpZHRoT3ZlcmZsb3c6IHNjcm9sbFBhcmVudC5zY3JvbGxXaWR0aCA+IHNjcm9sbFBhcmVudC5jbGllbnRXaWR0aCwKICAgICAgICAgIHJpZ2h0OiBwYWRkaW5nUmlnaHQgKyBzY3JvbGxiYXJXaWR0aCwKICAgICAgICAgIG9yaWdpbmFsUmlnaHQ6IHBhZGRpbmdSaWdodCwKICAgICAgICAgIGhlaWdodE92ZXJmbG93OiBzY3JvbGxQYXJlbnQuc2Nyb2xsSGVpZ2h0ID4gc2Nyb2xsUGFyZW50LmNsaWVudEhlaWdodCwKICAgICAgICAgIGJvdHRvbTogcGFkZGluZ0JvdHRvbSArIHNjcm9sbGJhcldpZHRoLAogICAgICAgICAgb3JpZ2luYWxCb3R0b206IHBhZGRpbmdCb3R0b20KICAgICAgICAgfTsKICAgICAgfSwKCiAgICAgIC8qKgogICAgICAgKiBDaGVja3MgdG8gc2VlIGlmIHRoZSBlbGVtZW50IGlzIHNjcm9sbGFibGUuCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7ZWxlbWVudH0gZWxlbSAtIFRoZSBlbGVtZW50IHRvIGNoZWNrLgogICAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBbaW5jbHVkZUhpZGRlbj1mYWxzZV0gLSBTaG91bGQgc2Nyb2xsIHN0eWxlIG9mICdoaWRkZW4nIGJlIGNvbnNpZGVyZWQsCiAgICAgICAqICAgZGVmYXVsdCBpcyBmYWxzZS4KICAgICAgICoKICAgICAgICogQHJldHVybnMge2Jvb2xlYW59IFdoZXRoZXIgdGhlIGVsZW1lbnQgaXMgc2Nyb2xsYWJsZS4KICAgICAgICovCiAgICAgIGlzU2Nyb2xsYWJsZTogZnVuY3Rpb24oZWxlbSwgaW5jbHVkZUhpZGRlbikgewogICAgICAgIGVsZW0gPSB0aGlzLmdldFJhd05vZGUoZWxlbSk7CgogICAgICAgIHZhciBvdmVyZmxvd1JlZ2V4ID0gaW5jbHVkZUhpZGRlbiA/IE9WRVJGTE9XX1JFR0VYLmhpZGRlbiA6IE9WRVJGTE9XX1JFR0VYLm5vcm1hbDsKICAgICAgICB2YXIgZWxlbVN0eWxlID0gJHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW0pOwogICAgICAgIHJldHVybiBvdmVyZmxvd1JlZ2V4LnRlc3QoZWxlbVN0eWxlLm92ZXJmbG93ICsgZWxlbVN0eWxlLm92ZXJmbG93WSArIGVsZW1TdHlsZS5vdmVyZmxvd1gpOwogICAgICB9LAoKICAgICAgLyoqCiAgICAgICAqIFByb3ZpZGVzIHRoZSBjbG9zZXN0IHNjcm9sbGFibGUgYW5jZXN0b3IuCiAgICAgICAqIEEgcG9ydCBvZiB0aGUgalF1ZXJ5IFVJIHNjcm9sbFBhcmVudCBtZXRob2Q6CiAgICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5LXVpL2Jsb2IvbWFzdGVyL3VpL3Njcm9sbC1wYXJlbnQuanMKICAgICAgICoKICAgICAgICogQHBhcmFtIHtlbGVtZW50fSBlbGVtIC0gVGhlIGVsZW1lbnQgdG8gZmluZCB0aGUgc2Nyb2xsIHBhcmVudCBvZi4KICAgICAgICogQHBhcmFtIHtib29sZWFuPX0gW2luY2x1ZGVIaWRkZW49ZmFsc2VdIC0gU2hvdWxkIHNjcm9sbCBzdHlsZSBvZiAnaGlkZGVuJyBiZSBjb25zaWRlcmVkLAogICAgICAgKiAgIGRlZmF1bHQgaXMgZmFsc2UuCiAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IFtpbmNsdWRlU2VsZj1mYWxzZV0gLSBTaG91bGQgdGhlIGVsZW1lbnQgYmVpbmcgcGFzc2VkIGJlCiAgICAgICAqIGluY2x1ZGVkIGluIHRoZSBzY3JvbGxhYmxlIGxsb2t1cC4KICAgICAgICoKICAgICAgICogQHJldHVybnMge2VsZW1lbnR9IEEgSFRNTCBlbGVtZW50LgogICAgICAgKi8KICAgICAgc2Nyb2xsUGFyZW50OiBmdW5jdGlvbihlbGVtLCBpbmNsdWRlSGlkZGVuLCBpbmNsdWRlU2VsZikgewogICAgICAgIGVsZW0gPSB0aGlzLmdldFJhd05vZGUoZWxlbSk7CgogICAgICAgIHZhciBvdmVyZmxvd1JlZ2V4ID0gaW5jbHVkZUhpZGRlbiA/IE9WRVJGTE9XX1JFR0VYLmhpZGRlbiA6IE9WRVJGTE9XX1JFR0VYLm5vcm1hbDsKICAgICAgICB2YXIgZG9jdW1lbnRFbCA9ICRkb2N1bWVudFswXS5kb2N1bWVudEVsZW1lbnQ7CiAgICAgICAgdmFyIGVsZW1TdHlsZSA9ICR3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtKTsKICAgICAgICBpZiAoaW5jbHVkZVNlbGYgJiYgb3ZlcmZsb3dSZWdleC50ZXN0KGVsZW1TdHlsZS5vdmVyZmxvdyArIGVsZW1TdHlsZS5vdmVyZmxvd1kgKyBlbGVtU3R5bGUub3ZlcmZsb3dYKSkgewogICAgICAgICAgcmV0dXJuIGVsZW07CiAgICAgICAgfQogICAgICAgIHZhciBleGNsdWRlU3RhdGljID0gZWxlbVN0eWxlLnBvc2l0aW9uID09PSAnYWJzb2x1dGUnOwogICAgICAgIHZhciBzY3JvbGxQYXJlbnQgPSBlbGVtLnBhcmVudEVsZW1lbnQgfHwgZG9jdW1lbnRFbDsKCiAgICAgICAgaWYgKHNjcm9sbFBhcmVudCA9PT0gZG9jdW1lbnRFbCB8fCBlbGVtU3R5bGUucG9zaXRpb24gPT09ICdmaXhlZCcpIHsKICAgICAgICAgIHJldHVybiBkb2N1bWVudEVsOwogICAgICAgIH0KCiAgICAgICAgd2hpbGUgKHNjcm9sbFBhcmVudC5wYXJlbnRFbGVtZW50ICYmIHNjcm9sbFBhcmVudCAhPT0gZG9jdW1lbnRFbCkgewogICAgICAgICAgdmFyIHNwU3R5bGUgPSAkd2luZG93LmdldENvbXB1dGVkU3R5bGUoc2Nyb2xsUGFyZW50KTsKICAgICAgICAgIGlmIChleGNsdWRlU3RhdGljICYmIHNwU3R5bGUucG9zaXRpb24gIT09ICdzdGF0aWMnKSB7CiAgICAgICAgICAgIGV4Y2x1ZGVTdGF0aWMgPSBmYWxzZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoIWV4Y2x1ZGVTdGF0aWMgJiYgb3ZlcmZsb3dSZWdleC50ZXN0KHNwU3R5bGUub3ZlcmZsb3cgKyBzcFN0eWxlLm92ZXJmbG93WSArIHNwU3R5bGUub3ZlcmZsb3dYKSkgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIHNjcm9sbFBhcmVudCA9IHNjcm9sbFBhcmVudC5wYXJlbnRFbGVtZW50OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHNjcm9sbFBhcmVudDsKICAgICAgfSwKCiAgICAgIC8qKgogICAgICAgKiBQcm92aWRlcyByZWFkLW9ubHkgZXF1aXZhbGVudCBvZiBqUXVlcnkncyBwb3NpdGlvbiBmdW5jdGlvbjoKICAgICAgICogaHR0cDovL2FwaS5qcXVlcnkuY29tL3Bvc2l0aW9uLyAtIGRpc3RhbmNlIHRvIGNsb3Nlc3QgcG9zaXRpb25lZAogICAgICAgKiBhbmNlc3Rvci4gIERvZXMgbm90IGFjY291bnQgZm9yIG1hcmdpbnMgYnkgZGVmYXVsdCBsaWtlIGpRdWVyeSBwb3NpdGlvbi4KICAgICAgICoKICAgICAgICogQHBhcmFtIHtlbGVtZW50fSBlbGVtIC0gVGhlIGVsZW1lbnQgdG8gY2FjbHVsYXRlIHRoZSBwb3NpdGlvbiBvbi4KICAgICAgICogQHBhcmFtIHtib29sZWFuPX0gW2luY2x1ZGVNYXJnaW5zPWZhbHNlXSAtIFNob3VsZCBtYXJnaW5zIGJlIGFjY291bnRlZAogICAgICAgKiBmb3IsIGRlZmF1bHQgaXMgZmFsc2UuCiAgICAgICAqCiAgICAgICAqIEByZXR1cm5zIHtvYmplY3R9IEFuIG9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczoKICAgICAgICogICA8dWw+CiAgICAgICAqICAgICA8bGk+Kip3aWR0aCoqOiB0aGUgd2lkdGggb2YgdGhlIGVsZW1lbnQ8L2xpPgogICAgICAgKiAgICAgPGxpPioqaGVpZ2h0Kio6IHRoZSBoZWlnaHQgb2YgdGhlIGVsZW1lbnQ8L2xpPgogICAgICAgKiAgICAgPGxpPioqdG9wKio6IGRpc3RhbmNlIHRvIHRvcCBlZGdlIG9mIG9mZnNldCBwYXJlbnQ8L2xpPgogICAgICAgKiAgICAgPGxpPioqbGVmdCoqOiBkaXN0YW5jZSB0byBsZWZ0IGVkZ2Ugb2Ygb2Zmc2V0IHBhcmVudDwvbGk+CiAgICAgICAqICAgPC91bD4KICAgICAgICovCiAgICAgIHBvc2l0aW9uOiBmdW5jdGlvbihlbGVtLCBpbmNsdWRlTWFnaW5zKSB7CiAgICAgICAgZWxlbSA9IHRoaXMuZ2V0UmF3Tm9kZShlbGVtKTsKCiAgICAgICAgdmFyIGVsZW1PZmZzZXQgPSB0aGlzLm9mZnNldChlbGVtKTsKICAgICAgICBpZiAoaW5jbHVkZU1hZ2lucykgewogICAgICAgICAgdmFyIGVsZW1TdHlsZSA9ICR3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtKTsKICAgICAgICAgIGVsZW1PZmZzZXQudG9wIC09IHRoaXMucGFyc2VTdHlsZShlbGVtU3R5bGUubWFyZ2luVG9wKTsKICAgICAgICAgIGVsZW1PZmZzZXQubGVmdCAtPSB0aGlzLnBhcnNlU3R5bGUoZWxlbVN0eWxlLm1hcmdpbkxlZnQpOwogICAgICAgIH0KICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5vZmZzZXRQYXJlbnQoZWxlbSk7CiAgICAgICAgdmFyIHBhcmVudE9mZnNldCA9IHt0b3A6IDAsIGxlZnQ6IDB9OwoKICAgICAgICBpZiAocGFyZW50ICE9PSAkZG9jdW1lbnRbMF0uZG9jdW1lbnRFbGVtZW50KSB7CiAgICAgICAgICBwYXJlbnRPZmZzZXQgPSB0aGlzLm9mZnNldChwYXJlbnQpOwogICAgICAgICAgcGFyZW50T2Zmc2V0LnRvcCArPSBwYXJlbnQuY2xpZW50VG9wIC0gcGFyZW50LnNjcm9sbFRvcDsKICAgICAgICAgIHBhcmVudE9mZnNldC5sZWZ0ICs9IHBhcmVudC5jbGllbnRMZWZ0IC0gcGFyZW50LnNjcm9sbExlZnQ7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gewogICAgICAgICAgd2lkdGg6IE1hdGgucm91bmQoYW5ndWxhci5pc051bWJlcihlbGVtT2Zmc2V0LndpZHRoKSA/IGVsZW1PZmZzZXQud2lkdGggOiBlbGVtLm9mZnNldFdpZHRoKSwKICAgICAgICAgIGhlaWdodDogTWF0aC5yb3VuZChhbmd1bGFyLmlzTnVtYmVyKGVsZW1PZmZzZXQuaGVpZ2h0KSA/IGVsZW1PZmZzZXQuaGVpZ2h0IDogZWxlbS5vZmZzZXRIZWlnaHQpLAogICAgICAgICAgdG9wOiBNYXRoLnJvdW5kKGVsZW1PZmZzZXQudG9wIC0gcGFyZW50T2Zmc2V0LnRvcCksCiAgICAgICAgICBsZWZ0OiBNYXRoLnJvdW5kKGVsZW1PZmZzZXQubGVmdCAtIHBhcmVudE9mZnNldC5sZWZ0KQogICAgICAgIH07CiAgICAgIH0sCgogICAgICAvKioKICAgICAgICogUHJvdmlkZXMgcmVhZC1vbmx5IGVxdWl2YWxlbnQgb2YgalF1ZXJ5J3Mgb2Zmc2V0IGZ1bmN0aW9uOgogICAgICAgKiBodHRwOi8vYXBpLmpxdWVyeS5jb20vb2Zmc2V0LyAtIGRpc3RhbmNlIHRvIHZpZXdwb3J0LiAgRG9lcwogICAgICAgKiBub3QgYWNjb3VudCBmb3IgYm9yZGVycywgbWFyZ2lucywgb3IgcGFkZGluZyBvbiB0aGUgYm9keQogICAgICAgKiBlbGVtZW50LgogICAgICAgKgogICAgICAgKiBAcGFyYW0ge2VsZW1lbnR9IGVsZW0gLSBUaGUgZWxlbWVudCB0byBjYWxjdWxhdGUgdGhlIG9mZnNldCBvbi4KICAgICAgICoKICAgICAgICogQHJldHVybnMge29iamVjdH0gQW4gb2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOgogICAgICAgKiAgIDx1bD4KICAgICAgICogICAgIDxsaT4qKndpZHRoKio6IHRoZSB3aWR0aCBvZiB0aGUgZWxlbWVudDwvbGk+CiAgICAgICAqICAgICA8bGk+KipoZWlnaHQqKjogdGhlIGhlaWdodCBvZiB0aGUgZWxlbWVudDwvbGk+CiAgICAgICAqICAgICA8bGk+Kip0b3AqKjogZGlzdGFuY2UgdG8gdG9wIGVkZ2Ugb2Ygdmlld3BvcnQ8L2xpPgogICAgICAgKiAgICAgPGxpPioqcmlnaHQqKjogZGlzdGFuY2UgdG8gYm90dG9tIGVkZ2Ugb2Ygdmlld3BvcnQ8L2xpPgogICAgICAgKiAgIDwvdWw+CiAgICAgICAqLwogICAgICBvZmZzZXQ6IGZ1bmN0aW9uKGVsZW0pIHsKICAgICAgICBlbGVtID0gdGhpcy5nZXRSYXdOb2RlKGVsZW0pOwoKICAgICAgICB2YXIgZWxlbUJDUiA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHdpZHRoOiBNYXRoLnJvdW5kKGFuZ3VsYXIuaXNOdW1iZXIoZWxlbUJDUi53aWR0aCkgPyBlbGVtQkNSLndpZHRoIDogZWxlbS5vZmZzZXRXaWR0aCksCiAgICAgICAgICBoZWlnaHQ6IE1hdGgucm91bmQoYW5ndWxhci5pc051bWJlcihlbGVtQkNSLmhlaWdodCkgPyBlbGVtQkNSLmhlaWdodCA6IGVsZW0ub2Zmc2V0SGVpZ2h0KSwKICAgICAgICAgIHRvcDogTWF0aC5yb3VuZChlbGVtQkNSLnRvcCArICgkd2luZG93LnBhZ2VZT2Zmc2V0IHx8ICRkb2N1bWVudFswXS5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wKSksCiAgICAgICAgICBsZWZ0OiBNYXRoLnJvdW5kKGVsZW1CQ1IubGVmdCArICgkd2luZG93LnBhZ2VYT2Zmc2V0IHx8ICRkb2N1bWVudFswXS5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCkpCiAgICAgICAgfTsKICAgICAgfSwKCiAgICAgIC8qKgogICAgICAgKiBQcm92aWRlcyBvZmZzZXQgZGlzdGFuY2UgdG8gdGhlIGNsb3Nlc3Qgc2Nyb2xsYWJsZSBhbmNlc3RvcgogICAgICAgKiBvciB2aWV3cG9ydC4gIEFjY291bnRzIGZvciBib3JkZXIgYW5kIHNjcm9sbGJhciB3aWR0aC4KICAgICAgICoKICAgICAgICogUmlnaHQgYW5kIGJvdHRvbSBkaW1lbnNpb25zIHJlcHJlc2VudCB0aGUgZGlzdGFuY2UgdG8gdGhlCiAgICAgICAqIHJlc3BlY3RpdmUgZWRnZSBvZiB0aGUgdmlld3BvcnQgZWxlbWVudC4gIElmIHRoZSBlbGVtZW50CiAgICAgICAqIGVkZ2UgZXh0ZW5kcyBiZXlvbmQgdGhlIHZpZXdwb3J0LCBhIG5lZ2F0aXZlIHZhbHVlIHdpbGwgYmUKICAgICAgICogcmVwb3J0ZWQuCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7ZWxlbWVudH0gZWxlbSAtIFRoZSBlbGVtZW50IHRvIGdldCB0aGUgdmlld3BvcnQgb2Zmc2V0IGZvci4KICAgICAgICogQHBhcmFtIHtib29sZWFuPX0gW3VzZURvY3VtZW50PWZhbHNlXSAtIFNob3VsZCB0aGUgdmlld3BvcnQgYmUgdGhlIGRvY3VtZW50IGVsZW1lbnQgaW5zdGVhZAogICAgICAgKiBvZiB0aGUgZmlyc3Qgc2Nyb2xsYWJsZSBlbGVtZW50LCBkZWZhdWx0IGlzIGZhbHNlLgogICAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBbaW5jbHVkZVBhZGRpbmc9dHJ1ZV0gLSBTaG91bGQgdGhlIHBhZGRpbmcgb24gdGhlIG9mZnNldCBwYXJlbnQgZWxlbWVudAogICAgICAgKiBiZSBhY2NvdW50ZWQgZm9yLCBkZWZhdWx0IGlzIHRydWUuCiAgICAgICAqCiAgICAgICAqIEByZXR1cm5zIHtvYmplY3R9IEFuIG9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczoKICAgICAgICogICA8dWw+CiAgICAgICAqICAgICA8bGk+Kip0b3AqKjogZGlzdGFuY2UgdG8gdGhlIHRvcCBjb250ZW50IGVkZ2Ugb2Ygdmlld3BvcnQgZWxlbWVudDwvbGk+CiAgICAgICAqICAgICA8bGk+Kipib3R0b20qKjogZGlzdGFuY2UgdG8gdGhlIGJvdHRvbSBjb250ZW50IGVkZ2Ugb2Ygdmlld3BvcnQgZWxlbWVudDwvbGk+CiAgICAgICAqICAgICA8bGk+KipsZWZ0Kio6IGRpc3RhbmNlIHRvIHRoZSBsZWZ0IGNvbnRlbnQgZWRnZSBvZiB2aWV3cG9ydCBlbGVtZW50PC9saT4KICAgICAgICogICAgIDxsaT4qKnJpZ2h0Kio6IGRpc3RhbmNlIHRvIHRoZSByaWdodCBjb250ZW50IGVkZ2Ugb2Ygdmlld3BvcnQgZWxlbWVudDwvbGk+CiAgICAgICAqICAgPC91bD4KICAgICAgICovCiAgICAgIHZpZXdwb3J0T2Zmc2V0OiBmdW5jdGlvbihlbGVtLCB1c2VEb2N1bWVudCwgaW5jbHVkZVBhZGRpbmcpIHsKICAgICAgICBlbGVtID0gdGhpcy5nZXRSYXdOb2RlKGVsZW0pOwogICAgICAgIGluY2x1ZGVQYWRkaW5nID0gaW5jbHVkZVBhZGRpbmcgIT09IGZhbHNlID8gdHJ1ZSA6IGZhbHNlOwoKICAgICAgICB2YXIgZWxlbUJDUiA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgdmFyIG9mZnNldEJDUiA9IHt0b3A6IDAsIGxlZnQ6IDAsIGJvdHRvbTogMCwgcmlnaHQ6IDB9OwoKICAgICAgICB2YXIgb2Zmc2V0UGFyZW50ID0gdXNlRG9jdW1lbnQgPyAkZG9jdW1lbnRbMF0uZG9jdW1lbnRFbGVtZW50IDogdGhpcy5zY3JvbGxQYXJlbnQoZWxlbSk7CiAgICAgICAgdmFyIG9mZnNldFBhcmVudEJDUiA9IG9mZnNldFBhcmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKCiAgICAgICAgb2Zmc2V0QkNSLnRvcCA9IG9mZnNldFBhcmVudEJDUi50b3AgKyBvZmZzZXRQYXJlbnQuY2xpZW50VG9wOwogICAgICAgIG9mZnNldEJDUi5sZWZ0ID0gb2Zmc2V0UGFyZW50QkNSLmxlZnQgKyBvZmZzZXRQYXJlbnQuY2xpZW50TGVmdDsKICAgICAgICBpZiAob2Zmc2V0UGFyZW50ID09PSAkZG9jdW1lbnRbMF0uZG9jdW1lbnRFbGVtZW50KSB7CiAgICAgICAgICBvZmZzZXRCQ1IudG9wICs9ICR3aW5kb3cucGFnZVlPZmZzZXQ7CiAgICAgICAgICBvZmZzZXRCQ1IubGVmdCArPSAkd2luZG93LnBhZ2VYT2Zmc2V0OwogICAgICAgIH0KICAgICAgICBvZmZzZXRCQ1IuYm90dG9tID0gb2Zmc2V0QkNSLnRvcCArIG9mZnNldFBhcmVudC5jbGllbnRIZWlnaHQ7CiAgICAgICAgb2Zmc2V0QkNSLnJpZ2h0ID0gb2Zmc2V0QkNSLmxlZnQgKyBvZmZzZXRQYXJlbnQuY2xpZW50V2lkdGg7CgogICAgICAgIGlmIChpbmNsdWRlUGFkZGluZykgewogICAgICAgICAgdmFyIG9mZnNldFBhcmVudFN0eWxlID0gJHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKG9mZnNldFBhcmVudCk7CiAgICAgICAgICBvZmZzZXRCQ1IudG9wICs9IHRoaXMucGFyc2VTdHlsZShvZmZzZXRQYXJlbnRTdHlsZS5wYWRkaW5nVG9wKTsKICAgICAgICAgIG9mZnNldEJDUi5ib3R0b20gLT0gdGhpcy5wYXJzZVN0eWxlKG9mZnNldFBhcmVudFN0eWxlLnBhZGRpbmdCb3R0b20pOwogICAgICAgICAgb2Zmc2V0QkNSLmxlZnQgKz0gdGhpcy5wYXJzZVN0eWxlKG9mZnNldFBhcmVudFN0eWxlLnBhZGRpbmdMZWZ0KTsKICAgICAgICAgIG9mZnNldEJDUi5yaWdodCAtPSB0aGlzLnBhcnNlU3R5bGUob2Zmc2V0UGFyZW50U3R5bGUucGFkZGluZ1JpZ2h0KTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB7CiAgICAgICAgICB0b3A6IE1hdGgucm91bmQoZWxlbUJDUi50b3AgLSBvZmZzZXRCQ1IudG9wKSwKICAgICAgICAgIGJvdHRvbTogTWF0aC5yb3VuZChvZmZzZXRCQ1IuYm90dG9tIC0gZWxlbUJDUi5ib3R0b20pLAogICAgICAgICAgbGVmdDogTWF0aC5yb3VuZChlbGVtQkNSLmxlZnQgLSBvZmZzZXRCQ1IubGVmdCksCiAgICAgICAgICByaWdodDogTWF0aC5yb3VuZChvZmZzZXRCQ1IucmlnaHQgLSBlbGVtQkNSLnJpZ2h0KQogICAgICAgIH07CiAgICAgIH0sCgogICAgICAvKioKICAgICAgICogUHJvdmlkZXMgYW4gYXJyYXkgb2YgcGxhY2VtZW50IHZhbHVlcyBwYXJzZWQgZnJvbSBhIHBsYWNlbWVudCBzdHJpbmcuCiAgICAgICAqIEFsb25nIHdpdGggdGhlICdhdXRvJyBpbmRpY2F0b3IsIHN1cHBvcnRlZCBwbGFjZW1lbnQgc3RyaW5ncyBhcmU6CiAgICAgICAqICAgPHVsPgogICAgICAgKiAgICAgPGxpPnRvcDogZWxlbWVudCBvbiB0b3AsIGhvcml6b250YWxseSBjZW50ZXJlZCBvbiBob3N0IGVsZW1lbnQuPC9saT4KICAgICAgICogICAgIDxsaT50b3AtbGVmdDogZWxlbWVudCBvbiB0b3AsIGxlZnQgZWRnZSBhbGlnbmVkIHdpdGggaG9zdCBlbGVtZW50IGxlZnQgZWRnZS48L2xpPgogICAgICAgKiAgICAgPGxpPnRvcC1yaWdodDogZWxlbWVudCBvbiB0b3AsIGxlcmlnaHRmdCBlZGdlIGFsaWduZWQgd2l0aCBob3N0IGVsZW1lbnQgcmlnaHQgZWRnZS48L2xpPgogICAgICAgKiAgICAgPGxpPmJvdHRvbTogZWxlbWVudCBvbiBib3R0b20sIGhvcml6b250YWxseSBjZW50ZXJlZCBvbiBob3N0IGVsZW1lbnQuPC9saT4KICAgICAgICogICAgIDxsaT5ib3R0b20tbGVmdDogZWxlbWVudCBvbiBib3R0b20sIGxlZnQgZWRnZSBhbGlnbmVkIHdpdGggaG9zdCBlbGVtZW50IGxlZnQgZWRnZS48L2xpPgogICAgICAgKiAgICAgPGxpPmJvdHRvbS1yaWdodDogZWxlbWVudCBvbiBib3R0b20sIHJpZ2h0IGVkZ2UgYWxpZ25lZCB3aXRoIGhvc3QgZWxlbWVudCByaWdodCBlZGdlLjwvbGk+CiAgICAgICAqICAgICA8bGk+bGVmdDogZWxlbWVudCBvbiBsZWZ0LCB2ZXJ0aWNhbGx5IGNlbnRlcmVkIG9uIGhvc3QgZWxlbWVudC48L2xpPgogICAgICAgKiAgICAgPGxpPmxlZnQtdG9wOiBlbGVtZW50IG9uIGxlZnQsIHRvcCBlZGdlIGFsaWduZWQgd2l0aCBob3N0IGVsZW1lbnQgdG9wIGVkZ2UuPC9saT4KICAgICAgICogICAgIDxsaT5sZWZ0LWJvdHRvbTogZWxlbWVudCBvbiBsZWZ0LCBib3R0b20gZWRnZSBhbGlnbmVkIHdpdGggaG9zdCBlbGVtZW50IGJvdHRvbSBlZGdlLjwvbGk+CiAgICAgICAqICAgICA8bGk+cmlnaHQ6IGVsZW1lbnQgb24gcmlnaHQsIHZlcnRpY2FsbHkgY2VudGVyZWQgb24gaG9zdCBlbGVtZW50LjwvbGk+CiAgICAgICAqICAgICA8bGk+cmlnaHQtdG9wOiBlbGVtZW50IG9uIHJpZ2h0LCB0b3AgZWRnZSBhbGlnbmVkIHdpdGggaG9zdCBlbGVtZW50IHRvcCBlZGdlLjwvbGk+CiAgICAgICAqICAgICA8bGk+cmlnaHQtYm90dG9tOiBlbGVtZW50IG9uIHJpZ2h0LCBib3R0b20gZWRnZSBhbGlnbmVkIHdpdGggaG9zdCBlbGVtZW50IGJvdHRvbSBlZGdlLjwvbGk+CiAgICAgICAqICAgPC91bD4KICAgICAgICogQSBwbGFjZW1lbnQgc3RyaW5nIHdpdGggYW4gJ2F1dG8nIGluZGljYXRvciBpcyBleHBlY3RlZCB0byBiZQogICAgICAgKiBzcGFjZSBzZXBhcmF0ZWQgZnJvbSB0aGUgcGxhY2VtZW50LCBpLmU6ICdhdXRvIGJvdHRvbS1sZWZ0JyAgSWYKICAgICAgICogdGhlIHByaW1hcnkgYW5kIHNlY29uZGFyeSBwbGFjZW1lbnQgdmFsdWVzIGRvIG5vdCBtYXRjaCAndG9wLAogICAgICAgKiBib3R0b20sIGxlZnQsIHJpZ2h0JyB0aGVuICd0b3AnIHdpbGwgYmUgdGhlIHByaW1hcnkgcGxhY2VtZW50IGFuZAogICAgICAgKiAnY2VudGVyJyB3aWxsIGJlIHRoZSBzZWNvbmRhcnkgcGxhY2VtZW50LiAgSWYgJ2F1dG8nIGlzIHBhc3NlZCwgdHJ1ZQogICAgICAgKiB3aWxsIGJlIHJldHVybmVkIGFzIHRoZSAzcmQgdmFsdWUgb2YgdGhlIGFycmF5LgogICAgICAgKgogICAgICAgKiBAcGFyYW0ge3N0cmluZ30gcGxhY2VtZW50IC0gVGhlIHBsYWNlbWVudCBzdHJpbmcgdG8gcGFyc2UuCiAgICAgICAqCiAgICAgICAqIEByZXR1cm5zIHthcnJheX0gQW4gYXJyYXkgd2l0aCB0aGUgZm9sbG93aW5nIHZhbHVlcwogICAgICAgKiA8dWw+CiAgICAgICAqICAgPGxpPioqWzBdKio6IFRoZSBwcmltYXJ5IHBsYWNlbWVudC48L2xpPgogICAgICAgKiAgIDxsaT4qKlsxXSoqOiBUaGUgc2Vjb25kYXJ5IHBsYWNlbWVudC48L2xpPgogICAgICAgKiAgIDxsaT4qKlsyXSoqOiBJZiBhdXRvIGlzIHBhc3NlZDogdHJ1ZSwgZWxzZSB1bmRlZmluZWQuPC9saT4KICAgICAgICogPC91bD4KICAgICAgICovCiAgICAgIHBhcnNlUGxhY2VtZW50OiBmdW5jdGlvbihwbGFjZW1lbnQpIHsKICAgICAgICB2YXIgYXV0b1BsYWNlID0gUExBQ0VNRU5UX1JFR0VYLmF1dG8udGVzdChwbGFjZW1lbnQpOwogICAgICAgIGlmIChhdXRvUGxhY2UpIHsKICAgICAgICAgIHBsYWNlbWVudCA9IHBsYWNlbWVudC5yZXBsYWNlKFBMQUNFTUVOVF9SRUdFWC5hdXRvLCAnJyk7CiAgICAgICAgfQoKICAgICAgICBwbGFjZW1lbnQgPSBwbGFjZW1lbnQuc3BsaXQoJy0nKTsKCiAgICAgICAgcGxhY2VtZW50WzBdID0gcGxhY2VtZW50WzBdIHx8ICd0b3AnOwogICAgICAgIGlmICghUExBQ0VNRU5UX1JFR0VYLnByaW1hcnkudGVzdChwbGFjZW1lbnRbMF0pKSB7CiAgICAgICAgICBwbGFjZW1lbnRbMF0gPSAndG9wJzsKICAgICAgICB9CgogICAgICAgIHBsYWNlbWVudFsxXSA9IHBsYWNlbWVudFsxXSB8fCAnY2VudGVyJzsKICAgICAgICBpZiAoIVBMQUNFTUVOVF9SRUdFWC5zZWNvbmRhcnkudGVzdChwbGFjZW1lbnRbMV0pKSB7CiAgICAgICAgICBwbGFjZW1lbnRbMV0gPSAnY2VudGVyJzsKICAgICAgICB9CgogICAgICAgIGlmIChhdXRvUGxhY2UpIHsKICAgICAgICAgIHBsYWNlbWVudFsyXSA9IHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHBsYWNlbWVudFsyXSA9IGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHBsYWNlbWVudDsKICAgICAgfSwKCiAgICAgIC8qKgogICAgICAgKiBQcm92aWRlcyBjb29yZGluYXRlcyBmb3IgYW4gZWxlbWVudCB0byBiZSBwb3NpdGlvbmVkIHJlbGF0aXZlIHRvCiAgICAgICAqIGFub3RoZXIgZWxlbWVudC4gIFBhc3NpbmcgJ2F1dG8nIGFzIHBhcnQgb2YgdGhlIHBsYWNlbWVudCBwYXJhbWV0ZXIKICAgICAgICogd2lsbCBlbmFibGUgc21hcnQgcGxhY2VtZW50IC0gd2hlcmUgdGhlIGVsZW1lbnQgZml0cy4gaS5lOgogICAgICAgKiAnYXV0byBsZWZ0LXRvcCcgd2lsbCBjaGVjayB0byBzZWUgaWYgdGhlcmUgaXMgZW5vdWdoIHNwYWNlIHRvIHRoZSBsZWZ0CiAgICAgICAqIG9mIHRoZSBob3N0RWxlbSB0byBmaXQgdGhlIHRhcmdldEVsZW0sIGlmIG5vdCBwbGFjZSByaWdodCAoc2FtZSBmb3Igc2Vjb25kYXJ5CiAgICAgICAqIHRvcCBwbGFjZW1lbnQpLiAgQXZhaWxhYmxlIHNwYWNlIGlzIGNhbGN1bGF0ZWQgdXNpbmcgdGhlIHZpZXdwb3J0T2Zmc2V0CiAgICAgICAqIGZ1bmN0aW9uLgogICAgICAgKgogICAgICAgKiBAcGFyYW0ge2VsZW1lbnR9IGhvc3RFbGVtIC0gVGhlIGVsZW1lbnQgdG8gcG9zaXRpb24gYWdhaW5zdC4KICAgICAgICogQHBhcmFtIHtlbGVtZW50fSB0YXJnZXRFbGVtIC0gVGhlIGVsZW1lbnQgdG8gcG9zaXRpb24uCiAgICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gW3BsYWNlbWVudD10b3BdIC0gVGhlIHBsYWNlbWVudCBmb3IgdGhlIHRhcmdldEVsZW0sCiAgICAgICAqICAgZGVmYXVsdCBpcyAndG9wJy4gJ2NlbnRlcicgaXMgYXNzdW1lZCBhcyBzZWNvbmRhcnkgcGxhY2VtZW50IGZvcgogICAgICAgKiAgICd0b3AnLCAnbGVmdCcsICdyaWdodCcsIGFuZCAnYm90dG9tJyBwbGFjZW1lbnRzLiAgQXZhaWxhYmxlIHBsYWNlbWVudHMgYXJlOgogICAgICAgKiAgIDx1bD4KICAgICAgICogICAgIDxsaT50b3A8L2xpPgogICAgICAgKiAgICAgPGxpPnRvcC1yaWdodDwvbGk+CiAgICAgICAqICAgICA8bGk+dG9wLWxlZnQ8L2xpPgogICAgICAgKiAgICAgPGxpPmJvdHRvbTwvbGk+CiAgICAgICAqICAgICA8bGk+Ym90dG9tLWxlZnQ8L2xpPgogICAgICAgKiAgICAgPGxpPmJvdHRvbS1yaWdodDwvbGk+CiAgICAgICAqICAgICA8bGk+bGVmdDwvbGk+CiAgICAgICAqICAgICA8bGk+bGVmdC10b3A8L2xpPgogICAgICAgKiAgICAgPGxpPmxlZnQtYm90dG9tPC9saT4KICAgICAgICogICAgIDxsaT5yaWdodDwvbGk+CiAgICAgICAqICAgICA8bGk+cmlnaHQtdG9wPC9saT4KICAgICAgICogICAgIDxsaT5yaWdodC1ib3R0b208L2xpPgogICAgICAgKiAgIDwvdWw+CiAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IFthcHBlbmRUb0JvZHk9ZmFsc2VdIC0gU2hvdWxkIHRoZSB0b3AgYW5kIGxlZnQgdmFsdWVzIHJldHVybmVkCiAgICAgICAqICAgYmUgY2FsY3VsYXRlZCBmcm9tIHRoZSBib2R5IGVsZW1lbnQsIGRlZmF1bHQgaXMgZmFsc2UuCiAgICAgICAqCiAgICAgICAqIEByZXR1cm5zIHtvYmplY3R9IEFuIG9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczoKICAgICAgICogICA8dWw+CiAgICAgICAqICAgICA8bGk+Kip0b3AqKjogVmFsdWUgZm9yIHRhcmdldEVsZW0gdG9wLjwvbGk+CiAgICAgICAqICAgICA8bGk+KipsZWZ0Kio6IFZhbHVlIGZvciB0YXJnZXRFbGVtIGxlZnQuPC9saT4KICAgICAgICogICAgIDxsaT4qKnBsYWNlbWVudCoqOiBUaGUgcmVzb2x2ZWQgcGxhY2VtZW50LjwvbGk+CiAgICAgICAqICAgPC91bD4KICAgICAgICovCiAgICAgIHBvc2l0aW9uRWxlbWVudHM6IGZ1bmN0aW9uKGhvc3RFbGVtLCB0YXJnZXRFbGVtLCBwbGFjZW1lbnQsIGFwcGVuZFRvQm9keSkgewogICAgICAgIGhvc3RFbGVtID0gdGhpcy5nZXRSYXdOb2RlKGhvc3RFbGVtKTsKICAgICAgICB0YXJnZXRFbGVtID0gdGhpcy5nZXRSYXdOb2RlKHRhcmdldEVsZW0pOwoKICAgICAgICAvLyBuZWVkIHRvIHJlYWQgZnJvbSBwcm9wIHRvIHN1cHBvcnQgdGVzdHMuCiAgICAgICAgdmFyIHRhcmdldFdpZHRoID0gYW5ndWxhci5pc0RlZmluZWQodGFyZ2V0RWxlbS5vZmZzZXRXaWR0aCkgPyB0YXJnZXRFbGVtLm9mZnNldFdpZHRoIDogdGFyZ2V0RWxlbS5wcm9wKCdvZmZzZXRXaWR0aCcpOwogICAgICAgIHZhciB0YXJnZXRIZWlnaHQgPSBhbmd1bGFyLmlzRGVmaW5lZCh0YXJnZXRFbGVtLm9mZnNldEhlaWdodCkgPyB0YXJnZXRFbGVtLm9mZnNldEhlaWdodCA6IHRhcmdldEVsZW0ucHJvcCgnb2Zmc2V0SGVpZ2h0Jyk7CgogICAgICAgIHBsYWNlbWVudCA9IHRoaXMucGFyc2VQbGFjZW1lbnQocGxhY2VtZW50KTsKCiAgICAgICAgdmFyIGhvc3RFbGVtUG9zID0gYXBwZW5kVG9Cb2R5ID8gdGhpcy5vZmZzZXQoaG9zdEVsZW0pIDogdGhpcy5wb3NpdGlvbihob3N0RWxlbSk7CiAgICAgICAgdmFyIHRhcmdldEVsZW1Qb3MgPSB7dG9wOiAwLCBsZWZ0OiAwLCBwbGFjZW1lbnQ6ICcnfTsKCiAgICAgICAgaWYgKHBsYWNlbWVudFsyXSkgewogICAgICAgICAgdmFyIHZpZXdwb3J0T2Zmc2V0ID0gdGhpcy52aWV3cG9ydE9mZnNldChob3N0RWxlbSwgYXBwZW5kVG9Cb2R5KTsKCiAgICAgICAgICB2YXIgdGFyZ2V0RWxlbVN0eWxlID0gJHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRhcmdldEVsZW0pOwogICAgICAgICAgdmFyIGFkanVzdGVkU2l6ZSA9IHsKICAgICAgICAgICAgd2lkdGg6IHRhcmdldFdpZHRoICsgTWF0aC5yb3VuZChNYXRoLmFicyh0aGlzLnBhcnNlU3R5bGUodGFyZ2V0RWxlbVN0eWxlLm1hcmdpbkxlZnQpICsgdGhpcy5wYXJzZVN0eWxlKHRhcmdldEVsZW1TdHlsZS5tYXJnaW5SaWdodCkpKSwKICAgICAgICAgICAgaGVpZ2h0OiB0YXJnZXRIZWlnaHQgKyBNYXRoLnJvdW5kKE1hdGguYWJzKHRoaXMucGFyc2VTdHlsZSh0YXJnZXRFbGVtU3R5bGUubWFyZ2luVG9wKSArIHRoaXMucGFyc2VTdHlsZSh0YXJnZXRFbGVtU3R5bGUubWFyZ2luQm90dG9tKSkpCiAgICAgICAgICB9OwoKICAgICAgICAgIHBsYWNlbWVudFswXSA9IHBsYWNlbWVudFswXSA9PT0gJ3RvcCcgJiYgYWRqdXN0ZWRTaXplLmhlaWdodCA+IHZpZXdwb3J0T2Zmc2V0LnRvcCAmJiBhZGp1c3RlZFNpemUuaGVpZ2h0IDw9IHZpZXdwb3J0T2Zmc2V0LmJvdHRvbSA/ICdib3R0b20nIDoKICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudFswXSA9PT0gJ2JvdHRvbScgJiYgYWRqdXN0ZWRTaXplLmhlaWdodCA+IHZpZXdwb3J0T2Zmc2V0LmJvdHRvbSAmJiBhZGp1c3RlZFNpemUuaGVpZ2h0IDw9IHZpZXdwb3J0T2Zmc2V0LnRvcCA/ICd0b3AnIDoKICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudFswXSA9PT0gJ2xlZnQnICYmIGFkanVzdGVkU2l6ZS53aWR0aCA+IHZpZXdwb3J0T2Zmc2V0LmxlZnQgJiYgYWRqdXN0ZWRTaXplLndpZHRoIDw9IHZpZXdwb3J0T2Zmc2V0LnJpZ2h0ID8gJ3JpZ2h0JyA6CiAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnRbMF0gPT09ICdyaWdodCcgJiYgYWRqdXN0ZWRTaXplLndpZHRoID4gdmlld3BvcnRPZmZzZXQucmlnaHQgJiYgYWRqdXN0ZWRTaXplLndpZHRoIDw9IHZpZXdwb3J0T2Zmc2V0LmxlZnQgPyAnbGVmdCcgOgogICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50WzBdOwoKICAgICAgICAgIHBsYWNlbWVudFsxXSA9IHBsYWNlbWVudFsxXSA9PT0gJ3RvcCcgJiYgYWRqdXN0ZWRTaXplLmhlaWdodCAtIGhvc3RFbGVtUG9zLmhlaWdodCA+IHZpZXdwb3J0T2Zmc2V0LmJvdHRvbSAmJiBhZGp1c3RlZFNpemUuaGVpZ2h0IC0gaG9zdEVsZW1Qb3MuaGVpZ2h0IDw9IHZpZXdwb3J0T2Zmc2V0LnRvcCA/ICdib3R0b20nIDoKICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudFsxXSA9PT0gJ2JvdHRvbScgJiYgYWRqdXN0ZWRTaXplLmhlaWdodCAtIGhvc3RFbGVtUG9zLmhlaWdodCA+IHZpZXdwb3J0T2Zmc2V0LnRvcCAmJiBhZGp1c3RlZFNpemUuaGVpZ2h0IC0gaG9zdEVsZW1Qb3MuaGVpZ2h0IDw9IHZpZXdwb3J0T2Zmc2V0LmJvdHRvbSA/ICd0b3AnIDoKICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudFsxXSA9PT0gJ2xlZnQnICYmIGFkanVzdGVkU2l6ZS53aWR0aCAtIGhvc3RFbGVtUG9zLndpZHRoID4gdmlld3BvcnRPZmZzZXQucmlnaHQgJiYgYWRqdXN0ZWRTaXplLndpZHRoIC0gaG9zdEVsZW1Qb3Mud2lkdGggPD0gdmlld3BvcnRPZmZzZXQubGVmdCA/ICdyaWdodCcgOgogICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50WzFdID09PSAncmlnaHQnICYmIGFkanVzdGVkU2l6ZS53aWR0aCAtIGhvc3RFbGVtUG9zLndpZHRoID4gdmlld3BvcnRPZmZzZXQubGVmdCAmJiBhZGp1c3RlZFNpemUud2lkdGggLSBob3N0RWxlbVBvcy53aWR0aCA8PSB2aWV3cG9ydE9mZnNldC5yaWdodCA/ICdsZWZ0JyA6CiAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnRbMV07CgogICAgICAgICAgaWYgKHBsYWNlbWVudFsxXSA9PT0gJ2NlbnRlcicpIHsKICAgICAgICAgICAgaWYgKFBMQUNFTUVOVF9SRUdFWC52ZXJ0aWNhbC50ZXN0KHBsYWNlbWVudFswXSkpIHsKICAgICAgICAgICAgICB2YXIgeE92ZXJmbG93ID0gaG9zdEVsZW1Qb3Mud2lkdGggLyAyIC0gdGFyZ2V0V2lkdGggLyAyOwogICAgICAgICAgICAgIGlmICh2aWV3cG9ydE9mZnNldC5sZWZ0ICsgeE92ZXJmbG93IDwgMCAmJiBhZGp1c3RlZFNpemUud2lkdGggLSBob3N0RWxlbVBvcy53aWR0aCA8PSB2aWV3cG9ydE9mZnNldC5yaWdodCkgewogICAgICAgICAgICAgICAgcGxhY2VtZW50WzFdID0gJ2xlZnQnOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAodmlld3BvcnRPZmZzZXQucmlnaHQgKyB4T3ZlcmZsb3cgPCAwICYmIGFkanVzdGVkU2l6ZS53aWR0aCAtIGhvc3RFbGVtUG9zLndpZHRoIDw9IHZpZXdwb3J0T2Zmc2V0LmxlZnQpIHsKICAgICAgICAgICAgICAgIHBsYWNlbWVudFsxXSA9ICdyaWdodCc7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHZhciB5T3ZlcmZsb3cgPSBob3N0RWxlbVBvcy5oZWlnaHQgLyAyIC0gYWRqdXN0ZWRTaXplLmhlaWdodCAvIDI7CiAgICAgICAgICAgICAgaWYgKHZpZXdwb3J0T2Zmc2V0LnRvcCArIHlPdmVyZmxvdyA8IDAgJiYgYWRqdXN0ZWRTaXplLmhlaWdodCAtIGhvc3RFbGVtUG9zLmhlaWdodCA8PSB2aWV3cG9ydE9mZnNldC5ib3R0b20pIHsKICAgICAgICAgICAgICAgIHBsYWNlbWVudFsxXSA9ICd0b3AnOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAodmlld3BvcnRPZmZzZXQuYm90dG9tICsgeU92ZXJmbG93IDwgMCAmJiBhZGp1c3RlZFNpemUuaGVpZ2h0IC0gaG9zdEVsZW1Qb3MuaGVpZ2h0IDw9IHZpZXdwb3J0T2Zmc2V0LnRvcCkgewogICAgICAgICAgICAgICAgcGxhY2VtZW50WzFdID0gJ2JvdHRvbSc7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBzd2l0Y2ggKHBsYWNlbWVudFswXSkgewogICAgICAgICAgY2FzZSAndG9wJzoKICAgICAgICAgICAgdGFyZ2V0RWxlbVBvcy50b3AgPSBob3N0RWxlbVBvcy50b3AgLSB0YXJnZXRIZWlnaHQ7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAnYm90dG9tJzoKICAgICAgICAgICAgdGFyZ2V0RWxlbVBvcy50b3AgPSBob3N0RWxlbVBvcy50b3AgKyBob3N0RWxlbVBvcy5oZWlnaHQ7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAnbGVmdCc6CiAgICAgICAgICAgIHRhcmdldEVsZW1Qb3MubGVmdCA9IGhvc3RFbGVtUG9zLmxlZnQgLSB0YXJnZXRXaWR0aDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICdyaWdodCc6CiAgICAgICAgICAgIHRhcmdldEVsZW1Qb3MubGVmdCA9IGhvc3RFbGVtUG9zLmxlZnQgKyBob3N0RWxlbVBvcy53aWR0aDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgICBzd2l0Y2ggKHBsYWNlbWVudFsxXSkgewogICAgICAgICAgY2FzZSAndG9wJzoKICAgICAgICAgICAgdGFyZ2V0RWxlbVBvcy50b3AgPSBob3N0RWxlbVBvcy50b3A7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAnYm90dG9tJzoKICAgICAgICAgICAgdGFyZ2V0RWxlbVBvcy50b3AgPSBob3N0RWxlbVBvcy50b3AgKyBob3N0RWxlbVBvcy5oZWlnaHQgLSB0YXJnZXRIZWlnaHQ7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAnbGVmdCc6CiAgICAgICAgICAgIHRhcmdldEVsZW1Qb3MubGVmdCA9IGhvc3RFbGVtUG9zLmxlZnQ7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAncmlnaHQnOgogICAgICAgICAgICB0YXJnZXRFbGVtUG9zLmxlZnQgPSBob3N0RWxlbVBvcy5sZWZ0ICsgaG9zdEVsZW1Qb3Mud2lkdGggLSB0YXJnZXRXaWR0aDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICdjZW50ZXInOgogICAgICAgICAgICBpZiAoUExBQ0VNRU5UX1JFR0VYLnZlcnRpY2FsLnRlc3QocGxhY2VtZW50WzBdKSkgewogICAgICAgICAgICAgIHRhcmdldEVsZW1Qb3MubGVmdCA9IGhvc3RFbGVtUG9zLmxlZnQgKyBob3N0RWxlbVBvcy53aWR0aCAvIDIgLSB0YXJnZXRXaWR0aCAvIDI7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGFyZ2V0RWxlbVBvcy50b3AgPSBob3N0RWxlbVBvcy50b3AgKyBob3N0RWxlbVBvcy5oZWlnaHQgLyAyIC0gdGFyZ2V0SGVpZ2h0IC8gMjsKICAgICAgICAgICAgfQogICAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICAgIHRhcmdldEVsZW1Qb3MudG9wID0gTWF0aC5yb3VuZCh0YXJnZXRFbGVtUG9zLnRvcCk7CiAgICAgICAgdGFyZ2V0RWxlbVBvcy5sZWZ0ID0gTWF0aC5yb3VuZCh0YXJnZXRFbGVtUG9zLmxlZnQpOwogICAgICAgIHRhcmdldEVsZW1Qb3MucGxhY2VtZW50ID0gcGxhY2VtZW50WzFdID09PSAnY2VudGVyJyA/IHBsYWNlbWVudFswXSA6IHBsYWNlbWVudFswXSArICctJyArIHBsYWNlbWVudFsxXTsKCiAgICAgICAgcmV0dXJuIHRhcmdldEVsZW1Qb3M7CiAgICAgIH0sCgogICAgICAvKioKICAgICAgICogUHJvdmlkZXMgYSB3YXkgdG8gYWRqdXN0IHRoZSB0b3AgcG9zaXRpb25pbmcgYWZ0ZXIgZmlyc3QKICAgICAgICogcmVuZGVyIHRvIGNvcnJlY3RseSBhbGlnbiBlbGVtZW50IHRvIHRvcCBhZnRlciBjb250ZW50CiAgICAgICAqIHJlbmRlcmluZyBjYXVzZXMgcmVzaXplZCBlbGVtZW50IGhlaWdodAogICAgICAgKgogICAgICAgKiBAcGFyYW0ge2FycmF5fSBwbGFjZW1lbnRDbGFzc2VzIC0gVGhlIGFycmF5IG9mIHN0cmluZ3Mgb2YgY2xhc3NlcwogICAgICAgKiBlbGVtZW50IHNob3VsZCBoYXZlLgogICAgICAgKiBAcGFyYW0ge29iamVjdH0gY29udGFpbmVyUG9zaXRpb24gLSBUaGUgb2JqZWN0IHdpdGggY29udGFpbmVyCiAgICAgICAqIHBvc2l0aW9uIGluZm9ybWF0aW9uCiAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbml0aWFsSGVpZ2h0IC0gVGhlIGluaXRpYWwgaGVpZ2h0IGZvciB0aGUgZWxlbS4KICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGN1cnJlbnRIZWlnaHQgLSBUaGUgY3VycmVudCBoZWlnaHQgZm9yIHRoZSBlbGVtLgogICAgICAgKi8KICAgICAgYWRqdXN0VG9wOiBmdW5jdGlvbihwbGFjZW1lbnRDbGFzc2VzLCBjb250YWluZXJQb3NpdGlvbiwgaW5pdGlhbEhlaWdodCwgY3VycmVudEhlaWdodCkgewogICAgICAgIGlmIChwbGFjZW1lbnRDbGFzc2VzLmluZGV4T2YoJ3RvcCcpICE9PSAtMSAmJiBpbml0aWFsSGVpZ2h0ICE9PSBjdXJyZW50SGVpZ2h0KSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICB0b3A6IGNvbnRhaW5lclBvc2l0aW9uLnRvcCAtIGN1cnJlbnRIZWlnaHQgKyAncHgnCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSwKCiAgICAgIC8qKgogICAgICAgKiBQcm92aWRlcyBhIHdheSBmb3IgcG9zaXRpb25pbmcgdG9vbHRpcCAmIGRyb3Bkb3duCiAgICAgICAqIGFycm93cyB3aGVuIHVzaW5nIHBsYWNlbWVudCBvcHRpb25zIGJleW9uZCB0aGUgc3RhbmRhcmQKICAgICAgICogbGVmdCwgcmlnaHQsIHRvcCwgb3IgYm90dG9tLgogICAgICAgKgogICAgICAgKiBAcGFyYW0ge2VsZW1lbnR9IGVsZW0gLSBUaGUgdG9vbHRpcC9kcm9wZG93biBlbGVtZW50LgogICAgICAgKiBAcGFyYW0ge3N0cmluZ30gcGxhY2VtZW50IC0gVGhlIHBsYWNlbWVudCBmb3IgdGhlIGVsZW0uCiAgICAgICAqLwogICAgICBwb3NpdGlvbkFycm93OiBmdW5jdGlvbihlbGVtLCBwbGFjZW1lbnQpIHsKICAgICAgICBlbGVtID0gdGhpcy5nZXRSYXdOb2RlKGVsZW0pOwoKICAgICAgICB2YXIgaW5uZXJFbGVtID0gZWxlbS5xdWVyeVNlbGVjdG9yKCcudG9vbHRpcC1pbm5lciwgLnBvcG92ZXItaW5uZXInKTsKICAgICAgICBpZiAoIWlubmVyRWxlbSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdmFyIGlzVG9vbHRpcCA9IGFuZ3VsYXIuZWxlbWVudChpbm5lckVsZW0pLmhhc0NsYXNzKCd0b29sdGlwLWlubmVyJyk7CgogICAgICAgIHZhciBhcnJvd0VsZW0gPSBpc1Rvb2x0aXAgPyBlbGVtLnF1ZXJ5U2VsZWN0b3IoJy50b29sdGlwLWFycm93JykgOiBlbGVtLnF1ZXJ5U2VsZWN0b3IoJy5hcnJvdycpOwogICAgICAgIGlmICghYXJyb3dFbGVtKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB2YXIgYXJyb3dDc3MgPSB7CiAgICAgICAgICB0b3A6ICcnLAogICAgICAgICAgYm90dG9tOiAnJywKICAgICAgICAgIGxlZnQ6ICcnLAogICAgICAgICAgcmlnaHQ6ICcnCiAgICAgICAgfTsKCiAgICAgICAgcGxhY2VtZW50ID0gdGhpcy5wYXJzZVBsYWNlbWVudChwbGFjZW1lbnQpOwogICAgICAgIGlmIChwbGFjZW1lbnRbMV0gPT09ICdjZW50ZXInKSB7CiAgICAgICAgICAvLyBubyBhZGp1c3RtZW50IG5lY2Vzc2FyeSAtIGp1c3QgcmVzZXQgc3R5bGVzCiAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoYXJyb3dFbGVtKS5jc3MoYXJyb3dDc3MpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdmFyIGJvcmRlclByb3AgPSAnYm9yZGVyLScgKyBwbGFjZW1lbnRbMF0gKyAnLXdpZHRoJzsKICAgICAgICB2YXIgYm9yZGVyV2lkdGggPSAkd2luZG93LmdldENvbXB1dGVkU3R5bGUoYXJyb3dFbGVtKVtib3JkZXJQcm9wXTsKCiAgICAgICAgdmFyIGJvcmRlclJhZGl1c1Byb3AgPSAnYm9yZGVyLSc7CiAgICAgICAgaWYgKFBMQUNFTUVOVF9SRUdFWC52ZXJ0aWNhbC50ZXN0KHBsYWNlbWVudFswXSkpIHsKICAgICAgICAgIGJvcmRlclJhZGl1c1Byb3AgKz0gcGxhY2VtZW50WzBdICsgJy0nICsgcGxhY2VtZW50WzFdOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBib3JkZXJSYWRpdXNQcm9wICs9IHBsYWNlbWVudFsxXSArICctJyArIHBsYWNlbWVudFswXTsKICAgICAgICB9CiAgICAgICAgYm9yZGVyUmFkaXVzUHJvcCArPSAnLXJhZGl1cyc7CiAgICAgICAgdmFyIGJvcmRlclJhZGl1cyA9ICR3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShpc1Rvb2x0aXAgPyBpbm5lckVsZW0gOiBlbGVtKVtib3JkZXJSYWRpdXNQcm9wXTsKCiAgICAgICAgc3dpdGNoIChwbGFjZW1lbnRbMF0pIHsKICAgICAgICAgIGNhc2UgJ3RvcCc6CiAgICAgICAgICAgIGFycm93Q3NzLmJvdHRvbSA9IGlzVG9vbHRpcCA/ICcwJyA6ICctJyArIGJvcmRlcldpZHRoOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgJ2JvdHRvbSc6CiAgICAgICAgICAgIGFycm93Q3NzLnRvcCA9IGlzVG9vbHRpcCA/ICcwJyA6ICctJyArIGJvcmRlcldpZHRoOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgJ2xlZnQnOgogICAgICAgICAgICBhcnJvd0Nzcy5yaWdodCA9IGlzVG9vbHRpcCA/ICcwJyA6ICctJyArIGJvcmRlcldpZHRoOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgJ3JpZ2h0JzoKICAgICAgICAgICAgYXJyb3dDc3MubGVmdCA9IGlzVG9vbHRpcCA/ICcwJyA6ICctJyArIGJvcmRlcldpZHRoOwogICAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICAgIGFycm93Q3NzW3BsYWNlbWVudFsxXV0gPSBib3JkZXJSYWRpdXM7CgogICAgICAgIGFuZ3VsYXIuZWxlbWVudChhcnJvd0VsZW0pLmNzcyhhcnJvd0Nzcyk7CiAgICAgIH0KICAgIH07CiAgfV0pOwoKYW5ndWxhci5tb2R1bGUoJ3VpLmJvb3RzdHJhcC5kYXRlcGlja2VyUG9wdXAnLCBbJ3VpLmJvb3RzdHJhcC5kYXRlcGlja2VyJywgJ3VpLmJvb3RzdHJhcC5wb3NpdGlvbiddKQoKLnZhbHVlKCckZGF0ZXBpY2tlclBvcHVwTGl0ZXJhbFdhcm5pbmcnLCB0cnVlKQoKLmNvbnN0YW50KCd1aWJEYXRlcGlja2VyUG9wdXBDb25maWcnLCB7CiAgYWx0SW5wdXRGb3JtYXRzOiBbXSwKICBhcHBlbmRUb0JvZHk6IGZhbHNlLAogIGNsZWFyVGV4dDogJ0NsZWFyJywKICBjbG9zZU9uRGF0ZVNlbGVjdGlvbjogdHJ1ZSwKICBjbG9zZVRleHQ6ICdEb25lJywKICBjdXJyZW50VGV4dDogJ1RvZGF5JywKICBkYXRlcGlja2VyUG9wdXA6ICd5eXl5LU1NLWRkJywKICBkYXRlcGlja2VyUG9wdXBUZW1wbGF0ZVVybDogJ3VpYi90ZW1wbGF0ZS9kYXRlcGlja2VyUG9wdXAvcG9wdXAuaHRtbCcsCiAgZGF0ZXBpY2tlclRlbXBsYXRlVXJsOiAndWliL3RlbXBsYXRlL2RhdGVwaWNrZXIvZGF0ZXBpY2tlci5odG1sJywKICBodG1sNVR5cGVzOiB7CiAgICBkYXRlOiAneXl5eS1NTS1kZCcsCiAgICAnZGF0ZXRpbWUtbG9jYWwnOiAneXl5eS1NTS1kZFRISDptbTpzcy5zc3MnLAogICAgJ21vbnRoJzogJ3l5eXktTU0nCiAgfSwKICBvbk9wZW5Gb2N1czogdHJ1ZSwKICBzaG93QnV0dG9uQmFyOiB0cnVlLAogIHBsYWNlbWVudDogJ2F1dG8gYm90dG9tLWxlZnQnCn0pCgouY29udHJvbGxlcignVWliRGF0ZXBpY2tlclBvcHVwQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRlbGVtZW50JywgJyRhdHRycycsICckY29tcGlsZScsICckbG9nJywgJyRwYXJzZScsICckd2luZG93JywgJyRkb2N1bWVudCcsICckcm9vdFNjb3BlJywgJyR1aWJQb3NpdGlvbicsICdkYXRlRmlsdGVyJywgJ3VpYkRhdGVQYXJzZXInLCAndWliRGF0ZXBpY2tlclBvcHVwQ29uZmlnJywgJyR0aW1lb3V0JywgJ3VpYkRhdGVwaWNrZXJDb25maWcnLCAnJGRhdGVwaWNrZXJQb3B1cExpdGVyYWxXYXJuaW5nJywKZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzLCAkY29tcGlsZSwgJGxvZywgJHBhcnNlLCAkd2luZG93LCAkZG9jdW1lbnQsICRyb290U2NvcGUsICRwb3NpdGlvbiwgZGF0ZUZpbHRlciwgZGF0ZVBhcnNlciwgZGF0ZXBpY2tlclBvcHVwQ29uZmlnLCAkdGltZW91dCwgZGF0ZXBpY2tlckNvbmZpZywgJGRhdGVwaWNrZXJQb3B1cExpdGVyYWxXYXJuaW5nKSB7CiAgdmFyIGNhY2hlID0ge30sCiAgICBpc0h0bWw1RGF0ZUlucHV0ID0gZmFsc2U7CiAgdmFyIGRhdGVGb3JtYXQsIGNsb3NlT25EYXRlU2VsZWN0aW9uLCBhcHBlbmRUb0JvZHksIG9uT3BlbkZvY3VzLAogICAgZGF0ZXBpY2tlclBvcHVwVGVtcGxhdGVVcmwsIGRhdGVwaWNrZXJUZW1wbGF0ZVVybCwgcG9wdXBFbCwgZGF0ZXBpY2tlckVsLCBzY3JvbGxQYXJlbnRFbCwKICAgIG5nTW9kZWwsIG5nTW9kZWxPcHRpb25zLCAkcG9wdXAsIGFsdElucHV0Rm9ybWF0cywgd2F0Y2hMaXN0ZW5lcnMgPSBbXTsKCiAgdGhpcy5pbml0ID0gZnVuY3Rpb24oX25nTW9kZWxfKSB7CiAgICBuZ01vZGVsID0gX25nTW9kZWxfOwogICAgbmdNb2RlbE9wdGlvbnMgPSBhbmd1bGFyLmlzT2JqZWN0KF9uZ01vZGVsXy4kb3B0aW9ucykgPwogICAgICBfbmdNb2RlbF8uJG9wdGlvbnMgOgogICAgICB7CiAgICAgICAgdGltZXpvbmU6IG51bGwKICAgICAgfTsKICAgIGNsb3NlT25EYXRlU2VsZWN0aW9uID0gYW5ndWxhci5pc0RlZmluZWQoJGF0dHJzLmNsb3NlT25EYXRlU2VsZWN0aW9uKSA/CiAgICAgICRzY29wZS4kcGFyZW50LiRldmFsKCRhdHRycy5jbG9zZU9uRGF0ZVNlbGVjdGlvbikgOgogICAgICBkYXRlcGlja2VyUG9wdXBDb25maWcuY2xvc2VPbkRhdGVTZWxlY3Rpb247CiAgICBhcHBlbmRUb0JvZHkgPSBhbmd1bGFyLmlzRGVmaW5lZCgkYXR0cnMuZGF0ZXBpY2tlckFwcGVuZFRvQm9keSkgPwogICAgICAkc2NvcGUuJHBhcmVudC4kZXZhbCgkYXR0cnMuZGF0ZXBpY2tlckFwcGVuZFRvQm9keSkgOgogICAgICBkYXRlcGlja2VyUG9wdXBDb25maWcuYXBwZW5kVG9Cb2R5OwogICAgb25PcGVuRm9jdXMgPSBhbmd1bGFyLmlzRGVmaW5lZCgkYXR0cnMub25PcGVuRm9jdXMpID8KICAgICAgJHNjb3BlLiRwYXJlbnQuJGV2YWwoJGF0dHJzLm9uT3BlbkZvY3VzKSA6IGRhdGVwaWNrZXJQb3B1cENvbmZpZy5vbk9wZW5Gb2N1czsKICAgIGRhdGVwaWNrZXJQb3B1cFRlbXBsYXRlVXJsID0gYW5ndWxhci5pc0RlZmluZWQoJGF0dHJzLmRhdGVwaWNrZXJQb3B1cFRlbXBsYXRlVXJsKSA/CiAgICAgICRhdHRycy5kYXRlcGlja2VyUG9wdXBUZW1wbGF0ZVVybCA6CiAgICAgIGRhdGVwaWNrZXJQb3B1cENvbmZpZy5kYXRlcGlja2VyUG9wdXBUZW1wbGF0ZVVybDsKICAgIGRhdGVwaWNrZXJUZW1wbGF0ZVVybCA9IGFuZ3VsYXIuaXNEZWZpbmVkKCRhdHRycy5kYXRlcGlja2VyVGVtcGxhdGVVcmwpID8KICAgICAgJGF0dHJzLmRhdGVwaWNrZXJUZW1wbGF0ZVVybCA6IGRhdGVwaWNrZXJQb3B1cENvbmZpZy5kYXRlcGlja2VyVGVtcGxhdGVVcmw7CiAgICBhbHRJbnB1dEZvcm1hdHMgPSBhbmd1bGFyLmlzRGVmaW5lZCgkYXR0cnMuYWx0SW5wdXRGb3JtYXRzKSA/CiAgICAgICRzY29wZS4kcGFyZW50LiRldmFsKCRhdHRycy5hbHRJbnB1dEZvcm1hdHMpIDoKICAgICAgZGF0ZXBpY2tlclBvcHVwQ29uZmlnLmFsdElucHV0Rm9ybWF0czsKCiAgICAkc2NvcGUuc2hvd0J1dHRvbkJhciA9IGFuZ3VsYXIuaXNEZWZpbmVkKCRhdHRycy5zaG93QnV0dG9uQmFyKSA/CiAgICAgICRzY29wZS4kcGFyZW50LiRldmFsKCRhdHRycy5zaG93QnV0dG9uQmFyKSA6CiAgICAgIGRhdGVwaWNrZXJQb3B1cENvbmZpZy5zaG93QnV0dG9uQmFyOwoKICAgIGlmIChkYXRlcGlja2VyUG9wdXBDb25maWcuaHRtbDVUeXBlc1skYXR0cnMudHlwZV0pIHsKICAgICAgZGF0ZUZvcm1hdCA9IGRhdGVwaWNrZXJQb3B1cENvbmZpZy5odG1sNVR5cGVzWyRhdHRycy50eXBlXTsKICAgICAgaXNIdG1sNURhdGVJbnB1dCA9IHRydWU7CiAgICB9IGVsc2UgewogICAgICBkYXRlRm9ybWF0ID0gJGF0dHJzLnVpYkRhdGVwaWNrZXJQb3B1cCB8fCBkYXRlcGlja2VyUG9wdXBDb25maWcuZGF0ZXBpY2tlclBvcHVwOwogICAgICAkYXR0cnMuJG9ic2VydmUoJ3VpYkRhdGVwaWNrZXJQb3B1cCcsIGZ1bmN0aW9uKHZhbHVlLCBvbGRWYWx1ZSkgewogICAgICAgIHZhciBuZXdEYXRlRm9ybWF0ID0gdmFsdWUgfHwgZGF0ZXBpY2tlclBvcHVwQ29uZmlnLmRhdGVwaWNrZXJQb3B1cDsKICAgICAgICAvLyBJbnZhbGlkYXRlIHRoZSAkbW9kZWxWYWx1ZSB0byBlbnN1cmUgdGhhdCBmb3JtYXR0ZXJzIHJlLXJ1bgogICAgICAgIC8vIEZJWE1FOiBSZWZhY3RvciB3aGVuIFBSIGlzIG1lcmdlZDogaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9wdWxsLzEwNzY0CiAgICAgICAgaWYgKG5ld0RhdGVGb3JtYXQgIT09IGRhdGVGb3JtYXQpIHsKICAgICAgICAgIGRhdGVGb3JtYXQgPSBuZXdEYXRlRm9ybWF0OwogICAgICAgICAgbmdNb2RlbC4kbW9kZWxWYWx1ZSA9IG51bGw7CgogICAgICAgICAgaWYgKCFkYXRlRm9ybWF0KSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigndWliRGF0ZXBpY2tlclBvcHVwIG11c3QgaGF2ZSBhIGRhdGUgZm9ybWF0IHNwZWNpZmllZC4nKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfQoKICAgIGlmICghZGF0ZUZvcm1hdCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ3VpYkRhdGVwaWNrZXJQb3B1cCBtdXN0IGhhdmUgYSBkYXRlIGZvcm1hdCBzcGVjaWZpZWQuJyk7CiAgICB9CgogICAgaWYgKGlzSHRtbDVEYXRlSW5wdXQgJiYgJGF0dHJzLnVpYkRhdGVwaWNrZXJQb3B1cCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ0hUTUw1IGRhdGUgaW5wdXQgdHlwZXMgZG8gbm90IHN1cHBvcnQgY3VzdG9tIGZvcm1hdHMuJyk7CiAgICB9CgogICAgLy8gcG9wdXAgZWxlbWVudCB1c2VkIHRvIGRpc3BsYXkgY2FsZW5kYXIKICAgIHBvcHVwRWwgPSBhbmd1bGFyLmVsZW1lbnQoJzxkaXYgdWliLWRhdGVwaWNrZXItcG9wdXAtd3JhcD48ZGl2IHVpYi1kYXRlcGlja2VyPjwvZGl2PjwvZGl2PicpOwoKICAgIHBvcHVwRWwuYXR0cih7CiAgICAgICduZy1tb2RlbCc6ICdkYXRlJywKICAgICAgJ25nLWNoYW5nZSc6ICdkYXRlU2VsZWN0aW9uKGRhdGUpJywKICAgICAgJ3RlbXBsYXRlLXVybCc6IGRhdGVwaWNrZXJQb3B1cFRlbXBsYXRlVXJsCiAgICB9KTsKCiAgICAvLyBkYXRlcGlja2VyIGVsZW1lbnQKICAgIGRhdGVwaWNrZXJFbCA9IGFuZ3VsYXIuZWxlbWVudChwb3B1cEVsLmNoaWxkcmVuKClbMF0pOwogICAgZGF0ZXBpY2tlckVsLmF0dHIoJ3RlbXBsYXRlLXVybCcsIGRhdGVwaWNrZXJUZW1wbGF0ZVVybCk7CgogICAgaWYgKCEkc2NvcGUuZGF0ZXBpY2tlck9wdGlvbnMpIHsKICAgICAgJHNjb3BlLmRhdGVwaWNrZXJPcHRpb25zID0ge307CiAgICB9CgogICAgaWYgKGlzSHRtbDVEYXRlSW5wdXQpIHsKICAgICAgaWYgKCRhdHRycy50eXBlID09PSAnbW9udGgnKSB7CiAgICAgICAgJHNjb3BlLmRhdGVwaWNrZXJPcHRpb25zLmRhdGVwaWNrZXJNb2RlID0gJ21vbnRoJzsKICAgICAgICAkc2NvcGUuZGF0ZXBpY2tlck9wdGlvbnMubWluTW9kZSA9ICdtb250aCc7CiAgICAgIH0KICAgIH0KCiAgICBkYXRlcGlja2VyRWwuYXR0cignZGF0ZXBpY2tlci1vcHRpb25zJywgJ2RhdGVwaWNrZXJPcHRpb25zJyk7CgogICAgaWYgKCFpc0h0bWw1RGF0ZUlucHV0KSB7CiAgICAgIC8vIEludGVybmFsIEFQSSB0byBtYWludGFpbiB0aGUgY29ycmVjdCBuZy1pbnZhbGlkLVtrZXldIGNsYXNzCiAgICAgIG5nTW9kZWwuJCRwYXJzZXJOYW1lID0gJ2RhdGUnOwogICAgICBuZ01vZGVsLiR2YWxpZGF0b3JzLmRhdGUgPSB2YWxpZGF0b3I7CiAgICAgIG5nTW9kZWwuJHBhcnNlcnMudW5zaGlmdChwYXJzZURhdGUpOwogICAgICBuZ01vZGVsLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICBpZiAobmdNb2RlbC4kaXNFbXB0eSh2YWx1ZSkpIHsKICAgICAgICAgICRzY29wZS5kYXRlID0gdmFsdWU7CiAgICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgICAgfQoKICAgICAgICBpZiAoYW5ndWxhci5pc051bWJlcih2YWx1ZSkpIHsKICAgICAgICAgIHZhbHVlID0gbmV3IERhdGUodmFsdWUpOwogICAgICAgIH0KCiAgICAgICAgJHNjb3BlLmRhdGUgPSBkYXRlUGFyc2VyLmZyb21UaW1lem9uZSh2YWx1ZSwgbmdNb2RlbE9wdGlvbnMudGltZXpvbmUpOwoKICAgICAgICByZXR1cm4gZGF0ZVBhcnNlci5maWx0ZXIoJHNjb3BlLmRhdGUsIGRhdGVGb3JtYXQpOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIG5nTW9kZWwuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbih2YWx1ZSkgewogICAgICAgICRzY29wZS5kYXRlID0gZGF0ZVBhcnNlci5mcm9tVGltZXpvbmUodmFsdWUsIG5nTW9kZWxPcHRpb25zLnRpbWV6b25lKTsKICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgIH0pOwogICAgfQoKICAgIC8vIERldGVjdCBjaGFuZ2VzIGluIHRoZSB2aWV3IGZyb20gdGhlIHRleHQgYm94CiAgICBuZ01vZGVsLiR2aWV3Q2hhbmdlTGlzdGVuZXJzLnB1c2goZnVuY3Rpb24oKSB7CiAgICAgICRzY29wZS5kYXRlID0gcGFyc2VEYXRlU3RyaW5nKG5nTW9kZWwuJHZpZXdWYWx1ZSk7CiAgICB9KTsKCiAgICAkZWxlbWVudC5vbigna2V5ZG93bicsIGlucHV0S2V5ZG93bkJpbmQpOwoKICAgICRwb3B1cCA9ICRjb21waWxlKHBvcHVwRWwpKCRzY29wZSk7CiAgICAvLyBQcmV2ZW50IGpRdWVyeSBjYWNoZSBtZW1vcnkgbGVhayAodGVtcGxhdGUgaXMgbm93IHJlZHVuZGFudCBhZnRlciBsaW5raW5nKQogICAgcG9wdXBFbC5yZW1vdmUoKTsKCiAgICBpZiAoYXBwZW5kVG9Cb2R5KSB7CiAgICAgICRkb2N1bWVudC5maW5kKCdib2R5JykuYXBwZW5kKCRwb3B1cCk7CiAgICB9IGVsc2UgewogICAgICAkZWxlbWVudC5hZnRlcigkcG9wdXApOwogICAgfQoKICAgICRzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7CiAgICAgIGlmICgkc2NvcGUuaXNPcGVuID09PSB0cnVlKSB7CiAgICAgICAgaWYgKCEkcm9vdFNjb3BlLiQkcGhhc2UpIHsKICAgICAgICAgICRzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICRzY29wZS5pc09wZW4gPSBmYWxzZTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgJHBvcHVwLnJlbW92ZSgpOwogICAgICAkZWxlbWVudC5vZmYoJ2tleWRvd24nLCBpbnB1dEtleWRvd25CaW5kKTsKICAgICAgJGRvY3VtZW50Lm9mZignY2xpY2snLCBkb2N1bWVudENsaWNrQmluZCk7CiAgICAgIGlmIChzY3JvbGxQYXJlbnRFbCkgewogICAgICAgIHNjcm9sbFBhcmVudEVsLm9mZignc2Nyb2xsJywgcG9zaXRpb25Qb3B1cCk7CiAgICAgIH0KICAgICAgYW5ndWxhci5lbGVtZW50KCR3aW5kb3cpLm9mZigncmVzaXplJywgcG9zaXRpb25Qb3B1cCk7CgogICAgICAvL0NsZWFyIGFsbCB3YXRjaCBsaXN0ZW5lcnMgb24gZGVzdHJveQogICAgICB3aGlsZSAod2F0Y2hMaXN0ZW5lcnMubGVuZ3RoKSB7CiAgICAgICAgd2F0Y2hMaXN0ZW5lcnMuc2hpZnQoKSgpOwogICAgICB9CiAgICB9KTsKICB9OwoKICAkc2NvcGUuZ2V0VGV4dCA9IGZ1bmN0aW9uKGtleSkgewogICAgcmV0dXJuICRzY29wZVtrZXkgKyAnVGV4dCddIHx8IGRhdGVwaWNrZXJQb3B1cENvbmZpZ1trZXkgKyAnVGV4dCddOwogIH07CgogICRzY29wZS5pc0Rpc2FibGVkID0gZnVuY3Rpb24oZGF0ZSkgewogICAgaWYgKGRhdGUgPT09ICd0b2RheScpIHsKICAgICAgZGF0ZSA9IGRhdGVQYXJzZXIuZnJvbVRpbWV6b25lKG5ldyBEYXRlKCksIG5nTW9kZWxPcHRpb25zLnRpbWV6b25lKTsKICAgIH0KCiAgICB2YXIgZGF0ZXMgPSB7fTsKICAgIGFuZ3VsYXIuZm9yRWFjaChbJ21pbkRhdGUnLCAnbWF4RGF0ZSddLCBmdW5jdGlvbihrZXkpIHsKICAgICAgaWYgKCEkc2NvcGUuZGF0ZXBpY2tlck9wdGlvbnNba2V5XSkgewogICAgICAgIGRhdGVzW2tleV0gPSBudWxsOwogICAgICB9IGVsc2UgaWYgKGFuZ3VsYXIuaXNEYXRlKCRzY29wZS5kYXRlcGlja2VyT3B0aW9uc1trZXldKSkgewogICAgICAgIGRhdGVzW2tleV0gPSBuZXcgRGF0ZSgkc2NvcGUuZGF0ZXBpY2tlck9wdGlvbnNba2V5XSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKCRkYXRlcGlja2VyUG9wdXBMaXRlcmFsV2FybmluZykgewogICAgICAgICAgJGxvZy53YXJuKCdMaXRlcmFsIGRhdGUgc3VwcG9ydCBoYXMgYmVlbiBkZXByZWNhdGVkLCBwbGVhc2Ugc3dpdGNoIHRvIGRhdGUgb2JqZWN0IHVzYWdlJyk7CiAgICAgICAgfQoKICAgICAgICBkYXRlc1trZXldID0gbmV3IERhdGUoZGF0ZUZpbHRlcigkc2NvcGUuZGF0ZXBpY2tlck9wdGlvbnNba2V5XSwgJ21lZGl1bScpKTsKICAgICAgfQogICAgfSk7CgogICAgcmV0dXJuICRzY29wZS5kYXRlcGlja2VyT3B0aW9ucyAmJgogICAgICBkYXRlcy5taW5EYXRlICYmICRzY29wZS5jb21wYXJlKGRhdGUsIGRhdGVzLm1pbkRhdGUpIDwgMCB8fAogICAgICBkYXRlcy5tYXhEYXRlICYmICRzY29wZS5jb21wYXJlKGRhdGUsIGRhdGVzLm1heERhdGUpID4gMDsKICB9OwoKICAkc2NvcGUuY29tcGFyZSA9IGZ1bmN0aW9uKGRhdGUxLCBkYXRlMikgewogICAgcmV0dXJuIG5ldyBEYXRlKGRhdGUxLmdldEZ1bGxZZWFyKCksIGRhdGUxLmdldE1vbnRoKCksIGRhdGUxLmdldERhdGUoKSkgLSBuZXcgRGF0ZShkYXRlMi5nZXRGdWxsWWVhcigpLCBkYXRlMi5nZXRNb250aCgpLCBkYXRlMi5nZXREYXRlKCkpOwogIH07CgogIC8vIElubmVyIGNoYW5nZQogICRzY29wZS5kYXRlU2VsZWN0aW9uID0gZnVuY3Rpb24oZHQpIHsKICAgICRzY29wZS5kYXRlID0gZHQ7CiAgICB2YXIgZGF0ZSA9ICRzY29wZS5kYXRlID8gZGF0ZVBhcnNlci5maWx0ZXIoJHNjb3BlLmRhdGUsIGRhdGVGb3JtYXQpIDogbnVsbDsgLy8gU2V0dGluZyB0byBOVUxMIGlzIG5lY2Vzc2FyeSBmb3IgZm9ybSB2YWxpZGF0b3JzIHRvIGZ1bmN0aW9uCiAgICAkZWxlbWVudC52YWwoZGF0ZSk7CiAgICBuZ01vZGVsLiRzZXRWaWV3VmFsdWUoZGF0ZSk7CgogICAgaWYgKGNsb3NlT25EYXRlU2VsZWN0aW9uKSB7CiAgICAgICRzY29wZS5pc09wZW4gPSBmYWxzZTsKICAgICAgJGVsZW1lbnRbMF0uZm9jdXMoKTsKICAgIH0KICB9OwoKICAkc2NvcGUua2V5ZG93biA9IGZ1bmN0aW9uKGV2dCkgewogICAgaWYgKGV2dC53aGljaCA9PT0gMjcpIHsKICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAkc2NvcGUuaXNPcGVuID0gZmFsc2U7CiAgICAgICRlbGVtZW50WzBdLmZvY3VzKCk7CiAgICB9CiAgfTsKCiAgJHNjb3BlLnNlbGVjdCA9IGZ1bmN0aW9uKGRhdGUsIGV2dCkgewogICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpOwoKICAgIGlmIChkYXRlID09PSAndG9kYXknKSB7CiAgICAgIHZhciB0b2RheSA9IG5ldyBEYXRlKCk7CiAgICAgIGlmIChhbmd1bGFyLmlzRGF0ZSgkc2NvcGUuZGF0ZSkpIHsKICAgICAgICBkYXRlID0gbmV3IERhdGUoJHNjb3BlLmRhdGUpOwogICAgICAgIGRhdGUuc2V0RnVsbFllYXIodG9kYXkuZ2V0RnVsbFllYXIoKSwgdG9kYXkuZ2V0TW9udGgoKSwgdG9kYXkuZ2V0RGF0ZSgpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBkYXRlID0gZGF0ZVBhcnNlci5mcm9tVGltZXpvbmUodG9kYXksIG5nTW9kZWxPcHRpb25zLnRpbWV6b25lKTsKICAgICAgICBkYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApOwogICAgICB9CiAgICB9CiAgICAkc2NvcGUuZGF0ZVNlbGVjdGlvbihkYXRlKTsKICB9OwoKICAkc2NvcGUuY2xvc2UgPSBmdW5jdGlvbihldnQpIHsKICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTsKCiAgICAkc2NvcGUuaXNPcGVuID0gZmFsc2U7CiAgICAkZWxlbWVudFswXS5mb2N1cygpOwogIH07CgogICRzY29wZS5kaXNhYmxlZCA9IGFuZ3VsYXIuaXNEZWZpbmVkKCRhdHRycy5kaXNhYmxlZCkgfHwgZmFsc2U7CiAgaWYgKCRhdHRycy5uZ0Rpc2FibGVkKSB7CiAgICB3YXRjaExpc3RlbmVycy5wdXNoKCRzY29wZS4kcGFyZW50LiR3YXRjaCgkcGFyc2UoJGF0dHJzLm5nRGlzYWJsZWQpLCBmdW5jdGlvbihkaXNhYmxlZCkgewogICAgICAkc2NvcGUuZGlzYWJsZWQgPSBkaXNhYmxlZDsKICAgIH0pKTsKICB9CgogICRzY29wZS4kd2F0Y2goJ2lzT3BlbicsIGZ1bmN0aW9uKHZhbHVlKSB7CiAgICBpZiAodmFsdWUpIHsKICAgICAgaWYgKCEkc2NvcGUuZGlzYWJsZWQpIHsKICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIHBvc2l0aW9uUG9wdXAoKTsKCiAgICAgICAgICBpZiAob25PcGVuRm9jdXMpIHsKICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3VpYjpkYXRlcGlja2VyLmZvY3VzJyk7CiAgICAgICAgICB9CgogICAgICAgICAgJGRvY3VtZW50Lm9uKCdjbGljaycsIGRvY3VtZW50Q2xpY2tCaW5kKTsKCiAgICAgICAgICB2YXIgcGxhY2VtZW50ID0gJGF0dHJzLnBvcHVwUGxhY2VtZW50ID8gJGF0dHJzLnBvcHVwUGxhY2VtZW50IDogZGF0ZXBpY2tlclBvcHVwQ29uZmlnLnBsYWNlbWVudDsKICAgICAgICAgIGlmIChhcHBlbmRUb0JvZHkgfHwgJHBvc2l0aW9uLnBhcnNlUGxhY2VtZW50KHBsYWNlbWVudClbMl0pIHsKICAgICAgICAgICAgc2Nyb2xsUGFyZW50RWwgPSBzY3JvbGxQYXJlbnRFbCB8fCBhbmd1bGFyLmVsZW1lbnQoJHBvc2l0aW9uLnNjcm9sbFBhcmVudCgkZWxlbWVudCkpOwogICAgICAgICAgICBpZiAoc2Nyb2xsUGFyZW50RWwpIHsKICAgICAgICAgICAgICBzY3JvbGxQYXJlbnRFbC5vbignc2Nyb2xsJywgcG9zaXRpb25Qb3B1cCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHNjcm9sbFBhcmVudEVsID0gbnVsbDsKICAgICAgICAgIH0KCiAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJHdpbmRvdykub24oJ3Jlc2l6ZScsIHBvc2l0aW9uUG9wdXApOwogICAgICAgIH0sIDAsIGZhbHNlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAkc2NvcGUuaXNPcGVuID0gZmFsc2U7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgICRkb2N1bWVudC5vZmYoJ2NsaWNrJywgZG9jdW1lbnRDbGlja0JpbmQpOwogICAgICBpZiAoc2Nyb2xsUGFyZW50RWwpIHsKICAgICAgICBzY3JvbGxQYXJlbnRFbC5vZmYoJ3Njcm9sbCcsIHBvc2l0aW9uUG9wdXApOwogICAgICB9CiAgICAgIGFuZ3VsYXIuZWxlbWVudCgkd2luZG93KS5vZmYoJ3Jlc2l6ZScsIHBvc2l0aW9uUG9wdXApOwogICAgfQogIH0pOwoKICBmdW5jdGlvbiBjYW1lbHRvRGFzaChzdHJpbmcpIHsKICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvKFtBLVpdKS9nLCBmdW5jdGlvbigkMSkgeyByZXR1cm4gJy0nICsgJDEudG9Mb3dlckNhc2UoKTsgfSk7CiAgfQoKICBmdW5jdGlvbiBwYXJzZURhdGVTdHJpbmcodmlld1ZhbHVlKSB7CiAgICB2YXIgZGF0ZSA9IGRhdGVQYXJzZXIucGFyc2Uodmlld1ZhbHVlLCBkYXRlRm9ybWF0LCAkc2NvcGUuZGF0ZSk7CiAgICBpZiAoaXNOYU4oZGF0ZSkpIHsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhbHRJbnB1dEZvcm1hdHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBkYXRlID0gZGF0ZVBhcnNlci5wYXJzZSh2aWV3VmFsdWUsIGFsdElucHV0Rm9ybWF0c1tpXSwgJHNjb3BlLmRhdGUpOwogICAgICAgIGlmICghaXNOYU4oZGF0ZSkpIHsKICAgICAgICAgIHJldHVybiBkYXRlOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIGRhdGU7CiAgfQoKICBmdW5jdGlvbiBwYXJzZURhdGUodmlld1ZhbHVlKSB7CiAgICBpZiAoYW5ndWxhci5pc051bWJlcih2aWV3VmFsdWUpKSB7CiAgICAgIC8vIHByZXN1bWFibHkgdGltZXN0YW1wIHRvIGRhdGUgb2JqZWN0CiAgICAgIHZpZXdWYWx1ZSA9IG5ldyBEYXRlKHZpZXdWYWx1ZSk7CiAgICB9CgogICAgaWYgKCF2aWV3VmFsdWUpIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgaWYgKGFuZ3VsYXIuaXNEYXRlKHZpZXdWYWx1ZSkgJiYgIWlzTmFOKHZpZXdWYWx1ZSkpIHsKICAgICAgcmV0dXJuIHZpZXdWYWx1ZTsKICAgIH0KCiAgICBpZiAoYW5ndWxhci5pc1N0cmluZyh2aWV3VmFsdWUpKSB7CiAgICAgIHZhciBkYXRlID0gcGFyc2VEYXRlU3RyaW5nKHZpZXdWYWx1ZSk7CiAgICAgIGlmICghaXNOYU4oZGF0ZSkpIHsKICAgICAgICByZXR1cm4gZGF0ZVBhcnNlci5mcm9tVGltZXpvbmUoZGF0ZSwgbmdNb2RlbE9wdGlvbnMudGltZXpvbmUpOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG5nTW9kZWwuJG9wdGlvbnMgJiYgbmdNb2RlbC4kb3B0aW9ucy5hbGxvd0ludmFsaWQgPyB2aWV3VmFsdWUgOiB1bmRlZmluZWQ7CiAgfQoKICBmdW5jdGlvbiB2YWxpZGF0b3IobW9kZWxWYWx1ZSwgdmlld1ZhbHVlKSB7CiAgICB2YXIgdmFsdWUgPSBtb2RlbFZhbHVlIHx8IHZpZXdWYWx1ZTsKCiAgICBpZiAoISRhdHRycy5uZ1JlcXVpcmVkICYmICF2YWx1ZSkgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBpZiAoYW5ndWxhci5pc051bWJlcih2YWx1ZSkpIHsKICAgICAgdmFsdWUgPSBuZXcgRGF0ZSh2YWx1ZSk7CiAgICB9CgogICAgaWYgKCF2YWx1ZSkgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBpZiAoYW5ndWxhci5pc0RhdGUodmFsdWUpICYmICFpc05hTih2YWx1ZSkpIHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgaWYgKGFuZ3VsYXIuaXNTdHJpbmcodmFsdWUpKSB7CiAgICAgIHJldHVybiAhaXNOYU4ocGFyc2VEYXRlU3RyaW5nKHZhbHVlKSk7CiAgICB9CgogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgZnVuY3Rpb24gZG9jdW1lbnRDbGlja0JpbmQoZXZlbnQpIHsKICAgIGlmICghJHNjb3BlLmlzT3BlbiAmJiAkc2NvcGUuZGlzYWJsZWQpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHZhciBwb3B1cCA9ICRwb3B1cFswXTsKICAgIHZhciBkcENvbnRhaW5zVGFyZ2V0ID0gJGVsZW1lbnRbMF0uY29udGFpbnMoZXZlbnQudGFyZ2V0KTsKICAgIC8vIFRoZSBwb3B1cCBub2RlIG1heSBub3QgYmUgYW4gZWxlbWVudCBub2RlCiAgICAvLyBJbiBzb21lIGJyb3dzZXJzIChJRSkgb25seSBlbGVtZW50IG5vZGVzIGhhdmUgdGhlICdjb250YWlucycgZnVuY3Rpb24KICAgIHZhciBwb3B1cENvbnRhaW5zVGFyZ2V0ID0gcG9wdXAuY29udGFpbnMgIT09IHVuZGVmaW5lZCAmJiBwb3B1cC5jb250YWlucyhldmVudC50YXJnZXQpOwogICAgaWYgKCRzY29wZS5pc09wZW4gJiYgIShkcENvbnRhaW5zVGFyZ2V0IHx8IHBvcHVwQ29udGFpbnNUYXJnZXQpKSB7CiAgICAgICRzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7CiAgICAgICAgJHNjb3BlLmlzT3BlbiA9IGZhbHNlOwogICAgICB9KTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGlucHV0S2V5ZG93bkJpbmQoZXZ0KSB7CiAgICBpZiAoZXZ0LndoaWNoID09PSAyNyAmJiAkc2NvcGUuaXNPcGVuKSB7CiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICRzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7CiAgICAgICAgJHNjb3BlLmlzT3BlbiA9IGZhbHNlOwogICAgICB9KTsKICAgICAgJGVsZW1lbnRbMF0uZm9jdXMoKTsKICAgIH0gZWxzZSBpZiAoZXZ0LndoaWNoID09PSA0MCAmJiAhJHNjb3BlLmlzT3BlbikgewogICAgICBldnQucHJldmVudERlZmF1bHQoKTsKICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkgewogICAgICAgICRzY29wZS5pc09wZW4gPSB0cnVlOwogICAgICB9KTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHBvc2l0aW9uUG9wdXAoKSB7CiAgICBpZiAoJHNjb3BlLmlzT3BlbikgewogICAgICB2YXIgZHBFbGVtZW50ID0gYW5ndWxhci5lbGVtZW50KCRwb3B1cFswXS5xdWVyeVNlbGVjdG9yKCcudWliLWRhdGVwaWNrZXItcG9wdXAnKSk7CiAgICAgIHZhciBwbGFjZW1lbnQgPSAkYXR0cnMucG9wdXBQbGFjZW1lbnQgPyAkYXR0cnMucG9wdXBQbGFjZW1lbnQgOiBkYXRlcGlja2VyUG9wdXBDb25maWcucGxhY2VtZW50OwogICAgICB2YXIgcG9zaXRpb24gPSAkcG9zaXRpb24ucG9zaXRpb25FbGVtZW50cygkZWxlbWVudCwgZHBFbGVtZW50LCBwbGFjZW1lbnQsIGFwcGVuZFRvQm9keSk7CiAgICAgIGRwRWxlbWVudC5jc3Moe3RvcDogcG9zaXRpb24udG9wICsgJ3B4JywgbGVmdDogcG9zaXRpb24ubGVmdCArICdweCd9KTsKICAgICAgaWYgKGRwRWxlbWVudC5oYXNDbGFzcygndWliLXBvc2l0aW9uLW1lYXN1cmUnKSkgewogICAgICAgIGRwRWxlbWVudC5yZW1vdmVDbGFzcygndWliLXBvc2l0aW9uLW1lYXN1cmUnKTsKICAgICAgfQogICAgfQogIH0KCiAgJHNjb3BlLiRvbigndWliOmRhdGVwaWNrZXIubW9kZScsIGZ1bmN0aW9uKCkgewogICAgJHRpbWVvdXQocG9zaXRpb25Qb3B1cCwgMCwgZmFsc2UpOwogIH0pOwp9XSkKCi5kaXJlY3RpdmUoJ3VpYkRhdGVwaWNrZXJQb3B1cCcsIGZ1bmN0aW9uKCkgewogIHJldHVybiB7CiAgICByZXF1aXJlOiBbJ25nTW9kZWwnLCAndWliRGF0ZXBpY2tlclBvcHVwJ10sCiAgICBjb250cm9sbGVyOiAnVWliRGF0ZXBpY2tlclBvcHVwQ29udHJvbGxlcicsCiAgICBzY29wZTogewogICAgICBkYXRlcGlja2VyT3B0aW9uczogJz0/JywKICAgICAgaXNPcGVuOiAnPT8nLAogICAgICBjdXJyZW50VGV4dDogJ0AnLAogICAgICBjbGVhclRleHQ6ICdAJywKICAgICAgY2xvc2VUZXh0OiAnQCcKICAgIH0sCiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIGN0cmxzKSB7CiAgICAgIHZhciBuZ01vZGVsID0gY3RybHNbMF0sCiAgICAgICAgY3RybCA9IGN0cmxzWzFdOwoKICAgICAgY3RybC5pbml0KG5nTW9kZWwpOwogICAgfQogIH07Cn0pCgouZGlyZWN0aXZlKCd1aWJEYXRlcGlja2VyUG9wdXBXcmFwJywgZnVuY3Rpb24oKSB7CiAgcmV0dXJuIHsKICAgIHJlc3RyaWN0OiAnQScsCiAgICB0cmFuc2NsdWRlOiB0cnVlLAogICAgdGVtcGxhdGVVcmw6IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHJzKSB7CiAgICAgIHJldHVybiBhdHRycy50ZW1wbGF0ZVVybCB8fCAndWliL3RlbXBsYXRlL2RhdGVwaWNrZXJQb3B1cC9wb3B1cC5odG1sJzsKICAgIH0KICB9Owp9KTsKCmFuZ3VsYXIubW9kdWxlKCd1aS5ib290c3RyYXAuZGVib3VuY2UnLCBbXSkKLyoqCiAqIEEgaGVscGVyLCBpbnRlcm5hbCBzZXJ2aWNlIHRoYXQgZGVib3VuY2VzIGEgZnVuY3Rpb24KICovCiAgLmZhY3RvcnkoJyQkZGVib3VuY2UnLCBbJyR0aW1lb3V0JywgZnVuY3Rpb24oJHRpbWVvdXQpIHsKICAgIHJldHVybiBmdW5jdGlvbihjYWxsYmFjaywgZGVib3VuY2VUaW1lKSB7CiAgICAgIHZhciB0aW1lb3V0UHJvbWlzZTsKCiAgICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpOwogICAgICAgIGlmICh0aW1lb3V0UHJvbWlzZSkgewogICAgICAgICAgJHRpbWVvdXQuY2FuY2VsKHRpbWVvdXRQcm9taXNlKTsKICAgICAgICB9CgogICAgICAgIHRpbWVvdXRQcm9taXNlID0gJHRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICBjYWxsYmFjay5hcHBseShzZWxmLCBhcmdzKTsKICAgICAgICB9LCBkZWJvdW5jZVRpbWUpOwogICAgICB9OwogICAgfTsKICB9XSk7Cgphbmd1bGFyLm1vZHVsZSgndWkuYm9vdHN0cmFwLmRyb3Bkb3duJywgWyd1aS5ib290c3RyYXAucG9zaXRpb24nXSkKCi5jb25zdGFudCgndWliRHJvcGRvd25Db25maWcnLCB7CiAgYXBwZW5kVG9PcGVuQ2xhc3M6ICd1aWItZHJvcGRvd24tb3BlbicsCiAgb3BlbkNsYXNzOiAnb3BlbicKfSkKCi5zZXJ2aWNlKCd1aWJEcm9wZG93blNlcnZpY2UnLCBbJyRkb2N1bWVudCcsICckcm9vdFNjb3BlJywgZnVuY3Rpb24oJGRvY3VtZW50LCAkcm9vdFNjb3BlKSB7CiAgdmFyIG9wZW5TY29wZSA9IG51bGw7CgogIHRoaXMub3BlbiA9IGZ1bmN0aW9uKGRyb3Bkb3duU2NvcGUsIGVsZW1lbnQpIHsKICAgIGlmICghb3BlblNjb3BlKSB7CiAgICAgICRkb2N1bWVudC5vbignY2xpY2snLCBjbG9zZURyb3Bkb3duKTsKICAgIH0KCiAgICBpZiAob3BlblNjb3BlICYmIG9wZW5TY29wZSAhPT0gZHJvcGRvd25TY29wZSkgewogICAgICBvcGVuU2NvcGUuaXNPcGVuID0gZmFsc2U7CiAgICB9CgogICAgb3BlblNjb3BlID0gZHJvcGRvd25TY29wZTsKICB9OwoKICB0aGlzLmNsb3NlID0gZnVuY3Rpb24oZHJvcGRvd25TY29wZSwgZWxlbWVudCkgewogICAgaWYgKG9wZW5TY29wZSA9PT0gZHJvcGRvd25TY29wZSkgewogICAgICBvcGVuU2NvcGUgPSBudWxsOwogICAgICAkZG9jdW1lbnQub2ZmKCdjbGljaycsIGNsb3NlRHJvcGRvd24pOwogICAgICAkZG9jdW1lbnQub2ZmKCdrZXlkb3duJywgdGhpcy5rZXliaW5kRmlsdGVyKTsKICAgIH0KICB9OwoKICB2YXIgY2xvc2VEcm9wZG93biA9IGZ1bmN0aW9uKGV2dCkgewogICAgLy8gVGhpcyBtZXRob2QgbWF5IHN0aWxsIGJlIGNhbGxlZCBkdXJpbmcgdGhlIHNhbWUgbW91c2UgZXZlbnQgdGhhdAogICAgLy8gdW5ib3VuZCB0aGlzIGV2ZW50IGhhbmRsZXIuIFNvIGNoZWNrIG9wZW5TY29wZSBiZWZvcmUgcHJvY2VlZGluZy4KICAgIGlmICghb3BlblNjb3BlKSB7IHJldHVybjsgfQoKICAgIGlmIChldnQgJiYgb3BlblNjb3BlLmdldEF1dG9DbG9zZSgpID09PSAnZGlzYWJsZWQnKSB7IHJldHVybjsgfQoKICAgIGlmIChldnQgJiYgZXZ0LndoaWNoID09PSAzKSB7IHJldHVybjsgfQoKICAgIHZhciB0b2dnbGVFbGVtZW50ID0gb3BlblNjb3BlLmdldFRvZ2dsZUVsZW1lbnQoKTsKICAgIGlmIChldnQgJiYgdG9nZ2xlRWxlbWVudCAmJiB0b2dnbGVFbGVtZW50WzBdLmNvbnRhaW5zKGV2dC50YXJnZXQpKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB2YXIgZHJvcGRvd25FbGVtZW50ID0gb3BlblNjb3BlLmdldERyb3Bkb3duRWxlbWVudCgpOwogICAgaWYgKGV2dCAmJiBvcGVuU2NvcGUuZ2V0QXV0b0Nsb3NlKCkgPT09ICdvdXRzaWRlQ2xpY2snICYmCiAgICAgIGRyb3Bkb3duRWxlbWVudCAmJiBkcm9wZG93bkVsZW1lbnRbMF0uY29udGFpbnMoZXZ0LnRhcmdldCkpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIG9wZW5TY29wZS5mb2N1c1RvZ2dsZUVsZW1lbnQoKTsKICAgIG9wZW5TY29wZS5pc09wZW4gPSBmYWxzZTsKCiAgICBpZiAoISRyb290U2NvcGUuJCRwaGFzZSkgewogICAgICBvcGVuU2NvcGUuJGFwcGx5KCk7CiAgICB9CiAgfTsKCiAgdGhpcy5rZXliaW5kRmlsdGVyID0gZnVuY3Rpb24oZXZ0KSB7CiAgICB2YXIgZHJvcGRvd25FbGVtZW50ID0gb3BlblNjb3BlLmdldERyb3Bkb3duRWxlbWVudCgpOwogICAgdmFyIHRvZ2dsZUVsZW1lbnQgPSBvcGVuU2NvcGUuZ2V0VG9nZ2xlRWxlbWVudCgpOwogICAgdmFyIGRyb3Bkb3duRWxlbWVudFRhcmdldGVkID0gZHJvcGRvd25FbGVtZW50ICYmIGRyb3Bkb3duRWxlbWVudFswXS5jb250YWlucyhldnQudGFyZ2V0KTsKICAgIHZhciB0b2dnbGVFbGVtZW50VGFyZ2V0ZWQgPSB0b2dnbGVFbGVtZW50ICYmIHRvZ2dsZUVsZW1lbnRbMF0uY29udGFpbnMoZXZ0LnRhcmdldCk7CiAgICBpZiAoZXZ0LndoaWNoID09PSAyNykgewogICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgIG9wZW5TY29wZS5mb2N1c1RvZ2dsZUVsZW1lbnQoKTsKICAgICAgY2xvc2VEcm9wZG93bigpOwogICAgfSBlbHNlIGlmIChvcGVuU2NvcGUuaXNLZXluYXZFbmFibGVkKCkgJiYgWzM4LCA0MF0uaW5kZXhPZihldnQud2hpY2gpICE9PSAtMSAmJiBvcGVuU2NvcGUuaXNPcGVuICYmIChkcm9wZG93bkVsZW1lbnRUYXJnZXRlZCB8fCB0b2dnbGVFbGVtZW50VGFyZ2V0ZWQpKSB7CiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgIG9wZW5TY29wZS5mb2N1c0Ryb3Bkb3duRW50cnkoZXZ0LndoaWNoKTsKICAgIH0KICB9Owp9XSkKCi5jb250cm9sbGVyKCdVaWJEcm9wZG93bkNvbnRyb2xsZXInLCBbJyRzY29wZScsICckZWxlbWVudCcsICckYXR0cnMnLCAnJHBhcnNlJywgJ3VpYkRyb3Bkb3duQ29uZmlnJywgJ3VpYkRyb3Bkb3duU2VydmljZScsICckYW5pbWF0ZScsICckdWliUG9zaXRpb24nLCAnJGRvY3VtZW50JywgJyRjb21waWxlJywgJyR0ZW1wbGF0ZVJlcXVlc3QnLCBmdW5jdGlvbigkc2NvcGUsICRlbGVtZW50LCAkYXR0cnMsICRwYXJzZSwgZHJvcGRvd25Db25maWcsIHVpYkRyb3Bkb3duU2VydmljZSwgJGFuaW1hdGUsICRwb3NpdGlvbiwgJGRvY3VtZW50LCAkY29tcGlsZSwgJHRlbXBsYXRlUmVxdWVzdCkgewogIHZhciBzZWxmID0gdGhpcywKICAgIHNjb3BlID0gJHNjb3BlLiRuZXcoKSwgLy8gY3JlYXRlIGEgY2hpbGQgc2NvcGUgc28gd2UgYXJlIG5vdCBwb2xsdXRpbmcgb3JpZ2luYWwgb25lCiAgICB0ZW1wbGF0ZVNjb3BlLAogICAgYXBwZW5kVG9PcGVuQ2xhc3MgPSBkcm9wZG93bkNvbmZpZy5hcHBlbmRUb09wZW5DbGFzcywKICAgIG9wZW5DbGFzcyA9IGRyb3Bkb3duQ29uZmlnLm9wZW5DbGFzcywKICAgIGdldElzT3BlbiwKICAgIHNldElzT3BlbiA9IGFuZ3VsYXIubm9vcCwKICAgIHRvZ2dsZUludm9rZXIgPSAkYXR0cnMub25Ub2dnbGUgPyAkcGFyc2UoJGF0dHJzLm9uVG9nZ2xlKSA6IGFuZ3VsYXIubm9vcCwKICAgIGFwcGVuZFRvQm9keSA9IGZhbHNlLAogICAgYXBwZW5kVG8gPSBudWxsLAogICAga2V5bmF2RW5hYmxlZCA9IGZhbHNlLAogICAgc2VsZWN0ZWRPcHRpb24gPSBudWxsLAogICAgYm9keSA9ICRkb2N1bWVudC5maW5kKCdib2R5Jyk7CgogICRlbGVtZW50LmFkZENsYXNzKCdkcm9wZG93bicpOwoKICB0aGlzLmluaXQgPSBmdW5jdGlvbigpIHsKICAgIGlmICgkYXR0cnMuaXNPcGVuKSB7CiAgICAgIGdldElzT3BlbiA9ICRwYXJzZSgkYXR0cnMuaXNPcGVuKTsKICAgICAgc2V0SXNPcGVuID0gZ2V0SXNPcGVuLmFzc2lnbjsKCiAgICAgICRzY29wZS4kd2F0Y2goZ2V0SXNPcGVuLCBmdW5jdGlvbih2YWx1ZSkgewogICAgICAgIHNjb3BlLmlzT3BlbiA9ICEhdmFsdWU7CiAgICAgIH0pOwogICAgfQoKICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZCgkYXR0cnMuZHJvcGRvd25BcHBlbmRUbykpIHsKICAgICAgdmFyIGFwcGVuZFRvRWwgPSAkcGFyc2UoJGF0dHJzLmRyb3Bkb3duQXBwZW5kVG8pKHNjb3BlKTsKICAgICAgaWYgKGFwcGVuZFRvRWwpIHsKICAgICAgICBhcHBlbmRUbyA9IGFuZ3VsYXIuZWxlbWVudChhcHBlbmRUb0VsKTsKICAgICAgfQogICAgfQoKICAgIGFwcGVuZFRvQm9keSA9IGFuZ3VsYXIuaXNEZWZpbmVkKCRhdHRycy5kcm9wZG93bkFwcGVuZFRvQm9keSk7CiAgICBrZXluYXZFbmFibGVkID0gYW5ndWxhci5pc0RlZmluZWQoJGF0dHJzLmtleWJvYXJkTmF2KTsKCiAgICBpZiAoYXBwZW5kVG9Cb2R5ICYmICFhcHBlbmRUbykgewogICAgICBhcHBlbmRUbyA9IGJvZHk7CiAgICB9CgogICAgaWYgKGFwcGVuZFRvICYmIHNlbGYuZHJvcGRvd25NZW51KSB7CiAgICAgIGFwcGVuZFRvLmFwcGVuZChzZWxmLmRyb3Bkb3duTWVudSk7CiAgICAgICRlbGVtZW50Lm9uKCckZGVzdHJveScsIGZ1bmN0aW9uIGhhbmRsZURlc3Ryb3lFdmVudCgpIHsKICAgICAgICBzZWxmLmRyb3Bkb3duTWVudS5yZW1vdmUoKTsKICAgICAgfSk7CiAgICB9CiAgfTsKCiAgdGhpcy50b2dnbGUgPSBmdW5jdGlvbihvcGVuKSB7CiAgICBzY29wZS5pc09wZW4gPSBhcmd1bWVudHMubGVuZ3RoID8gISFvcGVuIDogIXNjb3BlLmlzT3BlbjsKICAgIGlmIChhbmd1bGFyLmlzRnVuY3Rpb24oc2V0SXNPcGVuKSkgewogICAgICBzZXRJc09wZW4oc2NvcGUsIHNjb3BlLmlzT3Blbik7CiAgICB9CgogICAgcmV0dXJuIHNjb3BlLmlzT3BlbjsKICB9OwoKICAvLyBBbGxvdyBvdGhlciBkaXJlY3RpdmVzIHRvIHdhdGNoIHN0YXR1cwogIHRoaXMuaXNPcGVuID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gc2NvcGUuaXNPcGVuOwogIH07CgogIHNjb3BlLmdldFRvZ2dsZUVsZW1lbnQgPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiBzZWxmLnRvZ2dsZUVsZW1lbnQ7CiAgfTsKCiAgc2NvcGUuZ2V0QXV0b0Nsb3NlID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gJGF0dHJzLmF1dG9DbG9zZSB8fCAnYWx3YXlzJzsgLy9vciAnb3V0c2lkZUNsaWNrJyBvciAnZGlzYWJsZWQnCiAgfTsKCiAgc2NvcGUuZ2V0RWxlbWVudCA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuICRlbGVtZW50OwogIH07CgogIHNjb3BlLmlzS2V5bmF2RW5hYmxlZCA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIGtleW5hdkVuYWJsZWQ7CiAgfTsKCiAgc2NvcGUuZm9jdXNEcm9wZG93bkVudHJ5ID0gZnVuY3Rpb24oa2V5Q29kZSkgewogICAgdmFyIGVsZW1zID0gc2VsZi5kcm9wZG93bk1lbnUgPyAvL0lmIGFwcGVuZCB0byBib2R5IGlzIHVzZWQuCiAgICAgIGFuZ3VsYXIuZWxlbWVudChzZWxmLmRyb3Bkb3duTWVudSkuZmluZCgnYScpIDoKICAgICAgJGVsZW1lbnQuZmluZCgndWwnKS5lcSgwKS5maW5kKCdhJyk7CgogICAgc3dpdGNoIChrZXlDb2RlKSB7CiAgICAgIGNhc2UgNDA6IHsKICAgICAgICBpZiAoIWFuZ3VsYXIuaXNOdW1iZXIoc2VsZi5zZWxlY3RlZE9wdGlvbikpIHsKICAgICAgICAgIHNlbGYuc2VsZWN0ZWRPcHRpb24gPSAwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzZWxmLnNlbGVjdGVkT3B0aW9uID0gc2VsZi5zZWxlY3RlZE9wdGlvbiA9PT0gZWxlbXMubGVuZ3RoIC0gMSA/CiAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWRPcHRpb24gOgogICAgICAgICAgICBzZWxmLnNlbGVjdGVkT3B0aW9uICsgMTsKICAgICAgICB9CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgY2FzZSAzODogewogICAgICAgIGlmICghYW5ndWxhci5pc051bWJlcihzZWxmLnNlbGVjdGVkT3B0aW9uKSkgewogICAgICAgICAgc2VsZi5zZWxlY3RlZE9wdGlvbiA9IGVsZW1zLmxlbmd0aCAtIDE7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHNlbGYuc2VsZWN0ZWRPcHRpb24gPSBzZWxmLnNlbGVjdGVkT3B0aW9uID09PSAwID8KICAgICAgICAgICAgMCA6IHNlbGYuc2VsZWN0ZWRPcHRpb24gLSAxOwogICAgICAgIH0KICAgICAgICBicmVhazsKICAgICAgfQogICAgfQogICAgZWxlbXNbc2VsZi5zZWxlY3RlZE9wdGlvbl0uZm9jdXMoKTsKICB9OwoKICBzY29wZS5nZXREcm9wZG93bkVsZW1lbnQgPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiBzZWxmLmRyb3Bkb3duTWVudTsKICB9OwoKICBzY29wZS5mb2N1c1RvZ2dsZUVsZW1lbnQgPSBmdW5jdGlvbigpIHsKICAgIGlmIChzZWxmLnRvZ2dsZUVsZW1lbnQpIHsKICAgICAgc2VsZi50b2dnbGVFbGVtZW50WzBdLmZvY3VzKCk7CiAgICB9CiAgfTsKCiAgc2NvcGUuJHdhdGNoKCdpc09wZW4nLCBmdW5jdGlvbihpc09wZW4sIHdhc09wZW4pIHsKICAgIGlmIChhcHBlbmRUbyAmJiBzZWxmLmRyb3Bkb3duTWVudSkgewogICAgICB2YXIgcG9zID0gJHBvc2l0aW9uLnBvc2l0aW9uRWxlbWVudHMoJGVsZW1lbnQsIHNlbGYuZHJvcGRvd25NZW51LCAnYm90dG9tLWxlZnQnLCB0cnVlKSwKICAgICAgICBjc3MsCiAgICAgICAgcmlnaHRhbGlnbiwKICAgICAgICBzY3JvbGxiYXJQYWRkaW5nLAogICAgICAgIHNjcm9sbGJhcldpZHRoID0gMDsKCiAgICAgIGNzcyA9IHsKICAgICAgICB0b3A6IHBvcy50b3AgKyAncHgnLAogICAgICAgIGRpc3BsYXk6IGlzT3BlbiA/ICdibG9jaycgOiAnbm9uZScKICAgICAgfTsKCiAgICAgIHJpZ2h0YWxpZ24gPSBzZWxmLmRyb3Bkb3duTWVudS5oYXNDbGFzcygnZHJvcGRvd24tbWVudS1yaWdodCcpOwogICAgICBpZiAoIXJpZ2h0YWxpZ24pIHsKICAgICAgICBjc3MubGVmdCA9IHBvcy5sZWZ0ICsgJ3B4JzsKICAgICAgICBjc3MucmlnaHQgPSAnYXV0byc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY3NzLmxlZnQgPSAnYXV0byc7CiAgICAgICAgc2Nyb2xsYmFyUGFkZGluZyA9ICRwb3NpdGlvbi5zY3JvbGxiYXJQYWRkaW5nKGFwcGVuZFRvKTsKCiAgICAgICAgaWYgKHNjcm9sbGJhclBhZGRpbmcuaGVpZ2h0T3ZlcmZsb3cgJiYgc2Nyb2xsYmFyUGFkZGluZy5zY3JvbGxiYXJXaWR0aCkgewogICAgICAgICAgc2Nyb2xsYmFyV2lkdGggPSBzY3JvbGxiYXJQYWRkaW5nLnNjcm9sbGJhcldpZHRoOwogICAgICAgIH0KCiAgICAgICAgY3NzLnJpZ2h0ID0gd2luZG93LmlubmVyV2lkdGggLSBzY3JvbGxiYXJXaWR0aCAtCiAgICAgICAgICAocG9zLmxlZnQgKyAkZWxlbWVudC5wcm9wKCdvZmZzZXRXaWR0aCcpKSArICdweCc7CiAgICAgIH0KCiAgICAgIC8vIE5lZWQgdG8gYWRqdXN0IG91ciBwb3NpdGlvbmluZyB0byBiZSByZWxhdGl2ZSB0byB0aGUgYXBwZW5kVG8gY29udGFpbmVyCiAgICAgIC8vIGlmIGl0J3Mgbm90IHRoZSBib2R5IGVsZW1lbnQKICAgICAgaWYgKCFhcHBlbmRUb0JvZHkpIHsKICAgICAgICB2YXIgYXBwZW5kT2Zmc2V0ID0gJHBvc2l0aW9uLm9mZnNldChhcHBlbmRUbyk7CgogICAgICAgIGNzcy50b3AgPSBwb3MudG9wIC0gYXBwZW5kT2Zmc2V0LnRvcCArICdweCc7CgogICAgICAgIGlmICghcmlnaHRhbGlnbikgewogICAgICAgICAgY3NzLmxlZnQgPSBwb3MubGVmdCAtIGFwcGVuZE9mZnNldC5sZWZ0ICsgJ3B4JzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY3NzLnJpZ2h0ID0gd2luZG93LmlubmVyV2lkdGggLQogICAgICAgICAgICAocG9zLmxlZnQgLSBhcHBlbmRPZmZzZXQubGVmdCArICRlbGVtZW50LnByb3AoJ29mZnNldFdpZHRoJykpICsgJ3B4JzsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHNlbGYuZHJvcGRvd25NZW51LmNzcyhjc3MpOwogICAgfQoKICAgIHZhciBvcGVuQ29udGFpbmVyID0gYXBwZW5kVG8gPyBhcHBlbmRUbyA6ICRlbGVtZW50OwogICAgdmFyIGhhc09wZW5DbGFzcyA9IG9wZW5Db250YWluZXIuaGFzQ2xhc3MoYXBwZW5kVG8gPyBhcHBlbmRUb09wZW5DbGFzcyA6IG9wZW5DbGFzcyk7CgogICAgaWYgKGhhc09wZW5DbGFzcyA9PT0gIWlzT3BlbikgewogICAgICAkYW5pbWF0ZVtpc09wZW4gPyAnYWRkQ2xhc3MnIDogJ3JlbW92ZUNsYXNzJ10ob3BlbkNvbnRhaW5lciwgYXBwZW5kVG8gPyBhcHBlbmRUb09wZW5DbGFzcyA6IG9wZW5DbGFzcykudGhlbihmdW5jdGlvbigpIHsKICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoaXNPcGVuKSAmJiBpc09wZW4gIT09IHdhc09wZW4pIHsKICAgICAgICAgIHRvZ2dsZUludm9rZXIoJHNjb3BlLCB7IG9wZW46ICEhaXNPcGVuIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogICAgaWYgKGlzT3BlbikgewogICAgICBpZiAoc2VsZi5kcm9wZG93bk1lbnVUZW1wbGF0ZVVybCkgewogICAgICAgICR0ZW1wbGF0ZVJlcXVlc3Qoc2VsZi5kcm9wZG93bk1lbnVUZW1wbGF0ZVVybCkudGhlbihmdW5jdGlvbih0cGxDb250ZW50KSB7CiAgICAgICAgICB0ZW1wbGF0ZVNjb3BlID0gc2NvcGUuJG5ldygpOwogICAgICAgICAgJGNvbXBpbGUodHBsQ29udGVudC50cmltKCkpKHRlbXBsYXRlU2NvcGUsIGZ1bmN0aW9uKGRyb3Bkb3duRWxlbWVudCkgewogICAgICAgICAgICB2YXIgbmV3RWwgPSBkcm9wZG93bkVsZW1lbnQ7CiAgICAgICAgICAgIHNlbGYuZHJvcGRvd25NZW51LnJlcGxhY2VXaXRoKG5ld0VsKTsKICAgICAgICAgICAgc2VsZi5kcm9wZG93bk1lbnUgPSBuZXdFbDsKICAgICAgICAgICAgJGRvY3VtZW50Lm9uKCdrZXlkb3duJywgdWliRHJvcGRvd25TZXJ2aWNlLmtleWJpbmRGaWx0ZXIpOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgJGRvY3VtZW50Lm9uKCdrZXlkb3duJywgdWliRHJvcGRvd25TZXJ2aWNlLmtleWJpbmRGaWx0ZXIpOwogICAgICB9CgogICAgICBzY29wZS5mb2N1c1RvZ2dsZUVsZW1lbnQoKTsKICAgICAgdWliRHJvcGRvd25TZXJ2aWNlLm9wZW4oc2NvcGUsICRlbGVtZW50KTsKICAgIH0gZWxzZSB7CiAgICAgIHVpYkRyb3Bkb3duU2VydmljZS5jbG9zZShzY29wZSwgJGVsZW1lbnQpOwogICAgICBpZiAoc2VsZi5kcm9wZG93bk1lbnVUZW1wbGF0ZVVybCkgewogICAgICAgIGlmICh0ZW1wbGF0ZVNjb3BlKSB7CiAgICAgICAgICB0ZW1wbGF0ZVNjb3BlLiRkZXN0cm95KCk7CiAgICAgICAgfQogICAgICAgIHZhciBuZXdFbCA9IGFuZ3VsYXIuZWxlbWVudCgnPHVsIGNsYXNzPSJkcm9wZG93bi1tZW51Ij48L3VsPicpOwogICAgICAgIHNlbGYuZHJvcGRvd25NZW51LnJlcGxhY2VXaXRoKG5ld0VsKTsKICAgICAgICBzZWxmLmRyb3Bkb3duTWVudSA9IG5ld0VsOwogICAgICB9CgogICAgICBzZWxmLnNlbGVjdGVkT3B0aW9uID0gbnVsbDsKICAgIH0KCiAgICBpZiAoYW5ndWxhci5pc0Z1bmN0aW9uKHNldElzT3BlbikpIHsKICAgICAgc2V0SXNPcGVuKCRzY29wZSwgaXNPcGVuKTsKICAgIH0KICB9KTsKfV0pCgouZGlyZWN0aXZlKCd1aWJEcm9wZG93bicsIGZ1bmN0aW9uKCkgewogIHJldHVybiB7CiAgICBjb250cm9sbGVyOiAnVWliRHJvcGRvd25Db250cm9sbGVyJywKICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgZHJvcGRvd25DdHJsKSB7CiAgICAgIGRyb3Bkb3duQ3RybC5pbml0KCk7CiAgICB9CiAgfTsKfSkKCi5kaXJlY3RpdmUoJ3VpYkRyb3Bkb3duTWVudScsIGZ1bmN0aW9uKCkgewogIHJldHVybiB7CiAgICByZXN0cmljdDogJ0EnLAogICAgcmVxdWlyZTogJz9edWliRHJvcGRvd24nLAogICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBkcm9wZG93bkN0cmwpIHsKICAgICAgaWYgKCFkcm9wZG93bkN0cmwgfHwgYW5ndWxhci5pc0RlZmluZWQoYXR0cnMuZHJvcGRvd25OZXN0ZWQpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBlbGVtZW50LmFkZENsYXNzKCdkcm9wZG93bi1tZW51Jyk7CgogICAgICB2YXIgdHBsVXJsID0gYXR0cnMudGVtcGxhdGVVcmw7CiAgICAgIGlmICh0cGxVcmwpIHsKICAgICAgICBkcm9wZG93bkN0cmwuZHJvcGRvd25NZW51VGVtcGxhdGVVcmwgPSB0cGxVcmw7CiAgICAgIH0KCiAgICAgIGlmICghZHJvcGRvd25DdHJsLmRyb3Bkb3duTWVudSkgewogICAgICAgIGRyb3Bkb3duQ3RybC5kcm9wZG93bk1lbnUgPSBlbGVtZW50OwogICAgICB9CiAgICB9CiAgfTsKfSkKCi5kaXJlY3RpdmUoJ3VpYkRyb3Bkb3duVG9nZ2xlJywgZnVuY3Rpb24oKSB7CiAgcmV0dXJuIHsKICAgIHJlcXVpcmU6ICc/XnVpYkRyb3Bkb3duJywKICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgZHJvcGRvd25DdHJsKSB7CiAgICAgIGlmICghZHJvcGRvd25DdHJsKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBlbGVtZW50LmFkZENsYXNzKCdkcm9wZG93bi10b2dnbGUnKTsKCiAgICAgIGRyb3Bkb3duQ3RybC50b2dnbGVFbGVtZW50ID0gZWxlbWVudDsKCiAgICAgIHZhciB0b2dnbGVEcm9wZG93biA9IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKCiAgICAgICAgaWYgKCFlbGVtZW50Lmhhc0NsYXNzKCdkaXNhYmxlZCcpICYmICFhdHRycy5kaXNhYmxlZCkgewogICAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkgewogICAgICAgICAgICBkcm9wZG93bkN0cmwudG9nZ2xlKCk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH07CgogICAgICBlbGVtZW50LmJpbmQoJ2NsaWNrJywgdG9nZ2xlRHJvcGRvd24pOwoKICAgICAgLy8gV0FJLUFSSUEKICAgICAgZWxlbWVudC5hdHRyKHsgJ2FyaWEtaGFzcG9wdXAnOiB0cnVlLCAnYXJpYS1leHBhbmRlZCc6IGZhbHNlIH0pOwogICAgICBzY29wZS4kd2F0Y2goZHJvcGRvd25DdHJsLmlzT3BlbiwgZnVuY3Rpb24oaXNPcGVuKSB7CiAgICAgICAgZWxlbWVudC5hdHRyKCdhcmlhLWV4cGFuZGVkJywgISFpc09wZW4pOwogICAgICB9KTsKCiAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHsKICAgICAgICBlbGVtZW50LnVuYmluZCgnY2xpY2snLCB0b2dnbGVEcm9wZG93bik7CiAgICAgIH0pOwogICAgfQogIH07Cn0pOwoKYW5ndWxhci5tb2R1bGUoJ3VpLmJvb3RzdHJhcC5zdGFja2VkTWFwJywgW10pCi8qKgogKiBBIGhlbHBlciwgaW50ZXJuYWwgZGF0YSBzdHJ1Y3R1cmUgdGhhdCBhY3RzIGFzIGEgbWFwIGJ1dCBhbHNvIGFsbG93cyBnZXR0aW5nIC8gcmVtb3ZpbmcKICogZWxlbWVudHMgaW4gdGhlIExJRk8gb3JkZXIKICovCiAgLmZhY3RvcnkoJyQkc3RhY2tlZE1hcCcsIGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHsKICAgICAgY3JlYXRlTmV3OiBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgc3RhY2sgPSBbXTsKCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGFkZDogZnVuY3Rpb24oa2V5LCB2YWx1ZSkgewogICAgICAgICAgICBzdGFjay5wdXNoKHsKICAgICAgICAgICAgICBrZXk6IGtleSwKICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9LAogICAgICAgICAgZ2V0OiBmdW5jdGlvbihrZXkpIHsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGFjay5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIGlmIChrZXkgPT09IHN0YWNrW2ldLmtleSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHN0YWNrW2ldOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIGtleXM6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICB2YXIga2V5cyA9IFtdOwogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0YWNrLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAga2V5cy5wdXNoKHN0YWNrW2ldLmtleSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGtleXM7CiAgICAgICAgICB9LAogICAgICAgICAgdG9wOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdOwogICAgICAgICAgfSwKICAgICAgICAgIHJlbW92ZTogZnVuY3Rpb24oa2V5KSB7CiAgICAgICAgICAgIHZhciBpZHggPSAtMTsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGFjay5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIGlmIChrZXkgPT09IHN0YWNrW2ldLmtleSkgewogICAgICAgICAgICAgICAgaWR4ID0gaTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gc3RhY2suc3BsaWNlKGlkeCwgMSlbMF07CiAgICAgICAgICB9LAogICAgICAgICAgcmVtb3ZlVG9wOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIHN0YWNrLnBvcCgpOwogICAgICAgICAgfSwKICAgICAgICAgIGxlbmd0aDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiBzdGFjay5sZW5ndGg7CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfQogICAgfTsKICB9KTsKYW5ndWxhci5tb2R1bGUoJ3VpLmJvb3RzdHJhcC5tb2RhbCcsIFsndWkuYm9vdHN0cmFwLnN0YWNrZWRNYXAnLCAndWkuYm9vdHN0cmFwLnBvc2l0aW9uJ10pCi8qKgogKiBBIGhlbHBlciwgaW50ZXJuYWwgZGF0YSBzdHJ1Y3R1cmUgdGhhdCBzdG9yZXMgYWxsIHJlZmVyZW5jZXMgYXR0YWNoZWQgdG8ga2V5CiAqLwogIC5mYWN0b3J5KCckJG11bHRpTWFwJywgZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gewogICAgICBjcmVhdGVOZXc6IGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBtYXAgPSB7fTsKCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGVudHJpZXM6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMobWFwKS5tYXAoZnVuY3Rpb24oa2V5KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIGtleToga2V5LAogICAgICAgICAgICAgICAgdmFsdWU6IG1hcFtrZXldCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9LAogICAgICAgICAgZ2V0OiBmdW5jdGlvbihrZXkpIHsKICAgICAgICAgICAgcmV0dXJuIG1hcFtrZXldOwogICAgICAgICAgfSwKICAgICAgICAgIGhhc0tleTogZnVuY3Rpb24oa2V5KSB7CiAgICAgICAgICAgIHJldHVybiAhIW1hcFtrZXldOwogICAgICAgICAgfSwKICAgICAgICAgIGtleXM6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMobWFwKTsKICAgICAgICAgIH0sCiAgICAgICAgICBwdXQ6IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKICAgICAgICAgICAgaWYgKCFtYXBba2V5XSkgewogICAgICAgICAgICAgIG1hcFtrZXldID0gW107CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG1hcFtrZXldLnB1c2godmFsdWUpOwogICAgICAgICAgfSwKICAgICAgICAgIHJlbW92ZTogZnVuY3Rpb24oa2V5LCB2YWx1ZSkgewogICAgICAgICAgICB2YXIgdmFsdWVzID0gbWFwW2tleV07CgogICAgICAgICAgICBpZiAoIXZhbHVlcykgewogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIGlkeCA9IHZhbHVlcy5pbmRleE9mKHZhbHVlKTsKCiAgICAgICAgICAgIGlmIChpZHggIT09IC0xKSB7CiAgICAgICAgICAgICAgdmFsdWVzLnNwbGljZShpZHgsIDEpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoIXZhbHVlcy5sZW5ndGgpIHsKICAgICAgICAgICAgICBkZWxldGUgbWFwW2tleV07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9CiAgICB9OwogIH0pCgovKioKICogUGx1Z2dhYmxlIHJlc29sdmUgbWVjaGFuaXNtIGZvciB0aGUgbW9kYWwgcmVzb2x2ZSByZXNvbHV0aW9uCiAqIFN1cHBvcnRzIFVJIFJvdXRlcidzICRyZXNvbHZlIHNlcnZpY2UKICovCiAgLnByb3ZpZGVyKCckdWliUmVzb2x2ZScsIGZ1bmN0aW9uKCkgewogICAgdmFyIHJlc29sdmUgPSB0aGlzOwogICAgdGhpcy5yZXNvbHZlciA9IG51bGw7CgogICAgdGhpcy5zZXRSZXNvbHZlciA9IGZ1bmN0aW9uKHJlc29sdmVyKSB7CiAgICAgIHRoaXMucmVzb2x2ZXIgPSByZXNvbHZlcjsKICAgIH07CgogICAgdGhpcy4kZ2V0ID0gWyckaW5qZWN0b3InLCAnJHEnLCBmdW5jdGlvbigkaW5qZWN0b3IsICRxKSB7CiAgICAgIHZhciByZXNvbHZlciA9IHJlc29sdmUucmVzb2x2ZXIgPyAkaW5qZWN0b3IuZ2V0KHJlc29sdmUucmVzb2x2ZXIpIDogbnVsbDsKICAgICAgcmV0dXJuIHsKICAgICAgICByZXNvbHZlOiBmdW5jdGlvbihpbnZvY2FibGVzLCBsb2NhbHMsIHBhcmVudCwgc2VsZikgewogICAgICAgICAgaWYgKHJlc29sdmVyKSB7CiAgICAgICAgICAgIHJldHVybiByZXNvbHZlci5yZXNvbHZlKGludm9jYWJsZXMsIGxvY2FscywgcGFyZW50LCBzZWxmKTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgcHJvbWlzZXMgPSBbXTsKCiAgICAgICAgICBhbmd1bGFyLmZvckVhY2goaW52b2NhYmxlcywgZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNGdW5jdGlvbih2YWx1ZSkgfHwgYW5ndWxhci5pc0FycmF5KHZhbHVlKSkgewogICAgICAgICAgICAgIHByb21pc2VzLnB1c2goJHEucmVzb2x2ZSgkaW5qZWN0b3IuaW52b2tlKHZhbHVlKSkpOwogICAgICAgICAgICB9IGVsc2UgaWYgKGFuZ3VsYXIuaXNTdHJpbmcodmFsdWUpKSB7CiAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaCgkcS5yZXNvbHZlKCRpbmplY3Rvci5nZXQodmFsdWUpKSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaCgkcS5yZXNvbHZlKHZhbHVlKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwoKICAgICAgICAgIHJldHVybiAkcS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24ocmVzb2x2ZXMpIHsKICAgICAgICAgICAgdmFyIHJlc29sdmVPYmogPSB7fTsKICAgICAgICAgICAgdmFyIHJlc29sdmVJdGVyID0gMDsKICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGludm9jYWJsZXMsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHsKICAgICAgICAgICAgICByZXNvbHZlT2JqW2tleV0gPSByZXNvbHZlc1tyZXNvbHZlSXRlcisrXTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICByZXR1cm4gcmVzb2x2ZU9iajsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfTsKICAgIH1dOwogIH0pCgovKioKICogQSBoZWxwZXIgZGlyZWN0aXZlIGZvciB0aGUgJG1vZGFsIHNlcnZpY2UuIEl0IGNyZWF0ZXMgYSBiYWNrZHJvcCBlbGVtZW50LgogKi8KICAuZGlyZWN0aXZlKCd1aWJNb2RhbEJhY2tkcm9wJywgWyckYW5pbWF0ZScsICckaW5qZWN0b3InLCAnJHVpYk1vZGFsU3RhY2snLAogIGZ1bmN0aW9uKCRhbmltYXRlLCAkaW5qZWN0b3IsICRtb2RhbFN0YWNrKSB7CiAgICByZXR1cm4gewogICAgICByZXN0cmljdDogJ0EnLAogICAgICBjb21waWxlOiBmdW5jdGlvbih0RWxlbWVudCwgdEF0dHJzKSB7CiAgICAgICAgdEVsZW1lbnQuYWRkQ2xhc3ModEF0dHJzLmJhY2tkcm9wQ2xhc3MpOwogICAgICAgIHJldHVybiBsaW5rRm47CiAgICAgIH0KICAgIH07CgogICAgZnVuY3Rpb24gbGlua0ZuKHNjb3BlLCBlbGVtZW50LCBhdHRycykgewogICAgICBpZiAoYXR0cnMubW9kYWxJbkNsYXNzKSB7CiAgICAgICAgJGFuaW1hdGUuYWRkQ2xhc3MoZWxlbWVudCwgYXR0cnMubW9kYWxJbkNsYXNzKTsKCiAgICAgICAgc2NvcGUuJG9uKCRtb2RhbFN0YWNrLk5PV19DTE9TSU5HX0VWRU5ULCBmdW5jdGlvbihlLCBzZXRJc0FzeW5jKSB7CiAgICAgICAgICB2YXIgZG9uZSA9IHNldElzQXN5bmMoKTsKICAgICAgICAgIGlmIChzY29wZS5tb2RhbE9wdGlvbnMuYW5pbWF0aW9uKSB7CiAgICAgICAgICAgICRhbmltYXRlLnJlbW92ZUNsYXNzKGVsZW1lbnQsIGF0dHJzLm1vZGFsSW5DbGFzcykudGhlbihkb25lKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGRvbmUoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH1dKQoKICAuZGlyZWN0aXZlKCd1aWJNb2RhbFdpbmRvdycsIFsnJHVpYk1vZGFsU3RhY2snLCAnJHEnLCAnJGFuaW1hdGVDc3MnLCAnJGRvY3VtZW50JywKICBmdW5jdGlvbigkbW9kYWxTdGFjaywgJHEsICRhbmltYXRlQ3NzLCAkZG9jdW1lbnQpIHsKICAgIHJldHVybiB7CiAgICAgIHNjb3BlOiB7CiAgICAgICAgaW5kZXg6ICdAJwogICAgICB9LAogICAgICByZXN0cmljdDogJ0EnLAogICAgICB0cmFuc2NsdWRlOiB0cnVlLAogICAgICB0ZW1wbGF0ZVVybDogZnVuY3Rpb24odEVsZW1lbnQsIHRBdHRycykgewogICAgICAgIHJldHVybiB0QXR0cnMudGVtcGxhdGVVcmwgfHwgJ3VpYi90ZW1wbGF0ZS9tb2RhbC93aW5kb3cuaHRtbCc7CiAgICAgIH0sCiAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycykgewogICAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoYXR0cnMud2luZG93VG9wQ2xhc3MgfHwgJycpOwogICAgICAgIHNjb3BlLnNpemUgPSBhdHRycy5zaXplOwoKICAgICAgICBzY29wZS5jbG9zZSA9IGZ1bmN0aW9uKGV2dCkgewogICAgICAgICAgdmFyIG1vZGFsID0gJG1vZGFsU3RhY2suZ2V0VG9wKCk7CiAgICAgICAgICBpZiAobW9kYWwgJiYgbW9kYWwudmFsdWUuYmFja2Ryb3AgJiYKICAgICAgICAgICAgbW9kYWwudmFsdWUuYmFja2Ryb3AgIT09ICdzdGF0aWMnICYmCiAgICAgICAgICAgIGV2dC50YXJnZXQgPT09IGV2dC5jdXJyZW50VGFyZ2V0KSB7CiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICRtb2RhbFN0YWNrLmRpc21pc3MobW9kYWwua2V5LCAnYmFja2Ryb3AgY2xpY2snKTsKICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICAvLyBtb3ZlZCBmcm9tIHRlbXBsYXRlIHRvIGZpeCBpc3N1ZSAjMjI4MAogICAgICAgIGVsZW1lbnQub24oJ2NsaWNrJywgc2NvcGUuY2xvc2UpOwoKICAgICAgICAvLyBUaGlzIHByb3BlcnR5IGlzIG9ubHkgYWRkZWQgdG8gdGhlIHNjb3BlIGZvciB0aGUgcHVycG9zZSBvZiBkZXRlY3Rpbmcgd2hlbiB0aGlzIGRpcmVjdGl2ZSBpcyByZW5kZXJlZC4KICAgICAgICAvLyBXZSBjYW4gZGV0ZWN0IHRoYXQgYnkgdXNpbmcgdGhpcyBwcm9wZXJ0eSBpbiB0aGUgdGVtcGxhdGUgYXNzb2NpYXRlZCB3aXRoIHRoaXMgZGlyZWN0aXZlIGFuZCB0aGVuIHVzZQogICAgICAgIC8vIHtAbGluayBBdHRyaWJ1dGUjJG9ic2VydmV9IG9uIGl0LiBGb3IgbW9yZSBkZXRhaWxzIHBsZWFzZSBzZWUge0BsaW5rIFRhYmxlQ29sdW1uUmVzaXplfS4KICAgICAgICBzY29wZS4kaXNSZW5kZXJlZCA9IHRydWU7CgogICAgICAgIC8vIERlZmVycmVkIG9iamVjdCB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgd2hlbiB0aGlzIG1vZGFsIGlzIHJlbmRlci4KICAgICAgICB2YXIgbW9kYWxSZW5kZXJEZWZlck9iaiA9ICRxLmRlZmVyKCk7CiAgICAgICAgLy8gUmVzb2x2ZSByZW5kZXIgcHJvbWlzZSBwb3N0LWRpZ2VzdAogICAgICAgIHNjb3BlLiQkcG9zdERpZ2VzdChmdW5jdGlvbigpIHsKICAgICAgICAgIG1vZGFsUmVuZGVyRGVmZXJPYmoucmVzb2x2ZSgpOwogICAgICAgIH0pOwoKICAgICAgICBtb2RhbFJlbmRlckRlZmVyT2JqLnByb21pc2UudGhlbihmdW5jdGlvbigpIHsKICAgICAgICAgIHZhciBhbmltYXRpb25Qcm9taXNlID0gbnVsbDsKCiAgICAgICAgICBpZiAoYXR0cnMubW9kYWxJbkNsYXNzKSB7CiAgICAgICAgICAgIGFuaW1hdGlvblByb21pc2UgPSAkYW5pbWF0ZUNzcyhlbGVtZW50LCB7CiAgICAgICAgICAgICAgYWRkQ2xhc3M6IGF0dHJzLm1vZGFsSW5DbGFzcwogICAgICAgICAgICB9KS5zdGFydCgpOwoKICAgICAgICAgICAgc2NvcGUuJG9uKCRtb2RhbFN0YWNrLk5PV19DTE9TSU5HX0VWRU5ULCBmdW5jdGlvbihlLCBzZXRJc0FzeW5jKSB7CiAgICAgICAgICAgICAgdmFyIGRvbmUgPSBzZXRJc0FzeW5jKCk7CiAgICAgICAgICAgICAgJGFuaW1hdGVDc3MoZWxlbWVudCwgewogICAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3M6IGF0dHJzLm1vZGFsSW5DbGFzcwogICAgICAgICAgICAgIH0pLnN0YXJ0KCkudGhlbihkb25lKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgoKICAgICAgICAgICRxLndoZW4oYW5pbWF0aW9uUHJvbWlzZSkudGhlbihmdW5jdGlvbigpIHsKICAgICAgICAgICAgLy8gTm90aWZ5IHtAbGluayAkbW9kYWxTdGFja30gdGhhdCBtb2RhbCBpcyByZW5kZXJlZC4KICAgICAgICAgICAgdmFyIG1vZGFsID0gJG1vZGFsU3RhY2suZ2V0VG9wKCk7CiAgICAgICAgICAgIGlmIChtb2RhbCkgewogICAgICAgICAgICAgICRtb2RhbFN0YWNrLm1vZGFsUmVuZGVyZWQobW9kYWwua2V5KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIElmIHNvbWV0aGluZyB3aXRoaW4gdGhlIGZyZXNobHktb3BlbmVkIG1vZGFsIGFscmVhZHkgaGFzIGZvY3VzIChwZXJoYXBzIHZpYSBhCiAgICAgICAgICAgICAqIGRpcmVjdGl2ZSB0aGF0IGNhdXNlcyBmb2N1cykuIHRoZW4gbm8gbmVlZCB0byB0cnkgYW5kIGZvY3VzIGFueXRoaW5nLgogICAgICAgICAgICAgKi8KICAgICAgICAgICAgaWYgKCEoJGRvY3VtZW50WzBdLmFjdGl2ZUVsZW1lbnQgJiYgZWxlbWVudFswXS5jb250YWlucygkZG9jdW1lbnRbMF0uYWN0aXZlRWxlbWVudCkpKSB7CiAgICAgICAgICAgICAgdmFyIGlucHV0V2l0aEF1dG9mb2N1cyA9IGVsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcignW2F1dG9mb2N1c10nKTsKICAgICAgICAgICAgICAvKioKICAgICAgICAgICAgICAgKiBBdXRvLWZvY3VzaW5nIG9mIGEgZnJlc2hseS1vcGVuZWQgbW9kYWwgZWxlbWVudCBjYXVzZXMgYW55IGNoaWxkIGVsZW1lbnRzCiAgICAgICAgICAgICAgICogd2l0aCB0aGUgYXV0b2ZvY3VzIGF0dHJpYnV0ZSB0byBsb3NlIGZvY3VzLiBUaGlzIGlzIGFuIGlzc3VlIG9uIHRvdWNoCiAgICAgICAgICAgICAgICogYmFzZWQgZGV2aWNlcyB3aGljaCB3aWxsIHNob3cgYW5kIHRoZW4gaGlkZSB0aGUgb25zY3JlZW4ga2V5Ym9hcmQuCiAgICAgICAgICAgICAgICogQXR0ZW1wdHMgdG8gcmVmb2N1cyB0aGUgYXV0b2ZvY3VzIGVsZW1lbnQgdmlhIEphdmFTY3JpcHQgd2lsbCBub3QgcmVvcGVuCiAgICAgICAgICAgICAgICogdGhlIG9uc2NyZWVuIGtleWJvYXJkLiBGaXhlZCBieSB1cGRhdGVkIHRoZSBmb2N1c2luZyBsb2dpYyB0byBvbmx5IGF1dG9mb2N1cwogICAgICAgICAgICAgICAqIHRoZSBtb2RhbCBlbGVtZW50IGlmIHRoZSBtb2RhbCBkb2VzIG5vdCBjb250YWluIGFuIGF1dG9mb2N1cyBlbGVtZW50LgogICAgICAgICAgICAgICAqLwogICAgICAgICAgICAgIGlmIChpbnB1dFdpdGhBdXRvZm9jdXMpIHsKICAgICAgICAgICAgICAgIGlucHV0V2l0aEF1dG9mb2N1cy5mb2N1cygpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBlbGVtZW50WzBdLmZvY3VzKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfTsKICB9XSkKCiAgLmRpcmVjdGl2ZSgndWliTW9kYWxBbmltYXRpb25DbGFzcycsIGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHsKICAgICAgY29tcGlsZTogZnVuY3Rpb24odEVsZW1lbnQsIHRBdHRycykgewogICAgICAgIGlmICh0QXR0cnMubW9kYWxBbmltYXRpb24pIHsKICAgICAgICAgIHRFbGVtZW50LmFkZENsYXNzKHRBdHRycy51aWJNb2RhbEFuaW1hdGlvbkNsYXNzKTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgfSkKCiAgLmRpcmVjdGl2ZSgndWliTW9kYWxUcmFuc2NsdWRlJywgWyckYW5pbWF0ZScsIGZ1bmN0aW9uKCRhbmltYXRlKSB7CiAgICByZXR1cm4gewogICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIGNvbnRyb2xsZXIsIHRyYW5zY2x1ZGUpIHsKICAgICAgICB0cmFuc2NsdWRlKHNjb3BlLiRwYXJlbnQsIGZ1bmN0aW9uKGNsb25lKSB7CiAgICAgICAgICBlbGVtZW50LmVtcHR5KCk7CiAgICAgICAgICAkYW5pbWF0ZS5lbnRlcihjbG9uZSwgZWxlbWVudCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH07CiAgfV0pCgogIC5mYWN0b3J5KCckdWliTW9kYWxTdGFjaycsIFsnJGFuaW1hdGUnLCAnJGFuaW1hdGVDc3MnLCAnJGRvY3VtZW50JywKICAgICckY29tcGlsZScsICckcm9vdFNjb3BlJywgJyRxJywgJyQkbXVsdGlNYXAnLCAnJCRzdGFja2VkTWFwJywgJyR1aWJQb3NpdGlvbicsCiAgICBmdW5jdGlvbigkYW5pbWF0ZSwgJGFuaW1hdGVDc3MsICRkb2N1bWVudCwgJGNvbXBpbGUsICRyb290U2NvcGUsICRxLCAkJG11bHRpTWFwLCAkJHN0YWNrZWRNYXAsICR1aWJQb3NpdGlvbikgewogICAgICB2YXIgT1BFTkVEX01PREFMX0NMQVNTID0gJ21vZGFsLW9wZW4nOwoKICAgICAgdmFyIGJhY2tkcm9wRG9tRWwsIGJhY2tkcm9wU2NvcGU7CiAgICAgIHZhciBvcGVuZWRXaW5kb3dzID0gJCRzdGFja2VkTWFwLmNyZWF0ZU5ldygpOwogICAgICB2YXIgb3BlbmVkQ2xhc3NlcyA9ICQkbXVsdGlNYXAuY3JlYXRlTmV3KCk7CiAgICAgIHZhciAkbW9kYWxTdGFjayA9IHsKICAgICAgICBOT1dfQ0xPU0lOR19FVkVOVDogJ21vZGFsLnN0YWNrLm5vdy1jbG9zaW5nJwogICAgICB9OwogICAgICB2YXIgdG9wTW9kYWxJbmRleCA9IDA7CiAgICAgIHZhciBwcmV2aW91c1RvcE9wZW5lZE1vZGFsID0gbnVsbDsKCiAgICAgIC8vTW9kYWwgZm9jdXMgYmVoYXZpb3IKICAgICAgdmFyIHRhYmJhYmxlU2VsZWN0b3IgPSAnYVtocmVmXSwgYXJlYVtocmVmXSwgaW5wdXQ6bm90KFtkaXNhYmxlZF0pOm5vdChbdGFiaW5kZXg9XCctMVwnXSksICcgKwogICAgICAgICdidXR0b246bm90KFtkaXNhYmxlZF0pOm5vdChbdGFiaW5kZXg9XCctMVwnXSksc2VsZWN0Om5vdChbZGlzYWJsZWRdKTpub3QoW3RhYmluZGV4PVwnLTFcJ10pLCB0ZXh0YXJlYTpub3QoW2Rpc2FibGVkXSk6bm90KFt0YWJpbmRleD1cJy0xXCddKSwgJyArCiAgICAgICAgJ2lmcmFtZSwgb2JqZWN0LCBlbWJlZCwgKlt0YWJpbmRleF06bm90KFt0YWJpbmRleD1cJy0xXCddKSwgKltjb250ZW50ZWRpdGFibGU9dHJ1ZV0nOwogICAgICB2YXIgc2Nyb2xsYmFyUGFkZGluZzsKICAgICAgdmFyIFNOQUtFX0NBU0VfUkVHRVhQID0gL1tBLVpdL2c7CgogICAgICAvLyBUT0RPOiBleHRyYWN0IGludG8gY29tbW9uIGRlcGVuZGVuY3kgd2l0aCB0b29sdGlwCiAgICAgIGZ1bmN0aW9uIHNuYWtlX2Nhc2UobmFtZSkgewogICAgICAgIHZhciBzZXBhcmF0b3IgPSAnLSc7CiAgICAgICAgcmV0dXJuIG5hbWUucmVwbGFjZShTTkFLRV9DQVNFX1JFR0VYUCwgZnVuY3Rpb24obGV0dGVyLCBwb3MpIHsKICAgICAgICAgIHJldHVybiAocG9zID8gc2VwYXJhdG9yIDogJycpICsgbGV0dGVyLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGlzVmlzaWJsZShlbGVtZW50KSB7CiAgICAgICAgcmV0dXJuICEhKGVsZW1lbnQub2Zmc2V0V2lkdGggfHwKICAgICAgICAgIGVsZW1lbnQub2Zmc2V0SGVpZ2h0IHx8CiAgICAgICAgICBlbGVtZW50LmdldENsaWVudFJlY3RzKCkubGVuZ3RoKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gYmFja2Ryb3BJbmRleCgpIHsKICAgICAgICB2YXIgdG9wQmFja2Ryb3BJbmRleCA9IC0xOwogICAgICAgIHZhciBvcGVuZWQgPSBvcGVuZWRXaW5kb3dzLmtleXMoKTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9wZW5lZC5sZW5ndGg7IGkrKykgewogICAgICAgICAgaWYgKG9wZW5lZFdpbmRvd3MuZ2V0KG9wZW5lZFtpXSkudmFsdWUuYmFja2Ryb3ApIHsKICAgICAgICAgICAgdG9wQmFja2Ryb3BJbmRleCA9IGk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBJZiBhbnkgYmFja2Ryb3AgZXhpc3QsIGVuc3VyZSB0aGF0IGl0J3MgaW5kZXggaXMgYWx3YXlzCiAgICAgICAgLy8gcmlnaHQgYmVsb3cgdGhlIHRvcCBtb2RhbAogICAgICAgIGlmICh0b3BCYWNrZHJvcEluZGV4ID4gLTEgJiYgdG9wQmFja2Ryb3BJbmRleCA8IHRvcE1vZGFsSW5kZXgpIHsKICAgICAgICAgIHRvcEJhY2tkcm9wSW5kZXggPSB0b3BNb2RhbEluZGV4OwogICAgICAgIH0KICAgICAgICByZXR1cm4gdG9wQmFja2Ryb3BJbmRleDsKICAgICAgfQoKICAgICAgJHJvb3RTY29wZS4kd2F0Y2goYmFja2Ryb3BJbmRleCwgZnVuY3Rpb24obmV3QmFja2Ryb3BJbmRleCkgewogICAgICAgIGlmIChiYWNrZHJvcFNjb3BlKSB7CiAgICAgICAgICBiYWNrZHJvcFNjb3BlLmluZGV4ID0gbmV3QmFja2Ryb3BJbmRleDsKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgZnVuY3Rpb24gcmVtb3ZlTW9kYWxXaW5kb3cobW9kYWxJbnN0YW5jZSwgZWxlbWVudFRvUmVjZWl2ZUZvY3VzKSB7CiAgICAgICAgdmFyIG1vZGFsV2luZG93ID0gb3BlbmVkV2luZG93cy5nZXQobW9kYWxJbnN0YW5jZSkudmFsdWU7CiAgICAgICAgdmFyIGFwcGVuZFRvRWxlbWVudCA9IG1vZGFsV2luZG93LmFwcGVuZFRvOwoKICAgICAgICAvL2NsZWFuIHVwIHRoZSBzdGFjawogICAgICAgIG9wZW5lZFdpbmRvd3MucmVtb3ZlKG1vZGFsSW5zdGFuY2UpOwogICAgICAgIHByZXZpb3VzVG9wT3BlbmVkTW9kYWwgPSBvcGVuZWRXaW5kb3dzLnRvcCgpOwogICAgICAgIGlmIChwcmV2aW91c1RvcE9wZW5lZE1vZGFsKSB7CiAgICAgICAgICB0b3BNb2RhbEluZGV4ID0gcGFyc2VJbnQocHJldmlvdXNUb3BPcGVuZWRNb2RhbC52YWx1ZS5tb2RhbERvbUVsLmF0dHIoJ2luZGV4JyksIDEwKTsKICAgICAgICB9CgogICAgICAgIHJlbW92ZUFmdGVyQW5pbWF0ZShtb2RhbFdpbmRvdy5tb2RhbERvbUVsLCBtb2RhbFdpbmRvdy5tb2RhbFNjb3BlLCBmdW5jdGlvbigpIHsKICAgICAgICAgIHZhciBtb2RhbEJvZHlDbGFzcyA9IG1vZGFsV2luZG93Lm9wZW5lZENsYXNzIHx8IE9QRU5FRF9NT0RBTF9DTEFTUzsKICAgICAgICAgIG9wZW5lZENsYXNzZXMucmVtb3ZlKG1vZGFsQm9keUNsYXNzLCBtb2RhbEluc3RhbmNlKTsKICAgICAgICAgIHZhciBhcmVBbnlPcGVuID0gb3BlbmVkQ2xhc3Nlcy5oYXNLZXkobW9kYWxCb2R5Q2xhc3MpOwogICAgICAgICAgYXBwZW5kVG9FbGVtZW50LnRvZ2dsZUNsYXNzKG1vZGFsQm9keUNsYXNzLCBhcmVBbnlPcGVuKTsKICAgICAgICAgIGlmICghYXJlQW55T3BlbiAmJiBzY3JvbGxiYXJQYWRkaW5nICYmIHNjcm9sbGJhclBhZGRpbmcuaGVpZ2h0T3ZlcmZsb3cgJiYgc2Nyb2xsYmFyUGFkZGluZy5zY3JvbGxiYXJXaWR0aCkgewogICAgICAgICAgICBpZiAoc2Nyb2xsYmFyUGFkZGluZy5vcmlnaW5hbFJpZ2h0KSB7CiAgICAgICAgICAgICAgYXBwZW5kVG9FbGVtZW50LmNzcyh7cGFkZGluZ1JpZ2h0OiBzY3JvbGxiYXJQYWRkaW5nLm9yaWdpbmFsUmlnaHQgKyAncHgnfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgYXBwZW5kVG9FbGVtZW50LmNzcyh7cGFkZGluZ1JpZ2h0OiAnJ30pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHNjcm9sbGJhclBhZGRpbmcgPSBudWxsOwogICAgICAgICAgfQogICAgICAgICAgdG9nZ2xlVG9wV2luZG93Q2xhc3ModHJ1ZSk7CiAgICAgICAgfSwgbW9kYWxXaW5kb3cuY2xvc2VkRGVmZXJyZWQpOwogICAgICAgIGNoZWNrUmVtb3ZlQmFja2Ryb3AoKTsKCiAgICAgICAgLy9tb3ZlIGZvY3VzIHRvIHNwZWNpZmllZCBlbGVtZW50IGlmIGF2YWlsYWJsZSwgb3IgZWxzZSB0byBib2R5CiAgICAgICAgaWYgKGVsZW1lbnRUb1JlY2VpdmVGb2N1cyAmJiBlbGVtZW50VG9SZWNlaXZlRm9jdXMuZm9jdXMpIHsKICAgICAgICAgIGVsZW1lbnRUb1JlY2VpdmVGb2N1cy5mb2N1cygpOwogICAgICAgIH0gZWxzZSBpZiAoYXBwZW5kVG9FbGVtZW50LmZvY3VzKSB7CiAgICAgICAgICBhcHBlbmRUb0VsZW1lbnQuZm9jdXMoKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIEFkZCBvciByZW1vdmUgIndpbmRvd1RvcENsYXNzIiBmcm9tIHRoZSB0b3Agd2luZG93IGluIHRoZSBzdGFjawogICAgICBmdW5jdGlvbiB0b2dnbGVUb3BXaW5kb3dDbGFzcyh0b2dnbGVTd2l0Y2gpIHsKICAgICAgICB2YXIgbW9kYWxXaW5kb3c7CgogICAgICAgIGlmIChvcGVuZWRXaW5kb3dzLmxlbmd0aCgpID4gMCkgewogICAgICAgICAgbW9kYWxXaW5kb3cgPSBvcGVuZWRXaW5kb3dzLnRvcCgpLnZhbHVlOwogICAgICAgICAgbW9kYWxXaW5kb3cubW9kYWxEb21FbC50b2dnbGVDbGFzcyhtb2RhbFdpbmRvdy53aW5kb3dUb3BDbGFzcyB8fCAnJywgdG9nZ2xlU3dpdGNoKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGNoZWNrUmVtb3ZlQmFja2Ryb3AoKSB7CiAgICAgICAgLy9yZW1vdmUgYmFja2Ryb3AgaWYgbm8gbG9uZ2VyIG5lZWRlZAogICAgICAgIGlmIChiYWNrZHJvcERvbUVsICYmIGJhY2tkcm9wSW5kZXgoKSA9PT0gLTEpIHsKICAgICAgICAgIHZhciBiYWNrZHJvcFNjb3BlUmVmID0gYmFja2Ryb3BTY29wZTsKICAgICAgICAgIHJlbW92ZUFmdGVyQW5pbWF0ZShiYWNrZHJvcERvbUVsLCBiYWNrZHJvcFNjb3BlLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgYmFja2Ryb3BTY29wZVJlZiA9IG51bGw7CiAgICAgICAgICB9KTsKICAgICAgICAgIGJhY2tkcm9wRG9tRWwgPSB1bmRlZmluZWQ7CiAgICAgICAgICBiYWNrZHJvcFNjb3BlID0gdW5kZWZpbmVkOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZnVuY3Rpb24gcmVtb3ZlQWZ0ZXJBbmltYXRlKGRvbUVsLCBzY29wZSwgZG9uZSwgY2xvc2VkRGVmZXJyZWQpIHsKICAgICAgICB2YXIgYXN5bmNEZWZlcnJlZDsKICAgICAgICB2YXIgYXN5bmNQcm9taXNlID0gbnVsbDsKICAgICAgICB2YXIgc2V0SXNBc3luYyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgaWYgKCFhc3luY0RlZmVycmVkKSB7CiAgICAgICAgICAgIGFzeW5jRGVmZXJyZWQgPSAkcS5kZWZlcigpOwogICAgICAgICAgICBhc3luY1Byb21pc2UgPSBhc3luY0RlZmVycmVkLnByb21pc2U7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGFzeW5jRG9uZSgpIHsKICAgICAgICAgICAgYXN5bmNEZWZlcnJlZC5yZXNvbHZlKCk7CiAgICAgICAgICB9OwogICAgICAgIH07CiAgICAgICAgc2NvcGUuJGJyb2FkY2FzdCgkbW9kYWxTdGFjay5OT1dfQ0xPU0lOR19FVkVOVCwgc2V0SXNBc3luYyk7CgogICAgICAgIC8vIE5vdGUgdGhhdCBpdCdzIGludGVudGlvbmFsIHRoYXQgYXN5bmNQcm9taXNlIG1pZ2h0IGJlIG51bGwuCiAgICAgICAgLy8gVGhhdCdzIHdoZW4gc2V0SXNBc3luYyBoYXMgbm90IGJlZW4gY2FsbGVkIGR1cmluZyB0aGUKICAgICAgICAvLyBOT1dfQ0xPU0lOR19FVkVOVCBicm9hZGNhc3QuCiAgICAgICAgcmV0dXJuICRxLndoZW4oYXN5bmNQcm9taXNlKS50aGVuKGFmdGVyQW5pbWF0aW5nKTsKCiAgICAgICAgZnVuY3Rpb24gYWZ0ZXJBbmltYXRpbmcoKSB7CiAgICAgICAgICBpZiAoYWZ0ZXJBbmltYXRpbmcuZG9uZSkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBhZnRlckFuaW1hdGluZy5kb25lID0gdHJ1ZTsKCiAgICAgICAgICAkYW5pbWF0ZS5sZWF2ZShkb21FbCkudGhlbihmdW5jdGlvbigpIHsKICAgICAgICAgICAgaWYgKGRvbmUpIHsKICAgICAgICAgICAgICBkb25lKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGRvbUVsLnJlbW92ZSgpOwogICAgICAgICAgICBpZiAoY2xvc2VkRGVmZXJyZWQpIHsKICAgICAgICAgICAgICBjbG9zZWREZWZlcnJlZC5yZXNvbHZlKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwoKICAgICAgICAgIHNjb3BlLiRkZXN0cm95KCk7CiAgICAgICAgfQogICAgICB9CgogICAgICAkZG9jdW1lbnQub24oJ2tleWRvd24nLCBrZXlkb3duTGlzdGVuZXIpOwoKICAgICAgJHJvb3RTY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7CiAgICAgICAgJGRvY3VtZW50Lm9mZigna2V5ZG93bicsIGtleWRvd25MaXN0ZW5lcik7CiAgICAgIH0pOwoKICAgICAgZnVuY3Rpb24ga2V5ZG93bkxpc3RlbmVyKGV2dCkgewogICAgICAgIGlmIChldnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHsKICAgICAgICAgIHJldHVybiBldnQ7CiAgICAgICAgfQoKICAgICAgICB2YXIgbW9kYWwgPSBvcGVuZWRXaW5kb3dzLnRvcCgpOwogICAgICAgIGlmIChtb2RhbCkgewogICAgICAgICAgc3dpdGNoIChldnQud2hpY2gpIHsKICAgICAgICAgICAgY2FzZSAyNzogewogICAgICAgICAgICAgIGlmIChtb2RhbC52YWx1ZS5rZXlib2FyZCkgewogICAgICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRhcHBseShmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgJG1vZGFsU3RhY2suZGlzbWlzcyhtb2RhbC5rZXksICdlc2NhcGUga2V5IHByZXNzJyk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2FzZSA5OiB7CiAgICAgICAgICAgICAgdmFyIGxpc3QgPSAkbW9kYWxTdGFjay5sb2FkRm9jdXNFbGVtZW50TGlzdChtb2RhbCk7CiAgICAgICAgICAgICAgdmFyIGZvY3VzQ2hhbmdlZCA9IGZhbHNlOwogICAgICAgICAgICAgIGlmIChldnQuc2hpZnRLZXkpIHsKICAgICAgICAgICAgICAgIGlmICgkbW9kYWxTdGFjay5pc0ZvY3VzSW5GaXJzdEl0ZW0oZXZ0LCBsaXN0KSB8fCAkbW9kYWxTdGFjay5pc01vZGFsRm9jdXNlZChldnQsIG1vZGFsKSkgewogICAgICAgICAgICAgICAgICBmb2N1c0NoYW5nZWQgPSAkbW9kYWxTdGFjay5mb2N1c0xhc3RGb2N1c2FibGVFbGVtZW50KGxpc3QpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpZiAoJG1vZGFsU3RhY2suaXNGb2N1c0luTGFzdEl0ZW0oZXZ0LCBsaXN0KSkgewogICAgICAgICAgICAgICAgICBmb2N1c0NoYW5nZWQgPSAkbW9kYWxTdGFjay5mb2N1c0ZpcnN0Rm9jdXNhYmxlRWxlbWVudChsaXN0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmIChmb2N1c0NoYW5nZWQpIHsKICAgICAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgICRtb2RhbFN0YWNrLm9wZW4gPSBmdW5jdGlvbihtb2RhbEluc3RhbmNlLCBtb2RhbCkgewogICAgICAgIHZhciBtb2RhbE9wZW5lciA9ICRkb2N1bWVudFswXS5hY3RpdmVFbGVtZW50LAogICAgICAgICAgbW9kYWxCb2R5Q2xhc3MgPSBtb2RhbC5vcGVuZWRDbGFzcyB8fCBPUEVORURfTU9EQUxfQ0xBU1M7CgogICAgICAgIHRvZ2dsZVRvcFdpbmRvd0NsYXNzKGZhbHNlKTsKCiAgICAgICAgLy8gU3RvcmUgdGhlIGN1cnJlbnQgdG9wIGZpcnN0LCB0byBkZXRlcm1pbmUgd2hhdCBpbmRleCB3ZSBvdWdodCB0byB1c2UKICAgICAgICAvLyBmb3IgdGhlIGN1cnJlbnQgdG9wIG1vZGFsCiAgICAgICAgcHJldmlvdXNUb3BPcGVuZWRNb2RhbCA9IG9wZW5lZFdpbmRvd3MudG9wKCk7CgogICAgICAgIG9wZW5lZFdpbmRvd3MuYWRkKG1vZGFsSW5zdGFuY2UsIHsKICAgICAgICAgIGRlZmVycmVkOiBtb2RhbC5kZWZlcnJlZCwKICAgICAgICAgIHJlbmRlckRlZmVycmVkOiBtb2RhbC5yZW5kZXJEZWZlcnJlZCwKICAgICAgICAgIGNsb3NlZERlZmVycmVkOiBtb2RhbC5jbG9zZWREZWZlcnJlZCwKICAgICAgICAgIG1vZGFsU2NvcGU6IG1vZGFsLnNjb3BlLAogICAgICAgICAgYmFja2Ryb3A6IG1vZGFsLmJhY2tkcm9wLAogICAgICAgICAga2V5Ym9hcmQ6IG1vZGFsLmtleWJvYXJkLAogICAgICAgICAgb3BlbmVkQ2xhc3M6IG1vZGFsLm9wZW5lZENsYXNzLAogICAgICAgICAgd2luZG93VG9wQ2xhc3M6IG1vZGFsLndpbmRvd1RvcENsYXNzLAogICAgICAgICAgYW5pbWF0aW9uOiBtb2RhbC5hbmltYXRpb24sCiAgICAgICAgICBhcHBlbmRUbzogbW9kYWwuYXBwZW5kVG8KICAgICAgICB9KTsKCiAgICAgICAgb3BlbmVkQ2xhc3Nlcy5wdXQobW9kYWxCb2R5Q2xhc3MsIG1vZGFsSW5zdGFuY2UpOwoKICAgICAgICB2YXIgYXBwZW5kVG9FbGVtZW50ID0gbW9kYWwuYXBwZW5kVG8sCiAgICAgICAgICAgIGN1cnJCYWNrZHJvcEluZGV4ID0gYmFja2Ryb3BJbmRleCgpOwoKICAgICAgICBpZiAoIWFwcGVuZFRvRWxlbWVudC5sZW5ndGgpIHsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcignYXBwZW5kVG8gZWxlbWVudCBub3QgZm91bmQuIE1ha2Ugc3VyZSB0aGF0IHRoZSBlbGVtZW50IHBhc3NlZCBpcyBpbiBET00uJyk7CiAgICAgICAgfQoKICAgICAgICBpZiAoY3VyckJhY2tkcm9wSW5kZXggPj0gMCAmJiAhYmFja2Ryb3BEb21FbCkgewogICAgICAgICAgYmFja2Ryb3BTY29wZSA9ICRyb290U2NvcGUuJG5ldyh0cnVlKTsKICAgICAgICAgIGJhY2tkcm9wU2NvcGUubW9kYWxPcHRpb25zID0gbW9kYWw7CiAgICAgICAgICBiYWNrZHJvcFNjb3BlLmluZGV4ID0gY3VyckJhY2tkcm9wSW5kZXg7CiAgICAgICAgICBiYWNrZHJvcERvbUVsID0gYW5ndWxhci5lbGVtZW50KCc8ZGl2IHVpYi1tb2RhbC1iYWNrZHJvcD0ibW9kYWwtYmFja2Ryb3AiPjwvZGl2PicpOwogICAgICAgICAgYmFja2Ryb3BEb21FbC5hdHRyKHsKICAgICAgICAgICAgJ2NsYXNzJzogJ21vZGFsLWJhY2tkcm9wJywKICAgICAgICAgICAgJ25nLXN0eWxlJzogJ3tcJ3otaW5kZXhcJzogMTA0MCArIChpbmRleCAmJiAxIHx8IDApICsgaW5kZXgqMTB9JywKICAgICAgICAgICAgJ3VpYi1tb2RhbC1hbmltYXRpb24tY2xhc3MnOiAnZmFkZScsCiAgICAgICAgICAgICdtb2RhbC1pbi1jbGFzcyc6ICdpbicKICAgICAgICAgIH0pOwogICAgICAgICAgaWYgKG1vZGFsLmJhY2tkcm9wQ2xhc3MpIHsKICAgICAgICAgICAgYmFja2Ryb3BEb21FbC5hZGRDbGFzcyhtb2RhbC5iYWNrZHJvcENsYXNzKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAobW9kYWwuYW5pbWF0aW9uKSB7CiAgICAgICAgICAgIGJhY2tkcm9wRG9tRWwuYXR0cignbW9kYWwtYW5pbWF0aW9uJywgJ3RydWUnKTsKICAgICAgICAgIH0KICAgICAgICAgICRjb21waWxlKGJhY2tkcm9wRG9tRWwpKGJhY2tkcm9wU2NvcGUpOwogICAgICAgICAgJGFuaW1hdGUuZW50ZXIoYmFja2Ryb3BEb21FbCwgYXBwZW5kVG9FbGVtZW50KTsKICAgICAgICAgIGlmICgkdWliUG9zaXRpb24uaXNTY3JvbGxhYmxlKGFwcGVuZFRvRWxlbWVudCkpIHsKICAgICAgICAgICAgc2Nyb2xsYmFyUGFkZGluZyA9ICR1aWJQb3NpdGlvbi5zY3JvbGxiYXJQYWRkaW5nKGFwcGVuZFRvRWxlbWVudCk7CiAgICAgICAgICAgIGlmIChzY3JvbGxiYXJQYWRkaW5nLmhlaWdodE92ZXJmbG93ICYmIHNjcm9sbGJhclBhZGRpbmcuc2Nyb2xsYmFyV2lkdGgpIHsKICAgICAgICAgICAgICBhcHBlbmRUb0VsZW1lbnQuY3NzKHtwYWRkaW5nUmlnaHQ6IHNjcm9sbGJhclBhZGRpbmcucmlnaHQgKyAncHgnfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHZhciBjb250ZW50OwogICAgICAgIGlmIChtb2RhbC5jb21wb25lbnQpIHsKICAgICAgICAgIGNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHNuYWtlX2Nhc2UobW9kYWwuY29tcG9uZW50Lm5hbWUpKTsKICAgICAgICAgIGNvbnRlbnQgPSBhbmd1bGFyLmVsZW1lbnQoY29udGVudCk7CiAgICAgICAgICBjb250ZW50LmF0dHIoewogICAgICAgICAgICByZXNvbHZlOiAnJHJlc29sdmUnLAogICAgICAgICAgICAnbW9kYWwtaW5zdGFuY2UnOiAnJHVpYk1vZGFsSW5zdGFuY2UnLAogICAgICAgICAgICBjbG9zZTogJyRjbG9zZSgkdmFsdWUpJywKICAgICAgICAgICAgZGlzbWlzczogJyRkaXNtaXNzKCR2YWx1ZSknCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29udGVudCA9IG1vZGFsLmNvbnRlbnQ7CiAgICAgICAgfQoKICAgICAgICAvLyBTZXQgdGhlIHRvcCBtb2RhbCBpbmRleCBiYXNlZCBvbiB0aGUgaW5kZXggb2YgdGhlIHByZXZpb3VzIHRvcCBtb2RhbAogICAgICAgIHRvcE1vZGFsSW5kZXggPSBwcmV2aW91c1RvcE9wZW5lZE1vZGFsID8gcGFyc2VJbnQocHJldmlvdXNUb3BPcGVuZWRNb2RhbC52YWx1ZS5tb2RhbERvbUVsLmF0dHIoJ2luZGV4JyksIDEwKSArIDEgOiAwOwogICAgICAgIHZhciBhbmd1bGFyRG9tRWwgPSBhbmd1bGFyLmVsZW1lbnQoJzxkaXYgdWliLW1vZGFsLXdpbmRvdz0ibW9kYWwtd2luZG93Ij48L2Rpdj4nKTsKICAgICAgICBhbmd1bGFyRG9tRWwuYXR0cih7CiAgICAgICAgICAnY2xhc3MnOiAnbW9kYWwnLAogICAgICAgICAgJ3RlbXBsYXRlLXVybCc6IG1vZGFsLndpbmRvd1RlbXBsYXRlVXJsLAogICAgICAgICAgJ3dpbmRvdy10b3AtY2xhc3MnOiBtb2RhbC53aW5kb3dUb3BDbGFzcywKICAgICAgICAgICdyb2xlJzogJ2RpYWxvZycsCiAgICAgICAgICAnYXJpYS1sYWJlbGxlZGJ5JzogbW9kYWwuYXJpYUxhYmVsbGVkQnksCiAgICAgICAgICAnYXJpYS1kZXNjcmliZWRieSc6IG1vZGFsLmFyaWFEZXNjcmliZWRCeSwKICAgICAgICAgICdzaXplJzogbW9kYWwuc2l6ZSwKICAgICAgICAgICdpbmRleCc6IHRvcE1vZGFsSW5kZXgsCiAgICAgICAgICAnYW5pbWF0ZSc6ICdhbmltYXRlJywKICAgICAgICAgICduZy1zdHlsZSc6ICd7XCd6LWluZGV4XCc6IDEwNTAgKyAkJHRvcE1vZGFsSW5kZXgqMTAsIGRpc3BsYXk6IFwnYmxvY2tcJ30nLAogICAgICAgICAgJ3RhYmluZGV4JzogLTEsCiAgICAgICAgICAndWliLW1vZGFsLWFuaW1hdGlvbi1jbGFzcyc6ICdmYWRlJywKICAgICAgICAgICdtb2RhbC1pbi1jbGFzcyc6ICdpbicKICAgICAgICB9KS5hcHBlbmQoY29udGVudCk7CiAgICAgICAgaWYgKG1vZGFsLndpbmRvd0NsYXNzKSB7CiAgICAgICAgICBhbmd1bGFyRG9tRWwuYWRkQ2xhc3MobW9kYWwud2luZG93Q2xhc3MpOwogICAgICAgIH0KCiAgICAgICAgaWYgKG1vZGFsLmFuaW1hdGlvbikgewogICAgICAgICAgYW5ndWxhckRvbUVsLmF0dHIoJ21vZGFsLWFuaW1hdGlvbicsICd0cnVlJyk7CiAgICAgICAgfQoKICAgICAgICBhcHBlbmRUb0VsZW1lbnQuYWRkQ2xhc3MobW9kYWxCb2R5Q2xhc3MpOwogICAgICAgIGlmIChtb2RhbC5zY29wZSkgewogICAgICAgICAgLy8gd2UgbmVlZCB0byBleHBsaWNpdGx5IGFkZCB0aGUgbW9kYWwgaW5kZXggdG8gdGhlIG1vZGFsIHNjb3BlCiAgICAgICAgICAvLyBiZWNhdXNlIGl0IGlzIG5lZWRlZCBieSBuZ1N0eWxlIHRvIGNvbXB1dGUgdGhlIHpJbmRleCBwcm9wZXJ0eS4KICAgICAgICAgIG1vZGFsLnNjb3BlLiQkdG9wTW9kYWxJbmRleCA9IHRvcE1vZGFsSW5kZXg7CiAgICAgICAgfQogICAgICAgICRhbmltYXRlLmVudGVyKCRjb21waWxlKGFuZ3VsYXJEb21FbCkobW9kYWwuc2NvcGUpLCBhcHBlbmRUb0VsZW1lbnQpOwoKICAgICAgICBvcGVuZWRXaW5kb3dzLnRvcCgpLnZhbHVlLm1vZGFsRG9tRWwgPSBhbmd1bGFyRG9tRWw7CiAgICAgICAgb3BlbmVkV2luZG93cy50b3AoKS52YWx1ZS5tb2RhbE9wZW5lciA9IG1vZGFsT3BlbmVyOwogICAgICB9OwoKICAgICAgZnVuY3Rpb24gYnJvYWRjYXN0Q2xvc2luZyhtb2RhbFdpbmRvdywgcmVzdWx0T3JSZWFzb24sIGNsb3NpbmcpIHsKICAgICAgICByZXR1cm4gIW1vZGFsV2luZG93LnZhbHVlLm1vZGFsU2NvcGUuJGJyb2FkY2FzdCgnbW9kYWwuY2xvc2luZycsIHJlc3VsdE9yUmVhc29uLCBjbG9zaW5nKS5kZWZhdWx0UHJldmVudGVkOwogICAgICB9CgogICAgICAkbW9kYWxTdGFjay5jbG9zZSA9IGZ1bmN0aW9uKG1vZGFsSW5zdGFuY2UsIHJlc3VsdCkgewogICAgICAgIHZhciBtb2RhbFdpbmRvdyA9IG9wZW5lZFdpbmRvd3MuZ2V0KG1vZGFsSW5zdGFuY2UpOwogICAgICAgIGlmIChtb2RhbFdpbmRvdyAmJiBicm9hZGNhc3RDbG9zaW5nKG1vZGFsV2luZG93LCByZXN1bHQsIHRydWUpKSB7CiAgICAgICAgICBtb2RhbFdpbmRvdy52YWx1ZS5tb2RhbFNjb3BlLiQkdWliRGVzdHJ1Y3Rpb25TY2hlZHVsZWQgPSB0cnVlOwogICAgICAgICAgbW9kYWxXaW5kb3cudmFsdWUuZGVmZXJyZWQucmVzb2x2ZShyZXN1bHQpOwogICAgICAgICAgcmVtb3ZlTW9kYWxXaW5kb3cobW9kYWxJbnN0YW5jZSwgbW9kYWxXaW5kb3cudmFsdWUubW9kYWxPcGVuZXIpOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIHJldHVybiAhbW9kYWxXaW5kb3c7CiAgICAgIH07CgogICAgICAkbW9kYWxTdGFjay5kaXNtaXNzID0gZnVuY3Rpb24obW9kYWxJbnN0YW5jZSwgcmVhc29uKSB7CiAgICAgICAgdmFyIG1vZGFsV2luZG93ID0gb3BlbmVkV2luZG93cy5nZXQobW9kYWxJbnN0YW5jZSk7CiAgICAgICAgaWYgKG1vZGFsV2luZG93ICYmIGJyb2FkY2FzdENsb3NpbmcobW9kYWxXaW5kb3csIHJlYXNvbiwgZmFsc2UpKSB7CiAgICAgICAgICBtb2RhbFdpbmRvdy52YWx1ZS5tb2RhbFNjb3BlLiQkdWliRGVzdHJ1Y3Rpb25TY2hlZHVsZWQgPSB0cnVlOwogICAgICAgICAgbW9kYWxXaW5kb3cudmFsdWUuZGVmZXJyZWQucmVqZWN0KHJlYXNvbik7CiAgICAgICAgICByZW1vdmVNb2RhbFdpbmRvdyhtb2RhbEluc3RhbmNlLCBtb2RhbFdpbmRvdy52YWx1ZS5tb2RhbE9wZW5lcik7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuICFtb2RhbFdpbmRvdzsKICAgICAgfTsKCiAgICAgICRtb2RhbFN0YWNrLmRpc21pc3NBbGwgPSBmdW5jdGlvbihyZWFzb24pIHsKICAgICAgICB2YXIgdG9wTW9kYWwgPSB0aGlzLmdldFRvcCgpOwogICAgICAgIHdoaWxlICh0b3BNb2RhbCAmJiB0aGlzLmRpc21pc3ModG9wTW9kYWwua2V5LCByZWFzb24pKSB7CiAgICAgICAgICB0b3BNb2RhbCA9IHRoaXMuZ2V0VG9wKCk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgJG1vZGFsU3RhY2suZ2V0VG9wID0gZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIG9wZW5lZFdpbmRvd3MudG9wKCk7CiAgICAgIH07CgogICAgICAkbW9kYWxTdGFjay5tb2RhbFJlbmRlcmVkID0gZnVuY3Rpb24obW9kYWxJbnN0YW5jZSkgewogICAgICAgIHZhciBtb2RhbFdpbmRvdyA9IG9wZW5lZFdpbmRvd3MuZ2V0KG1vZGFsSW5zdGFuY2UpOwogICAgICAgIGlmIChtb2RhbFdpbmRvdykgewogICAgICAgICAgbW9kYWxXaW5kb3cudmFsdWUucmVuZGVyRGVmZXJyZWQucmVzb2x2ZSgpOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgICRtb2RhbFN0YWNrLmZvY3VzRmlyc3RGb2N1c2FibGVFbGVtZW50ID0gZnVuY3Rpb24obGlzdCkgewogICAgICAgIGlmIChsaXN0Lmxlbmd0aCA+IDApIHsKICAgICAgICAgIGxpc3RbMF0uZm9jdXMoKTsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH07CgogICAgICAkbW9kYWxTdGFjay5mb2N1c0xhc3RGb2N1c2FibGVFbGVtZW50ID0gZnVuY3Rpb24obGlzdCkgewogICAgICAgIGlmIChsaXN0Lmxlbmd0aCA+IDApIHsKICAgICAgICAgIGxpc3RbbGlzdC5sZW5ndGggLSAxXS5mb2N1cygpOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfTsKCiAgICAgICRtb2RhbFN0YWNrLmlzTW9kYWxGb2N1c2VkID0gZnVuY3Rpb24oZXZ0LCBtb2RhbFdpbmRvdykgewogICAgICAgIGlmIChldnQgJiYgbW9kYWxXaW5kb3cpIHsKICAgICAgICAgIHZhciBtb2RhbERvbUVsID0gbW9kYWxXaW5kb3cudmFsdWUubW9kYWxEb21FbDsKICAgICAgICAgIGlmIChtb2RhbERvbUVsICYmIG1vZGFsRG9tRWwubGVuZ3RoKSB7CiAgICAgICAgICAgIHJldHVybiAoZXZ0LnRhcmdldCB8fCBldnQuc3JjRWxlbWVudCkgPT09IG1vZGFsRG9tRWxbMF07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfTsKCiAgICAgICRtb2RhbFN0YWNrLmlzRm9jdXNJbkZpcnN0SXRlbSA9IGZ1bmN0aW9uKGV2dCwgbGlzdCkgewogICAgICAgIGlmIChsaXN0Lmxlbmd0aCA+IDApIHsKICAgICAgICAgIHJldHVybiAoZXZ0LnRhcmdldCB8fCBldnQuc3JjRWxlbWVudCkgPT09IGxpc3RbMF07CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfTsKCiAgICAgICRtb2RhbFN0YWNrLmlzRm9jdXNJbkxhc3RJdGVtID0gZnVuY3Rpb24oZXZ0LCBsaXN0KSB7CiAgICAgICAgaWYgKGxpc3QubGVuZ3RoID4gMCkgewogICAgICAgICAgcmV0dXJuIChldnQudGFyZ2V0IHx8IGV2dC5zcmNFbGVtZW50KSA9PT0gbGlzdFtsaXN0Lmxlbmd0aCAtIDFdOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH07CgogICAgICAkbW9kYWxTdGFjay5sb2FkRm9jdXNFbGVtZW50TGlzdCA9IGZ1bmN0aW9uKG1vZGFsV2luZG93KSB7CiAgICAgICAgaWYgKG1vZGFsV2luZG93KSB7CiAgICAgICAgICB2YXIgbW9kYWxEb21FMSA9IG1vZGFsV2luZG93LnZhbHVlLm1vZGFsRG9tRWw7CiAgICAgICAgICBpZiAobW9kYWxEb21FMSAmJiBtb2RhbERvbUUxLmxlbmd0aCkgewogICAgICAgICAgICB2YXIgZWxlbWVudHMgPSBtb2RhbERvbUUxWzBdLnF1ZXJ5U2VsZWN0b3JBbGwodGFiYmFibGVTZWxlY3Rvcik7CiAgICAgICAgICAgIHJldHVybiBlbGVtZW50cyA/CiAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKGVsZW1lbnRzLCBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gaXNWaXNpYmxlKGVsZW1lbnQpOwogICAgICAgICAgICAgIH0pIDogZWxlbWVudHM7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9OwoKICAgICAgcmV0dXJuICRtb2RhbFN0YWNrOwogICAgfV0pCgogIC5wcm92aWRlcignJHVpYk1vZGFsJywgZnVuY3Rpb24oKSB7CiAgICB2YXIgJG1vZGFsUHJvdmlkZXIgPSB7CiAgICAgIG9wdGlvbnM6IHsKICAgICAgICBhbmltYXRpb246IHRydWUsCiAgICAgICAgYmFja2Ryb3A6IHRydWUsIC8vY2FuIGFsc28gYmUgZmFsc2Ugb3IgJ3N0YXRpYycKICAgICAgICBrZXlib2FyZDogdHJ1ZQogICAgICB9LAogICAgICAkZ2V0OiBbJyRyb290U2NvcGUnLCAnJHEnLCAnJGRvY3VtZW50JywgJyR0ZW1wbGF0ZVJlcXVlc3QnLCAnJGNvbnRyb2xsZXInLCAnJHVpYlJlc29sdmUnLCAnJHVpYk1vZGFsU3RhY2snLAogICAgICAgIGZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkcSwgJGRvY3VtZW50LCAkdGVtcGxhdGVSZXF1ZXN0LCAkY29udHJvbGxlciwgJHVpYlJlc29sdmUsICRtb2RhbFN0YWNrKSB7CiAgICAgICAgICB2YXIgJG1vZGFsID0ge307CgogICAgICAgICAgZnVuY3Rpb24gZ2V0VGVtcGxhdGVQcm9taXNlKG9wdGlvbnMpIHsKICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMudGVtcGxhdGUgPyAkcS53aGVuKG9wdGlvbnMudGVtcGxhdGUpIDoKICAgICAgICAgICAgICAkdGVtcGxhdGVSZXF1ZXN0KGFuZ3VsYXIuaXNGdW5jdGlvbihvcHRpb25zLnRlbXBsYXRlVXJsKSA/CiAgICAgICAgICAgICAgICBvcHRpb25zLnRlbXBsYXRlVXJsKCkgOiBvcHRpb25zLnRlbXBsYXRlVXJsKTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgcHJvbWlzZUNoYWluID0gbnVsbDsKICAgICAgICAgICRtb2RhbC5nZXRQcm9taXNlQ2hhaW4gPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIHByb21pc2VDaGFpbjsKICAgICAgICAgIH07CgogICAgICAgICAgJG1vZGFsLm9wZW4gPSBmdW5jdGlvbihtb2RhbE9wdGlvbnMpIHsKICAgICAgICAgICAgdmFyIG1vZGFsUmVzdWx0RGVmZXJyZWQgPSAkcS5kZWZlcigpOwogICAgICAgICAgICB2YXIgbW9kYWxPcGVuZWREZWZlcnJlZCA9ICRxLmRlZmVyKCk7CiAgICAgICAgICAgIHZhciBtb2RhbENsb3NlZERlZmVycmVkID0gJHEuZGVmZXIoKTsKICAgICAgICAgICAgdmFyIG1vZGFsUmVuZGVyRGVmZXJyZWQgPSAkcS5kZWZlcigpOwoKICAgICAgICAgICAgLy9wcmVwYXJlIGFuIGluc3RhbmNlIG9mIGEgbW9kYWwgdG8gYmUgaW5qZWN0ZWQgaW50byBjb250cm9sbGVycyBhbmQgcmV0dXJuZWQgdG8gYSBjYWxsZXIKICAgICAgICAgICAgdmFyIG1vZGFsSW5zdGFuY2UgPSB7CiAgICAgICAgICAgICAgcmVzdWx0OiBtb2RhbFJlc3VsdERlZmVycmVkLnByb21pc2UsCiAgICAgICAgICAgICAgb3BlbmVkOiBtb2RhbE9wZW5lZERlZmVycmVkLnByb21pc2UsCiAgICAgICAgICAgICAgY2xvc2VkOiBtb2RhbENsb3NlZERlZmVycmVkLnByb21pc2UsCiAgICAgICAgICAgICAgcmVuZGVyZWQ6IG1vZGFsUmVuZGVyRGVmZXJyZWQucHJvbWlzZSwKICAgICAgICAgICAgICBjbG9zZTogZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgICAgICAgICAgcmV0dXJuICRtb2RhbFN0YWNrLmNsb3NlKG1vZGFsSW5zdGFuY2UsIHJlc3VsdCk7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBkaXNtaXNzOiBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJG1vZGFsU3RhY2suZGlzbWlzcyhtb2RhbEluc3RhbmNlLCByZWFzb24pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIC8vbWVyZ2UgYW5kIGNsZWFuIHVwIG9wdGlvbnMKICAgICAgICAgICAgbW9kYWxPcHRpb25zID0gYW5ndWxhci5leHRlbmQoe30sICRtb2RhbFByb3ZpZGVyLm9wdGlvbnMsIG1vZGFsT3B0aW9ucyk7CiAgICAgICAgICAgIG1vZGFsT3B0aW9ucy5yZXNvbHZlID0gbW9kYWxPcHRpb25zLnJlc29sdmUgfHwge307CiAgICAgICAgICAgIG1vZGFsT3B0aW9ucy5hcHBlbmRUbyA9IG1vZGFsT3B0aW9ucy5hcHBlbmRUbyB8fCAkZG9jdW1lbnQuZmluZCgnYm9keScpLmVxKDApOwoKICAgICAgICAgICAgLy92ZXJpZnkgb3B0aW9ucwogICAgICAgICAgICBpZiAoIW1vZGFsT3B0aW9ucy5jb21wb25lbnQgJiYgIW1vZGFsT3B0aW9ucy50ZW1wbGF0ZSAmJiAhbW9kYWxPcHRpb25zLnRlbXBsYXRlVXJsKSB7CiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdPbmUgb2YgY29tcG9uZW50IG9yIHRlbXBsYXRlIG9yIHRlbXBsYXRlVXJsIG9wdGlvbnMgaXMgcmVxdWlyZWQuJyk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZUFuZFJlc29sdmVQcm9taXNlOwogICAgICAgICAgICBpZiAobW9kYWxPcHRpb25zLmNvbXBvbmVudCkgewogICAgICAgICAgICAgIHRlbXBsYXRlQW5kUmVzb2x2ZVByb21pc2UgPSAkcS53aGVuKCR1aWJSZXNvbHZlLnJlc29sdmUobW9kYWxPcHRpb25zLnJlc29sdmUsIHt9LCBudWxsLCBudWxsKSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGVtcGxhdGVBbmRSZXNvbHZlUHJvbWlzZSA9CiAgICAgICAgICAgICAgICAkcS5hbGwoW2dldFRlbXBsYXRlUHJvbWlzZShtb2RhbE9wdGlvbnMpLCAkdWliUmVzb2x2ZS5yZXNvbHZlKG1vZGFsT3B0aW9ucy5yZXNvbHZlLCB7fSwgbnVsbCwgbnVsbCldKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gcmVzb2x2ZVdpdGhUZW1wbGF0ZSgpIHsKICAgICAgICAgICAgICByZXR1cm4gdGVtcGxhdGVBbmRSZXNvbHZlUHJvbWlzZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gV2FpdCBmb3IgdGhlIHJlc29sdXRpb24gb2YgdGhlIGV4aXN0aW5nIHByb21pc2UgY2hhaW4uCiAgICAgICAgICAgIC8vIFRoZW4gc3dpdGNoIHRvIG91ciBvd24gY29tYmluZWQgcHJvbWlzZSBkZXBlbmRlbmN5IChyZWdhcmRsZXNzIG9mIGhvdyB0aGUgcHJldmlvdXMgbW9kYWwgZmFyZWQpLgogICAgICAgICAgICAvLyBUaGVuIGFkZCB0byAkbW9kYWxTdGFjayBhbmQgcmVzb2x2ZSBvcGVuZWQuCiAgICAgICAgICAgIC8vIEZpbmFsbHkgY2xlYW4gdXAgdGhlIGNoYWluIHZhcmlhYmxlIGlmIG5vIHN1YnNlcXVlbnQgbW9kYWwgaGFzIG92ZXJ3cml0dGVuIGl0LgogICAgICAgICAgICB2YXIgc2FtZVByb21pc2U7CiAgICAgICAgICAgIHNhbWVQcm9taXNlID0gcHJvbWlzZUNoYWluID0gJHEuYWxsKFtwcm9taXNlQ2hhaW5dKQogICAgICAgICAgICAgIC50aGVuKHJlc29sdmVXaXRoVGVtcGxhdGUsIHJlc29sdmVXaXRoVGVtcGxhdGUpCiAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gcmVzb2x2ZVN1Y2Nlc3ModHBsQW5kVmFycykgewogICAgICAgICAgICAgICAgdmFyIHByb3ZpZGVkU2NvcGUgPSBtb2RhbE9wdGlvbnMuc2NvcGUgfHwgJHJvb3RTY29wZTsKCiAgICAgICAgICAgICAgICB2YXIgbW9kYWxTY29wZSA9IHByb3ZpZGVkU2NvcGUuJG5ldygpOwogICAgICAgICAgICAgICAgbW9kYWxTY29wZS4kY2xvc2UgPSBtb2RhbEluc3RhbmNlLmNsb3NlOwogICAgICAgICAgICAgICAgbW9kYWxTY29wZS4kZGlzbWlzcyA9IG1vZGFsSW5zdGFuY2UuZGlzbWlzczsKCiAgICAgICAgICAgICAgICBtb2RhbFNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgaWYgKCFtb2RhbFNjb3BlLiQkdWliRGVzdHJ1Y3Rpb25TY2hlZHVsZWQpIHsKICAgICAgICAgICAgICAgICAgICBtb2RhbFNjb3BlLiRkaXNtaXNzKCckdWliVW5zY2hlZHVsZWREZXN0cnVjdGlvbicpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICB2YXIgbW9kYWwgPSB7CiAgICAgICAgICAgICAgICAgIHNjb3BlOiBtb2RhbFNjb3BlLAogICAgICAgICAgICAgICAgICBkZWZlcnJlZDogbW9kYWxSZXN1bHREZWZlcnJlZCwKICAgICAgICAgICAgICAgICAgcmVuZGVyRGVmZXJyZWQ6IG1vZGFsUmVuZGVyRGVmZXJyZWQsCiAgICAgICAgICAgICAgICAgIGNsb3NlZERlZmVycmVkOiBtb2RhbENsb3NlZERlZmVycmVkLAogICAgICAgICAgICAgICAgICBhbmltYXRpb246IG1vZGFsT3B0aW9ucy5hbmltYXRpb24sCiAgICAgICAgICAgICAgICAgIGJhY2tkcm9wOiBtb2RhbE9wdGlvbnMuYmFja2Ryb3AsCiAgICAgICAgICAgICAgICAgIGtleWJvYXJkOiBtb2RhbE9wdGlvbnMua2V5Ym9hcmQsCiAgICAgICAgICAgICAgICAgIGJhY2tkcm9wQ2xhc3M6IG1vZGFsT3B0aW9ucy5iYWNrZHJvcENsYXNzLAogICAgICAgICAgICAgICAgICB3aW5kb3dUb3BDbGFzczogbW9kYWxPcHRpb25zLndpbmRvd1RvcENsYXNzLAogICAgICAgICAgICAgICAgICB3aW5kb3dDbGFzczogbW9kYWxPcHRpb25zLndpbmRvd0NsYXNzLAogICAgICAgICAgICAgICAgICB3aW5kb3dUZW1wbGF0ZVVybDogbW9kYWxPcHRpb25zLndpbmRvd1RlbXBsYXRlVXJsLAogICAgICAgICAgICAgICAgICBhcmlhTGFiZWxsZWRCeTogbW9kYWxPcHRpb25zLmFyaWFMYWJlbGxlZEJ5LAogICAgICAgICAgICAgICAgICBhcmlhRGVzY3JpYmVkQnk6IG1vZGFsT3B0aW9ucy5hcmlhRGVzY3JpYmVkQnksCiAgICAgICAgICAgICAgICAgIHNpemU6IG1vZGFsT3B0aW9ucy5zaXplLAogICAgICAgICAgICAgICAgICBvcGVuZWRDbGFzczogbW9kYWxPcHRpb25zLm9wZW5lZENsYXNzLAogICAgICAgICAgICAgICAgICBhcHBlbmRUbzogbW9kYWxPcHRpb25zLmFwcGVuZFRvCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHZhciBjb21wb25lbnQgPSB7fTsKICAgICAgICAgICAgICAgIHZhciBjdHJsSW5zdGFuY2UsIGN0cmxJbnN0YW50aWF0ZSwgY3RybExvY2FscyA9IHt9OwoKICAgICAgICAgICAgICAgIGlmIChtb2RhbE9wdGlvbnMuY29tcG9uZW50KSB7CiAgICAgICAgICAgICAgICAgIGNvbnN0cnVjdExvY2Fscyhjb21wb25lbnQsIGZhbHNlLCB0cnVlLCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgIGNvbXBvbmVudC5uYW1lID0gbW9kYWxPcHRpb25zLmNvbXBvbmVudDsKICAgICAgICAgICAgICAgICAgbW9kYWwuY29tcG9uZW50ID0gY29tcG9uZW50OwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtb2RhbE9wdGlvbnMuY29udHJvbGxlcikgewogICAgICAgICAgICAgICAgICBjb25zdHJ1Y3RMb2NhbHMoY3RybExvY2FscywgdHJ1ZSwgZmFsc2UsIHRydWUpOwoKICAgICAgICAgICAgICAgICAgLy8gdGhlIHRoaXJkIHBhcmFtIHdpbGwgbWFrZSB0aGUgY29udHJvbGxlciBpbnN0YW50aWF0ZSBsYXRlcixwcml2YXRlIGFwaQogICAgICAgICAgICAgICAgICAvLyBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvYmxvYi9tYXN0ZXIvc3JjL25nL2NvbnRyb2xsZXIuanMjTDEyNgogICAgICAgICAgICAgICAgICBjdHJsSW5zdGFudGlhdGUgPSAkY29udHJvbGxlcihtb2RhbE9wdGlvbnMuY29udHJvbGxlciwgY3RybExvY2FscywgdHJ1ZSwgbW9kYWxPcHRpb25zLmNvbnRyb2xsZXJBcyk7CiAgICAgICAgICAgICAgICAgIGlmIChtb2RhbE9wdGlvbnMuY29udHJvbGxlckFzICYmIG1vZGFsT3B0aW9ucy5iaW5kVG9Db250cm9sbGVyKSB7CiAgICAgICAgICAgICAgICAgICAgY3RybEluc3RhbmNlID0gY3RybEluc3RhbnRpYXRlLmluc3RhbmNlOwogICAgICAgICAgICAgICAgICAgIGN0cmxJbnN0YW5jZS4kY2xvc2UgPSBtb2RhbFNjb3BlLiRjbG9zZTsKICAgICAgICAgICAgICAgICAgICBjdHJsSW5zdGFuY2UuJGRpc21pc3MgPSBtb2RhbFNjb3BlLiRkaXNtaXNzOwogICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKGN0cmxJbnN0YW5jZSwgewogICAgICAgICAgICAgICAgICAgICAgJHJlc29sdmU6IGN0cmxMb2NhbHMuJHNjb3BlLiRyZXNvbHZlCiAgICAgICAgICAgICAgICAgICAgfSwgcHJvdmlkZWRTY29wZSk7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGN0cmxJbnN0YW5jZSA9IGN0cmxJbnN0YW50aWF0ZSgpOwoKICAgICAgICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNGdW5jdGlvbihjdHJsSW5zdGFuY2UuJG9uSW5pdCkpIHsKICAgICAgICAgICAgICAgICAgICBjdHJsSW5zdGFuY2UuJG9uSW5pdCgpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCFtb2RhbE9wdGlvbnMuY29tcG9uZW50KSB7CiAgICAgICAgICAgICAgICAgIG1vZGFsLmNvbnRlbnQgPSB0cGxBbmRWYXJzWzBdOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICRtb2RhbFN0YWNrLm9wZW4obW9kYWxJbnN0YW5jZSwgbW9kYWwpOwogICAgICAgICAgICAgICAgbW9kYWxPcGVuZWREZWZlcnJlZC5yZXNvbHZlKHRydWUpOwoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNvbnN0cnVjdExvY2FscyhvYmosIHRlbXBsYXRlLCBpbnN0YW5jZU9uU2NvcGUsIGluamVjdGFibGUpIHsKICAgICAgICAgICAgICAgICAgb2JqLiRzY29wZSA9IG1vZGFsU2NvcGU7CiAgICAgICAgICAgICAgICAgIG9iai4kc2NvcGUuJHJlc29sdmUgPSB7fTsKICAgICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlT25TY29wZSkgewogICAgICAgICAgICAgICAgICAgIG9iai4kc2NvcGUuJHVpYk1vZGFsSW5zdGFuY2UgPSBtb2RhbEluc3RhbmNlOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIG9iai4kdWliTW9kYWxJbnN0YW5jZSA9IG1vZGFsSW5zdGFuY2U7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIHZhciByZXNvbHZlcyA9IHRlbXBsYXRlID8gdHBsQW5kVmFyc1sxXSA6IHRwbEFuZFZhcnM7CiAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChyZXNvbHZlcywgZnVuY3Rpb24odmFsdWUsIGtleSkgewogICAgICAgICAgICAgICAgICAgIGlmIChpbmplY3RhYmxlKSB7CiAgICAgICAgICAgICAgICAgICAgICBvYmpba2V5XSA9IHZhbHVlOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgb2JqLiRzY29wZS4kcmVzb2x2ZVtrZXldID0gdmFsdWU7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBmdW5jdGlvbiByZXNvbHZlRXJyb3IocmVhc29uKSB7CiAgICAgICAgICAgICAgbW9kYWxPcGVuZWREZWZlcnJlZC5yZWplY3QocmVhc29uKTsKICAgICAgICAgICAgICBtb2RhbFJlc3VsdERlZmVycmVkLnJlamVjdChyZWFzb24pOwogICAgICAgICAgICB9KVsnZmluYWxseSddKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgIGlmIChwcm9taXNlQ2hhaW4gPT09IHNhbWVQcm9taXNlKSB7CiAgICAgICAgICAgICAgICBwcm9taXNlQ2hhaW4gPSBudWxsOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICByZXR1cm4gbW9kYWxJbnN0YW5jZTsKICAgICAgICAgIH07CgogICAgICAgICAgcmV0dXJuICRtb2RhbDsKICAgICAgICB9CiAgICAgIF0KICAgIH07CgogICAgcmV0dXJuICRtb2RhbFByb3ZpZGVyOwogIH0pOwoKYW5ndWxhci5tb2R1bGUoJ3VpLmJvb3RzdHJhcC5wYWdpbmcnLCBbXSkKLyoqCiAqIEhlbHBlciBpbnRlcm5hbCBzZXJ2aWNlIGZvciBnZW5lcmF0aW5nIGNvbW1vbiBjb250cm9sbGVyIGNvZGUgYmV0d2VlbiB0aGUKICogcGFnZXIgYW5kIHBhZ2luYXRpb24gY29tcG9uZW50cwogKi8KLmZhY3RvcnkoJ3VpYlBhZ2luZycsIFsnJHBhcnNlJywgZnVuY3Rpb24oJHBhcnNlKSB7CiAgcmV0dXJuIHsKICAgIGNyZWF0ZTogZnVuY3Rpb24oY3RybCwgJHNjb3BlLCAkYXR0cnMpIHsKICAgICAgY3RybC5zZXROdW1QYWdlcyA9ICRhdHRycy5udW1QYWdlcyA/ICRwYXJzZSgkYXR0cnMubnVtUGFnZXMpLmFzc2lnbiA6IGFuZ3VsYXIubm9vcDsKICAgICAgY3RybC5uZ01vZGVsQ3RybCA9IHsgJHNldFZpZXdWYWx1ZTogYW5ndWxhci5ub29wIH07IC8vIG51bGxNb2RlbEN0cmwKICAgICAgY3RybC5fd2F0Y2hlcnMgPSBbXTsKCiAgICAgIGN0cmwuaW5pdCA9IGZ1bmN0aW9uKG5nTW9kZWxDdHJsLCBjb25maWcpIHsKICAgICAgICBjdHJsLm5nTW9kZWxDdHJsID0gbmdNb2RlbEN0cmw7CiAgICAgICAgY3RybC5jb25maWcgPSBjb25maWc7CgogICAgICAgIG5nTW9kZWxDdHJsLiRyZW5kZXIgPSBmdW5jdGlvbigpIHsKICAgICAgICAgIGN0cmwucmVuZGVyKCk7CiAgICAgICAgfTsKCiAgICAgICAgaWYgKCRhdHRycy5pdGVtc1BlclBhZ2UpIHsKICAgICAgICAgIGN0cmwuX3dhdGNoZXJzLnB1c2goJHNjb3BlLiRwYXJlbnQuJHdhdGNoKCRhdHRycy5pdGVtc1BlclBhZ2UsIGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgICAgICAgIGN0cmwuaXRlbXNQZXJQYWdlID0gcGFyc2VJbnQodmFsdWUsIDEwKTsKICAgICAgICAgICAgJHNjb3BlLnRvdGFsUGFnZXMgPSBjdHJsLmNhbGN1bGF0ZVRvdGFsUGFnZXMoKTsKICAgICAgICAgICAgY3RybC51cGRhdGVQYWdlKCk7CiAgICAgICAgICB9KSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGN0cmwuaXRlbXNQZXJQYWdlID0gY29uZmlnLml0ZW1zUGVyUGFnZTsKICAgICAgICB9CgogICAgICAgICRzY29wZS4kd2F0Y2goJ3RvdGFsSXRlbXMnLCBmdW5jdGlvbihuZXdUb3RhbCwgb2xkVG90YWwpIHsKICAgICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChuZXdUb3RhbCkgfHwgbmV3VG90YWwgIT09IG9sZFRvdGFsKSB7CiAgICAgICAgICAgICRzY29wZS50b3RhbFBhZ2VzID0gY3RybC5jYWxjdWxhdGVUb3RhbFBhZ2VzKCk7CiAgICAgICAgICAgIGN0cmwudXBkYXRlUGFnZSgpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9OwoKICAgICAgY3RybC5jYWxjdWxhdGVUb3RhbFBhZ2VzID0gZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIHRvdGFsUGFnZXMgPSBjdHJsLml0ZW1zUGVyUGFnZSA8IDEgPyAxIDogTWF0aC5jZWlsKCRzY29wZS50b3RhbEl0ZW1zIC8gY3RybC5pdGVtc1BlclBhZ2UpOwogICAgICAgIHJldHVybiBNYXRoLm1heCh0b3RhbFBhZ2VzIHx8IDAsIDEpOwogICAgICB9OwoKICAgICAgY3RybC5yZW5kZXIgPSBmdW5jdGlvbigpIHsKICAgICAgICAkc2NvcGUucGFnZSA9IHBhcnNlSW50KGN0cmwubmdNb2RlbEN0cmwuJHZpZXdWYWx1ZSwgMTApIHx8IDE7CiAgICAgIH07CgogICAgICAkc2NvcGUuc2VsZWN0UGFnZSA9IGZ1bmN0aW9uKHBhZ2UsIGV2dCkgewogICAgICAgIGlmIChldnQpIHsKICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIH0KCiAgICAgICAgdmFyIGNsaWNrQWxsb3dlZCA9ICEkc2NvcGUubmdEaXNhYmxlZCB8fCAhZXZ0OwogICAgICAgIGlmIChjbGlja0FsbG93ZWQgJiYgJHNjb3BlLnBhZ2UgIT09IHBhZ2UgJiYgcGFnZSA+IDAgJiYgcGFnZSA8PSAkc2NvcGUudG90YWxQYWdlcykgewogICAgICAgICAgaWYgKGV2dCAmJiBldnQudGFyZ2V0KSB7CiAgICAgICAgICAgIGV2dC50YXJnZXQuYmx1cigpOwogICAgICAgICAgfQogICAgICAgICAgY3RybC5uZ01vZGVsQ3RybC4kc2V0Vmlld1ZhbHVlKHBhZ2UpOwogICAgICAgICAgY3RybC5uZ01vZGVsQ3RybC4kcmVuZGVyKCk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgJHNjb3BlLmdldFRleHQgPSBmdW5jdGlvbihrZXkpIHsKICAgICAgICByZXR1cm4gJHNjb3BlW2tleSArICdUZXh0J10gfHwgY3RybC5jb25maWdba2V5ICsgJ1RleHQnXTsKICAgICAgfTsKCiAgICAgICRzY29wZS5ub1ByZXZpb3VzID0gZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuICRzY29wZS5wYWdlID09PSAxOwogICAgICB9OwoKICAgICAgJHNjb3BlLm5vTmV4dCA9IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiAkc2NvcGUucGFnZSA9PT0gJHNjb3BlLnRvdGFsUGFnZXM7CiAgICAgIH07CgogICAgICBjdHJsLnVwZGF0ZVBhZ2UgPSBmdW5jdGlvbigpIHsKICAgICAgICBjdHJsLnNldE51bVBhZ2VzKCRzY29wZS4kcGFyZW50LCAkc2NvcGUudG90YWxQYWdlcyk7IC8vIFJlYWRvbmx5IHZhcmlhYmxlCgogICAgICAgIGlmICgkc2NvcGUucGFnZSA+ICRzY29wZS50b3RhbFBhZ2VzKSB7CiAgICAgICAgICAkc2NvcGUuc2VsZWN0UGFnZSgkc2NvcGUudG90YWxQYWdlcyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGN0cmwubmdNb2RlbEN0cmwuJHJlbmRlcigpOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgICRzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7CiAgICAgICAgd2hpbGUgKGN0cmwuX3dhdGNoZXJzLmxlbmd0aCkgewogICAgICAgICAgY3RybC5fd2F0Y2hlcnMuc2hpZnQoKSgpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfTsKfV0pOwoKYW5ndWxhci5tb2R1bGUoJ3VpLmJvb3RzdHJhcC5wYWdlcicsIFsndWkuYm9vdHN0cmFwLnBhZ2luZycsICd1aS5ib290c3RyYXAudGFiaW5kZXgnXSkKCi5jb250cm9sbGVyKCdVaWJQYWdlckNvbnRyb2xsZXInLCBbJyRzY29wZScsICckYXR0cnMnLCAndWliUGFnaW5nJywgJ3VpYlBhZ2VyQ29uZmlnJywgZnVuY3Rpb24oJHNjb3BlLCAkYXR0cnMsIHVpYlBhZ2luZywgdWliUGFnZXJDb25maWcpIHsKICAkc2NvcGUuYWxpZ24gPSBhbmd1bGFyLmlzRGVmaW5lZCgkYXR0cnMuYWxpZ24pID8gJHNjb3BlLiRwYXJlbnQuJGV2YWwoJGF0dHJzLmFsaWduKSA6IHVpYlBhZ2VyQ29uZmlnLmFsaWduOwoKICB1aWJQYWdpbmcuY3JlYXRlKHRoaXMsICRzY29wZSwgJGF0dHJzKTsKfV0pCgouY29uc3RhbnQoJ3VpYlBhZ2VyQ29uZmlnJywgewogIGl0ZW1zUGVyUGFnZTogMTAsCiAgcHJldmlvdXNUZXh0OiAnwqsgUHJldmlvdXMnLAogIG5leHRUZXh0OiAnTmV4dCDCuycsCiAgYWxpZ246IHRydWUKfSkKCi5kaXJlY3RpdmUoJ3VpYlBhZ2VyJywgWyd1aWJQYWdlckNvbmZpZycsIGZ1bmN0aW9uKHVpYlBhZ2VyQ29uZmlnKSB7CiAgcmV0dXJuIHsKICAgIHNjb3BlOiB7CiAgICAgIHRvdGFsSXRlbXM6ICc9JywKICAgICAgcHJldmlvdXNUZXh0OiAnQCcsCiAgICAgIG5leHRUZXh0OiAnQCcsCiAgICAgIG5nRGlzYWJsZWQ6ICc9JwogICAgfSwKICAgIHJlcXVpcmU6IFsndWliUGFnZXInLCAnP25nTW9kZWwnXSwKICAgIHJlc3RyaWN0OiAnQScsCiAgICBjb250cm9sbGVyOiAnVWliUGFnZXJDb250cm9sbGVyJywKICAgIGNvbnRyb2xsZXJBczogJ3BhZ2VyJywKICAgIHRlbXBsYXRlVXJsOiBmdW5jdGlvbihlbGVtZW50LCBhdHRycykgewogICAgICByZXR1cm4gYXR0cnMudGVtcGxhdGVVcmwgfHwgJ3VpYi90ZW1wbGF0ZS9wYWdlci9wYWdlci5odG1sJzsKICAgIH0sCiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIGN0cmxzKSB7CiAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoJ3BhZ2VyJyk7CiAgICAgIHZhciBwYWdpbmF0aW9uQ3RybCA9IGN0cmxzWzBdLCBuZ01vZGVsQ3RybCA9IGN0cmxzWzFdOwoKICAgICAgaWYgKCFuZ01vZGVsQ3RybCkgewogICAgICAgIHJldHVybjsgLy8gZG8gbm90aGluZyBpZiBubyBuZy1tb2RlbAogICAgICB9CgogICAgICBwYWdpbmF0aW9uQ3RybC5pbml0KG5nTW9kZWxDdHJsLCB1aWJQYWdlckNvbmZpZyk7CiAgICB9CiAgfTsKfV0pOwoKYW5ndWxhci5tb2R1bGUoJ3VpLmJvb3RzdHJhcC5wYWdpbmF0aW9uJywgWyd1aS5ib290c3RyYXAucGFnaW5nJywgJ3VpLmJvb3RzdHJhcC50YWJpbmRleCddKQouY29udHJvbGxlcignVWliUGFnaW5hdGlvbkNvbnRyb2xsZXInLCBbJyRzY29wZScsICckYXR0cnMnLCAnJHBhcnNlJywgJ3VpYlBhZ2luZycsICd1aWJQYWdpbmF0aW9uQ29uZmlnJywgZnVuY3Rpb24oJHNjb3BlLCAkYXR0cnMsICRwYXJzZSwgdWliUGFnaW5nLCB1aWJQYWdpbmF0aW9uQ29uZmlnKSB7CiAgdmFyIGN0cmwgPSB0aGlzOwogIC8vIFNldHVwIGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVycwogIHZhciBtYXhTaXplID0gYW5ndWxhci5pc0RlZmluZWQoJGF0dHJzLm1heFNpemUpID8gJHNjb3BlLiRwYXJlbnQuJGV2YWwoJGF0dHJzLm1heFNpemUpIDogdWliUGFnaW5hdGlvbkNvbmZpZy5tYXhTaXplLAogICAgcm90YXRlID0gYW5ndWxhci5pc0RlZmluZWQoJGF0dHJzLnJvdGF0ZSkgPyAkc2NvcGUuJHBhcmVudC4kZXZhbCgkYXR0cnMucm90YXRlKSA6IHVpYlBhZ2luYXRpb25Db25maWcucm90YXRlLAogICAgZm9yY2VFbGxpcHNlcyA9IGFuZ3VsYXIuaXNEZWZpbmVkKCRhdHRycy5mb3JjZUVsbGlwc2VzKSA/ICRzY29wZS4kcGFyZW50LiRldmFsKCRhdHRycy5mb3JjZUVsbGlwc2VzKSA6IHVpYlBhZ2luYXRpb25Db25maWcuZm9yY2VFbGxpcHNlcywKICAgIGJvdW5kYXJ5TGlua051bWJlcnMgPSBhbmd1bGFyLmlzRGVmaW5lZCgkYXR0cnMuYm91bmRhcnlMaW5rTnVtYmVycykgPyAkc2NvcGUuJHBhcmVudC4kZXZhbCgkYXR0cnMuYm91bmRhcnlMaW5rTnVtYmVycykgOiB1aWJQYWdpbmF0aW9uQ29uZmlnLmJvdW5kYXJ5TGlua051bWJlcnMsCiAgICBwYWdlTGFiZWwgPSBhbmd1bGFyLmlzRGVmaW5lZCgkYXR0cnMucGFnZUxhYmVsKSA/IGZ1bmN0aW9uKGlkeCkgeyByZXR1cm4gJHNjb3BlLiRwYXJlbnQuJGV2YWwoJGF0dHJzLnBhZ2VMYWJlbCwgeyRwYWdlOiBpZHh9KTsgfSA6IGFuZ3VsYXIuaWRlbnRpdHk7CiAgJHNjb3BlLmJvdW5kYXJ5TGlua3MgPSBhbmd1bGFyLmlzRGVmaW5lZCgkYXR0cnMuYm91bmRhcnlMaW5rcykgPyAkc2NvcGUuJHBhcmVudC4kZXZhbCgkYXR0cnMuYm91bmRhcnlMaW5rcykgOiB1aWJQYWdpbmF0aW9uQ29uZmlnLmJvdW5kYXJ5TGlua3M7CiAgJHNjb3BlLmRpcmVjdGlvbkxpbmtzID0gYW5ndWxhci5pc0RlZmluZWQoJGF0dHJzLmRpcmVjdGlvbkxpbmtzKSA/ICRzY29wZS4kcGFyZW50LiRldmFsKCRhdHRycy5kaXJlY3Rpb25MaW5rcykgOiB1aWJQYWdpbmF0aW9uQ29uZmlnLmRpcmVjdGlvbkxpbmtzOwoKICB1aWJQYWdpbmcuY3JlYXRlKHRoaXMsICRzY29wZSwgJGF0dHJzKTsKCiAgaWYgKCRhdHRycy5tYXhTaXplKSB7CiAgICBjdHJsLl93YXRjaGVycy5wdXNoKCRzY29wZS4kcGFyZW50LiR3YXRjaCgkcGFyc2UoJGF0dHJzLm1heFNpemUpLCBmdW5jdGlvbih2YWx1ZSkgewogICAgICBtYXhTaXplID0gcGFyc2VJbnQodmFsdWUsIDEwKTsKICAgICAgY3RybC5yZW5kZXIoKTsKICAgIH0pKTsKICB9CgogIC8vIENyZWF0ZSBwYWdlIG9iamVjdCB1c2VkIGluIHRlbXBsYXRlCiAgZnVuY3Rpb24gbWFrZVBhZ2UobnVtYmVyLCB0ZXh0LCBpc0FjdGl2ZSkgewogICAgcmV0dXJuIHsKICAgICAgbnVtYmVyOiBudW1iZXIsCiAgICAgIHRleHQ6IHRleHQsCiAgICAgIGFjdGl2ZTogaXNBY3RpdmUKICAgIH07CiAgfQoKICBmdW5jdGlvbiBnZXRQYWdlcyhjdXJyZW50UGFnZSwgdG90YWxQYWdlcykgewogICAgdmFyIHBhZ2VzID0gW107CgogICAgLy8gRGVmYXVsdCBwYWdlIGxpbWl0cwogICAgdmFyIHN0YXJ0UGFnZSA9IDEsIGVuZFBhZ2UgPSB0b3RhbFBhZ2VzOwogICAgdmFyIGlzTWF4U2l6ZWQgPSBhbmd1bGFyLmlzRGVmaW5lZChtYXhTaXplKSAmJiBtYXhTaXplIDwgdG90YWxQYWdlczsKCiAgICAvLyByZWNvbXB1dGUgaWYgbWF4U2l6ZQogICAgaWYgKGlzTWF4U2l6ZWQpIHsKICAgICAgaWYgKHJvdGF0ZSkgewogICAgICAgIC8vIEN1cnJlbnQgcGFnZSBpcyBkaXNwbGF5ZWQgaW4gdGhlIG1pZGRsZSBvZiB0aGUgdmlzaWJsZSBvbmVzCiAgICAgICAgc3RhcnRQYWdlID0gTWF0aC5tYXgoY3VycmVudFBhZ2UgLSBNYXRoLmZsb29yKG1heFNpemUgLyAyKSwgMSk7CiAgICAgICAgZW5kUGFnZSA9IHN0YXJ0UGFnZSArIG1heFNpemUgLSAxOwoKICAgICAgICAvLyBBZGp1c3QgaWYgbGltaXQgaXMgZXhjZWVkZWQKICAgICAgICBpZiAoZW5kUGFnZSA+IHRvdGFsUGFnZXMpIHsKICAgICAgICAgIGVuZFBhZ2UgPSB0b3RhbFBhZ2VzOwogICAgICAgICAgc3RhcnRQYWdlID0gZW5kUGFnZSAtIG1heFNpemUgKyAxOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBWaXNpYmxlIHBhZ2VzIGFyZSBwYWdpbmF0ZWQgd2l0aCBtYXhTaXplCiAgICAgICAgc3RhcnRQYWdlID0gKE1hdGguY2VpbChjdXJyZW50UGFnZSAvIG1heFNpemUpIC0gMSkgKiBtYXhTaXplICsgMTsKCiAgICAgICAgLy8gQWRqdXN0IGxhc3QgcGFnZSBpZiBsaW1pdCBpcyBleGNlZWRlZAogICAgICAgIGVuZFBhZ2UgPSBNYXRoLm1pbihzdGFydFBhZ2UgKyBtYXhTaXplIC0gMSwgdG90YWxQYWdlcyk7CiAgICAgIH0KICAgIH0KCiAgICAvLyBBZGQgcGFnZSBudW1iZXIgbGlua3MKICAgIGZvciAodmFyIG51bWJlciA9IHN0YXJ0UGFnZTsgbnVtYmVyIDw9IGVuZFBhZ2U7IG51bWJlcisrKSB7CiAgICAgIHZhciBwYWdlID0gbWFrZVBhZ2UobnVtYmVyLCBwYWdlTGFiZWwobnVtYmVyKSwgbnVtYmVyID09PSBjdXJyZW50UGFnZSk7CiAgICAgIHBhZ2VzLnB1c2gocGFnZSk7CiAgICB9CgogICAgLy8gQWRkIGxpbmtzIHRvIG1vdmUgYmV0d2VlbiBwYWdlIHNldHMKICAgIGlmIChpc01heFNpemVkICYmIG1heFNpemUgPiAwICYmICghcm90YXRlIHx8IGZvcmNlRWxsaXBzZXMgfHwgYm91bmRhcnlMaW5rTnVtYmVycykpIHsKICAgICAgaWYgKHN0YXJ0UGFnZSA+IDEpIHsKICAgICAgICBpZiAoIWJvdW5kYXJ5TGlua051bWJlcnMgfHwgc3RhcnRQYWdlID4gMykgeyAvL25lZWQgZWxsaXBzaXMgZm9yIGFsbCBvcHRpb25zIHVubGVzcyByYW5nZSBpcyB0b28gY2xvc2UgdG8gYmVnaW5uaW5nCiAgICAgICAgdmFyIHByZXZpb3VzUGFnZVNldCA9IG1ha2VQYWdlKHN0YXJ0UGFnZSAtIDEsICcuLi4nLCBmYWxzZSk7CiAgICAgICAgcGFnZXMudW5zaGlmdChwcmV2aW91c1BhZ2VTZXQpOwogICAgICB9CiAgICAgICAgaWYgKGJvdW5kYXJ5TGlua051bWJlcnMpIHsKICAgICAgICAgIGlmIChzdGFydFBhZ2UgPT09IDMpIHsgLy9uZWVkIHRvIHJlcGxhY2UgZWxsaXBzaXMgd2hlbiB0aGUgYnV0dG9ucyB3b3VsZCBiZSBzZXF1ZW50aWFsCiAgICAgICAgICAgIHZhciBzZWNvbmRQYWdlTGluayA9IG1ha2VQYWdlKDIsICcyJywgZmFsc2UpOwogICAgICAgICAgICBwYWdlcy51bnNoaWZ0KHNlY29uZFBhZ2VMaW5rKTsKICAgICAgICAgIH0KICAgICAgICAgIC8vYWRkIHRoZSBmaXJzdCBwYWdlCiAgICAgICAgICB2YXIgZmlyc3RQYWdlTGluayA9IG1ha2VQYWdlKDEsICcxJywgZmFsc2UpOwogICAgICAgICAgcGFnZXMudW5zaGlmdChmaXJzdFBhZ2VMaW5rKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChlbmRQYWdlIDwgdG90YWxQYWdlcykgewogICAgICAgIGlmICghYm91bmRhcnlMaW5rTnVtYmVycyB8fCBlbmRQYWdlIDwgdG90YWxQYWdlcyAtIDIpIHsgLy9uZWVkIGVsbGlwc2lzIGZvciBhbGwgb3B0aW9ucyB1bmxlc3MgcmFuZ2UgaXMgdG9vIGNsb3NlIHRvIGVuZAogICAgICAgIHZhciBuZXh0UGFnZVNldCA9IG1ha2VQYWdlKGVuZFBhZ2UgKyAxLCAnLi4uJywgZmFsc2UpOwogICAgICAgIHBhZ2VzLnB1c2gobmV4dFBhZ2VTZXQpOwogICAgICB9CiAgICAgICAgaWYgKGJvdW5kYXJ5TGlua051bWJlcnMpIHsKICAgICAgICAgIGlmIChlbmRQYWdlID09PSB0b3RhbFBhZ2VzIC0gMikgeyAvL25lZWQgdG8gcmVwbGFjZSBlbGxpcHNpcyB3aGVuIHRoZSBidXR0b25zIHdvdWxkIGJlIHNlcXVlbnRpYWwKICAgICAgICAgICAgdmFyIHNlY29uZFRvTGFzdFBhZ2VMaW5rID0gbWFrZVBhZ2UodG90YWxQYWdlcyAtIDEsIHRvdGFsUGFnZXMgLSAxLCBmYWxzZSk7CiAgICAgICAgICAgIHBhZ2VzLnB1c2goc2Vjb25kVG9MYXN0UGFnZUxpbmspOwogICAgICAgICAgfQogICAgICAgICAgLy9hZGQgdGhlIGxhc3QgcGFnZQogICAgICAgICAgdmFyIGxhc3RQYWdlTGluayA9IG1ha2VQYWdlKHRvdGFsUGFnZXMsIHRvdGFsUGFnZXMsIGZhbHNlKTsKICAgICAgICAgIHBhZ2VzLnB1c2gobGFzdFBhZ2VMaW5rKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBwYWdlczsKICB9CgogIHZhciBvcmlnaW5hbFJlbmRlciA9IHRoaXMucmVuZGVyOwogIHRoaXMucmVuZGVyID0gZnVuY3Rpb24oKSB7CiAgICBvcmlnaW5hbFJlbmRlcigpOwogICAgaWYgKCRzY29wZS5wYWdlID4gMCAmJiAkc2NvcGUucGFnZSA8PSAkc2NvcGUudG90YWxQYWdlcykgewogICAgICAkc2NvcGUucGFnZXMgPSBnZXRQYWdlcygkc2NvcGUucGFnZSwgJHNjb3BlLnRvdGFsUGFnZXMpOwogICAgfQogIH07Cn1dKQoKLmNvbnN0YW50KCd1aWJQYWdpbmF0aW9uQ29uZmlnJywgewogIGl0ZW1zUGVyUGFnZTogMTAsCiAgYm91bmRhcnlMaW5rczogZmFsc2UsCiAgYm91bmRhcnlMaW5rTnVtYmVyczogZmFsc2UsCiAgZGlyZWN0aW9uTGlua3M6IHRydWUsCiAgZmlyc3RUZXh0OiAnRmlyc3QnLAogIHByZXZpb3VzVGV4dDogJ1ByZXZpb3VzJywKICBuZXh0VGV4dDogJ05leHQnLAogIGxhc3RUZXh0OiAnTGFzdCcsCiAgcm90YXRlOiB0cnVlLAogIGZvcmNlRWxsaXBzZXM6IGZhbHNlCn0pCgouZGlyZWN0aXZlKCd1aWJQYWdpbmF0aW9uJywgWyckcGFyc2UnLCAndWliUGFnaW5hdGlvbkNvbmZpZycsIGZ1bmN0aW9uKCRwYXJzZSwgdWliUGFnaW5hdGlvbkNvbmZpZykgewogIHJldHVybiB7CiAgICBzY29wZTogewogICAgICB0b3RhbEl0ZW1zOiAnPScsCiAgICAgIGZpcnN0VGV4dDogJ0AnLAogICAgICBwcmV2aW91c1RleHQ6ICdAJywKICAgICAgbmV4dFRleHQ6ICdAJywKICAgICAgbGFzdFRleHQ6ICdAJywKICAgICAgbmdEaXNhYmxlZDonPScKICAgIH0sCiAgICByZXF1aXJlOiBbJ3VpYlBhZ2luYXRpb24nLCAnP25nTW9kZWwnXSwKICAgIHJlc3RyaWN0OiAnQScsCiAgICBjb250cm9sbGVyOiAnVWliUGFnaW5hdGlvbkNvbnRyb2xsZXInLAogICAgY29udHJvbGxlckFzOiAncGFnaW5hdGlvbicsCiAgICB0ZW1wbGF0ZVVybDogZnVuY3Rpb24oZWxlbWVudCwgYXR0cnMpIHsKICAgICAgcmV0dXJuIGF0dHJzLnRlbXBsYXRlVXJsIHx8ICd1aWIvdGVtcGxhdGUvcGFnaW5hdGlvbi9wYWdpbmF0aW9uLmh0bWwnOwogICAgfSwKICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY3RybHMpIHsKICAgICAgZWxlbWVudC5hZGRDbGFzcygncGFnaW5hdGlvbicpOwogICAgICB2YXIgcGFnaW5hdGlvbkN0cmwgPSBjdHJsc1swXSwgbmdNb2RlbEN0cmwgPSBjdHJsc1sxXTsKCiAgICAgIGlmICghbmdNb2RlbEN0cmwpIHsKICAgICAgICAgcmV0dXJuOyAvLyBkbyBub3RoaW5nIGlmIG5vIG5nLW1vZGVsCiAgICAgIH0KCiAgICAgIHBhZ2luYXRpb25DdHJsLmluaXQobmdNb2RlbEN0cmwsIHVpYlBhZ2luYXRpb25Db25maWcpOwogICAgfQogIH07Cn1dKTsKCi8qKgogKiBUaGUgZm9sbG93aW5nIGZlYXR1cmVzIGFyZSBzdGlsbCBvdXRzdGFuZGluZzogYW5pbWF0aW9uIGFzIGEKICogZnVuY3Rpb24sIHBsYWNlbWVudCBhcyBhIGZ1bmN0aW9uLCBpbnNpZGUsIHN1cHBvcnQgZm9yIG1vcmUgdHJpZ2dlcnMgdGhhbgogKiBqdXN0IG1vdXNlIGVudGVyL2xlYXZlLCBodG1sIHRvb2x0aXBzLCBhbmQgc2VsZWN0b3IgZGVsZWdhdGlvbi4KICovCmFuZ3VsYXIubW9kdWxlKCd1aS5ib290c3RyYXAudG9vbHRpcCcsIFsndWkuYm9vdHN0cmFwLnBvc2l0aW9uJywgJ3VpLmJvb3RzdHJhcC5zdGFja2VkTWFwJ10pCgovKioKICogVGhlICR0b29sdGlwIHNlcnZpY2UgY3JlYXRlcyB0b29sdGlwLSBhbmQgcG9wb3Zlci1saWtlIGRpcmVjdGl2ZXMgYXMgd2VsbCBhcwogKiBob3VzZXMgZ2xvYmFsIG9wdGlvbnMgZm9yIHRoZW0uCiAqLwoucHJvdmlkZXIoJyR1aWJUb29sdGlwJywgZnVuY3Rpb24oKSB7CiAgLy8gVGhlIGRlZmF1bHQgb3B0aW9ucyB0b29sdGlwIGFuZCBwb3BvdmVyLgogIHZhciBkZWZhdWx0T3B0aW9ucyA9IHsKICAgIHBsYWNlbWVudDogJ3RvcCcsCiAgICBwbGFjZW1lbnRDbGFzc1ByZWZpeDogJycsCiAgICBhbmltYXRpb246IHRydWUsCiAgICBwb3B1cERlbGF5OiAwLAogICAgcG9wdXBDbG9zZURlbGF5OiAwLAogICAgdXNlQ29udGVudEV4cDogZmFsc2UKICB9OwoKICAvLyBEZWZhdWx0IGhpZGUgdHJpZ2dlcnMgZm9yIGVhY2ggc2hvdyB0cmlnZ2VyCiAgdmFyIHRyaWdnZXJNYXAgPSB7CiAgICAnbW91c2VlbnRlcic6ICdtb3VzZWxlYXZlJywKICAgICdjbGljayc6ICdjbGljaycsCiAgICAnb3V0c2lkZUNsaWNrJzogJ291dHNpZGVDbGljaycsCiAgICAnZm9jdXMnOiAnYmx1cicsCiAgICAnbm9uZSc6ICcnCiAgfTsKCiAgLy8gVGhlIG9wdGlvbnMgc3BlY2lmaWVkIHRvIHRoZSBwcm92aWRlciBnbG9iYWxseS4KICB2YXIgZ2xvYmFsT3B0aW9ucyA9IHt9OwoKICAvKioKICAgKiBgb3B0aW9ucyh7fSlgIGFsbG93cyBnbG9iYWwgY29uZmlndXJhdGlvbiBvZiBhbGwgdG9vbHRpcHMgaW4gdGhlCiAgICogYXBwbGljYXRpb24uCiAgICoKICAgKiAgIHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSggJ0FwcCcsIFsndWkuYm9vdHN0cmFwLnRvb2x0aXAnXSwgZnVuY3Rpb24oICR0b29sdGlwUHJvdmlkZXIgKSB7CiAgICogICAgIC8vIHBsYWNlIHRvb2x0aXBzIGxlZnQgaW5zdGVhZCBvZiB0b3AgYnkgZGVmYXVsdAogICAqICAgICAkdG9vbHRpcFByb3ZpZGVyLm9wdGlvbnMoIHsgcGxhY2VtZW50OiAnbGVmdCcgfSApOwogICAqICAgfSk7CiAgICovCgl0aGlzLm9wdGlvbnMgPSBmdW5jdGlvbih2YWx1ZSkgewoJCWFuZ3VsYXIuZXh0ZW5kKGdsb2JhbE9wdGlvbnMsIHZhbHVlKTsKCX07CgogIC8qKgogICAqIFRoaXMgYWxsb3dzIHlvdSB0byBleHRlbmQgdGhlIHNldCBvZiB0cmlnZ2VyIG1hcHBpbmdzIGF2YWlsYWJsZS4gRS5nLjoKICAgKgogICAqICAgJHRvb2x0aXBQcm92aWRlci5zZXRUcmlnZ2VycyggeyAnb3BlblRyaWdnZXInOiAnY2xvc2VUcmlnZ2VyJyB9ICk7CiAgICovCiAgdGhpcy5zZXRUcmlnZ2VycyA9IGZ1bmN0aW9uIHNldFRyaWdnZXJzKHRyaWdnZXJzKSB7CiAgICBhbmd1bGFyLmV4dGVuZCh0cmlnZ2VyTWFwLCB0cmlnZ2Vycyk7CiAgfTsKCiAgLyoqCiAgICogVGhpcyBpcyBhIGhlbHBlciBmdW5jdGlvbiBmb3IgdHJhbnNsYXRpbmcgY2FtZWwtY2FzZSB0byBzbmFrZV9jYXNlLgogICAqLwogIGZ1bmN0aW9uIHNuYWtlX2Nhc2UobmFtZSkgewogICAgdmFyIHJlZ2V4cCA9IC9bQS1aXS9nOwogICAgdmFyIHNlcGFyYXRvciA9ICctJzsKICAgIHJldHVybiBuYW1lLnJlcGxhY2UocmVnZXhwLCBmdW5jdGlvbihsZXR0ZXIsIHBvcykgewogICAgICByZXR1cm4gKHBvcyA/IHNlcGFyYXRvciA6ICcnKSArIGxldHRlci50b0xvd2VyQ2FzZSgpOwogICAgfSk7CiAgfQoKICAvKioKICAgKiBSZXR1cm5zIHRoZSBhY3R1YWwgaW5zdGFuY2Ugb2YgdGhlICR0b29sdGlwIHNlcnZpY2UuCiAgICogVE9ETyBzdXBwb3J0IG11bHRpcGxlIHRyaWdnZXJzCiAgICovCiAgdGhpcy4kZ2V0ID0gWyckd2luZG93JywgJyRjb21waWxlJywgJyR0aW1lb3V0JywgJyRkb2N1bWVudCcsICckdWliUG9zaXRpb24nLCAnJGludGVycG9sYXRlJywgJyRyb290U2NvcGUnLCAnJHBhcnNlJywgJyQkc3RhY2tlZE1hcCcsIGZ1bmN0aW9uKCR3aW5kb3csICRjb21waWxlLCAkdGltZW91dCwgJGRvY3VtZW50LCAkcG9zaXRpb24sICRpbnRlcnBvbGF0ZSwgJHJvb3RTY29wZSwgJHBhcnNlLCAkJHN0YWNrZWRNYXApIHsKICAgIHZhciBvcGVuZWRUb29sdGlwcyA9ICQkc3RhY2tlZE1hcC5jcmVhdGVOZXcoKTsKICAgICRkb2N1bWVudC5vbigna2V5dXAnLCBrZXlwcmVzc0xpc3RlbmVyKTsKCiAgICAkcm9vdFNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHsKICAgICAgJGRvY3VtZW50Lm9mZigna2V5dXAnLCBrZXlwcmVzc0xpc3RlbmVyKTsKICAgIH0pOwoKICAgIGZ1bmN0aW9uIGtleXByZXNzTGlzdGVuZXIoZSkgewogICAgICBpZiAoZS53aGljaCA9PT0gMjcpIHsKICAgICAgICB2YXIgbGFzdCA9IG9wZW5lZFRvb2x0aXBzLnRvcCgpOwogICAgICAgIGlmIChsYXN0KSB7CiAgICAgICAgICBsYXN0LnZhbHVlLmNsb3NlKCk7CiAgICAgICAgICBsYXN0ID0gbnVsbDsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gZnVuY3Rpb24gJHRvb2x0aXAodHRUeXBlLCBwcmVmaXgsIGRlZmF1bHRUcmlnZ2VyU2hvdywgb3B0aW9ucykgewogICAgICBvcHRpb25zID0gYW5ndWxhci5leHRlbmQoe30sIGRlZmF1bHRPcHRpb25zLCBnbG9iYWxPcHRpb25zLCBvcHRpb25zKTsKCiAgICAgIC8qKgogICAgICAgKiBSZXR1cm5zIGFuIG9iamVjdCBvZiBzaG93IGFuZCBoaWRlIHRyaWdnZXJzLgogICAgICAgKgogICAgICAgKiBJZiBhIHRyaWdnZXIgaXMgc3VwcGxpZWQsCiAgICAgICAqIGl0IGlzIHVzZWQgdG8gc2hvdyB0aGUgdG9vbHRpcDsgb3RoZXJ3aXNlLCBpdCB3aWxsIHVzZSB0aGUgYHRyaWdnZXJgCiAgICAgICAqIG9wdGlvbiBwYXNzZWQgdG8gdGhlIGAkdG9vbHRpcFByb3ZpZGVyLm9wdGlvbnNgIG1ldGhvZDsgZWxzZSBpdCB3aWxsCiAgICAgICAqIGRlZmF1bHQgdG8gdGhlIHRyaWdnZXIgc3VwcGxpZWQgdG8gdGhpcyBkaXJlY3RpdmUgZmFjdG9yeS4KICAgICAgICoKICAgICAgICogVGhlIGhpZGUgdHJpZ2dlciBpcyBiYXNlZCBvbiB0aGUgc2hvdyB0cmlnZ2VyLiBJZiB0aGUgYHRyaWdnZXJgIG9wdGlvbgogICAgICAgKiB3YXMgcGFzc2VkIHRvIHRoZSBgJHRvb2x0aXBQcm92aWRlci5vcHRpb25zYCBtZXRob2QsIGl0IHdpbGwgdXNlIHRoZQogICAgICAgKiBtYXBwZWQgdHJpZ2dlciBmcm9tIGB0cmlnZ2VyTWFwYCBvciB0aGUgcGFzc2VkIHRyaWdnZXIgaWYgdGhlIG1hcCBpcwogICAgICAgKiB1bmRlZmluZWQ7IG90aGVyd2lzZSwgaXQgdXNlcyB0aGUgYHRyaWdnZXJNYXBgIHZhbHVlIG9mIHRoZSBzaG93CiAgICAgICAqIHRyaWdnZXI7IGVsc2UgaXQgd2lsbCBqdXN0IHVzZSB0aGUgc2hvdyB0cmlnZ2VyLgogICAgICAgKi8KICAgICAgZnVuY3Rpb24gZ2V0VHJpZ2dlcnModHJpZ2dlcikgewogICAgICAgIHZhciBzaG93ID0gKHRyaWdnZXIgfHwgb3B0aW9ucy50cmlnZ2VyIHx8IGRlZmF1bHRUcmlnZ2VyU2hvdykuc3BsaXQoJyAnKTsKICAgICAgICB2YXIgaGlkZSA9IHNob3cubWFwKGZ1bmN0aW9uKHRyaWdnZXIpIHsKICAgICAgICAgIHJldHVybiB0cmlnZ2VyTWFwW3RyaWdnZXJdIHx8IHRyaWdnZXI7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHNob3c6IHNob3csCiAgICAgICAgICBoaWRlOiBoaWRlCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgdmFyIGRpcmVjdGl2ZU5hbWUgPSBzbmFrZV9jYXNlKHR0VHlwZSk7CgogICAgICB2YXIgc3RhcnRTeW0gPSAkaW50ZXJwb2xhdGUuc3RhcnRTeW1ib2woKTsKICAgICAgdmFyIGVuZFN5bSA9ICRpbnRlcnBvbGF0ZS5lbmRTeW1ib2woKTsKICAgICAgdmFyIHRlbXBsYXRlID0KICAgICAgICAnPGRpdiAnKyBkaXJlY3RpdmVOYW1lICsgJy1wb3B1cCAnICsKICAgICAgICAgICd1aWItdGl0bGU9IicgKyBzdGFydFN5bSArICd0aXRsZScgKyBlbmRTeW0gKyAnIiAnICsKICAgICAgICAgIChvcHRpb25zLnVzZUNvbnRlbnRFeHAgPwogICAgICAgICAgICAnY29udGVudC1leHA9ImNvbnRlbnRFeHAoKSIgJyA6CiAgICAgICAgICAgICdjb250ZW50PSInICsgc3RhcnRTeW0gKyAnY29udGVudCcgKyBlbmRTeW0gKyAnIiAnKSArCiAgICAgICAgICAnb3JpZ2luLXNjb3BlPSJvcmlnU2NvcGUiICcgKwogICAgICAgICAgJ2NsYXNzPSJ1aWItcG9zaXRpb24tbWVhc3VyZSAnICsgcHJlZml4ICsgJyIgJyArCiAgICAgICAgICAndG9vbHRpcC1hbmltYXRpb24tY2xhc3M9ImZhZGUiJyArCiAgICAgICAgICAndWliLXRvb2x0aXAtY2xhc3NlcyAnICsKICAgICAgICAgICduZy1jbGFzcz0ieyBpbjogaXNPcGVuIH0iICcgKwogICAgICAgICAgJz4nICsKICAgICAgICAnPC9kaXY+JzsKCiAgICAgIHJldHVybiB7CiAgICAgICAgY29tcGlsZTogZnVuY3Rpb24odEVsZW0sIHRBdHRycykgewogICAgICAgICAgdmFyIHRvb2x0aXBMaW5rZXIgPSAkY29tcGlsZSh0ZW1wbGF0ZSk7CgogICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCB0b29sdGlwQ3RybCkgewogICAgICAgICAgICB2YXIgdG9vbHRpcDsKICAgICAgICAgICAgdmFyIHRvb2x0aXBMaW5rZWRTY29wZTsKICAgICAgICAgICAgdmFyIHRyYW5zaXRpb25UaW1lb3V0OwogICAgICAgICAgICB2YXIgc2hvd1RpbWVvdXQ7CiAgICAgICAgICAgIHZhciBoaWRlVGltZW91dDsKICAgICAgICAgICAgdmFyIHBvc2l0aW9uVGltZW91dDsKICAgICAgICAgICAgdmFyIGFwcGVuZFRvQm9keSA9IGFuZ3VsYXIuaXNEZWZpbmVkKG9wdGlvbnMuYXBwZW5kVG9Cb2R5KSA/IG9wdGlvbnMuYXBwZW5kVG9Cb2R5IDogZmFsc2U7CiAgICAgICAgICAgIHZhciB0cmlnZ2VycyA9IGdldFRyaWdnZXJzKHVuZGVmaW5lZCk7CiAgICAgICAgICAgIHZhciBoYXNFbmFibGVFeHAgPSBhbmd1bGFyLmlzRGVmaW5lZChhdHRyc1twcmVmaXggKyAnRW5hYmxlJ10pOwogICAgICAgICAgICB2YXIgdHRTY29wZSA9IHNjb3BlLiRuZXcodHJ1ZSk7CiAgICAgICAgICAgIHZhciByZXBvc2l0aW9uU2NoZWR1bGVkID0gZmFsc2U7CiAgICAgICAgICAgIHZhciBpc09wZW5QYXJzZSA9IGFuZ3VsYXIuaXNEZWZpbmVkKGF0dHJzW3ByZWZpeCArICdJc09wZW4nXSkgPyAkcGFyc2UoYXR0cnNbcHJlZml4ICsgJ0lzT3BlbiddKSA6IGZhbHNlOwogICAgICAgICAgICB2YXIgY29udGVudFBhcnNlID0gb3B0aW9ucy51c2VDb250ZW50RXhwID8gJHBhcnNlKGF0dHJzW3R0VHlwZV0pIDogZmFsc2U7CiAgICAgICAgICAgIHZhciBvYnNlcnZlcnMgPSBbXTsKICAgICAgICAgICAgdmFyIGxhc3RQbGFjZW1lbnQ7CgogICAgICAgICAgICB2YXIgcG9zaXRpb25Ub29sdGlwID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgdG9vbHRpcCBleGlzdHMgYW5kIGlzIG5vdCBlbXB0eQogICAgICAgICAgICAgIGlmICghdG9vbHRpcCB8fCAhdG9vbHRpcC5odG1sKCkpIHsgcmV0dXJuOyB9CgogICAgICAgICAgICAgIGlmICghcG9zaXRpb25UaW1lb3V0KSB7CiAgICAgICAgICAgICAgICBwb3NpdGlvblRpbWVvdXQgPSAkdGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgdmFyIHR0UG9zaXRpb24gPSAkcG9zaXRpb24ucG9zaXRpb25FbGVtZW50cyhlbGVtZW50LCB0b29sdGlwLCB0dFNjb3BlLnBsYWNlbWVudCwgYXBwZW5kVG9Cb2R5KTsKICAgICAgICAgICAgICAgICAgdmFyIGluaXRpYWxIZWlnaHQgPSBhbmd1bGFyLmlzRGVmaW5lZCh0b29sdGlwLm9mZnNldEhlaWdodCkgPyB0b29sdGlwLm9mZnNldEhlaWdodCA6IHRvb2x0aXAucHJvcCgnb2Zmc2V0SGVpZ2h0Jyk7CiAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50UG9zID0gYXBwZW5kVG9Cb2R5ID8gJHBvc2l0aW9uLm9mZnNldChlbGVtZW50KSA6ICRwb3NpdGlvbi5wb3NpdGlvbihlbGVtZW50KTsKICAgICAgICAgICAgICAgICAgdG9vbHRpcC5jc3MoeyB0b3A6IHR0UG9zaXRpb24udG9wICsgJ3B4JywgbGVmdDogdHRQb3NpdGlvbi5sZWZ0ICsgJ3B4JyB9KTsKICAgICAgICAgICAgICAgICAgdmFyIHBsYWNlbWVudENsYXNzZXMgPSB0dFBvc2l0aW9uLnBsYWNlbWVudC5zcGxpdCgnLScpOwoKICAgICAgICAgICAgICAgICAgaWYgKCF0b29sdGlwLmhhc0NsYXNzKHBsYWNlbWVudENsYXNzZXNbMF0pKSB7CiAgICAgICAgICAgICAgICAgICAgdG9vbHRpcC5yZW1vdmVDbGFzcyhsYXN0UGxhY2VtZW50LnNwbGl0KCctJylbMF0pOwogICAgICAgICAgICAgICAgICAgIHRvb2x0aXAuYWRkQ2xhc3MocGxhY2VtZW50Q2xhc3Nlc1swXSk7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGlmICghdG9vbHRpcC5oYXNDbGFzcyhvcHRpb25zLnBsYWNlbWVudENsYXNzUHJlZml4ICsgdHRQb3NpdGlvbi5wbGFjZW1lbnQpKSB7CiAgICAgICAgICAgICAgICAgICAgdG9vbHRpcC5yZW1vdmVDbGFzcyhvcHRpb25zLnBsYWNlbWVudENsYXNzUHJlZml4ICsgbGFzdFBsYWNlbWVudCk7CiAgICAgICAgICAgICAgICAgICAgdG9vbHRpcC5hZGRDbGFzcyhvcHRpb25zLnBsYWNlbWVudENsYXNzUHJlZml4ICsgdHRQb3NpdGlvbi5wbGFjZW1lbnQpOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudEhlaWdodCA9IGFuZ3VsYXIuaXNEZWZpbmVkKHRvb2x0aXAub2Zmc2V0SGVpZ2h0KSA/IHRvb2x0aXAub2Zmc2V0SGVpZ2h0IDogdG9vbHRpcC5wcm9wKCdvZmZzZXRIZWlnaHQnKTsKICAgICAgICAgICAgICAgICAgICB2YXIgYWRqdXN0bWVudCA9ICRwb3NpdGlvbi5hZGp1c3RUb3AocGxhY2VtZW50Q2xhc3NlcywgZWxlbWVudFBvcywgaW5pdGlhbEhlaWdodCwgY3VycmVudEhlaWdodCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGFkanVzdG1lbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXAuY3NzKGFkanVzdG1lbnQpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSwgMCwgZmFsc2UpOwoKICAgICAgICAgICAgICAgICAgLy8gZmlyc3QgdGltZSB0aHJvdWdoIHR0IGVsZW1lbnQgd2lsbCBoYXZlIHRoZQogICAgICAgICAgICAgICAgICAvLyB1aWItcG9zaXRpb24tbWVhc3VyZSBjbGFzcyBvciBpZiB0aGUgcGxhY2VtZW50CiAgICAgICAgICAgICAgICAgIC8vIGhhcyBjaGFuZ2VkIHdlIG5lZWQgdG8gcG9zaXRpb24gdGhlIGFycm93LgogICAgICAgICAgICAgICAgICBpZiAodG9vbHRpcC5oYXNDbGFzcygndWliLXBvc2l0aW9uLW1lYXN1cmUnKSkgewogICAgICAgICAgICAgICAgICAgICRwb3NpdGlvbi5wb3NpdGlvbkFycm93KHRvb2x0aXAsIHR0UG9zaXRpb24ucGxhY2VtZW50KTsKICAgICAgICAgICAgICAgICAgICB0b29sdGlwLnJlbW92ZUNsYXNzKCd1aWItcG9zaXRpb24tbWVhc3VyZScpOwogICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxhc3RQbGFjZW1lbnQgIT09IHR0UG9zaXRpb24ucGxhY2VtZW50KSB7CiAgICAgICAgICAgICAgICAgICAgJHBvc2l0aW9uLnBvc2l0aW9uQXJyb3codG9vbHRpcCwgdHRQb3NpdGlvbi5wbGFjZW1lbnQpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGxhc3RQbGFjZW1lbnQgPSB0dFBvc2l0aW9uLnBsYWNlbWVudDsKCiAgICAgICAgICAgICAgICAgIHBvc2l0aW9uVGltZW91dCA9IG51bGw7CiAgICAgICAgICAgICAgICB9LCAwLCBmYWxzZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgLy8gU2V0IHVwIHRoZSBjb3JyZWN0IHNjb3BlIHRvIGFsbG93IHRyYW5zY2x1c2lvbiBsYXRlcgogICAgICAgICAgICB0dFNjb3BlLm9yaWdTY29wZSA9IHNjb3BlOwoKICAgICAgICAgICAgLy8gQnkgZGVmYXVsdCwgdGhlIHRvb2x0aXAgaXMgbm90IG9wZW4uCiAgICAgICAgICAgIC8vIFRPRE8gYWRkIGFiaWxpdHkgdG8gc3RhcnQgdG9vbHRpcCBvcGVuZWQKICAgICAgICAgICAgdHRTY29wZS5pc09wZW4gPSBmYWxzZTsKCiAgICAgICAgICAgIGZ1bmN0aW9uIHRvZ2dsZVRvb2x0aXBCaW5kKCkgewogICAgICAgICAgICAgIGlmICghdHRTY29wZS5pc09wZW4pIHsKICAgICAgICAgICAgICAgIHNob3dUb29sdGlwQmluZCgpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBoaWRlVG9vbHRpcEJpbmQoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIFNob3cgdGhlIHRvb2x0aXAgd2l0aCBkZWxheSBpZiBzcGVjaWZpZWQsIG90aGVyd2lzZSBzaG93IGl0IGltbWVkaWF0ZWx5CiAgICAgICAgICAgIGZ1bmN0aW9uIHNob3dUb29sdGlwQmluZCgpIHsKICAgICAgICAgICAgICBpZiAoaGFzRW5hYmxlRXhwICYmICFzY29wZS4kZXZhbChhdHRyc1twcmVmaXggKyAnRW5hYmxlJ10pKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYW5jZWxIaWRlKCk7CiAgICAgICAgICAgICAgcHJlcGFyZVRvb2x0aXAoKTsKCiAgICAgICAgICAgICAgaWYgKHR0U2NvcGUucG9wdXBEZWxheSkgewogICAgICAgICAgICAgICAgLy8gRG8gbm90aGluZyBpZiB0aGUgdG9vbHRpcCB3YXMgYWxyZWFkeSBzY2hlZHVsZWQgdG8gcG9wLXVwLgogICAgICAgICAgICAgICAgLy8gVGhpcyBoYXBwZW5zIGlmIHNob3cgaXMgdHJpZ2dlcmVkIG11bHRpcGxlIHRpbWVzIGJlZm9yZSBhbnkgaGlkZSBpcyB0cmlnZ2VyZWQuCiAgICAgICAgICAgICAgICBpZiAoIXNob3dUaW1lb3V0KSB7CiAgICAgICAgICAgICAgICAgIHNob3dUaW1lb3V0ID0gJHRpbWVvdXQoc2hvdywgdHRTY29wZS5wb3B1cERlbGF5LCBmYWxzZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHNob3coKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGhpZGVUb29sdGlwQmluZCgpIHsKICAgICAgICAgICAgICBjYW5jZWxTaG93KCk7CgogICAgICAgICAgICAgIGlmICh0dFNjb3BlLnBvcHVwQ2xvc2VEZWxheSkgewogICAgICAgICAgICAgICAgaWYgKCFoaWRlVGltZW91dCkgewogICAgICAgICAgICAgICAgICBoaWRlVGltZW91dCA9ICR0aW1lb3V0KGhpZGUsIHR0U2NvcGUucG9wdXBDbG9zZURlbGF5LCBmYWxzZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGhpZGUoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIFNob3cgdGhlIHRvb2x0aXAgcG9wdXAgZWxlbWVudC4KICAgICAgICAgICAgZnVuY3Rpb24gc2hvdygpIHsKICAgICAgICAgICAgICBjYW5jZWxTaG93KCk7CiAgICAgICAgICAgICAgY2FuY2VsSGlkZSgpOwoKICAgICAgICAgICAgICAvLyBEb24ndCBzaG93IGVtcHR5IHRvb2x0aXBzLgogICAgICAgICAgICAgIGlmICghdHRTY29wZS5jb250ZW50KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gYW5ndWxhci5ub29wOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY3JlYXRlVG9vbHRpcCgpOwoKICAgICAgICAgICAgICAvLyBBbmQgc2hvdyB0aGUgdG9vbHRpcC4KICAgICAgICAgICAgICB0dFNjb3BlLiRldmFsQXN5bmMoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB0dFNjb3BlLmlzT3BlbiA9IHRydWU7CiAgICAgICAgICAgICAgICBhc3NpZ25Jc09wZW4odHJ1ZSk7CiAgICAgICAgICAgICAgICBwb3NpdGlvblRvb2x0aXAoKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gY2FuY2VsU2hvdygpIHsKICAgICAgICAgICAgICBpZiAoc2hvd1RpbWVvdXQpIHsKICAgICAgICAgICAgICAgICR0aW1lb3V0LmNhbmNlbChzaG93VGltZW91dCk7CiAgICAgICAgICAgICAgICBzaG93VGltZW91dCA9IG51bGw7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAocG9zaXRpb25UaW1lb3V0KSB7CiAgICAgICAgICAgICAgICAkdGltZW91dC5jYW5jZWwocG9zaXRpb25UaW1lb3V0KTsKICAgICAgICAgICAgICAgIHBvc2l0aW9uVGltZW91dCA9IG51bGw7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBIaWRlIHRoZSB0b29sdGlwIHBvcHVwIGVsZW1lbnQuCiAgICAgICAgICAgIGZ1bmN0aW9uIGhpZGUoKSB7CiAgICAgICAgICAgICAgaWYgKCF0dFNjb3BlKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAvLyBGaXJzdCB0aGluZ3MgZmlyc3Q6IHdlIGRvbid0IHNob3cgaXQgYW55bW9yZS4KICAgICAgICAgICAgICB0dFNjb3BlLiRldmFsQXN5bmMoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBpZiAodHRTY29wZSkgewogICAgICAgICAgICAgICAgICB0dFNjb3BlLmlzT3BlbiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICBhc3NpZ25Jc09wZW4oZmFsc2UpOwogICAgICAgICAgICAgICAgICAvLyBBbmQgbm93IHdlIHJlbW92ZSBpdCBmcm9tIHRoZSBET00uIEhvd2V2ZXIsIGlmIHdlIGhhdmUgYW5pbWF0aW9uLCB3ZQogICAgICAgICAgICAgICAgICAvLyBuZWVkIHRvIHdhaXQgZm9yIGl0IHRvIGV4cGlyZSBiZWZvcmVoYW5kLgogICAgICAgICAgICAgICAgICAvLyBGSVhNRTogdGhpcyBpcyBhIHBsYWNlaG9sZGVyIGZvciBhIHBvcnQgb2YgdGhlIHRyYW5zaXRpb25zIGxpYnJhcnkuCiAgICAgICAgICAgICAgICAgIC8vIFRoZSBmYWRlIHRyYW5zaXRpb24gaW4gVFdCUyBpcyAxNTBtcy4KICAgICAgICAgICAgICAgICAgaWYgKHR0U2NvcGUuYW5pbWF0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCF0cmFuc2l0aW9uVGltZW91dCkgewogICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvblRpbWVvdXQgPSAkdGltZW91dChyZW1vdmVUb29sdGlwLCAxNTAsIGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlVG9vbHRpcCgpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGNhbmNlbEhpZGUoKSB7CiAgICAgICAgICAgICAgaWYgKGhpZGVUaW1lb3V0KSB7CiAgICAgICAgICAgICAgICAkdGltZW91dC5jYW5jZWwoaGlkZVRpbWVvdXQpOwogICAgICAgICAgICAgICAgaGlkZVRpbWVvdXQgPSBudWxsOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKHRyYW5zaXRpb25UaW1lb3V0KSB7CiAgICAgICAgICAgICAgICAkdGltZW91dC5jYW5jZWwodHJhbnNpdGlvblRpbWVvdXQpOwogICAgICAgICAgICAgICAgdHJhbnNpdGlvblRpbWVvdXQgPSBudWxsOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gY3JlYXRlVG9vbHRpcCgpIHsKICAgICAgICAgICAgICAvLyBUaGVyZSBjYW4gb25seSBiZSBvbmUgdG9vbHRpcCBlbGVtZW50IHBlciBkaXJlY3RpdmUgc2hvd24gYXQgb25jZS4KICAgICAgICAgICAgICBpZiAodG9vbHRpcCkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgdG9vbHRpcExpbmtlZFNjb3BlID0gdHRTY29wZS4kbmV3KCk7CiAgICAgICAgICAgICAgdG9vbHRpcCA9IHRvb2x0aXBMaW5rZXIodG9vbHRpcExpbmtlZFNjb3BlLCBmdW5jdGlvbih0b29sdGlwKSB7CiAgICAgICAgICAgICAgICBpZiAoYXBwZW5kVG9Cb2R5KSB7CiAgICAgICAgICAgICAgICAgICRkb2N1bWVudC5maW5kKCdib2R5JykuYXBwZW5kKHRvb2x0aXApOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgZWxlbWVudC5hZnRlcih0b29sdGlwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgb3BlbmVkVG9vbHRpcHMuYWRkKHR0U2NvcGUsIHsKICAgICAgICAgICAgICAgIGNsb3NlOiBoaWRlCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIHByZXBPYnNlcnZlcnMoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gcmVtb3ZlVG9vbHRpcCgpIHsKICAgICAgICAgICAgICBjYW5jZWxTaG93KCk7CiAgICAgICAgICAgICAgY2FuY2VsSGlkZSgpOwogICAgICAgICAgICAgIHVucmVnaXN0ZXJPYnNlcnZlcnMoKTsKCiAgICAgICAgICAgICAgaWYgKHRvb2x0aXApIHsKICAgICAgICAgICAgICAgIHRvb2x0aXAucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICB0b29sdGlwID0gbnVsbDsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIG9wZW5lZFRvb2x0aXBzLnJlbW92ZSh0dFNjb3BlKTsKICAgICAgICAgICAgICAKICAgICAgICAgICAgICBpZiAodG9vbHRpcExpbmtlZFNjb3BlKSB7CiAgICAgICAgICAgICAgICB0b29sdGlwTGlua2VkU2NvcGUuJGRlc3Ryb3koKTsKICAgICAgICAgICAgICAgIHRvb2x0aXBMaW5rZWRTY29wZSA9IG51bGw7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogU2V0IHRoZSBpbml0aWFsIHNjb3BlIHZhbHVlcy4gT25jZQogICAgICAgICAgICAgKiB0aGUgdG9vbHRpcCBpcyBjcmVhdGVkLCB0aGUgb2JzZXJ2ZXJzCiAgICAgICAgICAgICAqIHdpbGwgYmUgYWRkZWQgdG8ga2VlcCB0aGluZ3MgaW4gc3luYy4KICAgICAgICAgICAgICovCiAgICAgICAgICAgIGZ1bmN0aW9uIHByZXBhcmVUb29sdGlwKCkgewogICAgICAgICAgICAgIHR0U2NvcGUudGl0bGUgPSBhdHRyc1twcmVmaXggKyAnVGl0bGUnXTsKICAgICAgICAgICAgICBpZiAoY29udGVudFBhcnNlKSB7CiAgICAgICAgICAgICAgICB0dFNjb3BlLmNvbnRlbnQgPSBjb250ZW50UGFyc2Uoc2NvcGUpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0dFNjb3BlLmNvbnRlbnQgPSBhdHRyc1t0dFR5cGVdOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgdHRTY29wZS5wb3B1cENsYXNzID0gYXR0cnNbcHJlZml4ICsgJ0NsYXNzJ107CiAgICAgICAgICAgICAgdHRTY29wZS5wbGFjZW1lbnQgPSBhbmd1bGFyLmlzRGVmaW5lZChhdHRyc1twcmVmaXggKyAnUGxhY2VtZW50J10pID8gYXR0cnNbcHJlZml4ICsgJ1BsYWNlbWVudCddIDogb3B0aW9ucy5wbGFjZW1lbnQ7CiAgICAgICAgICAgICAgdmFyIHBsYWNlbWVudCA9ICRwb3NpdGlvbi5wYXJzZVBsYWNlbWVudCh0dFNjb3BlLnBsYWNlbWVudCk7CiAgICAgICAgICAgICAgbGFzdFBsYWNlbWVudCA9IHBsYWNlbWVudFsxXSA/IHBsYWNlbWVudFswXSArICctJyArIHBsYWNlbWVudFsxXSA6IHBsYWNlbWVudFswXTsKCiAgICAgICAgICAgICAgdmFyIGRlbGF5ID0gcGFyc2VJbnQoYXR0cnNbcHJlZml4ICsgJ1BvcHVwRGVsYXknXSwgMTApOwogICAgICAgICAgICAgIHZhciBjbG9zZURlbGF5ID0gcGFyc2VJbnQoYXR0cnNbcHJlZml4ICsgJ1BvcHVwQ2xvc2VEZWxheSddLCAxMCk7CiAgICAgICAgICAgICAgdHRTY29wZS5wb3B1cERlbGF5ID0gIWlzTmFOKGRlbGF5KSA/IGRlbGF5IDogb3B0aW9ucy5wb3B1cERlbGF5OwogICAgICAgICAgICAgIHR0U2NvcGUucG9wdXBDbG9zZURlbGF5ID0gIWlzTmFOKGNsb3NlRGVsYXkpID8gY2xvc2VEZWxheSA6IG9wdGlvbnMucG9wdXBDbG9zZURlbGF5OwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBhc3NpZ25Jc09wZW4oaXNPcGVuKSB7CiAgICAgICAgICAgICAgaWYgKGlzT3BlblBhcnNlICYmIGFuZ3VsYXIuaXNGdW5jdGlvbihpc09wZW5QYXJzZS5hc3NpZ24pKSB7CiAgICAgICAgICAgICAgICBpc09wZW5QYXJzZS5hc3NpZ24oc2NvcGUsIGlzT3Blbik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICB0dFNjb3BlLmNvbnRlbnRFeHAgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICByZXR1cm4gdHRTY29wZS5jb250ZW50OwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIE9ic2VydmUgdGhlIHJlbGV2YW50IGF0dHJpYnV0ZXMuCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBhdHRycy4kb2JzZXJ2ZSgnZGlzYWJsZWQnLCBmdW5jdGlvbih2YWwpIHsKICAgICAgICAgICAgICBpZiAodmFsKSB7CiAgICAgICAgICAgICAgICBjYW5jZWxTaG93KCk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAodmFsICYmIHR0U2NvcGUuaXNPcGVuKSB7CiAgICAgICAgICAgICAgICBoaWRlKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGlmIChpc09wZW5QYXJzZSkgewogICAgICAgICAgICAgIHNjb3BlLiR3YXRjaChpc09wZW5QYXJzZSwgZnVuY3Rpb24odmFsKSB7CiAgICAgICAgICAgICAgICBpZiAodHRTY29wZSAmJiAhdmFsID09PSB0dFNjb3BlLmlzT3BlbikgewogICAgICAgICAgICAgICAgICB0b2dnbGVUb29sdGlwQmluZCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBwcmVwT2JzZXJ2ZXJzKCkgewogICAgICAgICAgICAgIG9ic2VydmVycy5sZW5ndGggPSAwOwoKICAgICAgICAgICAgICBpZiAoY29udGVudFBhcnNlKSB7CiAgICAgICAgICAgICAgICBvYnNlcnZlcnMucHVzaCgKICAgICAgICAgICAgICAgICAgc2NvcGUuJHdhdGNoKGNvbnRlbnRQYXJzZSwgZnVuY3Rpb24odmFsKSB7CiAgICAgICAgICAgICAgICAgICAgdHRTY29wZS5jb250ZW50ID0gdmFsOwogICAgICAgICAgICAgICAgICAgIGlmICghdmFsICYmIHR0U2NvcGUuaXNPcGVuKSB7CiAgICAgICAgICAgICAgICAgICAgICBoaWRlKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICAgICBvYnNlcnZlcnMucHVzaCgKICAgICAgICAgICAgICAgICAgdG9vbHRpcExpbmtlZFNjb3BlLiR3YXRjaChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIXJlcG9zaXRpb25TY2hlZHVsZWQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJlcG9zaXRpb25TY2hlZHVsZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgdG9vbHRpcExpbmtlZFNjb3BlLiQkcG9zdERpZ2VzdChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmVwb3NpdGlvblNjaGVkdWxlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodHRTY29wZSAmJiB0dFNjb3BlLmlzT3BlbikgewogICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uVG9vbHRpcCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBvYnNlcnZlcnMucHVzaCgKICAgICAgICAgICAgICAgICAgYXR0cnMuJG9ic2VydmUodHRUeXBlLCBmdW5jdGlvbih2YWwpIHsKICAgICAgICAgICAgICAgICAgICB0dFNjb3BlLmNvbnRlbnQgPSB2YWw7CiAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWwgJiYgdHRTY29wZS5pc09wZW4pIHsKICAgICAgICAgICAgICAgICAgICAgIGhpZGUoKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25Ub29sdGlwKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIG9ic2VydmVycy5wdXNoKAogICAgICAgICAgICAgICAgYXR0cnMuJG9ic2VydmUocHJlZml4ICsgJ1RpdGxlJywgZnVuY3Rpb24odmFsKSB7CiAgICAgICAgICAgICAgICAgIHR0U2NvcGUudGl0bGUgPSB2YWw7CiAgICAgICAgICAgICAgICAgIGlmICh0dFNjb3BlLmlzT3BlbikgewogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uVG9vbHRpcCgpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICk7CgogICAgICAgICAgICAgIG9ic2VydmVycy5wdXNoKAogICAgICAgICAgICAgICAgYXR0cnMuJG9ic2VydmUocHJlZml4ICsgJ1BsYWNlbWVudCcsIGZ1bmN0aW9uKHZhbCkgewogICAgICAgICAgICAgICAgICB0dFNjb3BlLnBsYWNlbWVudCA9IHZhbCA/IHZhbCA6IG9wdGlvbnMucGxhY2VtZW50OwogICAgICAgICAgICAgICAgICBpZiAodHRTY29wZS5pc09wZW4pIHsKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvblRvb2x0aXAoKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiB1bnJlZ2lzdGVyT2JzZXJ2ZXJzKCkgewogICAgICAgICAgICAgIGlmIChvYnNlcnZlcnMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2gob2JzZXJ2ZXJzLCBmdW5jdGlvbihvYnNlcnZlcikgewogICAgICAgICAgICAgICAgICBvYnNlcnZlcigpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBvYnNlcnZlcnMubGVuZ3RoID0gMDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIGhpZGUgdG9vbHRpcHMvcG9wb3ZlcnMgZm9yIG91dHNpZGVDbGljayB0cmlnZ2VyCiAgICAgICAgICAgIGZ1bmN0aW9uIGJvZHlIaWRlVG9vbHRpcEJpbmQoZSkgewogICAgICAgICAgICAgIGlmICghdHRTY29wZSB8fCAhdHRTY29wZS5pc09wZW4gfHwgIXRvb2x0aXApIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gbWFrZSBzdXJlIHRoZSB0b29sdGlwL3BvcG92ZXIgbGluayBvciB0b29sIHRvb2x0aXAvcG9wb3ZlciBpdHNlbGYgd2VyZSBub3QgY2xpY2tlZAogICAgICAgICAgICAgIGlmICghZWxlbWVudFswXS5jb250YWlucyhlLnRhcmdldCkgJiYgIXRvb2x0aXBbMF0uY29udGFpbnMoZS50YXJnZXQpKSB7CiAgICAgICAgICAgICAgICBoaWRlVG9vbHRpcEJpbmQoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciB1bnJlZ2lzdGVyVHJpZ2dlcnMgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICB0cmlnZ2Vycy5zaG93LmZvckVhY2goZnVuY3Rpb24odHJpZ2dlcikgewogICAgICAgICAgICAgICAgaWYgKHRyaWdnZXIgPT09ICdvdXRzaWRlQ2xpY2snKSB7CiAgICAgICAgICAgICAgICAgIGVsZW1lbnQub2ZmKCdjbGljaycsIHRvZ2dsZVRvb2x0aXBCaW5kKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIGVsZW1lbnQub2ZmKHRyaWdnZXIsIHNob3dUb29sdGlwQmluZCk7CiAgICAgICAgICAgICAgICAgIGVsZW1lbnQub2ZmKHRyaWdnZXIsIHRvZ2dsZVRvb2x0aXBCaW5kKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB0cmlnZ2Vycy5oaWRlLmZvckVhY2goZnVuY3Rpb24odHJpZ2dlcikgewogICAgICAgICAgICAgICAgaWYgKHRyaWdnZXIgPT09ICdvdXRzaWRlQ2xpY2snKSB7CiAgICAgICAgICAgICAgICAgICRkb2N1bWVudC5vZmYoJ2NsaWNrJywgYm9keUhpZGVUb29sdGlwQmluZCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBlbGVtZW50Lm9mZih0cmlnZ2VyLCBoaWRlVG9vbHRpcEJpbmQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgZnVuY3Rpb24gcHJlcFRyaWdnZXJzKCkgewogICAgICAgICAgICAgIHZhciBzaG93VHJpZ2dlcnMgPSBbXSwgaGlkZVRyaWdnZXJzID0gW107CiAgICAgICAgICAgICAgdmFyIHZhbCA9IHNjb3BlLiRldmFsKGF0dHJzW3ByZWZpeCArICdUcmlnZ2VyJ10pOwogICAgICAgICAgICAgIHVucmVnaXN0ZXJUcmlnZ2VycygpOwoKICAgICAgICAgICAgICBpZiAoYW5ndWxhci5pc09iamVjdCh2YWwpKSB7CiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyh2YWwpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7CiAgICAgICAgICAgICAgICAgIHNob3dUcmlnZ2Vycy5wdXNoKGtleSk7CiAgICAgICAgICAgICAgICAgIGhpZGVUcmlnZ2Vycy5wdXNoKHZhbFtrZXldKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdHJpZ2dlcnMgPSB7CiAgICAgICAgICAgICAgICAgIHNob3c6IHNob3dUcmlnZ2VycywKICAgICAgICAgICAgICAgICAgaGlkZTogaGlkZVRyaWdnZXJzCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0cmlnZ2VycyA9IGdldFRyaWdnZXJzKHZhbCk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAodHJpZ2dlcnMuc2hvdyAhPT0gJ25vbmUnKSB7CiAgICAgICAgICAgICAgICB0cmlnZ2Vycy5zaG93LmZvckVhY2goZnVuY3Rpb24odHJpZ2dlciwgaWR4KSB7CiAgICAgICAgICAgICAgICAgIGlmICh0cmlnZ2VyID09PSAnb3V0c2lkZUNsaWNrJykgewogICAgICAgICAgICAgICAgICAgIGVsZW1lbnQub24oJ2NsaWNrJywgdG9nZ2xlVG9vbHRpcEJpbmQpOwogICAgICAgICAgICAgICAgICAgICRkb2N1bWVudC5vbignY2xpY2snLCBib2R5SGlkZVRvb2x0aXBCaW5kKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0cmlnZ2VyID09PSB0cmlnZ2Vycy5oaWRlW2lkeF0pIHsKICAgICAgICAgICAgICAgICAgICBlbGVtZW50Lm9uKHRyaWdnZXIsIHRvZ2dsZVRvb2x0aXBCaW5kKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0cmlnZ2VyKSB7CiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5vbih0cmlnZ2VyLCBzaG93VG9vbHRpcEJpbmQpOwogICAgICAgICAgICAgICAgICAgIGVsZW1lbnQub24odHJpZ2dlcnMuaGlkZVtpZHhdLCBoaWRlVG9vbHRpcEJpbmQpOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBlbGVtZW50Lm9uKCdrZXlwcmVzcycsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZS53aGljaCA9PT0gMjcpIHsKICAgICAgICAgICAgICAgICAgICAgIGhpZGVUb29sdGlwQmluZCgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHByZXBUcmlnZ2VycygpOwoKICAgICAgICAgICAgdmFyIGFuaW1hdGlvbiA9IHNjb3BlLiRldmFsKGF0dHJzW3ByZWZpeCArICdBbmltYXRpb24nXSk7CiAgICAgICAgICAgIHR0U2NvcGUuYW5pbWF0aW9uID0gYW5ndWxhci5pc0RlZmluZWQoYW5pbWF0aW9uKSA/ICEhYW5pbWF0aW9uIDogb3B0aW9ucy5hbmltYXRpb247CgogICAgICAgICAgICB2YXIgYXBwZW5kVG9Cb2R5VmFsOwogICAgICAgICAgICB2YXIgYXBwZW5kS2V5ID0gcHJlZml4ICsgJ0FwcGVuZFRvQm9keSc7CiAgICAgICAgICAgIGlmIChhcHBlbmRLZXkgaW4gYXR0cnMgJiYgYXR0cnNbYXBwZW5kS2V5XSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgYXBwZW5kVG9Cb2R5VmFsID0gdHJ1ZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBhcHBlbmRUb0JvZHlWYWwgPSBzY29wZS4kZXZhbChhdHRyc1thcHBlbmRLZXldKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYXBwZW5kVG9Cb2R5ID0gYW5ndWxhci5pc0RlZmluZWQoYXBwZW5kVG9Cb2R5VmFsKSA/IGFwcGVuZFRvQm9keVZhbCA6IGFwcGVuZFRvQm9keTsKCiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0b29sdGlwIGlzIGRlc3Ryb3llZCBhbmQgcmVtb3ZlZC4KICAgICAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uIG9uRGVzdHJveVRvb2x0aXAoKSB7CiAgICAgICAgICAgICAgdW5yZWdpc3RlclRyaWdnZXJzKCk7CiAgICAgICAgICAgICAgcmVtb3ZlVG9vbHRpcCgpOwogICAgICAgICAgICAgIHR0U2NvcGUgPSBudWxsOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9OwogICAgfTsKICB9XTsKfSkKCi8vIFRoaXMgaXMgbW9zdGx5IG5nSW5jbHVkZSBjb2RlIGJ1dCB3aXRoIGEgY3VzdG9tIHNjb3BlCi5kaXJlY3RpdmUoJ3VpYlRvb2x0aXBUZW1wbGF0ZVRyYW5zY2x1ZGUnLCBbCiAgICAgICAgICckYW5pbWF0ZScsICckc2NlJywgJyRjb21waWxlJywgJyR0ZW1wbGF0ZVJlcXVlc3QnLApmdW5jdGlvbiAoJGFuaW1hdGUsICRzY2UsICRjb21waWxlLCAkdGVtcGxhdGVSZXF1ZXN0KSB7CiAgcmV0dXJuIHsKICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtLCBhdHRycykgewogICAgICB2YXIgb3JpZ1Njb3BlID0gc2NvcGUuJGV2YWwoYXR0cnMudG9vbHRpcFRlbXBsYXRlVHJhbnNjbHVkZVNjb3BlKTsKCiAgICAgIHZhciBjaGFuZ2VDb3VudGVyID0gMCwKICAgICAgICBjdXJyZW50U2NvcGUsCiAgICAgICAgcHJldmlvdXNFbGVtZW50LAogICAgICAgIGN1cnJlbnRFbGVtZW50OwoKICAgICAgdmFyIGNsZWFudXBMYXN0SW5jbHVkZUNvbnRlbnQgPSBmdW5jdGlvbigpIHsKICAgICAgICBpZiAocHJldmlvdXNFbGVtZW50KSB7CiAgICAgICAgICBwcmV2aW91c0VsZW1lbnQucmVtb3ZlKCk7CiAgICAgICAgICBwcmV2aW91c0VsZW1lbnQgPSBudWxsOwogICAgICAgIH0KCiAgICAgICAgaWYgKGN1cnJlbnRTY29wZSkgewogICAgICAgICAgY3VycmVudFNjb3BlLiRkZXN0cm95KCk7CiAgICAgICAgICBjdXJyZW50U2NvcGUgPSBudWxsOwogICAgICAgIH0KCiAgICAgICAgaWYgKGN1cnJlbnRFbGVtZW50KSB7CiAgICAgICAgICAkYW5pbWF0ZS5sZWF2ZShjdXJyZW50RWxlbWVudCkudGhlbihmdW5jdGlvbigpIHsKICAgICAgICAgICAgcHJldmlvdXNFbGVtZW50ID0gbnVsbDsKICAgICAgICAgIH0pOwogICAgICAgICAgcHJldmlvdXNFbGVtZW50ID0gY3VycmVudEVsZW1lbnQ7CiAgICAgICAgICBjdXJyZW50RWxlbWVudCA9IG51bGw7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgc2NvcGUuJHdhdGNoKCRzY2UucGFyc2VBc1Jlc291cmNlVXJsKGF0dHJzLnVpYlRvb2x0aXBUZW1wbGF0ZVRyYW5zY2x1ZGUpLCBmdW5jdGlvbihzcmMpIHsKICAgICAgICB2YXIgdGhpc0NoYW5nZUlkID0gKytjaGFuZ2VDb3VudGVyOwoKICAgICAgICBpZiAoc3JjKSB7CiAgICAgICAgICAvL3NldCB0aGUgMm5kIHBhcmFtIHRvIHRydWUgdG8gaWdub3JlIHRoZSB0ZW1wbGF0ZSByZXF1ZXN0IGVycm9yIHNvIHRoYXQgdGhlIGlubmVyCiAgICAgICAgICAvL2NvbnRlbnRzIGFuZCBzY29wZSBjYW4gYmUgY2xlYW5lZCB1cC4KICAgICAgICAgICR0ZW1wbGF0ZVJlcXVlc3Qoc3JjLCB0cnVlKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAgICAgICAgIGlmICh0aGlzQ2hhbmdlSWQgIT09IGNoYW5nZUNvdW50ZXIpIHsgcmV0dXJuOyB9CiAgICAgICAgICAgIHZhciBuZXdTY29wZSA9IG9yaWdTY29wZS4kbmV3KCk7CiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZSA9IHJlc3BvbnNlOwoKICAgICAgICAgICAgdmFyIGNsb25lID0gJGNvbXBpbGUodGVtcGxhdGUpKG5ld1Njb3BlLCBmdW5jdGlvbihjbG9uZSkgewogICAgICAgICAgICAgIGNsZWFudXBMYXN0SW5jbHVkZUNvbnRlbnQoKTsKICAgICAgICAgICAgICAkYW5pbWF0ZS5lbnRlcihjbG9uZSwgZWxlbSk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY3VycmVudFNjb3BlID0gbmV3U2NvcGU7CiAgICAgICAgICAgIGN1cnJlbnRFbGVtZW50ID0gY2xvbmU7CgogICAgICAgICAgICBjdXJyZW50U2NvcGUuJGVtaXQoJyRpbmNsdWRlQ29udGVudExvYWRlZCcsIHNyYyk7CiAgICAgICAgICB9LCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgaWYgKHRoaXNDaGFuZ2VJZCA9PT0gY2hhbmdlQ291bnRlcikgewogICAgICAgICAgICAgIGNsZWFudXBMYXN0SW5jbHVkZUNvbnRlbnQoKTsKICAgICAgICAgICAgICBzY29wZS4kZW1pdCgnJGluY2x1ZGVDb250ZW50RXJyb3InLCBzcmMpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIHNjb3BlLiRlbWl0KCckaW5jbHVkZUNvbnRlbnRSZXF1ZXN0ZWQnLCBzcmMpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjbGVhbnVwTGFzdEluY2x1ZGVDb250ZW50KCk7CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBjbGVhbnVwTGFzdEluY2x1ZGVDb250ZW50KTsKICAgIH0KICB9Owp9XSkKCi8qKgogKiBOb3RlIHRoYXQgaXQncyBpbnRlbnRpb25hbCB0aGF0IHRoZXNlIGNsYXNzZXMgYXJlICpub3QqIGFwcGxpZWQgdGhyb3VnaCAkYW5pbWF0ZS4KICogVGhleSBtdXN0IG5vdCBiZSBhbmltYXRlZCBhcyB0aGV5J3JlIGV4cGVjdGVkIHRvIGJlIHByZXNlbnQgb24gdGhlIHRvb2x0aXAgb24KICogaW5pdGlhbGl6YXRpb24uCiAqLwouZGlyZWN0aXZlKCd1aWJUb29sdGlwQ2xhc3NlcycsIFsnJHVpYlBvc2l0aW9uJywgZnVuY3Rpb24oJHVpYlBvc2l0aW9uKSB7CiAgcmV0dXJuIHsKICAgIHJlc3RyaWN0OiAnQScsCiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpIHsKICAgICAgLy8gbmVlZCB0byBzZXQgdGhlIHByaW1hcnkgcG9zaXRpb24gc28gdGhlCiAgICAgIC8vIGFycm93IGhhcyBzcGFjZSBkdXJpbmcgcG9zaXRpb24gbWVhc3VyZS4KICAgICAgLy8gdG9vbHRpcC5wb3NpdGlvblRvb2x0aXAoKQogICAgICBpZiAoc2NvcGUucGxhY2VtZW50KSB7CiAgICAgICAgLy8gLy8gVGhlcmUgYXJlIG5vIHRvcC1sZWZ0IGV0Yy4uLiBjbGFzc2VzCiAgICAgICAgLy8gLy8gaW4gVFdCUywgc28gd2UgbmVlZCB0aGUgcHJpbWFyeSBwb3NpdGlvbi4KICAgICAgICB2YXIgcG9zaXRpb24gPSAkdWliUG9zaXRpb24ucGFyc2VQbGFjZW1lbnQoc2NvcGUucGxhY2VtZW50KTsKICAgICAgICBlbGVtZW50LmFkZENsYXNzKHBvc2l0aW9uWzBdKTsKICAgICAgfQoKICAgICAgaWYgKHNjb3BlLnBvcHVwQ2xhc3MpIHsKICAgICAgICBlbGVtZW50LmFkZENsYXNzKHNjb3BlLnBvcHVwQ2xhc3MpOwogICAgICB9CgogICAgICBpZiAoc2NvcGUuYW5pbWF0aW9uKSB7CiAgICAgICAgZWxlbWVudC5hZGRDbGFzcyhhdHRycy50b29sdGlwQW5pbWF0aW9uQ2xhc3MpOwogICAgICB9CiAgICB9CiAgfTsKfV0pCgouZGlyZWN0aXZlKCd1aWJUb29sdGlwUG9wdXAnLCBmdW5jdGlvbigpIHsKICByZXR1cm4gewogICAgcmVzdHJpY3Q6ICdBJywKICAgIHNjb3BlOiB7IGNvbnRlbnQ6ICdAJyB9LAogICAgdGVtcGxhdGVVcmw6ICd1aWIvdGVtcGxhdGUvdG9vbHRpcC90b29sdGlwLXBvcHVwLmh0bWwnCiAgfTsKfSkKCi5kaXJlY3RpdmUoJ3VpYlRvb2x0aXAnLCBbICckdWliVG9vbHRpcCcsIGZ1bmN0aW9uKCR1aWJUb29sdGlwKSB7CiAgcmV0dXJuICR1aWJUb29sdGlwKCd1aWJUb29sdGlwJywgJ3Rvb2x0aXAnLCAnbW91c2VlbnRlcicpOwp9XSkKCi5kaXJlY3RpdmUoJ3VpYlRvb2x0aXBUZW1wbGF0ZVBvcHVwJywgZnVuY3Rpb24oKSB7CiAgcmV0dXJuIHsKICAgIHJlc3RyaWN0OiAnQScsCiAgICBzY29wZTogeyBjb250ZW50RXhwOiAnJicsIG9yaWdpblNjb3BlOiAnJicgfSwKICAgIHRlbXBsYXRlVXJsOiAndWliL3RlbXBsYXRlL3Rvb2x0aXAvdG9vbHRpcC10ZW1wbGF0ZS1wb3B1cC5odG1sJwogIH07Cn0pCgouZGlyZWN0aXZlKCd1aWJUb29sdGlwVGVtcGxhdGUnLCBbJyR1aWJUb29sdGlwJywgZnVuY3Rpb24oJHVpYlRvb2x0aXApIHsKICByZXR1cm4gJHVpYlRvb2x0aXAoJ3VpYlRvb2x0aXBUZW1wbGF0ZScsICd0b29sdGlwJywgJ21vdXNlZW50ZXInLCB7CiAgICB1c2VDb250ZW50RXhwOiB0cnVlCiAgfSk7Cn1dKQoKLmRpcmVjdGl2ZSgndWliVG9vbHRpcEh0bWxQb3B1cCcsIGZ1bmN0aW9uKCkgewogIHJldHVybiB7CiAgICByZXN0cmljdDogJ0EnLAogICAgc2NvcGU6IHsgY29udGVudEV4cDogJyYnIH0sCiAgICB0ZW1wbGF0ZVVybDogJ3VpYi90ZW1wbGF0ZS90b29sdGlwL3Rvb2x0aXAtaHRtbC1wb3B1cC5odG1sJwogIH07Cn0pCgouZGlyZWN0aXZlKCd1aWJUb29sdGlwSHRtbCcsIFsnJHVpYlRvb2x0aXAnLCBmdW5jdGlvbigkdWliVG9vbHRpcCkgewogIHJldHVybiAkdWliVG9vbHRpcCgndWliVG9vbHRpcEh0bWwnLCAndG9vbHRpcCcsICdtb3VzZWVudGVyJywgewogICAgdXNlQ29udGVudEV4cDogdHJ1ZQogIH0pOwp9XSk7CgovKioKICogVGhlIGZvbGxvd2luZyBmZWF0dXJlcyBhcmUgc3RpbGwgb3V0c3RhbmRpbmc6IHBvcHVwIGRlbGF5LCBhbmltYXRpb24gYXMgYQogKiBmdW5jdGlvbiwgcGxhY2VtZW50IGFzIGEgZnVuY3Rpb24sIGluc2lkZSwgc3VwcG9ydCBmb3IgbW9yZSB0cmlnZ2VycyB0aGFuCiAqIGp1c3QgbW91c2UgZW50ZXIvbGVhdmUsIGFuZCBzZWxlY3RvciBkZWxlZ2F0YXRpb24uCiAqLwphbmd1bGFyLm1vZHVsZSgndWkuYm9vdHN0cmFwLnBvcG92ZXInLCBbJ3VpLmJvb3RzdHJhcC50b29sdGlwJ10pCgouZGlyZWN0aXZlKCd1aWJQb3BvdmVyVGVtcGxhdGVQb3B1cCcsIGZ1bmN0aW9uKCkgewogIHJldHVybiB7CiAgICByZXN0cmljdDogJ0EnLAogICAgc2NvcGU6IHsgdWliVGl0bGU6ICdAJywgY29udGVudEV4cDogJyYnLCBvcmlnaW5TY29wZTogJyYnIH0sCiAgICB0ZW1wbGF0ZVVybDogJ3VpYi90ZW1wbGF0ZS9wb3BvdmVyL3BvcG92ZXItdGVtcGxhdGUuaHRtbCcKICB9Owp9KQoKLmRpcmVjdGl2ZSgndWliUG9wb3ZlclRlbXBsYXRlJywgWyckdWliVG9vbHRpcCcsIGZ1bmN0aW9uKCR1aWJUb29sdGlwKSB7CiAgcmV0dXJuICR1aWJUb29sdGlwKCd1aWJQb3BvdmVyVGVtcGxhdGUnLCAncG9wb3ZlcicsICdjbGljaycsIHsKICAgIHVzZUNvbnRlbnRFeHA6IHRydWUKICB9KTsKfV0pCgouZGlyZWN0aXZlKCd1aWJQb3BvdmVySHRtbFBvcHVwJywgZnVuY3Rpb24oKSB7CiAgcmV0dXJuIHsKICAgIHJlc3RyaWN0OiAnQScsCiAgICBzY29wZTogeyBjb250ZW50RXhwOiAnJicsIHVpYlRpdGxlOiAnQCcgfSwKICAgIHRlbXBsYXRlVXJsOiAndWliL3RlbXBsYXRlL3BvcG92ZXIvcG9wb3Zlci1odG1sLmh0bWwnCiAgfTsKfSkKCi5kaXJlY3RpdmUoJ3VpYlBvcG92ZXJIdG1sJywgWyckdWliVG9vbHRpcCcsIGZ1bmN0aW9uKCR1aWJUb29sdGlwKSB7CiAgcmV0dXJuICR1aWJUb29sdGlwKCd1aWJQb3BvdmVySHRtbCcsICdwb3BvdmVyJywgJ2NsaWNrJywgewogICAgdXNlQ29udGVudEV4cDogdHJ1ZQogIH0pOwp9XSkKCi5kaXJlY3RpdmUoJ3VpYlBvcG92ZXJQb3B1cCcsIGZ1bmN0aW9uKCkgewogIHJldHVybiB7CiAgICByZXN0cmljdDogJ0EnLAogICAgc2NvcGU6IHsgdWliVGl0bGU6ICdAJywgY29udGVudDogJ0AnIH0sCiAgICB0ZW1wbGF0ZVVybDogJ3VpYi90ZW1wbGF0ZS9wb3BvdmVyL3BvcG92ZXIuaHRtbCcKICB9Owp9KQoKLmRpcmVjdGl2ZSgndWliUG9wb3ZlcicsIFsnJHVpYlRvb2x0aXAnLCBmdW5jdGlvbigkdWliVG9vbHRpcCkgewogIHJldHVybiAkdWliVG9vbHRpcCgndWliUG9wb3ZlcicsICdwb3BvdmVyJywgJ2NsaWNrJyk7Cn1dKTsKCmFuZ3VsYXIubW9kdWxlKCd1aS5ib290c3RyYXAucHJvZ3Jlc3NiYXInLCBbXSkKCi5jb25zdGFudCgndWliUHJvZ3Jlc3NDb25maWcnLCB7CiAgYW5pbWF0ZTogdHJ1ZSwKICBtYXg6IDEwMAp9KQoKLmNvbnRyb2xsZXIoJ1VpYlByb2dyZXNzQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRhdHRycycsICd1aWJQcm9ncmVzc0NvbmZpZycsIGZ1bmN0aW9uKCRzY29wZSwgJGF0dHJzLCBwcm9ncmVzc0NvbmZpZykgewogIHZhciBzZWxmID0gdGhpcywKICAgICAgYW5pbWF0ZSA9IGFuZ3VsYXIuaXNEZWZpbmVkKCRhdHRycy5hbmltYXRlKSA/ICRzY29wZS4kcGFyZW50LiRldmFsKCRhdHRycy5hbmltYXRlKSA6IHByb2dyZXNzQ29uZmlnLmFuaW1hdGU7CgogIHRoaXMuYmFycyA9IFtdOwogICRzY29wZS5tYXggPSBnZXRNYXhPckRlZmF1bHQoKTsKCiAgdGhpcy5hZGRCYXIgPSBmdW5jdGlvbihiYXIsIGVsZW1lbnQsIGF0dHJzKSB7CiAgICBpZiAoIWFuaW1hdGUpIHsKICAgICAgZWxlbWVudC5jc3Moeyd0cmFuc2l0aW9uJzogJ25vbmUnfSk7CiAgICB9CgogICAgdGhpcy5iYXJzLnB1c2goYmFyKTsKCiAgICBiYXIubWF4ID0gZ2V0TWF4T3JEZWZhdWx0KCk7CiAgICBiYXIudGl0bGUgPSBhdHRycyAmJiBhbmd1bGFyLmlzRGVmaW5lZChhdHRycy50aXRsZSkgPyBhdHRycy50aXRsZSA6ICdwcm9ncmVzc2Jhcic7CgogICAgYmFyLiR3YXRjaCgndmFsdWUnLCBmdW5jdGlvbih2YWx1ZSkgewogICAgICBiYXIucmVjYWxjdWxhdGVQZXJjZW50YWdlKCk7CiAgICB9KTsKCiAgICBiYXIucmVjYWxjdWxhdGVQZXJjZW50YWdlID0gZnVuY3Rpb24oKSB7CiAgICAgIHZhciB0b3RhbFBlcmNlbnRhZ2UgPSBzZWxmLmJhcnMucmVkdWNlKGZ1bmN0aW9uKHRvdGFsLCBiYXIpIHsKICAgICAgICBiYXIucGVyY2VudCA9ICsoMTAwICogYmFyLnZhbHVlIC8gYmFyLm1heCkudG9GaXhlZCgyKTsKICAgICAgICByZXR1cm4gdG90YWwgKyBiYXIucGVyY2VudDsKICAgICAgfSwgMCk7CgogICAgICBpZiAodG90YWxQZXJjZW50YWdlID4gMTAwKSB7CiAgICAgICAgYmFyLnBlcmNlbnQgLT0gdG90YWxQZXJjZW50YWdlIC0gMTAwOwogICAgICB9CiAgICB9OwoKICAgIGJhci4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7CiAgICAgIGVsZW1lbnQgPSBudWxsOwogICAgICBzZWxmLnJlbW92ZUJhcihiYXIpOwogICAgfSk7CiAgfTsKCiAgdGhpcy5yZW1vdmVCYXIgPSBmdW5jdGlvbihiYXIpIHsKICAgIHRoaXMuYmFycy5zcGxpY2UodGhpcy5iYXJzLmluZGV4T2YoYmFyKSwgMSk7CiAgICB0aGlzLmJhcnMuZm9yRWFjaChmdW5jdGlvbiAoYmFyKSB7CiAgICAgIGJhci5yZWNhbGN1bGF0ZVBlcmNlbnRhZ2UoKTsKICAgIH0pOwogIH07CgogIC8vJGF0dHJzLiRvYnNlcnZlKCdtYXhQYXJhbScsIGZ1bmN0aW9uKG1heFBhcmFtKSB7CiAgJHNjb3BlLiR3YXRjaCgnbWF4UGFyYW0nLCBmdW5jdGlvbihtYXhQYXJhbSkgewogICAgc2VsZi5iYXJzLmZvckVhY2goZnVuY3Rpb24oYmFyKSB7CiAgICAgIGJhci5tYXggPSBnZXRNYXhPckRlZmF1bHQoKTsKICAgICAgYmFyLnJlY2FsY3VsYXRlUGVyY2VudGFnZSgpOwogICAgfSk7CiAgfSk7CgogIGZ1bmN0aW9uIGdldE1heE9yRGVmYXVsdCAoKSB7CiAgICByZXR1cm4gYW5ndWxhci5pc0RlZmluZWQoJHNjb3BlLm1heFBhcmFtKSA/ICRzY29wZS5tYXhQYXJhbSA6IHByb2dyZXNzQ29uZmlnLm1heDsKICB9Cn1dKQoKLmRpcmVjdGl2ZSgndWliUHJvZ3Jlc3MnLCBmdW5jdGlvbigpIHsKICByZXR1cm4gewogICAgcmVwbGFjZTogdHJ1ZSwKICAgIHRyYW5zY2x1ZGU6IHRydWUsCiAgICBjb250cm9sbGVyOiAnVWliUHJvZ3Jlc3NDb250cm9sbGVyJywKICAgIHJlcXVpcmU6ICd1aWJQcm9ncmVzcycsCiAgICBzY29wZTogewogICAgICBtYXhQYXJhbTogJz0/bWF4JwogICAgfSwKICAgIHRlbXBsYXRlVXJsOiAndWliL3RlbXBsYXRlL3Byb2dyZXNzYmFyL3Byb2dyZXNzLmh0bWwnCiAgfTsKfSkKCi5kaXJlY3RpdmUoJ3VpYkJhcicsIGZ1bmN0aW9uKCkgewogIHJldHVybiB7CiAgICByZXBsYWNlOiB0cnVlLAogICAgdHJhbnNjbHVkZTogdHJ1ZSwKICAgIHJlcXVpcmU6ICdedWliUHJvZ3Jlc3MnLAogICAgc2NvcGU6IHsKICAgICAgdmFsdWU6ICc9JywKICAgICAgdHlwZTogJ0AnCiAgICB9LAogICAgdGVtcGxhdGVVcmw6ICd1aWIvdGVtcGxhdGUvcHJvZ3Jlc3NiYXIvYmFyLmh0bWwnLAogICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBwcm9ncmVzc0N0cmwpIHsKICAgICAgcHJvZ3Jlc3NDdHJsLmFkZEJhcihzY29wZSwgZWxlbWVudCwgYXR0cnMpOwogICAgfQogIH07Cn0pCgouZGlyZWN0aXZlKCd1aWJQcm9ncmVzc2JhcicsIGZ1bmN0aW9uKCkgewogIHJldHVybiB7CiAgICByZXBsYWNlOiB0cnVlLAogICAgdHJhbnNjbHVkZTogdHJ1ZSwKICAgIGNvbnRyb2xsZXI6ICdVaWJQcm9ncmVzc0NvbnRyb2xsZXInLAogICAgc2NvcGU6IHsKICAgICAgdmFsdWU6ICc9JywKICAgICAgbWF4UGFyYW06ICc9P21heCcsCiAgICAgIHR5cGU6ICdAJwogICAgfSwKICAgIHRlbXBsYXRlVXJsOiAndWliL3RlbXBsYXRlL3Byb2dyZXNzYmFyL3Byb2dyZXNzYmFyLmh0bWwnLAogICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBwcm9ncmVzc0N0cmwpIHsKICAgICAgcHJvZ3Jlc3NDdHJsLmFkZEJhcihzY29wZSwgYW5ndWxhci5lbGVtZW50KGVsZW1lbnQuY2hpbGRyZW4oKVswXSksIHt0aXRsZTogYXR0cnMudGl0bGV9KTsKICAgIH0KICB9Owp9KTsKCmFuZ3VsYXIubW9kdWxlKCd1aS5ib290c3RyYXAucmF0aW5nJywgW10pCgouY29uc3RhbnQoJ3VpYlJhdGluZ0NvbmZpZycsIHsKICBtYXg6IDUsCiAgc3RhdGVPbjogbnVsbCwKICBzdGF0ZU9mZjogbnVsbCwKICBlbmFibGVSZXNldDogdHJ1ZSwKICB0aXRsZXM6IFsnb25lJywgJ3R3bycsICd0aHJlZScsICdmb3VyJywgJ2ZpdmUnXQp9KQoKLmNvbnRyb2xsZXIoJ1VpYlJhdGluZ0NvbnRyb2xsZXInLCBbJyRzY29wZScsICckYXR0cnMnLCAndWliUmF0aW5nQ29uZmlnJywgZnVuY3Rpb24oJHNjb3BlLCAkYXR0cnMsIHJhdGluZ0NvbmZpZykgewogIHZhciBuZ01vZGVsQ3RybCA9IHsgJHNldFZpZXdWYWx1ZTogYW5ndWxhci5ub29wIH0sCiAgICBzZWxmID0gdGhpczsKCiAgdGhpcy5pbml0ID0gZnVuY3Rpb24obmdNb2RlbEN0cmxfKSB7CiAgICBuZ01vZGVsQ3RybCA9IG5nTW9kZWxDdHJsXzsKICAgIG5nTW9kZWxDdHJsLiRyZW5kZXIgPSB0aGlzLnJlbmRlcjsKCiAgICBuZ01vZGVsQ3RybC4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgIGlmIChhbmd1bGFyLmlzTnVtYmVyKHZhbHVlKSAmJiB2YWx1ZSA8PCAwICE9PSB2YWx1ZSkgewogICAgICAgIHZhbHVlID0gTWF0aC5yb3VuZCh2YWx1ZSk7CiAgICAgIH0KCiAgICAgIHJldHVybiB2YWx1ZTsKICAgIH0pOwoKICAgIHRoaXMuc3RhdGVPbiA9IGFuZ3VsYXIuaXNEZWZpbmVkKCRhdHRycy5zdGF0ZU9uKSA/ICRzY29wZS4kcGFyZW50LiRldmFsKCRhdHRycy5zdGF0ZU9uKSA6IHJhdGluZ0NvbmZpZy5zdGF0ZU9uOwogICAgdGhpcy5zdGF0ZU9mZiA9IGFuZ3VsYXIuaXNEZWZpbmVkKCRhdHRycy5zdGF0ZU9mZikgPyAkc2NvcGUuJHBhcmVudC4kZXZhbCgkYXR0cnMuc3RhdGVPZmYpIDogcmF0aW5nQ29uZmlnLnN0YXRlT2ZmOwogICAgdGhpcy5lbmFibGVSZXNldCA9IGFuZ3VsYXIuaXNEZWZpbmVkKCRhdHRycy5lbmFibGVSZXNldCkgPwogICAgICAkc2NvcGUuJHBhcmVudC4kZXZhbCgkYXR0cnMuZW5hYmxlUmVzZXQpIDogcmF0aW5nQ29uZmlnLmVuYWJsZVJlc2V0OwogICAgdmFyIHRtcFRpdGxlcyA9IGFuZ3VsYXIuaXNEZWZpbmVkKCRhdHRycy50aXRsZXMpID8gJHNjb3BlLiRwYXJlbnQuJGV2YWwoJGF0dHJzLnRpdGxlcykgOiByYXRpbmdDb25maWcudGl0bGVzOwogICAgdGhpcy50aXRsZXMgPSBhbmd1bGFyLmlzQXJyYXkodG1wVGl0bGVzKSAmJiB0bXBUaXRsZXMubGVuZ3RoID4gMCA/CiAgICAgIHRtcFRpdGxlcyA6IHJhdGluZ0NvbmZpZy50aXRsZXM7CgogICAgdmFyIHJhdGluZ1N0YXRlcyA9IGFuZ3VsYXIuaXNEZWZpbmVkKCRhdHRycy5yYXRpbmdTdGF0ZXMpID8KICAgICAgJHNjb3BlLiRwYXJlbnQuJGV2YWwoJGF0dHJzLnJhdGluZ1N0YXRlcykgOgogICAgICBuZXcgQXJyYXkoYW5ndWxhci5pc0RlZmluZWQoJGF0dHJzLm1heCkgPyAkc2NvcGUuJHBhcmVudC4kZXZhbCgkYXR0cnMubWF4KSA6IHJhdGluZ0NvbmZpZy5tYXgpOwogICAgJHNjb3BlLnJhbmdlID0gdGhpcy5idWlsZFRlbXBsYXRlT2JqZWN0cyhyYXRpbmdTdGF0ZXMpOwogIH07CgogIHRoaXMuYnVpbGRUZW1wbGF0ZU9iamVjdHMgPSBmdW5jdGlvbihzdGF0ZXMpIHsKICAgIGZvciAodmFyIGkgPSAwLCBuID0gc3RhdGVzLmxlbmd0aDsgaSA8IG47IGkrKykgewogICAgICBzdGF0ZXNbaV0gPSBhbmd1bGFyLmV4dGVuZCh7IGluZGV4OiBpIH0sIHsgc3RhdGVPbjogdGhpcy5zdGF0ZU9uLCBzdGF0ZU9mZjogdGhpcy5zdGF0ZU9mZiwgdGl0bGU6IHRoaXMuZ2V0VGl0bGUoaSkgfSwgc3RhdGVzW2ldKTsKICAgIH0KICAgIHJldHVybiBzdGF0ZXM7CiAgfTsKCiAgdGhpcy5nZXRUaXRsZSA9IGZ1bmN0aW9uKGluZGV4KSB7CiAgICBpZiAoaW5kZXggPj0gdGhpcy50aXRsZXMubGVuZ3RoKSB7CiAgICAgIHJldHVybiBpbmRleCArIDE7CiAgICB9CgogICAgcmV0dXJuIHRoaXMudGl0bGVzW2luZGV4XTsKICB9OwoKICAkc2NvcGUucmF0ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7CiAgICBpZiAoISRzY29wZS5yZWFkb25seSAmJiB2YWx1ZSA+PSAwICYmIHZhbHVlIDw9ICRzY29wZS5yYW5nZS5sZW5ndGgpIHsKICAgICAgdmFyIG5ld1ZpZXdWYWx1ZSA9IHNlbGYuZW5hYmxlUmVzZXQgJiYgbmdNb2RlbEN0cmwuJHZpZXdWYWx1ZSA9PT0gdmFsdWUgPyAwIDogdmFsdWU7CiAgICAgIG5nTW9kZWxDdHJsLiRzZXRWaWV3VmFsdWUobmV3Vmlld1ZhbHVlKTsKICAgICAgbmdNb2RlbEN0cmwuJHJlbmRlcigpOwogICAgfQogIH07CgogICRzY29wZS5lbnRlciA9IGZ1bmN0aW9uKHZhbHVlKSB7CiAgICBpZiAoISRzY29wZS5yZWFkb25seSkgewogICAgICAkc2NvcGUudmFsdWUgPSB2YWx1ZTsKICAgIH0KICAgICRzY29wZS5vbkhvdmVyKHt2YWx1ZTogdmFsdWV9KTsKICB9OwoKICAkc2NvcGUucmVzZXQgPSBmdW5jdGlvbigpIHsKICAgICRzY29wZS52YWx1ZSA9IG5nTW9kZWxDdHJsLiR2aWV3VmFsdWU7CiAgICAkc2NvcGUub25MZWF2ZSgpOwogIH07CgogICRzY29wZS5vbktleWRvd24gPSBmdW5jdGlvbihldnQpIHsKICAgIGlmICgvKDM3fDM4fDM5fDQwKS8udGVzdChldnQud2hpY2gpKSB7CiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICRzY29wZS5yYXRlKCRzY29wZS52YWx1ZSArIChldnQud2hpY2ggPT09IDM4IHx8IGV2dC53aGljaCA9PT0gMzkgPyAxIDogLTEpKTsKICAgIH0KICB9OwoKICB0aGlzLnJlbmRlciA9IGZ1bmN0aW9uKCkgewogICAgJHNjb3BlLnZhbHVlID0gbmdNb2RlbEN0cmwuJHZpZXdWYWx1ZTsKICAgICRzY29wZS50aXRsZSA9IHNlbGYuZ2V0VGl0bGUoJHNjb3BlLnZhbHVlIC0gMSk7CiAgfTsKfV0pCgouZGlyZWN0aXZlKCd1aWJSYXRpbmcnLCBmdW5jdGlvbigpIHsKICByZXR1cm4gewogICAgcmVxdWlyZTogWyd1aWJSYXRpbmcnLCAnbmdNb2RlbCddLAogICAgcmVzdHJpY3Q6ICdBJywKICAgIHNjb3BlOiB7CiAgICAgIHJlYWRvbmx5OiAnPT9yZWFkT25seScsCiAgICAgIG9uSG92ZXI6ICcmJywKICAgICAgb25MZWF2ZTogJyYnCiAgICB9LAogICAgY29udHJvbGxlcjogJ1VpYlJhdGluZ0NvbnRyb2xsZXInLAogICAgdGVtcGxhdGVVcmw6ICd1aWIvdGVtcGxhdGUvcmF0aW5nL3JhdGluZy5odG1sJywKICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY3RybHMpIHsKICAgICAgdmFyIHJhdGluZ0N0cmwgPSBjdHJsc1swXSwgbmdNb2RlbEN0cmwgPSBjdHJsc1sxXTsKICAgICAgcmF0aW5nQ3RybC5pbml0KG5nTW9kZWxDdHJsKTsKICAgIH0KICB9Owp9KTsKCmFuZ3VsYXIubW9kdWxlKCd1aS5ib290c3RyYXAudGFicycsIFtdKQoKLmNvbnRyb2xsZXIoJ1VpYlRhYnNldENvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uICgkc2NvcGUpIHsKICB2YXIgY3RybCA9IHRoaXMsCiAgICBvbGRJbmRleDsKICBjdHJsLnRhYnMgPSBbXTsKCiAgY3RybC5zZWxlY3QgPSBmdW5jdGlvbihpbmRleCwgZXZ0KSB7CiAgICBpZiAoIWRlc3Ryb3llZCkgewogICAgICB2YXIgcHJldmlvdXNJbmRleCA9IGZpbmRUYWJJbmRleChvbGRJbmRleCk7CiAgICAgIHZhciBwcmV2aW91c1NlbGVjdGVkID0gY3RybC50YWJzW3ByZXZpb3VzSW5kZXhdOwogICAgICBpZiAocHJldmlvdXNTZWxlY3RlZCkgewogICAgICAgIHByZXZpb3VzU2VsZWN0ZWQudGFiLm9uRGVzZWxlY3QoewogICAgICAgICAgJGV2ZW50OiBldnQsCiAgICAgICAgICAkc2VsZWN0ZWRJbmRleDogaW5kZXgKICAgICAgICB9KTsKICAgICAgICBpZiAoZXZ0ICYmIGV2dC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBwcmV2aW91c1NlbGVjdGVkLnRhYi5hY3RpdmUgPSBmYWxzZTsKICAgICAgfQoKICAgICAgdmFyIHNlbGVjdGVkID0gY3RybC50YWJzW2luZGV4XTsKICAgICAgaWYgKHNlbGVjdGVkKSB7CiAgICAgICAgc2VsZWN0ZWQudGFiLm9uU2VsZWN0KHsKICAgICAgICAgICRldmVudDogZXZ0CiAgICAgICAgfSk7CiAgICAgICAgc2VsZWN0ZWQudGFiLmFjdGl2ZSA9IHRydWU7CiAgICAgICAgY3RybC5hY3RpdmUgPSBzZWxlY3RlZC5pbmRleDsKICAgICAgICBvbGRJbmRleCA9IHNlbGVjdGVkLmluZGV4OwogICAgICB9IGVsc2UgaWYgKCFzZWxlY3RlZCAmJiBhbmd1bGFyLmlzRGVmaW5lZChvbGRJbmRleCkpIHsKICAgICAgICBjdHJsLmFjdGl2ZSA9IG51bGw7CiAgICAgICAgb2xkSW5kZXggPSBudWxsOwogICAgICB9CiAgICB9CiAgfTsKCiAgY3RybC5hZGRUYWIgPSBmdW5jdGlvbiBhZGRUYWIodGFiKSB7CiAgICBjdHJsLnRhYnMucHVzaCh7CiAgICAgIHRhYjogdGFiLAogICAgICBpbmRleDogdGFiLmluZGV4CiAgICB9KTsKICAgIGN0cmwudGFicy5zb3J0KGZ1bmN0aW9uKHQxLCB0MikgewogICAgICBpZiAodDEuaW5kZXggPiB0Mi5pbmRleCkgewogICAgICAgIHJldHVybiAxOwogICAgICB9CgogICAgICBpZiAodDEuaW5kZXggPCB0Mi5pbmRleCkgewogICAgICAgIHJldHVybiAtMTsKICAgICAgfQoKICAgICAgcmV0dXJuIDA7CiAgICB9KTsKCiAgICBpZiAodGFiLmluZGV4ID09PSBjdHJsLmFjdGl2ZSB8fCAhYW5ndWxhci5pc0RlZmluZWQoY3RybC5hY3RpdmUpICYmIGN0cmwudGFicy5sZW5ndGggPT09IDEpIHsKICAgICAgdmFyIG5ld0FjdGl2ZUluZGV4ID0gZmluZFRhYkluZGV4KHRhYi5pbmRleCk7CiAgICAgIGN0cmwuc2VsZWN0KG5ld0FjdGl2ZUluZGV4KTsKICAgIH0KICB9OwoKICBjdHJsLnJlbW92ZVRhYiA9IGZ1bmN0aW9uIHJlbW92ZVRhYih0YWIpIHsKICAgIHZhciBpbmRleDsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY3RybC50YWJzLmxlbmd0aDsgaSsrKSB7CiAgICAgIGlmIChjdHJsLnRhYnNbaV0udGFiID09PSB0YWIpIHsKICAgICAgICBpbmRleCA9IGk7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoY3RybC50YWJzW2luZGV4XS5pbmRleCA9PT0gY3RybC5hY3RpdmUpIHsKICAgICAgdmFyIG5ld0FjdGl2ZVRhYkluZGV4ID0gaW5kZXggPT09IGN0cmwudGFicy5sZW5ndGggLSAxID8KICAgICAgICBpbmRleCAtIDEgOiBpbmRleCArIDEgJSBjdHJsLnRhYnMubGVuZ3RoOwogICAgICBjdHJsLnNlbGVjdChuZXdBY3RpdmVUYWJJbmRleCk7CiAgICB9CgogICAgY3RybC50YWJzLnNwbGljZShpbmRleCwgMSk7CiAgfTsKCiAgJHNjb3BlLiR3YXRjaCgndGFic2V0LmFjdGl2ZScsIGZ1bmN0aW9uKHZhbCkgewogICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbCkgJiYgdmFsICE9PSBvbGRJbmRleCkgewogICAgICBjdHJsLnNlbGVjdChmaW5kVGFiSW5kZXgodmFsKSk7CiAgICB9CiAgfSk7CgogIHZhciBkZXN0cm95ZWQ7CiAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHsKICAgIGRlc3Ryb3llZCA9IHRydWU7CiAgfSk7CgogIGZ1bmN0aW9uIGZpbmRUYWJJbmRleChpbmRleCkgewogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjdHJsLnRhYnMubGVuZ3RoOyBpKyspIHsKICAgICAgaWYgKGN0cmwudGFic1tpXS5pbmRleCA9PT0gaW5kZXgpIHsKICAgICAgICByZXR1cm4gaTsKICAgICAgfQogICAgfQogIH0KfV0pCgouZGlyZWN0aXZlKCd1aWJUYWJzZXQnLCBmdW5jdGlvbigpIHsKICByZXR1cm4gewogICAgdHJhbnNjbHVkZTogdHJ1ZSwKICAgIHJlcGxhY2U6IHRydWUsCiAgICBzY29wZToge30sCiAgICBiaW5kVG9Db250cm9sbGVyOiB7CiAgICAgIGFjdGl2ZTogJz0/JywKICAgICAgdHlwZTogJ0AnCiAgICB9LAogICAgY29udHJvbGxlcjogJ1VpYlRhYnNldENvbnRyb2xsZXInLAogICAgY29udHJvbGxlckFzOiAndGFic2V0JywKICAgIHRlbXBsYXRlVXJsOiBmdW5jdGlvbihlbGVtZW50LCBhdHRycykgewogICAgICByZXR1cm4gYXR0cnMudGVtcGxhdGVVcmwgfHwgJ3VpYi90ZW1wbGF0ZS90YWJzL3RhYnNldC5odG1sJzsKICAgIH0sCiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpIHsKICAgICAgc2NvcGUudmVydGljYWwgPSBhbmd1bGFyLmlzRGVmaW5lZChhdHRycy52ZXJ0aWNhbCkgPwogICAgICAgIHNjb3BlLiRwYXJlbnQuJGV2YWwoYXR0cnMudmVydGljYWwpIDogZmFsc2U7CiAgICAgIHNjb3BlLmp1c3RpZmllZCA9IGFuZ3VsYXIuaXNEZWZpbmVkKGF0dHJzLmp1c3RpZmllZCkgPwogICAgICAgIHNjb3BlLiRwYXJlbnQuJGV2YWwoYXR0cnMuanVzdGlmaWVkKSA6IGZhbHNlOwogICAgfQogIH07Cn0pCgouZGlyZWN0aXZlKCd1aWJUYWInLCBbJyRwYXJzZScsIGZ1bmN0aW9uKCRwYXJzZSkgewogIHJldHVybiB7CiAgICByZXF1aXJlOiAnXnVpYlRhYnNldCcsCiAgICByZXBsYWNlOiB0cnVlLAogICAgdGVtcGxhdGVVcmw6IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHJzKSB7CiAgICAgIHJldHVybiBhdHRycy50ZW1wbGF0ZVVybCB8fCAndWliL3RlbXBsYXRlL3RhYnMvdGFiLmh0bWwnOwogICAgfSwKICAgIHRyYW5zY2x1ZGU6IHRydWUsCiAgICBzY29wZTogewogICAgICBoZWFkaW5nOiAnQCcsCiAgICAgIGluZGV4OiAnPT8nLAogICAgICBjbGFzc2VzOiAnQD8nLAogICAgICBvblNlbGVjdDogJyZzZWxlY3QnLCAvL1RoaXMgY2FsbGJhY2sgaXMgY2FsbGVkIGluIGNvbnRlbnRIZWFkaW5nVHJhbnNjbHVkZQogICAgICAgICAgICAgICAgICAgICAgICAgIC8vb25jZSBpdCBpbnNlcnRzIHRoZSB0YWIncyBjb250ZW50IGludG8gdGhlIGRvbQogICAgICBvbkRlc2VsZWN0OiAnJmRlc2VsZWN0JwogICAgfSwKICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCkgewogICAgICAvL0VtcHR5IGNvbnRyb2xsZXIgc28gb3RoZXIgZGlyZWN0aXZlcyBjYW4gcmVxdWlyZSBiZWluZyAndW5kZXInIGEgdGFiCiAgICB9LAogICAgY29udHJvbGxlckFzOiAndGFiJywKICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbG0sIGF0dHJzLCB0YWJzZXRDdHJsLCB0cmFuc2NsdWRlKSB7CiAgICAgIHNjb3BlLmRpc2FibGVkID0gZmFsc2U7CiAgICAgIGlmIChhdHRycy5kaXNhYmxlKSB7CiAgICAgICAgc2NvcGUuJHBhcmVudC4kd2F0Y2goJHBhcnNlKGF0dHJzLmRpc2FibGUpLCBmdW5jdGlvbih2YWx1ZSkgewogICAgICAgICAgc2NvcGUuZGlzYWJsZWQgPSAhISB2YWx1ZTsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQoYXR0cnMuaW5kZXgpKSB7CiAgICAgICAgaWYgKHRhYnNldEN0cmwudGFicyAmJiB0YWJzZXRDdHJsLnRhYnMubGVuZ3RoKSB7CiAgICAgICAgICBzY29wZS5pbmRleCA9IE1hdGgubWF4LmFwcGx5KG51bGwsIHRhYnNldEN0cmwudGFicy5tYXAoZnVuY3Rpb24odCkgeyByZXR1cm4gdC5pbmRleDsgfSkpICsgMTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc2NvcGUuaW5kZXggPSAwOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQoYXR0cnMuY2xhc3NlcykpIHsKICAgICAgICBzY29wZS5jbGFzc2VzID0gJyc7CiAgICAgIH0KCiAgICAgIHNjb3BlLnNlbGVjdCA9IGZ1bmN0aW9uKGV2dCkgewogICAgICAgIGlmICghc2NvcGUuZGlzYWJsZWQpIHsKICAgICAgICAgIHZhciBpbmRleDsKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGFic2V0Q3RybC50YWJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmICh0YWJzZXRDdHJsLnRhYnNbaV0udGFiID09PSBzY29wZSkgewogICAgICAgICAgICAgIGluZGV4ID0gaTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHRhYnNldEN0cmwuc2VsZWN0KGluZGV4LCBldnQpOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIHRhYnNldEN0cmwuYWRkVGFiKHNjb3BlKTsKICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkgewogICAgICAgIHRhYnNldEN0cmwucmVtb3ZlVGFiKHNjb3BlKTsKICAgICAgfSk7CgogICAgICAvL1dlIG5lZWQgdG8gdHJhbnNjbHVkZSBsYXRlciwgb25jZSB0aGUgY29udGVudCBjb250YWluZXIgaXMgcmVhZHkuCiAgICAgIC8vd2hlbiB0aGlzIGxpbmsgaGFwcGVucywgd2UncmUgaW5zaWRlIGEgdGFiIGhlYWRpbmcuCiAgICAgIHNjb3BlLiR0cmFuc2NsdWRlRm4gPSB0cmFuc2NsdWRlOwogICAgfQogIH07Cn1dKQoKLmRpcmVjdGl2ZSgndWliVGFiSGVhZGluZ1RyYW5zY2x1ZGUnLCBmdW5jdGlvbigpIHsKICByZXR1cm4gewogICAgcmVzdHJpY3Q6ICdBJywKICAgIHJlcXVpcmU6ICdedWliVGFiJywKICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbG0pIHsKICAgICAgc2NvcGUuJHdhdGNoKCdoZWFkaW5nRWxlbWVudCcsIGZ1bmN0aW9uIHVwZGF0ZUhlYWRpbmdFbGVtZW50KGhlYWRpbmcpIHsKICAgICAgICBpZiAoaGVhZGluZykgewogICAgICAgICAgZWxtLmh0bWwoJycpOwogICAgICAgICAgZWxtLmFwcGVuZChoZWFkaW5nKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH07Cn0pCgouZGlyZWN0aXZlKCd1aWJUYWJDb250ZW50VHJhbnNjbHVkZScsIGZ1bmN0aW9uKCkgewogIHJldHVybiB7CiAgICByZXN0cmljdDogJ0EnLAogICAgcmVxdWlyZTogJ151aWJUYWJzZXQnLAogICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsbSwgYXR0cnMpIHsKICAgICAgdmFyIHRhYiA9IHNjb3BlLiRldmFsKGF0dHJzLnVpYlRhYkNvbnRlbnRUcmFuc2NsdWRlKS50YWI7CgogICAgICAvL05vdyBvdXIgdGFiIGlzIHJlYWR5IHRvIGJlIHRyYW5zY2x1ZGVkOiBib3RoIHRoZSB0YWIgaGVhZGluZyBhcmVhCiAgICAgIC8vYW5kIHRoZSB0YWIgY29udGVudCBhcmVhIGFyZSBsb2FkZWQuICBUcmFuc2NsdWRlICdlbSBib3RoLgogICAgICB0YWIuJHRyYW5zY2x1ZGVGbih0YWIuJHBhcmVudCwgZnVuY3Rpb24oY29udGVudHMpIHsKICAgICAgICBhbmd1bGFyLmZvckVhY2goY29udGVudHMsIGZ1bmN0aW9uKG5vZGUpIHsKICAgICAgICAgIGlmIChpc1RhYkhlYWRpbmcobm9kZSkpIHsKICAgICAgICAgICAgLy9MZXQgdGFiSGVhZGluZ1RyYW5zY2x1ZGUga25vdy4KICAgICAgICAgICAgdGFiLmhlYWRpbmdFbGVtZW50ID0gbm9kZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGVsbS5hcHBlbmQobm9kZSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH07CgogIGZ1bmN0aW9uIGlzVGFiSGVhZGluZyhub2RlKSB7CiAgICByZXR1cm4gbm9kZS50YWdOYW1lICYmICgKICAgICAgbm9kZS5oYXNBdHRyaWJ1dGUoJ3VpYi10YWItaGVhZGluZycpIHx8CiAgICAgIG5vZGUuaGFzQXR0cmlidXRlKCdkYXRhLXVpYi10YWItaGVhZGluZycpIHx8CiAgICAgIG5vZGUuaGFzQXR0cmlidXRlKCd4LXVpYi10YWItaGVhZGluZycpIHx8CiAgICAgIG5vZGUudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAndWliLXRhYi1oZWFkaW5nJyB8fAogICAgICBub2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2RhdGEtdWliLXRhYi1oZWFkaW5nJyB8fAogICAgICBub2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3gtdWliLXRhYi1oZWFkaW5nJyB8fAogICAgICBub2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3VpYjp0YWItaGVhZGluZycKICAgICk7CiAgfQp9KTsKCmFuZ3VsYXIubW9kdWxlKCd1aS5ib290c3RyYXAudGltZXBpY2tlcicsIFtdKQoKLmNvbnN0YW50KCd1aWJUaW1lcGlja2VyQ29uZmlnJywgewogIGhvdXJTdGVwOiAxLAogIG1pbnV0ZVN0ZXA6IDEsCiAgc2Vjb25kU3RlcDogMSwKICBzaG93TWVyaWRpYW46IHRydWUsCiAgc2hvd1NlY29uZHM6IGZhbHNlLAogIG1lcmlkaWFuczogbnVsbCwKICByZWFkb25seUlucHV0OiBmYWxzZSwKICBtb3VzZXdoZWVsOiB0cnVlLAogIGFycm93a2V5czogdHJ1ZSwKICBzaG93U3Bpbm5lcnM6IHRydWUsCiAgdGVtcGxhdGVVcmw6ICd1aWIvdGVtcGxhdGUvdGltZXBpY2tlci90aW1lcGlja2VyLmh0bWwnCn0pCgouY29udHJvbGxlcignVWliVGltZXBpY2tlckNvbnRyb2xsZXInLCBbJyRzY29wZScsICckZWxlbWVudCcsICckYXR0cnMnLCAnJHBhcnNlJywgJyRsb2cnLCAnJGxvY2FsZScsICd1aWJUaW1lcGlja2VyQ29uZmlnJywgZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzLCAkcGFyc2UsICRsb2csICRsb2NhbGUsIHRpbWVwaWNrZXJDb25maWcpIHsKICB2YXIgc2VsZWN0ZWQgPSBuZXcgRGF0ZSgpLAogICAgd2F0Y2hlcnMgPSBbXSwKICAgIG5nTW9kZWxDdHJsID0geyAkc2V0Vmlld1ZhbHVlOiBhbmd1bGFyLm5vb3AgfSwgLy8gbnVsbE1vZGVsQ3RybAogICAgbWVyaWRpYW5zID0gYW5ndWxhci5pc0RlZmluZWQoJGF0dHJzLm1lcmlkaWFucykgPyAkc2NvcGUuJHBhcmVudC4kZXZhbCgkYXR0cnMubWVyaWRpYW5zKSA6IHRpbWVwaWNrZXJDb25maWcubWVyaWRpYW5zIHx8ICRsb2NhbGUuREFURVRJTUVfRk9STUFUUy5BTVBNUywKICAgIHBhZEhvdXJzID0gYW5ndWxhci5pc0RlZmluZWQoJGF0dHJzLnBhZEhvdXJzKSA/ICRzY29wZS4kcGFyZW50LiRldmFsKCRhdHRycy5wYWRIb3VycykgOiB0cnVlOwoKICAkc2NvcGUudGFiaW5kZXggPSBhbmd1bGFyLmlzRGVmaW5lZCgkYXR0cnMudGFiaW5kZXgpID8gJGF0dHJzLnRhYmluZGV4IDogMDsKICAkZWxlbWVudC5yZW1vdmVBdHRyKCd0YWJpbmRleCcpOwoKICB0aGlzLmluaXQgPSBmdW5jdGlvbihuZ01vZGVsQ3RybF8sIGlucHV0cykgewogICAgbmdNb2RlbEN0cmwgPSBuZ01vZGVsQ3RybF87CiAgICBuZ01vZGVsQ3RybC4kcmVuZGVyID0gdGhpcy5yZW5kZXI7CgogICAgbmdNb2RlbEN0cmwuJGZvcm1hdHRlcnMudW5zaGlmdChmdW5jdGlvbihtb2RlbFZhbHVlKSB7CiAgICAgIHJldHVybiBtb2RlbFZhbHVlID8gbmV3IERhdGUobW9kZWxWYWx1ZSkgOiBudWxsOwogICAgfSk7CgogICAgdmFyIGhvdXJzSW5wdXRFbCA9IGlucHV0cy5lcSgwKSwKICAgICAgICBtaW51dGVzSW5wdXRFbCA9IGlucHV0cy5lcSgxKSwKICAgICAgICBzZWNvbmRzSW5wdXRFbCA9IGlucHV0cy5lcSgyKTsKCiAgICB2YXIgbW91c2V3aGVlbCA9IGFuZ3VsYXIuaXNEZWZpbmVkKCRhdHRycy5tb3VzZXdoZWVsKSA/ICRzY29wZS4kcGFyZW50LiRldmFsKCRhdHRycy5tb3VzZXdoZWVsKSA6IHRpbWVwaWNrZXJDb25maWcubW91c2V3aGVlbDsKCiAgICBpZiAobW91c2V3aGVlbCkgewogICAgICB0aGlzLnNldHVwTW91c2V3aGVlbEV2ZW50cyhob3Vyc0lucHV0RWwsIG1pbnV0ZXNJbnB1dEVsLCBzZWNvbmRzSW5wdXRFbCk7CiAgICB9CgogICAgdmFyIGFycm93a2V5cyA9IGFuZ3VsYXIuaXNEZWZpbmVkKCRhdHRycy5hcnJvd2tleXMpID8gJHNjb3BlLiRwYXJlbnQuJGV2YWwoJGF0dHJzLmFycm93a2V5cykgOiB0aW1lcGlja2VyQ29uZmlnLmFycm93a2V5czsKICAgIGlmIChhcnJvd2tleXMpIHsKICAgICAgdGhpcy5zZXR1cEFycm93a2V5RXZlbnRzKGhvdXJzSW5wdXRFbCwgbWludXRlc0lucHV0RWwsIHNlY29uZHNJbnB1dEVsKTsKICAgIH0KCiAgICAkc2NvcGUucmVhZG9ubHlJbnB1dCA9IGFuZ3VsYXIuaXNEZWZpbmVkKCRhdHRycy5yZWFkb25seUlucHV0KSA/ICRzY29wZS4kcGFyZW50LiRldmFsKCRhdHRycy5yZWFkb25seUlucHV0KSA6IHRpbWVwaWNrZXJDb25maWcucmVhZG9ubHlJbnB1dDsKICAgIHRoaXMuc2V0dXBJbnB1dEV2ZW50cyhob3Vyc0lucHV0RWwsIG1pbnV0ZXNJbnB1dEVsLCBzZWNvbmRzSW5wdXRFbCk7CiAgfTsKCiAgdmFyIGhvdXJTdGVwID0gdGltZXBpY2tlckNvbmZpZy5ob3VyU3RlcDsKICBpZiAoJGF0dHJzLmhvdXJTdGVwKSB7CiAgICB3YXRjaGVycy5wdXNoKCRzY29wZS4kcGFyZW50LiR3YXRjaCgkcGFyc2UoJGF0dHJzLmhvdXJTdGVwKSwgZnVuY3Rpb24odmFsdWUpIHsKICAgICAgaG91clN0ZXAgPSArdmFsdWU7CiAgICB9KSk7CiAgfQoKICB2YXIgbWludXRlU3RlcCA9IHRpbWVwaWNrZXJDb25maWcubWludXRlU3RlcDsKICBpZiAoJGF0dHJzLm1pbnV0ZVN0ZXApIHsKICAgIHdhdGNoZXJzLnB1c2goJHNjb3BlLiRwYXJlbnQuJHdhdGNoKCRwYXJzZSgkYXR0cnMubWludXRlU3RlcCksIGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgIG1pbnV0ZVN0ZXAgPSArdmFsdWU7CiAgICB9KSk7CiAgfQoKICB2YXIgbWluOwogIHdhdGNoZXJzLnB1c2goJHNjb3BlLiRwYXJlbnQuJHdhdGNoKCRwYXJzZSgkYXR0cnMubWluKSwgZnVuY3Rpb24odmFsdWUpIHsKICAgIHZhciBkdCA9IG5ldyBEYXRlKHZhbHVlKTsKICAgIG1pbiA9IGlzTmFOKGR0KSA/IHVuZGVmaW5lZCA6IGR0OwogIH0pKTsKCiAgdmFyIG1heDsKICB3YXRjaGVycy5wdXNoKCRzY29wZS4kcGFyZW50LiR3YXRjaCgkcGFyc2UoJGF0dHJzLm1heCksIGZ1bmN0aW9uKHZhbHVlKSB7CiAgICB2YXIgZHQgPSBuZXcgRGF0ZSh2YWx1ZSk7CiAgICBtYXggPSBpc05hTihkdCkgPyB1bmRlZmluZWQgOiBkdDsKICB9KSk7CgogIHZhciBkaXNhYmxlZCA9IGZhbHNlOwogIGlmICgkYXR0cnMubmdEaXNhYmxlZCkgewogICAgd2F0Y2hlcnMucHVzaCgkc2NvcGUuJHBhcmVudC4kd2F0Y2goJHBhcnNlKCRhdHRycy5uZ0Rpc2FibGVkKSwgZnVuY3Rpb24odmFsdWUpIHsKICAgICAgZGlzYWJsZWQgPSB2YWx1ZTsKICAgIH0pKTsKICB9CgogICRzY29wZS5ub0luY3JlbWVudEhvdXJzID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgaW5jcmVtZW50ZWRTZWxlY3RlZCA9IGFkZE1pbnV0ZXMoc2VsZWN0ZWQsIGhvdXJTdGVwICogNjApOwogICAgcmV0dXJuIGRpc2FibGVkIHx8IGluY3JlbWVudGVkU2VsZWN0ZWQgPiBtYXggfHwKICAgICAgaW5jcmVtZW50ZWRTZWxlY3RlZCA8IHNlbGVjdGVkICYmIGluY3JlbWVudGVkU2VsZWN0ZWQgPCBtaW47CiAgfTsKCiAgJHNjb3BlLm5vRGVjcmVtZW50SG91cnMgPSBmdW5jdGlvbigpIHsKICAgIHZhciBkZWNyZW1lbnRlZFNlbGVjdGVkID0gYWRkTWludXRlcyhzZWxlY3RlZCwgLWhvdXJTdGVwICogNjApOwogICAgcmV0dXJuIGRpc2FibGVkIHx8IGRlY3JlbWVudGVkU2VsZWN0ZWQgPCBtaW4gfHwKICAgICAgZGVjcmVtZW50ZWRTZWxlY3RlZCA+IHNlbGVjdGVkICYmIGRlY3JlbWVudGVkU2VsZWN0ZWQgPiBtYXg7CiAgfTsKCiAgJHNjb3BlLm5vSW5jcmVtZW50TWludXRlcyA9IGZ1bmN0aW9uKCkgewogICAgdmFyIGluY3JlbWVudGVkU2VsZWN0ZWQgPSBhZGRNaW51dGVzKHNlbGVjdGVkLCBtaW51dGVTdGVwKTsKICAgIHJldHVybiBkaXNhYmxlZCB8fCBpbmNyZW1lbnRlZFNlbGVjdGVkID4gbWF4IHx8CiAgICAgIGluY3JlbWVudGVkU2VsZWN0ZWQgPCBzZWxlY3RlZCAmJiBpbmNyZW1lbnRlZFNlbGVjdGVkIDwgbWluOwogIH07CgogICRzY29wZS5ub0RlY3JlbWVudE1pbnV0ZXMgPSBmdW5jdGlvbigpIHsKICAgIHZhciBkZWNyZW1lbnRlZFNlbGVjdGVkID0gYWRkTWludXRlcyhzZWxlY3RlZCwgLW1pbnV0ZVN0ZXApOwogICAgcmV0dXJuIGRpc2FibGVkIHx8IGRlY3JlbWVudGVkU2VsZWN0ZWQgPCBtaW4gfHwKICAgICAgZGVjcmVtZW50ZWRTZWxlY3RlZCA+IHNlbGVjdGVkICYmIGRlY3JlbWVudGVkU2VsZWN0ZWQgPiBtYXg7CiAgfTsKCiAgJHNjb3BlLm5vSW5jcmVtZW50U2Vjb25kcyA9IGZ1bmN0aW9uKCkgewogICAgdmFyIGluY3JlbWVudGVkU2VsZWN0ZWQgPSBhZGRTZWNvbmRzKHNlbGVjdGVkLCBzZWNvbmRTdGVwKTsKICAgIHJldHVybiBkaXNhYmxlZCB8fCBpbmNyZW1lbnRlZFNlbGVjdGVkID4gbWF4IHx8CiAgICAgIGluY3JlbWVudGVkU2VsZWN0ZWQgPCBzZWxlY3RlZCAmJiBpbmNyZW1lbnRlZFNlbGVjdGVkIDwgbWluOwogIH07CgogICRzY29wZS5ub0RlY3JlbWVudFNlY29uZHMgPSBmdW5jdGlvbigpIHsKICAgIHZhciBkZWNyZW1lbnRlZFNlbGVjdGVkID0gYWRkU2Vjb25kcyhzZWxlY3RlZCwgLXNlY29uZFN0ZXApOwogICAgcmV0dXJuIGRpc2FibGVkIHx8IGRlY3JlbWVudGVkU2VsZWN0ZWQgPCBtaW4gfHwKICAgICAgZGVjcmVtZW50ZWRTZWxlY3RlZCA+IHNlbGVjdGVkICYmIGRlY3JlbWVudGVkU2VsZWN0ZWQgPiBtYXg7CiAgfTsKCiAgJHNjb3BlLm5vVG9nZ2xlTWVyaWRpYW4gPSBmdW5jdGlvbigpIHsKICAgIGlmIChzZWxlY3RlZC5nZXRIb3VycygpIDwgMTIpIHsKICAgICAgcmV0dXJuIGRpc2FibGVkIHx8IGFkZE1pbnV0ZXMoc2VsZWN0ZWQsIDEyICogNjApID4gbWF4OwogICAgfQoKICAgIHJldHVybiBkaXNhYmxlZCB8fCBhZGRNaW51dGVzKHNlbGVjdGVkLCAtMTIgKiA2MCkgPCBtaW47CiAgfTsKCiAgdmFyIHNlY29uZFN0ZXAgPSB0aW1lcGlja2VyQ29uZmlnLnNlY29uZFN0ZXA7CiAgaWYgKCRhdHRycy5zZWNvbmRTdGVwKSB7CiAgICB3YXRjaGVycy5wdXNoKCRzY29wZS4kcGFyZW50LiR3YXRjaCgkcGFyc2UoJGF0dHJzLnNlY29uZFN0ZXApLCBmdW5jdGlvbih2YWx1ZSkgewogICAgICBzZWNvbmRTdGVwID0gK3ZhbHVlOwogICAgfSkpOwogIH0KCiAgJHNjb3BlLnNob3dTZWNvbmRzID0gdGltZXBpY2tlckNvbmZpZy5zaG93U2Vjb25kczsKICBpZiAoJGF0dHJzLnNob3dTZWNvbmRzKSB7CiAgICB3YXRjaGVycy5wdXNoKCRzY29wZS4kcGFyZW50LiR3YXRjaCgkcGFyc2UoJGF0dHJzLnNob3dTZWNvbmRzKSwgZnVuY3Rpb24odmFsdWUpIHsKICAgICAgJHNjb3BlLnNob3dTZWNvbmRzID0gISF2YWx1ZTsKICAgIH0pKTsKICB9CgogIC8vIDEySCAvIDI0SCBtb2RlCiAgJHNjb3BlLnNob3dNZXJpZGlhbiA9IHRpbWVwaWNrZXJDb25maWcuc2hvd01lcmlkaWFuOwogIGlmICgkYXR0cnMuc2hvd01lcmlkaWFuKSB7CiAgICB3YXRjaGVycy5wdXNoKCRzY29wZS4kcGFyZW50LiR3YXRjaCgkcGFyc2UoJGF0dHJzLnNob3dNZXJpZGlhbiksIGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgICRzY29wZS5zaG93TWVyaWRpYW4gPSAhIXZhbHVlOwoKICAgICAgaWYgKG5nTW9kZWxDdHJsLiRlcnJvci50aW1lKSB7CiAgICAgICAgLy8gRXZhbHVhdGUgZnJvbSB0ZW1wbGF0ZQogICAgICAgIHZhciBob3VycyA9IGdldEhvdXJzRnJvbVRlbXBsYXRlKCksIG1pbnV0ZXMgPSBnZXRNaW51dGVzRnJvbVRlbXBsYXRlKCk7CiAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKGhvdXJzKSAmJiBhbmd1bGFyLmlzRGVmaW5lZChtaW51dGVzKSkgewogICAgICAgICAgc2VsZWN0ZWQuc2V0SG91cnMoaG91cnMpOwogICAgICAgICAgcmVmcmVzaCgpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB1cGRhdGVUZW1wbGF0ZSgpOwogICAgICB9CiAgICB9KSk7CiAgfQoKICAvLyBHZXQgJHNjb3BlLmhvdXJzIGluIDI0SCBtb2RlIGlmIHZhbGlkCiAgZnVuY3Rpb24gZ2V0SG91cnNGcm9tVGVtcGxhdGUoKSB7CiAgICB2YXIgaG91cnMgPSArJHNjb3BlLmhvdXJzOwogICAgdmFyIHZhbGlkID0gJHNjb3BlLnNob3dNZXJpZGlhbiA/IGhvdXJzID4gMCAmJiBob3VycyA8IDEzIDoKICAgICAgaG91cnMgPj0gMCAmJiBob3VycyA8IDI0OwogICAgaWYgKCF2YWxpZCB8fCAkc2NvcGUuaG91cnMgPT09ICcnKSB7CiAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKCRzY29wZS5zaG93TWVyaWRpYW4pIHsKICAgICAgaWYgKGhvdXJzID09PSAxMikgewogICAgICAgIGhvdXJzID0gMDsKICAgICAgfQogICAgICBpZiAoJHNjb3BlLm1lcmlkaWFuID09PSBtZXJpZGlhbnNbMV0pIHsKICAgICAgICBob3VycyA9IGhvdXJzICsgMTI7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBob3VyczsKICB9CgogIGZ1bmN0aW9uIGdldE1pbnV0ZXNGcm9tVGVtcGxhdGUoKSB7CiAgICB2YXIgbWludXRlcyA9ICskc2NvcGUubWludXRlczsKICAgIHZhciB2YWxpZCA9IG1pbnV0ZXMgPj0gMCAmJiBtaW51dGVzIDwgNjA7CiAgICBpZiAoIXZhbGlkIHx8ICRzY29wZS5taW51dGVzID09PSAnJykgewogICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgfQogICAgcmV0dXJuIG1pbnV0ZXM7CiAgfQoKICBmdW5jdGlvbiBnZXRTZWNvbmRzRnJvbVRlbXBsYXRlKCkgewogICAgdmFyIHNlY29uZHMgPSArJHNjb3BlLnNlY29uZHM7CiAgICByZXR1cm4gc2Vjb25kcyA+PSAwICYmIHNlY29uZHMgPCA2MCA/IHNlY29uZHMgOiB1bmRlZmluZWQ7CiAgfQoKICBmdW5jdGlvbiBwYWQodmFsdWUsIG5vUGFkKSB7CiAgICBpZiAodmFsdWUgPT09IG51bGwpIHsKICAgICAgcmV0dXJuICcnOwogICAgfQoKICAgIHJldHVybiBhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkgJiYgdmFsdWUudG9TdHJpbmcoKS5sZW5ndGggPCAyICYmICFub1BhZCA/CiAgICAgICcwJyArIHZhbHVlIDogdmFsdWUudG9TdHJpbmcoKTsKICB9CgogIC8vIFJlc3BvbmQgb24gbW91c2V3aGVlbCBzcGluCiAgdGhpcy5zZXR1cE1vdXNld2hlZWxFdmVudHMgPSBmdW5jdGlvbihob3Vyc0lucHV0RWwsIG1pbnV0ZXNJbnB1dEVsLCBzZWNvbmRzSW5wdXRFbCkgewogICAgdmFyIGlzU2Nyb2xsaW5nVXAgPSBmdW5jdGlvbihlKSB7CiAgICAgIGlmIChlLm9yaWdpbmFsRXZlbnQpIHsKICAgICAgICBlID0gZS5vcmlnaW5hbEV2ZW50OwogICAgICB9CiAgICAgIC8vcGljayBjb3JyZWN0IGRlbHRhIHZhcmlhYmxlIGRlcGVuZGluZyBvbiBldmVudAogICAgICB2YXIgZGVsdGEgPSBlLndoZWVsRGVsdGEgPyBlLndoZWVsRGVsdGEgOiAtZS5kZWx0YVk7CiAgICAgIHJldHVybiBlLmRldGFpbCB8fCBkZWx0YSA+IDA7CiAgICB9OwoKICAgIGhvdXJzSW5wdXRFbC5iaW5kKCdtb3VzZXdoZWVsIHdoZWVsJywgZnVuY3Rpb24oZSkgewogICAgICBpZiAoIWRpc2FibGVkKSB7CiAgICAgICAgJHNjb3BlLiRhcHBseShpc1Njcm9sbGluZ1VwKGUpID8gJHNjb3BlLmluY3JlbWVudEhvdXJzKCkgOiAkc2NvcGUuZGVjcmVtZW50SG91cnMoKSk7CiAgICAgIH0KICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgfSk7CgogICAgbWludXRlc0lucHV0RWwuYmluZCgnbW91c2V3aGVlbCB3aGVlbCcsIGZ1bmN0aW9uKGUpIHsKICAgICAgaWYgKCFkaXNhYmxlZCkgewogICAgICAgICRzY29wZS4kYXBwbHkoaXNTY3JvbGxpbmdVcChlKSA/ICRzY29wZS5pbmNyZW1lbnRNaW51dGVzKCkgOiAkc2NvcGUuZGVjcmVtZW50TWludXRlcygpKTsKICAgICAgfQogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICB9KTsKCiAgICAgc2Vjb25kc0lucHV0RWwuYmluZCgnbW91c2V3aGVlbCB3aGVlbCcsIGZ1bmN0aW9uKGUpIHsKICAgICAgaWYgKCFkaXNhYmxlZCkgewogICAgICAgICRzY29wZS4kYXBwbHkoaXNTY3JvbGxpbmdVcChlKSA/ICRzY29wZS5pbmNyZW1lbnRTZWNvbmRzKCkgOiAkc2NvcGUuZGVjcmVtZW50U2Vjb25kcygpKTsKICAgICAgfQogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICB9KTsKICB9OwoKICAvLyBSZXNwb25kIG9uIHVwL2Rvd24gYXJyb3drZXlzCiAgdGhpcy5zZXR1cEFycm93a2V5RXZlbnRzID0gZnVuY3Rpb24oaG91cnNJbnB1dEVsLCBtaW51dGVzSW5wdXRFbCwgc2Vjb25kc0lucHV0RWwpIHsKICAgIGhvdXJzSW5wdXRFbC5iaW5kKCdrZXlkb3duJywgZnVuY3Rpb24oZSkgewogICAgICBpZiAoIWRpc2FibGVkKSB7CiAgICAgICAgaWYgKGUud2hpY2ggPT09IDM4KSB7IC8vIHVwCiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAkc2NvcGUuaW5jcmVtZW50SG91cnMoKTsKICAgICAgICAgICRzY29wZS4kYXBwbHkoKTsKICAgICAgICB9IGVsc2UgaWYgKGUud2hpY2ggPT09IDQwKSB7IC8vIGRvd24KICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICRzY29wZS5kZWNyZW1lbnRIb3VycygpOwogICAgICAgICAgJHNjb3BlLiRhcHBseSgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CgogICAgbWludXRlc0lucHV0RWwuYmluZCgna2V5ZG93bicsIGZ1bmN0aW9uKGUpIHsKICAgICAgaWYgKCFkaXNhYmxlZCkgewogICAgICAgIGlmIChlLndoaWNoID09PSAzOCkgeyAvLyB1cAogICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgJHNjb3BlLmluY3JlbWVudE1pbnV0ZXMoKTsKICAgICAgICAgICRzY29wZS4kYXBwbHkoKTsKICAgICAgICB9IGVsc2UgaWYgKGUud2hpY2ggPT09IDQwKSB7IC8vIGRvd24KICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICRzY29wZS5kZWNyZW1lbnRNaW51dGVzKCk7CiAgICAgICAgICAkc2NvcGUuJGFwcGx5KCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKCiAgICBzZWNvbmRzSW5wdXRFbC5iaW5kKCdrZXlkb3duJywgZnVuY3Rpb24oZSkgewogICAgICBpZiAoIWRpc2FibGVkKSB7CiAgICAgICAgaWYgKGUud2hpY2ggPT09IDM4KSB7IC8vIHVwCiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAkc2NvcGUuaW5jcmVtZW50U2Vjb25kcygpOwogICAgICAgICAgJHNjb3BlLiRhcHBseSgpOwogICAgICAgIH0gZWxzZSBpZiAoZS53aGljaCA9PT0gNDApIHsgLy8gZG93bgogICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgJHNjb3BlLmRlY3JlbWVudFNlY29uZHMoKTsKICAgICAgICAgICRzY29wZS4kYXBwbHkoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH07CgogIHRoaXMuc2V0dXBJbnB1dEV2ZW50cyA9IGZ1bmN0aW9uKGhvdXJzSW5wdXRFbCwgbWludXRlc0lucHV0RWwsIHNlY29uZHNJbnB1dEVsKSB7CiAgICBpZiAoJHNjb3BlLnJlYWRvbmx5SW5wdXQpIHsKICAgICAgJHNjb3BlLnVwZGF0ZUhvdXJzID0gYW5ndWxhci5ub29wOwogICAgICAkc2NvcGUudXBkYXRlTWludXRlcyA9IGFuZ3VsYXIubm9vcDsKICAgICAgJHNjb3BlLnVwZGF0ZVNlY29uZHMgPSBhbmd1bGFyLm5vb3A7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB2YXIgaW52YWxpZGF0ZSA9IGZ1bmN0aW9uKGludmFsaWRIb3VycywgaW52YWxpZE1pbnV0ZXMsIGludmFsaWRTZWNvbmRzKSB7CiAgICAgIG5nTW9kZWxDdHJsLiRzZXRWaWV3VmFsdWUobnVsbCk7CiAgICAgIG5nTW9kZWxDdHJsLiRzZXRWYWxpZGl0eSgndGltZScsIGZhbHNlKTsKICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKGludmFsaWRIb3VycykpIHsKICAgICAgICAkc2NvcGUuaW52YWxpZEhvdXJzID0gaW52YWxpZEhvdXJzOwogICAgICB9CgogICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoaW52YWxpZE1pbnV0ZXMpKSB7CiAgICAgICAgJHNjb3BlLmludmFsaWRNaW51dGVzID0gaW52YWxpZE1pbnV0ZXM7CiAgICAgIH0KCiAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChpbnZhbGlkU2Vjb25kcykpIHsKICAgICAgICAkc2NvcGUuaW52YWxpZFNlY29uZHMgPSBpbnZhbGlkU2Vjb25kczsKICAgICAgfQogICAgfTsKCiAgICAkc2NvcGUudXBkYXRlSG91cnMgPSBmdW5jdGlvbigpIHsKICAgICAgdmFyIGhvdXJzID0gZ2V0SG91cnNGcm9tVGVtcGxhdGUoKSwKICAgICAgICBtaW51dGVzID0gZ2V0TWludXRlc0Zyb21UZW1wbGF0ZSgpOwoKICAgICAgbmdNb2RlbEN0cmwuJHNldERpcnR5KCk7CgogICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoaG91cnMpICYmIGFuZ3VsYXIuaXNEZWZpbmVkKG1pbnV0ZXMpKSB7CiAgICAgICAgc2VsZWN0ZWQuc2V0SG91cnMoaG91cnMpOwogICAgICAgIHNlbGVjdGVkLnNldE1pbnV0ZXMobWludXRlcyk7CiAgICAgICAgaWYgKHNlbGVjdGVkIDwgbWluIHx8IHNlbGVjdGVkID4gbWF4KSB7CiAgICAgICAgICBpbnZhbGlkYXRlKHRydWUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZWZyZXNoKCdoJyk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGludmFsaWRhdGUodHJ1ZSk7CiAgICAgIH0KICAgIH07CgogICAgaG91cnNJbnB1dEVsLmJpbmQoJ2JsdXInLCBmdW5jdGlvbihlKSB7CiAgICAgIG5nTW9kZWxDdHJsLiRzZXRUb3VjaGVkKCk7CiAgICAgIGlmIChtb2RlbElzRW1wdHkoKSkgewogICAgICAgIG1ha2VWYWxpZCgpOwogICAgICB9IGVsc2UgaWYgKCRzY29wZS5ob3VycyA9PT0gbnVsbCB8fCAkc2NvcGUuaG91cnMgPT09ICcnKSB7CiAgICAgICAgaW52YWxpZGF0ZSh0cnVlKTsKICAgICAgfSBlbHNlIGlmICghJHNjb3BlLmludmFsaWRIb3VycyAmJiAkc2NvcGUuaG91cnMgPCAxMCkgewogICAgICAgICRzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7CiAgICAgICAgICAkc2NvcGUuaG91cnMgPSBwYWQoJHNjb3BlLmhvdXJzLCAhcGFkSG91cnMpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsKCiAgICAkc2NvcGUudXBkYXRlTWludXRlcyA9IGZ1bmN0aW9uKCkgewogICAgICB2YXIgbWludXRlcyA9IGdldE1pbnV0ZXNGcm9tVGVtcGxhdGUoKSwKICAgICAgICBob3VycyA9IGdldEhvdXJzRnJvbVRlbXBsYXRlKCk7CgogICAgICBuZ01vZGVsQ3RybC4kc2V0RGlydHkoKTsKCiAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChtaW51dGVzKSAmJiBhbmd1bGFyLmlzRGVmaW5lZChob3VycykpIHsKICAgICAgICBzZWxlY3RlZC5zZXRIb3Vycyhob3Vycyk7CiAgICAgICAgc2VsZWN0ZWQuc2V0TWludXRlcyhtaW51dGVzKTsKICAgICAgICBpZiAoc2VsZWN0ZWQgPCBtaW4gfHwgc2VsZWN0ZWQgPiBtYXgpIHsKICAgICAgICAgIGludmFsaWRhdGUodW5kZWZpbmVkLCB0cnVlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVmcmVzaCgnbScpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBpbnZhbGlkYXRlKHVuZGVmaW5lZCwgdHJ1ZSk7CiAgICAgIH0KICAgIH07CgogICAgbWludXRlc0lucHV0RWwuYmluZCgnYmx1cicsIGZ1bmN0aW9uKGUpIHsKICAgICAgbmdNb2RlbEN0cmwuJHNldFRvdWNoZWQoKTsKICAgICAgaWYgKG1vZGVsSXNFbXB0eSgpKSB7CiAgICAgICAgbWFrZVZhbGlkKCk7CiAgICAgIH0gZWxzZSBpZiAoJHNjb3BlLm1pbnV0ZXMgPT09IG51bGwpIHsKICAgICAgICBpbnZhbGlkYXRlKHVuZGVmaW5lZCwgdHJ1ZSk7CiAgICAgIH0gZWxzZSBpZiAoISRzY29wZS5pbnZhbGlkTWludXRlcyAmJiAkc2NvcGUubWludXRlcyA8IDEwKSB7CiAgICAgICAgJHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHsKICAgICAgICAgICRzY29wZS5taW51dGVzID0gcGFkKCRzY29wZS5taW51dGVzKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CgogICAgJHNjb3BlLnVwZGF0ZVNlY29uZHMgPSBmdW5jdGlvbigpIHsKICAgICAgdmFyIHNlY29uZHMgPSBnZXRTZWNvbmRzRnJvbVRlbXBsYXRlKCk7CgogICAgICBuZ01vZGVsQ3RybC4kc2V0RGlydHkoKTsKCiAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChzZWNvbmRzKSkgewogICAgICAgIHNlbGVjdGVkLnNldFNlY29uZHMoc2Vjb25kcyk7CiAgICAgICAgcmVmcmVzaCgncycpOwogICAgICB9IGVsc2UgewogICAgICAgIGludmFsaWRhdGUodW5kZWZpbmVkLCB1bmRlZmluZWQsIHRydWUpOwogICAgICB9CiAgICB9OwoKICAgIHNlY29uZHNJbnB1dEVsLmJpbmQoJ2JsdXInLCBmdW5jdGlvbihlKSB7CiAgICAgIGlmIChtb2RlbElzRW1wdHkoKSkgewogICAgICAgIG1ha2VWYWxpZCgpOwogICAgICB9IGVsc2UgaWYgKCEkc2NvcGUuaW52YWxpZFNlY29uZHMgJiYgJHNjb3BlLnNlY29uZHMgPCAxMCkgewogICAgICAgICRzY29wZS4kYXBwbHkoIGZ1bmN0aW9uKCkgewogICAgICAgICAgJHNjb3BlLnNlY29uZHMgPSBwYWQoJHNjb3BlLnNlY29uZHMpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsKCiAgfTsKCiAgdGhpcy5yZW5kZXIgPSBmdW5jdGlvbigpIHsKICAgIHZhciBkYXRlID0gbmdNb2RlbEN0cmwuJHZpZXdWYWx1ZTsKCiAgICBpZiAoaXNOYU4oZGF0ZSkpIHsKICAgICAgbmdNb2RlbEN0cmwuJHNldFZhbGlkaXR5KCd0aW1lJywgZmFsc2UpOwogICAgICAkbG9nLmVycm9yKCdUaW1lcGlja2VyIGRpcmVjdGl2ZTogIm5nLW1vZGVsIiB2YWx1ZSBtdXN0IGJlIGEgRGF0ZSBvYmplY3QsIGEgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBzaW5jZSAwMS4wMS4xOTcwIG9yIGEgc3RyaW5nIHJlcHJlc2VudGluZyBhbiBSRkMyODIyIG9yIElTTyA4NjAxIGRhdGUuJyk7CiAgICB9IGVsc2UgewogICAgICBpZiAoZGF0ZSkgewogICAgICAgIHNlbGVjdGVkID0gZGF0ZTsKICAgICAgfQoKICAgICAgaWYgKHNlbGVjdGVkIDwgbWluIHx8IHNlbGVjdGVkID4gbWF4KSB7CiAgICAgICAgbmdNb2RlbEN0cmwuJHNldFZhbGlkaXR5KCd0aW1lJywgZmFsc2UpOwogICAgICAgICRzY29wZS5pbnZhbGlkSG91cnMgPSB0cnVlOwogICAgICAgICRzY29wZS5pbnZhbGlkTWludXRlcyA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbWFrZVZhbGlkKCk7CiAgICAgIH0KICAgICAgdXBkYXRlVGVtcGxhdGUoKTsKICAgIH0KICB9OwoKICAvLyBDYWxsIGludGVybmFsbHkgd2hlbiB3ZSBrbm93IHRoYXQgbW9kZWwgaXMgdmFsaWQuCiAgZnVuY3Rpb24gcmVmcmVzaChrZXlib2FyZENoYW5nZSkgewogICAgbWFrZVZhbGlkKCk7CiAgICBuZ01vZGVsQ3RybC4kc2V0Vmlld1ZhbHVlKG5ldyBEYXRlKHNlbGVjdGVkKSk7CiAgICB1cGRhdGVUZW1wbGF0ZShrZXlib2FyZENoYW5nZSk7CiAgfQoKICBmdW5jdGlvbiBtYWtlVmFsaWQoKSB7CiAgICBuZ01vZGVsQ3RybC4kc2V0VmFsaWRpdHkoJ3RpbWUnLCB0cnVlKTsKICAgICRzY29wZS5pbnZhbGlkSG91cnMgPSBmYWxzZTsKICAgICRzY29wZS5pbnZhbGlkTWludXRlcyA9IGZhbHNlOwogICAgJHNjb3BlLmludmFsaWRTZWNvbmRzID0gZmFsc2U7CiAgfQoKICBmdW5jdGlvbiB1cGRhdGVUZW1wbGF0ZShrZXlib2FyZENoYW5nZSkgewogICAgaWYgKCFuZ01vZGVsQ3RybC4kbW9kZWxWYWx1ZSkgewogICAgICAkc2NvcGUuaG91cnMgPSBudWxsOwogICAgICAkc2NvcGUubWludXRlcyA9IG51bGw7CiAgICAgICRzY29wZS5zZWNvbmRzID0gbnVsbDsKICAgICAgJHNjb3BlLm1lcmlkaWFuID0gbWVyaWRpYW5zWzBdOwogICAgfSBlbHNlIHsKICAgICAgdmFyIGhvdXJzID0gc2VsZWN0ZWQuZ2V0SG91cnMoKSwKICAgICAgICBtaW51dGVzID0gc2VsZWN0ZWQuZ2V0TWludXRlcygpLAogICAgICAgIHNlY29uZHMgPSBzZWxlY3RlZC5nZXRTZWNvbmRzKCk7CgogICAgICBpZiAoJHNjb3BlLnNob3dNZXJpZGlhbikgewogICAgICAgIGhvdXJzID0gaG91cnMgPT09IDAgfHwgaG91cnMgPT09IDEyID8gMTIgOiBob3VycyAlIDEyOyAvLyBDb252ZXJ0IDI0IHRvIDEyIGhvdXIgc3lzdGVtCiAgICAgIH0KCiAgICAgICRzY29wZS5ob3VycyA9IGtleWJvYXJkQ2hhbmdlID09PSAnaCcgPyBob3VycyA6IHBhZChob3VycywgIXBhZEhvdXJzKTsKICAgICAgaWYgKGtleWJvYXJkQ2hhbmdlICE9PSAnbScpIHsKICAgICAgICAkc2NvcGUubWludXRlcyA9IHBhZChtaW51dGVzKTsKICAgICAgfQogICAgICAkc2NvcGUubWVyaWRpYW4gPSBzZWxlY3RlZC5nZXRIb3VycygpIDwgMTIgPyBtZXJpZGlhbnNbMF0gOiBtZXJpZGlhbnNbMV07CgogICAgICBpZiAoa2V5Ym9hcmRDaGFuZ2UgIT09ICdzJykgewogICAgICAgICRzY29wZS5zZWNvbmRzID0gcGFkKHNlY29uZHMpOwogICAgICB9CiAgICAgICRzY29wZS5tZXJpZGlhbiA9IHNlbGVjdGVkLmdldEhvdXJzKCkgPCAxMiA/IG1lcmlkaWFuc1swXSA6IG1lcmlkaWFuc1sxXTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGFkZFNlY29uZHNUb1NlbGVjdGVkKHNlY29uZHMpIHsKICAgIHNlbGVjdGVkID0gYWRkU2Vjb25kcyhzZWxlY3RlZCwgc2Vjb25kcyk7CiAgICByZWZyZXNoKCk7CiAgfQoKICBmdW5jdGlvbiBhZGRNaW51dGVzKHNlbGVjdGVkLCBtaW51dGVzKSB7CiAgICByZXR1cm4gYWRkU2Vjb25kcyhzZWxlY3RlZCwgbWludXRlcyo2MCk7CiAgfQoKICBmdW5jdGlvbiBhZGRTZWNvbmRzKGRhdGUsIHNlY29uZHMpIHsKICAgIHZhciBkdCA9IG5ldyBEYXRlKGRhdGUuZ2V0VGltZSgpICsgc2Vjb25kcyAqIDEwMDApOwogICAgdmFyIG5ld0RhdGUgPSBuZXcgRGF0ZShkYXRlKTsKICAgIG5ld0RhdGUuc2V0SG91cnMoZHQuZ2V0SG91cnMoKSwgZHQuZ2V0TWludXRlcygpLCBkdC5nZXRTZWNvbmRzKCkpOwogICAgcmV0dXJuIG5ld0RhdGU7CiAgfQoKICBmdW5jdGlvbiBtb2RlbElzRW1wdHkoKSB7CiAgICByZXR1cm4gKCRzY29wZS5ob3VycyA9PT0gbnVsbCB8fCAkc2NvcGUuaG91cnMgPT09ICcnKSAmJgogICAgICAoJHNjb3BlLm1pbnV0ZXMgPT09IG51bGwgfHwgJHNjb3BlLm1pbnV0ZXMgPT09ICcnKSAmJgogICAgICAoISRzY29wZS5zaG93U2Vjb25kcyB8fCAkc2NvcGUuc2hvd1NlY29uZHMgJiYgKCRzY29wZS5zZWNvbmRzID09PSBudWxsIHx8ICRzY29wZS5zZWNvbmRzID09PSAnJykpOwogIH0KCiAgJHNjb3BlLnNob3dTcGlubmVycyA9IGFuZ3VsYXIuaXNEZWZpbmVkKCRhdHRycy5zaG93U3Bpbm5lcnMpID8KICAgICRzY29wZS4kcGFyZW50LiRldmFsKCRhdHRycy5zaG93U3Bpbm5lcnMpIDogdGltZXBpY2tlckNvbmZpZy5zaG93U3Bpbm5lcnM7CgogICRzY29wZS5pbmNyZW1lbnRIb3VycyA9IGZ1bmN0aW9uKCkgewogICAgaWYgKCEkc2NvcGUubm9JbmNyZW1lbnRIb3VycygpKSB7CiAgICAgIGFkZFNlY29uZHNUb1NlbGVjdGVkKGhvdXJTdGVwICogNjAgKiA2MCk7CiAgICB9CiAgfTsKCiAgJHNjb3BlLmRlY3JlbWVudEhvdXJzID0gZnVuY3Rpb24oKSB7CiAgICBpZiAoISRzY29wZS5ub0RlY3JlbWVudEhvdXJzKCkpIHsKICAgICAgYWRkU2Vjb25kc1RvU2VsZWN0ZWQoLWhvdXJTdGVwICogNjAgKiA2MCk7CiAgICB9CiAgfTsKCiAgJHNjb3BlLmluY3JlbWVudE1pbnV0ZXMgPSBmdW5jdGlvbigpIHsKICAgIGlmICghJHNjb3BlLm5vSW5jcmVtZW50TWludXRlcygpKSB7CiAgICAgIGFkZFNlY29uZHNUb1NlbGVjdGVkKG1pbnV0ZVN0ZXAgKiA2MCk7CiAgICB9CiAgfTsKCiAgJHNjb3BlLmRlY3JlbWVudE1pbnV0ZXMgPSBmdW5jdGlvbigpIHsKICAgIGlmICghJHNjb3BlLm5vRGVjcmVtZW50TWludXRlcygpKSB7CiAgICAgIGFkZFNlY29uZHNUb1NlbGVjdGVkKC1taW51dGVTdGVwICogNjApOwogICAgfQogIH07CgogICRzY29wZS5pbmNyZW1lbnRTZWNvbmRzID0gZnVuY3Rpb24oKSB7CiAgICBpZiAoISRzY29wZS5ub0luY3JlbWVudFNlY29uZHMoKSkgewogICAgICBhZGRTZWNvbmRzVG9TZWxlY3RlZChzZWNvbmRTdGVwKTsKICAgIH0KICB9OwoKICAkc2NvcGUuZGVjcmVtZW50U2Vjb25kcyA9IGZ1bmN0aW9uKCkgewogICAgaWYgKCEkc2NvcGUubm9EZWNyZW1lbnRTZWNvbmRzKCkpIHsKICAgICAgYWRkU2Vjb25kc1RvU2VsZWN0ZWQoLXNlY29uZFN0ZXApOwogICAgfQogIH07CgogICRzY29wZS50b2dnbGVNZXJpZGlhbiA9IGZ1bmN0aW9uKCkgewogICAgdmFyIG1pbnV0ZXMgPSBnZXRNaW51dGVzRnJvbVRlbXBsYXRlKCksCiAgICAgICAgaG91cnMgPSBnZXRIb3Vyc0Zyb21UZW1wbGF0ZSgpOwoKICAgIGlmICghJHNjb3BlLm5vVG9nZ2xlTWVyaWRpYW4oKSkgewogICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQobWludXRlcykgJiYgYW5ndWxhci5pc0RlZmluZWQoaG91cnMpKSB7CiAgICAgICAgYWRkU2Vjb25kc1RvU2VsZWN0ZWQoMTIgKiA2MCAqIChzZWxlY3RlZC5nZXRIb3VycygpIDwgMTIgPyA2MCA6IC02MCkpOwogICAgICB9IGVsc2UgewogICAgICAgICRzY29wZS5tZXJpZGlhbiA9ICRzY29wZS5tZXJpZGlhbiA9PT0gbWVyaWRpYW5zWzBdID8gbWVyaWRpYW5zWzFdIDogbWVyaWRpYW5zWzBdOwogICAgICB9CiAgICB9CiAgfTsKCiAgJHNjb3BlLmJsdXIgPSBmdW5jdGlvbigpIHsKICAgIG5nTW9kZWxDdHJsLiRzZXRUb3VjaGVkKCk7CiAgfTsKCiAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHsKICAgIHdoaWxlICh3YXRjaGVycy5sZW5ndGgpIHsKICAgICAgd2F0Y2hlcnMuc2hpZnQoKSgpOwogICAgfQogIH0pOwp9XSkKCi5kaXJlY3RpdmUoJ3VpYlRpbWVwaWNrZXInLCBbJ3VpYlRpbWVwaWNrZXJDb25maWcnLCBmdW5jdGlvbih1aWJUaW1lcGlja2VyQ29uZmlnKSB7CiAgcmV0dXJuIHsKICAgIHJlcXVpcmU6IFsndWliVGltZXBpY2tlcicsICc/Xm5nTW9kZWwnXSwKICAgIHJlc3RyaWN0OiAnQScsCiAgICBjb250cm9sbGVyOiAnVWliVGltZXBpY2tlckNvbnRyb2xsZXInLAogICAgY29udHJvbGxlckFzOiAndGltZXBpY2tlcicsCiAgICBzY29wZToge30sCiAgICB0ZW1wbGF0ZVVybDogZnVuY3Rpb24oZWxlbWVudCwgYXR0cnMpIHsKICAgICAgcmV0dXJuIGF0dHJzLnRlbXBsYXRlVXJsIHx8IHVpYlRpbWVwaWNrZXJDb25maWcudGVtcGxhdGVVcmw7CiAgICB9LAogICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjdHJscykgewogICAgICB2YXIgdGltZXBpY2tlckN0cmwgPSBjdHJsc1swXSwgbmdNb2RlbEN0cmwgPSBjdHJsc1sxXTsKCiAgICAgIGlmIChuZ01vZGVsQ3RybCkgewogICAgICAgIHRpbWVwaWNrZXJDdHJsLmluaXQobmdNb2RlbEN0cmwsIGVsZW1lbnQuZmluZCgnaW5wdXQnKSk7CiAgICAgIH0KICAgIH0KICB9Owp9XSk7Cgphbmd1bGFyLm1vZHVsZSgndWkuYm9vdHN0cmFwLnR5cGVhaGVhZCcsIFsndWkuYm9vdHN0cmFwLmRlYm91bmNlJywgJ3VpLmJvb3RzdHJhcC5wb3NpdGlvbiddKQoKLyoqCiAqIEEgaGVscGVyIHNlcnZpY2UgdGhhdCBjYW4gcGFyc2UgdHlwZWFoZWFkJ3Mgc3ludGF4IChzdHJpbmcgcHJvdmlkZWQgYnkgdXNlcnMpCiAqIEV4dHJhY3RlZCB0byBhIHNlcGFyYXRlIHNlcnZpY2UgZm9yIGVhc2Ugb2YgdW5pdCB0ZXN0aW5nCiAqLwogIC5mYWN0b3J5KCd1aWJUeXBlYWhlYWRQYXJzZXInLCBbJyRwYXJzZScsIGZ1bmN0aW9uKCRwYXJzZSkgewogICAgLy8gICAgICAgICAgICAgICAgICAgICAgMDAwMDAxMTExMTExMTAwMDAwMDAwMDAwMDAyMjIyMjIyMjAwMDAwMDAwMDAwMDAwMDAzMzMzMzMzMzMzMzMzMzMwMDAwMDAwMDAwMDQ0NDQ0NDQ0MDAwCiAgICB2YXIgVFlQRUFIRUFEX1JFR0VYUCA9IC9eXHMqKFtcc1xTXSs/KSg/OlxzK2FzXHMrKFtcc1xTXSs/KSk/XHMrZm9yXHMrKD86KFtcJFx3XVtcJFx3XGRdKikpXHMraW5ccysoW1xzXFNdKz8pJC87CiAgICByZXR1cm4gewogICAgICBwYXJzZTogZnVuY3Rpb24oaW5wdXQpIHsKICAgICAgICB2YXIgbWF0Y2ggPSBpbnB1dC5tYXRjaChUWVBFQUhFQURfUkVHRVhQKTsKICAgICAgICBpZiAoIW1hdGNoKSB7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoCiAgICAgICAgICAgICdFeHBlY3RlZCB0eXBlYWhlYWQgc3BlY2lmaWNhdGlvbiBpbiBmb3JtIG9mICJfbW9kZWxWYWx1ZV8gKGFzIF9sYWJlbF8pPyBmb3IgX2l0ZW1fIGluIF9jb2xsZWN0aW9uXyInICsKICAgICAgICAgICAgICAnIGJ1dCBnb3QgIicgKyBpbnB1dCArICciLicpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGl0ZW1OYW1lOiBtYXRjaFszXSwKICAgICAgICAgIHNvdXJjZTogJHBhcnNlKG1hdGNoWzRdKSwKICAgICAgICAgIHZpZXdNYXBwZXI6ICRwYXJzZShtYXRjaFsyXSB8fCBtYXRjaFsxXSksCiAgICAgICAgICBtb2RlbE1hcHBlcjogJHBhcnNlKG1hdGNoWzFdKQogICAgICAgIH07CiAgICAgIH0KICAgIH07CiAgfV0pCgogIC5jb250cm9sbGVyKCdVaWJUeXBlYWhlYWRDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGVsZW1lbnQnLCAnJGF0dHJzJywgJyRjb21waWxlJywgJyRwYXJzZScsICckcScsICckdGltZW91dCcsICckZG9jdW1lbnQnLCAnJHdpbmRvdycsICckcm9vdFNjb3BlJywgJyQkZGVib3VuY2UnLCAnJHVpYlBvc2l0aW9uJywgJ3VpYlR5cGVhaGVhZFBhcnNlcicsCiAgICBmdW5jdGlvbihvcmlnaW5hbFNjb3BlLCBlbGVtZW50LCBhdHRycywgJGNvbXBpbGUsICRwYXJzZSwgJHEsICR0aW1lb3V0LCAkZG9jdW1lbnQsICR3aW5kb3csICRyb290U2NvcGUsICQkZGVib3VuY2UsICRwb3NpdGlvbiwgdHlwZWFoZWFkUGFyc2VyKSB7CiAgICB2YXIgSE9UX0tFWVMgPSBbOSwgMTMsIDI3LCAzOCwgNDBdOwogICAgdmFyIGV2ZW50RGVib3VuY2VUaW1lID0gMjAwOwogICAgdmFyIG1vZGVsQ3RybCwgbmdNb2RlbE9wdGlvbnM7CiAgICAvL1NVUFBPUlRFRCBBVFRSSUJVVEVTIChPUFRJT05TKQoKICAgIC8vbWluaW1hbCBubyBvZiBjaGFyYWN0ZXJzIHRoYXQgbmVlZHMgdG8gYmUgZW50ZXJlZCBiZWZvcmUgdHlwZWFoZWFkIGtpY2tzLWluCiAgICB2YXIgbWluTGVuZ3RoID0gb3JpZ2luYWxTY29wZS4kZXZhbChhdHRycy50eXBlYWhlYWRNaW5MZW5ndGgpOwogICAgaWYgKCFtaW5MZW5ndGggJiYgbWluTGVuZ3RoICE9PSAwKSB7CiAgICAgIG1pbkxlbmd0aCA9IDE7CiAgICB9CgogICAgb3JpZ2luYWxTY29wZS4kd2F0Y2goYXR0cnMudHlwZWFoZWFkTWluTGVuZ3RoLCBmdW5jdGlvbiAobmV3VmFsKSB7CiAgICAgICAgbWluTGVuZ3RoID0gIW5ld1ZhbCAmJiBuZXdWYWwgIT09IDAgPyAxIDogbmV3VmFsOwogICAgfSk7CgogICAgLy9taW5pbWFsIHdhaXQgdGltZSBhZnRlciBsYXN0IGNoYXJhY3RlciB0eXBlZCBiZWZvcmUgdHlwZWFoZWFkIGtpY2tzLWluCiAgICB2YXIgd2FpdFRpbWUgPSBvcmlnaW5hbFNjb3BlLiRldmFsKGF0dHJzLnR5cGVhaGVhZFdhaXRNcykgfHwgMDsKCiAgICAvL3Nob3VsZCBpdCByZXN0cmljdCBtb2RlbCB2YWx1ZXMgdG8gdGhlIG9uZXMgc2VsZWN0ZWQgZnJvbSB0aGUgcG9wdXAgb25seT8KICAgIHZhciBpc0VkaXRhYmxlID0gb3JpZ2luYWxTY29wZS4kZXZhbChhdHRycy50eXBlYWhlYWRFZGl0YWJsZSkgIT09IGZhbHNlOwogICAgb3JpZ2luYWxTY29wZS4kd2F0Y2goYXR0cnMudHlwZWFoZWFkRWRpdGFibGUsIGZ1bmN0aW9uIChuZXdWYWwpIHsKICAgICAgaXNFZGl0YWJsZSA9IG5ld1ZhbCAhPT0gZmFsc2U7CiAgICB9KTsKCiAgICAvL2JpbmRpbmcgdG8gYSB2YXJpYWJsZSB0aGF0IGluZGljYXRlcyBpZiBtYXRjaGVzIGFyZSBiZWluZyByZXRyaWV2ZWQgYXN5bmNocm9ub3VzbHkKICAgIHZhciBpc0xvYWRpbmdTZXR0ZXIgPSAkcGFyc2UoYXR0cnMudHlwZWFoZWFkTG9hZGluZykuYXNzaWduIHx8IGFuZ3VsYXIubm9vcDsKCiAgICAvL2EgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGlmIGFuIGV2ZW50IHNob3VsZCBjYXVzZSBzZWxlY3Rpb24KICAgIHZhciBpc1NlbGVjdEV2ZW50ID0gYXR0cnMudHlwZWFoZWFkU2hvdWxkU2VsZWN0ID8gJHBhcnNlKGF0dHJzLnR5cGVhaGVhZFNob3VsZFNlbGVjdCkgOiBmdW5jdGlvbihzY29wZSwgdmFscykgewogICAgICB2YXIgZXZ0ID0gdmFscy4kZXZlbnQ7CiAgICAgIHJldHVybiBldnQud2hpY2ggPT09IDEzIHx8IGV2dC53aGljaCA9PT0gOTsKICAgIH07CgogICAgLy9hIGNhbGxiYWNrIGV4ZWN1dGVkIHdoZW4gYSBtYXRjaCBpcyBzZWxlY3RlZAogICAgdmFyIG9uU2VsZWN0Q2FsbGJhY2sgPSAkcGFyc2UoYXR0cnMudHlwZWFoZWFkT25TZWxlY3QpOwoKICAgIC8vc2hvdWxkIGl0IHNlbGVjdCBoaWdobGlnaHRlZCBwb3B1cCB2YWx1ZSB3aGVuIGxvc2luZyBmb2N1cz8KICAgIHZhciBpc1NlbGVjdE9uQmx1ciA9IGFuZ3VsYXIuaXNEZWZpbmVkKGF0dHJzLnR5cGVhaGVhZFNlbGVjdE9uQmx1cikgPyBvcmlnaW5hbFNjb3BlLiRldmFsKGF0dHJzLnR5cGVhaGVhZFNlbGVjdE9uQmx1cikgOiBmYWxzZTsKCiAgICAvL2JpbmRpbmcgdG8gYSB2YXJpYWJsZSB0aGF0IGluZGljYXRlcyBpZiB0aGVyZSB3ZXJlIG5vIHJlc3VsdHMgYWZ0ZXIgdGhlIHF1ZXJ5IGlzIGNvbXBsZXRlZAogICAgdmFyIGlzTm9SZXN1bHRzU2V0dGVyID0gJHBhcnNlKGF0dHJzLnR5cGVhaGVhZE5vUmVzdWx0cykuYXNzaWduIHx8IGFuZ3VsYXIubm9vcDsKCiAgICB2YXIgaW5wdXRGb3JtYXR0ZXIgPSBhdHRycy50eXBlYWhlYWRJbnB1dEZvcm1hdHRlciA/ICRwYXJzZShhdHRycy50eXBlYWhlYWRJbnB1dEZvcm1hdHRlcikgOiB1bmRlZmluZWQ7CgogICAgdmFyIGFwcGVuZFRvQm9keSA9IGF0dHJzLnR5cGVhaGVhZEFwcGVuZFRvQm9keSA/IG9yaWdpbmFsU2NvcGUuJGV2YWwoYXR0cnMudHlwZWFoZWFkQXBwZW5kVG9Cb2R5KSA6IGZhbHNlOwoKICAgIHZhciBhcHBlbmRUbyA9IGF0dHJzLnR5cGVhaGVhZEFwcGVuZFRvID8KICAgICAgb3JpZ2luYWxTY29wZS4kZXZhbChhdHRycy50eXBlYWhlYWRBcHBlbmRUbykgOiBudWxsOwoKICAgIHZhciBmb2N1c0ZpcnN0ID0gb3JpZ2luYWxTY29wZS4kZXZhbChhdHRycy50eXBlYWhlYWRGb2N1c0ZpcnN0KSAhPT0gZmFsc2U7CgogICAgLy9JZiBpbnB1dCBtYXRjaGVzIGFuIGl0ZW0gb2YgdGhlIGxpc3QgZXhhY3RseSwgc2VsZWN0IGl0IGF1dG9tYXRpY2FsbHkKICAgIHZhciBzZWxlY3RPbkV4YWN0ID0gYXR0cnMudHlwZWFoZWFkU2VsZWN0T25FeGFjdCA/IG9yaWdpbmFsU2NvcGUuJGV2YWwoYXR0cnMudHlwZWFoZWFkU2VsZWN0T25FeGFjdCkgOiBmYWxzZTsKCiAgICAvL2JpbmRpbmcgdG8gYSB2YXJpYWJsZSB0aGF0IGluZGljYXRlcyBpZiBkcm9wZG93biBpcyBvcGVuCiAgICB2YXIgaXNPcGVuU2V0dGVyID0gJHBhcnNlKGF0dHJzLnR5cGVhaGVhZElzT3BlbikuYXNzaWduIHx8IGFuZ3VsYXIubm9vcDsKCiAgICB2YXIgc2hvd0hpbnQgPSBvcmlnaW5hbFNjb3BlLiRldmFsKGF0dHJzLnR5cGVhaGVhZFNob3dIaW50KSB8fCBmYWxzZTsKCiAgICAvL0lOVEVSTkFMIFZBUklBQkxFUwoKICAgIC8vbW9kZWwgc2V0dGVyIGV4ZWN1dGVkIHVwb24gbWF0Y2ggc2VsZWN0aW9uCiAgICB2YXIgcGFyc2VkTW9kZWwgPSAkcGFyc2UoYXR0cnMubmdNb2RlbCk7CiAgICB2YXIgaW52b2tlTW9kZWxTZXR0ZXIgPSAkcGFyc2UoYXR0cnMubmdNb2RlbCArICcoJCQkcCknKTsKICAgIHZhciAkc2V0TW9kZWxWYWx1ZSA9IGZ1bmN0aW9uKHNjb3BlLCBuZXdWYWx1ZSkgewogICAgICBpZiAoYW5ndWxhci5pc0Z1bmN0aW9uKHBhcnNlZE1vZGVsKG9yaWdpbmFsU2NvcGUpKSAmJgogICAgICAgIG5nTW9kZWxPcHRpb25zICYmIG5nTW9kZWxPcHRpb25zLiRvcHRpb25zICYmIG5nTW9kZWxPcHRpb25zLiRvcHRpb25zLmdldHRlclNldHRlcikgewogICAgICAgIHJldHVybiBpbnZva2VNb2RlbFNldHRlcihzY29wZSwgeyQkJHA6IG5ld1ZhbHVlfSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBwYXJzZWRNb2RlbC5hc3NpZ24oc2NvcGUsIG5ld1ZhbHVlKTsKICAgIH07CgogICAgLy9leHByZXNzaW9ucyB1c2VkIGJ5IHR5cGVhaGVhZAogICAgdmFyIHBhcnNlclJlc3VsdCA9IHR5cGVhaGVhZFBhcnNlci5wYXJzZShhdHRycy51aWJUeXBlYWhlYWQpOwoKICAgIHZhciBoYXNGb2N1czsKCiAgICAvL1VzZWQgdG8gYXZvaWQgYnVnIGluIGlPUyB3ZWJ2aWV3IHdoZXJlIGlPUyBrZXlib2FyZCBkb2VzIG5vdCBmaXJlCiAgICAvL21vdXNlZG93biAmIG1vdXNldXAgZXZlbnRzCiAgICAvL0lzc3VlICMzNjk5CiAgICB2YXIgc2VsZWN0ZWQ7CgogICAgLy9jcmVhdGUgYSBjaGlsZCBzY29wZSBmb3IgdGhlIHR5cGVhaGVhZCBkaXJlY3RpdmUgc28gd2UgYXJlIG5vdCBwb2xsdXRpbmcgb3JpZ2luYWwgc2NvcGUKICAgIC8vd2l0aCB0eXBlYWhlYWQtc3BlY2lmaWMgZGF0YSAobWF0Y2hlcywgcXVlcnkgZXRjLikKICAgIHZhciBzY29wZSA9IG9yaWdpbmFsU2NvcGUuJG5ldygpOwogICAgdmFyIG9mZkRlc3Ryb3kgPSBvcmlnaW5hbFNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHsKICAgICAgc2NvcGUuJGRlc3Ryb3koKTsKICAgIH0pOwogICAgc2NvcGUuJG9uKCckZGVzdHJveScsIG9mZkRlc3Ryb3kpOwoKICAgIC8vIFdBSS1BUklBCiAgICB2YXIgcG9wdXBJZCA9ICd0eXBlYWhlYWQtJyArIHNjb3BlLiRpZCArICctJyArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDAwKTsKICAgIGVsZW1lbnQuYXR0cih7CiAgICAgICdhcmlhLWF1dG9jb21wbGV0ZSc6ICdsaXN0JywKICAgICAgJ2FyaWEtZXhwYW5kZWQnOiBmYWxzZSwKICAgICAgJ2FyaWEtb3ducyc6IHBvcHVwSWQKICAgIH0pOwoKICAgIHZhciBpbnB1dHNDb250YWluZXIsIGhpbnRJbnB1dEVsZW07CiAgICAvL2FkZCByZWFkLW9ubHkgaW5wdXQgdG8gc2hvdyBoaW50CiAgICBpZiAoc2hvd0hpbnQpIHsKICAgICAgaW5wdXRzQ29udGFpbmVyID0gYW5ndWxhci5lbGVtZW50KCc8ZGl2PjwvZGl2PicpOwogICAgICBpbnB1dHNDb250YWluZXIuY3NzKCdwb3NpdGlvbicsICdyZWxhdGl2ZScpOwogICAgICBlbGVtZW50LmFmdGVyKGlucHV0c0NvbnRhaW5lcik7CiAgICAgIGhpbnRJbnB1dEVsZW0gPSBlbGVtZW50LmNsb25lKCk7CiAgICAgIGhpbnRJbnB1dEVsZW0uYXR0cigncGxhY2Vob2xkZXInLCAnJyk7CiAgICAgIGhpbnRJbnB1dEVsZW0uYXR0cigndGFiaW5kZXgnLCAnLTEnKTsKICAgICAgaGludElucHV0RWxlbS52YWwoJycpOwogICAgICBoaW50SW5wdXRFbGVtLmNzcyh7CiAgICAgICAgJ3Bvc2l0aW9uJzogJ2Fic29sdXRlJywKICAgICAgICAndG9wJzogJzBweCcsCiAgICAgICAgJ2xlZnQnOiAnMHB4JywKICAgICAgICAnYm9yZGVyLWNvbG9yJzogJ3RyYW5zcGFyZW50JywKICAgICAgICAnYm94LXNoYWRvdyc6ICdub25lJywKICAgICAgICAnb3BhY2l0eSc6IDEsCiAgICAgICAgJ2JhY2tncm91bmQnOiAnbm9uZSAwJSAwJSAvIGF1dG8gcmVwZWF0IHNjcm9sbCBwYWRkaW5nLWJveCBib3JkZXItYm94IHJnYigyNTUsIDI1NSwgMjU1KScsCiAgICAgICAgJ2NvbG9yJzogJyM5OTknCiAgICAgIH0pOwogICAgICBlbGVtZW50LmNzcyh7CiAgICAgICAgJ3Bvc2l0aW9uJzogJ3JlbGF0aXZlJywKICAgICAgICAndmVydGljYWwtYWxpZ24nOiAndG9wJywKICAgICAgICAnYmFja2dyb3VuZC1jb2xvcic6ICd0cmFuc3BhcmVudCcKICAgICAgfSk7CgogICAgICBpZiAoaGludElucHV0RWxlbS5hdHRyKCdpZCcpKSB7CiAgICAgICAgaGludElucHV0RWxlbS5yZW1vdmVBdHRyKCdpZCcpOyAvLyByZW1vdmUgZHVwbGljYXRlIGlkIGlmIHByZXNlbnQuCiAgICAgIH0KICAgICAgaW5wdXRzQ29udGFpbmVyLmFwcGVuZChoaW50SW5wdXRFbGVtKTsKICAgICAgaGludElucHV0RWxlbS5hZnRlcihlbGVtZW50KTsKICAgIH0KCiAgICAvL3BvcC11cCBlbGVtZW50IHVzZWQgdG8gZGlzcGxheSBtYXRjaGVzCiAgICB2YXIgcG9wVXBFbCA9IGFuZ3VsYXIuZWxlbWVudCgnPGRpdiB1aWItdHlwZWFoZWFkLXBvcHVwPjwvZGl2PicpOwogICAgcG9wVXBFbC5hdHRyKHsKICAgICAgaWQ6IHBvcHVwSWQsCiAgICAgIG1hdGNoZXM6ICdtYXRjaGVzJywKICAgICAgYWN0aXZlOiAnYWN0aXZlSWR4JywKICAgICAgc2VsZWN0OiAnc2VsZWN0KGFjdGl2ZUlkeCwgZXZ0KScsCiAgICAgICdtb3ZlLWluLXByb2dyZXNzJzogJ21vdmVJblByb2dyZXNzJywKICAgICAgcXVlcnk6ICdxdWVyeScsCiAgICAgIHBvc2l0aW9uOiAncG9zaXRpb24nLAogICAgICAnYXNzaWduLWlzLW9wZW4nOiAnYXNzaWduSXNPcGVuKGlzT3BlbiknLAogICAgICBkZWJvdW5jZTogJ2RlYm91bmNlVXBkYXRlJwogICAgfSk7CiAgICAvL2N1c3RvbSBpdGVtIHRlbXBsYXRlCiAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoYXR0cnMudHlwZWFoZWFkVGVtcGxhdGVVcmwpKSB7CiAgICAgIHBvcFVwRWwuYXR0cigndGVtcGxhdGUtdXJsJywgYXR0cnMudHlwZWFoZWFkVGVtcGxhdGVVcmwpOwogICAgfQoKICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChhdHRycy50eXBlYWhlYWRQb3B1cFRlbXBsYXRlVXJsKSkgewogICAgICBwb3BVcEVsLmF0dHIoJ3BvcHVwLXRlbXBsYXRlLXVybCcsIGF0dHJzLnR5cGVhaGVhZFBvcHVwVGVtcGxhdGVVcmwpOwogICAgfQoKICAgIHZhciByZXNldEhpbnQgPSBmdW5jdGlvbigpIHsKICAgICAgaWYgKHNob3dIaW50KSB7CiAgICAgICAgaGludElucHV0RWxlbS52YWwoJycpOwogICAgICB9CiAgICB9OwoKICAgIHZhciByZXNldE1hdGNoZXMgPSBmdW5jdGlvbigpIHsKICAgICAgc2NvcGUubWF0Y2hlcyA9IFtdOwogICAgICBzY29wZS5hY3RpdmVJZHggPSAtMTsKICAgICAgZWxlbWVudC5hdHRyKCdhcmlhLWV4cGFuZGVkJywgZmFsc2UpOwogICAgICByZXNldEhpbnQoKTsKICAgIH07CgogICAgdmFyIGdldE1hdGNoSWQgPSBmdW5jdGlvbihpbmRleCkgewogICAgICByZXR1cm4gcG9wdXBJZCArICctb3B0aW9uLScgKyBpbmRleDsKICAgIH07CgogICAgLy8gSW5kaWNhdGUgdGhhdCB0aGUgc3BlY2lmaWVkIG1hdGNoIGlzIHRoZSBhY3RpdmUgKHByZS1zZWxlY3RlZCkgaXRlbSBpbiB0aGUgbGlzdCBvd25lZCBieSB0aGlzIHR5cGVhaGVhZC4KICAgIC8vIFRoaXMgYXR0cmlidXRlIGlzIGFkZGVkIG9yIHJlbW92ZWQgYXV0b21hdGljYWxseSB3aGVuIHRoZSBgYWN0aXZlSWR4YCBjaGFuZ2VzLgogICAgc2NvcGUuJHdhdGNoKCdhY3RpdmVJZHgnLCBmdW5jdGlvbihpbmRleCkgewogICAgICBpZiAoaW5kZXggPCAwKSB7CiAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyKCdhcmlhLWFjdGl2ZWRlc2NlbmRhbnQnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBlbGVtZW50LmF0dHIoJ2FyaWEtYWN0aXZlZGVzY2VuZGFudCcsIGdldE1hdGNoSWQoaW5kZXgpKTsKICAgICAgfQogICAgfSk7CgogICAgdmFyIGlucHV0SXNFeGFjdE1hdGNoID0gZnVuY3Rpb24oaW5wdXRWYWx1ZSwgaW5kZXgpIHsKICAgICAgaWYgKHNjb3BlLm1hdGNoZXMubGVuZ3RoID4gaW5kZXggJiYgaW5wdXRWYWx1ZSkgewogICAgICAgIHJldHVybiBpbnB1dFZhbHVlLnRvVXBwZXJDYXNlKCkgPT09IHNjb3BlLm1hdGNoZXNbaW5kZXhdLmxhYmVsLnRvVXBwZXJDYXNlKCk7CiAgICAgIH0KCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH07CgogICAgdmFyIGdldE1hdGNoZXNBc3luYyA9IGZ1bmN0aW9uKGlucHV0VmFsdWUsIGV2dCkgewogICAgICB2YXIgbG9jYWxzID0geyR2aWV3VmFsdWU6IGlucHV0VmFsdWV9OwogICAgICBpc0xvYWRpbmdTZXR0ZXIob3JpZ2luYWxTY29wZSwgdHJ1ZSk7CiAgICAgIGlzTm9SZXN1bHRzU2V0dGVyKG9yaWdpbmFsU2NvcGUsIGZhbHNlKTsKICAgICAgJHEud2hlbihwYXJzZXJSZXN1bHQuc291cmNlKG9yaWdpbmFsU2NvcGUsIGxvY2FscykpLnRoZW4oZnVuY3Rpb24obWF0Y2hlcykgewogICAgICAgIC8vaXQgbWlnaHQgaGFwcGVuIHRoYXQgc2V2ZXJhbCBhc3luYyBxdWVyaWVzIHdlcmUgaW4gcHJvZ3Jlc3MgaWYgYSB1c2VyIHdlcmUgdHlwaW5nIGZhc3QKICAgICAgICAvL2J1dCB3ZSBhcmUgaW50ZXJlc3RlZCBvbmx5IGluIHJlc3BvbnNlcyB0aGF0IGNvcnJlc3BvbmQgdG8gdGhlIGN1cnJlbnQgdmlldyB2YWx1ZQogICAgICAgIHZhciBvbkN1cnJlbnRSZXF1ZXN0ID0gaW5wdXRWYWx1ZSA9PT0gbW9kZWxDdHJsLiR2aWV3VmFsdWU7CiAgICAgICAgaWYgKG9uQ3VycmVudFJlcXVlc3QgJiYgaGFzRm9jdXMpIHsKICAgICAgICAgIGlmIChtYXRjaGVzICYmIG1hdGNoZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICBzY29wZS5hY3RpdmVJZHggPSBmb2N1c0ZpcnN0ID8gMCA6IC0xOwogICAgICAgICAgICBpc05vUmVzdWx0c1NldHRlcihvcmlnaW5hbFNjb3BlLCBmYWxzZSk7CiAgICAgICAgICAgIHNjb3BlLm1hdGNoZXMubGVuZ3RoID0gMDsKCiAgICAgICAgICAgIC8vdHJhbnNmb3JtIGxhYmVscwogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hdGNoZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICBsb2NhbHNbcGFyc2VyUmVzdWx0Lml0ZW1OYW1lXSA9IG1hdGNoZXNbaV07CiAgICAgICAgICAgICAgc2NvcGUubWF0Y2hlcy5wdXNoKHsKICAgICAgICAgICAgICAgIGlkOiBnZXRNYXRjaElkKGkpLAogICAgICAgICAgICAgICAgbGFiZWw6IHBhcnNlclJlc3VsdC52aWV3TWFwcGVyKHNjb3BlLCBsb2NhbHMpLAogICAgICAgICAgICAgICAgbW9kZWw6IG1hdGNoZXNbaV0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgc2NvcGUucXVlcnkgPSBpbnB1dFZhbHVlOwogICAgICAgICAgICAvL3Bvc2l0aW9uIHBvcC11cCB3aXRoIG1hdGNoZXMgLSB3ZSBuZWVkIHRvIHJlLWNhbGN1bGF0ZSBpdHMgcG9zaXRpb24gZWFjaCB0aW1lIHdlIGFyZSBvcGVuaW5nIGEgd2luZG93CiAgICAgICAgICAgIC8vd2l0aCBtYXRjaGVzIGFzIGEgcG9wLXVwIG1pZ2h0IGJlIGFic29sdXRlLXBvc2l0aW9uZWQgYW5kIHBvc2l0aW9uIG9mIGFuIGlucHV0IG1pZ2h0IGhhdmUgY2hhbmdlZCBvbiBhIHBhZ2UKICAgICAgICAgICAgLy9kdWUgdG8gb3RoZXIgZWxlbWVudHMgYmVpbmcgcmVuZGVyZWQKICAgICAgICAgICAgcmVjYWxjdWxhdGVQb3NpdGlvbigpOwoKICAgICAgICAgICAgZWxlbWVudC5hdHRyKCdhcmlhLWV4cGFuZGVkJywgdHJ1ZSk7CgogICAgICAgICAgICAvL1NlbGVjdCB0aGUgc2luZ2xlIHJlbWFpbmluZyBvcHRpb24gaWYgdXNlciBpbnB1dCBtYXRjaGVzCiAgICAgICAgICAgIGlmIChzZWxlY3RPbkV4YWN0ICYmIHNjb3BlLm1hdGNoZXMubGVuZ3RoID09PSAxICYmIGlucHV0SXNFeGFjdE1hdGNoKGlucHV0VmFsdWUsIDApKSB7CiAgICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNOdW1iZXIoc2NvcGUuZGVib3VuY2VVcGRhdGUpIHx8IGFuZ3VsYXIuaXNPYmplY3Qoc2NvcGUuZGVib3VuY2VVcGRhdGUpKSB7CiAgICAgICAgICAgICAgICAkJGRlYm91bmNlKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICBzY29wZS5zZWxlY3QoMCwgZXZ0KTsKICAgICAgICAgICAgICAgIH0sIGFuZ3VsYXIuaXNOdW1iZXIoc2NvcGUuZGVib3VuY2VVcGRhdGUpID8gc2NvcGUuZGVib3VuY2VVcGRhdGUgOiBzY29wZS5kZWJvdW5jZVVwZGF0ZVsnZGVmYXVsdCddKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgc2NvcGUuc2VsZWN0KDAsIGV2dCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoc2hvd0hpbnQpIHsKICAgICAgICAgICAgICB2YXIgZmlyc3RMYWJlbCA9IHNjb3BlLm1hdGNoZXNbMF0ubGFiZWw7CiAgICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNTdHJpbmcoaW5wdXRWYWx1ZSkgJiYKICAgICAgICAgICAgICAgIGlucHV0VmFsdWUubGVuZ3RoID4gMCAmJgogICAgICAgICAgICAgICAgZmlyc3RMYWJlbC5zbGljZSgwLCBpbnB1dFZhbHVlLmxlbmd0aCkudG9VcHBlckNhc2UoKSA9PT0gaW5wdXRWYWx1ZS50b1VwcGVyQ2FzZSgpKSB7CiAgICAgICAgICAgICAgICBoaW50SW5wdXRFbGVtLnZhbChpbnB1dFZhbHVlICsgZmlyc3RMYWJlbC5zbGljZShpbnB1dFZhbHVlLmxlbmd0aCkpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBoaW50SW5wdXRFbGVtLnZhbCgnJyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXNldE1hdGNoZXMoKTsKICAgICAgICAgICAgaXNOb1Jlc3VsdHNTZXR0ZXIob3JpZ2luYWxTY29wZSwgdHJ1ZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChvbkN1cnJlbnRSZXF1ZXN0KSB7CiAgICAgICAgICBpc0xvYWRpbmdTZXR0ZXIob3JpZ2luYWxTY29wZSwgZmFsc2UpOwogICAgICAgIH0KICAgICAgfSwgZnVuY3Rpb24oKSB7CiAgICAgICAgcmVzZXRNYXRjaGVzKCk7CiAgICAgICAgaXNMb2FkaW5nU2V0dGVyKG9yaWdpbmFsU2NvcGUsIGZhbHNlKTsKICAgICAgICBpc05vUmVzdWx0c1NldHRlcihvcmlnaW5hbFNjb3BlLCB0cnVlKTsKICAgICAgfSk7CiAgICB9OwoKICAgIC8vIGJpbmQgZXZlbnRzIG9ubHkgaWYgYXBwZW5kVG9Cb2R5IHBhcmFtcyBleGlzdCAtIHBlcmZvcm1hbmNlIGZlYXR1cmUKICAgIGlmIChhcHBlbmRUb0JvZHkpIHsKICAgICAgYW5ndWxhci5lbGVtZW50KCR3aW5kb3cpLm9uKCdyZXNpemUnLCBmaXJlUmVjYWxjdWxhdGluZyk7CiAgICAgICRkb2N1bWVudC5maW5kKCdib2R5Jykub24oJ3Njcm9sbCcsIGZpcmVSZWNhbGN1bGF0aW5nKTsKICAgIH0KCiAgICAvLyBEZWNsYXJlIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gb3V0c2lkZSByZWNhbGN1bGF0aW5nIGZvcgogICAgLy8gcHJvcGVyIGRlYm91bmNpbmcKICAgIHZhciBkZWJvdW5jZWRSZWNhbGN1bGF0ZSA9ICQkZGVib3VuY2UoZnVuY3Rpb24oKSB7CiAgICAgIC8vIGlmIHBvcHVwIGlzIHZpc2libGUKICAgICAgaWYgKHNjb3BlLm1hdGNoZXMubGVuZ3RoKSB7CiAgICAgICAgcmVjYWxjdWxhdGVQb3NpdGlvbigpOwogICAgICB9CgogICAgICBzY29wZS5tb3ZlSW5Qcm9ncmVzcyA9IGZhbHNlOwogICAgfSwgZXZlbnREZWJvdW5jZVRpbWUpOwoKICAgIC8vIERlZmF1bHQgcHJvZ3Jlc3MgdHlwZQogICAgc2NvcGUubW92ZUluUHJvZ3Jlc3MgPSBmYWxzZTsKCiAgICBmdW5jdGlvbiBmaXJlUmVjYWxjdWxhdGluZygpIHsKICAgICAgaWYgKCFzY29wZS5tb3ZlSW5Qcm9ncmVzcykgewogICAgICAgIHNjb3BlLm1vdmVJblByb2dyZXNzID0gdHJ1ZTsKICAgICAgICBzY29wZS4kZGlnZXN0KCk7CiAgICAgIH0KCiAgICAgIGRlYm91bmNlZFJlY2FsY3VsYXRlKCk7CiAgICB9CgogICAgLy8gcmVjYWxjdWxhdGUgYWN0dWFsIHBvc2l0aW9uIGFuZCBzZXQgbmV3IHZhbHVlcyB0byBzY29wZQogICAgLy8gYWZ0ZXIgZGlnZXN0IGxvb3AgaXMgcG9wdXAgaW4gcmlnaHQgcG9zaXRpb24KICAgIGZ1bmN0aW9uIHJlY2FsY3VsYXRlUG9zaXRpb24oKSB7CiAgICAgIHNjb3BlLnBvc2l0aW9uID0gYXBwZW5kVG9Cb2R5ID8gJHBvc2l0aW9uLm9mZnNldChlbGVtZW50KSA6ICRwb3NpdGlvbi5wb3NpdGlvbihlbGVtZW50KTsKICAgICAgc2NvcGUucG9zaXRpb24udG9wICs9IGVsZW1lbnQucHJvcCgnb2Zmc2V0SGVpZ2h0Jyk7CiAgICB9CgogICAgLy93ZSBuZWVkIHRvIHByb3BhZ2F0ZSB1c2VyJ3MgcXVlcnkgc28gd2UgY2FuIGhpZ2xpZ2h0IG1hdGNoZXMKICAgIHNjb3BlLnF1ZXJ5ID0gdW5kZWZpbmVkOwoKICAgIC8vRGVjbGFyZSB0aGUgdGltZW91dCBwcm9taXNlIHZhciBvdXRzaWRlIHRoZSBmdW5jdGlvbiBzY29wZSBzbyB0aGF0IHN0YWNrZWQgY2FsbHMgY2FuIGJlIGNhbmNlbGxlZCBsYXRlcgogICAgdmFyIHRpbWVvdXRQcm9taXNlOwoKICAgIHZhciBzY2hlZHVsZVNlYXJjaFdpdGhUaW1lb3V0ID0gZnVuY3Rpb24oaW5wdXRWYWx1ZSkgewogICAgICB0aW1lb3V0UHJvbWlzZSA9ICR0aW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgIGdldE1hdGNoZXNBc3luYyhpbnB1dFZhbHVlKTsKICAgICAgfSwgd2FpdFRpbWUpOwogICAgfTsKCiAgICB2YXIgY2FuY2VsUHJldmlvdXNUaW1lb3V0ID0gZnVuY3Rpb24oKSB7CiAgICAgIGlmICh0aW1lb3V0UHJvbWlzZSkgewogICAgICAgICR0aW1lb3V0LmNhbmNlbCh0aW1lb3V0UHJvbWlzZSk7CiAgICAgIH0KICAgIH07CgogICAgcmVzZXRNYXRjaGVzKCk7CgogICAgc2NvcGUuYXNzaWduSXNPcGVuID0gZnVuY3Rpb24gKGlzT3BlbikgewogICAgICBpc09wZW5TZXR0ZXIob3JpZ2luYWxTY29wZSwgaXNPcGVuKTsKICAgIH07CgogICAgc2NvcGUuc2VsZWN0ID0gZnVuY3Rpb24oYWN0aXZlSWR4LCBldnQpIHsKICAgICAgLy9jYWxsZWQgZnJvbSB3aXRoaW4gdGhlICRkaWdlc3QoKSBjeWNsZQogICAgICB2YXIgbG9jYWxzID0ge307CiAgICAgIHZhciBtb2RlbCwgaXRlbTsKCiAgICAgIHNlbGVjdGVkID0gdHJ1ZTsKICAgICAgbG9jYWxzW3BhcnNlclJlc3VsdC5pdGVtTmFtZV0gPSBpdGVtID0gc2NvcGUubWF0Y2hlc1thY3RpdmVJZHhdLm1vZGVsOwogICAgICBtb2RlbCA9IHBhcnNlclJlc3VsdC5tb2RlbE1hcHBlcihvcmlnaW5hbFNjb3BlLCBsb2NhbHMpOwogICAgICAkc2V0TW9kZWxWYWx1ZShvcmlnaW5hbFNjb3BlLCBtb2RlbCk7CiAgICAgIG1vZGVsQ3RybC4kc2V0VmFsaWRpdHkoJ2VkaXRhYmxlJywgdHJ1ZSk7CiAgICAgIG1vZGVsQ3RybC4kc2V0VmFsaWRpdHkoJ3BhcnNlJywgdHJ1ZSk7CgogICAgICBvblNlbGVjdENhbGxiYWNrKG9yaWdpbmFsU2NvcGUsIHsKICAgICAgICAkaXRlbTogaXRlbSwKICAgICAgICAkbW9kZWw6IG1vZGVsLAogICAgICAgICRsYWJlbDogcGFyc2VyUmVzdWx0LnZpZXdNYXBwZXIob3JpZ2luYWxTY29wZSwgbG9jYWxzKSwKICAgICAgICAkZXZlbnQ6IGV2dAogICAgICB9KTsKCiAgICAgIHJlc2V0TWF0Y2hlcygpOwoKICAgICAgLy9yZXR1cm4gZm9jdXMgdG8gdGhlIGlucHV0IGVsZW1lbnQgaWYgYSBtYXRjaCB3YXMgc2VsZWN0ZWQgdmlhIGEgbW91c2UgY2xpY2sgZXZlbnQKICAgICAgLy8gdXNlIHRpbWVvdXQgdG8gYXZvaWQgJHJvb3RTY29wZTppbnByb2cgZXJyb3IKICAgICAgaWYgKHNjb3BlLiRldmFsKGF0dHJzLnR5cGVhaGVhZEZvY3VzT25TZWxlY3QpICE9PSBmYWxzZSkgewogICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkgeyBlbGVtZW50WzBdLmZvY3VzKCk7IH0sIDAsIGZhbHNlKTsKICAgICAgfQogICAgfTsKCiAgICAvL2JpbmQga2V5Ym9hcmQgZXZlbnRzOiBhcnJvd3MgdXAoMzgpIC8gZG93big0MCksIGVudGVyKDEzKSBhbmQgdGFiKDkpLCBlc2MoMjcpCiAgICBlbGVtZW50Lm9uKCdrZXlkb3duJywgZnVuY3Rpb24oZXZ0KSB7CiAgICAgIC8vdHlwZWFoZWFkIGlzIG9wZW4gYW5kIGFuICJpbnRlcmVzdGluZyIga2V5IHdhcyBwcmVzc2VkCiAgICAgIGlmIChzY29wZS5tYXRjaGVzLmxlbmd0aCA9PT0gMCB8fCBIT1RfS0VZUy5pbmRleE9mKGV2dC53aGljaCkgPT09IC0xKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgc2hvdWxkU2VsZWN0ID0gaXNTZWxlY3RFdmVudChvcmlnaW5hbFNjb3BlLCB7JGV2ZW50OiBldnR9KTsKCiAgICAgIC8qKgogICAgICAgKiBpZiB0aGVyZSdzIG5vdGhpbmcgc2VsZWN0ZWQgKGkuZS4gZm9jdXNGaXJzdCkgYW5kIGVudGVyIG9yIHRhYiBpcyBoaXQKICAgICAgICogb3IKICAgICAgICogc2hpZnQgKyB0YWIgaXMgcHJlc3NlZCB0byBicmluZyBmb2N1cyB0byB0aGUgcHJldmlvdXMgZWxlbWVudAogICAgICAgKiB0aGVuIGNsZWFyIHRoZSByZXN1bHRzCiAgICAgICAqLwogICAgICBpZiAoc2NvcGUuYWN0aXZlSWR4ID09PSAtMSAmJiBzaG91bGRTZWxlY3QgfHwgZXZ0LndoaWNoID09PSA5ICYmICEhZXZ0LnNoaWZ0S2V5KSB7CiAgICAgICAgcmVzZXRNYXRjaGVzKCk7CiAgICAgICAgc2NvcGUuJGRpZ2VzdCgpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciB0YXJnZXQ7CiAgICAgIHN3aXRjaCAoZXZ0LndoaWNoKSB7CiAgICAgICAgY2FzZSAyNzogLy8gZXNjYXBlCiAgICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7CgogICAgICAgICAgcmVzZXRNYXRjaGVzKCk7CiAgICAgICAgICBvcmlnaW5hbFNjb3BlLiRkaWdlc3QoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgMzg6IC8vIHVwIGFycm93CiAgICAgICAgICBzY29wZS5hY3RpdmVJZHggPSAoc2NvcGUuYWN0aXZlSWR4ID4gMCA/IHNjb3BlLmFjdGl2ZUlkeCA6IHNjb3BlLm1hdGNoZXMubGVuZ3RoKSAtIDE7CiAgICAgICAgICBzY29wZS4kZGlnZXN0KCk7CiAgICAgICAgICB0YXJnZXQgPSBwb3BVcEVsWzBdLnF1ZXJ5U2VsZWN0b3JBbGwoJy51aWItdHlwZWFoZWFkLW1hdGNoJylbc2NvcGUuYWN0aXZlSWR4XTsKICAgICAgICAgIHRhcmdldC5wYXJlbnROb2RlLnNjcm9sbFRvcCA9IHRhcmdldC5vZmZzZXRUb3A7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIDQwOiAvLyBkb3duIGFycm93CiAgICAgICAgICBzY29wZS5hY3RpdmVJZHggPSAoc2NvcGUuYWN0aXZlSWR4ICsgMSkgJSBzY29wZS5tYXRjaGVzLmxlbmd0aDsKICAgICAgICAgIHNjb3BlLiRkaWdlc3QoKTsKICAgICAgICAgIHRhcmdldCA9IHBvcFVwRWxbMF0ucXVlcnlTZWxlY3RvckFsbCgnLnVpYi10eXBlYWhlYWQtbWF0Y2gnKVtzY29wZS5hY3RpdmVJZHhdOwogICAgICAgICAgdGFyZ2V0LnBhcmVudE5vZGUuc2Nyb2xsVG9wID0gdGFyZ2V0Lm9mZnNldFRvcDsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICBpZiAoc2hvdWxkU2VsZWN0KSB7CiAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHsKICAgICAgICAgICAgICBpZiAoYW5ndWxhci5pc051bWJlcihzY29wZS5kZWJvdW5jZVVwZGF0ZSkgfHwgYW5ndWxhci5pc09iamVjdChzY29wZS5kZWJvdW5jZVVwZGF0ZSkpIHsKICAgICAgICAgICAgICAgICQkZGVib3VuY2UoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgIHNjb3BlLnNlbGVjdChzY29wZS5hY3RpdmVJZHgsIGV2dCk7CiAgICAgICAgICAgICAgICB9LCBhbmd1bGFyLmlzTnVtYmVyKHNjb3BlLmRlYm91bmNlVXBkYXRlKSA/IHNjb3BlLmRlYm91bmNlVXBkYXRlIDogc2NvcGUuZGVib3VuY2VVcGRhdGVbJ2RlZmF1bHQnXSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHNjb3BlLnNlbGVjdChzY29wZS5hY3RpdmVJZHgsIGV2dCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgfQogICAgfSk7CgogICAgZWxlbWVudC5iaW5kKCdmb2N1cycsIGZ1bmN0aW9uIChldnQpIHsKICAgICAgaGFzRm9jdXMgPSB0cnVlOwogICAgICBpZiAobWluTGVuZ3RoID09PSAwICYmICFtb2RlbEN0cmwuJHZpZXdWYWx1ZSkgewogICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgZ2V0TWF0Y2hlc0FzeW5jKG1vZGVsQ3RybC4kdmlld1ZhbHVlLCBldnQpOwogICAgICAgIH0sIDApOwogICAgICB9CiAgICB9KTsKCiAgICBlbGVtZW50LmJpbmQoJ2JsdXInLCBmdW5jdGlvbihldnQpIHsKICAgICAgaWYgKGlzU2VsZWN0T25CbHVyICYmIHNjb3BlLm1hdGNoZXMubGVuZ3RoICYmIHNjb3BlLmFjdGl2ZUlkeCAhPT0gLTEgJiYgIXNlbGVjdGVkKSB7CiAgICAgICAgc2VsZWN0ZWQgPSB0cnVlOwogICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHsKICAgICAgICAgIGlmIChhbmd1bGFyLmlzT2JqZWN0KHNjb3BlLmRlYm91bmNlVXBkYXRlKSAmJiBhbmd1bGFyLmlzTnVtYmVyKHNjb3BlLmRlYm91bmNlVXBkYXRlLmJsdXIpKSB7CiAgICAgICAgICAgICQkZGVib3VuY2UoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgc2NvcGUuc2VsZWN0KHNjb3BlLmFjdGl2ZUlkeCwgZXZ0KTsKICAgICAgICAgICAgfSwgc2NvcGUuZGVib3VuY2VVcGRhdGUuYmx1cik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzY29wZS5zZWxlY3Qoc2NvcGUuYWN0aXZlSWR4LCBldnQpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICAgIGlmICghaXNFZGl0YWJsZSAmJiBtb2RlbEN0cmwuJGVycm9yLmVkaXRhYmxlKSB7CiAgICAgICAgbW9kZWxDdHJsLiRzZXRWaWV3VmFsdWUoKTsKICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7CiAgICAgICAgICAvLyBSZXNldCB2YWxpZGl0eSBhcyB3ZSBhcmUgY2xlYXJpbmcKICAgICAgICAgIG1vZGVsQ3RybC4kc2V0VmFsaWRpdHkoJ2VkaXRhYmxlJywgdHJ1ZSk7CiAgICAgICAgICBtb2RlbEN0cmwuJHNldFZhbGlkaXR5KCdwYXJzZScsIHRydWUpOwogICAgICAgIH0pOwogICAgICAgIGVsZW1lbnQudmFsKCcnKTsKICAgICAgfQogICAgICBoYXNGb2N1cyA9IGZhbHNlOwogICAgICBzZWxlY3RlZCA9IGZhbHNlOwogICAgfSk7CgogICAgLy8gS2VlcCByZWZlcmVuY2UgdG8gY2xpY2sgaGFuZGxlciB0byB1bmJpbmQgaXQuCiAgICB2YXIgZGlzbWlzc0NsaWNrSGFuZGxlciA9IGZ1bmN0aW9uKGV2dCkgewogICAgICAvLyBJc3N1ZSAjMzk3MwogICAgICAvLyBGaXJlZm94IHRyZWF0cyByaWdodCBjbGljayBhcyBhIGNsaWNrIG9uIGRvY3VtZW50CiAgICAgIGlmIChlbGVtZW50WzBdICE9PSBldnQudGFyZ2V0ICYmIGV2dC53aGljaCAhPT0gMyAmJiBzY29wZS5tYXRjaGVzLmxlbmd0aCAhPT0gMCkgewogICAgICAgIHJlc2V0TWF0Y2hlcygpOwogICAgICAgIGlmICghJHJvb3RTY29wZS4kJHBoYXNlKSB7CiAgICAgICAgICBvcmlnaW5hbFNjb3BlLiRkaWdlc3QoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgJGRvY3VtZW50Lm9uKCdjbGljaycsIGRpc21pc3NDbGlja0hhbmRsZXIpOwoKICAgIG9yaWdpbmFsU2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkgewogICAgICAkZG9jdW1lbnQub2ZmKCdjbGljaycsIGRpc21pc3NDbGlja0hhbmRsZXIpOwogICAgICBpZiAoYXBwZW5kVG9Cb2R5IHx8IGFwcGVuZFRvKSB7CiAgICAgICAgJHBvcHVwLnJlbW92ZSgpOwogICAgICB9CgogICAgICBpZiAoYXBwZW5kVG9Cb2R5KSB7CiAgICAgICAgYW5ndWxhci5lbGVtZW50KCR3aW5kb3cpLm9mZigncmVzaXplJywgZmlyZVJlY2FsY3VsYXRpbmcpOwogICAgICAgICRkb2N1bWVudC5maW5kKCdib2R5Jykub2ZmKCdzY3JvbGwnLCBmaXJlUmVjYWxjdWxhdGluZyk7CiAgICAgIH0KICAgICAgLy8gUHJldmVudCBqUXVlcnkgY2FjaGUgbWVtb3J5IGxlYWsKICAgICAgcG9wVXBFbC5yZW1vdmUoKTsKCiAgICAgIGlmIChzaG93SGludCkgewogICAgICAgICAgaW5wdXRzQ29udGFpbmVyLnJlbW92ZSgpOwogICAgICB9CiAgICB9KTsKCiAgICB2YXIgJHBvcHVwID0gJGNvbXBpbGUocG9wVXBFbCkoc2NvcGUpOwoKICAgIGlmIChhcHBlbmRUb0JvZHkpIHsKICAgICAgJGRvY3VtZW50LmZpbmQoJ2JvZHknKS5hcHBlbmQoJHBvcHVwKTsKICAgIH0gZWxzZSBpZiAoYXBwZW5kVG8pIHsKICAgICAgYW5ndWxhci5lbGVtZW50KGFwcGVuZFRvKS5lcSgwKS5hcHBlbmQoJHBvcHVwKTsKICAgIH0gZWxzZSB7CiAgICAgIGVsZW1lbnQuYWZ0ZXIoJHBvcHVwKTsKICAgIH0KCiAgICB0aGlzLmluaXQgPSBmdW5jdGlvbihfbW9kZWxDdHJsLCBfbmdNb2RlbE9wdGlvbnMpIHsKICAgICAgbW9kZWxDdHJsID0gX21vZGVsQ3RybDsKICAgICAgbmdNb2RlbE9wdGlvbnMgPSBfbmdNb2RlbE9wdGlvbnM7CgogICAgICBzY29wZS5kZWJvdW5jZVVwZGF0ZSA9IG1vZGVsQ3RybC4kb3B0aW9ucyAmJiAkcGFyc2UobW9kZWxDdHJsLiRvcHRpb25zLmRlYm91bmNlKShvcmlnaW5hbFNjb3BlKTsKCiAgICAgIC8vcGx1ZyBpbnRvICRwYXJzZXJzIHBpcGVsaW5lIHRvIG9wZW4gYSB0eXBlYWhlYWQgb24gdmlldyBjaGFuZ2VzIGluaXRpYXRlZCBmcm9tIERPTQogICAgICAvLyRwYXJzZXJzIGtpY2staW4gb24gYWxsIHRoZSBjaGFuZ2VzIGNvbWluZyBmcm9tIHRoZSB2aWV3IGFzIHdlbGwgYXMgbWFudWFsbHkgdHJpZ2dlcmVkIGJ5ICRzZXRWaWV3VmFsdWUKICAgICAgbW9kZWxDdHJsLiRwYXJzZXJzLnVuc2hpZnQoZnVuY3Rpb24oaW5wdXRWYWx1ZSkgewogICAgICAgIGhhc0ZvY3VzID0gdHJ1ZTsKCiAgICAgICAgaWYgKG1pbkxlbmd0aCA9PT0gMCB8fCBpbnB1dFZhbHVlICYmIGlucHV0VmFsdWUubGVuZ3RoID49IG1pbkxlbmd0aCkgewogICAgICAgICAgaWYgKHdhaXRUaW1lID4gMCkgewogICAgICAgICAgICBjYW5jZWxQcmV2aW91c1RpbWVvdXQoKTsKICAgICAgICAgICAgc2NoZWR1bGVTZWFyY2hXaXRoVGltZW91dChpbnB1dFZhbHVlKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGdldE1hdGNoZXNBc3luYyhpbnB1dFZhbHVlKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgaXNMb2FkaW5nU2V0dGVyKG9yaWdpbmFsU2NvcGUsIGZhbHNlKTsKICAgICAgICAgIGNhbmNlbFByZXZpb3VzVGltZW91dCgpOwogICAgICAgICAgcmVzZXRNYXRjaGVzKCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoaXNFZGl0YWJsZSkgewogICAgICAgICAgcmV0dXJuIGlucHV0VmFsdWU7CiAgICAgICAgfQoKICAgICAgICBpZiAoIWlucHV0VmFsdWUpIHsKICAgICAgICAgIC8vIFJlc2V0IGluIGNhc2UgdXNlciBoYWQgdHlwZWQgc29tZXRoaW5nIHByZXZpb3VzbHkuCiAgICAgICAgICBtb2RlbEN0cmwuJHNldFZhbGlkaXR5KCdlZGl0YWJsZScsIHRydWUpOwogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQoKICAgICAgICBtb2RlbEN0cmwuJHNldFZhbGlkaXR5KCdlZGl0YWJsZScsIGZhbHNlKTsKICAgICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgICB9KTsKCiAgICAgIG1vZGVsQ3RybC4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKG1vZGVsVmFsdWUpIHsKICAgICAgICB2YXIgY2FuZGlkYXRlVmlld1ZhbHVlLCBlbXB0eVZpZXdWYWx1ZTsKICAgICAgICB2YXIgbG9jYWxzID0ge307CgogICAgICAgIC8vIFRoZSB2YWxpZGl0eSBtYXkgYmUgc2V0IHRvIGZhbHNlIHZpYSAkcGFyc2VycyAoc2VlIGFib3ZlKSBpZgogICAgICAgIC8vIHRoZSBtb2RlbCBpcyByZXN0cmljdGVkIHRvIHNlbGVjdGVkIHZhbHVlcy4gSWYgdGhlIG1vZGVsCiAgICAgICAgLy8gaXMgc2V0IG1hbnVhbGx5IGl0IGlzIGNvbnNpZGVyZWQgdG8gYmUgdmFsaWQuCiAgICAgICAgaWYgKCFpc0VkaXRhYmxlKSB7CiAgICAgICAgICBtb2RlbEN0cmwuJHNldFZhbGlkaXR5KCdlZGl0YWJsZScsIHRydWUpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGlucHV0Rm9ybWF0dGVyKSB7CiAgICAgICAgICBsb2NhbHMuJG1vZGVsID0gbW9kZWxWYWx1ZTsKICAgICAgICAgIHJldHVybiBpbnB1dEZvcm1hdHRlcihvcmlnaW5hbFNjb3BlLCBsb2NhbHMpOwogICAgICAgIH0KCiAgICAgICAgLy9pdCBtaWdodCBoYXBwZW4gdGhhdCB3ZSBkb24ndCBoYXZlIGVub3VnaCBpbmZvIHRvIHByb3Blcmx5IHJlbmRlciBpbnB1dCB2YWx1ZQogICAgICAgIC8vd2UgbmVlZCB0byBjaGVjayBmb3IgdGhpcyBzaXR1YXRpb24gYW5kIHNpbXBseSByZXR1cm4gbW9kZWwgdmFsdWUgaWYgd2UgY2FuJ3QgYXBwbHkgY3VzdG9tIGZvcm1hdHRpbmcKICAgICAgICBsb2NhbHNbcGFyc2VyUmVzdWx0Lml0ZW1OYW1lXSA9IG1vZGVsVmFsdWU7CiAgICAgICAgY2FuZGlkYXRlVmlld1ZhbHVlID0gcGFyc2VyUmVzdWx0LnZpZXdNYXBwZXIob3JpZ2luYWxTY29wZSwgbG9jYWxzKTsKICAgICAgICBsb2NhbHNbcGFyc2VyUmVzdWx0Lml0ZW1OYW1lXSA9IHVuZGVmaW5lZDsKICAgICAgICBlbXB0eVZpZXdWYWx1ZSA9IHBhcnNlclJlc3VsdC52aWV3TWFwcGVyKG9yaWdpbmFsU2NvcGUsIGxvY2Fscyk7CgogICAgICAgIHJldHVybiBjYW5kaWRhdGVWaWV3VmFsdWUgIT09IGVtcHR5Vmlld1ZhbHVlID8gY2FuZGlkYXRlVmlld1ZhbHVlIDogbW9kZWxWYWx1ZTsKICAgICAgfSk7CiAgICB9OwogIH1dKQoKICAuZGlyZWN0aXZlKCd1aWJUeXBlYWhlYWQnLCBmdW5jdGlvbigpIHsKICAgIHJldHVybiB7CiAgICAgIGNvbnRyb2xsZXI6ICdVaWJUeXBlYWhlYWRDb250cm9sbGVyJywKICAgICAgcmVxdWlyZTogWyduZ01vZGVsJywgJ14/bmdNb2RlbE9wdGlvbnMnLCAndWliVHlwZWFoZWFkJ10sCiAgICAgIGxpbms6IGZ1bmN0aW9uKG9yaWdpbmFsU2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjdHJscykgewogICAgICAgIGN0cmxzWzJdLmluaXQoY3RybHNbMF0sIGN0cmxzWzFdKTsKICAgICAgfQogICAgfTsKICB9KQoKICAuZGlyZWN0aXZlKCd1aWJUeXBlYWhlYWRQb3B1cCcsIFsnJCRkZWJvdW5jZScsIGZ1bmN0aW9uKCQkZGVib3VuY2UpIHsKICAgIHJldHVybiB7CiAgICAgIHNjb3BlOiB7CiAgICAgICAgbWF0Y2hlczogJz0nLAogICAgICAgIHF1ZXJ5OiAnPScsCiAgICAgICAgYWN0aXZlOiAnPScsCiAgICAgICAgcG9zaXRpb246ICcmJywKICAgICAgICBtb3ZlSW5Qcm9ncmVzczogJz0nLAogICAgICAgIHNlbGVjdDogJyYnLAogICAgICAgIGFzc2lnbklzT3BlbjogJyYnLAogICAgICAgIGRlYm91bmNlOiAnJicKICAgICAgfSwKICAgICAgcmVwbGFjZTogdHJ1ZSwKICAgICAgdGVtcGxhdGVVcmw6IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHJzKSB7CiAgICAgICAgcmV0dXJuIGF0dHJzLnBvcHVwVGVtcGxhdGVVcmwgfHwgJ3VpYi90ZW1wbGF0ZS90eXBlYWhlYWQvdHlwZWFoZWFkLXBvcHVwLmh0bWwnOwogICAgICB9LAogICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpIHsKICAgICAgICBzY29wZS50ZW1wbGF0ZVVybCA9IGF0dHJzLnRlbXBsYXRlVXJsOwoKICAgICAgICBzY29wZS5pc09wZW4gPSBmdW5jdGlvbigpIHsKICAgICAgICAgIHZhciBpc0Ryb3Bkb3duT3BlbiA9IHNjb3BlLm1hdGNoZXMubGVuZ3RoID4gMDsKICAgICAgICAgIHNjb3BlLmFzc2lnbklzT3Blbih7IGlzT3BlbjogaXNEcm9wZG93bk9wZW4gfSk7CiAgICAgICAgICByZXR1cm4gaXNEcm9wZG93bk9wZW47CiAgICAgICAgfTsKCiAgICAgICAgc2NvcGUuaXNBY3RpdmUgPSBmdW5jdGlvbihtYXRjaElkeCkgewogICAgICAgICAgcmV0dXJuIHNjb3BlLmFjdGl2ZSA9PT0gbWF0Y2hJZHg7CiAgICAgICAgfTsKCiAgICAgICAgc2NvcGUuc2VsZWN0QWN0aXZlID0gZnVuY3Rpb24obWF0Y2hJZHgpIHsKICAgICAgICAgIHNjb3BlLmFjdGl2ZSA9IG1hdGNoSWR4OwogICAgICAgIH07CgogICAgICAgIHNjb3BlLnNlbGVjdE1hdGNoID0gZnVuY3Rpb24oYWN0aXZlSWR4LCBldnQpIHsKICAgICAgICAgIHZhciBkZWJvdW5jZSA9IHNjb3BlLmRlYm91bmNlKCk7CiAgICAgICAgICBpZiAoYW5ndWxhci5pc051bWJlcihkZWJvdW5jZSkgfHwgYW5ndWxhci5pc09iamVjdChkZWJvdW5jZSkpIHsKICAgICAgICAgICAgJCRkZWJvdW5jZShmdW5jdGlvbigpIHsKICAgICAgICAgICAgICBzY29wZS5zZWxlY3Qoe2FjdGl2ZUlkeDogYWN0aXZlSWR4LCBldnQ6IGV2dH0pOwogICAgICAgICAgICB9LCBhbmd1bGFyLmlzTnVtYmVyKGRlYm91bmNlKSA/IGRlYm91bmNlIDogZGVib3VuY2VbJ2RlZmF1bHQnXSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzY29wZS5zZWxlY3Qoe2FjdGl2ZUlkeDogYWN0aXZlSWR4LCBldnQ6IGV2dH0pOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0KICAgIH07CiAgfV0pCgogIC5kaXJlY3RpdmUoJ3VpYlR5cGVhaGVhZE1hdGNoJywgWyckdGVtcGxhdGVSZXF1ZXN0JywgJyRjb21waWxlJywgJyRwYXJzZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZVJlcXVlc3QsICRjb21waWxlLCAkcGFyc2UpIHsKICAgIHJldHVybiB7CiAgICAgIHNjb3BlOiB7CiAgICAgICAgaW5kZXg6ICc9JywKICAgICAgICBtYXRjaDogJz0nLAogICAgICAgIHF1ZXJ5OiAnPScKICAgICAgfSwKICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7CiAgICAgICAgdmFyIHRwbFVybCA9ICRwYXJzZShhdHRycy50ZW1wbGF0ZVVybCkoc2NvcGUuJHBhcmVudCkgfHwgJ3VpYi90ZW1wbGF0ZS90eXBlYWhlYWQvdHlwZWFoZWFkLW1hdGNoLmh0bWwnOwogICAgICAgICR0ZW1wbGF0ZVJlcXVlc3QodHBsVXJsKS50aGVuKGZ1bmN0aW9uKHRwbENvbnRlbnQpIHsKICAgICAgICAgIHZhciB0cGxFbCA9IGFuZ3VsYXIuZWxlbWVudCh0cGxDb250ZW50LnRyaW0oKSk7CiAgICAgICAgICBlbGVtZW50LnJlcGxhY2VXaXRoKHRwbEVsKTsKICAgICAgICAgICRjb21waWxlKHRwbEVsKShzY29wZSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH07CiAgfV0pCgogIC5maWx0ZXIoJ3VpYlR5cGVhaGVhZEhpZ2hsaWdodCcsIFsnJHNjZScsICckaW5qZWN0b3InLCAnJGxvZycsIGZ1bmN0aW9uKCRzY2UsICRpbmplY3RvciwgJGxvZykgewogICAgdmFyIGlzU2FuaXRpemVQcmVzZW50OwogICAgaXNTYW5pdGl6ZVByZXNlbnQgPSAkaW5qZWN0b3IuaGFzKCckc2FuaXRpemUnKTsKCiAgICBmdW5jdGlvbiBlc2NhcGVSZWdleHAocXVlcnlUb0VzY2FwZSkgewogICAgICAvLyBSZWdleDogY2FwdHVyZSB0aGUgd2hvbGUgcXVlcnkgc3RyaW5nIGFuZCByZXBsYWNlIGl0IHdpdGggdGhlIHN0cmluZyB0aGF0IHdpbGwgYmUgdXNlZCB0byBtYXRjaAogICAgICAvLyB0aGUgcmVzdWx0cywgZm9yIGV4YW1wbGUgaWYgdGhlIGNhcHR1cmUgaXMgImEiIHRoZSByZXN1bHQgd2lsbCBiZSBcYQogICAgICByZXR1cm4gcXVlcnlUb0VzY2FwZS5yZXBsYWNlKC8oWy4/KiteJFtcXVxcKCl7fXwtXSkvZywgJ1xcJDEnKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjb250YWluc0h0bWwobWF0Y2hJdGVtKSB7CiAgICAgIHJldHVybiAvPC4qPi9nLnRlc3QobWF0Y2hJdGVtKTsKICAgIH0KCiAgICByZXR1cm4gZnVuY3Rpb24obWF0Y2hJdGVtLCBxdWVyeSkgewogICAgICBpZiAoIWlzU2FuaXRpemVQcmVzZW50ICYmIGNvbnRhaW5zSHRtbChtYXRjaEl0ZW0pKSB7CiAgICAgICAgJGxvZy53YXJuKCdVbnNhZmUgdXNlIG9mIHR5cGVhaGVhZCBwbGVhc2UgdXNlIG5nU2FuaXRpemUnKTsgLy8gV2FybiB0aGUgdXNlciBhYm91dCB0aGUgZGFuZ2VyCiAgICAgIH0KICAgICAgbWF0Y2hJdGVtID0gcXVlcnkgPyAoJycgKyBtYXRjaEl0ZW0pLnJlcGxhY2UobmV3IFJlZ0V4cChlc2NhcGVSZWdleHAocXVlcnkpLCAnZ2knKSwgJzxzdHJvbmc+JCY8L3N0cm9uZz4nKSA6IG1hdGNoSXRlbTsgLy8gUmVwbGFjZXMgdGhlIGNhcHR1cmUgc3RyaW5nIHdpdGggYSB0aGUgc2FtZSBzdHJpbmcgaW5zaWRlIG9mIGEgInN0cm9uZyIgdGFnCiAgICAgIGlmICghaXNTYW5pdGl6ZVByZXNlbnQpIHsKICAgICAgICBtYXRjaEl0ZW0gPSAkc2NlLnRydXN0QXNIdG1sKG1hdGNoSXRlbSk7IC8vIElmICRzYW5pdGl6ZSBpcyBub3QgcHJlc2VudCB3ZSBwYWNrIHRoZSBzdHJpbmcgaW4gYSAkc2NlIG9iamVjdCBmb3IgdGhlIG5nLWJpbmQtaHRtbCBkaXJlY3RpdmUKICAgICAgfQogICAgICByZXR1cm4gbWF0Y2hJdGVtOwogICAgfTsKICB9XSk7CmFuZ3VsYXIubW9kdWxlKCd1aS5ib290c3RyYXAuY2Fyb3VzZWwnKS5ydW4oZnVuY3Rpb24oKSB7IWFuZ3VsYXIuJCRjc3AoKS5ub0lubGluZVN0eWxlICYmICFhbmd1bGFyLiQkdWliQ2Fyb3VzZWxDc3MgJiYgYW5ndWxhci5lbGVtZW50KGRvY3VtZW50KS5maW5kKCdoZWFkJykucHJlcGVuZCgnPHN0eWxlIHR5cGU9InRleHQvY3NzIj4ubmctYW5pbWF0ZS5pdGVtOm5vdCgubGVmdCk6bm90KC5yaWdodCl7LXdlYmtpdC10cmFuc2l0aW9uOjBzIGVhc2UtaW4tb3V0IGxlZnQ7dHJhbnNpdGlvbjowcyBlYXNlLWluLW91dCBsZWZ0fTwvc3R5bGU+Jyk7IGFuZ3VsYXIuJCR1aWJDYXJvdXNlbENzcyA9IHRydWU7IH0pOwphbmd1bGFyLm1vZHVsZSgndWkuYm9vdHN0cmFwLmRhdGVwaWNrZXInKS5ydW4oZnVuY3Rpb24oKSB7IWFuZ3VsYXIuJCRjc3AoKS5ub0lubGluZVN0eWxlICYmICFhbmd1bGFyLiQkdWliRGF0ZXBpY2tlckNzcyAmJiBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQpLmZpbmQoJ2hlYWQnKS5wcmVwZW5kKCc8c3R5bGUgdHlwZT0idGV4dC9jc3MiPi51aWItZGF0ZXBpY2tlciAudWliLXRpdGxle3dpZHRoOjEwMCU7fS51aWItZGF5IGJ1dHRvbiwudWliLW1vbnRoIGJ1dHRvbiwudWliLXllYXIgYnV0dG9ue21pbi13aWR0aDoxMDAlO30udWliLWxlZnQsLnVpYi1yaWdodHt3aWR0aDoxMDAlfTwvc3R5bGU+Jyk7IGFuZ3VsYXIuJCR1aWJEYXRlcGlja2VyQ3NzID0gdHJ1ZTsgfSk7CmFuZ3VsYXIubW9kdWxlKCd1aS5ib290c3RyYXAucG9zaXRpb24nKS5ydW4oZnVuY3Rpb24oKSB7IWFuZ3VsYXIuJCRjc3AoKS5ub0lubGluZVN0eWxlICYmICFhbmd1bGFyLiQkdWliUG9zaXRpb25Dc3MgJiYgYW5ndWxhci5lbGVtZW50KGRvY3VtZW50KS5maW5kKCdoZWFkJykucHJlcGVuZCgnPHN0eWxlIHR5cGU9InRleHQvY3NzIj4udWliLXBvc2l0aW9uLW1lYXN1cmV7ZGlzcGxheTpibG9jayAhaW1wb3J0YW50O3Zpc2liaWxpdHk6aGlkZGVuICFpbXBvcnRhbnQ7cG9zaXRpb246YWJzb2x1dGUgIWltcG9ydGFudDt0b3A6LTk5OTlweCAhaW1wb3J0YW50O2xlZnQ6LTk5OTlweCAhaW1wb3J0YW50O30udWliLXBvc2l0aW9uLXNjcm9sbGJhci1tZWFzdXJle3Bvc2l0aW9uOmFic29sdXRlICFpbXBvcnRhbnQ7dG9wOi05OTk5cHggIWltcG9ydGFudDt3aWR0aDo1MHB4ICFpbXBvcnRhbnQ7aGVpZ2h0OjUwcHggIWltcG9ydGFudDtvdmVyZmxvdzpzY3JvbGwgIWltcG9ydGFudDt9LnVpYi1wb3NpdGlvbi1ib2R5LXNjcm9sbGJhci1tZWFzdXJle292ZXJmbG93OnNjcm9sbCAhaW1wb3J0YW50O308L3N0eWxlPicpOyBhbmd1bGFyLiQkdWliUG9zaXRpb25Dc3MgPSB0cnVlOyB9KTsKYW5ndWxhci5tb2R1bGUoJ3VpLmJvb3RzdHJhcC5kYXRlcGlja2VyUG9wdXAnKS5ydW4oZnVuY3Rpb24oKSB7IWFuZ3VsYXIuJCRjc3AoKS5ub0lubGluZVN0eWxlICYmICFhbmd1bGFyLiQkdWliRGF0ZXBpY2tlcnBvcHVwQ3NzICYmIGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudCkuZmluZCgnaGVhZCcpLnByZXBlbmQoJzxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+LnVpYi1kYXRlcGlja2VyLXBvcHVwLmRyb3Bkb3duLW1lbnV7ZGlzcGxheTpibG9jaztmbG9hdDpub25lO21hcmdpbjowO30udWliLWJ1dHRvbi1iYXJ7cGFkZGluZzoxMHB4IDlweCAycHg7fTwvc3R5bGU+Jyk7IGFuZ3VsYXIuJCR1aWJEYXRlcGlja2VycG9wdXBDc3MgPSB0cnVlOyB9KTsKYW5ndWxhci5tb2R1bGUoJ3VpLmJvb3RzdHJhcC50b29sdGlwJykucnVuKGZ1bmN0aW9uKCkgeyFhbmd1bGFyLiQkY3NwKCkubm9JbmxpbmVTdHlsZSAmJiAhYW5ndWxhci4kJHVpYlRvb2x0aXBDc3MgJiYgYW5ndWxhci5lbGVtZW50KGRvY3VtZW50KS5maW5kKCdoZWFkJykucHJlcGVuZCgnPHN0eWxlIHR5cGU9InRleHQvY3NzIj5bdWliLXRvb2x0aXAtcG9wdXBdLnRvb2x0aXAudG9wLWxlZnQgPiAudG9vbHRpcC1hcnJvdyxbdWliLXRvb2x0aXAtcG9wdXBdLnRvb2x0aXAudG9wLXJpZ2h0ID4gLnRvb2x0aXAtYXJyb3csW3VpYi10b29sdGlwLXBvcHVwXS50b29sdGlwLmJvdHRvbS1sZWZ0ID4gLnRvb2x0aXAtYXJyb3csW3VpYi10b29sdGlwLXBvcHVwXS50b29sdGlwLmJvdHRvbS1yaWdodCA+IC50b29sdGlwLWFycm93LFt1aWItdG9vbHRpcC1wb3B1cF0udG9vbHRpcC5sZWZ0LXRvcCA+IC50b29sdGlwLWFycm93LFt1aWItdG9vbHRpcC1wb3B1cF0udG9vbHRpcC5sZWZ0LWJvdHRvbSA+IC50b29sdGlwLWFycm93LFt1aWItdG9vbHRpcC1wb3B1cF0udG9vbHRpcC5yaWdodC10b3AgPiAudG9vbHRpcC1hcnJvdyxbdWliLXRvb2x0aXAtcG9wdXBdLnRvb2x0aXAucmlnaHQtYm90dG9tID4gLnRvb2x0aXAtYXJyb3csW3VpYi10b29sdGlwLWh0bWwtcG9wdXBdLnRvb2x0aXAudG9wLWxlZnQgPiAudG9vbHRpcC1hcnJvdyxbdWliLXRvb2x0aXAtaHRtbC1wb3B1cF0udG9vbHRpcC50b3AtcmlnaHQgPiAudG9vbHRpcC1hcnJvdyxbdWliLXRvb2x0aXAtaHRtbC1wb3B1cF0udG9vbHRpcC5ib3R0b20tbGVmdCA+IC50b29sdGlwLWFycm93LFt1aWItdG9vbHRpcC1odG1sLXBvcHVwXS50b29sdGlwLmJvdHRvbS1yaWdodCA+IC50b29sdGlwLWFycm93LFt1aWItdG9vbHRpcC1odG1sLXBvcHVwXS50b29sdGlwLmxlZnQtdG9wID4gLnRvb2x0aXAtYXJyb3csW3VpYi10b29sdGlwLWh0bWwtcG9wdXBdLnRvb2x0aXAubGVmdC1ib3R0b20gPiAudG9vbHRpcC1hcnJvdyxbdWliLXRvb2x0aXAtaHRtbC1wb3B1cF0udG9vbHRpcC5yaWdodC10b3AgPiAudG9vbHRpcC1hcnJvdyxbdWliLXRvb2x0aXAtaHRtbC1wb3B1cF0udG9vbHRpcC5yaWdodC1ib3R0b20gPiAudG9vbHRpcC1hcnJvdyxbdWliLXRvb2x0aXAtdGVtcGxhdGUtcG9wdXBdLnRvb2x0aXAudG9wLWxlZnQgPiAudG9vbHRpcC1hcnJvdyxbdWliLXRvb2x0aXAtdGVtcGxhdGUtcG9wdXBdLnRvb2x0aXAudG9wLXJpZ2h0ID4gLnRvb2x0aXAtYXJyb3csW3VpYi10b29sdGlwLXRlbXBsYXRlLXBvcHVwXS50b29sdGlwLmJvdHRvbS1sZWZ0ID4gLnRvb2x0aXAtYXJyb3csW3VpYi10b29sdGlwLXRlbXBsYXRlLXBvcHVwXS50b29sdGlwLmJvdHRvbS1yaWdodCA+IC50b29sdGlwLWFycm93LFt1aWItdG9vbHRpcC10ZW1wbGF0ZS1wb3B1cF0udG9vbHRpcC5sZWZ0LXRvcCA+IC50b29sdGlwLWFycm93LFt1aWItdG9vbHRpcC10ZW1wbGF0ZS1wb3B1cF0udG9vbHRpcC5sZWZ0LWJvdHRvbSA+IC50b29sdGlwLWFycm93LFt1aWItdG9vbHRpcC10ZW1wbGF0ZS1wb3B1cF0udG9vbHRpcC5yaWdodC10b3AgPiAudG9vbHRpcC1hcnJvdyxbdWliLXRvb2x0aXAtdGVtcGxhdGUtcG9wdXBdLnRvb2x0aXAucmlnaHQtYm90dG9tID4gLnRvb2x0aXAtYXJyb3csW3VpYi1wb3BvdmVyLXBvcHVwXS5wb3BvdmVyLnRvcC1sZWZ0ID4gLmFycm93LFt1aWItcG9wb3Zlci1wb3B1cF0ucG9wb3Zlci50b3AtcmlnaHQgPiAuYXJyb3csW3VpYi1wb3BvdmVyLXBvcHVwXS5wb3BvdmVyLmJvdHRvbS1sZWZ0ID4gLmFycm93LFt1aWItcG9wb3Zlci1wb3B1cF0ucG9wb3Zlci5ib3R0b20tcmlnaHQgPiAuYXJyb3csW3VpYi1wb3BvdmVyLXBvcHVwXS5wb3BvdmVyLmxlZnQtdG9wID4gLmFycm93LFt1aWItcG9wb3Zlci1wb3B1cF0ucG9wb3Zlci5sZWZ0LWJvdHRvbSA+IC5hcnJvdyxbdWliLXBvcG92ZXItcG9wdXBdLnBvcG92ZXIucmlnaHQtdG9wID4gLmFycm93LFt1aWItcG9wb3Zlci1wb3B1cF0ucG9wb3Zlci5yaWdodC1ib3R0b20gPiAuYXJyb3csW3VpYi1wb3BvdmVyLWh0bWwtcG9wdXBdLnBvcG92ZXIudG9wLWxlZnQgPiAuYXJyb3csW3VpYi1wb3BvdmVyLWh0bWwtcG9wdXBdLnBvcG92ZXIudG9wLXJpZ2h0ID4gLmFycm93LFt1aWItcG9wb3Zlci1odG1sLXBvcHVwXS5wb3BvdmVyLmJvdHRvbS1sZWZ0ID4gLmFycm93LFt1aWItcG9wb3Zlci1odG1sLXBvcHVwXS5wb3BvdmVyLmJvdHRvbS1yaWdodCA+IC5hcnJvdyxbdWliLXBvcG92ZXItaHRtbC1wb3B1cF0ucG9wb3Zlci5sZWZ0LXRvcCA+IC5hcnJvdyxbdWliLXBvcG92ZXItaHRtbC1wb3B1cF0ucG9wb3Zlci5sZWZ0LWJvdHRvbSA+IC5hcnJvdyxbdWliLXBvcG92ZXItaHRtbC1wb3B1cF0ucG9wb3Zlci5yaWdodC10b3AgPiAuYXJyb3csW3VpYi1wb3BvdmVyLWh0bWwtcG9wdXBdLnBvcG92ZXIucmlnaHQtYm90dG9tID4gLmFycm93LFt1aWItcG9wb3Zlci10ZW1wbGF0ZS1wb3B1cF0ucG9wb3Zlci50b3AtbGVmdCA+IC5hcnJvdyxbdWliLXBvcG92ZXItdGVtcGxhdGUtcG9wdXBdLnBvcG92ZXIudG9wLXJpZ2h0ID4gLmFycm93LFt1aWItcG9wb3Zlci10ZW1wbGF0ZS1wb3B1cF0ucG9wb3Zlci5ib3R0b20tbGVmdCA+IC5hcnJvdyxbdWliLXBvcG92ZXItdGVtcGxhdGUtcG9wdXBdLnBvcG92ZXIuYm90dG9tLXJpZ2h0ID4gLmFycm93LFt1aWItcG9wb3Zlci10ZW1wbGF0ZS1wb3B1cF0ucG9wb3Zlci5sZWZ0LXRvcCA+IC5hcnJvdyxbdWliLXBvcG92ZXItdGVtcGxhdGUtcG9wdXBdLnBvcG92ZXIubGVmdC1ib3R0b20gPiAuYXJyb3csW3VpYi1wb3BvdmVyLXRlbXBsYXRlLXBvcHVwXS5wb3BvdmVyLnJpZ2h0LXRvcCA+IC5hcnJvdyxbdWliLXBvcG92ZXItdGVtcGxhdGUtcG9wdXBdLnBvcG92ZXIucmlnaHQtYm90dG9tID4gLmFycm93e3RvcDphdXRvO2JvdHRvbTphdXRvO2xlZnQ6YXV0bztyaWdodDphdXRvO21hcmdpbjowO31bdWliLXBvcG92ZXItcG9wdXBdLnBvcG92ZXIsW3VpYi1wb3BvdmVyLWh0bWwtcG9wdXBdLnBvcG92ZXIsW3VpYi1wb3BvdmVyLXRlbXBsYXRlLXBvcHVwXS5wb3BvdmVye2Rpc3BsYXk6YmxvY2sgIWltcG9ydGFudDt9PC9zdHlsZT4nKTsgYW5ndWxhci4kJHVpYlRvb2x0aXBDc3MgPSB0cnVlOyB9KTsKYW5ndWxhci5tb2R1bGUoJ3VpLmJvb3RzdHJhcC50aW1lcGlja2VyJykucnVuKGZ1bmN0aW9uKCkgeyFhbmd1bGFyLiQkY3NwKCkubm9JbmxpbmVTdHlsZSAmJiAhYW5ndWxhci4kJHVpYlRpbWVwaWNrZXJDc3MgJiYgYW5ndWxhci5lbGVtZW50KGRvY3VtZW50KS5maW5kKCdoZWFkJykucHJlcGVuZCgnPHN0eWxlIHR5cGU9InRleHQvY3NzIj4udWliLXRpbWUgaW5wdXR7d2lkdGg6NTBweDt9PC9zdHlsZT4nKTsgYW5ndWxhci4kJHVpYlRpbWVwaWNrZXJDc3MgPSB0cnVlOyB9KTsKYW5ndWxhci5tb2R1bGUoJ3VpLmJvb3RzdHJhcC50eXBlYWhlYWQnKS5ydW4oZnVuY3Rpb24oKSB7IWFuZ3VsYXIuJCRjc3AoKS5ub0lubGluZVN0eWxlICYmICFhbmd1bGFyLiQkdWliVHlwZWFoZWFkQ3NzICYmIGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudCkuZmluZCgnaGVhZCcpLnByZXBlbmQoJzxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+W3VpYi10eXBlYWhlYWQtcG9wdXBdLmRyb3Bkb3duLW1lbnV7ZGlzcGxheTpibG9jazt9PC9zdHlsZT4nKTsgYW5ndWxhci4kJHVpYlR5cGVhaGVhZENzcyA9IHRydWU7IH0pOwovKiEgCiAqIGFuZ3VsYXItbG9hZGluZy1iYXIgdjAuOS4wCiAqIGh0dHBzOi8vY2hpZWZmYW5jeXBhbnRzLmdpdGh1Yi5pby9hbmd1bGFyLWxvYWRpbmctYmFyCiAqIENvcHlyaWdodCAoYykgMjAxNiBXZXMgQ3J1dmVyCiAqIExpY2Vuc2U6IE1JVAogKi8KIWZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2FuZ3VsYXIubW9kdWxlKCJhbmd1bGFyLWxvYWRpbmctYmFyIixbImNmcC5sb2FkaW5nQmFySW50ZXJjZXB0b3IiXSksYW5ndWxhci5tb2R1bGUoImNoaWVmZmFuY3lwYW50cy5sb2FkaW5nQmFyIixbImNmcC5sb2FkaW5nQmFySW50ZXJjZXB0b3IiXSksYW5ndWxhci5tb2R1bGUoImNmcC5sb2FkaW5nQmFySW50ZXJjZXB0b3IiLFsiY2ZwLmxvYWRpbmdCYXIiXSkuY29uZmlnKFsiJGh0dHBQcm92aWRlciIsZnVuY3Rpb24oYSl7dmFyIGI9WyIkcSIsIiRjYWNoZUZhY3RvcnkiLCIkdGltZW91dCIsIiRyb290U2NvcGUiLCIkbG9nIiwiY2ZwTG9hZGluZ0JhciIsZnVuY3Rpb24oYixjLGQsZSxmLGcpe2Z1bmN0aW9uIGgoKXtkLmNhbmNlbChqKSxnLmNvbXBsZXRlKCksbD0wLGs9MH1mdW5jdGlvbiBpKGIpe3ZhciBkLGU9Yy5nZXQoIiRodHRwIiksZj1hLmRlZmF1bHRzOyFiLmNhY2hlJiYhZi5jYWNoZXx8Yi5jYWNoZT09PSExfHwiR0VUIiE9PWIubWV0aG9kJiYiSlNPTlAiIT09Yi5tZXRob2R8fChkPWFuZ3VsYXIuaXNPYmplY3QoYi5jYWNoZSk/Yi5jYWNoZTphbmd1bGFyLmlzT2JqZWN0KGYuY2FjaGUpP2YuY2FjaGU6ZSk7dmFyIGc9dm9pZCAwIT09ZD92b2lkIDAhPT1kLmdldChiLnVybCk6ITE7cmV0dXJuIHZvaWQgMCE9PWIuY2FjaGVkJiZnIT09Yi5jYWNoZWQ/Yi5jYWNoZWQ6KGIuY2FjaGVkPWcsZyl9dmFyIGosaz0wLGw9MCxtPWcubGF0ZW5jeVRocmVzaG9sZDtyZXR1cm57cmVxdWVzdDpmdW5jdGlvbihhKXtyZXR1cm4gYS5pZ25vcmVMb2FkaW5nQmFyfHxpKGEpfHwoZS4kYnJvYWRjYXN0KCJjZnBMb2FkaW5nQmFyOmxvYWRpbmciLHt1cmw6YS51cmx9KSwwPT09ayYmKGo9ZChmdW5jdGlvbigpe2cuc3RhcnQoKX0sbSkpLGsrKyxnLnNldChsL2spKSxhfSxyZXNwb25zZTpmdW5jdGlvbihhKXtyZXR1cm4gYSYmYS5jb25maWc/KGEuY29uZmlnLmlnbm9yZUxvYWRpbmdCYXJ8fGkoYS5jb25maWcpfHwobCsrLGUuJGJyb2FkY2FzdCgiY2ZwTG9hZGluZ0Jhcjpsb2FkZWQiLHt1cmw6YS5jb25maWcudXJsLHJlc3VsdDphfSksbD49az9oKCk6Zy5zZXQobC9rKSksYSk6KGYuZXJyb3IoIkJyb2tlbiBpbnRlcmNlcHRvciBkZXRlY3RlZDogQ29uZmlnIG9iamVjdCBub3Qgc3VwcGxpZWQgaW4gcmVzcG9uc2U6XG4gaHR0cHM6Ly9naXRodWIuY29tL2NoaWVmZmFuY3lwYW50cy9hbmd1bGFyLWxvYWRpbmctYmFyL3B1bGwvNTAiKSxhKX0scmVzcG9uc2VFcnJvcjpmdW5jdGlvbihhKXtyZXR1cm4gYSYmYS5jb25maWc/KGEuY29uZmlnLmlnbm9yZUxvYWRpbmdCYXJ8fGkoYS5jb25maWcpfHwobCsrLGUuJGJyb2FkY2FzdCgiY2ZwTG9hZGluZ0Jhcjpsb2FkZWQiLHt1cmw6YS5jb25maWcudXJsLHJlc3VsdDphfSksbD49az9oKCk6Zy5zZXQobC9rKSksYi5yZWplY3QoYSkpOihmLmVycm9yKCJCcm9rZW4gaW50ZXJjZXB0b3IgZGV0ZWN0ZWQ6IENvbmZpZyBvYmplY3Qgbm90IHN1cHBsaWVkIGluIHJlamVjdGlvbjpcbiBodHRwczovL2dpdGh1Yi5jb20vY2hpZWZmYW5jeXBhbnRzL2FuZ3VsYXItbG9hZGluZy1iYXIvcHVsbC81MCIpLGIucmVqZWN0KGEpKX19fV07YS5pbnRlcmNlcHRvcnMucHVzaChiKX1dKSxhbmd1bGFyLm1vZHVsZSgiY2ZwLmxvYWRpbmdCYXIiLFtdKS5wcm92aWRlcigiY2ZwTG9hZGluZ0JhciIsZnVuY3Rpb24oKXt0aGlzLmF1dG9JbmNyZW1lbnQ9ITAsdGhpcy5pbmNsdWRlU3Bpbm5lcj0hMCx0aGlzLmluY2x1ZGVCYXI9ITAsdGhpcy5sYXRlbmN5VGhyZXNob2xkPTEwMCx0aGlzLnN0YXJ0U2l6ZT0uMDIsdGhpcy5wYXJlbnRTZWxlY3Rvcj0iYm9keSIsdGhpcy5zcGlubmVyVGVtcGxhdGU9JzxkaXYgaWQ9ImxvYWRpbmctYmFyLXNwaW5uZXIiPjxkaXYgY2xhc3M9InNwaW5uZXItaWNvbiI+PC9kaXY+PC9kaXY+Jyx0aGlzLmxvYWRpbmdCYXJUZW1wbGF0ZT0nPGRpdiBpZD0ibG9hZGluZy1iYXIiPjxkaXYgY2xhc3M9ImJhciI+PGRpdiBjbGFzcz0icGVnIj48L2Rpdj48L2Rpdj48L2Rpdj4nLHRoaXMuJGdldD1bIiRpbmplY3RvciIsIiRkb2N1bWVudCIsIiR0aW1lb3V0IiwiJHJvb3RTY29wZSIsZnVuY3Rpb24oYSxiLGMsZCl7ZnVuY3Rpb24gZSgpe2lmKGt8fChrPWEuZ2V0KCIkYW5pbWF0ZSIpKSxjLmNhbmNlbChtKSwhcil7dmFyIGU9YlswXSxnPWUucXVlcnlTZWxlY3Rvcj9lLnF1ZXJ5U2VsZWN0b3Iobik6Yi5maW5kKG4pWzBdO2d8fChnPWUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImJvZHkiKVswXSk7dmFyIGg9YW5ndWxhci5lbGVtZW50KGcpLGk9Zy5sYXN0Q2hpbGQmJmFuZ3VsYXIuZWxlbWVudChnLmxhc3RDaGlsZCk7ZC4kYnJvYWRjYXN0KCJjZnBMb2FkaW5nQmFyOnN0YXJ0ZWQiKSxyPSEwLHYmJmsuZW50ZXIobyxoLGkpLHUmJmsuZW50ZXIocSxoLG8pLGYodyl9fWZ1bmN0aW9uIGYoYSl7aWYocil7dmFyIGI9MTAwKmErIiUiO3AuY3NzKCJ3aWR0aCIsYikscz1hLHQmJihjLmNhbmNlbChsKSxsPWMoZnVuY3Rpb24oKXtnKCl9LDI1MCkpfX1mdW5jdGlvbiBnKCl7aWYoIShoKCk+PTEpKXt2YXIgYT0wLGI9aCgpO2E9Yj49MCYmLjI1PmI/KDMqTWF0aC5yYW5kb20oKSszKS8xMDA6Yj49LjI1JiYuNjU+Yj8zKk1hdGgucmFuZG9tKCkvMTAwOmI+PS42NSYmLjk+Yj8yKk1hdGgucmFuZG9tKCkvMTAwOmI+PS45JiYuOTk+Yj8uMDA1OjA7dmFyIGM9aCgpK2E7ZihjKX19ZnVuY3Rpb24gaCgpe3JldHVybiBzfWZ1bmN0aW9uIGkoKXtzPTAscj0hMX1mdW5jdGlvbiBqKCl7a3x8KGs9YS5nZXQoIiRhbmltYXRlIikpLGQuJGJyb2FkY2FzdCgiY2ZwTG9hZGluZ0Jhcjpjb21wbGV0ZWQiKSxmKDEpLGMuY2FuY2VsKG0pLG09YyhmdW5jdGlvbigpe3ZhciBhPWsubGVhdmUobyxpKTthJiZhLnRoZW4mJmEudGhlbihpKSxrLmxlYXZlKHEpfSw1MDApfXZhciBrLGwsbSxuPXRoaXMucGFyZW50U2VsZWN0b3Isbz1hbmd1bGFyLmVsZW1lbnQodGhpcy5sb2FkaW5nQmFyVGVtcGxhdGUpLHA9by5maW5kKCJkaXYiKS5lcSgwKSxxPWFuZ3VsYXIuZWxlbWVudCh0aGlzLnNwaW5uZXJUZW1wbGF0ZSkscj0hMSxzPTAsdD10aGlzLmF1dG9JbmNyZW1lbnQsdT10aGlzLmluY2x1ZGVTcGlubmVyLHY9dGhpcy5pbmNsdWRlQmFyLHc9dGhpcy5zdGFydFNpemU7cmV0dXJue3N0YXJ0OmUsc2V0OmYsc3RhdHVzOmgsaW5jOmcsY29tcGxldGU6aixhdXRvSW5jcmVtZW50OnRoaXMuYXV0b0luY3JlbWVudCxpbmNsdWRlU3Bpbm5lcjp0aGlzLmluY2x1ZGVTcGlubmVyLGxhdGVuY3lUaHJlc2hvbGQ6dGhpcy5sYXRlbmN5VGhyZXNob2xkLHBhcmVudFNlbGVjdG9yOnRoaXMucGFyZW50U2VsZWN0b3Isc3RhcnRTaXplOnRoaXMuc3RhcnRTaXplfX1dfSl9KCk7Ci8qIQogKiBhbmd1bGFyLWV4dGVuZC1wcm9taXNlcyB2MS4wLjAtcmMuMyAtIDIwMTUtMDQtMjIKICogKGMpIDIwMTQtMjAxNSBMLnN5c3RlbXMgU0FSTCwgRXRpZW5uZSBGb2xpbywgUXVlbnRpbiBSYXluYXVkCiAqIGh0dHBzOi8vYml0YnVja2V0Lm9yZy9sc3lzdGVtcy9hbmd1bGFyLWV4dGVuZC1wcm9taXNlcwogKiBMaWNlbnNlOiBNSVQKICovCiFmdW5jdGlvbih0LG4peyJvYmplY3QiPT10eXBlb2YgZXhwb3J0cyYmIm9iamVjdCI9PXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9bigpOiJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKG4pOiJvYmplY3QiPT10eXBlb2YgZXhwb3J0cz9leHBvcnRzWyJhbmd1bGFyLWV4dGVuZC1wcm9taXNlcyJdPW4oKTp0WyJhbmd1bGFyLWV4dGVuZC1wcm9taXNlcyJdPW4oKX0odGhpcyxmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbih0KXtmdW5jdGlvbiBuKGUpe2lmKHJbZV0pcmV0dXJuIHJbZV0uZXhwb3J0czt2YXIgbz1yW2VdPXtleHBvcnRzOnt9LGlkOmUsbG9hZGVkOiExfTtyZXR1cm4gdFtlXS5jYWxsKG8uZXhwb3J0cyxvLG8uZXhwb3J0cyxuKSxvLmxvYWRlZD0hMCxvLmV4cG9ydHN9dmFyIHI9e307cmV0dXJuIG4ubT10LG4uYz1yLG4ucD0iIixuKDApfShbZnVuY3Rpb24odCxuLHIpeyJ1c2Ugc3RyaWN0Ijthbmd1bGFyLm1vZHVsZSgiYW5ndWxhci1leHRlbmQtcHJvbWlzZXMiLFtdKS5wcm92aWRlcigiYW5ndWxhckV4dGVuZFByb21pc2VzIixmdW5jdGlvbigpe3RoaXMub3B0aW9ucz17Y29tcGF0aWJpbGl0eUFsaWFzZXM6ITAsZGlzYWJsZUVTNU1ldGhvZHM6ITF9LHRoaXMuJGdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbnN9fSkuY29uZmlnKFsiJHByb3ZpZGUiLGZ1bmN0aW9uKHQpe2lmKGFuZ3VsYXIubW9jaylmb3IodmFyIG4gaW4gci5jKWRlbGV0ZSByLmNbbl07dC5kZWNvcmF0b3IoIiRxIixbIiRkZWxlZ2F0ZSIsImFuZ3VsYXJFeHRlbmRQcm9taXNlcyIsZnVuY3Rpb24odCxuKXt2YXIgZT1yKDEpO3JldHVybiBlLiRkZWxlZ2F0ZT10LGUuJG9wdGlvbnM9bixyKDIpfV0pfV0pfSxmdW5jdGlvbih0LG4scil7InVzZSBzdHJpY3QiO3ZhciBlPXIoMyk7ZS5leHRlbmQodC5leHBvcnRzLHskZGVmZXI6ZS5ub29wKCksJGRlbGVnYXRlOnt9LCRvcHRpb25zOnt9fSl9LGZ1bmN0aW9uKHQsbixyKXsidXNlIHN0cmljdCI7dmFyIGU9cigzKSxvPXIoMSksdT1yKDQpLGk9dC5leHBvcnRzPWZ1bmN0aW9uKHQpe2lmKCFlLmlzRnVuY3Rpb24odCkpdGhyb3cgbmV3IEVycm9yKCJyZXNvbHZlciBzaG91bGQgYmUgYSBmdW5jdGlvbiIpO3ZhciBuPWkuZGVmZXIoKTt0cnl7dChuLnJlc29sdmUsbi5yZWplY3QpfWNhdGNoKHIpe24ucmVqZWN0KHIpfXJldHVybiBuLnByb21pc2V9O2UuZXh0ZW5kKGkse2FsbDpyKDUpLGFueTpyKDYpLGJpbmQ6cig3KSxkZWZlcjpyKDgpLGVhY2g6cig5KSxmaWx0ZXI6cigxMCksbWFwOnIoMTEpLGpvaW46cigxMiksbWV0aG9kOnIoMTMpLHByb3BzOnIoMTQpLHJlZHVjZTpyKDE1KSxyZWplY3Q6cigxNikscmVzb2x2ZTpyKDE3KSxzb21lOnIoMTgpLHdoZW46cigxOSksQWdncmVnYXRlRXJyb3I6dS5BZ2dyZWdhdGVFcnJvcixUaW1lb3V0RXJyb3I6dS5UaW1lb3V0RXJyb3J9KSxvLiRvcHRpb25zLmNvbXBhdGliaWxpdHlBbGlhc2VzJiZlLmV4dGVuZChpLHthdHRlbXB0OnIoMjApfSksby4kb3B0aW9ucy5kaXNhYmxlRVM1TWV0aG9kc3x8ZS5leHRlbmQoaSx7InRyeSI6cigyMCl9KX0sZnVuY3Rpb24odCxuLHIpeyJ1c2Ugc3RyaWN0Ijt0cnl7dC5leHBvcnRzPXIoMjEpfWNhdGNoKGUpe3QuZXhwb3J0cz1ffX0sZnVuY3Rpb24odCxuLHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT10LmV4cG9ydHMuTmV3UUVycm9yPWZ1bmN0aW9uKHQpe3RoaXMubmFtZT10aGlzLmNvbnN0cnVjdG9yLm5hbWUsRXJyb3IuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMubWVzc2FnZT10LEVycm9yLmNhcHR1cmVTdGFja1RyYWNlP0Vycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsdGhpcy5jb25zdHJ1Y3Rvcik6dGhpcy5zdGFjaz0obmV3IEVycm9yKS5zdGFja307ZS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGFjay50b1N0cmluZygpfSxlLnN1YkVycm9yPWZ1bmN0aW9uKHQsbil7ZnVuY3Rpb24gcigpe31uPW58fGUsci5wcm90b3R5cGU9bi5wcm90b3R5cGUsdC5wcm90b3R5cGU9bmV3IHIsdC5wcm90b3R5cGUuY29uc3RydWN0b3I9dCx0LnN1YkVycm9yfHwodC5zdWJFcnJvcj1mdW5jdGlvbihuKXtlLnN1YkVycm9yKG4sdCl9KX0sZS5zdWJFcnJvcihlLEVycm9yKTt2YXIgbz10LmV4cG9ydHMuQWdncmVnYXRlRXJyb3I9ZnVuY3Rpb24oKXtlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07ZS5zdWJFcnJvcihvKTt2YXIgdT10LmV4cG9ydHMuVGltZW91dEVycm9yPWZ1bmN0aW9uKCl7ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2Uuc3ViRXJyb3IodSl9LGZ1bmN0aW9uKHQsbixyKXsidXNlIHN0cmljdCI7dmFyIGU9cigzKSxvPXIoMjIpLHU9cigxKSxpPXIoMik7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBlLmlzQXJyYXkodCk/KHQ9ZS5tYXAodCxmdW5jdGlvbih0KXtyZXR1cm4gaS53aGVuKHQpfSksbyh1LiRkZWxlZ2F0ZS5hbGwodCkpKTppLnByb3BzKHQpfX0sZnVuY3Rpb24odCxuLHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT1yKDIpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZS5zb21lKHQsMSkuZ2V0KDApfX0sZnVuY3Rpb24odCxuLHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT1yKDIpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZS5yZXNvbHZlKCkuYmluZCh0KX19LGZ1bmN0aW9uKHQsbixyKXsidXNlIHN0cmljdCI7dmFyIGU9cigyMiksbz1yKDEpO28uJGRlZmVyPWZ1bmN0aW9uKHQpe3ZhciBuPW8uJGRlbGVnYXRlLmRlZmVyKCk7cmV0dXJuIG4ucHJvbWlzZT1lKG4ucHJvbWlzZSx0KSxufSx0LmV4cG9ydHM9ZnVuY3Rpb24oKXtyZXR1cm4gby4kZGVmZXIoKX19LGZ1bmN0aW9uKHQsbixyKXsidXNlIHN0cmljdCI7dmFyIGU9cigyMyk7dC5leHBvcnRzPWUoInRhcCIpfSxmdW5jdGlvbih0LG4scil7InVzZSBzdHJpY3QiO3ZhciBlPXIoMyksbz1yKDIpO3QuZXhwb3J0cz1mdW5jdGlvbih0LG4scil7cmV0dXJuIG8ubWFwKHQsZnVuY3Rpb24odCl7cmV0dXJuIG8ucHJvcHMoe3ZhbDp0LHRvRmlsdGVyOm4uYXBwbHkobnVsbCxhcmd1bWVudHMpfSl9LHIpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGUubWFwKGUuZmlsdGVyKHQsInRvRmlsdGVyIiksInZhbCIpfSl9fSxmdW5jdGlvbih0LG4scil7InVzZSBzdHJpY3QiO3ZhciBlPXIoMjMpO3QuZXhwb3J0cz1lKCJ0aGVuIil9LGZ1bmN0aW9uKHQsbixyKXsidXNlIHN0cmljdCI7dmFyIGU9cigzKSxvPXIoMik7dC5leHBvcnRzPWZ1bmN0aW9uKCl7dmFyIHQ9ZS50b0FycmF5KGFyZ3VtZW50cyksbj10LnBvcCgpO3JldHVybiBvLmFsbCh0KS5zcHJlYWQobil9fSxmdW5jdGlvbih0LG4scil7InVzZSBzdHJpY3QiO3ZhciBlPXIoMjApO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZSh0LGFyZ3VtZW50cyx0aGlzKX19fSxmdW5jdGlvbih0LG4scil7InVzZSBzdHJpY3QiO3ZhciBlPXIoMyksbz1yKDIpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gby5hbGwoZS52YWx1ZXModCkpLnRoZW4oZnVuY3Rpb24obil7cmV0dXJuIGUub2JqZWN0KGUua2V5cyh0KSxuKX0pfX0sZnVuY3Rpb24odCxuLHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT1yKDMpLG89cigyKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuLHIpe3JldHVybiBlLnJlZHVjZSh0LGZ1bmN0aW9uKHIsZSx1KXtyZXR1cm4gby5qb2luKHIsZSxmdW5jdGlvbihyLGUpe3JldHVybiBuKHIsZSx1LHQubGVuZ3RoKX0pfSxvLnJlc29sdmUocikpfX0sZnVuY3Rpb24odCxuLHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT1yKDI0KTt0LmV4cG9ydHM9ZSgicmVqZWN0Iil9LGZ1bmN0aW9uKHQsbixyKXsidXNlIHN0cmljdCI7dmFyIGU9cigyKSxvPXIoMjQpO3QuZXhwb3J0cz1vKCJyZXNvbHZlIil8fGZ1bmN0aW9uKHQpe3ZhciBuPWUuZGVmZXIoKTtyZXR1cm4gbi5yZXNvbHZlKHQpLG4ucHJvbWlzZX19LGZ1bmN0aW9uKHQsbixyKXsidXNlIHN0cmljdCI7dmFyIGU9cigzKSxvPXIoMiksdT1yKDQpLkFnZ3JlZ2F0ZUVycm9yO3QuZXhwb3J0cz1mdW5jdGlvbih0LG4pe2lmKHQubGVuZ3RoPG4pcmV0dXJuIG8ucmVqZWN0KG5ldyB1KCJpbml0aWFsIGFycmF5IGxlbmd0aCAoIit0Lmxlbmd0aCsiKSA+IGNvdW50ICgiK24rIikiKSk7dmFyIHI9MCxpPVtdLGM9by5kZWZlcigpO3JldHVybiBlLmVhY2godCxmdW5jdGlvbihlKXtvLndoZW4oZSkudGFwKGZ1bmN0aW9uKHQpe251bGwhPT1pJiYoaS5wdXNoKHQpLGkubGVuZ3RoPj1uJiYoYy5yZXNvbHZlKGkpLGk9bnVsbCkpfSkuJCRjYXRjaChmdW5jdGlvbigpe251bGwhPT1pJiYoKytyLHQubGVuZ3RoLXI8biYmKGMucmVqZWN0KG5ldyB1KCJDYW5ub3QgcmVzb2x2ZSBwcm9taXNlOiB0b28gbWFueSByZWplY3Rpb25zICgiK3IrIikiKSksaT1udWxsKSl9KX0pLGMucHJvbWlzZX19LGZ1bmN0aW9uKHQsbixyKXsidXNlIHN0cmljdCI7dmFyIGU9cigyNCk7dC5leHBvcnRzPWUoIndoZW4iKX0sZnVuY3Rpb24odCxuLHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT1yKDMpLG89cigyKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuLHIpe3RyeXtyZXR1cm4gZS5pc0VtcHR5KG4pfHxlLmlzQXJyYXkobil8fGUuaXNBcmd1bWVudHMobil8fChuPVtuXSksby53aGVuKHQuYXBwbHkocnx8dGhpcyxuKSl9Y2F0Y2godSl7cmV0dXJuIG8ucmVqZWN0KHUpfX19LGZ1bmN0aW9uKHQsbixyKXt2YXIgZTsoZnVuY3Rpb24odCxvKXsoZnVuY3Rpb24oKXtmdW5jdGlvbiB1KHQpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiB0fHwhMX1mdW5jdGlvbiBpKHQpe3JldHVybiJzdHJpbmciPT10eXBlb2YgdD90Om51bGw9PXQ/IiI6dCsiIn1mdW5jdGlvbiBjKHQpe3JldHVybiEhdCYmIm9iamVjdCI9PXR5cGVvZiB0fWZ1bmN0aW9uIHMoKXt9ZnVuY3Rpb24gYSh0LG4pe3ZhciByPS0xLGU9dC5sZW5ndGg7Zm9yKG58fChuPUFycmF5KGUpKTsrK3I8ZTspbltyXT10W3JdO3JldHVybiBufWZ1bmN0aW9uIGYodCxuKXtmb3IodmFyIHI9LTEsZT10Lmxlbmd0aDsrK3I8ZSYmbih0W3JdLHIsdCkhPT0hMTspO3JldHVybiB0fWZ1bmN0aW9uIGwodCxuKXtmb3IodmFyIHI9LTEsZT10Lmxlbmd0aCxvPS0xLHU9W107KytyPGU7KXt2YXIgaT10W3JdO24oaSxyLHQpJiYodVsrK29dPWkpfXJldHVybiB1fWZ1bmN0aW9uIHAodCxuKXtmb3IodmFyIHI9LTEsZT10Lmxlbmd0aCxvPUFycmF5KGUpOysrcjxlOylvW3JdPW4odFtyXSxyLHQpO3JldHVybiBvfWZ1bmN0aW9uIGgodCxuLHIsZSl7dmFyIG89LTEsdT10Lmxlbmd0aDtmb3IoZSYmdSYmKHI9dFsrK29dKTsrK288dTspcj1uKHIsdFtvXSxvLHQpO3JldHVybiByfWZ1bmN0aW9uIHYodCxuKXtyZXR1cm4gdD09PWp0P246dH1mdW5jdGlvbiB5KHQsbixyKXt2YXIgZT16bihuKTt4bi5hcHBseShlLENuKG4pKTtmb3IodmFyIG89LTEsdT1lLmxlbmd0aDsrK288dTspe3ZhciBpPWVbb10sYz10W2ldLHM9cihjLG5baV0saSx0LG4pOyhzPT09cz9zPT09YzpjIT09YykmJihjIT09anR8fGkgaW4gdCl8fCh0W2ldPXMpfXJldHVybiB0fWZ1bmN0aW9uIGcodCxuLHIpe3J8fChyPXt9KTtmb3IodmFyIGU9LTEsbz1uLmxlbmd0aDsrK2U8bzspe3ZhciB1PW5bZV07clt1XT10W3VdfXJldHVybiByfWZ1bmN0aW9uIGQodCxuLHIpe3ZhciBlPXR5cGVvZiB0O3JldHVybiJmdW5jdGlvbiI9PWU/bj09PWp0P3Q6SSh0LG4scik6bnVsbD09dD8kdDoib2JqZWN0Ij09ZT9UKHQpOm49PT1qdD94dCh0KTprKHQsbil9ZnVuY3Rpb24gbSh0LG4pe3ZhciByPVtdO3JldHVybiBfbih0LGZ1bmN0aW9uKHQsZSxvKXtuKHQsZSxvKSYmci5wdXNoKHQpfSkscn1mdW5jdGlvbiAkKHQsbixyKXtmb3IodmFyIGU9LTEsbz10Lmxlbmd0aCx1PS0xLGk9W107KytlPG87KXt2YXIgcz10W2VdO2lmKGMocykmJkgocy5sZW5ndGgpJiYoRG4ocyl8fGl0KHMpKSl7biYmKHM9JChzLG4scikpO3ZhciBhPS0xLGY9cy5sZW5ndGg7Zm9yKGkubGVuZ3RoKz1mOysrYTxmOylpWysrdV09c1thXX1lbHNlIHJ8fChpWysrdV09cyl9cmV0dXJuIGl9ZnVuY3Rpb24gYih0LG4pe3JldHVybiBJbih0LG4sdnQpfWZ1bmN0aW9uIHgodCxuKXtyZXR1cm4gSW4odCxuLHpuKX1mdW5jdGlvbiBqKHQsbil7Zm9yKHZhciByPS0xLGU9bi5sZW5ndGgsbz0tMSx1PVtdOysrcjxlOyl7dmFyIGk9bltyXTtCbih0W2ldKSYmKHVbKytvXT1pKX1yZXR1cm4gdX1mdW5jdGlvbiBFKHQsbixyKXtpZihudWxsIT10KXt0PVoodCksciE9PWp0JiZyIGluIHQmJihuPVtyXSk7Zm9yKHZhciBlPS0xLG89bi5sZW5ndGg7bnVsbCE9dCYmKytlPG87KXZhciB1PXQ9Wih0KVtuW2VdXTtyZXR1cm4gdX19ZnVuY3Rpb24gQSh0LG4scixlLG8sdSl7aWYodD09PW4pcmV0dXJuIDAhPT10fHwxL3Q9PTEvbjt2YXIgaT10eXBlb2YgdCxjPXR5cGVvZiBuO3JldHVybiJmdW5jdGlvbiIhPWkmJiJvYmplY3QiIT1pJiYiZnVuY3Rpb24iIT1jJiYib2JqZWN0IiE9Y3x8bnVsbD09dHx8bnVsbD09bj90IT09dCYmbiE9PW46dyh0LG4sQSxyLGUsbyx1KX1mdW5jdGlvbiB3KHQsbixyLGUsbyx1LGkpe3ZhciBjPURuKHQpLHM9RG4obiksYT1PdCxmPU90O2N8fChhPW1uLmNhbGwodCksYT09d3Q/YT1MdDphIT1MdCYmKGM9bHQodCkpKSxzfHwoZj1tbi5jYWxsKG4pLGY9PXd0P2Y9THQ6ZiE9THQmJihzPWx0KG4pKSk7dmFyIGw9YT09THQmJiFsbih0KSxwPWY9PUx0JiYhbG4obiksaD1hPT1mO2lmKGgmJiFjJiYhbClyZXR1cm4gUSh0LG4sYSk7aWYoIW8pe3ZhciB2PWwmJmRuLmNhbGwodCwiX193cmFwcGVkX18iKSx5PXAmJmRuLmNhbGwobiwiX193cmFwcGVkX18iKTtpZih2fHx5KXJldHVybiByKHY/dC52YWx1ZSgpOnQseT9uLnZhbHVlKCk6bixlLG8sdSxpKX1pZighaClyZXR1cm4hMTt1fHwodT1bXSksaXx8KGk9W10pO2Zvcih2YXIgZz11Lmxlbmd0aDtnLS07KWlmKHVbZ109PXQpcmV0dXJuIGlbZ109PW47dS5wdXNoKHQpLGkucHVzaChuKTt2YXIgZD0oYz9COnEpKHQsbixyLGUsbyx1LGkpO3JldHVybiB1LnBvcCgpLGkucG9wKCksZH1mdW5jdGlvbiBPKHQsbixyLGUsbyl7Zm9yKHZhciB1PS0xLGk9bi5sZW5ndGgsYz0hbzsrK3U8aTspaWYoYyYmZVt1XT9yW3VdIT09dFtuW3VdXTohKG5bdV1pbiB0KSlyZXR1cm4hMTtmb3IodT0tMTsrK3U8aTspe3ZhciBzPW5bdV0sYT10W3NdLGY9clt1XTtpZihjJiZlW3VdKXZhciBsPWEhPT1qdHx8cyBpbiB0O2Vsc2UgbD1vP28oYSxmLHMpOmp0LGw9PT1qdCYmKGw9QShmLGEsbywhMCkpO2lmKCFsKXJldHVybiExfXJldHVybiEwfWZ1bmN0aW9uIFModCxuKXt2YXIgcj0tMSxlPU1uKHQpLG89SChlKT9BcnJheShlKTpbXTtyZXR1cm4gX24odCxmdW5jdGlvbih0LGUsdSl7b1srK3JdPW4odCxlLHUpfSksb31mdW5jdGlvbiBUKHQpe3ZhciBuPXpuKHQpLHI9bi5sZW5ndGg7aWYoIXIpcmV0dXJuIG10KCEwKTtpZigxPT1yKXt2YXIgZT1uWzBdLG89dFtlXTtpZihKKG8pKXJldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dD8hMToodD1aKHQpLHRbZV09PT1vJiYobyE9PWp0fHxlIGluIHQpKX19Zm9yKHZhciB1PUFycmF5KHIpLGk9QXJyYXkocik7ci0tOylvPXRbbltyXV0sdVtyXT1vLGlbcl09SihvKTtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIG51bGwhPXQmJk8oWih0KSxuLHUsaSl9fWZ1bmN0aW9uIGsodCxuKXt2YXIgcj1Ebih0KSxlPUcodCkmJkoobiksbz10KyIiO3JldHVybiB0PXR0KHQpLGZ1bmN0aW9uKHUpe2lmKG51bGw9PXUpcmV0dXJuITE7dmFyIGk9bztpZih1PVoodSksISghciYmZXx8aSBpbiB1KSl7aWYodT0xPT10Lmxlbmd0aD91OkUodSxMKHQsMCwtMSkpLG51bGw9PXUpcmV0dXJuITE7aT1udCh0KSx1PVoodSl9cmV0dXJuIHVbaV09PT1uP24hPT1qdHx8aSBpbiB1OkEobix1W2ldLG51bGwsITApfX1mdW5jdGlvbiBQKHQpe3JldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gbnVsbD09bj9qdDpaKG4pW3RdfX1mdW5jdGlvbiBGKHQpe3ZhciBuPXQrIiI7cmV0dXJuIHQ9dHQodCksZnVuY3Rpb24ocil7cmV0dXJuIEUocix0LG4pfX1mdW5jdGlvbiBSKHQsbixyLGUsbyl7cmV0dXJuIG8odCxmdW5jdGlvbih0LG8sdSl7cj1lPyhlPSExLHQpOm4ocix0LG8sdSl9KSxyfWZ1bmN0aW9uIEwodCxuLHIpe3ZhciBlPS0xLG89dC5sZW5ndGg7bj1udWxsPT1uPzA6K258fDAsMD5uJiYobj0tbj5vPzA6bytuKSxyPXI9PT1qdHx8cj5vP286K3J8fDAsMD5yJiYocis9byksbz1uPnI/MDpyLW4+Pj4wLG4+Pj49MDtmb3IodmFyIHU9QXJyYXkobyk7KytlPG87KXVbZV09dFtlK25dO3JldHVybiB1fWZ1bmN0aW9uIF8odCxuKXtmb3IodmFyIHI9LTEsZT1uLmxlbmd0aCxvPUFycmF5KGUpOysrcjxlOylvW3JdPXRbbltyXV07cmV0dXJuIG99ZnVuY3Rpb24gSSh0LG4scil7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQpcmV0dXJuICR0O2lmKG49PT1qdClyZXR1cm4gdDtzd2l0Y2gocil7Y2FzZSAxOnJldHVybiBmdW5jdGlvbihyKXtyZXR1cm4gdC5jYWxsKG4scil9O2Nhc2UgMzpyZXR1cm4gZnVuY3Rpb24ocixlLG8pe3JldHVybiB0LmNhbGwobixyLGUsbyl9O2Nhc2UgNDpyZXR1cm4gZnVuY3Rpb24ocixlLG8sdSl7cmV0dXJuIHQuY2FsbChuLHIsZSxvLHUpfTtjYXNlIDU6cmV0dXJuIGZ1bmN0aW9uKHIsZSxvLHUsaSl7cmV0dXJuIHQuY2FsbChuLHIsZSxvLHUsaSl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiB0LmFwcGx5KG4sYXJndW1lbnRzKX19ZnVuY3Rpb24gTSh0KXtyZXR1cm4gdXQoZnVuY3Rpb24obixyKXt2YXIgZT0tMSxvPW51bGw9PW4/MDpyLmxlbmd0aCx1PW8+MiYmcltvLTJdLGk9bz4yJiZyWzJdLGM9bz4xJiZyW28tMV07Zm9yKCJmdW5jdGlvbiI9PXR5cGVvZiB1Pyh1PUkodSxjLDUpLG8tPTIpOih1PSJmdW5jdGlvbiI9PXR5cGVvZiBjP2M6bnVsbCxvLT11PzE6MCksaSYmVyhyWzBdLHJbMV0saSkmJih1PTM+bz9udWxsOnUsbz0xKTsrK2U8bzspe3ZhciBzPXJbZV07cyYmdChuLHMsdSl9cmV0dXJuIG59KX1mdW5jdGlvbiBDKHQsbil7cmV0dXJuIGZ1bmN0aW9uKHIsZSl7dmFyIG89cj9NbihyKTowO2lmKCFIKG8pKXJldHVybiB0KHIsZSk7Zm9yKHZhciB1PW4/bzotMSxpPVoocik7KG4/dS0tOisrdTxvKSYmZShpW3VdLHUsaSkhPT0hMTspO3JldHVybiByfX1mdW5jdGlvbiBOKHQpe3JldHVybiBmdW5jdGlvbihuLHIsZSl7Zm9yKHZhciBvPVoobiksdT1lKG4pLGk9dS5sZW5ndGgsYz10P2k6LTE7dD9jLS06KytjPGk7KXt2YXIgcz11W2NdO2lmKHIob1tzXSxzLG8pPT09ITEpYnJlYWt9cmV0dXJuIG59fWZ1bmN0aW9uIFUodCxuKXtyZXR1cm4gZnVuY3Rpb24ocixlLG8pe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBlJiZvPT09anQmJkRuKHIpP3QocixlKTpuKHIsSShlLG8sMykpfX1mdW5jdGlvbiBEKHQsbil7cmV0dXJuIGZ1bmN0aW9uKHIsZSxvLHUpe3ZhciBpPWFyZ3VtZW50cy5sZW5ndGg8MztyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgZSYmdT09PWp0JiZEbihyKT90KHIsZSxvLGkpOlIocix6KGUsdSw0KSxvLGksbil9fWZ1bmN0aW9uIEIodCxuLHIsZSxvLHUsaSl7dmFyIGM9LTEscz10Lmxlbmd0aCxhPW4ubGVuZ3RoLGY9ITA7aWYocyE9YSYmIShvJiZhPnMpKXJldHVybiExO2Zvcig7ZiYmKytjPHM7KXt2YXIgbD10W2NdLHA9bltjXTtpZihmPWp0LGUmJihmPW8/ZShwLGwsYyk6ZShsLHAsYykpLGY9PT1qdClpZihvKWZvcih2YXIgaD1hO2gtLSYmKHA9bltoXSwhKGY9bCYmbD09PXB8fHIobCxwLGUsbyx1LGkpKSk7KTtlbHNlIGY9bCYmbD09PXB8fHIobCxwLGUsbyx1LGkpfXJldHVybiEhZn1mdW5jdGlvbiBRKHQsbixyKXtzd2l0Y2gocil7Y2FzZSBTdDpjYXNlIFR0OnJldHVybit0PT0rbjtjYXNlIGt0OnJldHVybiB0Lm5hbWU9PW4ubmFtZSYmdC5tZXNzYWdlPT1uLm1lc3NhZ2U7Y2FzZSBSdDpyZXR1cm4gdCE9K3Q/biE9K246MD09dD8xL3Q9PTEvbjp0PT0rbjtjYXNlIF90OmNhc2UgTXQ6cmV0dXJuIHQ9PW4rIiJ9cmV0dXJuITF9ZnVuY3Rpb24gcSh0LG4scixlLG8sdSxpKXt2YXIgYz16bih0KSxzPWMubGVuZ3RoLGE9em4obiksZj1hLmxlbmd0aDtpZihzIT1mJiYhbylyZXR1cm4hMTtmb3IodmFyIGw9byxwPS0xOysrcDxzOyl7dmFyIGg9Y1twXSx2PW8/aCBpbiBuOmRuLmNhbGwobixoKTtpZih2KXt2YXIgeT10W2hdLGc9bltoXTt2PWp0LGUmJih2PW8/ZShnLHksaCk6ZSh5LGcsaCkpLHY9PT1qdCYmKHY9eSYmeT09PWd8fHIoeSxnLGUsbyx1LGkpKX1pZighdilyZXR1cm4hMTtsfHwobD0iY29uc3RydWN0b3IiPT1oKX1pZighbCl7dmFyIGQ9dC5jb25zdHJ1Y3RvcixtPW4uY29uc3RydWN0b3I7aWYoZCE9bSYmImNvbnN0cnVjdG9yImluIHQmJiJjb25zdHJ1Y3RvciJpbiBuJiYhKCJmdW5jdGlvbiI9PXR5cGVvZiBkJiZkIGluc3RhbmNlb2YgZCYmImZ1bmN0aW9uIj09dHlwZW9mIG0mJm0gaW5zdGFuY2VvZiBtKSlyZXR1cm4hMX1yZXR1cm4hMH1mdW5jdGlvbiB6KHQsbixyKXt2YXIgZT1zLmNhbGxiYWNrfHxkdDtyZXR1cm4gZT1lPT09ZHQ/ZDplLHI/ZSh0LG4scik6ZX1mdW5jdGlvbiBWKHQsbil7cmV0dXJuIHQ9K3Qsbj1udWxsPT1uP1BuOm4sdD4tMSYmdCUxPT0wJiZuPnR9ZnVuY3Rpb24gVyh0LG4scil7aWYoIXN0KHIpKXJldHVybiExO3ZhciBlPXR5cGVvZiBuO2lmKCJudW1iZXIiPT1lKXZhciBvPU1uKHIpLHU9SChvKSYmVihuLG8pO2Vsc2UgdT0ic3RyaW5nIj09ZSYmbiBpbiByO2lmKHUpe3ZhciBpPXJbbl07cmV0dXJuIHQ9PT10P3Q9PT1pOmkhPT1pfXJldHVybiExfWZ1bmN0aW9uIEcodCxuKXt2YXIgcj10eXBlb2YgdDtpZigic3RyaW5nIj09ciYmSnQudGVzdCh0KXx8Im51bWJlciI9PXIpcmV0dXJuITA7aWYoRG4odCkpcmV0dXJuITE7dmFyIGU9IUh0LnRlc3QodCk7cmV0dXJuIGV8fG51bGwhPW4mJnQgaW4gWihuKX1mdW5jdGlvbiBIKHQpe3JldHVybiJudW1iZXIiPT10eXBlb2YgdCYmdD4tMSYmdCUxPT0wJiZQbj49dH1mdW5jdGlvbiBKKHQpe3JldHVybiB0PT09dCYmKDA9PT10PzEvdD4wOiFzdCh0KSl9ZnVuY3Rpb24gSyh0LG4pe3Q9Wih0KTtmb3IodmFyIHI9LTEsZT1uLmxlbmd0aCxvPXt9OysrcjxlOyl7dmFyIHU9bltyXTt1IGluIHQmJihvW3VdPXRbdV0pfXJldHVybiBvfWZ1bmN0aW9uIFgodCxuKXt2YXIgcj17fTtyZXR1cm4gYih0LGZ1bmN0aW9uKHQsZSxvKXtuKHQsZSxvKSYmKHJbZV09dCl9KSxyfWZ1bmN0aW9uIFkodCl7Zm9yKHZhciBuPXZ0KHQpLHI9bi5sZW5ndGgsZT1yJiZ0Lmxlbmd0aCxvPXMuc3VwcG9ydCx1PWUmJkgoZSkmJihEbih0KXx8by5ub25FbnVtU3RyaW5ncyYmZnQodCl8fG8ubm9uRW51bUFyZ3MmJml0KHQpKSxpPS0xLGM9W107KytpPHI7KXt2YXIgYT1uW2ldOyh1JiZWKGEsZSl8fGRuLmNhbGwodCxhKSkmJmMucHVzaChhKX1yZXR1cm4gY31mdW5jdGlvbiBaKHQpe2lmKHMuc3VwcG9ydC51bmluZGV4ZWRDaGFycyYmZnQodCkpe2Zvcih2YXIgbj0tMSxyPXQubGVuZ3RoLGU9T2JqZWN0KHQpOysrbjxyOyllW25dPXQuY2hhckF0KG4pO3JldHVybiBlfXJldHVybiBzdCh0KT90Ok9iamVjdCh0KX1mdW5jdGlvbiB0dCh0KXtpZihEbih0KSlyZXR1cm4gdDt2YXIgbj1bXTtyZXR1cm4gaSh0KS5yZXBsYWNlKEt0LGZ1bmN0aW9uKHQscixlLG8pe24ucHVzaChlP28ucmVwbGFjZShadCwiJDEiKTpyfHx0KX0pLG59ZnVuY3Rpb24gbnQodCl7dmFyIG49dD90Lmxlbmd0aDowO3JldHVybiBuP3Rbbi0xXTpqdH1mdW5jdGlvbiBydCh0LG4pe3ZhciByPS0xLGU9dD90Lmxlbmd0aDowLG89e307Zm9yKCFlfHxufHxEbih0WzBdKXx8KG49W10pOysrcjxlOyl7dmFyIHU9dFtyXTtuP29bdV09bltyXTp1JiYob1t1WzBdXT11WzFdKX1yZXR1cm4gb31mdW5jdGlvbiBldCh0LG4scil7dmFyIGU9RG4odCk/bDptO3JldHVybiBuPXoobixyLDMpLGUodCxuKX1mdW5jdGlvbiBvdCh0LG4scil7dmFyIGU9RG4odCk/cDpTO3JldHVybiBuPXoobixyLDMpLGUodCxuKX1mdW5jdGlvbiB1dCh0LG4pe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoQXQpO3JldHVybiBuPWtuKG49PT1qdD90Lmxlbmd0aC0xOitufHwwLDApLGZ1bmN0aW9uKCl7Zm9yKHZhciByPWFyZ3VtZW50cyxlPS0xLG89a24oci5sZW5ndGgtbiwwKSx1PUFycmF5KG8pOysrZTxvOyl1W2VdPXJbbitlXTtzd2l0Y2gobil7Y2FzZSAwOnJldHVybiB0LmNhbGwodGhpcyx1KTtjYXNlIDE6cmV0dXJuIHQuY2FsbCh0aGlzLHJbMF0sdSk7Y2FzZSAyOnJldHVybiB0LmNhbGwodGhpcyxyWzBdLHJbMV0sdSl9dmFyIGk9QXJyYXkobisxKTtmb3IoZT0tMTsrK2U8bjspaVtlXT1yW2VdO3JldHVybiBpW25dPXUsdC5hcHBseSh0aGlzLGkpfX1mdW5jdGlvbiBpdCh0KXt2YXIgbj1jKHQpP3QubGVuZ3RoOmp0O3JldHVybiBIKG4pJiZtbi5jYWxsKHQpPT13dH1mdW5jdGlvbiBjdCh0KXtpZihudWxsPT10KXJldHVybiEwO3ZhciBuPU1uKHQpO3JldHVybiBIKG4pJiYoRG4odCl8fGZ0KHQpfHxpdCh0KXx8Yyh0KSYmQm4odC5zcGxpY2UpKT8hbjohem4odCkubGVuZ3RofWZ1bmN0aW9uIHN0KHQpe3ZhciBuPXR5cGVvZiB0O3JldHVybiJmdW5jdGlvbiI9PW58fCEhdCYmIm9iamVjdCI9PW59ZnVuY3Rpb24gYXQodCl7cmV0dXJuIG51bGw9PXQ/ITE6bW4uY2FsbCh0KT09UHQ/JG4udGVzdChnbi5jYWxsKHQpKTpjKHQpJiYobG4odCk/JG46dG4pLnRlc3QodCl9ZnVuY3Rpb24gZnQodCl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0fHxjKHQpJiZtbi5jYWxsKHQpPT1NdH1mdW5jdGlvbiBsdCh0KXtyZXR1cm4gYyh0KSYmSCh0Lmxlbmd0aCkmJiEhcm5bbW4uY2FsbCh0KV19ZnVuY3Rpb24gcHQodCl7dmFyIG49dD9Nbih0KTowO3JldHVybiBIKG4pP24/cy5zdXBwb3J0LnVuaW5kZXhlZENoYXJzJiZmdCh0KT90LnNwbGl0KCIiKTphKHQpOltdOnl0KHQpfWZ1bmN0aW9uIGh0KHQpe3JldHVybiBqKHQsdnQodCkpfWZ1bmN0aW9uIHZ0KHQpe2lmKG51bGw9PXQpcmV0dXJuW107c3QodCl8fCh0PU9iamVjdCh0KSk7dmFyIG49dC5sZW5ndGgscj1zLnN1cHBvcnQ7bj1uJiZIKG4pJiYoRG4odCl8fHIubm9uRW51bVN0cmluZ3MmJmZ0KHQpfHxyLm5vbkVudW1BcmdzJiZpdCh0KSkmJm58fDA7Zm9yKHZhciBlPXQuY29uc3RydWN0b3Isbz0tMSx1PUJuKGUpJiZlLnByb3RvdHlwZXx8dm4saT11PT09dCxjPUFycmF5KG4pLGE9bj4wLGY9ci5lbnVtRXJyb3JQcm9wcyYmKHQ9PT1obnx8dCBpbnN0YW5jZW9mIEVycm9yKSxsPXIuZW51bVByb3RvdHlwZXMmJkJuKHQpOysrbzxuOyljW29dPW8rIiI7Zm9yKHZhciBwIGluIHQpbCYmInByb3RvdHlwZSI9PXB8fGYmJigibWVzc2FnZSI9PXB8fCJuYW1lIj09cCl8fGEmJlYocCxuKXx8ImNvbnN0cnVjdG9yIj09cCYmKGl8fCFkbi5jYWxsKHQscCkpfHxjLnB1c2gocCk7aWYoci5ub25FbnVtU2hhZG93cyYmdCE9PXZuKXt2YXIgaD10PT09eW4/TXQ6dD09PWhuP2t0Om1uLmNhbGwodCksdj1GbltoXXx8Rm5bTHRdO2ZvcihoPT1MdCYmKHU9dm4pLG49bm4ubGVuZ3RoO24tLTspe3A9bm5bbl07dmFyIHk9dltwXTtpJiZ5fHwoeT8hZG4uY2FsbCh0LHApOnRbcF09PT11W3BdKXx8Yy5wdXNoKHApfX1yZXR1cm4gY31mdW5jdGlvbiB5dCh0KXtyZXR1cm4gXyh0LHpuKHQpKX1mdW5jdGlvbiBndCh0KXtyZXR1cm4gdD1pKHQpLHQmJll0LnRlc3QodCk/dC5yZXBsYWNlKFh0LCJcXCQmIik6dH1mdW5jdGlvbiBkdCh0LG4scil7cmV0dXJuIHImJlcodCxuLHIpJiYobj1udWxsKSxkKHQsbil9ZnVuY3Rpb24gbXQodCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHR9fWZ1bmN0aW9uICR0KHQpe3JldHVybiB0fWZ1bmN0aW9uIGJ0KCl7fWZ1bmN0aW9uIHh0KHQpe3JldHVybiBHKHQpP1AodCk6Rih0KX12YXIganQsRXQ9IjMuNy4wIixBdD0iRXhwZWN0ZWQgYSBmdW5jdGlvbiIsd3Q9IltvYmplY3QgQXJndW1lbnRzXSIsT3Q9IltvYmplY3QgQXJyYXldIixTdD0iW29iamVjdCBCb29sZWFuXSIsVHQ9IltvYmplY3QgRGF0ZV0iLGt0PSJbb2JqZWN0IEVycm9yXSIsUHQ9IltvYmplY3QgRnVuY3Rpb25dIixGdD0iW29iamVjdCBNYXBdIixSdD0iW29iamVjdCBOdW1iZXJdIixMdD0iW29iamVjdCBPYmplY3RdIixfdD0iW29iamVjdCBSZWdFeHBdIixJdD0iW29iamVjdCBTZXRdIixNdD0iW29iamVjdCBTdHJpbmddIixDdD0iW29iamVjdCBXZWFrTWFwXSIsTnQ9IltvYmplY3QgQXJyYXlCdWZmZXJdIixVdD0iW29iamVjdCBGbG9hdDMyQXJyYXldIixEdD0iW29iamVjdCBGbG9hdDY0QXJyYXldIixCdD0iW29iamVjdCBJbnQ4QXJyYXldIixRdD0iW29iamVjdCBJbnQxNkFycmF5XSIscXQ9IltvYmplY3QgSW50MzJBcnJheV0iLHp0PSJbb2JqZWN0IFVpbnQ4QXJyYXldIixWdD0iW29iamVjdCBVaW50OENsYW1wZWRBcnJheV0iLFd0PSJbb2JqZWN0IFVpbnQxNkFycmF5XSIsR3Q9IltvYmplY3QgVWludDMyQXJyYXldIixIdD0vXC58XFsoPzpbXltcXV0rfChbIiddKSg/Oig/IVwxKVteXG5cXF18XFwuKSo/KVwxXF0vLEp0PS9eXHcqJC8sS3Q9L1teLltcXV0rfFxbKD86KC0/XGQrKD86XC5cZCspPyl8KFsiJ10pKCg/Oig/IVwyKVteXG5cXF18XFwuKSo/KVwyKVxdL2csWHQ9L1suKis/XiR7fSgpfFtcXVwvXFxdL2csWXQ9UmVnRXhwKFh0LnNvdXJjZSksWnQ9L1xcKFxcKT8vZyx0bj0vXlxbb2JqZWN0IC4rP0NvbnN0cnVjdG9yXF0kLyxubj1bImNvbnN0cnVjdG9yIiwiaGFzT3duUHJvcGVydHkiLCJpc1Byb3RvdHlwZU9mIiwicHJvcGVydHlJc0VudW1lcmFibGUiLCJ0b0xvY2FsZVN0cmluZyIsInRvU3RyaW5nIiwidmFsdWVPZiJdLHJuPXt9O3JuW1V0XT1ybltEdF09cm5bQnRdPXJuW1F0XT1ybltxdF09cm5benRdPXJuW1Z0XT1ybltXdF09cm5bR3RdPSEwLHJuW3d0XT1ybltPdF09cm5bTnRdPXJuW1N0XT1ybltUdF09cm5ba3RdPXJuW1B0XT1ybltGdF09cm5bUnRdPXJuW0x0XT1ybltfdF09cm5bSXRdPXJuW010XT1ybltDdF09ITE7dmFyIGVuPXsiZnVuY3Rpb24iOiEwLG9iamVjdDohMH0sb249ZW5bdHlwZW9mIG5dJiZuJiYhbi5ub2RlVHlwZSYmbix1bj1lblt0eXBlb2YgdF0mJnQmJiF0Lm5vZGVUeXBlJiZ0LGNuPW9uJiZ1biYmIm9iamVjdCI9PXR5cGVvZiBvJiZvJiZvLk9iamVjdCYmbyxzbj1lblt0eXBlb2Ygc2VsZl0mJnNlbGYmJnNlbGYuT2JqZWN0JiZzZWxmLGFuPWVuW3R5cGVvZiB3aW5kb3ddJiZ3aW5kb3cmJndpbmRvdy5PYmplY3QmJndpbmRvdyxmbj0odW4mJnVuLmV4cG9ydHM9PT1vbiYmb24sY258fGFuIT09KHRoaXMmJnRoaXMud2luZG93KSYmYW58fHNufHx0aGlzKSxsbj1mdW5jdGlvbigpe3RyeXtPYmplY3Qoe3RvU3RyaW5nOjB9KyIiKX1jYXRjaCh0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4hMX19cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiJmdW5jdGlvbiIhPXR5cGVvZiB0LnRvU3RyaW5nJiYic3RyaW5nIj09dHlwZW9mKHQrIiIpfX0oKSxwbj1BcnJheS5wcm90b3R5cGUsaG49RXJyb3IucHJvdG90eXBlLHZuPU9iamVjdC5wcm90b3R5cGUseW49U3RyaW5nLnByb3RvdHlwZSxnbj1GdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmcsZG49dm4uaGFzT3duUHJvcGVydHksbW49dm4udG9TdHJpbmcsJG49UmVnRXhwKCJeIitndChtbikucmVwbGFjZSgvdG9TdHJpbmd8KGZ1bmN0aW9uKS4qPyg/PVxcXCgpfCBmb3IgLis/KD89XFxcXSkvZywiJDEuKj8iKSsiJCIpLGJuPWF0KGJuPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpJiZibix4bj1wbi5wdXNoLGpuPWF0KE9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucz1PYmplY3QucHJldmVudEV4dGVuc2lvbnMpJiZqbixFbj12bi5wcm9wZXJ0eUlzRW51bWVyYWJsZSxBbj1wbi5zcGxpY2Usd249YXQod249Zm4uVWludDhBcnJheSkmJnduLE9uPWZ1bmN0aW9uKCl7dmFyIHQ9ezE6MH0sbj1qbiYmYXQobj1PYmplY3QuYXNzaWduKSYmbjt0cnl7bihqbih0KSwieG8iKX1jYXRjaChyKXt9cmV0dXJuIXRbMV0mJm59KCksU249YXQoU249QXJyYXkuaXNBcnJheSkmJlNuLFRuPWF0KFRuPU9iamVjdC5rZXlzKSYmVG4sa249TWF0aC5tYXgsUG49TWF0aC5wb3coMiw1MyktMSxGbj17fTtGbltPdF09Rm5bVHRdPUZuW1J0XT17Y29uc3RydWN0b3I6ITAsdG9Mb2NhbGVTdHJpbmc6ITAsdG9TdHJpbmc6ITAsdmFsdWVPZjohMH0sRm5bU3RdPUZuW010XT17Y29uc3RydWN0b3I6ITAsdG9TdHJpbmc6ITAsdmFsdWVPZjohMH0sRm5ba3RdPUZuW1B0XT1GbltfdF09e2NvbnN0cnVjdG9yOiEwLHRvU3RyaW5nOiEwfSxGbltMdF09e2NvbnN0cnVjdG9yOiEwfSxmKG5uLGZ1bmN0aW9uKHQpe2Zvcih2YXIgbiBpbiBGbilpZihkbi5jYWxsKEZuLG4pKXt2YXIgcj1GbltuXTtyW3RdPWRuLmNhbGwocix0KX19KTt2YXIgUm49cy5zdXBwb3J0PXt9OyFmdW5jdGlvbih0KXt2YXIgbj1mdW5jdGlvbigpe3RoaXMueD10fSxyPXswOnQsbGVuZ3RoOnR9LGU9W107bi5wcm90b3R5cGU9e3ZhbHVlT2Y6dCx5OnR9O2Zvcih2YXIgbyBpbiBuZXcgbillLnB1c2gobyk7Um4uYXJnc1RhZz1tbi5jYWxsKGFyZ3VtZW50cyk9PXd0LFJuLmVudW1FcnJvclByb3BzPUVuLmNhbGwoaG4sIm1lc3NhZ2UiKXx8RW4uY2FsbChobiwibmFtZSIpLFJuLmVudW1Qcm90b3R5cGVzPUVuLmNhbGwobiwicHJvdG90eXBlIiksUm4uZnVuY0RlY29tcD0vXGJ0aGlzXGIvLnRlc3QoZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLFJuLmZ1bmNOYW1lcz0ic3RyaW5nIj09dHlwZW9mIEZ1bmN0aW9uLm5hbWUsUm4ubm9uRW51bVN0cmluZ3M9IUVuLmNhbGwoIngiLDApLFJuLm5vbkVudW1TaGFkb3dzPSEvdmFsdWVPZi8udGVzdChlKSxSbi5zcGxpY2VPYmplY3RzPShBbi5jYWxsKHIsMCwxKSwhclswXSksUm4udW5pbmRleGVkQ2hhcnM9IngiWzBdK09iamVjdCgieCIpWzBdIT0ieHgiO3RyeXtSbi5ub25FbnVtQXJncz0hRW4uY2FsbChhcmd1bWVudHMsMSl9Y2F0Y2godSl7Um4ubm9uRW51bUFyZ3M9ITB9fSgxLDApO3ZhciBMbj1Pbnx8ZnVuY3Rpb24odCxuKXtyZXR1cm4gbnVsbD09bj90OmcobixDbihuKSxnKG4sem4obiksdCkpfSxfbj1DKHgpLEluPU4oKSxNbj1QKCJsZW5ndGgiKSxDbj1ibj9mdW5jdGlvbih0KXtyZXR1cm4gYm4oWih0KSl9Om10KFtdKSxObj1VKGYsX24pLFVuPUQoaCxfbik7Um4uYXJnc1RhZ3x8KGl0PWZ1bmN0aW9uKHQpe3ZhciBuPWModCk/dC5sZW5ndGg6anQ7cmV0dXJuIEgobikmJmRuLmNhbGwodCwiY2FsbGVlIikmJiFFbi5jYWxsKHQsImNhbGxlZSIpfSk7dmFyIERuPVNufHxmdW5jdGlvbih0KXtyZXR1cm4gYyh0KSYmSCh0Lmxlbmd0aCkmJm1uLmNhbGwodCk9PU90fSxCbj11KC94Lyl8fHduJiYhdSh3bik/ZnVuY3Rpb24odCl7cmV0dXJuIG1uLmNhbGwodCk9PVB0fTp1LFFuPU0oZnVuY3Rpb24odCxuLHIpe3JldHVybiByP3kodCxuLHIpOkxuKHQsbil9KSxxbj11dChmdW5jdGlvbih0KXt2YXIgbj10WzBdO3JldHVybiBudWxsPT1uP246KHQucHVzaCh2KSxRbi5hcHBseShqdCx0KSl9KSx6bj1Ubj9mdW5jdGlvbih0KXtpZih0KXZhciBuPXQuY29uc3RydWN0b3Iscj10Lmxlbmd0aDtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgbiYmbi5wcm90b3R5cGU9PT10fHwoImZ1bmN0aW9uIj09dHlwZW9mIHQ/cy5zdXBwb3J0LmVudW1Qcm90b3R5cGVzOkgocikpP1kodCk6c3QodCk/VG4odCk6W119OlksVm49dXQoZnVuY3Rpb24odCxuKXtyZXR1cm4gbnVsbD09dD97fToiZnVuY3Rpb24iPT10eXBlb2YgblswXT9YKHQsSShuWzBdLG5bMV0sMykpOksodCwkKG4pKX0pO3MuYXNzaWduPVFuLHMuY2FsbGJhY2s9ZHQscy5jb25zdGFudD1tdCxzLmRlZmF1bHRzPXFuLHMuZmlsdGVyPWV0LHMuZm9yRWFjaD1ObixzLmZ1bmN0aW9ucz1odCxzLmtleXM9em4scy5rZXlzSW49dnQscy5tYXA9b3Qscy5waWNrPVZuLHMucHJvcGVydHk9eHQscy5yZXN0UGFyYW09dXQscy50b0FycmF5PXB0LHMudmFsdWVzPXl0LHMuemlwT2JqZWN0PXJ0LHMuY29sbGVjdD1vdCxzLmVhY2g9Tm4scy5leHRlbmQ9UW4scy5pdGVyYXRlZT1kdCxzLm1ldGhvZHM9aHQscy5vYmplY3Q9cnQscy5zZWxlY3Q9ZXQscy5lc2NhcGVSZWdFeHA9Z3Qscy5pZGVudGl0eT0kdCxzLmlzQXJndW1lbnRzPWl0LHMuaXNBcnJheT1EbixzLmlzRW1wdHk9Y3Qscy5pc0Z1bmN0aW9uPUJuLHMuaXNOYXRpdmU9YXQscy5pc09iamVjdD1zdCxzLmlzU3RyaW5nPWZ0LHMuaXNUeXBlZEFycmF5PWx0LHMubGFzdD1udCxzLm5vb3A9YnQscy5yZWR1Y2U9VW4scy5mb2xkbD1VbixzLmluamVjdD1VbixzLlZFUlNJT049RXQsZm4uXz1zLGU9ZnVuY3Rpb24oKXtyZXR1cm4gc30uY2FsbChuLHIsbix0KSwhKGUhPT1qdCYmKHQuZXhwb3J0cz1lKSl9KS5jYWxsKHRoaXMpfSkuY2FsbChuLHIoNDEpKHQpLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCkpfSxmdW5jdGlvbih0LG4scil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGUodCxuKXtjKHRoaXMsIiQkc3RhdGUiLHQuJCRzdGF0ZSksby5lYWNoKG8ubWV0aG9kcyh0KSxmdW5jdGlvbihuKXtjKHRoaXMsIiQkIituLHRbbl0pfSx0aGlzKSxuJiZuLiQkYm91bmRUbyYmYyh0aGlzLCIkJGJvdW5kVG8iLG4uJCRib3VuZFRvKSxjKHRoaXMsIiQkYXJyYXlMaXN0ZW5lcnMiLFtdKSx0aGlzLnRoZW49dC50aGVuPXRoaXMudGhlbi5iaW5kKHRoaXMpfXZhciBvPXIoMyksdT1yKDEpLGk9cigyNSksYz1yKDI2KSxzPXsiY2F0Y2giOiJjYXVnaHQiLCJmaW5hbGx5IjoibGFzdGx5IiwicmV0dXJuIjpbInRoZW5SZXR1cm4iLCJyZXR1cm5zIl0sInRocm93IjpbInRoZW5UaHJvdyJdfTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuKXtyZXR1cm4gbmV3IGUodCxuKX0sZS5wcm90b3R5cGU9e2FsbDppKCJhbGwiKSxhbnk6aSgiYW55IiksYmluZDpyKDI3KSxjYWxsOnIoMjgpLCJjYXRjaCI6cigyOSksZGVsYXk6cigzMCksZG9uZTpyKDMxKSxlYWNoOmkoImVhY2giKSxmaWx0ZXI6aSgiZmlsdGVyIiksImZpbmFsbHkiOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJCRmaW5hbGx5LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZ2V0OnIoMzIpLG1hcDppKCJtYXAiKSxub2RlaWZ5OnIoMzMpLHByb3BzOmkoInByb3BzIikscmVkdWNlOmkoInJlZHVjZSIpLCJyZXR1cm4iOnIoMzQpLHNvbWU6aSgic29tZSIpLHNwcmVhZDpyKDM1KSx0YXA6cigzNiksdGhlbjpyKDM3KSwidGhyb3ciOnIoMzgpLHRpbWVvdXQ6cigzOSksY29uc3RydWN0b3I6ZX0sYyhlLnByb3RvdHlwZSwiJCRjYWxsQXJyYXlMaXN0ZW5lcnMiLGZ1bmN0aW9uKHQpe28uZWFjaCh0aGlzLiQkYXJyYXlMaXN0ZW5lcnMsZnVuY3Rpb24obil7bih0KX0pfSksby5lYWNoKHMsZnVuY3Rpb24odCxuKXtvLmlzQXJyYXkodCl8fCh0PVt0XSksdS4kb3B0aW9ucy5jb21wYXRpYmlsaXR5QWxpYXNlcyYmby5lYWNoKHQsZnVuY3Rpb24odCl7ZS5wcm90b3R5cGVbdF09ZS5wcm90b3R5cGVbbl19KSx1LiRvcHRpb25zLmRpc2FibGVFUzVNZXRob2RzJiZkZWxldGUgZS5wcm90b3R5cGVbbl19KX0sZnVuY3Rpb24odCxuLHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT1yKDMpLG89cigyKSx1PXIoNDApLGk9cigyNik7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihuLHIsYyl7Yz1lLnBpY2soYywiY29uY3VycmVuY3kiKTt2YXIgcz1jLmNvbmN1cnJlbmN5P25ldyB1KGMpOnthZGQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQoKX19LGE9ZS5tYXAobixmdW5jdGlvbihlLHUpe3JldHVybiBvLndoZW4oZSlbdF0oZnVuY3Rpb24odCl7cmV0dXJuIHMuYWRkKGZ1bmN0aW9uKCl7cmV0dXJuIG8ud2hlbihyLmNhbGwobnVsbCx0LHUsbi5sZW5ndGgpKX0pfSl9KSxmPW8uYWxsKGEpO3JldHVybiBpKGYsIiQkdW5zeW5jZWQiLGEpLGZ9fX0sZnVuY3Rpb24odCxuLHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT1yKDIyKSxvPXIoMSk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluIG8uJGRlbGVnYXRlP2Z1bmN0aW9uKCl7cmV0dXJuIGUoby4kZGVsZWdhdGVbdF0uYXBwbHkoby4kZGVsZWdhdGUsYXJndW1lbnRzKSl9Om51bGx9fSxmdW5jdGlvbih0LG4scil7InVzZSBzdHJpY3QiO3ZhciBlPXIoNDIpLG89cigyKSx1PXIoMjYpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtmdW5jdGlvbiBuKG4scil7dmFyIGU9b1t0XS5hcHBseShudWxsLFtyXS5jb25jYXQobikpO3JldHVybiB1KGUsIiQkYm91bmRUbyIsdGhpcy4kJGJvdW5kVG8pLGV9cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHQ9ZS5jYWxsKHRoaXMsYXJndW1lbnRzKTtpZih0aGlzLiQkdW5zeW5jZWQpcmV0dXJuIG4uY2FsbCh0aGlzLHQsdGhpcy4kJHVuc3luY2VkKTt2YXIgcj10aGlzLnRoZW4oZnVuY3Rpb24oZSl7aWYoci4kJHByb21pc2VSZXN1bHQpcmV0dXJuIHIuJCRwcm9taXNlUmVzdWx0O3ZhciBvPW4uY2FsbCh0aGlzLHQsZSk7cmV0dXJuIHIuJCRhcnJheUxpc3RlbmVycy5sZW5ndGgmJm8uJCR1bnN5bmNlZCYmci4kJGNhbGxBcnJheUxpc3RlbmVycyhvLiQkdW5zeW5jZWQpLG99LmJpbmQodGhpcykpO3JldHVybiB0aGlzLiQkYXJyYXlMaXN0ZW5lcnMucHVzaChmdW5jdGlvbihlKXt1KHRoaXMsIiQkcHJvbWlzZVJlc3VsdCIsbi5jYWxsKHRoaXMsdCxlKSksci4kJGFycmF5TGlzdGVuZXJzLmxlbmd0aCYmdGhpcy4kJHByb21pc2VSZXN1bHQuJCR1bnN5bmNlZCYmci4kJGNhbGxBcnJheUxpc3RlbmVycyh0aGlzLiQkcHJvbWlzZVJlc3VsdC4kJHVuc3luY2VkKX0uYmluZCh0aGlzKSkscn19fSxmdW5jdGlvbih0LG4scil7InVzZSBzdHJpY3QiO3QuZXhwb3J0cz1mdW5jdGlvbih0LG4scil7aWYoT2JqZWN0LmRlZmluZVByb3BlcnR5KXRyeXtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLHt2YWx1ZTpyfSl9Y2F0Y2goZSl7fXRbbl0hPT1yJiYodFtuXT1yKX19LGZ1bmN0aW9uKHQsbixyKXsidXNlIHN0cmljdCI7dmFyIGU9cigyNik7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBlKHRoaXMsIiQkYm91bmRUbyIsdCksdGhpc319LGZ1bmN0aW9uKHQsbixyKXsidXNlIHN0cmljdCI7dmFyIGU9cigzKTt0LmV4cG9ydHM9ZnVuY3Rpb24oKXt2YXIgdD1lLnRvQXJyYXkoYXJndW1lbnRzKSxuPXQuc2hpZnQoKTtyZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uKHIpe3JldHVybiByW25dLmFwcGx5KHIsdCl9KX19LGZ1bmN0aW9uKHQsbixyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZSh0LG4pe3ZhciByPSF0Lmxlbmd0aDtyZXR1cm4gdS5lYWNoKHQsZnVuY3Rpb24odCl7aWYoIXUuaXNGdW5jdGlvbih0KSl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgYXJndW1lbnQuIik7cmV0dXJuIHQgaW5zdGFuY2VvZiBFcnJvcnx8dC5wcm90b3R5cGUgaW5zdGFuY2VvZiBFcnJvcj8ocj1yfHxuIGluc3RhbmNlb2YgdCwhcik6KHI9cnx8dChuKSwhcil9KSxyfXZhciBvPXIoMiksdT1yKDMpO3QuZXhwb3J0cz1mdW5jdGlvbigpe3ZhciB0PXUudG9BcnJheShhcmd1bWVudHMpLG49dC5wb3AoKTtyZXR1cm4gdGhpcy4kJGNhdGNoKGZ1bmN0aW9uKHIpe3JldHVybiB1LmlzRnVuY3Rpb24obikmJmUodCxyKT9uLmNhbGwodGhpcyxyKTpvLnJlamVjdChyKX0pfX0sZnVuY3Rpb24odCxuLHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT1yKDEpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uKG4pe3ZhciByPWUuJGRlZmVyKHRoaXMpO3JldHVybiBzZXRUaW1lb3V0KHIucmVzb2x2ZSx0LG4pLHIucHJvbWlzZX0uYmluZCh0aGlzKSl9fSxmdW5jdGlvbih0LG4scil7InVzZSBzdHJpY3QiO3ZhciBlPXIoMik7dC5leHBvcnRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGhlbi5hcHBseSh0aGlzLGFyZ3VtZW50cykuJCRjYXRjaChmdW5jdGlvbih0KXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhyb3cgdH0pfSkuJCRmaW5hbGx5KGZ1bmN0aW9uKCl7cmV0dXJuIGUucmVqZWN0KG5ldyBFcnJvcigiRG8gbm90IGNoYWluIGFueXRoaW5nIGFmdGVyIGNhbGxpbmcgZG9uZSgpISIpKX0pfX0sZnVuY3Rpb24odCxuLHIpeyJ1c2Ugc3RyaWN0Ijt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbihuKXtyZXR1cm4gblt0XX0pfX0sZnVuY3Rpb24odCxuLHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT1yKDMpLG89cigyKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuKXtyZXR1cm4gdD10fHxlLm5vb3Asbj1ufHx7fSx0aGlzLnRoZW4oZnVuY3Rpb24ocil7dmFyIG89cjtyZXR1cm4gbz1uLnNwcmVhZCYmZS5pc0FycmF5KG8pP1tudWxsXS5jb25jYXQobyk6W251bGwsb10sdC5hcHBseSh0aGlzLG8pLHJ9LGZ1bmN0aW9uKG4pe3JldHVybiB0LmNhbGwodGhpcyxuKSxvLnJlamVjdChuKX0pfX0sZnVuY3Rpb24odCxuLHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT1yKDMpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50aGVuKGUuY29uc3RhbnQodCkpfX0sZnVuY3Rpb24odCxuLHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT1yKDMpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uKG4pe3JldHVybiBlLmlzQXJyYXkobil8fChuPVtuXSksdC5hcHBseSh0aGlzLG4pfSl9fSxmdW5jdGlvbih0LG4scil7InVzZSBzdHJpY3QiO3ZhciBlPXIoMik7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnRoZW4oZnVuY3Rpb24obil7cmV0dXJuIGUud2hlbih0LmNhbGwodGhpcyxuKSkucmV0dXJucyhuKX0pfX0sZnVuY3Rpb24odCxuLHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT1yKDQyKSxvPXIoMjIpO3QuZXhwb3J0cz1mdW5jdGlvbigpe3JldHVybiBvKHRoaXMuJCR0aGVuLmFwcGx5KHRoaXMsZS5jYWxsKHRoaXMsYXJndW1lbnRzKSksdGhpcyl9fSxmdW5jdGlvbih0LG4scil7InVzZSBzdHJpY3QiO3ZhciBlPXIoMik7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gZS5yZWplY3QodCl9KX19LGZ1bmN0aW9uKHQsbixyKXsidXNlIHN0cmljdCI7dmFyIGU9cigxKSxvPXIoMik7dC5leHBvcnRzPWZ1bmN0aW9uKHQsbil7dmFyIHI9ZS4kZGVmZXIodGhpcyksdT1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ci5yZWplY3QobmV3IG8uVGltZW91dEVycm9yKG58fCJUaW1lZCBvdXQgYWZ0ZXIgIit0KyIgbXMiKSl9LHQpO3JldHVybiB0aGlzLnRoZW4oZnVuY3Rpb24odCl7ci5yZXNvbHZlKHQpfSxmdW5jdGlvbih0KXtyLnJlamVjdCh0KX0pWyJmaW5hbGx5Il0oY2xlYXJUaW1lb3V0LmJpbmQobnVsbCx1KSksci5wcm9taXNlfX0sZnVuY3Rpb24odCxuLHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT1yKDMpLG89cigxKSx1PXQuZXhwb3J0cz1mdW5jdGlvbih0KXt0aGlzLiRvcHRpb25zPWUuZGVmYXVsdHModCx7Y29uY3VycmVuY3k6MSxtYXhRdWV1ZTowfSksdGhpcy4kZm5zPVtdfTt1LnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCl7dmFyIG49by4kZGVmZXIoKSxyPWZ1bmN0aW9uKCl7dCgpWyJmaW5hbGx5Il0oZnVuY3Rpb24oKXt0aGlzLiRmbnMuc3BsaWNlKHRoaXMuJGZucy5pbmRleE9mKHIpLDEpLHRoaXMuJGZucy5sZW5ndGg+PXRoaXMuJG9wdGlvbnMuY29uY3VycmVuY3kmJnRoaXMuJGZuc1t0aGlzLiRvcHRpb25zLmNvbmN1cnJlbmN5LTFdKCl9LmJpbmQodGhpcykpLnRoZW4oZnVuY3Rpb24odCl7bi5yZXNvbHZlKHQpfSxmdW5jdGlvbih0KXtuLnJlamVjdCh0KX0pfS5iaW5kKHRoaXMpO3JldHVybiB0aGlzLiRmbnMucHVzaChyKTw9dGhpcy4kb3B0aW9ucy5jb25jdXJyZW5jeSYmcigpLG4ucHJvbWlzZX19LGZ1bmN0aW9uKHQsbixyKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIHQud2VicGFja1BvbHlmaWxsfHwodC5kZXByZWNhdGU9ZnVuY3Rpb24oKXt9LHQucGF0aHM9W10sdC5jaGlsZHJlbj1bXSx0LndlYnBhY2tQb2x5ZmlsbD0xKSx0fX0sZnVuY3Rpb24odCxuLHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT1yKDMpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZS5tYXAodCxmdW5jdGlvbih0KXtyZXR1cm4gZS5pc0Z1bmN0aW9uKHQpP3QuYmluZCh0aGlzLiQkYm91bmRUb3x8dGhpcyk6dH0sdGhpcyl9fV0pfSk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWFuZ3VsYXItZXh0ZW5kLXByb21pc2VzLm1pbi5qcy5tYXAKLyohCiAqIEJvb3RzdHJhcCB2My4zLjcgKGh0dHA6Ly9nZXRib290c3RyYXAuY29tKQogKiBDb3B5cmlnaHQgMjAxMS0yMDE2IFR3aXR0ZXIsIEluYy4KICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlCiAqLwppZigidW5kZWZpbmVkIj09dHlwZW9mIGpRdWVyeSl0aHJvdyBuZXcgRXJyb3IoIkJvb3RzdHJhcCdzIEphdmFTY3JpcHQgcmVxdWlyZXMgalF1ZXJ5Iik7K2Z1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0Ijt2YXIgYj1hLmZuLmpxdWVyeS5zcGxpdCgiICIpWzBdLnNwbGl0KCIuIik7aWYoYlswXTwyJiZiWzFdPDl8fDE9PWJbMF0mJjk9PWJbMV0mJmJbMl08MXx8YlswXT4zKXRocm93IG5ldyBFcnJvcigiQm9vdHN0cmFwJ3MgSmF2YVNjcmlwdCByZXF1aXJlcyBqUXVlcnkgdmVyc2lvbiAxLjkuMSBvciBoaWdoZXIsIGJ1dCBsb3dlciB0aGFuIHZlcnNpb24gNCIpfShqUXVlcnkpLCtmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYigpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJvb3RzdHJhcCIpLGI9e1dlYmtpdFRyYW5zaXRpb246IndlYmtpdFRyYW5zaXRpb25FbmQiLE1velRyYW5zaXRpb246InRyYW5zaXRpb25lbmQiLE9UcmFuc2l0aW9uOiJvVHJhbnNpdGlvbkVuZCBvdHJhbnNpdGlvbmVuZCIsdHJhbnNpdGlvbjoidHJhbnNpdGlvbmVuZCJ9O2Zvcih2YXIgYyBpbiBiKWlmKHZvaWQgMCE9PWEuc3R5bGVbY10pcmV0dXJue2VuZDpiW2NdfTtyZXR1cm4hMX1hLmZuLmVtdWxhdGVUcmFuc2l0aW9uRW5kPWZ1bmN0aW9uKGIpe3ZhciBjPSExLGQ9dGhpczthKHRoaXMpLm9uZSgiYnNUcmFuc2l0aW9uRW5kIixmdW5jdGlvbigpe2M9ITB9KTt2YXIgZT1mdW5jdGlvbigpe2N8fGEoZCkudHJpZ2dlcihhLnN1cHBvcnQudHJhbnNpdGlvbi5lbmQpfTtyZXR1cm4gc2V0VGltZW91dChlLGIpLHRoaXN9LGEoZnVuY3Rpb24oKXthLnN1cHBvcnQudHJhbnNpdGlvbj1iKCksYS5zdXBwb3J0LnRyYW5zaXRpb24mJihhLmV2ZW50LnNwZWNpYWwuYnNUcmFuc2l0aW9uRW5kPXtiaW5kVHlwZTphLnN1cHBvcnQudHJhbnNpdGlvbi5lbmQsZGVsZWdhdGVUeXBlOmEuc3VwcG9ydC50cmFuc2l0aW9uLmVuZCxoYW5kbGU6ZnVuY3Rpb24oYil7aWYoYShiLnRhcmdldCkuaXModGhpcykpcmV0dXJuIGIuaGFuZGxlT2JqLmhhbmRsZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0pfSl9KGpRdWVyeSksK2Z1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1hKHRoaXMpLGU9Yy5kYXRhKCJicy5hbGVydCIpO2V8fGMuZGF0YSgiYnMuYWxlcnQiLGU9bmV3IGQodGhpcykpLCJzdHJpbmciPT10eXBlb2YgYiYmZVtiXS5jYWxsKGMpfSl9dmFyIGM9J1tkYXRhLWRpc21pc3M9ImFsZXJ0Il0nLGQ9ZnVuY3Rpb24oYil7YShiKS5vbigiY2xpY2siLGMsdGhpcy5jbG9zZSl9O2QuVkVSU0lPTj0iMy4zLjciLGQuVFJBTlNJVElPTl9EVVJBVElPTj0xNTAsZC5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oYil7ZnVuY3Rpb24gYygpe2cuZGV0YWNoKCkudHJpZ2dlcigiY2xvc2VkLmJzLmFsZXJ0IikucmVtb3ZlKCl9dmFyIGU9YSh0aGlzKSxmPWUuYXR0cigiZGF0YS10YXJnZXQiKTtmfHwoZj1lLmF0dHIoImhyZWYiKSxmPWYmJmYucmVwbGFjZSgvLiooPz0jW15cc10qJCkvLCIiKSk7dmFyIGc9YSgiIyI9PT1mP1tdOmYpO2ImJmIucHJldmVudERlZmF1bHQoKSxnLmxlbmd0aHx8KGc9ZS5jbG9zZXN0KCIuYWxlcnQiKSksZy50cmlnZ2VyKGI9YS5FdmVudCgiY2xvc2UuYnMuYWxlcnQiKSksYi5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8KGcucmVtb3ZlQ2xhc3MoImluIiksYS5zdXBwb3J0LnRyYW5zaXRpb24mJmcuaGFzQ2xhc3MoImZhZGUiKT9nLm9uZSgiYnNUcmFuc2l0aW9uRW5kIixjKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChkLlRSQU5TSVRJT05fRFVSQVRJT04pOmMoKSl9O3ZhciBlPWEuZm4uYWxlcnQ7YS5mbi5hbGVydD1iLGEuZm4uYWxlcnQuQ29uc3RydWN0b3I9ZCxhLmZuLmFsZXJ0Lm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gYS5mbi5hbGVydD1lLHRoaXN9LGEoZG9jdW1lbnQpLm9uKCJjbGljay5icy5hbGVydC5kYXRhLWFwaSIsYyxkLnByb3RvdHlwZS5jbG9zZSl9KGpRdWVyeSksK2Z1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZD1hKHRoaXMpLGU9ZC5kYXRhKCJicy5idXR0b24iKSxmPSJvYmplY3QiPT10eXBlb2YgYiYmYjtlfHxkLmRhdGEoImJzLmJ1dHRvbiIsZT1uZXcgYyh0aGlzLGYpKSwidG9nZ2xlIj09Yj9lLnRvZ2dsZSgpOmImJmUuc2V0U3RhdGUoYil9KX12YXIgYz1mdW5jdGlvbihiLGQpe3RoaXMuJGVsZW1lbnQ9YShiKSx0aGlzLm9wdGlvbnM9YS5leHRlbmQoe30sYy5ERUZBVUxUUyxkKSx0aGlzLmlzTG9hZGluZz0hMX07Yy5WRVJTSU9OPSIzLjMuNyIsYy5ERUZBVUxUUz17bG9hZGluZ1RleHQ6ImxvYWRpbmcuLi4ifSxjLnByb3RvdHlwZS5zZXRTdGF0ZT1mdW5jdGlvbihiKXt2YXIgYz0iZGlzYWJsZWQiLGQ9dGhpcy4kZWxlbWVudCxlPWQuaXMoImlucHV0Iik/InZhbCI6Imh0bWwiLGY9ZC5kYXRhKCk7Yis9IlRleHQiLG51bGw9PWYucmVzZXRUZXh0JiZkLmRhdGEoInJlc2V0VGV4dCIsZFtlXSgpKSxzZXRUaW1lb3V0KGEucHJveHkoZnVuY3Rpb24oKXtkW2VdKG51bGw9PWZbYl0/dGhpcy5vcHRpb25zW2JdOmZbYl0pLCJsb2FkaW5nVGV4dCI9PWI/KHRoaXMuaXNMb2FkaW5nPSEwLGQuYWRkQ2xhc3MoYykuYXR0cihjLGMpLnByb3AoYywhMCkpOnRoaXMuaXNMb2FkaW5nJiYodGhpcy5pc0xvYWRpbmc9ITEsZC5yZW1vdmVDbGFzcyhjKS5yZW1vdmVBdHRyKGMpLnByb3AoYywhMSkpfSx0aGlzKSwwKX0sYy5wcm90b3R5cGUudG9nZ2xlPWZ1bmN0aW9uKCl7dmFyIGE9ITAsYj10aGlzLiRlbGVtZW50LmNsb3Nlc3QoJ1tkYXRhLXRvZ2dsZT0iYnV0dG9ucyJdJyk7aWYoYi5sZW5ndGgpe3ZhciBjPXRoaXMuJGVsZW1lbnQuZmluZCgiaW5wdXQiKTsicmFkaW8iPT1jLnByb3AoInR5cGUiKT8oYy5wcm9wKCJjaGVja2VkIikmJihhPSExKSxiLmZpbmQoIi5hY3RpdmUiKS5yZW1vdmVDbGFzcygiYWN0aXZlIiksdGhpcy4kZWxlbWVudC5hZGRDbGFzcygiYWN0aXZlIikpOiJjaGVja2JveCI9PWMucHJvcCgidHlwZSIpJiYoYy5wcm9wKCJjaGVja2VkIikhPT10aGlzLiRlbGVtZW50Lmhhc0NsYXNzKCJhY3RpdmUiKSYmKGE9ITEpLHRoaXMuJGVsZW1lbnQudG9nZ2xlQ2xhc3MoImFjdGl2ZSIpKSxjLnByb3AoImNoZWNrZWQiLHRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoImFjdGl2ZSIpKSxhJiZjLnRyaWdnZXIoImNoYW5nZSIpfWVsc2UgdGhpcy4kZWxlbWVudC5hdHRyKCJhcmlhLXByZXNzZWQiLCF0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKCJhY3RpdmUiKSksdGhpcy4kZWxlbWVudC50b2dnbGVDbGFzcygiYWN0aXZlIil9O3ZhciBkPWEuZm4uYnV0dG9uO2EuZm4uYnV0dG9uPWIsYS5mbi5idXR0b24uQ29uc3RydWN0b3I9YyxhLmZuLmJ1dHRvbi5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGEuZm4uYnV0dG9uPWQsdGhpc30sYShkb2N1bWVudCkub24oImNsaWNrLmJzLmJ1dHRvbi5kYXRhLWFwaSIsJ1tkYXRhLXRvZ2dsZV49ImJ1dHRvbiJdJyxmdW5jdGlvbihjKXt2YXIgZD1hKGMudGFyZ2V0KS5jbG9zZXN0KCIuYnRuIik7Yi5jYWxsKGQsInRvZ2dsZSIpLGEoYy50YXJnZXQpLmlzKCdpbnB1dFt0eXBlPSJyYWRpbyJdLCBpbnB1dFt0eXBlPSJjaGVja2JveCJdJyl8fChjLnByZXZlbnREZWZhdWx0KCksZC5pcygiaW5wdXQsYnV0dG9uIik/ZC50cmlnZ2VyKCJmb2N1cyIpOmQuZmluZCgiaW5wdXQ6dmlzaWJsZSxidXR0b246dmlzaWJsZSIpLmZpcnN0KCkudHJpZ2dlcigiZm9jdXMiKSl9KS5vbigiZm9jdXMuYnMuYnV0dG9uLmRhdGEtYXBpIGJsdXIuYnMuYnV0dG9uLmRhdGEtYXBpIiwnW2RhdGEtdG9nZ2xlXj0iYnV0dG9uIl0nLGZ1bmN0aW9uKGIpe2EoYi50YXJnZXQpLmNsb3Nlc3QoIi5idG4iKS50b2dnbGVDbGFzcygiZm9jdXMiLC9eZm9jdXMoaW4pPyQvLnRlc3QoYi50eXBlKSl9KX0oalF1ZXJ5KSwrZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBkPWEodGhpcyksZT1kLmRhdGEoImJzLmNhcm91c2VsIiksZj1hLmV4dGVuZCh7fSxjLkRFRkFVTFRTLGQuZGF0YSgpLCJvYmplY3QiPT10eXBlb2YgYiYmYiksZz0ic3RyaW5nIj09dHlwZW9mIGI/YjpmLnNsaWRlO2V8fGQuZGF0YSgiYnMuY2Fyb3VzZWwiLGU9bmV3IGModGhpcyxmKSksIm51bWJlciI9PXR5cGVvZiBiP2UudG8oYik6Zz9lW2ddKCk6Zi5pbnRlcnZhbCYmZS5wYXVzZSgpLmN5Y2xlKCl9KX12YXIgYz1mdW5jdGlvbihiLGMpe3RoaXMuJGVsZW1lbnQ9YShiKSx0aGlzLiRpbmRpY2F0b3JzPXRoaXMuJGVsZW1lbnQuZmluZCgiLmNhcm91c2VsLWluZGljYXRvcnMiKSx0aGlzLm9wdGlvbnM9Yyx0aGlzLnBhdXNlZD1udWxsLHRoaXMuc2xpZGluZz1udWxsLHRoaXMuaW50ZXJ2YWw9bnVsbCx0aGlzLiRhY3RpdmU9bnVsbCx0aGlzLiRpdGVtcz1udWxsLHRoaXMub3B0aW9ucy5rZXlib2FyZCYmdGhpcy4kZWxlbWVudC5vbigia2V5ZG93bi5icy5jYXJvdXNlbCIsYS5wcm94eSh0aGlzLmtleWRvd24sdGhpcykpLCJob3ZlciI9PXRoaXMub3B0aW9ucy5wYXVzZSYmISgib250b3VjaHN0YXJ0ImluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkmJnRoaXMuJGVsZW1lbnQub24oIm1vdXNlZW50ZXIuYnMuY2Fyb3VzZWwiLGEucHJveHkodGhpcy5wYXVzZSx0aGlzKSkub24oIm1vdXNlbGVhdmUuYnMuY2Fyb3VzZWwiLGEucHJveHkodGhpcy5jeWNsZSx0aGlzKSl9O2MuVkVSU0lPTj0iMy4zLjciLGMuVFJBTlNJVElPTl9EVVJBVElPTj02MDAsYy5ERUZBVUxUUz17aW50ZXJ2YWw6NWUzLHBhdXNlOiJob3ZlciIsd3JhcDohMCxrZXlib2FyZDohMH0sYy5wcm90b3R5cGUua2V5ZG93bj1mdW5jdGlvbihhKXtpZighL2lucHV0fHRleHRhcmVhL2kudGVzdChhLnRhcmdldC50YWdOYW1lKSl7c3dpdGNoKGEud2hpY2gpe2Nhc2UgMzc6dGhpcy5wcmV2KCk7YnJlYWs7Y2FzZSAzOTp0aGlzLm5leHQoKTticmVhaztkZWZhdWx0OnJldHVybn1hLnByZXZlbnREZWZhdWx0KCl9fSxjLnByb3RvdHlwZS5jeWNsZT1mdW5jdGlvbihiKXtyZXR1cm4gYnx8KHRoaXMucGF1c2VkPSExKSx0aGlzLmludGVydmFsJiZjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpLHRoaXMub3B0aW9ucy5pbnRlcnZhbCYmIXRoaXMucGF1c2VkJiYodGhpcy5pbnRlcnZhbD1zZXRJbnRlcnZhbChhLnByb3h5KHRoaXMubmV4dCx0aGlzKSx0aGlzLm9wdGlvbnMuaW50ZXJ2YWwpKSx0aGlzfSxjLnByb3RvdHlwZS5nZXRJdGVtSW5kZXg9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuJGl0ZW1zPWEucGFyZW50KCkuY2hpbGRyZW4oIi5pdGVtIiksdGhpcy4kaXRlbXMuaW5kZXgoYXx8dGhpcy4kYWN0aXZlKX0sYy5wcm90b3R5cGUuZ2V0SXRlbUZvckRpcmVjdGlvbj1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0SXRlbUluZGV4KGIpLGQ9InByZXYiPT1hJiYwPT09Y3x8Im5leHQiPT1hJiZjPT10aGlzLiRpdGVtcy5sZW5ndGgtMTtpZihkJiYhdGhpcy5vcHRpb25zLndyYXApcmV0dXJuIGI7dmFyIGU9InByZXYiPT1hPy0xOjEsZj0oYytlKSV0aGlzLiRpdGVtcy5sZW5ndGg7cmV0dXJuIHRoaXMuJGl0ZW1zLmVxKGYpfSxjLnByb3RvdHlwZS50bz1mdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9dGhpcy5nZXRJdGVtSW5kZXgodGhpcy4kYWN0aXZlPXRoaXMuJGVsZW1lbnQuZmluZCgiLml0ZW0uYWN0aXZlIikpO2lmKCEoYT50aGlzLiRpdGVtcy5sZW5ndGgtMXx8YTwwKSlyZXR1cm4gdGhpcy5zbGlkaW5nP3RoaXMuJGVsZW1lbnQub25lKCJzbGlkLmJzLmNhcm91c2VsIixmdW5jdGlvbigpe2IudG8oYSl9KTpjPT1hP3RoaXMucGF1c2UoKS5jeWNsZSgpOnRoaXMuc2xpZGUoYT5jPyJuZXh0IjoicHJldiIsdGhpcy4kaXRlbXMuZXEoYSkpfSxjLnByb3RvdHlwZS5wYXVzZT1mdW5jdGlvbihiKXtyZXR1cm4gYnx8KHRoaXMucGF1c2VkPSEwKSx0aGlzLiRlbGVtZW50LmZpbmQoIi5uZXh0LCAucHJldiIpLmxlbmd0aCYmYS5zdXBwb3J0LnRyYW5zaXRpb24mJih0aGlzLiRlbGVtZW50LnRyaWdnZXIoYS5zdXBwb3J0LnRyYW5zaXRpb24uZW5kKSx0aGlzLmN5Y2xlKCEwKSksdGhpcy5pbnRlcnZhbD1jbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpLHRoaXN9LGMucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oKXtpZighdGhpcy5zbGlkaW5nKXJldHVybiB0aGlzLnNsaWRlKCJuZXh0Iil9LGMucHJvdG90eXBlLnByZXY9ZnVuY3Rpb24oKXtpZighdGhpcy5zbGlkaW5nKXJldHVybiB0aGlzLnNsaWRlKCJwcmV2Iil9LGMucHJvdG90eXBlLnNsaWRlPWZ1bmN0aW9uKGIsZCl7dmFyIGU9dGhpcy4kZWxlbWVudC5maW5kKCIuaXRlbS5hY3RpdmUiKSxmPWR8fHRoaXMuZ2V0SXRlbUZvckRpcmVjdGlvbihiLGUpLGc9dGhpcy5pbnRlcnZhbCxoPSJuZXh0Ij09Yj8ibGVmdCI6InJpZ2h0IixpPXRoaXM7aWYoZi5oYXNDbGFzcygiYWN0aXZlIikpcmV0dXJuIHRoaXMuc2xpZGluZz0hMTt2YXIgaj1mWzBdLGs9YS5FdmVudCgic2xpZGUuYnMuY2Fyb3VzZWwiLHtyZWxhdGVkVGFyZ2V0OmosZGlyZWN0aW9uOmh9KTtpZih0aGlzLiRlbGVtZW50LnRyaWdnZXIoayksIWsuaXNEZWZhdWx0UHJldmVudGVkKCkpe2lmKHRoaXMuc2xpZGluZz0hMCxnJiZ0aGlzLnBhdXNlKCksdGhpcy4kaW5kaWNhdG9ycy5sZW5ndGgpe3RoaXMuJGluZGljYXRvcnMuZmluZCgiLmFjdGl2ZSIpLnJlbW92ZUNsYXNzKCJhY3RpdmUiKTt2YXIgbD1hKHRoaXMuJGluZGljYXRvcnMuY2hpbGRyZW4oKVt0aGlzLmdldEl0ZW1JbmRleChmKV0pO2wmJmwuYWRkQ2xhc3MoImFjdGl2ZSIpfXZhciBtPWEuRXZlbnQoInNsaWQuYnMuY2Fyb3VzZWwiLHtyZWxhdGVkVGFyZ2V0OmosZGlyZWN0aW9uOmh9KTtyZXR1cm4gYS5zdXBwb3J0LnRyYW5zaXRpb24mJnRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoInNsaWRlIik/KGYuYWRkQ2xhc3MoYiksZlswXS5vZmZzZXRXaWR0aCxlLmFkZENsYXNzKGgpLGYuYWRkQ2xhc3MoaCksZS5vbmUoImJzVHJhbnNpdGlvbkVuZCIsZnVuY3Rpb24oKXtmLnJlbW92ZUNsYXNzKFtiLGhdLmpvaW4oIiAiKSkuYWRkQ2xhc3MoImFjdGl2ZSIpLGUucmVtb3ZlQ2xhc3MoWyJhY3RpdmUiLGhdLmpvaW4oIiAiKSksaS5zbGlkaW5nPSExLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtpLiRlbGVtZW50LnRyaWdnZXIobSl9LDApfSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoYy5UUkFOU0lUSU9OX0RVUkFUSU9OKSk6KGUucmVtb3ZlQ2xhc3MoImFjdGl2ZSIpLGYuYWRkQ2xhc3MoImFjdGl2ZSIpLHRoaXMuc2xpZGluZz0hMSx0aGlzLiRlbGVtZW50LnRyaWdnZXIobSkpLGcmJnRoaXMuY3ljbGUoKSx0aGlzfX07dmFyIGQ9YS5mbi5jYXJvdXNlbDthLmZuLmNhcm91c2VsPWIsYS5mbi5jYXJvdXNlbC5Db25zdHJ1Y3Rvcj1jLGEuZm4uY2Fyb3VzZWwubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBhLmZuLmNhcm91c2VsPWQsdGhpc307dmFyIGU9ZnVuY3Rpb24oYyl7dmFyIGQsZT1hKHRoaXMpLGY9YShlLmF0dHIoImRhdGEtdGFyZ2V0Iil8fChkPWUuYXR0cigiaHJlZiIpKSYmZC5yZXBsYWNlKC8uKig/PSNbXlxzXSskKS8sIiIpKTtpZihmLmhhc0NsYXNzKCJjYXJvdXNlbCIpKXt2YXIgZz1hLmV4dGVuZCh7fSxmLmRhdGEoKSxlLmRhdGEoKSksaD1lLmF0dHIoImRhdGEtc2xpZGUtdG8iKTtoJiYoZy5pbnRlcnZhbD0hMSksYi5jYWxsKGYsZyksaCYmZi5kYXRhKCJicy5jYXJvdXNlbCIpLnRvKGgpLGMucHJldmVudERlZmF1bHQoKX19O2EoZG9jdW1lbnQpLm9uKCJjbGljay5icy5jYXJvdXNlbC5kYXRhLWFwaSIsIltkYXRhLXNsaWRlXSIsZSkub24oImNsaWNrLmJzLmNhcm91c2VsLmRhdGEtYXBpIiwiW2RhdGEtc2xpZGUtdG9dIixlKSxhKHdpbmRvdykub24oImxvYWQiLGZ1bmN0aW9uKCl7YSgnW2RhdGEtcmlkZT0iY2Fyb3VzZWwiXScpLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1hKHRoaXMpO2IuY2FsbChjLGMuZGF0YSgpKX0pfSl9KGpRdWVyeSksK2Z1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGIpe3ZhciBjLGQ9Yi5hdHRyKCJkYXRhLXRhcmdldCIpfHwoYz1iLmF0dHIoImhyZWYiKSkmJmMucmVwbGFjZSgvLiooPz0jW15cc10rJCkvLCIiKTtyZXR1cm4gYShkKX1mdW5jdGlvbiBjKGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1hKHRoaXMpLGU9Yy5kYXRhKCJicy5jb2xsYXBzZSIpLGY9YS5leHRlbmQoe30sZC5ERUZBVUxUUyxjLmRhdGEoKSwib2JqZWN0Ij09dHlwZW9mIGImJmIpOyFlJiZmLnRvZ2dsZSYmL3Nob3d8aGlkZS8udGVzdChiKSYmKGYudG9nZ2xlPSExKSxlfHxjLmRhdGEoImJzLmNvbGxhcHNlIixlPW5ldyBkKHRoaXMsZikpLCJzdHJpbmciPT10eXBlb2YgYiYmZVtiXSgpfSl9dmFyIGQ9ZnVuY3Rpb24oYixjKXt0aGlzLiRlbGVtZW50PWEoYiksdGhpcy5vcHRpb25zPWEuZXh0ZW5kKHt9LGQuREVGQVVMVFMsYyksdGhpcy4kdHJpZ2dlcj1hKCdbZGF0YS10b2dnbGU9ImNvbGxhcHNlIl1baHJlZj0iIycrYi5pZCsnIl0sW2RhdGEtdG9nZ2xlPSJjb2xsYXBzZSJdW2RhdGEtdGFyZ2V0PSIjJytiLmlkKyciXScpLHRoaXMudHJhbnNpdGlvbmluZz1udWxsLHRoaXMub3B0aW9ucy5wYXJlbnQ/dGhpcy4kcGFyZW50PXRoaXMuZ2V0UGFyZW50KCk6dGhpcy5hZGRBcmlhQW5kQ29sbGFwc2VkQ2xhc3ModGhpcy4kZWxlbWVudCx0aGlzLiR0cmlnZ2VyKSx0aGlzLm9wdGlvbnMudG9nZ2xlJiZ0aGlzLnRvZ2dsZSgpfTtkLlZFUlNJT049IjMuMy43IixkLlRSQU5TSVRJT05fRFVSQVRJT049MzUwLGQuREVGQVVMVFM9e3RvZ2dsZTohMH0sZC5wcm90b3R5cGUuZGltZW5zaW9uPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy4kZWxlbWVudC5oYXNDbGFzcygid2lkdGgiKTtyZXR1cm4gYT8id2lkdGgiOiJoZWlnaHQifSxkLnByb3RvdHlwZS5zaG93PWZ1bmN0aW9uKCl7aWYoIXRoaXMudHJhbnNpdGlvbmluZyYmIXRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoImluIikpe3ZhciBiLGU9dGhpcy4kcGFyZW50JiZ0aGlzLiRwYXJlbnQuY2hpbGRyZW4oIi5wYW5lbCIpLmNoaWxkcmVuKCIuaW4sIC5jb2xsYXBzaW5nIik7aWYoIShlJiZlLmxlbmd0aCYmKGI9ZS5kYXRhKCJicy5jb2xsYXBzZSIpLGImJmIudHJhbnNpdGlvbmluZykpKXt2YXIgZj1hLkV2ZW50KCJzaG93LmJzLmNvbGxhcHNlIik7aWYodGhpcy4kZWxlbWVudC50cmlnZ2VyKGYpLCFmLmlzRGVmYXVsdFByZXZlbnRlZCgpKXtlJiZlLmxlbmd0aCYmKGMuY2FsbChlLCJoaWRlIiksYnx8ZS5kYXRhKCJicy5jb2xsYXBzZSIsbnVsbCkpO3ZhciBnPXRoaXMuZGltZW5zaW9uKCk7dGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcygiY29sbGFwc2UiKS5hZGRDbGFzcygiY29sbGFwc2luZyIpW2ddKDApLmF0dHIoImFyaWEtZXhwYW5kZWQiLCEwKSx0aGlzLiR0cmlnZ2VyLnJlbW92ZUNsYXNzKCJjb2xsYXBzZWQiKS5hdHRyKCJhcmlhLWV4cGFuZGVkIiwhMCksdGhpcy50cmFuc2l0aW9uaW5nPTE7dmFyIGg9ZnVuY3Rpb24oKXt0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKCJjb2xsYXBzaW5nIikuYWRkQ2xhc3MoImNvbGxhcHNlIGluIilbZ10oIiIpLHRoaXMudHJhbnNpdGlvbmluZz0wLHRoaXMuJGVsZW1lbnQudHJpZ2dlcigic2hvd24uYnMuY29sbGFwc2UiKX07aWYoIWEuc3VwcG9ydC50cmFuc2l0aW9uKXJldHVybiBoLmNhbGwodGhpcyk7dmFyIGk9YS5jYW1lbENhc2UoWyJzY3JvbGwiLGddLmpvaW4oIi0iKSk7dGhpcy4kZWxlbWVudC5vbmUoImJzVHJhbnNpdGlvbkVuZCIsYS5wcm94eShoLHRoaXMpKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChkLlRSQU5TSVRJT05fRFVSQVRJT04pW2ddKHRoaXMuJGVsZW1lbnRbMF1baV0pfX19fSxkLnByb3RvdHlwZS5oaWRlPWZ1bmN0aW9uKCl7aWYoIXRoaXMudHJhbnNpdGlvbmluZyYmdGhpcy4kZWxlbWVudC5oYXNDbGFzcygiaW4iKSl7dmFyIGI9YS5FdmVudCgiaGlkZS5icy5jb2xsYXBzZSIpO2lmKHRoaXMuJGVsZW1lbnQudHJpZ2dlcihiKSwhYi5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7dmFyIGM9dGhpcy5kaW1lbnNpb24oKTt0aGlzLiRlbGVtZW50W2NdKHRoaXMuJGVsZW1lbnRbY10oKSlbMF0ub2Zmc2V0SGVpZ2h0LHRoaXMuJGVsZW1lbnQuYWRkQ2xhc3MoImNvbGxhcHNpbmciKS5yZW1vdmVDbGFzcygiY29sbGFwc2UgaW4iKS5hdHRyKCJhcmlhLWV4cGFuZGVkIiwhMSksdGhpcy4kdHJpZ2dlci5hZGRDbGFzcygiY29sbGFwc2VkIikuYXR0cigiYXJpYS1leHBhbmRlZCIsITEpLHRoaXMudHJhbnNpdGlvbmluZz0xO3ZhciBlPWZ1bmN0aW9uKCl7dGhpcy50cmFuc2l0aW9uaW5nPTAsdGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcygiY29sbGFwc2luZyIpLmFkZENsYXNzKCJjb2xsYXBzZSIpLnRyaWdnZXIoImhpZGRlbi5icy5jb2xsYXBzZSIpfTtyZXR1cm4gYS5zdXBwb3J0LnRyYW5zaXRpb24/dm9pZCB0aGlzLiRlbGVtZW50W2NdKDApLm9uZSgiYnNUcmFuc2l0aW9uRW5kIixhLnByb3h5KGUsdGhpcykpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKGQuVFJBTlNJVElPTl9EVVJBVElPTik6ZS5jYWxsKHRoaXMpfX19LGQucHJvdG90eXBlLnRvZ2dsZT1mdW5jdGlvbigpe3RoaXNbdGhpcy4kZWxlbWVudC5oYXNDbGFzcygiaW4iKT8iaGlkZSI6InNob3ciXSgpfSxkLnByb3RvdHlwZS5nZXRQYXJlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gYSh0aGlzLm9wdGlvbnMucGFyZW50KS5maW5kKCdbZGF0YS10b2dnbGU9ImNvbGxhcHNlIl1bZGF0YS1wYXJlbnQ9IicrdGhpcy5vcHRpb25zLnBhcmVudCsnIl0nKS5lYWNoKGEucHJveHkoZnVuY3Rpb24oYyxkKXt2YXIgZT1hKGQpO3RoaXMuYWRkQXJpYUFuZENvbGxhcHNlZENsYXNzKGIoZSksZSl9LHRoaXMpKS5lbmQoKX0sZC5wcm90b3R5cGUuYWRkQXJpYUFuZENvbGxhcHNlZENsYXNzPWZ1bmN0aW9uKGEsYil7dmFyIGM9YS5oYXNDbGFzcygiaW4iKTthLmF0dHIoImFyaWEtZXhwYW5kZWQiLGMpLGIudG9nZ2xlQ2xhc3MoImNvbGxhcHNlZCIsIWMpLmF0dHIoImFyaWEtZXhwYW5kZWQiLGMpfTt2YXIgZT1hLmZuLmNvbGxhcHNlO2EuZm4uY29sbGFwc2U9YyxhLmZuLmNvbGxhcHNlLkNvbnN0cnVjdG9yPWQsYS5mbi5jb2xsYXBzZS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGEuZm4uY29sbGFwc2U9ZSx0aGlzfSxhKGRvY3VtZW50KS5vbigiY2xpY2suYnMuY29sbGFwc2UuZGF0YS1hcGkiLCdbZGF0YS10b2dnbGU9ImNvbGxhcHNlIl0nLGZ1bmN0aW9uKGQpe3ZhciBlPWEodGhpcyk7ZS5hdHRyKCJkYXRhLXRhcmdldCIpfHxkLnByZXZlbnREZWZhdWx0KCk7dmFyIGY9YihlKSxnPWYuZGF0YSgiYnMuY29sbGFwc2UiKSxoPWc/InRvZ2dsZSI6ZS5kYXRhKCk7Yy5jYWxsKGYsaCl9KX0oalF1ZXJ5KSwrZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYil7dmFyIGM9Yi5hdHRyKCJkYXRhLXRhcmdldCIpO2N8fChjPWIuYXR0cigiaHJlZiIpLGM9YyYmLyNbQS1aYS16XS8udGVzdChjKSYmYy5yZXBsYWNlKC8uKig/PSNbXlxzXSokKS8sIiIpKTt2YXIgZD1jJiZhKGMpO3JldHVybiBkJiZkLmxlbmd0aD9kOmIucGFyZW50KCl9ZnVuY3Rpb24gYyhjKXtjJiYzPT09Yy53aGljaHx8KGEoZSkucmVtb3ZlKCksYShmKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGQ9YSh0aGlzKSxlPWIoZCksZj17cmVsYXRlZFRhcmdldDp0aGlzfTtlLmhhc0NsYXNzKCJvcGVuIikmJihjJiYiY2xpY2siPT1jLnR5cGUmJi9pbnB1dHx0ZXh0YXJlYS9pLnRlc3QoYy50YXJnZXQudGFnTmFtZSkmJmEuY29udGFpbnMoZVswXSxjLnRhcmdldCl8fChlLnRyaWdnZXIoYz1hLkV2ZW50KCJoaWRlLmJzLmRyb3Bkb3duIixmKSksYy5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8KGQuYXR0cigiYXJpYS1leHBhbmRlZCIsImZhbHNlIiksZS5yZW1vdmVDbGFzcygib3BlbiIpLnRyaWdnZXIoYS5FdmVudCgiaGlkZGVuLmJzLmRyb3Bkb3duIixmKSkpKSl9KSl9ZnVuY3Rpb24gZChiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9YSh0aGlzKSxkPWMuZGF0YSgiYnMuZHJvcGRvd24iKTtkfHxjLmRhdGEoImJzLmRyb3Bkb3duIixkPW5ldyBnKHRoaXMpKSwic3RyaW5nIj09dHlwZW9mIGImJmRbYl0uY2FsbChjKX0pfXZhciBlPSIuZHJvcGRvd24tYmFja2Ryb3AiLGY9J1tkYXRhLXRvZ2dsZT0iZHJvcGRvd24iXScsZz1mdW5jdGlvbihiKXthKGIpLm9uKCJjbGljay5icy5kcm9wZG93biIsdGhpcy50b2dnbGUpfTtnLlZFUlNJT049IjMuMy43IixnLnByb3RvdHlwZS50b2dnbGU9ZnVuY3Rpb24oZCl7dmFyIGU9YSh0aGlzKTtpZighZS5pcygiLmRpc2FibGVkLCA6ZGlzYWJsZWQiKSl7dmFyIGY9YihlKSxnPWYuaGFzQ2xhc3MoIm9wZW4iKTtpZihjKCksIWcpeyJvbnRvdWNoc3RhcnQiaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50JiYhZi5jbG9zZXN0KCIubmF2YmFyLW5hdiIpLmxlbmd0aCYmYShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSkuYWRkQ2xhc3MoImRyb3Bkb3duLWJhY2tkcm9wIikuaW5zZXJ0QWZ0ZXIoYSh0aGlzKSkub24oImNsaWNrIixjKTt2YXIgaD17cmVsYXRlZFRhcmdldDp0aGlzfTtpZihmLnRyaWdnZXIoZD1hLkV2ZW50KCJzaG93LmJzLmRyb3Bkb3duIixoKSksZC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSlyZXR1cm47ZS50cmlnZ2VyKCJmb2N1cyIpLmF0dHIoImFyaWEtZXhwYW5kZWQiLCJ0cnVlIiksZi50b2dnbGVDbGFzcygib3BlbiIpLnRyaWdnZXIoYS5FdmVudCgic2hvd24uYnMuZHJvcGRvd24iLGgpKX1yZXR1cm4hMX19LGcucHJvdG90eXBlLmtleWRvd249ZnVuY3Rpb24oYyl7aWYoLygzOHw0MHwyN3wzMikvLnRlc3QoYy53aGljaCkmJiEvaW5wdXR8dGV4dGFyZWEvaS50ZXN0KGMudGFyZ2V0LnRhZ05hbWUpKXt2YXIgZD1hKHRoaXMpO2lmKGMucHJldmVudERlZmF1bHQoKSxjLnN0b3BQcm9wYWdhdGlvbigpLCFkLmlzKCIuZGlzYWJsZWQsIDpkaXNhYmxlZCIpKXt2YXIgZT1iKGQpLGc9ZS5oYXNDbGFzcygib3BlbiIpO2lmKCFnJiYyNyE9Yy53aGljaHx8ZyYmMjc9PWMud2hpY2gpcmV0dXJuIDI3PT1jLndoaWNoJiZlLmZpbmQoZikudHJpZ2dlcigiZm9jdXMiKSxkLnRyaWdnZXIoImNsaWNrIik7dmFyIGg9IiBsaTpub3QoLmRpc2FibGVkKTp2aXNpYmxlIGEiLGk9ZS5maW5kKCIuZHJvcGRvd24tbWVudSIraCk7aWYoaS5sZW5ndGgpe3ZhciBqPWkuaW5kZXgoYy50YXJnZXQpOzM4PT1jLndoaWNoJiZqPjAmJmotLSw0MD09Yy53aGljaCYmajxpLmxlbmd0aC0xJiZqKyssfmp8fChqPTApLGkuZXEoaikudHJpZ2dlcigiZm9jdXMiKX19fX07dmFyIGg9YS5mbi5kcm9wZG93bjthLmZuLmRyb3Bkb3duPWQsYS5mbi5kcm9wZG93bi5Db25zdHJ1Y3Rvcj1nLGEuZm4uZHJvcGRvd24ubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBhLmZuLmRyb3Bkb3duPWgsdGhpc30sYShkb2N1bWVudCkub24oImNsaWNrLmJzLmRyb3Bkb3duLmRhdGEtYXBpIixjKS5vbigiY2xpY2suYnMuZHJvcGRvd24uZGF0YS1hcGkiLCIuZHJvcGRvd24gZm9ybSIsZnVuY3Rpb24oYSl7YS5zdG9wUHJvcGFnYXRpb24oKX0pLm9uKCJjbGljay5icy5kcm9wZG93bi5kYXRhLWFwaSIsZixnLnByb3RvdHlwZS50b2dnbGUpLm9uKCJrZXlkb3duLmJzLmRyb3Bkb3duLmRhdGEtYXBpIixmLGcucHJvdG90eXBlLmtleWRvd24pLm9uKCJrZXlkb3duLmJzLmRyb3Bkb3duLmRhdGEtYXBpIiwiLmRyb3Bkb3duLW1lbnUiLGcucHJvdG90eXBlLmtleWRvd24pfShqUXVlcnkpLCtmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihiLGQpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZT1hKHRoaXMpLGY9ZS5kYXRhKCJicy5tb2RhbCIpLGc9YS5leHRlbmQoe30sYy5ERUZBVUxUUyxlLmRhdGEoKSwib2JqZWN0Ij09dHlwZW9mIGImJmIpO2Z8fGUuZGF0YSgiYnMubW9kYWwiLGY9bmV3IGModGhpcyxnKSksInN0cmluZyI9PXR5cGVvZiBiP2ZbYl0oZCk6Zy5zaG93JiZmLnNob3coZCl9KX12YXIgYz1mdW5jdGlvbihiLGMpe3RoaXMub3B0aW9ucz1jLHRoaXMuJGJvZHk9YShkb2N1bWVudC5ib2R5KSx0aGlzLiRlbGVtZW50PWEoYiksdGhpcy4kZGlhbG9nPXRoaXMuJGVsZW1lbnQuZmluZCgiLm1vZGFsLWRpYWxvZyIpLHRoaXMuJGJhY2tkcm9wPW51bGwsdGhpcy5pc1Nob3duPW51bGwsdGhpcy5vcmlnaW5hbEJvZHlQYWQ9bnVsbCx0aGlzLnNjcm9sbGJhcldpZHRoPTAsdGhpcy5pZ25vcmVCYWNrZHJvcENsaWNrPSExLHRoaXMub3B0aW9ucy5yZW1vdGUmJnRoaXMuJGVsZW1lbnQuZmluZCgiLm1vZGFsLWNvbnRlbnQiKS5sb2FkKHRoaXMub3B0aW9ucy5yZW1vdGUsYS5wcm94eShmdW5jdGlvbigpe3RoaXMuJGVsZW1lbnQudHJpZ2dlcigibG9hZGVkLmJzLm1vZGFsIil9LHRoaXMpKX07Yy5WRVJTSU9OPSIzLjMuNyIsYy5UUkFOU0lUSU9OX0RVUkFUSU9OPTMwMCxjLkJBQ0tEUk9QX1RSQU5TSVRJT05fRFVSQVRJT049MTUwLGMuREVGQVVMVFM9e2JhY2tkcm9wOiEwLGtleWJvYXJkOiEwLHNob3c6ITB9LGMucHJvdG90eXBlLnRvZ2dsZT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pc1Nob3duP3RoaXMuaGlkZSgpOnRoaXMuc2hvdyhhKX0sYy5wcm90b3R5cGUuc2hvdz1mdW5jdGlvbihiKXt2YXIgZD10aGlzLGU9YS5FdmVudCgic2hvdy5icy5tb2RhbCIse3JlbGF0ZWRUYXJnZXQ6Yn0pO3RoaXMuJGVsZW1lbnQudHJpZ2dlcihlKSx0aGlzLmlzU2hvd258fGUuaXNEZWZhdWx0UHJldmVudGVkKCl8fCh0aGlzLmlzU2hvd249ITAsdGhpcy5jaGVja1Njcm9sbGJhcigpLHRoaXMuc2V0U2Nyb2xsYmFyKCksdGhpcy4kYm9keS5hZGRDbGFzcygibW9kYWwtb3BlbiIpLHRoaXMuZXNjYXBlKCksdGhpcy5yZXNpemUoKSx0aGlzLiRlbGVtZW50Lm9uKCJjbGljay5kaXNtaXNzLmJzLm1vZGFsIiwnW2RhdGEtZGlzbWlzcz0ibW9kYWwiXScsYS5wcm94eSh0aGlzLmhpZGUsdGhpcykpLHRoaXMuJGRpYWxvZy5vbigibW91c2Vkb3duLmRpc21pc3MuYnMubW9kYWwiLGZ1bmN0aW9uKCl7ZC4kZWxlbWVudC5vbmUoIm1vdXNldXAuZGlzbWlzcy5icy5tb2RhbCIsZnVuY3Rpb24oYil7YShiLnRhcmdldCkuaXMoZC4kZWxlbWVudCkmJihkLmlnbm9yZUJhY2tkcm9wQ2xpY2s9ITApfSl9KSx0aGlzLmJhY2tkcm9wKGZ1bmN0aW9uKCl7dmFyIGU9YS5zdXBwb3J0LnRyYW5zaXRpb24mJmQuJGVsZW1lbnQuaGFzQ2xhc3MoImZhZGUiKTtkLiRlbGVtZW50LnBhcmVudCgpLmxlbmd0aHx8ZC4kZWxlbWVudC5hcHBlbmRUbyhkLiRib2R5KSxkLiRlbGVtZW50LnNob3coKS5zY3JvbGxUb3AoMCksZC5hZGp1c3REaWFsb2coKSxlJiZkLiRlbGVtZW50WzBdLm9mZnNldFdpZHRoLGQuJGVsZW1lbnQuYWRkQ2xhc3MoImluIiksZC5lbmZvcmNlRm9jdXMoKTt2YXIgZj1hLkV2ZW50KCJzaG93bi5icy5tb2RhbCIse3JlbGF0ZWRUYXJnZXQ6Yn0pO2U/ZC4kZGlhbG9nLm9uZSgiYnNUcmFuc2l0aW9uRW5kIixmdW5jdGlvbigpe2QuJGVsZW1lbnQudHJpZ2dlcigiZm9jdXMiKS50cmlnZ2VyKGYpfSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoYy5UUkFOU0lUSU9OX0RVUkFUSU9OKTpkLiRlbGVtZW50LnRyaWdnZXIoImZvY3VzIikudHJpZ2dlcihmKX0pKX0sYy5wcm90b3R5cGUuaGlkZT1mdW5jdGlvbihiKXtiJiZiLnByZXZlbnREZWZhdWx0KCksYj1hLkV2ZW50KCJoaWRlLmJzLm1vZGFsIiksdGhpcy4kZWxlbWVudC50cmlnZ2VyKGIpLHRoaXMuaXNTaG93biYmIWIuaXNEZWZhdWx0UHJldmVudGVkKCkmJih0aGlzLmlzU2hvd249ITEsdGhpcy5lc2NhcGUoKSx0aGlzLnJlc2l6ZSgpLGEoZG9jdW1lbnQpLm9mZigiZm9jdXNpbi5icy5tb2RhbCIpLHRoaXMuJGVsZW1lbnQucmVtb3ZlQ2xhc3MoImluIikub2ZmKCJjbGljay5kaXNtaXNzLmJzLm1vZGFsIikub2ZmKCJtb3VzZXVwLmRpc21pc3MuYnMubW9kYWwiKSx0aGlzLiRkaWFsb2cub2ZmKCJtb3VzZWRvd24uZGlzbWlzcy5icy5tb2RhbCIpLGEuc3VwcG9ydC50cmFuc2l0aW9uJiZ0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKCJmYWRlIik/dGhpcy4kZWxlbWVudC5vbmUoImJzVHJhbnNpdGlvbkVuZCIsYS5wcm94eSh0aGlzLmhpZGVNb2RhbCx0aGlzKSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoYy5UUkFOU0lUSU9OX0RVUkFUSU9OKTp0aGlzLmhpZGVNb2RhbCgpKX0sYy5wcm90b3R5cGUuZW5mb3JjZUZvY3VzPWZ1bmN0aW9uKCl7YShkb2N1bWVudCkub2ZmKCJmb2N1c2luLmJzLm1vZGFsIikub24oImZvY3VzaW4uYnMubW9kYWwiLGEucHJveHkoZnVuY3Rpb24oYSl7ZG9jdW1lbnQ9PT1hLnRhcmdldHx8dGhpcy4kZWxlbWVudFswXT09PWEudGFyZ2V0fHx0aGlzLiRlbGVtZW50LmhhcyhhLnRhcmdldCkubGVuZ3RofHx0aGlzLiRlbGVtZW50LnRyaWdnZXIoImZvY3VzIil9LHRoaXMpKX0sYy5wcm90b3R5cGUuZXNjYXBlPWZ1bmN0aW9uKCl7dGhpcy5pc1Nob3duJiZ0aGlzLm9wdGlvbnMua2V5Ym9hcmQ/dGhpcy4kZWxlbWVudC5vbigia2V5ZG93bi5kaXNtaXNzLmJzLm1vZGFsIixhLnByb3h5KGZ1bmN0aW9uKGEpezI3PT1hLndoaWNoJiZ0aGlzLmhpZGUoKX0sdGhpcykpOnRoaXMuaXNTaG93bnx8dGhpcy4kZWxlbWVudC5vZmYoImtleWRvd24uZGlzbWlzcy5icy5tb2RhbCIpfSxjLnByb3RvdHlwZS5yZXNpemU9ZnVuY3Rpb24oKXt0aGlzLmlzU2hvd24/YSh3aW5kb3cpLm9uKCJyZXNpemUuYnMubW9kYWwiLGEucHJveHkodGhpcy5oYW5kbGVVcGRhdGUsdGhpcykpOmEod2luZG93KS5vZmYoInJlc2l6ZS5icy5tb2RhbCIpfSxjLnByb3RvdHlwZS5oaWRlTW9kYWw9ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3RoaXMuJGVsZW1lbnQuaGlkZSgpLHRoaXMuYmFja2Ryb3AoZnVuY3Rpb24oKXthLiRib2R5LnJlbW92ZUNsYXNzKCJtb2RhbC1vcGVuIiksYS5yZXNldEFkanVzdG1lbnRzKCksYS5yZXNldFNjcm9sbGJhcigpLGEuJGVsZW1lbnQudHJpZ2dlcigiaGlkZGVuLmJzLm1vZGFsIil9KX0sYy5wcm90b3R5cGUucmVtb3ZlQmFja2Ryb3A9ZnVuY3Rpb24oKXt0aGlzLiRiYWNrZHJvcCYmdGhpcy4kYmFja2Ryb3AucmVtb3ZlKCksdGhpcy4kYmFja2Ryb3A9bnVsbH0sYy5wcm90b3R5cGUuYmFja2Ryb3A9ZnVuY3Rpb24oYil7dmFyIGQ9dGhpcyxlPXRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoImZhZGUiKT8iZmFkZSI6IiI7aWYodGhpcy5pc1Nob3duJiZ0aGlzLm9wdGlvbnMuYmFja2Ryb3Ape3ZhciBmPWEuc3VwcG9ydC50cmFuc2l0aW9uJiZlO2lmKHRoaXMuJGJhY2tkcm9wPWEoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikpLmFkZENsYXNzKCJtb2RhbC1iYWNrZHJvcCAiK2UpLmFwcGVuZFRvKHRoaXMuJGJvZHkpLHRoaXMuJGVsZW1lbnQub24oImNsaWNrLmRpc21pc3MuYnMubW9kYWwiLGEucHJveHkoZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaWdub3JlQmFja2Ryb3BDbGljaz92b2lkKHRoaXMuaWdub3JlQmFja2Ryb3BDbGljaz0hMSk6dm9pZChhLnRhcmdldD09PWEuY3VycmVudFRhcmdldCYmKCJzdGF0aWMiPT10aGlzLm9wdGlvbnMuYmFja2Ryb3A/dGhpcy4kZWxlbWVudFswXS5mb2N1cygpOnRoaXMuaGlkZSgpKSl9LHRoaXMpKSxmJiZ0aGlzLiRiYWNrZHJvcFswXS5vZmZzZXRXaWR0aCx0aGlzLiRiYWNrZHJvcC5hZGRDbGFzcygiaW4iKSwhYilyZXR1cm47Zj90aGlzLiRiYWNrZHJvcC5vbmUoImJzVHJhbnNpdGlvbkVuZCIsYikuZW11bGF0ZVRyYW5zaXRpb25FbmQoYy5CQUNLRFJPUF9UUkFOU0lUSU9OX0RVUkFUSU9OKTpiKCl9ZWxzZSBpZighdGhpcy5pc1Nob3duJiZ0aGlzLiRiYWNrZHJvcCl7dGhpcy4kYmFja2Ryb3AucmVtb3ZlQ2xhc3MoImluIik7dmFyIGc9ZnVuY3Rpb24oKXtkLnJlbW92ZUJhY2tkcm9wKCksYiYmYigpfTthLnN1cHBvcnQudHJhbnNpdGlvbiYmdGhpcy4kZWxlbWVudC5oYXNDbGFzcygiZmFkZSIpP3RoaXMuJGJhY2tkcm9wLm9uZSgiYnNUcmFuc2l0aW9uRW5kIixnKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChjLkJBQ0tEUk9QX1RSQU5TSVRJT05fRFVSQVRJT04pOmcoKX1lbHNlIGImJmIoKX0sYy5wcm90b3R5cGUuaGFuZGxlVXBkYXRlPWZ1bmN0aW9uKCl7dGhpcy5hZGp1c3REaWFsb2coKX0sYy5wcm90b3R5cGUuYWRqdXN0RGlhbG9nPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy4kZWxlbWVudFswXS5zY3JvbGxIZWlnaHQ+ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDt0aGlzLiRlbGVtZW50LmNzcyh7cGFkZGluZ0xlZnQ6IXRoaXMuYm9keUlzT3ZlcmZsb3dpbmcmJmE/dGhpcy5zY3JvbGxiYXJXaWR0aDoiIixwYWRkaW5nUmlnaHQ6dGhpcy5ib2R5SXNPdmVyZmxvd2luZyYmIWE/dGhpcy5zY3JvbGxiYXJXaWR0aDoiIn0pfSxjLnByb3RvdHlwZS5yZXNldEFkanVzdG1lbnRzPWZ1bmN0aW9uKCl7dGhpcy4kZWxlbWVudC5jc3Moe3BhZGRpbmdMZWZ0OiIiLHBhZGRpbmdSaWdodDoiIn0pfSxjLnByb3RvdHlwZS5jaGVja1Njcm9sbGJhcj1mdW5jdGlvbigpe3ZhciBhPXdpbmRvdy5pbm5lcldpZHRoO2lmKCFhKXt2YXIgYj1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7YT1iLnJpZ2h0LU1hdGguYWJzKGIubGVmdCl9dGhpcy5ib2R5SXNPdmVyZmxvd2luZz1kb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoPGEsdGhpcy5zY3JvbGxiYXJXaWR0aD10aGlzLm1lYXN1cmVTY3JvbGxiYXIoKX0sYy5wcm90b3R5cGUuc2V0U2Nyb2xsYmFyPWZ1bmN0aW9uKCl7dmFyIGE9cGFyc2VJbnQodGhpcy4kYm9keS5jc3MoInBhZGRpbmctcmlnaHQiKXx8MCwxMCk7dGhpcy5vcmlnaW5hbEJvZHlQYWQ9ZG9jdW1lbnQuYm9keS5zdHlsZS5wYWRkaW5nUmlnaHR8fCIiLHRoaXMuYm9keUlzT3ZlcmZsb3dpbmcmJnRoaXMuJGJvZHkuY3NzKCJwYWRkaW5nLXJpZ2h0IixhK3RoaXMuc2Nyb2xsYmFyV2lkdGgpfSxjLnByb3RvdHlwZS5yZXNldFNjcm9sbGJhcj1mdW5jdGlvbigpe3RoaXMuJGJvZHkuY3NzKCJwYWRkaW5nLXJpZ2h0Iix0aGlzLm9yaWdpbmFsQm9keVBhZCl9LGMucHJvdG90eXBlLm1lYXN1cmVTY3JvbGxiYXI9ZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTthLmNsYXNzTmFtZT0ibW9kYWwtc2Nyb2xsYmFyLW1lYXN1cmUiLHRoaXMuJGJvZHkuYXBwZW5kKGEpO3ZhciBiPWEub2Zmc2V0V2lkdGgtYS5jbGllbnRXaWR0aDtyZXR1cm4gdGhpcy4kYm9keVswXS5yZW1vdmVDaGlsZChhKSxifTt2YXIgZD1hLmZuLm1vZGFsO2EuZm4ubW9kYWw9YixhLmZuLm1vZGFsLkNvbnN0cnVjdG9yPWMsYS5mbi5tb2RhbC5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGEuZm4ubW9kYWw9ZCx0aGlzfSxhKGRvY3VtZW50KS5vbigiY2xpY2suYnMubW9kYWwuZGF0YS1hcGkiLCdbZGF0YS10b2dnbGU9Im1vZGFsIl0nLGZ1bmN0aW9uKGMpe3ZhciBkPWEodGhpcyksZT1kLmF0dHIoImhyZWYiKSxmPWEoZC5hdHRyKCJkYXRhLXRhcmdldCIpfHxlJiZlLnJlcGxhY2UoLy4qKD89I1teXHNdKyQpLywiIikpLGc9Zi5kYXRhKCJicy5tb2RhbCIpPyJ0b2dnbGUiOmEuZXh0ZW5kKHtyZW1vdGU6IS8jLy50ZXN0KGUpJiZlfSxmLmRhdGEoKSxkLmRhdGEoKSk7ZC5pcygiYSIpJiZjLnByZXZlbnREZWZhdWx0KCksZi5vbmUoInNob3cuYnMubW9kYWwiLGZ1bmN0aW9uKGEpe2EuaXNEZWZhdWx0UHJldmVudGVkKCl8fGYub25lKCJoaWRkZW4uYnMubW9kYWwiLGZ1bmN0aW9uKCl7ZC5pcygiOnZpc2libGUiKSYmZC50cmlnZ2VyKCJmb2N1cyIpfSl9KSxiLmNhbGwoZixnLHRoaXMpfSl9KGpRdWVyeSksK2Z1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZD1hKHRoaXMpLGU9ZC5kYXRhKCJicy50b29sdGlwIiksZj0ib2JqZWN0Ij09dHlwZW9mIGImJmI7IWUmJi9kZXN0cm95fGhpZGUvLnRlc3QoYil8fChlfHxkLmRhdGEoImJzLnRvb2x0aXAiLGU9bmV3IGModGhpcyxmKSksInN0cmluZyI9PXR5cGVvZiBiJiZlW2JdKCkpfSl9dmFyIGM9ZnVuY3Rpb24oYSxiKXt0aGlzLnR5cGU9bnVsbCx0aGlzLm9wdGlvbnM9bnVsbCx0aGlzLmVuYWJsZWQ9bnVsbCx0aGlzLnRpbWVvdXQ9bnVsbCx0aGlzLmhvdmVyU3RhdGU9bnVsbCx0aGlzLiRlbGVtZW50PW51bGwsdGhpcy5pblN0YXRlPW51bGwsdGhpcy5pbml0KCJ0b29sdGlwIixhLGIpfTtjLlZFUlNJT049IjMuMy43IixjLlRSQU5TSVRJT05fRFVSQVRJT049MTUwLGMuREVGQVVMVFM9e2FuaW1hdGlvbjohMCxwbGFjZW1lbnQ6InRvcCIsc2VsZWN0b3I6ITEsdGVtcGxhdGU6JzxkaXYgY2xhc3M9InRvb2x0aXAiIHJvbGU9InRvb2x0aXAiPjxkaXYgY2xhc3M9InRvb2x0aXAtYXJyb3ciPjwvZGl2PjxkaXYgY2xhc3M9InRvb2x0aXAtaW5uZXIiPjwvZGl2PjwvZGl2PicsdHJpZ2dlcjoiaG92ZXIgZm9jdXMiLHRpdGxlOiIiLGRlbGF5OjAsaHRtbDohMSxjb250YWluZXI6ITEsdmlld3BvcnQ6e3NlbGVjdG9yOiJib2R5IixwYWRkaW5nOjB9fSxjLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKGIsYyxkKXtpZih0aGlzLmVuYWJsZWQ9ITAsdGhpcy50eXBlPWIsdGhpcy4kZWxlbWVudD1hKGMpLHRoaXMub3B0aW9ucz10aGlzLmdldE9wdGlvbnMoZCksdGhpcy4kdmlld3BvcnQ9dGhpcy5vcHRpb25zLnZpZXdwb3J0JiZhKGEuaXNGdW5jdGlvbih0aGlzLm9wdGlvbnMudmlld3BvcnQpP3RoaXMub3B0aW9ucy52aWV3cG9ydC5jYWxsKHRoaXMsdGhpcy4kZWxlbWVudCk6dGhpcy5vcHRpb25zLnZpZXdwb3J0LnNlbGVjdG9yfHx0aGlzLm9wdGlvbnMudmlld3BvcnQpLHRoaXMuaW5TdGF0ZT17Y2xpY2s6ITEsaG92ZXI6ITEsZm9jdXM6ITF9LHRoaXMuJGVsZW1lbnRbMF1pbnN0YW5jZW9mIGRvY3VtZW50LmNvbnN0cnVjdG9yJiYhdGhpcy5vcHRpb25zLnNlbGVjdG9yKXRocm93IG5ldyBFcnJvcigiYHNlbGVjdG9yYCBvcHRpb24gbXVzdCBiZSBzcGVjaWZpZWQgd2hlbiBpbml0aWFsaXppbmcgIit0aGlzLnR5cGUrIiBvbiB0aGUgd2luZG93LmRvY3VtZW50IG9iamVjdCEiKTtmb3IodmFyIGU9dGhpcy5vcHRpb25zLnRyaWdnZXIuc3BsaXQoIiAiKSxmPWUubGVuZ3RoO2YtLTspe3ZhciBnPWVbZl07aWYoImNsaWNrIj09Zyl0aGlzLiRlbGVtZW50Lm9uKCJjbGljay4iK3RoaXMudHlwZSx0aGlzLm9wdGlvbnMuc2VsZWN0b3IsYS5wcm94eSh0aGlzLnRvZ2dsZSx0aGlzKSk7ZWxzZSBpZigibWFudWFsIiE9Zyl7dmFyIGg9ImhvdmVyIj09Zz8ibW91c2VlbnRlciI6ImZvY3VzaW4iLGk9ImhvdmVyIj09Zz8ibW91c2VsZWF2ZSI6ImZvY3Vzb3V0Ijt0aGlzLiRlbGVtZW50Lm9uKGgrIi4iK3RoaXMudHlwZSx0aGlzLm9wdGlvbnMuc2VsZWN0b3IsYS5wcm94eSh0aGlzLmVudGVyLHRoaXMpKSx0aGlzLiRlbGVtZW50Lm9uKGkrIi4iK3RoaXMudHlwZSx0aGlzLm9wdGlvbnMuc2VsZWN0b3IsYS5wcm94eSh0aGlzLmxlYXZlLHRoaXMpKX19dGhpcy5vcHRpb25zLnNlbGVjdG9yP3RoaXMuX29wdGlvbnM9YS5leHRlbmQoe30sdGhpcy5vcHRpb25zLHt0cmlnZ2VyOiJtYW51YWwiLHNlbGVjdG9yOiIifSk6dGhpcy5maXhUaXRsZSgpfSxjLnByb3RvdHlwZS5nZXREZWZhdWx0cz1mdW5jdGlvbigpe3JldHVybiBjLkRFRkFVTFRTfSxjLnByb3RvdHlwZS5nZXRPcHRpb25zPWZ1bmN0aW9uKGIpe3JldHVybiBiPWEuZXh0ZW5kKHt9LHRoaXMuZ2V0RGVmYXVsdHMoKSx0aGlzLiRlbGVtZW50LmRhdGEoKSxiKSxiLmRlbGF5JiYibnVtYmVyIj09dHlwZW9mIGIuZGVsYXkmJihiLmRlbGF5PXtzaG93OmIuZGVsYXksaGlkZTpiLmRlbGF5fSksYn0sYy5wcm90b3R5cGUuZ2V0RGVsZWdhdGVPcHRpb25zPWZ1bmN0aW9uKCl7dmFyIGI9e30sYz10aGlzLmdldERlZmF1bHRzKCk7cmV0dXJuIHRoaXMuX29wdGlvbnMmJmEuZWFjaCh0aGlzLl9vcHRpb25zLGZ1bmN0aW9uKGEsZCl7Y1thXSE9ZCYmKGJbYV09ZCl9KSxifSxjLnByb3RvdHlwZS5lbnRlcj1mdW5jdGlvbihiKXt2YXIgYz1iIGluc3RhbmNlb2YgdGhpcy5jb25zdHJ1Y3Rvcj9iOmEoYi5jdXJyZW50VGFyZ2V0KS5kYXRhKCJicy4iK3RoaXMudHlwZSk7cmV0dXJuIGN8fChjPW5ldyB0aGlzLmNvbnN0cnVjdG9yKGIuY3VycmVudFRhcmdldCx0aGlzLmdldERlbGVnYXRlT3B0aW9ucygpKSxhKGIuY3VycmVudFRhcmdldCkuZGF0YSgiYnMuIit0aGlzLnR5cGUsYykpLGIgaW5zdGFuY2VvZiBhLkV2ZW50JiYoYy5pblN0YXRlWyJmb2N1c2luIj09Yi50eXBlPyJmb2N1cyI6ImhvdmVyIl09ITApLGMudGlwKCkuaGFzQ2xhc3MoImluIil8fCJpbiI9PWMuaG92ZXJTdGF0ZT92b2lkKGMuaG92ZXJTdGF0ZT0iaW4iKTooY2xlYXJUaW1lb3V0KGMudGltZW91dCksYy5ob3ZlclN0YXRlPSJpbiIsYy5vcHRpb25zLmRlbGF5JiZjLm9wdGlvbnMuZGVsYXkuc2hvdz92b2lkKGMudGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ImluIj09Yy5ob3ZlclN0YXRlJiZjLnNob3coKX0sYy5vcHRpb25zLmRlbGF5LnNob3cpKTpjLnNob3coKSl9LGMucHJvdG90eXBlLmlzSW5TdGF0ZVRydWU9ZnVuY3Rpb24oKXtmb3IodmFyIGEgaW4gdGhpcy5pblN0YXRlKWlmKHRoaXMuaW5TdGF0ZVthXSlyZXR1cm4hMDtyZXR1cm4hMX0sYy5wcm90b3R5cGUubGVhdmU9ZnVuY3Rpb24oYil7dmFyIGM9YiBpbnN0YW5jZW9mIHRoaXMuY29uc3RydWN0b3I/YjphKGIuY3VycmVudFRhcmdldCkuZGF0YSgiYnMuIit0aGlzLnR5cGUpO2lmKGN8fChjPW5ldyB0aGlzLmNvbnN0cnVjdG9yKGIuY3VycmVudFRhcmdldCx0aGlzLmdldERlbGVnYXRlT3B0aW9ucygpKSxhKGIuY3VycmVudFRhcmdldCkuZGF0YSgiYnMuIit0aGlzLnR5cGUsYykpLGIgaW5zdGFuY2VvZiBhLkV2ZW50JiYoYy5pblN0YXRlWyJmb2N1c291dCI9PWIudHlwZT8iZm9jdXMiOiJob3ZlciJdPSExKSwhYy5pc0luU3RhdGVUcnVlKCkpcmV0dXJuIGNsZWFyVGltZW91dChjLnRpbWVvdXQpLGMuaG92ZXJTdGF0ZT0ib3V0IixjLm9wdGlvbnMuZGVsYXkmJmMub3B0aW9ucy5kZWxheS5oaWRlP3ZvaWQoYy50aW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXsib3V0Ij09Yy5ob3ZlclN0YXRlJiZjLmhpZGUoKX0sYy5vcHRpb25zLmRlbGF5LmhpZGUpKTpjLmhpZGUoKX0sYy5wcm90b3R5cGUuc2hvdz1mdW5jdGlvbigpe3ZhciBiPWEuRXZlbnQoInNob3cuYnMuIit0aGlzLnR5cGUpO2lmKHRoaXMuaGFzQ29udGVudCgpJiZ0aGlzLmVuYWJsZWQpe3RoaXMuJGVsZW1lbnQudHJpZ2dlcihiKTt2YXIgZD1hLmNvbnRhaW5zKHRoaXMuJGVsZW1lbnRbMF0ub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsdGhpcy4kZWxlbWVudFswXSk7aWYoYi5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8IWQpcmV0dXJuO3ZhciBlPXRoaXMsZj10aGlzLnRpcCgpLGc9dGhpcy5nZXRVSUQodGhpcy50eXBlKTt0aGlzLnNldENvbnRlbnQoKSxmLmF0dHIoImlkIixnKSx0aGlzLiRlbGVtZW50LmF0dHIoImFyaWEtZGVzY3JpYmVkYnkiLGcpLHRoaXMub3B0aW9ucy5hbmltYXRpb24mJmYuYWRkQ2xhc3MoImZhZGUiKTt2YXIgaD0iZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5vcHRpb25zLnBsYWNlbWVudD90aGlzLm9wdGlvbnMucGxhY2VtZW50LmNhbGwodGhpcyxmWzBdLHRoaXMuJGVsZW1lbnRbMF0pOnRoaXMub3B0aW9ucy5wbGFjZW1lbnQsaT0vXHM/YXV0bz9ccz8vaSxqPWkudGVzdChoKTtqJiYoaD1oLnJlcGxhY2UoaSwiIil8fCJ0b3AiKSxmLmRldGFjaCgpLmNzcyh7dG9wOjAsbGVmdDowLGRpc3BsYXk6ImJsb2NrIn0pLmFkZENsYXNzKGgpLmRhdGEoImJzLiIrdGhpcy50eXBlLHRoaXMpLHRoaXMub3B0aW9ucy5jb250YWluZXI/Zi5hcHBlbmRUbyh0aGlzLm9wdGlvbnMuY29udGFpbmVyKTpmLmluc2VydEFmdGVyKHRoaXMuJGVsZW1lbnQpLHRoaXMuJGVsZW1lbnQudHJpZ2dlcigiaW5zZXJ0ZWQuYnMuIit0aGlzLnR5cGUpO3ZhciBrPXRoaXMuZ2V0UG9zaXRpb24oKSxsPWZbMF0ub2Zmc2V0V2lkdGgsbT1mWzBdLm9mZnNldEhlaWdodDtpZihqKXt2YXIgbj1oLG89dGhpcy5nZXRQb3NpdGlvbih0aGlzLiR2aWV3cG9ydCk7aD0iYm90dG9tIj09aCYmay5ib3R0b20rbT5vLmJvdHRvbT8idG9wIjoidG9wIj09aCYmay50b3AtbTxvLnRvcD8iYm90dG9tIjoicmlnaHQiPT1oJiZrLnJpZ2h0K2w+by53aWR0aD8ibGVmdCI6ImxlZnQiPT1oJiZrLmxlZnQtbDxvLmxlZnQ/InJpZ2h0IjpoLGYucmVtb3ZlQ2xhc3MobikuYWRkQ2xhc3MoaCl9dmFyIHA9dGhpcy5nZXRDYWxjdWxhdGVkT2Zmc2V0KGgsayxsLG0pO3RoaXMuYXBwbHlQbGFjZW1lbnQocCxoKTt2YXIgcT1mdW5jdGlvbigpe3ZhciBhPWUuaG92ZXJTdGF0ZTtlLiRlbGVtZW50LnRyaWdnZXIoInNob3duLmJzLiIrZS50eXBlKSxlLmhvdmVyU3RhdGU9bnVsbCwib3V0Ij09YSYmZS5sZWF2ZShlKX07YS5zdXBwb3J0LnRyYW5zaXRpb24mJnRoaXMuJHRpcC5oYXNDbGFzcygiZmFkZSIpP2Yub25lKCJic1RyYW5zaXRpb25FbmQiLHEpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKGMuVFJBTlNJVElPTl9EVVJBVElPTik6cSgpfX0sYy5wcm90b3R5cGUuYXBwbHlQbGFjZW1lbnQ9ZnVuY3Rpb24oYixjKXt2YXIgZD10aGlzLnRpcCgpLGU9ZFswXS5vZmZzZXRXaWR0aCxmPWRbMF0ub2Zmc2V0SGVpZ2h0LGc9cGFyc2VJbnQoZC5jc3MoIm1hcmdpbi10b3AiKSwxMCksaD1wYXJzZUludChkLmNzcygibWFyZ2luLWxlZnQiKSwxMCk7aXNOYU4oZykmJihnPTApLGlzTmFOKGgpJiYoaD0wKSxiLnRvcCs9ZyxiLmxlZnQrPWgsYS5vZmZzZXQuc2V0T2Zmc2V0KGRbMF0sYS5leHRlbmQoe3VzaW5nOmZ1bmN0aW9uKGEpe2QuY3NzKHt0b3A6TWF0aC5yb3VuZChhLnRvcCksbGVmdDpNYXRoLnJvdW5kKGEubGVmdCl9KX19LGIpLDApLGQuYWRkQ2xhc3MoImluIik7dmFyIGk9ZFswXS5vZmZzZXRXaWR0aCxqPWRbMF0ub2Zmc2V0SGVpZ2h0OyJ0b3AiPT1jJiZqIT1mJiYoYi50b3A9Yi50b3ArZi1qKTt2YXIgaz10aGlzLmdldFZpZXdwb3J0QWRqdXN0ZWREZWx0YShjLGIsaSxqKTtrLmxlZnQ/Yi5sZWZ0Kz1rLmxlZnQ6Yi50b3ArPWsudG9wO3ZhciBsPS90b3B8Ym90dG9tLy50ZXN0KGMpLG09bD8yKmsubGVmdC1lK2k6MiprLnRvcC1mK2osbj1sPyJvZmZzZXRXaWR0aCI6Im9mZnNldEhlaWdodCI7ZC5vZmZzZXQoYiksdGhpcy5yZXBsYWNlQXJyb3cobSxkWzBdW25dLGwpfSxjLnByb3RvdHlwZS5yZXBsYWNlQXJyb3c9ZnVuY3Rpb24oYSxiLGMpe3RoaXMuYXJyb3coKS5jc3MoYz8ibGVmdCI6InRvcCIsNTAqKDEtYS9iKSsiJSIpLmNzcyhjPyJ0b3AiOiJsZWZ0IiwiIil9LGMucHJvdG90eXBlLnNldENvbnRlbnQ9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRpcCgpLGI9dGhpcy5nZXRUaXRsZSgpO2EuZmluZCgiLnRvb2x0aXAtaW5uZXIiKVt0aGlzLm9wdGlvbnMuaHRtbD8iaHRtbCI6InRleHQiXShiKSxhLnJlbW92ZUNsYXNzKCJmYWRlIGluIHRvcCBib3R0b20gbGVmdCByaWdodCIpfSxjLnByb3RvdHlwZS5oaWRlPWZ1bmN0aW9uKGIpe2Z1bmN0aW9uIGQoKXsiaW4iIT1lLmhvdmVyU3RhdGUmJmYuZGV0YWNoKCksZS4kZWxlbWVudCYmZS4kZWxlbWVudC5yZW1vdmVBdHRyKCJhcmlhLWRlc2NyaWJlZGJ5IikudHJpZ2dlcigiaGlkZGVuLmJzLiIrZS50eXBlKSxiJiZiKCl9dmFyIGU9dGhpcyxmPWEodGhpcy4kdGlwKSxnPWEuRXZlbnQoImhpZGUuYnMuIit0aGlzLnR5cGUpO2lmKHRoaXMuJGVsZW1lbnQudHJpZ2dlcihnKSwhZy5pc0RlZmF1bHRQcmV2ZW50ZWQoKSlyZXR1cm4gZi5yZW1vdmVDbGFzcygiaW4iKSxhLnN1cHBvcnQudHJhbnNpdGlvbiYmZi5oYXNDbGFzcygiZmFkZSIpP2Yub25lKCJic1RyYW5zaXRpb25FbmQiLGQpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKGMuVFJBTlNJVElPTl9EVVJBVElPTik6ZCgpLHRoaXMuaG92ZXJTdGF0ZT1udWxsLHRoaXN9LGMucHJvdG90eXBlLmZpeFRpdGxlPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy4kZWxlbWVudDsoYS5hdHRyKCJ0aXRsZSIpfHwic3RyaW5nIiE9dHlwZW9mIGEuYXR0cigiZGF0YS1vcmlnaW5hbC10aXRsZSIpKSYmYS5hdHRyKCJkYXRhLW9yaWdpbmFsLXRpdGxlIixhLmF0dHIoInRpdGxlIil8fCIiKS5hdHRyKCJ0aXRsZSIsIiIpfSxjLnByb3RvdHlwZS5oYXNDb250ZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0VGl0bGUoKX0sYy5wcm90b3R5cGUuZ2V0UG9zaXRpb249ZnVuY3Rpb24oYil7Yj1ifHx0aGlzLiRlbGVtZW50O3ZhciBjPWJbMF0sZD0iQk9EWSI9PWMudGFnTmFtZSxlPWMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7bnVsbD09ZS53aWR0aCYmKGU9YS5leHRlbmQoe30sZSx7d2lkdGg6ZS5yaWdodC1lLmxlZnQsaGVpZ2h0OmUuYm90dG9tLWUudG9wfSkpO3ZhciBmPXdpbmRvdy5TVkdFbGVtZW50JiZjIGluc3RhbmNlb2Ygd2luZG93LlNWR0VsZW1lbnQsZz1kP3t0b3A6MCxsZWZ0OjB9OmY/bnVsbDpiLm9mZnNldCgpLGg9e3Njcm9sbDpkP2RvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3B8fGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wOmIuc2Nyb2xsVG9wKCl9LGk9ZD97d2lkdGg6YSh3aW5kb3cpLndpZHRoKCksaGVpZ2h0OmEod2luZG93KS5oZWlnaHQoKX06bnVsbDtyZXR1cm4gYS5leHRlbmQoe30sZSxoLGksZyl9LGMucHJvdG90eXBlLmdldENhbGN1bGF0ZWRPZmZzZXQ9ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuImJvdHRvbSI9PWE/e3RvcDpiLnRvcCtiLmhlaWdodCxsZWZ0OmIubGVmdCtiLndpZHRoLzItYy8yfToidG9wIj09YT97dG9wOmIudG9wLWQsbGVmdDpiLmxlZnQrYi53aWR0aC8yLWMvMn06ImxlZnQiPT1hP3t0b3A6Yi50b3ArYi5oZWlnaHQvMi1kLzIsbGVmdDpiLmxlZnQtY306e3RvcDpiLnRvcCtiLmhlaWdodC8yLWQvMixsZWZ0OmIubGVmdCtiLndpZHRofX0sYy5wcm90b3R5cGUuZ2V0Vmlld3BvcnRBZGp1c3RlZERlbHRhPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXt0b3A6MCxsZWZ0OjB9O2lmKCF0aGlzLiR2aWV3cG9ydClyZXR1cm4gZTt2YXIgZj10aGlzLm9wdGlvbnMudmlld3BvcnQmJnRoaXMub3B0aW9ucy52aWV3cG9ydC5wYWRkaW5nfHwwLGc9dGhpcy5nZXRQb3NpdGlvbih0aGlzLiR2aWV3cG9ydCk7aWYoL3JpZ2h0fGxlZnQvLnRlc3QoYSkpe3ZhciBoPWIudG9wLWYtZy5zY3JvbGwsaT1iLnRvcCtmLWcuc2Nyb2xsK2Q7aDxnLnRvcD9lLnRvcD1nLnRvcC1oOmk+Zy50b3ArZy5oZWlnaHQmJihlLnRvcD1nLnRvcCtnLmhlaWdodC1pKX1lbHNle3ZhciBqPWIubGVmdC1mLGs9Yi5sZWZ0K2YrYztqPGcubGVmdD9lLmxlZnQ9Zy5sZWZ0LWo6az5nLnJpZ2h0JiYoZS5sZWZ0PWcubGVmdCtnLndpZHRoLWspfXJldHVybiBlfSxjLnByb3RvdHlwZS5nZXRUaXRsZT1mdW5jdGlvbigpe3ZhciBhLGI9dGhpcy4kZWxlbWVudCxjPXRoaXMub3B0aW9ucztyZXR1cm4gYT1iLmF0dHIoImRhdGEtb3JpZ2luYWwtdGl0bGUiKXx8KCJmdW5jdGlvbiI9PXR5cGVvZiBjLnRpdGxlP2MudGl0bGUuY2FsbChiWzBdKTpjLnRpdGxlKX0sYy5wcm90b3R5cGUuZ2V0VUlEPWZ1bmN0aW9uKGEpe2RvIGErPX5+KDFlNipNYXRoLnJhbmRvbSgpKTt3aGlsZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhKSk7cmV0dXJuIGF9LGMucHJvdG90eXBlLnRpcD1mdW5jdGlvbigpe2lmKCF0aGlzLiR0aXAmJih0aGlzLiR0aXA9YSh0aGlzLm9wdGlvbnMudGVtcGxhdGUpLDEhPXRoaXMuJHRpcC5sZW5ndGgpKXRocm93IG5ldyBFcnJvcih0aGlzLnR5cGUrIiBgdGVtcGxhdGVgIG9wdGlvbiBtdXN0IGNvbnNpc3Qgb2YgZXhhY3RseSAxIHRvcC1sZXZlbCBlbGVtZW50ISIpO3JldHVybiB0aGlzLiR0aXB9LGMucHJvdG90eXBlLmFycm93PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGFycm93PXRoaXMuJGFycm93fHx0aGlzLnRpcCgpLmZpbmQoIi50b29sdGlwLWFycm93Iil9LGMucHJvdG90eXBlLmVuYWJsZT1mdW5jdGlvbigpe3RoaXMuZW5hYmxlZD0hMH0sYy5wcm90b3R5cGUuZGlzYWJsZT1mdW5jdGlvbigpe3RoaXMuZW5hYmxlZD0hMX0sYy5wcm90b3R5cGUudG9nZ2xlRW5hYmxlZD1mdW5jdGlvbigpe3RoaXMuZW5hYmxlZD0hdGhpcy5lbmFibGVkfSxjLnByb3RvdHlwZS50b2dnbGU9ZnVuY3Rpb24oYil7dmFyIGM9dGhpcztiJiYoYz1hKGIuY3VycmVudFRhcmdldCkuZGF0YSgiYnMuIit0aGlzLnR5cGUpLGN8fChjPW5ldyB0aGlzLmNvbnN0cnVjdG9yKGIuY3VycmVudFRhcmdldCx0aGlzLmdldERlbGVnYXRlT3B0aW9ucygpKSxhKGIuY3VycmVudFRhcmdldCkuZGF0YSgiYnMuIit0aGlzLnR5cGUsYykpKSxiPyhjLmluU3RhdGUuY2xpY2s9IWMuaW5TdGF0ZS5jbGljayxjLmlzSW5TdGF0ZVRydWUoKT9jLmVudGVyKGMpOmMubGVhdmUoYykpOmMudGlwKCkuaGFzQ2xhc3MoImluIik/Yy5sZWF2ZShjKTpjLmVudGVyKGMpfSxjLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcztjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KSx0aGlzLmhpZGUoZnVuY3Rpb24oKXthLiRlbGVtZW50Lm9mZigiLiIrYS50eXBlKS5yZW1vdmVEYXRhKCJicy4iK2EudHlwZSksYS4kdGlwJiZhLiR0aXAuZGV0YWNoKCksYS4kdGlwPW51bGwsYS4kYXJyb3c9bnVsbCxhLiR2aWV3cG9ydD1udWxsLGEuJGVsZW1lbnQ9bnVsbH0pfTt2YXIgZD1hLmZuLnRvb2x0aXA7YS5mbi50b29sdGlwPWIsYS5mbi50b29sdGlwLkNvbnN0cnVjdG9yPWMsYS5mbi50b29sdGlwLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gYS5mbi50b29sdGlwPWQsdGhpc319KGpRdWVyeSksK2Z1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZD1hKHRoaXMpLGU9ZC5kYXRhKCJicy5wb3BvdmVyIiksZj0ib2JqZWN0Ij09dHlwZW9mIGImJmI7IWUmJi9kZXN0cm95fGhpZGUvLnRlc3QoYil8fChlfHxkLmRhdGEoImJzLnBvcG92ZXIiLGU9bmV3IGModGhpcyxmKSksInN0cmluZyI9PXR5cGVvZiBiJiZlW2JdKCkpfSl9dmFyIGM9ZnVuY3Rpb24oYSxiKXt0aGlzLmluaXQoInBvcG92ZXIiLGEsYil9O2lmKCFhLmZuLnRvb2x0aXApdGhyb3cgbmV3IEVycm9yKCJQb3BvdmVyIHJlcXVpcmVzIHRvb2x0aXAuanMiKTtjLlZFUlNJT049IjMuMy43IixjLkRFRkFVTFRTPWEuZXh0ZW5kKHt9LGEuZm4udG9vbHRpcC5Db25zdHJ1Y3Rvci5ERUZBVUxUUyx7cGxhY2VtZW50OiJyaWdodCIsdHJpZ2dlcjoiY2xpY2siLGNvbnRlbnQ6IiIsdGVtcGxhdGU6JzxkaXYgY2xhc3M9InBvcG92ZXIiIHJvbGU9InRvb2x0aXAiPjxkaXYgY2xhc3M9ImFycm93Ij48L2Rpdj48aDMgY2xhc3M9InBvcG92ZXItdGl0bGUiPjwvaDM+PGRpdiBjbGFzcz0icG9wb3Zlci1jb250ZW50Ij48L2Rpdj48L2Rpdj4nfSksYy5wcm90b3R5cGU9YS5leHRlbmQoe30sYS5mbi50b29sdGlwLkNvbnN0cnVjdG9yLnByb3RvdHlwZSksYy5wcm90b3R5cGUuY29uc3RydWN0b3I9YyxjLnByb3RvdHlwZS5nZXREZWZhdWx0cz1mdW5jdGlvbigpe3JldHVybiBjLkRFRkFVTFRTfSxjLnByb3RvdHlwZS5zZXRDb250ZW50PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50aXAoKSxiPXRoaXMuZ2V0VGl0bGUoKSxjPXRoaXMuZ2V0Q29udGVudCgpO2EuZmluZCgiLnBvcG92ZXItdGl0bGUiKVt0aGlzLm9wdGlvbnMuaHRtbD8iaHRtbCI6InRleHQiXShiKSxhLmZpbmQoIi5wb3BvdmVyLWNvbnRlbnQiKS5jaGlsZHJlbigpLmRldGFjaCgpLmVuZCgpW3RoaXMub3B0aW9ucy5odG1sPyJzdHJpbmciPT10eXBlb2YgYz8iaHRtbCI6ImFwcGVuZCI6InRleHQiXShjKSxhLnJlbW92ZUNsYXNzKCJmYWRlIHRvcCBib3R0b20gbGVmdCByaWdodCBpbiIpLGEuZmluZCgiLnBvcG92ZXItdGl0bGUiKS5odG1sKCl8fGEuZmluZCgiLnBvcG92ZXItdGl0bGUiKS5oaWRlKCl9LGMucHJvdG90eXBlLmhhc0NvbnRlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRUaXRsZSgpfHx0aGlzLmdldENvbnRlbnQoKX0sYy5wcm90b3R5cGUuZ2V0Q29udGVudD1mdW5jdGlvbigpe3ZhciBhPXRoaXMuJGVsZW1lbnQsYj10aGlzLm9wdGlvbnM7cmV0dXJuIGEuYXR0cigiZGF0YS1jb250ZW50Iil8fCgiZnVuY3Rpb24iPT10eXBlb2YgYi5jb250ZW50P2IuY29udGVudC5jYWxsKGFbMF0pOmIuY29udGVudCl9LGMucHJvdG90eXBlLmFycm93PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGFycm93PXRoaXMuJGFycm93fHx0aGlzLnRpcCgpLmZpbmQoIi5hcnJvdyIpfTt2YXIgZD1hLmZuLnBvcG92ZXI7YS5mbi5wb3BvdmVyPWIsYS5mbi5wb3BvdmVyLkNvbnN0cnVjdG9yPWMsYS5mbi5wb3BvdmVyLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gYS5mbi5wb3BvdmVyPWQsdGhpc319KGpRdWVyeSksK2Z1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGMsZCl7dGhpcy4kYm9keT1hKGRvY3VtZW50LmJvZHkpLHRoaXMuJHNjcm9sbEVsZW1lbnQ9YShhKGMpLmlzKGRvY3VtZW50LmJvZHkpP3dpbmRvdzpjKSx0aGlzLm9wdGlvbnM9YS5leHRlbmQoe30sYi5ERUZBVUxUUyxkKSx0aGlzLnNlbGVjdG9yPSh0aGlzLm9wdGlvbnMudGFyZ2V0fHwiIikrIiAubmF2IGxpID4gYSIsdGhpcy5vZmZzZXRzPVtdLHRoaXMudGFyZ2V0cz1bXSx0aGlzLmFjdGl2ZVRhcmdldD1udWxsLHRoaXMuc2Nyb2xsSGVpZ2h0PTAsdGhpcy4kc2Nyb2xsRWxlbWVudC5vbigic2Nyb2xsLmJzLnNjcm9sbHNweSIsYS5wcm94eSh0aGlzLnByb2Nlc3MsdGhpcykpLHRoaXMucmVmcmVzaCgpLHRoaXMucHJvY2VzcygpfWZ1bmN0aW9uIGMoYyl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBkPWEodGhpcyksZT1kLmRhdGEoImJzLnNjcm9sbHNweSIpLGY9Im9iamVjdCI9PXR5cGVvZiBjJiZjO2V8fGQuZGF0YSgiYnMuc2Nyb2xsc3B5IixlPW5ldyBiKHRoaXMsZikpLCJzdHJpbmciPT10eXBlb2YgYyYmZVtjXSgpfSl9Yi5WRVJTSU9OPSIzLjMuNyIsYi5ERUZBVUxUUz17b2Zmc2V0OjEwfSxiLnByb3RvdHlwZS5nZXRTY3JvbGxIZWlnaHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kc2Nyb2xsRWxlbWVudFswXS5zY3JvbGxIZWlnaHR8fE1hdGgubWF4KHRoaXMuJGJvZHlbMF0uc2Nyb2xsSGVpZ2h0LGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQpfSxiLnByb3RvdHlwZS5yZWZyZXNoPWZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxjPSJvZmZzZXQiLGQ9MDt0aGlzLm9mZnNldHM9W10sdGhpcy50YXJnZXRzPVtdLHRoaXMuc2Nyb2xsSGVpZ2h0PXRoaXMuZ2V0U2Nyb2xsSGVpZ2h0KCksYS5pc1dpbmRvdyh0aGlzLiRzY3JvbGxFbGVtZW50WzBdKXx8KGM9InBvc2l0aW9uIixkPXRoaXMuJHNjcm9sbEVsZW1lbnQuc2Nyb2xsVG9wKCkpLHRoaXMuJGJvZHkuZmluZCh0aGlzLnNlbGVjdG9yKS5tYXAoZnVuY3Rpb24oKXt2YXIgYj1hKHRoaXMpLGU9Yi5kYXRhKCJ0YXJnZXQiKXx8Yi5hdHRyKCJocmVmIiksZj0vXiMuLy50ZXN0KGUpJiZhKGUpO3JldHVybiBmJiZmLmxlbmd0aCYmZi5pcygiOnZpc2libGUiKSYmW1tmW2NdKCkudG9wK2QsZV1dfHxudWxsfSkuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhWzBdLWJbMF19KS5lYWNoKGZ1bmN0aW9uKCl7Yi5vZmZzZXRzLnB1c2godGhpc1swXSksYi50YXJnZXRzLnB1c2godGhpc1sxXSl9KX0sYi5wcm90b3R5cGUucHJvY2Vzcz1mdW5jdGlvbigpe3ZhciBhLGI9dGhpcy4kc2Nyb2xsRWxlbWVudC5zY3JvbGxUb3AoKSt0aGlzLm9wdGlvbnMub2Zmc2V0LGM9dGhpcy5nZXRTY3JvbGxIZWlnaHQoKSxkPXRoaXMub3B0aW9ucy5vZmZzZXQrYy10aGlzLiRzY3JvbGxFbGVtZW50LmhlaWdodCgpLGU9dGhpcy5vZmZzZXRzLGY9dGhpcy50YXJnZXRzLGc9dGhpcy5hY3RpdmVUYXJnZXQ7aWYodGhpcy5zY3JvbGxIZWlnaHQhPWMmJnRoaXMucmVmcmVzaCgpLGI+PWQpcmV0dXJuIGchPShhPWZbZi5sZW5ndGgtMV0pJiZ0aGlzLmFjdGl2YXRlKGEpO2lmKGcmJmI8ZVswXSlyZXR1cm4gdGhpcy5hY3RpdmVUYXJnZXQ9bnVsbCx0aGlzLmNsZWFyKCk7Zm9yKGE9ZS5sZW5ndGg7YS0tOylnIT1mW2FdJiZiPj1lW2FdJiYodm9pZCAwPT09ZVthKzFdfHxiPGVbYSsxXSkmJnRoaXMuYWN0aXZhdGUoZlthXSl9LGIucHJvdG90eXBlLmFjdGl2YXRlPWZ1bmN0aW9uKGIpewp0aGlzLmFjdGl2ZVRhcmdldD1iLHRoaXMuY2xlYXIoKTt2YXIgYz10aGlzLnNlbGVjdG9yKydbZGF0YS10YXJnZXQ9IicrYisnIl0sJyt0aGlzLnNlbGVjdG9yKydbaHJlZj0iJytiKyciXScsZD1hKGMpLnBhcmVudHMoImxpIikuYWRkQ2xhc3MoImFjdGl2ZSIpO2QucGFyZW50KCIuZHJvcGRvd24tbWVudSIpLmxlbmd0aCYmKGQ9ZC5jbG9zZXN0KCJsaS5kcm9wZG93biIpLmFkZENsYXNzKCJhY3RpdmUiKSksZC50cmlnZ2VyKCJhY3RpdmF0ZS5icy5zY3JvbGxzcHkiKX0sYi5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXthKHRoaXMuc2VsZWN0b3IpLnBhcmVudHNVbnRpbCh0aGlzLm9wdGlvbnMudGFyZ2V0LCIuYWN0aXZlIikucmVtb3ZlQ2xhc3MoImFjdGl2ZSIpfTt2YXIgZD1hLmZuLnNjcm9sbHNweTthLmZuLnNjcm9sbHNweT1jLGEuZm4uc2Nyb2xsc3B5LkNvbnN0cnVjdG9yPWIsYS5mbi5zY3JvbGxzcHkubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBhLmZuLnNjcm9sbHNweT1kLHRoaXN9LGEod2luZG93KS5vbigibG9hZC5icy5zY3JvbGxzcHkuZGF0YS1hcGkiLGZ1bmN0aW9uKCl7YSgnW2RhdGEtc3B5PSJzY3JvbGwiXScpLmVhY2goZnVuY3Rpb24oKXt2YXIgYj1hKHRoaXMpO2MuY2FsbChiLGIuZGF0YSgpKX0pfSl9KGpRdWVyeSksK2Z1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZD1hKHRoaXMpLGU9ZC5kYXRhKCJicy50YWIiKTtlfHxkLmRhdGEoImJzLnRhYiIsZT1uZXcgYyh0aGlzKSksInN0cmluZyI9PXR5cGVvZiBiJiZlW2JdKCl9KX12YXIgYz1mdW5jdGlvbihiKXt0aGlzLmVsZW1lbnQ9YShiKX07Yy5WRVJTSU9OPSIzLjMuNyIsYy5UUkFOU0lUSU9OX0RVUkFUSU9OPTE1MCxjLnByb3RvdHlwZS5zaG93PWZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5lbGVtZW50LGM9Yi5jbG9zZXN0KCJ1bDpub3QoLmRyb3Bkb3duLW1lbnUpIiksZD1iLmRhdGEoInRhcmdldCIpO2lmKGR8fChkPWIuYXR0cigiaHJlZiIpLGQ9ZCYmZC5yZXBsYWNlKC8uKig/PSNbXlxzXSokKS8sIiIpKSwhYi5wYXJlbnQoImxpIikuaGFzQ2xhc3MoImFjdGl2ZSIpKXt2YXIgZT1jLmZpbmQoIi5hY3RpdmU6bGFzdCBhIiksZj1hLkV2ZW50KCJoaWRlLmJzLnRhYiIse3JlbGF0ZWRUYXJnZXQ6YlswXX0pLGc9YS5FdmVudCgic2hvdy5icy50YWIiLHtyZWxhdGVkVGFyZ2V0OmVbMF19KTtpZihlLnRyaWdnZXIoZiksYi50cmlnZ2VyKGcpLCFnLmlzRGVmYXVsdFByZXZlbnRlZCgpJiYhZi5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7dmFyIGg9YShkKTt0aGlzLmFjdGl2YXRlKGIuY2xvc2VzdCgibGkiKSxjKSx0aGlzLmFjdGl2YXRlKGgsaC5wYXJlbnQoKSxmdW5jdGlvbigpe2UudHJpZ2dlcih7dHlwZToiaGlkZGVuLmJzLnRhYiIscmVsYXRlZFRhcmdldDpiWzBdfSksYi50cmlnZ2VyKHt0eXBlOiJzaG93bi5icy50YWIiLHJlbGF0ZWRUYXJnZXQ6ZVswXX0pfSl9fX0sYy5wcm90b3R5cGUuYWN0aXZhdGU9ZnVuY3Rpb24oYixkLGUpe2Z1bmN0aW9uIGYoKXtnLnJlbW92ZUNsYXNzKCJhY3RpdmUiKS5maW5kKCI+IC5kcm9wZG93bi1tZW51ID4gLmFjdGl2ZSIpLnJlbW92ZUNsYXNzKCJhY3RpdmUiKS5lbmQoKS5maW5kKCdbZGF0YS10b2dnbGU9InRhYiJdJykuYXR0cigiYXJpYS1leHBhbmRlZCIsITEpLGIuYWRkQ2xhc3MoImFjdGl2ZSIpLmZpbmQoJ1tkYXRhLXRvZ2dsZT0idGFiIl0nKS5hdHRyKCJhcmlhLWV4cGFuZGVkIiwhMCksaD8oYlswXS5vZmZzZXRXaWR0aCxiLmFkZENsYXNzKCJpbiIpKTpiLnJlbW92ZUNsYXNzKCJmYWRlIiksYi5wYXJlbnQoIi5kcm9wZG93bi1tZW51IikubGVuZ3RoJiZiLmNsb3Nlc3QoImxpLmRyb3Bkb3duIikuYWRkQ2xhc3MoImFjdGl2ZSIpLmVuZCgpLmZpbmQoJ1tkYXRhLXRvZ2dsZT0idGFiIl0nKS5hdHRyKCJhcmlhLWV4cGFuZGVkIiwhMCksZSYmZSgpfXZhciBnPWQuZmluZCgiPiAuYWN0aXZlIiksaD1lJiZhLnN1cHBvcnQudHJhbnNpdGlvbiYmKGcubGVuZ3RoJiZnLmhhc0NsYXNzKCJmYWRlIil8fCEhZC5maW5kKCI+IC5mYWRlIikubGVuZ3RoKTtnLmxlbmd0aCYmaD9nLm9uZSgiYnNUcmFuc2l0aW9uRW5kIixmKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChjLlRSQU5TSVRJT05fRFVSQVRJT04pOmYoKSxnLnJlbW92ZUNsYXNzKCJpbiIpfTt2YXIgZD1hLmZuLnRhYjthLmZuLnRhYj1iLGEuZm4udGFiLkNvbnN0cnVjdG9yPWMsYS5mbi50YWIubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBhLmZuLnRhYj1kLHRoaXN9O3ZhciBlPWZ1bmN0aW9uKGMpe2MucHJldmVudERlZmF1bHQoKSxiLmNhbGwoYSh0aGlzKSwic2hvdyIpfTthKGRvY3VtZW50KS5vbigiY2xpY2suYnMudGFiLmRhdGEtYXBpIiwnW2RhdGEtdG9nZ2xlPSJ0YWIiXScsZSkub24oImNsaWNrLmJzLnRhYi5kYXRhLWFwaSIsJ1tkYXRhLXRvZ2dsZT0icGlsbCJdJyxlKX0oalF1ZXJ5KSwrZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBkPWEodGhpcyksZT1kLmRhdGEoImJzLmFmZml4IiksZj0ib2JqZWN0Ij09dHlwZW9mIGImJmI7ZXx8ZC5kYXRhKCJicy5hZmZpeCIsZT1uZXcgYyh0aGlzLGYpKSwic3RyaW5nIj09dHlwZW9mIGImJmVbYl0oKX0pfXZhciBjPWZ1bmN0aW9uKGIsZCl7dGhpcy5vcHRpb25zPWEuZXh0ZW5kKHt9LGMuREVGQVVMVFMsZCksdGhpcy4kdGFyZ2V0PWEodGhpcy5vcHRpb25zLnRhcmdldCkub24oInNjcm9sbC5icy5hZmZpeC5kYXRhLWFwaSIsYS5wcm94eSh0aGlzLmNoZWNrUG9zaXRpb24sdGhpcykpLm9uKCJjbGljay5icy5hZmZpeC5kYXRhLWFwaSIsYS5wcm94eSh0aGlzLmNoZWNrUG9zaXRpb25XaXRoRXZlbnRMb29wLHRoaXMpKSx0aGlzLiRlbGVtZW50PWEoYiksdGhpcy5hZmZpeGVkPW51bGwsdGhpcy51bnBpbj1udWxsLHRoaXMucGlubmVkT2Zmc2V0PW51bGwsdGhpcy5jaGVja1Bvc2l0aW9uKCl9O2MuVkVSU0lPTj0iMy4zLjciLGMuUkVTRVQ9ImFmZml4IGFmZml4LXRvcCBhZmZpeC1ib3R0b20iLGMuREVGQVVMVFM9e29mZnNldDowLHRhcmdldDp3aW5kb3d9LGMucHJvdG90eXBlLmdldFN0YXRlPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXRoaXMuJHRhcmdldC5zY3JvbGxUb3AoKSxmPXRoaXMuJGVsZW1lbnQub2Zmc2V0KCksZz10aGlzLiR0YXJnZXQuaGVpZ2h0KCk7aWYobnVsbCE9YyYmInRvcCI9PXRoaXMuYWZmaXhlZClyZXR1cm4gZTxjJiYidG9wIjtpZigiYm90dG9tIj09dGhpcy5hZmZpeGVkKXJldHVybiBudWxsIT1jPyEoZSt0aGlzLnVucGluPD1mLnRvcCkmJiJib3R0b20iOiEoZStnPD1hLWQpJiYiYm90dG9tIjt2YXIgaD1udWxsPT10aGlzLmFmZml4ZWQsaT1oP2U6Zi50b3Asaj1oP2c6YjtyZXR1cm4gbnVsbCE9YyYmZTw9Yz8idG9wIjpudWxsIT1kJiZpK2o+PWEtZCYmImJvdHRvbSJ9LGMucHJvdG90eXBlLmdldFBpbm5lZE9mZnNldD1mdW5jdGlvbigpe2lmKHRoaXMucGlubmVkT2Zmc2V0KXJldHVybiB0aGlzLnBpbm5lZE9mZnNldDt0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKGMuUkVTRVQpLmFkZENsYXNzKCJhZmZpeCIpO3ZhciBhPXRoaXMuJHRhcmdldC5zY3JvbGxUb3AoKSxiPXRoaXMuJGVsZW1lbnQub2Zmc2V0KCk7cmV0dXJuIHRoaXMucGlubmVkT2Zmc2V0PWIudG9wLWF9LGMucHJvdG90eXBlLmNoZWNrUG9zaXRpb25XaXRoRXZlbnRMb29wPWZ1bmN0aW9uKCl7c2V0VGltZW91dChhLnByb3h5KHRoaXMuY2hlY2tQb3NpdGlvbix0aGlzKSwxKX0sYy5wcm90b3R5cGUuY2hlY2tQb3NpdGlvbj1mdW5jdGlvbigpe2lmKHRoaXMuJGVsZW1lbnQuaXMoIjp2aXNpYmxlIikpe3ZhciBiPXRoaXMuJGVsZW1lbnQuaGVpZ2h0KCksZD10aGlzLm9wdGlvbnMub2Zmc2V0LGU9ZC50b3AsZj1kLmJvdHRvbSxnPU1hdGgubWF4KGEoZG9jdW1lbnQpLmhlaWdodCgpLGEoZG9jdW1lbnQuYm9keSkuaGVpZ2h0KCkpOyJvYmplY3QiIT10eXBlb2YgZCYmKGY9ZT1kKSwiZnVuY3Rpb24iPT10eXBlb2YgZSYmKGU9ZC50b3AodGhpcy4kZWxlbWVudCkpLCJmdW5jdGlvbiI9PXR5cGVvZiBmJiYoZj1kLmJvdHRvbSh0aGlzLiRlbGVtZW50KSk7dmFyIGg9dGhpcy5nZXRTdGF0ZShnLGIsZSxmKTtpZih0aGlzLmFmZml4ZWQhPWgpe251bGwhPXRoaXMudW5waW4mJnRoaXMuJGVsZW1lbnQuY3NzKCJ0b3AiLCIiKTt2YXIgaT0iYWZmaXgiKyhoPyItIitoOiIiKSxqPWEuRXZlbnQoaSsiLmJzLmFmZml4Iik7aWYodGhpcy4kZWxlbWVudC50cmlnZ2VyKGopLGouaXNEZWZhdWx0UHJldmVudGVkKCkpcmV0dXJuO3RoaXMuYWZmaXhlZD1oLHRoaXMudW5waW49ImJvdHRvbSI9PWg/dGhpcy5nZXRQaW5uZWRPZmZzZXQoKTpudWxsLHRoaXMuJGVsZW1lbnQucmVtb3ZlQ2xhc3MoYy5SRVNFVCkuYWRkQ2xhc3MoaSkudHJpZ2dlcihpLnJlcGxhY2UoImFmZml4IiwiYWZmaXhlZCIpKyIuYnMuYWZmaXgiKX0iYm90dG9tIj09aCYmdGhpcy4kZWxlbWVudC5vZmZzZXQoe3RvcDpnLWItZn0pfX07dmFyIGQ9YS5mbi5hZmZpeDthLmZuLmFmZml4PWIsYS5mbi5hZmZpeC5Db25zdHJ1Y3Rvcj1jLGEuZm4uYWZmaXgubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBhLmZuLmFmZml4PWQsdGhpc30sYSh3aW5kb3cpLm9uKCJsb2FkIixmdW5jdGlvbigpe2EoJ1tkYXRhLXNweT0iYWZmaXgiXScpLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1hKHRoaXMpLGQ9Yy5kYXRhKCk7ZC5vZmZzZXQ9ZC5vZmZzZXR8fHt9LG51bGwhPWQub2Zmc2V0Qm90dG9tJiYoZC5vZmZzZXQuYm90dG9tPWQub2Zmc2V0Qm90dG9tKSxudWxsIT1kLm9mZnNldFRvcCYmKGQub2Zmc2V0LnRvcD1kLm9mZnNldFRvcCksYi5jYWxsKGMsZCl9KX0pfShqUXVlcnkpOwphbmd1bGFyLm1vZHVsZSgndmFsaWRhdGlvbicsIFsndmFsaWRhdGlvbi5wcm92aWRlcicsICd2YWxpZGF0aW9uLmRpcmVjdGl2ZSddKTsKYW5ndWxhci5tb2R1bGUoJ3ZhbGlkYXRpb24ucHJvdmlkZXInLCBbXSk7CmFuZ3VsYXIubW9kdWxlKCd2YWxpZGF0aW9uLmRpcmVjdGl2ZScsIFsndmFsaWRhdGlvbi5wcm92aWRlciddKTsKCihmdW5jdGlvbigpIHsKICBhbmd1bGFyCiAgICAubW9kdWxlKCd2YWxpZGF0aW9uLnByb3ZpZGVyJykKICAgIC5wcm92aWRlcignJHZhbGlkYXRpb24nLCBQcm92aWRlcik7CgogIGZ1bmN0aW9uIFByb3ZpZGVyKCkgewogICAgdmFyICRpbmplY3RvcjsKICAgIHZhciAkc2NvcGU7CiAgICB2YXIgJGh0dHA7CiAgICB2YXIgJHE7CiAgICB2YXIgJHRpbWVvdXQ7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIC8qKgogICAgICogU2V0dXAgdGhlIHByb3ZpZGVyCiAgICAgKiBAcGFyYW0gaW5qZWN0b3IKICAgICAqLwogICAgdmFyIHNldHVwID0gZnVuY3Rpb24oaW5qZWN0b3IpIHsKICAgICAgJGluamVjdG9yID0gaW5qZWN0b3I7CiAgICAgICRzY29wZSA9ICRpbmplY3Rvci5nZXQoJyRyb290U2NvcGUnKTsKICAgICAgJGh0dHAgPSAkaW5qZWN0b3IuZ2V0KCckaHR0cCcpOwogICAgICAkcSA9ICRpbmplY3Rvci5nZXQoJyRxJyk7CiAgICAgICR0aW1lb3V0ID0gJGluamVjdG9yLmdldCgnJHRpbWVvdXQnKTsKICAgIH07CgogICAgLyoqCiAgICAgKiBEZWZpbmUgdmFsaWRhdGlvbiB0eXBlIFJlZ0V4cAogICAgICogQHR5cGUge3t9fQogICAgICovCiAgICB2YXIgZXhwcmVzc2lvbiA9IHt9OwoKICAgIC8qKgogICAgICogZGVmYXVsdCB2YWxpZCBtZXRob2QKICAgICAqIEB0eXBlIHt7fX0KICAgICAqLwogICAgdmFyIHZhbGlkTWV0aG9kID0gbnVsbDsKCiAgICAvKioKICAgICAqIGRlZmF1bHQgZXJyb3IsIHN1Y2Nlc3MgbWVzc2FnZQogICAgICogQHR5cGUge3t9fQogICAgICovCiAgICB2YXIgZGVmYXVsdE1zZyA9IHt9OwoKICAgIC8qKgogICAgICogQWxsb3cgdXNlciB0byBzZXQgYSBjdXN0b20gRXhwcmVzc2lvbiwgZG8gcmVtZW1iZXIgc2V0IHRoZSBkZWZhdWx0IG1lc3NhZ2UgdXNpbmcgc2V0RGVmYXVsdE1zZwogICAgICogQHBhcmFtIG9iagogICAgICogQHJldHVybnMgeyp9CiAgICAgKi8KICAgIHRoaXMuc2V0RXhwcmVzc2lvbiA9IGZ1bmN0aW9uKG9iaikgewogICAgICBhbmd1bGFyLmV4dGVuZChleHByZXNzaW9uLCBvYmopOwogICAgICByZXR1cm4gX3RoaXM7CiAgICB9OwoKICAgIC8qKgogICAgICogR2V0IHRoZSBFeHByZXNzaW9uCiAgICAgKiBAcGFyYW0gZXhwcnMKICAgICAqIEByZXR1cm5zIHsqfQogICAgICovCiAgICB0aGlzLmdldEV4cHJlc3Npb24gPSBmdW5jdGlvbihleHBycykgewogICAgICByZXR1cm4gZXhwcmVzc2lvbltleHByc107CiAgICB9OwoKICAgIC8qKgogICAgICogQWxsb3cgdXNlciB0byBzZXQgZGVmYXVsdCBtZXNzYWdlCiAgICAgKiBAcGFyYW0gb2JqCiAgICAgKiBAcmV0dXJucyB7Kn0KICAgICAqLwogICAgdGhpcy5zZXREZWZhdWx0TXNnID0gZnVuY3Rpb24ob2JqKSB7CiAgICAgIGFuZ3VsYXIuZXh0ZW5kKGRlZmF1bHRNc2csIG9iaik7CiAgICAgIHJldHVybiBfdGhpczsKICAgIH07CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIERlZmF1bHQgTWVzc2FnZQogICAgICogQHBhcmFtIG1zZwogICAgICogQHJldHVybnMgeyp9CiAgICAgKi8KICAgIHRoaXMuZ2V0RGVmYXVsdE1zZyA9IGZ1bmN0aW9uKG1zZykgewogICAgICByZXR1cm4gZGVmYXVsdE1zZ1ttc2ddOwogICAgfTsKCiAgICAvKioKICAgICAqIGFsbG93IHVzZXIgdG8gc2V0IHRoZSBnbG9iYWwgdmFsaWQgbWV0aG9kCiAgICAgKiBAcGFyYW0gdgogICAgICogQHJldHVybnMgeyp9CiAgICAgKi8KICAgIHRoaXMuc2V0VmFsaWRNZXRob2QgPSBmdW5jdGlvbih2KSB7CiAgICAgIHZhbGlkTWV0aG9kID0gdjsKICAgIH07CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIHZhbGlkIG1ldGhvZCAgICAgCiAgICAgKiBAcmV0dXJucyB7Kn0KICAgICAqLwogICAgdGhpcy5nZXRWYWxpZE1ldGhvZCA9IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gdmFsaWRNZXRob2Q7CiAgICB9OwoKICAgIC8qKgogICAgICogT3ZlcnJpZGUgdGhlIGVycm9ySFRNTCBmdW5jdGlvbgogICAgICogQHBhcmFtIGZ1bmMKICAgICAqIEByZXR1cm5zIHsqfQogICAgICovCiAgICB0aGlzLnNldEVycm9ySFRNTCA9IGZ1bmN0aW9uKGZ1bmMpIHsKICAgICAgaWYgKGZ1bmMuY29uc3RydWN0b3IgIT09IEZ1bmN0aW9uKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIF90aGlzLmdldEVycm9ySFRNTCA9IGZ1bmM7CiAgICAgIHJldHVybiBfdGhpczsKICAgIH07CgogICAgLyoqCiAgICAgKiBJbnZhbGlkIG1lc3NhZ2UgSFRNTCwgaGVyZSdzIHRoZSBkZWZhdWx0CiAgICAgKiBAcGFyYW0gbWVzc2FnZQogICAgICogQHJldHVybnMge3N0cmluZ30KICAgICAqLwogICAgdGhpcy5nZXRFcnJvckhUTUwgPSBmdW5jdGlvbihtZXNzYWdlKSB7CiAgICAgIHJldHVybiAnPHAgY2xhc3M9InZhbGlkYXRpb24taW52YWxpZCI+JyArIG1lc3NhZ2UgKyAnPC9wPic7CiAgICB9OwoKICAgIC8qKgogICAgICogT3ZlcnJpZGUgdGhlIHN1Y2Nlc3NIVE1MIGZ1bmN0aW9uCiAgICAgKiBAcGFyYW0gZnVuYwogICAgICogQHJldHVybnMgeyp9CiAgICAgKi8KICAgIHRoaXMuc2V0U3VjY2Vzc0hUTUwgPSBmdW5jdGlvbihmdW5jKSB7CiAgICAgIGlmIChmdW5jLmNvbnN0cnVjdG9yICE9PSBGdW5jdGlvbikgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBfdGhpcy5nZXRTdWNjZXNzSFRNTCA9IGZ1bmM7CiAgICAgIHJldHVybiBfdGhpczsKICAgIH07CgogICAgLyoqCiAgICAgKiBWYWxpZCBtZXNzYWdlIEhUTUwsIGhlcmUncyB0aGUgZGVmYXVsdAogICAgICogQHBhcmFtIG1lc3NhZ2UKICAgICAqIEByZXR1cm5zIHtzdHJpbmd9CiAgICAgKi8KICAgIHRoaXMuZ2V0U3VjY2Vzc0hUTUwgPSBmdW5jdGlvbihtZXNzYWdlKSB7CiAgICAgIHJldHVybiAnPHAgY2xhc3M9InZhbGlkYXRpb24tdmFsaWQiPicgKyBtZXNzYWdlICsgJzwvcD4nOwogICAgfTsKCiAgICAvKioKICAgICAqIFdoZXRoZXIgc2hvdyB0aGUgdmFsaWRhdGlvbiBzdWNjZXNzIG1lc3NhZ2UKICAgICAqIFlvdSBjYW4gZWFzaWx5IGNoYW5nZSB0aGlzIHRvIGZhbHNlIGluIHlvdXIgY29uZmlnCiAgICAgKiBleGFtcGxlOiAkdmFsaWRhdGlvblByb3ZpZGVyLnNob3dTdWNjZXNzTWVzc2FnZSA9IGZhbHNlOwogICAgICogQHR5cGUge2Jvb2xlYW59CiAgICAgKi8KICAgIHRoaXMuc2hvd1N1Y2Nlc3NNZXNzYWdlID0gdHJ1ZTsKCiAgICAvKioKICAgICAqIFdoZXRoZXIgc2hvdyB0aGUgdmFsaWRhdGlvbiBlcnJvciBtZXNzYWdlCiAgICAgKiBZb3UgY2FuIGVhc2lseSBjaGFuZ2UgdGhpcyB0byBmYWxzZSBpbiB5b3VyIGNvbmZpZwogICAgICogZXhhbXBsZTogJHZhbGlkYXRpb25Qcm92aWRlci5zaG93RXJyb3JNZXNzYWdlID0gZmFsc2U7CiAgICAgKiBAdHlwZSB7Ym9vbGVhbn0KICAgICAqLwogICAgdGhpcy5zaG93RXJyb3JNZXNzYWdlID0gdHJ1ZTsKCiAgICAvKioKICAgICAqIENoZWNrIGZvcm0gdmFsaWQsIHJldHVybiB0cnVlCiAgICAgKiBjaGVja1ZhbGlkKEZvcm0pOiBDaGVjayB0aGUgc3BlY2lmaWMgZm9ybShGb3JtKSB2YWxpZCBmcm9tIGFuZ3VsYXIgYCR2YWxpZGAKICAgICAqIEBwYXJhbSBmb3JtCiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0KICAgICAqLwogICAgdGhpcy5jaGVja1ZhbGlkID0gZnVuY3Rpb24oZm9ybSkgewogICAgICByZXR1cm4gISEoZm9ybSAmJiBmb3JtLiR2YWxpZCk7CiAgICB9OwoKICAgIC8qKgogICAgICogVmFsaWRhdGUgdGhlIGZvcm0gd2hlbiBjbGljayBzdWJtaXQsIHdoZW4gYHZhbGlkTWV0aG9kID0gc3VibWl0YAogICAgICogQHBhcmFtIGZvcm0KICAgICAqIEByZXR1cm5zIHtwcm9taXNlfCp9CiAgICAgKi8KICAgIHRoaXMudmFsaWRhdGUgPSBmdW5jdGlvbihmb3JtKSB7CiAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7CiAgICAgIHZhciBpZHggPSAwOwoKICAgICAgaWYgKGZvcm0gPT09IHVuZGVmaW5lZCkgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ1RoaXMgaXMgbm90IGEgcmVndWxhciBGb3JtIG5hbWUgc2NvcGUnKTsKICAgICAgICBkZWZlcnJlZC5yZWplY3QoJ1RoaXMgaXMgbm90IGEgcmVndWxhciBGb3JtIG5hbWUgc2NvcGUnKTsKICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTsKICAgICAgfQoKICAgICAgaWYgKGZvcm0udmFsaWRhdGlvbklkKSB7IC8vIHNpbmdsZQogICAgICAgICRzY29wZS4kYnJvYWRjYXN0KGZvcm0uJG5hbWUgKyAnc3VibWl0LScgKyBmb3JtLnZhbGlkYXRpb25JZCwgaWR4KyspOwogICAgICB9IGVsc2UgaWYgKGZvcm0uY29uc3RydWN0b3IgPT09IEFycmF5KSB7IC8vIG11bHRpcGxlCiAgICAgICAgZm9yICh2YXIgayBpbiBmb3JtKSB7CiAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdChmb3JtW2tdLiRuYW1lICsgJ3N1Ym1pdC0nICsgZm9ybVtrXS52YWxpZGF0aW9uSWQsIGlkeCsrKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZm9yICh2YXIgaSBpbiBmb3JtKSB7IC8vIHdob2xlIHNjb3BlCiAgICAgICAgICBpZiAoaVswXSAhPT0gJyQnICYmIGZvcm1baV0uaGFzT3duUHJvcGVydHkoJyRkaXJ0eScpKSB7CiAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KGkgKyAnc3VibWl0LScgKyBmb3JtW2ldLnZhbGlkYXRpb25JZCwgaWR4KyspOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgZGVmZXJyZWQucHJvbWlzZS5zdWNjZXNzID0gZnVuY3Rpb24oZm4pIHsKICAgICAgICBkZWZlcnJlZC5wcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICAgIGZuKHZhbHVlKTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTsKICAgICAgfTsKCiAgICAgIGRlZmVycmVkLnByb21pc2UuZXJyb3IgPSBmdW5jdGlvbihmbikgewogICAgICAgIGRlZmVycmVkLnByb21pc2UudGhlbihudWxsLCBmdW5jdGlvbih2YWx1ZSkgewogICAgICAgICAgZm4odmFsdWUpOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlOwogICAgICB9OwoKICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgaWYgKF90aGlzLmNoZWNrVmFsaWQoZm9ybSkpIHsKICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoJ3N1Y2Nlc3MnKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZGVmZXJyZWQucmVqZWN0KCdlcnJvcicpOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTsKICAgIH07CgogICAgLyoqCiAgICAgKiBEbyB0aGlzIGZ1bmN0aW9uIGlmIHZhbGlkYXRpb24gdmFsaWQKICAgICAqIEBwYXJhbSBlbGVtZW50CiAgICAgKi8KICAgIHRoaXMudmFsaWRDYWxsYmFjayA9IG51bGw7CgogICAgLyoqCiAgICAgKiBEbyB0aGlzIGZ1bmN0aW9uIGlmIHZhbGlkYXRpb24gaW52YWxpZAogICAgICogQHBhcmFtIGVsZW1lbnQKICAgICAqLwogICAgdGhpcy5pbnZhbGlkQ2FsbGJhY2sgPSBudWxsOwoKICAgIC8qKgogICAgICogRG8gdGhpcyBmdW5jdGlvbiB3aGVuIHJlc2V0IGlzIHBlcmZvcm1lZAogICAgICogQHBhcmFtIGVsZW1lbnQKICAgICAqLwogICAgdGhpcy5yZXNldENhbGxiYWNrID0gbnVsbDsKCiAgICAvKioKICAgICAqIHJlc2V0IHRoZSBzcGVjaWZpYyBmb3JtCiAgICAgKiBAcGFyYW0gZm9ybQogICAgICovCiAgICB0aGlzLnJlc2V0ID0gZnVuY3Rpb24oZm9ybSkgewogICAgICBpZiAoZm9ybSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgY29uc29sZS5lcnJvcignVGhpcyBpcyBub3QgYSByZWd1bGFyIEZvcm0gbmFtZSBzY29wZScpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKGZvcm0udmFsaWRhdGlvbklkKSB7CiAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoZm9ybS4kbmFtZSArICdyZXNldC0nICsgZm9ybS52YWxpZGF0aW9uSWQpOwogICAgICB9IGVsc2UgaWYgKGZvcm0uY29uc3RydWN0b3IgPT09IEFycmF5KSB7CiAgICAgICAgZm9yICh2YXIgayBpbiBmb3JtKSB7CiAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdChmb3JtW2tdLiRuYW1lICsgJ3Jlc2V0LScgKyBmb3JtW2tdLnZhbGlkYXRpb25JZCk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGZvciAodmFyIGkgaW4gZm9ybSkgewogICAgICAgICAgaWYgKGlbMF0gIT09ICckJyAmJiBmb3JtW2ldLmhhc093blByb3BlcnR5KCckZGlydHknKSkgewogICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdChpICsgJ3Jlc2V0LScgKyBmb3JtW2ldLnZhbGlkYXRpb25JZCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9OwoKICAgIC8qKgogICAgICogQWRkIE1lc3NhZ2UgRWxlbWVudCBpbiBjb25maWcgcGhhc2UKICAgICAqIFdoZW4geW91IG5lZWQgY3VzdG9tIHlvdXIgbWVzc2FnZUVsZW1lbnQgCiAgICAgKiBOT0RFOiB0aGlzIGZ1bnRpb24gJiBhbmQgYG1lc3NhZ2UtaWRgIGF0dHJpYnV0ZSwgaGF2ZSBzaW1pbGFyIHB1cnBvc2UuCiAgICAgKiBUaGlzIGZ1bmN0aW9uIHdpbGwgaGVscCB5b3UgYWRkIHlvdXIgYG1lc3NhZ2VFbGVtZW50YCBhdXRvbWF0aWNhbGx5IGluc3RlYWQgb2YgcHJlLWRlZmluZWQuCiAgICAgKiBAcGFyYW0gZWxlbWVudAogICAgICovCiAgICB0aGlzLmFkZE1zZ0VsZW1lbnQgPSBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgIHJldHVybiBlbGVtZW50LmFmdGVyKCc8c3Bhbj48L3NwYW4+Jyk7CiAgICB9OwoKICAgIC8qKgogICAgICogQWRkIE1lc3NhZ2UgRWxlbWVudCBpbiBjb25maWcgcGhhc2UKICAgICAqIFdoZW4geW91IG5lZWQgY3VzdG9tIHlvdXIgbWVzc2FnZUVsZW1lbnQgCiAgICAgKiBOT0RFOiB0aGlzIGZ1bnRpb24gJiBhbmQgYG1lc3NhZ2UtaWRgIGF0dHJpYnV0ZSwgaGF2ZSBzaW1pbGFyIHB1cnBvc2UuCiAgICAgKiBUaGlzIGZ1bmN0aW9uIHdpbGwgaGVscCB5b3UgYWRkIHlvdXIgYG1lc3NhZ2VFbGVtZW50YCBhdXRvbWF0aWNhbGx5IGluc3RlYWQgb2YgcHJlLWRlZmluZWQuCiAgICAgKiBAcGFyYW0gZWxlbWVudAogICAgICovCiAgICB0aGlzLmdldE1zZ0VsZW1lbnQgPSBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgIHJldHVybiBlbGVtZW50Lm5leHQoKTsKICAgIH07CgogICAgLyoqCiAgICAgKiAkZ2V0CiAgICAgKiBAcmV0dXJucyB7e3NldEVycm9ySFRNTDogKiwgZ2V0RXJyb3JIVE1MOiBGdW5jdGlvbiwgc2V0U3VjY2Vzc0hUTUw6ICosIGdldFN1Y2Nlc3NIVE1MOiBGdW5jdGlvbiwgc2V0RXhwcmVzc2lvbjogKiwgZ2V0RXhwcmVzc2lvbjogRnVuY3Rpb24sIHNldERlZmF1bHRNc2c6ICosIGdldERlZmF1bHRNc2c6IEZ1bmN0aW9uLCBjaGVja1ZhbGlkOiBGdW5jdGlvbiwgdmFsaWRhdGU6IEZ1bmN0aW9uLCByZXNldDogRnVuY3Rpb259fQogICAgICovCiAgICB0aGlzLiRnZXQgPSBbJyRpbmplY3RvcicsIGZ1bmN0aW9uKCRpbmplY3RvcikgewogICAgICBzZXR1cCgkaW5qZWN0b3IpOwogICAgICByZXR1cm4gewogICAgICAgIHNldFZhbGlkTWV0aG9kOiB0aGlzLnNldFZhbGlkTWV0aG9kLAogICAgICAgIGdldFZhbGlkTWV0aG9kOiB0aGlzLmdldFZhbGlkTWV0aG9kLAogICAgICAgIHNldEVycm9ySFRNTDogdGhpcy5zZXRFcnJvckhUTUwsCiAgICAgICAgZ2V0RXJyb3JIVE1MOiB0aGlzLmdldEVycm9ySFRNTCwKICAgICAgICBzZXRTdWNjZXNzSFRNTDogdGhpcy5zZXRTdWNjZXNzSFRNTCwKICAgICAgICBnZXRTdWNjZXNzSFRNTDogdGhpcy5nZXRTdWNjZXNzSFRNTCwKICAgICAgICBzZXRFeHByZXNzaW9uOiB0aGlzLnNldEV4cHJlc3Npb24sCiAgICAgICAgZ2V0RXhwcmVzc2lvbjogdGhpcy5nZXRFeHByZXNzaW9uLAogICAgICAgIHNldERlZmF1bHRNc2c6IHRoaXMuc2V0RGVmYXVsdE1zZywKICAgICAgICBnZXREZWZhdWx0TXNnOiB0aGlzLmdldERlZmF1bHRNc2csCiAgICAgICAgc2hvd1N1Y2Nlc3NNZXNzYWdlOiB0aGlzLnNob3dTdWNjZXNzTWVzc2FnZSwKICAgICAgICBzaG93RXJyb3JNZXNzYWdlOiB0aGlzLnNob3dFcnJvck1lc3NhZ2UsCiAgICAgICAgY2hlY2tWYWxpZDogdGhpcy5jaGVja1ZhbGlkLAogICAgICAgIHZhbGlkYXRlOiB0aGlzLnZhbGlkYXRlLAogICAgICAgIHZhbGlkQ2FsbGJhY2s6IHRoaXMudmFsaWRDYWxsYmFjaywKICAgICAgICBpbnZhbGlkQ2FsbGJhY2s6IHRoaXMuaW52YWxpZENhbGxiYWNrLAogICAgICAgIHJlc2V0Q2FsbGJhY2s6IHRoaXMucmVzZXRDYWxsYmFjaywKICAgICAgICByZXNldDogdGhpcy5yZXNldCwKICAgICAgICBhZGRNc2dFbGVtZW50OiB0aGlzLmFkZE1zZ0VsZW1lbnQsCiAgICAgICAgZ2V0TXNnRWxlbWVudDogdGhpcy5nZXRNc2dFbGVtZW50CiAgICAgIH07CiAgICB9XTsKICB9Cn0pLmNhbGwodGhpcyk7CgooZnVuY3Rpb24oKSB7CiAgYW5ndWxhcgogICAgLm1vZHVsZSgndmFsaWRhdGlvbi5kaXJlY3RpdmUnKQogICAgLmRpcmVjdGl2ZSgndmFsaWRhdGlvblJlc2V0JywgUmVzZXQpOwoKICBmdW5jdGlvbiBSZXNldCgkaW5qZWN0b3IpIHsKICAgIHZhciAkdmFsaWRhdGlvblByb3ZpZGVyID0gJGluamVjdG9yLmdldCgnJHZhbGlkYXRpb24nKTsKICAgIHZhciAkdGltZW91dCA9ICRpbmplY3Rvci5nZXQoJyR0aW1lb3V0Jyk7CiAgICB2YXIgJHBhcnNlID0gJGluamVjdG9yLmdldCgnJHBhcnNlJyk7CiAgICByZXR1cm4gewogICAgICBsaW5rOiBmdW5jdGlvbiBwb3N0TGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMpIHsKICAgICAgICB2YXIgZm9ybSA9ICRwYXJzZShhdHRycy52YWxpZGF0aW9uUmVzZXQpKHNjb3BlKTsKICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIGVsZW1lbnQub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkgewogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICR2YWxpZGF0aW9uUHJvdmlkZXIucmVzZXQoZm9ybSk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfTsKICB9CiAgUmVzZXQuJGluamVjdCA9IFsnJGluamVjdG9yJ107Cn0pLmNhbGwodGhpcyk7CgooZnVuY3Rpb24oKSB7CiAgYW5ndWxhcgogICAgLm1vZHVsZSgndmFsaWRhdGlvbi5kaXJlY3RpdmUnKQogICAgLmRpcmVjdGl2ZSgndmFsaWRhdGlvblN1Ym1pdCcsIFN1Ym1pdCk7CgogIGZ1bmN0aW9uIFN1Ym1pdCgkaW5qZWN0b3IpIHsKICAgIHZhciAkdmFsaWRhdGlvblByb3ZpZGVyID0gJGluamVjdG9yLmdldCgnJHZhbGlkYXRpb24nKTsKICAgIHZhciAkdGltZW91dCA9ICRpbmplY3Rvci5nZXQoJyR0aW1lb3V0Jyk7CiAgICB2YXIgJHBhcnNlID0gJGluamVjdG9yLmdldCgnJHBhcnNlJyk7CiAgICByZXR1cm4gewogICAgICBwcmlvcml0eTogMSwgLy8gZXhlY3V0ZSBiZWZvcmUgbmctY2xpY2sgKDApCiAgICAgIHJlcXVpcmU6ICc/bmdDbGljaycsCiAgICAgIGxpbms6IGZ1bmN0aW9uIHBvc3RMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycykgewogICAgICAgIHZhciBmb3JtID0gJHBhcnNlKGF0dHJzLnZhbGlkYXRpb25TdWJtaXQpKHNjb3BlKTsKICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIC8vIERpc2FibGUgbmctY2xpY2sgZXZlbnQgcHJvcGFnYXRpb24KICAgICAgICAgIGVsZW1lbnQub2ZmKCdjbGljaycpOwogICAgICAgICAgZWxlbWVudC5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgJHZhbGlkYXRpb25Qcm92aWRlci52YWxpZGF0ZShmb3JtKQogICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgJHBhcnNlKGF0dHJzLm5nQ2xpY2spKHNjb3BlKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9CiAgICB9OwogIH0KICBTdWJtaXQuJGluamVjdCA9IFsnJGluamVjdG9yJ107Cn0pLmNhbGwodGhpcyk7CgooZnVuY3Rpb24oKSB7CiAgYW5ndWxhcgogICAgLm1vZHVsZSgndmFsaWRhdGlvbi5kaXJlY3RpdmUnKQogICAgLmRpcmVjdGl2ZSgndmFsaWRhdG9yJywgVmFsaWRhdG9yKTsKCiAgZnVuY3Rpb24gVmFsaWRhdG9yKCRpbmplY3RvcikgewogICAgdmFyICR2YWxpZGF0aW9uUHJvdmlkZXIgPSAkaW5qZWN0b3IuZ2V0KCckdmFsaWRhdGlvbicpOwogICAgdmFyICRxID0gJGluamVjdG9yLmdldCgnJHEnKTsKICAgIHZhciAkdGltZW91dCA9ICRpbmplY3Rvci5nZXQoJyR0aW1lb3V0Jyk7CiAgICB2YXIgJGNvbXBpbGUgPSAkaW5qZWN0b3IuZ2V0KCckY29tcGlsZScpOwogICAgdmFyICRwYXJzZSA9ICRpbmplY3Rvci5nZXQoJyRwYXJzZScpOwogICAgdmFyIGdyb3VwcyA9IHt9OwoKICAgIC8qKgogICAgICogRG8gdGhpcyBmdW5jdGlvbiBpZiB2YWxpZGF0aW9uIHZhbGlkCiAgICAgKiBAcGFyYW0gZWxlbWVudAogICAgICogQHBhcmFtIHZhbGlkTWVzc2FnZQogICAgICogQHBhcmFtIHZhbGlkYXRpb24KICAgICAqIEBwYXJhbSBjYWxsYmFjawogICAgICogQHBhcmFtIGN0cmwKICAgICAqIEByZXR1cm5zIHt9CiAgICAgKi8KICAgIHZhciB2YWxpZEZ1bmMgPSBmdW5jdGlvbihlbGVtZW50LCB2YWxpZE1lc3NhZ2UsIHZhbGlkYXRpb24sIHNjb3BlLCBjdHJsLCBhdHRycywgcGFyYW0pIHsKICAgICAgdmFyIG1lc3NhZ2VUb1Nob3cgPSB2YWxpZE1lc3NhZ2UgfHwgJHZhbGlkYXRpb25Qcm92aWRlci5nZXREZWZhdWx0TXNnKHZhbGlkYXRpb24pLnN1Y2Nlc3M7CiAgICAgIHZhciB2YWxpZENhbGxiYWNrID0gJHBhcnNlKGF0dHJzLnZhbGlkQ2FsbGJhY2spOwogICAgICB2YXIgbWVzc2FnZUlkID0gYXR0cnMubWVzc2FnZUlkOwogICAgICB2YXIgdmFsaWRhdGlvbkdyb3VwID0gYXR0cnMudmFsaWRhdGlvbkdyb3VwOwogICAgICB2YXIgbWVzc2FnZUVsZW07CgogICAgICBpZiAobWVzc2FnZUlkIHx8IHZhbGlkYXRpb25Hcm91cCkgbWVzc2FnZUVsZW0gPSBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignIycgKyAobWVzc2FnZUlkIHx8IHZhbGlkYXRpb25Hcm91cCkpKTsKICAgICAgZWxzZSBtZXNzYWdlRWxlbSA9ICR2YWxpZGF0aW9uUHJvdmlkZXIuZ2V0TXNnRWxlbWVudChlbGVtZW50KTsKCiAgICAgIGlmIChlbGVtZW50LmF0dHIoJ25vLXZhbGlkYXRpb24tbWVzc2FnZScpKSB7CiAgICAgICAgbWVzc2FnZUVsZW0uY3NzKCdkaXNwbGF5JywgJ25vbmUnKTsKICAgICAgfSBlbHNlIGlmICgkdmFsaWRhdGlvblByb3ZpZGVyLnNob3dTdWNjZXNzTWVzc2FnZSAmJiBtZXNzYWdlVG9TaG93KSB7CiAgICAgICAgbWVzc2FnZVRvU2hvdyA9IGFuZ3VsYXIuaXNGdW5jdGlvbihtZXNzYWdlVG9TaG93KSA/IG1lc3NhZ2VUb1Nob3coZWxlbWVudCwgYXR0cnMsIHBhcmFtKSA6IG1lc3NhZ2VUb1Nob3c7CgogICAgICAgIG1lc3NhZ2VFbGVtLmh0bWwoJycpLmFwcGVuZCgkY29tcGlsZSgkdmFsaWRhdGlvblByb3ZpZGVyLmdldFN1Y2Nlc3NIVE1MKG1lc3NhZ2VUb1Nob3csIGVsZW1lbnQsIGF0dHJzKSkoc2NvcGUpKTsKICAgICAgICBtZXNzYWdlRWxlbS5jc3MoJ2Rpc3BsYXknLCAnJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbWVzc2FnZUVsZW0uY3NzKCdkaXNwbGF5JywgJ25vbmUnKTsKICAgICAgfQoKICAgICAgY3RybC4kc2V0VmFsaWRpdHkoY3RybC4kbmFtZSwgdHJ1ZSk7CiAgICAgIHZhbGlkQ2FsbGJhY2soc2NvcGUsIHsKICAgICAgICBtZXNzYWdlOiBtZXNzYWdlVG9TaG93CiAgICAgIH0pOwogICAgICBpZiAoJHZhbGlkYXRpb25Qcm92aWRlci52YWxpZENhbGxiYWNrKSAkdmFsaWRhdGlvblByb3ZpZGVyLnZhbGlkQ2FsbGJhY2soZWxlbWVudCk7CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH07CgoKICAgIC8qKgogICAgICogRG8gdGhpcyBmdW5jdGlvbiBpZiB2YWxpZGF0aW9uIGludmFsaWQKICAgICAqIEBwYXJhbSBlbGVtZW50CiAgICAgKiBAcGFyYW0gdmFsaWRNZXNzYWdlCiAgICAgKiBAcGFyYW0gdmFsaWRhdGlvbgogICAgICogQHBhcmFtIGNhbGxiYWNrCiAgICAgKiBAcGFyYW0gY3RybAogICAgICogQHJldHVybnMge30KICAgICAqLwogICAgdmFyIGludmFsaWRGdW5jID0gZnVuY3Rpb24oZWxlbWVudCwgdmFsaWRNZXNzYWdlLCB2YWxpZGF0aW9uLCBzY29wZSwgY3RybCwgYXR0cnMsIHBhcmFtKSB7CiAgICAgIHZhciBtZXNzYWdlVG9TaG93ID0gdmFsaWRNZXNzYWdlIHx8ICR2YWxpZGF0aW9uUHJvdmlkZXIuZ2V0RGVmYXVsdE1zZyh2YWxpZGF0aW9uKS5lcnJvcjsKICAgICAgdmFyIGludmFsaWRDYWxsYmFjayA9ICRwYXJzZShhdHRycy5pbnZhbGlkQ2FsbGJhY2spOwogICAgICB2YXIgbWVzc2FnZUlkID0gYXR0cnMubWVzc2FnZUlkOwogICAgICB2YXIgdmFsaWRhdGlvbkdyb3VwID0gYXR0cnMudmFsaWRhdGlvbkdyb3VwOwogICAgICB2YXIgbWVzc2FnZUVsZW07CgogICAgICBpZiAobWVzc2FnZUlkIHx8IHZhbGlkYXRpb25Hcm91cCkgbWVzc2FnZUVsZW0gPSBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignIycgKyAobWVzc2FnZUlkIHx8IHZhbGlkYXRpb25Hcm91cCkpKTsKICAgICAgZWxzZSBtZXNzYWdlRWxlbSA9ICR2YWxpZGF0aW9uUHJvdmlkZXIuZ2V0TXNnRWxlbWVudChlbGVtZW50KTsKCiAgICAgIGlmIChlbGVtZW50LmF0dHIoJ25vLXZhbGlkYXRpb24tbWVzc2FnZScpKSB7CiAgICAgICAgbWVzc2FnZUVsZW0uY3NzKCdkaXNwbGF5JywgJ25vbmUnKTsKICAgICAgfSBlbHNlIGlmICgkdmFsaWRhdGlvblByb3ZpZGVyLnNob3dFcnJvck1lc3NhZ2UgJiYgbWVzc2FnZVRvU2hvdykgewogICAgICAgIG1lc3NhZ2VUb1Nob3cgPSBhbmd1bGFyLmlzRnVuY3Rpb24obWVzc2FnZVRvU2hvdykgPyBtZXNzYWdlVG9TaG93KGVsZW1lbnQsIGF0dHJzLCBwYXJhbSkgOiBtZXNzYWdlVG9TaG93OwoKICAgICAgICBtZXNzYWdlRWxlbS5odG1sKCcnKS5hcHBlbmQoJGNvbXBpbGUoJHZhbGlkYXRpb25Qcm92aWRlci5nZXRFcnJvckhUTUwobWVzc2FnZVRvU2hvdywgZWxlbWVudCwgYXR0cnMpKShzY29wZSkpOwogICAgICAgIG1lc3NhZ2VFbGVtLmNzcygnZGlzcGxheScsICcnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBtZXNzYWdlRWxlbS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpOwogICAgICB9CgogICAgICBjdHJsLiRzZXRWYWxpZGl0eShjdHJsLiRuYW1lLCBmYWxzZSk7CiAgICAgIGludmFsaWRDYWxsYmFjayhzY29wZSwgewogICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VUb1Nob3cKICAgICAgfSk7CiAgICAgIGlmICgkdmFsaWRhdGlvblByb3ZpZGVyLmludmFsaWRDYWxsYmFjaykgJHZhbGlkYXRpb25Qcm92aWRlci5pbnZhbGlkQ2FsbGJhY2soZWxlbWVudCk7CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9OwoKICAgIC8qKgogICAgICogVmVyaWZ5IHdoZXRoZXIgdGhlcmUgaXMgb25lIG9mIHRoZSBlbGVtZW50cyBpbnNpZGUgdGhlIGdyb3VwIHZhbGlkLgogICAgICogSWYgc28sIGl0IHJldHVybnMgdHJ1ZSwgb3RoZXJ3aXNlLCBpdCByZXR1cm5zIGZhbHNlCiAgICAgKgogICAgICogQHBhcmFtIHZhbGlkYXRpb25Hcm91cAogICAgICogQHJldHVybiB7Ym9vbGVhbn0KICAgICAqLwogICAgdmFyIGNoZWNrVmFsaWRhdGlvbkdyb3VwID0gZnVuY3Rpb24odmFsaWRhdGlvbkdyb3VwKSB7CiAgICAgIHZhciBncm91cCA9IGdyb3Vwc1t2YWxpZGF0aW9uR3JvdXBdOwoKICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGdyb3VwKS5zb21lKGZ1bmN0aW9uKGtleSkgewogICAgICAgIHJldHVybiBncm91cFtrZXldOwogICAgICB9KTsKICAgIH07CgogICAgLyoqCiAgICAgKiBTZXQgdmFsaWRpdHkgdG8gYWxsIGVsZW1lbnRzIGluc2lkZSB0aGUgZ2l2ZW4gZ3JvdXAKICAgICAqCiAgICAgKiBAcGFyYW0gc2NvcGUKICAgICAqIEBwYXJhbSBncm91cE5hbWUKICAgICAqIEBwYXJhbSB2YWxpZGl0eQogICAgICovCiAgICBmdW5jdGlvbiBzZXRWYWxpZGF0aW9uR3JvdXAoc2NvcGUsIHZhbGlkYXRpb25Hcm91cCwgdmFsaWRpdHkpIHsKICAgICAgdmFyIHZhbGlkYXRpb25Hcm91cEVsZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnKlt2YWxpZGF0aW9uLWdyb3VwPScgKyB2YWxpZGF0aW9uR3JvdXAgKyAnXScpOwoKICAgICAgLy8gTG9vcCB0aHJvdWdoIGFsbCBlbGVtZW50cyBpbnNpZGUgdGhlIGdyb3VwCiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB2YWxpZGF0aW9uR3JvdXBFbGVtcy5sZW5ndGg7IGkgPCBsZW47IGkrKykgewogICAgICAgIHZhciBlbGVtID0gdmFsaWRhdGlvbkdyb3VwRWxlbXNbaV07CiAgICAgICAgdmFyIGZvcm1OYW1lID0gZWxlbS5mb3JtLm5hbWU7CiAgICAgICAgdmFyIGVsZW1OYW1lID0gZWxlbS5uYW1lOwogICAgICAgIHNjb3BlW2Zvcm1OYW1lXVtlbGVtTmFtZV0uJHNldFZhbGlkaXR5KGVsZW1OYW1lLCB2YWxpZGl0eSk7CiAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIGNvbGxlY3QgZWxlbWVudHMgZm9yIGZvY3VzCiAgICAgKiBAdHlwZSB7T2JqZWN0fQogICAgICoqKnByaXZhdGUgdmFyaWFibGUKICAgICAqLwogICAgdmFyIGZvY3VzRWxlbWVudHMgPSB7fTsKCiAgICAvKioKICAgICAqIEdldCBWYWxpZGF0aW9uIFJlc3VsdCBPYmplY3QKICAgICAqIEBwYXJhbSBkYXRhCiAgICAgKiBAcmV0dXJucyB7CiAgICAgKiAgICByZXN1bHQ6IEJvb2xlYW4sIC8vIGlzIHN1Y2Nlc3Mgb3IgZXJyb3IKICAgICAqICAgIG1lc3NhZ2U6IFN0cmluZyAgLy8gdGlwcwogICAgICogfQogICAgICovCiAgICBmdW5jdGlvbiBnZXRSZXN1bHRPYmooZGF0YSkgewogICAgICB2YXIgcmVzID0ge307CiAgICAgIGlmIChkYXRhICYmIGRhdGEubGVuZ3RoID4gMCkgewogICAgICAgIHJlcyA9IGRhdGFbMF07CiAgICAgICAgaWYgKCFhbmd1bGFyLmlzT2JqZWN0KHJlcykpIHsKICAgICAgICAgIHJlcyA9IHsKICAgICAgICAgICAgcmVzdWx0OiByZXMsCiAgICAgICAgICAgIG1lc3NhZ2U6ICcnCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICByZXMgPSB7CiAgICAgICAgICByZXN1bHQ6IGZhbHNlLAogICAgICAgICAgbWVzc2FnZTogJycKICAgICAgICB9OwogICAgICB9CiAgICAgIHJldHVybiByZXM7CiAgICB9CgogICAgLyoqCiAgICAgKiBDaGVjayBWYWxpZGF0aW9uIHdpdGggRnVuY3Rpb24gb3IgUmVnRXhwCiAgICAgKiBAcGFyYW0gc2NvcGUKICAgICAqIEBwYXJhbSBlbGVtZW50CiAgICAgKiBAcGFyYW0gYXR0cnMKICAgICAqIEBwYXJhbSBjdHJsCiAgICAgKiBAcGFyYW0gdmFsaWRhdGlvbgogICAgICogQHBhcmFtIHZhbHVlCiAgICAgKiBAcmV0dXJucyB7fQogICAgICovCiAgICB2YXIgY2hlY2tWYWxpZGF0aW9uID0gZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjdHJsLCB2YWxpZGF0aW9uLCB2YWx1ZSkgewogICAgICB2YXIgdmFsaWRhdG9ycyA9IHZhbGlkYXRpb24uc2xpY2UoMCk7CiAgICAgIHZhciB2YWxpZGF0b3JFeHByID0gdmFsaWRhdG9yc1swXS50cmltKCk7CiAgICAgIHZhciBwYXJhbUluZGV4ID0gdmFsaWRhdG9yRXhwci5pbmRleE9mKCc9Jyk7CiAgICAgIHZhciB2YWxpZGF0b3IgPSBwYXJhbUluZGV4ID09PSAtMSA/IHZhbGlkYXRvckV4cHIgOiB2YWxpZGF0b3JFeHByLnN1YnN0cigwLCBwYXJhbUluZGV4KTsKICAgICAgdmFyIHZhbGlkYXRvclBhcmFtID0gcGFyYW1JbmRleCA9PT0gLTEgPyBudWxsIDogdmFsaWRhdG9yRXhwci5zdWJzdHIocGFyYW1JbmRleCArIDEpOwogICAgICB2YXIgbGVmdFZhbGlkYXRpb24gPSB2YWxpZGF0b3JzLnNsaWNlKDEpOwogICAgICB2YXIgc3VjY2Vzc01lc3NhZ2UgPSB2YWxpZGF0b3IgKyAnU3VjY2Vzc01lc3NhZ2UnOwogICAgICB2YXIgZXJyb3JNZXNzYWdlID0gdmFsaWRhdG9yICsgJ0Vycm9yTWVzc2FnZSc7CiAgICAgIHZhciBleHByZXNzaW9uID0gJHZhbGlkYXRpb25Qcm92aWRlci5nZXRFeHByZXNzaW9uKHZhbGlkYXRvcik7CiAgICAgIHZhciB2YWxpZGF0aW9uR3JvdXAgPSBhdHRycy52YWxpZGF0aW9uR3JvdXA7CiAgICAgIHZhciB2YWxpZCA9IHsKICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihtZXNzYWdlKSB7CiAgICAgICAgICB2YWxpZEZ1bmMoZWxlbWVudCwgbWVzc2FnZSB8fCBhdHRyc1tzdWNjZXNzTWVzc2FnZV0sIHZhbGlkYXRvciwgc2NvcGUsIGN0cmwsIGF0dHJzLCB2YWxpZGF0b3JQYXJhbSk7CiAgICAgICAgICBpZiAobGVmdFZhbGlkYXRpb24ubGVuZ3RoKSB7CiAgICAgICAgICAgIHJldHVybiBjaGVja1ZhbGlkYXRpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjdHJsLCBsZWZ0VmFsaWRhdGlvbiwgdmFsdWUpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBlcnJvcjogZnVuY3Rpb24obWVzc2FnZSkgewogICAgICAgICAgcmV0dXJuIGludmFsaWRGdW5jKGVsZW1lbnQsIG1lc3NhZ2UgfHwgYXR0cnNbZXJyb3JNZXNzYWdlXSwgdmFsaWRhdG9yLCBzY29wZSwgY3RybCwgYXR0cnMsIHZhbGlkYXRvclBhcmFtKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICBpZiAoZXhwcmVzc2lvbiA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgY29uc29sZS5lcnJvcignWW91IGFyZSB1c2luZyB1bmRlZmluZWQgdmFsaWRhdG9yICIlcyInLCB2YWxpZGF0b3IpOwogICAgICAgIGlmIChsZWZ0VmFsaWRhdGlvbi5sZW5ndGgpIHJldHVybiBjaGVja1ZhbGlkYXRpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjdHJsLCBsZWZ0VmFsaWRhdGlvbiwgdmFsdWUpOwogICAgICAgIGVsc2UgcmV0dXJuOwogICAgICB9CiAgICAgIC8vIENoZWNrIHdpdGggRnVuY3Rpb24KICAgICAgaWYgKGV4cHJlc3Npb24uY29uc3RydWN0b3IgPT09IEZ1bmN0aW9uKSB7CiAgICAgICAgcmV0dXJuICRxLmFsbChbJHZhbGlkYXRpb25Qcm92aWRlci5nZXRFeHByZXNzaW9uKHZhbGlkYXRvcikodmFsdWUsIHNjb3BlLCBlbGVtZW50LCBhdHRycywgdmFsaWRhdG9yUGFyYW0pXSkKICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgICAgICAgdmFyIHJlc3VsdE9iaiA9IGdldFJlc3VsdE9iaihkYXRhKTsKICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSByZXN1bHRPYmoubWVzc2FnZTsKICAgICAgICAgICAgaWYgKHJlc3VsdE9iai5yZXN1bHQpIHsKICAgICAgICAgICAgICBpZiAodmFsaWRhdGlvbkdyb3VwKSB7CiAgICAgICAgICAgICAgICBncm91cHNbdmFsaWRhdGlvbkdyb3VwXVtjdHJsLiRuYW1lXSA9IHRydWU7CiAgICAgICAgICAgICAgICBzZXRWYWxpZGF0aW9uR3JvdXAoc2NvcGUsIHZhbGlkYXRpb25Hcm91cCwgdHJ1ZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHJldHVybiB2YWxpZC5zdWNjZXNzKG1lc3NhZ2UpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHZhbGlkYXRpb25Hcm91cCkgewogICAgICAgICAgICAgIGdyb3Vwc1t2YWxpZGF0aW9uR3JvdXBdW2N0cmwuJG5hbWVdID0gZmFsc2U7CgogICAgICAgICAgICAgIC8vIFdoZW5ldmVyIHRoZSBlbGVtZW50IGlzIGludmFsaWQsIHdlJ2xsIGNoZWNrIHdoZXRoZXIgb25lIG9mIHRoZSBlbGVtZW50cyBpbnNpZGUgdGhlIGl0cyBncm91cCB2YWxpZCBvciBub3QuCiAgICAgICAgICAgICAgLy8gSWYgdGhlcmUgaXMgYSB2YWxpZCBlbGVtZW50LCBpdHMgaW52YWxpZCBtZXNzYWdlIHdvbid0IGJlIHNob3duLCBPdGhlcndpc2UsIHNob3dzIGl0cyBpbnZhbGlkIG1lc3NhZ2UuCiAgICAgICAgICAgICAgaWYgKGNoZWNrVmFsaWRhdGlvbkdyb3VwKHZhbGlkYXRpb25Hcm91cCkpIHsKICAgICAgICAgICAgICAgIHNldFZhbGlkYXRpb25Hcm91cChzY29wZSwgdmFsaWRhdGlvbkdyb3VwLCB0cnVlKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgc2V0VmFsaWRhdGlvbkdyb3VwKHNjb3BlLCB2YWxpZGF0aW9uR3JvdXAsIGZhbHNlKTsKICAgICAgICAgICAgICAgIHJldHVybiB2YWxpZC5lcnJvcihtZXNzYWdlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSByZXR1cm4gdmFsaWQuZXJyb3IobWVzc2FnZSk7CiAgICAgICAgICB9LCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIHZhbGlkLmVycm9yKCk7CiAgICAgICAgICB9KTsKICAgICAgfQoKICAgICAgLy8gQ2hlY2sgd2l0aCBSZWdFeHAKICAgICAgZWxzZSBpZiAoZXhwcmVzc2lvbi5jb25zdHJ1Y3RvciA9PT0gUmVnRXhwKSB7CiAgICAgICAgLy8gT25seSBhcHBseSB0aGUgdGVzdCBpZiB0aGUgdmFsdWUgaXMgbmVpdGhlciB1bmRlZmluZWQgb3IgbnVsbAogICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlICE9PSBudWxsKSB7CiAgICAgICAgICBpZiAoJHZhbGlkYXRpb25Qcm92aWRlci5nZXRFeHByZXNzaW9uKHZhbGlkYXRvcikudGVzdCh2YWx1ZSkpIHsKICAgICAgICAgICAgaWYgKHZhbGlkYXRpb25Hcm91cCkgewogICAgICAgICAgICAgIGdyb3Vwc1t2YWxpZGF0aW9uR3JvdXBdW2N0cmwuJG5hbWVdID0gdHJ1ZTsKICAgICAgICAgICAgICBzZXRWYWxpZGF0aW9uR3JvdXAoc2NvcGUsIHZhbGlkYXRpb25Hcm91cCwgdHJ1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHZhbGlkLnN1Y2Nlc3MoKTsKICAgICAgICAgIH0gZWxzZSBpZiAodmFsaWRhdGlvbkdyb3VwKSB7CiAgICAgICAgICAgIGdyb3Vwc1t2YWxpZGF0aW9uR3JvdXBdW2N0cmwuJG5hbWVdID0gZmFsc2U7CgogICAgICAgICAgICAvLyBXaGVuZXZlciB0aGUgZWxlbWVudCBpcyBpbnZhbGlkLCB3ZSdsbCBjaGVjayB3aGV0aGVyIG9uZSBvZiB0aGUgZWxlbWVudHMgaW5zaWRlIHRoZSBpdHMgZ3JvdXAgdmFsaWQgb3Igbm90LgogICAgICAgICAgICAvLyBJZiB0aGVyZSBpcyBhIHZhbGlkIGVsZW1lbnQsIGl0cyBpbnZhbGlkIG1lc3NhZ2Ugd29uJ3QgYmUgc2hvd24sIE90aGVyd2lzZSwgc2hvd3MgaXRzIGludmFsaWQgbWVzc2FnZS4KICAgICAgICAgICAgaWYgKGNoZWNrVmFsaWRhdGlvbkdyb3VwKHZhbGlkYXRpb25Hcm91cCkpIHsKICAgICAgICAgICAgICBzZXRWYWxpZGF0aW9uR3JvdXAoc2NvcGUsIHZhbGlkYXRpb25Hcm91cCwgdHJ1ZSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgc2V0VmFsaWRhdGlvbkdyb3VwKHNjb3BlLCB2YWxpZGF0aW9uR3JvdXAsIGZhbHNlKTsKICAgICAgICAgICAgICByZXR1cm4gdmFsaWQuZXJyb3IoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHJldHVybiB2YWxpZC5lcnJvcigpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHJldHVybiB2YWxpZC5lcnJvcigpOwogICAgfTsKCiAgICAvKioKICAgICAqIGdlbmVyYXRlIHVuaXF1ZSBndWlkCiAgICAgKi8KICAgIHZhciBzNCA9IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gKCgoMSArIE1hdGgucmFuZG9tKCkpICogMHgxMDAwMCkgfCAwKS50b1N0cmluZygxNikuc3Vic3RyaW5nKDEpOwogICAgfTsKICAgIHZhciBndWlkID0gZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiAoczQoKSArIHM0KCkgKyBzNCgpICsgczQoKSk7CiAgICB9OwoKCiAgICByZXR1cm4gewogICAgICByZXN0cmljdDogJ0EnLAogICAgICByZXF1aXJlOiAnbmdNb2RlbCcsCiAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY3RybCkgewogICAgICAgIC8qKgogICAgICAgICAqIEFsbCBhdHRyaWJ1dGVzCiAgICAgICAgICovCiAgICAgICAgdmFyIHVzZVZpZXdWYWx1ZSA9IGF0dHJzLnVzZVZpZXdWYWx1ZSAhPT0gJ2ZhbHNlJzsKICAgICAgICB2YXIgdmFsaWRhdG9yID0gYXR0cnMudmFsaWRhdG9yOwogICAgICAgIHZhciBtZXNzYWdlSWQgPSBhdHRycy5tZXNzYWdlSWQ7CiAgICAgICAgdmFyIHZhbGlkYXRpb25Hcm91cCA9IGF0dHJzLnZhbGlkYXRpb25Hcm91cDsKICAgICAgICB2YXIgdmFsaWRNZXRob2QgPSBhdHRycy52YWxpZE1ldGhvZDsKICAgICAgICB2YXIgbmdNb2RlbCA9IGF0dHJzLm5nTW9kZWw7CgogICAgICAgIC8qKgogICAgICAgICAqIHdhdGNoCiAgICAgICAgICogQHR5cGUge3dhdGNofQogICAgICAgICAqCiAgICAgICAgICogVXNlIHRvIGNvbGxlY3Qgc2NvcGUuJHdhdGNoIG1ldGhvZAogICAgICAgICAqCiAgICAgICAgICogdXNlIHdhdGNoKCkgdG8gZGVzdHJveSB0aGUgJHdhdGNoIG1ldGhvZAogICAgICAgICAqLwogICAgICAgIHZhciB3YXRjaCA9IGZ1bmN0aW9uKCkge307CgogICAgICAgIC8qKgogICAgICAgICAqIHZhbGlkYXRvcgogICAgICAgICAqIEB0eXBlIHtBcnJheX0KICAgICAgICAgKgogICAgICAgICAqIENvbnZlcnQgdXNlciBpbnB1dCBTdHJpbmcgdG8gQXJyYXkKICAgICAgICAgKi8KICAgICAgICB2YXIgdmFsaWRhdGlvbiA9IHZhbGlkYXRvci5zcGxpdCgnLCcpOwoKICAgICAgICAvKioKICAgICAgICAgKiBndWlkIHVzZQogICAgICAgICAqLwogICAgICAgIHZhciB1aWQgPSBjdHJsLnZhbGlkYXRpb25JZCA9IGd1aWQoKTsKCiAgICAgICAgLyoqCiAgICAgICAgICogdG8gaGF2ZSBhIHZhbHVlIHRvIHJvbGxiYWNrIHRvCiAgICAgICAgICovCiAgICAgICAgdmFyIG9yaWdpbmFsVmlld1ZhbHVlID0gbnVsbDsKCiAgICAgICAgLyoqCiAgICAgICAgICogU2V0IGluaXRpYWwgdmFsaWRpdHkgdG8gdW5kZWZpbmVkIGlmIG5vIGJvb2xlYW4gdmFsdWUgaXMgdHJhbnNtaXR0ZWQKICAgICAgICAgKi8KICAgICAgICB2YXIgaW5pdGlhbFZhbGlkaXR5ID0gdm9pZCAwOwogICAgICAgIGlmICh0eXBlb2YgYXR0cnMuaW5pdGlhbFZhbGlkaXR5ID09PSAnYm9vbGVhbicpIHsKICAgICAgICAgIGluaXRpYWxWYWxpZGl0eSA9IGF0dHJzLmluaXRpYWxWYWxpZGl0eTsKICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIE9ic2VydmUgdmFsaWRhdG9yIGNoYW5nZXMgaW4gb3JkZXIgdG8gYWxsb3cgZHluYW1pY2FsbHkgY2hhbmdlIGl0CiAgICAgICAgICovCiAgICAgICAgYXR0cnMuJG9ic2VydmUoJ3ZhbGlkYXRvcicsIGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgICAgICB2YWxpZGF0aW9uID0gdmFsdWUuc3BsaXQoJywnKTsKICAgICAgICB9KTsKCiAgICAgICAgLyoqCiAgICAgICAgICogU2V0IHVwIGdyb3VwcyBvYmplY3QgaW4gb3JkZXIgdG8ga2VlcCB0cmFjayB2YWxpZGF0aW9uIG9mIGVsZW1lbnRzCiAgICAgICAgICovCiAgICAgICAgaWYgKHZhbGlkYXRpb25Hcm91cCkgewogICAgICAgICAgaWYgKCFncm91cHNbdmFsaWRhdGlvbkdyb3VwXSkgZ3JvdXBzW3ZhbGlkYXRpb25Hcm91cF0gPSB7fTsKICAgICAgICAgIGdyb3Vwc1t2YWxpZGF0aW9uR3JvdXBdW2N0cmwuJG5hbWVdID0gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiBEZWZhdWx0IFZhbGlkL0ludmFsaWQgTWVzc2FnZQogICAgICAgICAqLwogICAgICAgIGlmICghKG1lc3NhZ2VJZCB8fCB2YWxpZGF0aW9uR3JvdXApKSAkdmFsaWRhdGlvblByb3ZpZGVyLmFkZE1zZ0VsZW1lbnQoZWxlbWVudCk7CgogICAgICAgIC8qKgogICAgICAgICAqIFNldCBjdXN0b20gaW5pdGlhbCB2YWxpZGl0eQogICAgICAgICAqIFVzYWdlOiA8aW5wdXQgaW5pdGlhbC12YWxpZGl0eT0idHJ1ZSIgLi4uID4KICAgICAgICAgKi8KICAgICAgICBjdHJsLiRzZXRWYWxpZGl0eShjdHJsLiRuYW1lLCBpbml0aWFsVmFsaWRpdHkpOwoKICAgICAgICAvKioKICAgICAgICAgKiBSZXNldCB0aGUgdmFsaWRhdGlvbiBmb3Igc3BlY2lmaWMgZm9ybQogICAgICAgICAqLwogICAgICAgIHNjb3BlLiRvbihjdHJsLiRuYW1lICsgJ3Jlc2V0LScgKyB1aWQsIGZ1bmN0aW9uKCkgewogICAgICAgICAgLyoqCiAgICAgICAgICAgKiBjbGVhciBzY29wZS4kd2F0Y2ggaGVyZQogICAgICAgICAgICogd2hlbiByZXNldCBzdGF0dXMKICAgICAgICAgICAqIGNsZWFyIHRoZSAkd2F0Y2ggbWV0aG9kIHRvIHByZXZlbnQKICAgICAgICAgICAqICR3YXRjaCBhZ2FpbiB3aGlsZSByZXNldCB0aGUgZm9ybQogICAgICAgICAgICovCiAgICAgICAgICB3YXRjaCgpOwoKICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICBjdHJsLiRzZXRWaWV3VmFsdWUob3JpZ2luYWxWaWV3VmFsdWUpOwogICAgICAgICAgICBjdHJsLiRzZXRQcmlzdGluZSgpOwogICAgICAgICAgICBjdHJsLiRzZXRWYWxpZGl0eShjdHJsLiRuYW1lLCB1bmRlZmluZWQpOwogICAgICAgICAgICBjdHJsLiRyZW5kZXIoKTsKICAgICAgICAgICAgaWYgKG1lc3NhZ2VJZCB8fCB2YWxpZGF0aW9uR3JvdXApIGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIChtZXNzYWdlSWQgfHwgdmFsaWRhdGlvbkdyb3VwKSkpLmh0bWwoJycpOwogICAgICAgICAgICBlbHNlICR2YWxpZGF0aW9uUHJvdmlkZXIuZ2V0TXNnRWxlbWVudChlbGVtZW50KS5odG1sKCcnKTsKCiAgICAgICAgICAgIGlmICgkdmFsaWRhdGlvblByb3ZpZGVyLnJlc2V0Q2FsbGJhY2spICR2YWxpZGF0aW9uUHJvdmlkZXIucmVzZXRDYWxsYmFjayhlbGVtZW50KTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwoKICAgICAgICAvKioKICAgICAgICAgKiBDaGVjayB2YWxpZGF0b3IKICAgICAgICAgKi8KICAgICAgICB2YWxpZE1ldGhvZCA9IChhbmd1bGFyLmlzVW5kZWZpbmVkKHZhbGlkTWV0aG9kKSkgPyAkdmFsaWRhdGlvblByb3ZpZGVyLmdldFZhbGlkTWV0aG9kKCkgOiB2YWxpZE1ldGhvZDsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ2xpY2sgc3VibWl0IGZvcm0sIGNoZWNrIHRoZSB2YWxpZGl0eSB3aGVuIHN1Ym1pdAogICAgICAgICAqLwogICAgICAgIHNjb3BlLiRvbihjdHJsLiRuYW1lICsgJ3N1Ym1pdC0nICsgdWlkLCBmdW5jdGlvbihldmVudCwgaW5kZXgpIHsKICAgICAgICAgIHZhciB2YWx1ZSA9IHVzZVZpZXdWYWx1ZSA/IGN0cmwuJHZpZXdWYWx1ZSA6IGN0cmwuJG1vZGVsVmFsdWU7CiAgICAgICAgICB2YXIgaXNWYWxpZCA9IGZhbHNlOwoKICAgICAgICAgIGlzVmFsaWQgPSBjaGVja1ZhbGlkYXRpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjdHJsLCB2YWxpZGF0aW9uLCB2YWx1ZSk7CgogICAgICAgICAgaWYgKHZhbGlkTWV0aG9kID09PSAnc3VibWl0JykgewogICAgICAgICAgICAvLyBjbGVhciBwcmV2aW91cyBzY29wZS4kd2F0Y2gKICAgICAgICAgICAgd2F0Y2goKTsKICAgICAgICAgICAgd2F0Y2ggPSBzY29wZS4kd2F0Y2goZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHNjb3BlLiRldmFsKG5nTW9kZWwpOwogICAgICAgICAgICB9LCBmdW5jdGlvbih2YWx1ZSwgb2xkVmFsdWUpIHsKICAgICAgICAgICAgICAvLyBkb24ndCB3YXRjaCB3aGVuIGluaXQKICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IG9sZFZhbHVlKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAvLyBzY29wZS4kd2F0Y2ggd2lsbCB0cmFuc2xhdGUgJycgdG8gdW5kZWZpbmVkCiAgICAgICAgICAgICAgLy8gdW5kZWZpbmVkL251bGwgd2lsbCBwYXNzIHRoZSByZXF1aXJlZCBzdWJtaXQgL14uKy8KICAgICAgICAgICAgICAvLyBjYXVzZSBzb21lIGVycm9yIGluIHRoaXMgdmFsaWRhdGlvbgogICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlID09PSBudWxsKSB7CiAgICAgICAgICAgICAgICB2YWx1ZSA9ICcnOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaXNWYWxpZCA9IGNoZWNrVmFsaWRhdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIGN0cmwsIHZhbGlkYXRpb24sIHZhbHVlKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIHNldEZvY3VzID0gZnVuY3Rpb24oaXNWYWxpZCkgewogICAgICAgICAgICBpZiAoaXNWYWxpZCkgewogICAgICAgICAgICAgIGRlbGV0ZSBmb2N1c0VsZW1lbnRzW2luZGV4XTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBmb2N1c0VsZW1lbnRzW2luZGV4XSA9IGVsZW1lbnRbMF07CgogICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgZm9jdXNFbGVtZW50c1tNYXRoLm1pbi5hcHBseShudWxsLCBPYmplY3Qua2V5cyhmb2N1c0VsZW1lbnRzKSldLmZvY3VzKCk7CiAgICAgICAgICAgICAgfSwgMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CgogICAgICAgICAgaWYgKGlzVmFsaWQuY29uc3RydWN0b3IgPT09IE9iamVjdCkgaXNWYWxpZC50aGVuKHNldEZvY3VzKTsKICAgICAgICAgIGVsc2Ugc2V0Rm9jdXMoaXNWYWxpZCk7CiAgICAgICAgfSk7CgogICAgICAgIC8qKgogICAgICAgICAqIFZhbGlkYXRlIGJsdXIgbWV0aG9kCiAgICAgICAgICovCiAgICAgICAgaWYgKHZhbGlkTWV0aG9kID09PSAnYmx1cicpIHsKICAgICAgICAgIGVsZW1lbnQuYmluZCgnYmx1cicsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICB2YXIgdmFsdWUgPSBzY29wZS4kZXZhbChuZ01vZGVsKTsKCiAgICAgICAgICAgIGlmIChzY29wZS4kcm9vdC4kJHBoYXNlICE9PSAnJGFwcGx5JykgewogICAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGNoZWNrVmFsaWRhdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIGN0cmwsIHZhbGlkYXRpb24sIHZhbHVlKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBjaGVja1ZhbGlkYXRpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjdHJsLCB2YWxpZGF0aW9uLCB2YWx1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwoKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIFZhbGlkYXRlIHN1Ym1pdCAmIHN1Ym1pdC1vbmx5IG1ldGhvZAogICAgICAgICAqLwogICAgICAgIGlmICh2YWxpZE1ldGhvZCA9PT0gJ3N1Ym1pdCcgfHwgdmFsaWRNZXRob2QgPT09ICdzdWJtaXQtb25seScpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIFZhbGlkYXRlIHdhdGNoIG1ldGhvZAogICAgICAgICAqIFRoaXMgaXMgdGhlIGRlZmF1bHQgbWV0aG9kCiAgICAgICAgICovCiAgICAgICAgc2NvcGUuJHdhdGNoKGZ1bmN0aW9uKCkgewogICAgICAgICAgcmV0dXJuIHNjb3BlLiRldmFsKG5nTW9kZWwpOwogICAgICAgIH0sIGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgICAgICAvKioKICAgICAgICAgICAqIGRpcnR5LCBwcmlzdGluZSwgdmlld1ZhbHVlIGNvbnRyb2wgaGVyZQogICAgICAgICAgICovCiAgICAgICAgICBpZiAoY3RybC4kcHJpc3RpbmUgJiYgY3RybC4kdmlld1ZhbHVlKSB7CiAgICAgICAgICAgIC8vIGhhcyB2YWx1ZSB3aGVuIGluaXRpYWwKICAgICAgICAgICAgb3JpZ2luYWxWaWV3VmFsdWUgPSBjdHJsLiR2aWV3VmFsdWUgfHwgJyc7CiAgICAgICAgICAgIGN0cmwuJHNldFZpZXdWYWx1ZShjdHJsLiR2aWV3VmFsdWUpOwogICAgICAgICAgfSBlbHNlIGlmIChjdHJsLiRwcmlzdGluZSkgewogICAgICAgICAgICAvLyBEb24ndCB2YWxpZGF0ZSBmb3JtIHdoZW4gdGhlIGlucHV0IGlzIGNsZWFuKHByaXN0aW5lKQogICAgICAgICAgICBpZiAobWVzc2FnZUlkIHx8IHZhbGlkYXRpb25Hcm91cCkgYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgKG1lc3NhZ2VJZCB8fCB2YWxpZGF0aW9uR3JvdXApKSkuaHRtbCgnJyk7CiAgICAgICAgICAgIGVsc2UgJHZhbGlkYXRpb25Qcm92aWRlci5nZXRNc2dFbGVtZW50KGVsZW1lbnQpLmh0bWwoJycpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBjaGVja1ZhbGlkYXRpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjdHJsLCB2YWxpZGF0aW9uLCB2YWx1ZSk7CiAgICAgICAgfSk7CgogICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgLyoqCiAgICAgICAgICAgKiBEb24ndCBzaG93dXAgdGhlIHZhbGlkYXRpb24gTWVzc2FnZQogICAgICAgICAgICovCiAgICAgICAgICBhdHRycy4kb2JzZXJ2ZSgnbm9WYWxpZGF0aW9uTWVzc2FnZScsIGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgICAgICAgIHZhciBlbDsKICAgICAgICAgICAgaWYgKG1lc3NhZ2VJZCB8fCB2YWxpZGF0aW9uR3JvdXApIGVsID0gYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgKG1lc3NhZ2VJZCB8fCB2YWxpZGF0aW9uR3JvdXApKSk7CiAgICAgICAgICAgIGVsc2UgZWwgPSAkdmFsaWRhdGlvblByb3ZpZGVyLmdldE1zZ0VsZW1lbnQoZWxlbWVudCk7CiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gJ3RydWUnIHx8IHZhbHVlID09PSB0cnVlKSBlbC5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpOwogICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA9PT0gJ2ZhbHNlJyB8fCB2YWx1ZSA9PT0gZmFsc2UpIGVsLmNzcygnZGlzcGxheScsICdibG9jaycpOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH07CiAgfQogIFZhbGlkYXRvci4kaW5qZWN0ID0gWyckaW5qZWN0b3InXTsKfSkuY2FsbCh0aGlzKTsKCi8qCgkqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKCQkJU0NIRU1BIFZBTElEQVRPUgoJKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCglTY2hlbWEgdmFsaWRhdG9yIGZvciBhbmd1bGFyLXZhbGlhdGlvbiwgZ29vZAoJaWYgeW91IHdhbnQgdG8ga2VlcCB5b3VyIGJhY2tlbmQgdmFsaWRhdGlvbiBydWxlcwoJaW4gc3luYyBvciB5b3VyIGhhdGUgbWFraW5nIHlvdXIgaHRtbCB0b28gZGVjbGFyYXRpdmUuCgoJQGF1dGhvciAtIEhhcm1pbmRlciBWaXJrCglAZ2l0aHViIC0gaHR0cHM6Ly9naXRodWIuY29tL3RoZXR1dGxhZ2UvYW5ndWxhci12YWxpZGF0aW9uLXNjaGVtYQoqLwoKKGZ1bmN0aW9uKCkgewoJdmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCd2YWxpZGF0aW9uLnNjaGVtYScsW10pCgoJLy8gVGlueSBwcm92aWRlciB0byBzYXZlIGFuZCBmZXRjaCBzY2hlbWFzCgkucHJvdmlkZXIoJ3ZhbGlkYXRpb25TY2hlbWEnLGZ1bmN0aW9uKCl7CgoJCS8vIExpc3Qgb2Ygc2NoZW1hcyBhcmUgc3RvcmVkIGhlcmUKCQl2YXIgc2NoZW1hcyA9IHt9OwoKCQkvLyBBZGRpbmcgc2NoZW1hIHRvIG9iamVjdAoJCXRoaXMuc2V0ID0gZnVuY3Rpb24obmFtZSxoYXNoKXsKCQkJc2NoZW1hc1tuYW1lXSA9IGhhc2g7CgkJfTsKCgkJLy8gZmV0Y2hpbmcgZnJvbSBvYmplY3QKCQl0aGlzLmdldCA9IGZ1bmN0aW9uKG5hbWUpewoJCQlyZXR1cm4gc2NoZW1hc1tuYW1lXTsKCQl9CgoJCS8vIEV4cG9zaW5nIHRoZW0gaGVyZQoJCXRoaXMuJGdldCA9IGZ1bmN0aW9uKCl7CgkJCXJldHVybnsKCQkJCXNldDogdGhpcy5zZXQsCgkJCQlnZXQ6IHRoaXMuZ2V0CgkJCX0KCQl9Cgl9KQoKCS8vIFJlcXVpcmVkIGRpcmVjdGl2ZQoJLmRpcmVjdGl2ZSgndmFsaWRhdGlvblNjaGVtYScsWyd2YWxpZGF0aW9uU2NoZW1hJyxmdW5jdGlvbih2YWxpZGF0aW9uU2NoZW1hKXsKCQlyZXR1cm57CgkJCXJlc3RyaWN0OiAnQUUnLAoJCQljb21waWxlOiBmdW5jdGlvbih0RWxlbSwgdEF0dHJzKXsKCQkJCS8vIERlZmF1bHQgc2NoZW1hIHRvIGV4dGVuZCB1cG9uCgkJCQl2YXIgZGVmYXVsdFNjaGVtYSA9IHsKCQkJCQkvLyBkZWZhdWx0IHZhbGlkYXRpb24gaXMgc2V0IHRvIHJlcXVpcmVkCgkJCQkJJ3ZhbGlkYXRpb25zJzoncmVxdWlyZWQnLAoJCQkJCSd2YWxpZGF0ZS1vbic6J3dhdGNoJwoJCQkJfTsKCgkJCQl2YXIgZ2xvYmFsTWVzc2FnZXMgPSB7fTsKCgkJCQkvLyBHcmFiYmluZyBzY2hlbWEgdGhlIHVzZXIgd2FudHMKCQkJCXZhciBzY2hlbWEgPSB2YWxpZGF0aW9uU2NoZW1hLmdldCh0QXR0cnMuc2NoZW1hKTsKCgkJCQlpZihzY2hlbWEpewoKCQkJCQkvLyBJZiBpdCBpcyBhbiB2YWxpZCBzY2hlbWEgLCB0aGVuIHNldEZpeHR1cmVzCgkJCQkJc2V0Rml4dHVyZXMoc2NoZW1hKTsKCgkJCQl9ZWxzZXsKCgkJCQkJLy8gT3RoZXJ3aXNlIHNob3cgd2FybmluZyBvZiBub24tZXhpc3Rpbmcgc2NoZW1hCgkJCQkJd2FybkRldmVsb3Blcih0QXR0cnMuc2NoZW1hKTsKCQkJCX0KCgkJCQkvLyBXYXJuIGRldmVsb3BlciBtZXRob2QKCQkJCWZ1bmN0aW9uIHdhcm5EZXZlbG9wZXIoc2NoZW1hKXsKCgkJCQkJLy8gRXJyb3IgbWVzc2FnZQoJCQkJCXZhciBlcnJvcl9tZXNzYWdlID0gc2NoZW1hICsgJyBTY2hlbWEgbm90IGZvdW5kJzsKCgkJCQkJLy8gT3V0cHV0dGluZyB0byBjb25zb2xlCgkJCQkJY29uc29sZS53YXJuKCdWQUxJREFUSU9OIFNDSEVNQSA6JyxlcnJvcl9tZXNzYWdlKTsKCQkJCX0KCgkJCQlmdW5jdGlvbiBzZXRGaXh0dXJlcyhzY2hlbWEpewoKCQkJCQkvLyBJZiBzY2hlbWEgaGFzIGdsb2JhbHMKCQkJCQlpZihzY2hlbWEuZ2xvYmFscyl7CgoJCQkJCQkvLyBSZW1vdmUgZGVmYXVsdFNjaGVtYSB2YWxpZGF0aW9ucyB3aXRoIGdsb2JhbHMKCQkJCQkJZGVmYXVsdFNjaGVtYS52YWxpZGF0aW9ucyA9IHNjaGVtYS5nbG9iYWxzLnZhbGlkYXRpb25zIHx8IGRlZmF1bHRTY2hlbWEudmFsaWRhdGlvbnM7CgoJCQkJCQkvLyBSZW1vdmUgdmFsaWRhdGUtb24gdmFsaWRhdGlvbnMgd2l0aCBnbG9iYWxzCgkJCQkJCWRlZmF1bHRTY2hlbWFbInZhbGlkYXRlLW9uIl0gPSBzY2hlbWEuZ2xvYmFsc1sidmFsaWRhdGUtb24iXSB8fCBkZWZhdWx0U2NoZW1hWyJ2YWxpZGF0ZS1vbiJdOwoKCQkJCQkJLy8gU2V0IGdsb2JhbE1lc3NhZ2VzIGlmIGdsb2JhbHMgaGF2ZSBvbmUgb3IgZW1wdHkgb2JqZWN0CgkJCQkJCWdsb2JhbE1lc3NhZ2VzID0gc2NoZW1hLmdsb2JhbHMubWVzc2FnZXMgfHwge307CgoJCQkJCQkvLyBEZWxldGUgc2NoZW1hIGdsb2JhbHMgYXMgbm90IHJlcXVpcmVkIGFueW1vcmUKCQkJCQkJZGVsZXRlIHNjaGVtYS5nbG9iYWxzOwoJCQkJCX0KCgkJCQkJLy8gRGVlcCBleHRlbmRpbmcgb2JqZWN0cwoJCQkJCWZ1bmN0aW9uIGV4dGVuZERlZXAoZHN0KSB7CgoJCQkJCQkvLyBMb29waW5nIHRocm91Z2ggYWxsIHRoZSB2YWx1ZXMKCQkJCQkgIGFuZ3VsYXIuZm9yRWFjaChhcmd1bWVudHMsIGZ1bmN0aW9uKG9iaikgewoJCQkJCSAgICBpZiAob2JqICE9PSBkc3QpIHsKCQkJCQkgICAgICBhbmd1bGFyLmZvckVhY2gob2JqLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7CgkJCQkJICAgICAgICBpZiAoZHN0W2tleV0gJiYgZHN0W2tleV0uY29uc3RydWN0b3IgJiYgZHN0W2tleV0uY29uc3RydWN0b3IgPT09IE9iamVjdCkgewoKCQkJCQkgICAgICAgIAkvLyBSZXJ1biBpZiBhYm92ZSBrZXkgaXMgYW4gT2JqZWN0CgoJCQkJCSAgICAgICAgICBleHRlbmREZWVwKGRzdFtrZXldLCB2YWx1ZSk7CgoJCQkJCSAgICAgICAgfSBlbHNlIHsKCgkJCQkJICAgICAgICAJLy8gRXh0ZW5kIGhlcmUKCgkJCQkJICAgICAgICAgIGRzdFtrZXldID0gZHN0W2tleV0gfHwgdmFsdWU7CgkJCQkJICAgICAgICB9ICAgICAKCQkJCQkgICAgICB9KTsgICAKCQkJCQkgICAgfQoJCQkJCSAgfSk7CgkJCQkJICByZXR1cm4gZHN0OwoJCQkJCX0KCgkJCQkJLy8gc2NoZW1hLmZpcnN0bmFtZSA9IGV4dGVuZERlZXAoc2NoZW1hLmZpcnN0bmFtZSxkZWZhdWx0U2NoZW1hKTsKCgkJCQkJLy8gR3JhYmJpbmcgYWxsIGZvcm0gZWxlbWVudHMgaW5zaWRlIHRoZSB0RWxlbQoJCQkJCXZhciBmb3JtRWxlbWVudHMgPSB0RWxlbVswXS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCxzZWxlY3QsdGV4dGFyZWEnKTsKCgkJCQkJLy8gTG9vcGluZyB0aHJvdWdoIGFsbCBmb3JtIEVsZW1lbnRzCgkJCQkJYW5ndWxhci5mb3JFYWNoKGZvcm1FbGVtZW50cyxmdW5jdGlvbihpbnB1dCl7CgoJCQkJCQkvLyBHZXR0aW5nIGluc3RhbmNlIG9mIGFuZ3VsYXIgZWxlbWVudAoJCQkJCQl2YXIgaSA9IGFuZ3VsYXIuZWxlbWVudChpbnB1dCk7CgoJCQkJCQkvLyBHcmFiYmluZyBuYW1lCgkJCQkJCS8vIEBkZXNjcmlwdGlvbiAtICBOYW1lIGlzIHJlcXVpcmVkIHRvIG1hdGNoIGtleXMgb24gc2NoZW1hCgkJCQkJCS8vIEBleGFtcGxlIC0gZmlyc3RuYW1lIGtleSBvbiBzY2hlbWEgd2lsbCBiZSBtYXRjaGVkIHdpdGggZmlyc3RuYW1lIGFzIGZvcm0KCQkJCQkJLy8gCQkJCQkJZWxlbWVudCBuYW1lCgoJCQkJCQl2YXIgaW5wdXRfbmFtZSA9IGkuYXR0cignbmFtZScpOwoKCQkJCQkJLy8gSWYgc2NoZW1hIGRlZmluYXRpb24gZXhpc3RzCgkJCQkJCWlmKHNjaGVtYVtpbnB1dF9uYW1lXSl7CgoJCQkJCQkJLy8gRGVlcCBleHRlbmQgcnVsZXMgdG8gc2F2ZSB1bmRlZmluZWQgc3R1ZmYKCQkJCQkJCXZhciBpX3NjaGVtYSA9IGV4dGVuZERlZXAoc2NoZW1hW2lucHV0X25hbWVdLGRlZmF1bHRTY2hlbWEpOwoKCQkJCQkJCS8vIFNldHRpbmcgdmFsaWRhdG9yIG9uIGZpZWxkCgkJCQkJCQlpLmF0dHIoJ3ZhbGlkYXRvcicsaV9zY2hlbWEudmFsaWRhdGlvbnMpOwoKCQkJCQkJCS8vIFNldHRpbmcgdmFsaWQtbWV0aG9kIG9uIGZpZWxkCgkJCQkJCQlpLmF0dHIoJ3ZhbGlkLW1ldGhvZCcsaV9zY2hlbWFbJ3ZhbGlkYXRlLW9uJ10pOwoKCQkJCQkJCS8vIEV4dGVuZHMgbWVzc2FnZXMgdXNpbmcgZ2xvYmFsIGFuZCBmaWVsZCB2YWx1ZXMKCQkJCQkJCWlfc2NoZW1hLm1lc3NhZ2VzID0gaV9zY2hlbWEubWVzc2FnZXMgfHwge307CgkJCQkJCQlpX3NjaGVtYS5tZXNzYWdlcyA9IGV4dGVuZERlZXAoaV9zY2hlbWEubWVzc2FnZXMsZ2xvYmFsTWVzc2FnZXMpOwoKCQkJCQkJCS8vIExvb3BpbmcgdGhyb3VnaCBtZXNzYWdlcyBvYmplY3QKCQkJCQkJCWFuZ3VsYXIuZm9yRWFjaChpX3NjaGVtYS5tZXNzYWdlcyxmdW5jdGlvbih2YWxzLGtleSl7CgoJCQkJCQkJCS8vIEdyYWJiaW5nIGVycm9yIG1lc3NhZ2UgYW5kIHJlcGxhY2UgJWZpZWxkJSB3aXRoIGlucHV0IG5hbWUKCQkJCQkJCQl2YXIgZXJyb3JfbWVzc2FnZSA9IHZhbHMuZXJyb3IgPyB2YWxzLmVycm9yLnJlcGxhY2UoJyVmaWVsZCUnLGlucHV0X25hbWUpIDogJyc7CgoJCQkJCQkJCS8vIEdyYWJiaW5nIHN1Y2Nlc3MgbWVzc2FnZSBhbmQgcmVwbGFjZSAlZmllbGQlIHdpdGggaW5wdXQgbmFtZQoJCQkJCQkJCXZhciBzdWNjZXNzX21lc3NhZ2UgPSB2YWxzLnN1Y2Nlc3MgPyB2YWxzLnN1Y2Nlc3MucmVwbGFjZSgnJWZpZWxkJScsaW5wdXRfbmFtZSkgOiAnJzsKCgkJCQkJCQkJLy8gU2V0dGluZyBlcnJvciBtZXNzYWdlIGZvciB2YWxpZGF0aW9uIHR5cGUKCQkJCQkJCQlpLmF0dHIoa2V5KyctZXJyb3ItbWVzc2FnZScsZXJyb3JfbWVzc2FnZSk7CgoJCQkJCQkJCS8vIFNldHRpbmcgc3VjY2VzcyBtZXNzYWdlIGZvciB2YWxpZGF0aW9uIHR5cGUKCQkJCQkJCQlpLmF0dHIoa2V5Kyctc3VjY2Vzcy1tZXNzYWdlJyxzdWNjZXNzX21lc3NhZ2UpOwoKCQkJCQkJCX0pOwoJCQkJCQl9CgoJCQkJCX0pOwoJCQkJfQoJCQl9CgkJfQoJfV0pOwp9KS5jYWxsKHRoaXMpOwovKgogalF1ZXJ5IE1hc2tlZCBJbnB1dCBQbHVnaW4KIENvcHlyaWdodCAoYykgMjAwNyAtIDIwMTUgSm9zaCBCdXNoIChkaWdpdGFsYnVzaC5jb20pCiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgKGh0dHA6Ly9kaWdpdGFsYnVzaC5jb20vcHJvamVjdHMvbWFza2VkLWlucHV0LXBsdWdpbi8jbGljZW5zZSkKIFZlcnNpb246IDEuNC4xCiAqLwohZnVuY3Rpb24oYSl7ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoWyJqcXVlcnkiXSxhKTphKCJvYmplY3QiPT10eXBlb2YgZXhwb3J0cz9yZXF1aXJlKCJqcXVlcnkiKTpqUXVlcnkpfShmdW5jdGlvbihhKXt2YXIgYixjPW5hdmlnYXRvci51c2VyQWdlbnQsZD0vaXBob25lL2kudGVzdChjKSxlPS9jaHJvbWUvaS50ZXN0KGMpLGY9L2FuZHJvaWQvaS50ZXN0KGMpO2EubWFzaz17ZGVmaW5pdGlvbnM6ezk6IlswLTldIixhOiJbQS1aYS16XSIsIioiOiJbQS1aYS16MC05XSJ9LGF1dG9jbGVhcjohMCxkYXRhTmFtZToicmF3TWFza0ZuIixwbGFjZWhvbGRlcjoiXyJ9LGEuZm4uZXh0ZW5kKHtjYXJldDpmdW5jdGlvbihhLGIpe3ZhciBjO2lmKDAhPT10aGlzLmxlbmd0aCYmIXRoaXMuaXMoIjpoaWRkZW4iKSlyZXR1cm4ibnVtYmVyIj09dHlwZW9mIGE/KGI9Im51bWJlciI9PXR5cGVvZiBiP2I6YSx0aGlzLmVhY2goZnVuY3Rpb24oKXt0aGlzLnNldFNlbGVjdGlvblJhbmdlP3RoaXMuc2V0U2VsZWN0aW9uUmFuZ2UoYSxiKTp0aGlzLmNyZWF0ZVRleHRSYW5nZSYmKGM9dGhpcy5jcmVhdGVUZXh0UmFuZ2UoKSxjLmNvbGxhcHNlKCEwKSxjLm1vdmVFbmQoImNoYXJhY3RlciIsYiksYy5tb3ZlU3RhcnQoImNoYXJhY3RlciIsYSksYy5zZWxlY3QoKSl9KSk6KHRoaXNbMF0uc2V0U2VsZWN0aW9uUmFuZ2U/KGE9dGhpc1swXS5zZWxlY3Rpb25TdGFydCxiPXRoaXNbMF0uc2VsZWN0aW9uRW5kKTpkb2N1bWVudC5zZWxlY3Rpb24mJmRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSYmKGM9ZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCksYT0wLWMuZHVwbGljYXRlKCkubW92ZVN0YXJ0KCJjaGFyYWN0ZXIiLC0xZTUpLGI9YStjLnRleHQubGVuZ3RoKSx7YmVnaW46YSxlbmQ6Yn0pfSx1bm1hc2s6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmlnZ2VyKCJ1bm1hc2siKX0sbWFzazpmdW5jdGlvbihjLGcpe3ZhciBoLGksaixrLGwsbSxuLG87aWYoIWMmJnRoaXMubGVuZ3RoPjApe2g9YSh0aGlzWzBdKTt2YXIgcD1oLmRhdGEoYS5tYXNrLmRhdGFOYW1lKTtyZXR1cm4gcD9wKCk6dm9pZCAwfXJldHVybiBnPWEuZXh0ZW5kKHthdXRvY2xlYXI6YS5tYXNrLmF1dG9jbGVhcixwbGFjZWhvbGRlcjphLm1hc2sucGxhY2Vob2xkZXIsY29tcGxldGVkOm51bGx9LGcpLGk9YS5tYXNrLmRlZmluaXRpb25zLGo9W10saz1uPWMubGVuZ3RoLGw9bnVsbCxhLmVhY2goYy5zcGxpdCgiIiksZnVuY3Rpb24oYSxiKXsiPyI9PWI/KG4tLSxrPWEpOmlbYl0/KGoucHVzaChuZXcgUmVnRXhwKGlbYl0pKSxudWxsPT09bCYmKGw9ai5sZW5ndGgtMSksaz5hJiYobT1qLmxlbmd0aC0xKSk6ai5wdXNoKG51bGwpfSksdGhpcy50cmlnZ2VyKCJ1bm1hc2siKS5lYWNoKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gaCgpe2lmKGcuY29tcGxldGVkKXtmb3IodmFyIGE9bDttPj1hO2ErKylpZihqW2FdJiZDW2FdPT09cChhKSlyZXR1cm47Zy5jb21wbGV0ZWQuY2FsbChCKX19ZnVuY3Rpb24gcChhKXtyZXR1cm4gZy5wbGFjZWhvbGRlci5jaGFyQXQoYTxnLnBsYWNlaG9sZGVyLmxlbmd0aD9hOjApfWZ1bmN0aW9uIHEoYSl7Zm9yKDsrK2E8biYmIWpbYV07KTtyZXR1cm4gYX1mdW5jdGlvbiByKGEpe2Zvcig7LS1hPj0wJiYhalthXTspO3JldHVybiBhfWZ1bmN0aW9uIHMoYSxiKXt2YXIgYyxkO2lmKCEoMD5hKSl7Zm9yKGM9YSxkPXEoYik7bj5jO2MrKylpZihqW2NdKXtpZighKG4+ZCYmaltjXS50ZXN0KENbZF0pKSlicmVhaztDW2NdPUNbZF0sQ1tkXT1wKGQpLGQ9cShkKX16KCksQi5jYXJldChNYXRoLm1heChsLGEpKX19ZnVuY3Rpb24gdChhKXt2YXIgYixjLGQsZTtmb3IoYj1hLGM9cChhKTtuPmI7YisrKWlmKGpbYl0pe2lmKGQ9cShiKSxlPUNbYl0sQ1tiXT1jLCEobj5kJiZqW2RdLnRlc3QoZSkpKWJyZWFrO2M9ZX19ZnVuY3Rpb24gdSgpe3ZhciBhPUIudmFsKCksYj1CLmNhcmV0KCk7aWYobyYmby5sZW5ndGgmJm8ubGVuZ3RoPmEubGVuZ3RoKXtmb3IoQSghMCk7Yi5iZWdpbj4wJiYhaltiLmJlZ2luLTFdOyliLmJlZ2luLS07aWYoMD09PWIuYmVnaW4pZm9yKDtiLmJlZ2luPGwmJiFqW2IuYmVnaW5dOyliLmJlZ2luKys7Qi5jYXJldChiLmJlZ2luLGIuYmVnaW4pfWVsc2V7Zm9yKEEoITApO2IuYmVnaW48biYmIWpbYi5iZWdpbl07KWIuYmVnaW4rKztCLmNhcmV0KGIuYmVnaW4sYi5iZWdpbil9aCgpfWZ1bmN0aW9uIHYoKXtBKCksQi52YWwoKSE9RSYmQi5jaGFuZ2UoKX1mdW5jdGlvbiB3KGEpe2lmKCFCLnByb3AoInJlYWRvbmx5Iikpe3ZhciBiLGMsZSxmPWEud2hpY2h8fGEua2V5Q29kZTtvPUIudmFsKCksOD09PWZ8fDQ2PT09Znx8ZCYmMTI3PT09Zj8oYj1CLmNhcmV0KCksYz1iLmJlZ2luLGU9Yi5lbmQsZS1jPT09MCYmKGM9NDYhPT1mP3IoYyk6ZT1xKGMtMSksZT00Nj09PWY/cShlKTplKSx5KGMsZSkscyhjLGUtMSksYS5wcmV2ZW50RGVmYXVsdCgpKToxMz09PWY/di5jYWxsKHRoaXMsYSk6Mjc9PT1mJiYoQi52YWwoRSksQi5jYXJldCgwLEEoKSksYS5wcmV2ZW50RGVmYXVsdCgpKX19ZnVuY3Rpb24geChiKXtpZighQi5wcm9wKCJyZWFkb25seSIpKXt2YXIgYyxkLGUsZz1iLndoaWNofHxiLmtleUNvZGUsaT1CLmNhcmV0KCk7aWYoIShiLmN0cmxLZXl8fGIuYWx0S2V5fHxiLm1ldGFLZXl8fDMyPmcpJiZnJiYxMyE9PWcpe2lmKGkuZW5kLWkuYmVnaW4hPT0wJiYoeShpLmJlZ2luLGkuZW5kKSxzKGkuYmVnaW4saS5lbmQtMSkpLGM9cShpLmJlZ2luLTEpLG4+YyYmKGQ9U3RyaW5nLmZyb21DaGFyQ29kZShnKSxqW2NdLnRlc3QoZCkpKXtpZih0KGMpLENbY109ZCx6KCksZT1xKGMpLGYpe3ZhciBrPWZ1bmN0aW9uKCl7YS5wcm94eShhLmZuLmNhcmV0LEIsZSkoKX07c2V0VGltZW91dChrLDApfWVsc2UgQi5jYXJldChlKTtpLmJlZ2luPD1tJiZoKCl9Yi5wcmV2ZW50RGVmYXVsdCgpfX19ZnVuY3Rpb24geShhLGIpe3ZhciBjO2ZvcihjPWE7Yj5jJiZuPmM7YysrKWpbY10mJihDW2NdPXAoYykpfWZ1bmN0aW9uIHooKXtCLnZhbChDLmpvaW4oIiIpKX1mdW5jdGlvbiBBKGEpe3ZhciBiLGMsZCxlPUIudmFsKCksZj0tMTtmb3IoYj0wLGQ9MDtuPmI7YisrKWlmKGpbYl0pe2ZvcihDW2JdPXAoYik7ZCsrPGUubGVuZ3RoOylpZihjPWUuY2hhckF0KGQtMSksaltiXS50ZXN0KGMpKXtDW2JdPWMsZj1iO2JyZWFrfWlmKGQ+ZS5sZW5ndGgpe3koYisxLG4pO2JyZWFrfX1lbHNlIENbYl09PT1lLmNoYXJBdChkKSYmZCsrLGs+YiYmKGY9Yik7cmV0dXJuIGE/eigpOms+ZisxP2cuYXV0b2NsZWFyfHxDLmpvaW4oIiIpPT09RD8oQi52YWwoKSYmQi52YWwoIiIpLHkoMCxuKSk6eigpOih6KCksQi52YWwoQi52YWwoKS5zdWJzdHJpbmcoMCxmKzEpKSksaz9iOmx9dmFyIEI9YSh0aGlzKSxDPWEubWFwKGMuc3BsaXQoIiIpLGZ1bmN0aW9uKGEsYil7cmV0dXJuIj8iIT1hP2lbYV0/cChiKTphOnZvaWQgMH0pLEQ9Qy5qb2luKCIiKSxFPUIudmFsKCk7Qi5kYXRhKGEubWFzay5kYXRhTmFtZSxmdW5jdGlvbigpe3JldHVybiBhLm1hcChDLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGpbYl0mJmEhPXAoYik/YTpudWxsfSkuam9pbigiIil9KSxCLm9uZSgidW5tYXNrIixmdW5jdGlvbigpe0Iub2ZmKCIubWFzayIpLnJlbW92ZURhdGEoYS5tYXNrLmRhdGFOYW1lKX0pLm9uKCJmb2N1cy5tYXNrIixmdW5jdGlvbigpe2lmKCFCLnByb3AoInJlYWRvbmx5Iikpe2NsZWFyVGltZW91dChiKTt2YXIgYTtFPUIudmFsKCksYT1BKCksYj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Qi5nZXQoMCk9PT1kb2N1bWVudC5hY3RpdmVFbGVtZW50JiYoeigpLGE9PWMucmVwbGFjZSgiPyIsIiIpLmxlbmd0aD9CLmNhcmV0KDAsYSk6Qi5jYXJldChhKSl9LDEwKX19KS5vbigiYmx1ci5tYXNrIix2KS5vbigia2V5ZG93bi5tYXNrIix3KS5vbigia2V5cHJlc3MubWFzayIseCkub24oImlucHV0Lm1hc2sgcGFzdGUubWFzayIsZnVuY3Rpb24oKXtCLnByb3AoInJlYWRvbmx5Iil8fHNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgYT1BKCEwKTtCLmNhcmV0KGEpLGgoKX0sMCl9KSxlJiZmJiZCLm9mZigiaW5wdXQubWFzayIpLm9uKCJpbnB1dC5tYXNrIix1KSxBKCl9KX19KX0pOwovKioKICogQnhTbGlkZXIgdjQuMS4yIC0gRnVsbHkgbG9hZGVkLCByZXNwb25zaXZlIGNvbnRlbnQgc2xpZGVyCiAqIGh0dHA6Ly9ieHNsaWRlci5jb20KICoKICogQ29weXJpZ2h0IDIwMTQsIFN0ZXZlbiBXYW5kZXJza2kgLSBodHRwOi8vc3RldmVud2FuZGVyc2tpLmNvbSAtIGh0dHA6Ly9ieGNyZWF0aXZlLmNvbQogKiBXcml0dGVuIHdoaWxlIGRyaW5raW5nIEJlbGdpYW4gYWxlcyBhbmQgbGlzdGVuaW5nIHRvIGphenoKICoKICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIC0gaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVAogKi8KCjsoZnVuY3Rpb24oJCl7CgoJdmFyIHBsdWdpbiA9IHt9OwoKCXZhciBkZWZhdWx0cyA9IHsKCgkJLy8gR0VORVJBTAoJCW1vZGU6ICdob3Jpem9udGFsJywKCQlzbGlkZVNlbGVjdG9yOiAnJywKCQlpbmZpbml0ZUxvb3A6IHRydWUsCgkJaGlkZUNvbnRyb2xPbkVuZDogZmFsc2UsCgkJc3BlZWQ6IDUwMCwKCQllYXNpbmc6IG51bGwsCgkJc2xpZGVNYXJnaW46IDAsCgkJc3RhcnRTbGlkZTogMCwKCQlyYW5kb21TdGFydDogZmFsc2UsCgkJY2FwdGlvbnM6IGZhbHNlLAoJCXRpY2tlcjogZmFsc2UsCgkJdGlja2VySG92ZXI6IGZhbHNlLAoJCWFkYXB0aXZlSGVpZ2h0OiBmYWxzZSwKCQlhZGFwdGl2ZUhlaWdodFNwZWVkOiA1MDAsCgkJdmlkZW86IGZhbHNlLAoJCXVzZUNTUzogdHJ1ZSwKCQlwcmVsb2FkSW1hZ2VzOiAndmlzaWJsZScsCgkJcmVzcG9uc2l2ZTogdHJ1ZSwKCQlzbGlkZVpJbmRleDogNTAsCgkJd3JhcHBlckNsYXNzOiAnYngtd3JhcHBlcicsCgoJCS8vIFRPVUNICgkJdG91Y2hFbmFibGVkOiB0cnVlLAoJCXN3aXBlVGhyZXNob2xkOiA1MCwKCQlvbmVUb09uZVRvdWNoOiB0cnVlLAoJCXByZXZlbnREZWZhdWx0U3dpcGVYOiB0cnVlLAoJCXByZXZlbnREZWZhdWx0U3dpcGVZOiBmYWxzZSwKCgkJLy8gUEFHRVIKCQlwYWdlcjogdHJ1ZSwKCQlwYWdlclR5cGU6ICdmdWxsJywKCQlwYWdlclNob3J0U2VwYXJhdG9yOiAnIC8gJywKCQlwYWdlclNlbGVjdG9yOiBudWxsLAoJCWJ1aWxkUGFnZXI6IG51bGwsCgkJcGFnZXJDdXN0b206IG51bGwsCgoJCS8vIENPTlRST0xTCgkJY29udHJvbHM6IHRydWUsCgkJbmV4dFRleHQ6ICdOZXh0JywKCQlwcmV2VGV4dDogJ1ByZXYnLAoJCW5leHRTZWxlY3RvcjogbnVsbCwKCQlwcmV2U2VsZWN0b3I6IG51bGwsCgkJYXV0b0NvbnRyb2xzOiBmYWxzZSwKCQlzdGFydFRleHQ6ICdTdGFydCcsCgkJc3RvcFRleHQ6ICdTdG9wJywKCQlhdXRvQ29udHJvbHNDb21iaW5lOiBmYWxzZSwKCQlhdXRvQ29udHJvbHNTZWxlY3RvcjogbnVsbCwKCgkJLy8gQVVUTwoJCWF1dG86IGZhbHNlLAoJCXBhdXNlOiA0MDAwLAoJCWF1dG9TdGFydDogdHJ1ZSwKCQlhdXRvRGlyZWN0aW9uOiAnbmV4dCcsCgkJYXV0b0hvdmVyOiBmYWxzZSwKCQlhdXRvRGVsYXk6IDAsCgkJYXV0b1NsaWRlRm9yT25lUGFnZTogZmFsc2UsCgoJCS8vIENBUk9VU0VMCgkJbWluU2xpZGVzOiAxLAoJCW1heFNsaWRlczogMSwKCQltb3ZlU2xpZGVzOiAwLAoJCXNsaWRlV2lkdGg6IDAsCgoJCS8vIENBTExCQUNLUwoJCW9uU2xpZGVyTG9hZDogZnVuY3Rpb24oKSB7fSwKCQlvblNsaWRlQmVmb3JlOiBmdW5jdGlvbigpIHt9LAoJCW9uU2xpZGVBZnRlcjogZnVuY3Rpb24oKSB7fSwKCQlvblNsaWRlTmV4dDogZnVuY3Rpb24oKSB7fSwKCQlvblNsaWRlUHJldjogZnVuY3Rpb24oKSB7fSwKCQlvblNsaWRlclJlc2l6ZTogZnVuY3Rpb24oKSB7fQoJfQoKCSQuZm4uYnhTbGlkZXIgPSBmdW5jdGlvbihvcHRpb25zKXsKCgkJaWYodGhpcy5sZW5ndGggPT0gMCkgcmV0dXJuIHRoaXM7CgoJCS8vIHN1cHBvcnQgbXV0bHRpcGxlIGVsZW1lbnRzCgkJaWYodGhpcy5sZW5ndGggPiAxKXsKCQkJdGhpcy5lYWNoKGZ1bmN0aW9uKCl7JCh0aGlzKS5ieFNsaWRlcihvcHRpb25zKX0pOwoJCQlyZXR1cm4gdGhpczsKCQl9CgoJCS8vIGNyZWF0ZSBhIG5hbWVzcGFjZSB0byBiZSB1c2VkIHRocm91Z2hvdXQgdGhlIHBsdWdpbgoJCXZhciBzbGlkZXIgPSB7fTsKCQkvLyBzZXQgYSByZWZlcmVuY2UgdG8gb3VyIHNsaWRlciBlbGVtZW50CgkJdmFyIGVsID0gdGhpczsKCQlwbHVnaW4uZWwgPSB0aGlzOwoKCQkvKioKCQkgKiBNYWtlcyBzbGlkZXNob3cgcmVzcG9uc2l2ZQoJCSAqLwoJCS8vIGZpcnN0IGdldCB0aGUgb3JpZ2luYWwgd2luZG93IGRpbWVucyAodGhhbmtzIGFsb3QgSUUpCgkJdmFyIHdpbmRvd1dpZHRoID0gJCh3aW5kb3cpLndpZHRoKCk7CgkJdmFyIHdpbmRvd0hlaWdodCA9ICQod2luZG93KS5oZWlnaHQoKTsKCgoKCQkvKioKCQkgKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoJCSAqID0gUFJJVkFURSBGVU5DVElPTlMKCQkgKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoJCSAqLwoKCQkvKioKCQkgKiBJbml0aWFsaXplcyBuYW1lc3BhY2Ugc2V0dGluZ3MgdG8gYmUgdXNlZCB0aHJvdWdob3V0IHBsdWdpbgoJCSAqLwoJCXZhciBpbml0ID0gZnVuY3Rpb24oKXsKCQkJLy8gbWVyZ2UgdXNlci1zdXBwbGllZCBvcHRpb25zIHdpdGggdGhlIGRlZmF1bHRzCgkJCXNsaWRlci5zZXR0aW5ncyA9ICQuZXh0ZW5kKHt9LCBkZWZhdWx0cywgb3B0aW9ucyk7CgkJCS8vIHBhcnNlIHNsaWRlV2lkdGggc2V0dGluZwoJCQlzbGlkZXIuc2V0dGluZ3Muc2xpZGVXaWR0aCA9IHBhcnNlSW50KHNsaWRlci5zZXR0aW5ncy5zbGlkZVdpZHRoKTsKCQkJLy8gc3RvcmUgdGhlIG9yaWdpbmFsIGNoaWxkcmVuCgkJCXNsaWRlci5jaGlsZHJlbiA9IGVsLmNoaWxkcmVuKHNsaWRlci5zZXR0aW5ncy5zbGlkZVNlbGVjdG9yKTsKCQkJLy8gY2hlY2sgaWYgYWN0dWFsIG51bWJlciBvZiBzbGlkZXMgaXMgbGVzcyB0aGFuIG1pblNsaWRlcyAvIG1heFNsaWRlcwoJCQlpZihzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoIDwgc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlcykgc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlcyA9IHNsaWRlci5jaGlsZHJlbi5sZW5ndGg7CgkJCWlmKHNsaWRlci5jaGlsZHJlbi5sZW5ndGggPCBzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzKSBzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzID0gc2xpZGVyLmNoaWxkcmVuLmxlbmd0aDsKCQkJLy8gaWYgcmFuZG9tIHN0YXJ0LCBzZXQgdGhlIHN0YXJ0U2xpZGUgc2V0dGluZyB0byByYW5kb20gbnVtYmVyCgkJCWlmKHNsaWRlci5zZXR0aW5ncy5yYW5kb21TdGFydCkgc2xpZGVyLnNldHRpbmdzLnN0YXJ0U2xpZGUgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoKTsKCQkJLy8gc3RvcmUgYWN0aXZlIHNsaWRlIGluZm9ybWF0aW9uCgkJCXNsaWRlci5hY3RpdmUgPSB7IGluZGV4OiBzbGlkZXIuc2V0dGluZ3Muc3RhcnRTbGlkZSB9CgkJCS8vIHN0b3JlIGlmIHRoZSBzbGlkZXIgaXMgaW4gY2Fyb3VzZWwgbW9kZSAoZGlzcGxheWluZyAvIG1vdmluZyBtdWx0aXBsZSBzbGlkZXMpCgkJCXNsaWRlci5jYXJvdXNlbCA9IHNsaWRlci5zZXR0aW5ncy5taW5TbGlkZXMgPiAxIHx8IHNsaWRlci5zZXR0aW5ncy5tYXhTbGlkZXMgPiAxOwoJCQkvLyBpZiBjYXJvdXNlbCwgZm9yY2UgcHJlbG9hZEltYWdlcyA9ICdhbGwnCgkJCWlmKHNsaWRlci5jYXJvdXNlbCkgc2xpZGVyLnNldHRpbmdzLnByZWxvYWRJbWFnZXMgPSAnYWxsJzsKCQkJLy8gY2FsY3VsYXRlIHRoZSBtaW4gLyBtYXggd2lkdGggdGhyZXNob2xkcyBiYXNlZCBvbiBtaW4gLyBtYXggbnVtYmVyIG9mIHNsaWRlcwoJCQkvLyB1c2VkIHRvIHNldHVwIGFuZCB1cGRhdGUgY2Fyb3VzZWwgc2xpZGVzIGRpbWVuc2lvbnMKCQkJc2xpZGVyLm1pblRocmVzaG9sZCA9IChzbGlkZXIuc2V0dGluZ3MubWluU2xpZGVzICogc2xpZGVyLnNldHRpbmdzLnNsaWRlV2lkdGgpICsgKChzbGlkZXIuc2V0dGluZ3MubWluU2xpZGVzIC0gMSkgKiBzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW4pOwoJCQlzbGlkZXIubWF4VGhyZXNob2xkID0gKHNsaWRlci5zZXR0aW5ncy5tYXhTbGlkZXMgKiBzbGlkZXIuc2V0dGluZ3Muc2xpZGVXaWR0aCkgKyAoKHNsaWRlci5zZXR0aW5ncy5tYXhTbGlkZXMgLSAxKSAqIHNsaWRlci5zZXR0aW5ncy5zbGlkZU1hcmdpbik7CgkJCS8vIHN0b3JlIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBzbGlkZXIgKGlmIGN1cnJlbnRseSBhbmltYXRpbmcsIHdvcmtpbmcgaXMgdHJ1ZSkKCQkJc2xpZGVyLndvcmtpbmcgPSBmYWxzZTsKCQkJLy8gaW5pdGlhbGl6ZSB0aGUgY29udHJvbHMgb2JqZWN0CgkJCXNsaWRlci5jb250cm9scyA9IHt9OwoJCQkvLyBpbml0aWFsaXplIGFuIGF1dG8gaW50ZXJ2YWwKCQkJc2xpZGVyLmludGVydmFsID0gbnVsbDsKCQkJLy8gZGV0ZXJtaW5lIHdoaWNoIHByb3BlcnR5IHRvIHVzZSBmb3IgdHJhbnNpdGlvbnMKCQkJc2xpZGVyLmFuaW1Qcm9wID0gc2xpZGVyLnNldHRpbmdzLm1vZGUgPT0gJ3ZlcnRpY2FsJyA/ICd0b3AnIDogJ2xlZnQnOwoJCQkvLyBkZXRlcm1pbmUgaWYgaGFyZHdhcmUgYWNjZWxlcmF0aW9uIGNhbiBiZSB1c2VkCgkJCXNsaWRlci51c2luZ0NTUyA9IHNsaWRlci5zZXR0aW5ncy51c2VDU1MgJiYgc2xpZGVyLnNldHRpbmdzLm1vZGUgIT0gJ2ZhZGUnICYmIChmdW5jdGlvbigpewoJCQkJLy8gY3JlYXRlIG91ciB0ZXN0IGRpdiBlbGVtZW50CgkJCQl2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CgkJCQkvLyBjc3MgdHJhbnNpdGlvbiBwcm9wZXJ0aWVzCgkJCQl2YXIgcHJvcHMgPSBbJ1dlYmtpdFBlcnNwZWN0aXZlJywgJ01velBlcnNwZWN0aXZlJywgJ09QZXJzcGVjdGl2ZScsICdtc1BlcnNwZWN0aXZlJ107CgkJCQkvLyB0ZXN0IGZvciBlYWNoIHByb3BlcnR5CgkJCQlmb3IodmFyIGkgaW4gcHJvcHMpewoJCQkJCWlmKGRpdi5zdHlsZVtwcm9wc1tpXV0gIT09IHVuZGVmaW5lZCl7CgkJCQkJCXNsaWRlci5jc3NQcmVmaXggPSBwcm9wc1tpXS5yZXBsYWNlKCdQZXJzcGVjdGl2ZScsICcnKS50b0xvd2VyQ2FzZSgpOwoJCQkJCQlzbGlkZXIuYW5pbVByb3AgPSAnLScgKyBzbGlkZXIuY3NzUHJlZml4ICsgJy10cmFuc2Zvcm0nOwoJCQkJCQlyZXR1cm4gdHJ1ZTsKCQkJCQl9CgkJCQl9CgkJCQlyZXR1cm4gZmFsc2U7CgkJCX0oKSk7CgkJCS8vIGlmIHZlcnRpY2FsIG1vZGUgYWx3YXlzIG1ha2UgbWF4U2xpZGVzIGFuZCBtaW5TbGlkZXMgZXF1YWwKCQkJaWYoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT0gJ3ZlcnRpY2FsJykgc2xpZGVyLnNldHRpbmdzLm1heFNsaWRlcyA9IHNsaWRlci5zZXR0aW5ncy5taW5TbGlkZXM7CgkJCS8vIHNhdmUgb3JpZ2luYWwgc3R5bGUgZGF0YQoJCQllbC5kYXRhKCJvcmlnU3R5bGUiLCBlbC5hdHRyKCJzdHlsZSIpKTsKCQkJZWwuY2hpbGRyZW4oc2xpZGVyLnNldHRpbmdzLnNsaWRlU2VsZWN0b3IpLmVhY2goZnVuY3Rpb24oKSB7CgkJCSAgJCh0aGlzKS5kYXRhKCJvcmlnU3R5bGUiLCAkKHRoaXMpLmF0dHIoInN0eWxlIikpOwoJCQl9KTsKCQkJLy8gcGVyZm9ybSBhbGwgRE9NIC8gQ1NTIG1vZGlmaWNhdGlvbnMKCQkJc2V0dXAoKTsKCQl9CgoJCS8qKgoJCSAqIFBlcmZvcm1zIGFsbCBET00gYW5kIENTUyBtb2RpZmljYXRpb25zCgkJICovCgkJdmFyIHNldHVwID0gZnVuY3Rpb24oKXsKCQkJLy8gd3JhcCBlbCBpbiBhIHdyYXBwZXIKCQkJZWwud3JhcCgnPGRpdiBjbGFzcz0iJyArIHNsaWRlci5zZXR0aW5ncy53cmFwcGVyQ2xhc3MgKyAnIj48ZGl2IGNsYXNzPSJieC12aWV3cG9ydCI+PC9kaXY+PC9kaXY+Jyk7CgkJCS8vIHN0b3JlIGEgbmFtc3BhY2UgcmVmZXJlbmNlIHRvIC5ieC12aWV3cG9ydAoJCQlzbGlkZXIudmlld3BvcnQgPSBlbC5wYXJlbnQoKTsKCQkJLy8gYWRkIGEgbG9hZGluZyBkaXYgdG8gZGlzcGxheSB3aGlsZSBpbWFnZXMgYXJlIGxvYWRpbmcKCQkJc2xpZGVyLmxvYWRlciA9ICQoJzxkaXYgY2xhc3M9ImJ4LWxvYWRpbmciIC8+Jyk7CgkJCXNsaWRlci52aWV3cG9ydC5wcmVwZW5kKHNsaWRlci5sb2FkZXIpOwoJCQkvLyBzZXQgZWwgdG8gYSBtYXNzaXZlIHdpZHRoLCB0byBob2xkIGFueSBuZWVkZWQgc2xpZGVzCgkJCS8vIGFsc28gc3RyaXAgYW55IG1hcmdpbiBhbmQgcGFkZGluZyBmcm9tIGVsCgkJCWVsLmNzcyh7CgkJCQl3aWR0aDogc2xpZGVyLnNldHRpbmdzLm1vZGUgPT0gJ2hvcml6b250YWwnID8gKHNsaWRlci5jaGlsZHJlbi5sZW5ndGggKiAxMDAgKyAyMTUpICsgJyUnIDogJ2F1dG8nLAoJCQkJcG9zaXRpb246ICdyZWxhdGl2ZScKCQkJfSk7CgkJCS8vIGlmIHVzaW5nIENTUywgYWRkIHRoZSBlYXNpbmcgcHJvcGVydHkKCQkJaWYoc2xpZGVyLnVzaW5nQ1NTICYmIHNsaWRlci5zZXR0aW5ncy5lYXNpbmcpewoJCQkJZWwuY3NzKCctJyArIHNsaWRlci5jc3NQcmVmaXggKyAnLXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uJywgc2xpZGVyLnNldHRpbmdzLmVhc2luZyk7CgkJCS8vIGlmIG5vdCB1c2luZyBDU1MgYW5kIG5vIGVhc2luZyB2YWx1ZSB3YXMgc3VwcGxpZWQsIHVzZSB0aGUgZGVmYXVsdCBKUyBhbmltYXRpb24gZWFzaW5nIChzd2luZykKCQkJfWVsc2UgaWYoIXNsaWRlci5zZXR0aW5ncy5lYXNpbmcpewoJCQkJc2xpZGVyLnNldHRpbmdzLmVhc2luZyA9ICdzd2luZyc7CgkJCX0KCQkJdmFyIHNsaWRlc1Nob3dpbmcgPSBnZXROdW1iZXJTbGlkZXNTaG93aW5nKCk7CgkJCS8vIG1ha2UgbW9kaWZpY2F0aW9ucyB0byB0aGUgdmlld3BvcnQgKC5ieC12aWV3cG9ydCkKCQkJc2xpZGVyLnZpZXdwb3J0LmNzcyh7CgkJCQl3aWR0aDogJzEwMCUnLAoJCQkJb3ZlcmZsb3c6ICdoaWRkZW4nLAoJCQkJcG9zaXRpb246ICdyZWxhdGl2ZScKCQkJfSk7CgkJCXNsaWRlci52aWV3cG9ydC5wYXJlbnQoKS5jc3MoewoJCQkJbWF4V2lkdGg6IGdldFZpZXdwb3J0TWF4V2lkdGgoKQoJCQl9KTsKCQkJLy8gbWFrZSBtb2RpZmljYXRpb24gdG8gdGhlIHdyYXBwZXIgKC5ieC13cmFwcGVyKQoJCQlpZighc2xpZGVyLnNldHRpbmdzLnBhZ2VyKSB7CgkJCQlzbGlkZXIudmlld3BvcnQucGFyZW50KCkuY3NzKHsKCQkJCW1hcmdpbjogJzAgYXV0byAwcHgnCgkJCQl9KTsKCQkJfQoJCQkvLyBhcHBseSBjc3MgdG8gYWxsIHNsaWRlciBjaGlsZHJlbgoJCQlzbGlkZXIuY2hpbGRyZW4uY3NzKHsKCQkJCSdmbG9hdCc6IHNsaWRlci5zZXR0aW5ncy5tb2RlID09ICdob3Jpem9udGFsJyA/ICdsZWZ0JyA6ICdub25lJywKCQkJCWxpc3RTdHlsZTogJ25vbmUnLAoJCQkJcG9zaXRpb246ICdyZWxhdGl2ZScKCQkJfSk7CgkJCS8vIGFwcGx5IHRoZSBjYWxjdWxhdGVkIHdpZHRoIGFmdGVyIHRoZSBmbG9hdCBpcyBhcHBsaWVkIHRvIHByZXZlbnQgc2Nyb2xsYmFyIGludGVyZmVyZW5jZQoJCQlzbGlkZXIuY2hpbGRyZW4uY3NzKCd3aWR0aCcsIGdldFNsaWRlV2lkdGgoKSk7CgkJCS8vIGlmIHNsaWRlTWFyZ2luIGlzIHN1cHBsaWVkLCBhZGQgdGhlIGNzcwoJCQlpZihzbGlkZXIuc2V0dGluZ3MubW9kZSA9PSAnaG9yaXpvbnRhbCcgJiYgc2xpZGVyLnNldHRpbmdzLnNsaWRlTWFyZ2luID4gMCkgc2xpZGVyLmNoaWxkcmVuLmNzcygnbWFyZ2luUmlnaHQnLCBzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW4pOwoJCQlpZihzbGlkZXIuc2V0dGluZ3MubW9kZSA9PSAndmVydGljYWwnICYmIHNsaWRlci5zZXR0aW5ncy5zbGlkZU1hcmdpbiA+IDApIHNsaWRlci5jaGlsZHJlbi5jc3MoJ21hcmdpbkJvdHRvbScsIHNsaWRlci5zZXR0aW5ncy5zbGlkZU1hcmdpbik7CgkJCS8vIGlmICJmYWRlIiBtb2RlLCBhZGQgcG9zaXRpb25pbmcgYW5kIHotaW5kZXggQ1NTCgkJCWlmKHNsaWRlci5zZXR0aW5ncy5tb2RlID09ICdmYWRlJyl7CgkJCQlzbGlkZXIuY2hpbGRyZW4uY3NzKHsKCQkJCQlwb3NpdGlvbjogJ2Fic29sdXRlJywKCQkJCQl6SW5kZXg6IDAsCgkJCQkJZGlzcGxheTogJ25vbmUnCgkJCQl9KTsKCQkJCS8vIHByZXBhcmUgdGhlIHotaW5kZXggb24gdGhlIHNob3dpbmcgZWxlbWVudAoJCQkJc2xpZGVyLmNoaWxkcmVuLmVxKHNsaWRlci5zZXR0aW5ncy5zdGFydFNsaWRlKS5jc3Moe3pJbmRleDogc2xpZGVyLnNldHRpbmdzLnNsaWRlWkluZGV4LCBkaXNwbGF5OiAnYmxvY2snfSk7CgkJCX0KCQkJLy8gY3JlYXRlIGFuIGVsZW1lbnQgdG8gY29udGFpbiBhbGwgc2xpZGVyIGNvbnRyb2xzIChwYWdlciwgc3RhcnQgLyBzdG9wLCBldGMpCgkJCXNsaWRlci5jb250cm9scy5lbCA9ICQoJzxkaXYgY2xhc3M9ImJ4LWNvbnRyb2xzIiAvPicpOwoJCQkvLyBpZiBjYXB0aW9ucyBhcmUgcmVxdWVzdGVkLCBhZGQgdGhlbQoJCQlpZihzbGlkZXIuc2V0dGluZ3MuY2FwdGlvbnMpIGFwcGVuZENhcHRpb25zKCk7CgkJCS8vIGNoZWNrIGlmIHN0YXJ0U2xpZGUgaXMgbGFzdCBzbGlkZQoJCQlzbGlkZXIuYWN0aXZlLmxhc3QgPSBzbGlkZXIuc2V0dGluZ3Muc3RhcnRTbGlkZSA9PSBnZXRQYWdlclF0eSgpIC0gMTsKCQkJLy8gaWYgdmlkZW8gaXMgdHJ1ZSwgc2V0IHVwIHRoZSBmaXRWaWRzIHBsdWdpbgoJCQlpZihzbGlkZXIuc2V0dGluZ3MudmlkZW8pIGVsLmZpdFZpZHMoKTsKCQkJLy8gc2V0IHRoZSBkZWZhdWx0IHByZWxvYWQgc2VsZWN0b3IgKHZpc2libGUpCgkJCXZhciBwcmVsb2FkU2VsZWN0b3IgPSBzbGlkZXIuY2hpbGRyZW4uZXEoc2xpZGVyLnNldHRpbmdzLnN0YXJ0U2xpZGUpOwoJCQlpZiAoc2xpZGVyLnNldHRpbmdzLnByZWxvYWRJbWFnZXMgPT0gImFsbCIpIHByZWxvYWRTZWxlY3RvciA9IHNsaWRlci5jaGlsZHJlbjsKCQkJLy8gb25seSBjaGVjayBmb3IgY29udHJvbCBhZGRpdGlvbiBpZiBub3QgaW4gInRpY2tlciIgbW9kZQoJCQlpZighc2xpZGVyLnNldHRpbmdzLnRpY2tlcil7CgkJCQkvLyBpZiBwYWdlciBpcyByZXF1ZXN0ZWQsIGFkZCBpdAoJCQkJaWYoc2xpZGVyLnNldHRpbmdzLnBhZ2VyKSBhcHBlbmRQYWdlcigpOwoJCQkJLy8gaWYgY29udHJvbHMgYXJlIHJlcXVlc3RlZCwgYWRkIHRoZW0KCQkJCWlmKHNsaWRlci5zZXR0aW5ncy5jb250cm9scykgYXBwZW5kQ29udHJvbHMoKTsKCQkJCS8vIGlmIGF1dG8gaXMgdHJ1ZSwgYW5kIGF1dG8gY29udHJvbHMgYXJlIHJlcXVlc3RlZCwgYWRkIHRoZW0KCQkJCWlmKHNsaWRlci5zZXR0aW5ncy5hdXRvICYmIHNsaWRlci5zZXR0aW5ncy5hdXRvQ29udHJvbHMpIGFwcGVuZENvbnRyb2xzQXV0bygpOwoJCQkJLy8gaWYgYW55IGNvbnRyb2wgb3B0aW9uIGlzIHJlcXVlc3RlZCwgYWRkIHRoZSBjb250cm9scyB3cmFwcGVyCgkJCQlpZihzbGlkZXIuc2V0dGluZ3MuY29udHJvbHMgfHwgc2xpZGVyLnNldHRpbmdzLmF1dG9Db250cm9scyB8fCBzbGlkZXIuc2V0dGluZ3MucGFnZXIpIHNsaWRlci52aWV3cG9ydC5hZnRlcihzbGlkZXIuY29udHJvbHMuZWwpOwoJCQkvLyBpZiB0aWNrZXIgbW9kZSwgZG8gbm90IGFsbG93IGEgcGFnZXIKCQkJfWVsc2V7CgkJCQlzbGlkZXIuc2V0dGluZ3MucGFnZXIgPSBmYWxzZTsKCQkJfQoJCQkvLyBwcmVsb2FkIGFsbCBpbWFnZXMsIHRoZW4gcGVyZm9ybSBmaW5hbCBET00gLyBDU1MgbW9kaWZpY2F0aW9ucyB0aGF0IGRlcGVuZCBvbiBpbWFnZXMgYmVpbmcgbG9hZGVkCgkJCWxvYWRFbGVtZW50cyhwcmVsb2FkU2VsZWN0b3IsIHN0YXJ0KTsKCQl9CgoJCXZhciBsb2FkRWxlbWVudHMgPSBmdW5jdGlvbihzZWxlY3RvciwgY2FsbGJhY2spewoJCQl2YXIgdG90YWwgPSBzZWxlY3Rvci5maW5kKCdpbWcsIGlmcmFtZScpLmxlbmd0aDsKCQkJaWYgKHRvdGFsID09IDApewoJCQkJY2FsbGJhY2soKTsKCQkJCXJldHVybjsKCQkJfQoJCQl2YXIgY291bnQgPSAwOwoJCQlzZWxlY3Rvci5maW5kKCdpbWcsIGlmcmFtZScpLmVhY2goZnVuY3Rpb24oKXsKCQkJCSQodGhpcykub25lKCdsb2FkJywgZnVuY3Rpb24oKSB7CgkJCQkgIGlmKCsrY291bnQgPT0gdG90YWwpIGNhbGxiYWNrKCk7CgkJCQl9KS5lYWNoKGZ1bmN0aW9uKCkgewoJCQkJICBpZih0aGlzLmNvbXBsZXRlKSAkKHRoaXMpLmxvYWQoKTsKCQkJCX0pOwoJCQl9KTsKCQl9CgoJCS8qKgoJCSAqIFN0YXJ0IHRoZSBzbGlkZXIKCQkgKi8KCQl2YXIgc3RhcnQgPSBmdW5jdGlvbigpewoJCQkvLyBpZiBpbmZpbml0ZSBsb29wLCBwcmVwYXJlIGFkZGl0aW9uYWwgc2xpZGVzCgkJCWlmKHNsaWRlci5zZXR0aW5ncy5pbmZpbml0ZUxvb3AgJiYgc2xpZGVyLnNldHRpbmdzLm1vZGUgIT0gJ2ZhZGUnICYmICFzbGlkZXIuc2V0dGluZ3MudGlja2VyKXsKCQkJCXZhciBzbGljZSA9IHNsaWRlci5zZXR0aW5ncy5tb2RlID09ICd2ZXJ0aWNhbCcgPyBzbGlkZXIuc2V0dGluZ3MubWluU2xpZGVzIDogc2xpZGVyLnNldHRpbmdzLm1heFNsaWRlczsKCQkJCXZhciBzbGljZUFwcGVuZCA9IHNsaWRlci5jaGlsZHJlbi5zbGljZSgwLCBzbGljZSkuY2xvbmUoKS5hZGRDbGFzcygnYngtY2xvbmUnKTsKCQkJCXZhciBzbGljZVByZXBlbmQgPSBzbGlkZXIuY2hpbGRyZW4uc2xpY2UoLXNsaWNlKS5jbG9uZSgpLmFkZENsYXNzKCdieC1jbG9uZScpOwoJCQkJZWwuYXBwZW5kKHNsaWNlQXBwZW5kKS5wcmVwZW5kKHNsaWNlUHJlcGVuZCk7CgkJCX0KCQkJLy8gcmVtb3ZlIHRoZSBsb2FkaW5nIERPTSBlbGVtZW50CgkJCXNsaWRlci5sb2FkZXIucmVtb3ZlKCk7CgkJCS8vIHNldCB0aGUgbGVmdCAvIHRvcCBwb3NpdGlvbiBvZiAiZWwiCgkJCXNldFNsaWRlUG9zaXRpb24oKTsKCQkJLy8gaWYgInZlcnRpY2FsIiBtb2RlLCBhbHdheXMgdXNlIGFkYXB0aXZlSGVpZ2h0IHRvIHByZXZlbnQgb2RkIGJlaGF2aW9yCgkJCWlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSA9PSAndmVydGljYWwnKSBzbGlkZXIuc2V0dGluZ3MuYWRhcHRpdmVIZWlnaHQgPSB0cnVlOwoJCQkvLyBzZXQgdGhlIHZpZXdwb3J0IGhlaWdodAoJCQlzbGlkZXIudmlld3BvcnQuaGVpZ2h0KGdldFZpZXdwb3J0SGVpZ2h0KCkpOwoJCQkvLyBtYWtlIHN1cmUgZXZlcnl0aGluZyBpcyBwb3NpdGlvbmVkIGp1c3QgcmlnaHQgKHNhbWUgYXMgYSB3aW5kb3cgcmVzaXplKQoJCQllbC5yZWRyYXdTbGlkZXIoKTsKCQkJLy8gb25TbGlkZXJMb2FkIGNhbGxiYWNrCgkJCXNsaWRlci5zZXR0aW5ncy5vblNsaWRlckxvYWQoc2xpZGVyLmFjdGl2ZS5pbmRleCk7CgkJCS8vIHNsaWRlciBoYXMgYmVlbiBmdWxseSBpbml0aWFsaXplZAoJCQlzbGlkZXIuaW5pdGlhbGl6ZWQgPSB0cnVlOwoJCQkvLyBiaW5kIHRoZSByZXNpemUgY2FsbCB0byB0aGUgd2luZG93CgkJCWlmIChzbGlkZXIuc2V0dGluZ3MucmVzcG9uc2l2ZSkgJCh3aW5kb3cpLmJpbmQoJ3Jlc2l6ZScsIHJlc2l6ZVdpbmRvdyk7CgkJCS8vIGlmIGF1dG8gaXMgdHJ1ZSBhbmQgaGFzIG1vcmUgdGhhbiAxIHBhZ2UsIHN0YXJ0IHRoZSBzaG93CgkJCWlmIChzbGlkZXIuc2V0dGluZ3MuYXV0byAmJiBzbGlkZXIuc2V0dGluZ3MuYXV0b1N0YXJ0ICYmIChnZXRQYWdlclF0eSgpID4gMSB8fCBzbGlkZXIuc2V0dGluZ3MuYXV0b1NsaWRlRm9yT25lUGFnZSkpIGluaXRBdXRvKCk7CgkJCS8vIGlmIHRpY2tlciBpcyB0cnVlLCBzdGFydCB0aGUgdGlja2VyCgkJCWlmIChzbGlkZXIuc2V0dGluZ3MudGlja2VyKSBpbml0VGlja2VyKCk7CgkJCS8vIGlmIHBhZ2VyIGlzIHJlcXVlc3RlZCwgbWFrZSB0aGUgYXBwcm9wcmlhdGUgcGFnZXIgbGluayBhY3RpdmUKCQkJaWYgKHNsaWRlci5zZXR0aW5ncy5wYWdlcikgdXBkYXRlUGFnZXJBY3RpdmUoc2xpZGVyLnNldHRpbmdzLnN0YXJ0U2xpZGUpOwoJCQkvLyBjaGVjayBmb3IgYW55IHVwZGF0ZXMgdG8gdGhlIGNvbnRyb2xzIChsaWtlIGhpZGVDb250cm9sT25FbmQgdXBkYXRlcykKCQkJaWYgKHNsaWRlci5zZXR0aW5ncy5jb250cm9scykgdXBkYXRlRGlyZWN0aW9uQ29udHJvbHMoKTsKCQkJLy8gaWYgdG91Y2hFbmFibGVkIGlzIHRydWUsIHNldHVwIHRoZSB0b3VjaCBldmVudHMKCQkJaWYgKHNsaWRlci5zZXR0aW5ncy50b3VjaEVuYWJsZWQgJiYgIXNsaWRlci5zZXR0aW5ncy50aWNrZXIpIGluaXRUb3VjaCgpOwoJCX0KCgkJLyoqCgkJICogUmV0dXJucyB0aGUgY2FsY3VsYXRlZCBoZWlnaHQgb2YgdGhlIHZpZXdwb3J0LCB1c2VkIHRvIGRldGVybWluZSBlaXRoZXIgYWRhcHRpdmVIZWlnaHQgb3IgdGhlIG1heEhlaWdodCB2YWx1ZQoJCSAqLwoJCXZhciBnZXRWaWV3cG9ydEhlaWdodCA9IGZ1bmN0aW9uKCl7CgkJCXZhciBoZWlnaHQgPSAwOwoJCQkvLyBmaXJzdCBkZXRlcm1pbmUgd2hpY2ggY2hpbGRyZW4gKHNsaWRlcykgc2hvdWxkIGJlIHVzZWQgaW4gb3VyIGhlaWdodCBjYWxjdWxhdGlvbgoJCQl2YXIgY2hpbGRyZW4gPSAkKCk7CgkJCS8vIGlmIG1vZGUgaXMgbm90ICJ2ZXJ0aWNhbCIgYW5kIGFkYXB0aXZlSGVpZ2h0IGlzIGZhbHNlLCBpbmNsdWRlIGFsbCBjaGlsZHJlbgoJCQlpZihzbGlkZXIuc2V0dGluZ3MubW9kZSAhPSAndmVydGljYWwnICYmICFzbGlkZXIuc2V0dGluZ3MuYWRhcHRpdmVIZWlnaHQpewoJCQkJY2hpbGRyZW4gPSBzbGlkZXIuY2hpbGRyZW47CgkJCX1lbHNlewoJCQkJLy8gaWYgbm90IGNhcm91c2VsLCByZXR1cm4gdGhlIHNpbmdsZSBhY3RpdmUgY2hpbGQKCQkJCWlmKCFzbGlkZXIuY2Fyb3VzZWwpewoJCQkJCWNoaWxkcmVuID0gc2xpZGVyLmNoaWxkcmVuLmVxKHNsaWRlci5hY3RpdmUuaW5kZXgpOwoJCQkJLy8gaWYgY2Fyb3VzZWwsIHJldHVybiBhIHNsaWNlIG9mIGNoaWxkcmVuCgkJCQl9ZWxzZXsKCQkJCQkvLyBnZXQgdGhlIGluZGl2aWR1YWwgc2xpZGUgaW5kZXgKCQkJCQl2YXIgY3VycmVudEluZGV4ID0gc2xpZGVyLnNldHRpbmdzLm1vdmVTbGlkZXMgPT0gMSA/IHNsaWRlci5hY3RpdmUuaW5kZXggOiBzbGlkZXIuYWN0aXZlLmluZGV4ICogZ2V0TW92ZUJ5KCk7CgkJCQkJLy8gYWRkIHRoZSBjdXJyZW50IHNsaWRlIHRvIHRoZSBjaGlsZHJlbgoJCQkJCWNoaWxkcmVuID0gc2xpZGVyLmNoaWxkcmVuLmVxKGN1cnJlbnRJbmRleCk7CgkJCQkJLy8gY3ljbGUgdGhyb3VnaCB0aGUgcmVtYWluaW5nICJzaG93aW5nIiBzbGlkZXMKCQkJCQlmb3IgKGkgPSAxOyBpIDw9IHNsaWRlci5zZXR0aW5ncy5tYXhTbGlkZXMgLSAxOyBpKyspewoJCQkJCQkvLyBpZiBsb29wZWQgYmFjayB0byB0aGUgc3RhcnQKCQkJCQkJaWYoY3VycmVudEluZGV4ICsgaSA+PSBzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoKXsKCQkJCQkJCWNoaWxkcmVuID0gY2hpbGRyZW4uYWRkKHNsaWRlci5jaGlsZHJlbi5lcShpIC0gMSkpOwoJCQkJCQl9ZWxzZXsKCQkJCQkJCWNoaWxkcmVuID0gY2hpbGRyZW4uYWRkKHNsaWRlci5jaGlsZHJlbi5lcShjdXJyZW50SW5kZXggKyBpKSk7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0KCQkJLy8gaWYgInZlcnRpY2FsIiBtb2RlLCBjYWxjdWxhdGUgdGhlIHN1bSBvZiB0aGUgaGVpZ2h0cyBvZiB0aGUgY2hpbGRyZW4KCQkJaWYoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT0gJ3ZlcnRpY2FsJyl7CgkJCQljaGlsZHJlbi5lYWNoKGZ1bmN0aW9uKGluZGV4KSB7CgkJCQkgIGhlaWdodCArPSAkKHRoaXMpLm91dGVySGVpZ2h0KCk7CgkJCQl9KTsKCQkJCS8vIGFkZCB1c2VyLXN1cHBsaWVkIG1hcmdpbnMKCQkJCWlmKHNsaWRlci5zZXR0aW5ncy5zbGlkZU1hcmdpbiA+IDApewoJCQkJCWhlaWdodCArPSBzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW4gKiAoc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlcyAtIDEpOwoJCQkJfQoJCQkvLyBpZiBub3QgInZlcnRpY2FsIiBtb2RlLCBjYWxjdWxhdGUgdGhlIG1heCBoZWlnaHQgb2YgdGhlIGNoaWxkcmVuCgkJCX1lbHNlewoJCQkJaGVpZ2h0ID0gTWF0aC5tYXguYXBwbHkoTWF0aCwgY2hpbGRyZW4ubWFwKGZ1bmN0aW9uKCl7CgkJCQkJcmV0dXJuICQodGhpcykub3V0ZXJIZWlnaHQoZmFsc2UpOwoJCQkJfSkuZ2V0KCkpOwoJCQl9CgoJCQlpZihzbGlkZXIudmlld3BvcnQuY3NzKCdib3gtc2l6aW5nJykgPT0gJ2JvcmRlci1ib3gnKXsKCQkJCWhlaWdodCArPQlwYXJzZUZsb2F0KHNsaWRlci52aWV3cG9ydC5jc3MoJ3BhZGRpbmctdG9wJykpICsgcGFyc2VGbG9hdChzbGlkZXIudmlld3BvcnQuY3NzKCdwYWRkaW5nLWJvdHRvbScpKSArCgkJCQkJCQlwYXJzZUZsb2F0KHNsaWRlci52aWV3cG9ydC5jc3MoJ2JvcmRlci10b3Atd2lkdGgnKSkgKyBwYXJzZUZsb2F0KHNsaWRlci52aWV3cG9ydC5jc3MoJ2JvcmRlci1ib3R0b20td2lkdGgnKSk7CgkJCX1lbHNlIGlmKHNsaWRlci52aWV3cG9ydC5jc3MoJ2JveC1zaXppbmcnKSA9PSAncGFkZGluZy1ib3gnKXsKCQkJCWhlaWdodCArPQlwYXJzZUZsb2F0KHNsaWRlci52aWV3cG9ydC5jc3MoJ3BhZGRpbmctdG9wJykpICsgcGFyc2VGbG9hdChzbGlkZXIudmlld3BvcnQuY3NzKCdwYWRkaW5nLWJvdHRvbScpKTsKCQkJfQoKCQkJcmV0dXJuIGhlaWdodDsKCQl9CgoJCS8qKgoJCSAqIFJldHVybnMgdGhlIGNhbGN1bGF0ZWQgd2lkdGggdG8gYmUgdXNlZCBmb3IgdGhlIG91dGVyIHdyYXBwZXIgLyB2aWV3cG9ydAoJCSAqLwoJCXZhciBnZXRWaWV3cG9ydE1heFdpZHRoID0gZnVuY3Rpb24oKXsKCQkJdmFyIHdpZHRoID0gJzEwMCUnOwoJCQlpZihzbGlkZXIuc2V0dGluZ3Muc2xpZGVXaWR0aCA+IDApewoJCQkJaWYoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT0gJ2hvcml6b250YWwnKXsKCQkJCQl3aWR0aCA9IChzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzICogc2xpZGVyLnNldHRpbmdzLnNsaWRlV2lkdGgpICsgKChzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzIC0gMSkgKiBzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW4pOwoJCQkJfWVsc2V7CgkJCQkJd2lkdGggPSBzbGlkZXIuc2V0dGluZ3Muc2xpZGVXaWR0aDsKCQkJCX0KCQkJfQoJCQlyZXR1cm4gd2lkdGg7CgkJfQoKCQkvKioKCQkgKiBSZXR1cm5zIHRoZSBjYWxjdWxhdGVkIHdpZHRoIHRvIGJlIGFwcGxpZWQgdG8gZWFjaCBzbGlkZQoJCSAqLwoJCXZhciBnZXRTbGlkZVdpZHRoID0gZnVuY3Rpb24oKXsKCQkJLy8gc3RhcnQgd2l0aCBhbnkgdXNlci1zdXBwbGllZCBzbGlkZSB3aWR0aAoJCQl2YXIgbmV3RWxXaWR0aCA9IHNsaWRlci5zZXR0aW5ncy5zbGlkZVdpZHRoOwoJCQkvLyBnZXQgdGhlIGN1cnJlbnQgdmlld3BvcnQgd2lkdGgKCQkJdmFyIHdyYXBXaWR0aCA9IHNsaWRlci52aWV3cG9ydC53aWR0aCgpOwoJCQkvLyBpZiBzbGlkZSB3aWR0aCB3YXMgbm90IHN1cHBsaWVkLCBvciBpcyBsYXJnZXIgdGhhbiB0aGUgdmlld3BvcnQgdXNlIHRoZSB2aWV3cG9ydCB3aWR0aAoJCQlpZihzbGlkZXIuc2V0dGluZ3Muc2xpZGVXaWR0aCA9PSAwIHx8CgkJCQkoc2xpZGVyLnNldHRpbmdzLnNsaWRlV2lkdGggPiB3cmFwV2lkdGggJiYgIXNsaWRlci5jYXJvdXNlbCkgfHwKCQkJCXNsaWRlci5zZXR0aW5ncy5tb2RlID09ICd2ZXJ0aWNhbCcpewoJCQkJbmV3RWxXaWR0aCA9IHdyYXBXaWR0aDsKCQkJLy8gaWYgY2Fyb3VzZWwsIHVzZSB0aGUgdGhyZXNob2xkcyB0byBkZXRlcm1pbmUgdGhlIHdpZHRoCgkJCX1lbHNlIGlmKHNsaWRlci5zZXR0aW5ncy5tYXhTbGlkZXMgPiAxICYmIHNsaWRlci5zZXR0aW5ncy5tb2RlID09ICdob3Jpem9udGFsJyl7CgkJCQlpZih3cmFwV2lkdGggPiBzbGlkZXIubWF4VGhyZXNob2xkKXsKCQkJCQkvLyBuZXdFbFdpZHRoID0gKHdyYXBXaWR0aCAtIChzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW4gKiAoc2xpZGVyLnNldHRpbmdzLm1heFNsaWRlcyAtIDEpKSkgLyBzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzOwoJCQkJfWVsc2UgaWYod3JhcFdpZHRoIDwgc2xpZGVyLm1pblRocmVzaG9sZCl7CgkJCQkJbmV3RWxXaWR0aCA9ICh3cmFwV2lkdGggLSAoc2xpZGVyLnNldHRpbmdzLnNsaWRlTWFyZ2luICogKHNsaWRlci5zZXR0aW5ncy5taW5TbGlkZXMgLSAxKSkpIC8gc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlczsKCQkJCX0KCQkJfQoJCQlyZXR1cm4gbmV3RWxXaWR0aDsKCQl9CgoJCS8qKgoJCSAqIFJldHVybnMgdGhlIG51bWJlciBvZiBzbGlkZXMgY3VycmVudGx5IHZpc2libGUgaW4gdGhlIHZpZXdwb3J0IChpbmNsdWRlcyBwYXJ0aWFsbHkgdmlzaWJsZSBzbGlkZXMpCgkJICovCgkJdmFyIGdldE51bWJlclNsaWRlc1Nob3dpbmcgPSBmdW5jdGlvbigpewoJCQl2YXIgc2xpZGVzU2hvd2luZyA9IDE7CgkJCWlmKHNsaWRlci5zZXR0aW5ncy5tb2RlID09ICdob3Jpem9udGFsJyAmJiBzbGlkZXIuc2V0dGluZ3Muc2xpZGVXaWR0aCA+IDApewoJCQkJLy8gaWYgdmlld3BvcnQgaXMgc21hbGxlciB0aGFuIG1pblRocmVzaG9sZCwgcmV0dXJuIG1pblNsaWRlcwoJCQkJaWYoc2xpZGVyLnZpZXdwb3J0LndpZHRoKCkgPCBzbGlkZXIubWluVGhyZXNob2xkKXsKCQkJCQlzbGlkZXNTaG93aW5nID0gc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlczsKCQkJCS8vIGlmIHZpZXdwb3J0IGlzIGxhcmdlciB0aGFuIG1pblRocmVzaG9sZCwgcmV0dXJuIG1heFNsaWRlcwoJCQkJfWVsc2UgaWYoc2xpZGVyLnZpZXdwb3J0LndpZHRoKCkgPiBzbGlkZXIubWF4VGhyZXNob2xkKXsKCQkJCQlzbGlkZXNTaG93aW5nID0gc2xpZGVyLnNldHRpbmdzLm1heFNsaWRlczsKCQkJCS8vIGlmIHZpZXdwb3J0IGlzIGJldHdlZW4gbWluIC8gbWF4IHRocmVzaG9sZHMsIGRpdmlkZSB2aWV3cG9ydCB3aWR0aCBieSBmaXJzdCBjaGlsZCB3aWR0aAoJCQkJfWVsc2V7CgkJCQkJdmFyIGNoaWxkV2lkdGggPSBzbGlkZXIuY2hpbGRyZW4uZmlyc3QoKS53aWR0aCgpICsgc2xpZGVyLnNldHRpbmdzLnNsaWRlTWFyZ2luOwoJCQkJCXNsaWRlc1Nob3dpbmcgPSBNYXRoLmZsb29yKChzbGlkZXIudmlld3BvcnQud2lkdGgoKSArCgkJCQkJCXNsaWRlci5zZXR0aW5ncy5zbGlkZU1hcmdpbikgLyBjaGlsZFdpZHRoKTsKCQkJCX0KCQkJLy8gaWYgInZlcnRpY2FsIiBtb2RlLCBzbGlkZXMgc2hvd2luZyB3aWxsIGFsd2F5cyBiZSBtaW5TbGlkZXMKCQkJfWVsc2UgaWYoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT0gJ3ZlcnRpY2FsJyl7CgkJCQlzbGlkZXNTaG93aW5nID0gc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlczsKCQkJfQoJCQlyZXR1cm4gc2xpZGVzU2hvd2luZzsKCQl9CgoJCS8qKgoJCSAqIFJldHVybnMgdGhlIG51bWJlciBvZiBwYWdlcyAob25lIGZ1bGwgdmlld3BvcnQgb2Ygc2xpZGVzIGlzIG9uZSAicGFnZSIpCgkJICovCgkJdmFyIGdldFBhZ2VyUXR5ID0gZnVuY3Rpb24oKXsKCQkJdmFyIHBhZ2VyUXR5ID0gMDsKCQkJLy8gaWYgbW92ZVNsaWRlcyBpcyBzcGVjaWZpZWQgYnkgdGhlIHVzZXIKCQkJaWYoc2xpZGVyLnNldHRpbmdzLm1vdmVTbGlkZXMgPiAwKXsKCQkJCWlmKHNsaWRlci5zZXR0aW5ncy5pbmZpbml0ZUxvb3ApewoJCQkJCXBhZ2VyUXR5ID0gTWF0aC5jZWlsKHNsaWRlci5jaGlsZHJlbi5sZW5ndGggLyBnZXRNb3ZlQnkoKSk7CgkJCQl9ZWxzZXsKCQkJCQkvLyB1c2UgYSB3aGlsZSBsb29wIHRvIGRldGVybWluZSBwYWdlcwoJCQkJCXZhciBicmVha1BvaW50ID0gMDsKCQkJCQl2YXIgY291bnRlciA9IDAKCQkJCQkvLyB3aGVuIGJyZWFrcG9pbnQgZ29lcyBhYm92ZSBjaGlsZHJlbiBsZW5ndGgsIGNvdW50ZXIgaXMgdGhlIG51bWJlciBvZiBwYWdlcwoJCQkJCXdoaWxlIChicmVha1BvaW50IDwgc2xpZGVyLmNoaWxkcmVuLmxlbmd0aCl7CgkJCQkJCSsrcGFnZXJRdHk7CgkJCQkJCWJyZWFrUG9pbnQgPSBjb3VudGVyICsgZ2V0TnVtYmVyU2xpZGVzU2hvd2luZygpOwoJCQkJCQljb3VudGVyICs9IHNsaWRlci5zZXR0aW5ncy5tb3ZlU2xpZGVzIDw9IGdldE51bWJlclNsaWRlc1Nob3dpbmcoKSA/IHNsaWRlci5zZXR0aW5ncy5tb3ZlU2xpZGVzIDogZ2V0TnVtYmVyU2xpZGVzU2hvd2luZygpOwoJCQkJCX0KCQkJCX0KCQkJLy8gaWYgbW92ZVNsaWRlcyBpcyAwIChhdXRvKSBkaXZpZGUgY2hpbGRyZW4gbGVuZ3RoIGJ5IHNpZGVzIHNob3dpbmcsIHRoZW4gcm91bmQgdXAKCQkJfWVsc2V7CgkJCQlwYWdlclF0eSA9IE1hdGguY2VpbChzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoIC8gZ2V0TnVtYmVyU2xpZGVzU2hvd2luZygpKTsKCQkJfQoJCQlyZXR1cm4gcGFnZXJRdHk7CgkJfQoKCQkvKioKCQkgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgaW5kaXZ1YWwgc2xpZGVzIGJ5IHdoaWNoIHRvIHNoaWZ0IHRoZSBzbGlkZXIKCQkgKi8KCQl2YXIgZ2V0TW92ZUJ5ID0gZnVuY3Rpb24oKXsKCQkJLy8gaWYgbW92ZVNsaWRlcyB3YXMgc2V0IGJ5IHRoZSB1c2VyIGFuZCBtb3ZlU2xpZGVzIGlzIGxlc3MgdGhhbiBudW1iZXIgb2Ygc2xpZGVzIHNob3dpbmcKCQkJaWYoc2xpZGVyLnNldHRpbmdzLm1vdmVTbGlkZXMgPiAwICYmIHNsaWRlci5zZXR0aW5ncy5tb3ZlU2xpZGVzIDw9IGdldE51bWJlclNsaWRlc1Nob3dpbmcoKSl7CgkJCQlyZXR1cm4gc2xpZGVyLnNldHRpbmdzLm1vdmVTbGlkZXM7CgkJCX0KCQkJLy8gaWYgbW92ZVNsaWRlcyBpcyAwIChhdXRvKQoJCQlyZXR1cm4gZ2V0TnVtYmVyU2xpZGVzU2hvd2luZygpOwoJCX0KCgkJLyoqCgkJICogU2V0cyB0aGUgc2xpZGVyJ3MgKGVsKSBsZWZ0IG9yIHRvcCBwb3NpdGlvbgoJCSAqLwoJCXZhciBzZXRTbGlkZVBvc2l0aW9uID0gZnVuY3Rpb24oKXsKCQkJLy8gaWYgbGFzdCBzbGlkZSwgbm90IGluZmluaXRlIGxvb3AsIGFuZCBudW1iZXIgb2YgY2hpbGRyZW4gaXMgbGFyZ2VyIHRoYW4gc3BlY2lmaWVkIG1heFNsaWRlcwoJCQlpZihzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoID4gc2xpZGVyLnNldHRpbmdzLm1heFNsaWRlcyAmJiBzbGlkZXIuYWN0aXZlLmxhc3QgJiYgIXNsaWRlci5zZXR0aW5ncy5pbmZpbml0ZUxvb3ApewoJCQkJaWYgKHNsaWRlci5zZXR0aW5ncy5tb2RlID09ICdob3Jpem9udGFsJyl7CgkJCQkJLy8gZ2V0IHRoZSBsYXN0IGNoaWxkJ3MgcG9zaXRpb24KCQkJCQl2YXIgbGFzdENoaWxkID0gc2xpZGVyLmNoaWxkcmVuLmxhc3QoKTsKCQkJCQl2YXIgcG9zaXRpb24gPSBsYXN0Q2hpbGQucG9zaXRpb24oKTsKCQkJCQkvLyBzZXQgdGhlIGxlZnQgcG9zaXRpb24KCQkJCQlzZXRQb3NpdGlvblByb3BlcnR5KC0ocG9zaXRpb24ubGVmdCAtIChzbGlkZXIudmlld3BvcnQud2lkdGgoKSAtIGxhc3RDaGlsZC5vdXRlcldpZHRoKCkpKSwgJ3Jlc2V0JywgMCk7CgkJCQl9ZWxzZSBpZihzbGlkZXIuc2V0dGluZ3MubW9kZSA9PSAndmVydGljYWwnKXsKCQkJCQkvLyBnZXQgdGhlIGxhc3Qgc2hvd2luZyBpbmRleCdzIHBvc2l0aW9uCgkJCQkJdmFyIGxhc3RTaG93aW5nSW5kZXggPSBzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoIC0gc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlczsKCQkJCQl2YXIgcG9zaXRpb24gPSBzbGlkZXIuY2hpbGRyZW4uZXEobGFzdFNob3dpbmdJbmRleCkucG9zaXRpb24oKTsKCQkJCQkvLyBzZXQgdGhlIHRvcCBwb3NpdGlvbgoJCQkJCXNldFBvc2l0aW9uUHJvcGVydHkoLXBvc2l0aW9uLnRvcCwgJ3Jlc2V0JywgMCk7CgkJCQl9CgkJCS8vIGlmIG5vdCBsYXN0IHNsaWRlCgkJCX1lbHNlewoJCQkJLy8gZ2V0IHRoZSBwb3NpdGlvbiBvZiB0aGUgZmlyc3Qgc2hvd2luZyBzbGlkZQoJCQkJdmFyIHBvc2l0aW9uID0gc2xpZGVyLmNoaWxkcmVuLmVxKHNsaWRlci5hY3RpdmUuaW5kZXggKiBnZXRNb3ZlQnkoKSkucG9zaXRpb24oKTsKCQkJCS8vIGNoZWNrIGZvciBsYXN0IHNsaWRlCgkJCQlpZiAoc2xpZGVyLmFjdGl2ZS5pbmRleCA9PSBnZXRQYWdlclF0eSgpIC0gMSkgc2xpZGVyLmFjdGl2ZS5sYXN0ID0gdHJ1ZTsKCQkJCS8vIHNldCB0aGUgcmVwZWN0aXZlIHBvc2l0aW9uCgkJCQlpZiAocG9zaXRpb24gIT0gdW5kZWZpbmVkKXsKCQkJCQlpZiAoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT0gJ2hvcml6b250YWwnKSBzZXRQb3NpdGlvblByb3BlcnR5KC1wb3NpdGlvbi5sZWZ0LCAncmVzZXQnLCAwKTsKCQkJCQllbHNlIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSA9PSAndmVydGljYWwnKSBzZXRQb3NpdGlvblByb3BlcnR5KC1wb3NpdGlvbi50b3AsICdyZXNldCcsIDApOwoJCQkJfQoJCQl9CgkJfQoKCQkvKioKCQkgKiBTZXRzIHRoZSBlbCdzIGFuaW1hdGluZyBwcm9wZXJ0eSBwb3NpdGlvbiAod2hpY2ggaW4gdHVybiB3aWxsIHNvbWV0aW1lcyBhbmltYXRlIGVsKS4KCQkgKiBJZiB1c2luZyBDU1MsIHNldHMgdGhlIHRyYW5zZm9ybSBwcm9wZXJ0eS4gSWYgbm90IHVzaW5nIENTUywgc2V0cyB0aGUgdG9wIC8gbGVmdCBwcm9wZXJ0eS4KCQkgKgoJCSAqIEBwYXJhbSB2YWx1ZSAoaW50KQoJCSAqICAtIHRoZSBhbmltYXRpbmcgcHJvcGVydHkncyB2YWx1ZQoJCSAqCgkJICogQHBhcmFtIHR5cGUgKHN0cmluZykgJ3NsaWRlcicsICdyZXNldCcsICd0aWNrZXInCgkJICogIC0gdGhlIHR5cGUgb2YgaW5zdGFuY2UgZm9yIHdoaWNoIHRoZSBmdW5jdGlvbiBpcyBiZWluZwoJCSAqCgkJICogQHBhcmFtIGR1cmF0aW9uIChpbnQpCgkJICogIC0gdGhlIGFtb3VudCBvZiB0aW1lIChpbiBtcykgdGhlIHRyYW5zaXRpb24gc2hvdWxkIG9jY3VweQoJCSAqCgkJICogQHBhcmFtIHBhcmFtcyAoYXJyYXkpIG9wdGlvbmFsCgkJICogIC0gYW4gb3B0aW9uYWwgcGFyYW1ldGVyIGNvbnRhaW5pbmcgYW55IHZhcmlhYmxlcyB0aGF0IG5lZWQgdG8gYmUgcGFzc2VkIGluCgkJICovCgkJdmFyIHNldFBvc2l0aW9uUHJvcGVydHkgPSBmdW5jdGlvbih2YWx1ZSwgdHlwZSwgZHVyYXRpb24sIHBhcmFtcyl7CgkJCS8vIHVzZSBDU1MgdHJhbnNmb3JtCgkJCWlmKHNsaWRlci51c2luZ0NTUyl7CgkJCQkvLyBkZXRlcm1pbmUgdGhlIHRyYW5zbGF0ZTNkIHZhbHVlCgkJCQl2YXIgcHJvcFZhbHVlID0gc2xpZGVyLnNldHRpbmdzLm1vZGUgPT0gJ3ZlcnRpY2FsJyA/ICd0cmFuc2xhdGUzZCgwLCAnICsgdmFsdWUgKyAncHgsIDApJyA6ICd0cmFuc2xhdGUzZCgnICsgdmFsdWUgKyAncHgsIDAsIDApJzsKCQkJCS8vIGFkZCB0aGUgQ1NTIHRyYW5zaXRpb24tZHVyYXRpb24KCQkJCWVsLmNzcygnLScgKyBzbGlkZXIuY3NzUHJlZml4ICsgJy10cmFuc2l0aW9uLWR1cmF0aW9uJywgZHVyYXRpb24gLyAxMDAwICsgJ3MnKTsKCQkJCWlmKHR5cGUgPT0gJ3NsaWRlJyl7CgkJCQkJLy8gc2V0IHRoZSBwcm9wZXJ0eSB2YWx1ZQoJCQkJCWVsLmNzcyhzbGlkZXIuYW5pbVByb3AsIHByb3BWYWx1ZSk7CgkJCQkJLy8gYmluZCBhIGNhbGxiYWNrIG1ldGhvZCAtIGV4ZWN1dGVzIHdoZW4gQ1NTIHRyYW5zaXRpb24gY29tcGxldGVzCgkJCQkJZWwuYmluZCgndHJhbnNpdGlvbmVuZCB3ZWJraXRUcmFuc2l0aW9uRW5kIG9UcmFuc2l0aW9uRW5kIE1TVHJhbnNpdGlvbkVuZCcsIGZ1bmN0aW9uKCl7CgkJCQkJCS8vIHVuYmluZCB0aGUgY2FsbGJhY2sKCQkJCQkJZWwudW5iaW5kKCd0cmFuc2l0aW9uZW5kIHdlYmtpdFRyYW5zaXRpb25FbmQgb1RyYW5zaXRpb25FbmQgTVNUcmFuc2l0aW9uRW5kJyk7CgkJCQkJCXVwZGF0ZUFmdGVyU2xpZGVUcmFuc2l0aW9uKCk7CgkJCQkJfSk7CgkJCQl9ZWxzZSBpZih0eXBlID09ICdyZXNldCcpewoJCQkJCWVsLmNzcyhzbGlkZXIuYW5pbVByb3AsIHByb3BWYWx1ZSk7CgkJCQl9ZWxzZSBpZih0eXBlID09ICd0aWNrZXInKXsKCQkJCQkvLyBtYWtlIHRoZSB0cmFuc2l0aW9uIHVzZSAnbGluZWFyJwoJCQkJCWVsLmNzcygnLScgKyBzbGlkZXIuY3NzUHJlZml4ICsgJy10cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbicsICdsaW5lYXInKTsKCQkJCQllbC5jc3Moc2xpZGVyLmFuaW1Qcm9wLCBwcm9wVmFsdWUpOwoJCQkJCS8vIGJpbmQgYSBjYWxsYmFjayBtZXRob2QgLSBleGVjdXRlcyB3aGVuIENTUyB0cmFuc2l0aW9uIGNvbXBsZXRlcwoJCQkJCWVsLmJpbmQoJ3RyYW5zaXRpb25lbmQgd2Via2l0VHJhbnNpdGlvbkVuZCBvVHJhbnNpdGlvbkVuZCBNU1RyYW5zaXRpb25FbmQnLCBmdW5jdGlvbigpewoJCQkJCQkvLyB1bmJpbmQgdGhlIGNhbGxiYWNrCgkJCQkJCWVsLnVuYmluZCgndHJhbnNpdGlvbmVuZCB3ZWJraXRUcmFuc2l0aW9uRW5kIG9UcmFuc2l0aW9uRW5kIE1TVHJhbnNpdGlvbkVuZCcpOwoJCQkJCQkvLyByZXNldCB0aGUgcG9zaXRpb24KCQkJCQkJc2V0UG9zaXRpb25Qcm9wZXJ0eShwYXJhbXNbJ3Jlc2V0VmFsdWUnXSwgJ3Jlc2V0JywgMCk7CgkJCQkJCS8vIHN0YXJ0IHRoZSBsb29wIGFnYWluCgkJCQkJCXRpY2tlckxvb3AoKTsKCQkJCQl9KTsKCQkJCX0KCQkJLy8gdXNlIEpTIGFuaW1hdGUKCQkJfWVsc2V7CgkJCQl2YXIgYW5pbWF0ZU9iaiA9IHt9OwoJCQkJYW5pbWF0ZU9ialtzbGlkZXIuYW5pbVByb3BdID0gdmFsdWU7CgkJCQlpZih0eXBlID09ICdzbGlkZScpewoJCQkJCWVsLmFuaW1hdGUoYW5pbWF0ZU9iaiwgZHVyYXRpb24sIHNsaWRlci5zZXR0aW5ncy5lYXNpbmcsIGZ1bmN0aW9uKCl7CgkJCQkJCXVwZGF0ZUFmdGVyU2xpZGVUcmFuc2l0aW9uKCk7CgkJCQkJfSk7CgkJCQl9ZWxzZSBpZih0eXBlID09ICdyZXNldCcpewoJCQkJCWVsLmNzcyhzbGlkZXIuYW5pbVByb3AsIHZhbHVlKQoJCQkJfWVsc2UgaWYodHlwZSA9PSAndGlja2VyJyl7CgkJCQkJZWwuYW5pbWF0ZShhbmltYXRlT2JqLCBzcGVlZCwgJ2xpbmVhcicsIGZ1bmN0aW9uKCl7CgkJCQkJCXNldFBvc2l0aW9uUHJvcGVydHkocGFyYW1zWydyZXNldFZhbHVlJ10sICdyZXNldCcsIDApOwoJCQkJCQkvLyBydW4gdGhlIHJlY3Vyc2l2ZSBsb29wIGFmdGVyIGFuaW1hdGlvbgoJCQkJCQl0aWNrZXJMb29wKCk7CgkJCQkJfSk7CgkJCQl9CgkJCX0KCQl9CgoJCS8qKgoJCSAqIFBvcHVsYXRlcyB0aGUgcGFnZXIgd2l0aCBwcm9wZXIgYW1vdW50IG9mIHBhZ2VzCgkJICovCgkJdmFyIHBvcHVsYXRlUGFnZXIgPSBmdW5jdGlvbigpewoJCQl2YXIgcGFnZXJIdG1sID0gJyc7CgkJCXZhciBwYWdlclF0eSA9IGdldFBhZ2VyUXR5KCk7CgkJCS8vIGxvb3AgdGhyb3VnaCBlYWNoIHBhZ2VyIGl0ZW0KCQkJZm9yKHZhciBpPTA7IGkgPCBwYWdlclF0eTsgaSsrKXsKCQkJCXZhciBsaW5rQ29udGVudCA9ICcnOwoJCQkJLy8gaWYgYSBidWlsZFBhZ2VyIGZ1bmN0aW9uIGlzIHN1cHBsaWVkLCB1c2UgaXQgdG8gZ2V0IHBhZ2VyIGxpbmsgdmFsdWUsIGVsc2UgdXNlIGluZGV4ICsgMQoJCQkJaWYoc2xpZGVyLnNldHRpbmdzLmJ1aWxkUGFnZXIgJiYgJC5pc0Z1bmN0aW9uKHNsaWRlci5zZXR0aW5ncy5idWlsZFBhZ2VyKSl7CgkJCQkJbGlua0NvbnRlbnQgPSBzbGlkZXIuc2V0dGluZ3MuYnVpbGRQYWdlcihpKTsKCQkJCQlzbGlkZXIucGFnZXJFbC5hZGRDbGFzcygnYngtY3VzdG9tLXBhZ2VyJyk7CgkJCQl9ZWxzZXsKCQkJCQlsaW5rQ29udGVudCA9IGkgKyAxOwoJCQkJCXNsaWRlci5wYWdlckVsLmFkZENsYXNzKCdieC1kZWZhdWx0LXBhZ2VyJyk7CgkJCQl9CgkJCQkvLyB2YXIgbGlua0NvbnRlbnQgPSBzbGlkZXIuc2V0dGluZ3MuYnVpbGRQYWdlciAmJiAkLmlzRnVuY3Rpb24oc2xpZGVyLnNldHRpbmdzLmJ1aWxkUGFnZXIpID8gc2xpZGVyLnNldHRpbmdzLmJ1aWxkUGFnZXIoaSkgOiBpICsgMTsKCQkJCS8vIGFkZCB0aGUgbWFya3VwIHRvIHRoZSBzdHJpbmcKCQkJCXBhZ2VySHRtbCArPSAnPGRpdiBjbGFzcz0iYngtcGFnZXItaXRlbSI+PGEgaHJlZj0iIiBkYXRhLXNsaWRlLWluZGV4PSInICsgaSArICciIGNsYXNzPSJieC1wYWdlci1saW5rIj4nICsgbGlua0NvbnRlbnQgKyAnPC9hPjwvZGl2Pic7CgkJCX07CgkJCS8vIHBvcHVsYXRlIHRoZSBwYWdlciBlbGVtZW50IHdpdGggcGFnZXIgbGlua3MKCQkJc2xpZGVyLnBhZ2VyRWwuaHRtbChwYWdlckh0bWwpOwoJCX0KCgkJLyoqCgkJICogQXBwZW5kcyB0aGUgcGFnZXIgdG8gdGhlIGNvbnRyb2xzIGVsZW1lbnQKCQkgKi8KCQl2YXIgYXBwZW5kUGFnZXIgPSBmdW5jdGlvbigpewoJCQlpZighc2xpZGVyLnNldHRpbmdzLnBhZ2VyQ3VzdG9tKXsKCQkJCS8vIGNyZWF0ZSB0aGUgcGFnZXIgRE9NIGVsZW1lbnQKCQkJCXNsaWRlci5wYWdlckVsID0gJCgnPGRpdiBjbGFzcz0iYngtcGFnZXIiIC8+Jyk7CgkJCQkvLyBpZiBhIHBhZ2VyIHNlbGVjdG9yIHdhcyBzdXBwbGllZCwgcG9wdWxhdGUgaXQgd2l0aCB0aGUgcGFnZXIKCQkJCWlmKHNsaWRlci5zZXR0aW5ncy5wYWdlclNlbGVjdG9yKXsKCQkJCQkkKHNsaWRlci5zZXR0aW5ncy5wYWdlclNlbGVjdG9yKS5odG1sKHNsaWRlci5wYWdlckVsKTsKCQkJCS8vIGlmIG5vIHBhZ2VyIHNlbGVjdG9yIHdhcyBzdXBwbGllZCwgYWRkIGl0IGFmdGVyIHRoZSB3cmFwcGVyCgkJCQl9ZWxzZXsKCQkJCQlzbGlkZXIuY29udHJvbHMuZWwuYWRkQ2xhc3MoJ2J4LWhhcy1wYWdlcicpLmFwcGVuZChzbGlkZXIucGFnZXJFbCk7CgkJCQl9CgkJCQkvLyBwb3B1bGF0ZSB0aGUgcGFnZXIKCQkJCXBvcHVsYXRlUGFnZXIoKTsKCQkJfWVsc2V7CgkJCQlzbGlkZXIucGFnZXJFbCA9ICQoc2xpZGVyLnNldHRpbmdzLnBhZ2VyQ3VzdG9tKTsKCQkJfQoJCQkvLyBhc3NpZ24gdGhlIHBhZ2VyIGNsaWNrIGJpbmRpbmcKCQkJc2xpZGVyLnBhZ2VyRWwub24oJ2NsaWNrJywgJ2EnLCBjbGlja1BhZ2VyQmluZCk7CgkJfQoKCQkvKioKCQkgKiBBcHBlbmRzIHByZXYgLyBuZXh0IGNvbnRyb2xzIHRvIHRoZSBjb250cm9scyBlbGVtZW50CgkJICovCgkJdmFyIGFwcGVuZENvbnRyb2xzID0gZnVuY3Rpb24oKXsKCQkJc2xpZGVyLmNvbnRyb2xzLm5leHQgPSAkKCc8YSBjbGFzcz0iYngtbmV4dCIgaHJlZj0iIj4nICsgc2xpZGVyLnNldHRpbmdzLm5leHRUZXh0ICsgJzwvYT4nKTsKCQkJc2xpZGVyLmNvbnRyb2xzLnByZXYgPSAkKCc8YSBjbGFzcz0iYngtcHJldiIgaHJlZj0iIj4nICsgc2xpZGVyLnNldHRpbmdzLnByZXZUZXh0ICsgJzwvYT4nKTsKCQkJLy8gYmluZCBjbGljayBhY3Rpb25zIHRvIHRoZSBjb250cm9scwoJCQlzbGlkZXIuY29udHJvbHMubmV4dC5iaW5kKCdjbGljaycsIGNsaWNrTmV4dEJpbmQpOwoJCQlzbGlkZXIuY29udHJvbHMucHJldi5iaW5kKCdjbGljaycsIGNsaWNrUHJldkJpbmQpOwoJCQkvLyBpZiBuZXh0U2xlY3RvciB3YXMgc3VwcGxpZWQsIHBvcHVsYXRlIGl0CgkJCWlmKHNsaWRlci5zZXR0aW5ncy5uZXh0U2VsZWN0b3IpewoJCQkJJChzbGlkZXIuc2V0dGluZ3MubmV4dFNlbGVjdG9yKS5hcHBlbmQoc2xpZGVyLmNvbnRyb2xzLm5leHQpOwoJCQl9CgkJCS8vIGlmIHByZXZTbGVjdG9yIHdhcyBzdXBwbGllZCwgcG9wdWxhdGUgaXQKCQkJaWYoc2xpZGVyLnNldHRpbmdzLnByZXZTZWxlY3Rvcil7CgkJCQkkKHNsaWRlci5zZXR0aW5ncy5wcmV2U2VsZWN0b3IpLmFwcGVuZChzbGlkZXIuY29udHJvbHMucHJldik7CgkJCX0KCQkJLy8gaWYgbm8gY3VzdG9tIHNlbGVjdG9ycyB3ZXJlIHN1cHBsaWVkCgkJCWlmKCFzbGlkZXIuc2V0dGluZ3MubmV4dFNlbGVjdG9yICYmICFzbGlkZXIuc2V0dGluZ3MucHJldlNlbGVjdG9yKXsKCQkJCS8vIGFkZCB0aGUgY29udHJvbHMgdG8gdGhlIERPTQoJCQkJc2xpZGVyLmNvbnRyb2xzLmRpcmVjdGlvbkVsID0gJCgnPGRpdiBjbGFzcz0iYngtY29udHJvbHMtZGlyZWN0aW9uIiAvPicpOwoJCQkJLy8gYWRkIHRoZSBjb250cm9sIGVsZW1lbnRzIHRvIHRoZSBkaXJlY3Rpb25FbAoJCQkJc2xpZGVyLmNvbnRyb2xzLmRpcmVjdGlvbkVsLmFwcGVuZChzbGlkZXIuY29udHJvbHMucHJldikuYXBwZW5kKHNsaWRlci5jb250cm9scy5uZXh0KTsKCQkJCS8vIHNsaWRlci52aWV3cG9ydC5hcHBlbmQoc2xpZGVyLmNvbnRyb2xzLmRpcmVjdGlvbkVsKTsKCQkJCXNsaWRlci5jb250cm9scy5lbC5hZGRDbGFzcygnYngtaGFzLWNvbnRyb2xzLWRpcmVjdGlvbicpLmFwcGVuZChzbGlkZXIuY29udHJvbHMuZGlyZWN0aW9uRWwpOwoJCQl9CgkJfQoKCQkvKioKCQkgKiBBcHBlbmRzIHN0YXJ0IC8gc3RvcCBhdXRvIGNvbnRyb2xzIHRvIHRoZSBjb250cm9scyBlbGVtZW50CgkJICovCgkJdmFyIGFwcGVuZENvbnRyb2xzQXV0byA9IGZ1bmN0aW9uKCl7CgkJCXNsaWRlci5jb250cm9scy5zdGFydCA9ICQoJzxkaXYgY2xhc3M9ImJ4LWNvbnRyb2xzLWF1dG8taXRlbSI+PGEgY2xhc3M9ImJ4LXN0YXJ0IiBocmVmPSIiPicgKyBzbGlkZXIuc2V0dGluZ3Muc3RhcnRUZXh0ICsgJzwvYT48L2Rpdj4nKTsKCQkJc2xpZGVyLmNvbnRyb2xzLnN0b3AgPSAkKCc8ZGl2IGNsYXNzPSJieC1jb250cm9scy1hdXRvLWl0ZW0iPjxhIGNsYXNzPSJieC1zdG9wIiBocmVmPSIiPicgKyBzbGlkZXIuc2V0dGluZ3Muc3RvcFRleHQgKyAnPC9hPjwvZGl2PicpOwoJCQkvLyBhZGQgdGhlIGNvbnRyb2xzIHRvIHRoZSBET00KCQkJc2xpZGVyLmNvbnRyb2xzLmF1dG9FbCA9ICQoJzxkaXYgY2xhc3M9ImJ4LWNvbnRyb2xzLWF1dG8iIC8+Jyk7CgkJCS8vIGJpbmQgY2xpY2sgYWN0aW9ucyB0byB0aGUgY29udHJvbHMKCQkJc2xpZGVyLmNvbnRyb2xzLmF1dG9FbC5vbignY2xpY2snLCAnLmJ4LXN0YXJ0JywgY2xpY2tTdGFydEJpbmQpOwoJCQlzbGlkZXIuY29udHJvbHMuYXV0b0VsLm9uKCdjbGljaycsICcuYngtc3RvcCcsIGNsaWNrU3RvcEJpbmQpOwoJCQkvLyBpZiBhdXRvQ29udHJvbHNDb21iaW5lLCBpbnNlcnQgb25seSB0aGUgInN0YXJ0IiBjb250cm9sCgkJCWlmKHNsaWRlci5zZXR0aW5ncy5hdXRvQ29udHJvbHNDb21iaW5lKXsKCQkJCXNsaWRlci5jb250cm9scy5hdXRvRWwuYXBwZW5kKHNsaWRlci5jb250cm9scy5zdGFydCk7CgkJCS8vIGlmIGF1dG9Db250cm9sc0NvbWJpbmUgaXMgZmFsc2UsIGluc2VydCBib3RoIGNvbnRyb2xzCgkJCX1lbHNlewoJCQkJc2xpZGVyLmNvbnRyb2xzLmF1dG9FbC5hcHBlbmQoc2xpZGVyLmNvbnRyb2xzLnN0YXJ0KS5hcHBlbmQoc2xpZGVyLmNvbnRyb2xzLnN0b3ApOwoJCQl9CgkJCS8vIGlmIGF1dG8gY29udHJvbHMgc2VsZWN0b3Igd2FzIHN1cHBsaWVkLCBwb3B1bGF0ZSBpdCB3aXRoIHRoZSBjb250cm9scwoJCQlpZihzbGlkZXIuc2V0dGluZ3MuYXV0b0NvbnRyb2xzU2VsZWN0b3IpewoJCQkJJChzbGlkZXIuc2V0dGluZ3MuYXV0b0NvbnRyb2xzU2VsZWN0b3IpLmh0bWwoc2xpZGVyLmNvbnRyb2xzLmF1dG9FbCk7CgkJCS8vIGlmIGF1dG8gY29udHJvbHMgc2VsZWN0b3Igd2FzIG5vdCBzdXBwbGllZCwgYWRkIGl0IGFmdGVyIHRoZSB3cmFwcGVyCgkJCX1lbHNlewoJCQkJc2xpZGVyLmNvbnRyb2xzLmVsLmFkZENsYXNzKCdieC1oYXMtY29udHJvbHMtYXV0bycpLmFwcGVuZChzbGlkZXIuY29udHJvbHMuYXV0b0VsKTsKCQkJfQoJCQkvLyB1cGRhdGUgdGhlIGF1dG8gY29udHJvbHMKCQkJdXBkYXRlQXV0b0NvbnRyb2xzKHNsaWRlci5zZXR0aW5ncy5hdXRvU3RhcnQgPyAnc3RvcCcgOiAnc3RhcnQnKTsKCQl9CgoJCS8qKgoJCSAqIEFwcGVuZHMgaW1hZ2UgY2FwdGlvbnMgdG8gdGhlIERPTQoJCSAqLwoJCXZhciBhcHBlbmRDYXB0aW9ucyA9IGZ1bmN0aW9uKCl7CgkJCS8vIGN5Y2xlIHRocm91Z2ggZWFjaCBjaGlsZAoJCQlzbGlkZXIuY2hpbGRyZW4uZWFjaChmdW5jdGlvbihpbmRleCl7CgkJCQkvLyBnZXQgdGhlIGltYWdlIHRpdGxlIGF0dHJpYnV0ZQoJCQkJdmFyIHRpdGxlID0gJCh0aGlzKS5maW5kKCdpbWc6Zmlyc3QnKS5hdHRyKCd0aXRsZScpOwoJCQkJLy8gYXBwZW5kIHRoZSBjYXB0aW9uCgkJCQlpZiAodGl0bGUgIT0gdW5kZWZpbmVkICYmICgnJyArIHRpdGxlKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmFwcGVuZCgnPGRpdiBjbGFzcz0iYngtY2FwdGlvbiI+PHNwYW4+JyArIHRpdGxlICsgJzwvc3Bhbj48L2Rpdj4nKTsKICAgICAgICAgICAgICAgIH0KCQkJfSk7CgkJfQoKCQkvKioKCQkgKiBDbGljayBuZXh0IGJpbmRpbmcKCQkgKgoJCSAqIEBwYXJhbSBlIChldmVudCkKCQkgKiAgLSBET00gZXZlbnQgb2JqZWN0CgkJICovCgkJdmFyIGNsaWNrTmV4dEJpbmQgPSBmdW5jdGlvbihlKXsKCQkJLy8gaWYgYXV0byBzaG93IGlzIHJ1bm5pbmcsIHN0b3AgaXQKCQkJaWYgKHNsaWRlci5zZXR0aW5ncy5hdXRvKSBlbC5zdG9wQXV0bygpOwoJCQllbC5nb1RvTmV4dFNsaWRlKCk7CgkJCWUucHJldmVudERlZmF1bHQoKTsKCQl9CgoJCS8qKgoJCSAqIENsaWNrIHByZXYgYmluZGluZwoJCSAqCgkJICogQHBhcmFtIGUgKGV2ZW50KQoJCSAqICAtIERPTSBldmVudCBvYmplY3QKCQkgKi8KCQl2YXIgY2xpY2tQcmV2QmluZCA9IGZ1bmN0aW9uKGUpewoJCQkvLyBpZiBhdXRvIHNob3cgaXMgcnVubmluZywgc3RvcCBpdAoJCQlpZiAoc2xpZGVyLnNldHRpbmdzLmF1dG8pIGVsLnN0b3BBdXRvKCk7CgkJCWVsLmdvVG9QcmV2U2xpZGUoKTsKCQkJZS5wcmV2ZW50RGVmYXVsdCgpOwoJCX0KCgkJLyoqCgkJICogQ2xpY2sgc3RhcnQgYmluZGluZwoJCSAqCgkJICogQHBhcmFtIGUgKGV2ZW50KQoJCSAqICAtIERPTSBldmVudCBvYmplY3QKCQkgKi8KCQl2YXIgY2xpY2tTdGFydEJpbmQgPSBmdW5jdGlvbihlKXsKCQkJZWwuc3RhcnRBdXRvKCk7CgkJCWUucHJldmVudERlZmF1bHQoKTsKCQl9CgoJCS8qKgoJCSAqIENsaWNrIHN0b3AgYmluZGluZwoJCSAqCgkJICogQHBhcmFtIGUgKGV2ZW50KQoJCSAqICAtIERPTSBldmVudCBvYmplY3QKCQkgKi8KCQl2YXIgY2xpY2tTdG9wQmluZCA9IGZ1bmN0aW9uKGUpewoJCQllbC5zdG9wQXV0bygpOwoJCQllLnByZXZlbnREZWZhdWx0KCk7CgkJfQoKCQkvKioKCQkgKiBDbGljayBwYWdlciBiaW5kaW5nCgkJICoKCQkgKiBAcGFyYW0gZSAoZXZlbnQpCgkJICogIC0gRE9NIGV2ZW50IG9iamVjdAoJCSAqLwoJCXZhciBjbGlja1BhZ2VyQmluZCA9IGZ1bmN0aW9uKGUpewoJCQkvLyBpZiBhdXRvIHNob3cgaXMgcnVubmluZywgc3RvcCBpdAoJCQlpZiAoc2xpZGVyLnNldHRpbmdzLmF1dG8pIGVsLnN0b3BBdXRvKCk7CgkJCXZhciBwYWdlckxpbmsgPSAkKGUuY3VycmVudFRhcmdldCk7CgkJCWlmKHBhZ2VyTGluay5hdHRyKCdkYXRhLXNsaWRlLWluZGV4JykgIT09IHVuZGVmaW5lZCl7CgkJCQl2YXIgcGFnZXJJbmRleCA9IHBhcnNlSW50KHBhZ2VyTGluay5hdHRyKCdkYXRhLXNsaWRlLWluZGV4JykpOwoJCQkJLy8gaWYgY2xpY2tlZCBwYWdlciBsaW5rIGlzIG5vdCBhY3RpdmUsIGNvbnRpbnVlIHdpdGggdGhlIGdvVG9TbGlkZSBjYWxsCgkJCQlpZihwYWdlckluZGV4ICE9IHNsaWRlci5hY3RpdmUuaW5kZXgpIGVsLmdvVG9TbGlkZShwYWdlckluZGV4KTsKCQkJCWUucHJldmVudERlZmF1bHQoKTsKCQkJfQoJCX0KCgkJLyoqCgkJICogVXBkYXRlcyB0aGUgcGFnZXIgbGlua3Mgd2l0aCBhbiBhY3RpdmUgY2xhc3MKCQkgKgoJCSAqIEBwYXJhbSBzbGlkZUluZGV4IChpbnQpCgkJICogIC0gaW5kZXggb2Ygc2xpZGUgdG8gbWFrZSBhY3RpdmUKCQkgKi8KCQl2YXIgdXBkYXRlUGFnZXJBY3RpdmUgPSBmdW5jdGlvbihzbGlkZUluZGV4KXsKCQkJLy8gaWYgInNob3J0IiBwYWdlciB0eXBlCgkJCXZhciBsZW4gPSBzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoOyAvLyBuYiBvZiBjaGlsZHJlbgoJCQlpZihzbGlkZXIuc2V0dGluZ3MucGFnZXJUeXBlID09ICdzaG9ydCcpewoJCQkJaWYoc2xpZGVyLnNldHRpbmdzLm1heFNsaWRlcyA+IDEpIHsKCQkJCQlsZW4gPSBNYXRoLmNlaWwoc2xpZGVyLmNoaWxkcmVuLmxlbmd0aC9zbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzKTsKCQkJCX0KCQkJCXNsaWRlci5wYWdlckVsLmh0bWwoIChzbGlkZUluZGV4ICsgMSkgKyBzbGlkZXIuc2V0dGluZ3MucGFnZXJTaG9ydFNlcGFyYXRvciArIGxlbik7CgkJCQlyZXR1cm47CgkJCX0KCQkJLy8gcmVtb3ZlIGFsbCBwYWdlciBhY3RpdmUgY2xhc3NlcwoJCQlzbGlkZXIucGFnZXJFbC5maW5kKCdhJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpOwoJCQkvLyBhcHBseSB0aGUgYWN0aXZlIGNsYXNzIGZvciBhbGwgcGFnZXJzCgkJCXNsaWRlci5wYWdlckVsLmVhY2goZnVuY3Rpb24oaSwgZWwpIHsgJChlbCkuZmluZCgnYScpLmVxKHNsaWRlSW5kZXgpLmFkZENsYXNzKCdhY3RpdmUnKTsgfSk7CgkJfQoKCQkvKioKCQkgKiBQZXJmb3JtcyBuZWVkZWQgYWN0aW9ucyBhZnRlciBhIHNsaWRlIHRyYW5zaXRpb24KCQkgKi8KCQl2YXIgdXBkYXRlQWZ0ZXJTbGlkZVRyYW5zaXRpb24gPSBmdW5jdGlvbigpewoJCQkvLyBpZiBpbmZpbnRlIGxvb3AgaXMgdHJ1ZQoJCQlpZihzbGlkZXIuc2V0dGluZ3MuaW5maW5pdGVMb29wKXsKCQkJCXZhciBwb3NpdGlvbiA9ICcnOwoJCQkJLy8gZmlyc3Qgc2xpZGUKCQkJCWlmKHNsaWRlci5hY3RpdmUuaW5kZXggPT0gMCl7CgkJCQkJLy8gc2V0IHRoZSBuZXcgcG9zaXRpb24KCQkJCQlwb3NpdGlvbiA9IHNsaWRlci5jaGlsZHJlbi5lcSgwKS5wb3NpdGlvbigpOwoJCQkJLy8gY2Fyb3VzZWwsIGxhc3Qgc2xpZGUKCQkJCX1lbHNlIGlmKHNsaWRlci5hY3RpdmUuaW5kZXggPT0gZ2V0UGFnZXJRdHkoKSAtIDEgJiYgc2xpZGVyLmNhcm91c2VsKXsKCQkJCQlwb3NpdGlvbiA9IHNsaWRlci5jaGlsZHJlbi5lcSgoZ2V0UGFnZXJRdHkoKSAtIDEpICogZ2V0TW92ZUJ5KCkpLnBvc2l0aW9uKCk7CgkJCQkvLyBsYXN0IHNsaWRlCgkJCQl9ZWxzZSBpZihzbGlkZXIuYWN0aXZlLmluZGV4ID09IHNsaWRlci5jaGlsZHJlbi5sZW5ndGggLSAxKXsKCQkJCQlwb3NpdGlvbiA9IHNsaWRlci5jaGlsZHJlbi5lcShzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoIC0gMSkucG9zaXRpb24oKTsKCQkJCX0KCQkJCWlmKHBvc2l0aW9uKXsKCQkJCQlpZiAoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT0gJ2hvcml6b250YWwnKSB7IHNldFBvc2l0aW9uUHJvcGVydHkoLXBvc2l0aW9uLmxlZnQsICdyZXNldCcsIDApOyB9CgkJCQkJZWxzZSBpZiAoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT0gJ3ZlcnRpY2FsJykgeyBzZXRQb3NpdGlvblByb3BlcnR5KC1wb3NpdGlvbi50b3AsICdyZXNldCcsIDApOyB9CgkJCQl9CgkJCX0KCQkJLy8gZGVjbGFyZSB0aGF0IHRoZSB0cmFuc2l0aW9uIGlzIGNvbXBsZXRlCgkJCXNsaWRlci53b3JraW5nID0gZmFsc2U7CgkJCS8vIG9uU2xpZGVBZnRlciBjYWxsYmFjawoJCQlzbGlkZXIuc2V0dGluZ3Mub25TbGlkZUFmdGVyKHNsaWRlci5jaGlsZHJlbi5lcShzbGlkZXIuYWN0aXZlLmluZGV4KSwgc2xpZGVyLm9sZEluZGV4LCBzbGlkZXIuYWN0aXZlLmluZGV4KTsKCQl9CgoJCS8qKgoJCSAqIFVwZGF0ZXMgdGhlIGF1dG8gY29udHJvbHMgc3RhdGUgKGVpdGhlciBhY3RpdmUsIG9yIGNvbWJpbmVkIHN3aXRjaCkKCQkgKgoJCSAqIEBwYXJhbSBzdGF0ZSAoc3RyaW5nKSAic3RhcnQiLCAic3RvcCIKCQkgKiAgLSB0aGUgbmV3IHN0YXRlIG9mIHRoZSBhdXRvIHNob3cKCQkgKi8KCQl2YXIgdXBkYXRlQXV0b0NvbnRyb2xzID0gZnVuY3Rpb24oc3RhdGUpewoJCQkvLyBpZiBhdXRvQ29udHJvbHNDb21iaW5lIGlzIHRydWUsIHJlcGxhY2UgdGhlIGN1cnJlbnQgY29udHJvbCB3aXRoIHRoZSBuZXcgc3RhdGUKCQkJaWYoc2xpZGVyLnNldHRpbmdzLmF1dG9Db250cm9sc0NvbWJpbmUpewoJCQkJc2xpZGVyLmNvbnRyb2xzLmF1dG9FbC5odG1sKHNsaWRlci5jb250cm9sc1tzdGF0ZV0pOwoJCQkvLyBpZiBhdXRvQ29udHJvbHNDb21iaW5lIGlzIGZhbHNlLCBhcHBseSB0aGUgImFjdGl2ZSIgY2xhc3MgdG8gdGhlIGFwcHJvcHJpYXRlIGNvbnRyb2wKCQkJfWVsc2V7CgkJCQlzbGlkZXIuY29udHJvbHMuYXV0b0VsLmZpbmQoJ2EnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7CgkJCQlzbGlkZXIuY29udHJvbHMuYXV0b0VsLmZpbmQoJ2E6bm90KC5ieC0nICsgc3RhdGUgKyAnKScpLmFkZENsYXNzKCdhY3RpdmUnKTsKCQkJfQoJCX0KCgkJLyoqCgkJICogVXBkYXRlcyB0aGUgZGlyZWN0aW9uIGNvbnRyb2xzIChjaGVja3MgaWYgZWl0aGVyIHNob3VsZCBiZSBoaWRkZW4pCgkJICovCgkJdmFyIHVwZGF0ZURpcmVjdGlvbkNvbnRyb2xzID0gZnVuY3Rpb24oKXsKCQkJaWYoZ2V0UGFnZXJRdHkoKSA9PSAxKXsKCQkJCXNsaWRlci5jb250cm9scy5wcmV2LmFkZENsYXNzKCdkaXNhYmxlZCcpOwoJCQkJc2xpZGVyLmNvbnRyb2xzLm5leHQuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7CgkJCX1lbHNlIGlmKCFzbGlkZXIuc2V0dGluZ3MuaW5maW5pdGVMb29wICYmIHNsaWRlci5zZXR0aW5ncy5oaWRlQ29udHJvbE9uRW5kKXsKCQkJCS8vIGlmIGZpcnN0IHNsaWRlCgkJCQlpZiAoc2xpZGVyLmFjdGl2ZS5pbmRleCA9PSAwKXsKCQkJCQlzbGlkZXIuY29udHJvbHMucHJldi5hZGRDbGFzcygnZGlzYWJsZWQnKTsKCQkJCQlzbGlkZXIuY29udHJvbHMubmV4dC5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTsKCQkJCS8vIGlmIGxhc3Qgc2xpZGUKCQkJCX1lbHNlIGlmKHNsaWRlci5hY3RpdmUuaW5kZXggPT0gZ2V0UGFnZXJRdHkoKSAtIDEpewoJCQkJCXNsaWRlci5jb250cm9scy5uZXh0LmFkZENsYXNzKCdkaXNhYmxlZCcpOwoJCQkJCXNsaWRlci5jb250cm9scy5wcmV2LnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpOwoJCQkJLy8gaWYgYW55IHNsaWRlIGluIHRoZSBtaWRkbGUKCQkJCX1lbHNlewoJCQkJCXNsaWRlci5jb250cm9scy5wcmV2LnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpOwoJCQkJCXNsaWRlci5jb250cm9scy5uZXh0LnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpOwoJCQkJfQoJCQl9CgkJfQoKCQkvKioKCQkgKiBJbml0aWFsemVzIHRoZSBhdXRvIHByb2Nlc3MKCQkgKi8KCQl2YXIgaW5pdEF1dG8gPSBmdW5jdGlvbigpewoJCQkvLyBpZiBhdXRvRGVsYXkgd2FzIHN1cHBsaWVkLCBsYXVuY2ggdGhlIGF1dG8gc2hvdyB1c2luZyBhIHNldFRpbWVvdXQoKSBjYWxsCgkJCWlmKHNsaWRlci5zZXR0aW5ncy5hdXRvRGVsYXkgPiAwKXsKCQkJCXZhciB0aW1lb3V0ID0gc2V0VGltZW91dChlbC5zdGFydEF1dG8sIHNsaWRlci5zZXR0aW5ncy5hdXRvRGVsYXkpOwoJCQkvLyBpZiBhdXRvRGVsYXkgd2FzIG5vdCBzdXBwbGllZCwgc3RhcnQgdGhlIGF1dG8gc2hvdyBub3JtYWxseQoJCQl9ZWxzZXsKCQkJCWVsLnN0YXJ0QXV0bygpOwoJCQl9CgkJCS8vIGlmIGF1dG9Ib3ZlciBpcyByZXF1ZXN0ZWQKCQkJaWYoc2xpZGVyLnNldHRpbmdzLmF1dG9Ib3Zlcil7CgkJCQkvLyBvbiBlbCBob3ZlcgoJCQkJZWwuaG92ZXIoZnVuY3Rpb24oKXsKCQkJCQkvLyBpZiB0aGUgYXV0byBzaG93IGlzIGN1cnJlbnRseSBwbGF5aW5nIChoYXMgYW4gYWN0aXZlIGludGVydmFsKQoJCQkJCWlmKHNsaWRlci5pbnRlcnZhbCl7CgkJCQkJCS8vIHN0b3AgdGhlIGF1dG8gc2hvdyBhbmQgcGFzcyB0cnVlIGFndW1lbnQgd2hpY2ggd2lsbCBwcmV2ZW50IGNvbnRyb2wgdXBkYXRlCgkJCQkJCWVsLnN0b3BBdXRvKHRydWUpOwoJCQkJCQkvLyBjcmVhdGUgYSBuZXcgYXV0b1BhdXNlZCB2YWx1ZSB3aGljaCB3aWxsIGJlIHVzZWQgYnkgdGhlIHJlbGF0aXZlICJtb3VzZW91dCIgZXZlbnQKCQkJCQkJc2xpZGVyLmF1dG9QYXVzZWQgPSB0cnVlOwoJCQkJCX0KCQkJCX0sIGZ1bmN0aW9uKCl7CgkJCQkJLy8gaWYgdGhlIGF1dG9QYXVzZWQgdmFsdWUgd2FzIGNyZWF0ZWQgYmUgdGhlIHByaW9yICJtb3VzZW92ZXIiIGV2ZW50CgkJCQkJaWYoc2xpZGVyLmF1dG9QYXVzZWQpewoJCQkJCQkvLyBzdGFydCB0aGUgYXV0byBzaG93IGFuZCBwYXNzIHRydWUgYWd1bWVudCB3aGljaCB3aWxsIHByZXZlbnQgY29udHJvbCB1cGRhdGUKCQkJCQkJZWwuc3RhcnRBdXRvKHRydWUpOwoJCQkJCQkvLyByZXNldCB0aGUgYXV0b1BhdXNlZCB2YWx1ZQoJCQkJCQlzbGlkZXIuYXV0b1BhdXNlZCA9IG51bGw7CgkJCQkJfQoJCQkJfSk7CgkJCX0KCQl9CgoJCS8qKgoJCSAqIEluaXRpYWx6ZXMgdGhlIHRpY2tlciBwcm9jZXNzCgkJICovCgkJdmFyIGluaXRUaWNrZXIgPSBmdW5jdGlvbigpewoJCQl2YXIgc3RhcnRQb3NpdGlvbiA9IDA7CgkJCS8vIGlmIGF1dG9EaXJlY3Rpb24gaXMgIm5leHQiLCBhcHBlbmQgYSBjbG9uZSBvZiB0aGUgZW50aXJlIHNsaWRlcgoJCQlpZihzbGlkZXIuc2V0dGluZ3MuYXV0b0RpcmVjdGlvbiA9PSAnbmV4dCcpewoJCQkJZWwuYXBwZW5kKHNsaWRlci5jaGlsZHJlbi5jbG9uZSgpLmFkZENsYXNzKCdieC1jbG9uZScpKTsKCQkJLy8gaWYgYXV0b0RpcmVjdGlvbiBpcyAicHJldiIsIHByZXBlbmQgYSBjbG9uZSBvZiB0aGUgZW50aXJlIHNsaWRlciwgYW5kIHNldCB0aGUgbGVmdCBwb3NpdGlvbgoJCQl9ZWxzZXsKCQkJCWVsLnByZXBlbmQoc2xpZGVyLmNoaWxkcmVuLmNsb25lKCkuYWRkQ2xhc3MoJ2J4LWNsb25lJykpOwoJCQkJdmFyIHBvc2l0aW9uID0gc2xpZGVyLmNoaWxkcmVuLmZpcnN0KCkucG9zaXRpb24oKTsKCQkJCXN0YXJ0UG9zaXRpb24gPSBzbGlkZXIuc2V0dGluZ3MubW9kZSA9PSAnaG9yaXpvbnRhbCcgPyAtcG9zaXRpb24ubGVmdCA6IC1wb3NpdGlvbi50b3A7CgkJCX0KCQkJc2V0UG9zaXRpb25Qcm9wZXJ0eShzdGFydFBvc2l0aW9uLCAncmVzZXQnLCAwKTsKCQkJLy8gZG8gbm90IGFsbG93IGNvbnRyb2xzIGluIHRpY2tlciBtb2RlCgkJCXNsaWRlci5zZXR0aW5ncy5wYWdlciA9IGZhbHNlOwoJCQlzbGlkZXIuc2V0dGluZ3MuY29udHJvbHMgPSBmYWxzZTsKCQkJc2xpZGVyLnNldHRpbmdzLmF1dG9Db250cm9scyA9IGZhbHNlOwoJCQkvLyBpZiBhdXRvSG92ZXIgaXMgcmVxdWVzdGVkCgkJCWlmKHNsaWRlci5zZXR0aW5ncy50aWNrZXJIb3ZlciAmJiAhc2xpZGVyLnVzaW5nQ1NTKXsKCQkJCS8vIG9uIGVsIGhvdmVyCgkJCQlzbGlkZXIudmlld3BvcnQuaG92ZXIoZnVuY3Rpb24oKXsKCQkJCQllbC5zdG9wKCk7CgkJCQl9LCBmdW5jdGlvbigpewoJCQkJCS8vIGNhbGN1bGF0ZSB0aGUgdG90YWwgd2lkdGggb2YgY2hpbGRyZW4gKHVzZWQgdG8gY2FsY3VsYXRlIHRoZSBzcGVlZCByYXRpbykKCQkJCQl2YXIgdG90YWxEaW1lbnMgPSAwOwoJCQkJCXNsaWRlci5jaGlsZHJlbi5lYWNoKGZ1bmN0aW9uKGluZGV4KXsKCQkJCQkgIHRvdGFsRGltZW5zICs9IHNsaWRlci5zZXR0aW5ncy5tb2RlID09ICdob3Jpem9udGFsJyA/ICQodGhpcykub3V0ZXJXaWR0aCh0cnVlKSA6ICQodGhpcykub3V0ZXJIZWlnaHQodHJ1ZSk7CgkJCQkJfSk7CgkJCQkJLy8gY2FsY3VsYXRlIHRoZSBzcGVlZCByYXRpbyAodXNlZCB0byBkZXRlcm1pbmUgdGhlIG5ldyBzcGVlZCB0byBmaW5pc2ggdGhlIHBhdXNlZCBhbmltYXRpb24pCgkJCQkJdmFyIHJhdGlvID0gc2xpZGVyLnNldHRpbmdzLnNwZWVkIC8gdG90YWxEaW1lbnM7CgkJCQkJLy8gZGV0ZXJtaW5lIHdoaWNoIHByb3BlcnR5IHRvIHVzZQoJCQkJCXZhciBwcm9wZXJ0eSA9IHNsaWRlci5zZXR0aW5ncy5tb2RlID09ICdob3Jpem9udGFsJyA/ICdsZWZ0JyA6ICd0b3AnOwoJCQkJCS8vIGNhbGN1bGF0ZSB0aGUgbmV3IHNwZWVkCgkJCQkJdmFyIG5ld1NwZWVkID0gcmF0aW8gKiAodG90YWxEaW1lbnMgLSAoTWF0aC5hYnMocGFyc2VJbnQoZWwuY3NzKHByb3BlcnR5KSkpKSk7CgkJCQkJdGlja2VyTG9vcChuZXdTcGVlZCk7CgkJCQl9KTsKCQkJfQoJCQkvLyBzdGFydCB0aGUgdGlja2VyIGxvb3AKCQkJdGlja2VyTG9vcCgpOwoJCX0KCgkJLyoqCgkJICogUnVucyBhIGNvbnRpbnVvdXMgbG9vcCwgbmV3cyB0aWNrZXItc3R5bGUKCQkgKi8KCQl2YXIgdGlja2VyTG9vcCA9IGZ1bmN0aW9uKHJlc3VtZVNwZWVkKXsKCQkJc3BlZWQgPSByZXN1bWVTcGVlZCA/IHJlc3VtZVNwZWVkIDogc2xpZGVyLnNldHRpbmdzLnNwZWVkOwoJCQl2YXIgcG9zaXRpb24gPSB7bGVmdDogMCwgdG9wOiAwfTsKCQkJdmFyIHJlc2V0ID0ge2xlZnQ6IDAsIHRvcDogMH07CgkJCS8vIGlmICJuZXh0IiBhbmltYXRlIGxlZnQgcG9zaXRpb24gdG8gbGFzdCBjaGlsZCwgdGhlbiByZXNldCBsZWZ0IHRvIDAKCQkJaWYoc2xpZGVyLnNldHRpbmdzLmF1dG9EaXJlY3Rpb24gPT0gJ25leHQnKXsKCQkJCXBvc2l0aW9uID0gZWwuZmluZCgnLmJ4LWNsb25lJykuZmlyc3QoKS5wb3NpdGlvbigpOwoJCQkvLyBpZiAicHJldiIgYW5pbWF0ZSBsZWZ0IHBvc2l0aW9uIHRvIDAsIHRoZW4gcmVzZXQgbGVmdCB0byBmaXJzdCBub24tY2xvbmUgY2hpbGQKCQkJfWVsc2V7CgkJCQlyZXNldCA9IHNsaWRlci5jaGlsZHJlbi5maXJzdCgpLnBvc2l0aW9uKCk7CgkJCX0KCQkJdmFyIGFuaW1hdGVQcm9wZXJ0eSA9IHNsaWRlci5zZXR0aW5ncy5tb2RlID09ICdob3Jpem9udGFsJyA/IC1wb3NpdGlvbi5sZWZ0IDogLXBvc2l0aW9uLnRvcDsKCQkJdmFyIHJlc2V0VmFsdWUgPSBzbGlkZXIuc2V0dGluZ3MubW9kZSA9PSAnaG9yaXpvbnRhbCcgPyAtcmVzZXQubGVmdCA6IC1yZXNldC50b3A7CgkJCXZhciBwYXJhbXMgPSB7cmVzZXRWYWx1ZTogcmVzZXRWYWx1ZX07CgkJCXNldFBvc2l0aW9uUHJvcGVydHkoYW5pbWF0ZVByb3BlcnR5LCAndGlja2VyJywgc3BlZWQsIHBhcmFtcyk7CgkJfQoKCQkvKioKCQkgKiBJbml0aWFsaXplcyB0b3VjaCBldmVudHMKCQkgKi8KCQl2YXIgaW5pdFRvdWNoID0gZnVuY3Rpb24oKXsKCQkJLy8gaW5pdGlhbGl6ZSBvYmplY3QgdG8gY29udGFpbiBhbGwgdG91Y2ggdmFsdWVzCgkJCXNsaWRlci50b3VjaCA9IHsKCQkJCXN0YXJ0OiB7eDogMCwgeTogMH0sCgkJCQllbmQ6IHt4OiAwLCB5OiAwfQoJCQl9CgkJCXNsaWRlci52aWV3cG9ydC5iaW5kKCd0b3VjaHN0YXJ0Jywgb25Ub3VjaFN0YXJ0KTsKCQl9CgoJCS8qKgoJCSAqIEV2ZW50IGhhbmRsZXIgZm9yICJ0b3VjaHN0YXJ0IgoJCSAqCgkJICogQHBhcmFtIGUgKGV2ZW50KQoJCSAqICAtIERPTSBldmVudCBvYmplY3QKCQkgKi8KCQl2YXIgb25Ub3VjaFN0YXJ0ID0gZnVuY3Rpb24oZSl7CgkJCWlmKHNsaWRlci53b3JraW5nKXsKCQkJCWUucHJldmVudERlZmF1bHQoKTsKCQkJfWVsc2V7CgkJCQkvLyByZWNvcmQgdGhlIG9yaWdpbmFsIHBvc2l0aW9uIHdoZW4gdG91Y2ggc3RhcnRzCgkJCQlzbGlkZXIudG91Y2gub3JpZ2luYWxQb3MgPSBlbC5wb3NpdGlvbigpOwoJCQkJdmFyIG9yaWcgPSBlLm9yaWdpbmFsRXZlbnQ7CgkJCQkvLyByZWNvcmQgdGhlIHN0YXJ0aW5nIHRvdWNoIHgsIHkgY29vcmRpbmF0ZXMKCQkJCXNsaWRlci50b3VjaC5zdGFydC54ID0gb3JpZy5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWDsKCQkJCXNsaWRlci50b3VjaC5zdGFydC55ID0gb3JpZy5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWTsKCQkJCS8vIGJpbmQgYSAidG91Y2htb3ZlIiBldmVudCB0byB0aGUgdmlld3BvcnQKCQkJCXNsaWRlci52aWV3cG9ydC5iaW5kKCd0b3VjaG1vdmUnLCBvblRvdWNoTW92ZSk7CgkJCQkvLyBiaW5kIGEgInRvdWNoZW5kIiBldmVudCB0byB0aGUgdmlld3BvcnQKCQkJCXNsaWRlci52aWV3cG9ydC5iaW5kKCd0b3VjaGVuZCcsIG9uVG91Y2hFbmQpOwoJCQl9CgkJfQoKCQkvKioKCQkgKiBFdmVudCBoYW5kbGVyIGZvciAidG91Y2htb3ZlIgoJCSAqCgkJICogQHBhcmFtIGUgKGV2ZW50KQoJCSAqICAtIERPTSBldmVudCBvYmplY3QKCQkgKi8KCQl2YXIgb25Ub3VjaE1vdmUgPSBmdW5jdGlvbihlKXsKCQkJdmFyIG9yaWcgPSBlLm9yaWdpbmFsRXZlbnQ7CgkJCS8vIGlmIHNjcm9sbGluZyBvbiB5IGF4aXMsIGRvIG5vdCBwcmV2ZW50IGRlZmF1bHQKCQkJdmFyIHhNb3ZlbWVudCA9IE1hdGguYWJzKG9yaWcuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVggLSBzbGlkZXIudG91Y2guc3RhcnQueCk7CgkJCXZhciB5TW92ZW1lbnQgPSBNYXRoLmFicyhvcmlnLmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VZIC0gc2xpZGVyLnRvdWNoLnN0YXJ0LnkpOwoJCQkvLyB4IGF4aXMgc3dpcGUKCQkJaWYoKHhNb3ZlbWVudCAqIDMpID4geU1vdmVtZW50ICYmIHNsaWRlci5zZXR0aW5ncy5wcmV2ZW50RGVmYXVsdFN3aXBlWCl7CgkJCQllLnByZXZlbnREZWZhdWx0KCk7CgkJCS8vIHkgYXhpcyBzd2lwZQoJCQl9ZWxzZSBpZigoeU1vdmVtZW50ICogMykgPiB4TW92ZW1lbnQgJiYgc2xpZGVyLnNldHRpbmdzLnByZXZlbnREZWZhdWx0U3dpcGVZKXsKCQkJCWUucHJldmVudERlZmF1bHQoKTsKCQkJfQoJCQlpZihzbGlkZXIuc2V0dGluZ3MubW9kZSAhPSAnZmFkZScgJiYgc2xpZGVyLnNldHRpbmdzLm9uZVRvT25lVG91Y2gpewoJCQkJdmFyIHZhbHVlID0gMDsKCQkJCS8vIGlmIGhvcml6b250YWwsIGRyYWcgYWxvbmcgeCBheGlzCgkJCQlpZihzbGlkZXIuc2V0dGluZ3MubW9kZSA9PSAnaG9yaXpvbnRhbCcpewoJCQkJCXZhciBjaGFuZ2UgPSBvcmlnLmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VYIC0gc2xpZGVyLnRvdWNoLnN0YXJ0Lng7CgkJCQkJdmFsdWUgPSBzbGlkZXIudG91Y2gub3JpZ2luYWxQb3MubGVmdCArIGNoYW5nZTsKCQkJCS8vIGlmIHZlcnRpY2FsLCBkcmFnIGFsb25nIHkgYXhpcwoJCQkJfWVsc2V7CgkJCQkJdmFyIGNoYW5nZSA9IG9yaWcuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVkgLSBzbGlkZXIudG91Y2guc3RhcnQueTsKCQkJCQl2YWx1ZSA9IHNsaWRlci50b3VjaC5vcmlnaW5hbFBvcy50b3AgKyBjaGFuZ2U7CgkJCQl9CgkJCQlzZXRQb3NpdGlvblByb3BlcnR5KHZhbHVlLCAncmVzZXQnLCAwKTsKCQkJfQoJCX0KCgkJLyoqCgkJICogRXZlbnQgaGFuZGxlciBmb3IgInRvdWNoZW5kIgoJCSAqCgkJICogQHBhcmFtIGUgKGV2ZW50KQoJCSAqICAtIERPTSBldmVudCBvYmplY3QKCQkgKi8KCQl2YXIgb25Ub3VjaEVuZCA9IGZ1bmN0aW9uKGUpewoJCQlzbGlkZXIudmlld3BvcnQudW5iaW5kKCd0b3VjaG1vdmUnLCBvblRvdWNoTW92ZSk7CgkJCXZhciBvcmlnID0gZS5vcmlnaW5hbEV2ZW50OwoJCQl2YXIgdmFsdWUgPSAwOwoJCQkvLyByZWNvcmQgZW5kIHgsIHkgcG9zaXRpb25zCgkJCXNsaWRlci50b3VjaC5lbmQueCA9IG9yaWcuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVg7CgkJCXNsaWRlci50b3VjaC5lbmQueSA9IG9yaWcuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVk7CgkJCS8vIGlmIGZhZGUgbW9kZSwgY2hlY2sgaWYgYWJzb2x1dGUgeCBkaXN0YW5jZSBjbGVhcnMgdGhlIHRocmVzaG9sZAoJCQlpZihzbGlkZXIuc2V0dGluZ3MubW9kZSA9PSAnZmFkZScpewoJCQkJdmFyIGRpc3RhbmNlID0gTWF0aC5hYnMoc2xpZGVyLnRvdWNoLnN0YXJ0LnggLSBzbGlkZXIudG91Y2guZW5kLngpOwoJCQkJaWYoZGlzdGFuY2UgPj0gc2xpZGVyLnNldHRpbmdzLnN3aXBlVGhyZXNob2xkKXsKCQkJCQlzbGlkZXIudG91Y2guc3RhcnQueCA+IHNsaWRlci50b3VjaC5lbmQueCA/IGVsLmdvVG9OZXh0U2xpZGUoKSA6IGVsLmdvVG9QcmV2U2xpZGUoKTsKCQkJCQllbC5zdG9wQXV0bygpOwoJCQkJfQoJCQkvLyBub3QgZmFkZSBtb2RlCgkJCX1lbHNlewoJCQkJdmFyIGRpc3RhbmNlID0gMDsKCQkJCS8vIGNhbGN1bGF0ZSBkaXN0YW5jZSBhbmQgZWwncyBhbmltYXRlIHByb3BlcnR5CgkJCQlpZihzbGlkZXIuc2V0dGluZ3MubW9kZSA9PSAnaG9yaXpvbnRhbCcpewoJCQkJCWRpc3RhbmNlID0gc2xpZGVyLnRvdWNoLmVuZC54IC0gc2xpZGVyLnRvdWNoLnN0YXJ0Lng7CgkJCQkJdmFsdWUgPSBzbGlkZXIudG91Y2gub3JpZ2luYWxQb3MubGVmdDsKCQkJCX1lbHNlewoJCQkJCWRpc3RhbmNlID0gc2xpZGVyLnRvdWNoLmVuZC55IC0gc2xpZGVyLnRvdWNoLnN0YXJ0Lnk7CgkJCQkJdmFsdWUgPSBzbGlkZXIudG91Y2gub3JpZ2luYWxQb3MudG9wOwoJCQkJfQoJCQkJLy8gaWYgbm90IGluZmluaXRlIGxvb3AgYW5kIGZpcnN0IC8gbGFzdCBzbGlkZSwgZG8gbm90IGF0dGVtcHQgYSBzbGlkZSB0cmFuc2l0aW9uCgkJCQlpZighc2xpZGVyLnNldHRpbmdzLmluZmluaXRlTG9vcCAmJiAoKHNsaWRlci5hY3RpdmUuaW5kZXggPT0gMCAmJiBkaXN0YW5jZSA+IDApIHx8IChzbGlkZXIuYWN0aXZlLmxhc3QgJiYgZGlzdGFuY2UgPCAwKSkpewoJCQkJCXNldFBvc2l0aW9uUHJvcGVydHkodmFsdWUsICdyZXNldCcsIDIwMCk7CgkJCQl9ZWxzZXsKCQkJCQkvLyBjaGVjayBpZiBkaXN0YW5jZSBjbGVhcnMgdGhyZXNob2xkCgkJCQkJaWYoTWF0aC5hYnMoZGlzdGFuY2UpID49IHNsaWRlci5zZXR0aW5ncy5zd2lwZVRocmVzaG9sZCl7CgkJCQkJCWRpc3RhbmNlIDwgMCA/IGVsLmdvVG9OZXh0U2xpZGUoKSA6IGVsLmdvVG9QcmV2U2xpZGUoKTsKCQkJCQkJZWwuc3RvcEF1dG8oKTsKCQkJCQl9ZWxzZXsKCQkJCQkJLy8gZWwuYW5pbWF0ZShwcm9wZXJ0eSwgMjAwKTsKCQkJCQkJc2V0UG9zaXRpb25Qcm9wZXJ0eSh2YWx1ZSwgJ3Jlc2V0JywgMjAwKTsKCQkJCQl9CgkJCQl9CgkJCX0KCQkJc2xpZGVyLnZpZXdwb3J0LnVuYmluZCgndG91Y2hlbmQnLCBvblRvdWNoRW5kKTsKCQl9CgoJCS8qKgoJCSAqIFdpbmRvdyByZXNpemUgZXZlbnQgY2FsbGJhY2sKCQkgKi8KCQl2YXIgcmVzaXplV2luZG93ID0gZnVuY3Rpb24oZSl7CgkJCS8vIGRvbid0IGRvIGFueXRoaW5nIGlmIHNsaWRlciBpc24ndCBpbml0aWFsaXplZC4KCQkJaWYoIXNsaWRlci5pbml0aWFsaXplZCkgcmV0dXJuOwoJCQkvLyBnZXQgdGhlIG5ldyB3aW5kb3cgZGltZW5zIChhZ2FpbiwgdGhhbmsgeW91IElFKQoJCQl2YXIgd2luZG93V2lkdGhOZXcgPSAkKHdpbmRvdykud2lkdGgoKTsKCQkJdmFyIHdpbmRvd0hlaWdodE5ldyA9ICQod2luZG93KS5oZWlnaHQoKTsKCQkJLy8gbWFrZSBzdXJlIHRoYXQgaXQgaXMgYSB0cnVlIHdpbmRvdyByZXNpemUKCQkJLy8gKndlIG11c3QgY2hlY2sgdGhpcyBiZWNhdXNlIG91ciBkaW5vc2F1ciBmcmllbmQgSUUgZmlyZXMgYSB3aW5kb3cgcmVzaXplIGV2ZW50IHdoZW4gY2VydGFpbiBET00gZWxlbWVudHMKCQkJLy8gYXJlIHJlc2l6ZWQuIENhbiB5b3UganVzdCBkaWUgYWxyZWFkeT8qCgkJCWlmKHdpbmRvd1dpZHRoICE9IHdpbmRvd1dpZHRoTmV3IHx8IHdpbmRvd0hlaWdodCAhPSB3aW5kb3dIZWlnaHROZXcpewoJCQkJLy8gc2V0IHRoZSBuZXcgd2luZG93IGRpbWVucwoJCQkJd2luZG93V2lkdGggPSB3aW5kb3dXaWR0aE5ldzsKCQkJCXdpbmRvd0hlaWdodCA9IHdpbmRvd0hlaWdodE5ldzsKCQkJCS8vIHVwZGF0ZSBhbGwgZHluYW1pYyBlbGVtZW50cwoJCQkJZWwucmVkcmF3U2xpZGVyKCk7CgkJCQkvLyBDYWxsIHVzZXIgcmVzaXplIGhhbmRsZXIKCQkJCXNsaWRlci5zZXR0aW5ncy5vblNsaWRlclJlc2l6ZS5jYWxsKGVsLCBzbGlkZXIuYWN0aXZlLmluZGV4KTsKCQkJfQoJCX0KCgkJLyoqCgkJICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCQkgKiA9IFBVQkxJQyBGVU5DVElPTlMKCQkgKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoJCSAqLwoKCQkvKioKCQkgKiBQZXJmb3JtcyBzbGlkZSB0cmFuc2l0aW9uIHRvIHRoZSBzcGVjaWZpZWQgc2xpZGUKCQkgKgoJCSAqIEBwYXJhbSBzbGlkZUluZGV4IChpbnQpCgkJICogIC0gdGhlIGRlc3RpbmF0aW9uIHNsaWRlJ3MgaW5kZXggKHplcm8tYmFzZWQpCgkJICoKCQkgKiBAcGFyYW0gZGlyZWN0aW9uIChzdHJpbmcpCgkJICogIC0gSU5URVJOQUwgVVNFIE9OTFkgLSB0aGUgZGlyZWN0aW9uIG9mIHRyYXZlbCAoInByZXYiIC8gIm5leHQiKQoJCSAqLwoJCWVsLmdvVG9TbGlkZSA9IGZ1bmN0aW9uKHNsaWRlSW5kZXgsIGRpcmVjdGlvbil7CgkJCS8vIGlmIHBsdWdpbiBpcyBjdXJyZW50bHkgaW4gbW90aW9uLCBpZ25vcmUgcmVxdWVzdAoJCQlpZihzbGlkZXIud29ya2luZyB8fCBzbGlkZXIuYWN0aXZlLmluZGV4ID09IHNsaWRlSW5kZXgpIHJldHVybjsKCQkJLy8gZGVjbGFyZSB0aGF0IHBsdWdpbiBpcyBpbiBtb3Rpb24KCQkJc2xpZGVyLndvcmtpbmcgPSB0cnVlOwoJCQkvLyBzdG9yZSB0aGUgb2xkIGluZGV4CgkJCXNsaWRlci5vbGRJbmRleCA9IHNsaWRlci5hY3RpdmUuaW5kZXg7CgkJCS8vIGlmIHNsaWRlSW5kZXggaXMgbGVzcyB0aGFuIHplcm8sIHNldCBhY3RpdmUgaW5kZXggdG8gbGFzdCBjaGlsZCAodGhpcyBoYXBwZW5zIGR1cmluZyBpbmZpbml0ZSBsb29wKQoJCQlpZihzbGlkZUluZGV4IDwgMCl7CgkJCQlzbGlkZXIuYWN0aXZlLmluZGV4ID0gZ2V0UGFnZXJRdHkoKSAtIDE7CgkJCS8vIGlmIHNsaWRlSW5kZXggaXMgZ3JlYXRlciB0aGFuIGNoaWxkcmVuIGxlbmd0aCwgc2V0IGFjdGl2ZSBpbmRleCB0byAwICh0aGlzIGhhcHBlbnMgZHVyaW5nIGluZmluaXRlIGxvb3ApCgkJCX1lbHNlIGlmKHNsaWRlSW5kZXggPj0gZ2V0UGFnZXJRdHkoKSl7CgkJCQlzbGlkZXIuYWN0aXZlLmluZGV4ID0gMDsKCQkJLy8gc2V0IGFjdGl2ZSBpbmRleCB0byByZXF1ZXN0ZWQgc2xpZGUKCQkJfWVsc2V7CgkJCQlzbGlkZXIuYWN0aXZlLmluZGV4ID0gc2xpZGVJbmRleDsKCQkJfQoJCQkvLyBvblNsaWRlQmVmb3JlLCBvblNsaWRlTmV4dCwgb25TbGlkZVByZXYgY2FsbGJhY2tzCgkJCXNsaWRlci5zZXR0aW5ncy5vblNsaWRlQmVmb3JlKHNsaWRlci5jaGlsZHJlbi5lcShzbGlkZXIuYWN0aXZlLmluZGV4KSwgc2xpZGVyLm9sZEluZGV4LCBzbGlkZXIuYWN0aXZlLmluZGV4KTsKCQkJaWYoZGlyZWN0aW9uID09ICduZXh0Jyl7CgkJCQlzbGlkZXIuc2V0dGluZ3Mub25TbGlkZU5leHQoc2xpZGVyLmNoaWxkcmVuLmVxKHNsaWRlci5hY3RpdmUuaW5kZXgpLCBzbGlkZXIub2xkSW5kZXgsIHNsaWRlci5hY3RpdmUuaW5kZXgpOwoJCQl9ZWxzZSBpZihkaXJlY3Rpb24gPT0gJ3ByZXYnKXsKCQkJCXNsaWRlci5zZXR0aW5ncy5vblNsaWRlUHJldihzbGlkZXIuY2hpbGRyZW4uZXEoc2xpZGVyLmFjdGl2ZS5pbmRleCksIHNsaWRlci5vbGRJbmRleCwgc2xpZGVyLmFjdGl2ZS5pbmRleCk7CgkJCX0KCQkJLy8gY2hlY2sgaWYgbGFzdCBzbGlkZQoJCQlzbGlkZXIuYWN0aXZlLmxhc3QgPSBzbGlkZXIuYWN0aXZlLmluZGV4ID49IGdldFBhZ2VyUXR5KCkgLSAxOwoJCQkvLyB1cGRhdGUgdGhlIHBhZ2VyIHdpdGggYWN0aXZlIGNsYXNzCgkJCWlmKHNsaWRlci5zZXR0aW5ncy5wYWdlcikgdXBkYXRlUGFnZXJBY3RpdmUoc2xpZGVyLmFjdGl2ZS5pbmRleCk7CgkJCS8vIC8vIGNoZWNrIGZvciBkaXJlY3Rpb24gY29udHJvbCB1cGRhdGUKCQkJaWYoc2xpZGVyLnNldHRpbmdzLmNvbnRyb2xzKSB1cGRhdGVEaXJlY3Rpb25Db250cm9scygpOwoJCQkvLyBpZiBzbGlkZXIgaXMgc2V0IHRvIG1vZGU6ICJmYWRlIgoJCQlpZihzbGlkZXIuc2V0dGluZ3MubW9kZSA9PSAnZmFkZScpewoJCQkJLy8gaWYgYWRhcHRpdmVIZWlnaHQgaXMgdHJ1ZSBhbmQgbmV4dCBoZWlnaHQgaXMgZGlmZmVyZW50IGZyb20gY3VycmVudCBoZWlnaHQsIGFuaW1hdGUgdG8gdGhlIG5ldyBoZWlnaHQKCQkJCWlmKHNsaWRlci5zZXR0aW5ncy5hZGFwdGl2ZUhlaWdodCAmJiBzbGlkZXIudmlld3BvcnQuaGVpZ2h0KCkgIT0gZ2V0Vmlld3BvcnRIZWlnaHQoKSl7CgkJCQkJc2xpZGVyLnZpZXdwb3J0LmFuaW1hdGUoe2hlaWdodDogZ2V0Vmlld3BvcnRIZWlnaHQoKX0sIHNsaWRlci5zZXR0aW5ncy5hZGFwdGl2ZUhlaWdodFNwZWVkKTsKCQkJCX0KCQkJCS8vIGZhZGUgb3V0IHRoZSB2aXNpYmxlIGNoaWxkIGFuZCByZXNldCBpdHMgei1pbmRleCB2YWx1ZQoJCQkJc2xpZGVyLmNoaWxkcmVuLmZpbHRlcignOnZpc2libGUnKS5mYWRlT3V0KHNsaWRlci5zZXR0aW5ncy5zcGVlZCkuY3NzKHt6SW5kZXg6IDB9KTsKCQkJCS8vIGZhZGUgaW4gdGhlIG5ld2x5IHJlcXVlc3RlZCBzbGlkZQoJCQkJc2xpZGVyLmNoaWxkcmVuLmVxKHNsaWRlci5hY3RpdmUuaW5kZXgpLmNzcygnekluZGV4Jywgc2xpZGVyLnNldHRpbmdzLnNsaWRlWkluZGV4KzEpLmZhZGVJbihzbGlkZXIuc2V0dGluZ3Muc3BlZWQsIGZ1bmN0aW9uKCl7CgkJCQkJJCh0aGlzKS5jc3MoJ3pJbmRleCcsIHNsaWRlci5zZXR0aW5ncy5zbGlkZVpJbmRleCk7CgkJCQkJdXBkYXRlQWZ0ZXJTbGlkZVRyYW5zaXRpb24oKTsKCQkJCX0pOwoJCQkvLyBzbGlkZXIgbW9kZSBpcyBub3QgImZhZGUiCgkJCX1lbHNlewoJCQkJLy8gaWYgYWRhcHRpdmVIZWlnaHQgaXMgdHJ1ZSBhbmQgbmV4dCBoZWlnaHQgaXMgZGlmZmVyZW50IGZyb20gY3VycmVudCBoZWlnaHQsIGFuaW1hdGUgdG8gdGhlIG5ldyBoZWlnaHQKCQkJCWlmKHNsaWRlci5zZXR0aW5ncy5hZGFwdGl2ZUhlaWdodCAmJiBzbGlkZXIudmlld3BvcnQuaGVpZ2h0KCkgIT0gZ2V0Vmlld3BvcnRIZWlnaHQoKSl7CgkJCQkJc2xpZGVyLnZpZXdwb3J0LmFuaW1hdGUoe2hlaWdodDogZ2V0Vmlld3BvcnRIZWlnaHQoKX0sIHNsaWRlci5zZXR0aW5ncy5hZGFwdGl2ZUhlaWdodFNwZWVkKTsKCQkJCX0KCQkJCXZhciBtb3ZlQnkgPSAwOwoJCQkJdmFyIHBvc2l0aW9uID0ge2xlZnQ6IDAsIHRvcDogMH07CgkJCQkvLyBpZiBjYXJvdXNlbCBhbmQgbm90IGluZmluaXRlIGxvb3AKCQkJCWlmKCFzbGlkZXIuc2V0dGluZ3MuaW5maW5pdGVMb29wICYmIHNsaWRlci5jYXJvdXNlbCAmJiBzbGlkZXIuYWN0aXZlLmxhc3QpewoJCQkJCWlmKHNsaWRlci5zZXR0aW5ncy5tb2RlID09ICdob3Jpem9udGFsJyl7CgkJCQkJCS8vIGdldCB0aGUgbGFzdCBjaGlsZCBwb3NpdGlvbgoJCQkJCQl2YXIgbGFzdENoaWxkID0gc2xpZGVyLmNoaWxkcmVuLmVxKHNsaWRlci5jaGlsZHJlbi5sZW5ndGggLSAxKTsKCQkJCQkJcG9zaXRpb24gPSBsYXN0Q2hpbGQucG9zaXRpb24oKTsKCQkJCQkJLy8gY2FsY3VsYXRlIHRoZSBwb3NpdGlvbiBvZiB0aGUgbGFzdCBzbGlkZQoJCQkJCQltb3ZlQnkgPSBzbGlkZXIudmlld3BvcnQud2lkdGgoKSAtIGxhc3RDaGlsZC5vdXRlcldpZHRoKCk7CgkJCQkJfWVsc2V7CgkJCQkJCS8vIGdldCBsYXN0IHNob3dpbmcgaW5kZXggcG9zaXRpb24KCQkJCQkJdmFyIGxhc3RTaG93aW5nSW5kZXggPSBzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoIC0gc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlczsKCQkJCQkJcG9zaXRpb24gPSBzbGlkZXIuY2hpbGRyZW4uZXEobGFzdFNob3dpbmdJbmRleCkucG9zaXRpb24oKTsKCQkJCQl9CgkJCQkJLy8gaG9yaXpvbnRhbCBjYXJvdXNlbCwgZ29pbmcgcHJldmlvdXMgd2hpbGUgb24gZmlyc3Qgc2xpZGUgKGluZmluaXRlTG9vcCBtb2RlKQoJCQkJfWVsc2UgaWYoc2xpZGVyLmNhcm91c2VsICYmIHNsaWRlci5hY3RpdmUubGFzdCAmJiBkaXJlY3Rpb24gPT0gJ3ByZXYnKXsKCQkJCQkvLyBnZXQgdGhlIGxhc3QgY2hpbGQgcG9zaXRpb24KCQkJCQl2YXIgZXEgPSBzbGlkZXIuc2V0dGluZ3MubW92ZVNsaWRlcyA9PSAxID8gc2xpZGVyLnNldHRpbmdzLm1heFNsaWRlcyAtIGdldE1vdmVCeSgpIDogKChnZXRQYWdlclF0eSgpIC0gMSkgKiBnZXRNb3ZlQnkoKSkgLSAoc2xpZGVyLmNoaWxkcmVuLmxlbmd0aCAtIHNsaWRlci5zZXR0aW5ncy5tYXhTbGlkZXMpOwoJCQkJCXZhciBsYXN0Q2hpbGQgPSBlbC5jaGlsZHJlbignLmJ4LWNsb25lJykuZXEoZXEpOwoJCQkJCXBvc2l0aW9uID0gbGFzdENoaWxkLnBvc2l0aW9uKCk7CgkJCQkvLyBpZiBpbmZpbml0ZSBsb29wIGFuZCAiTmV4dCIgaXMgY2xpY2tlZCBvbiB0aGUgbGFzdCBzbGlkZQoJCQkJfWVsc2UgaWYoZGlyZWN0aW9uID09ICduZXh0JyAmJiBzbGlkZXIuYWN0aXZlLmluZGV4ID09IDApewoJCQkJCS8vIGdldCB0aGUgbGFzdCBjbG9uZSBwb3NpdGlvbgoJCQkJCXBvc2l0aW9uID0gZWwuZmluZCgnPiAuYngtY2xvbmUnKS5lcShzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzKS5wb3NpdGlvbigpOwoJCQkJCXNsaWRlci5hY3RpdmUubGFzdCA9IGZhbHNlOwoJCQkJLy8gbm9ybWFsIG5vbi16ZXJvIHJlcXVlc3RzCgkJCQl9ZWxzZSBpZihzbGlkZUluZGV4ID49IDApewoJCQkJCXZhciByZXF1ZXN0RWwgPSBzbGlkZUluZGV4ICogZ2V0TW92ZUJ5KCk7CgkJCQkJcG9zaXRpb24gPSBzbGlkZXIuY2hpbGRyZW4uZXEocmVxdWVzdEVsKS5wb3NpdGlvbigpOwoJCQkJfQoKCQkJCS8qIElmIHRoZSBwb3NpdGlvbiBkb2Vzbid0IGV4aXN0CgkJCQkgKiAoZS5nLiBpZiB5b3UgZGVzdHJveSB0aGUgc2xpZGVyIG9uIGEgbmV4dCBjbGljayksCgkJCQkgKiBpdCBkb2Vzbid0IHRocm93IGFuIGVycm9yLgoJCQkJICovCgkJCQlpZiAoInVuZGVmaW5lZCIgIT09IHR5cGVvZihwb3NpdGlvbikpIHsKCQkJCQl2YXIgdmFsdWUgPSBzbGlkZXIuc2V0dGluZ3MubW9kZSA9PSAnaG9yaXpvbnRhbCcgPyAtKHBvc2l0aW9uLmxlZnQgLSBtb3ZlQnkpIDogLXBvc2l0aW9uLnRvcDsKCQkJCQkvLyBwbHVnaW4gdmFsdWVzIHRvIGJlIGFuaW1hdGVkCgkJCQkJc2V0UG9zaXRpb25Qcm9wZXJ0eSh2YWx1ZSwgJ3NsaWRlJywgc2xpZGVyLnNldHRpbmdzLnNwZWVkKTsKCQkJCX0KCQkJfQoJCX0KCgkJLyoqCgkJICogVHJhbnNpdGlvbnMgdG8gdGhlIG5leHQgc2xpZGUgaW4gdGhlIHNob3cKCQkgKi8KCQllbC5nb1RvTmV4dFNsaWRlID0gZnVuY3Rpb24oKXsKCQkJLy8gaWYgaW5maW5pdGVMb29wIGlzIGZhbHNlIGFuZCBsYXN0IHBhZ2UgaXMgc2hvd2luZywgZGlzcmVnYXJkIGNhbGwKCQkJaWYgKCFzbGlkZXIuc2V0dGluZ3MuaW5maW5pdGVMb29wICYmIHNsaWRlci5hY3RpdmUubGFzdCkgcmV0dXJuOwoJCQl2YXIgcGFnZXJJbmRleCA9IHBhcnNlSW50KHNsaWRlci5hY3RpdmUuaW5kZXgpICsgMTsKCQkJZWwuZ29Ub1NsaWRlKHBhZ2VySW5kZXgsICduZXh0Jyk7CgkJfQoKCQkvKioKCQkgKiBUcmFuc2l0aW9ucyB0byB0aGUgcHJldiBzbGlkZSBpbiB0aGUgc2hvdwoJCSAqLwoJCWVsLmdvVG9QcmV2U2xpZGUgPSBmdW5jdGlvbigpewoJCQkvLyBpZiBpbmZpbml0ZUxvb3AgaXMgZmFsc2UgYW5kIGxhc3QgcGFnZSBpcyBzaG93aW5nLCBkaXNyZWdhcmQgY2FsbAoJCQlpZiAoIXNsaWRlci5zZXR0aW5ncy5pbmZpbml0ZUxvb3AgJiYgc2xpZGVyLmFjdGl2ZS5pbmRleCA9PSAwKSByZXR1cm47CgkJCXZhciBwYWdlckluZGV4ID0gcGFyc2VJbnQoc2xpZGVyLmFjdGl2ZS5pbmRleCkgLSAxOwoJCQllbC5nb1RvU2xpZGUocGFnZXJJbmRleCwgJ3ByZXYnKTsKCQl9CgoJCS8qKgoJCSAqIFN0YXJ0cyB0aGUgYXV0byBzaG93CgkJICoKCQkgKiBAcGFyYW0gcHJldmVudENvbnRyb2xVcGRhdGUgKGJvb2xlYW4pCgkJICogIC0gaWYgdHJ1ZSwgYXV0byBjb250cm9scyBzdGF0ZSB3aWxsIG5vdCBiZSB1cGRhdGVkCgkJICovCgkJZWwuc3RhcnRBdXRvID0gZnVuY3Rpb24ocHJldmVudENvbnRyb2xVcGRhdGUpewoJCQkvLyBpZiBhbiBpbnRlcnZhbCBhbHJlYWR5IGV4aXN0cywgZGlzcmVnYXJkIGNhbGwKCQkJaWYoc2xpZGVyLmludGVydmFsKSByZXR1cm47CgkJCS8vIGNyZWF0ZSBhbiBpbnRlcnZhbAoJCQlzbGlkZXIuaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpewoJCQkJc2xpZGVyLnNldHRpbmdzLmF1dG9EaXJlY3Rpb24gPT0gJ25leHQnID8gZWwuZ29Ub05leHRTbGlkZSgpIDogZWwuZ29Ub1ByZXZTbGlkZSgpOwoJCQl9LCBzbGlkZXIuc2V0dGluZ3MucGF1c2UpOwoJCQkvLyBpZiBhdXRvIGNvbnRyb2xzIGFyZSBkaXNwbGF5ZWQgYW5kIHByZXZlbnRDb250cm9sVXBkYXRlIGlzIG5vdCB0cnVlCgkJCWlmIChzbGlkZXIuc2V0dGluZ3MuYXV0b0NvbnRyb2xzICYmIHByZXZlbnRDb250cm9sVXBkYXRlICE9IHRydWUpIHVwZGF0ZUF1dG9Db250cm9scygnc3RvcCcpOwoJCX0KCgkJLyoqCgkJICogU3RvcHMgdGhlIGF1dG8gc2hvdwoJCSAqCgkJICogQHBhcmFtIHByZXZlbnRDb250cm9sVXBkYXRlIChib29sZWFuKQoJCSAqICAtIGlmIHRydWUsIGF1dG8gY29udHJvbHMgc3RhdGUgd2lsbCBub3QgYmUgdXBkYXRlZAoJCSAqLwoJCWVsLnN0b3BBdXRvID0gZnVuY3Rpb24ocHJldmVudENvbnRyb2xVcGRhdGUpewoJCQkvLyBpZiBubyBpbnRlcnZhbCBleGlzdHMsIGRpc3JlZ2FyZCBjYWxsCgkJCWlmKCFzbGlkZXIuaW50ZXJ2YWwpIHJldHVybjsKCQkJLy8gY2xlYXIgdGhlIGludGVydmFsCgkJCWNsZWFySW50ZXJ2YWwoc2xpZGVyLmludGVydmFsKTsKCQkJc2xpZGVyLmludGVydmFsID0gbnVsbDsKCQkJLy8gaWYgYXV0byBjb250cm9scyBhcmUgZGlzcGxheWVkIGFuZCBwcmV2ZW50Q29udHJvbFVwZGF0ZSBpcyBub3QgdHJ1ZQoJCQlpZiAoc2xpZGVyLnNldHRpbmdzLmF1dG9Db250cm9scyAmJiBwcmV2ZW50Q29udHJvbFVwZGF0ZSAhPSB0cnVlKSB1cGRhdGVBdXRvQ29udHJvbHMoJ3N0YXJ0Jyk7CgkJfQoKCQkvKioKCQkgKiBSZXR1cm5zIGN1cnJlbnQgc2xpZGUgaW5kZXggKHplcm8tYmFzZWQpCgkJICovCgkJZWwuZ2V0Q3VycmVudFNsaWRlID0gZnVuY3Rpb24oKXsKCQkJcmV0dXJuIHNsaWRlci5hY3RpdmUuaW5kZXg7CgkJfQoKCQkvKioKCQkgKiBSZXR1cm5zIGN1cnJlbnQgc2xpZGUgZWxlbWVudAoJCSAqLwoJCWVsLmdldEN1cnJlbnRTbGlkZUVsZW1lbnQgPSBmdW5jdGlvbigpewoJCQlyZXR1cm4gc2xpZGVyLmNoaWxkcmVuLmVxKHNsaWRlci5hY3RpdmUuaW5kZXgpOwoJCX0KCgkJLyoqCgkJICogUmV0dXJucyBudW1iZXIgb2Ygc2xpZGVzIGluIHNob3cKCQkgKi8KCQllbC5nZXRTbGlkZUNvdW50ID0gZnVuY3Rpb24oKXsKCQkJcmV0dXJuIHNsaWRlci5jaGlsZHJlbi5sZW5ndGg7CgkJfQoKCQkvKioKCQkgKiBVcGRhdGUgYWxsIGR5bmFtaWMgc2xpZGVyIGVsZW1lbnRzCgkJICovCgkJZWwucmVkcmF3U2xpZGVyID0gZnVuY3Rpb24oKXsKCQkJLy8gcmVzaXplIGFsbCBjaGlsZHJlbiBpbiByYXRpbyB0byBuZXcgc2NyZWVuIHNpemUKCQkJc2xpZGVyLmNoaWxkcmVuLmFkZChlbC5maW5kKCcuYngtY2xvbmUnKSkud2lkdGgoZ2V0U2xpZGVXaWR0aCgpKTsKCQkJLy8gYWRqdXN0IHRoZSBoZWlnaHQKCQkJc2xpZGVyLnZpZXdwb3J0LmNzcygnaGVpZ2h0JywgZ2V0Vmlld3BvcnRIZWlnaHQoKSk7CgkJCS8vIHVwZGF0ZSB0aGUgc2xpZGUgcG9zaXRpb24KCQkJaWYoIXNsaWRlci5zZXR0aW5ncy50aWNrZXIpIHNldFNsaWRlUG9zaXRpb24oKTsKCQkJLy8gaWYgYWN0aXZlLmxhc3Qgd2FzIHRydWUgYmVmb3JlIHRoZSBzY3JlZW4gcmVzaXplLCB3ZSB3YW50CgkJCS8vIHRvIGtlZXAgaXQgbGFzdCBubyBtYXR0ZXIgd2hhdCBzY3JlZW4gc2l6ZSB3ZSBlbmQgb24KCQkJaWYgKHNsaWRlci5hY3RpdmUubGFzdCkgc2xpZGVyLmFjdGl2ZS5pbmRleCA9IGdldFBhZ2VyUXR5KCkgLSAxOwoJCQkvLyBpZiB0aGUgYWN0aXZlIGluZGV4IChwYWdlKSBubyBsb25nZXIgZXhpc3RzIGR1ZSB0byB0aGUgcmVzaXplLCBzaW1wbHkgc2V0IHRoZSBpbmRleCBhcyBsYXN0CgkJCWlmIChzbGlkZXIuYWN0aXZlLmluZGV4ID49IGdldFBhZ2VyUXR5KCkpIHNsaWRlci5hY3RpdmUubGFzdCA9IHRydWU7CgkJCS8vIGlmIGEgcGFnZXIgaXMgYmVpbmcgZGlzcGxheWVkIGFuZCBhIGN1c3RvbSBwYWdlciBpcyBub3QgYmVpbmcgdXNlZCwgdXBkYXRlIGl0CgkJCWlmKHNsaWRlci5zZXR0aW5ncy5wYWdlciAmJiAhc2xpZGVyLnNldHRpbmdzLnBhZ2VyQ3VzdG9tKXsKCQkJCXBvcHVsYXRlUGFnZXIoKTsKCQkJCXVwZGF0ZVBhZ2VyQWN0aXZlKHNsaWRlci5hY3RpdmUuaW5kZXgpOwoJCQl9CgkJfQoKCQkvKioKCQkgKiBEZXN0cm95IHRoZSBjdXJyZW50IGluc3RhbmNlIG9mIHRoZSBzbGlkZXIgKHJldmVydCBldmVyeXRoaW5nIGJhY2sgdG8gb3JpZ2luYWwgc3RhdGUpCgkJICovCgkJZWwuZGVzdHJveVNsaWRlciA9IGZ1bmN0aW9uKCl7CgkJCS8vIGRvbid0IGRvIGFueXRoaW5nIGlmIHNsaWRlciBoYXMgYWxyZWFkeSBiZWVuIGRlc3Ryb3llZAoJCQlpZighc2xpZGVyLmluaXRpYWxpemVkKSByZXR1cm47CgkJCXNsaWRlci5pbml0aWFsaXplZCA9IGZhbHNlOwoJCQkkKCcuYngtY2xvbmUnLCB0aGlzKS5yZW1vdmUoKTsKCQkJc2xpZGVyLmNoaWxkcmVuLmVhY2goZnVuY3Rpb24oKSB7CgkJCQkkKHRoaXMpLmRhdGEoIm9yaWdTdHlsZSIpICE9IHVuZGVmaW5lZCA/ICQodGhpcykuYXR0cigic3R5bGUiLCAkKHRoaXMpLmRhdGEoIm9yaWdTdHlsZSIpKSA6ICQodGhpcykucmVtb3ZlQXR0cignc3R5bGUnKTsKCQkJfSk7CgkJCSQodGhpcykuZGF0YSgib3JpZ1N0eWxlIikgIT0gdW5kZWZpbmVkID8gdGhpcy5hdHRyKCJzdHlsZSIsICQodGhpcykuZGF0YSgib3JpZ1N0eWxlIikpIDogJCh0aGlzKS5yZW1vdmVBdHRyKCdzdHlsZScpOwoJCQkkKHRoaXMpLnVud3JhcCgpLnVud3JhcCgpOwoJCQlpZihzbGlkZXIuY29udHJvbHMuZWwpIHNsaWRlci5jb250cm9scy5lbC5yZW1vdmUoKTsKCQkJaWYoc2xpZGVyLmNvbnRyb2xzLm5leHQpIHNsaWRlci5jb250cm9scy5uZXh0LnJlbW92ZSgpOwoJCQlpZihzbGlkZXIuY29udHJvbHMucHJldikgc2xpZGVyLmNvbnRyb2xzLnByZXYucmVtb3ZlKCk7CgkJCWlmKHNsaWRlci5wYWdlckVsICYmIHNsaWRlci5zZXR0aW5ncy5jb250cm9scykgc2xpZGVyLnBhZ2VyRWwucmVtb3ZlKCk7CgkJCSQoJy5ieC1jYXB0aW9uJywgdGhpcykucmVtb3ZlKCk7CgkJCWlmKHNsaWRlci5jb250cm9scy5hdXRvRWwpIHNsaWRlci5jb250cm9scy5hdXRvRWwucmVtb3ZlKCk7CgkJCWNsZWFySW50ZXJ2YWwoc2xpZGVyLmludGVydmFsKTsKCQkJaWYoc2xpZGVyLnNldHRpbmdzLnJlc3BvbnNpdmUpICQod2luZG93KS51bmJpbmQoJ3Jlc2l6ZScsIHJlc2l6ZVdpbmRvdyk7CgkJfQoKCQkvKioKCQkgKiBSZWxvYWQgdGhlIHNsaWRlciAocmV2ZXJ0IGFsbCBET00gY2hhbmdlcywgYW5kIHJlLWluaXRpYWxpemUpCgkJICovCgkJZWwucmVsb2FkU2xpZGVyID0gZnVuY3Rpb24oc2V0dGluZ3MpewoJCQlpZiAoc2V0dGluZ3MgIT0gdW5kZWZpbmVkKSBvcHRpb25zID0gc2V0dGluZ3M7CgkJCWVsLmRlc3Ryb3lTbGlkZXIoKTsKCQkJaW5pdCgpOwoJCX0KCgkJaW5pdCgpOwoKCQkvLyByZXR1cm5zIHRoZSBjdXJyZW50IGpRdWVyeSBvYmplY3QKCQlyZXR1cm4gdGhpczsKCX0KCn0pKGpRdWVyeSk7CgovKiEKICogalF1ZXJ5IFJhdHkgLSBBIFN0YXIgUmF0aW5nIFBsdWdpbiAtIGh0dHA6Ly93Ym90ZWxob3MuY29tL3JhdHkKICoKICogQGF1dGhvciAgV2FzaGluZ3RvbiBCb3RlbGhvCiAqIEB0d2l0dGVyIHdib3RlbGhvcwogKiBAdmVyc2lvbiAxLjQuMwogKgogKiBMaWNlbnNlZCB1bmRlciBUaGUgTUlUIExpY2Vuc2UKICogaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocAogKgogKi8KCihmdW5jdGlvbiAoZSkgewogICAgZS5mbi5yYXR5ID0gZnVuY3Rpb24gKHIpIHsKICAgICAgICBpZiAodGhpcy5sZW5ndGggPT0gMCkgewogICAgICAgICAgICBhKCJTZWxlY3RvciBpbnZhbGlkIG9yIG1pc3NpbmchIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAodGhpcy5sZW5ndGggPiAxKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBlLmZuLnJhdHkuYXBwbHkoZSh0aGlzKSwgW3JdKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHZhciBvID0gZS5leHRlbmQoe30sIGUuZm4ucmF0eS5kZWZhdWx0cywgciksIHYgPSBlKHRoaXMpLCBtID0gdGhpcy5hdHRyKCJpZCIpLCBuID0gMCwgdyA9IG8uc3Rhck9uLCBzID0gIiIsIHUgPSBvLnRhcmdldCwgbCA9IChvLndpZHRoKSA/IG8ud2lkdGggOiAoby5udW1iZXIgKiBvLnNpemUgKyBvLm51bWJlciAqIDQpOwogICAgICAgIGlmIChtID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgbSA9ICJyYXR5LSIgKyB2LmluZGV4KCk7CiAgICAgICAgICAgIHYuYXR0cigiaWQiLCBtKTsKICAgICAgICB9CiAgICAgICAgaWYgKG8ubnVtYmVyID4gMjApIHsKICAgICAgICAgICAgby5udW1iZXIgPSAyMDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAoby5udW1iZXIgPCAwKSB7CiAgICAgICAgICAgICAgICBvLm51bWJlciA9IDA7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKG8ucGF0aC5zdWJzdHJpbmcoby5wYXRoLmxlbmd0aCAtIDEsIG8ucGF0aC5sZW5ndGgpICE9ICIvIikgewogICAgICAgICAgICBvLnBhdGggKz0gIi8iOwogICAgICAgIH0KICAgICAgICB2LmRhdGEoIm9wdGlvbnMiLCBvKTsKICAgICAgICBpZiAoIWlzTmFOKHBhcnNlSW50KG8uc3RhcnQpKSAmJiBvLnN0YXJ0ID4gMCkgewogICAgICAgICAgICBuID0gKG8uc3RhcnQgPiBvLm51bWJlcikgPyBvLm51bWJlciA6IG8uc3RhcnQ7CiAgICAgICAgfQogICAgICAgIGZvciAodmFyIHQgPSAxOyB0IDw9IG8ubnVtYmVyOyB0KyspIHsKICAgICAgICAgICAgdyA9IChuID49IHQpID8gby5zdGFyT24gOiBvLnN0YXJPZmY7CiAgICAgICAgICAgIHMgPSAodCA8PSBvLmhpbnRMaXN0Lmxlbmd0aCAmJiBvLmhpbnRMaXN0W3QgLSAxXSAhPT0gbnVsbCkgPyBvLmhpbnRMaXN0W3QgLSAxXSA6IHQ7CiAgICAgICAgICAgIHYuYXBwZW5kKCc8aW1nIGlkPSInICsgbSArICItIiArIHQgKyAnIiBzcmM9IicgKyBvLnBhdGggKyB3ICsgJyIgYWx0PSInICsgdCArICciIHRpdGxlPSInICsgcyArICciIGNsYXNzPSInICsgbSArICciLz4nKS5hcHBlbmQoKHQgPCBvLm51bWJlcikgPyAiJm5ic3A7IiA6ICIiKTsKICAgICAgICB9CiAgICAgICAgaWYgKG8uaWNvblJhbmdlICYmIG4gPiAwKSB7CiAgICAgICAgICAgIGIobSwgbiwgbyk7CiAgICAgICAgfQogICAgICAgIHZhciBxID0gZSgiPGlucHV0Lz4iLCB7aWQ6IG0gKyAiLXNjb3JlIiwgdHlwZTogImhpZGRlbiIsIG5hbWU6IG8uc2NvcmVOYW1lfSkuYXBwZW5kVG8odik7CiAgICAgICAgaWYgKG4gPiAwKSB7CiAgICAgICAgICAgIHEudmFsKG4pOwogICAgICAgIH0KICAgICAgICBpZiAoby5oYWxmKSB7CiAgICAgICAgICAgIGModiwgZSgiaW5wdXQjIiArIG0gKyAiLXNjb3JlIikudmFsKCksIG8pOwogICAgICAgIH0KICAgICAgICBpZiAoIW8ucmVhZE9ubHkpIHsKICAgICAgICAgICAgaWYgKHUgIT09IG51bGwpIHsKICAgICAgICAgICAgICAgIHUgPSBlKHUpOwogICAgICAgICAgICAgICAgaWYgKHUubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgICAgICAgICBhKCJUYXJnZXQgc2VsZWN0b3IgaW52YWxpZCBvciBtaXNzaW5nISIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChvLmNhbmNlbCkgewogICAgICAgICAgICAgICAgdmFyIHAgPSBlKCJpbWcuIiArIG0pLCB4ID0gJzxpbWcgc3JjPSInICsgby5wYXRoICsgby5jYW5jZWxPZmYgKyAnIiBhbHQ9IngiIHRpdGxlPSInICsgby5jYW5jZWxIaW50ICsgJyIgY2xhc3M9ImJ1dHRvbi1jYW5jZWwiLz4nOwogICAgICAgICAgICAgICAgaWYgKG8uY2FuY2VsUGxhY2UgPT0gImxlZnQiKSB7CiAgICAgICAgICAgICAgICAgICAgdi5wcmVwZW5kKHggKyAiJm5ic3A7Iik7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHYuYXBwZW5kKCImbmJzcDsiKS5hcHBlbmQoeCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlKCIjIiArIG0gKyAiIGltZy5idXR0b24tY2FuY2VsIikubW91c2VlbnRlcihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgZSh0aGlzKS5hdHRyKCJzcmMiLCBvLnBhdGggKyBvLmNhbmNlbE9uKTsKICAgICAgICAgICAgICAgICAgICBwLmF0dHIoInNyYyIsIG8ucGF0aCArIG8uc3Rhck9mZik7CiAgICAgICAgICAgICAgICAgICAgZCh1LCAiIiwgbyk7CiAgICAgICAgICAgICAgICB9KS5tb3VzZWxlYXZlKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBlKHRoaXMpLmF0dHIoInNyYyIsIG8ucGF0aCArIG8uY2FuY2VsT2ZmKTsKICAgICAgICAgICAgICAgICAgICB2Lm1vdXNlb3V0KCk7CiAgICAgICAgICAgICAgICB9KS5jbGljayhmdW5jdGlvbiAoeSkgewogICAgICAgICAgICAgICAgICAgIGUoImlucHV0IyIgKyBtICsgIi1zY29yZSIpLnJlbW92ZUF0dHIoInZhbHVlIik7CiAgICAgICAgICAgICAgICAgICAgaWYgKG8uY2xpY2spIHsKICAgICAgICAgICAgICAgICAgICAgICAgby5jbGljay5hcHBseSh2LCBbbnVsbCwgeV0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdi5jc3MoIndpZHRoIiwgbCArIG8uc2l6ZSArIDQpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdi5jc3MoIndpZHRoIiwgbCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdi5jc3MoImN1cnNvciIsICJwb2ludGVyIik7CiAgICAgICAgICAgIGgodiwgbywgdSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdi5jc3MoImN1cnNvciIsICJkZWZhdWx0Iik7CiAgICAgICAgICAgIGsodiwgbiwgbyk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB2OwogICAgfTsKICAgIGZ1bmN0aW9uIGgobiwgbSwgbykgewogICAgICAgIHZhciBxID0gbi5hdHRyKCJpZCIpLCBwID0gZSgiaW5wdXQjIiArIHEgKyAiLXNjb3JlIiksIGwgPSBuLmNoaWxkcmVuKCJpbWcuIiArIHEpOwogICAgICAgIG4ubW91c2VsZWF2ZShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGcobiwgcC52YWwoKSwgbSk7CiAgICAgICAgICAgIGYobywgcCwgbSk7CiAgICAgICAgfSk7CiAgICAgICAgbC5iaW5kKCgobS5oYWxmKSA/ICJtb3VzZW1vdmUiIDogIm1vdXNlb3ZlciIpLCBmdW5jdGlvbiAocykgewogICAgICAgICAgICBiKHEsIHRoaXMuYWx0LCBtKTsKICAgICAgICAgICAgaWYgKG0uaGFsZikgewogICAgICAgICAgICAgICAgdmFyIHIgPSBwYXJzZUZsb2F0KCgocy5wYWdlWCAtIGUodGhpcykub2Zmc2V0KCkubGVmdCkgLyBtLnNpemUpLnRvRml4ZWQoMSkpOwogICAgICAgICAgICAgICAgciA9IChyID49IDAgJiYgciA8IDAuNSkgPyAwLjUgOiAxOwogICAgICAgICAgICAgICAgbi5kYXRhKCJzY29yZSIsIHBhcnNlRmxvYXQodGhpcy5hbHQpICsgciAtIDEpOwogICAgICAgICAgICAgICAgYyhuLCBuLmRhdGEoInNjb3JlIiksIG0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgYihxLCB0aGlzLmFsdCwgbSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZChvLCB0aGlzLmFsdCwgbSk7CiAgICAgICAgfSkuY2xpY2soZnVuY3Rpb24gKHIpIHsKICAgICAgICAgICAgcC52YWwobS5oYWxmID8gbi5kYXRhKCJzY29yZSIpIDogdGhpcy5hbHQpOwogICAgICAgICAgICBpZiAobS5jbGljaykgewogICAgICAgICAgICAgICAgbS5jbGljay5hcHBseShuLCBbcC52YWwoKSwgcl0pOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gZihuLCBvLCBsKSB7CiAgICAgICAgaWYgKG4gIT09IG51bGwpIHsKICAgICAgICAgICAgdmFyIG0gPSAiIjsKICAgICAgICAgICAgaWYgKGwudGFyZ2V0S2VlcCkgewogICAgICAgICAgICAgICAgbSA9IG8udmFsKCk7CiAgICAgICAgICAgICAgICBpZiAobC50YXJnZXRUeXBlID09ICJoaW50IikgewogICAgICAgICAgICAgICAgICAgIGlmIChvLnZhbCgpID09ICIiICYmIGwuY2FuY2VsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG0gPSBsLmNhbmNlbEhpbnQ7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgbSA9IGwuaGludExpc3RbTWF0aC5jZWlsKG8udmFsKCkpIC0gMV07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChpKG4pKSB7CiAgICAgICAgICAgICAgICBuLnZhbChtKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIG4uaHRtbChtKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBiKGwsIG4sIG0pIHsKICAgICAgICB2YXIgbyA9IGUoImltZy4iICsgbCkubGVuZ3RoLCB0ID0gMCwgciA9IDAsIHMsIHA7CiAgICAgICAgZm9yICh2YXIgcSA9IDE7IHEgPD0gbzsgcSsrKSB7CiAgICAgICAgICAgIHMgPSBlKCJpbWcjIiArIGwgKyAiLSIgKyBxKTsKICAgICAgICAgICAgaWYgKHEgPD0gbikgewogICAgICAgICAgICAgICAgaWYgKG0uaWNvblJhbmdlICYmIG0uaWNvblJhbmdlLmxlbmd0aCA+IHQpIHsKICAgICAgICAgICAgICAgICAgICBwID0gbS5pY29uUmFuZ2VbdF1bMF07CiAgICAgICAgICAgICAgICAgICAgciA9IG0uaWNvblJhbmdlW3RdWzFdOwogICAgICAgICAgICAgICAgICAgIGlmIChxIDw9IHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcy5hdHRyKCJzcmMiLCBtLnBhdGggKyBwKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHEgPT0gcikgewogICAgICAgICAgICAgICAgICAgICAgICB0Kys7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBzLmF0dHIoInNyYyIsIG0ucGF0aCArIG0uc3Rhck9uKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHMuYXR0cigic3JjIiwgbS5wYXRoICsgbS5zdGFyT2ZmKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBrKG0sIG8sIGwpIHsKICAgICAgICB2YXIgbiA9ICIiOwogICAgICAgIGlmIChvICE9IDApIHsKICAgICAgICAgICAgbiA9IG87CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbiA9IGwubm9SYXRlZE1zZzsKICAgICAgICB9CiAgICAgICAgbS5hdHRyKCJ0aXRsZSIsIG4pLmNoaWxkcmVuKCJpbWciKS5hdHRyKCJ0aXRsZSIsIG4pOwogICAgfQoKICAgIGZ1bmN0aW9uIGkobCkgewogICAgICAgIHJldHVybiBsLmlzKCJpbnB1dCIpIHx8IGwuaXMoInNlbGVjdCIpIHx8IGwuaXMoInRleHRhcmVhIik7CiAgICB9CgogICAgZnVuY3Rpb24gZyhtLCBuLCBsKSB7CiAgICAgICAgdmFyIG8gPSBtLmF0dHIoImlkIik7CiAgICAgICAgaWYgKGlzTmFOKHBhcnNlSW50KG4pKSkgewogICAgICAgICAgICBtLmNoaWxkcmVuKCJpbWcuIiArIG8pLmF0dHIoInNyYyIsIGwucGF0aCArIGwuc3Rhck9mZik7CiAgICAgICAgICAgIGUoImlucHV0IyIgKyBvICsgIi1zY29yZSIpLnJlbW92ZUF0dHIoInZhbHVlIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKG4gPCAwKSB7CiAgICAgICAgICAgIG4gPSAwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmIChuID4gbC5udW1iZXIpIHsKICAgICAgICAgICAgICAgIG4gPSBsLm51bWJlcjsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBiKG8sIG4sIGwpOwogICAgICAgIGlmIChuID4gMCkgewogICAgICAgICAgICBlKCJpbnB1dCMiICsgbyArICItc2NvcmUiKS52YWwobik7CiAgICAgICAgICAgIGlmIChsLmhhbGYpIHsKICAgICAgICAgICAgICAgIGMobSwgbiwgbCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGwucmVhZE9ubHkgfHwgbS5jc3MoImN1cnNvciIpID09ICJkZWZhdWx0IikgewogICAgICAgICAgICBrKG0sIG4sIGwpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBkKG8sIG4sIGwpIHsKICAgICAgICBpZiAobyAhPT0gbnVsbCkgewogICAgICAgICAgICB2YXIgbSA9IG47CiAgICAgICAgICAgIGlmIChsLnRhcmdldFR5cGUgPT0gImhpbnQiKSB7CiAgICAgICAgICAgICAgICBpZiAobiA9PSAwICYmIGwuY2FuY2VsKSB7CiAgICAgICAgICAgICAgICAgICAgbSA9IGwuY2FuY2VsSGludDsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgbSA9IGwuaGludExpc3RbbiAtIDFdOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChpKG8pKSB7CiAgICAgICAgICAgICAgICBvLnZhbChtKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIG8uaHRtbChtKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBjKG4sIHAsIG0pIHsKICAgICAgICB2YXIgcSA9IG4uYXR0cigiaWQiKSwgbCA9IE1hdGguY2VpbChwKSwgbyA9IChsIC0gcCkudG9GaXhlZCgxKTsKICAgICAgICBpZiAobyA+IDAuMjUgJiYgbyA8PSAwLjc1KSB7CiAgICAgICAgICAgIGwgPSBsIC0gMC41OwogICAgICAgICAgICBlKCJpbWcjIiArIHEgKyAiLSIgKyBNYXRoLmNlaWwobCkpLmF0dHIoInNyYyIsIG0ucGF0aCArIG0uc3RhckhhbGYpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmIChvID4gMC43NSkgewogICAgICAgICAgICAgICAgbC0tOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZSgiaW1nIyIgKyBxICsgIi0iICsgbCkuYXR0cigic3JjIiwgbS5wYXRoICsgbS5zdGFyT24pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIGUuZm4ucmF0eS5jYW5jZWwgPSBmdW5jdGlvbiAobCwgbikgewogICAgICAgIHZhciBtID0gKG4gPT09IHVuZGVmaW5lZCkgPyBmYWxzZSA6IHRydWU7CiAgICAgICAgaWYgKG0pIHsKICAgICAgICAgICAgcmV0dXJuIGUuZm4ucmF0eS5jbGljaygiIiwgbCwgImNhbmNlbCIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBlLmZuLnJhdHkuc3RhcnQoIiIsIGwsICJjYW5jZWwiKTsKICAgICAgICB9CiAgICB9OwogICAgZS5mbi5yYXR5LmNsaWNrID0gZnVuY3Rpb24gKG8sIG0pIHsKICAgICAgICB2YXIgbiA9IGoobywgbSwgImNsaWNrIiksIGwgPSBlKG0pLmRhdGEoIm9wdGlvbnMiKTsKICAgICAgICBpZiAobS5pbmRleE9mKCIuIikgPj0gMCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGcobiwgbywgbCk7CiAgICAgICAgaWYgKGwuY2xpY2spIHsKICAgICAgICAgICAgbC5jbGljay5hcHBseShuLCBbb10pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGEoJ1lvdSBtdXN0IGFkZCB0aGUgImNsaWNrOiBmdW5jdGlvbihzY29yZSwgZXZ0KSB7IH0iIGNhbGxiYWNrLicpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbjsKICAgIH07CiAgICBlLmZuLnJhdHkucmVhZE9ubHkgPSBmdW5jdGlvbiAobywgbSkgewogICAgICAgIHZhciBuID0gaihvLCBtLCAicmVhZE9ubHkiKSwgbCA9IGUobSkuZGF0YSgib3B0aW9ucyIpLCBwID0gbi5jaGlsZHJlbigiaW1nLmJ1dHRvbi1jYW5jZWwiKTsKICAgICAgICBpZiAobS5pbmRleE9mKCIuIikgPj0gMCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGlmIChwWzBdKSB7CiAgICAgICAgICAgIChvKSA/IHAuaGlkZSgpIDogcC5zaG93KCk7CiAgICAgICAgfQogICAgICAgIGlmIChvKSB7CiAgICAgICAgICAgIGUoImltZy4iICsgbi5hdHRyKCJpZCIpKS51bmJpbmQoKTsKICAgICAgICAgICAgbi5jc3MoImN1cnNvciIsICJkZWZhdWx0IikudW5iaW5kKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaChuLCBsKTsKICAgICAgICAgICAgbi5jc3MoImN1cnNvciIsICJwb2ludGVyIik7CiAgICAgICAgfQogICAgICAgIHJldHVybiBuOwogICAgfTsKICAgIGUuZm4ucmF0eS5zdGFydCA9IGZ1bmN0aW9uIChvLCBtKSB7CiAgICAgICAgdmFyIG4gPSBqKG8sIG0sICJzdGFydCIpLCBsID0gZShtKS5kYXRhKCJvcHRpb25zIik7CiAgICAgICAgaWYgKG0uaW5kZXhPZigiLiIpID49IDApIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBnKG4sIG8sIGwpOwogICAgICAgIHJldHVybiBuOwogICAgfTsKICAgIGZ1bmN0aW9uIGoocCwgbSwgbCkgewogICAgICAgIHZhciBuID0gdW5kZWZpbmVkOwogICAgICAgIGlmIChtID09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBhKCJTcGVjaWZ5IGFuIElEIG9yIGNsYXNzIHRvIGJlIHRoZSB0YXJnZXQgb2YgdGhlIGFjdGlvbi4iKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAobSkgewogICAgICAgICAgICBpZiAobS5pbmRleE9mKCIuIikgPj0gMCkgewogICAgICAgICAgICAgICAgdmFyIG87CiAgICAgICAgICAgICAgICByZXR1cm4gZShtKS5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBvID0gIiMiICsgZSh0aGlzKS5hdHRyKCJpZCIpOwogICAgICAgICAgICAgICAgICAgIGlmIChsID09ICJzdGFydCIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZS5mbi5yYXR5LnN0YXJ0KHAsIG8pOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsID09ICJjbGljayIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuZm4ucmF0eS5jbGljayhwLCBvKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsID09ICJyZWFkT25seSIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmZuLnJhdHkucmVhZE9ubHkocCwgbyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBuID0gZShtKTsKICAgICAgICAgICAgaWYgKCFuLmxlbmd0aCkgewogICAgICAgICAgICAgICAgYSgnIicgKyBtICsgJyIgaXMgYSBpbnZhbGlkIGlkZW50aWZpZXIgZm9yIHRoZSBwdWJsaWMgZnVudGlvbiAkLmZuLnJhdHkuJyArIGwgKyAiKCkuIik7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIG47CiAgICB9CgogICAgZnVuY3Rpb24gYShsKSB7CiAgICAgICAgaWYgKHdpbmRvdy5jb25zb2xlICYmIHdpbmRvdy5jb25zb2xlLmxvZykgewogICAgICAgICAgICB3aW5kb3cuY29uc29sZS5sb2cobCk7CiAgICAgICAgfQogICAgfQoKICAgIGUuZm4ucmF0eS5kZWZhdWx0cyA9IHsKICAgICAgICBjYW5jZWw6IGZhbHNlLAogICAgICAgIGNhbmNlbEhpbnQ6ICJjYW5jZWwgdGhpcyByYXRpbmchIiwKICAgICAgICBjYW5jZWxPZmY6ICJjYW5jZWwtb2ZmLnBuZyIsCiAgICAgICAgY2FuY2VsT246ICJjYW5jZWwtb24ucG5nIiwKICAgICAgICBjYW5jZWxQbGFjZTogImxlZnQiLAogICAgICAgIGNsaWNrOiBudWxsLAogICAgICAgIGhhbGY6IGZhbHNlLAogICAgICAgIGhpbnRMaXN0OiBbIjEiLCAiMiIsICIzIiwgIjQiLCAiNSJdLAogICAgICAgIG5vUmF0ZWRNc2c6ICJub3QgcmF0ZWQgeWV0IiwKICAgICAgICBudW1iZXI6IDUsCiAgICAgICAgcGF0aDogIi9hc3NldHMvaW1hZ2VzLyIsCiAgICAgICAgaWNvblJhbmdlOiBbXSwKICAgICAgICByZWFkT25seTogZmFsc2UsCiAgICAgICAgc2NvcmVOYW1lOiAic2NvcmUiLAogICAgICAgIHNpemU6IDE2LAogICAgICAgIHN0YXJIYWxmOiAic3Rhci1oYWxmLnBuZyIsCiAgICAgICAgc3Rhck9mZjogInN0YXItb2ZmLnBuZyIsCiAgICAgICAgc3Rhck9uOiAic3Rhci1vbi5wbmciLAogICAgICAgIHN0YXJ0OiAwLAogICAgICAgIHRhcmdldDogbnVsbCwKICAgICAgICB0YXJnZXRLZWVwOiBmYWxzZSwKICAgICAgICB0YXJnZXRUeXBlOiAiaGludCIsCiAgICAgICAgd2lkdGg6IG51bGwKICAgIH07Cn0pKGpRdWVyeSk7CgoKCiFmdW5jdGlvbihlLHQpeyJvYmplY3QiPT10eXBlb2YgZXhwb3J0cyYmInVuZGVmaW5lZCIhPXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9dCgpOiJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKHQpOmUuQU9TPXQoKX0odGhpcyxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT0idW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOnt9LHQ9IkV4cGVjdGVkIGEgZnVuY3Rpb24iLG49TmFOLG89IltvYmplY3QgU3ltYm9sXSIsaT0vXlxzK3xccyskL2csYT0vXlstK10weFswLTlhLWZdKyQvaSxyPS9eMGJbMDFdKyQvaSxjPS9eMG9bMC03XSskL2kscz1wYXJzZUludCx1PSJvYmplY3QiPT10eXBlb2YgZSYmZSYmZS5PYmplY3Q9PT1PYmplY3QmJmUsZD0ib2JqZWN0Ij09dHlwZW9mIHNlbGYmJnNlbGYmJnNlbGYuT2JqZWN0PT09T2JqZWN0JiZzZWxmLGw9dXx8ZHx8RnVuY3Rpb24oInJldHVybiB0aGlzIikoKSxmPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsbT1NYXRoLm1heCxwPU1hdGgubWluLGI9ZnVuY3Rpb24oKXtyZXR1cm4gbC5EYXRlLm5vdygpfTtmdW5jdGlvbiB2KGUsbixvKXt2YXIgaSxhLHIsYyxzLHUsZD0wLGw9ITEsZj0hMSx2PSEwO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IodCk7ZnVuY3Rpb24geSh0KXt2YXIgbj1pLG89YTtyZXR1cm4gaT1hPXZvaWQgMCxkPXQsYz1lLmFwcGx5KG8sbil9ZnVuY3Rpb24gaChlKXt2YXIgdD1lLXU7cmV0dXJuIHZvaWQgMD09PXV8fHQ+PW58fHQ8MHx8ZiYmZS1kPj1yfWZ1bmN0aW9uIGsoKXt2YXIgZT1iKCk7aWYoaChlKSlyZXR1cm4geChlKTtzPXNldFRpbWVvdXQoayxmdW5jdGlvbihlKXt2YXIgdD1uLShlLXUpO3JldHVybiBmP3AodCxyLShlLWQpKTp0fShlKSl9ZnVuY3Rpb24geChlKXtyZXR1cm4gcz12b2lkIDAsdiYmaT95KGUpOihpPWE9dm9pZCAwLGMpfWZ1bmN0aW9uIE8oKXt2YXIgZT1iKCksdD1oKGUpO2lmKGk9YXJndW1lbnRzLGE9dGhpcyx1PWUsdCl7aWYodm9pZCAwPT09cylyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGQ9ZSxzPXNldFRpbWVvdXQoayxuKSxsP3koZSk6Y30odSk7aWYoZilyZXR1cm4gcz1zZXRUaW1lb3V0KGssbikseSh1KX1yZXR1cm4gdm9pZCAwPT09cyYmKHM9c2V0VGltZW91dChrLG4pKSxjfXJldHVybiBuPXcobil8fDAsZyhvKSYmKGw9ISFvLmxlYWRpbmcscj0oZj0ibWF4V2FpdCJpbiBvKT9tKHcoby5tYXhXYWl0KXx8MCxuKTpyLHY9InRyYWlsaW5nImluIG8/ISFvLnRyYWlsaW5nOnYpLE8uY2FuY2VsPWZ1bmN0aW9uKCl7dm9pZCAwIT09cyYmY2xlYXJUaW1lb3V0KHMpLGQ9MCxpPXU9YT1zPXZvaWQgMH0sTy5mbHVzaD1mdW5jdGlvbigpe3JldHVybiB2b2lkIDA9PT1zP2M6eChiKCkpfSxPfWZ1bmN0aW9uIGcoZSl7dmFyIHQ9dHlwZW9mIGU7cmV0dXJuISFlJiYoIm9iamVjdCI9PXR8fCJmdW5jdGlvbiI9PXQpfWZ1bmN0aW9uIHcoZSl7aWYoIm51bWJlciI9PXR5cGVvZiBlKXJldHVybiBlO2lmKGZ1bmN0aW9uKGUpe3JldHVybiJzeW1ib2wiPT10eXBlb2YgZXx8ZnVuY3Rpb24oZSl7cmV0dXJuISFlJiYib2JqZWN0Ij09dHlwZW9mIGV9KGUpJiZmLmNhbGwoZSk9PW99KGUpKXJldHVybiBuO2lmKGcoZSkpe3ZhciB0PSJmdW5jdGlvbiI9PXR5cGVvZiBlLnZhbHVlT2Y/ZS52YWx1ZU9mKCk6ZTtlPWcodCk/dCsiIjp0fWlmKCJzdHJpbmciIT10eXBlb2YgZSlyZXR1cm4gMD09PWU/ZTorZTtlPWUucmVwbGFjZShpLCIiKTt2YXIgdT1yLnRlc3QoZSk7cmV0dXJuIHV8fGMudGVzdChlKT9zKGUuc2xpY2UoMiksdT8yOjgpOmEudGVzdChlKT9uOitlfXZhciB5PWZ1bmN0aW9uKGUsbixvKXt2YXIgaT0hMCxhPSEwO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IodCk7cmV0dXJuIGcobykmJihpPSJsZWFkaW5nImluIG8/ISFvLmxlYWRpbmc6aSxhPSJ0cmFpbGluZyJpbiBvPyEhby50cmFpbGluZzphKSx2KGUsbix7bGVhZGluZzppLG1heFdhaXQ6bix0cmFpbGluZzphfSl9LGg9IkV4cGVjdGVkIGEgZnVuY3Rpb24iLGs9TmFOLHg9IltvYmplY3QgU3ltYm9sXSIsTz0vXlxzK3xccyskL2csaj0vXlstK10weFswLTlhLWZdKyQvaSxFPS9eMGJbMDFdKyQvaSxOPS9eMG9bMC03XSskL2ksej1wYXJzZUludCxDPSJvYmplY3QiPT10eXBlb2YgZSYmZSYmZS5PYmplY3Q9PT1PYmplY3QmJmUsQT0ib2JqZWN0Ij09dHlwZW9mIHNlbGYmJnNlbGYmJnNlbGYuT2JqZWN0PT09T2JqZWN0JiZzZWxmLHE9Q3x8QXx8RnVuY3Rpb24oInJldHVybiB0aGlzIikoKSxMPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsVD1NYXRoLm1heCxNPU1hdGgubWluLFM9ZnVuY3Rpb24oKXtyZXR1cm4gcS5EYXRlLm5vdygpfTtmdW5jdGlvbiBEKGUpe3ZhciB0PXR5cGVvZiBlO3JldHVybiEhZSYmKCJvYmplY3QiPT10fHwiZnVuY3Rpb24iPT10KX1mdW5jdGlvbiBIKGUpe2lmKCJudW1iZXIiPT10eXBlb2YgZSlyZXR1cm4gZTtpZihmdW5jdGlvbihlKXtyZXR1cm4ic3ltYm9sIj09dHlwZW9mIGV8fGZ1bmN0aW9uKGUpe3JldHVybiEhZSYmIm9iamVjdCI9PXR5cGVvZiBlfShlKSYmTC5jYWxsKGUpPT14fShlKSlyZXR1cm4gaztpZihEKGUpKXt2YXIgdD0iZnVuY3Rpb24iPT10eXBlb2YgZS52YWx1ZU9mP2UudmFsdWVPZigpOmU7ZT1EKHQpP3QrIiI6dH1pZigic3RyaW5nIiE9dHlwZW9mIGUpcmV0dXJuIDA9PT1lP2U6K2U7ZT1lLnJlcGxhY2UoTywiIik7dmFyIG49RS50ZXN0KGUpO3JldHVybiBufHxOLnRlc3QoZSk/eihlLnNsaWNlKDIpLG4/Mjo4KTpqLnRlc3QoZSk/azorZX12YXIgJD1mdW5jdGlvbihlLHQsbil7dmFyIG8saSxhLHIsYyxzLHU9MCxkPSExLGw9ITEsZj0hMDtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKGgpO2Z1bmN0aW9uIG0odCl7dmFyIG49byxhPWk7cmV0dXJuIG89aT12b2lkIDAsdT10LHI9ZS5hcHBseShhLG4pfWZ1bmN0aW9uIHAoZSl7dmFyIG49ZS1zO3JldHVybiB2b2lkIDA9PT1zfHxuPj10fHxuPDB8fGwmJmUtdT49YX1mdW5jdGlvbiBiKCl7dmFyIGU9UygpO2lmKHAoZSkpcmV0dXJuIHYoZSk7Yz1zZXRUaW1lb3V0KGIsZnVuY3Rpb24oZSl7dmFyIG49dC0oZS1zKTtyZXR1cm4gbD9NKG4sYS0oZS11KSk6bn0oZSkpfWZ1bmN0aW9uIHYoZSl7cmV0dXJuIGM9dm9pZCAwLGYmJm8/bShlKToobz1pPXZvaWQgMCxyKX1mdW5jdGlvbiBnKCl7dmFyIGU9UygpLG49cChlKTtpZihvPWFyZ3VtZW50cyxpPXRoaXMscz1lLG4pe2lmKHZvaWQgMD09PWMpcmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiB1PWUsYz1zZXRUaW1lb3V0KGIsdCksZD9tKGUpOnJ9KHMpO2lmKGwpcmV0dXJuIGM9c2V0VGltZW91dChiLHQpLG0ocyl9cmV0dXJuIHZvaWQgMD09PWMmJihjPXNldFRpbWVvdXQoYix0KSkscn1yZXR1cm4gdD1IKHQpfHwwLEQobikmJihkPSEhbi5sZWFkaW5nLGE9KGw9Im1heFdhaXQiaW4gbik/VChIKG4ubWF4V2FpdCl8fDAsdCk6YSxmPSJ0cmFpbGluZyJpbiBuPyEhbi50cmFpbGluZzpmKSxnLmNhbmNlbD1mdW5jdGlvbigpe3ZvaWQgMCE9PWMmJmNsZWFyVGltZW91dChjKSx1PTAsbz1zPWk9Yz12b2lkIDB9LGcuZmx1c2g9ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwPT09Yz9yOnYoUygpKX0sZ30sVz1mdW5jdGlvbigpe307ZnVuY3Rpb24gUChlKXtlJiZlLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZS5hZGRlZE5vZGVzKSxuPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGUucmVtb3ZlZE5vZGVzKTtpZihmdW5jdGlvbiBlKHQpe3ZhciBuPXZvaWQgMCxvPXZvaWQgMDtmb3Iobj0wO248dC5sZW5ndGg7bis9MSl7aWYoKG89dFtuXSkuZGF0YXNldCYmby5kYXRhc2V0LmFvcylyZXR1cm4hMDtpZihvLmNoaWxkcmVuJiZlKG8uY2hpbGRyZW4pKXJldHVybiEwfXJldHVybiExfSh0LmNvbmNhdChuKSkpcmV0dXJuIFcoKX0pfWZ1bmN0aW9uIFkoKXtyZXR1cm4gd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXJ8fHdpbmRvdy5XZWJLaXRNdXRhdGlvbk9ic2VydmVyfHx3aW5kb3cuTW96TXV0YXRpb25PYnNlcnZlcn12YXIgXz17aXNTdXBwb3J0ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIVkoKX0scmVhZHk6ZnVuY3Rpb24oZSx0KXt2YXIgbj13aW5kb3cuZG9jdW1lbnQsbz1uZXcoWSgpKShQKTtXPXQsby5vYnNlcnZlKG4uZG9jdW1lbnRFbGVtZW50LHtjaGlsZExpc3Q6ITAsc3VidHJlZTohMCxyZW1vdmVkTm9kZXM6ITB9KX19LEI9ZnVuY3Rpb24oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX0sRj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIG89dFtuXTtvLmVudW1lcmFibGU9by5lbnVtZXJhYmxlfHwhMSxvLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gbyYmKG8ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG8ua2V5LG8pfX1yZXR1cm4gZnVuY3Rpb24odCxuLG8pe3JldHVybiBuJiZlKHQucHJvdG90eXBlLG4pLG8mJmUodCxvKSx0fX0oKSxJPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0xO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspe3ZhciBuPWFyZ3VtZW50c1t0XTtmb3IodmFyIG8gaW4gbilPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobixvKSYmKGVbb109bltvXSl9cmV0dXJuIGV9LEs9LyhhbmRyb2lkfGJiXGQrfG1lZWdvKS4rbW9iaWxlfGF2YW50Z298YmFkYVwvfGJsYWNrYmVycnl8YmxhemVyfGNvbXBhbHxlbGFpbmV8ZmVubmVjfGhpcHRvcHxpZW1vYmlsZXxpcChob25lfG9kKXxpcmlzfGtpbmRsZXxsZ2UgfG1hZW1vfG1pZHB8bW1wfG1vYmlsZS4rZmlyZWZveHxuZXRmcm9udHxvcGVyYSBtKG9ifGluKWl8cGFsbSggb3MpP3xwaG9uZXxwKGl4aXxyZSlcL3xwbHVja2VyfHBvY2tldHxwc3B8c2VyaWVzKDR8NikwfHN5bWJpYW58dHJlb3x1cFwuKGJyb3dzZXJ8bGluayl8dm9kYWZvbmV8d2FwfHdpbmRvd3MgY2V8eGRhfHhpaW5vL2ksRz0vMTIwN3w2MzEwfDY1OTB8M2dzb3w0dGhwfDUwWzEtNl1pfDc3MHN8ODAyc3xhIHdhfGFiYWN8YWMoZXJ8b298c1wtKXxhaShrb3xybil8YWwoYXZ8Y2F8Y28pfGFtb2l8YW4oZXh8bnl8eXcpfGFwdHV8YXIoY2h8Z28pfGFzKHRlfHVzKXxhdHR3fGF1KGRpfFwtbXxyIHxzICl8YXZhbnxiZShja3xsbHxucSl8YmkobGJ8cmQpfGJsKGFjfGF6KXxicihlfHYpd3xidW1ifGJ3XC0obnx1KXxjNTVcL3xjYXBpfGNjd2F8Y2RtXC18Y2VsbHxjaHRtfGNsZGN8Y21kXC18Y28obXB8bmQpfGNyYXd8ZGEoaXR8bGx8bmcpfGRidGV8ZGNcLXN8ZGV2aXxkaWNhfGRtb2J8ZG8oY3xwKW98ZHMoMTJ8XC1kKXxlbCg0OXxhaSl8ZW0obDJ8dWwpfGVyKGljfGswKXxlc2w4fGV6KFs0LTddMHxvc3x3YXx6ZSl8ZmV0Y3xmbHkoXC18Xyl8ZzEgdXxnNTYwfGdlbmV8Z2ZcLTV8Z1wtbW98Z28oXC53fG9kKXxncihhZHx1bil8aGFpZXxoY2l0fGhkXC0obXxwfHQpfGhlaVwtfGhpKHB0fHRhKXxocCggaXxpcCl8aHNcLWN8aHQoYyhcLXwgfF98YXxnfHB8c3x0KXx0cCl8aHUoYXd8dGMpfGlcLSgyMHxnb3xtYSl8aTIzMHxpYWMoIHxcLXxcLyl8aWJyb3xpZGVhfGlnMDF8aWtvbXxpbTFrfGlubm98aXBhcXxpcmlzfGphKHR8dilhfGpicm98amVtdXxqaWdzfGtkZGl8a2VqaXxrZ3QoIHxcLyl8a2xvbnxrcHQgfGt3Y1wtfGt5byhjfGspfGxlKG5vfHhpKXxsZyggZ3xcLyhrfGx8dSl8NTB8NTR8XC1bYS13XSl8bGlid3xseW54fG0xXC13fG0zZ2F8bTUwXC98bWEodGV8dWl8eG8pfG1jKDAxfDIxfGNhKXxtXC1jcnxtZShyY3xyaSl8bWkobzh8b2F8dHMpfG1tZWZ8bW8oMDF8MDJ8Yml8ZGV8ZG98dChcLXwgfG98dil8enopfG10KDUwfHAxfHYgKXxtd2JwfG15d2F8bjEwWzAtMl18bjIwWzItM118bjMwKDB8Mil8bjUwKDB8Mnw1KXxuNygwKDB8MSl8MTApfG5lKChjfG0pXC18b258dGZ8d2Z8d2d8d3QpfG5vayg2fGkpfG56cGh8bzJpbXxvcCh0aXx3dil8b3Jhbnxvd2cxfHA4MDB8cGFuKGF8ZHx0KXxwZHhnfHBnKDEzfFwtKFsxLThdfGMpKXxwaGlsfHBpcmV8cGwoYXl8dWMpfHBuXC0yfHBvKGNrfHJ0fHNlKXxwcm94fHBzaW98cHRcLWd8cWFcLWF8cWMoMDd8MTJ8MjF8MzJ8NjB8XC1bMi03XXxpXC0pfHF0ZWt8cjM4MHxyNjAwfHJha3N8cmltOXxybyh2ZXx6byl8czU1XC98c2EoZ2V8bWF8bW18bXN8bnl8dmEpfHNjKDAxfGhcLXxvb3xwXC0pfHNka1wvfHNlKGMoXC18MHwxKXw0N3xtY3xuZHxyaSl8c2doXC18c2hhcnxzaWUoXC18bSl8c2tcLTB8c2woNDV8aWQpfHNtKGFsfGFyfGIzfGl0fHQ1KXxzbyhmdHxueSl8c3AoMDF8aFwtfHZcLXx2ICl8c3koMDF8bWIpfHQyKDE4fDUwKXx0NigwMHwxMHwxOCl8dGEoZ3R8bGspfHRjbFwtfHRkZ1wtfHRlbChpfG0pfHRpbVwtfHRcLW1vfHRvKHBsfHNoKXx0cyg3MHxtXC18bTN8bTUpfHR4XC05fHVwKFwuYnxnMXxzaSl8dXRzdHx2NDAwfHY3NTB8dmVyaXx2aShyZ3x0ZSl8dmsoNDB8NVswLTNdfFwtdil8dm00MHx2b2RhfHZ1bGN8dngoNTJ8NTN8NjB8NjF8NzB8ODB8ODF8ODN8ODV8OTgpfHczYyhcLXwgKXx3ZWJjfHdoaXR8d2koZyB8bmN8bncpfHdtbGJ8d29udXx4NzAwfHlhc1wtfHlvdXJ8emV0b3x6dGVcLS9pLEo9LyhhbmRyb2lkfGJiXGQrfG1lZWdvKS4rbW9iaWxlfGF2YW50Z298YmFkYVwvfGJsYWNrYmVycnl8YmxhemVyfGNvbXBhbHxlbGFpbmV8ZmVubmVjfGhpcHRvcHxpZW1vYmlsZXxpcChob25lfG9kKXxpcmlzfGtpbmRsZXxsZ2UgfG1hZW1vfG1pZHB8bW1wfG1vYmlsZS4rZmlyZWZveHxuZXRmcm9udHxvcGVyYSBtKG9ifGluKWl8cGFsbSggb3MpP3xwaG9uZXxwKGl4aXxyZSlcL3xwbHVja2VyfHBvY2tldHxwc3B8c2VyaWVzKDR8NikwfHN5bWJpYW58dHJlb3x1cFwuKGJyb3dzZXJ8bGluayl8dm9kYWZvbmV8d2FwfHdpbmRvd3MgY2V8eGRhfHhpaW5vfGFuZHJvaWR8aXBhZHxwbGF5Ym9va3xzaWxrL2ksUT0vMTIwN3w2MzEwfDY1OTB8M2dzb3w0dGhwfDUwWzEtNl1pfDc3MHN8ODAyc3xhIHdhfGFiYWN8YWMoZXJ8b298c1wtKXxhaShrb3xybil8YWwoYXZ8Y2F8Y28pfGFtb2l8YW4oZXh8bnl8eXcpfGFwdHV8YXIoY2h8Z28pfGFzKHRlfHVzKXxhdHR3fGF1KGRpfFwtbXxyIHxzICl8YXZhbnxiZShja3xsbHxucSl8YmkobGJ8cmQpfGJsKGFjfGF6KXxicihlfHYpd3xidW1ifGJ3XC0obnx1KXxjNTVcL3xjYXBpfGNjd2F8Y2RtXC18Y2VsbHxjaHRtfGNsZGN8Y21kXC18Y28obXB8bmQpfGNyYXd8ZGEoaXR8bGx8bmcpfGRidGV8ZGNcLXN8ZGV2aXxkaWNhfGRtb2J8ZG8oY3xwKW98ZHMoMTJ8XC1kKXxlbCg0OXxhaSl8ZW0obDJ8dWwpfGVyKGljfGswKXxlc2w4fGV6KFs0LTddMHxvc3x3YXx6ZSl8ZmV0Y3xmbHkoXC18Xyl8ZzEgdXxnNTYwfGdlbmV8Z2ZcLTV8Z1wtbW98Z28oXC53fG9kKXxncihhZHx1bil8aGFpZXxoY2l0fGhkXC0obXxwfHQpfGhlaVwtfGhpKHB0fHRhKXxocCggaXxpcCl8aHNcLWN8aHQoYyhcLXwgfF98YXxnfHB8c3x0KXx0cCl8aHUoYXd8dGMpfGlcLSgyMHxnb3xtYSl8aTIzMHxpYWMoIHxcLXxcLyl8aWJyb3xpZGVhfGlnMDF8aWtvbXxpbTFrfGlubm98aXBhcXxpcmlzfGphKHR8dilhfGpicm98amVtdXxqaWdzfGtkZGl8a2VqaXxrZ3QoIHxcLyl8a2xvbnxrcHQgfGt3Y1wtfGt5byhjfGspfGxlKG5vfHhpKXxsZyggZ3xcLyhrfGx8dSl8NTB8NTR8XC1bYS13XSl8bGlid3xseW54fG0xXC13fG0zZ2F8bTUwXC98bWEodGV8dWl8eG8pfG1jKDAxfDIxfGNhKXxtXC1jcnxtZShyY3xyaSl8bWkobzh8b2F8dHMpfG1tZWZ8bW8oMDF8MDJ8Yml8ZGV8ZG98dChcLXwgfG98dil8enopfG10KDUwfHAxfHYgKXxtd2JwfG15d2F8bjEwWzAtMl18bjIwWzItM118bjMwKDB8Mil8bjUwKDB8Mnw1KXxuNygwKDB8MSl8MTApfG5lKChjfG0pXC18b258dGZ8d2Z8d2d8d3QpfG5vayg2fGkpfG56cGh8bzJpbXxvcCh0aXx3dil8b3Jhbnxvd2cxfHA4MDB8cGFuKGF8ZHx0KXxwZHhnfHBnKDEzfFwtKFsxLThdfGMpKXxwaGlsfHBpcmV8cGwoYXl8dWMpfHBuXC0yfHBvKGNrfHJ0fHNlKXxwcm94fHBzaW98cHRcLWd8cWFcLWF8cWMoMDd8MTJ8MjF8MzJ8NjB8XC1bMi03XXxpXC0pfHF0ZWt8cjM4MHxyNjAwfHJha3N8cmltOXxybyh2ZXx6byl8czU1XC98c2EoZ2V8bWF8bW18bXN8bnl8dmEpfHNjKDAxfGhcLXxvb3xwXC0pfHNka1wvfHNlKGMoXC18MHwxKXw0N3xtY3xuZHxyaSl8c2doXC18c2hhcnxzaWUoXC18bSl8c2tcLTB8c2woNDV8aWQpfHNtKGFsfGFyfGIzfGl0fHQ1KXxzbyhmdHxueSl8c3AoMDF8aFwtfHZcLXx2ICl8c3koMDF8bWIpfHQyKDE4fDUwKXx0NigwMHwxMHwxOCl8dGEoZ3R8bGspfHRjbFwtfHRkZ1wtfHRlbChpfG0pfHRpbVwtfHRcLW1vfHRvKHBsfHNoKXx0cyg3MHxtXC18bTN8bTUpfHR4XC05fHVwKFwuYnxnMXxzaSl8dXRzdHx2NDAwfHY3NTB8dmVyaXx2aShyZ3x0ZSl8dmsoNDB8NVswLTNdfFwtdil8dm00MHx2b2RhfHZ1bGN8dngoNTJ8NTN8NjB8NjF8NzB8ODB8ODF8ODN8ODV8OTgpfHczYyhcLXwgKXx3ZWJjfHdoaXR8d2koZyB8bmN8bncpfHdtbGJ8d29udXx4NzAwfHlhc1wtfHlvdXJ8emV0b3x6dGVcLS9pO2Z1bmN0aW9uIFIoKXtyZXR1cm4gbmF2aWdhdG9yLnVzZXJBZ2VudHx8bmF2aWdhdG9yLnZlbmRvcnx8d2luZG93Lm9wZXJhfHwiIn12YXIgVT1uZXcoZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7Qih0aGlzLGUpfXJldHVybiBGKGUsW3trZXk6InBob25lIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPVIoKTtyZXR1cm4hKCFLLnRlc3QoZSkmJiFHLnRlc3QoZS5zdWJzdHIoMCw0KSkpfX0se2tleToibW9iaWxlIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPVIoKTtyZXR1cm4hKCFKLnRlc3QoZSkmJiFRLnRlc3QoZS5zdWJzdHIoMCw0KSkpfX0se2tleToidGFibGV0Iix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1vYmlsZSgpJiYhdGhpcy5waG9uZSgpfX0se2tleToiaWUxMSIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4iLW1zLXNjcm9sbC1saW1pdCJpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUmJiItbXMtaW1lLWFsaWduImluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZX19XSksZX0oKSksVj1mdW5jdGlvbihlLHQpe3ZhciBuPXZvaWQgMDtyZXR1cm4gVS5pZTExKCk/KG49ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkN1c3RvbUV2ZW50IikpLmluaXRDdXN0b21FdmVudChlLCEwLCEwLHtkZXRhaWw6dH0pOm49bmV3IEN1c3RvbUV2ZW50KGUse2RldGFpbDp0fSksZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChuKX0sWD1mdW5jdGlvbihlKXtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5vcHRpb25zLG89ZS5wb3NpdGlvbixpPWUubm9kZSxhPShlLmRhdGEsZnVuY3Rpb24oKXtlLmFuaW1hdGVkJiYoZnVuY3Rpb24oZSx0KXt0JiZ0LmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIGUuY2xhc3NMaXN0LnJlbW92ZSh0KX0pfShpLG4uYW5pbWF0ZWRDbGFzc05hbWVzKSxWKCJhb3M6b3V0IixpKSxlLm9wdGlvbnMuaWQmJlYoImFvczppbjoiK2Uub3B0aW9ucy5pZCxpKSxlLmFuaW1hdGVkPSExKX0pO24ubWlycm9yJiZ0Pj1vLm91dCYmIW4ub25jZT9hKCk6dD49by5pbj9lLmFuaW1hdGVkfHwoZnVuY3Rpb24oZSx0KXt0JiZ0LmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIGUuY2xhc3NMaXN0LmFkZCh0KX0pfShpLG4uYW5pbWF0ZWRDbGFzc05hbWVzKSxWKCJhb3M6aW4iLGkpLGUub3B0aW9ucy5pZCYmVigiYW9zOmluOiIrZS5vcHRpb25zLmlkLGkpLGUuYW5pbWF0ZWQ9ITApOmUuYW5pbWF0ZWQmJiFuLm9uY2UmJmEoKX0oZSx3aW5kb3cucGFnZVlPZmZzZXQpfSl9LFo9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTAsbj0wO2UmJiFpc05hTihlLm9mZnNldExlZnQpJiYhaXNOYU4oZS5vZmZzZXRUb3ApOyl0Kz1lLm9mZnNldExlZnQtKCJCT0RZIiE9ZS50YWdOYW1lP2Uuc2Nyb2xsTGVmdDowKSxuKz1lLm9mZnNldFRvcC0oIkJPRFkiIT1lLnRhZ05hbWU/ZS5zY3JvbGxUb3A6MCksZT1lLm9mZnNldFBhcmVudDtyZXR1cm57dG9wOm4sbGVmdDp0fX0sZWU9ZnVuY3Rpb24oZSx0LG4pe3ZhciBvPWUuZ2V0QXR0cmlidXRlKCJkYXRhLWFvcy0iK3QpO2lmKHZvaWQgMCE9PW8pe2lmKCJ0cnVlIj09PW8pcmV0dXJuITA7aWYoImZhbHNlIj09PW8pcmV0dXJuITF9cmV0dXJuIG98fG59LHRlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuZm9yRWFjaChmdW5jdGlvbihlLG4pe3ZhciBvPWVlKGUubm9kZSwibWlycm9yIix0Lm1pcnJvciksaT1lZShlLm5vZGUsIm9uY2UiLHQub25jZSksYT1lZShlLm5vZGUsImlkIikscj10LnVzZUNsYXNzTmFtZXMmJmUubm9kZS5nZXRBdHRyaWJ1dGUoImRhdGEtYW9zIiksYz1bdC5hbmltYXRlZENsYXNzTmFtZV0uY29uY2F0KHI/ci5zcGxpdCgiICIpOltdKS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiBlfSk7dC5pbml0Q2xhc3NOYW1lJiZlLm5vZGUuY2xhc3NMaXN0LmFkZCh0LmluaXRDbGFzc05hbWUpLGUucG9zaXRpb249e2luOmZ1bmN0aW9uKGUsdCxuKXt2YXIgbz13aW5kb3cuaW5uZXJIZWlnaHQsaT1lZShlLCJhbmNob3IiKSxhPWVlKGUsImFuY2hvci1wbGFjZW1lbnQiKSxyPU51bWJlcihlZShlLCJvZmZzZXQiLGE/MDp0KSksYz1hfHxuLHM9ZTtpJiZkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGkpJiYocz1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGkpWzBdKTt2YXIgdT1aKHMpLnRvcC1vO3N3aXRjaChjKXtjYXNlInRvcC1ib3R0b20iOmJyZWFrO2Nhc2UiY2VudGVyLWJvdHRvbSI6dSs9cy5vZmZzZXRIZWlnaHQvMjticmVhaztjYXNlImJvdHRvbS1ib3R0b20iOnUrPXMub2Zmc2V0SGVpZ2h0O2JyZWFrO2Nhc2UidG9wLWNlbnRlciI6dSs9by8yO2JyZWFrO2Nhc2UiY2VudGVyLWNlbnRlciI6dSs9by8yK3Mub2Zmc2V0SGVpZ2h0LzI7YnJlYWs7Y2FzZSJib3R0b20tY2VudGVyIjp1Kz1vLzIrcy5vZmZzZXRIZWlnaHQ7YnJlYWs7Y2FzZSJ0b3AtdG9wIjp1Kz1vO2JyZWFrO2Nhc2UiYm90dG9tLXRvcCI6dSs9bytzLm9mZnNldEhlaWdodDticmVhaztjYXNlImNlbnRlci10b3AiOnUrPW8rcy5vZmZzZXRIZWlnaHQvMn1yZXR1cm4gdStyfShlLm5vZGUsdC5vZmZzZXQsdC5hbmNob3JQbGFjZW1lbnQpLG91dDpvJiZmdW5jdGlvbihlLHQpe3dpbmRvdy5pbm5lckhlaWdodDt2YXIgbj1lZShlLCJhbmNob3IiKSxvPWVlKGUsIm9mZnNldCIsdCksaT1lO3JldHVybiBuJiZkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKG4pJiYoaT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKG4pWzBdKSxaKGkpLnRvcCtpLm9mZnNldEhlaWdodC1vfShlLm5vZGUsdC5vZmZzZXQpfSxlLm9wdGlvbnM9e29uY2U6aSxtaXJyb3I6byxhbmltYXRlZENsYXNzTmFtZXM6YyxpZDphfX0pLGV9LG5lPWZ1bmN0aW9uKCl7dmFyIGU9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiW2RhdGEtYW9zXSIpO3JldHVybiBBcnJheS5wcm90b3R5cGUubWFwLmNhbGwoZSxmdW5jdGlvbihlKXtyZXR1cm57bm9kZTplfX0pfSxvZT1bXSxpZT0hMSxhZT17b2Zmc2V0OjEyMCxkZWxheTowLGVhc2luZzoiZWFzZSIsZHVyYXRpb246NDAwLGRpc2FibGU6ITEsb25jZTohMSxtaXJyb3I6ITEsYW5jaG9yUGxhY2VtZW50OiJ0b3AtYm90dG9tIixzdGFydEV2ZW50OiJET01Db250ZW50TG9hZGVkIixhbmltYXRlZENsYXNzTmFtZToiYW9zLWFuaW1hdGUiLGluaXRDbGFzc05hbWU6ImFvcy1pbml0Iix1c2VDbGFzc05hbWVzOiExLGRpc2FibGVNdXRhdGlvbk9ic2VydmVyOiExLHRocm90dGxlRGVsYXk6OTksZGVib3VuY2VEZWxheTo1MH0scmU9ZnVuY3Rpb24oKXtyZXR1cm4gZG9jdW1lbnQuYWxsJiYhd2luZG93LmF0b2J9LGNlPWZ1bmN0aW9uKCl7YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0mJmFyZ3VtZW50c1swXSYmKGllPSEwKSxpZSYmKG9lPXRlKG9lLGFlKSxYKG9lKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigic2Nyb2xsIix5KGZ1bmN0aW9uKCl7WChvZSxhZS5vbmNlKX0sYWUudGhyb3R0bGVEZWxheSkpKX0sc2U9ZnVuY3Rpb24oKXtpZihvZT1uZSgpLGRlKGFlLmRpc2FibGUpfHxyZSgpKXJldHVybiB1ZSgpO2NlKCl9LHVlPWZ1bmN0aW9uKCl7b2UuZm9yRWFjaChmdW5jdGlvbihlLHQpe2Uubm9kZS5yZW1vdmVBdHRyaWJ1dGUoImRhdGEtYW9zIiksZS5ub2RlLnJlbW92ZUF0dHJpYnV0ZSgiZGF0YS1hb3MtZWFzaW5nIiksZS5ub2RlLnJlbW92ZUF0dHJpYnV0ZSgiZGF0YS1hb3MtZHVyYXRpb24iKSxlLm5vZGUucmVtb3ZlQXR0cmlidXRlKCJkYXRhLWFvcy1kZWxheSIpLGFlLmluaXRDbGFzc05hbWUmJmUubm9kZS5jbGFzc0xpc3QucmVtb3ZlKGFlLmluaXRDbGFzc05hbWUpLGFlLmFuaW1hdGVkQ2xhc3NOYW1lJiZlLm5vZGUuY2xhc3NMaXN0LnJlbW92ZShhZS5hbmltYXRlZENsYXNzTmFtZSl9KX0sZGU9ZnVuY3Rpb24oZSl7cmV0dXJuITA9PT1lfHwibW9iaWxlIj09PWUmJlUubW9iaWxlKCl8fCJwaG9uZSI9PT1lJiZVLnBob25lKCl8fCJ0YWJsZXQiPT09ZSYmVS50YWJsZXQoKXx8ImZ1bmN0aW9uIj09dHlwZW9mIGUmJiEwPT09ZSgpfTtyZXR1cm57aW5pdDpmdW5jdGlvbihlKXtyZXR1cm4gYWU9SShhZSxlKSxvZT1uZSgpLGFlLmRpc2FibGVNdXRhdGlvbk9ic2VydmVyfHxfLmlzU3VwcG9ydGVkKCl8fChjb25zb2xlLmluZm8oJ1xuICAgICAgYW9zOiBNdXRhdGlvbk9ic2VydmVyIGlzIG5vdCBzdXBwb3J0ZWQgb24gdGhpcyBicm93c2VyLFxuICAgICAgY29kZSBtdXRhdGlvbnMgb2JzZXJ2aW5nIGhhcyBiZWVuIGRpc2FibGVkLlxuICAgICAgWW91IG1heSBoYXZlIHRvIGNhbGwgInJlZnJlc2hIYXJkKCkiIGJ5IHlvdXJzZWxmLlxuICAgICcpLGFlLmRpc2FibGVNdXRhdGlvbk9ic2VydmVyPSEwKSxhZS5kaXNhYmxlTXV0YXRpb25PYnNlcnZlcnx8Xy5yZWFkeSgiW2RhdGEtYW9zXSIsc2UpLGRlKGFlLmRpc2FibGUpfHxyZSgpP3VlKCk6KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImJvZHkiKS5zZXRBdHRyaWJ1dGUoImRhdGEtYW9zLWVhc2luZyIsYWUuZWFzaW5nKSxkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJib2R5Iikuc2V0QXR0cmlidXRlKCJkYXRhLWFvcy1kdXJhdGlvbiIsYWUuZHVyYXRpb24pLGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImJvZHkiKS5zZXRBdHRyaWJ1dGUoImRhdGEtYW9zLWRlbGF5IixhZS5kZWxheSksLTE9PT1bIkRPTUNvbnRlbnRMb2FkZWQiLCJsb2FkIl0uaW5kZXhPZihhZS5zdGFydEV2ZW50KT9kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKGFlLnN0YXJ0RXZlbnQsZnVuY3Rpb24oKXtjZSghMCl9KTp3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsZnVuY3Rpb24oKXtjZSghMCl9KSwiRE9NQ29udGVudExvYWRlZCI9PT1hZS5zdGFydEV2ZW50JiZbImNvbXBsZXRlIiwiaW50ZXJhY3RpdmUiXS5pbmRleE9mKGRvY3VtZW50LnJlYWR5U3RhdGUpPi0xJiZjZSghMCksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsJChjZSxhZS5kZWJvdW5jZURlbGF5LCEwKSksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIm9yaWVudGF0aW9uY2hhbmdlIiwkKGNlLGFlLmRlYm91bmNlRGVsYXksITApKSxvZSl9LHJlZnJlc2g6Y2UscmVmcmVzaEhhcmQ6c2V9fSk7CgovKiEgcm91bmRTbGlkZXIgdjEuMyB8IChjKSAyMDE1LTIwMTYsIFNvdW5kYXIgfCBNSVQgbGljZW5zZSB8IGh0dHA6Ly9yb3VuZHNsaWRlcnVpLmNvbS9saWNlbmNlLmh0bWwgKi8KOyhmdW5jdGlvbigkLHdpbmRvdyx1bmRlZmluZWQpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiAkcHJveHkobix0KXtyZXR1cm4gdHlwZW9mICQucHJveHk9PSJmdW5jdGlvbiI/JC5wcm94eShuLHQpOmZ1bmN0aW9uKGkpe24uY2FsbCh0LGkpfX1mdW5jdGlvbiAkZGF0YShuLHQsaSl7cmV0dXJuIHR5cGVvZiAkLmRhdGE9PSJmdW5jdGlvbiI/JC5kYXRhKG4sdCxpKTppP3ZvaWQgMDokKG4pLmhhc0NsYXNzKCJycy1jb250cm9sIil9ZnVuY3Rpb24gJGlzUGxhaW5PYmplY3Qobil7aWYodHlwZW9mICQuaXNQbGFpbk9iamVjdD09ImZ1bmN0aW9uIilyZXR1cm4gJC5pc1BsYWluT2JqZWN0KG4pO3ZhciB0PUpTT04uc3RyaW5naWZ5KG4pO3JldHVybiB0eXBlb2Ygbj09Im9iamVjdCImJm4ubGVuZ3RoPT09dW5kZWZpbmVkJiZ0Lmxlbmd0aD4yJiZ0LnN1YnN0cigwLDEpPT09InsiJiZ0LnN1YnN0cih0Lmxlbmd0aC0xKT09PSJ9In1mdW5jdGlvbiBpc051bWJlcihuKXtyZXR1cm4gbj1wYXJzZUZsb2F0KG4pLHR5cGVvZiBuPT0ibnVtYmVyIiYmIWlzTmFOKG4pfWZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQobil7dmFyIHQ9bi5zcGxpdCgiLiIpO3JldHVybiAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodFswXSkpLmFkZENsYXNzKHRbMV18fCIiKX1mdW5jdGlvbiBnZXRkaXN0YW5jZShuLHQpe3JldHVybiBNYXRoLnNxcnQoKG4ueC10LngpKihuLngtdC54KSsobi55LXQueSkqKG4ueS10LnkpKX1mdW5jdGlvbiBzZXRUcmFuc2Zvcm0obix0KXtyZXR1cm4gbi5jc3MoIi13ZWJraXQtdHJhbnNmb3JtIiwicm90YXRlKCIrdCsiZGVnKSIpLG4uY3NzKCItbW96LXRyYW5zZm9ybSIsInJvdGF0ZSgiK3QrImRlZykiKSxuLmNzcygiLW1zLXRyYW5zZm9ybSIsInJvdGF0ZSgiK3QrImRlZykiKSxuLmNzcygiLW8tdHJhbnNmb3JtIiwicm90YXRlKCIrdCsiZGVnKSIpLG4uY3NzKCJ0cmFuc2Zvcm0iLCJyb3RhdGUoIit0KyJkZWcpIiksbn1mdW5jdGlvbiBSb3VuZFNsaWRlcihuLHQpe24uaWQmJih3aW5kb3dbbi5pZF09dGhpcyksdGhpcy5jb250cm9sPSQobiksdGhpcy5vcHRpb25zPSQuZXh0ZW5kKHt9LHRoaXMuZGVmYXVsdHMsdCksdGhpcy5fcmFpc2UoImJlZm9yZUNyZWF0ZSIpIT09ITE/KHRoaXMuX2luaXQoKSx0aGlzLl9yYWlzZSgiY3JlYXRlIikpOnRoaXMuX3JlbW92ZURhdGEoKX1mdW5jdGlvbiBDcmVhdGVSb3VuZFNsaWRlcihuLHQpe2Zvcih2YXIgaSxyLHU9MDt1PHRoaXMubGVuZ3RoO3UrKylpZihpPXRoaXNbdV0scj0kZGF0YShpLHBsdWdpbk5hbWUpLHIpe2lmKCRpc1BsYWluT2JqZWN0KG4pKXR5cGVvZiByLm9wdGlvbj09ImZ1bmN0aW9uIj9yLm9wdGlvbihuKTppLmlkJiZ3aW5kb3dbaS5pZF0mJnR5cGVvZiB3aW5kb3dbaS5pZF0ub3B0aW9uPT0iZnVuY3Rpb24iJiZ3aW5kb3dbaS5pZF0ub3B0aW9uKG4pO2Vsc2UgaWYodHlwZW9mIG49PSJzdHJpbmciJiZ0eXBlb2YgcltuXT09ImZ1bmN0aW9uIil7aWYoKG49PT0ib3B0aW9uInx8bi5pbmRleE9mKCJnZXQiKT09PTApJiZ0WzJdPT09dW5kZWZpbmVkKXJldHVybiByW25dKHRbMV0pO3Jbbl0odFsxXSx0WzJdKX19ZWxzZSAkZGF0YShpLHBsdWdpbk5hbWUsbmV3IFJvdW5kU2xpZGVyKGksbikpO3JldHVybiB0aGlzfXZhciBwbHVnaW5OYW1lPSJyb3VuZFNsaWRlciI7JC5mbltwbHVnaW5OYW1lXT1mdW5jdGlvbihuKXtyZXR1cm4gQ3JlYXRlUm91bmRTbGlkZXIuY2FsbCh0aGlzLG4sYXJndW1lbnRzKX0sUm91bmRTbGlkZXIucHJvdG90eXBlPXtwbHVnaW5OYW1lOnBsdWdpbk5hbWUsdmVyc2lvbjoiMS4zIixvcHRpb25zOnt9LGRlZmF1bHRzOnttaW46MCxtYXg6MTAwLHN0ZXA6MSx2YWx1ZTpudWxsLHJhZGl1czo4NSx3aWR0aDoxOCxoYW5kbGVTaXplOiIrMCIsc3RhcnRBbmdsZTowLGVuZEFuZ2xlOiIrMzYwIixhbmltYXRpb246ITAsc2hvd1Rvb2x0aXA6ITAsZWRpdGFibGVUb29sdGlwOiEwLHJlYWRPbmx5OiExLGRpc2FibGVkOiExLGtleWJvYXJkQWN0aW9uOiEwLG1vdXNlU2Nyb2xsQWN0aW9uOiExLGxpbmVDYXA6InNxdWFyZSIsc2xpZGVyVHlwZToiZGVmYXVsdCIsY2lyY2xlU2hhcGU6ImZ1bGwiLGhhbmRsZVNoYXBlOiJyb3VuZCIsYmVmb3JlQ3JlYXRlOm51bGwsY3JlYXRlOm51bGwsc3RhcnQ6bnVsbCxkcmFnOm51bGwsY2hhbmdlOm51bGwsc3RvcDpudWxsLHRvb2x0aXBGb3JtYXQ6bnVsbH0sX3Byb3BzOmZ1bmN0aW9uKCl7cmV0dXJue251bWJlclR5cGU6WyJtaW4iLCJtYXgiLCJzdGVwIiwicmFkaXVzIiwid2lkdGgiLCJzdGFydEFuZ2xlIl0sYm9vbGVhblR5cGU6WyJhbmltYXRpb24iLCJzaG93VG9vbHRpcCIsImVkaXRhYmxlVG9vbHRpcCIsInJlYWRPbmx5IiwiZGlzYWJsZWQiLCJrZXlib2FyZEFjdGlvbiIsIm1vdXNlU2Nyb2xsQWN0aW9uIl0sc3RyaW5nVHlwZTpbInNsaWRlclR5cGUiLCJjaXJjbGVTaGFwZSIsImhhbmRsZVNoYXBlIiwibGluZUNhcCJdfX0sY29udHJvbDpudWxsLF9pbml0OmZ1bmN0aW9uKCl7dmFyIHQsbjt0aGlzLl9pc0Jyb3dzZXJTdXBwb3J0PXRoaXMuX2lzQnJvd3NlclN1cHBvcnRlZCgpLHRoaXMuX2lzS089ITEsdGhpcy5faXNBbmd1bGFyPSExLHRoaXMuY29udHJvbC5pcygiaW5wdXQiKSYmKHRoaXMuX2lzSW5wdXRUeXBlPSEwLHRoaXMuX2hpZGRlbkZpZWxkPXRoaXMuY29udHJvbCx0aGlzLmNvbnRyb2w9Y3JlYXRlRWxlbWVudCgiZGl2IiksdGhpcy5jb250cm9sLmluc2VydEFmdGVyKHRoaXMuX2hpZGRlbkZpZWxkKSx0aGlzLm9wdGlvbnMudmFsdWU9dGhpcy5faGlkZGVuRmllbGQudmFsKCl8fHRoaXMub3B0aW9ucy52YWx1ZSx0PXRoaXMsdGhpcy5fY2hlY2tLTygpJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5fY2hlY2tLTygpfSwxKSx0aGlzLl9jaGVja0FuZ3VsYXIoKSksdGhpcy5fYmluZE9uRHJhZz0hMSxuPXRoaXMuX2RhdGFFbGVtZW50KCkuYXR0cigiZGF0YS11cGRhdGVvbiIpLHR5cGVvZiBuPT0ic3RyaW5nIj9uPT0iZHJhZyImJih0aGlzLl9iaW5kT25EcmFnPSEwKTp0aGlzLl9pc0FuZ3VsYXImJih0aGlzLl9iaW5kT25EcmFnPSEwKSx0aGlzLl9vbkluaXQoKX0sX29uSW5pdDpmdW5jdGlvbigpe3RoaXMuX2luaXRpYWxpemUoKSx0aGlzLl91cGRhdGUoKSx0aGlzLl9yZW5kZXIoKX0sX2luaXRpYWxpemU6ZnVuY3Rpb24oKXt0aGlzLl9pc0Jyb3dzZXJTdXBwb3J0JiYodGhpcy5faXNSZWFkT25seT0hMSx0aGlzLl9jaGVja0RhdGFUeXBlKCksdGhpcy5fcmVmcmVzaENpcmNsZVNoYXBlKCkpfSxfcmVuZGVyOmZ1bmN0aW9uKCl7aWYodGhpcy5jb250YWluZXI9Y3JlYXRlRWxlbWVudCgiZGl2LnJzLWNvbnRhaW5lciIpLHRoaXMuaW5uZXJDb250YWluZXI9Y3JlYXRlRWxlbWVudCgiZGl2LnJzLWlubmVyLWNvbnRhaW5lciIpLHRoaXMuYmxvY2s9Y3JlYXRlRWxlbWVudCgiZGl2LnJzLWJsb2NrIHJzLW91dGVyIHJzLWJvcmRlciIpLHRoaXMuY29udGFpbmVyLmFwcGVuZCh0aGlzLmlubmVyQ29udGFpbmVyLmFwcGVuZCh0aGlzLmJsb2NrKSksdGhpcy5jb250cm9sLmFkZENsYXNzKCJycy1jb250cm9sIikuZW1wdHkoKS5hcHBlbmQodGhpcy5jb250YWluZXIpLHRoaXMuX3NldFJhZGl1cygpLHRoaXMuX2lzQnJvd3NlclN1cHBvcnQpdGhpcy5fY3JlYXRlTGF5ZXJzKCksdGhpcy5fc2V0UHJvcGVydGllcygpLHRoaXMuX3NldFZhbHVlKCksdGhpcy5fdXBkYXRlVG9vbHRpcFBvcygpLHRoaXMuX2JpbmRDb250cm9sRXZlbnRzKCJfYmluZCIpLHRoaXMuX2NoZWNrSUUoKTtlbHNle3ZhciBuPWNyZWF0ZUVsZW1lbnQoImRpdi5ycy1tc2ciKTtuLmh0bWwodHlwZW9mIHRoaXMuX3Rocm93RXJyb3I9PSJmdW5jdGlvbiI/dGhpcy5fdGhyb3dFcnJvcigpOnRoaXMuX3Rocm93RXJyb3IpLHRoaXMuY29udHJvbC5lbXB0eSgpLmFkZENsYXNzKCJycy1lcnJvciIpLmFwcGVuZChuKSx0aGlzLl9pc0lucHV0VHlwZSYmdGhpcy5jb250cm9sLmFwcGVuZCh0aGlzLl9kYXRhRWxlbWVudCgpKX19LF91cGRhdGU6ZnVuY3Rpb24oKXt0aGlzLl92YWxpZGF0ZVNsaWRlclR5cGUoKSx0aGlzLl91cGRhdGVTdGFydEVuZCgpLHRoaXMuX3ZhbGlkYXRlU3RhcnRFbmQoKSx0aGlzLl9oYW5kbGUxPXRoaXMuX2hhbmRsZTI9dGhpcy5faGFuZGxlRGVmYXVsdHMoKSx0aGlzLl9hbmFseXplTW9kZWxWYWx1ZSgpLHRoaXMuX3ZhbGlkYXRlTW9kZWxWYWx1ZSgpfSxfY3JlYXRlTGF5ZXJzOmZ1bmN0aW9uKCl7dmFyIGk9dGhpcy5vcHRpb25zLndpZHRoLHQ9dGhpcy5fc3RhcnQsbjtuPWNyZWF0ZUVsZW1lbnQoImRpdi5ycy1wYXRoIHJzLXRyYW5zaXRpb24iKSx0aGlzLl9yYW5nZVNsaWRlcnx8dGhpcy5fc2hvd1JhbmdlPyh0aGlzLmJsb2NrMT1uLmNsb25lKCkuYWRkQ2xhc3MoInJzLXJhbmdlLWNvbG9yIikucnNSb3RhdGUodCksdGhpcy5ibG9jazI9bi5jbG9uZSgpLmFkZENsYXNzKCJycy1yYW5nZS1jb2xvciIpLmNzcygib3BhY2l0eSIsIjAiKS5yc1JvdGF0ZSh0KSx0aGlzLmJsb2NrMz1uLmNsb25lKCkuYWRkQ2xhc3MoInJzLXBhdGgtY29sb3IiKS5yc1JvdGF0ZSh0KSx0aGlzLmJsb2NrND1uLmFkZENsYXNzKCJycy1wYXRoLWNvbG9yIikuY3NzKHtvcGFjaXR5OiIxIiwiei1pbmRleCI6IjEifSkucnNSb3RhdGUodC0xODApLHRoaXMuYmxvY2suYXBwZW5kKHRoaXMuYmxvY2sxLHRoaXMuYmxvY2syLHRoaXMuYmxvY2szLHRoaXMuYmxvY2s0KS5hZGRDbGFzcygicnMtc3BsaXQiKSk6dGhpcy5ibG9jay5hcHBlbmQobi5hZGRDbGFzcygicnMtcGF0aC1jb2xvciIpKSx0aGlzLmxhc3RCbG9jaz1jcmVhdGVFbGVtZW50KCJzcGFuLnJzLWJsb2NrIikuY3NzKHtwYWRkaW5nOml9KSx0aGlzLmlubmVyQmxvY2s9Y3JlYXRlRWxlbWVudCgiZGl2LnJzLWlubmVyIHJzLWJnLWNvbG9yIHJzLWJvcmRlciIpLHRoaXMubGFzdEJsb2NrLmFwcGVuZCh0aGlzLmlubmVyQmxvY2spLHRoaXMuYmxvY2suYXBwZW5kKHRoaXMubGFzdEJsb2NrKSx0aGlzLl9hcHBlbmRIYW5kbGUoKSx0aGlzLl9hcHBlbmRPdmVybGF5KCksdGhpcy5fYXBwZW5kSGlkZGVuRmllbGQoKX0sX3NldFByb3BlcnRpZXM6ZnVuY3Rpb24oKXt0aGlzLl91cGRhdGVQcmUoKSx0aGlzLl9zZXRIYW5kbGVTaGFwZSgpLHRoaXMuX2FkZEFuaW1hdGlvbigpLHRoaXMuX2FwcGVuZFRvb2x0aXAoKSx0aGlzLm9wdGlvbnMuc2hvd1Rvb2x0aXB8fHRoaXMuX3JlbW92ZVRvb2x0aXAoKSx0aGlzLm9wdGlvbnMuZGlzYWJsZWQ/dGhpcy5kaXNhYmxlKCk6dGhpcy5vcHRpb25zLnJlYWRPbmx5JiZ0aGlzLl9yZWFkT25seSghMCksdGhpcy5vcHRpb25zLm1vdXNlU2Nyb2xsQWN0aW9uJiZ0aGlzLl9iaW5kU2Nyb2xsRXZlbnRzKCJfYmluZCIpfSxfdXBkYXRlUHJlOmZ1bmN0aW9uKCl7dGhpcy5fcHJlY2hhbmdlPXRoaXMuX3ByZWRyYWc9dGhpcy5vcHRpb25zLnZhbHVlfSxfc2V0VmFsdWU6ZnVuY3Rpb24oKXtpZih0aGlzLl9yYW5nZVNsaWRlcil0aGlzLl9zZXRIYW5kbGVWYWx1ZSgxKSx0aGlzLl9zZXRIYW5kbGVWYWx1ZSgyKTtlbHNle3RoaXMuX3Nob3dSYW5nZSYmdGhpcy5fc2V0SGFuZGxlVmFsdWUoMSk7dmFyIG49dGhpcy5vcHRpb25zLnNsaWRlclR5cGU9PSJkZWZhdWx0Ij90aGlzLl9hY3RpdmV8fDE6cGFyc2VGbG9hdCh0aGlzLmJhci5jaGlsZHJlbigpLmF0dHIoImluZGV4IikpO3RoaXMuX3NldEhhbmRsZVZhbHVlKG4pfX0sX2FwcGVuZFRvb2x0aXA6ZnVuY3Rpb24oKXt0aGlzLmNvbnRhaW5lci5jaGlsZHJlbigiLnJzLXRvb2x0aXAiKS5sZW5ndGg9PT0wJiYodGhpcy50b29sdGlwPWNyZWF0ZUVsZW1lbnQoInNwYW4ucnMtdG9vbHRpcCBycy10b29sdGlwLXRleHQiKSx0aGlzLmNvbnRhaW5lci5hcHBlbmQodGhpcy50b29sdGlwKSx0aGlzLl90b29sdGlwRWRpdGFibGUoKSx0aGlzLl91cGRhdGVUb29sdGlwKCkpfSxfcmVtb3ZlVG9vbHRpcDpmdW5jdGlvbigpe3RoaXMuY29udGFpbmVyLmNoaWxkcmVuKCIucnMtdG9vbHRpcCIpLmxlbmd0aCE9MCYmdGhpcy50b29sdGlwJiZ0aGlzLnRvb2x0aXAucmVtb3ZlKCl9LF90b29sdGlwRWRpdGFibGU6ZnVuY3Rpb24oKXtpZih0aGlzLnRvb2x0aXAmJnRoaXMub3B0aW9ucy5zaG93VG9vbHRpcCl7dmFyIG47dGhpcy5vcHRpb25zLmVkaXRhYmxlVG9vbHRpcD8odGhpcy50b29sdGlwLmFkZENsYXNzKCJlZGl0Iiksbj0iX2JpbmQiKToodGhpcy50b29sdGlwLnJlbW92ZUNsYXNzKCJlZGl0Iiksbj0iX3VuYmluZCIpLHRoaXNbbl0odGhpcy50b29sdGlwLCJjbGljayIsdGhpcy5fZWRpdFRvb2x0aXApfX0sX2VkaXRUb29sdGlwOmZ1bmN0aW9uKCl7aWYodGhpcy50b29sdGlwLmhhc0NsYXNzKCJlZGl0IikmJiF0aGlzLl9pc1JlYWRPbmx5KXt2YXIgbj1wYXJzZUZsb2F0KHRoaXMudG9vbHRpcC5jc3MoImJvcmRlci1sZWZ0LXdpZHRoIikpKjI7dGhpcy5pbnB1dD1jcmVhdGVFbGVtZW50KCJpbnB1dC5ycy1pbnB1dCBycy10b29sdGlwLXRleHQiKS5jc3Moe2hlaWdodDp0aGlzLnRvb2x0aXAub3V0ZXJIZWlnaHQoKS1uLHdpZHRoOnRoaXMudG9vbHRpcC5vdXRlcldpZHRoKCktbn0pLHRoaXMudG9vbHRpcC5odG1sKHRoaXMuaW5wdXQpLnJlbW92ZUNsYXNzKCJlZGl0IikuYWRkQ2xhc3MoImhvdmVyIiksdGhpcy5pbnB1dC5mb2N1cygpLnZhbCh0aGlzLl9nZXRUb29sdGlwVmFsdWUoITApKSx0aGlzLl9iaW5kKHRoaXMuaW5wdXQsImJsdXIiLHRoaXMuX2ZvY3VzT3V0KSx0aGlzLl9iaW5kKHRoaXMuaW5wdXQsImNoYW5nZSIsdGhpcy5fZm9jdXNPdXQpfX0sX2ZvY3VzT3V0OmZ1bmN0aW9uKG4pe24udHlwZT09ImNoYW5nZSI/KHRoaXMub3B0aW9ucy52YWx1ZT10aGlzLmlucHV0LnZhbCgpLnJlcGxhY2UoIi0iLCIsIiksdGhpcy5fYW5hbHl6ZU1vZGVsVmFsdWUoKSx0aGlzLl92YWxpZGF0ZU1vZGVsVmFsdWUoKSx0aGlzLl9zZXRWYWx1ZSgpLHRoaXMuaW5wdXQudmFsKHRoaXMuX2dldFRvb2x0aXBWYWx1ZSghMCkpKToodGhpcy50b29sdGlwLmFkZENsYXNzKCJlZGl0IikucmVtb3ZlQ2xhc3MoImhvdmVyIiksdGhpcy5fdXBkYXRlVG9vbHRpcCgpKSx0aGlzLl9yYWlzZUV2ZW50KCJjaGFuZ2UiKX0sX3NldEhhbmRsZVNoYXBlOmZ1bmN0aW9uKCl7dmFyIG49dGhpcy5vcHRpb25zLmhhbmRsZVNoYXBlO3RoaXMuX2hhbmRsZXMoKS5yZW1vdmVDbGFzcygicnMtaGFuZGxlLWRvdCBycy1oYW5kbGUtc3F1YXJlIiksbj09ImRvdCI/dGhpcy5faGFuZGxlcygpLmFkZENsYXNzKCJycy1oYW5kbGUtZG90Iik6bj09InNxdWFyZSI/dGhpcy5faGFuZGxlcygpLmFkZENsYXNzKCJycy1oYW5kbGUtc3F1YXJlIik6dGhpcy5vcHRpb25zLmhhbmRsZVNoYXBlPXRoaXMuZGVmYXVsdHMuaGFuZGxlU2hhcGV9LF9zZXRIYW5kbGVWYWx1ZTpmdW5jdGlvbihuKXt0aGlzLl9hY3RpdmU9bjt2YXIgdD10aGlzWyJfaGFuZGxlIituXTt0aGlzLm9wdGlvbnMuc2xpZGVyVHlwZSE9Im1pbi1yYW5nZSImJih0aGlzLmJhcj10aGlzLl9hY3RpdmVIYW5kbGVCYXIoKSksdGhpcy5fY2hhbmdlU2xpZGVyVmFsdWUodC52YWx1ZSx0LmFuZ2xlKX0sX3NldEFuaW1hdGlvbjpmdW5jdGlvbigpe3RoaXMub3B0aW9ucy5hbmltYXRpb24/dGhpcy5fYWRkQW5pbWF0aW9uKCk6dGhpcy5fcmVtb3ZlQW5pbWF0aW9uKCl9LF9hZGRBbmltYXRpb246ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMuYW5pbWF0aW9uJiZ0aGlzLmNvbnRyb2wuYWRkQ2xhc3MoInJzLWFuaW1hdGlvbiIpfSxfcmVtb3ZlQW5pbWF0aW9uOmZ1bmN0aW9uKCl7dGhpcy5jb250cm9sLnJlbW92ZUNsYXNzKCJycy1hbmltYXRpb24iKX0sX3NldFJhZGl1czpmdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9ucy5yYWRpdXMsaT10KjIsbj10aGlzLm9wdGlvbnMuY2lyY2xlU2hhcGUscj1pLHU9aSxmLGU7aWYodGhpcy5jb250YWluZXIucmVtb3ZlQ2xhc3MoKS5hZGRDbGFzcygicnMtY29udGFpbmVyIiksbi5pbmRleE9mKCJoYWxmIik9PT0wKXtzd2l0Y2gobil7Y2FzZSJoYWxmLXRvcCI6Y2FzZSJoYWxmLWJvdHRvbSI6cj10LHU9aTticmVhaztjYXNlImhhbGYtbGVmdCI6Y2FzZSJoYWxmLXJpZ2h0IjpyPWksdT10fXRoaXMuY29udGFpbmVyLmFkZENsYXNzKG4ucmVwbGFjZSgiaGFsZi0iLCIiKSsiIGhhbGYiKX1lbHNlIG4uaW5kZXhPZigicXVhcnRlciIpPT09MD8ocj11PXQsZj1uLnNwbGl0KCItIiksdGhpcy5jb250YWluZXIuYWRkQ2xhc3MoZlswXSsiICIrZlsxXSsiICIrZlsyXSkpOnRoaXMuY29udGFpbmVyLmFkZENsYXNzKCJmdWxsICIrbik7ZT17aGVpZ2h0OnIsd2lkdGg6dX0sdGhpcy5jb250cm9sLmNzcyhlKSx0aGlzLmNvbnRhaW5lci5jc3MoZSl9LF9ib3JkZXI6ZnVuY3Rpb24obil7cmV0dXJuIG4/cGFyc2VGbG9hdCh0aGlzLl9zdGFydExpbmUuY2hpbGRyZW4oKS5jc3MoImJvcmRlci1ib3R0b20td2lkdGgiKSk6cGFyc2VGbG9hdCh0aGlzLmJsb2NrLmNzcygiYm9yZGVyLXRvcC13aWR0aCIpKSoyfSxfYXBwZW5kSGFuZGxlOmZ1bmN0aW9uKCl7KHRoaXMuX3JhbmdlU2xpZGVyfHwhdGhpcy5fc2hvd1JhbmdlKSYmdGhpcy5fY3JlYXRlSGFuZGxlKDEpLCh0aGlzLl9yYW5nZVNsaWRlcnx8dGhpcy5fc2hvd1JhbmdlKSYmdGhpcy5fY3JlYXRlSGFuZGxlKDIpLHRoaXMuX3N0YXJ0TGluZT10aGlzLl9hZGRTZXBlcmF0b3IodGhpcy5fc3RhcnQsInJzLXN0YXJ0IiksdGhpcy5fZW5kTGluZT10aGlzLl9hZGRTZXBlcmF0b3IodGhpcy5fc3RhcnQrdGhpcy5fZW5kLCJycy1lbmQiKSx0aGlzLl9yZWZyZXNoU2VwZXJhdG9yKCl9LF9hZGRTZXBlcmF0b3I6ZnVuY3Rpb24obix0KXt2YXIgcj1jcmVhdGVFbGVtZW50KCJzcGFuLnJzLXNlcGVyYXRvciBycy1ib3JkZXIiKSx1PXRoaXMub3B0aW9ucy53aWR0aCxmPXRoaXMuX2JvcmRlcigpLGk9Y3JlYXRlRWxlbWVudCgic3Bhbi5ycy1iYXIgcnMtdHJhbnNpdGlvbiAiK3QpLmFwcGVuZChyKS5yc1JvdGF0ZShuKTtyZXR1cm4gdGhpcy5jb250YWluZXIuYXBwZW5kKGkpLGl9LF9yZWZyZXNoU2VwZXJhdG9yOmZ1bmN0aW9uKCl7dmFyIGk9dGhpcy5fc3RhcnRMaW5lLmFkZCh0aGlzLl9lbmRMaW5lKSxyPWkuY2hpbGRyZW4oKS5yZW1vdmVBdHRyKCJzdHlsZSIpLG49dGhpcy5vcHRpb25zLHU9bi53aWR0aCxmPXRoaXMuX2JvcmRlcigpLHQ9dStmO24ubGluZUNhcD09InJvdW5kIiYmbi5jaXJjbGVTaGFwZSE9ImZ1bGwiPyhpLmFkZENsYXNzKCJycy1yb3VuZGVkIiksci5jc3Moe3dpZHRoOnQsaGVpZ2h0OnQvMisxfSksdGhpcy5fc3RhcnRMaW5lLmNoaWxkcmVuKCkuY3NzKCJtYXJnaW4tdG9wIiwtMSkuYWRkQ2xhc3Mobi5zbGlkZXJUeXBlPT0ibWluLXJhbmdlIj8icnMtcmFuZ2UtY29sb3IiOiJycy1wYXRoLWNvbG9yIiksdGhpcy5fZW5kTGluZS5jaGlsZHJlbigpLmNzcygibWFyZ2luLXRvcCIsdC8tMikuYWRkQ2xhc3MoInJzLXBhdGgtY29sb3IiKSk6KGkucmVtb3ZlQ2xhc3MoInJzLXJvdW5kZWQiKSxyLmNzcyh7d2lkdGg6dCwibWFyZ2luLXRvcCI6dGhpcy5fYm9yZGVyKCEwKS8tMn0pLnJlbW92ZUNsYXNzKCJycy1yYW5nZS1jb2xvciBycy1wYXRoLWNvbG9yIikpfSxfdXBkYXRlU2VwZXJhdG9yOmZ1bmN0aW9uKCl7dGhpcy5fc3RhcnRMaW5lLnJzUm90YXRlKHRoaXMuX3N0YXJ0KSx0aGlzLl9lbmRMaW5lLnJzUm90YXRlKHRoaXMuX3N0YXJ0K3RoaXMuX2VuZCl9LF9jcmVhdGVIYW5kbGU6ZnVuY3Rpb24obil7dmFyIHQ9Y3JlYXRlRWxlbWVudCgiZGl2LnJzLWhhbmRsZSBycy1tb3ZlIiksdT10aGlzLm9wdGlvbnMsZixyOyhmPXUuaGFuZGxlU2hhcGUpIT0icm91bmQiJiZ0LmFkZENsYXNzKCJycy1oYW5kbGUtIitmKSx0LmF0dHIoe2luZGV4Om4sdGFiSW5kZXg6IjAifSk7dmFyIGk9dGhpcy5fZGF0YUVsZW1lbnQoKVswXS5pZCxpPWk/aSsiXyI6IiIsZT1pKyJoYW5kbGUiKyh1LnNsaWRlclR5cGU9PSJyYW5nZSI/Il8iKyhuPT0xPyJzdGFydCI6ImVuZCIpOiIiKTtyZXR1cm4gdC5hdHRyKHtyb2xlOiJzbGlkZXIiLCJhcmlhLWxhYmVsIjplfSkscj1jcmVhdGVFbGVtZW50KCJkaXYucnMtYmFyIHJzLXRyYW5zaXRpb24iKS5jc3MoInotaW5kZXgiLCI3IikuYXBwZW5kKHQpLnJzUm90YXRlKHRoaXMuX3N0YXJ0KSxyLmFkZENsYXNzKHUuc2xpZGVyVHlwZT09InJhbmdlIiYmbj09Mj8icnMtc2Vjb25kIjoicnMtZmlyc3QiKSx0aGlzLmNvbnRhaW5lci5hcHBlbmQociksdGhpcy5fcmVmcmVzaEhhbmRsZSgpLHRoaXMuYmFyPXIsdGhpcy5fYWN0aXZlPW4sbiE9MSYmbiE9MiYmKHRoaXNbIl9oYW5kbGUiK25dPXRoaXMuX2hhbmRsZURlZmF1bHRzKCkpLHRoaXMuX2JpbmQodCwiZm9jdXMiLHRoaXMuX2hhbmRsZUZvY3VzKSx0aGlzLl9iaW5kKHQsImJsdXIiLHRoaXMuX2hhbmRsZUJsdXIpLHR9LF9yZWZyZXNoSGFuZGxlOmZ1bmN0aW9uKCl7dmFyIGhTaXplPXRoaXMub3B0aW9ucy5oYW5kbGVTaXplLGgsdyxpc1NxdWFyZT0hMCxzLGRpZmY7aWYodHlwZW9mIGhTaXplPT0ic3RyaW5nIiYmaXNOdW1iZXIoaFNpemUpKWlmKGhTaXplLmNoYXJBdCgwKT09PSIrInx8aFNpemUuY2hhckF0KDApPT09Ii0iKXRyeXtoU2l6ZT1ldmFsKHRoaXMub3B0aW9ucy53aWR0aCtoU2l6ZS5jaGFyQXQoMCkrTWF0aC5hYnMocGFyc2VGbG9hdChoU2l6ZSkpKX1jYXRjaChlKXtjb25zb2xlLndhcm4oZSl9ZWxzZSBoU2l6ZS5pbmRleE9mKCIsIikmJihzPWhTaXplLnNwbGl0KCIsIiksaXNOdW1iZXIoc1swXSkmJmlzTnVtYmVyKHNbMV0pJiYodz1wYXJzZUZsb2F0KHNbMF0pLGg9cGFyc2VGbG9hdChzWzFdKSxpc1NxdWFyZT0hMSkpO2lzU3F1YXJlJiYoaD13PWlzTnVtYmVyKGhTaXplKT9wYXJzZUZsb2F0KGhTaXplKTp0aGlzLm9wdGlvbnMud2lkdGgpLGRpZmY9KHRoaXMub3B0aW9ucy53aWR0aCt0aGlzLl9ib3JkZXIoKS13KS8yLHRoaXMuX2hhbmRsZXMoKS5jc3Moe2hlaWdodDpoLHdpZHRoOncsbWFyZ2luOi1oLzIrInB4IDAgMCAiK2RpZmYrInB4In0pfSxfaGFuZGxlRGVmYXVsdHM6ZnVuY3Rpb24oKXtyZXR1cm57YW5nbGU6dGhpcy5fdmFsdWVUb0FuZ2xlKHRoaXMub3B0aW9ucy5taW4pLHZhbHVlOnRoaXMub3B0aW9ucy5taW59fSxfaGFuZGxlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRhaW5lci5jaGlsZHJlbigiZGl2LnJzLWJhciIpLmZpbmQoIi5ycy1oYW5kbGUiKX0sX2FjdGl2ZUhhbmRsZUJhcjpmdW5jdGlvbihuKXtyZXR1cm4gbj1uIT11bmRlZmluZWQ/bjp0aGlzLl9hY3RpdmUsJCh0aGlzLmNvbnRhaW5lci5jaGlsZHJlbigiZGl2LnJzLWJhciIpW24tMV0pfSxfaGFuZGxlQXJnczpmdW5jdGlvbihuKXtuPW4hPXVuZGVmaW5lZD9uOnRoaXMuX2FjdGl2ZTt2YXIgdD10aGlzWyJfaGFuZGxlIituXTtyZXR1cm57ZWxlbWVudDp0aGlzLl9hY3RpdmVIYW5kbGVCYXIobikuY2hpbGRyZW4oKSxpbmRleDpuLGlzQWN0aXZlOm49PXRoaXMuX2FjdGl2ZSx2YWx1ZTp0P3QudmFsdWU6bnVsbCxhbmdsZTp0P3QuYW5nbGU6bnVsbH19LF9kYXRhRWxlbWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc0lucHV0VHlwZT90aGlzLl9oaWRkZW5GaWVsZDp0aGlzLmNvbnRyb2x9LF9yYWlzZUV2ZW50OmZ1bmN0aW9uKG4pe3ZhciB0PXRoaXNbIl9wcmUiK25dO2lmKHQhPT10aGlzLm9wdGlvbnMudmFsdWUpcmV0dXJuIHRoaXNbIl9wcmUiK25dPXRoaXMub3B0aW9ucy52YWx1ZSx0aGlzLl91cGRhdGVUb29sdGlwKCksKG49PSJjaGFuZ2UifHx0aGlzLl9iaW5kT25EcmFnJiZuPT0iZHJhZyIpJiZ0aGlzLl91cGRhdGVIaWRkZW4oKSx0aGlzLl9yYWlzZShuLHt2YWx1ZTp0aGlzLm9wdGlvbnMudmFsdWUscHJlVmFsdWU6dCxoYW5kbGU6dGhpcy5faGFuZGxlQXJncygpfSl9LF9lbGVtZW50RG93bjpmdW5jdGlvbihuKXt2YXIgaSxyLHUsdCxmO2lmKCF0aGlzLl9pc1JlYWRPbmx5KWlmKGk9JChuLnRhcmdldCksaS5oYXNDbGFzcygicnMtaGFuZGxlIikpdGhpcy5faGFuZGxlRG93bihuKTtlbHNle3ZhciBlPXRoaXMuX2dldFhZKG4pLG89dGhpcy5fZ2V0Q2VudGVyUG9pbnQoKSxzPWdldGRpc3RhbmNlKGUsbyksaD10aGlzLmJsb2NrLm91dGVyV2lkdGgoKS8yLGM9aC0odGhpcy5vcHRpb25zLndpZHRoK3RoaXMuX2JvcmRlcigpKTtzPj1jJiZzPD1oJiYobi5wcmV2ZW50RGVmYXVsdCgpLHI9dGhpcy5jb250cm9sLmZpbmQoIi5ycy1oYW5kbGUucnMtZm9jdXMiKSx0aGlzLmNvbnRyb2wuYXR0cigidGFiaW5kZXgiLCIwIikuZm9jdXMoKS5yZW1vdmVBdHRyKCJ0YWJpbmRleCIpLGkuaGFzQ2xhc3MoInJzLXNlcGVyYXRvciIpPyh0PWkucGFyZW50KCkuaGFzQ2xhc3MoInJzLXN0YXJ0Iik/dGhpcy5vcHRpb25zLm1pbjp0aGlzLm9wdGlvbnMubWF4LHU9dGhpcy5fdmFsdWVUb0FuZ2xlKHQpKTooZj10aGlzLl9nZXRBbmdsZVZhbHVlKGUsbyksdT1mLmFuZ2xlLHQ9Zi52YWx1ZSksdGhpcy5fcmFuZ2VTbGlkZXImJihyPXRoaXMuY29udHJvbC5maW5kKCIucnMtaGFuZGxlLnJzLWZvY3VzIiksdGhpcy5fYWN0aXZlPXIubGVuZ3RoPT0xP3BhcnNlRmxvYXQoci5hdHRyKCJpbmRleCIpKTp0aGlzLl9oYW5kbGUyLnZhbHVlLXQ8dC10aGlzLl9oYW5kbGUxLnZhbHVlPzI6MSx0aGlzLmJhcj10aGlzLl9hY3RpdmVIYW5kbGVCYXIoKSksdGhpcy5fY2hhbmdlU2xpZGVyVmFsdWUodCx1KSx0aGlzLl9yYWlzZUV2ZW50KCJjaGFuZ2UiKSl9fSxfaGFuZGxlRG93bjpmdW5jdGlvbihuKXtuLnByZXZlbnREZWZhdWx0KCk7dmFyIHQ9JChuLnRhcmdldCk7dC5mb2N1cygpLHRoaXMuX3JlbW92ZUFuaW1hdGlvbigpLHRoaXMuX2JpbmRNb3VzZUV2ZW50cygiX2JpbmQiKSx0aGlzLmJhcj10LnBhcmVudCgpLHRoaXMuX2FjdGl2ZT1wYXJzZUZsb2F0KHQuYXR0cigiaW5kZXgiKSksdGhpcy5faGFuZGxlcygpLnJlbW92ZUNsYXNzKCJycy1tb3ZlIiksdGhpcy5fcmFpc2UoInN0YXJ0Iix7dmFsdWU6dGhpcy5vcHRpb25zLnZhbHVlLGhhbmRsZTp0aGlzLl9oYW5kbGVBcmdzKCl9KX0sX2hhbmRsZU1vdmU6ZnVuY3Rpb24obil7bi5wcmV2ZW50RGVmYXVsdCgpO3ZhciB1PXRoaXMuX2dldFhZKG4pLGY9dGhpcy5fZ2V0Q2VudGVyUG9pbnQoKSx0PXRoaXMuX2dldEFuZ2xlVmFsdWUodSxmLCEwKSxpLHI7aT10LmFuZ2xlLHI9dC52YWx1ZSx0aGlzLl9jaGFuZ2VTbGlkZXJWYWx1ZShyLGkpLHRoaXMuX3JhaXNlRXZlbnQoImRyYWciKX0sX2hhbmRsZVVwOmZ1bmN0aW9uKCl7dGhpcy5faGFuZGxlcygpLmFkZENsYXNzKCJycy1tb3ZlIiksdGhpcy5fYmluZE1vdXNlRXZlbnRzKCJfdW5iaW5kIiksdGhpcy5fYWRkQW5pbWF0aW9uKCksdGhpcy5fcmFpc2VFdmVudCgiY2hhbmdlIiksdGhpcy5fcmFpc2UoInN0b3AiLHt2YWx1ZTp0aGlzLm9wdGlvbnMudmFsdWUsaGFuZGxlOnRoaXMuX2hhbmRsZUFyZ3MoKX0pfSxfaGFuZGxlRm9jdXM6ZnVuY3Rpb24obil7aWYoIXRoaXMuX2lzUmVhZE9ubHkpe3ZhciB0PSQobi50YXJnZXQpO3RoaXMuX2hhbmRsZXMoKS5yZW1vdmVDbGFzcygicnMtZm9jdXMiKSx0LmFkZENsYXNzKCJycy1mb2N1cyIpLHRoaXMuYmFyPXQucGFyZW50KCksdGhpcy5fYWN0aXZlPXBhcnNlRmxvYXQodC5hdHRyKCJpbmRleCIpKSx0aGlzLm9wdGlvbnMua2V5Ym9hcmRBY3Rpb24mJih0aGlzLl9iaW5kS2V5Ym9hcmRFdmVudHMoIl91bmJpbmQiKSx0aGlzLl9iaW5kS2V5Ym9hcmRFdmVudHMoIl9iaW5kIikpLHRoaXMuY29udHJvbC5maW5kKCJkaXYucnMtYmFyIikuY3NzKCJ6LWluZGV4IiwiNyIpLHRoaXMuYmFyLmNzcygiei1pbmRleCIsIjgiKX19LF9oYW5kbGVCbHVyOmZ1bmN0aW9uKCl7dGhpcy5faGFuZGxlcygpLnJlbW92ZUNsYXNzKCJycy1mb2N1cyIpLHRoaXMub3B0aW9ucy5rZXlib2FyZEFjdGlvbiYmdGhpcy5fYmluZEtleWJvYXJkRXZlbnRzKCJfdW5iaW5kIil9LF9oYW5kbGVLZXlEb3duOmZ1bmN0aW9uKG4pe3ZhciB0LHIsaSx1O3RoaXMuX2lzUmVhZE9ubHl8fCh0PW4ua2V5Q29kZSx0PT0yNyYmdGhpcy5faGFuZGxlcygpLmJsdXIoKSx0Pj0zNSYmdDw9NDApJiYodD49MzcmJnQ8PTQwJiZ0aGlzLl9yZW1vdmVBbmltYXRpb24oKSxyPXRoaXNbIl9oYW5kbGUiK3RoaXMuX2FjdGl2ZV0sbi5wcmV2ZW50RGVmYXVsdCgpLHQ9PTM4fHx0PT0zNz9pPXRoaXMuX3JvdW5kKHRoaXMuX2xpbWl0VmFsdWUoci52YWx1ZSt0aGlzLm9wdGlvbnMuc3RlcCkpOnQ9PTM5fHx0PT00MD9pPXRoaXMuX3JvdW5kKHRoaXMuX2xpbWl0VmFsdWUoci52YWx1ZS10aGlzLl9nZXRNaW51c1N0ZXAoci52YWx1ZSkpKTp0PT0zNj9pPXRoaXMuX2dldEtleVZhbHVlKCJIb21lIik6dD09MzUmJihpPXRoaXMuX2dldEtleVZhbHVlKCJFbmQiKSksdT10aGlzLl92YWx1ZVRvQW5nbGUoaSksdGhpcy5fY2hhbmdlU2xpZGVyVmFsdWUoaSx1KSx0aGlzLl9yYWlzZUV2ZW50KCJjaGFuZ2UiKSl9LF9oYW5kbGVLZXlVcDpmdW5jdGlvbigpe3RoaXMuX2FkZEFuaW1hdGlvbigpfSxfZ2V0TWludXNTdGVwOmZ1bmN0aW9uKG4pe2lmKG49PXRoaXMub3B0aW9ucy5tYXgpe3ZhciB0PSh0aGlzLm9wdGlvbnMubWF4LXRoaXMub3B0aW9ucy5taW4pJXRoaXMub3B0aW9ucy5zdGVwO3JldHVybiB0PT0wP3RoaXMub3B0aW9ucy5zdGVwOnR9cmV0dXJuIHRoaXMub3B0aW9ucy5zdGVwfSxfZ2V0S2V5VmFsdWU6ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMuX3JhbmdlU2xpZGVyP249PSJIb21lIj90aGlzLl9hY3RpdmU9PTE/dGhpcy5vcHRpb25zLm1pbjp0aGlzLl9oYW5kbGUxLnZhbHVlOnRoaXMuX2FjdGl2ZT09MT90aGlzLl9oYW5kbGUyLnZhbHVlOnRoaXMub3B0aW9ucy5tYXg6bj09IkhvbWUiP3RoaXMub3B0aW9ucy5taW46dGhpcy5vcHRpb25zLm1heH0sX2VsZW1lbnRTY3JvbGw6ZnVuY3Rpb24obil7aWYoIXRoaXMuX2lzUmVhZE9ubHkpe24ucHJldmVudERlZmF1bHQoKTt2YXIgaT1uLm9yaWdpbmFsRXZlbnR8fG4scix0LGYsdTsodT1pLndoZWVsRGVsdGE/aS53aGVlbERlbHRhLzYwOmkuZGV0YWlsPy1pLmRldGFpbC8yOjAsdSE9MCkmJih0aGlzLl91cGRhdGVBY3RpdmVIYW5kbGUobikscj10aGlzWyJfaGFuZGxlIit0aGlzLl9hY3RpdmVdLHQ9ci52YWx1ZSsodT4wP3RoaXMub3B0aW9ucy5zdGVwOi10aGlzLl9nZXRNaW51c1N0ZXAoci52YWx1ZSkpLHQ9dGhpcy5fbGltaXRWYWx1ZSh0KSxmPXRoaXMuX3ZhbHVlVG9BbmdsZSh0KSx0aGlzLl9yZW1vdmVBbmltYXRpb24oKSx0aGlzLl9jaGFuZ2VTbGlkZXJWYWx1ZSh0LGYpLHRoaXMuX3JhaXNlRXZlbnQoImNoYW5nZSIpLHRoaXMuX2FkZEFuaW1hdGlvbigpKX19LF91cGRhdGVBY3RpdmVIYW5kbGU6ZnVuY3Rpb24obil7dmFyIHQ9JChuLnRhcmdldCk7dC5oYXNDbGFzcygicnMtaGFuZGxlIikmJnQucGFyZW50KCkucGFyZW50KClbMF09PXRoaXMuY29udHJvbFswXSYmKHRoaXMuYmFyPXQucGFyZW50KCksdGhpcy5fYWN0aXZlPXBhcnNlRmxvYXQodC5hdHRyKCJpbmRleCIpKSksdGhpcy5iYXIuZmluZCgiLnJzLWhhbmRsZSIpLmhhc0NsYXNzKCJycy1mb2N1cyIpfHx0aGlzLmJhci5maW5kKCIucnMtaGFuZGxlIikuZm9jdXMoKX0sX2JpbmRDb250cm9sRXZlbnRzOmZ1bmN0aW9uKG4pe3RoaXNbbl0odGhpcy5jb250cm9sLCJtb3VzZWRvd24iLHRoaXMuX2VsZW1lbnREb3duKSx0aGlzW25dKHRoaXMuY29udHJvbCwidG91Y2hzdGFydCIsdGhpcy5fZWxlbWVudERvd24pfSxfYmluZFNjcm9sbEV2ZW50czpmdW5jdGlvbihuKXt0aGlzW25dKHRoaXMuY29udHJvbCwibW91c2V3aGVlbCIsdGhpcy5fZWxlbWVudFNjcm9sbCksdGhpc1tuXSh0aGlzLmNvbnRyb2wsIkRPTU1vdXNlU2Nyb2xsIix0aGlzLl9lbGVtZW50U2Nyb2xsKX0sX2JpbmRNb3VzZUV2ZW50czpmdW5jdGlvbihuKXt0aGlzW25dKCQoZG9jdW1lbnQpLCJtb3VzZW1vdmUiLHRoaXMuX2hhbmRsZU1vdmUpLHRoaXNbbl0oJChkb2N1bWVudCksIm1vdXNldXAiLHRoaXMuX2hhbmRsZVVwKSx0aGlzW25dKCQoZG9jdW1lbnQpLCJtb3VzZWxlYXZlIix0aGlzLl9oYW5kbGVVcCksdGhpc1tuXSgkKGRvY3VtZW50KSwidG91Y2htb3ZlIix0aGlzLl9oYW5kbGVNb3ZlKSx0aGlzW25dKCQoZG9jdW1lbnQpLCJ0b3VjaGVuZCIsdGhpcy5faGFuZGxlVXApLHRoaXNbbl0oJChkb2N1bWVudCksInRvdWNoY2FuY2VsIix0aGlzLl9oYW5kbGVVcCl9LF9iaW5kS2V5Ym9hcmRFdmVudHM6ZnVuY3Rpb24obil7dGhpc1tuXSgkKGRvY3VtZW50KSwia2V5ZG93biIsdGhpcy5faGFuZGxlS2V5RG93biksdGhpc1tuXSgkKGRvY3VtZW50KSwia2V5dXAiLHRoaXMuX2hhbmRsZUtleVVwKX0sX2NoYW5nZVNsaWRlclZhbHVlOmZ1bmN0aW9uKG4sdCl7dmFyIHU9dGhpcy5fb3JpQW5nbGUodCksaT10aGlzLl9saW1pdEFuZ2xlKHQpO2lmKHRoaXMuX3JhbmdlU2xpZGVyfHx0aGlzLl9zaG93UmFuZ2Upe2lmKHRoaXMuX2FjdGl2ZT09MSYmdTw9dGhpcy5fb3JpQW5nbGUodGhpcy5faGFuZGxlMi5hbmdsZSl8fHRoaXMuX2FjdGl2ZT09MiYmdT49dGhpcy5fb3JpQW5nbGUodGhpcy5faGFuZGxlMS5hbmdsZSl8fHRoaXMuX2ludmVydFJhbmdlKXt0aGlzWyJfaGFuZGxlIit0aGlzLl9hY3RpdmVdPXthbmdsZTp0LHZhbHVlOm59LHRoaXMub3B0aW9ucy52YWx1ZT10aGlzLl9yYW5nZVNsaWRlcj90aGlzLl9oYW5kbGUxLnZhbHVlKyIsIit0aGlzLl9oYW5kbGUyLnZhbHVlOm4sdGhpcy5iYXIucnNSb3RhdGUoaSksdGhpcy5fdXBkYXRlQVJJQShuKTt2YXIgcj10aGlzLl9vcmlBbmdsZSh0aGlzLl9oYW5kbGUyLmFuZ2xlKS10aGlzLl9vcmlBbmdsZSh0aGlzLl9oYW5kbGUxLmFuZ2xlKSxmPSIxIixlPSIwIjtyPD0xODAmJiEocjwwJiZyPi0xODApJiYoZj0iMCIsZT0iMSIpLHRoaXMuYmxvY2syLmNzcygib3BhY2l0eSIsZiksdGhpcy5ibG9jazMuY3NzKCJvcGFjaXR5IixlKSwodGhpcy5fYWN0aXZlPT0xP3RoaXMuYmxvY2s0OnRoaXMuYmxvY2syKS5yc1JvdGF0ZShpLTE4MCksKHRoaXMuX2FjdGl2ZT09MT90aGlzLmJsb2NrMTp0aGlzLmJsb2NrMykucnNSb3RhdGUoaSl9fWVsc2UgdGhpc1siX2hhbmRsZSIrdGhpcy5fYWN0aXZlXT17YW5nbGU6dCx2YWx1ZTpufSx0aGlzLm9wdGlvbnMudmFsdWU9bix0aGlzLmJhci5yc1JvdGF0ZShpKSx0aGlzLl91cGRhdGVBUklBKG4pfSxfdXBkYXRlQVJJQTpmdW5jdGlvbihuKXt2YXIgaT10aGlzLm9wdGlvbnMubWluLHI9dGhpcy5vcHRpb25zLm1heCx0O3RoaXMuYmFyLmNoaWxkcmVuKCkuYXR0cih7ImFyaWEtdmFsdWVub3ciOm59KSx0aGlzLm9wdGlvbnMuc2xpZGVyVHlwZT09InJhbmdlIj8odD10aGlzLl9oYW5kbGVzKCksdC5lcSgwKS5hdHRyKHsiYXJpYS12YWx1ZW1pbiI6aX0pLHQuZXEoMSkuYXR0cih7ImFyaWEtdmFsdWVtYXgiOnJ9KSx0aGlzLl9hY3RpdmU9PTE/dC5lcSgxKS5hdHRyKHsiYXJpYS12YWx1ZW1pbiI6bn0pOnQuZXEoMCkuYXR0cih7ImFyaWEtdmFsdWVtYXgiOm59KSk6dGhpcy5iYXIuY2hpbGRyZW4oKS5hdHRyKHsiYXJpYS12YWx1ZW1pbiI6aSwiYXJpYS12YWx1ZW1heCI6cn0pfSxfY2hlY2tLTzpmdW5jdGlvbigpe3ZhciBmPXRoaXMuX2RhdGFFbGVtZW50KCkuZGF0YSgiYmluZCIpLHQsaSxyLG4sdTtpZih0eXBlb2YgZj09InN0cmluZyImJnR5cGVvZiBrbz09Im9iamVjdCIpe2lmKHQ9a28uZGF0YUZvcih0aGlzLl9kYXRhRWxlbWVudCgpWzBdKSx0eXBlb2YgdD09InVuZGVmaW5lZCIpcmV0dXJuITA7Zm9yKGk9Zi5zcGxpdCgiLCIpLG49MDtuPGkubGVuZ3RoO24rKylpZih1PWlbbl0uc3BsaXQoIjoiKSwkLnRyaW0odVswXSk9PSJ2YWx1ZSIpe3I9JC50cmltKHVbMV0pO2JyZWFrfXImJih0aGlzLl9pc0tPPSEwLGtvLmNvbXB1dGVkKGZ1bmN0aW9uKCl7dGhpcy5vcHRpb24oInZhbHVlIix0W3JdKCkpfSx0aGlzKSl9fSxfY2hlY2tBbmd1bGFyOmZ1bmN0aW9uKCl7aWYodHlwZW9mIGFuZ3VsYXI9PSJvYmplY3QiJiZ0eXBlb2YgYW5ndWxhci5lbGVtZW50PT0iZnVuY3Rpb24iJiYodGhpcy5fbmdOYW1lPXRoaXMuX2RhdGFFbGVtZW50KCkuYXR0cigibmctbW9kZWwiKSx0eXBlb2YgdGhpcy5fbmdOYW1lPT0ic3RyaW5nIikpe3RoaXMuX2lzQW5ndWxhcj0hMDt2YXIgbj10aGlzO3RoaXMuX3Njb3BlKCkuJHdhdGNoKHRoaXMuX25nTmFtZSxmdW5jdGlvbih0KXtuLm9wdGlvbigidmFsdWUiLHQpfSl9fSxfc2NvcGU6ZnVuY3Rpb24oKXtyZXR1cm4gYW5ndWxhci5lbGVtZW50KHRoaXMuX2RhdGFFbGVtZW50KCkpLnNjb3BlKCl9LF9nZXRYWTpmdW5jdGlvbihuKXtyZXR1cm4gbi50eXBlLmluZGV4T2YoIm1vdXNlIik9PS0xJiYobj0obi5vcmlnaW5hbEV2ZW50fHxuKS5jaGFuZ2VkVG91Y2hlc1swXSkse3g6bi5wYWdlWCx5Om4ucGFnZVl9fSxfZ2V0Q2VudGVyUG9pbnQ6ZnVuY3Rpb24oKXt2YXIgbj10aGlzLmJsb2NrLm9mZnNldCgpO3JldHVybnt4Om4ubGVmdCt0aGlzLmJsb2NrLm91dGVyV2lkdGgoKS8yLHk6bi50b3ArdGhpcy5ibG9jay5vdXRlckhlaWdodCgpLzJ9fSxfZ2V0QW5nbGVWYWx1ZTpmdW5jdGlvbihuLHQsaSl7dmFyIHU9TWF0aC5hdGFuMihuLnktdC55LHQueC1uLngpLHI9LXUvKE1hdGguUEkvMTgwKTtyZXR1cm4gcjx0aGlzLl9zdGFydCYmKHIrPTM2MCkscj10aGlzLl9jaGVja0FuZ2xlKHIsaSksdGhpcy5fcHJvY2Vzc1N0ZXBCeUFuZ2xlKHIpfSxfY2hlY2tBbmdsZTpmdW5jdGlvbihuLHQpe3ZhciBmPXRoaXMuX29yaUFuZ2xlKG4pLGk9dGhpc1siX2hhbmRsZSIrdGhpcy5fYWN0aXZlXS5hbmdsZSxyPXRoaXMuX29yaUFuZ2xlKGkpLHU7aWYoZj50aGlzLl9lbmQpe2lmKCF0KXJldHVybiBpO249dGhpcy5fc3RhcnQrKHI8PXRoaXMuX2VuZC1yPzA6dGhpcy5fZW5kKX1lbHNlIGlmKHQmJih1PXRoaXMuX2hhbmRsZURyYWdEaXN0YW5jZSxpc051bWJlcih1KSYmTWF0aC5hYnMoZi1yKT51KSlyZXR1cm4gaTtyZXR1cm4gbn0sX3Byb2Nlc3NTdGVwQnlBbmdsZTpmdW5jdGlvbihuKXt2YXIgdD10aGlzLl9hbmdsZVRvVmFsdWUobik7cmV0dXJuIHRoaXMuX3Byb2Nlc3NTdGVwQnlWYWx1ZSh0KX0sX3Byb2Nlc3NTdGVwQnlWYWx1ZTpmdW5jdGlvbihuKXt2YXIgcj10aGlzLm9wdGlvbnMuc3RlcCxlLHQsdSxmLGksbztyZXR1cm4gZT0obi10aGlzLm9wdGlvbnMubWluKSVyLHQ9bi1lLHU9dGhpcy5fbGltaXRWYWx1ZSh0K3IpLGY9dGhpcy5fbGltaXRWYWx1ZSh0LXIpLGk9bj49dD9uLXQ8dS1uP3Q6dTp0LW4+bi1mP3Q6ZixpPXRoaXMuX3JvdW5kKGkpLG89dGhpcy5fdmFsdWVUb0FuZ2xlKGkpLHt2YWx1ZTppLGFuZ2xlOm99fSxfcm91bmQ6ZnVuY3Rpb24obil7dmFyIHQ9dGhpcy5vcHRpb25zLnN0ZXAudG9TdHJpbmcoKS5zcGxpdCgiLiIpO3JldHVybiB0WzFdP3BhcnNlRmxvYXQobi50b0ZpeGVkKHRbMV0ubGVuZ3RoKSk6TWF0aC5yb3VuZChuKX0sX29yaUFuZ2xlOmZ1bmN0aW9uKG4pe3ZhciB0PW4tdGhpcy5fc3RhcnQ7cmV0dXJuIHQ8MCYmKHQrPTM2MCksdH0sX2xpbWl0QW5nbGU6ZnVuY3Rpb24obil7cmV0dXJuIG4+MzYwK3RoaXMuX3N0YXJ0JiYobi09MzYwKSxuPHRoaXMuX3N0YXJ0JiYobis9MzYwKSxufSxfbGltaXRWYWx1ZTpmdW5jdGlvbihuKXtyZXR1cm4gbjx0aGlzLm9wdGlvbnMubWluJiYobj10aGlzLm9wdGlvbnMubWluKSxuPnRoaXMub3B0aW9ucy5tYXgmJihuPXRoaXMub3B0aW9ucy5tYXgpLG59LF9hbmdsZVRvVmFsdWU6ZnVuY3Rpb24obil7dmFyIHQ9dGhpcy5vcHRpb25zO3JldHVybiB0aGlzLl9vcmlBbmdsZShuKS90aGlzLl9lbmQqKHQubWF4LXQubWluKSt0Lm1pbn0sX3ZhbHVlVG9BbmdsZTpmdW5jdGlvbihuKXt2YXIgdD10aGlzLm9wdGlvbnM7cmV0dXJuKG4tdC5taW4pLyh0Lm1heC10Lm1pbikqdGhpcy5fZW5kK3RoaXMuX3N0YXJ0fSxfYXBwZW5kSGlkZGVuRmllbGQ6ZnVuY3Rpb24oKXt0aGlzLl9oaWRkZW5GaWVsZD10aGlzLl9oaWRkZW5GaWVsZHx8Y3JlYXRlRWxlbWVudCgiaW5wdXQiKSx0aGlzLl9oaWRkZW5GaWVsZC5hdHRyKHt0eXBlOiJoaWRkZW4iLG5hbWU6dGhpcy5fZGF0YUVsZW1lbnQoKVswXS5pZHx8IiJ9KSx0aGlzLmNvbnRyb2wuYXBwZW5kKHRoaXMuX2hpZGRlbkZpZWxkKSx0aGlzLl91cGRhdGVIaWRkZW4oKX0sX3VwZGF0ZUhpZGRlbjpmdW5jdGlvbigpe3ZhciBuPXRoaXMub3B0aW9ucy52YWx1ZTt0aGlzLl9oaWRkZW5GaWVsZC52YWwobiksKHRoaXMuX2lzS098fHRoaXMuX2lzQW5ndWxhcikmJnRoaXMuX2hpZGRlbkZpZWxkLnRyaWdnZXIoImNoYW5nZSIpLHRoaXMuX2lzQW5ndWxhciYmKHRoaXMuX3Njb3BlKClbdGhpcy5fbmdOYW1lXT1uKX0sX3VwZGF0ZVRvb2x0aXA6ZnVuY3Rpb24oKXt0aGlzLnRvb2x0aXAmJiF0aGlzLnRvb2x0aXAuaGFzQ2xhc3MoImhvdmVyIikmJnRoaXMudG9vbHRpcC5odG1sKHRoaXMuX2dldFRvb2x0aXBWYWx1ZSgpKSx0aGlzLl91cGRhdGVUb29sdGlwUG9zKCl9LF91cGRhdGVUb29sdGlwUG9zOmZ1bmN0aW9uKCl7dGhpcy50b29sdGlwJiZ0aGlzLnRvb2x0aXAuY3NzKHRoaXMuX2dldFRvb2x0aXBQb3MoKSl9LF9nZXRUb29sdGlwUG9zOmZ1bmN0aW9uKCl7dmFyIG49dGhpcy5vcHRpb25zLmNpcmNsZVNoYXBlLHQ7aWYobj09ImZ1bGwifHxuPT0icGllInx8bi5pbmRleE9mKCJjdXN0b20iKT09PTApcmV0dXJueyJtYXJnaW4tdG9wIjotdGhpcy50b29sdGlwLm91dGVySGVpZ2h0KCkvMiwibWFyZ2luLWxlZnQiOi10aGlzLnRvb2x0aXAub3V0ZXJXaWR0aCgpLzJ9O2lmKG4uaW5kZXhPZigiaGFsZiIpIT0tMSl7c3dpdGNoKG4pe2Nhc2UiaGFsZi10b3AiOmNhc2UiaGFsZi1ib3R0b20iOnQ9eyJtYXJnaW4tbGVmdCI6LXRoaXMudG9vbHRpcC5vdXRlcldpZHRoKCkvMn07YnJlYWs7Y2FzZSJoYWxmLWxlZnQiOmNhc2UiaGFsZi1yaWdodCI6dD17Im1hcmdpbi10b3AiOi10aGlzLnRvb2x0aXAub3V0ZXJIZWlnaHQoKS8yfX1yZXR1cm4gdH1yZXR1cm57fX0sX2dldFRvb2x0aXBWYWx1ZTpmdW5jdGlvbihuKXtpZih0aGlzLl9yYW5nZVNsaWRlcil7dmFyIHQ9dGhpcy5vcHRpb25zLnZhbHVlLnNwbGl0KCIsIik7cmV0dXJuIG4/dFswXSsiIC0gIit0WzFdOnRoaXMuX3Rvb2x0aXBWYWx1ZSh0WzBdLDEpKyIgLSAiK3RoaXMuX3Rvb2x0aXBWYWx1ZSh0WzFdLDIpfXJldHVybiBuP3RoaXMub3B0aW9ucy52YWx1ZTp0aGlzLl90b29sdGlwVmFsdWUodGhpcy5vcHRpb25zLnZhbHVlKX0sX3Rvb2x0aXBWYWx1ZTpmdW5jdGlvbihuLHQpe3ZhciBpPXRoaXMuX3JhaXNlKCJ0b29sdGlwRm9ybWF0Iix7dmFsdWU6bixoYW5kbGU6dGhpcy5faGFuZGxlQXJncyh0KX0pO3JldHVybiBpIT1udWxsJiZ0eXBlb2YgaSE9ImJvb2xlYW4iP2k6bn0sX3ZhbGlkYXRlU3RhcnRBbmdsZTpmdW5jdGlvbigpe3ZhciBuPXRoaXMub3B0aW9ucy5zdGFydEFuZ2xlO3JldHVybiBuPShpc051bWJlcihuKT9wYXJzZUZsb2F0KG4pOjApJTM2MCxuPDAmJihuKz0zNjApLHRoaXMub3B0aW9ucy5zdGFydEFuZ2xlPW4sbn0sX3ZhbGlkYXRlRW5kQW5nbGU6ZnVuY3Rpb24oKXt2YXIgZW5kPXRoaXMub3B0aW9ucy5lbmRBbmdsZTtpZih0eXBlb2YgZW5kPT0ic3RyaW5nIiYmaXNOdW1iZXIoZW5kKSYmKGVuZC5jaGFyQXQoMCk9PT0iKyJ8fGVuZC5jaGFyQXQoMCk9PT0iLSIpKXRyeXtlbmQ9ZXZhbCh0aGlzLm9wdGlvbnMuc3RhcnRBbmdsZStlbmQuY2hhckF0KDApK01hdGguYWJzKHBhcnNlRmxvYXQoZW5kKSkpfWNhdGNoKGUpe2NvbnNvbGUud2FybihlKX1yZXR1cm4gZW5kPShpc051bWJlcihlbmQpP3BhcnNlRmxvYXQoZW5kKTozNjApJTM2MCxlbmQ8PXRoaXMub3B0aW9ucy5zdGFydEFuZ2xlJiYoZW5kKz0zNjApLGVuZH0sX3JlZnJlc2hDaXJjbGVTaGFwZTpmdW5jdGlvbigpe3ZhciBuPXRoaXMub3B0aW9ucy5jaXJjbGVTaGFwZSxpPVsiaGFsZi10b3AiLCJoYWxmLWJvdHRvbSIsImhhbGYtbGVmdCIsImhhbGYtcmlnaHQiLCJxdWFydGVyLXRvcC1sZWZ0IiwicXVhcnRlci10b3AtcmlnaHQiLCJxdWFydGVyLWJvdHRvbS1yaWdodCIsInF1YXJ0ZXItYm90dG9tLWxlZnQiLCJwaWUiLCJjdXN0b20taGFsZiIsImN1c3RvbS1xdWFydGVyIl0sdDtpLmluZGV4T2Yobik9PS0xJiYodD1bImgxIiwiaDIiLCJoMyIsImg0IiwicTEiLCJxMiIsInEzIiwicTQiLCIzLzQiLCJjaCIsImNxIl0uaW5kZXhPZihuKSxuPXQhPS0xP2lbdF06bj09ImhhbGYiPyJoYWxmLXRvcCI6bj09InF1YXJ0ZXIiPyJxdWFydGVyLXRvcC1sZWZ0IjoiZnVsbCIpLHRoaXMub3B0aW9ucy5jaXJjbGVTaGFwZT1ufSxfYXBwZW5kT3ZlcmxheTpmdW5jdGlvbigpe3ZhciBuPXRoaXMub3B0aW9ucy5jaXJjbGVTaGFwZTtuPT0icGllIj90aGlzLl9jaGVja092ZXJsYXkoIi5ycy1vdmVybGF5IiwyNzApOihuPT0iY3VzdG9tLWhhbGYifHxuPT0iY3VzdG9tLXF1YXJ0ZXIiKSYmKHRoaXMuX2NoZWNrT3ZlcmxheSgiLnJzLW92ZXJsYXkxIiwxODApLG49PSJjdXN0b20tcXVhcnRlciImJnRoaXMuX2NoZWNrT3ZlcmxheSgiLnJzLW92ZXJsYXkyIix0aGlzLl9lbmQpKX0sX2NoZWNrT3ZlcmxheTpmdW5jdGlvbihuLHQpe3ZhciBpPXRoaXMuY29udGFpbmVyLmNoaWxkcmVuKG4pO2kubGVuZ3RoPT0wJiYoaT1jcmVhdGVFbGVtZW50KCJkaXYiK24rIiBycy10cmFuc2l0aW9uIHJzLWJnLWNvbG9yIiksdGhpcy5jb250YWluZXIuYXBwZW5kKGkpKSxpLnJzUm90YXRlKHRoaXMuX3N0YXJ0K3QpfSxfY2hlY2tEYXRhVHlwZTpmdW5jdGlvbigpe3ZhciBpPXRoaXMub3B0aW9ucyxyLG4sdCx1PXRoaXMuX3Byb3BzKCk7Zm9yKHIgaW4gdS5udW1iZXJUeXBlKW49dS5udW1iZXJUeXBlW3JdLHQ9aVtuXSxpW25dPWlzTnVtYmVyKHQpP3BhcnNlRmxvYXQodCk6dGhpcy5kZWZhdWx0c1tuXTtmb3IociBpbiB1LmJvb2xlYW5UeXBlKW49dS5ib29sZWFuVHlwZVtyXSx0PWlbbl0saVtuXT10PT0iZmFsc2UiPyExOiEhdDtmb3IociBpbiB1LnN0cmluZ1R5cGUpbj11LnN0cmluZ1R5cGVbcl0sdD1pW25dLGlbbl09KCIiK3QpLnRvTG93ZXJDYXNlKCl9LF92YWxpZGF0ZVNsaWRlclR5cGU6ZnVuY3Rpb24oKXt2YXIgbj10aGlzLm9wdGlvbnMuc2xpZGVyVHlwZS50b0xvd2VyQ2FzZSgpO3RoaXMuX3JhbmdlU2xpZGVyPXRoaXMuX3Nob3dSYW5nZT0hMSxuPT0icmFuZ2UiP3RoaXMuX3JhbmdlU2xpZGVyPXRoaXMuX3Nob3dSYW5nZT0hMDpuLmluZGV4T2YoIm1pbiIpIT0tMT8odGhpcy5fc2hvd1JhbmdlPSEwLG49Im1pbi1yYW5nZSIpOm49ImRlZmF1bHQiLHRoaXMub3B0aW9ucy5zbGlkZXJUeXBlPW59LF91cGRhdGVTdGFydEVuZDpmdW5jdGlvbigpe3ZhciBuPXRoaXMub3B0aW9ucy5jaXJjbGVTaGFwZTtuIT0iZnVsbCImJihuLmluZGV4T2YoInF1YXJ0ZXIiKSE9LTE/dGhpcy5vcHRpb25zLmVuZEFuZ2xlPSIrOTAiOm4uaW5kZXhPZigiaGFsZiIpIT0tMT90aGlzLm9wdGlvbnMuZW5kQW5nbGU9IisxODAiOm49PSJwaWUiJiYodGhpcy5vcHRpb25zLmVuZEFuZ2xlPSIrMjcwIiksbj09InF1YXJ0ZXItdG9wLWxlZnQifHxuPT0iaGFsZi10b3AiP3RoaXMub3B0aW9ucy5zdGFydEFuZ2xlPTA6bj09InF1YXJ0ZXItdG9wLXJpZ2h0Inx8bj09ImhhbGYtcmlnaHQiP3RoaXMub3B0aW9ucy5zdGFydEFuZ2xlPTkwOm49PSJxdWFydGVyLWJvdHRvbS1yaWdodCJ8fG49PSJoYWxmLWJvdHRvbSI/dGhpcy5vcHRpb25zLnN0YXJ0QW5nbGU9MTgwOihuPT0icXVhcnRlci1ib3R0b20tbGVmdCJ8fG49PSJoYWxmLWxlZnQiKSYmKHRoaXMub3B0aW9ucy5zdGFydEFuZ2xlPTI3MCkpfSxfdmFsaWRhdGVTdGFydEVuZDpmdW5jdGlvbigpe3RoaXMuX3N0YXJ0PXRoaXMuX3ZhbGlkYXRlU3RhcnRBbmdsZSgpLHRoaXMuX2VuZD10aGlzLl92YWxpZGF0ZUVuZEFuZ2xlKCk7dmFyIG49dGhpcy5fc3RhcnQ8dGhpcy5fZW5kPzA6MzYwO3RoaXMuX2VuZCs9bi10aGlzLl9zdGFydH0sX2FuYWx5emVNb2RlbFZhbHVlOmZ1bmN0aW9uKCl7dmFyIG49dGhpcy5vcHRpb25zLnZhbHVlLHQ9dGhpcy5vcHRpb25zLm1pbixmPXRoaXMub3B0aW9ucy5tYXgsdSxyLGk7biBpbnN0YW5jZW9mIEFycmF5JiYobj1uLnRvU3RyaW5nKCkpLGk9dHlwZW9mIG49PSJzdHJpbmciP24uc3BsaXQoIiwiKTpbbl0sdGhpcy5fcmFuZ2VTbGlkZXI/cj10eXBlb2Ygbj09InN0cmluZyI/aS5sZW5ndGg+PTI/KGlzTnVtYmVyKGlbMF0pP2lbMF06dCkrIiwiKyhpc051bWJlcihpWzFdKT9pWzFdOmYpOmlzTnVtYmVyKGlbMF0pP3QrIiwiK2lbMF06dCsiLCIrdDppc051bWJlcihuKT90KyIsIituOnQrIiwiK3Q6dHlwZW9mIG49PSJzdHJpbmciPyh1PWkucG9wKCkscj1pc051bWJlcih1KT9wYXJzZUZsb2F0KHUpOnQpOnI9aXNOdW1iZXIobik/cGFyc2VGbG9hdChuKTp0LHRoaXMub3B0aW9ucy52YWx1ZT1yfSxfdmFsaWRhdGVNb2RlbFZhbHVlOmZ1bmN0aW9uKCl7dmFyIHI9dGhpcy5vcHRpb25zLnZhbHVlLGk7aWYodGhpcy5fcmFuZ2VTbGlkZXIpe3ZhciB1PXIuc3BsaXQoIiwiKSxuPXBhcnNlRmxvYXQodVswXSksdD1wYXJzZUZsb2F0KHVbMV0pO249dGhpcy5fbGltaXRWYWx1ZShuKSx0PXRoaXMuX2xpbWl0VmFsdWUodCksdGhpcy5faW52ZXJ0UmFuZ2V8fG4+dCYmKHQ9biksdGhpcy5faGFuZGxlMT10aGlzLl9wcm9jZXNzU3RlcEJ5VmFsdWUobiksdGhpcy5faGFuZGxlMj10aGlzLl9wcm9jZXNzU3RlcEJ5VmFsdWUodCksdGhpcy5vcHRpb25zLnZhbHVlPXRoaXMuX2hhbmRsZTEudmFsdWUrIiwiK3RoaXMuX2hhbmRsZTIudmFsdWV9ZWxzZSBpPXRoaXMuX3Nob3dSYW5nZT8yOnRoaXMuX2FjdGl2ZXx8MSx0aGlzWyJfaGFuZGxlIitpXT10aGlzLl9wcm9jZXNzU3RlcEJ5VmFsdWUodGhpcy5fbGltaXRWYWx1ZShyKSksdGhpcy5fc2hvd1JhbmdlJiYodGhpcy5faGFuZGxlMT10aGlzLl9oYW5kbGVEZWZhdWx0cygpKSx0aGlzLm9wdGlvbnMudmFsdWU9dGhpc1siX2hhbmRsZSIraV0udmFsdWV9LF9pc0Jyb3dzZXJTdXBwb3J0ZWQ6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9WyJib3JkZXJSYWRpdXMiLCJXZWJraXRCb3JkZXJSYWRpdXMiLCJNb3pCb3JkZXJSYWRpdXMiLCJPQm9yZGVyUmFkaXVzIiwibXNCb3JkZXJSYWRpdXMiLCJLaHRtbEJvcmRlclJhZGl1cyJdLG49MDtuPHQubGVuZ3RoO24rKylpZihkb2N1bWVudC5ib2R5LnN0eWxlW3Rbbl1dIT09dW5kZWZpbmVkKXJldHVybiEwfSxfdGhyb3dFcnJvcjpmdW5jdGlvbigpe3JldHVybiJUaGlzIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IHRoZSBib3JkZXItcmFkaW91cyBwcm9wZXJ0eS4ifSxfY2hlY2tJRTpmdW5jdGlvbigpe3ZhciBuPXdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50OyhuLmluZGV4T2YoIk1TSUUgIik+PTB8fG4uaW5kZXhPZigiVHJpZGVudC8iKT49MCkmJnRoaXMuY29udHJvbC5jc3MoeyItbXMtdG91Y2gtYWN0aW9uIjoibm9uZSIsInRvdWNoLWFjdGlvbiI6Im5vbmUifSl9LF9yYWlzZTpmdW5jdGlvbihuLHQpe3ZhciB1PXRoaXMub3B0aW9ucyxpPXVbbl0scj0hMDtyZXR1cm4gdD10fHx7dmFsdWU6dS52YWx1ZX0sdC5vcHRpb25zPXUsaSYmKHQudHlwZT1uLHR5cGVvZiBpPT0ic3RyaW5nIiYmKGk9d2luZG93W2ldKSwkLmlzRnVuY3Rpb24oaSkmJihyPWkuY2FsbCh0aGlzLHQpLHI9cj09PSExPyExOnIpKSx0aGlzLmNvbnRyb2wudHJpZ2dlcigkLkV2ZW50PyQuRXZlbnQobix0KTpuKSxyfSxfYmluZDpmdW5jdGlvbihuLHQsaSl7JChuKS5iaW5kKHQsJHByb3h5KGksdGhpcykpfSxfdW5iaW5kOmZ1bmN0aW9uKG4sdCxpKXskLnByb3h5PyQobikudW5iaW5kKHQsJC5wcm94eShpLHRoaXMpKTokKG4pLnVuYmluZCh0KX0sX2dldEluc3RhbmNlOmZ1bmN0aW9uKCl7cmV0dXJuICRkYXRhKHRoaXMuX2RhdGFFbGVtZW50KClbMF0scGx1Z2luTmFtZSl9LF9yZW1vdmVEYXRhOmZ1bmN0aW9uKCl7dmFyIG49dGhpcy5fZGF0YUVsZW1lbnQoKVswXTskLnJlbW92ZURhdGEmJiQucmVtb3ZlRGF0YShuLHBsdWdpbk5hbWUpLG4uaWQmJmRlbGV0ZSB3aW5kb3dbbi5pZF19LF9kZXN0cm95Q29udHJvbDpmdW5jdGlvbigpe3RoaXMuX2lzSW5wdXRUeXBlJiZ0aGlzLl9kYXRhRWxlbWVudCgpLmluc2VydEFmdGVyKHRoaXMuY29udHJvbCkuYXR0cigidHlwZSIsInRleHQiKSx0aGlzLmNvbnRyb2wuZW1wdHkoKS5yZW1vdmVDbGFzcygicnMtY29udHJvbCIpLmhlaWdodCgiIikud2lkdGgoIiIpLHRoaXMuX3JlbW92ZUFuaW1hdGlvbigpLHRoaXMuX2JpbmRDb250cm9sRXZlbnRzKCJfdW5iaW5kIil9LF91cGRhdGVXaWR0aDpmdW5jdGlvbigpe3RoaXMubGFzdEJsb2NrLmNzcygicGFkZGluZyIsdGhpcy5vcHRpb25zLndpZHRoKSx0aGlzLl9yZWZyZXNoSGFuZGxlKCl9LF9yZWFkT25seTpmdW5jdGlvbihuKXt0aGlzLl9pc1JlYWRPbmx5PW4sdGhpcy5jb250YWluZXIucmVtb3ZlQ2xhc3MoInJzLXJlYWRvbmx5IiksbiYmdGhpcy5jb250YWluZXIuYWRkQ2xhc3MoInJzLXJlYWRvbmx5Iil9LF9nZXQ6ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMub3B0aW9uc1tuXX0sX3NldDpmdW5jdGlvbihuLHQpe3ZhciBpPXRoaXMuX3Byb3BzKCk7aWYoJC5pbkFycmF5KG4saS5udW1iZXJUeXBlKSE9LTEpe2lmKCFpc051bWJlcih0KSlyZXR1cm47dD1wYXJzZUZsb2F0KHQpfWVsc2UgJC5pbkFycmF5KG4saS5ib29sZWFuVHlwZSkhPS0xP3Q9dD09ImZhbHNlIj8hMTohIXQ6JC5pbkFycmF5KG4saS5zdHJpbmdUeXBlKSE9LTEmJih0PXQudG9Mb3dlckNhc2UoKSk7aWYodGhpcy5vcHRpb25zW25dIT10KXt0aGlzLm9wdGlvbnNbbl09dDtzd2l0Y2gobil7Y2FzZSJzdGFydEFuZ2xlIjpjYXNlImVuZEFuZ2xlIjp0aGlzLl92YWxpZGF0ZVN0YXJ0RW5kKCksdGhpcy5fdXBkYXRlU2VwZXJhdG9yKCksdGhpcy5fYXBwZW5kT3ZlcmxheSgpO2Nhc2UibWluIjpjYXNlIm1heCI6Y2FzZSJzdGVwIjpjYXNlInZhbHVlIjp0aGlzLl9hbmFseXplTW9kZWxWYWx1ZSgpLHRoaXMuX3ZhbGlkYXRlTW9kZWxWYWx1ZSgpLHRoaXMuX3NldFZhbHVlKCksdGhpcy5fdXBkYXRlUHJlKCksdGhpcy5fdXBkYXRlSGlkZGVuKCksdGhpcy5fdXBkYXRlVG9vbHRpcCgpO2JyZWFrO2Nhc2UicmFkaXVzIjp0aGlzLl9zZXRSYWRpdXMoKSx0aGlzLl91cGRhdGVUb29sdGlwUG9zKCk7YnJlYWs7Y2FzZSJ3aWR0aCI6dGhpcy5fcmVtb3ZlQW5pbWF0aW9uKCksdGhpcy5fdXBkYXRlV2lkdGgoKSx0aGlzLl91cGRhdGVUb29sdGlwUG9zKCksdGhpcy5fYWRkQW5pbWF0aW9uKCksdGhpcy5fcmVmcmVzaFNlcGVyYXRvcigpO2JyZWFrO2Nhc2UiaGFuZGxlU2l6ZSI6dGhpcy5fcmVmcmVzaEhhbmRsZSgpO2JyZWFrO2Nhc2UiaGFuZGxlU2hhcGUiOnRoaXMuX3NldEhhbmRsZVNoYXBlKCk7YnJlYWs7Y2FzZSJhbmltYXRpb24iOnRoaXMuX3NldEFuaW1hdGlvbigpO2JyZWFrO2Nhc2Uic2hvd1Rvb2x0aXAiOnRoaXMub3B0aW9ucy5zaG93VG9vbHRpcD90aGlzLl9hcHBlbmRUb29sdGlwKCk6dGhpcy5fcmVtb3ZlVG9vbHRpcCgpO2JyZWFrO2Nhc2UiZWRpdGFibGVUb29sdGlwIjp0aGlzLl90b29sdGlwRWRpdGFibGUoKSx0aGlzLl91cGRhdGVUb29sdGlwUG9zKCk7YnJlYWs7Y2FzZSJkaXNhYmxlZCI6dGhpcy5vcHRpb25zLmRpc2FibGVkP3RoaXMuZGlzYWJsZSgpOnRoaXMuZW5hYmxlKCk7YnJlYWs7Y2FzZSJyZWFkT25seSI6dGhpcy5vcHRpb25zLnJlYWRPbmx5P3RoaXMuX3JlYWRPbmx5KCEwKTohdGhpcy5vcHRpb25zLmRpc2FibGVkJiZ0aGlzLl9yZWFkT25seSghMSk7YnJlYWs7Y2FzZSJtb3VzZVNjcm9sbEFjdGlvbiI6dGhpcy5fYmluZFNjcm9sbEV2ZW50cyh0aGlzLm9wdGlvbnMubW91c2VTY3JvbGxBY3Rpb24/Il9iaW5kIjoiX3VuYmluZCIpO2JyZWFrO2Nhc2UibGluZUNhcCI6dGhpcy5fcmVmcmVzaFNlcGVyYXRvcigpO2JyZWFrO2Nhc2UiY2lyY2xlU2hhcGUiOnRoaXMuX3JlZnJlc2hDaXJjbGVTaGFwZSgpLHRoaXMub3B0aW9ucy5jaXJjbGVTaGFwZT09ImZ1bGwiJiYodGhpcy5vcHRpb25zLnN0YXJ0QW5nbGU9MCx0aGlzLm9wdGlvbnMuZW5kQW5nbGU9IiszNjAiKTtjYXNlInNsaWRlclR5cGUiOnRoaXMuX2Rlc3Ryb3lDb250cm9sKCksdGhpcy5fb25Jbml0KCl9cmV0dXJuIHRoaXN9fSxvcHRpb246ZnVuY3Rpb24obix0KXtpZih0aGlzLl9nZXRJbnN0YW5jZSgpJiZ0aGlzLl9pc0Jyb3dzZXJTdXBwb3J0KXtpZigkaXNQbGFpbk9iamVjdChuKSl7KG4ubWluIT09dW5kZWZpbmVkfHxuLm1heCE9PXVuZGVmaW5lZCkmJihuLm1pbiE9PXVuZGVmaW5lZCYmKHRoaXMub3B0aW9ucy5taW49bi5taW4sZGVsZXRlIG4ubWluKSxuLm1heCE9PXVuZGVmaW5lZCYmKHRoaXMub3B0aW9ucy5tYXg9bi5tYXgsZGVsZXRlIG4ubWF4KSxuLnZhbHVlPT11bmRlZmluZWQmJnRoaXMuX3NldCgidmFsdWUiLHRoaXMub3B0aW9ucy52YWx1ZSkpO2Zvcih2YXIgaSBpbiBuKXRoaXMuX3NldChpLG5baV0pfWVsc2UgaWYobiYmdHlwZW9mIG49PSJzdHJpbmciKXtpZih0PT09dW5kZWZpbmVkKXJldHVybiB0aGlzLl9nZXQobik7dGhpcy5fc2V0KG4sdCl9cmV0dXJuIHRoaXN9fSxnZXRWYWx1ZTpmdW5jdGlvbihuKXtpZih0aGlzLm9wdGlvbnMuc2xpZGVyVHlwZT09InJhbmdlIiYmaXNOdW1iZXIobikpe3ZhciB0PXBhcnNlRmxvYXQobik7aWYodD09MXx8dD09MilyZXR1cm4gdGhpc1siX2hhbmRsZSIrdF0udmFsdWV9cmV0dXJuIHRoaXMuX2dldCgidmFsdWUiKX0sc2V0VmFsdWU6ZnVuY3Rpb24obix0KXtpZihpc051bWJlcihuKSl7aWYoaXNOdW1iZXIodCkpaWYodGhpcy5vcHRpb25zLnNsaWRlclR5cGU9PSJyYW5nZSIpe3ZhciBpPXBhcnNlRmxvYXQodCkscj1wYXJzZUZsb2F0KG4pO2k9PTE/bj1yKyIsIit0aGlzLl9oYW5kbGUyLnZhbHVlOmk9PTImJihuPXRoaXMuX2hhbmRsZTEudmFsdWUrIiwiK3IpfWVsc2UgdGhpcy5vcHRpb25zLnNsaWRlclR5cGU9PSJkZWZhdWx0IiYmKHRoaXMuX2FjdGl2ZT10KTt0aGlzLl9zZXQoInZhbHVlIixuKX19LGRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMuZGlzYWJsZWQ9ITAsdGhpcy5jb250YWluZXIuYWRkQ2xhc3MoInJzLWRpc2FibGVkIiksdGhpcy5fcmVhZE9ubHkoITApfSxlbmFibGU6ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMuZGlzYWJsZWQ9ITEsdGhpcy5jb250YWluZXIucmVtb3ZlQ2xhc3MoInJzLWRpc2FibGVkIiksdGhpcy5vcHRpb25zLnJlYWRPbmx5fHx0aGlzLl9yZWFkT25seSghMSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLl9nZXRJbnN0YW5jZSgpJiYodGhpcy5fZGVzdHJveUNvbnRyb2woKSx0aGlzLl9yZW1vdmVEYXRhKCksdGhpcy5faXNJbnB1dFR5cGUmJnRoaXMuY29udHJvbC5yZW1vdmUoKSl9fSwkLmZuLnJzUm90YXRlPWZ1bmN0aW9uKG4pe3JldHVybiBzZXRUcmFuc2Zvcm0odGhpcyxuKX0sdHlwZW9mICQuZm4ub3V0ZXJIZWlnaHQ9PSJ1bmRlZmluZWQiJiYoJC5mbi5vdXRlckhlaWdodD1mdW5jdGlvbigpe3JldHVybiB0aGlzWzBdLm9mZnNldEhlaWdodH0sJC5mbi5vdXRlcldpZHRoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbMF0ub2Zmc2V0V2lkdGh9KSx0eXBlb2YgJC5mbi5oYXNDbGFzcz09InVuZGVmaW5lZCImJigkLmZuLmhhc0NsYXNzPWZ1bmN0aW9uKG4pe3JldHVybiB0aGlzWzBdLmNsYXNzTmFtZS5zcGxpdCgiICIpLmluZGV4T2YobikhPT0tMX0pLHR5cGVvZiAkLmZuLm9mZnNldD09InVuZGVmaW5lZCImJigkLmZuLm9mZnNldD1mdW5jdGlvbigpe3JldHVybntsZWZ0OnRoaXNbMF0ub2Zmc2V0TGVmdCx0b3A6dGhpc1swXS5vZmZzZXRUb3B9fSksJC5mbltwbHVnaW5OYW1lXS5wcm90b3R5cGU9Um91bmRTbGlkZXIucHJvdG90eXBlfSkoalF1ZXJ5LHdpbmRvdyk7Ci8qISBqUXVlcnkgVUkgLSB2MS4xMi4xIC0gMjAxNi0wOS0xNAogKiBodHRwOi8vanF1ZXJ5dWkuY29tCiAqIEluY2x1ZGVzOiB3aWRnZXQuanMsIHBvc2l0aW9uLmpzLCBkYXRhLmpzLCBkaXNhYmxlLXNlbGVjdGlvbi5qcywgZWZmZWN0LmpzLCBlZmZlY3RzL2VmZmVjdC1ibGluZC5qcywgZWZmZWN0cy9lZmZlY3QtYm91bmNlLmpzLCBlZmZlY3RzL2VmZmVjdC1jbGlwLmpzLCBlZmZlY3RzL2VmZmVjdC1kcm9wLmpzLCBlZmZlY3RzL2VmZmVjdC1leHBsb2RlLmpzLCBlZmZlY3RzL2VmZmVjdC1mYWRlLmpzLCBlZmZlY3RzL2VmZmVjdC1mb2xkLmpzLCBlZmZlY3RzL2VmZmVjdC1oaWdobGlnaHQuanMsIGVmZmVjdHMvZWZmZWN0LXB1ZmYuanMsIGVmZmVjdHMvZWZmZWN0LXB1bHNhdGUuanMsIGVmZmVjdHMvZWZmZWN0LXNjYWxlLmpzLCBlZmZlY3RzL2VmZmVjdC1zaGFrZS5qcywgZWZmZWN0cy9lZmZlY3Qtc2l6ZS5qcywgZWZmZWN0cy9lZmZlY3Qtc2xpZGUuanMsIGVmZmVjdHMvZWZmZWN0LXRyYW5zZmVyLmpzLCBmb2N1c2FibGUuanMsIGZvcm0tcmVzZXQtbWl4aW4uanMsIGpxdWVyeS0xLTcuanMsIGtleWNvZGUuanMsIGxhYmVscy5qcywgc2Nyb2xsLXBhcmVudC5qcywgdGFiYmFibGUuanMsIHVuaXF1ZS1pZC5qcywgd2lkZ2V0cy9hY2NvcmRpb24uanMsIHdpZGdldHMvYXV0b2NvbXBsZXRlLmpzLCB3aWRnZXRzL2J1dHRvbi5qcywgd2lkZ2V0cy9jaGVja2JveHJhZGlvLmpzLCB3aWRnZXRzL2NvbnRyb2xncm91cC5qcywgd2lkZ2V0cy9kYXRlcGlja2VyLmpzLCB3aWRnZXRzL2RpYWxvZy5qcywgd2lkZ2V0cy9kcmFnZ2FibGUuanMsIHdpZGdldHMvZHJvcHBhYmxlLmpzLCB3aWRnZXRzL21lbnUuanMsIHdpZGdldHMvbW91c2UuanMsIHdpZGdldHMvcHJvZ3Jlc3NiYXIuanMsIHdpZGdldHMvcmVzaXphYmxlLmpzLCB3aWRnZXRzL3NlbGVjdGFibGUuanMsIHdpZGdldHMvc2VsZWN0bWVudS5qcywgd2lkZ2V0cy9zbGlkZXIuanMsIHdpZGdldHMvc29ydGFibGUuanMsIHdpZGdldHMvc3Bpbm5lci5qcywgd2lkZ2V0cy90YWJzLmpzLCB3aWRnZXRzL3Rvb2x0aXAuanMKICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnM7IExpY2Vuc2VkIE1JVCAqLwoKKGZ1bmN0aW9uKHQpeyJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFsianF1ZXJ5Il0sdCk6dChqUXVlcnkpfSkoZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0KXtmb3IodmFyIGU9dC5jc3MoInZpc2liaWxpdHkiKTsiaW5oZXJpdCI9PT1lOyl0PXQucGFyZW50KCksZT10LmNzcygidmlzaWJpbGl0eSIpO3JldHVybiJoaWRkZW4iIT09ZX1mdW5jdGlvbiBpKHQpe2Zvcih2YXIgZSxpO3QubGVuZ3RoJiZ0WzBdIT09ZG9jdW1lbnQ7KXtpZihlPXQuY3NzKCJwb3NpdGlvbiIpLCgiYWJzb2x1dGUiPT09ZXx8InJlbGF0aXZlIj09PWV8fCJmaXhlZCI9PT1lKSYmKGk9cGFyc2VJbnQodC5jc3MoInpJbmRleCIpLDEwKSwhaXNOYU4oaSkmJjAhPT1pKSlyZXR1cm4gaTt0PXQucGFyZW50KCl9cmV0dXJuIDB9ZnVuY3Rpb24gcygpe3RoaXMuX2N1ckluc3Q9bnVsbCx0aGlzLl9rZXlFdmVudD0hMSx0aGlzLl9kaXNhYmxlZElucHV0cz1bXSx0aGlzLl9kYXRlcGlja2VyU2hvd2luZz0hMSx0aGlzLl9pbkRpYWxvZz0hMSx0aGlzLl9tYWluRGl2SWQ9InVpLWRhdGVwaWNrZXItZGl2Iix0aGlzLl9pbmxpbmVDbGFzcz0idWktZGF0ZXBpY2tlci1pbmxpbmUiLHRoaXMuX2FwcGVuZENsYXNzPSJ1aS1kYXRlcGlja2VyLWFwcGVuZCIsdGhpcy5fdHJpZ2dlckNsYXNzPSJ1aS1kYXRlcGlja2VyLXRyaWdnZXIiLHRoaXMuX2RpYWxvZ0NsYXNzPSJ1aS1kYXRlcGlja2VyLWRpYWxvZyIsdGhpcy5fZGlzYWJsZUNsYXNzPSJ1aS1kYXRlcGlja2VyLWRpc2FibGVkIix0aGlzLl91bnNlbGVjdGFibGVDbGFzcz0idWktZGF0ZXBpY2tlci11bnNlbGVjdGFibGUiLHRoaXMuX2N1cnJlbnRDbGFzcz0idWktZGF0ZXBpY2tlci1jdXJyZW50LWRheSIsdGhpcy5fZGF5T3ZlckNsYXNzPSJ1aS1kYXRlcGlja2VyLWRheXMtY2VsbC1vdmVyIix0aGlzLnJlZ2lvbmFsPVtdLHRoaXMucmVnaW9uYWxbIiJdPXtjbG9zZVRleHQ6IkRvbmUiLHByZXZUZXh0OiJQcmV2IixuZXh0VGV4dDoiTmV4dCIsY3VycmVudFRleHQ6IlRvZGF5Iixtb250aE5hbWVzOlsiSmFudWFyeSIsIkZlYnJ1YXJ5IiwiTWFyY2giLCJBcHJpbCIsIk1heSIsIkp1bmUiLCJKdWx5IiwiQXVndXN0IiwiU2VwdGVtYmVyIiwiT2N0b2JlciIsIk5vdmVtYmVyIiwiRGVjZW1iZXIiXSxtb250aE5hbWVzU2hvcnQ6WyJKYW4iLCJGZWIiLCJNYXIiLCJBcHIiLCJNYXkiLCJKdW4iLCJKdWwiLCJBdWciLCJTZXAiLCJPY3QiLCJOb3YiLCJEZWMiXSxkYXlOYW1lczpbIlN1bmRheSIsIk1vbmRheSIsIlR1ZXNkYXkiLCJXZWRuZXNkYXkiLCJUaHVyc2RheSIsIkZyaWRheSIsIlNhdHVyZGF5Il0sZGF5TmFtZXNTaG9ydDpbIlN1biIsIk1vbiIsIlR1ZSIsIldlZCIsIlRodSIsIkZyaSIsIlNhdCJdLGRheU5hbWVzTWluOlsiU3UiLCJNbyIsIlR1IiwiV2UiLCJUaCIsIkZyIiwiU2EiXSx3ZWVrSGVhZGVyOiJXayIsZGF0ZUZvcm1hdDoibW0vZGQveXkiLGZpcnN0RGF5OjAsaXNSVEw6ITEsc2hvd01vbnRoQWZ0ZXJZZWFyOiExLHllYXJTdWZmaXg6IiJ9LHRoaXMuX2RlZmF1bHRzPXtzaG93T246ImZvY3VzIixzaG93QW5pbToiZmFkZUluIixzaG93T3B0aW9uczp7fSxkZWZhdWx0RGF0ZTpudWxsLGFwcGVuZFRleHQ6IiIsYnV0dG9uVGV4dDoiLi4uIixidXR0b25JbWFnZToiIixidXR0b25JbWFnZU9ubHk6ITEsaGlkZUlmTm9QcmV2TmV4dDohMSxuYXZpZ2F0aW9uQXNEYXRlRm9ybWF0OiExLGdvdG9DdXJyZW50OiExLGNoYW5nZU1vbnRoOiExLGNoYW5nZVllYXI6ITEseWVhclJhbmdlOiJjLTEwOmMrMTAiLHNob3dPdGhlck1vbnRoczohMSxzZWxlY3RPdGhlck1vbnRoczohMSxzaG93V2VlazohMSxjYWxjdWxhdGVXZWVrOnRoaXMuaXNvODYwMVdlZWssc2hvcnRZZWFyQ3V0b2ZmOiIrMTAiLG1pbkRhdGU6bnVsbCxtYXhEYXRlOm51bGwsZHVyYXRpb246ImZhc3QiLGJlZm9yZVNob3dEYXk6bnVsbCxiZWZvcmVTaG93Om51bGwsb25TZWxlY3Q6bnVsbCxvbkNoYW5nZU1vbnRoWWVhcjpudWxsLG9uQ2xvc2U6bnVsbCxudW1iZXJPZk1vbnRoczoxLHNob3dDdXJyZW50QXRQb3M6MCxzdGVwTW9udGhzOjEsc3RlcEJpZ01vbnRoczoxMixhbHRGaWVsZDoiIixhbHRGb3JtYXQ6IiIsY29uc3RyYWluSW5wdXQ6ITAsc2hvd0J1dHRvblBhbmVsOiExLGF1dG9TaXplOiExLGRpc2FibGVkOiExfSx0LmV4dGVuZCh0aGlzLl9kZWZhdWx0cyx0aGlzLnJlZ2lvbmFsWyIiXSksdGhpcy5yZWdpb25hbC5lbj10LmV4dGVuZCghMCx7fSx0aGlzLnJlZ2lvbmFsWyIiXSksdGhpcy5yZWdpb25hbFsiZW4tVVMiXT10LmV4dGVuZCghMCx7fSx0aGlzLnJlZ2lvbmFsLmVuKSx0aGlzLmRwRGl2PW4odCgiPGRpdiBpZD0nIit0aGlzLl9tYWluRGl2SWQrIicgY2xhc3M9J3VpLWRhdGVwaWNrZXIgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWhlbHBlci1jbGVhcmZpeCB1aS1jb3JuZXItYWxsJz48L2Rpdj4iKSl9ZnVuY3Rpb24gbihlKXt2YXIgaT0iYnV0dG9uLCAudWktZGF0ZXBpY2tlci1wcmV2LCAudWktZGF0ZXBpY2tlci1uZXh0LCAudWktZGF0ZXBpY2tlci1jYWxlbmRhciB0ZCBhIjtyZXR1cm4gZS5vbigibW91c2VvdXQiLGksZnVuY3Rpb24oKXt0KHRoaXMpLnJlbW92ZUNsYXNzKCJ1aS1zdGF0ZS1ob3ZlciIpLC0xIT09dGhpcy5jbGFzc05hbWUuaW5kZXhPZigidWktZGF0ZXBpY2tlci1wcmV2IikmJnQodGhpcykucmVtb3ZlQ2xhc3MoInVpLWRhdGVwaWNrZXItcHJldi1ob3ZlciIpLC0xIT09dGhpcy5jbGFzc05hbWUuaW5kZXhPZigidWktZGF0ZXBpY2tlci1uZXh0IikmJnQodGhpcykucmVtb3ZlQ2xhc3MoInVpLWRhdGVwaWNrZXItbmV4dC1ob3ZlciIpfSkub24oIm1vdXNlb3ZlciIsaSxvKX1mdW5jdGlvbiBvKCl7dC5kYXRlcGlja2VyLl9pc0Rpc2FibGVkRGF0ZXBpY2tlcihtLmlubGluZT9tLmRwRGl2LnBhcmVudCgpWzBdOm0uaW5wdXRbMF0pfHwodCh0aGlzKS5wYXJlbnRzKCIudWktZGF0ZXBpY2tlci1jYWxlbmRhciIpLmZpbmQoImEiKS5yZW1vdmVDbGFzcygidWktc3RhdGUtaG92ZXIiKSx0KHRoaXMpLmFkZENsYXNzKCJ1aS1zdGF0ZS1ob3ZlciIpLC0xIT09dGhpcy5jbGFzc05hbWUuaW5kZXhPZigidWktZGF0ZXBpY2tlci1wcmV2IikmJnQodGhpcykuYWRkQ2xhc3MoInVpLWRhdGVwaWNrZXItcHJldi1ob3ZlciIpLC0xIT09dGhpcy5jbGFzc05hbWUuaW5kZXhPZigidWktZGF0ZXBpY2tlci1uZXh0IikmJnQodGhpcykuYWRkQ2xhc3MoInVpLWRhdGVwaWNrZXItbmV4dC1ob3ZlciIpKX1mdW5jdGlvbiBhKGUsaSl7dC5leHRlbmQoZSxpKTtmb3IodmFyIHMgaW4gaSludWxsPT1pW3NdJiYoZVtzXT1pW3NdKTtyZXR1cm4gZX1mdW5jdGlvbiByKHQpe3JldHVybiBmdW5jdGlvbigpe3ZhciBlPXRoaXMuZWxlbWVudC52YWwoKTt0LmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLl9yZWZyZXNoKCksZSE9PXRoaXMuZWxlbWVudC52YWwoKSYmdGhpcy5fdHJpZ2dlcigiY2hhbmdlIil9fXQudWk9dC51aXx8e30sdC51aS52ZXJzaW9uPSIxLjEyLjEiO3ZhciBoPTAsbD1BcnJheS5wcm90b3R5cGUuc2xpY2U7dC5jbGVhbkRhdGE9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKGkpe3ZhciBzLG4sbztmb3Iobz0wO251bGwhPShuPWlbb10pO28rKyl0cnl7cz10Ll9kYXRhKG4sImV2ZW50cyIpLHMmJnMucmVtb3ZlJiZ0KG4pLnRyaWdnZXJIYW5kbGVyKCJyZW1vdmUiKX1jYXRjaChhKXt9ZShpKX19KHQuY2xlYW5EYXRhKSx0LndpZGdldD1mdW5jdGlvbihlLGkscyl7dmFyIG4sbyxhLHI9e30saD1lLnNwbGl0KCIuIilbMF07ZT1lLnNwbGl0KCIuIilbMV07dmFyIGw9aCsiLSIrZTtyZXR1cm4gc3x8KHM9aSxpPXQuV2lkZ2V0KSx0LmlzQXJyYXkocykmJihzPXQuZXh0ZW5kLmFwcGx5KG51bGwsW3t9XS5jb25jYXQocykpKSx0LmV4cHJbIjoiXVtsLnRvTG93ZXJDYXNlKCldPWZ1bmN0aW9uKGUpe3JldHVybiEhdC5kYXRhKGUsbCl9LHRbaF09dFtoXXx8e30sbj10W2hdW2VdLG89dFtoXVtlXT1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9jcmVhdGVXaWRnZXQ/KGFyZ3VtZW50cy5sZW5ndGgmJnRoaXMuX2NyZWF0ZVdpZGdldCh0LGUpLHZvaWQgMCk6bmV3IG8odCxlKX0sdC5leHRlbmQobyxuLHt2ZXJzaW9uOnMudmVyc2lvbixfcHJvdG86dC5leHRlbmQoe30scyksX2NoaWxkQ29uc3RydWN0b3JzOltdfSksYT1uZXcgaSxhLm9wdGlvbnM9dC53aWRnZXQuZXh0ZW5kKHt9LGEub3B0aW9ucyksdC5lYWNoKHMsZnVuY3Rpb24oZSxzKXtyZXR1cm4gdC5pc0Z1bmN0aW9uKHMpPyhyW2VdPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3JldHVybiBpLnByb3RvdHlwZVtlXS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gbih0KXtyZXR1cm4gaS5wcm90b3R5cGVbZV0uYXBwbHkodGhpcyx0KX1yZXR1cm4gZnVuY3Rpb24oKXt2YXIgZSxpPXRoaXMuX3N1cGVyLG89dGhpcy5fc3VwZXJBcHBseTtyZXR1cm4gdGhpcy5fc3VwZXI9dCx0aGlzLl9zdXBlckFwcGx5PW4sZT1zLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLl9zdXBlcj1pLHRoaXMuX3N1cGVyQXBwbHk9byxlfX0oKSx2b2lkIDApOihyW2VdPXMsdm9pZCAwKX0pLG8ucHJvdG90eXBlPXQud2lkZ2V0LmV4dGVuZChhLHt3aWRnZXRFdmVudFByZWZpeDpuP2Eud2lkZ2V0RXZlbnRQcmVmaXh8fGU6ZX0scix7Y29uc3RydWN0b3I6byxuYW1lc3BhY2U6aCx3aWRnZXROYW1lOmUsd2lkZ2V0RnVsbE5hbWU6bH0pLG4/KHQuZWFjaChuLl9jaGlsZENvbnN0cnVjdG9ycyxmdW5jdGlvbihlLGkpe3ZhciBzPWkucHJvdG90eXBlO3Qud2lkZ2V0KHMubmFtZXNwYWNlKyIuIitzLndpZGdldE5hbWUsbyxpLl9wcm90byl9KSxkZWxldGUgbi5fY2hpbGRDb25zdHJ1Y3RvcnMpOmkuX2NoaWxkQ29uc3RydWN0b3JzLnB1c2gobyksdC53aWRnZXQuYnJpZGdlKGUsbyksb30sdC53aWRnZXQuZXh0ZW5kPWZ1bmN0aW9uKGUpe2Zvcih2YXIgaSxzLG49bC5jYWxsKGFyZ3VtZW50cywxKSxvPTAsYT1uLmxlbmd0aDthPm87bysrKWZvcihpIGluIG5bb10pcz1uW29dW2ldLG5bb10uaGFzT3duUHJvcGVydHkoaSkmJnZvaWQgMCE9PXMmJihlW2ldPXQuaXNQbGFpbk9iamVjdChzKT90LmlzUGxhaW5PYmplY3QoZVtpXSk/dC53aWRnZXQuZXh0ZW5kKHt9LGVbaV0scyk6dC53aWRnZXQuZXh0ZW5kKHt9LHMpOnMpO3JldHVybiBlfSx0LndpZGdldC5icmlkZ2U9ZnVuY3Rpb24oZSxpKXt2YXIgcz1pLnByb3RvdHlwZS53aWRnZXRGdWxsTmFtZXx8ZTt0LmZuW2VdPWZ1bmN0aW9uKG4pe3ZhciBvPSJzdHJpbmciPT10eXBlb2YgbixhPWwuY2FsbChhcmd1bWVudHMsMSkscj10aGlzO3JldHVybiBvP3RoaXMubGVuZ3RofHwiaW5zdGFuY2UiIT09bj90aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgaSxvPXQuZGF0YSh0aGlzLHMpO3JldHVybiJpbnN0YW5jZSI9PT1uPyhyPW8sITEpOm8/dC5pc0Z1bmN0aW9uKG9bbl0pJiYiXyIhPT1uLmNoYXJBdCgwKT8oaT1vW25dLmFwcGx5KG8sYSksaSE9PW8mJnZvaWQgMCE9PWk/KHI9aSYmaS5qcXVlcnk/ci5wdXNoU3RhY2soaS5nZXQoKSk6aSwhMSk6dm9pZCAwKTp0LmVycm9yKCJubyBzdWNoIG1ldGhvZCAnIituKyInIGZvciAiK2UrIiB3aWRnZXQgaW5zdGFuY2UiKTp0LmVycm9yKCJjYW5ub3QgY2FsbCBtZXRob2RzIG9uICIrZSsiIHByaW9yIHRvIGluaXRpYWxpemF0aW9uOyAiKyJhdHRlbXB0ZWQgdG8gY2FsbCBtZXRob2QgJyIrbisiJyIpfSk6cj12b2lkIDA6KGEubGVuZ3RoJiYobj10LndpZGdldC5leHRlbmQuYXBwbHkobnVsbCxbbl0uY29uY2F0KGEpKSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGU9dC5kYXRhKHRoaXMscyk7ZT8oZS5vcHRpb24obnx8e30pLGUuX2luaXQmJmUuX2luaXQoKSk6dC5kYXRhKHRoaXMscyxuZXcgaShuLHRoaXMpKX0pKSxyfX0sdC5XaWRnZXQ9ZnVuY3Rpb24oKXt9LHQuV2lkZ2V0Ll9jaGlsZENvbnN0cnVjdG9ycz1bXSx0LldpZGdldC5wcm90b3R5cGU9e3dpZGdldE5hbWU6IndpZGdldCIsd2lkZ2V0RXZlbnRQcmVmaXg6IiIsZGVmYXVsdEVsZW1lbnQ6IjxkaXY+IixvcHRpb25zOntjbGFzc2VzOnt9LGRpc2FibGVkOiExLGNyZWF0ZTpudWxsfSxfY3JlYXRlV2lkZ2V0OmZ1bmN0aW9uKGUsaSl7aT10KGl8fHRoaXMuZGVmYXVsdEVsZW1lbnR8fHRoaXMpWzBdLHRoaXMuZWxlbWVudD10KGkpLHRoaXMudXVpZD1oKyssdGhpcy5ldmVudE5hbWVzcGFjZT0iLiIrdGhpcy53aWRnZXROYW1lK3RoaXMudXVpZCx0aGlzLmJpbmRpbmdzPXQoKSx0aGlzLmhvdmVyYWJsZT10KCksdGhpcy5mb2N1c2FibGU9dCgpLHRoaXMuY2xhc3Nlc0VsZW1lbnRMb29rdXA9e30saSE9PXRoaXMmJih0LmRhdGEoaSx0aGlzLndpZGdldEZ1bGxOYW1lLHRoaXMpLHRoaXMuX29uKCEwLHRoaXMuZWxlbWVudCx7cmVtb3ZlOmZ1bmN0aW9uKHQpe3QudGFyZ2V0PT09aSYmdGhpcy5kZXN0cm95KCl9fSksdGhpcy5kb2N1bWVudD10KGkuc3R5bGU/aS5vd25lckRvY3VtZW50OmkuZG9jdW1lbnR8fGkpLHRoaXMud2luZG93PXQodGhpcy5kb2N1bWVudFswXS5kZWZhdWx0Vmlld3x8dGhpcy5kb2N1bWVudFswXS5wYXJlbnRXaW5kb3cpKSx0aGlzLm9wdGlvbnM9dC53aWRnZXQuZXh0ZW5kKHt9LHRoaXMub3B0aW9ucyx0aGlzLl9nZXRDcmVhdGVPcHRpb25zKCksZSksdGhpcy5fY3JlYXRlKCksdGhpcy5vcHRpb25zLmRpc2FibGVkJiZ0aGlzLl9zZXRPcHRpb25EaXNhYmxlZCh0aGlzLm9wdGlvbnMuZGlzYWJsZWQpLHRoaXMuX3RyaWdnZXIoImNyZWF0ZSIsbnVsbCx0aGlzLl9nZXRDcmVhdGVFdmVudERhdGEoKSksdGhpcy5faW5pdCgpfSxfZ2V0Q3JlYXRlT3B0aW9uczpmdW5jdGlvbigpe3JldHVybnt9fSxfZ2V0Q3JlYXRlRXZlbnREYXRhOnQubm9vcCxfY3JlYXRlOnQubm9vcCxfaW5pdDp0Lm5vb3AsZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5fZGVzdHJveSgpLHQuZWFjaCh0aGlzLmNsYXNzZXNFbGVtZW50TG9va3VwLGZ1bmN0aW9uKHQsaSl7ZS5fcmVtb3ZlQ2xhc3MoaSx0KX0pLHRoaXMuZWxlbWVudC5vZmYodGhpcy5ldmVudE5hbWVzcGFjZSkucmVtb3ZlRGF0YSh0aGlzLndpZGdldEZ1bGxOYW1lKSx0aGlzLndpZGdldCgpLm9mZih0aGlzLmV2ZW50TmFtZXNwYWNlKS5yZW1vdmVBdHRyKCJhcmlhLWRpc2FibGVkIiksdGhpcy5iaW5kaW5ncy5vZmYodGhpcy5ldmVudE5hbWVzcGFjZSl9LF9kZXN0cm95OnQubm9vcCx3aWRnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbGVtZW50fSxvcHRpb246ZnVuY3Rpb24oZSxpKXt2YXIgcyxuLG8sYT1lO2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiB0LndpZGdldC5leHRlbmQoe30sdGhpcy5vcHRpb25zKTtpZigic3RyaW5nIj09dHlwZW9mIGUpaWYoYT17fSxzPWUuc3BsaXQoIi4iKSxlPXMuc2hpZnQoKSxzLmxlbmd0aCl7Zm9yKG49YVtlXT10LndpZGdldC5leHRlbmQoe30sdGhpcy5vcHRpb25zW2VdKSxvPTA7cy5sZW5ndGgtMT5vO28rKyluW3Nbb11dPW5bc1tvXV18fHt9LG49bltzW29dXTtpZihlPXMucG9wKCksMT09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHZvaWQgMD09PW5bZV0/bnVsbDpuW2VdO25bZV09aX1lbHNle2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiB2b2lkIDA9PT10aGlzLm9wdGlvbnNbZV0/bnVsbDp0aGlzLm9wdGlvbnNbZV07YVtlXT1pfXJldHVybiB0aGlzLl9zZXRPcHRpb25zKGEpLHRoaXN9LF9zZXRPcHRpb25zOmZ1bmN0aW9uKHQpe3ZhciBlO2ZvcihlIGluIHQpdGhpcy5fc2V0T3B0aW9uKGUsdFtlXSk7cmV0dXJuIHRoaXN9LF9zZXRPcHRpb246ZnVuY3Rpb24odCxlKXtyZXR1cm4iY2xhc3NlcyI9PT10JiZ0aGlzLl9zZXRPcHRpb25DbGFzc2VzKGUpLHRoaXMub3B0aW9uc1t0XT1lLCJkaXNhYmxlZCI9PT10JiZ0aGlzLl9zZXRPcHRpb25EaXNhYmxlZChlKSx0aGlzfSxfc2V0T3B0aW9uQ2xhc3NlczpmdW5jdGlvbihlKXt2YXIgaSxzLG47Zm9yKGkgaW4gZSluPXRoaXMuY2xhc3Nlc0VsZW1lbnRMb29rdXBbaV0sZVtpXSE9PXRoaXMub3B0aW9ucy5jbGFzc2VzW2ldJiZuJiZuLmxlbmd0aCYmKHM9dChuLmdldCgpKSx0aGlzLl9yZW1vdmVDbGFzcyhuLGkpLHMuYWRkQ2xhc3ModGhpcy5fY2xhc3Nlcyh7ZWxlbWVudDpzLGtleXM6aSxjbGFzc2VzOmUsYWRkOiEwfSkpKX0sX3NldE9wdGlvbkRpc2FibGVkOmZ1bmN0aW9uKHQpe3RoaXMuX3RvZ2dsZUNsYXNzKHRoaXMud2lkZ2V0KCksdGhpcy53aWRnZXRGdWxsTmFtZSsiLWRpc2FibGVkIixudWxsLCEhdCksdCYmKHRoaXMuX3JlbW92ZUNsYXNzKHRoaXMuaG92ZXJhYmxlLG51bGwsInVpLXN0YXRlLWhvdmVyIiksdGhpcy5fcmVtb3ZlQ2xhc3ModGhpcy5mb2N1c2FibGUsbnVsbCwidWktc3RhdGUtZm9jdXMiKSl9LGVuYWJsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zZXRPcHRpb25zKHtkaXNhYmxlZDohMX0pfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NldE9wdGlvbnMoe2Rpc2FibGVkOiEwfSl9LF9jbGFzc2VzOmZ1bmN0aW9uKGUpe2Z1bmN0aW9uIGkoaSxvKXt2YXIgYSxyO2ZvcihyPTA7aS5sZW5ndGg+cjtyKyspYT1uLmNsYXNzZXNFbGVtZW50TG9va3VwW2lbcl1dfHx0KCksYT1lLmFkZD90KHQudW5pcXVlKGEuZ2V0KCkuY29uY2F0KGUuZWxlbWVudC5nZXQoKSkpKTp0KGEubm90KGUuZWxlbWVudCkuZ2V0KCkpLG4uY2xhc3Nlc0VsZW1lbnRMb29rdXBbaVtyXV09YSxzLnB1c2goaVtyXSksbyYmZS5jbGFzc2VzW2lbcl1dJiZzLnB1c2goZS5jbGFzc2VzW2lbcl1dKX12YXIgcz1bXSxuPXRoaXM7cmV0dXJuIGU9dC5leHRlbmQoe2VsZW1lbnQ6dGhpcy5lbGVtZW50LGNsYXNzZXM6dGhpcy5vcHRpb25zLmNsYXNzZXN8fHt9fSxlKSx0aGlzLl9vbihlLmVsZW1lbnQse3JlbW92ZToiX3VudHJhY2tDbGFzc2VzRWxlbWVudCJ9KSxlLmtleXMmJmkoZS5rZXlzLm1hdGNoKC9cUysvZyl8fFtdLCEwKSxlLmV4dHJhJiZpKGUuZXh0cmEubWF0Y2goL1xTKy9nKXx8W10pLHMuam9pbigiICIpfSxfdW50cmFja0NsYXNzZXNFbGVtZW50OmZ1bmN0aW9uKGUpe3ZhciBpPXRoaXM7dC5lYWNoKGkuY2xhc3Nlc0VsZW1lbnRMb29rdXAsZnVuY3Rpb24ocyxuKXstMSE9PXQuaW5BcnJheShlLnRhcmdldCxuKSYmKGkuY2xhc3Nlc0VsZW1lbnRMb29rdXBbc109dChuLm5vdChlLnRhcmdldCkuZ2V0KCkpKX0pfSxfcmVtb3ZlQ2xhc3M6ZnVuY3Rpb24odCxlLGkpe3JldHVybiB0aGlzLl90b2dnbGVDbGFzcyh0LGUsaSwhMSl9LF9hZGRDbGFzczpmdW5jdGlvbih0LGUsaSl7cmV0dXJuIHRoaXMuX3RvZ2dsZUNsYXNzKHQsZSxpLCEwKX0sX3RvZ2dsZUNsYXNzOmZ1bmN0aW9uKHQsZSxpLHMpe3M9ImJvb2xlYW4iPT10eXBlb2Ygcz9zOmk7dmFyIG49InN0cmluZyI9PXR5cGVvZiB0fHxudWxsPT09dCxvPXtleHRyYTpuP2U6aSxrZXlzOm4/dDplLGVsZW1lbnQ6bj90aGlzLmVsZW1lbnQ6dCxhZGQ6c307cmV0dXJuIG8uZWxlbWVudC50b2dnbGVDbGFzcyh0aGlzLl9jbGFzc2VzKG8pLHMpLHRoaXN9LF9vbjpmdW5jdGlvbihlLGkscyl7dmFyIG4sbz10aGlzOyJib29sZWFuIiE9dHlwZW9mIGUmJihzPWksaT1lLGU9ITEpLHM/KGk9bj10KGkpLHRoaXMuYmluZGluZ3M9dGhpcy5iaW5kaW5ncy5hZGQoaSkpOihzPWksaT10aGlzLmVsZW1lbnQsbj10aGlzLndpZGdldCgpKSx0LmVhY2gocyxmdW5jdGlvbihzLGEpe2Z1bmN0aW9uIHIoKXtyZXR1cm4gZXx8by5vcHRpb25zLmRpc2FibGVkIT09ITAmJiF0KHRoaXMpLmhhc0NsYXNzKCJ1aS1zdGF0ZS1kaXNhYmxlZCIpPygic3RyaW5nIj09dHlwZW9mIGE/b1thXTphKS5hcHBseShvLGFyZ3VtZW50cyk6dm9pZCAwfSJzdHJpbmciIT10eXBlb2YgYSYmKHIuZ3VpZD1hLmd1aWQ9YS5ndWlkfHxyLmd1aWR8fHQuZ3VpZCsrKTt2YXIgaD1zLm1hdGNoKC9eKFtcdzotXSopXHMqKC4qKSQvKSxsPWhbMV0rby5ldmVudE5hbWVzcGFjZSxjPWhbMl07Yz9uLm9uKGwsYyxyKTppLm9uKGwscil9KX0sX29mZjpmdW5jdGlvbihlLGkpe2k9KGl8fCIiKS5zcGxpdCgiICIpLmpvaW4odGhpcy5ldmVudE5hbWVzcGFjZSsiICIpK3RoaXMuZXZlbnROYW1lc3BhY2UsZS5vZmYoaSkub2ZmKGkpLHRoaXMuYmluZGluZ3M9dCh0aGlzLmJpbmRpbmdzLm5vdChlKS5nZXQoKSksdGhpcy5mb2N1c2FibGU9dCh0aGlzLmZvY3VzYWJsZS5ub3QoZSkuZ2V0KCkpLHRoaXMuaG92ZXJhYmxlPXQodGhpcy5ob3ZlcmFibGUubm90KGUpLmdldCgpKX0sX2RlbGF5OmZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gaSgpe3JldHVybigic3RyaW5nIj09dHlwZW9mIHQ/c1t0XTp0KS5hcHBseShzLGFyZ3VtZW50cyl9dmFyIHM9dGhpcztyZXR1cm4gc2V0VGltZW91dChpLGV8fDApfSxfaG92ZXJhYmxlOmZ1bmN0aW9uKGUpe3RoaXMuaG92ZXJhYmxlPXRoaXMuaG92ZXJhYmxlLmFkZChlKSx0aGlzLl9vbihlLHttb3VzZWVudGVyOmZ1bmN0aW9uKGUpe3RoaXMuX2FkZENsYXNzKHQoZS5jdXJyZW50VGFyZ2V0KSxudWxsLCJ1aS1zdGF0ZS1ob3ZlciIpfSxtb3VzZWxlYXZlOmZ1bmN0aW9uKGUpe3RoaXMuX3JlbW92ZUNsYXNzKHQoZS5jdXJyZW50VGFyZ2V0KSxudWxsLCJ1aS1zdGF0ZS1ob3ZlciIpfX0pfSxfZm9jdXNhYmxlOmZ1bmN0aW9uKGUpe3RoaXMuZm9jdXNhYmxlPXRoaXMuZm9jdXNhYmxlLmFkZChlKSx0aGlzLl9vbihlLHtmb2N1c2luOmZ1bmN0aW9uKGUpe3RoaXMuX2FkZENsYXNzKHQoZS5jdXJyZW50VGFyZ2V0KSxudWxsLCJ1aS1zdGF0ZS1mb2N1cyIpfSxmb2N1c291dDpmdW5jdGlvbihlKXt0aGlzLl9yZW1vdmVDbGFzcyh0KGUuY3VycmVudFRhcmdldCksbnVsbCwidWktc3RhdGUtZm9jdXMiKX19KX0sX3RyaWdnZXI6ZnVuY3Rpb24oZSxpLHMpe3ZhciBuLG8sYT10aGlzLm9wdGlvbnNbZV07aWYocz1zfHx7fSxpPXQuRXZlbnQoaSksaS50eXBlPShlPT09dGhpcy53aWRnZXRFdmVudFByZWZpeD9lOnRoaXMud2lkZ2V0RXZlbnRQcmVmaXgrZSkudG9Mb3dlckNhc2UoKSxpLnRhcmdldD10aGlzLmVsZW1lbnRbMF0sbz1pLm9yaWdpbmFsRXZlbnQpZm9yKG4gaW4gbyluIGluIGl8fChpW25dPW9bbl0pO3JldHVybiB0aGlzLmVsZW1lbnQudHJpZ2dlcihpLHMpLCEodC5pc0Z1bmN0aW9uKGEpJiZhLmFwcGx5KHRoaXMuZWxlbWVudFswXSxbaV0uY29uY2F0KHMpKT09PSExfHxpLmlzRGVmYXVsdFByZXZlbnRlZCgpKX19LHQuZWFjaCh7c2hvdzoiZmFkZUluIixoaWRlOiJmYWRlT3V0In0sZnVuY3Rpb24oZSxpKXt0LldpZGdldC5wcm90b3R5cGVbIl8iK2VdPWZ1bmN0aW9uKHMsbixvKXsic3RyaW5nIj09dHlwZW9mIG4mJihuPXtlZmZlY3Q6bn0pO3ZhciBhLHI9bj9uPT09ITB8fCJudW1iZXIiPT10eXBlb2Ygbj9pOm4uZWZmZWN0fHxpOmU7bj1ufHx7fSwibnVtYmVyIj09dHlwZW9mIG4mJihuPXtkdXJhdGlvbjpufSksYT0hdC5pc0VtcHR5T2JqZWN0KG4pLG4uY29tcGxldGU9byxuLmRlbGF5JiZzLmRlbGF5KG4uZGVsYXkpLGEmJnQuZWZmZWN0cyYmdC5lZmZlY3RzLmVmZmVjdFtyXT9zW2VdKG4pOnIhPT1lJiZzW3JdP3Nbcl0obi5kdXJhdGlvbixuLmVhc2luZyxvKTpzLnF1ZXVlKGZ1bmN0aW9uKGkpe3QodGhpcylbZV0oKSxvJiZvLmNhbGwoc1swXSksaSgpfSl9fSksdC53aWRnZXQsZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQsZSxpKXtyZXR1cm5bcGFyc2VGbG9hdCh0WzBdKSoodS50ZXN0KHRbMF0pP2UvMTAwOjEpLHBhcnNlRmxvYXQodFsxXSkqKHUudGVzdCh0WzFdKT9pLzEwMDoxKV19ZnVuY3Rpb24gaShlLGkpe3JldHVybiBwYXJzZUludCh0LmNzcyhlLGkpLDEwKXx8MH1mdW5jdGlvbiBzKGUpe3ZhciBpPWVbMF07cmV0dXJuIDk9PT1pLm5vZGVUeXBlP3t3aWR0aDplLndpZHRoKCksaGVpZ2h0OmUuaGVpZ2h0KCksb2Zmc2V0Ont0b3A6MCxsZWZ0OjB9fTp0LmlzV2luZG93KGkpP3t3aWR0aDplLndpZHRoKCksaGVpZ2h0OmUuaGVpZ2h0KCksb2Zmc2V0Ont0b3A6ZS5zY3JvbGxUb3AoKSxsZWZ0OmUuc2Nyb2xsTGVmdCgpfX06aS5wcmV2ZW50RGVmYXVsdD97d2lkdGg6MCxoZWlnaHQ6MCxvZmZzZXQ6e3RvcDppLnBhZ2VZLGxlZnQ6aS5wYWdlWH19Ont3aWR0aDplLm91dGVyV2lkdGgoKSxoZWlnaHQ6ZS5vdXRlckhlaWdodCgpLG9mZnNldDplLm9mZnNldCgpfX12YXIgbixvPU1hdGgubWF4LGE9TWF0aC5hYnMscj0vbGVmdHxjZW50ZXJ8cmlnaHQvLGg9L3RvcHxjZW50ZXJ8Ym90dG9tLyxsPS9bXCtcLV1cZCsoXC5bXGRdKyk/JT8vLGM9L15cdysvLHU9LyUkLyxkPXQuZm4ucG9zaXRpb247dC5wb3NpdGlvbj17c2Nyb2xsYmFyV2lkdGg6ZnVuY3Rpb24oKXtpZih2b2lkIDAhPT1uKXJldHVybiBuO3ZhciBlLGkscz10KCI8ZGl2IHN0eWxlPSdkaXNwbGF5OmJsb2NrO3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOjUwcHg7aGVpZ2h0OjUwcHg7b3ZlcmZsb3c6aGlkZGVuOyc+PGRpdiBzdHlsZT0naGVpZ2h0OjEwMHB4O3dpZHRoOmF1dG87Jz48L2Rpdj48L2Rpdj4iKSxvPXMuY2hpbGRyZW4oKVswXTtyZXR1cm4gdCgiYm9keSIpLmFwcGVuZChzKSxlPW8ub2Zmc2V0V2lkdGgscy5jc3MoIm92ZXJmbG93Iiwic2Nyb2xsIiksaT1vLm9mZnNldFdpZHRoLGU9PT1pJiYoaT1zWzBdLmNsaWVudFdpZHRoKSxzLnJlbW92ZSgpLG49ZS1pfSxnZXRTY3JvbGxJbmZvOmZ1bmN0aW9uKGUpe3ZhciBpPWUuaXNXaW5kb3d8fGUuaXNEb2N1bWVudD8iIjplLmVsZW1lbnQuY3NzKCJvdmVyZmxvdy14Iikscz1lLmlzV2luZG93fHxlLmlzRG9jdW1lbnQ/IiI6ZS5lbGVtZW50LmNzcygib3ZlcmZsb3cteSIpLG49InNjcm9sbCI9PT1pfHwiYXV0byI9PT1pJiZlLndpZHRoPGUuZWxlbWVudFswXS5zY3JvbGxXaWR0aCxvPSJzY3JvbGwiPT09c3x8ImF1dG8iPT09cyYmZS5oZWlnaHQ8ZS5lbGVtZW50WzBdLnNjcm9sbEhlaWdodDtyZXR1cm57d2lkdGg6bz90LnBvc2l0aW9uLnNjcm9sbGJhcldpZHRoKCk6MCxoZWlnaHQ6bj90LnBvc2l0aW9uLnNjcm9sbGJhcldpZHRoKCk6MH19LGdldFdpdGhpbkluZm86ZnVuY3Rpb24oZSl7dmFyIGk9dChlfHx3aW5kb3cpLHM9dC5pc1dpbmRvdyhpWzBdKSxuPSEhaVswXSYmOT09PWlbMF0ubm9kZVR5cGUsbz0hcyYmIW47cmV0dXJue2VsZW1lbnQ6aSxpc1dpbmRvdzpzLGlzRG9jdW1lbnQ6bixvZmZzZXQ6bz90KGUpLm9mZnNldCgpOntsZWZ0OjAsdG9wOjB9LHNjcm9sbExlZnQ6aS5zY3JvbGxMZWZ0KCksc2Nyb2xsVG9wOmkuc2Nyb2xsVG9wKCksd2lkdGg6aS5vdXRlcldpZHRoKCksaGVpZ2h0Omkub3V0ZXJIZWlnaHQoKX19fSx0LmZuLnBvc2l0aW9uPWZ1bmN0aW9uKG4pe2lmKCFufHwhbi5vZilyZXR1cm4gZC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7bj10LmV4dGVuZCh7fSxuKTt2YXIgdSxwLGYsZyxtLF8sdj10KG4ub2YpLGI9dC5wb3NpdGlvbi5nZXRXaXRoaW5JbmZvKG4ud2l0aGluKSx5PXQucG9zaXRpb24uZ2V0U2Nyb2xsSW5mbyhiKSx3PShuLmNvbGxpc2lvbnx8ImZsaXAiKS5zcGxpdCgiICIpLGs9e307cmV0dXJuIF89cyh2KSx2WzBdLnByZXZlbnREZWZhdWx0JiYobi5hdD0ibGVmdCB0b3AiKSxwPV8ud2lkdGgsZj1fLmhlaWdodCxnPV8ub2Zmc2V0LG09dC5leHRlbmQoe30sZyksdC5lYWNoKFsibXkiLCJhdCJdLGZ1bmN0aW9uKCl7dmFyIHQsZSxpPShuW3RoaXNdfHwiIikuc3BsaXQoIiAiKTsxPT09aS5sZW5ndGgmJihpPXIudGVzdChpWzBdKT9pLmNvbmNhdChbImNlbnRlciJdKTpoLnRlc3QoaVswXSk/WyJjZW50ZXIiXS5jb25jYXQoaSk6WyJjZW50ZXIiLCJjZW50ZXIiXSksaVswXT1yLnRlc3QoaVswXSk/aVswXToiY2VudGVyIixpWzFdPWgudGVzdChpWzFdKT9pWzFdOiJjZW50ZXIiLHQ9bC5leGVjKGlbMF0pLGU9bC5leGVjKGlbMV0pLGtbdGhpc109W3Q/dFswXTowLGU/ZVswXTowXSxuW3RoaXNdPVtjLmV4ZWMoaVswXSlbMF0sYy5leGVjKGlbMV0pWzBdXX0pLDE9PT13Lmxlbmd0aCYmKHdbMV09d1swXSksInJpZ2h0Ij09PW4uYXRbMF0/bS5sZWZ0Kz1wOiJjZW50ZXIiPT09bi5hdFswXSYmKG0ubGVmdCs9cC8yKSwiYm90dG9tIj09PW4uYXRbMV0/bS50b3ArPWY6ImNlbnRlciI9PT1uLmF0WzFdJiYobS50b3ArPWYvMiksdT1lKGsuYXQscCxmKSxtLmxlZnQrPXVbMF0sbS50b3ArPXVbMV0sdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHMscixoPXQodGhpcyksbD1oLm91dGVyV2lkdGgoKSxjPWgub3V0ZXJIZWlnaHQoKSxkPWkodGhpcywibWFyZ2luTGVmdCIpLF89aSh0aGlzLCJtYXJnaW5Ub3AiKSx4PWwrZCtpKHRoaXMsIm1hcmdpblJpZ2h0IikreS53aWR0aCxDPWMrXytpKHRoaXMsIm1hcmdpbkJvdHRvbSIpK3kuaGVpZ2h0LEQ9dC5leHRlbmQoe30sbSksST1lKGsubXksaC5vdXRlcldpZHRoKCksaC5vdXRlckhlaWdodCgpKTsicmlnaHQiPT09bi5teVswXT9ELmxlZnQtPWw6ImNlbnRlciI9PT1uLm15WzBdJiYoRC5sZWZ0LT1sLzIpLCJib3R0b20iPT09bi5teVsxXT9ELnRvcC09YzoiY2VudGVyIj09PW4ubXlbMV0mJihELnRvcC09Yy8yKSxELmxlZnQrPUlbMF0sRC50b3ArPUlbMV0scz17bWFyZ2luTGVmdDpkLG1hcmdpblRvcDpffSx0LmVhY2goWyJsZWZ0IiwidG9wIl0sZnVuY3Rpb24oZSxpKXt0LnVpLnBvc2l0aW9uW3dbZV1dJiZ0LnVpLnBvc2l0aW9uW3dbZV1dW2ldKEQse3RhcmdldFdpZHRoOnAsdGFyZ2V0SGVpZ2h0OmYsZWxlbVdpZHRoOmwsZWxlbUhlaWdodDpjLGNvbGxpc2lvblBvc2l0aW9uOnMsY29sbGlzaW9uV2lkdGg6eCxjb2xsaXNpb25IZWlnaHQ6QyxvZmZzZXQ6W3VbMF0rSVswXSx1WzFdK0lbMV1dLG15Om4ubXksYXQ6bi5hdCx3aXRoaW46YixlbGVtOmh9KX0pLG4udXNpbmcmJihyPWZ1bmN0aW9uKHQpe3ZhciBlPWcubGVmdC1ELmxlZnQsaT1lK3AtbCxzPWcudG9wLUQudG9wLHI9cytmLWMsdT17dGFyZ2V0OntlbGVtZW50OnYsbGVmdDpnLmxlZnQsdG9wOmcudG9wLHdpZHRoOnAsaGVpZ2h0OmZ9LGVsZW1lbnQ6e2VsZW1lbnQ6aCxsZWZ0OkQubGVmdCx0b3A6RC50b3Asd2lkdGg6bCxoZWlnaHQ6Y30saG9yaXpvbnRhbDowPmk/ImxlZnQiOmU+MD8icmlnaHQiOiJjZW50ZXIiLHZlcnRpY2FsOjA+cj8idG9wIjpzPjA/ImJvdHRvbSI6Im1pZGRsZSJ9O2w+cCYmcD5hKGUraSkmJih1Lmhvcml6b250YWw9ImNlbnRlciIpLGM+ZiYmZj5hKHMrcikmJih1LnZlcnRpY2FsPSJtaWRkbGUiKSx1LmltcG9ydGFudD1vKGEoZSksYShpKSk+byhhKHMpLGEocikpPyJob3Jpem9udGFsIjoidmVydGljYWwiLG4udXNpbmcuY2FsbCh0aGlzLHQsdSl9KSxoLm9mZnNldCh0LmV4dGVuZChELHt1c2luZzpyfSkpfSl9LHQudWkucG9zaXRpb249e2ZpdDp7bGVmdDpmdW5jdGlvbih0LGUpe3ZhciBpLHM9ZS53aXRoaW4sbj1zLmlzV2luZG93P3Muc2Nyb2xsTGVmdDpzLm9mZnNldC5sZWZ0LGE9cy53aWR0aCxyPXQubGVmdC1lLmNvbGxpc2lvblBvc2l0aW9uLm1hcmdpbkxlZnQsaD1uLXIsbD1yK2UuY29sbGlzaW9uV2lkdGgtYS1uO2UuY29sbGlzaW9uV2lkdGg+YT9oPjAmJjA+PWw/KGk9dC5sZWZ0K2grZS5jb2xsaXNpb25XaWR0aC1hLW4sdC5sZWZ0Kz1oLWkpOnQubGVmdD1sPjAmJjA+PWg/bjpoPmw/bithLWUuY29sbGlzaW9uV2lkdGg6bjpoPjA/dC5sZWZ0Kz1oOmw+MD90LmxlZnQtPWw6dC5sZWZ0PW8odC5sZWZ0LXIsdC5sZWZ0KX0sdG9wOmZ1bmN0aW9uKHQsZSl7dmFyIGkscz1lLndpdGhpbixuPXMuaXNXaW5kb3c/cy5zY3JvbGxUb3A6cy5vZmZzZXQudG9wLGE9ZS53aXRoaW4uaGVpZ2h0LHI9dC50b3AtZS5jb2xsaXNpb25Qb3NpdGlvbi5tYXJnaW5Ub3AsaD1uLXIsbD1yK2UuY29sbGlzaW9uSGVpZ2h0LWEtbjtlLmNvbGxpc2lvbkhlaWdodD5hP2g+MCYmMD49bD8oaT10LnRvcCtoK2UuY29sbGlzaW9uSGVpZ2h0LWEtbix0LnRvcCs9aC1pKTp0LnRvcD1sPjAmJjA+PWg/bjpoPmw/bithLWUuY29sbGlzaW9uSGVpZ2h0Om46aD4wP3QudG9wKz1oOmw+MD90LnRvcC09bDp0LnRvcD1vKHQudG9wLXIsdC50b3ApfX0sZmxpcDp7bGVmdDpmdW5jdGlvbih0LGUpe3ZhciBpLHMsbj1lLndpdGhpbixvPW4ub2Zmc2V0LmxlZnQrbi5zY3JvbGxMZWZ0LHI9bi53aWR0aCxoPW4uaXNXaW5kb3c/bi5zY3JvbGxMZWZ0Om4ub2Zmc2V0LmxlZnQsbD10LmxlZnQtZS5jb2xsaXNpb25Qb3NpdGlvbi5tYXJnaW5MZWZ0LGM9bC1oLHU9bCtlLmNvbGxpc2lvbldpZHRoLXItaCxkPSJsZWZ0Ij09PWUubXlbMF0/LWUuZWxlbVdpZHRoOiJyaWdodCI9PT1lLm15WzBdP2UuZWxlbVdpZHRoOjAscD0ibGVmdCI9PT1lLmF0WzBdP2UudGFyZ2V0V2lkdGg6InJpZ2h0Ij09PWUuYXRbMF0/LWUudGFyZ2V0V2lkdGg6MCxmPS0yKmUub2Zmc2V0WzBdOzA+Yz8oaT10LmxlZnQrZCtwK2YrZS5jb2xsaXNpb25XaWR0aC1yLW8sKDA+aXx8YShjKT5pKSYmKHQubGVmdCs9ZCtwK2YpKTp1PjAmJihzPXQubGVmdC1lLmNvbGxpc2lvblBvc2l0aW9uLm1hcmdpbkxlZnQrZCtwK2YtaCwocz4wfHx1PmEocykpJiYodC5sZWZ0Kz1kK3ArZikpfSx0b3A6ZnVuY3Rpb24odCxlKXt2YXIgaSxzLG49ZS53aXRoaW4sbz1uLm9mZnNldC50b3Arbi5zY3JvbGxUb3Ascj1uLmhlaWdodCxoPW4uaXNXaW5kb3c/bi5zY3JvbGxUb3A6bi5vZmZzZXQudG9wLGw9dC50b3AtZS5jb2xsaXNpb25Qb3NpdGlvbi5tYXJnaW5Ub3AsYz1sLWgsdT1sK2UuY29sbGlzaW9uSGVpZ2h0LXItaCxkPSJ0b3AiPT09ZS5teVsxXSxwPWQ/LWUuZWxlbUhlaWdodDoiYm90dG9tIj09PWUubXlbMV0/ZS5lbGVtSGVpZ2h0OjAsZj0idG9wIj09PWUuYXRbMV0/ZS50YXJnZXRIZWlnaHQ6ImJvdHRvbSI9PT1lLmF0WzFdPy1lLnRhcmdldEhlaWdodDowLGc9LTIqZS5vZmZzZXRbMV07MD5jPyhzPXQudG9wK3ArZitnK2UuY29sbGlzaW9uSGVpZ2h0LXItbywoMD5zfHxhKGMpPnMpJiYodC50b3ArPXArZitnKSk6dT4wJiYoaT10LnRvcC1lLmNvbGxpc2lvblBvc2l0aW9uLm1hcmdpblRvcCtwK2YrZy1oLChpPjB8fHU+YShpKSkmJih0LnRvcCs9cCtmK2cpKX19LGZsaXBmaXQ6e2xlZnQ6ZnVuY3Rpb24oKXt0LnVpLnBvc2l0aW9uLmZsaXAubGVmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyksdC51aS5wb3NpdGlvbi5maXQubGVmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHRvcDpmdW5jdGlvbigpe3QudWkucG9zaXRpb24uZmxpcC50b3AuYXBwbHkodGhpcyxhcmd1bWVudHMpLHQudWkucG9zaXRpb24uZml0LnRvcC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX19KCksdC51aS5wb3NpdGlvbix0LmV4dGVuZCh0LmV4cHJbIjoiXSx7ZGF0YTp0LmV4cHIuY3JlYXRlUHNldWRvP3QuZXhwci5jcmVhdGVQc2V1ZG8oZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKGkpe3JldHVybiEhdC5kYXRhKGksZSl9fSk6ZnVuY3Rpb24oZSxpLHMpe3JldHVybiEhdC5kYXRhKGUsc1szXSl9fSksdC5mbi5leHRlbmQoe2Rpc2FibGVTZWxlY3Rpb246ZnVuY3Rpb24oKXt2YXIgdD0ib25zZWxlY3RzdGFydCJpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKT8ic2VsZWN0c3RhcnQiOiJtb3VzZWRvd24iO3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0aGlzLm9uKHQrIi51aS1kaXNhYmxlU2VsZWN0aW9uIixmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCl9KX19KCksZW5hYmxlU2VsZWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub2ZmKCIudWktZGlzYWJsZVNlbGVjdGlvbiIpfX0pO3ZhciBjPSJ1aS1lZmZlY3RzLSIsdT0idWktZWZmZWN0cy1zdHlsZSIsZD0idWktZWZmZWN0cy1hbmltYXRlZCIscD10O3QuZWZmZWN0cz17ZWZmZWN0Ont9fSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIGkodCxlLGkpe3ZhciBzPXVbZS50eXBlXXx8e307cmV0dXJuIG51bGw9PXQ/aXx8IWUuZGVmP251bGw6ZS5kZWY6KHQ9cy5mbG9vcj9+fnQ6cGFyc2VGbG9hdCh0KSxpc05hTih0KT9lLmRlZjpzLm1vZD8odCtzLm1vZCklcy5tb2Q6MD50PzA6dD5zLm1heD9zLm1heDp0KX1mdW5jdGlvbiBzKGkpe3ZhciBzPWwoKSxuPXMuX3JnYmE9W107cmV0dXJuIGk9aS50b0xvd2VyQ2FzZSgpLGYoaCxmdW5jdGlvbih0LG8pe3ZhciBhLHI9by5yZS5leGVjKGkpLGg9ciYmby5wYXJzZShyKSxsPW8uc3BhY2V8fCJyZ2JhIjtyZXR1cm4gaD8oYT1zW2xdKGgpLHNbY1tsXS5jYWNoZV09YVtjW2xdLmNhY2hlXSxuPXMuX3JnYmE9YS5fcmdiYSwhMSk6ZX0pLG4ubGVuZ3RoPygiMCwwLDAsMCI9PT1uLmpvaW4oKSYmdC5leHRlbmQobixvLnRyYW5zcGFyZW50KSxzKTpvW2ldfWZ1bmN0aW9uIG4odCxlLGkpe3JldHVybiBpPShpKzEpJTEsMT42Kmk/dCs2KihlLXQpKmk6MT4yKmk/ZToyPjMqaT90KzYqKGUtdCkqKDIvMy1pKTp0fXZhciBvLGE9ImJhY2tncm91bmRDb2xvciBib3JkZXJCb3R0b21Db2xvciBib3JkZXJMZWZ0Q29sb3IgYm9yZGVyUmlnaHRDb2xvciBib3JkZXJUb3BDb2xvciBjb2xvciBjb2x1bW5SdWxlQ29sb3Igb3V0bGluZUNvbG9yIHRleHREZWNvcmF0aW9uQ29sb3IgdGV4dEVtcGhhc2lzQ29sb3IiLHI9L14oW1wtK10pPVxzKihcZCtcLj9cZCopLyxoPVt7cmU6L3JnYmE/XChccyooXGR7MSwzfSlccyosXHMqKFxkezEsM30pXHMqLFxzKihcZHsxLDN9KVxzKig/OixccyooXGQ/KD86XC5cZCspPylccyopP1wpLyxwYXJzZTpmdW5jdGlvbih0KXtyZXR1cm5bdFsxXSx0WzJdLHRbM10sdFs0XV19fSx7cmU6L3JnYmE/XChccyooXGQrKD86XC5cZCspPylcJVxzKixccyooXGQrKD86XC5cZCspPylcJVxzKixccyooXGQrKD86XC5cZCspPylcJVxzKig/OixccyooXGQ/KD86XC5cZCspPylccyopP1wpLyxwYXJzZTpmdW5jdGlvbih0KXtyZXR1cm5bMi41NSp0WzFdLDIuNTUqdFsyXSwyLjU1KnRbM10sdFs0XV19fSx7cmU6LyMoW2EtZjAtOV17Mn0pKFthLWYwLTldezJ9KShbYS1mMC05XXsyfSkvLHBhcnNlOmZ1bmN0aW9uKHQpe3JldHVybltwYXJzZUludCh0WzFdLDE2KSxwYXJzZUludCh0WzJdLDE2KSxwYXJzZUludCh0WzNdLDE2KV19fSx7cmU6LyMoW2EtZjAtOV0pKFthLWYwLTldKShbYS1mMC05XSkvLHBhcnNlOmZ1bmN0aW9uKHQpe3JldHVybltwYXJzZUludCh0WzFdK3RbMV0sMTYpLHBhcnNlSW50KHRbMl0rdFsyXSwxNikscGFyc2VJbnQodFszXSt0WzNdLDE2KV19fSx7cmU6L2hzbGE/XChccyooXGQrKD86XC5cZCspPylccyosXHMqKFxkKyg/OlwuXGQrKT8pXCVccyosXHMqKFxkKyg/OlwuXGQrKT8pXCVccyooPzosXHMqKFxkPyg/OlwuXGQrKT8pXHMqKT9cKS8sc3BhY2U6ImhzbGEiLHBhcnNlOmZ1bmN0aW9uKHQpe3JldHVyblt0WzFdLHRbMl0vMTAwLHRbM10vMTAwLHRbNF1dfX1dLGw9dC5Db2xvcj1mdW5jdGlvbihlLGkscyxuKXtyZXR1cm4gbmV3IHQuQ29sb3IuZm4ucGFyc2UoZSxpLHMsbil9LGM9e3JnYmE6e3Byb3BzOntyZWQ6e2lkeDowLHR5cGU6ImJ5dGUifSxncmVlbjp7aWR4OjEsdHlwZToiYnl0ZSJ9LGJsdWU6e2lkeDoyLHR5cGU6ImJ5dGUifX19LGhzbGE6e3Byb3BzOntodWU6e2lkeDowLHR5cGU6ImRlZ3JlZXMifSxzYXR1cmF0aW9uOntpZHg6MSx0eXBlOiJwZXJjZW50In0sbGlnaHRuZXNzOntpZHg6Mix0eXBlOiJwZXJjZW50In19fX0sdT17ImJ5dGUiOntmbG9vcjohMCxtYXg6MjU1fSxwZXJjZW50OnttYXg6MX0sZGVncmVlczp7bW9kOjM2MCxmbG9vcjohMH19LGQ9bC5zdXBwb3J0PXt9LHA9dCgiPHA+IilbMF0sZj10LmVhY2g7cC5zdHlsZS5jc3NUZXh0PSJiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMSwxLDEsLjUpIixkLnJnYmE9cC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IuaW5kZXhPZigicmdiYSIpPi0xLGYoYyxmdW5jdGlvbih0LGUpe2UuY2FjaGU9Il8iK3QsZS5wcm9wcy5hbHBoYT17aWR4OjMsdHlwZToicGVyY2VudCIsZGVmOjF9fSksbC5mbj10LmV4dGVuZChsLnByb3RvdHlwZSx7cGFyc2U6ZnVuY3Rpb24obixhLHIsaCl7aWYobj09PWUpcmV0dXJuIHRoaXMuX3JnYmE9W251bGwsbnVsbCxudWxsLG51bGxdLHRoaXM7KG4uanF1ZXJ5fHxuLm5vZGVUeXBlKSYmKG49dChuKS5jc3MoYSksYT1lKTt2YXIgdT10aGlzLGQ9dC50eXBlKG4pLHA9dGhpcy5fcmdiYT1bXTtyZXR1cm4gYSE9PWUmJihuPVtuLGEscixoXSxkPSJhcnJheSIpLCJzdHJpbmciPT09ZD90aGlzLnBhcnNlKHMobil8fG8uX2RlZmF1bHQpOiJhcnJheSI9PT1kPyhmKGMucmdiYS5wcm9wcyxmdW5jdGlvbih0LGUpe3BbZS5pZHhdPWkobltlLmlkeF0sZSl9KSx0aGlzKToib2JqZWN0Ij09PWQ/KG4gaW5zdGFuY2VvZiBsP2YoYyxmdW5jdGlvbih0LGUpe25bZS5jYWNoZV0mJih1W2UuY2FjaGVdPW5bZS5jYWNoZV0uc2xpY2UoKSl9KTpmKGMsZnVuY3Rpb24oZSxzKXt2YXIgbz1zLmNhY2hlO2Yocy5wcm9wcyxmdW5jdGlvbih0LGUpe2lmKCF1W29dJiZzLnRvKXtpZigiYWxwaGEiPT09dHx8bnVsbD09blt0XSlyZXR1cm47dVtvXT1zLnRvKHUuX3JnYmEpfXVbb11bZS5pZHhdPWkoblt0XSxlLCEwKX0pLHVbb10mJjA+dC5pbkFycmF5KG51bGwsdVtvXS5zbGljZSgwLDMpKSYmKHVbb11bM109MSxzLmZyb20mJih1Ll9yZ2JhPXMuZnJvbSh1W29dKSkpfSksdGhpcyk6ZX0saXM6ZnVuY3Rpb24odCl7dmFyIGk9bCh0KSxzPSEwLG49dGhpcztyZXR1cm4gZihjLGZ1bmN0aW9uKHQsbyl7dmFyIGEscj1pW28uY2FjaGVdO3JldHVybiByJiYoYT1uW28uY2FjaGVdfHxvLnRvJiZvLnRvKG4uX3JnYmEpfHxbXSxmKG8ucHJvcHMsZnVuY3Rpb24odCxpKXtyZXR1cm4gbnVsbCE9cltpLmlkeF0/cz1yW2kuaWR4XT09PWFbaS5pZHhdOmV9KSksc30pLHN9LF9zcGFjZTpmdW5jdGlvbigpe3ZhciB0PVtdLGU9dGhpcztyZXR1cm4gZihjLGZ1bmN0aW9uKGkscyl7ZVtzLmNhY2hlXSYmdC5wdXNoKGkpfSksdC5wb3AoKX0sdHJhbnNpdGlvbjpmdW5jdGlvbih0LGUpe3ZhciBzPWwodCksbj1zLl9zcGFjZSgpLG89Y1tuXSxhPTA9PT10aGlzLmFscGhhKCk/bCgidHJhbnNwYXJlbnQiKTp0aGlzLHI9YVtvLmNhY2hlXXx8by50byhhLl9yZ2JhKSxoPXIuc2xpY2UoKTtyZXR1cm4gcz1zW28uY2FjaGVdLGYoby5wcm9wcyxmdW5jdGlvbih0LG4pe3ZhciBvPW4uaWR4LGE9cltvXSxsPXNbb10sYz11W24udHlwZV18fHt9O251bGwhPT1sJiYobnVsbD09PWE/aFtvXT1sOihjLm1vZCYmKGwtYT5jLm1vZC8yP2ErPWMubW9kOmEtbD5jLm1vZC8yJiYoYS09Yy5tb2QpKSxoW29dPWkoKGwtYSkqZSthLG4pKSl9KSx0aGlzW25dKGgpfSxibGVuZDpmdW5jdGlvbihlKXtpZigxPT09dGhpcy5fcmdiYVszXSlyZXR1cm4gdGhpczt2YXIgaT10aGlzLl9yZ2JhLnNsaWNlKCkscz1pLnBvcCgpLG49bChlKS5fcmdiYTtyZXR1cm4gbCh0Lm1hcChpLGZ1bmN0aW9uKHQsZSl7cmV0dXJuKDEtcykqbltlXStzKnR9KSl9LHRvUmdiYVN0cmluZzpmdW5jdGlvbigpe3ZhciBlPSJyZ2JhKCIsaT10Lm1hcCh0aGlzLl9yZ2JhLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIG51bGw9PXQ/ZT4yPzE6MDp0fSk7cmV0dXJuIDE9PT1pWzNdJiYoaS5wb3AoKSxlPSJyZ2IoIiksZStpLmpvaW4oKSsiKSJ9LHRvSHNsYVN0cmluZzpmdW5jdGlvbigpe3ZhciBlPSJoc2xhKCIsaT10Lm1hcCh0aGlzLmhzbGEoKSxmdW5jdGlvbih0LGUpe3JldHVybiBudWxsPT10JiYodD1lPjI/MTowKSxlJiYzPmUmJih0PU1hdGgucm91bmQoMTAwKnQpKyIlIiksdH0pO3JldHVybiAxPT09aVszXSYmKGkucG9wKCksZT0iaHNsKCIpLGUraS5qb2luKCkrIikifSx0b0hleFN0cmluZzpmdW5jdGlvbihlKXt2YXIgaT10aGlzLl9yZ2JhLnNsaWNlKCkscz1pLnBvcCgpO3JldHVybiBlJiZpLnB1c2gofn4oMjU1KnMpKSwiIyIrdC5tYXAoaSxmdW5jdGlvbih0KXtyZXR1cm4gdD0odHx8MCkudG9TdHJpbmcoMTYpLDE9PT10Lmxlbmd0aD8iMCIrdDp0fSkuam9pbigiIil9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLl9yZ2JhWzNdPyJ0cmFuc3BhcmVudCI6dGhpcy50b1JnYmFTdHJpbmcoKX19KSxsLmZuLnBhcnNlLnByb3RvdHlwZT1sLmZuLGMuaHNsYS50bz1mdW5jdGlvbih0KXtpZihudWxsPT10WzBdfHxudWxsPT10WzFdfHxudWxsPT10WzJdKXJldHVybltudWxsLG51bGwsbnVsbCx0WzNdXTt2YXIgZSxpLHM9dFswXS8yNTUsbj10WzFdLzI1NSxvPXRbMl0vMjU1LGE9dFszXSxyPU1hdGgubWF4KHMsbixvKSxoPU1hdGgubWluKHMsbixvKSxsPXItaCxjPXIraCx1PS41KmM7cmV0dXJuIGU9aD09PXI/MDpzPT09cj82MCoobi1vKS9sKzM2MDpuPT09cj82MCooby1zKS9sKzEyMDo2MCoocy1uKS9sKzI0MCxpPTA9PT1sPzA6LjU+PXU/bC9jOmwvKDItYyksW01hdGgucm91bmQoZSklMzYwLGksdSxudWxsPT1hPzE6YV19LGMuaHNsYS5mcm9tPWZ1bmN0aW9uKHQpe2lmKG51bGw9PXRbMF18fG51bGw9PXRbMV18fG51bGw9PXRbMl0pcmV0dXJuW251bGwsbnVsbCxudWxsLHRbM11dO3ZhciBlPXRbMF0vMzYwLGk9dFsxXSxzPXRbMl0sbz10WzNdLGE9LjU+PXM/cyooMStpKTpzK2ktcyppLHI9MipzLWE7cmV0dXJuW01hdGgucm91bmQoMjU1Km4ocixhLGUrMS8zKSksTWF0aC5yb3VuZCgyNTUqbihyLGEsZSkpLE1hdGgucm91bmQoMjU1Km4ocixhLGUtMS8zKSksb119LGYoYyxmdW5jdGlvbihzLG4pe3ZhciBvPW4ucHJvcHMsYT1uLmNhY2hlLGg9bi50byxjPW4uZnJvbTtsLmZuW3NdPWZ1bmN0aW9uKHMpe2lmKGgmJiF0aGlzW2FdJiYodGhpc1thXT1oKHRoaXMuX3JnYmEpKSxzPT09ZSlyZXR1cm4gdGhpc1thXS5zbGljZSgpO3ZhciBuLHI9dC50eXBlKHMpLHU9ImFycmF5Ij09PXJ8fCJvYmplY3QiPT09cj9zOmFyZ3VtZW50cyxkPXRoaXNbYV0uc2xpY2UoKTtyZXR1cm4gZihvLGZ1bmN0aW9uKHQsZSl7dmFyIHM9dVsib2JqZWN0Ij09PXI/dDplLmlkeF07bnVsbD09cyYmKHM9ZFtlLmlkeF0pLGRbZS5pZHhdPWkocyxlKX0pLGM/KG49bChjKGQpKSxuW2FdPWQsbik6bChkKX0sZihvLGZ1bmN0aW9uKGUsaSl7bC5mbltlXXx8KGwuZm5bZV09ZnVuY3Rpb24obil7dmFyIG8sYT10LnR5cGUobiksaD0iYWxwaGEiPT09ZT90aGlzLl9oc2xhPyJoc2xhIjoicmdiYSI6cyxsPXRoaXNbaF0oKSxjPWxbaS5pZHhdO3JldHVybiJ1bmRlZmluZWQiPT09YT9jOigiZnVuY3Rpb24iPT09YSYmKG49bi5jYWxsKHRoaXMsYyksYT10LnR5cGUobikpLG51bGw9PW4mJmkuZW1wdHk/dGhpczooInN0cmluZyI9PT1hJiYobz1yLmV4ZWMobiksbyYmKG49YytwYXJzZUZsb2F0KG9bMl0pKigiKyI9PT1vWzFdPzE6LTEpKSksbFtpLmlkeF09bix0aGlzW2hdKGwpKSl9KX0pfSksbC5ob29rPWZ1bmN0aW9uKGUpe3ZhciBpPWUuc3BsaXQoIiAiKTtmKGksZnVuY3Rpb24oZSxpKXt0LmNzc0hvb2tzW2ldPXtzZXQ6ZnVuY3Rpb24oZSxuKXt2YXIgbyxhLHI9IiI7aWYoInRyYW5zcGFyZW50IiE9PW4mJigic3RyaW5nIiE9PXQudHlwZShuKXx8KG89cyhuKSkpKXtpZihuPWwob3x8biksIWQucmdiYSYmMSE9PW4uX3JnYmFbM10pe2ZvcihhPSJiYWNrZ3JvdW5kQ29sb3IiPT09aT9lLnBhcmVudE5vZGU6ZTsoIiI9PT1yfHwidHJhbnNwYXJlbnQiPT09cikmJmEmJmEuc3R5bGU7KXRyeXtyPXQuY3NzKGEsImJhY2tncm91bmRDb2xvciIpLGE9YS5wYXJlbnROb2RlfWNhdGNoKGgpe31uPW4uYmxlbmQociYmInRyYW5zcGFyZW50IiE9PXI/cjoiX2RlZmF1bHQiKX1uPW4udG9SZ2JhU3RyaW5nKCl9dHJ5e2Uuc3R5bGVbaV09bn1jYXRjaChoKXt9fX0sdC5meC5zdGVwW2ldPWZ1bmN0aW9uKGUpe2UuY29sb3JJbml0fHwoZS5zdGFydD1sKGUuZWxlbSxpKSxlLmVuZD1sKGUuZW5kKSxlLmNvbG9ySW5pdD0hMCksdC5jc3NIb29rc1tpXS5zZXQoZS5lbGVtLGUuc3RhcnQudHJhbnNpdGlvbihlLmVuZCxlLnBvcykpfX0pfSxsLmhvb2soYSksdC5jc3NIb29rcy5ib3JkZXJDb2xvcj17ZXhwYW5kOmZ1bmN0aW9uKHQpe3ZhciBlPXt9O3JldHVybiBmKFsiVG9wIiwiUmlnaHQiLCJCb3R0b20iLCJMZWZ0Il0sZnVuY3Rpb24oaSxzKXtlWyJib3JkZXIiK3MrIkNvbG9yIl09dH0pLGV9fSxvPXQuQ29sb3IubmFtZXM9e2FxdWE6IiMwMGZmZmYiLGJsYWNrOiIjMDAwMDAwIixibHVlOiIjMDAwMGZmIixmdWNoc2lhOiIjZmYwMGZmIixncmF5OiIjODA4MDgwIixncmVlbjoiIzAwODAwMCIsbGltZToiIzAwZmYwMCIsbWFyb29uOiIjODAwMDAwIixuYXZ5OiIjMDAwMDgwIixvbGl2ZToiIzgwODAwMCIscHVycGxlOiIjODAwMDgwIixyZWQ6IiNmZjAwMDAiLHNpbHZlcjoiI2MwYzBjMCIsdGVhbDoiIzAwODA4MCIsd2hpdGU6IiNmZmZmZmYiLHllbGxvdzoiI2ZmZmYwMCIsdHJhbnNwYXJlbnQ6W251bGwsbnVsbCxudWxsLDBdLF9kZWZhdWx0OiIjZmZmZmZmIn19KHApLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt2YXIgaSxzLG49ZS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3P2Uub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKGUsbnVsbCk6ZS5jdXJyZW50U3R5bGUsbz17fTtpZihuJiZuLmxlbmd0aCYmblswXSYmbltuWzBdXSlmb3Iocz1uLmxlbmd0aDtzLS07KWk9bltzXSwic3RyaW5nIj09dHlwZW9mIG5baV0mJihvW3QuY2FtZWxDYXNlKGkpXT1uW2ldKTtlbHNlIGZvcihpIGluIG4pInN0cmluZyI9PXR5cGVvZiBuW2ldJiYob1tpXT1uW2ldKTtyZXR1cm4gb31mdW5jdGlvbiBpKGUsaSl7dmFyIHMsbyxhPXt9O2ZvcihzIGluIGkpbz1pW3NdLGVbc10hPT1vJiYobltzXXx8KHQuZnguc3RlcFtzXXx8IWlzTmFOKHBhcnNlRmxvYXQobykpKSYmKGFbc109bykpO3JldHVybiBhfXZhciBzPVsiYWRkIiwicmVtb3ZlIiwidG9nZ2xlIl0sbj17Ym9yZGVyOjEsYm9yZGVyQm90dG9tOjEsYm9yZGVyQ29sb3I6MSxib3JkZXJMZWZ0OjEsYm9yZGVyUmlnaHQ6MSxib3JkZXJUb3A6MSxib3JkZXJXaWR0aDoxLG1hcmdpbjoxLHBhZGRpbmc6MX07dC5lYWNoKFsiYm9yZGVyTGVmdFN0eWxlIiwiYm9yZGVyUmlnaHRTdHlsZSIsImJvcmRlckJvdHRvbVN0eWxlIiwiYm9yZGVyVG9wU3R5bGUiXSxmdW5jdGlvbihlLGkpe3QuZnguc3RlcFtpXT1mdW5jdGlvbih0KXsoIm5vbmUiIT09dC5lbmQmJiF0LnNldEF0dHJ8fDE9PT10LnBvcyYmIXQuc2V0QXR0cikmJihwLnN0eWxlKHQuZWxlbSxpLHQuZW5kKSx0LnNldEF0dHI9ITApfX0pLHQuZm4uYWRkQmFja3x8KHQuZm4uYWRkQmFjaz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hZGQobnVsbD09dD90aGlzLnByZXZPYmplY3Q6dGhpcy5wcmV2T2JqZWN0LmZpbHRlcih0KSl9KSx0LmVmZmVjdHMuYW5pbWF0ZUNsYXNzPWZ1bmN0aW9uKG4sbyxhLHIpe3ZhciBoPXQuc3BlZWQobyxhLHIpO3JldHVybiB0aGlzLnF1ZXVlKGZ1bmN0aW9uKCl7dmFyIG8sYT10KHRoaXMpLHI9YS5hdHRyKCJjbGFzcyIpfHwiIixsPWguY2hpbGRyZW4/YS5maW5kKCIqIikuYWRkQmFjaygpOmE7bD1sLm1hcChmdW5jdGlvbigpe3ZhciBpPXQodGhpcyk7cmV0dXJue2VsOmksc3RhcnQ6ZSh0aGlzKX19KSxvPWZ1bmN0aW9uKCl7dC5lYWNoKHMsZnVuY3Rpb24odCxlKXtuW2VdJiZhW2UrIkNsYXNzIl0obltlXSl9KX0sbygpLGw9bC5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbmQ9ZSh0aGlzLmVsWzBdKSx0aGlzLmRpZmY9aSh0aGlzLnN0YXJ0LHRoaXMuZW5kKSx0aGlzfSksYS5hdHRyKCJjbGFzcyIsciksbD1sLm1hcChmdW5jdGlvbigpe3ZhciBlPXRoaXMsaT10LkRlZmVycmVkKCkscz10LmV4dGVuZCh7fSxoLHtxdWV1ZTohMSxjb21wbGV0ZTpmdW5jdGlvbigpe2kucmVzb2x2ZShlKX19KTtyZXR1cm4gdGhpcy5lbC5hbmltYXRlKHRoaXMuZGlmZixzKSxpLnByb21pc2UoKX0pLHQud2hlbi5hcHBseSh0LGwuZ2V0KCkpLmRvbmUoZnVuY3Rpb24oKXtvKCksdC5lYWNoKGFyZ3VtZW50cyxmdW5jdGlvbigpe3ZhciBlPXRoaXMuZWw7dC5lYWNoKHRoaXMuZGlmZixmdW5jdGlvbih0KXtlLmNzcyh0LCIiKX0pfSksaC5jb21wbGV0ZS5jYWxsKGFbMF0pfSl9KX0sdC5mbi5leHRlbmQoe2FkZENsYXNzOmZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbihpLHMsbixvKXtyZXR1cm4gcz90LmVmZmVjdHMuYW5pbWF0ZUNsYXNzLmNhbGwodGhpcyx7YWRkOml9LHMsbixvKTplLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KHQuZm4uYWRkQ2xhc3MpLHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbihpLHMsbixvKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD4xP3QuZWZmZWN0cy5hbmltYXRlQ2xhc3MuY2FsbCh0aGlzLHtyZW1vdmU6aX0scyxuLG8pOmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0odC5mbi5yZW1vdmVDbGFzcyksdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKGkscyxuLG8sYSl7cmV0dXJuImJvb2xlYW4iPT10eXBlb2Ygc3x8dm9pZCAwPT09cz9uP3QuZWZmZWN0cy5hbmltYXRlQ2xhc3MuY2FsbCh0aGlzLHM/e2FkZDppfTp7cmVtb3ZlOml9LG4sbyxhKTplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp0LmVmZmVjdHMuYW5pbWF0ZUNsYXNzLmNhbGwodGhpcyx7dG9nZ2xlOml9LHMsbixvKX19KHQuZm4udG9nZ2xlQ2xhc3MpLHN3aXRjaENsYXNzOmZ1bmN0aW9uKGUsaSxzLG4sbyl7cmV0dXJuIHQuZWZmZWN0cy5hbmltYXRlQ2xhc3MuY2FsbCh0aGlzLHthZGQ6aSxyZW1vdmU6ZX0scyxuLG8pfX0pfSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLGkscyxuKXtyZXR1cm4gdC5pc1BsYWluT2JqZWN0KGUpJiYoaT1lLGU9ZS5lZmZlY3QpLGU9e2VmZmVjdDplfSxudWxsPT1pJiYoaT17fSksdC5pc0Z1bmN0aW9uKGkpJiYobj1pLHM9bnVsbCxpPXt9KSwoIm51bWJlciI9PXR5cGVvZiBpfHx0LmZ4LnNwZWVkc1tpXSkmJihuPXMscz1pLGk9e30pLHQuaXNGdW5jdGlvbihzKSYmKG49cyxzPW51bGwpLGkmJnQuZXh0ZW5kKGUsaSkscz1zfHxpLmR1cmF0aW9uLGUuZHVyYXRpb249dC5meC5vZmY/MDoibnVtYmVyIj09dHlwZW9mIHM/czpzIGluIHQuZnguc3BlZWRzP3QuZnguc3BlZWRzW3NdOnQuZnguc3BlZWRzLl9kZWZhdWx0LGUuY29tcGxldGU9bnx8aS5jb21wbGV0ZSxlfWZ1bmN0aW9uIGkoZSl7cmV0dXJuIWV8fCJudW1iZXIiPT10eXBlb2YgZXx8dC5meC5zcGVlZHNbZV0/ITA6InN0cmluZyIhPXR5cGVvZiBlfHx0LmVmZmVjdHMuZWZmZWN0W2VdP3QuaXNGdW5jdGlvbihlKT8hMDoib2JqZWN0IiE9dHlwZW9mIGV8fGUuZWZmZWN0PyExOiEwOiEwfWZ1bmN0aW9uIHModCxlKXt2YXIgaT1lLm91dGVyV2lkdGgoKSxzPWUub3V0ZXJIZWlnaHQoKSxuPS9ecmVjdFwoKC0/XGQqXC4/XGQqcHh8LT9cZCslfGF1dG8pLD9ccyooLT9cZCpcLj9cZCpweHwtP1xkKyV8YXV0byksP1xzKigtP1xkKlwuP1xkKnB4fC0/XGQrJXxhdXRvKSw/XHMqKC0/XGQqXC4/XGQqcHh8LT9cZCslfGF1dG8pXCkkLyxvPW4uZXhlYyh0KXx8WyIiLDAsaSxzLDBdO3JldHVybnt0b3A6cGFyc2VGbG9hdChvWzFdKXx8MCxyaWdodDoiYXV0byI9PT1vWzJdP2k6cGFyc2VGbG9hdChvWzJdKSxib3R0b206ImF1dG8iPT09b1szXT9zOnBhcnNlRmxvYXQob1szXSksbGVmdDpwYXJzZUZsb2F0KG9bNF0pfHwwfX10LmV4cHImJnQuZXhwci5maWx0ZXJzJiZ0LmV4cHIuZmlsdGVycy5hbmltYXRlZCYmKHQuZXhwci5maWx0ZXJzLmFuaW1hdGVkPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbihpKXtyZXR1cm4hIXQoaSkuZGF0YShkKXx8ZShpKX19KHQuZXhwci5maWx0ZXJzLmFuaW1hdGVkKSksdC51aUJhY2tDb21wYXQhPT0hMSYmdC5leHRlbmQodC5lZmZlY3RzLHtzYXZlOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpPTAscz1lLmxlbmd0aDtzPmk7aSsrKW51bGwhPT1lW2ldJiZ0LmRhdGEoYytlW2ldLHRbMF0uc3R5bGVbZVtpXV0pfSxyZXN0b3JlOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpLHM9MCxuPWUubGVuZ3RoO24+cztzKyspbnVsbCE9PWVbc10mJihpPXQuZGF0YShjK2Vbc10pLHQuY3NzKGVbc10saSkpfSxzZXRNb2RlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuInRvZ2dsZSI9PT1lJiYoZT10LmlzKCI6aGlkZGVuIik/InNob3ciOiJoaWRlIiksZX0sY3JlYXRlV3JhcHBlcjpmdW5jdGlvbihlKXtpZihlLnBhcmVudCgpLmlzKCIudWktZWZmZWN0cy13cmFwcGVyIikpcmV0dXJuIGUucGFyZW50KCk7dmFyIGk9e3dpZHRoOmUub3V0ZXJXaWR0aCghMCksaGVpZ2h0OmUub3V0ZXJIZWlnaHQoITApLCJmbG9hdCI6ZS5jc3MoImZsb2F0Iil9LHM9dCgiPGRpdj48L2Rpdj4iKS5hZGRDbGFzcygidWktZWZmZWN0cy13cmFwcGVyIikuY3NzKHtmb250U2l6ZToiMTAwJSIsYmFja2dyb3VuZDoidHJhbnNwYXJlbnQiLGJvcmRlcjoibm9uZSIsbWFyZ2luOjAscGFkZGluZzowfSksbj17d2lkdGg6ZS53aWR0aCgpLGhlaWdodDplLmhlaWdodCgpfSxvPWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7dHJ5e28uaWR9Y2F0Y2goYSl7bz1kb2N1bWVudC5ib2R5fXJldHVybiBlLndyYXAocyksKGVbMF09PT1vfHx0LmNvbnRhaW5zKGVbMF0sbykpJiZ0KG8pLnRyaWdnZXIoImZvY3VzIikscz1lLnBhcmVudCgpLCJzdGF0aWMiPT09ZS5jc3MoInBvc2l0aW9uIik/KHMuY3NzKHtwb3NpdGlvbjoicmVsYXRpdmUifSksZS5jc3Moe3Bvc2l0aW9uOiJyZWxhdGl2ZSJ9KSk6KHQuZXh0ZW5kKGkse3Bvc2l0aW9uOmUuY3NzKCJwb3NpdGlvbiIpLHpJbmRleDplLmNzcygiei1pbmRleCIpfSksdC5lYWNoKFsidG9wIiwibGVmdCIsImJvdHRvbSIsInJpZ2h0Il0sZnVuY3Rpb24odCxzKXtpW3NdPWUuY3NzKHMpLGlzTmFOKHBhcnNlSW50KGlbc10sMTApKSYmKGlbc109ImF1dG8iKX0pLGUuY3NzKHtwb3NpdGlvbjoicmVsYXRpdmUiLHRvcDowLGxlZnQ6MCxyaWdodDoiYXV0byIsYm90dG9tOiJhdXRvIn0pKSxlLmNzcyhuKSxzLmNzcyhpKS5zaG93KCl9LHJlbW92ZVdyYXBwZXI6ZnVuY3Rpb24oZSl7dmFyIGk9ZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtyZXR1cm4gZS5wYXJlbnQoKS5pcygiLnVpLWVmZmVjdHMtd3JhcHBlciIpJiYoZS5wYXJlbnQoKS5yZXBsYWNlV2l0aChlKSwoZVswXT09PWl8fHQuY29udGFpbnMoZVswXSxpKSkmJnQoaSkudHJpZ2dlcigiZm9jdXMiKSksZX19KSx0LmV4dGVuZCh0LmVmZmVjdHMse3ZlcnNpb246IjEuMTIuMSIsZGVmaW5lOmZ1bmN0aW9uKGUsaSxzKXtyZXR1cm4gc3x8KHM9aSxpPSJlZmZlY3QiKSx0LmVmZmVjdHMuZWZmZWN0W2VdPXMsdC5lZmZlY3RzLmVmZmVjdFtlXS5tb2RlPWksc30sc2NhbGVkRGltZW5zaW9uczpmdW5jdGlvbih0LGUsaSl7aWYoMD09PWUpcmV0dXJue2hlaWdodDowLHdpZHRoOjAsb3V0ZXJIZWlnaHQ6MCxvdXRlcldpZHRoOjB9O3ZhciBzPSJob3Jpem9udGFsIiE9PWk/KGV8fDEwMCkvMTAwOjEsbj0idmVydGljYWwiIT09aT8oZXx8MTAwKS8xMDA6MTtyZXR1cm57aGVpZ2h0OnQuaGVpZ2h0KCkqbix3aWR0aDp0LndpZHRoKCkqcyxvdXRlckhlaWdodDp0Lm91dGVySGVpZ2h0KCkqbixvdXRlcldpZHRoOnQub3V0ZXJXaWR0aCgpKnN9fSxjbGlwVG9Cb3g6ZnVuY3Rpb24odCl7cmV0dXJue3dpZHRoOnQuY2xpcC5yaWdodC10LmNsaXAubGVmdCxoZWlnaHQ6dC5jbGlwLmJvdHRvbS10LmNsaXAudG9wLGxlZnQ6dC5jbGlwLmxlZnQsdG9wOnQuY2xpcC50b3B9fSx1bnNoaWZ0OmZ1bmN0aW9uKHQsZSxpKXt2YXIgcz10LnF1ZXVlKCk7ZT4xJiZzLnNwbGljZS5hcHBseShzLFsxLDBdLmNvbmNhdChzLnNwbGljZShlLGkpKSksdC5kZXF1ZXVlKCl9LHNhdmVTdHlsZTpmdW5jdGlvbih0KXt0LmRhdGEodSx0WzBdLnN0eWxlLmNzc1RleHQpfSxyZXN0b3JlU3R5bGU6ZnVuY3Rpb24odCl7dFswXS5zdHlsZS5jc3NUZXh0PXQuZGF0YSh1KXx8IiIsdC5yZW1vdmVEYXRhKHUpfSxtb2RlOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dC5pcygiOmhpZGRlbiIpO3JldHVybiJ0b2dnbGUiPT09ZSYmKGU9aT8ic2hvdyI6ImhpZGUiKSwoaT8iaGlkZSI9PT1lOiJzaG93Ij09PWUpJiYoZT0ibm9uZSIpLGV9LGdldEJhc2VsaW5lOmZ1bmN0aW9uKHQsZSl7dmFyIGkscztzd2l0Y2godFswXSl7Y2FzZSJ0b3AiOmk9MDticmVhaztjYXNlIm1pZGRsZSI6aT0uNTticmVhaztjYXNlImJvdHRvbSI6aT0xO2JyZWFrO2RlZmF1bHQ6aT10WzBdL2UuaGVpZ2h0fXN3aXRjaCh0WzFdKXtjYXNlImxlZnQiOnM9MDticmVhaztjYXNlImNlbnRlciI6cz0uNTticmVhaztjYXNlInJpZ2h0IjpzPTE7YnJlYWs7ZGVmYXVsdDpzPXRbMV0vZS53aWR0aH1yZXR1cm57eDpzLHk6aX19LGNyZWF0ZVBsYWNlaG9sZGVyOmZ1bmN0aW9uKGUpe3ZhciBpLHM9ZS5jc3MoInBvc2l0aW9uIiksbj1lLnBvc2l0aW9uKCk7cmV0dXJuIGUuY3NzKHttYXJnaW5Ub3A6ZS5jc3MoIm1hcmdpblRvcCIpLG1hcmdpbkJvdHRvbTplLmNzcygibWFyZ2luQm90dG9tIiksbWFyZ2luTGVmdDplLmNzcygibWFyZ2luTGVmdCIpLG1hcmdpblJpZ2h0OmUuY3NzKCJtYXJnaW5SaWdodCIpfSkub3V0ZXJXaWR0aChlLm91dGVyV2lkdGgoKSkub3V0ZXJIZWlnaHQoZS5vdXRlckhlaWdodCgpKSwvXihzdGF0aWN8cmVsYXRpdmUpLy50ZXN0KHMpJiYocz0iYWJzb2x1dGUiLGk9dCgiPCIrZVswXS5ub2RlTmFtZSsiPiIpLmluc2VydEFmdGVyKGUpLmNzcyh7ZGlzcGxheTovXihpbmxpbmV8cnVieSkvLnRlc3QoZS5jc3MoImRpc3BsYXkiKSk/ImlubGluZS1ibG9jayI6ImJsb2NrIix2aXNpYmlsaXR5OiJoaWRkZW4iLG1hcmdpblRvcDplLmNzcygibWFyZ2luVG9wIiksbWFyZ2luQm90dG9tOmUuY3NzKCJtYXJnaW5Cb3R0b20iKSxtYXJnaW5MZWZ0OmUuY3NzKCJtYXJnaW5MZWZ0IiksbWFyZ2luUmlnaHQ6ZS5jc3MoIm1hcmdpblJpZ2h0IiksImZsb2F0IjplLmNzcygiZmxvYXQiKX0pLm91dGVyV2lkdGgoZS5vdXRlcldpZHRoKCkpLm91dGVySGVpZ2h0KGUub3V0ZXJIZWlnaHQoKSkuYWRkQ2xhc3MoInVpLWVmZmVjdHMtcGxhY2Vob2xkZXIiKSxlLmRhdGEoYysicGxhY2Vob2xkZXIiLGkpKSxlLmNzcyh7cG9zaXRpb246cyxsZWZ0Om4ubGVmdCx0b3A6bi50b3B9KSxpfSxyZW1vdmVQbGFjZWhvbGRlcjpmdW5jdGlvbih0KXt2YXIgZT1jKyJwbGFjZWhvbGRlciIsaT10LmRhdGEoZSk7aSYmKGkucmVtb3ZlKCksdC5yZW1vdmVEYXRhKGUpKX0sY2xlYW5VcDpmdW5jdGlvbihlKXt0LmVmZmVjdHMucmVzdG9yZVN0eWxlKGUpLHQuZWZmZWN0cy5yZW1vdmVQbGFjZWhvbGRlcihlKX0sc2V0VHJhbnNpdGlvbjpmdW5jdGlvbihlLGkscyxuKXtyZXR1cm4gbj1ufHx7fSx0LmVhY2goaSxmdW5jdGlvbih0LGkpe3ZhciBvPWUuY3NzVW5pdChpKTtvWzBdPjAmJihuW2ldPW9bMF0qcytvWzFdKX0pLG59fSksdC5mbi5leHRlbmQoe2VmZmVjdDpmdW5jdGlvbigpe2Z1bmN0aW9uIGkoZSl7ZnVuY3Rpb24gaSgpe3IucmVtb3ZlRGF0YShkKSx0LmVmZmVjdHMuY2xlYW5VcChyKSwiaGlkZSI9PT1zLm1vZGUmJnIuaGlkZSgpLGEoKX1mdW5jdGlvbiBhKCl7dC5pc0Z1bmN0aW9uKGgpJiZoLmNhbGwoclswXSksdC5pc0Z1bmN0aW9uKGUpJiZlKCl9dmFyIHI9dCh0aGlzKTtzLm1vZGU9Yy5zaGlmdCgpLHQudWlCYWNrQ29tcGF0PT09ITF8fG8/Im5vbmUiPT09cy5tb2RlPyhyW2xdKCksYSgpKTpuLmNhbGwoclswXSxzLGkpOihyLmlzKCI6aGlkZGVuIik/ImhpZGUiPT09bDoic2hvdyI9PT1sKT8ocltsXSgpLGEoKSk6bi5jYWxsKHJbMF0scyxhKX12YXIgcz1lLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxuPXQuZWZmZWN0cy5lZmZlY3Rbcy5lZmZlY3RdLG89bi5tb2RlLGE9cy5xdWV1ZSxyPWF8fCJmeCIsaD1zLmNvbXBsZXRlLGw9cy5tb2RlLGM9W10sdT1mdW5jdGlvbihlKXt2YXIgaT10KHRoaXMpLHM9dC5lZmZlY3RzLm1vZGUoaSxsKXx8bztpLmRhdGEoZCwhMCksYy5wdXNoKHMpLG8mJigic2hvdyI9PT1zfHxzPT09byYmImhpZGUiPT09cykmJmkuc2hvdygpLG8mJiJub25lIj09PXN8fHQuZWZmZWN0cy5zYXZlU3R5bGUoaSksdC5pc0Z1bmN0aW9uKGUpJiZlKCl9O3JldHVybiB0LmZ4Lm9mZnx8IW4/bD90aGlzW2xdKHMuZHVyYXRpb24saCk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7aCYmaC5jYWxsKHRoaXMpfSk6YT09PSExP3RoaXMuZWFjaCh1KS5lYWNoKGkpOnRoaXMucXVldWUocix1KS5xdWV1ZShyLGkpfSxzaG93OmZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihzKXtpZihpKHMpKXJldHVybiB0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgbj1lLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gbi5tb2RlPSJzaG93Iix0aGlzLmVmZmVjdC5jYWxsKHRoaXMsbikKfX0odC5mbi5zaG93KSxoaWRlOmZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihzKXtpZihpKHMpKXJldHVybiB0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgbj1lLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gbi5tb2RlPSJoaWRlIix0aGlzLmVmZmVjdC5jYWxsKHRoaXMsbil9fSh0LmZuLmhpZGUpLHRvZ2dsZTpmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24ocyl7aWYoaShzKXx8ImJvb2xlYW4iPT10eXBlb2YgcylyZXR1cm4gdC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIG49ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIG4ubW9kZT0idG9nZ2xlIix0aGlzLmVmZmVjdC5jYWxsKHRoaXMsbil9fSh0LmZuLnRvZ2dsZSksY3NzVW5pdDpmdW5jdGlvbihlKXt2YXIgaT10aGlzLmNzcyhlKSxzPVtdO3JldHVybiB0LmVhY2goWyJlbSIsInB4IiwiJSIsInB0Il0sZnVuY3Rpb24odCxlKXtpLmluZGV4T2YoZSk+MCYmKHM9W3BhcnNlRmxvYXQoaSksZV0pfSksc30sY3NzQ2xpcDpmdW5jdGlvbih0KXtyZXR1cm4gdD90aGlzLmNzcygiY2xpcCIsInJlY3QoIit0LnRvcCsicHggIit0LnJpZ2h0KyJweCAiK3QuYm90dG9tKyJweCAiK3QubGVmdCsicHgpIik6cyh0aGlzLmNzcygiY2xpcCIpLHRoaXMpfSx0cmFuc2ZlcjpmdW5jdGlvbihlLGkpe3ZhciBzPXQodGhpcyksbj10KGUudG8pLG89ImZpeGVkIj09PW4uY3NzKCJwb3NpdGlvbiIpLGE9dCgiYm9keSIpLHI9bz9hLnNjcm9sbFRvcCgpOjAsaD1vP2Euc2Nyb2xsTGVmdCgpOjAsbD1uLm9mZnNldCgpLGM9e3RvcDpsLnRvcC1yLGxlZnQ6bC5sZWZ0LWgsaGVpZ2h0Om4uaW5uZXJIZWlnaHQoKSx3aWR0aDpuLmlubmVyV2lkdGgoKX0sdT1zLm9mZnNldCgpLGQ9dCgiPGRpdiBjbGFzcz0ndWktZWZmZWN0cy10cmFuc2Zlcic+PC9kaXY+IikuYXBwZW5kVG8oImJvZHkiKS5hZGRDbGFzcyhlLmNsYXNzTmFtZSkuY3NzKHt0b3A6dS50b3AtcixsZWZ0OnUubGVmdC1oLGhlaWdodDpzLmlubmVySGVpZ2h0KCksd2lkdGg6cy5pbm5lcldpZHRoKCkscG9zaXRpb246bz8iZml4ZWQiOiJhYnNvbHV0ZSJ9KS5hbmltYXRlKGMsZS5kdXJhdGlvbixlLmVhc2luZyxmdW5jdGlvbigpe2QucmVtb3ZlKCksdC5pc0Z1bmN0aW9uKGkpJiZpKCl9KX19KSx0LmZ4LnN0ZXAuY2xpcD1mdW5jdGlvbihlKXtlLmNsaXBJbml0fHwoZS5zdGFydD10KGUuZWxlbSkuY3NzQ2xpcCgpLCJzdHJpbmciPT10eXBlb2YgZS5lbmQmJihlLmVuZD1zKGUuZW5kLGUuZWxlbSkpLGUuY2xpcEluaXQ9ITApLHQoZS5lbGVtKS5jc3NDbGlwKHt0b3A6ZS5wb3MqKGUuZW5kLnRvcC1lLnN0YXJ0LnRvcCkrZS5zdGFydC50b3AscmlnaHQ6ZS5wb3MqKGUuZW5kLnJpZ2h0LWUuc3RhcnQucmlnaHQpK2Uuc3RhcnQucmlnaHQsYm90dG9tOmUucG9zKihlLmVuZC5ib3R0b20tZS5zdGFydC5ib3R0b20pK2Uuc3RhcnQuYm90dG9tLGxlZnQ6ZS5wb3MqKGUuZW5kLmxlZnQtZS5zdGFydC5sZWZ0KStlLnN0YXJ0LmxlZnR9KX19KCksZnVuY3Rpb24oKXt2YXIgZT17fTt0LmVhY2goWyJRdWFkIiwiQ3ViaWMiLCJRdWFydCIsIlF1aW50IiwiRXhwbyJdLGZ1bmN0aW9uKHQsaSl7ZVtpXT1mdW5jdGlvbihlKXtyZXR1cm4gTWF0aC5wb3coZSx0KzIpfX0pLHQuZXh0ZW5kKGUse1NpbmU6ZnVuY3Rpb24odCl7cmV0dXJuIDEtTWF0aC5jb3ModCpNYXRoLlBJLzIpfSxDaXJjOmZ1bmN0aW9uKHQpe3JldHVybiAxLU1hdGguc3FydCgxLXQqdCl9LEVsYXN0aWM6ZnVuY3Rpb24odCl7cmV0dXJuIDA9PT10fHwxPT09dD90Oi1NYXRoLnBvdygyLDgqKHQtMSkpKk1hdGguc2luKCg4MCoodC0xKS03LjUpKk1hdGguUEkvMTUpfSxCYWNrOmZ1bmN0aW9uKHQpe3JldHVybiB0KnQqKDMqdC0yKX0sQm91bmNlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxpPTQ7KChlPU1hdGgucG93KDIsLS1pKSktMSkvMTE+dDspO3JldHVybiAxL01hdGgucG93KDQsMy1pKS03LjU2MjUqTWF0aC5wb3coKDMqZS0yKS8yMi10LDIpfX0pLHQuZWFjaChlLGZ1bmN0aW9uKGUsaSl7dC5lYXNpbmdbImVhc2VJbiIrZV09aSx0LmVhc2luZ1siZWFzZU91dCIrZV09ZnVuY3Rpb24odCl7cmV0dXJuIDEtaSgxLXQpfSx0LmVhc2luZ1siZWFzZUluT3V0IitlXT1mdW5jdGlvbih0KXtyZXR1cm4uNT50P2koMip0KS8yOjEtaSgtMip0KzIpLzJ9fSl9KCk7dmFyIGY9dC5lZmZlY3RzO3QuZWZmZWN0cy5kZWZpbmUoImJsaW5kIiwiaGlkZSIsZnVuY3Rpb24oZSxpKXt2YXIgcz17dXA6WyJib3R0b20iLCJ0b3AiXSx2ZXJ0aWNhbDpbImJvdHRvbSIsInRvcCJdLGRvd246WyJ0b3AiLCJib3R0b20iXSxsZWZ0OlsicmlnaHQiLCJsZWZ0Il0saG9yaXpvbnRhbDpbInJpZ2h0IiwibGVmdCJdLHJpZ2h0OlsibGVmdCIsInJpZ2h0Il19LG49dCh0aGlzKSxvPWUuZGlyZWN0aW9ufHwidXAiLGE9bi5jc3NDbGlwKCkscj17Y2xpcDp0LmV4dGVuZCh7fSxhKX0saD10LmVmZmVjdHMuY3JlYXRlUGxhY2Vob2xkZXIobik7ci5jbGlwW3Nbb11bMF1dPXIuY2xpcFtzW29dWzFdXSwic2hvdyI9PT1lLm1vZGUmJihuLmNzc0NsaXAoci5jbGlwKSxoJiZoLmNzcyh0LmVmZmVjdHMuY2xpcFRvQm94KHIpKSxyLmNsaXA9YSksaCYmaC5hbmltYXRlKHQuZWZmZWN0cy5jbGlwVG9Cb3gociksZS5kdXJhdGlvbixlLmVhc2luZyksbi5hbmltYXRlKHIse3F1ZXVlOiExLGR1cmF0aW9uOmUuZHVyYXRpb24sZWFzaW5nOmUuZWFzaW5nLGNvbXBsZXRlOml9KX0pLHQuZWZmZWN0cy5kZWZpbmUoImJvdW5jZSIsZnVuY3Rpb24oZSxpKXt2YXIgcyxuLG8sYT10KHRoaXMpLHI9ZS5tb2RlLGg9ImhpZGUiPT09cixsPSJzaG93Ij09PXIsYz1lLmRpcmVjdGlvbnx8InVwIix1PWUuZGlzdGFuY2UsZD1lLnRpbWVzfHw1LHA9MipkKyhsfHxoPzE6MCksZj1lLmR1cmF0aW9uL3AsZz1lLmVhc2luZyxtPSJ1cCI9PT1jfHwiZG93biI9PT1jPyJ0b3AiOiJsZWZ0IixfPSJ1cCI9PT1jfHwibGVmdCI9PT1jLHY9MCxiPWEucXVldWUoKS5sZW5ndGg7Zm9yKHQuZWZmZWN0cy5jcmVhdGVQbGFjZWhvbGRlcihhKSxvPWEuY3NzKG0pLHV8fCh1PWFbInRvcCI9PT1tPyJvdXRlckhlaWdodCI6Im91dGVyV2lkdGgiXSgpLzMpLGwmJihuPXtvcGFjaXR5OjF9LG5bbV09byxhLmNzcygib3BhY2l0eSIsMCkuY3NzKG0sXz8yKi11OjIqdSkuYW5pbWF0ZShuLGYsZykpLGgmJih1Lz1NYXRoLnBvdygyLGQtMSkpLG49e30sblttXT1vO2Q+djt2Kyspcz17fSxzW21dPShfPyItPSI6Iis9IikrdSxhLmFuaW1hdGUocyxmLGcpLmFuaW1hdGUobixmLGcpLHU9aD8yKnU6dS8yO2gmJihzPXtvcGFjaXR5OjB9LHNbbV09KF8/Ii09IjoiKz0iKSt1LGEuYW5pbWF0ZShzLGYsZykpLGEucXVldWUoaSksdC5lZmZlY3RzLnVuc2hpZnQoYSxiLHArMSl9KSx0LmVmZmVjdHMuZGVmaW5lKCJjbGlwIiwiaGlkZSIsZnVuY3Rpb24oZSxpKXt2YXIgcyxuPXt9LG89dCh0aGlzKSxhPWUuZGlyZWN0aW9ufHwidmVydGljYWwiLHI9ImJvdGgiPT09YSxoPXJ8fCJob3Jpem9udGFsIj09PWEsbD1yfHwidmVydGljYWwiPT09YTtzPW8uY3NzQ2xpcCgpLG4uY2xpcD17dG9wOmw/KHMuYm90dG9tLXMudG9wKS8yOnMudG9wLHJpZ2h0Omg/KHMucmlnaHQtcy5sZWZ0KS8yOnMucmlnaHQsYm90dG9tOmw/KHMuYm90dG9tLXMudG9wKS8yOnMuYm90dG9tLGxlZnQ6aD8ocy5yaWdodC1zLmxlZnQpLzI6cy5sZWZ0fSx0LmVmZmVjdHMuY3JlYXRlUGxhY2Vob2xkZXIobyksInNob3ciPT09ZS5tb2RlJiYoby5jc3NDbGlwKG4uY2xpcCksbi5jbGlwPXMpLG8uYW5pbWF0ZShuLHtxdWV1ZTohMSxkdXJhdGlvbjplLmR1cmF0aW9uLGVhc2luZzplLmVhc2luZyxjb21wbGV0ZTppfSl9KSx0LmVmZmVjdHMuZGVmaW5lKCJkcm9wIiwiaGlkZSIsZnVuY3Rpb24oZSxpKXt2YXIgcyxuPXQodGhpcyksbz1lLm1vZGUsYT0ic2hvdyI9PT1vLHI9ZS5kaXJlY3Rpb258fCJsZWZ0IixoPSJ1cCI9PT1yfHwiZG93biI9PT1yPyJ0b3AiOiJsZWZ0IixsPSJ1cCI9PT1yfHwibGVmdCI9PT1yPyItPSI6Iis9IixjPSIrPSI9PT1sPyItPSI6Iis9Iix1PXtvcGFjaXR5OjB9O3QuZWZmZWN0cy5jcmVhdGVQbGFjZWhvbGRlcihuKSxzPWUuZGlzdGFuY2V8fG5bInRvcCI9PT1oPyJvdXRlckhlaWdodCI6Im91dGVyV2lkdGgiXSghMCkvMix1W2hdPWwrcyxhJiYobi5jc3ModSksdVtoXT1jK3MsdS5vcGFjaXR5PTEpLG4uYW5pbWF0ZSh1LHtxdWV1ZTohMSxkdXJhdGlvbjplLmR1cmF0aW9uLGVhc2luZzplLmVhc2luZyxjb21wbGV0ZTppfSl9KSx0LmVmZmVjdHMuZGVmaW5lKCJleHBsb2RlIiwiaGlkZSIsZnVuY3Rpb24oZSxpKXtmdW5jdGlvbiBzKCl7Yi5wdXNoKHRoaXMpLGIubGVuZ3RoPT09dSpkJiZuKCl9ZnVuY3Rpb24gbigpe3AuY3NzKHt2aXNpYmlsaXR5OiJ2aXNpYmxlIn0pLHQoYikucmVtb3ZlKCksaSgpfXZhciBvLGEscixoLGwsYyx1PWUucGllY2VzP01hdGgucm91bmQoTWF0aC5zcXJ0KGUucGllY2VzKSk6MyxkPXUscD10KHRoaXMpLGY9ZS5tb2RlLGc9InNob3ciPT09ZixtPXAuc2hvdygpLmNzcygidmlzaWJpbGl0eSIsImhpZGRlbiIpLm9mZnNldCgpLF89TWF0aC5jZWlsKHAub3V0ZXJXaWR0aCgpL2QpLHY9TWF0aC5jZWlsKHAub3V0ZXJIZWlnaHQoKS91KSxiPVtdO2ZvcihvPTA7dT5vO28rKylmb3IoaD1tLnRvcCtvKnYsYz1vLSh1LTEpLzIsYT0wO2Q+YTthKyspcj1tLmxlZnQrYSpfLGw9YS0oZC0xKS8yLHAuY2xvbmUoKS5hcHBlbmRUbygiYm9keSIpLndyYXAoIjxkaXY+PC9kaXY+IikuY3NzKHtwb3NpdGlvbjoiYWJzb2x1dGUiLHZpc2liaWxpdHk6InZpc2libGUiLGxlZnQ6LWEqXyx0b3A6LW8qdn0pLnBhcmVudCgpLmFkZENsYXNzKCJ1aS1lZmZlY3RzLWV4cGxvZGUiKS5jc3Moe3Bvc2l0aW9uOiJhYnNvbHV0ZSIsb3ZlcmZsb3c6ImhpZGRlbiIsd2lkdGg6XyxoZWlnaHQ6dixsZWZ0OnIrKGc/bCpfOjApLHRvcDpoKyhnP2MqdjowKSxvcGFjaXR5Omc/MDoxfSkuYW5pbWF0ZSh7bGVmdDpyKyhnPzA6bCpfKSx0b3A6aCsoZz8wOmMqdiksb3BhY2l0eTpnPzE6MH0sZS5kdXJhdGlvbnx8NTAwLGUuZWFzaW5nLHMpfSksdC5lZmZlY3RzLmRlZmluZSgiZmFkZSIsInRvZ2dsZSIsZnVuY3Rpb24oZSxpKXt2YXIgcz0ic2hvdyI9PT1lLm1vZGU7dCh0aGlzKS5jc3MoIm9wYWNpdHkiLHM/MDoxKS5hbmltYXRlKHtvcGFjaXR5OnM/MTowfSx7cXVldWU6ITEsZHVyYXRpb246ZS5kdXJhdGlvbixlYXNpbmc6ZS5lYXNpbmcsY29tcGxldGU6aX0pfSksdC5lZmZlY3RzLmRlZmluZSgiZm9sZCIsImhpZGUiLGZ1bmN0aW9uKGUsaSl7dmFyIHM9dCh0aGlzKSxuPWUubW9kZSxvPSJzaG93Ij09PW4sYT0iaGlkZSI9PT1uLHI9ZS5zaXplfHwxNSxoPS8oWzAtOV0rKSUvLmV4ZWMociksbD0hIWUuaG9yaXpGaXJzdCxjPWw/WyJyaWdodCIsImJvdHRvbSJdOlsiYm90dG9tIiwicmlnaHQiXSx1PWUuZHVyYXRpb24vMixkPXQuZWZmZWN0cy5jcmVhdGVQbGFjZWhvbGRlcihzKSxwPXMuY3NzQ2xpcCgpLGY9e2NsaXA6dC5leHRlbmQoe30scCl9LGc9e2NsaXA6dC5leHRlbmQoe30scCl9LG09W3BbY1swXV0scFtjWzFdXV0sXz1zLnF1ZXVlKCkubGVuZ3RoO2gmJihyPXBhcnNlSW50KGhbMV0sMTApLzEwMCptW2E/MDoxXSksZi5jbGlwW2NbMF1dPXIsZy5jbGlwW2NbMF1dPXIsZy5jbGlwW2NbMV1dPTAsbyYmKHMuY3NzQ2xpcChnLmNsaXApLGQmJmQuY3NzKHQuZWZmZWN0cy5jbGlwVG9Cb3goZykpLGcuY2xpcD1wKSxzLnF1ZXVlKGZ1bmN0aW9uKGkpe2QmJmQuYW5pbWF0ZSh0LmVmZmVjdHMuY2xpcFRvQm94KGYpLHUsZS5lYXNpbmcpLmFuaW1hdGUodC5lZmZlY3RzLmNsaXBUb0JveChnKSx1LGUuZWFzaW5nKSxpKCl9KS5hbmltYXRlKGYsdSxlLmVhc2luZykuYW5pbWF0ZShnLHUsZS5lYXNpbmcpLnF1ZXVlKGkpLHQuZWZmZWN0cy51bnNoaWZ0KHMsXyw0KX0pLHQuZWZmZWN0cy5kZWZpbmUoImhpZ2hsaWdodCIsInNob3ciLGZ1bmN0aW9uKGUsaSl7dmFyIHM9dCh0aGlzKSxuPXtiYWNrZ3JvdW5kQ29sb3I6cy5jc3MoImJhY2tncm91bmRDb2xvciIpfTsiaGlkZSI9PT1lLm1vZGUmJihuLm9wYWNpdHk9MCksdC5lZmZlY3RzLnNhdmVTdHlsZShzKSxzLmNzcyh7YmFja2dyb3VuZEltYWdlOiJub25lIixiYWNrZ3JvdW5kQ29sb3I6ZS5jb2xvcnx8IiNmZmZmOTkifSkuYW5pbWF0ZShuLHtxdWV1ZTohMSxkdXJhdGlvbjplLmR1cmF0aW9uLGVhc2luZzplLmVhc2luZyxjb21wbGV0ZTppfSl9KSx0LmVmZmVjdHMuZGVmaW5lKCJzaXplIixmdW5jdGlvbihlLGkpe3ZhciBzLG4sbyxhPXQodGhpcykscj1bImZvbnRTaXplIl0saD1bImJvcmRlclRvcFdpZHRoIiwiYm9yZGVyQm90dG9tV2lkdGgiLCJwYWRkaW5nVG9wIiwicGFkZGluZ0JvdHRvbSJdLGw9WyJib3JkZXJMZWZ0V2lkdGgiLCJib3JkZXJSaWdodFdpZHRoIiwicGFkZGluZ0xlZnQiLCJwYWRkaW5nUmlnaHQiXSxjPWUubW9kZSx1PSJlZmZlY3QiIT09YyxkPWUuc2NhbGV8fCJib3RoIixwPWUub3JpZ2lufHxbIm1pZGRsZSIsImNlbnRlciJdLGY9YS5jc3MoInBvc2l0aW9uIiksZz1hLnBvc2l0aW9uKCksbT10LmVmZmVjdHMuc2NhbGVkRGltZW5zaW9ucyhhKSxfPWUuZnJvbXx8bSx2PWUudG98fHQuZWZmZWN0cy5zY2FsZWREaW1lbnNpb25zKGEsMCk7dC5lZmZlY3RzLmNyZWF0ZVBsYWNlaG9sZGVyKGEpLCJzaG93Ij09PWMmJihvPV8sXz12LHY9byksbj17ZnJvbTp7eTpfLmhlaWdodC9tLmhlaWdodCx4Ol8ud2lkdGgvbS53aWR0aH0sdG86e3k6di5oZWlnaHQvbS5oZWlnaHQseDp2LndpZHRoL20ud2lkdGh9fSwoImJveCI9PT1kfHwiYm90aCI9PT1kKSYmKG4uZnJvbS55IT09bi50by55JiYoXz10LmVmZmVjdHMuc2V0VHJhbnNpdGlvbihhLGgsbi5mcm9tLnksXyksdj10LmVmZmVjdHMuc2V0VHJhbnNpdGlvbihhLGgsbi50by55LHYpKSxuLmZyb20ueCE9PW4udG8ueCYmKF89dC5lZmZlY3RzLnNldFRyYW5zaXRpb24oYSxsLG4uZnJvbS54LF8pLHY9dC5lZmZlY3RzLnNldFRyYW5zaXRpb24oYSxsLG4udG8ueCx2KSkpLCgiY29udGVudCI9PT1kfHwiYm90aCI9PT1kKSYmbi5mcm9tLnkhPT1uLnRvLnkmJihfPXQuZWZmZWN0cy5zZXRUcmFuc2l0aW9uKGEscixuLmZyb20ueSxfKSx2PXQuZWZmZWN0cy5zZXRUcmFuc2l0aW9uKGEscixuLnRvLnksdikpLHAmJihzPXQuZWZmZWN0cy5nZXRCYXNlbGluZShwLG0pLF8udG9wPShtLm91dGVySGVpZ2h0LV8ub3V0ZXJIZWlnaHQpKnMueStnLnRvcCxfLmxlZnQ9KG0ub3V0ZXJXaWR0aC1fLm91dGVyV2lkdGgpKnMueCtnLmxlZnQsdi50b3A9KG0ub3V0ZXJIZWlnaHQtdi5vdXRlckhlaWdodCkqcy55K2cudG9wLHYubGVmdD0obS5vdXRlcldpZHRoLXYub3V0ZXJXaWR0aCkqcy54K2cubGVmdCksYS5jc3MoXyksKCJjb250ZW50Ij09PWR8fCJib3RoIj09PWQpJiYoaD1oLmNvbmNhdChbIm1hcmdpblRvcCIsIm1hcmdpbkJvdHRvbSJdKS5jb25jYXQociksbD1sLmNvbmNhdChbIm1hcmdpbkxlZnQiLCJtYXJnaW5SaWdodCJdKSxhLmZpbmQoIipbd2lkdGhdIikuZWFjaChmdW5jdGlvbigpe3ZhciBpPXQodGhpcykscz10LmVmZmVjdHMuc2NhbGVkRGltZW5zaW9ucyhpKSxvPXtoZWlnaHQ6cy5oZWlnaHQqbi5mcm9tLnksd2lkdGg6cy53aWR0aCpuLmZyb20ueCxvdXRlckhlaWdodDpzLm91dGVySGVpZ2h0Km4uZnJvbS55LG91dGVyV2lkdGg6cy5vdXRlcldpZHRoKm4uZnJvbS54fSxhPXtoZWlnaHQ6cy5oZWlnaHQqbi50by55LHdpZHRoOnMud2lkdGgqbi50by54LG91dGVySGVpZ2h0OnMuaGVpZ2h0Km4udG8ueSxvdXRlcldpZHRoOnMud2lkdGgqbi50by54fTtuLmZyb20ueSE9PW4udG8ueSYmKG89dC5lZmZlY3RzLnNldFRyYW5zaXRpb24oaSxoLG4uZnJvbS55LG8pLGE9dC5lZmZlY3RzLnNldFRyYW5zaXRpb24oaSxoLG4udG8ueSxhKSksbi5mcm9tLnghPT1uLnRvLngmJihvPXQuZWZmZWN0cy5zZXRUcmFuc2l0aW9uKGksbCxuLmZyb20ueCxvKSxhPXQuZWZmZWN0cy5zZXRUcmFuc2l0aW9uKGksbCxuLnRvLngsYSkpLHUmJnQuZWZmZWN0cy5zYXZlU3R5bGUoaSksaS5jc3MobyksaS5hbmltYXRlKGEsZS5kdXJhdGlvbixlLmVhc2luZyxmdW5jdGlvbigpe3UmJnQuZWZmZWN0cy5yZXN0b3JlU3R5bGUoaSl9KX0pKSxhLmFuaW1hdGUodix7cXVldWU6ITEsZHVyYXRpb246ZS5kdXJhdGlvbixlYXNpbmc6ZS5lYXNpbmcsY29tcGxldGU6ZnVuY3Rpb24oKXt2YXIgZT1hLm9mZnNldCgpOzA9PT12Lm9wYWNpdHkmJmEuY3NzKCJvcGFjaXR5IixfLm9wYWNpdHkpLHV8fChhLmNzcygicG9zaXRpb24iLCJzdGF0aWMiPT09Zj8icmVsYXRpdmUiOmYpLm9mZnNldChlKSx0LmVmZmVjdHMuc2F2ZVN0eWxlKGEpKSxpKCl9fSl9KSx0LmVmZmVjdHMuZGVmaW5lKCJzY2FsZSIsZnVuY3Rpb24oZSxpKXt2YXIgcz10KHRoaXMpLG49ZS5tb2RlLG89cGFyc2VJbnQoZS5wZXJjZW50LDEwKXx8KDA9PT1wYXJzZUludChlLnBlcmNlbnQsMTApPzA6ImVmZmVjdCIhPT1uPzA6MTAwKSxhPXQuZXh0ZW5kKCEwLHtmcm9tOnQuZWZmZWN0cy5zY2FsZWREaW1lbnNpb25zKHMpLHRvOnQuZWZmZWN0cy5zY2FsZWREaW1lbnNpb25zKHMsbyxlLmRpcmVjdGlvbnx8ImJvdGgiKSxvcmlnaW46ZS5vcmlnaW58fFsibWlkZGxlIiwiY2VudGVyIl19LGUpO2UuZmFkZSYmKGEuZnJvbS5vcGFjaXR5PTEsYS50by5vcGFjaXR5PTApLHQuZWZmZWN0cy5lZmZlY3Quc2l6ZS5jYWxsKHRoaXMsYSxpKX0pLHQuZWZmZWN0cy5kZWZpbmUoInB1ZmYiLCJoaWRlIixmdW5jdGlvbihlLGkpe3ZhciBzPXQuZXh0ZW5kKCEwLHt9LGUse2ZhZGU6ITAscGVyY2VudDpwYXJzZUludChlLnBlcmNlbnQsMTApfHwxNTB9KTt0LmVmZmVjdHMuZWZmZWN0LnNjYWxlLmNhbGwodGhpcyxzLGkpfSksdC5lZmZlY3RzLmRlZmluZSgicHVsc2F0ZSIsInNob3ciLGZ1bmN0aW9uKGUsaSl7dmFyIHM9dCh0aGlzKSxuPWUubW9kZSxvPSJzaG93Ij09PW4sYT0iaGlkZSI9PT1uLHI9b3x8YSxoPTIqKGUudGltZXN8fDUpKyhyPzE6MCksbD1lLmR1cmF0aW9uL2gsYz0wLHU9MSxkPXMucXVldWUoKS5sZW5ndGg7Zm9yKChvfHwhcy5pcygiOnZpc2libGUiKSkmJihzLmNzcygib3BhY2l0eSIsMCkuc2hvdygpLGM9MSk7aD51O3UrKylzLmFuaW1hdGUoe29wYWNpdHk6Y30sbCxlLmVhc2luZyksYz0xLWM7cy5hbmltYXRlKHtvcGFjaXR5OmN9LGwsZS5lYXNpbmcpLHMucXVldWUoaSksdC5lZmZlY3RzLnVuc2hpZnQocyxkLGgrMSl9KSx0LmVmZmVjdHMuZGVmaW5lKCJzaGFrZSIsZnVuY3Rpb24oZSxpKXt2YXIgcz0xLG49dCh0aGlzKSxvPWUuZGlyZWN0aW9ufHwibGVmdCIsYT1lLmRpc3RhbmNlfHwyMCxyPWUudGltZXN8fDMsaD0yKnIrMSxsPU1hdGgucm91bmQoZS5kdXJhdGlvbi9oKSxjPSJ1cCI9PT1vfHwiZG93biI9PT1vPyJ0b3AiOiJsZWZ0Iix1PSJ1cCI9PT1vfHwibGVmdCI9PT1vLGQ9e30scD17fSxmPXt9LGc9bi5xdWV1ZSgpLmxlbmd0aDtmb3IodC5lZmZlY3RzLmNyZWF0ZVBsYWNlaG9sZGVyKG4pLGRbY109KHU/Ii09IjoiKz0iKSthLHBbY109KHU/Iis9IjoiLT0iKSsyKmEsZltjXT0odT8iLT0iOiIrPSIpKzIqYSxuLmFuaW1hdGUoZCxsLGUuZWFzaW5nKTtyPnM7cysrKW4uYW5pbWF0ZShwLGwsZS5lYXNpbmcpLmFuaW1hdGUoZixsLGUuZWFzaW5nKTtuLmFuaW1hdGUocCxsLGUuZWFzaW5nKS5hbmltYXRlKGQsbC8yLGUuZWFzaW5nKS5xdWV1ZShpKSx0LmVmZmVjdHMudW5zaGlmdChuLGcsaCsxKX0pLHQuZWZmZWN0cy5kZWZpbmUoInNsaWRlIiwic2hvdyIsZnVuY3Rpb24oZSxpKXt2YXIgcyxuLG89dCh0aGlzKSxhPXt1cDpbImJvdHRvbSIsInRvcCJdLGRvd246WyJ0b3AiLCJib3R0b20iXSxsZWZ0OlsicmlnaHQiLCJsZWZ0Il0scmlnaHQ6WyJsZWZ0IiwicmlnaHQiXX0scj1lLm1vZGUsaD1lLmRpcmVjdGlvbnx8ImxlZnQiLGw9InVwIj09PWh8fCJkb3duIj09PWg/InRvcCI6ImxlZnQiLGM9InVwIj09PWh8fCJsZWZ0Ij09PWgsdT1lLmRpc3RhbmNlfHxvWyJ0b3AiPT09bD8ib3V0ZXJIZWlnaHQiOiJvdXRlcldpZHRoIl0oITApLGQ9e307dC5lZmZlY3RzLmNyZWF0ZVBsYWNlaG9sZGVyKG8pLHM9by5jc3NDbGlwKCksbj1vLnBvc2l0aW9uKClbbF0sZFtsXT0oYz8tMToxKSp1K24sZC5jbGlwPW8uY3NzQ2xpcCgpLGQuY2xpcFthW2hdWzFdXT1kLmNsaXBbYVtoXVswXV0sInNob3ciPT09ciYmKG8uY3NzQ2xpcChkLmNsaXApLG8uY3NzKGwsZFtsXSksZC5jbGlwPXMsZFtsXT1uKSxvLmFuaW1hdGUoZCx7cXVldWU6ITEsZHVyYXRpb246ZS5kdXJhdGlvbixlYXNpbmc6ZS5lYXNpbmcsY29tcGxldGU6aX0pfSk7dmFyIGY7dC51aUJhY2tDb21wYXQhPT0hMSYmKGY9dC5lZmZlY3RzLmRlZmluZSgidHJhbnNmZXIiLGZ1bmN0aW9uKGUsaSl7dCh0aGlzKS50cmFuc2ZlcihlLGkpfSkpLHQudWkuZm9jdXNhYmxlPWZ1bmN0aW9uKGkscyl7dmFyIG4sbyxhLHIsaCxsPWkubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iYXJlYSI9PT1sPyhuPWkucGFyZW50Tm9kZSxvPW4ubmFtZSxpLmhyZWYmJm8mJiJtYXAiPT09bi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPyhhPXQoImltZ1t1c2VtYXA9JyMiK28rIiddIiksYS5sZW5ndGg+MCYmYS5pcygiOnZpc2libGUiKSk6ITEpOigvXihpbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9ufG9iamVjdCkkLy50ZXN0KGwpPyhyPSFpLmRpc2FibGVkLHImJihoPXQoaSkuY2xvc2VzdCgiZmllbGRzZXQiKVswXSxoJiYocj0haC5kaXNhYmxlZCkpKTpyPSJhIj09PWw/aS5ocmVmfHxzOnMsciYmdChpKS5pcygiOnZpc2libGUiKSYmZSh0KGkpKSl9LHQuZXh0ZW5kKHQuZXhwclsiOiJdLHtmb2N1c2FibGU6ZnVuY3Rpb24oZSl7cmV0dXJuIHQudWkuZm9jdXNhYmxlKGUsbnVsbCE9dC5hdHRyKGUsInRhYmluZGV4IikpfX0pLHQudWkuZm9jdXNhYmxlLHQuZm4uZm9ybT1mdW5jdGlvbigpe3JldHVybiJzdHJpbmciPT10eXBlb2YgdGhpc1swXS5mb3JtP3RoaXMuY2xvc2VzdCgiZm9ybSIpOnQodGhpc1swXS5mb3JtKX0sdC51aS5mb3JtUmVzZXRNaXhpbj17X2Zvcm1SZXNldEhhbmRsZXI6ZnVuY3Rpb24oKXt2YXIgZT10KHRoaXMpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgaT1lLmRhdGEoInVpLWZvcm0tcmVzZXQtaW5zdGFuY2VzIik7dC5lYWNoKGksZnVuY3Rpb24oKXt0aGlzLnJlZnJlc2goKX0pfSl9LF9iaW5kRm9ybVJlc2V0SGFuZGxlcjpmdW5jdGlvbigpe2lmKHRoaXMuZm9ybT10aGlzLmVsZW1lbnQuZm9ybSgpLHRoaXMuZm9ybS5sZW5ndGgpe3ZhciB0PXRoaXMuZm9ybS5kYXRhKCJ1aS1mb3JtLXJlc2V0LWluc3RhbmNlcyIpfHxbXTt0Lmxlbmd0aHx8dGhpcy5mb3JtLm9uKCJyZXNldC51aS1mb3JtLXJlc2V0Iix0aGlzLl9mb3JtUmVzZXRIYW5kbGVyKSx0LnB1c2godGhpcyksdGhpcy5mb3JtLmRhdGEoInVpLWZvcm0tcmVzZXQtaW5zdGFuY2VzIix0KX19LF91bmJpbmRGb3JtUmVzZXRIYW5kbGVyOmZ1bmN0aW9uKCl7aWYodGhpcy5mb3JtLmxlbmd0aCl7dmFyIGU9dGhpcy5mb3JtLmRhdGEoInVpLWZvcm0tcmVzZXQtaW5zdGFuY2VzIik7ZS5zcGxpY2UodC5pbkFycmF5KHRoaXMsZSksMSksZS5sZW5ndGg/dGhpcy5mb3JtLmRhdGEoInVpLWZvcm0tcmVzZXQtaW5zdGFuY2VzIixlKTp0aGlzLmZvcm0ucmVtb3ZlRGF0YSgidWktZm9ybS1yZXNldC1pbnN0YW5jZXMiKS5vZmYoInJlc2V0LnVpLWZvcm0tcmVzZXQiKX19fSwiMS43Ij09PXQuZm4uanF1ZXJ5LnN1YnN0cmluZygwLDMpJiYodC5lYWNoKFsiV2lkdGgiLCJIZWlnaHQiXSxmdW5jdGlvbihlLGkpe2Z1bmN0aW9uIHMoZSxpLHMsbyl7cmV0dXJuIHQuZWFjaChuLGZ1bmN0aW9uKCl7aS09cGFyc2VGbG9hdCh0LmNzcyhlLCJwYWRkaW5nIit0aGlzKSl8fDAscyYmKGktPXBhcnNlRmxvYXQodC5jc3MoZSwiYm9yZGVyIit0aGlzKyJXaWR0aCIpKXx8MCksbyYmKGktPXBhcnNlRmxvYXQodC5jc3MoZSwibWFyZ2luIit0aGlzKSl8fDApfSksaX12YXIgbj0iV2lkdGgiPT09aT9bIkxlZnQiLCJSaWdodCJdOlsiVG9wIiwiQm90dG9tIl0sbz1pLnRvTG93ZXJDYXNlKCksYT17aW5uZXJXaWR0aDp0LmZuLmlubmVyV2lkdGgsaW5uZXJIZWlnaHQ6dC5mbi5pbm5lckhlaWdodCxvdXRlcldpZHRoOnQuZm4ub3V0ZXJXaWR0aCxvdXRlckhlaWdodDp0LmZuLm91dGVySGVpZ2h0fTt0LmZuWyJpbm5lciIraV09ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWU/YVsiaW5uZXIiK2ldLmNhbGwodGhpcyk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dCh0aGlzKS5jc3MobyxzKHRoaXMsZSkrInB4Iil9KX0sdC5mblsib3V0ZXIiK2ldPWZ1bmN0aW9uKGUsbil7cmV0dXJuIm51bWJlciIhPXR5cGVvZiBlP2FbIm91dGVyIitpXS5jYWxsKHRoaXMsZSk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dCh0aGlzKS5jc3MobyxzKHRoaXMsZSwhMCxuKSsicHgiKX0pfX0pLHQuZm4uYWRkQmFjaz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hZGQobnVsbD09dD90aGlzLnByZXZPYmplY3Q6dGhpcy5wcmV2T2JqZWN0LmZpbHRlcih0KSl9KSx0LnVpLmtleUNvZGU9e0JBQ0tTUEFDRTo4LENPTU1BOjE4OCxERUxFVEU6NDYsRE9XTjo0MCxFTkQ6MzUsRU5URVI6MTMsRVNDQVBFOjI3LEhPTUU6MzYsTEVGVDozNyxQQUdFX0RPV046MzQsUEFHRV9VUDozMyxQRVJJT0Q6MTkwLFJJR0hUOjM5LFNQQUNFOjMyLFRBQjo5LFVQOjM4fSx0LnVpLmVzY2FwZVNlbGVjdG9yPWZ1bmN0aW9uKCl7dmFyIHQ9LyhbISIjJCUmJygpKissLlwvOjs8PT4/QFtcXV5ge3x9fl0pL2c7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UodCwiXFwkMSIpfX0oKSx0LmZuLmxhYmVscz1mdW5jdGlvbigpe3ZhciBlLGkscyxuLG87cmV0dXJuIHRoaXNbMF0ubGFiZWxzJiZ0aGlzWzBdLmxhYmVscy5sZW5ndGg/dGhpcy5wdXNoU3RhY2sodGhpc1swXS5sYWJlbHMpOihuPXRoaXMuZXEoMCkucGFyZW50cygibGFiZWwiKSxzPXRoaXMuYXR0cigiaWQiKSxzJiYoZT10aGlzLmVxKDApLnBhcmVudHMoKS5sYXN0KCksbz1lLmFkZChlLmxlbmd0aD9lLnNpYmxpbmdzKCk6dGhpcy5zaWJsaW5ncygpKSxpPSJsYWJlbFtmb3I9JyIrdC51aS5lc2NhcGVTZWxlY3RvcihzKSsiJ10iLG49bi5hZGQoby5maW5kKGkpLmFkZEJhY2soaSkpKSx0aGlzLnB1c2hTdGFjayhuKSl9LHQuZm4uc2Nyb2xsUGFyZW50PWZ1bmN0aW9uKGUpe3ZhciBpPXRoaXMuY3NzKCJwb3NpdGlvbiIpLHM9ImFic29sdXRlIj09PWksbj1lPy8oYXV0b3xzY3JvbGx8aGlkZGVuKS86LyhhdXRvfHNjcm9sbCkvLG89dGhpcy5wYXJlbnRzKCkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIGU9dCh0aGlzKTtyZXR1cm4gcyYmInN0YXRpYyI9PT1lLmNzcygicG9zaXRpb24iKT8hMTpuLnRlc3QoZS5jc3MoIm92ZXJmbG93IikrZS5jc3MoIm92ZXJmbG93LXkiKStlLmNzcygib3ZlcmZsb3cteCIpKX0pLmVxKDApO3JldHVybiJmaXhlZCIhPT1pJiZvLmxlbmd0aD9vOnQodGhpc1swXS5vd25lckRvY3VtZW50fHxkb2N1bWVudCl9LHQuZXh0ZW5kKHQuZXhwclsiOiJdLHt0YWJiYWJsZTpmdW5jdGlvbihlKXt2YXIgaT10LmF0dHIoZSwidGFiaW5kZXgiKSxzPW51bGwhPWk7cmV0dXJuKCFzfHxpPj0wKSYmdC51aS5mb2N1c2FibGUoZSxzKX19KSx0LmZuLmV4dGVuZCh7dW5pcXVlSWQ6ZnVuY3Rpb24oKXt2YXIgdD0wO3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt0aGlzLmlkfHwodGhpcy5pZD0idWktaWQtIisgKyt0KX0pfX0oKSxyZW1vdmVVbmlxdWVJZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXsvXnVpLWlkLVxkKyQvLnRlc3QodGhpcy5pZCkmJnQodGhpcykucmVtb3ZlQXR0cigiaWQiKX0pfX0pLHQud2lkZ2V0KCJ1aS5hY2NvcmRpb24iLHt2ZXJzaW9uOiIxLjEyLjEiLG9wdGlvbnM6e2FjdGl2ZTowLGFuaW1hdGU6e30sY2xhc3Nlczp7InVpLWFjY29yZGlvbi1oZWFkZXIiOiJ1aS1jb3JuZXItdG9wIiwidWktYWNjb3JkaW9uLWhlYWRlci1jb2xsYXBzZWQiOiJ1aS1jb3JuZXItYWxsIiwidWktYWNjb3JkaW9uLWNvbnRlbnQiOiJ1aS1jb3JuZXItYm90dG9tIn0sY29sbGFwc2libGU6ITEsZXZlbnQ6ImNsaWNrIixoZWFkZXI6Ij4gbGkgPiA6Zmlyc3QtY2hpbGQsID4gOm5vdChsaSk6ZXZlbiIsaGVpZ2h0U3R5bGU6ImF1dG8iLGljb25zOnthY3RpdmVIZWFkZXI6InVpLWljb24tdHJpYW5nbGUtMS1zIixoZWFkZXI6InVpLWljb24tdHJpYW5nbGUtMS1lIn0sYWN0aXZhdGU6bnVsbCxiZWZvcmVBY3RpdmF0ZTpudWxsfSxoaWRlUHJvcHM6e2JvcmRlclRvcFdpZHRoOiJoaWRlIixib3JkZXJCb3R0b21XaWR0aDoiaGlkZSIscGFkZGluZ1RvcDoiaGlkZSIscGFkZGluZ0JvdHRvbToiaGlkZSIsaGVpZ2h0OiJoaWRlIn0sc2hvd1Byb3BzOntib3JkZXJUb3BXaWR0aDoic2hvdyIsYm9yZGVyQm90dG9tV2lkdGg6InNob3ciLHBhZGRpbmdUb3A6InNob3ciLHBhZGRpbmdCb3R0b206InNob3ciLGhlaWdodDoic2hvdyJ9LF9jcmVhdGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnM7dGhpcy5wcmV2U2hvdz10aGlzLnByZXZIaWRlPXQoKSx0aGlzLl9hZGRDbGFzcygidWktYWNjb3JkaW9uIiwidWktd2lkZ2V0IHVpLWhlbHBlci1yZXNldCIpLHRoaXMuZWxlbWVudC5hdHRyKCJyb2xlIiwidGFibGlzdCIpLGUuY29sbGFwc2libGV8fGUuYWN0aXZlIT09ITEmJm51bGwhPWUuYWN0aXZlfHwoZS5hY3RpdmU9MCksdGhpcy5fcHJvY2Vzc1BhbmVscygpLDA+ZS5hY3RpdmUmJihlLmFjdGl2ZSs9dGhpcy5oZWFkZXJzLmxlbmd0aCksdGhpcy5fcmVmcmVzaCgpfSxfZ2V0Q3JlYXRlRXZlbnREYXRhOmZ1bmN0aW9uKCl7cmV0dXJue2hlYWRlcjp0aGlzLmFjdGl2ZSxwYW5lbDp0aGlzLmFjdGl2ZS5sZW5ndGg/dGhpcy5hY3RpdmUubmV4dCgpOnQoKX19LF9jcmVhdGVJY29uczpmdW5jdGlvbigpe3ZhciBlLGkscz10aGlzLm9wdGlvbnMuaWNvbnM7cyYmKGU9dCgiPHNwYW4+IiksdGhpcy5fYWRkQ2xhc3MoZSwidWktYWNjb3JkaW9uLWhlYWRlci1pY29uIiwidWktaWNvbiAiK3MuaGVhZGVyKSxlLnByZXBlbmRUbyh0aGlzLmhlYWRlcnMpLGk9dGhpcy5hY3RpdmUuY2hpbGRyZW4oIi51aS1hY2NvcmRpb24taGVhZGVyLWljb24iKSx0aGlzLl9yZW1vdmVDbGFzcyhpLHMuaGVhZGVyKS5fYWRkQ2xhc3MoaSxudWxsLHMuYWN0aXZlSGVhZGVyKS5fYWRkQ2xhc3ModGhpcy5oZWFkZXJzLCJ1aS1hY2NvcmRpb24taWNvbnMiKSl9LF9kZXN0cm95SWNvbnM6ZnVuY3Rpb24oKXt0aGlzLl9yZW1vdmVDbGFzcyh0aGlzLmhlYWRlcnMsInVpLWFjY29yZGlvbi1pY29ucyIpLHRoaXMuaGVhZGVycy5jaGlsZHJlbigiLnVpLWFjY29yZGlvbi1oZWFkZXItaWNvbiIpLnJlbW92ZSgpfSxfZGVzdHJveTpmdW5jdGlvbigpe3ZhciB0O3RoaXMuZWxlbWVudC5yZW1vdmVBdHRyKCJyb2xlIiksdGhpcy5oZWFkZXJzLnJlbW92ZUF0dHIoInJvbGUgYXJpYS1leHBhbmRlZCBhcmlhLXNlbGVjdGVkIGFyaWEtY29udHJvbHMgdGFiSW5kZXgiKS5yZW1vdmVVbmlxdWVJZCgpLHRoaXMuX2Rlc3Ryb3lJY29ucygpLHQ9dGhpcy5oZWFkZXJzLm5leHQoKS5jc3MoImRpc3BsYXkiLCIiKS5yZW1vdmVBdHRyKCJyb2xlIGFyaWEtaGlkZGVuIGFyaWEtbGFiZWxsZWRieSIpLnJlbW92ZVVuaXF1ZUlkKCksImNvbnRlbnQiIT09dGhpcy5vcHRpb25zLmhlaWdodFN0eWxlJiZ0LmNzcygiaGVpZ2h0IiwiIil9LF9zZXRPcHRpb246ZnVuY3Rpb24odCxlKXtyZXR1cm4iYWN0aXZlIj09PXQ/KHRoaXMuX2FjdGl2YXRlKGUpLHZvaWQgMCk6KCJldmVudCI9PT10JiYodGhpcy5vcHRpb25zLmV2ZW50JiZ0aGlzLl9vZmYodGhpcy5oZWFkZXJzLHRoaXMub3B0aW9ucy5ldmVudCksdGhpcy5fc2V0dXBFdmVudHMoZSkpLHRoaXMuX3N1cGVyKHQsZSksImNvbGxhcHNpYmxlIiE9PXR8fGV8fHRoaXMub3B0aW9ucy5hY3RpdmUhPT0hMXx8dGhpcy5fYWN0aXZhdGUoMCksImljb25zIj09PXQmJih0aGlzLl9kZXN0cm95SWNvbnMoKSxlJiZ0aGlzLl9jcmVhdGVJY29ucygpKSx2b2lkIDApfSxfc2V0T3B0aW9uRGlzYWJsZWQ6ZnVuY3Rpb24odCl7dGhpcy5fc3VwZXIodCksdGhpcy5lbGVtZW50LmF0dHIoImFyaWEtZGlzYWJsZWQiLHQpLHRoaXMuX3RvZ2dsZUNsYXNzKG51bGwsInVpLXN0YXRlLWRpc2FibGVkIiwhIXQpLHRoaXMuX3RvZ2dsZUNsYXNzKHRoaXMuaGVhZGVycy5hZGQodGhpcy5oZWFkZXJzLm5leHQoKSksbnVsbCwidWktc3RhdGUtZGlzYWJsZWQiLCEhdCl9LF9rZXlkb3duOmZ1bmN0aW9uKGUpe2lmKCFlLmFsdEtleSYmIWUuY3RybEtleSl7dmFyIGk9dC51aS5rZXlDb2RlLHM9dGhpcy5oZWFkZXJzLmxlbmd0aCxuPXRoaXMuaGVhZGVycy5pbmRleChlLnRhcmdldCksbz0hMTtzd2l0Y2goZS5rZXlDb2RlKXtjYXNlIGkuUklHSFQ6Y2FzZSBpLkRPV046bz10aGlzLmhlYWRlcnNbKG4rMSklc107YnJlYWs7Y2FzZSBpLkxFRlQ6Y2FzZSBpLlVQOm89dGhpcy5oZWFkZXJzWyhuLTErcyklc107YnJlYWs7Y2FzZSBpLlNQQUNFOmNhc2UgaS5FTlRFUjp0aGlzLl9ldmVudEhhbmRsZXIoZSk7YnJlYWs7Y2FzZSBpLkhPTUU6bz10aGlzLmhlYWRlcnNbMF07YnJlYWs7Y2FzZSBpLkVORDpvPXRoaXMuaGVhZGVyc1tzLTFdfW8mJih0KGUudGFyZ2V0KS5hdHRyKCJ0YWJJbmRleCIsLTEpLHQobykuYXR0cigidGFiSW5kZXgiLDApLHQobykudHJpZ2dlcigiZm9jdXMiKSxlLnByZXZlbnREZWZhdWx0KCkpfX0sX3BhbmVsS2V5RG93bjpmdW5jdGlvbihlKXtlLmtleUNvZGU9PT10LnVpLmtleUNvZGUuVVAmJmUuY3RybEtleSYmdChlLmN1cnJlbnRUYXJnZXQpLnByZXYoKS50cmlnZ2VyKCJmb2N1cyIpfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zO3RoaXMuX3Byb2Nlc3NQYW5lbHMoKSxlLmFjdGl2ZT09PSExJiZlLmNvbGxhcHNpYmxlPT09ITB8fCF0aGlzLmhlYWRlcnMubGVuZ3RoPyhlLmFjdGl2ZT0hMSx0aGlzLmFjdGl2ZT10KCkpOmUuYWN0aXZlPT09ITE/dGhpcy5fYWN0aXZhdGUoMCk6dGhpcy5hY3RpdmUubGVuZ3RoJiYhdC5jb250YWlucyh0aGlzLmVsZW1lbnRbMF0sdGhpcy5hY3RpdmVbMF0pP3RoaXMuaGVhZGVycy5sZW5ndGg9PT10aGlzLmhlYWRlcnMuZmluZCgiLnVpLXN0YXRlLWRpc2FibGVkIikubGVuZ3RoPyhlLmFjdGl2ZT0hMSx0aGlzLmFjdGl2ZT10KCkpOnRoaXMuX2FjdGl2YXRlKE1hdGgubWF4KDAsZS5hY3RpdmUtMSkpOmUuYWN0aXZlPXRoaXMuaGVhZGVycy5pbmRleCh0aGlzLmFjdGl2ZSksdGhpcy5fZGVzdHJveUljb25zKCksdGhpcy5fcmVmcmVzaCgpfSxfcHJvY2Vzc1BhbmVsczpmdW5jdGlvbigpe3ZhciB0PXRoaXMuaGVhZGVycyxlPXRoaXMucGFuZWxzO3RoaXMuaGVhZGVycz10aGlzLmVsZW1lbnQuZmluZCh0aGlzLm9wdGlvbnMuaGVhZGVyKSx0aGlzLl9hZGRDbGFzcyh0aGlzLmhlYWRlcnMsInVpLWFjY29yZGlvbi1oZWFkZXIgdWktYWNjb3JkaW9uLWhlYWRlci1jb2xsYXBzZWQiLCJ1aS1zdGF0ZS1kZWZhdWx0IiksdGhpcy5wYW5lbHM9dGhpcy5oZWFkZXJzLm5leHQoKS5maWx0ZXIoIjpub3QoLnVpLWFjY29yZGlvbi1jb250ZW50LWFjdGl2ZSkiKS5oaWRlKCksdGhpcy5fYWRkQ2xhc3ModGhpcy5wYW5lbHMsInVpLWFjY29yZGlvbi1jb250ZW50IiwidWktaGVscGVyLXJlc2V0IHVpLXdpZGdldC1jb250ZW50IiksZSYmKHRoaXMuX29mZih0Lm5vdCh0aGlzLmhlYWRlcnMpKSx0aGlzLl9vZmYoZS5ub3QodGhpcy5wYW5lbHMpKSl9LF9yZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGUsaT10aGlzLm9wdGlvbnMscz1pLmhlaWdodFN0eWxlLG49dGhpcy5lbGVtZW50LnBhcmVudCgpO3RoaXMuYWN0aXZlPXRoaXMuX2ZpbmRBY3RpdmUoaS5hY3RpdmUpLHRoaXMuX2FkZENsYXNzKHRoaXMuYWN0aXZlLCJ1aS1hY2NvcmRpb24taGVhZGVyLWFjdGl2ZSIsInVpLXN0YXRlLWFjdGl2ZSIpLl9yZW1vdmVDbGFzcyh0aGlzLmFjdGl2ZSwidWktYWNjb3JkaW9uLWhlYWRlci1jb2xsYXBzZWQiKSx0aGlzLl9hZGRDbGFzcyh0aGlzLmFjdGl2ZS5uZXh0KCksInVpLWFjY29yZGlvbi1jb250ZW50LWFjdGl2ZSIpLHRoaXMuYWN0aXZlLm5leHQoKS5zaG93KCksdGhpcy5oZWFkZXJzLmF0dHIoInJvbGUiLCJ0YWIiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGU9dCh0aGlzKSxpPWUudW5pcXVlSWQoKS5hdHRyKCJpZCIpLHM9ZS5uZXh0KCksbj1zLnVuaXF1ZUlkKCkuYXR0cigiaWQiKTtlLmF0dHIoImFyaWEtY29udHJvbHMiLG4pLHMuYXR0cigiYXJpYS1sYWJlbGxlZGJ5IixpKX0pLm5leHQoKS5hdHRyKCJyb2xlIiwidGFicGFuZWwiKSx0aGlzLmhlYWRlcnMubm90KHRoaXMuYWN0aXZlKS5hdHRyKHsiYXJpYS1zZWxlY3RlZCI6ImZhbHNlIiwiYXJpYS1leHBhbmRlZCI6ImZhbHNlIix0YWJJbmRleDotMX0pLm5leHQoKS5hdHRyKHsiYXJpYS1oaWRkZW4iOiJ0cnVlIn0pLmhpZGUoKSx0aGlzLmFjdGl2ZS5sZW5ndGg/dGhpcy5hY3RpdmUuYXR0cih7ImFyaWEtc2VsZWN0ZWQiOiJ0cnVlIiwiYXJpYS1leHBhbmRlZCI6InRydWUiLHRhYkluZGV4OjB9KS5uZXh0KCkuYXR0cih7ImFyaWEtaGlkZGVuIjoiZmFsc2UifSk6dGhpcy5oZWFkZXJzLmVxKDApLmF0dHIoInRhYkluZGV4IiwwKSx0aGlzLl9jcmVhdGVJY29ucygpLHRoaXMuX3NldHVwRXZlbnRzKGkuZXZlbnQpLCJmaWxsIj09PXM/KGU9bi5oZWlnaHQoKSx0aGlzLmVsZW1lbnQuc2libGluZ3MoIjp2aXNpYmxlIikuZWFjaChmdW5jdGlvbigpe3ZhciBpPXQodGhpcykscz1pLmNzcygicG9zaXRpb24iKTsiYWJzb2x1dGUiIT09cyYmImZpeGVkIiE9PXMmJihlLT1pLm91dGVySGVpZ2h0KCEwKSl9KSx0aGlzLmhlYWRlcnMuZWFjaChmdW5jdGlvbigpe2UtPXQodGhpcykub3V0ZXJIZWlnaHQoITApfSksdGhpcy5oZWFkZXJzLm5leHQoKS5lYWNoKGZ1bmN0aW9uKCl7dCh0aGlzKS5oZWlnaHQoTWF0aC5tYXgoMCxlLXQodGhpcykuaW5uZXJIZWlnaHQoKSt0KHRoaXMpLmhlaWdodCgpKSl9KS5jc3MoIm92ZXJmbG93IiwiYXV0byIpKToiYXV0byI9PT1zJiYoZT0wLHRoaXMuaGVhZGVycy5uZXh0KCkuZWFjaChmdW5jdGlvbigpe3ZhciBpPXQodGhpcykuaXMoIjp2aXNpYmxlIik7aXx8dCh0aGlzKS5zaG93KCksZT1NYXRoLm1heChlLHQodGhpcykuY3NzKCJoZWlnaHQiLCIiKS5oZWlnaHQoKSksaXx8dCh0aGlzKS5oaWRlKCl9KS5oZWlnaHQoZSkpfSxfYWN0aXZhdGU6ZnVuY3Rpb24oZSl7dmFyIGk9dGhpcy5fZmluZEFjdGl2ZShlKVswXTtpIT09dGhpcy5hY3RpdmVbMF0mJihpPWl8fHRoaXMuYWN0aXZlWzBdLHRoaXMuX2V2ZW50SGFuZGxlcih7dGFyZ2V0OmksY3VycmVudFRhcmdldDppLHByZXZlbnREZWZhdWx0OnQubm9vcH0pKX0sX2ZpbmRBY3RpdmU6ZnVuY3Rpb24oZSl7cmV0dXJuIm51bWJlciI9PXR5cGVvZiBlP3RoaXMuaGVhZGVycy5lcShlKTp0KCl9LF9zZXR1cEV2ZW50czpmdW5jdGlvbihlKXt2YXIgaT17a2V5ZG93bjoiX2tleWRvd24ifTtlJiZ0LmVhY2goZS5zcGxpdCgiICIpLGZ1bmN0aW9uKHQsZSl7aVtlXT0iX2V2ZW50SGFuZGxlciJ9KSx0aGlzLl9vZmYodGhpcy5oZWFkZXJzLmFkZCh0aGlzLmhlYWRlcnMubmV4dCgpKSksdGhpcy5fb24odGhpcy5oZWFkZXJzLGkpLHRoaXMuX29uKHRoaXMuaGVhZGVycy5uZXh0KCkse2tleWRvd246Il9wYW5lbEtleURvd24ifSksdGhpcy5faG92ZXJhYmxlKHRoaXMuaGVhZGVycyksdGhpcy5fZm9jdXNhYmxlKHRoaXMuaGVhZGVycyl9LF9ldmVudEhhbmRsZXI6ZnVuY3Rpb24oZSl7dmFyIGkscyxuPXRoaXMub3B0aW9ucyxvPXRoaXMuYWN0aXZlLGE9dChlLmN1cnJlbnRUYXJnZXQpLHI9YVswXT09PW9bMF0saD1yJiZuLmNvbGxhcHNpYmxlLGw9aD90KCk6YS5uZXh0KCksYz1vLm5leHQoKSx1PXtvbGRIZWFkZXI6byxvbGRQYW5lbDpjLG5ld0hlYWRlcjpoP3QoKTphLG5ld1BhbmVsOmx9O2UucHJldmVudERlZmF1bHQoKSxyJiYhbi5jb2xsYXBzaWJsZXx8dGhpcy5fdHJpZ2dlcigiYmVmb3JlQWN0aXZhdGUiLGUsdSk9PT0hMXx8KG4uYWN0aXZlPWg/ITE6dGhpcy5oZWFkZXJzLmluZGV4KGEpLHRoaXMuYWN0aXZlPXI/dCgpOmEsdGhpcy5fdG9nZ2xlKHUpLHRoaXMuX3JlbW92ZUNsYXNzKG8sInVpLWFjY29yZGlvbi1oZWFkZXItYWN0aXZlIiwidWktc3RhdGUtYWN0aXZlIiksbi5pY29ucyYmKGk9by5jaGlsZHJlbigiLnVpLWFjY29yZGlvbi1oZWFkZXItaWNvbiIpLHRoaXMuX3JlbW92ZUNsYXNzKGksbnVsbCxuLmljb25zLmFjdGl2ZUhlYWRlcikuX2FkZENsYXNzKGksbnVsbCxuLmljb25zLmhlYWRlcikpLHJ8fCh0aGlzLl9yZW1vdmVDbGFzcyhhLCJ1aS1hY2NvcmRpb24taGVhZGVyLWNvbGxhcHNlZCIpLl9hZGRDbGFzcyhhLCJ1aS1hY2NvcmRpb24taGVhZGVyLWFjdGl2ZSIsInVpLXN0YXRlLWFjdGl2ZSIpLG4uaWNvbnMmJihzPWEuY2hpbGRyZW4oIi51aS1hY2NvcmRpb24taGVhZGVyLWljb24iKSx0aGlzLl9yZW1vdmVDbGFzcyhzLG51bGwsbi5pY29ucy5oZWFkZXIpLl9hZGRDbGFzcyhzLG51bGwsbi5pY29ucy5hY3RpdmVIZWFkZXIpKSx0aGlzLl9hZGRDbGFzcyhhLm5leHQoKSwidWktYWNjb3JkaW9uLWNvbnRlbnQtYWN0aXZlIikpKX0sX3RvZ2dsZTpmdW5jdGlvbihlKXt2YXIgaT1lLm5ld1BhbmVsLHM9dGhpcy5wcmV2U2hvdy5sZW5ndGg/dGhpcy5wcmV2U2hvdzplLm9sZFBhbmVsO3RoaXMucHJldlNob3cuYWRkKHRoaXMucHJldkhpZGUpLnN0b3AoITAsITApLHRoaXMucHJldlNob3c9aSx0aGlzLnByZXZIaWRlPXMsdGhpcy5vcHRpb25zLmFuaW1hdGU/dGhpcy5fYW5pbWF0ZShpLHMsZSk6KHMuaGlkZSgpLGkuc2hvdygpLHRoaXMuX3RvZ2dsZUNvbXBsZXRlKGUpKSxzLmF0dHIoeyJhcmlhLWhpZGRlbiI6InRydWUifSkscy5wcmV2KCkuYXR0cih7ImFyaWEtc2VsZWN0ZWQiOiJmYWxzZSIsImFyaWEtZXhwYW5kZWQiOiJmYWxzZSJ9KSxpLmxlbmd0aCYmcy5sZW5ndGg/cy5wcmV2KCkuYXR0cih7dGFiSW5kZXg6LTEsImFyaWEtZXhwYW5kZWQiOiJmYWxzZSJ9KTppLmxlbmd0aCYmdGhpcy5oZWFkZXJzLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiAwPT09cGFyc2VJbnQodCh0aGlzKS5hdHRyKCJ0YWJJbmRleCIpLDEwKX0pLmF0dHIoInRhYkluZGV4IiwtMSksaS5hdHRyKCJhcmlhLWhpZGRlbiIsImZhbHNlIikucHJldigpLmF0dHIoeyJhcmlhLXNlbGVjdGVkIjoidHJ1ZSIsImFyaWEtZXhwYW5kZWQiOiJ0cnVlIix0YWJJbmRleDowfSl9LF9hbmltYXRlOmZ1bmN0aW9uKHQsZSxpKXt2YXIgcyxuLG8sYT10aGlzLHI9MCxoPXQuY3NzKCJib3gtc2l6aW5nIiksbD10Lmxlbmd0aCYmKCFlLmxlbmd0aHx8dC5pbmRleCgpPGUuaW5kZXgoKSksYz10aGlzLm9wdGlvbnMuYW5pbWF0ZXx8e30sdT1sJiZjLmRvd258fGMsZD1mdW5jdGlvbigpe2EuX3RvZ2dsZUNvbXBsZXRlKGkpfTtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIHUmJihvPXUpLCJzdHJpbmciPT10eXBlb2YgdSYmKG49dSksbj1ufHx1LmVhc2luZ3x8Yy5lYXNpbmcsbz1vfHx1LmR1cmF0aW9ufHxjLmR1cmF0aW9uLGUubGVuZ3RoP3QubGVuZ3RoPyhzPXQuc2hvdygpLm91dGVySGVpZ2h0KCksZS5hbmltYXRlKHRoaXMuaGlkZVByb3BzLHtkdXJhdGlvbjpvLGVhc2luZzpuLHN0ZXA6ZnVuY3Rpb24odCxlKXtlLm5vdz1NYXRoLnJvdW5kKHQpfX0pLHQuaGlkZSgpLmFuaW1hdGUodGhpcy5zaG93UHJvcHMse2R1cmF0aW9uOm8sZWFzaW5nOm4sY29tcGxldGU6ZCxzdGVwOmZ1bmN0aW9uKHQsaSl7aS5ub3c9TWF0aC5yb3VuZCh0KSwiaGVpZ2h0IiE9PWkucHJvcD8iY29udGVudC1ib3giPT09aCYmKHIrPWkubm93KToiY29udGVudCIhPT1hLm9wdGlvbnMuaGVpZ2h0U3R5bGUmJihpLm5vdz1NYXRoLnJvdW5kKHMtZS5vdXRlckhlaWdodCgpLXIpLHI9MCl9fSksdm9pZCAwKTplLmFuaW1hdGUodGhpcy5oaWRlUHJvcHMsbyxuLGQpOnQuYW5pbWF0ZSh0aGlzLnNob3dQcm9wcyxvLG4sZCl9LF90b2dnbGVDb21wbGV0ZTpmdW5jdGlvbih0KXt2YXIgZT10Lm9sZFBhbmVsLGk9ZS5wcmV2KCk7dGhpcy5fcmVtb3ZlQ2xhc3MoZSwidWktYWNjb3JkaW9uLWNvbnRlbnQtYWN0aXZlIiksdGhpcy5fcmVtb3ZlQ2xhc3MoaSwidWktYWNjb3JkaW9uLWhlYWRlci1hY3RpdmUiKS5fYWRkQ2xhc3MoaSwidWktYWNjb3JkaW9uLWhlYWRlci1jb2xsYXBzZWQiKSxlLmxlbmd0aCYmKGUucGFyZW50KClbMF0uY2xhc3NOYW1lPWUucGFyZW50KClbMF0uY2xhc3NOYW1lKSx0aGlzLl90cmlnZ2VyKCJhY3RpdmF0ZSIsbnVsbCx0KX19KSx0LnVpLnNhZmVBY3RpdmVFbGVtZW50PWZ1bmN0aW9uKHQpe3ZhciBlO3RyeXtlPXQuYWN0aXZlRWxlbWVudH1jYXRjaChpKXtlPXQuYm9keX1yZXR1cm4gZXx8KGU9dC5ib2R5KSxlLm5vZGVOYW1lfHwoZT10LmJvZHkpLGV9LHQud2lkZ2V0KCJ1aS5tZW51Iix7dmVyc2lvbjoiMS4xMi4xIixkZWZhdWx0RWxlbWVudDoiPHVsPiIsZGVsYXk6MzAwLG9wdGlvbnM6e2ljb25zOntzdWJtZW51OiJ1aS1pY29uLWNhcmV0LTEtZSJ9LGl0ZW1zOiI+ICoiLG1lbnVzOiJ1bCIscG9zaXRpb246e215OiJsZWZ0IHRvcCIsYXQ6InJpZ2h0IHRvcCJ9LHJvbGU6Im1lbnUiLGJsdXI6bnVsbCxmb2N1czpudWxsLHNlbGVjdDpudWxsfSxfY3JlYXRlOmZ1bmN0aW9uKCl7dGhpcy5hY3RpdmVNZW51PXRoaXMuZWxlbWVudCx0aGlzLm1vdXNlSGFuZGxlZD0hMSx0aGlzLmVsZW1lbnQudW5pcXVlSWQoKS5hdHRyKHtyb2xlOnRoaXMub3B0aW9ucy5yb2xlLHRhYkluZGV4OjB9KSx0aGlzLl9hZGRDbGFzcygidWktbWVudSIsInVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCIpLHRoaXMuX29uKHsibW91c2Vkb3duIC51aS1tZW51LWl0ZW0iOmZ1bmN0aW9uKHQpe3QucHJldmVudERlZmF1bHQoKX0sImNsaWNrIC51aS1tZW51LWl0ZW0iOmZ1bmN0aW9uKGUpe3ZhciBpPXQoZS50YXJnZXQpLHM9dCh0LnVpLnNhZmVBY3RpdmVFbGVtZW50KHRoaXMuZG9jdW1lbnRbMF0pKTshdGhpcy5tb3VzZUhhbmRsZWQmJmkubm90KCIudWktc3RhdGUtZGlzYWJsZWQiKS5sZW5ndGgmJih0aGlzLnNlbGVjdChlKSxlLmlzUHJvcGFnYXRpb25TdG9wcGVkKCl8fCh0aGlzLm1vdXNlSGFuZGxlZD0hMCksaS5oYXMoIi51aS1tZW51IikubGVuZ3RoP3RoaXMuZXhwYW5kKGUpOiF0aGlzLmVsZW1lbnQuaXMoIjpmb2N1cyIpJiZzLmNsb3Nlc3QoIi51aS1tZW51IikubGVuZ3RoJiYodGhpcy5lbGVtZW50LnRyaWdnZXIoImZvY3VzIixbITBdKSx0aGlzLmFjdGl2ZSYmMT09PXRoaXMuYWN0aXZlLnBhcmVudHMoIi51aS1tZW51IikubGVuZ3RoJiZjbGVhclRpbWVvdXQodGhpcy50aW1lcikpKX0sIm1vdXNlZW50ZXIgLnVpLW1lbnUtaXRlbSI6ZnVuY3Rpb24oZSl7aWYoIXRoaXMucHJldmlvdXNGaWx0ZXIpe3ZhciBpPXQoZS50YXJnZXQpLmNsb3Nlc3QoIi51aS1tZW51LWl0ZW0iKSxzPXQoZS5jdXJyZW50VGFyZ2V0KTtpWzBdPT09c1swXSYmKHRoaXMuX3JlbW92ZUNsYXNzKHMuc2libGluZ3MoKS5jaGlsZHJlbigiLnVpLXN0YXRlLWFjdGl2ZSIpLG51bGwsInVpLXN0YXRlLWFjdGl2ZSIpLHRoaXMuZm9jdXMoZSxzKSl9fSxtb3VzZWxlYXZlOiJjb2xsYXBzZUFsbCIsIm1vdXNlbGVhdmUgLnVpLW1lbnUiOiJjb2xsYXBzZUFsbCIsZm9jdXM6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLmFjdGl2ZXx8dGhpcy5lbGVtZW50LmZpbmQodGhpcy5vcHRpb25zLml0ZW1zKS5lcSgwKTtlfHx0aGlzLmZvY3VzKHQsaSl9LGJsdXI6ZnVuY3Rpb24oZSl7dGhpcy5fZGVsYXkoZnVuY3Rpb24oKXt2YXIgaT0hdC5jb250YWlucyh0aGlzLmVsZW1lbnRbMF0sdC51aS5zYWZlQWN0aXZlRWxlbWVudCh0aGlzLmRvY3VtZW50WzBdKSk7aSYmdGhpcy5jb2xsYXBzZUFsbChlKX0pfSxrZXlkb3duOiJfa2V5ZG93biJ9KSx0aGlzLnJlZnJlc2goKSx0aGlzLl9vbih0aGlzLmRvY3VtZW50LHtjbGljazpmdW5jdGlvbih0KXt0aGlzLl9jbG9zZU9uRG9jdW1lbnRDbGljayh0KSYmdGhpcy5jb2xsYXBzZUFsbCh0KSx0aGlzLm1vdXNlSGFuZGxlZD0hMX19KX0sX2Rlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmVsZW1lbnQuZmluZCgiLnVpLW1lbnUtaXRlbSIpLnJlbW92ZUF0dHIoInJvbGUgYXJpYS1kaXNhYmxlZCIpLGk9ZS5jaGlsZHJlbigiLnVpLW1lbnUtaXRlbS13cmFwcGVyIikucmVtb3ZlVW5pcXVlSWQoKS5yZW1vdmVBdHRyKCJ0YWJJbmRleCByb2xlIGFyaWEtaGFzcG9wdXAiKTt0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cigiYXJpYS1hY3RpdmVkZXNjZW5kYW50IikuZmluZCgiLnVpLW1lbnUiKS5hZGRCYWNrKCkucmVtb3ZlQXR0cigicm9sZSBhcmlhLWxhYmVsbGVkYnkgYXJpYS1leHBhbmRlZCBhcmlhLWhpZGRlbiBhcmlhLWRpc2FibGVkIHRhYkluZGV4IikucmVtb3ZlVW5pcXVlSWQoKS5zaG93KCksaS5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oKXt2YXIgZT10KHRoaXMpO2UuZGF0YSgidWktbWVudS1zdWJtZW51LWNhcmV0IikmJmUucmVtb3ZlKCl9KX0sX2tleWRvd246ZnVuY3Rpb24oZSl7dmFyIGkscyxuLG8sYT0hMDtzd2l0Y2goZS5rZXlDb2RlKXtjYXNlIHQudWkua2V5Q29kZS5QQUdFX1VQOnRoaXMucHJldmlvdXNQYWdlKGUpO2JyZWFrO2Nhc2UgdC51aS5rZXlDb2RlLlBBR0VfRE9XTjp0aGlzLm5leHRQYWdlKGUpO2JyZWFrO2Nhc2UgdC51aS5rZXlDb2RlLkhPTUU6dGhpcy5fbW92ZSgiZmlyc3QiLCJmaXJzdCIsZSk7YnJlYWs7Y2FzZSB0LnVpLmtleUNvZGUuRU5EOnRoaXMuX21vdmUoImxhc3QiLCJsYXN0IixlKTticmVhaztjYXNlIHQudWkua2V5Q29kZS5VUDp0aGlzLnByZXZpb3VzKGUpO2JyZWFrO2Nhc2UgdC51aS5rZXlDb2RlLkRPV046dGhpcy5uZXh0KGUpO2JyZWFrO2Nhc2UgdC51aS5rZXlDb2RlLkxFRlQ6dGhpcy5jb2xsYXBzZShlKTticmVhaztjYXNlIHQudWkua2V5Q29kZS5SSUdIVDp0aGlzLmFjdGl2ZSYmIXRoaXMuYWN0aXZlLmlzKCIudWktc3RhdGUtZGlzYWJsZWQiKSYmdGhpcy5leHBhbmQoZSk7YnJlYWs7Y2FzZSB0LnVpLmtleUNvZGUuRU5URVI6Y2FzZSB0LnVpLmtleUNvZGUuU1BBQ0U6dGhpcy5fYWN0aXZhdGUoZSk7YnJlYWs7Y2FzZSB0LnVpLmtleUNvZGUuRVNDQVBFOnRoaXMuY29sbGFwc2UoZSk7YnJlYWs7ZGVmYXVsdDphPSExLHM9dGhpcy5wcmV2aW91c0ZpbHRlcnx8IiIsbz0hMSxuPWUua2V5Q29kZT49OTYmJjEwNT49ZS5rZXlDb2RlPyIiKyhlLmtleUNvZGUtOTYpOlN0cmluZy5mcm9tQ2hhckNvZGUoZS5rZXlDb2RlKSxjbGVhclRpbWVvdXQodGhpcy5maWx0ZXJUaW1lciksbj09PXM/bz0hMDpuPXMrbixpPXRoaXMuX2ZpbHRlck1lbnVJdGVtcyhuKSxpPW8mJi0xIT09aS5pbmRleCh0aGlzLmFjdGl2ZS5uZXh0KCkpP3RoaXMuYWN0aXZlLm5leHRBbGwoIi51aS1tZW51LWl0ZW0iKTppLGkubGVuZ3RofHwobj1TdHJpbmcuZnJvbUNoYXJDb2RlKGUua2V5Q29kZSksaT10aGlzLl9maWx0ZXJNZW51SXRlbXMobikpLGkubGVuZ3RoPyh0aGlzLmZvY3VzKGUsaSksdGhpcy5wcmV2aW91c0ZpbHRlcj1uLHRoaXMuZmlsdGVyVGltZXI9dGhpcy5fZGVsYXkoZnVuY3Rpb24oKXtkZWxldGUgdGhpcy5wcmV2aW91c0ZpbHRlcn0sMWUzKSk6ZGVsZXRlIHRoaXMucHJldmlvdXNGaWx0ZXJ9YSYmZS5wcmV2ZW50RGVmYXVsdCgpfSxfYWN0aXZhdGU6ZnVuY3Rpb24odCl7dGhpcy5hY3RpdmUmJiF0aGlzLmFjdGl2ZS5pcygiLnVpLXN0YXRlLWRpc2FibGVkIikmJih0aGlzLmFjdGl2ZS5jaGlsZHJlbigiW2FyaWEtaGFzcG9wdXA9J3RydWUnXSIpLmxlbmd0aD90aGlzLmV4cGFuZCh0KTp0aGlzLnNlbGVjdCh0KSl9LHJlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgZSxpLHMsbixvLGE9dGhpcyxyPXRoaXMub3B0aW9ucy5pY29ucy5zdWJtZW51LGg9dGhpcy5lbGVtZW50LmZpbmQodGhpcy5vcHRpb25zLm1lbnVzKTt0aGlzLl90b2dnbGVDbGFzcygidWktbWVudS1pY29ucyIsbnVsbCwhIXRoaXMuZWxlbWVudC5maW5kKCIudWktaWNvbiIpLmxlbmd0aCkscz1oLmZpbHRlcigiOm5vdCgudWktbWVudSkiKS5oaWRlKCkuYXR0cih7cm9sZTp0aGlzLm9wdGlvbnMucm9sZSwiYXJpYS1oaWRkZW4iOiJ0cnVlIiwiYXJpYS1leHBhbmRlZCI6ImZhbHNlIn0pLmVhY2goZnVuY3Rpb24oKXt2YXIgZT10KHRoaXMpLGk9ZS5wcmV2KCkscz10KCI8c3Bhbj4iKS5kYXRhKCJ1aS1tZW51LXN1Ym1lbnUtY2FyZXQiLCEwKTthLl9hZGRDbGFzcyhzLCJ1aS1tZW51LWljb24iLCJ1aS1pY29uICIrciksaS5hdHRyKCJhcmlhLWhhc3BvcHVwIiwidHJ1ZSIpLnByZXBlbmQocyksZS5hdHRyKCJhcmlhLWxhYmVsbGVkYnkiLGkuYXR0cigiaWQiKSl9KSx0aGlzLl9hZGRDbGFzcyhzLCJ1aS1tZW51IiwidWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWZyb250IiksZT1oLmFkZCh0aGlzLmVsZW1lbnQpLGk9ZS5maW5kKHRoaXMub3B0aW9ucy5pdGVtcyksaS5ub3QoIi51aS1tZW51LWl0ZW0iKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGU9dCh0aGlzKTthLl9pc0RpdmlkZXIoZSkmJmEuX2FkZENsYXNzKGUsInVpLW1lbnUtZGl2aWRlciIsInVpLXdpZGdldC1jb250ZW50Iil9KSxuPWkubm90KCIudWktbWVudS1pdGVtLCAudWktbWVudS1kaXZpZGVyIiksbz1uLmNoaWxkcmVuKCkubm90KCIudWktbWVudSIpLnVuaXF1ZUlkKCkuYXR0cih7dGFiSW5kZXg6LTEscm9sZTp0aGlzLl9pdGVtUm9sZSgpfSksdGhpcy5fYWRkQ2xhc3MobiwidWktbWVudS1pdGVtIikuX2FkZENsYXNzKG8sInVpLW1lbnUtaXRlbS13cmFwcGVyIiksaS5maWx0ZXIoIi51aS1zdGF0ZS1kaXNhYmxlZCIpLmF0dHIoImFyaWEtZGlzYWJsZWQiLCJ0cnVlIiksdGhpcy5hY3RpdmUmJiF0LmNvbnRhaW5zKHRoaXMuZWxlbWVudFswXSx0aGlzLmFjdGl2ZVswXSkmJnRoaXMuYmx1cigpfSxfaXRlbVJvbGU6ZnVuY3Rpb24oKXtyZXR1cm57bWVudToibWVudWl0ZW0iLGxpc3Rib3g6Im9wdGlvbiJ9W3RoaXMub3B0aW9ucy5yb2xlXX0sX3NldE9wdGlvbjpmdW5jdGlvbih0LGUpe2lmKCJpY29ucyI9PT10KXt2YXIgaT10aGlzLmVsZW1lbnQuZmluZCgiLnVpLW1lbnUtaWNvbiIpO3RoaXMuX3JlbW92ZUNsYXNzKGksbnVsbCx0aGlzLm9wdGlvbnMuaWNvbnMuc3VibWVudSkuX2FkZENsYXNzKGksbnVsbCxlLnN1Ym1lbnUpfXRoaXMuX3N1cGVyKHQsZSl9LF9zZXRPcHRpb25EaXNhYmxlZDpmdW5jdGlvbih0KXt0aGlzLl9zdXBlcih0KSx0aGlzLmVsZW1lbnQuYXR0cigiYXJpYS1kaXNhYmxlZCIsdCsiIiksdGhpcy5fdG9nZ2xlQ2xhc3MobnVsbCwidWktc3RhdGUtZGlzYWJsZWQiLCEhdCl9LGZvY3VzOmZ1bmN0aW9uKHQsZSl7dmFyIGkscyxuO3RoaXMuYmx1cih0LHQmJiJmb2N1cyI9PT10LnR5cGUpLHRoaXMuX3Njcm9sbEludG9WaWV3KGUpLHRoaXMuYWN0aXZlPWUuZmlyc3QoKSxzPXRoaXMuYWN0aXZlLmNoaWxkcmVuKCIudWktbWVudS1pdGVtLXdyYXBwZXIiKSx0aGlzLl9hZGRDbGFzcyhzLG51bGwsInVpLXN0YXRlLWFjdGl2ZSIpLHRoaXMub3B0aW9ucy5yb2xlJiZ0aGlzLmVsZW1lbnQuYXR0cigiYXJpYS1hY3RpdmVkZXNjZW5kYW50IixzLmF0dHIoImlkIikpLG49dGhpcy5hY3RpdmUucGFyZW50KCkuY2xvc2VzdCgiLnVpLW1lbnUtaXRlbSIpLmNoaWxkcmVuKCIudWktbWVudS1pdGVtLXdyYXBwZXIiKSx0aGlzLl9hZGRDbGFzcyhuLG51bGwsInVpLXN0YXRlLWFjdGl2ZSIpLHQmJiJrZXlkb3duIj09PXQudHlwZT90aGlzLl9jbG9zZSgpOnRoaXMudGltZXI9dGhpcy5fZGVsYXkoZnVuY3Rpb24oKXt0aGlzLl9jbG9zZSgpfSx0aGlzLmRlbGF5KSxpPWUuY2hpbGRyZW4oIi51aS1tZW51IiksaS5sZW5ndGgmJnQmJi9ebW91c2UvLnRlc3QodC50eXBlKSYmdGhpcy5fc3RhcnRPcGVuaW5nKGkpLHRoaXMuYWN0aXZlTWVudT1lLnBhcmVudCgpLHRoaXMuX3RyaWdnZXIoImZvY3VzIix0LHtpdGVtOmV9KX0sX3Njcm9sbEludG9WaWV3OmZ1bmN0aW9uKGUpe3ZhciBpLHMsbixvLGEscjt0aGlzLl9oYXNTY3JvbGwoKSYmKGk9cGFyc2VGbG9hdCh0LmNzcyh0aGlzLmFjdGl2ZU1lbnVbMF0sImJvcmRlclRvcFdpZHRoIikpfHwwLHM9cGFyc2VGbG9hdCh0LmNzcyh0aGlzLmFjdGl2ZU1lbnVbMF0sInBhZGRpbmdUb3AiKSl8fDAsbj1lLm9mZnNldCgpLnRvcC10aGlzLmFjdGl2ZU1lbnUub2Zmc2V0KCkudG9wLWktcyxvPXRoaXMuYWN0aXZlTWVudS5zY3JvbGxUb3AoKSxhPXRoaXMuYWN0aXZlTWVudS5oZWlnaHQoKSxyPWUub3V0ZXJIZWlnaHQoKSwwPm4/dGhpcy5hY3RpdmVNZW51LnNjcm9sbFRvcChvK24pOm4rcj5hJiZ0aGlzLmFjdGl2ZU1lbnUuc2Nyb2xsVG9wKG8rbi1hK3IpKX0sYmx1cjpmdW5jdGlvbih0LGUpe2V8fGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKSx0aGlzLmFjdGl2ZSYmKHRoaXMuX3JlbW92ZUNsYXNzKHRoaXMuYWN0aXZlLmNoaWxkcmVuKCIudWktbWVudS1pdGVtLXdyYXBwZXIiKSxudWxsLCJ1aS1zdGF0ZS1hY3RpdmUiKSx0aGlzLl90cmlnZ2VyKCJibHVyIix0LHtpdGVtOnRoaXMuYWN0aXZlfSksdGhpcy5hY3RpdmU9bnVsbCl9LF9zdGFydE9wZW5pbmc6ZnVuY3Rpb24odCl7Y2xlYXJUaW1lb3V0KHRoaXMudGltZXIpLCJ0cnVlIj09PXQuYXR0cigiYXJpYS1oaWRkZW4iKSYmKHRoaXMudGltZXI9dGhpcy5fZGVsYXkoZnVuY3Rpb24oKXt0aGlzLl9jbG9zZSgpLHRoaXMuX29wZW4odCl9LHRoaXMuZGVsYXkpKX0sX29wZW46ZnVuY3Rpb24oZSl7dmFyIGk9dC5leHRlbmQoe29mOnRoaXMuYWN0aXZlfSx0aGlzLm9wdGlvbnMucG9zaXRpb24pO2NsZWFyVGltZW91dCh0aGlzLnRpbWVyKSx0aGlzLmVsZW1lbnQuZmluZCgiLnVpLW1lbnUiKS5ub3QoZS5wYXJlbnRzKCIudWktbWVudSIpKS5oaWRlKCkuYXR0cigiYXJpYS1oaWRkZW4iLCJ0cnVlIiksZS5zaG93KCkucmVtb3ZlQXR0cigiYXJpYS1oaWRkZW4iKS5hdHRyKCJhcmlhLWV4cGFuZGVkIiwidHJ1ZSIpLnBvc2l0aW9uKGkpfSxjb2xsYXBzZUFsbDpmdW5jdGlvbihlLGkpe2NsZWFyVGltZW91dCh0aGlzLnRpbWVyKSx0aGlzLnRpbWVyPXRoaXMuX2RlbGF5KGZ1bmN0aW9uKCl7dmFyIHM9aT90aGlzLmVsZW1lbnQ6dChlJiZlLnRhcmdldCkuY2xvc2VzdCh0aGlzLmVsZW1lbnQuZmluZCgiLnVpLW1lbnUiKSk7cy5sZW5ndGh8fChzPXRoaXMuZWxlbWVudCksdGhpcy5fY2xvc2UocyksdGhpcy5ibHVyKGUpLHRoaXMuX3JlbW92ZUNsYXNzKHMuZmluZCgiLnVpLXN0YXRlLWFjdGl2ZSIpLG51bGwsInVpLXN0YXRlLWFjdGl2ZSIpLHRoaXMuYWN0aXZlTWVudT1zfSx0aGlzLmRlbGF5KX0sX2Nsb3NlOmZ1bmN0aW9uKHQpe3R8fCh0PXRoaXMuYWN0aXZlP3RoaXMuYWN0aXZlLnBhcmVudCgpOnRoaXMuZWxlbWVudCksdC5maW5kKCIudWktbWVudSIpLmhpZGUoKS5hdHRyKCJhcmlhLWhpZGRlbiIsInRydWUiKS5hdHRyKCJhcmlhLWV4cGFuZGVkIiwiZmFsc2UiKX0sX2Nsb3NlT25Eb2N1bWVudENsaWNrOmZ1bmN0aW9uKGUpe3JldHVybiF0KGUudGFyZ2V0KS5jbG9zZXN0KCIudWktbWVudSIpLmxlbmd0aH0sX2lzRGl2aWRlcjpmdW5jdGlvbih0KXtyZXR1cm4hL1teXC1cdTIwMTRcdTIwMTNcc10vLnRlc3QodC50ZXh0KCkpfSxjb2xsYXBzZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmFjdGl2ZSYmdGhpcy5hY3RpdmUucGFyZW50KCkuY2xvc2VzdCgiLnVpLW1lbnUtaXRlbSIsdGhpcy5lbGVtZW50KTtlJiZlLmxlbmd0aCYmKHRoaXMuX2Nsb3NlKCksdGhpcy5mb2N1cyh0LGUpKX0sZXhwYW5kOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuYWN0aXZlJiZ0aGlzLmFjdGl2ZS5jaGlsZHJlbigiLnVpLW1lbnUgIikuZmluZCh0aGlzLm9wdGlvbnMuaXRlbXMpLmZpcnN0KCk7ZSYmZS5sZW5ndGgmJih0aGlzLl9vcGVuKGUucGFyZW50KCkpLHRoaXMuX2RlbGF5KGZ1bmN0aW9uKCl7dGhpcy5mb2N1cyh0LGUpfSkpfSxuZXh0OmZ1bmN0aW9uKHQpe3RoaXMuX21vdmUoIm5leHQiLCJmaXJzdCIsdCl9LHByZXZpb3VzOmZ1bmN0aW9uKHQpe3RoaXMuX21vdmUoInByZXYiLCJsYXN0Iix0KX0saXNGaXJzdEl0ZW06ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hY3RpdmUmJiF0aGlzLmFjdGl2ZS5wcmV2QWxsKCIudWktbWVudS1pdGVtIikubGVuZ3RofSxpc0xhc3RJdGVtOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWN0aXZlJiYhdGhpcy5hY3RpdmUubmV4dEFsbCgiLnVpLW1lbnUtaXRlbSIpLmxlbmd0aH0sX21vdmU6ZnVuY3Rpb24odCxlLGkpe3ZhciBzO3RoaXMuYWN0aXZlJiYocz0iZmlyc3QiPT09dHx8Imxhc3QiPT09dD90aGlzLmFjdGl2ZVsiZmlyc3QiPT09dD8icHJldkFsbCI6Im5leHRBbGwiXSgiLnVpLW1lbnUtaXRlbSIpLmVxKC0xKTp0aGlzLmFjdGl2ZVt0KyJBbGwiXSgiLnVpLW1lbnUtaXRlbSIpLmVxKDApKSxzJiZzLmxlbmd0aCYmdGhpcy5hY3RpdmV8fChzPXRoaXMuYWN0aXZlTWVudS5maW5kKHRoaXMub3B0aW9ucy5pdGVtcylbZV0oKSksdGhpcy5mb2N1cyhpLHMpfSxuZXh0UGFnZTpmdW5jdGlvbihlKXt2YXIgaSxzLG47cmV0dXJuIHRoaXMuYWN0aXZlPyh0aGlzLmlzTGFzdEl0ZW0oKXx8KHRoaXMuX2hhc1Njcm9sbCgpPyhzPXRoaXMuYWN0aXZlLm9mZnNldCgpLnRvcCxuPXRoaXMuZWxlbWVudC5oZWlnaHQoKSx0aGlzLmFjdGl2ZS5uZXh0QWxsKCIudWktbWVudS1pdGVtIikuZWFjaChmdW5jdGlvbigpe3JldHVybiBpPXQodGhpcyksMD5pLm9mZnNldCgpLnRvcC1zLW59KSx0aGlzLmZvY3VzKGUsaSkpOnRoaXMuZm9jdXMoZSx0aGlzLmFjdGl2ZU1lbnUuZmluZCh0aGlzLm9wdGlvbnMuaXRlbXMpW3RoaXMuYWN0aXZlPyJsYXN0IjoiZmlyc3QiXSgpKSksdm9pZCAwKToodGhpcy5uZXh0KGUpLHZvaWQgMCl9LHByZXZpb3VzUGFnZTpmdW5jdGlvbihlKXt2YXIgaSxzLG47cmV0dXJuIHRoaXMuYWN0aXZlPyh0aGlzLmlzRmlyc3RJdGVtKCl8fCh0aGlzLl9oYXNTY3JvbGwoKT8ocz10aGlzLmFjdGl2ZS5vZmZzZXQoKS50b3Asbj10aGlzLmVsZW1lbnQuaGVpZ2h0KCksdGhpcy5hY3RpdmUucHJldkFsbCgiLnVpLW1lbnUtaXRlbSIpLmVhY2goZnVuY3Rpb24oKXtyZXR1cm4gaT10KHRoaXMpLGkub2Zmc2V0KCkudG9wLXMrbj4wfSksdGhpcy5mb2N1cyhlLGkpKTp0aGlzLmZvY3VzKGUsdGhpcy5hY3RpdmVNZW51LmZpbmQodGhpcy5vcHRpb25zLml0ZW1zKS5maXJzdCgpKSksdm9pZCAwKToodGhpcy5uZXh0KGUpLHZvaWQgMCl9LF9oYXNTY3JvbGw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbGVtZW50Lm91dGVySGVpZ2h0KCk8dGhpcy5lbGVtZW50LnByb3AoInNjcm9sbEhlaWdodCIpfSxzZWxlY3Q6ZnVuY3Rpb24oZSl7dGhpcy5hY3RpdmU9dGhpcy5hY3RpdmV8fHQoZS50YXJnZXQpLmNsb3Nlc3QoIi51aS1tZW51LWl0ZW0iKTt2YXIgaT17aXRlbTp0aGlzLmFjdGl2ZX07dGhpcy5hY3RpdmUuaGFzKCIudWktbWVudSIpLmxlbmd0aHx8dGhpcy5jb2xsYXBzZUFsbChlLCEwKSx0aGlzLl90cmlnZ2VyKCJzZWxlY3QiLGUsaSl9LF9maWx0ZXJNZW51SXRlbXM6ZnVuY3Rpb24oZSl7dmFyIGk9ZS5yZXBsYWNlKC9bXC1cW1xde30oKSorPy4sXFxcXiR8I1xzXS9nLCJcXCQmIikscz1SZWdFeHAoIl4iK2ksImkiKTtyZXR1cm4gdGhpcy5hY3RpdmVNZW51LmZpbmQodGhpcy5vcHRpb25zLml0ZW1zKS5maWx0ZXIoIi51aS1tZW51LWl0ZW0iKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gcy50ZXN0KHQudHJpbSh0KHRoaXMpLmNoaWxkcmVuKCIudWktbWVudS1pdGVtLXdyYXBwZXIiKS50ZXh0KCkpKX0pfX0pLHQud2lkZ2V0KCJ1aS5hdXRvY29tcGxldGUiLHt2ZXJzaW9uOiIxLjEyLjEiLGRlZmF1bHRFbGVtZW50OiI8aW5wdXQ+IixvcHRpb25zOnthcHBlbmRUbzpudWxsLGF1dG9Gb2N1czohMSxkZWxheTozMDAsbWluTGVuZ3RoOjEscG9zaXRpb246e215OiJsZWZ0IHRvcCIsYXQ6ImxlZnQgYm90dG9tIixjb2xsaXNpb246Im5vbmUifSxzb3VyY2U6bnVsbCxjaGFuZ2U6bnVsbCxjbG9zZTpudWxsLGZvY3VzOm51bGwsb3BlbjpudWxsLHJlc3BvbnNlOm51bGwsc2VhcmNoOm51bGwsc2VsZWN0Om51bGx9LHJlcXVlc3RJbmRleDowLHBlbmRpbmc6MCxfY3JlYXRlOmZ1bmN0aW9uKCl7dmFyIGUsaSxzLG49dGhpcy5lbGVtZW50WzBdLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksbz0idGV4dGFyZWEiPT09bixhPSJpbnB1dCI9PT1uOwogICAgdGhpcy5pc011bHRpTGluZT1vfHwhYSYmdGhpcy5faXNDb250ZW50RWRpdGFibGUodGhpcy5lbGVtZW50KSx0aGlzLnZhbHVlTWV0aG9kPXRoaXMuZWxlbWVudFtvfHxhPyJ2YWwiOiJ0ZXh0Il0sdGhpcy5pc05ld01lbnU9ITAsdGhpcy5fYWRkQ2xhc3MoInVpLWF1dG9jb21wbGV0ZS1pbnB1dCIpLHRoaXMuZWxlbWVudC5hdHRyKCJhdXRvY29tcGxldGUiLCJvZmYiKSx0aGlzLl9vbih0aGlzLmVsZW1lbnQse2tleWRvd246ZnVuY3Rpb24obil7aWYodGhpcy5lbGVtZW50LnByb3AoInJlYWRPbmx5IikpcmV0dXJuIGU9ITAscz0hMCxpPSEwLHZvaWQgMDtlPSExLHM9ITEsaT0hMTt2YXIgbz10LnVpLmtleUNvZGU7c3dpdGNoKG4ua2V5Q29kZSl7Y2FzZSBvLlBBR0VfVVA6ZT0hMCx0aGlzLl9tb3ZlKCJwcmV2aW91c1BhZ2UiLG4pO2JyZWFrO2Nhc2Ugby5QQUdFX0RPV046ZT0hMCx0aGlzLl9tb3ZlKCJuZXh0UGFnZSIsbik7YnJlYWs7Y2FzZSBvLlVQOmU9ITAsdGhpcy5fa2V5RXZlbnQoInByZXZpb3VzIixuKTticmVhaztjYXNlIG8uRE9XTjplPSEwLHRoaXMuX2tleUV2ZW50KCJuZXh0IixuKTticmVhaztjYXNlIG8uRU5URVI6dGhpcy5tZW51LmFjdGl2ZSYmKGU9ITAsbi5wcmV2ZW50RGVmYXVsdCgpLHRoaXMubWVudS5zZWxlY3QobikpO2JyZWFrO2Nhc2Ugby5UQUI6dGhpcy5tZW51LmFjdGl2ZSYmdGhpcy5tZW51LnNlbGVjdChuKTticmVhaztjYXNlIG8uRVNDQVBFOnRoaXMubWVudS5lbGVtZW50LmlzKCI6dmlzaWJsZSIpJiYodGhpcy5pc011bHRpTGluZXx8dGhpcy5fdmFsdWUodGhpcy50ZXJtKSx0aGlzLmNsb3NlKG4pLG4ucHJldmVudERlZmF1bHQoKSk7YnJlYWs7ZGVmYXVsdDppPSEwLHRoaXMuX3NlYXJjaFRpbWVvdXQobil9fSxrZXlwcmVzczpmdW5jdGlvbihzKXtpZihlKXJldHVybiBlPSExLCghdGhpcy5pc011bHRpTGluZXx8dGhpcy5tZW51LmVsZW1lbnQuaXMoIjp2aXNpYmxlIikpJiZzLnByZXZlbnREZWZhdWx0KCksdm9pZCAwO2lmKCFpKXt2YXIgbj10LnVpLmtleUNvZGU7c3dpdGNoKHMua2V5Q29kZSl7Y2FzZSBuLlBBR0VfVVA6dGhpcy5fbW92ZSgicHJldmlvdXNQYWdlIixzKTticmVhaztjYXNlIG4uUEFHRV9ET1dOOnRoaXMuX21vdmUoIm5leHRQYWdlIixzKTticmVhaztjYXNlIG4uVVA6dGhpcy5fa2V5RXZlbnQoInByZXZpb3VzIixzKTticmVhaztjYXNlIG4uRE9XTjp0aGlzLl9rZXlFdmVudCgibmV4dCIscyl9fX0saW5wdXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHM/KHM9ITEsdC5wcmV2ZW50RGVmYXVsdCgpLHZvaWQgMCk6KHRoaXMuX3NlYXJjaFRpbWVvdXQodCksdm9pZCAwKX0sZm9jdXM6ZnVuY3Rpb24oKXt0aGlzLnNlbGVjdGVkSXRlbT1udWxsLHRoaXMucHJldmlvdXM9dGhpcy5fdmFsdWUoKX0sYmx1cjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jYW5jZWxCbHVyPyhkZWxldGUgdGhpcy5jYW5jZWxCbHVyLHZvaWQgMCk6KGNsZWFyVGltZW91dCh0aGlzLnNlYXJjaGluZyksdGhpcy5jbG9zZSh0KSx0aGlzLl9jaGFuZ2UodCksdm9pZCAwKX19KSx0aGlzLl9pbml0U291cmNlKCksdGhpcy5tZW51PXQoIjx1bD4iKS5hcHBlbmRUbyh0aGlzLl9hcHBlbmRUbygpKS5tZW51KHtyb2xlOm51bGx9KS5oaWRlKCkubWVudSgiaW5zdGFuY2UiKSx0aGlzLl9hZGRDbGFzcyh0aGlzLm1lbnUuZWxlbWVudCwidWktYXV0b2NvbXBsZXRlIiwidWktZnJvbnQiKSx0aGlzLl9vbih0aGlzLm1lbnUuZWxlbWVudCx7bW91c2Vkb3duOmZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSx0aGlzLmNhbmNlbEJsdXI9ITAsdGhpcy5fZGVsYXkoZnVuY3Rpb24oKXtkZWxldGUgdGhpcy5jYW5jZWxCbHVyLHRoaXMuZWxlbWVudFswXSE9PXQudWkuc2FmZUFjdGl2ZUVsZW1lbnQodGhpcy5kb2N1bWVudFswXSkmJnRoaXMuZWxlbWVudC50cmlnZ2VyKCJmb2N1cyIpfSl9LG1lbnVmb2N1czpmdW5jdGlvbihlLGkpe3ZhciBzLG47cmV0dXJuIHRoaXMuaXNOZXdNZW51JiYodGhpcy5pc05ld01lbnU9ITEsZS5vcmlnaW5hbEV2ZW50JiYvXm1vdXNlLy50ZXN0KGUub3JpZ2luYWxFdmVudC50eXBlKSk/KHRoaXMubWVudS5ibHVyKCksdGhpcy5kb2N1bWVudC5vbmUoIm1vdXNlbW92ZSIsZnVuY3Rpb24oKXt0KGUudGFyZ2V0KS50cmlnZ2VyKGUub3JpZ2luYWxFdmVudCl9KSx2b2lkIDApOihuPWkuaXRlbS5kYXRhKCJ1aS1hdXRvY29tcGxldGUtaXRlbSIpLCExIT09dGhpcy5fdHJpZ2dlcigiZm9jdXMiLGUse2l0ZW06bn0pJiZlLm9yaWdpbmFsRXZlbnQmJi9ea2V5Ly50ZXN0KGUub3JpZ2luYWxFdmVudC50eXBlKSYmdGhpcy5fdmFsdWUobi52YWx1ZSkscz1pLml0ZW0uYXR0cigiYXJpYS1sYWJlbCIpfHxuLnZhbHVlLHMmJnQudHJpbShzKS5sZW5ndGgmJih0aGlzLmxpdmVSZWdpb24uY2hpbGRyZW4oKS5oaWRlKCksdCgiPGRpdj4iKS50ZXh0KHMpLmFwcGVuZFRvKHRoaXMubGl2ZVJlZ2lvbikpLHZvaWQgMCl9LG1lbnVzZWxlY3Q6ZnVuY3Rpb24oZSxpKXt2YXIgcz1pLml0ZW0uZGF0YSgidWktYXV0b2NvbXBsZXRlLWl0ZW0iKSxuPXRoaXMucHJldmlvdXM7dGhpcy5lbGVtZW50WzBdIT09dC51aS5zYWZlQWN0aXZlRWxlbWVudCh0aGlzLmRvY3VtZW50WzBdKSYmKHRoaXMuZWxlbWVudC50cmlnZ2VyKCJmb2N1cyIpLHRoaXMucHJldmlvdXM9bix0aGlzLl9kZWxheShmdW5jdGlvbigpe3RoaXMucHJldmlvdXM9bix0aGlzLnNlbGVjdGVkSXRlbT1zfSkpLCExIT09dGhpcy5fdHJpZ2dlcigic2VsZWN0IixlLHtpdGVtOnN9KSYmdGhpcy5fdmFsdWUocy52YWx1ZSksdGhpcy50ZXJtPXRoaXMuX3ZhbHVlKCksdGhpcy5jbG9zZShlKSx0aGlzLnNlbGVjdGVkSXRlbT1zfX0pLHRoaXMubGl2ZVJlZ2lvbj10KCI8ZGl2PiIse3JvbGU6InN0YXR1cyIsImFyaWEtbGl2ZSI6ImFzc2VydGl2ZSIsImFyaWEtcmVsZXZhbnQiOiJhZGRpdGlvbnMifSkuYXBwZW5kVG8odGhpcy5kb2N1bWVudFswXS5ib2R5KSx0aGlzLl9hZGRDbGFzcyh0aGlzLmxpdmVSZWdpb24sbnVsbCwidWktaGVscGVyLWhpZGRlbi1hY2Nlc3NpYmxlIiksdGhpcy5fb24odGhpcy53aW5kb3cse2JlZm9yZXVubG9hZDpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5yZW1vdmVBdHRyKCJhdXRvY29tcGxldGUiKX19KX0sX2Rlc3Ryb3k6ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodGhpcy5zZWFyY2hpbmcpLHRoaXMuZWxlbWVudC5yZW1vdmVBdHRyKCJhdXRvY29tcGxldGUiKSx0aGlzLm1lbnUuZWxlbWVudC5yZW1vdmUoKSx0aGlzLmxpdmVSZWdpb24ucmVtb3ZlKCl9LF9zZXRPcHRpb246ZnVuY3Rpb24odCxlKXt0aGlzLl9zdXBlcih0LGUpLCJzb3VyY2UiPT09dCYmdGhpcy5faW5pdFNvdXJjZSgpLCJhcHBlbmRUbyI9PT10JiZ0aGlzLm1lbnUuZWxlbWVudC5hcHBlbmRUbyh0aGlzLl9hcHBlbmRUbygpKSwiZGlzYWJsZWQiPT09dCYmZSYmdGhpcy54aHImJnRoaXMueGhyLmFib3J0KCl9LF9pc0V2ZW50VGFyZ2V0SW5XaWRnZXQ6ZnVuY3Rpb24oZSl7dmFyIGk9dGhpcy5tZW51LmVsZW1lbnRbMF07cmV0dXJuIGUudGFyZ2V0PT09dGhpcy5lbGVtZW50WzBdfHxlLnRhcmdldD09PWl8fHQuY29udGFpbnMoaSxlLnRhcmdldCl9LF9jbG9zZU9uQ2xpY2tPdXRzaWRlOmZ1bmN0aW9uKHQpe3RoaXMuX2lzRXZlbnRUYXJnZXRJbldpZGdldCh0KXx8dGhpcy5jbG9zZSgpfSxfYXBwZW5kVG86ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnMuYXBwZW5kVG87cmV0dXJuIGUmJihlPWUuanF1ZXJ5fHxlLm5vZGVUeXBlP3QoZSk6dGhpcy5kb2N1bWVudC5maW5kKGUpLmVxKDApKSxlJiZlWzBdfHwoZT10aGlzLmVsZW1lbnQuY2xvc2VzdCgiLnVpLWZyb250LCBkaWFsb2ciKSksZS5sZW5ndGh8fChlPXRoaXMuZG9jdW1lbnRbMF0uYm9keSksZX0sX2luaXRTb3VyY2U6ZnVuY3Rpb24oKXt2YXIgZSxpLHM9dGhpczt0LmlzQXJyYXkodGhpcy5vcHRpb25zLnNvdXJjZSk/KGU9dGhpcy5vcHRpb25zLnNvdXJjZSx0aGlzLnNvdXJjZT1mdW5jdGlvbihpLHMpe3ModC51aS5hdXRvY29tcGxldGUuZmlsdGVyKGUsaS50ZXJtKSl9KToic3RyaW5nIj09dHlwZW9mIHRoaXMub3B0aW9ucy5zb3VyY2U/KGk9dGhpcy5vcHRpb25zLnNvdXJjZSx0aGlzLnNvdXJjZT1mdW5jdGlvbihlLG4pe3MueGhyJiZzLnhoci5hYm9ydCgpLHMueGhyPXQuYWpheCh7dXJsOmksZGF0YTplLGRhdGFUeXBlOiJqc29uIixzdWNjZXNzOmZ1bmN0aW9uKHQpe24odCl9LGVycm9yOmZ1bmN0aW9uKCl7bihbXSl9fSl9KTp0aGlzLnNvdXJjZT10aGlzLm9wdGlvbnMuc291cmNlfSxfc2VhcmNoVGltZW91dDpmdW5jdGlvbih0KXtjbGVhclRpbWVvdXQodGhpcy5zZWFyY2hpbmcpLHRoaXMuc2VhcmNoaW5nPXRoaXMuX2RlbGF5KGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy50ZXJtPT09dGhpcy5fdmFsdWUoKSxpPXRoaXMubWVudS5lbGVtZW50LmlzKCI6dmlzaWJsZSIpLHM9dC5hbHRLZXl8fHQuY3RybEtleXx8dC5tZXRhS2V5fHx0LnNoaWZ0S2V5OyghZXx8ZSYmIWkmJiFzKSYmKHRoaXMuc2VsZWN0ZWRJdGVtPW51bGwsdGhpcy5zZWFyY2gobnVsbCx0KSl9LHRoaXMub3B0aW9ucy5kZWxheSl9LHNlYXJjaDpmdW5jdGlvbih0LGUpe3JldHVybiB0PW51bGwhPXQ/dDp0aGlzLl92YWx1ZSgpLHRoaXMudGVybT10aGlzLl92YWx1ZSgpLHQubGVuZ3RoPHRoaXMub3B0aW9ucy5taW5MZW5ndGg/dGhpcy5jbG9zZShlKTp0aGlzLl90cmlnZ2VyKCJzZWFyY2giLGUpIT09ITE/dGhpcy5fc2VhcmNoKHQpOnZvaWQgMH0sX3NlYXJjaDpmdW5jdGlvbih0KXt0aGlzLnBlbmRpbmcrKyx0aGlzLl9hZGRDbGFzcygidWktYXV0b2NvbXBsZXRlLWxvYWRpbmciKSx0aGlzLmNhbmNlbFNlYXJjaD0hMSx0aGlzLnNvdXJjZSh7dGVybTp0fSx0aGlzLl9yZXNwb25zZSgpKX0sX3Jlc3BvbnNlOmZ1bmN0aW9uKCl7dmFyIGU9Kyt0aGlzLnJlcXVlc3RJbmRleDtyZXR1cm4gdC5wcm94eShmdW5jdGlvbih0KXtlPT09dGhpcy5yZXF1ZXN0SW5kZXgmJnRoaXMuX19yZXNwb25zZSh0KSx0aGlzLnBlbmRpbmctLSx0aGlzLnBlbmRpbmd8fHRoaXMuX3JlbW92ZUNsYXNzKCJ1aS1hdXRvY29tcGxldGUtbG9hZGluZyIpfSx0aGlzKX0sX19yZXNwb25zZTpmdW5jdGlvbih0KXt0JiYodD10aGlzLl9ub3JtYWxpemUodCkpLHRoaXMuX3RyaWdnZXIoInJlc3BvbnNlIixudWxsLHtjb250ZW50OnR9KSwhdGhpcy5vcHRpb25zLmRpc2FibGVkJiZ0JiZ0Lmxlbmd0aCYmIXRoaXMuY2FuY2VsU2VhcmNoPyh0aGlzLl9zdWdnZXN0KHQpLHRoaXMuX3RyaWdnZXIoIm9wZW4iKSk6dGhpcy5fY2xvc2UoKX0sY2xvc2U6ZnVuY3Rpb24odCl7dGhpcy5jYW5jZWxTZWFyY2g9ITAsdGhpcy5fY2xvc2UodCl9LF9jbG9zZTpmdW5jdGlvbih0KXt0aGlzLl9vZmYodGhpcy5kb2N1bWVudCwibW91c2Vkb3duIiksdGhpcy5tZW51LmVsZW1lbnQuaXMoIjp2aXNpYmxlIikmJih0aGlzLm1lbnUuZWxlbWVudC5oaWRlKCksdGhpcy5tZW51LmJsdXIoKSx0aGlzLmlzTmV3TWVudT0hMCx0aGlzLl90cmlnZ2VyKCJjbG9zZSIsdCkpfSxfY2hhbmdlOmZ1bmN0aW9uKHQpe3RoaXMucHJldmlvdXMhPT10aGlzLl92YWx1ZSgpJiZ0aGlzLl90cmlnZ2VyKCJjaGFuZ2UiLHQse2l0ZW06dGhpcy5zZWxlY3RlZEl0ZW19KX0sX25vcm1hbGl6ZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5sZW5ndGgmJmVbMF0ubGFiZWwmJmVbMF0udmFsdWU/ZTp0Lm1hcChlLGZ1bmN0aW9uKGUpe3JldHVybiJzdHJpbmciPT10eXBlb2YgZT97bGFiZWw6ZSx2YWx1ZTplfTp0LmV4dGVuZCh7fSxlLHtsYWJlbDplLmxhYmVsfHxlLnZhbHVlLHZhbHVlOmUudmFsdWV8fGUubGFiZWx9KX0pfSxfc3VnZ2VzdDpmdW5jdGlvbihlKXt2YXIgaT10aGlzLm1lbnUuZWxlbWVudC5lbXB0eSgpO3RoaXMuX3JlbmRlck1lbnUoaSxlKSx0aGlzLmlzTmV3TWVudT0hMCx0aGlzLm1lbnUucmVmcmVzaCgpLGkuc2hvdygpLHRoaXMuX3Jlc2l6ZU1lbnUoKSxpLnBvc2l0aW9uKHQuZXh0ZW5kKHtvZjp0aGlzLmVsZW1lbnR9LHRoaXMub3B0aW9ucy5wb3NpdGlvbikpLHRoaXMub3B0aW9ucy5hdXRvRm9jdXMmJnRoaXMubWVudS5uZXh0KCksdGhpcy5fb24odGhpcy5kb2N1bWVudCx7bW91c2Vkb3duOiJfY2xvc2VPbkNsaWNrT3V0c2lkZSJ9KX0sX3Jlc2l6ZU1lbnU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm1lbnUuZWxlbWVudDt0Lm91dGVyV2lkdGgoTWF0aC5tYXgodC53aWR0aCgiIikub3V0ZXJXaWR0aCgpKzEsdGhpcy5lbGVtZW50Lm91dGVyV2lkdGgoKSkpfSxfcmVuZGVyTWVudTpmdW5jdGlvbihlLGkpe3ZhciBzPXRoaXM7dC5lYWNoKGksZnVuY3Rpb24odCxpKXtzLl9yZW5kZXJJdGVtRGF0YShlLGkpfSl9LF9yZW5kZXJJdGVtRGF0YTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9yZW5kZXJJdGVtKHQsZSkuZGF0YSgidWktYXV0b2NvbXBsZXRlLWl0ZW0iLGUpfSxfcmVuZGVySXRlbTpmdW5jdGlvbihlLGkpe3JldHVybiB0KCI8bGk+IikuYXBwZW5kKHQoIjxkaXY+IikudGV4dChpLmxhYmVsKSkuYXBwZW5kVG8oZSl9LF9tb3ZlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMubWVudS5lbGVtZW50LmlzKCI6dmlzaWJsZSIpP3RoaXMubWVudS5pc0ZpcnN0SXRlbSgpJiYvXnByZXZpb3VzLy50ZXN0KHQpfHx0aGlzLm1lbnUuaXNMYXN0SXRlbSgpJiYvXm5leHQvLnRlc3QodCk/KHRoaXMuaXNNdWx0aUxpbmV8fHRoaXMuX3ZhbHVlKHRoaXMudGVybSksdGhpcy5tZW51LmJsdXIoKSx2b2lkIDApOih0aGlzLm1lbnVbdF0oZSksdm9pZCAwKToodGhpcy5zZWFyY2gobnVsbCxlKSx2b2lkIDApfSx3aWRnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tZW51LmVsZW1lbnR9LF92YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbHVlTWV0aG9kLmFwcGx5KHRoaXMuZWxlbWVudCxhcmd1bWVudHMpfSxfa2V5RXZlbnQ6ZnVuY3Rpb24odCxlKXsoIXRoaXMuaXNNdWx0aUxpbmV8fHRoaXMubWVudS5lbGVtZW50LmlzKCI6dmlzaWJsZSIpKSYmKHRoaXMuX21vdmUodCxlKSxlLnByZXZlbnREZWZhdWx0KCkpfSxfaXNDb250ZW50RWRpdGFibGU6ZnVuY3Rpb24odCl7aWYoIXQubGVuZ3RoKXJldHVybiExO3ZhciBlPXQucHJvcCgiY29udGVudEVkaXRhYmxlIik7cmV0dXJuImluaGVyaXQiPT09ZT90aGlzLl9pc0NvbnRlbnRFZGl0YWJsZSh0LnBhcmVudCgpKToidHJ1ZSI9PT1lfX0pLHQuZXh0ZW5kKHQudWkuYXV0b2NvbXBsZXRlLHtlc2NhcGVSZWdleDpmdW5jdGlvbih0KXtyZXR1cm4gdC5yZXBsYWNlKC9bXC1cW1xde30oKSorPy4sXFxcXiR8I1xzXS9nLCJcXCQmIil9LGZpbHRlcjpmdW5jdGlvbihlLGkpe3ZhciBzPVJlZ0V4cCh0LnVpLmF1dG9jb21wbGV0ZS5lc2NhcGVSZWdleChpKSwiaSIpO3JldHVybiB0LmdyZXAoZSxmdW5jdGlvbih0KXtyZXR1cm4gcy50ZXN0KHQubGFiZWx8fHQudmFsdWV8fHQpfSl9fSksdC53aWRnZXQoInVpLmF1dG9jb21wbGV0ZSIsdC51aS5hdXRvY29tcGxldGUse29wdGlvbnM6e21lc3NhZ2VzOntub1Jlc3VsdHM6Ik5vIHNlYXJjaCByZXN1bHRzLiIscmVzdWx0czpmdW5jdGlvbih0KXtyZXR1cm4gdCsodD4xPyIgcmVzdWx0cyBhcmUiOiIgcmVzdWx0IGlzIikrIiBhdmFpbGFibGUsIHVzZSB1cCBhbmQgZG93biBhcnJvdyBrZXlzIHRvIG5hdmlnYXRlLiJ9fX0sX19yZXNwb25zZTpmdW5jdGlvbihlKXt2YXIgaTt0aGlzLl9zdXBlckFwcGx5KGFyZ3VtZW50cyksdGhpcy5vcHRpb25zLmRpc2FibGVkfHx0aGlzLmNhbmNlbFNlYXJjaHx8KGk9ZSYmZS5sZW5ndGg/dGhpcy5vcHRpb25zLm1lc3NhZ2VzLnJlc3VsdHMoZS5sZW5ndGgpOnRoaXMub3B0aW9ucy5tZXNzYWdlcy5ub1Jlc3VsdHMsdGhpcy5saXZlUmVnaW9uLmNoaWxkcmVuKCkuaGlkZSgpLHQoIjxkaXY+IikudGV4dChpKS5hcHBlbmRUbyh0aGlzLmxpdmVSZWdpb24pKX19KSx0LnVpLmF1dG9jb21wbGV0ZTt2YXIgZz0vdWktY29ybmVyLShbYS16XSl7Miw2fS9nO3Qud2lkZ2V0KCJ1aS5jb250cm9sZ3JvdXAiLHt2ZXJzaW9uOiIxLjEyLjEiLGRlZmF1bHRFbGVtZW50OiI8ZGl2PiIsb3B0aW9uczp7ZGlyZWN0aW9uOiJob3Jpem9udGFsIixkaXNhYmxlZDpudWxsLG9ubHlWaXNpYmxlOiEwLGl0ZW1zOntidXR0b246ImlucHV0W3R5cGU9YnV0dG9uXSwgaW5wdXRbdHlwZT1zdWJtaXRdLCBpbnB1dFt0eXBlPXJlc2V0XSwgYnV0dG9uLCBhIixjb250cm9sZ3JvdXBMYWJlbDoiLnVpLWNvbnRyb2xncm91cC1sYWJlbCIsY2hlY2tib3hyYWRpbzoiaW5wdXRbdHlwZT0nY2hlY2tib3gnXSwgaW5wdXRbdHlwZT0ncmFkaW8nXSIsc2VsZWN0bWVudToic2VsZWN0IixzcGlubmVyOiIudWktc3Bpbm5lci1pbnB1dCJ9fSxfY3JlYXRlOmZ1bmN0aW9uKCl7dGhpcy5fZW5oYW5jZSgpfSxfZW5oYW5jZTpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5hdHRyKCJyb2xlIiwidG9vbGJhciIpLHRoaXMucmVmcmVzaCgpfSxfZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuX2NhbGxDaGlsZE1ldGhvZCgiZGVzdHJveSIpLHRoaXMuY2hpbGRXaWRnZXRzLnJlbW92ZURhdGEoInVpLWNvbnRyb2xncm91cC1kYXRhIiksdGhpcy5lbGVtZW50LnJlbW92ZUF0dHIoInJvbGUiKSx0aGlzLm9wdGlvbnMuaXRlbXMuY29udHJvbGdyb3VwTGFiZWwmJnRoaXMuZWxlbWVudC5maW5kKHRoaXMub3B0aW9ucy5pdGVtcy5jb250cm9sZ3JvdXBMYWJlbCkuZmluZCgiLnVpLWNvbnRyb2xncm91cC1sYWJlbC1jb250ZW50cyIpLmNvbnRlbnRzKCkudW53cmFwKCl9LF9pbml0V2lkZ2V0czpmdW5jdGlvbigpe3ZhciBlPXRoaXMsaT1bXTt0LmVhY2godGhpcy5vcHRpb25zLml0ZW1zLGZ1bmN0aW9uKHMsbil7dmFyIG8sYT17fTtyZXR1cm4gbj8iY29udHJvbGdyb3VwTGFiZWwiPT09cz8obz1lLmVsZW1lbnQuZmluZChuKSxvLmVhY2goZnVuY3Rpb24oKXt2YXIgZT10KHRoaXMpO2UuY2hpbGRyZW4oIi51aS1jb250cm9sZ3JvdXAtbGFiZWwtY29udGVudHMiKS5sZW5ndGh8fGUuY29udGVudHMoKS53cmFwQWxsKCI8c3BhbiBjbGFzcz0ndWktY29udHJvbGdyb3VwLWxhYmVsLWNvbnRlbnRzJz48L3NwYW4+Iil9KSxlLl9hZGRDbGFzcyhvLG51bGwsInVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1zdGF0ZS1kZWZhdWx0IiksaT1pLmNvbmNhdChvLmdldCgpKSx2b2lkIDApOih0LmZuW3NdJiYoYT1lWyJfIitzKyJPcHRpb25zIl0/ZVsiXyIrcysiT3B0aW9ucyJdKCJtaWRkbGUiKTp7Y2xhc3Nlczp7fX0sZS5lbGVtZW50LmZpbmQobikuZWFjaChmdW5jdGlvbigpe3ZhciBuPXQodGhpcyksbz1uW3NdKCJpbnN0YW5jZSIpLHI9dC53aWRnZXQuZXh0ZW5kKHt9LGEpO2lmKCJidXR0b24iIT09c3x8IW4ucGFyZW50KCIudWktc3Bpbm5lciIpLmxlbmd0aCl7b3x8KG89bltzXSgpW3NdKCJpbnN0YW5jZSIpKSxvJiYoci5jbGFzc2VzPWUuX3Jlc29sdmVDbGFzc2VzVmFsdWVzKHIuY2xhc3NlcyxvKSksbltzXShyKTt2YXIgaD1uW3NdKCJ3aWRnZXQiKTt0LmRhdGEoaFswXSwidWktY29udHJvbGdyb3VwLWRhdGEiLG8/bzpuW3NdKCJpbnN0YW5jZSIpKSxpLnB1c2goaFswXSl9fSkpLHZvaWQgMCk6dm9pZCAwfSksdGhpcy5jaGlsZFdpZGdldHM9dCh0LnVuaXF1ZShpKSksdGhpcy5fYWRkQ2xhc3ModGhpcy5jaGlsZFdpZGdldHMsInVpLWNvbnRyb2xncm91cC1pdGVtIil9LF9jYWxsQ2hpbGRNZXRob2Q6ZnVuY3Rpb24oZSl7dGhpcy5jaGlsZFdpZGdldHMuZWFjaChmdW5jdGlvbigpe3ZhciBpPXQodGhpcykscz1pLmRhdGEoInVpLWNvbnRyb2xncm91cC1kYXRhIik7cyYmc1tlXSYmc1tlXSgpfSl9LF91cGRhdGVDb3JuZXJDbGFzczpmdW5jdGlvbih0LGUpe3ZhciBpPSJ1aS1jb3JuZXItdG9wIHVpLWNvcm5lci1ib3R0b20gdWktY29ybmVyLWxlZnQgdWktY29ybmVyLXJpZ2h0IHVpLWNvcm5lci1hbGwiLHM9dGhpcy5fYnVpbGRTaW1wbGVPcHRpb25zKGUsImxhYmVsIikuY2xhc3Nlcy5sYWJlbDt0aGlzLl9yZW1vdmVDbGFzcyh0LG51bGwsaSksdGhpcy5fYWRkQ2xhc3ModCxudWxsLHMpfSxfYnVpbGRTaW1wbGVPcHRpb25zOmZ1bmN0aW9uKHQsZSl7dmFyIGk9InZlcnRpY2FsIj09PXRoaXMub3B0aW9ucy5kaXJlY3Rpb24scz17Y2xhc3Nlczp7fX07cmV0dXJuIHMuY2xhc3Nlc1tlXT17bWlkZGxlOiIiLGZpcnN0OiJ1aS1jb3JuZXItIisoaT8idG9wIjoibGVmdCIpLGxhc3Q6InVpLWNvcm5lci0iKyhpPyJib3R0b20iOiJyaWdodCIpLG9ubHk6InVpLWNvcm5lci1hbGwifVt0XSxzfSxfc3Bpbm5lck9wdGlvbnM6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fYnVpbGRTaW1wbGVPcHRpb25zKHQsInVpLXNwaW5uZXIiKTtyZXR1cm4gZS5jbGFzc2VzWyJ1aS1zcGlubmVyLXVwIl09IiIsZS5jbGFzc2VzWyJ1aS1zcGlubmVyLWRvd24iXT0iIixlfSxfYnV0dG9uT3B0aW9uczpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fYnVpbGRTaW1wbGVPcHRpb25zKHQsInVpLWJ1dHRvbiIpfSxfY2hlY2tib3hyYWRpb09wdGlvbnM6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2J1aWxkU2ltcGxlT3B0aW9ucyh0LCJ1aS1jaGVja2JveHJhZGlvLWxhYmVsIil9LF9zZWxlY3RtZW51T3B0aW9uczpmdW5jdGlvbih0KXt2YXIgZT0idmVydGljYWwiPT09dGhpcy5vcHRpb25zLmRpcmVjdGlvbjtyZXR1cm57d2lkdGg6ZT8iYXV0byI6ITEsY2xhc3Nlczp7bWlkZGxlOnsidWktc2VsZWN0bWVudS1idXR0b24tb3BlbiI6IiIsInVpLXNlbGVjdG1lbnUtYnV0dG9uLWNsb3NlZCI6IiJ9LGZpcnN0OnsidWktc2VsZWN0bWVudS1idXR0b24tb3BlbiI6InVpLWNvcm5lci0iKyhlPyJ0b3AiOiJ0bCIpLCJ1aS1zZWxlY3RtZW51LWJ1dHRvbi1jbG9zZWQiOiJ1aS1jb3JuZXItIisoZT8idG9wIjoibGVmdCIpfSxsYXN0OnsidWktc2VsZWN0bWVudS1idXR0b24tb3BlbiI6ZT8iIjoidWktY29ybmVyLXRyIiwidWktc2VsZWN0bWVudS1idXR0b24tY2xvc2VkIjoidWktY29ybmVyLSIrKGU/ImJvdHRvbSI6InJpZ2h0Iil9LG9ubHk6eyJ1aS1zZWxlY3RtZW51LWJ1dHRvbi1vcGVuIjoidWktY29ybmVyLXRvcCIsInVpLXNlbGVjdG1lbnUtYnV0dG9uLWNsb3NlZCI6InVpLWNvcm5lci1hbGwifX1bdF19fSxfcmVzb2x2ZUNsYXNzZXNWYWx1ZXM6ZnVuY3Rpb24oZSxpKXt2YXIgcz17fTtyZXR1cm4gdC5lYWNoKGUsZnVuY3Rpb24obil7dmFyIG89aS5vcHRpb25zLmNsYXNzZXNbbl18fCIiO289dC50cmltKG8ucmVwbGFjZShnLCIiKSksc1tuXT0obysiICIrZVtuXSkucmVwbGFjZSgvXHMrL2csIiAiKX0pLHN9LF9zZXRPcHRpb246ZnVuY3Rpb24odCxlKXtyZXR1cm4iZGlyZWN0aW9uIj09PXQmJnRoaXMuX3JlbW92ZUNsYXNzKCJ1aS1jb250cm9sZ3JvdXAtIit0aGlzLm9wdGlvbnMuZGlyZWN0aW9uKSx0aGlzLl9zdXBlcih0LGUpLCJkaXNhYmxlZCI9PT10Pyh0aGlzLl9jYWxsQ2hpbGRNZXRob2QoZT8iZGlzYWJsZSI6ImVuYWJsZSIpLHZvaWQgMCk6KHRoaXMucmVmcmVzaCgpLHZvaWQgMCl9LHJlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgZSxpPXRoaXM7dGhpcy5fYWRkQ2xhc3MoInVpLWNvbnRyb2xncm91cCB1aS1jb250cm9sZ3JvdXAtIit0aGlzLm9wdGlvbnMuZGlyZWN0aW9uKSwiaG9yaXpvbnRhbCI9PT10aGlzLm9wdGlvbnMuZGlyZWN0aW9uJiZ0aGlzLl9hZGRDbGFzcyhudWxsLCJ1aS1oZWxwZXItY2xlYXJmaXgiKSx0aGlzLl9pbml0V2lkZ2V0cygpLGU9dGhpcy5jaGlsZFdpZGdldHMsdGhpcy5vcHRpb25zLm9ubHlWaXNpYmxlJiYoZT1lLmZpbHRlcigiOnZpc2libGUiKSksZS5sZW5ndGgmJih0LmVhY2goWyJmaXJzdCIsImxhc3QiXSxmdW5jdGlvbih0LHMpe3ZhciBuPWVbc10oKS5kYXRhKCJ1aS1jb250cm9sZ3JvdXAtZGF0YSIpO2lmKG4mJmlbIl8iK24ud2lkZ2V0TmFtZSsiT3B0aW9ucyJdKXt2YXIgbz1pWyJfIituLndpZGdldE5hbWUrIk9wdGlvbnMiXSgxPT09ZS5sZW5ndGg/Im9ubHkiOnMpO28uY2xhc3Nlcz1pLl9yZXNvbHZlQ2xhc3Nlc1ZhbHVlcyhvLmNsYXNzZXMsbiksbi5lbGVtZW50W24ud2lkZ2V0TmFtZV0obyl9ZWxzZSBpLl91cGRhdGVDb3JuZXJDbGFzcyhlW3NdKCkscyl9KSx0aGlzLl9jYWxsQ2hpbGRNZXRob2QoInJlZnJlc2giKSl9fSksdC53aWRnZXQoInVpLmNoZWNrYm94cmFkaW8iLFt0LnVpLmZvcm1SZXNldE1peGluLHt2ZXJzaW9uOiIxLjEyLjEiLG9wdGlvbnM6e2Rpc2FibGVkOm51bGwsbGFiZWw6bnVsbCxpY29uOiEwLGNsYXNzZXM6eyJ1aS1jaGVja2JveHJhZGlvLWxhYmVsIjoidWktY29ybmVyLWFsbCIsInVpLWNoZWNrYm94cmFkaW8taWNvbiI6InVpLWNvcm5lci1hbGwifX0sX2dldENyZWF0ZU9wdGlvbnM6ZnVuY3Rpb24oKXt2YXIgZSxpLHM9dGhpcyxuPXRoaXMuX3N1cGVyKCl8fHt9O3JldHVybiB0aGlzLl9yZWFkVHlwZSgpLGk9dGhpcy5lbGVtZW50LmxhYmVscygpLHRoaXMubGFiZWw9dChpW2kubGVuZ3RoLTFdKSx0aGlzLmxhYmVsLmxlbmd0aHx8dC5lcnJvcigiTm8gbGFiZWwgZm91bmQgZm9yIGNoZWNrYm94cmFkaW8gd2lkZ2V0IiksdGhpcy5vcmlnaW5hbExhYmVsPSIiLHRoaXMubGFiZWwuY29udGVudHMoKS5ub3QodGhpcy5lbGVtZW50WzBdKS5lYWNoKGZ1bmN0aW9uKCl7cy5vcmlnaW5hbExhYmVsKz0zPT09dGhpcy5ub2RlVHlwZT90KHRoaXMpLnRleHQoKTp0aGlzLm91dGVySFRNTH0pLHRoaXMub3JpZ2luYWxMYWJlbCYmKG4ubGFiZWw9dGhpcy5vcmlnaW5hbExhYmVsKSxlPXRoaXMuZWxlbWVudFswXS5kaXNhYmxlZCxudWxsIT1lJiYobi5kaXNhYmxlZD1lKSxufSxfY3JlYXRlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5lbGVtZW50WzBdLmNoZWNrZWQ7dGhpcy5fYmluZEZvcm1SZXNldEhhbmRsZXIoKSxudWxsPT10aGlzLm9wdGlvbnMuZGlzYWJsZWQmJih0aGlzLm9wdGlvbnMuZGlzYWJsZWQ9dGhpcy5lbGVtZW50WzBdLmRpc2FibGVkKSx0aGlzLl9zZXRPcHRpb24oImRpc2FibGVkIix0aGlzLm9wdGlvbnMuZGlzYWJsZWQpLHRoaXMuX2FkZENsYXNzKCJ1aS1jaGVja2JveHJhZGlvIiwidWktaGVscGVyLWhpZGRlbi1hY2Nlc3NpYmxlIiksdGhpcy5fYWRkQ2xhc3ModGhpcy5sYWJlbCwidWktY2hlY2tib3hyYWRpby1sYWJlbCIsInVpLWJ1dHRvbiB1aS13aWRnZXQiKSwicmFkaW8iPT09dGhpcy50eXBlJiZ0aGlzLl9hZGRDbGFzcyh0aGlzLmxhYmVsLCJ1aS1jaGVja2JveHJhZGlvLXJhZGlvLWxhYmVsIiksdGhpcy5vcHRpb25zLmxhYmVsJiZ0aGlzLm9wdGlvbnMubGFiZWwhPT10aGlzLm9yaWdpbmFsTGFiZWw/dGhpcy5fdXBkYXRlTGFiZWwoKTp0aGlzLm9yaWdpbmFsTGFiZWwmJih0aGlzLm9wdGlvbnMubGFiZWw9dGhpcy5vcmlnaW5hbExhYmVsKSx0aGlzLl9lbmhhbmNlKCksdCYmKHRoaXMuX2FkZENsYXNzKHRoaXMubGFiZWwsInVpLWNoZWNrYm94cmFkaW8tY2hlY2tlZCIsInVpLXN0YXRlLWFjdGl2ZSIpLHRoaXMuaWNvbiYmdGhpcy5fYWRkQ2xhc3ModGhpcy5pY29uLG51bGwsInVpLXN0YXRlLWhvdmVyIikpLHRoaXMuX29uKHtjaGFuZ2U6Il90b2dnbGVDbGFzc2VzIixmb2N1czpmdW5jdGlvbigpe3RoaXMuX2FkZENsYXNzKHRoaXMubGFiZWwsbnVsbCwidWktc3RhdGUtZm9jdXMgdWktdmlzdWFsLWZvY3VzIil9LGJsdXI6ZnVuY3Rpb24oKXt0aGlzLl9yZW1vdmVDbGFzcyh0aGlzLmxhYmVsLG51bGwsInVpLXN0YXRlLWZvY3VzIHVpLXZpc3VhbC1mb2N1cyIpfX0pfSxfcmVhZFR5cGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmVsZW1lbnRbMF0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTt0aGlzLnR5cGU9dGhpcy5lbGVtZW50WzBdLnR5cGUsImlucHV0Ij09PWUmJi9yYWRpb3xjaGVja2JveC8udGVzdCh0aGlzLnR5cGUpfHx0LmVycm9yKCJDYW4ndCBjcmVhdGUgY2hlY2tib3hyYWRpbyBvbiBlbGVtZW50Lm5vZGVOYW1lPSIrZSsiIGFuZCBlbGVtZW50LnR5cGU9Iit0aGlzLnR5cGUpfSxfZW5oYW5jZTpmdW5jdGlvbigpe3RoaXMuX3VwZGF0ZUljb24odGhpcy5lbGVtZW50WzBdLmNoZWNrZWQpfSx3aWRnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sYWJlbH0sX2dldFJhZGlvR3JvdXA6ZnVuY3Rpb24oKXt2YXIgZSxpPXRoaXMuZWxlbWVudFswXS5uYW1lLHM9ImlucHV0W25hbWU9JyIrdC51aS5lc2NhcGVTZWxlY3RvcihpKSsiJ10iO3JldHVybiBpPyhlPXRoaXMuZm9ybS5sZW5ndGg/dCh0aGlzLmZvcm1bMF0uZWxlbWVudHMpLmZpbHRlcihzKTp0KHMpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiAwPT09dCh0aGlzKS5mb3JtKCkubGVuZ3RofSksZS5ub3QodGhpcy5lbGVtZW50KSk6dChbXSl9LF90b2dnbGVDbGFzc2VzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5lbGVtZW50WzBdLmNoZWNrZWQ7dGhpcy5fdG9nZ2xlQ2xhc3ModGhpcy5sYWJlbCwidWktY2hlY2tib3hyYWRpby1jaGVja2VkIiwidWktc3RhdGUtYWN0aXZlIixlKSx0aGlzLm9wdGlvbnMuaWNvbiYmImNoZWNrYm94Ij09PXRoaXMudHlwZSYmdGhpcy5fdG9nZ2xlQ2xhc3ModGhpcy5pY29uLG51bGwsInVpLWljb24tY2hlY2sgdWktc3RhdGUtY2hlY2tlZCIsZSkuX3RvZ2dsZUNsYXNzKHRoaXMuaWNvbixudWxsLCJ1aS1pY29uLWJsYW5rIiwhZSksInJhZGlvIj09PXRoaXMudHlwZSYmdGhpcy5fZ2V0UmFkaW9Hcm91cCgpLmVhY2goZnVuY3Rpb24oKXt2YXIgZT10KHRoaXMpLmNoZWNrYm94cmFkaW8oImluc3RhbmNlIik7ZSYmZS5fcmVtb3ZlQ2xhc3MoZS5sYWJlbCwidWktY2hlY2tib3hyYWRpby1jaGVja2VkIiwidWktc3RhdGUtYWN0aXZlIil9KX0sX2Rlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLl91bmJpbmRGb3JtUmVzZXRIYW5kbGVyKCksdGhpcy5pY29uJiYodGhpcy5pY29uLnJlbW92ZSgpLHRoaXMuaWNvblNwYWNlLnJlbW92ZSgpKX0sX3NldE9wdGlvbjpmdW5jdGlvbih0LGUpe3JldHVybiJsYWJlbCIhPT10fHxlPyh0aGlzLl9zdXBlcih0LGUpLCJkaXNhYmxlZCI9PT10Pyh0aGlzLl90b2dnbGVDbGFzcyh0aGlzLmxhYmVsLG51bGwsInVpLXN0YXRlLWRpc2FibGVkIixlKSx0aGlzLmVsZW1lbnRbMF0uZGlzYWJsZWQ9ZSx2b2lkIDApOih0aGlzLnJlZnJlc2goKSx2b2lkIDApKTp2b2lkIDB9LF91cGRhdGVJY29uOmZ1bmN0aW9uKGUpe3ZhciBpPSJ1aS1pY29uIHVpLWljb24tYmFja2dyb3VuZCAiO3RoaXMub3B0aW9ucy5pY29uPyh0aGlzLmljb258fCh0aGlzLmljb249dCgiPHNwYW4+IiksdGhpcy5pY29uU3BhY2U9dCgiPHNwYW4+IDwvc3Bhbj4iKSx0aGlzLl9hZGRDbGFzcyh0aGlzLmljb25TcGFjZSwidWktY2hlY2tib3hyYWRpby1pY29uLXNwYWNlIikpLCJjaGVja2JveCI9PT10aGlzLnR5cGU/KGkrPWU/InVpLWljb24tY2hlY2sgdWktc3RhdGUtY2hlY2tlZCI6InVpLWljb24tYmxhbmsiLHRoaXMuX3JlbW92ZUNsYXNzKHRoaXMuaWNvbixudWxsLGU/InVpLWljb24tYmxhbmsiOiJ1aS1pY29uLWNoZWNrIikpOmkrPSJ1aS1pY29uLWJsYW5rIix0aGlzLl9hZGRDbGFzcyh0aGlzLmljb24sInVpLWNoZWNrYm94cmFkaW8taWNvbiIsaSksZXx8dGhpcy5fcmVtb3ZlQ2xhc3ModGhpcy5pY29uLG51bGwsInVpLWljb24tY2hlY2sgdWktc3RhdGUtY2hlY2tlZCIpLHRoaXMuaWNvbi5wcmVwZW5kVG8odGhpcy5sYWJlbCkuYWZ0ZXIodGhpcy5pY29uU3BhY2UpKTp2b2lkIDAhPT10aGlzLmljb24mJih0aGlzLmljb24ucmVtb3ZlKCksdGhpcy5pY29uU3BhY2UucmVtb3ZlKCksZGVsZXRlIHRoaXMuaWNvbil9LF91cGRhdGVMYWJlbDpmdW5jdGlvbigpe3ZhciB0PXRoaXMubGFiZWwuY29udGVudHMoKS5ub3QodGhpcy5lbGVtZW50WzBdKTt0aGlzLmljb24mJih0PXQubm90KHRoaXMuaWNvblswXSkpLHRoaXMuaWNvblNwYWNlJiYodD10Lm5vdCh0aGlzLmljb25TcGFjZVswXSkpLHQucmVtb3ZlKCksdGhpcy5sYWJlbC5hcHBlbmQodGhpcy5vcHRpb25zLmxhYmVsKX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZWxlbWVudFswXS5jaGVja2VkLGU9dGhpcy5lbGVtZW50WzBdLmRpc2FibGVkO3RoaXMuX3VwZGF0ZUljb24odCksdGhpcy5fdG9nZ2xlQ2xhc3ModGhpcy5sYWJlbCwidWktY2hlY2tib3hyYWRpby1jaGVja2VkIiwidWktc3RhdGUtYWN0aXZlIix0KSxudWxsIT09dGhpcy5vcHRpb25zLmxhYmVsJiZ0aGlzLl91cGRhdGVMYWJlbCgpLGUhPT10aGlzLm9wdGlvbnMuZGlzYWJsZWQmJnRoaXMuX3NldE9wdGlvbnMoe2Rpc2FibGVkOmV9KX19XSksdC51aS5jaGVja2JveHJhZGlvLHQud2lkZ2V0KCJ1aS5idXR0b24iLHt2ZXJzaW9uOiIxLjEyLjEiLGRlZmF1bHRFbGVtZW50OiI8YnV0dG9uPiIsb3B0aW9uczp7Y2xhc3Nlczp7InVpLWJ1dHRvbiI6InVpLWNvcm5lci1hbGwifSxkaXNhYmxlZDpudWxsLGljb246bnVsbCxpY29uUG9zaXRpb246ImJlZ2lubmluZyIsbGFiZWw6bnVsbCxzaG93TGFiZWw6ITB9LF9nZXRDcmVhdGVPcHRpb25zOmZ1bmN0aW9uKCl7dmFyIHQsZT10aGlzLl9zdXBlcigpfHx7fTtyZXR1cm4gdGhpcy5pc0lucHV0PXRoaXMuZWxlbWVudC5pcygiaW5wdXQiKSx0PXRoaXMuZWxlbWVudFswXS5kaXNhYmxlZCxudWxsIT10JiYoZS5kaXNhYmxlZD10KSx0aGlzLm9yaWdpbmFsTGFiZWw9dGhpcy5pc0lucHV0P3RoaXMuZWxlbWVudC52YWwoKTp0aGlzLmVsZW1lbnQuaHRtbCgpLHRoaXMub3JpZ2luYWxMYWJlbCYmKGUubGFiZWw9dGhpcy5vcmlnaW5hbExhYmVsKSxlfSxfY3JlYXRlOmZ1bmN0aW9uKCl7IXRoaXMub3B0aW9uLnNob3dMYWJlbCYhdGhpcy5vcHRpb25zLmljb24mJih0aGlzLm9wdGlvbnMuc2hvd0xhYmVsPSEwKSxudWxsPT10aGlzLm9wdGlvbnMuZGlzYWJsZWQmJih0aGlzLm9wdGlvbnMuZGlzYWJsZWQ9dGhpcy5lbGVtZW50WzBdLmRpc2FibGVkfHwhMSksdGhpcy5oYXNUaXRsZT0hIXRoaXMuZWxlbWVudC5hdHRyKCJ0aXRsZSIpLHRoaXMub3B0aW9ucy5sYWJlbCYmdGhpcy5vcHRpb25zLmxhYmVsIT09dGhpcy5vcmlnaW5hbExhYmVsJiYodGhpcy5pc0lucHV0P3RoaXMuZWxlbWVudC52YWwodGhpcy5vcHRpb25zLmxhYmVsKTp0aGlzLmVsZW1lbnQuaHRtbCh0aGlzLm9wdGlvbnMubGFiZWwpKSx0aGlzLl9hZGRDbGFzcygidWktYnV0dG9uIiwidWktd2lkZ2V0IiksdGhpcy5fc2V0T3B0aW9uKCJkaXNhYmxlZCIsdGhpcy5vcHRpb25zLmRpc2FibGVkKSx0aGlzLl9lbmhhbmNlKCksdGhpcy5lbGVtZW50LmlzKCJhIikmJnRoaXMuX29uKHtrZXl1cDpmdW5jdGlvbihlKXtlLmtleUNvZGU9PT10LnVpLmtleUNvZGUuU1BBQ0UmJihlLnByZXZlbnREZWZhdWx0KCksdGhpcy5lbGVtZW50WzBdLmNsaWNrP3RoaXMuZWxlbWVudFswXS5jbGljaygpOnRoaXMuZWxlbWVudC50cmlnZ2VyKCJjbGljayIpKX19KX0sX2VuaGFuY2U6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQuaXMoImJ1dHRvbiIpfHx0aGlzLmVsZW1lbnQuYXR0cigicm9sZSIsImJ1dHRvbiIpLHRoaXMub3B0aW9ucy5pY29uJiYodGhpcy5fdXBkYXRlSWNvbigiaWNvbiIsdGhpcy5vcHRpb25zLmljb24pLHRoaXMuX3VwZGF0ZVRvb2x0aXAoKSl9LF91cGRhdGVUb29sdGlwOmZ1bmN0aW9uKCl7dGhpcy50aXRsZT10aGlzLmVsZW1lbnQuYXR0cigidGl0bGUiKSx0aGlzLm9wdGlvbnMuc2hvd0xhYmVsfHx0aGlzLnRpdGxlfHx0aGlzLmVsZW1lbnQuYXR0cigidGl0bGUiLHRoaXMub3B0aW9ucy5sYWJlbCl9LF91cGRhdGVJY29uOmZ1bmN0aW9uKGUsaSl7dmFyIHM9Imljb25Qb3NpdGlvbiIhPT1lLG49cz90aGlzLm9wdGlvbnMuaWNvblBvc2l0aW9uOmksbz0idG9wIj09PW58fCJib3R0b20iPT09bjt0aGlzLmljb24/cyYmdGhpcy5fcmVtb3ZlQ2xhc3ModGhpcy5pY29uLG51bGwsdGhpcy5vcHRpb25zLmljb24pOih0aGlzLmljb249dCgiPHNwYW4+IiksdGhpcy5fYWRkQ2xhc3ModGhpcy5pY29uLCJ1aS1idXR0b24taWNvbiIsInVpLWljb24iKSx0aGlzLm9wdGlvbnMuc2hvd0xhYmVsfHx0aGlzLl9hZGRDbGFzcygidWktYnV0dG9uLWljb24tb25seSIpKSxzJiZ0aGlzLl9hZGRDbGFzcyh0aGlzLmljb24sbnVsbCxpKSx0aGlzLl9hdHRhY2hJY29uKG4pLG8/KHRoaXMuX2FkZENsYXNzKHRoaXMuaWNvbixudWxsLCJ1aS13aWRnZXQtaWNvbi1ibG9jayIpLHRoaXMuaWNvblNwYWNlJiZ0aGlzLmljb25TcGFjZS5yZW1vdmUoKSk6KHRoaXMuaWNvblNwYWNlfHwodGhpcy5pY29uU3BhY2U9dCgiPHNwYW4+IDwvc3Bhbj4iKSx0aGlzLl9hZGRDbGFzcyh0aGlzLmljb25TcGFjZSwidWktYnV0dG9uLWljb24tc3BhY2UiKSksdGhpcy5fcmVtb3ZlQ2xhc3ModGhpcy5pY29uLG51bGwsInVpLXdpZ2V0LWljb24tYmxvY2siKSx0aGlzLl9hdHRhY2hJY29uU3BhY2UobikpfSxfZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5yZW1vdmVBdHRyKCJyb2xlIiksdGhpcy5pY29uJiZ0aGlzLmljb24ucmVtb3ZlKCksdGhpcy5pY29uU3BhY2UmJnRoaXMuaWNvblNwYWNlLnJlbW92ZSgpLHRoaXMuaGFzVGl0bGV8fHRoaXMuZWxlbWVudC5yZW1vdmVBdHRyKCJ0aXRsZSIpfSxfYXR0YWNoSWNvblNwYWNlOmZ1bmN0aW9uKHQpe3RoaXMuaWNvblsvXig/OmVuZHxib3R0b20pLy50ZXN0KHQpPyJiZWZvcmUiOiJhZnRlciJdKHRoaXMuaWNvblNwYWNlKX0sX2F0dGFjaEljb246ZnVuY3Rpb24odCl7dGhpcy5lbGVtZW50Wy9eKD86ZW5kfGJvdHRvbSkvLnRlc3QodCk/ImFwcGVuZCI6InByZXBlbmQiXSh0aGlzLmljb24pfSxfc2V0T3B0aW9uczpmdW5jdGlvbih0KXt2YXIgZT12b2lkIDA9PT10LnNob3dMYWJlbD90aGlzLm9wdGlvbnMuc2hvd0xhYmVsOnQuc2hvd0xhYmVsLGk9dm9pZCAwPT09dC5pY29uP3RoaXMub3B0aW9ucy5pY29uOnQuaWNvbjtlfHxpfHwodC5zaG93TGFiZWw9ITApLHRoaXMuX3N1cGVyKHQpfSxfc2V0T3B0aW9uOmZ1bmN0aW9uKHQsZSl7Imljb24iPT09dCYmKGU/dGhpcy5fdXBkYXRlSWNvbih0LGUpOnRoaXMuaWNvbiYmKHRoaXMuaWNvbi5yZW1vdmUoKSx0aGlzLmljb25TcGFjZSYmdGhpcy5pY29uU3BhY2UucmVtb3ZlKCkpKSwiaWNvblBvc2l0aW9uIj09PXQmJnRoaXMuX3VwZGF0ZUljb24odCxlKSwic2hvd0xhYmVsIj09PXQmJih0aGlzLl90b2dnbGVDbGFzcygidWktYnV0dG9uLWljb24tb25seSIsbnVsbCwhZSksdGhpcy5fdXBkYXRlVG9vbHRpcCgpKSwibGFiZWwiPT09dCYmKHRoaXMuaXNJbnB1dD90aGlzLmVsZW1lbnQudmFsKGUpOih0aGlzLmVsZW1lbnQuaHRtbChlKSx0aGlzLmljb24mJih0aGlzLl9hdHRhY2hJY29uKHRoaXMub3B0aW9ucy5pY29uUG9zaXRpb24pLHRoaXMuX2F0dGFjaEljb25TcGFjZSh0aGlzLm9wdGlvbnMuaWNvblBvc2l0aW9uKSkpKSx0aGlzLl9zdXBlcih0LGUpLCJkaXNhYmxlZCI9PT10JiYodGhpcy5fdG9nZ2xlQ2xhc3MobnVsbCwidWktc3RhdGUtZGlzYWJsZWQiLGUpLHRoaXMuZWxlbWVudFswXS5kaXNhYmxlZD1lLGUmJnRoaXMuZWxlbWVudC5ibHVyKCkpfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5lbGVtZW50LmlzKCJpbnB1dCwgYnV0dG9uIik/dGhpcy5lbGVtZW50WzBdLmRpc2FibGVkOnRoaXMuZWxlbWVudC5oYXNDbGFzcygidWktYnV0dG9uLWRpc2FibGVkIik7dCE9PXRoaXMub3B0aW9ucy5kaXNhYmxlZCYmdGhpcy5fc2V0T3B0aW9ucyh7ZGlzYWJsZWQ6dH0pLHRoaXMuX3VwZGF0ZVRvb2x0aXAoKX19KSx0LnVpQmFja0NvbXBhdCE9PSExJiYodC53aWRnZXQoInVpLmJ1dHRvbiIsdC51aS5idXR0b24se29wdGlvbnM6e3RleHQ6ITAsaWNvbnM6e3ByaW1hcnk6bnVsbCxzZWNvbmRhcnk6bnVsbH19LF9jcmVhdGU6ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMuc2hvd0xhYmVsJiYhdGhpcy5vcHRpb25zLnRleHQmJih0aGlzLm9wdGlvbnMuc2hvd0xhYmVsPXRoaXMub3B0aW9ucy50ZXh0KSwhdGhpcy5vcHRpb25zLnNob3dMYWJlbCYmdGhpcy5vcHRpb25zLnRleHQmJih0aGlzLm9wdGlvbnMudGV4dD10aGlzLm9wdGlvbnMuc2hvd0xhYmVsKSx0aGlzLm9wdGlvbnMuaWNvbnx8IXRoaXMub3B0aW9ucy5pY29ucy5wcmltYXJ5JiYhdGhpcy5vcHRpb25zLmljb25zLnNlY29uZGFyeT90aGlzLm9wdGlvbnMuaWNvbiYmKHRoaXMub3B0aW9ucy5pY29ucy5wcmltYXJ5PXRoaXMub3B0aW9ucy5pY29uKTp0aGlzLm9wdGlvbnMuaWNvbnMucHJpbWFyeT90aGlzLm9wdGlvbnMuaWNvbj10aGlzLm9wdGlvbnMuaWNvbnMucHJpbWFyeToodGhpcy5vcHRpb25zLmljb249dGhpcy5vcHRpb25zLmljb25zLnNlY29uZGFyeSx0aGlzLm9wdGlvbnMuaWNvblBvc2l0aW9uPSJlbmQiKSx0aGlzLl9zdXBlcigpfSxfc2V0T3B0aW9uOmZ1bmN0aW9uKHQsZSl7cmV0dXJuInRleHQiPT09dD8odGhpcy5fc3VwZXIoInNob3dMYWJlbCIsZSksdm9pZCAwKTooInNob3dMYWJlbCI9PT10JiYodGhpcy5vcHRpb25zLnRleHQ9ZSksImljb24iPT09dCYmKHRoaXMub3B0aW9ucy5pY29ucy5wcmltYXJ5PWUpLCJpY29ucyI9PT10JiYoZS5wcmltYXJ5Pyh0aGlzLl9zdXBlcigiaWNvbiIsZS5wcmltYXJ5KSx0aGlzLl9zdXBlcigiaWNvblBvc2l0aW9uIiwiYmVnaW5uaW5nIikpOmUuc2Vjb25kYXJ5JiYodGhpcy5fc3VwZXIoImljb24iLGUuc2Vjb25kYXJ5KSx0aGlzLl9zdXBlcigiaWNvblBvc2l0aW9uIiwiZW5kIikpKSx0aGlzLl9zdXBlckFwcGx5KGFyZ3VtZW50cyksdm9pZCAwKX19KSx0LmZuLmJ1dHRvbj1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5sZW5ndGh8fHRoaXMubGVuZ3RoJiYiSU5QVVQiIT09dGhpc1swXS50YWdOYW1lfHx0aGlzLmxlbmd0aCYmIklOUFVUIj09PXRoaXNbMF0udGFnTmFtZSYmImNoZWNrYm94IiE9PXRoaXMuYXR0cigidHlwZSIpJiYicmFkaW8iIT09dGhpcy5hdHRyKCJ0eXBlIik/ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk6KHQudWkuY2hlY2tib3hyYWRpb3x8dC5lcnJvcigiQ2hlY2tib3hyYWRpbyB3aWRnZXQgbWlzc2luZyIpLDA9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMuY2hlY2tib3hyYWRpbyh7aWNvbjohMX0pOnRoaXMuY2hlY2tib3hyYWRpby5hcHBseSh0aGlzLGFyZ3VtZW50cykpfX0odC5mbi5idXR0b24pLHQuZm4uYnV0dG9uc2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHQudWkuY29udHJvbGdyb3VwfHx0LmVycm9yKCJDb250cm9sZ3JvdXAgd2lkZ2V0IG1pc3NpbmciKSwib3B0aW9uIj09PWFyZ3VtZW50c1swXSYmIml0ZW1zIj09PWFyZ3VtZW50c1sxXSYmYXJndW1lbnRzWzJdP3RoaXMuY29udHJvbGdyb3VwLmFwcGx5KHRoaXMsW2FyZ3VtZW50c1swXSwiaXRlbXMuYnV0dG9uIixhcmd1bWVudHNbMl1dKToib3B0aW9uIj09PWFyZ3VtZW50c1swXSYmIml0ZW1zIj09PWFyZ3VtZW50c1sxXT90aGlzLmNvbnRyb2xncm91cC5hcHBseSh0aGlzLFthcmd1bWVudHNbMF0sIml0ZW1zLmJ1dHRvbiJdKTooIm9iamVjdCI9PXR5cGVvZiBhcmd1bWVudHNbMF0mJmFyZ3VtZW50c1swXS5pdGVtcyYmKGFyZ3VtZW50c1swXS5pdGVtcz17YnV0dG9uOmFyZ3VtZW50c1swXS5pdGVtc30pLHRoaXMuY29udHJvbGdyb3VwLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9KSx0LnVpLmJ1dHRvbix0LmV4dGVuZCh0LnVpLHtkYXRlcGlja2VyOnt2ZXJzaW9uOiIxLjEyLjEifX0pO3ZhciBtO3QuZXh0ZW5kKHMucHJvdG90eXBlLHttYXJrZXJDbGFzc05hbWU6Imhhc0RhdGVwaWNrZXIiLG1heFJvd3M6NCxfd2lkZ2V0RGF0ZXBpY2tlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRwRGl2fSxzZXREZWZhdWx0czpmdW5jdGlvbih0KXtyZXR1cm4gYSh0aGlzLl9kZWZhdWx0cyx0fHx7fSksdGhpc30sX2F0dGFjaERhdGVwaWNrZXI6ZnVuY3Rpb24oZSxpKXt2YXIgcyxuLG87cz1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksbj0iZGl2Ij09PXN8fCJzcGFuIj09PXMsZS5pZHx8KHRoaXMudXVpZCs9MSxlLmlkPSJkcCIrdGhpcy51dWlkKSxvPXRoaXMuX25ld0luc3QodChlKSxuKSxvLnNldHRpbmdzPXQuZXh0ZW5kKHt9LGl8fHt9KSwiaW5wdXQiPT09cz90aGlzLl9jb25uZWN0RGF0ZXBpY2tlcihlLG8pOm4mJnRoaXMuX2lubGluZURhdGVwaWNrZXIoZSxvKX0sX25ld0luc3Q6ZnVuY3Rpb24oZSxpKXt2YXIgcz1lWzBdLmlkLnJlcGxhY2UoLyhbXkEtWmEtejAtOV9cLV0pL2csIlxcXFwkMSIpO3JldHVybntpZDpzLGlucHV0OmUsc2VsZWN0ZWREYXk6MCxzZWxlY3RlZE1vbnRoOjAsc2VsZWN0ZWRZZWFyOjAsZHJhd01vbnRoOjAsZHJhd1llYXI6MCxpbmxpbmU6aSxkcERpdjppP24odCgiPGRpdiBjbGFzcz0nIit0aGlzLl9pbmxpbmVDbGFzcysiIHVpLWRhdGVwaWNrZXIgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWhlbHBlci1jbGVhcmZpeCB1aS1jb3JuZXItYWxsJz48L2Rpdj4iKSk6dGhpcy5kcERpdn19LF9jb25uZWN0RGF0ZXBpY2tlcjpmdW5jdGlvbihlLGkpe3ZhciBzPXQoZSk7aS5hcHBlbmQ9dChbXSksaS50cmlnZ2VyPXQoW10pLHMuaGFzQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpfHwodGhpcy5fYXR0YWNobWVudHMocyxpKSxzLmFkZENsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKS5vbigia2V5ZG93biIsdGhpcy5fZG9LZXlEb3duKS5vbigia2V5cHJlc3MiLHRoaXMuX2RvS2V5UHJlc3MpLm9uKCJrZXl1cCIsdGhpcy5fZG9LZXlVcCksdGhpcy5fYXV0b1NpemUoaSksdC5kYXRhKGUsImRhdGVwaWNrZXIiLGkpLGkuc2V0dGluZ3MuZGlzYWJsZWQmJnRoaXMuX2Rpc2FibGVEYXRlcGlja2VyKGUpKX0sX2F0dGFjaG1lbnRzOmZ1bmN0aW9uKGUsaSl7dmFyIHMsbixvLGE9dGhpcy5fZ2V0KGksImFwcGVuZFRleHQiKSxyPXRoaXMuX2dldChpLCJpc1JUTCIpO2kuYXBwZW5kJiZpLmFwcGVuZC5yZW1vdmUoKSxhJiYoaS5hcHBlbmQ9dCgiPHNwYW4gY2xhc3M9JyIrdGhpcy5fYXBwZW5kQ2xhc3MrIic+IithKyI8L3NwYW4+IiksZVtyPyJiZWZvcmUiOiJhZnRlciJdKGkuYXBwZW5kKSksZS5vZmYoImZvY3VzIix0aGlzLl9zaG93RGF0ZXBpY2tlciksaS50cmlnZ2VyJiZpLnRyaWdnZXIucmVtb3ZlKCkscz10aGlzLl9nZXQoaSwic2hvd09uIiksKCJmb2N1cyI9PT1zfHwiYm90aCI9PT1zKSYmZS5vbigiZm9jdXMiLHRoaXMuX3Nob3dEYXRlcGlja2VyKSwoImJ1dHRvbiI9PT1zfHwiYm90aCI9PT1zKSYmKG49dGhpcy5fZ2V0KGksImJ1dHRvblRleHQiKSxvPXRoaXMuX2dldChpLCJidXR0b25JbWFnZSIpLGkudHJpZ2dlcj10KHRoaXMuX2dldChpLCJidXR0b25JbWFnZU9ubHkiKT90KCI8aW1nLz4iKS5hZGRDbGFzcyh0aGlzLl90cmlnZ2VyQ2xhc3MpLmF0dHIoe3NyYzpvLGFsdDpuLHRpdGxlOm59KTp0KCI8YnV0dG9uIHR5cGU9J2J1dHRvbic+PC9idXR0b24+IikuYWRkQ2xhc3ModGhpcy5fdHJpZ2dlckNsYXNzKS5odG1sKG8/dCgiPGltZy8+IikuYXR0cih7c3JjOm8sYWx0Om4sdGl0bGU6bn0pOm4pKSxlW3I/ImJlZm9yZSI6ImFmdGVyIl0oaS50cmlnZ2VyKSxpLnRyaWdnZXIub24oImNsaWNrIixmdW5jdGlvbigpe3JldHVybiB0LmRhdGVwaWNrZXIuX2RhdGVwaWNrZXJTaG93aW5nJiZ0LmRhdGVwaWNrZXIuX2xhc3RJbnB1dD09PWVbMF0/dC5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpOnQuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmcmJnQuZGF0ZXBpY2tlci5fbGFzdElucHV0IT09ZVswXT8odC5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpLHQuZGF0ZXBpY2tlci5fc2hvd0RhdGVwaWNrZXIoZVswXSkpOnQuZGF0ZXBpY2tlci5fc2hvd0RhdGVwaWNrZXIoZVswXSksITF9KSl9LF9hdXRvU2l6ZTpmdW5jdGlvbih0KXtpZih0aGlzLl9nZXQodCwiYXV0b1NpemUiKSYmIXQuaW5saW5lKXt2YXIgZSxpLHMsbixvPW5ldyBEYXRlKDIwMDksMTEsMjApLGE9dGhpcy5fZ2V0KHQsImRhdGVGb3JtYXQiKTthLm1hdGNoKC9bRE1dLykmJihlPWZ1bmN0aW9uKHQpe2ZvcihpPTAscz0wLG49MDt0Lmxlbmd0aD5uO24rKyl0W25dLmxlbmd0aD5pJiYoaT10W25dLmxlbmd0aCxzPW4pO3JldHVybiBzfSxvLnNldE1vbnRoKGUodGhpcy5fZ2V0KHQsYS5tYXRjaCgvTU0vKT8ibW9udGhOYW1lcyI6Im1vbnRoTmFtZXNTaG9ydCIpKSksby5zZXREYXRlKGUodGhpcy5fZ2V0KHQsYS5tYXRjaCgvREQvKT8iZGF5TmFtZXMiOiJkYXlOYW1lc1Nob3J0IikpKzIwLW8uZ2V0RGF5KCkpKSx0LmlucHV0LmF0dHIoInNpemUiLHRoaXMuX2Zvcm1hdERhdGUodCxvKS5sZW5ndGgpfX0sX2lubGluZURhdGVwaWNrZXI6ZnVuY3Rpb24oZSxpKXt2YXIgcz10KGUpO3MuaGFzQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpfHwocy5hZGRDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkuYXBwZW5kKGkuZHBEaXYpLHQuZGF0YShlLCJkYXRlcGlja2VyIixpKSx0aGlzLl9zZXREYXRlKGksdGhpcy5fZ2V0RGVmYXVsdERhdGUoaSksITApLHRoaXMuX3VwZGF0ZURhdGVwaWNrZXIoaSksdGhpcy5fdXBkYXRlQWx0ZXJuYXRlKGkpLGkuc2V0dGluZ3MuZGlzYWJsZWQmJnRoaXMuX2Rpc2FibGVEYXRlcGlja2VyKGUpLGkuZHBEaXYuY3NzKCJkaXNwbGF5IiwiYmxvY2siKSl9LF9kaWFsb2dEYXRlcGlja2VyOmZ1bmN0aW9uKGUsaSxzLG4sbyl7dmFyIHIsaCxsLGMsdSxkPXRoaXMuX2RpYWxvZ0luc3Q7cmV0dXJuIGR8fCh0aGlzLnV1aWQrPTEscj0iZHAiK3RoaXMudXVpZCx0aGlzLl9kaWFsb2dJbnB1dD10KCI8aW5wdXQgdHlwZT0ndGV4dCcgaWQ9JyIrcisiJyBzdHlsZT0ncG9zaXRpb246IGFic29sdXRlOyB0b3A6IC0xMDBweDsgd2lkdGg6IDBweDsnLz4iKSx0aGlzLl9kaWFsb2dJbnB1dC5vbigia2V5ZG93biIsdGhpcy5fZG9LZXlEb3duKSx0KCJib2R5IikuYXBwZW5kKHRoaXMuX2RpYWxvZ0lucHV0KSxkPXRoaXMuX2RpYWxvZ0luc3Q9dGhpcy5fbmV3SW5zdCh0aGlzLl9kaWFsb2dJbnB1dCwhMSksZC5zZXR0aW5ncz17fSx0LmRhdGEodGhpcy5fZGlhbG9nSW5wdXRbMF0sImRhdGVwaWNrZXIiLGQpKSxhKGQuc2V0dGluZ3Msbnx8e30pLGk9aSYmaS5jb25zdHJ1Y3Rvcj09PURhdGU/dGhpcy5fZm9ybWF0RGF0ZShkLGkpOmksdGhpcy5fZGlhbG9nSW5wdXQudmFsKGkpLHRoaXMuX3Bvcz1vP28ubGVuZ3RoP286W28ucGFnZVgsby5wYWdlWV06bnVsbCx0aGlzLl9wb3N8fChoPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCxsPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQsYz1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdHx8ZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0LHU9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcHx8ZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AsdGhpcy5fcG9zPVtoLzItMTAwK2MsbC8yLTE1MCt1XSksdGhpcy5fZGlhbG9nSW5wdXQuY3NzKCJsZWZ0Iix0aGlzLl9wb3NbMF0rMjArInB4IikuY3NzKCJ0b3AiLHRoaXMuX3Bvc1sxXSsicHgiKSxkLnNldHRpbmdzLm9uU2VsZWN0PXMsdGhpcy5faW5EaWFsb2c9ITAsdGhpcy5kcERpdi5hZGRDbGFzcyh0aGlzLl9kaWFsb2dDbGFzcyksdGhpcy5fc2hvd0RhdGVwaWNrZXIodGhpcy5fZGlhbG9nSW5wdXRbMF0pLHQuYmxvY2tVSSYmdC5ibG9ja1VJKHRoaXMuZHBEaXYpLHQuZGF0YSh0aGlzLl9kaWFsb2dJbnB1dFswXSwiZGF0ZXBpY2tlciIsZCksdGhpc30sX2Rlc3Ryb3lEYXRlcGlja2VyOmZ1bmN0aW9uKGUpe3ZhciBpLHM9dChlKSxuPXQuZGF0YShlLCJkYXRlcGlja2VyIik7cy5oYXNDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkmJihpPWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSx0LnJlbW92ZURhdGEoZSwiZGF0ZXBpY2tlciIpLCJpbnB1dCI9PT1pPyhuLmFwcGVuZC5yZW1vdmUoKSxuLnRyaWdnZXIucmVtb3ZlKCkscy5yZW1vdmVDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkub2ZmKCJmb2N1cyIsdGhpcy5fc2hvd0RhdGVwaWNrZXIpLm9mZigia2V5ZG93biIsdGhpcy5fZG9LZXlEb3duKS5vZmYoImtleXByZXNzIix0aGlzLl9kb0tleVByZXNzKS5vZmYoImtleXVwIix0aGlzLl9kb0tleVVwKSk6KCJkaXYiPT09aXx8InNwYW4iPT09aSkmJnMucmVtb3ZlQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpLmVtcHR5KCksbT09PW4mJihtPW51bGwpKX0sX2VuYWJsZURhdGVwaWNrZXI6ZnVuY3Rpb24oZSl7dmFyIGkscyxuPXQoZSksbz10LmRhdGEoZSwiZGF0ZXBpY2tlciIpO24uaGFzQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpJiYoaT1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksImlucHV0Ij09PWk/KGUuZGlzYWJsZWQ9ITEsby50cmlnZ2VyLmZpbHRlcigiYnV0dG9uIikuZWFjaChmdW5jdGlvbigpe3RoaXMuZGlzYWJsZWQ9ITF9KS5lbmQoKS5maWx0ZXIoImltZyIpLmNzcyh7b3BhY2l0eToiMS4wIixjdXJzb3I6IiJ9KSk6KCJkaXYiPT09aXx8InNwYW4iPT09aSkmJihzPW4uY2hpbGRyZW4oIi4iK3RoaXMuX2lubGluZUNsYXNzKSxzLmNoaWxkcmVuKCkucmVtb3ZlQ2xhc3MoInVpLXN0YXRlLWRpc2FibGVkIikscy5maW5kKCJzZWxlY3QudWktZGF0ZXBpY2tlci1tb250aCwgc2VsZWN0LnVpLWRhdGVwaWNrZXIteWVhciIpLnByb3AoImRpc2FibGVkIiwhMSkpLHRoaXMuX2Rpc2FibGVkSW5wdXRzPXQubWFwKHRoaXMuX2Rpc2FibGVkSW5wdXRzLGZ1bmN0aW9uKHQpe3JldHVybiB0PT09ZT9udWxsOnR9KSl9LF9kaXNhYmxlRGF0ZXBpY2tlcjpmdW5jdGlvbihlKXt2YXIgaSxzLG49dChlKSxvPXQuZGF0YShlLCJkYXRlcGlja2VyIik7bi5oYXNDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkmJihpPWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSwiaW5wdXQiPT09aT8oZS5kaXNhYmxlZD0hMCxvLnRyaWdnZXIuZmlsdGVyKCJidXR0b24iKS5lYWNoKGZ1bmN0aW9uKCl7dGhpcy5kaXNhYmxlZD0hMH0pLmVuZCgpLmZpbHRlcigiaW1nIikuY3NzKHtvcGFjaXR5OiIwLjUiLGN1cnNvcjoiZGVmYXVsdCJ9KSk6KCJkaXYiPT09aXx8InNwYW4iPT09aSkmJihzPW4uY2hpbGRyZW4oIi4iK3RoaXMuX2lubGluZUNsYXNzKSxzLmNoaWxkcmVuKCkuYWRkQ2xhc3MoInVpLXN0YXRlLWRpc2FibGVkIikscy5maW5kKCJzZWxlY3QudWktZGF0ZXBpY2tlci1tb250aCwgc2VsZWN0LnVpLWRhdGVwaWNrZXIteWVhciIpLnByb3AoImRpc2FibGVkIiwhMCkpLHRoaXMuX2Rpc2FibGVkSW5wdXRzPXQubWFwKHRoaXMuX2Rpc2FibGVkSW5wdXRzLGZ1bmN0aW9uKHQpe3JldHVybiB0PT09ZT9udWxsOnR9KSx0aGlzLl9kaXNhYmxlZElucHV0c1t0aGlzLl9kaXNhYmxlZElucHV0cy5sZW5ndGhdPWUpfSxfaXNEaXNhYmxlZERhdGVwaWNrZXI6ZnVuY3Rpb24odCl7aWYoIXQpcmV0dXJuITE7Zm9yKHZhciBlPTA7dGhpcy5fZGlzYWJsZWRJbnB1dHMubGVuZ3RoPmU7ZSsrKWlmKHRoaXMuX2Rpc2FibGVkSW5wdXRzW2VdPT09dClyZXR1cm4hMDtyZXR1cm4hMX0sX2dldEluc3Q6ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiB0LmRhdGEoZSwiZGF0ZXBpY2tlciIpfWNhdGNoKGkpe3Rocm93Ik1pc3NpbmcgaW5zdGFuY2UgZGF0YSBmb3IgdGhpcyBkYXRlcGlja2VyIn19LF9vcHRpb25EYXRlcGlja2VyOmZ1bmN0aW9uKGUsaSxzKXt2YXIgbixvLHIsaCxsPXRoaXMuX2dldEluc3QoZSk7cmV0dXJuIDI9PT1hcmd1bWVudHMubGVuZ3RoJiYic3RyaW5nIj09dHlwZW9mIGk/ImRlZmF1bHRzIj09PWk/dC5leHRlbmQoe30sdC5kYXRlcGlja2VyLl9kZWZhdWx0cyk6bD8iYWxsIj09PWk/dC5leHRlbmQoe30sbC5zZXR0aW5ncyk6dGhpcy5fZ2V0KGwsaSk6bnVsbDoobj1pfHx7fSwic3RyaW5nIj09dHlwZW9mIGkmJihuPXt9LG5baV09cyksbCYmKHRoaXMuX2N1ckluc3Q9PT1sJiZ0aGlzLl9oaWRlRGF0ZXBpY2tlcigpLG89dGhpcy5fZ2V0RGF0ZURhdGVwaWNrZXIoZSwhMCkscj10aGlzLl9nZXRNaW5NYXhEYXRlKGwsIm1pbiIpLGg9dGhpcy5fZ2V0TWluTWF4RGF0ZShsLCJtYXgiKSxhKGwuc2V0dGluZ3MsbiksbnVsbCE9PXImJnZvaWQgMCE9PW4uZGF0ZUZvcm1hdCYmdm9pZCAwPT09bi5taW5EYXRlJiYobC5zZXR0aW5ncy5taW5EYXRlPXRoaXMuX2Zvcm1hdERhdGUobCxyKSksbnVsbCE9PWgmJnZvaWQgMCE9PW4uZGF0ZUZvcm1hdCYmdm9pZCAwPT09bi5tYXhEYXRlJiYobC5zZXR0aW5ncy5tYXhEYXRlPXRoaXMuX2Zvcm1hdERhdGUobCxoKSksImRpc2FibGVkImluIG4mJihuLmRpc2FibGVkP3RoaXMuX2Rpc2FibGVEYXRlcGlja2VyKGUpOnRoaXMuX2VuYWJsZURhdGVwaWNrZXIoZSkpLHRoaXMuX2F0dGFjaG1lbnRzKHQoZSksbCksdGhpcy5fYXV0b1NpemUobCksdGhpcy5fc2V0RGF0ZShsLG8pLHRoaXMuX3VwZGF0ZUFsdGVybmF0ZShsKSx0aGlzLl91cGRhdGVEYXRlcGlja2VyKGwpKSx2b2lkIDApfSxfY2hhbmdlRGF0ZXBpY2tlcjpmdW5jdGlvbih0LGUsaSl7dGhpcy5fb3B0aW9uRGF0ZXBpY2tlcih0LGUsaSl9LF9yZWZyZXNoRGF0ZXBpY2tlcjpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9nZXRJbnN0KHQpO2UmJnRoaXMuX3VwZGF0ZURhdGVwaWNrZXIoZSl9LF9zZXREYXRlRGF0ZXBpY2tlcjpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuX2dldEluc3QodCk7aSYmKHRoaXMuX3NldERhdGUoaSxlKSx0aGlzLl91cGRhdGVEYXRlcGlja2VyKGkpLHRoaXMuX3VwZGF0ZUFsdGVybmF0ZShpKSl9LF9nZXREYXRlRGF0ZXBpY2tlcjpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuX2dldEluc3QodCk7cmV0dXJuIGkmJiFpLmlubGluZSYmdGhpcy5fc2V0RGF0ZUZyb21GaWVsZChpLGUpLGk/dGhpcy5fZ2V0RGF0ZShpKTpudWxsfSxfZG9LZXlEb3duOmZ1bmN0aW9uKGUpe3ZhciBpLHMsbixvPXQuZGF0ZXBpY2tlci5fZ2V0SW5zdChlLnRhcmdldCksYT0hMCxyPW8uZHBEaXYuaXMoIi51aS1kYXRlcGlja2VyLXJ0bCIpO2lmKG8uX2tleUV2ZW50PSEwLHQuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmcpc3dpdGNoKGUua2V5Q29kZSl7Y2FzZSA5OnQuZGF0ZXBpY2tlci5faGlkZURhdGVwaWNrZXIoKSxhPSExO2JyZWFrO2Nhc2UgMTM6cmV0dXJuIG49dCgidGQuIit0LmRhdGVwaWNrZXIuX2RheU92ZXJDbGFzcysiOm5vdCguIit0LmRhdGVwaWNrZXIuX2N1cnJlbnRDbGFzcysiKSIsby5kcERpdiksblswXSYmdC5kYXRlcGlja2VyLl9zZWxlY3REYXkoZS50YXJnZXQsby5zZWxlY3RlZE1vbnRoLG8uc2VsZWN0ZWRZZWFyLG5bMF0pLGk9dC5kYXRlcGlja2VyLl9nZXQobywib25TZWxlY3QiKSxpPyhzPXQuZGF0ZXBpY2tlci5fZm9ybWF0RGF0ZShvKSxpLmFwcGx5KG8uaW5wdXQ/by5pbnB1dFswXTpudWxsLFtzLG9dKSk6dC5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpLCExO2Nhc2UgMjc6dC5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpO2JyZWFrO2Nhc2UgMzM6dC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGUudGFyZ2V0LGUuY3RybEtleT8tdC5kYXRlcGlja2VyLl9nZXQobywic3RlcEJpZ01vbnRocyIpOi10LmRhdGVwaWNrZXIuX2dldChvLCJzdGVwTW9udGhzIiksIk0iKTticmVhaztjYXNlIDM0OnQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShlLnRhcmdldCxlLmN0cmxLZXk/K3QuZGF0ZXBpY2tlci5fZ2V0KG8sInN0ZXBCaWdNb250aHMiKTordC5kYXRlcGlja2VyLl9nZXQobywic3RlcE1vbnRocyIpLCJNIik7YnJlYWs7Y2FzZSAzNTooZS5jdHJsS2V5fHxlLm1ldGFLZXkpJiZ0LmRhdGVwaWNrZXIuX2NsZWFyRGF0ZShlLnRhcmdldCksYT1lLmN0cmxLZXl8fGUubWV0YUtleTticmVhaztjYXNlIDM2OihlLmN0cmxLZXl8fGUubWV0YUtleSkmJnQuZGF0ZXBpY2tlci5fZ290b1RvZGF5KGUudGFyZ2V0KSxhPWUuY3RybEtleXx8ZS5tZXRhS2V5O2JyZWFrO2Nhc2UgMzc6KGUuY3RybEtleXx8ZS5tZXRhS2V5KSYmdC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGUudGFyZ2V0LHI/MTotMSwiRCIpLGE9ZS5jdHJsS2V5fHxlLm1ldGFLZXksZS5vcmlnaW5hbEV2ZW50LmFsdEtleSYmdC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGUudGFyZ2V0LGUuY3RybEtleT8tdC5kYXRlcGlja2VyLl9nZXQobywic3RlcEJpZ01vbnRocyIpOi10LmRhdGVwaWNrZXIuX2dldChvLCJzdGVwTW9udGhzIiksIk0iKTticmVhaztjYXNlIDM4OihlLmN0cmxLZXl8fGUubWV0YUtleSkmJnQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShlLnRhcmdldCwtNywiRCIpLGE9ZS5jdHJsS2V5fHxlLm1ldGFLZXk7YnJlYWs7Y2FzZSAzOTooZS5jdHJsS2V5fHxlLm1ldGFLZXkpJiZ0LmRhdGVwaWNrZXIuX2FkanVzdERhdGUoZS50YXJnZXQscj8tMToxLCJEIiksYT1lLmN0cmxLZXl8fGUubWV0YUtleSxlLm9yaWdpbmFsRXZlbnQuYWx0S2V5JiZ0LmRhdGVwaWNrZXIuX2FkanVzdERhdGUoZS50YXJnZXQsZS5jdHJsS2V5Pyt0LmRhdGVwaWNrZXIuX2dldChvLCJzdGVwQmlnTW9udGhzIik6K3QuZGF0ZXBpY2tlci5fZ2V0KG8sInN0ZXBNb250aHMiKSwiTSIpO2JyZWFrO2Nhc2UgNDA6KGUuY3RybEtleXx8ZS5tZXRhS2V5KSYmdC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGUudGFyZ2V0LDcsIkQiKSxhPWUuY3RybEtleXx8ZS5tZXRhS2V5O2JyZWFrO2RlZmF1bHQ6YT0hMX1lbHNlIDM2PT09ZS5rZXlDb2RlJiZlLmN0cmxLZXk/dC5kYXRlcGlja2VyLl9zaG93RGF0ZXBpY2tlcih0aGlzKTphPSExO2EmJihlLnByZXZlbnREZWZhdWx0KCksZS5zdG9wUHJvcGFnYXRpb24oKSl9LF9kb0tleVByZXNzOmZ1bmN0aW9uKGUpe3ZhciBpLHMsbj10LmRhdGVwaWNrZXIuX2dldEluc3QoZS50YXJnZXQpO3JldHVybiB0LmRhdGVwaWNrZXIuX2dldChuLCJjb25zdHJhaW5JbnB1dCIpPyhpPXQuZGF0ZXBpY2tlci5fcG9zc2libGVDaGFycyh0LmRhdGVwaWNrZXIuX2dldChuLCJkYXRlRm9ybWF0IikpLHM9U3RyaW5nLmZyb21DaGFyQ29kZShudWxsPT1lLmNoYXJDb2RlP2Uua2V5Q29kZTplLmNoYXJDb2RlKSxlLmN0cmxLZXl8fGUubWV0YUtleXx8IiAiPnN8fCFpfHxpLmluZGV4T2Yocyk+LTEpOnZvaWQgMH0sX2RvS2V5VXA6ZnVuY3Rpb24oZSl7dmFyIGkscz10LmRhdGVwaWNrZXIuX2dldEluc3QoZS50YXJnZXQpO2lmKHMuaW5wdXQudmFsKCkhPT1zLmxhc3RWYWwpdHJ5e2k9dC5kYXRlcGlja2VyLnBhcnNlRGF0ZSh0LmRhdGVwaWNrZXIuX2dldChzLCJkYXRlRm9ybWF0Iikscy5pbnB1dD9zLmlucHV0LnZhbCgpOm51bGwsdC5kYXRlcGlja2VyLl9nZXRGb3JtYXRDb25maWcocykpLGkmJih0LmRhdGVwaWNrZXIuX3NldERhdGVGcm9tRmllbGQocyksdC5kYXRlcGlja2VyLl91cGRhdGVBbHRlcm5hdGUocyksdC5kYXRlcGlja2VyLl91cGRhdGVEYXRlcGlja2VyKHMpKX1jYXRjaChuKXt9cmV0dXJuITB9LF9zaG93RGF0ZXBpY2tlcjpmdW5jdGlvbihlKXtpZihlPWUudGFyZ2V0fHxlLCJpbnB1dCIhPT1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJihlPXQoImlucHV0IixlLnBhcmVudE5vZGUpWzBdKSwhdC5kYXRlcGlja2VyLl9pc0Rpc2FibGVkRGF0ZXBpY2tlcihlKSYmdC5kYXRlcGlja2VyLl9sYXN0SW5wdXQhPT1lKXt2YXIgcyxuLG8scixoLGwsYztzPXQuZGF0ZXBpY2tlci5fZ2V0SW5zdChlKSx0LmRhdGVwaWNrZXIuX2N1ckluc3QmJnQuZGF0ZXBpY2tlci5fY3VySW5zdCE9PXMmJih0LmRhdGVwaWNrZXIuX2N1ckluc3QuZHBEaXYuc3RvcCghMCwhMCkscyYmdC5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZyYmdC5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcih0LmRhdGVwaWNrZXIuX2N1ckluc3QuaW5wdXRbMF0pKSxuPXQuZGF0ZXBpY2tlci5fZ2V0KHMsImJlZm9yZVNob3ciKSxvPW4/bi5hcHBseShlLFtlLHNdKTp7fSxvIT09ITEmJihhKHMuc2V0dGluZ3Msbykscy5sYXN0VmFsPW51bGwsdC5kYXRlcGlja2VyLl9sYXN0SW5wdXQ9ZSx0LmRhdGVwaWNrZXIuX3NldERhdGVGcm9tRmllbGQocyksdC5kYXRlcGlja2VyLl9pbkRpYWxvZyYmKGUudmFsdWU9IiIpLHQuZGF0ZXBpY2tlci5fcG9zfHwodC5kYXRlcGlja2VyLl9wb3M9dC5kYXRlcGlja2VyLl9maW5kUG9zKGUpLHQuZGF0ZXBpY2tlci5fcG9zWzFdKz1lLm9mZnNldEhlaWdodCkscj0hMSx0KGUpLnBhcmVudHMoKS5lYWNoKGZ1bmN0aW9uKCl7cmV0dXJuIHJ8PSJmaXhlZCI9PT10KHRoaXMpLmNzcygicG9zaXRpb24iKSwhcn0pLGg9e2xlZnQ6dC5kYXRlcGlja2VyLl9wb3NbMF0sdG9wOnQuZGF0ZXBpY2tlci5fcG9zWzFdfSx0LmRhdGVwaWNrZXIuX3Bvcz1udWxsLHMuZHBEaXYuZW1wdHkoKSxzLmRwRGl2LmNzcyh7cG9zaXRpb246ImFic29sdXRlIixkaXNwbGF5OiJibG9jayIsdG9wOiItMTAwMHB4In0pLHQuZGF0ZXBpY2tlci5fdXBkYXRlRGF0ZXBpY2tlcihzKSxoPXQuZGF0ZXBpY2tlci5fY2hlY2tPZmZzZXQocyxoLHIpLHMuZHBEaXYuY3NzKHtwb3NpdGlvbjp0LmRhdGVwaWNrZXIuX2luRGlhbG9nJiZ0LmJsb2NrVUk/InN0YXRpYyI6cj8iZml4ZWQiOiJhYnNvbHV0ZSIsZGlzcGxheToibm9uZSIsbGVmdDpoLmxlZnQrInB4Iix0b3A6aC50b3ArInB4In0pLHMuaW5saW5lfHwobD10LmRhdGVwaWNrZXIuX2dldChzLCJzaG93QW5pbSIpLGM9dC5kYXRlcGlja2VyLl9nZXQocywiZHVyYXRpb24iKSxzLmRwRGl2LmNzcygiei1pbmRleCIsaSh0KGUpKSsxKSx0LmRhdGVwaWNrZXIuX2RhdGVwaWNrZXJTaG93aW5nPSEwLHQuZWZmZWN0cyYmdC5lZmZlY3RzLmVmZmVjdFtsXT9zLmRwRGl2LnNob3cobCx0LmRhdGVwaWNrZXIuX2dldChzLCJzaG93T3B0aW9ucyIpLGMpOnMuZHBEaXZbbHx8InNob3ciXShsP2M6bnVsbCksdC5kYXRlcGlja2VyLl9zaG91bGRGb2N1c0lucHV0KHMpJiZzLmlucHV0LnRyaWdnZXIoImZvY3VzIiksdC5kYXRlcGlja2VyLl9jdXJJbnN0PXMpKQp9fSxfdXBkYXRlRGF0ZXBpY2tlcjpmdW5jdGlvbihlKXt0aGlzLm1heFJvd3M9NCxtPWUsZS5kcERpdi5lbXB0eSgpLmFwcGVuZCh0aGlzLl9nZW5lcmF0ZUhUTUwoZSkpLHRoaXMuX2F0dGFjaEhhbmRsZXJzKGUpO3ZhciBpLHM9dGhpcy5fZ2V0TnVtYmVyT2ZNb250aHMoZSksbj1zWzFdLGE9MTcscj1lLmRwRGl2LmZpbmQoIi4iK3RoaXMuX2RheU92ZXJDbGFzcysiIGEiKTtyLmxlbmd0aD4wJiZvLmFwcGx5KHIuZ2V0KDApKSxlLmRwRGl2LnJlbW92ZUNsYXNzKCJ1aS1kYXRlcGlja2VyLW11bHRpLTIgdWktZGF0ZXBpY2tlci1tdWx0aS0zIHVpLWRhdGVwaWNrZXItbXVsdGktNCIpLndpZHRoKCIiKSxuPjEmJmUuZHBEaXYuYWRkQ2xhc3MoInVpLWRhdGVwaWNrZXItbXVsdGktIituKS5jc3MoIndpZHRoIixhKm4rImVtIiksZS5kcERpdlsoMSE9PXNbMF18fDEhPT1zWzFdPyJhZGQiOiJyZW1vdmUiKSsiQ2xhc3MiXSgidWktZGF0ZXBpY2tlci1tdWx0aSIpLGUuZHBEaXZbKHRoaXMuX2dldChlLCJpc1JUTCIpPyJhZGQiOiJyZW1vdmUiKSsiQ2xhc3MiXSgidWktZGF0ZXBpY2tlci1ydGwiKSxlPT09dC5kYXRlcGlja2VyLl9jdXJJbnN0JiZ0LmRhdGVwaWNrZXIuX2RhdGVwaWNrZXJTaG93aW5nJiZ0LmRhdGVwaWNrZXIuX3Nob3VsZEZvY3VzSW5wdXQoZSkmJmUuaW5wdXQudHJpZ2dlcigiZm9jdXMiKSxlLnllYXJzaHRtbCYmKGk9ZS55ZWFyc2h0bWwsc2V0VGltZW91dChmdW5jdGlvbigpe2k9PT1lLnllYXJzaHRtbCYmZS55ZWFyc2h0bWwmJmUuZHBEaXYuZmluZCgic2VsZWN0LnVpLWRhdGVwaWNrZXIteWVhcjpmaXJzdCIpLnJlcGxhY2VXaXRoKGUueWVhcnNodG1sKSxpPWUueWVhcnNodG1sPW51bGx9LDApKX0sX3Nob3VsZEZvY3VzSW5wdXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQuaW5wdXQmJnQuaW5wdXQuaXMoIjp2aXNpYmxlIikmJiF0LmlucHV0LmlzKCI6ZGlzYWJsZWQiKSYmIXQuaW5wdXQuaXMoIjpmb2N1cyIpfSxfY2hlY2tPZmZzZXQ6ZnVuY3Rpb24oZSxpLHMpe3ZhciBuPWUuZHBEaXYub3V0ZXJXaWR0aCgpLG89ZS5kcERpdi5vdXRlckhlaWdodCgpLGE9ZS5pbnB1dD9lLmlucHV0Lm91dGVyV2lkdGgoKTowLHI9ZS5pbnB1dD9lLmlucHV0Lm91dGVySGVpZ2h0KCk6MCxoPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCsocz8wOnQoZG9jdW1lbnQpLnNjcm9sbExlZnQoKSksbD1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KyhzPzA6dChkb2N1bWVudCkuc2Nyb2xsVG9wKCkpO3JldHVybiBpLmxlZnQtPXRoaXMuX2dldChlLCJpc1JUTCIpP24tYTowLGkubGVmdC09cyYmaS5sZWZ0PT09ZS5pbnB1dC5vZmZzZXQoKS5sZWZ0P3QoZG9jdW1lbnQpLnNjcm9sbExlZnQoKTowLGkudG9wLT1zJiZpLnRvcD09PWUuaW5wdXQub2Zmc2V0KCkudG9wK3I/dChkb2N1bWVudCkuc2Nyb2xsVG9wKCk6MCxpLmxlZnQtPU1hdGgubWluKGkubGVmdCxpLmxlZnQrbj5oJiZoPm4/TWF0aC5hYnMoaS5sZWZ0K24taCk6MCksaS50b3AtPU1hdGgubWluKGkudG9wLGkudG9wK28+bCYmbD5vP01hdGguYWJzKG8rcik6MCksaX0sX2ZpbmRQb3M6ZnVuY3Rpb24oZSl7Zm9yKHZhciBpLHM9dGhpcy5fZ2V0SW5zdChlKSxuPXRoaXMuX2dldChzLCJpc1JUTCIpO2UmJigiaGlkZGVuIj09PWUudHlwZXx8MSE9PWUubm9kZVR5cGV8fHQuZXhwci5maWx0ZXJzLmhpZGRlbihlKSk7KWU9ZVtuPyJwcmV2aW91c1NpYmxpbmciOiJuZXh0U2libGluZyJdO3JldHVybiBpPXQoZSkub2Zmc2V0KCksW2kubGVmdCxpLnRvcF19LF9oaWRlRGF0ZXBpY2tlcjpmdW5jdGlvbihlKXt2YXIgaSxzLG4sbyxhPXRoaXMuX2N1ckluc3Q7IWF8fGUmJmEhPT10LmRhdGEoZSwiZGF0ZXBpY2tlciIpfHx0aGlzLl9kYXRlcGlja2VyU2hvd2luZyYmKGk9dGhpcy5fZ2V0KGEsInNob3dBbmltIikscz10aGlzLl9nZXQoYSwiZHVyYXRpb24iKSxuPWZ1bmN0aW9uKCl7dC5kYXRlcGlja2VyLl90aWR5RGlhbG9nKGEpfSx0LmVmZmVjdHMmJih0LmVmZmVjdHMuZWZmZWN0W2ldfHx0LmVmZmVjdHNbaV0pP2EuZHBEaXYuaGlkZShpLHQuZGF0ZXBpY2tlci5fZ2V0KGEsInNob3dPcHRpb25zIikscyxuKTphLmRwRGl2WyJzbGlkZURvd24iPT09aT8ic2xpZGVVcCI6ImZhZGVJbiI9PT1pPyJmYWRlT3V0IjoiaGlkZSJdKGk/czpudWxsLG4pLGl8fG4oKSx0aGlzLl9kYXRlcGlja2VyU2hvd2luZz0hMSxvPXRoaXMuX2dldChhLCJvbkNsb3NlIiksbyYmby5hcHBseShhLmlucHV0P2EuaW5wdXRbMF06bnVsbCxbYS5pbnB1dD9hLmlucHV0LnZhbCgpOiIiLGFdKSx0aGlzLl9sYXN0SW5wdXQ9bnVsbCx0aGlzLl9pbkRpYWxvZyYmKHRoaXMuX2RpYWxvZ0lucHV0LmNzcyh7cG9zaXRpb246ImFic29sdXRlIixsZWZ0OiIwIix0b3A6Ii0xMDBweCJ9KSx0LmJsb2NrVUkmJih0LnVuYmxvY2tVSSgpLHQoImJvZHkiKS5hcHBlbmQodGhpcy5kcERpdikpKSx0aGlzLl9pbkRpYWxvZz0hMSl9LF90aWR5RGlhbG9nOmZ1bmN0aW9uKHQpe3QuZHBEaXYucmVtb3ZlQ2xhc3ModGhpcy5fZGlhbG9nQ2xhc3MpLm9mZigiLnVpLWRhdGVwaWNrZXItY2FsZW5kYXIiKX0sX2NoZWNrRXh0ZXJuYWxDbGljazpmdW5jdGlvbihlKXtpZih0LmRhdGVwaWNrZXIuX2N1ckluc3Qpe3ZhciBpPXQoZS50YXJnZXQpLHM9dC5kYXRlcGlja2VyLl9nZXRJbnN0KGlbMF0pOyhpWzBdLmlkIT09dC5kYXRlcGlja2VyLl9tYWluRGl2SWQmJjA9PT1pLnBhcmVudHMoIiMiK3QuZGF0ZXBpY2tlci5fbWFpbkRpdklkKS5sZW5ndGgmJiFpLmhhc0NsYXNzKHQuZGF0ZXBpY2tlci5tYXJrZXJDbGFzc05hbWUpJiYhaS5jbG9zZXN0KCIuIit0LmRhdGVwaWNrZXIuX3RyaWdnZXJDbGFzcykubGVuZ3RoJiZ0LmRhdGVwaWNrZXIuX2RhdGVwaWNrZXJTaG93aW5nJiYoIXQuZGF0ZXBpY2tlci5faW5EaWFsb2d8fCF0LmJsb2NrVUkpfHxpLmhhc0NsYXNzKHQuZGF0ZXBpY2tlci5tYXJrZXJDbGFzc05hbWUpJiZ0LmRhdGVwaWNrZXIuX2N1ckluc3QhPT1zKSYmdC5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpfX0sX2FkanVzdERhdGU6ZnVuY3Rpb24oZSxpLHMpe3ZhciBuPXQoZSksbz10aGlzLl9nZXRJbnN0KG5bMF0pO3RoaXMuX2lzRGlzYWJsZWREYXRlcGlja2VyKG5bMF0pfHwodGhpcy5fYWRqdXN0SW5zdERhdGUobyxpKygiTSI9PT1zP3RoaXMuX2dldChvLCJzaG93Q3VycmVudEF0UG9zIik6MCkscyksdGhpcy5fdXBkYXRlRGF0ZXBpY2tlcihvKSl9LF9nb3RvVG9kYXk6ZnVuY3Rpb24oZSl7dmFyIGkscz10KGUpLG49dGhpcy5fZ2V0SW5zdChzWzBdKTt0aGlzLl9nZXQobiwiZ290b0N1cnJlbnQiKSYmbi5jdXJyZW50RGF5PyhuLnNlbGVjdGVkRGF5PW4uY3VycmVudERheSxuLmRyYXdNb250aD1uLnNlbGVjdGVkTW9udGg9bi5jdXJyZW50TW9udGgsbi5kcmF3WWVhcj1uLnNlbGVjdGVkWWVhcj1uLmN1cnJlbnRZZWFyKTooaT1uZXcgRGF0ZSxuLnNlbGVjdGVkRGF5PWkuZ2V0RGF0ZSgpLG4uZHJhd01vbnRoPW4uc2VsZWN0ZWRNb250aD1pLmdldE1vbnRoKCksbi5kcmF3WWVhcj1uLnNlbGVjdGVkWWVhcj1pLmdldEZ1bGxZZWFyKCkpLHRoaXMuX25vdGlmeUNoYW5nZShuKSx0aGlzLl9hZGp1c3REYXRlKHMpfSxfc2VsZWN0TW9udGhZZWFyOmZ1bmN0aW9uKGUsaSxzKXt2YXIgbj10KGUpLG89dGhpcy5fZ2V0SW5zdChuWzBdKTtvWyJzZWxlY3RlZCIrKCJNIj09PXM/Ik1vbnRoIjoiWWVhciIpXT1vWyJkcmF3IisoIk0iPT09cz8iTW9udGgiOiJZZWFyIildPXBhcnNlSW50KGkub3B0aW9uc1tpLnNlbGVjdGVkSW5kZXhdLnZhbHVlLDEwKSx0aGlzLl9ub3RpZnlDaGFuZ2UobyksdGhpcy5fYWRqdXN0RGF0ZShuKX0sX3NlbGVjdERheTpmdW5jdGlvbihlLGkscyxuKXt2YXIgbyxhPXQoZSk7dChuKS5oYXNDbGFzcyh0aGlzLl91bnNlbGVjdGFibGVDbGFzcyl8fHRoaXMuX2lzRGlzYWJsZWREYXRlcGlja2VyKGFbMF0pfHwobz10aGlzLl9nZXRJbnN0KGFbMF0pLG8uc2VsZWN0ZWREYXk9by5jdXJyZW50RGF5PXQoImEiLG4pLmh0bWwoKSxvLnNlbGVjdGVkTW9udGg9by5jdXJyZW50TW9udGg9aSxvLnNlbGVjdGVkWWVhcj1vLmN1cnJlbnRZZWFyPXMsdGhpcy5fc2VsZWN0RGF0ZShlLHRoaXMuX2Zvcm1hdERhdGUobyxvLmN1cnJlbnREYXksby5jdXJyZW50TW9udGgsby5jdXJyZW50WWVhcikpKX0sX2NsZWFyRGF0ZTpmdW5jdGlvbihlKXt2YXIgaT10KGUpO3RoaXMuX3NlbGVjdERhdGUoaSwiIil9LF9zZWxlY3REYXRlOmZ1bmN0aW9uKGUsaSl7dmFyIHMsbj10KGUpLG89dGhpcy5fZ2V0SW5zdChuWzBdKTtpPW51bGwhPWk/aTp0aGlzLl9mb3JtYXREYXRlKG8pLG8uaW5wdXQmJm8uaW5wdXQudmFsKGkpLHRoaXMuX3VwZGF0ZUFsdGVybmF0ZShvKSxzPXRoaXMuX2dldChvLCJvblNlbGVjdCIpLHM/cy5hcHBseShvLmlucHV0P28uaW5wdXRbMF06bnVsbCxbaSxvXSk6by5pbnB1dCYmby5pbnB1dC50cmlnZ2VyKCJjaGFuZ2UiKSxvLmlubGluZT90aGlzLl91cGRhdGVEYXRlcGlja2VyKG8pOih0aGlzLl9oaWRlRGF0ZXBpY2tlcigpLHRoaXMuX2xhc3RJbnB1dD1vLmlucHV0WzBdLCJvYmplY3QiIT10eXBlb2Ygby5pbnB1dFswXSYmby5pbnB1dC50cmlnZ2VyKCJmb2N1cyIpLHRoaXMuX2xhc3RJbnB1dD1udWxsKX0sX3VwZGF0ZUFsdGVybmF0ZTpmdW5jdGlvbihlKXt2YXIgaSxzLG4sbz10aGlzLl9nZXQoZSwiYWx0RmllbGQiKTtvJiYoaT10aGlzLl9nZXQoZSwiYWx0Rm9ybWF0Iil8fHRoaXMuX2dldChlLCJkYXRlRm9ybWF0Iikscz10aGlzLl9nZXREYXRlKGUpLG49dGhpcy5mb3JtYXREYXRlKGkscyx0aGlzLl9nZXRGb3JtYXRDb25maWcoZSkpLHQobykudmFsKG4pKX0sbm9XZWVrZW5kczpmdW5jdGlvbih0KXt2YXIgZT10LmdldERheSgpO3JldHVybltlPjAmJjY+ZSwiIl19LGlzbzg2MDFXZWVrOmZ1bmN0aW9uKHQpe3ZhciBlLGk9bmV3IERhdGUodC5nZXRUaW1lKCkpO3JldHVybiBpLnNldERhdGUoaS5nZXREYXRlKCkrNC0oaS5nZXREYXkoKXx8NykpLGU9aS5nZXRUaW1lKCksaS5zZXRNb250aCgwKSxpLnNldERhdGUoMSksTWF0aC5mbG9vcihNYXRoLnJvdW5kKChlLWkpLzg2NGU1KS83KSsxfSxwYXJzZURhdGU6ZnVuY3Rpb24oZSxpLHMpe2lmKG51bGw9PWV8fG51bGw9PWkpdGhyb3ciSW52YWxpZCBhcmd1bWVudHMiO2lmKGk9Im9iamVjdCI9PXR5cGVvZiBpPyIiK2k6aSsiIiwiIj09PWkpcmV0dXJuIG51bGw7dmFyIG4sbyxhLHIsaD0wLGw9KHM/cy5zaG9ydFllYXJDdXRvZmY6bnVsbCl8fHRoaXMuX2RlZmF1bHRzLnNob3J0WWVhckN1dG9mZixjPSJzdHJpbmciIT10eXBlb2YgbD9sOihuZXcgRGF0ZSkuZ2V0RnVsbFllYXIoKSUxMDArcGFyc2VJbnQobCwxMCksdT0ocz9zLmRheU5hbWVzU2hvcnQ6bnVsbCl8fHRoaXMuX2RlZmF1bHRzLmRheU5hbWVzU2hvcnQsZD0ocz9zLmRheU5hbWVzOm51bGwpfHx0aGlzLl9kZWZhdWx0cy5kYXlOYW1lcyxwPShzP3MubW9udGhOYW1lc1Nob3J0Om51bGwpfHx0aGlzLl9kZWZhdWx0cy5tb250aE5hbWVzU2hvcnQsZj0ocz9zLm1vbnRoTmFtZXM6bnVsbCl8fHRoaXMuX2RlZmF1bHRzLm1vbnRoTmFtZXMsZz0tMSxtPS0xLF89LTEsdj0tMSxiPSExLHk9ZnVuY3Rpb24odCl7dmFyIGk9ZS5sZW5ndGg+bisxJiZlLmNoYXJBdChuKzEpPT09dDtyZXR1cm4gaSYmbisrLGl9LHc9ZnVuY3Rpb24odCl7dmFyIGU9eSh0KSxzPSJAIj09PXQ/MTQ6IiEiPT09dD8yMDoieSI9PT10JiZlPzQ6Im8iPT09dD8zOjIsbj0ieSI9PT10P3M6MSxvPVJlZ0V4cCgiXlxcZHsiK24rIiwiK3MrIn0iKSxhPWkuc3Vic3RyaW5nKGgpLm1hdGNoKG8pO2lmKCFhKXRocm93Ik1pc3NpbmcgbnVtYmVyIGF0IHBvc2l0aW9uICIraDtyZXR1cm4gaCs9YVswXS5sZW5ndGgscGFyc2VJbnQoYVswXSwxMCl9LGs9ZnVuY3Rpb24oZSxzLG4pe3ZhciBvPS0xLGE9dC5tYXAoeShlKT9uOnMsZnVuY3Rpb24odCxlKXtyZXR1cm5bW2UsdF1dfSkuc29ydChmdW5jdGlvbih0LGUpe3JldHVybi0odFsxXS5sZW5ndGgtZVsxXS5sZW5ndGgpfSk7aWYodC5lYWNoKGEsZnVuY3Rpb24odCxlKXt2YXIgcz1lWzFdO3JldHVybiBpLnN1YnN0cihoLHMubGVuZ3RoKS50b0xvd2VyQ2FzZSgpPT09cy50b0xvd2VyQ2FzZSgpPyhvPWVbMF0saCs9cy5sZW5ndGgsITEpOnZvaWQgMH0pLC0xIT09bylyZXR1cm4gbysxO3Rocm93IlVua25vd24gbmFtZSBhdCBwb3NpdGlvbiAiK2h9LHg9ZnVuY3Rpb24oKXtpZihpLmNoYXJBdChoKSE9PWUuY2hhckF0KG4pKXRocm93IlVuZXhwZWN0ZWQgbGl0ZXJhbCBhdCBwb3NpdGlvbiAiK2g7aCsrfTtmb3Iobj0wO2UubGVuZ3RoPm47bisrKWlmKGIpIiciIT09ZS5jaGFyQXQobil8fHkoIiciKT94KCk6Yj0hMTtlbHNlIHN3aXRjaChlLmNoYXJBdChuKSl7Y2FzZSJkIjpfPXcoImQiKTticmVhaztjYXNlIkQiOmsoIkQiLHUsZCk7YnJlYWs7Y2FzZSJvIjp2PXcoIm8iKTticmVhaztjYXNlIm0iOm09dygibSIpO2JyZWFrO2Nhc2UiTSI6bT1rKCJNIixwLGYpO2JyZWFrO2Nhc2UieSI6Zz13KCJ5Iik7YnJlYWs7Y2FzZSJAIjpyPW5ldyBEYXRlKHcoIkAiKSksZz1yLmdldEZ1bGxZZWFyKCksbT1yLmdldE1vbnRoKCkrMSxfPXIuZ2V0RGF0ZSgpO2JyZWFrO2Nhc2UiISI6cj1uZXcgRGF0ZSgodygiISIpLXRoaXMuX3RpY2tzVG8xOTcwKS8xZTQpLGc9ci5nZXRGdWxsWWVhcigpLG09ci5nZXRNb250aCgpKzEsXz1yLmdldERhdGUoKTticmVhaztjYXNlIiciOnkoIiciKT94KCk6Yj0hMDticmVhaztkZWZhdWx0OngoKX1pZihpLmxlbmd0aD5oJiYoYT1pLnN1YnN0cihoKSwhL15ccysvLnRlc3QoYSkpKXRocm93IkV4dHJhL3VucGFyc2VkIGNoYXJhY3RlcnMgZm91bmQgaW4gZGF0ZTogIithO2lmKC0xPT09Zz9nPShuZXcgRGF0ZSkuZ2V0RnVsbFllYXIoKToxMDA+ZyYmKGcrPShuZXcgRGF0ZSkuZ2V0RnVsbFllYXIoKS0obmV3IERhdGUpLmdldEZ1bGxZZWFyKCklMTAwKyhjPj1nPzA6LTEwMCkpLHY+LTEpZm9yKG09MSxfPXY7Oyl7aWYobz10aGlzLl9nZXREYXlzSW5Nb250aChnLG0tMSksbz49XylicmVhazttKyssXy09b31pZihyPXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGcsbS0xLF8pKSxyLmdldEZ1bGxZZWFyKCkhPT1nfHxyLmdldE1vbnRoKCkrMSE9PW18fHIuZ2V0RGF0ZSgpIT09Xyl0aHJvdyJJbnZhbGlkIGRhdGUiO3JldHVybiByfSxBVE9NOiJ5eS1tbS1kZCIsQ09PS0lFOiJELCBkZCBNIHl5IixJU09fODYwMToieXktbW0tZGQiLFJGQ184MjI6IkQsIGQgTSB5IixSRkNfODUwOiJERCwgZGQtTS15IixSRkNfMTAzNjoiRCwgZCBNIHkiLFJGQ18xMTIzOiJELCBkIE0geXkiLFJGQ18yODIyOiJELCBkIE0geXkiLFJTUzoiRCwgZCBNIHkiLFRJQ0tTOiIhIixUSU1FU1RBTVA6IkAiLFczQzoieXktbW0tZGQiLF90aWNrc1RvMTk3MDoxZTcqNjAqNjAqMjQqKDcxODY4NStNYXRoLmZsb29yKDQ5Mi41KS1NYXRoLmZsb29yKDE5LjcpK01hdGguZmxvb3IoNC45MjUpKSxmb3JtYXREYXRlOmZ1bmN0aW9uKHQsZSxpKXtpZighZSlyZXR1cm4iIjt2YXIgcyxuPShpP2kuZGF5TmFtZXNTaG9ydDpudWxsKXx8dGhpcy5fZGVmYXVsdHMuZGF5TmFtZXNTaG9ydCxvPShpP2kuZGF5TmFtZXM6bnVsbCl8fHRoaXMuX2RlZmF1bHRzLmRheU5hbWVzLGE9KGk/aS5tb250aE5hbWVzU2hvcnQ6bnVsbCl8fHRoaXMuX2RlZmF1bHRzLm1vbnRoTmFtZXNTaG9ydCxyPShpP2kubW9udGhOYW1lczpudWxsKXx8dGhpcy5fZGVmYXVsdHMubW9udGhOYW1lcyxoPWZ1bmN0aW9uKGUpe3ZhciBpPXQubGVuZ3RoPnMrMSYmdC5jaGFyQXQocysxKT09PWU7cmV0dXJuIGkmJnMrKyxpfSxsPWZ1bmN0aW9uKHQsZSxpKXt2YXIgcz0iIitlO2lmKGgodCkpZm9yKDtpPnMubGVuZ3RoOylzPSIwIitzO3JldHVybiBzfSxjPWZ1bmN0aW9uKHQsZSxpLHMpe3JldHVybiBoKHQpP3NbZV06aVtlXX0sdT0iIixkPSExO2lmKGUpZm9yKHM9MDt0Lmxlbmd0aD5zO3MrKylpZihkKSInIiE9PXQuY2hhckF0KHMpfHxoKCInIik/dSs9dC5jaGFyQXQocyk6ZD0hMTtlbHNlIHN3aXRjaCh0LmNoYXJBdChzKSl7Y2FzZSJkIjp1Kz1sKCJkIixlLmdldERhdGUoKSwyKTticmVhaztjYXNlIkQiOnUrPWMoIkQiLGUuZ2V0RGF5KCksbixvKTticmVhaztjYXNlIm8iOnUrPWwoIm8iLE1hdGgucm91bmQoKG5ldyBEYXRlKGUuZ2V0RnVsbFllYXIoKSxlLmdldE1vbnRoKCksZS5nZXREYXRlKCkpLmdldFRpbWUoKS1uZXcgRGF0ZShlLmdldEZ1bGxZZWFyKCksMCwwKS5nZXRUaW1lKCkpLzg2NGU1KSwzKTticmVhaztjYXNlIm0iOnUrPWwoIm0iLGUuZ2V0TW9udGgoKSsxLDIpO2JyZWFrO2Nhc2UiTSI6dSs9YygiTSIsZS5nZXRNb250aCgpLGEscik7YnJlYWs7Y2FzZSJ5Ijp1Kz1oKCJ5Iik/ZS5nZXRGdWxsWWVhcigpOigxMD5lLmdldEZ1bGxZZWFyKCklMTAwPyIwIjoiIikrZS5nZXRGdWxsWWVhcigpJTEwMDticmVhaztjYXNlIkAiOnUrPWUuZ2V0VGltZSgpO2JyZWFrO2Nhc2UiISI6dSs9MWU0KmUuZ2V0VGltZSgpK3RoaXMuX3RpY2tzVG8xOTcwO2JyZWFrO2Nhc2UiJyI6aCgiJyIpP3UrPSInIjpkPSEwO2JyZWFrO2RlZmF1bHQ6dSs9dC5jaGFyQXQocyl9cmV0dXJuIHV9LF9wb3NzaWJsZUNoYXJzOmZ1bmN0aW9uKHQpe3ZhciBlLGk9IiIscz0hMSxuPWZ1bmN0aW9uKGkpe3ZhciBzPXQubGVuZ3RoPmUrMSYmdC5jaGFyQXQoZSsxKT09PWk7cmV0dXJuIHMmJmUrKyxzfTtmb3IoZT0wO3QubGVuZ3RoPmU7ZSsrKWlmKHMpIiciIT09dC5jaGFyQXQoZSl8fG4oIiciKT9pKz10LmNoYXJBdChlKTpzPSExO2Vsc2Ugc3dpdGNoKHQuY2hhckF0KGUpKXtjYXNlImQiOmNhc2UibSI6Y2FzZSJ5IjpjYXNlIkAiOmkrPSIwMTIzNDU2Nzg5IjticmVhaztjYXNlIkQiOmNhc2UiTSI6cmV0dXJuIG51bGw7Y2FzZSInIjpuKCInIik/aSs9IiciOnM9ITA7YnJlYWs7ZGVmYXVsdDppKz10LmNoYXJBdChlKX1yZXR1cm4gaX0sX2dldDpmdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDAhPT10LnNldHRpbmdzW2VdP3Quc2V0dGluZ3NbZV06dGhpcy5fZGVmYXVsdHNbZV19LF9zZXREYXRlRnJvbUZpZWxkOmZ1bmN0aW9uKHQsZSl7aWYodC5pbnB1dC52YWwoKSE9PXQubGFzdFZhbCl7dmFyIGk9dGhpcy5fZ2V0KHQsImRhdGVGb3JtYXQiKSxzPXQubGFzdFZhbD10LmlucHV0P3QuaW5wdXQudmFsKCk6bnVsbCxuPXRoaXMuX2dldERlZmF1bHREYXRlKHQpLG89bixhPXRoaXMuX2dldEZvcm1hdENvbmZpZyh0KTt0cnl7bz10aGlzLnBhcnNlRGF0ZShpLHMsYSl8fG59Y2F0Y2gocil7cz1lPyIiOnN9dC5zZWxlY3RlZERheT1vLmdldERhdGUoKSx0LmRyYXdNb250aD10LnNlbGVjdGVkTW9udGg9by5nZXRNb250aCgpLHQuZHJhd1llYXI9dC5zZWxlY3RlZFllYXI9by5nZXRGdWxsWWVhcigpLHQuY3VycmVudERheT1zP28uZ2V0RGF0ZSgpOjAsdC5jdXJyZW50TW9udGg9cz9vLmdldE1vbnRoKCk6MCx0LmN1cnJlbnRZZWFyPXM/by5nZXRGdWxsWWVhcigpOjAsdGhpcy5fYWRqdXN0SW5zdERhdGUodCl9fSxfZ2V0RGVmYXVsdERhdGU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3Jlc3RyaWN0TWluTWF4KHQsdGhpcy5fZGV0ZXJtaW5lRGF0ZSh0LHRoaXMuX2dldCh0LCJkZWZhdWx0RGF0ZSIpLG5ldyBEYXRlKSl9LF9kZXRlcm1pbmVEYXRlOmZ1bmN0aW9uKGUsaSxzKXt2YXIgbj1mdW5jdGlvbih0KXt2YXIgZT1uZXcgRGF0ZTtyZXR1cm4gZS5zZXREYXRlKGUuZ2V0RGF0ZSgpK3QpLGV9LG89ZnVuY3Rpb24oaSl7dHJ5e3JldHVybiB0LmRhdGVwaWNrZXIucGFyc2VEYXRlKHQuZGF0ZXBpY2tlci5fZ2V0KGUsImRhdGVGb3JtYXQiKSxpLHQuZGF0ZXBpY2tlci5fZ2V0Rm9ybWF0Q29uZmlnKGUpKX1jYXRjaChzKXt9Zm9yKHZhciBuPShpLnRvTG93ZXJDYXNlKCkubWF0Y2goL15jLyk/dC5kYXRlcGlja2VyLl9nZXREYXRlKGUpOm51bGwpfHxuZXcgRGF0ZSxvPW4uZ2V0RnVsbFllYXIoKSxhPW4uZ2V0TW9udGgoKSxyPW4uZ2V0RGF0ZSgpLGg9LyhbK1wtXT9bMC05XSspXHMqKGR8RHx3fFd8bXxNfHl8WSk/L2csbD1oLmV4ZWMoaSk7bDspe3N3aXRjaChsWzJdfHwiZCIpe2Nhc2UiZCI6Y2FzZSJEIjpyKz1wYXJzZUludChsWzFdLDEwKTticmVhaztjYXNlInciOmNhc2UiVyI6cis9NypwYXJzZUludChsWzFdLDEwKTticmVhaztjYXNlIm0iOmNhc2UiTSI6YSs9cGFyc2VJbnQobFsxXSwxMCkscj1NYXRoLm1pbihyLHQuZGF0ZXBpY2tlci5fZ2V0RGF5c0luTW9udGgobyxhKSk7YnJlYWs7Y2FzZSJ5IjpjYXNlIlkiOm8rPXBhcnNlSW50KGxbMV0sMTApLHI9TWF0aC5taW4ocix0LmRhdGVwaWNrZXIuX2dldERheXNJbk1vbnRoKG8sYSkpfWw9aC5leGVjKGkpfXJldHVybiBuZXcgRGF0ZShvLGEscil9LGE9bnVsbD09aXx8IiI9PT1pP3M6InN0cmluZyI9PXR5cGVvZiBpP28oaSk6Im51bWJlciI9PXR5cGVvZiBpP2lzTmFOKGkpP3M6bihpKTpuZXcgRGF0ZShpLmdldFRpbWUoKSk7cmV0dXJuIGE9YSYmIkludmFsaWQgRGF0ZSI9PSIiK2E/czphLGEmJihhLnNldEhvdXJzKDApLGEuc2V0TWludXRlcygwKSxhLnNldFNlY29uZHMoMCksYS5zZXRNaWxsaXNlY29uZHMoMCkpLHRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KGEpfSxfZGF5bGlnaHRTYXZpbmdBZGp1c3Q6ZnVuY3Rpb24odCl7cmV0dXJuIHQ/KHQuc2V0SG91cnModC5nZXRIb3VycygpPjEyP3QuZ2V0SG91cnMoKSsyOjApLHQpOm51bGx9LF9zZXREYXRlOmZ1bmN0aW9uKHQsZSxpKXt2YXIgcz0hZSxuPXQuc2VsZWN0ZWRNb250aCxvPXQuc2VsZWN0ZWRZZWFyLGE9dGhpcy5fcmVzdHJpY3RNaW5NYXgodCx0aGlzLl9kZXRlcm1pbmVEYXRlKHQsZSxuZXcgRGF0ZSkpO3Quc2VsZWN0ZWREYXk9dC5jdXJyZW50RGF5PWEuZ2V0RGF0ZSgpLHQuZHJhd01vbnRoPXQuc2VsZWN0ZWRNb250aD10LmN1cnJlbnRNb250aD1hLmdldE1vbnRoKCksdC5kcmF3WWVhcj10LnNlbGVjdGVkWWVhcj10LmN1cnJlbnRZZWFyPWEuZ2V0RnVsbFllYXIoKSxuPT09dC5zZWxlY3RlZE1vbnRoJiZvPT09dC5zZWxlY3RlZFllYXJ8fGl8fHRoaXMuX25vdGlmeUNoYW5nZSh0KSx0aGlzLl9hZGp1c3RJbnN0RGF0ZSh0KSx0LmlucHV0JiZ0LmlucHV0LnZhbChzPyIiOnRoaXMuX2Zvcm1hdERhdGUodCkpfSxfZ2V0RGF0ZTpmdW5jdGlvbih0KXt2YXIgZT0hdC5jdXJyZW50WWVhcnx8dC5pbnB1dCYmIiI9PT10LmlucHV0LnZhbCgpP251bGw6dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUodC5jdXJyZW50WWVhcix0LmN1cnJlbnRNb250aCx0LmN1cnJlbnREYXkpKTtyZXR1cm4gZX0sX2F0dGFjaEhhbmRsZXJzOmZ1bmN0aW9uKGUpe3ZhciBpPXRoaXMuX2dldChlLCJzdGVwTW9udGhzIikscz0iIyIrZS5pZC5yZXBsYWNlKC9cXFxcL2csIlxcIik7ZS5kcERpdi5maW5kKCJbZGF0YS1oYW5kbGVyXSIpLm1hcChmdW5jdGlvbigpe3ZhciBlPXtwcmV2OmZ1bmN0aW9uKCl7dC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKHMsLWksIk0iKX0sbmV4dDpmdW5jdGlvbigpe3QuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShzLCtpLCJNIil9LGhpZGU6ZnVuY3Rpb24oKXt0LmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCl9LHRvZGF5OmZ1bmN0aW9uKCl7dC5kYXRlcGlja2VyLl9nb3RvVG9kYXkocyl9LHNlbGVjdERheTpmdW5jdGlvbigpe3JldHVybiB0LmRhdGVwaWNrZXIuX3NlbGVjdERheShzLCt0aGlzLmdldEF0dHJpYnV0ZSgiZGF0YS1tb250aCIpLCt0aGlzLmdldEF0dHJpYnV0ZSgiZGF0YS15ZWFyIiksdGhpcyksITF9LHNlbGVjdE1vbnRoOmZ1bmN0aW9uKCl7cmV0dXJuIHQuZGF0ZXBpY2tlci5fc2VsZWN0TW9udGhZZWFyKHMsdGhpcywiTSIpLCExfSxzZWxlY3RZZWFyOmZ1bmN0aW9uKCl7cmV0dXJuIHQuZGF0ZXBpY2tlci5fc2VsZWN0TW9udGhZZWFyKHMsdGhpcywiWSIpLCExfX07dCh0aGlzKS5vbih0aGlzLmdldEF0dHJpYnV0ZSgiZGF0YS1ldmVudCIpLGVbdGhpcy5nZXRBdHRyaWJ1dGUoImRhdGEtaGFuZGxlciIpXSl9KX0sX2dlbmVyYXRlSFRNTDpmdW5jdGlvbih0KXt2YXIgZSxpLHMsbixvLGEscixoLGwsYyx1LGQscCxmLGcsbSxfLHYsYix5LHcsayx4LEMsRCxJLFQsUCxNLFMsSCx6LE8sQSxOLFcsRSxGLEwsUj1uZXcgRGF0ZSxCPXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKFIuZ2V0RnVsbFllYXIoKSxSLmdldE1vbnRoKCksUi5nZXREYXRlKCkpKSxZPXRoaXMuX2dldCh0LCJpc1JUTCIpLGo9dGhpcy5fZ2V0KHQsInNob3dCdXR0b25QYW5lbCIpLHE9dGhpcy5fZ2V0KHQsImhpZGVJZk5vUHJldk5leHQiKSxLPXRoaXMuX2dldCh0LCJuYXZpZ2F0aW9uQXNEYXRlRm9ybWF0IiksVT10aGlzLl9nZXROdW1iZXJPZk1vbnRocyh0KSxWPXRoaXMuX2dldCh0LCJzaG93Q3VycmVudEF0UG9zIiksJD10aGlzLl9nZXQodCwic3RlcE1vbnRocyIpLFg9MSE9PVVbMF18fDEhPT1VWzFdLEc9dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QodC5jdXJyZW50RGF5P25ldyBEYXRlKHQuY3VycmVudFllYXIsdC5jdXJyZW50TW9udGgsdC5jdXJyZW50RGF5KTpuZXcgRGF0ZSg5OTk5LDksOSkpLFE9dGhpcy5fZ2V0TWluTWF4RGF0ZSh0LCJtaW4iKSxKPXRoaXMuX2dldE1pbk1heERhdGUodCwibWF4IiksWj10LmRyYXdNb250aC1WLHRlPXQuZHJhd1llYXI7aWYoMD5aJiYoWis9MTIsdGUtLSksSilmb3IoZT10aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShKLmdldEZ1bGxZZWFyKCksSi5nZXRNb250aCgpLVVbMF0qVVsxXSsxLEouZ2V0RGF0ZSgpKSksZT1RJiZRPmU/UTplO3RoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKHRlLFosMSkpPmU7KVotLSwwPlomJihaPTExLHRlLS0pO2Zvcih0LmRyYXdNb250aD1aLHQuZHJhd1llYXI9dGUsaT10aGlzLl9nZXQodCwicHJldlRleHQiKSxpPUs/dGhpcy5mb3JtYXREYXRlKGksdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUodGUsWi0kLDEpKSx0aGlzLl9nZXRGb3JtYXRDb25maWcodCkpOmkscz10aGlzLl9jYW5BZGp1c3RNb250aCh0LC0xLHRlLFopPyI8YSBjbGFzcz0ndWktZGF0ZXBpY2tlci1wcmV2IHVpLWNvcm5lci1hbGwnIGRhdGEtaGFuZGxlcj0ncHJldicgZGF0YS1ldmVudD0nY2xpY2snIHRpdGxlPSciK2krIic+PHNwYW4gY2xhc3M9J3VpLWljb24gdWktaWNvbi1jaXJjbGUtdHJpYW5nbGUtIisoWT8iZSI6InciKSsiJz4iK2krIjwvc3Bhbj48L2E+IjpxPyIiOiI8YSBjbGFzcz0ndWktZGF0ZXBpY2tlci1wcmV2IHVpLWNvcm5lci1hbGwgdWktc3RhdGUtZGlzYWJsZWQnIHRpdGxlPSciK2krIic+PHNwYW4gY2xhc3M9J3VpLWljb24gdWktaWNvbi1jaXJjbGUtdHJpYW5nbGUtIisoWT8iZSI6InciKSsiJz4iK2krIjwvc3Bhbj48L2E+IixuPXRoaXMuX2dldCh0LCJuZXh0VGV4dCIpLG49Sz90aGlzLmZvcm1hdERhdGUobix0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZSh0ZSxaKyQsMSkpLHRoaXMuX2dldEZvcm1hdENvbmZpZyh0KSk6bixvPXRoaXMuX2NhbkFkanVzdE1vbnRoKHQsMSx0ZSxaKT8iPGEgY2xhc3M9J3VpLWRhdGVwaWNrZXItbmV4dCB1aS1jb3JuZXItYWxsJyBkYXRhLWhhbmRsZXI9J25leHQnIGRhdGEtZXZlbnQ9J2NsaWNrJyB0aXRsZT0nIituKyInPjxzcGFuIGNsYXNzPSd1aS1pY29uIHVpLWljb24tY2lyY2xlLXRyaWFuZ2xlLSIrKFk/InciOiJlIikrIic+IituKyI8L3NwYW4+PC9hPiI6cT8iIjoiPGEgY2xhc3M9J3VpLWRhdGVwaWNrZXItbmV4dCB1aS1jb3JuZXItYWxsIHVpLXN0YXRlLWRpc2FibGVkJyB0aXRsZT0nIituKyInPjxzcGFuIGNsYXNzPSd1aS1pY29uIHVpLWljb24tY2lyY2xlLXRyaWFuZ2xlLSIrKFk/InciOiJlIikrIic+IituKyI8L3NwYW4+PC9hPiIsYT10aGlzLl9nZXQodCwiY3VycmVudFRleHQiKSxyPXRoaXMuX2dldCh0LCJnb3RvQ3VycmVudCIpJiZ0LmN1cnJlbnREYXk/RzpCLGE9Sz90aGlzLmZvcm1hdERhdGUoYSxyLHRoaXMuX2dldEZvcm1hdENvbmZpZyh0KSk6YSxoPXQuaW5saW5lPyIiOiI8YnV0dG9uIHR5cGU9J2J1dHRvbicgY2xhc3M9J3VpLWRhdGVwaWNrZXItY2xvc2UgdWktc3RhdGUtZGVmYXVsdCB1aS1wcmlvcml0eS1wcmltYXJ5IHVpLWNvcm5lci1hbGwnIGRhdGEtaGFuZGxlcj0naGlkZScgZGF0YS1ldmVudD0nY2xpY2snPiIrdGhpcy5fZ2V0KHQsImNsb3NlVGV4dCIpKyI8L2J1dHRvbj4iLGw9aj8iPGRpdiBjbGFzcz0ndWktZGF0ZXBpY2tlci1idXR0b25wYW5lIHVpLXdpZGdldC1jb250ZW50Jz4iKyhZP2g6IiIpKyh0aGlzLl9pc0luUmFuZ2UodCxyKT8iPGJ1dHRvbiB0eXBlPSdidXR0b24nIGNsYXNzPSd1aS1kYXRlcGlja2VyLWN1cnJlbnQgdWktc3RhdGUtZGVmYXVsdCB1aS1wcmlvcml0eS1zZWNvbmRhcnkgdWktY29ybmVyLWFsbCcgZGF0YS1oYW5kbGVyPSd0b2RheScgZGF0YS1ldmVudD0nY2xpY2snPiIrYSsiPC9idXR0b24+IjoiIikrKFk/IiI6aCkrIjwvZGl2PiI6IiIsYz1wYXJzZUludCh0aGlzLl9nZXQodCwiZmlyc3REYXkiKSwxMCksYz1pc05hTihjKT8wOmMsdT10aGlzLl9nZXQodCwic2hvd1dlZWsiKSxkPXRoaXMuX2dldCh0LCJkYXlOYW1lcyIpLHA9dGhpcy5fZ2V0KHQsImRheU5hbWVzTWluIiksZj10aGlzLl9nZXQodCwibW9udGhOYW1lcyIpLGc9dGhpcy5fZ2V0KHQsIm1vbnRoTmFtZXNTaG9ydCIpLG09dGhpcy5fZ2V0KHQsImJlZm9yZVNob3dEYXkiKSxfPXRoaXMuX2dldCh0LCJzaG93T3RoZXJNb250aHMiKSx2PXRoaXMuX2dldCh0LCJzZWxlY3RPdGhlck1vbnRocyIpLGI9dGhpcy5fZ2V0RGVmYXVsdERhdGUodCkseT0iIixrPTA7VVswXT5rO2srKyl7Zm9yKHg9IiIsdGhpcy5tYXhSb3dzPTQsQz0wO1VbMV0+QztDKyspe2lmKEQ9dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUodGUsWix0LnNlbGVjdGVkRGF5KSksST0iIHVpLWNvcm5lci1hbGwiLFQ9IiIsWCl7aWYoVCs9IjxkaXYgY2xhc3M9J3VpLWRhdGVwaWNrZXItZ3JvdXAiLFVbMV0+MSlzd2l0Y2goQyl7Y2FzZSAwOlQrPSIgdWktZGF0ZXBpY2tlci1ncm91cC1maXJzdCIsST0iIHVpLWNvcm5lci0iKyhZPyJyaWdodCI6ImxlZnQiKTticmVhaztjYXNlIFVbMV0tMTpUKz0iIHVpLWRhdGVwaWNrZXItZ3JvdXAtbGFzdCIsST0iIHVpLWNvcm5lci0iKyhZPyJsZWZ0IjoicmlnaHQiKTticmVhaztkZWZhdWx0OlQrPSIgdWktZGF0ZXBpY2tlci1ncm91cC1taWRkbGUiLEk9IiJ9VCs9Iic+In1mb3IoVCs9IjxkaXYgY2xhc3M9J3VpLWRhdGVwaWNrZXItaGVhZGVyIHVpLXdpZGdldC1oZWFkZXIgdWktaGVscGVyLWNsZWFyZml4IitJKyInPiIrKC9hbGx8bGVmdC8udGVzdChJKSYmMD09PWs/WT9vOnM6IiIpKygvYWxsfHJpZ2h0Ly50ZXN0KEkpJiYwPT09az9ZP3M6bzoiIikrdGhpcy5fZ2VuZXJhdGVNb250aFllYXJIZWFkZXIodCxaLHRlLFEsSixrPjB8fEM+MCxmLGcpKyI8L2Rpdj48dGFibGUgY2xhc3M9J3VpLWRhdGVwaWNrZXItY2FsZW5kYXInPjx0aGVhZD4iKyI8dHI+IixQPXU/Ijx0aCBjbGFzcz0ndWktZGF0ZXBpY2tlci13ZWVrLWNvbCc+Iit0aGlzLl9nZXQodCwid2Vla0hlYWRlciIpKyI8L3RoPiI6IiIsdz0wOzc+dzt3KyspTT0odytjKSU3LFArPSI8dGggc2NvcGU9J2NvbCciKygodytjKzYpJTc+PTU/IiBjbGFzcz0ndWktZGF0ZXBpY2tlci13ZWVrLWVuZCciOiIiKSsiPiIrIjxzcGFuIHRpdGxlPSciK2RbTV0rIic+IitwW01dKyI8L3NwYW4+PC90aD4iO2ZvcihUKz1QKyI8L3RyPjwvdGhlYWQ+PHRib2R5PiIsUz10aGlzLl9nZXREYXlzSW5Nb250aCh0ZSxaKSx0ZT09PXQuc2VsZWN0ZWRZZWFyJiZaPT09dC5zZWxlY3RlZE1vbnRoJiYodC5zZWxlY3RlZERheT1NYXRoLm1pbih0LnNlbGVjdGVkRGF5LFMpKSxIPSh0aGlzLl9nZXRGaXJzdERheU9mTW9udGgodGUsWiktYys3KSU3LHo9TWF0aC5jZWlsKChIK1MpLzcpLE89WD90aGlzLm1heFJvd3M+ej90aGlzLm1heFJvd3M6ejp6LHRoaXMubWF4Um93cz1PLEE9dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUodGUsWiwxLUgpKSxOPTA7Tz5OO04rKyl7Zm9yKFQrPSI8dHI+IixXPXU/Ijx0ZCBjbGFzcz0ndWktZGF0ZXBpY2tlci13ZWVrLWNvbCc+Iit0aGlzLl9nZXQodCwiY2FsY3VsYXRlV2VlayIpKEEpKyI8L3RkPiI6IiIsdz0wOzc+dzt3KyspRT1tP20uYXBwbHkodC5pbnB1dD90LmlucHV0WzBdOm51bGwsW0FdKTpbITAsIiJdLEY9QS5nZXRNb250aCgpIT09WixMPUYmJiF2fHwhRVswXXx8USYmUT5BfHxKJiZBPkosVys9Ijx0ZCBjbGFzcz0nIisoKHcrYys2KSU3Pj01PyIgdWktZGF0ZXBpY2tlci13ZWVrLWVuZCI6IiIpKyhGPyIgdWktZGF0ZXBpY2tlci1vdGhlci1tb250aCI6IiIpKyhBLmdldFRpbWUoKT09PUQuZ2V0VGltZSgpJiZaPT09dC5zZWxlY3RlZE1vbnRoJiZ0Ll9rZXlFdmVudHx8Yi5nZXRUaW1lKCk9PT1BLmdldFRpbWUoKSYmYi5nZXRUaW1lKCk9PT1ELmdldFRpbWUoKT8iICIrdGhpcy5fZGF5T3ZlckNsYXNzOiIiKSsoTD8iICIrdGhpcy5fdW5zZWxlY3RhYmxlQ2xhc3MrIiB1aS1zdGF0ZS1kaXNhYmxlZCI6IiIpKyhGJiYhXz8iIjoiICIrRVsxXSsoQS5nZXRUaW1lKCk9PT1HLmdldFRpbWUoKT8iICIrdGhpcy5fY3VycmVudENsYXNzOiIiKSsoQS5nZXRUaW1lKCk9PT1CLmdldFRpbWUoKT8iIHVpLWRhdGVwaWNrZXItdG9kYXkiOiIiKSkrIiciKyhGJiYhX3x8IUVbMl0/IiI6IiB0aXRsZT0nIitFWzJdLnJlcGxhY2UoLycvZywiJiMzOTsiKSsiJyIpKyhMPyIiOiIgZGF0YS1oYW5kbGVyPSdzZWxlY3REYXknIGRhdGEtZXZlbnQ9J2NsaWNrJyBkYXRhLW1vbnRoPSciK0EuZ2V0TW9udGgoKSsiJyBkYXRhLXllYXI9JyIrQS5nZXRGdWxsWWVhcigpKyInIikrIj4iKyhGJiYhXz8iJiN4YTA7IjpMPyI8c3BhbiBjbGFzcz0ndWktc3RhdGUtZGVmYXVsdCc+IitBLmdldERhdGUoKSsiPC9zcGFuPiI6IjxhIGNsYXNzPSd1aS1zdGF0ZS1kZWZhdWx0IisoQS5nZXRUaW1lKCk9PT1CLmdldFRpbWUoKT8iIHVpLXN0YXRlLWhpZ2hsaWdodCI6IiIpKyhBLmdldFRpbWUoKT09PUcuZ2V0VGltZSgpPyIgdWktc3RhdGUtYWN0aXZlIjoiIikrKEY/IiB1aS1wcmlvcml0eS1zZWNvbmRhcnkiOiIiKSsiJyBocmVmPScjJz4iK0EuZ2V0RGF0ZSgpKyI8L2E+IikrIjwvdGQ+IixBLnNldERhdGUoQS5nZXREYXRlKCkrMSksQT10aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChBKTtUKz1XKyI8L3RyPiJ9WisrLFo+MTEmJihaPTAsdGUrKyksVCs9IjwvdGJvZHk+PC90YWJsZT4iKyhYPyI8L2Rpdj4iKyhVWzBdPjAmJkM9PT1VWzFdLTE/IjxkaXYgY2xhc3M9J3VpLWRhdGVwaWNrZXItcm93LWJyZWFrJz48L2Rpdj4iOiIiKToiIikseCs9VH15Kz14fXJldHVybiB5Kz1sLHQuX2tleUV2ZW50PSExLHl9LF9nZW5lcmF0ZU1vbnRoWWVhckhlYWRlcjpmdW5jdGlvbih0LGUsaSxzLG4sbyxhLHIpe3ZhciBoLGwsYyx1LGQscCxmLGcsbT10aGlzLl9nZXQodCwiY2hhbmdlTW9udGgiKSxfPXRoaXMuX2dldCh0LCJjaGFuZ2VZZWFyIiksdj10aGlzLl9nZXQodCwic2hvd01vbnRoQWZ0ZXJZZWFyIiksYj0iPGRpdiBjbGFzcz0ndWktZGF0ZXBpY2tlci10aXRsZSc+Iix5PSIiO2lmKG98fCFtKXkrPSI8c3BhbiBjbGFzcz0ndWktZGF0ZXBpY2tlci1tb250aCc+IithW2VdKyI8L3NwYW4+IjtlbHNle2ZvcihoPXMmJnMuZ2V0RnVsbFllYXIoKT09PWksbD1uJiZuLmdldEZ1bGxZZWFyKCk9PT1pLHkrPSI8c2VsZWN0IGNsYXNzPSd1aS1kYXRlcGlja2VyLW1vbnRoJyBkYXRhLWhhbmRsZXI9J3NlbGVjdE1vbnRoJyBkYXRhLWV2ZW50PSdjaGFuZ2UnPiIsYz0wOzEyPmM7YysrKSghaHx8Yz49cy5nZXRNb250aCgpKSYmKCFsfHxuLmdldE1vbnRoKCk+PWMpJiYoeSs9IjxvcHRpb24gdmFsdWU9JyIrYysiJyIrKGM9PT1lPyIgc2VsZWN0ZWQ9J3NlbGVjdGVkJyI6IiIpKyI+IityW2NdKyI8L29wdGlvbj4iKTt5Kz0iPC9zZWxlY3Q+In1pZih2fHwoYis9eSsoIW8mJm0mJl8/IiI6IiYjeGEwOyIpKSwhdC55ZWFyc2h0bWwpaWYodC55ZWFyc2h0bWw9IiIsb3x8IV8pYis9IjxzcGFuIGNsYXNzPSd1aS1kYXRlcGlja2VyLXllYXInPiIraSsiPC9zcGFuPiI7ZWxzZXtmb3IodT10aGlzLl9nZXQodCwieWVhclJhbmdlIikuc3BsaXQoIjoiKSxkPShuZXcgRGF0ZSkuZ2V0RnVsbFllYXIoKSxwPWZ1bmN0aW9uKHQpe3ZhciBlPXQubWF0Y2goL2NbK1wtXS4qLyk/aStwYXJzZUludCh0LnN1YnN0cmluZygxKSwxMCk6dC5tYXRjaCgvWytcLV0uKi8pP2QrcGFyc2VJbnQodCwxMCk6cGFyc2VJbnQodCwxMCk7cmV0dXJuIGlzTmFOKGUpP2Q6ZX0sZj1wKHVbMF0pLGc9TWF0aC5tYXgoZixwKHVbMV18fCIiKSksZj1zP01hdGgubWF4KGYscy5nZXRGdWxsWWVhcigpKTpmLGc9bj9NYXRoLm1pbihnLG4uZ2V0RnVsbFllYXIoKSk6Zyx0LnllYXJzaHRtbCs9IjxzZWxlY3QgY2xhc3M9J3VpLWRhdGVwaWNrZXIteWVhcicgZGF0YS1oYW5kbGVyPSdzZWxlY3RZZWFyJyBkYXRhLWV2ZW50PSdjaGFuZ2UnPiI7Zz49ZjtmKyspdC55ZWFyc2h0bWwrPSI8b3B0aW9uIHZhbHVlPSciK2YrIiciKyhmPT09aT8iIHNlbGVjdGVkPSdzZWxlY3RlZCciOiIiKSsiPiIrZisiPC9vcHRpb24+Ijt0LnllYXJzaHRtbCs9Ijwvc2VsZWN0PiIsYis9dC55ZWFyc2h0bWwsdC55ZWFyc2h0bWw9bnVsbH1yZXR1cm4gYis9dGhpcy5fZ2V0KHQsInllYXJTdWZmaXgiKSx2JiYoYis9KCFvJiZtJiZfPyIiOiImI3hhMDsiKSt5KSxiKz0iPC9kaXY+In0sX2FkanVzdEluc3REYXRlOmZ1bmN0aW9uKHQsZSxpKXt2YXIgcz10LnNlbGVjdGVkWWVhcisoIlkiPT09aT9lOjApLG49dC5zZWxlY3RlZE1vbnRoKygiTSI9PT1pP2U6MCksbz1NYXRoLm1pbih0LnNlbGVjdGVkRGF5LHRoaXMuX2dldERheXNJbk1vbnRoKHMsbikpKygiRCI9PT1pP2U6MCksYT10aGlzLl9yZXN0cmljdE1pbk1heCh0LHRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKHMsbixvKSkpO3Quc2VsZWN0ZWREYXk9YS5nZXREYXRlKCksdC5kcmF3TW9udGg9dC5zZWxlY3RlZE1vbnRoPWEuZ2V0TW9udGgoKSx0LmRyYXdZZWFyPXQuc2VsZWN0ZWRZZWFyPWEuZ2V0RnVsbFllYXIoKSwoIk0iPT09aXx8IlkiPT09aSkmJnRoaXMuX25vdGlmeUNoYW5nZSh0KX0sX3Jlc3RyaWN0TWluTWF4OmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5fZ2V0TWluTWF4RGF0ZSh0LCJtaW4iKSxzPXRoaXMuX2dldE1pbk1heERhdGUodCwibWF4Iiksbj1pJiZpPmU/aTplO3JldHVybiBzJiZuPnM/czpufSxfbm90aWZ5Q2hhbmdlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2dldCh0LCJvbkNoYW5nZU1vbnRoWWVhciIpO2UmJmUuYXBwbHkodC5pbnB1dD90LmlucHV0WzBdOm51bGwsW3Quc2VsZWN0ZWRZZWFyLHQuc2VsZWN0ZWRNb250aCsxLHRdKX0sX2dldE51bWJlck9mTW9udGhzOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2dldCh0LCJudW1iZXJPZk1vbnRocyIpO3JldHVybiBudWxsPT1lP1sxLDFdOiJudW1iZXIiPT10eXBlb2YgZT9bMSxlXTplfSxfZ2V0TWluTWF4RGF0ZTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9kZXRlcm1pbmVEYXRlKHQsdGhpcy5fZ2V0KHQsZSsiRGF0ZSIpLG51bGwpfSxfZ2V0RGF5c0luTW9udGg6ZnVuY3Rpb24odCxlKXtyZXR1cm4gMzItdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUodCxlLDMyKSkuZ2V0RGF0ZSgpfSxfZ2V0Rmlyc3REYXlPZk1vbnRoOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBEYXRlKHQsZSwxKS5nZXREYXkoKX0sX2NhbkFkanVzdE1vbnRoOmZ1bmN0aW9uKHQsZSxpLHMpe3ZhciBuPXRoaXMuX2dldE51bWJlck9mTW9udGhzKHQpLG89dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoaSxzKygwPmU/ZTpuWzBdKm5bMV0pLDEpKTtyZXR1cm4gMD5lJiZvLnNldERhdGUodGhpcy5fZ2V0RGF5c0luTW9udGgoby5nZXRGdWxsWWVhcigpLG8uZ2V0TW9udGgoKSkpLHRoaXMuX2lzSW5SYW5nZSh0LG8pfSxfaXNJblJhbmdlOmZ1bmN0aW9uKHQsZSl7dmFyIGkscyxuPXRoaXMuX2dldE1pbk1heERhdGUodCwibWluIiksbz10aGlzLl9nZXRNaW5NYXhEYXRlKHQsIm1heCIpLGE9bnVsbCxyPW51bGwsaD10aGlzLl9nZXQodCwieWVhclJhbmdlIik7cmV0dXJuIGgmJihpPWguc3BsaXQoIjoiKSxzPShuZXcgRGF0ZSkuZ2V0RnVsbFllYXIoKSxhPXBhcnNlSW50KGlbMF0sMTApLHI9cGFyc2VJbnQoaVsxXSwxMCksaVswXS5tYXRjaCgvWytcLV0uKi8pJiYoYSs9cyksaVsxXS5tYXRjaCgvWytcLV0uKi8pJiYocis9cykpLCghbnx8ZS5nZXRUaW1lKCk+PW4uZ2V0VGltZSgpKSYmKCFvfHxlLmdldFRpbWUoKTw9by5nZXRUaW1lKCkpJiYoIWF8fGUuZ2V0RnVsbFllYXIoKT49YSkmJighcnx8cj49ZS5nZXRGdWxsWWVhcigpKX0sX2dldEZvcm1hdENvbmZpZzpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9nZXQodCwic2hvcnRZZWFyQ3V0b2ZmIik7cmV0dXJuIGU9InN0cmluZyIhPXR5cGVvZiBlP2U6KG5ldyBEYXRlKS5nZXRGdWxsWWVhcigpJTEwMCtwYXJzZUludChlLDEwKSx7c2hvcnRZZWFyQ3V0b2ZmOmUsZGF5TmFtZXNTaG9ydDp0aGlzLl9nZXQodCwiZGF5TmFtZXNTaG9ydCIpLGRheU5hbWVzOnRoaXMuX2dldCh0LCJkYXlOYW1lcyIpLG1vbnRoTmFtZXNTaG9ydDp0aGlzLl9nZXQodCwibW9udGhOYW1lc1Nob3J0IiksbW9udGhOYW1lczp0aGlzLl9nZXQodCwibW9udGhOYW1lcyIpfX0sX2Zvcm1hdERhdGU6ZnVuY3Rpb24odCxlLGkscyl7ZXx8KHQuY3VycmVudERheT10LnNlbGVjdGVkRGF5LHQuY3VycmVudE1vbnRoPXQuc2VsZWN0ZWRNb250aCx0LmN1cnJlbnRZZWFyPXQuc2VsZWN0ZWRZZWFyKTt2YXIgbj1lPyJvYmplY3QiPT10eXBlb2YgZT9lOnRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKHMsaSxlKSk6dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUodC5jdXJyZW50WWVhcix0LmN1cnJlbnRNb250aCx0LmN1cnJlbnREYXkpKTtyZXR1cm4gdGhpcy5mb3JtYXREYXRlKHRoaXMuX2dldCh0LCJkYXRlRm9ybWF0Iiksbix0aGlzLl9nZXRGb3JtYXRDb25maWcodCkpfX0pLHQuZm4uZGF0ZXBpY2tlcj1mdW5jdGlvbihlKXtpZighdGhpcy5sZW5ndGgpcmV0dXJuIHRoaXM7dC5kYXRlcGlja2VyLmluaXRpYWxpemVkfHwodChkb2N1bWVudCkub24oIm1vdXNlZG93biIsdC5kYXRlcGlja2VyLl9jaGVja0V4dGVybmFsQ2xpY2spLHQuZGF0ZXBpY2tlci5pbml0aWFsaXplZD0hMCksMD09PXQoIiMiK3QuZGF0ZXBpY2tlci5fbWFpbkRpdklkKS5sZW5ndGgmJnQoImJvZHkiKS5hcHBlbmQodC5kYXRlcGlja2VyLmRwRGl2KTt2YXIgaT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuInN0cmluZyIhPXR5cGVvZiBlfHwiaXNEaXNhYmxlZCIhPT1lJiYiZ2V0RGF0ZSIhPT1lJiYid2lkZ2V0IiE9PWU/Im9wdGlvbiI9PT1lJiYyPT09YXJndW1lbnRzLmxlbmd0aCYmInN0cmluZyI9PXR5cGVvZiBhcmd1bWVudHNbMV0/dC5kYXRlcGlja2VyWyJfIitlKyJEYXRlcGlja2VyIl0uYXBwbHkodC5kYXRlcGlja2VyLFt0aGlzWzBdXS5jb25jYXQoaSkpOnRoaXMuZWFjaChmdW5jdGlvbigpeyJzdHJpbmciPT10eXBlb2YgZT90LmRhdGVwaWNrZXJbIl8iK2UrIkRhdGVwaWNrZXIiXS5hcHBseSh0LmRhdGVwaWNrZXIsW3RoaXNdLmNvbmNhdChpKSk6dC5kYXRlcGlja2VyLl9hdHRhY2hEYXRlcGlja2VyKHRoaXMsZSl9KTp0LmRhdGVwaWNrZXJbIl8iK2UrIkRhdGVwaWNrZXIiXS5hcHBseSh0LmRhdGVwaWNrZXIsW3RoaXNbMF1dLmNvbmNhdChpKSl9LHQuZGF0ZXBpY2tlcj1uZXcgcyx0LmRhdGVwaWNrZXIuaW5pdGlhbGl6ZWQ9ITEsdC5kYXRlcGlja2VyLnV1aWQ9KG5ldyBEYXRlKS5nZXRUaW1lKCksdC5kYXRlcGlja2VyLnZlcnNpb249IjEuMTIuMSIsdC5kYXRlcGlja2VyLHQudWkuaWU9ISEvbXNpZSBbXHcuXSsvLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpKTt2YXIgXz0hMTt0KGRvY3VtZW50KS5vbigibW91c2V1cCIsZnVuY3Rpb24oKXtfPSExfSksdC53aWRnZXQoInVpLm1vdXNlIix7dmVyc2lvbjoiMS4xMi4xIixvcHRpb25zOntjYW5jZWw6ImlucHV0LCB0ZXh0YXJlYSwgYnV0dG9uLCBzZWxlY3QsIG9wdGlvbiIsZGlzdGFuY2U6MSxkZWxheTowfSxfbW91c2VJbml0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLmVsZW1lbnQub24oIm1vdXNlZG93bi4iK3RoaXMud2lkZ2V0TmFtZSxmdW5jdGlvbih0KXtyZXR1cm4gZS5fbW91c2VEb3duKHQpfSkub24oImNsaWNrLiIrdGhpcy53aWRnZXROYW1lLGZ1bmN0aW9uKGkpe3JldHVybiEwPT09dC5kYXRhKGkudGFyZ2V0LGUud2lkZ2V0TmFtZSsiLnByZXZlbnRDbGlja0V2ZW50Iik/KHQucmVtb3ZlRGF0YShpLnRhcmdldCxlLndpZGdldE5hbWUrIi5wcmV2ZW50Q2xpY2tFdmVudCIpLGkuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksITEpOnZvaWQgMH0pLHRoaXMuc3RhcnRlZD0hMX0sX21vdXNlRGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5vZmYoIi4iK3RoaXMud2lkZ2V0TmFtZSksdGhpcy5fbW91c2VNb3ZlRGVsZWdhdGUmJnRoaXMuZG9jdW1lbnQub2ZmKCJtb3VzZW1vdmUuIit0aGlzLndpZGdldE5hbWUsdGhpcy5fbW91c2VNb3ZlRGVsZWdhdGUpLm9mZigibW91c2V1cC4iK3RoaXMud2lkZ2V0TmFtZSx0aGlzLl9tb3VzZVVwRGVsZWdhdGUpfSxfbW91c2VEb3duOmZ1bmN0aW9uKGUpe2lmKCFfKXt0aGlzLl9tb3VzZU1vdmVkPSExLHRoaXMuX21vdXNlU3RhcnRlZCYmdGhpcy5fbW91c2VVcChlKSx0aGlzLl9tb3VzZURvd25FdmVudD1lO3ZhciBpPXRoaXMscz0xPT09ZS53aGljaCxuPSJzdHJpbmciPT10eXBlb2YgdGhpcy5vcHRpb25zLmNhbmNlbCYmZS50YXJnZXQubm9kZU5hbWU/dChlLnRhcmdldCkuY2xvc2VzdCh0aGlzLm9wdGlvbnMuY2FuY2VsKS5sZW5ndGg6ITE7cmV0dXJuIHMmJiFuJiZ0aGlzLl9tb3VzZUNhcHR1cmUoZSk/KHRoaXMubW91c2VEZWxheU1ldD0hdGhpcy5vcHRpb25zLmRlbGF5LHRoaXMubW91c2VEZWxheU1ldHx8KHRoaXMuX21vdXNlRGVsYXlUaW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aS5tb3VzZURlbGF5TWV0PSEwfSx0aGlzLm9wdGlvbnMuZGVsYXkpKSx0aGlzLl9tb3VzZURpc3RhbmNlTWV0KGUpJiZ0aGlzLl9tb3VzZURlbGF5TWV0KGUpJiYodGhpcy5fbW91c2VTdGFydGVkPXRoaXMuX21vdXNlU3RhcnQoZSkhPT0hMSwhdGhpcy5fbW91c2VTdGFydGVkKT8oZS5wcmV2ZW50RGVmYXVsdCgpLCEwKTooITA9PT10LmRhdGEoZS50YXJnZXQsdGhpcy53aWRnZXROYW1lKyIucHJldmVudENsaWNrRXZlbnQiKSYmdC5yZW1vdmVEYXRhKGUudGFyZ2V0LHRoaXMud2lkZ2V0TmFtZSsiLnByZXZlbnRDbGlja0V2ZW50IiksdGhpcy5fbW91c2VNb3ZlRGVsZWdhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIGkuX21vdXNlTW92ZSh0KX0sdGhpcy5fbW91c2VVcERlbGVnYXRlPWZ1bmN0aW9uKHQpe3JldHVybiBpLl9tb3VzZVVwKHQpfSx0aGlzLmRvY3VtZW50Lm9uKCJtb3VzZW1vdmUuIit0aGlzLndpZGdldE5hbWUsdGhpcy5fbW91c2VNb3ZlRGVsZWdhdGUpLm9uKCJtb3VzZXVwLiIrdGhpcy53aWRnZXROYW1lLHRoaXMuX21vdXNlVXBEZWxlZ2F0ZSksZS5wcmV2ZW50RGVmYXVsdCgpLF89ITAsITApKTohMH19LF9tb3VzZU1vdmU6ZnVuY3Rpb24oZSl7aWYodGhpcy5fbW91c2VNb3ZlZCl7aWYodC51aS5pZSYmKCFkb2N1bWVudC5kb2N1bWVudE1vZGV8fDk+ZG9jdW1lbnQuZG9jdW1lbnRNb2RlKSYmIWUuYnV0dG9uKXJldHVybiB0aGlzLl9tb3VzZVVwKGUpO2lmKCFlLndoaWNoKWlmKGUub3JpZ2luYWxFdmVudC5hbHRLZXl8fGUub3JpZ2luYWxFdmVudC5jdHJsS2V5fHxlLm9yaWdpbmFsRXZlbnQubWV0YUtleXx8ZS5vcmlnaW5hbEV2ZW50LnNoaWZ0S2V5KXRoaXMuaWdub3JlTWlzc2luZ1doaWNoPSEwO2Vsc2UgaWYoIXRoaXMuaWdub3JlTWlzc2luZ1doaWNoKXJldHVybiB0aGlzLl9tb3VzZVVwKGUpfXJldHVybihlLndoaWNofHxlLmJ1dHRvbikmJih0aGlzLl9tb3VzZU1vdmVkPSEwKSx0aGlzLl9tb3VzZVN0YXJ0ZWQ/KHRoaXMuX21vdXNlRHJhZyhlKSxlLnByZXZlbnREZWZhdWx0KCkpOih0aGlzLl9tb3VzZURpc3RhbmNlTWV0KGUpJiZ0aGlzLl9tb3VzZURlbGF5TWV0KGUpJiYodGhpcy5fbW91c2VTdGFydGVkPXRoaXMuX21vdXNlU3RhcnQodGhpcy5fbW91c2VEb3duRXZlbnQsZSkhPT0hMSx0aGlzLl9tb3VzZVN0YXJ0ZWQ/dGhpcy5fbW91c2VEcmFnKGUpOnRoaXMuX21vdXNlVXAoZSkpLCF0aGlzLl9tb3VzZVN0YXJ0ZWQpfSxfbW91c2VVcDpmdW5jdGlvbihlKXt0aGlzLmRvY3VtZW50Lm9mZigibW91c2Vtb3ZlLiIrdGhpcy53aWRnZXROYW1lLHRoaXMuX21vdXNlTW92ZURlbGVnYXRlKS5vZmYoIm1vdXNldXAuIit0aGlzLndpZGdldE5hbWUsdGhpcy5fbW91c2VVcERlbGVnYXRlKSx0aGlzLl9tb3VzZVN0YXJ0ZWQmJih0aGlzLl9tb3VzZVN0YXJ0ZWQ9ITEsZS50YXJnZXQ9PT10aGlzLl9tb3VzZURvd25FdmVudC50YXJnZXQmJnQuZGF0YShlLnRhcmdldCx0aGlzLndpZGdldE5hbWUrIi5wcmV2ZW50Q2xpY2tFdmVudCIsITApLHRoaXMuX21vdXNlU3RvcChlKSksdGhpcy5fbW91c2VEZWxheVRpbWVyJiYoY2xlYXJUaW1lb3V0KHRoaXMuX21vdXNlRGVsYXlUaW1lciksZGVsZXRlIHRoaXMuX21vdXNlRGVsYXlUaW1lciksdGhpcy5pZ25vcmVNaXNzaW5nV2hpY2g9ITEsXz0hMSxlLnByZXZlbnREZWZhdWx0KCl9LF9tb3VzZURpc3RhbmNlTWV0OmZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLm1heChNYXRoLmFicyh0aGlzLl9tb3VzZURvd25FdmVudC5wYWdlWC10LnBhZ2VYKSxNYXRoLmFicyh0aGlzLl9tb3VzZURvd25FdmVudC5wYWdlWS10LnBhZ2VZKSk+PXRoaXMub3B0aW9ucy5kaXN0YW5jZX0sX21vdXNlRGVsYXlNZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tb3VzZURlbGF5TWV0fSxfbW91c2VTdGFydDpmdW5jdGlvbigpe30sX21vdXNlRHJhZzpmdW5jdGlvbigpe30sX21vdXNlU3RvcDpmdW5jdGlvbigpe30sX21vdXNlQ2FwdHVyZTpmdW5jdGlvbigpe3JldHVybiEwfX0pLHQudWkucGx1Z2luPXthZGQ6ZnVuY3Rpb24oZSxpLHMpe3ZhciBuLG89dC51aVtlXS5wcm90b3R5cGU7Zm9yKG4gaW4gcylvLnBsdWdpbnNbbl09by5wbHVnaW5zW25dfHxbXSxvLnBsdWdpbnNbbl0ucHVzaChbaSxzW25dXSl9LGNhbGw6ZnVuY3Rpb24odCxlLGkscyl7dmFyIG4sbz10LnBsdWdpbnNbZV07aWYobyYmKHN8fHQuZWxlbWVudFswXS5wYXJlbnROb2RlJiYxMSE9PXQuZWxlbWVudFswXS5wYXJlbnROb2RlLm5vZGVUeXBlKSlmb3Iobj0wO28ubGVuZ3RoPm47bisrKXQub3B0aW9uc1tvW25dWzBdXSYmb1tuXVsxXS5hcHBseSh0LmVsZW1lbnQsaSl9fSx0LnVpLnNhZmVCbHVyPWZ1bmN0aW9uKGUpe2UmJiJib2R5IiE9PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSYmdChlKS50cmlnZ2VyKCJibHVyIil9LHQud2lkZ2V0KCJ1aS5kcmFnZ2FibGUiLHQudWkubW91c2Use3ZlcnNpb246IjEuMTIuMSIsd2lkZ2V0RXZlbnRQcmVmaXg6ImRyYWciLG9wdGlvbnM6e2FkZENsYXNzZXM6ITAsYXBwZW5kVG86InBhcmVudCIsYXhpczohMSxjb25uZWN0VG9Tb3J0YWJsZTohMSxjb250YWlubWVudDohMSxjdXJzb3I6ImF1dG8iLGN1cnNvckF0OiExLGdyaWQ6ITEsaGFuZGxlOiExLGhlbHBlcjoib3JpZ2luYWwiLGlmcmFtZUZpeDohMSxvcGFjaXR5OiExLHJlZnJlc2hQb3NpdGlvbnM6ITEscmV2ZXJ0OiExLHJldmVydER1cmF0aW9uOjUwMCxzY29wZToiZGVmYXVsdCIsc2Nyb2xsOiEwLHNjcm9sbFNlbnNpdGl2aXR5OjIwLHNjcm9sbFNwZWVkOjIwLHNuYXA6ITEsc25hcE1vZGU6ImJvdGgiLHNuYXBUb2xlcmFuY2U6MjAsc3RhY2s6ITEsekluZGV4OiExLGRyYWc6bnVsbCxzdGFydDpudWxsLHN0b3A6bnVsbH0sX2NyZWF0ZTpmdW5jdGlvbigpeyJvcmlnaW5hbCI9PT10aGlzLm9wdGlvbnMuaGVscGVyJiZ0aGlzLl9zZXRQb3NpdGlvblJlbGF0aXZlKCksdGhpcy5vcHRpb25zLmFkZENsYXNzZXMmJnRoaXMuX2FkZENsYXNzKCJ1aS1kcmFnZ2FibGUiKSx0aGlzLl9zZXRIYW5kbGVDbGFzc05hbWUoKSx0aGlzLl9tb3VzZUluaXQoKX0sX3NldE9wdGlvbjpmdW5jdGlvbih0LGUpe3RoaXMuX3N1cGVyKHQsZSksImhhbmRsZSI9PT10JiYodGhpcy5fcmVtb3ZlSGFuZGxlQ2xhc3NOYW1lKCksdGhpcy5fc2V0SGFuZGxlQ2xhc3NOYW1lKCkpfSxfZGVzdHJveTpmdW5jdGlvbigpe3JldHVybih0aGlzLmhlbHBlcnx8dGhpcy5lbGVtZW50KS5pcygiLnVpLWRyYWdnYWJsZS1kcmFnZ2luZyIpPyh0aGlzLmRlc3Ryb3lPbkNsZWFyPSEwLHZvaWQgMCk6KHRoaXMuX3JlbW92ZUhhbmRsZUNsYXNzTmFtZSgpLHRoaXMuX21vdXNlRGVzdHJveSgpLHZvaWQgMCl9LF9tb3VzZUNhcHR1cmU6ZnVuY3Rpb24oZSl7dmFyIGk9dGhpcy5vcHRpb25zO3JldHVybiB0aGlzLmhlbHBlcnx8aS5kaXNhYmxlZHx8dChlLnRhcmdldCkuY2xvc2VzdCgiLnVpLXJlc2l6YWJsZS1oYW5kbGUiKS5sZW5ndGg+MD8hMToodGhpcy5oYW5kbGU9dGhpcy5fZ2V0SGFuZGxlKGUpLHRoaXMuaGFuZGxlPyh0aGlzLl9ibHVyQWN0aXZlRWxlbWVudChlKSx0aGlzLl9ibG9ja0ZyYW1lcyhpLmlmcmFtZUZpeD09PSEwPyJpZnJhbWUiOmkuaWZyYW1lRml4KSwhMCk6ITEpfSxfYmxvY2tGcmFtZXM6ZnVuY3Rpb24oZSl7dGhpcy5pZnJhbWVCbG9ja3M9dGhpcy5kb2N1bWVudC5maW5kKGUpLm1hcChmdW5jdGlvbigpe3ZhciBlPXQodGhpcyk7cmV0dXJuIHQoIjxkaXY+IikuY3NzKCJwb3NpdGlvbiIsImFic29sdXRlIikuYXBwZW5kVG8oZS5wYXJlbnQoKSkub3V0ZXJXaWR0aChlLm91dGVyV2lkdGgoKSkub3V0ZXJIZWlnaHQoZS5vdXRlckhlaWdodCgpKS5vZmZzZXQoZS5vZmZzZXQoKSlbMF19KX0sX3VuYmxvY2tGcmFtZXM6ZnVuY3Rpb24oKXt0aGlzLmlmcmFtZUJsb2NrcyYmKHRoaXMuaWZyYW1lQmxvY2tzLnJlbW92ZSgpLGRlbGV0ZSB0aGlzLmlmcmFtZUJsb2Nrcyl9LF9ibHVyQWN0aXZlRWxlbWVudDpmdW5jdGlvbihlKXt2YXIgaT10LnVpLnNhZmVBY3RpdmVFbGVtZW50KHRoaXMuZG9jdW1lbnRbMF0pLHM9dChlLnRhcmdldCk7cy5jbG9zZXN0KGkpLmxlbmd0aHx8dC51aS5zYWZlQmx1cihpKX0sX21vdXNlU3RhcnQ6ZnVuY3Rpb24oZSl7dmFyIGk9dGhpcy5vcHRpb25zO3JldHVybiB0aGlzLmhlbHBlcj10aGlzLl9jcmVhdGVIZWxwZXIoZSksdGhpcy5fYWRkQ2xhc3ModGhpcy5oZWxwZXIsInVpLWRyYWdnYWJsZS1kcmFnZ2luZyIpLHRoaXMuX2NhY2hlSGVscGVyUHJvcG9ydGlvbnMoKSx0LnVpLmRkbWFuYWdlciYmKHQudWkuZGRtYW5hZ2VyLmN1cnJlbnQ9dGhpcyksdGhpcy5fY2FjaGVNYXJnaW5zKCksdGhpcy5jc3NQb3NpdGlvbj10aGlzLmhlbHBlci5jc3MoInBvc2l0aW9uIiksdGhpcy5zY3JvbGxQYXJlbnQ9dGhpcy5oZWxwZXIuc2Nyb2xsUGFyZW50KCEwKSx0aGlzLm9mZnNldFBhcmVudD10aGlzLmhlbHBlci5vZmZzZXRQYXJlbnQoKSx0aGlzLmhhc0ZpeGVkQW5jZXN0b3I9dGhpcy5oZWxwZXIucGFyZW50cygpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiJmaXhlZCI9PT10KHRoaXMpLmNzcygicG9zaXRpb24iKX0pLmxlbmd0aD4wLHRoaXMucG9zaXRpb25BYnM9dGhpcy5lbGVtZW50Lm9mZnNldCgpLHRoaXMuX3JlZnJlc2hPZmZzZXRzKGUpLHRoaXMub3JpZ2luYWxQb3NpdGlvbj10aGlzLnBvc2l0aW9uPXRoaXMuX2dlbmVyYXRlUG9zaXRpb24oZSwhMSksdGhpcy5vcmlnaW5hbFBhZ2VYPWUucGFnZVgsdGhpcy5vcmlnaW5hbFBhZ2VZPWUucGFnZVksaS5jdXJzb3JBdCYmdGhpcy5fYWRqdXN0T2Zmc2V0RnJvbUhlbHBlcihpLmN1cnNvckF0KSx0aGlzLl9zZXRDb250YWlubWVudCgpLHRoaXMuX3RyaWdnZXIoInN0YXJ0IixlKT09PSExPyh0aGlzLl9jbGVhcigpLCExKToodGhpcy5fY2FjaGVIZWxwZXJQcm9wb3J0aW9ucygpLHQudWkuZGRtYW5hZ2VyJiYhaS5kcm9wQmVoYXZpb3VyJiZ0LnVpLmRkbWFuYWdlci5wcmVwYXJlT2Zmc2V0cyh0aGlzLGUpLHRoaXMuX21vdXNlRHJhZyhlLCEwKSx0LnVpLmRkbWFuYWdlciYmdC51aS5kZG1hbmFnZXIuZHJhZ1N0YXJ0KHRoaXMsZSksITApfSxfcmVmcmVzaE9mZnNldHM6ZnVuY3Rpb24odCl7dGhpcy5vZmZzZXQ9e3RvcDp0aGlzLnBvc2l0aW9uQWJzLnRvcC10aGlzLm1hcmdpbnMudG9wLGxlZnQ6dGhpcy5wb3NpdGlvbkFicy5sZWZ0LXRoaXMubWFyZ2lucy5sZWZ0LHNjcm9sbDohMSxwYXJlbnQ6dGhpcy5fZ2V0UGFyZW50T2Zmc2V0KCkscmVsYXRpdmU6dGhpcy5fZ2V0UmVsYXRpdmVPZmZzZXQoKX0sdGhpcy5vZmZzZXQuY2xpY2s9e2xlZnQ6dC5wYWdlWC10aGlzLm9mZnNldC5sZWZ0LHRvcDp0LnBhZ2VZLXRoaXMub2Zmc2V0LnRvcH19LF9tb3VzZURyYWc6ZnVuY3Rpb24oZSxpKXtpZih0aGlzLmhhc0ZpeGVkQW5jZXN0b3ImJih0aGlzLm9mZnNldC5wYXJlbnQ9dGhpcy5fZ2V0UGFyZW50T2Zmc2V0KCkpLHRoaXMucG9zaXRpb249dGhpcy5fZ2VuZXJhdGVQb3NpdGlvbihlLCEwKSx0aGlzLnBvc2l0aW9uQWJzPXRoaXMuX2NvbnZlcnRQb3NpdGlvblRvKCJhYnNvbHV0ZSIpLCFpKXt2YXIgcz10aGlzLl91aUhhc2goKTtpZih0aGlzLl90cmlnZ2VyKCJkcmFnIixlLHMpPT09ITEpcmV0dXJuIHRoaXMuX21vdXNlVXAobmV3IHQuRXZlbnQoIm1vdXNldXAiLGUpKSwhMTt0aGlzLnBvc2l0aW9uPXMucG9zaXRpb259cmV0dXJuIHRoaXMuaGVscGVyWzBdLnN0eWxlLmxlZnQ9dGhpcy5wb3NpdGlvbi5sZWZ0KyJweCIsdGhpcy5oZWxwZXJbMF0uc3R5bGUudG9wPXRoaXMucG9zaXRpb24udG9wKyJweCIsdC51aS5kZG1hbmFnZXImJnQudWkuZGRtYW5hZ2VyLmRyYWcodGhpcyxlKSwhMX0sX21vdXNlU3RvcDpmdW5jdGlvbihlKXt2YXIgaT10aGlzLHM9ITE7cmV0dXJuIHQudWkuZGRtYW5hZ2VyJiYhdGhpcy5vcHRpb25zLmRyb3BCZWhhdmlvdXImJihzPXQudWkuZGRtYW5hZ2VyLmRyb3AodGhpcyxlKSksdGhpcy5kcm9wcGVkJiYocz10aGlzLmRyb3BwZWQsdGhpcy5kcm9wcGVkPSExKSwiaW52YWxpZCI9PT10aGlzLm9wdGlvbnMucmV2ZXJ0JiYhc3x8InZhbGlkIj09PXRoaXMub3B0aW9ucy5yZXZlcnQmJnN8fHRoaXMub3B0aW9ucy5yZXZlcnQ9PT0hMHx8dC5pc0Z1bmN0aW9uKHRoaXMub3B0aW9ucy5yZXZlcnQpJiZ0aGlzLm9wdGlvbnMucmV2ZXJ0LmNhbGwodGhpcy5lbGVtZW50LHMpP3QodGhpcy5oZWxwZXIpLmFuaW1hdGUodGhpcy5vcmlnaW5hbFBvc2l0aW9uLHBhcnNlSW50KHRoaXMub3B0aW9ucy5yZXZlcnREdXJhdGlvbiwxMCksZnVuY3Rpb24oKXtpLl90cmlnZ2VyKCJzdG9wIixlKSE9PSExJiZpLl9jbGVhcigpfSk6dGhpcy5fdHJpZ2dlcigic3RvcCIsZSkhPT0hMSYmdGhpcy5fY2xlYXIoKSwhMX0sX21vdXNlVXA6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3VuYmxvY2tGcmFtZXMoKSx0LnVpLmRkbWFuYWdlciYmdC51aS5kZG1hbmFnZXIuZHJhZ1N0b3AodGhpcyxlKSx0aGlzLmhhbmRsZUVsZW1lbnQuaXMoZS50YXJnZXQpJiZ0aGlzLmVsZW1lbnQudHJpZ2dlcigiZm9jdXMiKSx0LnVpLm1vdXNlLnByb3RvdHlwZS5fbW91c2VVcC5jYWxsKHRoaXMsZSl9LGNhbmNlbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhlbHBlci5pcygiLnVpLWRyYWdnYWJsZS1kcmFnZ2luZyIpP3RoaXMuX21vdXNlVXAobmV3IHQuRXZlbnQoIm1vdXNldXAiLHt0YXJnZXQ6dGhpcy5lbGVtZW50WzBdfSkpOnRoaXMuX2NsZWFyKCksdGhpc30sX2dldEhhbmRsZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5vcHRpb25zLmhhbmRsZT8hIXQoZS50YXJnZXQpLmNsb3Nlc3QodGhpcy5lbGVtZW50LmZpbmQodGhpcy5vcHRpb25zLmhhbmRsZSkpLmxlbmd0aDohMH0sX3NldEhhbmRsZUNsYXNzTmFtZTpmdW5jdGlvbigpe3RoaXMuaGFuZGxlRWxlbWVudD10aGlzLm9wdGlvbnMuaGFuZGxlP3RoaXMuZWxlbWVudC5maW5kKHRoaXMub3B0aW9ucy5oYW5kbGUpOnRoaXMuZWxlbWVudCx0aGlzLl9hZGRDbGFzcyh0aGlzLmhhbmRsZUVsZW1lbnQsInVpLWRyYWdnYWJsZS1oYW5kbGUiKX0sX3JlbW92ZUhhbmRsZUNsYXNzTmFtZTpmdW5jdGlvbigpe3RoaXMuX3JlbW92ZUNsYXNzKHRoaXMuaGFuZGxlRWxlbWVudCwidWktZHJhZ2dhYmxlLWhhbmRsZSIpfSxfY3JlYXRlSGVscGVyOmZ1bmN0aW9uKGUpe3ZhciBpPXRoaXMub3B0aW9ucyxzPXQuaXNGdW5jdGlvbihpLmhlbHBlciksbj1zP3QoaS5oZWxwZXIuYXBwbHkodGhpcy5lbGVtZW50WzBdLFtlXSkpOiJjbG9uZSI9PT1pLmhlbHBlcj90aGlzLmVsZW1lbnQuY2xvbmUoKS5yZW1vdmVBdHRyKCJpZCIpOnRoaXMuZWxlbWVudDtyZXR1cm4gbi5wYXJlbnRzKCJib2R5IikubGVuZ3RofHxuLmFwcGVuZFRvKCJwYXJlbnQiPT09aS5hcHBlbmRUbz90aGlzLmVsZW1lbnRbMF0ucGFyZW50Tm9kZTppLmFwcGVuZFRvKSxzJiZuWzBdPT09dGhpcy5lbGVtZW50WzBdJiZ0aGlzLl9zZXRQb3NpdGlvblJlbGF0aXZlKCksblswXT09PXRoaXMuZWxlbWVudFswXXx8LyhmaXhlZHxhYnNvbHV0ZSkvLnRlc3Qobi5jc3MoInBvc2l0aW9uIikpfHxuLmNzcygicG9zaXRpb24iLCJhYnNvbHV0ZSIpLG59LF9zZXRQb3NpdGlvblJlbGF0aXZlOmZ1bmN0aW9uKCl7L14oPzpyfGF8ZikvLnRlc3QodGhpcy5lbGVtZW50LmNzcygicG9zaXRpb24iKSl8fCh0aGlzLmVsZW1lbnRbMF0uc3R5bGUucG9zaXRpb249InJlbGF0aXZlIil9LF9hZGp1c3RPZmZzZXRGcm9tSGVscGVyOmZ1bmN0aW9uKGUpeyJzdHJpbmciPT10eXBlb2YgZSYmKGU9ZS5zcGxpdCgiICIpKSx0LmlzQXJyYXkoZSkmJihlPXtsZWZ0OitlWzBdLHRvcDorZVsxXXx8MH0pLCJsZWZ0ImluIGUmJih0aGlzLm9mZnNldC5jbGljay5sZWZ0PWUubGVmdCt0aGlzLm1hcmdpbnMubGVmdCksInJpZ2h0ImluIGUmJih0aGlzLm9mZnNldC5jbGljay5sZWZ0PXRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgtZS5yaWdodCt0aGlzLm1hcmdpbnMubGVmdCksInRvcCJpbiBlJiYodGhpcy5vZmZzZXQuY2xpY2sudG9wPWUudG9wK3RoaXMubWFyZ2lucy50b3ApLCJib3R0b20iaW4gZSYmKHRoaXMub2Zmc2V0LmNsaWNrLnRvcD10aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodC1lLmJvdHRvbSt0aGlzLm1hcmdpbnMudG9wKX0sX2lzUm9vdE5vZGU6ZnVuY3Rpb24odCl7cmV0dXJuLyhodG1sfGJvZHkpL2kudGVzdCh0LnRhZ05hbWUpfHx0PT09dGhpcy5kb2N1bWVudFswXX0sX2dldFBhcmVudE9mZnNldDpmdW5jdGlvbigpe3ZhciBlPXRoaXMub2Zmc2V0UGFyZW50Lm9mZnNldCgpLGk9dGhpcy5kb2N1bWVudFswXTtyZXR1cm4iYWJzb2x1dGUiPT09dGhpcy5jc3NQb3NpdGlvbiYmdGhpcy5zY3JvbGxQYXJlbnRbMF0hPT1pJiZ0LmNvbnRhaW5zKHRoaXMuc2Nyb2xsUGFyZW50WzBdLHRoaXMub2Zmc2V0UGFyZW50WzBdKSYmKGUubGVmdCs9dGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpLGUudG9wKz10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKSksdGhpcy5faXNSb290Tm9kZSh0aGlzLm9mZnNldFBhcmVudFswXSkmJihlPXt0b3A6MCxsZWZ0OjB9KSx7dG9wOmUudG9wKyhwYXJzZUludCh0aGlzLm9mZnNldFBhcmVudC5jc3MoImJvcmRlclRvcFdpZHRoIiksMTApfHwwKSxsZWZ0OmUubGVmdCsocGFyc2VJbnQodGhpcy5vZmZzZXRQYXJlbnQuY3NzKCJib3JkZXJMZWZ0V2lkdGgiKSwxMCl8fDApfX0sX2dldFJlbGF0aXZlT2Zmc2V0OmZ1bmN0aW9uKCl7aWYoInJlbGF0aXZlIiE9PXRoaXMuY3NzUG9zaXRpb24pcmV0dXJue3RvcDowLGxlZnQ6MH07dmFyIHQ9dGhpcy5lbGVtZW50LnBvc2l0aW9uKCksZT10aGlzLl9pc1Jvb3ROb2RlKHRoaXMuc2Nyb2xsUGFyZW50WzBdKTtyZXR1cm57dG9wOnQudG9wLShwYXJzZUludCh0aGlzLmhlbHBlci5jc3MoInRvcCIpLDEwKXx8MCkrKGU/MDp0aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKSksbGVmdDp0LmxlZnQtKHBhcnNlSW50KHRoaXMuaGVscGVyLmNzcygibGVmdCIpLDEwKXx8MCkrKGU/MDp0aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0KCkpfQp9LF9jYWNoZU1hcmdpbnM6ZnVuY3Rpb24oKXt0aGlzLm1hcmdpbnM9e2xlZnQ6cGFyc2VJbnQodGhpcy5lbGVtZW50LmNzcygibWFyZ2luTGVmdCIpLDEwKXx8MCx0b3A6cGFyc2VJbnQodGhpcy5lbGVtZW50LmNzcygibWFyZ2luVG9wIiksMTApfHwwLHJpZ2h0OnBhcnNlSW50KHRoaXMuZWxlbWVudC5jc3MoIm1hcmdpblJpZ2h0IiksMTApfHwwLGJvdHRvbTpwYXJzZUludCh0aGlzLmVsZW1lbnQuY3NzKCJtYXJnaW5Cb3R0b20iKSwxMCl8fDB9fSxfY2FjaGVIZWxwZXJQcm9wb3J0aW9uczpmdW5jdGlvbigpe3RoaXMuaGVscGVyUHJvcG9ydGlvbnM9e3dpZHRoOnRoaXMuaGVscGVyLm91dGVyV2lkdGgoKSxoZWlnaHQ6dGhpcy5oZWxwZXIub3V0ZXJIZWlnaHQoKX19LF9zZXRDb250YWlubWVudDpmdW5jdGlvbigpe3ZhciBlLGkscyxuPXRoaXMub3B0aW9ucyxvPXRoaXMuZG9jdW1lbnRbMF07cmV0dXJuIHRoaXMucmVsYXRpdmVDb250YWluZXI9bnVsbCxuLmNvbnRhaW5tZW50PyJ3aW5kb3ciPT09bi5jb250YWlubWVudD8odGhpcy5jb250YWlubWVudD1bdCh3aW5kb3cpLnNjcm9sbExlZnQoKS10aGlzLm9mZnNldC5yZWxhdGl2ZS5sZWZ0LXRoaXMub2Zmc2V0LnBhcmVudC5sZWZ0LHQod2luZG93KS5zY3JvbGxUb3AoKS10aGlzLm9mZnNldC5yZWxhdGl2ZS50b3AtdGhpcy5vZmZzZXQucGFyZW50LnRvcCx0KHdpbmRvdykuc2Nyb2xsTGVmdCgpK3Qod2luZG93KS53aWR0aCgpLXRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgtdGhpcy5tYXJnaW5zLmxlZnQsdCh3aW5kb3cpLnNjcm9sbFRvcCgpKyh0KHdpbmRvdykuaGVpZ2h0KCl8fG8uYm9keS5wYXJlbnROb2RlLnNjcm9sbEhlaWdodCktdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQtdGhpcy5tYXJnaW5zLnRvcF0sdm9pZCAwKToiZG9jdW1lbnQiPT09bi5jb250YWlubWVudD8odGhpcy5jb250YWlubWVudD1bMCwwLHQobykud2lkdGgoKS10aGlzLmhlbHBlclByb3BvcnRpb25zLndpZHRoLXRoaXMubWFyZ2lucy5sZWZ0LCh0KG8pLmhlaWdodCgpfHxvLmJvZHkucGFyZW50Tm9kZS5zY3JvbGxIZWlnaHQpLXRoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LXRoaXMubWFyZ2lucy50b3BdLHZvaWQgMCk6bi5jb250YWlubWVudC5jb25zdHJ1Y3Rvcj09PUFycmF5Pyh0aGlzLmNvbnRhaW5tZW50PW4uY29udGFpbm1lbnQsdm9pZCAwKTooInBhcmVudCI9PT1uLmNvbnRhaW5tZW50JiYobi5jb250YWlubWVudD10aGlzLmhlbHBlclswXS5wYXJlbnROb2RlKSxpPXQobi5jb250YWlubWVudCkscz1pWzBdLHMmJihlPS8oc2Nyb2xsfGF1dG8pLy50ZXN0KGkuY3NzKCJvdmVyZmxvdyIpKSx0aGlzLmNvbnRhaW5tZW50PVsocGFyc2VJbnQoaS5jc3MoImJvcmRlckxlZnRXaWR0aCIpLDEwKXx8MCkrKHBhcnNlSW50KGkuY3NzKCJwYWRkaW5nTGVmdCIpLDEwKXx8MCksKHBhcnNlSW50KGkuY3NzKCJib3JkZXJUb3BXaWR0aCIpLDEwKXx8MCkrKHBhcnNlSW50KGkuY3NzKCJwYWRkaW5nVG9wIiksMTApfHwwKSwoZT9NYXRoLm1heChzLnNjcm9sbFdpZHRoLHMub2Zmc2V0V2lkdGgpOnMub2Zmc2V0V2lkdGgpLShwYXJzZUludChpLmNzcygiYm9yZGVyUmlnaHRXaWR0aCIpLDEwKXx8MCktKHBhcnNlSW50KGkuY3NzKCJwYWRkaW5nUmlnaHQiKSwxMCl8fDApLXRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgtdGhpcy5tYXJnaW5zLmxlZnQtdGhpcy5tYXJnaW5zLnJpZ2h0LChlP01hdGgubWF4KHMuc2Nyb2xsSGVpZ2h0LHMub2Zmc2V0SGVpZ2h0KTpzLm9mZnNldEhlaWdodCktKHBhcnNlSW50KGkuY3NzKCJib3JkZXJCb3R0b21XaWR0aCIpLDEwKXx8MCktKHBhcnNlSW50KGkuY3NzKCJwYWRkaW5nQm90dG9tIiksMTApfHwwKS10aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodC10aGlzLm1hcmdpbnMudG9wLXRoaXMubWFyZ2lucy5ib3R0b21dLHRoaXMucmVsYXRpdmVDb250YWluZXI9aSksdm9pZCAwKToodGhpcy5jb250YWlubWVudD1udWxsLHZvaWQgMCl9LF9jb252ZXJ0UG9zaXRpb25UbzpmdW5jdGlvbih0LGUpe2V8fChlPXRoaXMucG9zaXRpb24pO3ZhciBpPSJhYnNvbHV0ZSI9PT10PzE6LTEscz10aGlzLl9pc1Jvb3ROb2RlKHRoaXMuc2Nyb2xsUGFyZW50WzBdKTtyZXR1cm57dG9wOmUudG9wK3RoaXMub2Zmc2V0LnJlbGF0aXZlLnRvcCppK3RoaXMub2Zmc2V0LnBhcmVudC50b3AqaS0oImZpeGVkIj09PXRoaXMuY3NzUG9zaXRpb24/LXRoaXMub2Zmc2V0LnNjcm9sbC50b3A6cz8wOnRoaXMub2Zmc2V0LnNjcm9sbC50b3ApKmksbGVmdDplLmxlZnQrdGhpcy5vZmZzZXQucmVsYXRpdmUubGVmdCppK3RoaXMub2Zmc2V0LnBhcmVudC5sZWZ0KmktKCJmaXhlZCI9PT10aGlzLmNzc1Bvc2l0aW9uPy10aGlzLm9mZnNldC5zY3JvbGwubGVmdDpzPzA6dGhpcy5vZmZzZXQuc2Nyb2xsLmxlZnQpKml9fSxfZ2VuZXJhdGVQb3NpdGlvbjpmdW5jdGlvbih0LGUpe3ZhciBpLHMsbixvLGE9dGhpcy5vcHRpb25zLHI9dGhpcy5faXNSb290Tm9kZSh0aGlzLnNjcm9sbFBhcmVudFswXSksaD10LnBhZ2VYLGw9dC5wYWdlWTtyZXR1cm4gciYmdGhpcy5vZmZzZXQuc2Nyb2xsfHwodGhpcy5vZmZzZXQuc2Nyb2xsPXt0b3A6dGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsVG9wKCksbGVmdDp0aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0KCl9KSxlJiYodGhpcy5jb250YWlubWVudCYmKHRoaXMucmVsYXRpdmVDb250YWluZXI/KHM9dGhpcy5yZWxhdGl2ZUNvbnRhaW5lci5vZmZzZXQoKSxpPVt0aGlzLmNvbnRhaW5tZW50WzBdK3MubGVmdCx0aGlzLmNvbnRhaW5tZW50WzFdK3MudG9wLHRoaXMuY29udGFpbm1lbnRbMl0rcy5sZWZ0LHRoaXMuY29udGFpbm1lbnRbM10rcy50b3BdKTppPXRoaXMuY29udGFpbm1lbnQsdC5wYWdlWC10aGlzLm9mZnNldC5jbGljay5sZWZ0PGlbMF0mJihoPWlbMF0rdGhpcy5vZmZzZXQuY2xpY2subGVmdCksdC5wYWdlWS10aGlzLm9mZnNldC5jbGljay50b3A8aVsxXSYmKGw9aVsxXSt0aGlzLm9mZnNldC5jbGljay50b3ApLHQucGFnZVgtdGhpcy5vZmZzZXQuY2xpY2subGVmdD5pWzJdJiYoaD1pWzJdK3RoaXMub2Zmc2V0LmNsaWNrLmxlZnQpLHQucGFnZVktdGhpcy5vZmZzZXQuY2xpY2sudG9wPmlbM10mJihsPWlbM10rdGhpcy5vZmZzZXQuY2xpY2sudG9wKSksYS5ncmlkJiYobj1hLmdyaWRbMV0/dGhpcy5vcmlnaW5hbFBhZ2VZK01hdGgucm91bmQoKGwtdGhpcy5vcmlnaW5hbFBhZ2VZKS9hLmdyaWRbMV0pKmEuZ3JpZFsxXTp0aGlzLm9yaWdpbmFsUGFnZVksbD1pP24tdGhpcy5vZmZzZXQuY2xpY2sudG9wPj1pWzFdfHxuLXRoaXMub2Zmc2V0LmNsaWNrLnRvcD5pWzNdP246bi10aGlzLm9mZnNldC5jbGljay50b3A+PWlbMV0/bi1hLmdyaWRbMV06bithLmdyaWRbMV06bixvPWEuZ3JpZFswXT90aGlzLm9yaWdpbmFsUGFnZVgrTWF0aC5yb3VuZCgoaC10aGlzLm9yaWdpbmFsUGFnZVgpL2EuZ3JpZFswXSkqYS5ncmlkWzBdOnRoaXMub3JpZ2luYWxQYWdlWCxoPWk/by10aGlzLm9mZnNldC5jbGljay5sZWZ0Pj1pWzBdfHxvLXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQ+aVsyXT9vOm8tdGhpcy5vZmZzZXQuY2xpY2subGVmdD49aVswXT9vLWEuZ3JpZFswXTpvK2EuZ3JpZFswXTpvKSwieSI9PT1hLmF4aXMmJihoPXRoaXMub3JpZ2luYWxQYWdlWCksIngiPT09YS5heGlzJiYobD10aGlzLm9yaWdpbmFsUGFnZVkpKSx7dG9wOmwtdGhpcy5vZmZzZXQuY2xpY2sudG9wLXRoaXMub2Zmc2V0LnJlbGF0aXZlLnRvcC10aGlzLm9mZnNldC5wYXJlbnQudG9wKygiZml4ZWQiPT09dGhpcy5jc3NQb3NpdGlvbj8tdGhpcy5vZmZzZXQuc2Nyb2xsLnRvcDpyPzA6dGhpcy5vZmZzZXQuc2Nyb2xsLnRvcCksbGVmdDpoLXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQtdGhpcy5vZmZzZXQucmVsYXRpdmUubGVmdC10aGlzLm9mZnNldC5wYXJlbnQubGVmdCsoImZpeGVkIj09PXRoaXMuY3NzUG9zaXRpb24/LXRoaXMub2Zmc2V0LnNjcm9sbC5sZWZ0OnI/MDp0aGlzLm9mZnNldC5zY3JvbGwubGVmdCl9fSxfY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLl9yZW1vdmVDbGFzcyh0aGlzLmhlbHBlciwidWktZHJhZ2dhYmxlLWRyYWdnaW5nIiksdGhpcy5oZWxwZXJbMF09PT10aGlzLmVsZW1lbnRbMF18fHRoaXMuY2FuY2VsSGVscGVyUmVtb3ZhbHx8dGhpcy5oZWxwZXIucmVtb3ZlKCksdGhpcy5oZWxwZXI9bnVsbCx0aGlzLmNhbmNlbEhlbHBlclJlbW92YWw9ITEsdGhpcy5kZXN0cm95T25DbGVhciYmdGhpcy5kZXN0cm95KCl9LF90cmlnZ2VyOmZ1bmN0aW9uKGUsaSxzKXtyZXR1cm4gcz1zfHx0aGlzLl91aUhhc2goKSx0LnVpLnBsdWdpbi5jYWxsKHRoaXMsZSxbaSxzLHRoaXNdLCEwKSwvXihkcmFnfHN0YXJ0fHN0b3ApLy50ZXN0KGUpJiYodGhpcy5wb3NpdGlvbkFicz10aGlzLl9jb252ZXJ0UG9zaXRpb25UbygiYWJzb2x1dGUiKSxzLm9mZnNldD10aGlzLnBvc2l0aW9uQWJzKSx0LldpZGdldC5wcm90b3R5cGUuX3RyaWdnZXIuY2FsbCh0aGlzLGUsaSxzKX0scGx1Z2luczp7fSxfdWlIYXNoOmZ1bmN0aW9uKCl7cmV0dXJue2hlbHBlcjp0aGlzLmhlbHBlcixwb3NpdGlvbjp0aGlzLnBvc2l0aW9uLG9yaWdpbmFsUG9zaXRpb246dGhpcy5vcmlnaW5hbFBvc2l0aW9uLG9mZnNldDp0aGlzLnBvc2l0aW9uQWJzfX19KSx0LnVpLnBsdWdpbi5hZGQoImRyYWdnYWJsZSIsImNvbm5lY3RUb1NvcnRhYmxlIix7c3RhcnQ6ZnVuY3Rpb24oZSxpLHMpe3ZhciBuPXQuZXh0ZW5kKHt9LGkse2l0ZW06cy5lbGVtZW50fSk7cy5zb3J0YWJsZXM9W10sdChzLm9wdGlvbnMuY29ubmVjdFRvU29ydGFibGUpLmVhY2goZnVuY3Rpb24oKXt2YXIgaT10KHRoaXMpLnNvcnRhYmxlKCJpbnN0YW5jZSIpO2kmJiFpLm9wdGlvbnMuZGlzYWJsZWQmJihzLnNvcnRhYmxlcy5wdXNoKGkpLGkucmVmcmVzaFBvc2l0aW9ucygpLGkuX3RyaWdnZXIoImFjdGl2YXRlIixlLG4pKX0pfSxzdG9wOmZ1bmN0aW9uKGUsaSxzKXt2YXIgbj10LmV4dGVuZCh7fSxpLHtpdGVtOnMuZWxlbWVudH0pO3MuY2FuY2VsSGVscGVyUmVtb3ZhbD0hMSx0LmVhY2gocy5zb3J0YWJsZXMsZnVuY3Rpb24oKXt2YXIgdD10aGlzO3QuaXNPdmVyPyh0LmlzT3Zlcj0wLHMuY2FuY2VsSGVscGVyUmVtb3ZhbD0hMCx0LmNhbmNlbEhlbHBlclJlbW92YWw9ITEsdC5fc3RvcmVkQ1NTPXtwb3NpdGlvbjp0LnBsYWNlaG9sZGVyLmNzcygicG9zaXRpb24iKSx0b3A6dC5wbGFjZWhvbGRlci5jc3MoInRvcCIpLGxlZnQ6dC5wbGFjZWhvbGRlci5jc3MoImxlZnQiKX0sdC5fbW91c2VTdG9wKGUpLHQub3B0aW9ucy5oZWxwZXI9dC5vcHRpb25zLl9oZWxwZXIpOih0LmNhbmNlbEhlbHBlclJlbW92YWw9ITAsdC5fdHJpZ2dlcigiZGVhY3RpdmF0ZSIsZSxuKSl9KX0sZHJhZzpmdW5jdGlvbihlLGkscyl7dC5lYWNoKHMuc29ydGFibGVzLGZ1bmN0aW9uKCl7dmFyIG49ITEsbz10aGlzO28ucG9zaXRpb25BYnM9cy5wb3NpdGlvbkFicyxvLmhlbHBlclByb3BvcnRpb25zPXMuaGVscGVyUHJvcG9ydGlvbnMsby5vZmZzZXQuY2xpY2s9cy5vZmZzZXQuY2xpY2ssby5faW50ZXJzZWN0c1dpdGgoby5jb250YWluZXJDYWNoZSkmJihuPSEwLHQuZWFjaChzLnNvcnRhYmxlcyxmdW5jdGlvbigpe3JldHVybiB0aGlzLnBvc2l0aW9uQWJzPXMucG9zaXRpb25BYnMsdGhpcy5oZWxwZXJQcm9wb3J0aW9ucz1zLmhlbHBlclByb3BvcnRpb25zLHRoaXMub2Zmc2V0LmNsaWNrPXMub2Zmc2V0LmNsaWNrLHRoaXMhPT1vJiZ0aGlzLl9pbnRlcnNlY3RzV2l0aCh0aGlzLmNvbnRhaW5lckNhY2hlKSYmdC5jb250YWlucyhvLmVsZW1lbnRbMF0sdGhpcy5lbGVtZW50WzBdKSYmKG49ITEpLG59KSksbj8oby5pc092ZXJ8fChvLmlzT3Zlcj0xLHMuX3BhcmVudD1pLmhlbHBlci5wYXJlbnQoKSxvLmN1cnJlbnRJdGVtPWkuaGVscGVyLmFwcGVuZFRvKG8uZWxlbWVudCkuZGF0YSgidWktc29ydGFibGUtaXRlbSIsITApLG8ub3B0aW9ucy5faGVscGVyPW8ub3B0aW9ucy5oZWxwZXIsby5vcHRpb25zLmhlbHBlcj1mdW5jdGlvbigpe3JldHVybiBpLmhlbHBlclswXX0sZS50YXJnZXQ9by5jdXJyZW50SXRlbVswXSxvLl9tb3VzZUNhcHR1cmUoZSwhMCksby5fbW91c2VTdGFydChlLCEwLCEwKSxvLm9mZnNldC5jbGljay50b3A9cy5vZmZzZXQuY2xpY2sudG9wLG8ub2Zmc2V0LmNsaWNrLmxlZnQ9cy5vZmZzZXQuY2xpY2subGVmdCxvLm9mZnNldC5wYXJlbnQubGVmdC09cy5vZmZzZXQucGFyZW50LmxlZnQtby5vZmZzZXQucGFyZW50LmxlZnQsby5vZmZzZXQucGFyZW50LnRvcC09cy5vZmZzZXQucGFyZW50LnRvcC1vLm9mZnNldC5wYXJlbnQudG9wLHMuX3RyaWdnZXIoInRvU29ydGFibGUiLGUpLHMuZHJvcHBlZD1vLmVsZW1lbnQsdC5lYWNoKHMuc29ydGFibGVzLGZ1bmN0aW9uKCl7dGhpcy5yZWZyZXNoUG9zaXRpb25zKCl9KSxzLmN1cnJlbnRJdGVtPXMuZWxlbWVudCxvLmZyb21PdXRzaWRlPXMpLG8uY3VycmVudEl0ZW0mJihvLl9tb3VzZURyYWcoZSksaS5wb3NpdGlvbj1vLnBvc2l0aW9uKSk6by5pc092ZXImJihvLmlzT3Zlcj0wLG8uY2FuY2VsSGVscGVyUmVtb3ZhbD0hMCxvLm9wdGlvbnMuX3JldmVydD1vLm9wdGlvbnMucmV2ZXJ0LG8ub3B0aW9ucy5yZXZlcnQ9ITEsby5fdHJpZ2dlcigib3V0IixlLG8uX3VpSGFzaChvKSksby5fbW91c2VTdG9wKGUsITApLG8ub3B0aW9ucy5yZXZlcnQ9by5vcHRpb25zLl9yZXZlcnQsby5vcHRpb25zLmhlbHBlcj1vLm9wdGlvbnMuX2hlbHBlcixvLnBsYWNlaG9sZGVyJiZvLnBsYWNlaG9sZGVyLnJlbW92ZSgpLGkuaGVscGVyLmFwcGVuZFRvKHMuX3BhcmVudCkscy5fcmVmcmVzaE9mZnNldHMoZSksaS5wb3NpdGlvbj1zLl9nZW5lcmF0ZVBvc2l0aW9uKGUsITApLHMuX3RyaWdnZXIoImZyb21Tb3J0YWJsZSIsZSkscy5kcm9wcGVkPSExLHQuZWFjaChzLnNvcnRhYmxlcyxmdW5jdGlvbigpe3RoaXMucmVmcmVzaFBvc2l0aW9ucygpfSkpfSl9fSksdC51aS5wbHVnaW4uYWRkKCJkcmFnZ2FibGUiLCJjdXJzb3IiLHtzdGFydDpmdW5jdGlvbihlLGkscyl7dmFyIG49dCgiYm9keSIpLG89cy5vcHRpb25zO24uY3NzKCJjdXJzb3IiKSYmKG8uX2N1cnNvcj1uLmNzcygiY3Vyc29yIikpLG4uY3NzKCJjdXJzb3IiLG8uY3Vyc29yKX0sc3RvcDpmdW5jdGlvbihlLGkscyl7dmFyIG49cy5vcHRpb25zO24uX2N1cnNvciYmdCgiYm9keSIpLmNzcygiY3Vyc29yIixuLl9jdXJzb3IpfX0pLHQudWkucGx1Z2luLmFkZCgiZHJhZ2dhYmxlIiwib3BhY2l0eSIse3N0YXJ0OmZ1bmN0aW9uKGUsaSxzKXt2YXIgbj10KGkuaGVscGVyKSxvPXMub3B0aW9ucztuLmNzcygib3BhY2l0eSIpJiYoby5fb3BhY2l0eT1uLmNzcygib3BhY2l0eSIpKSxuLmNzcygib3BhY2l0eSIsby5vcGFjaXR5KX0sc3RvcDpmdW5jdGlvbihlLGkscyl7dmFyIG49cy5vcHRpb25zO24uX29wYWNpdHkmJnQoaS5oZWxwZXIpLmNzcygib3BhY2l0eSIsbi5fb3BhY2l0eSl9fSksdC51aS5wbHVnaW4uYWRkKCJkcmFnZ2FibGUiLCJzY3JvbGwiLHtzdGFydDpmdW5jdGlvbih0LGUsaSl7aS5zY3JvbGxQYXJlbnROb3RIaWRkZW58fChpLnNjcm9sbFBhcmVudE5vdEhpZGRlbj1pLmhlbHBlci5zY3JvbGxQYXJlbnQoITEpKSxpLnNjcm9sbFBhcmVudE5vdEhpZGRlblswXSE9PWkuZG9jdW1lbnRbMF0mJiJIVE1MIiE9PWkuc2Nyb2xsUGFyZW50Tm90SGlkZGVuWzBdLnRhZ05hbWUmJihpLm92ZXJmbG93T2Zmc2V0PWkuc2Nyb2xsUGFyZW50Tm90SGlkZGVuLm9mZnNldCgpKX0sZHJhZzpmdW5jdGlvbihlLGkscyl7dmFyIG49cy5vcHRpb25zLG89ITEsYT1zLnNjcm9sbFBhcmVudE5vdEhpZGRlblswXSxyPXMuZG9jdW1lbnRbMF07YSE9PXImJiJIVE1MIiE9PWEudGFnTmFtZT8obi5heGlzJiYieCI9PT1uLmF4aXN8fChzLm92ZXJmbG93T2Zmc2V0LnRvcCthLm9mZnNldEhlaWdodC1lLnBhZ2VZPG4uc2Nyb2xsU2Vuc2l0aXZpdHk/YS5zY3JvbGxUb3A9bz1hLnNjcm9sbFRvcCtuLnNjcm9sbFNwZWVkOmUucGFnZVktcy5vdmVyZmxvd09mZnNldC50b3A8bi5zY3JvbGxTZW5zaXRpdml0eSYmKGEuc2Nyb2xsVG9wPW89YS5zY3JvbGxUb3Atbi5zY3JvbGxTcGVlZCkpLG4uYXhpcyYmInkiPT09bi5heGlzfHwocy5vdmVyZmxvd09mZnNldC5sZWZ0K2Eub2Zmc2V0V2lkdGgtZS5wYWdlWDxuLnNjcm9sbFNlbnNpdGl2aXR5P2Euc2Nyb2xsTGVmdD1vPWEuc2Nyb2xsTGVmdCtuLnNjcm9sbFNwZWVkOmUucGFnZVgtcy5vdmVyZmxvd09mZnNldC5sZWZ0PG4uc2Nyb2xsU2Vuc2l0aXZpdHkmJihhLnNjcm9sbExlZnQ9bz1hLnNjcm9sbExlZnQtbi5zY3JvbGxTcGVlZCkpKToobi5heGlzJiYieCI9PT1uLmF4aXN8fChlLnBhZ2VZLXQocikuc2Nyb2xsVG9wKCk8bi5zY3JvbGxTZW5zaXRpdml0eT9vPXQocikuc2Nyb2xsVG9wKHQocikuc2Nyb2xsVG9wKCktbi5zY3JvbGxTcGVlZCk6dCh3aW5kb3cpLmhlaWdodCgpLShlLnBhZ2VZLXQocikuc2Nyb2xsVG9wKCkpPG4uc2Nyb2xsU2Vuc2l0aXZpdHkmJihvPXQocikuc2Nyb2xsVG9wKHQocikuc2Nyb2xsVG9wKCkrbi5zY3JvbGxTcGVlZCkpKSxuLmF4aXMmJiJ5Ij09PW4uYXhpc3x8KGUucGFnZVgtdChyKS5zY3JvbGxMZWZ0KCk8bi5zY3JvbGxTZW5zaXRpdml0eT9vPXQocikuc2Nyb2xsTGVmdCh0KHIpLnNjcm9sbExlZnQoKS1uLnNjcm9sbFNwZWVkKTp0KHdpbmRvdykud2lkdGgoKS0oZS5wYWdlWC10KHIpLnNjcm9sbExlZnQoKSk8bi5zY3JvbGxTZW5zaXRpdml0eSYmKG89dChyKS5zY3JvbGxMZWZ0KHQocikuc2Nyb2xsTGVmdCgpK24uc2Nyb2xsU3BlZWQpKSkpLG8hPT0hMSYmdC51aS5kZG1hbmFnZXImJiFuLmRyb3BCZWhhdmlvdXImJnQudWkuZGRtYW5hZ2VyLnByZXBhcmVPZmZzZXRzKHMsZSl9fSksdC51aS5wbHVnaW4uYWRkKCJkcmFnZ2FibGUiLCJzbmFwIix7c3RhcnQ6ZnVuY3Rpb24oZSxpLHMpe3ZhciBuPXMub3B0aW9ucztzLnNuYXBFbGVtZW50cz1bXSx0KG4uc25hcC5jb25zdHJ1Y3RvciE9PVN0cmluZz9uLnNuYXAuaXRlbXN8fCI6ZGF0YSh1aS1kcmFnZ2FibGUpIjpuLnNuYXApLmVhY2goZnVuY3Rpb24oKXt2YXIgZT10KHRoaXMpLGk9ZS5vZmZzZXQoKTt0aGlzIT09cy5lbGVtZW50WzBdJiZzLnNuYXBFbGVtZW50cy5wdXNoKHtpdGVtOnRoaXMsd2lkdGg6ZS5vdXRlcldpZHRoKCksaGVpZ2h0OmUub3V0ZXJIZWlnaHQoKSx0b3A6aS50b3AsbGVmdDppLmxlZnR9KX0pfSxkcmFnOmZ1bmN0aW9uKGUsaSxzKXt2YXIgbixvLGEscixoLGwsYyx1LGQscCxmPXMub3B0aW9ucyxnPWYuc25hcFRvbGVyYW5jZSxtPWkub2Zmc2V0LmxlZnQsXz1tK3MuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgsdj1pLm9mZnNldC50b3AsYj12K3MuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0O2ZvcihkPXMuc25hcEVsZW1lbnRzLmxlbmd0aC0xO2Q+PTA7ZC0tKWg9cy5zbmFwRWxlbWVudHNbZF0ubGVmdC1zLm1hcmdpbnMubGVmdCxsPWgrcy5zbmFwRWxlbWVudHNbZF0ud2lkdGgsYz1zLnNuYXBFbGVtZW50c1tkXS50b3Atcy5tYXJnaW5zLnRvcCx1PWMrcy5zbmFwRWxlbWVudHNbZF0uaGVpZ2h0LGgtZz5ffHxtPmwrZ3x8Yy1nPmJ8fHY+dStnfHwhdC5jb250YWlucyhzLnNuYXBFbGVtZW50c1tkXS5pdGVtLm93bmVyRG9jdW1lbnQscy5zbmFwRWxlbWVudHNbZF0uaXRlbSk/KHMuc25hcEVsZW1lbnRzW2RdLnNuYXBwaW5nJiZzLm9wdGlvbnMuc25hcC5yZWxlYXNlJiZzLm9wdGlvbnMuc25hcC5yZWxlYXNlLmNhbGwocy5lbGVtZW50LGUsdC5leHRlbmQocy5fdWlIYXNoKCkse3NuYXBJdGVtOnMuc25hcEVsZW1lbnRzW2RdLml0ZW19KSkscy5zbmFwRWxlbWVudHNbZF0uc25hcHBpbmc9ITEpOigiaW5uZXIiIT09Zi5zbmFwTW9kZSYmKG49Zz49TWF0aC5hYnMoYy1iKSxvPWc+PU1hdGguYWJzKHUtdiksYT1nPj1NYXRoLmFicyhoLV8pLHI9Zz49TWF0aC5hYnMobC1tKSxuJiYoaS5wb3NpdGlvbi50b3A9cy5fY29udmVydFBvc2l0aW9uVG8oInJlbGF0aXZlIix7dG9wOmMtcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQsbGVmdDowfSkudG9wKSxvJiYoaS5wb3NpdGlvbi50b3A9cy5fY29udmVydFBvc2l0aW9uVG8oInJlbGF0aXZlIix7dG9wOnUsbGVmdDowfSkudG9wKSxhJiYoaS5wb3NpdGlvbi5sZWZ0PXMuX2NvbnZlcnRQb3NpdGlvblRvKCJyZWxhdGl2ZSIse3RvcDowLGxlZnQ6aC1zLmhlbHBlclByb3BvcnRpb25zLndpZHRofSkubGVmdCksciYmKGkucG9zaXRpb24ubGVmdD1zLl9jb252ZXJ0UG9zaXRpb25UbygicmVsYXRpdmUiLHt0b3A6MCxsZWZ0Omx9KS5sZWZ0KSkscD1ufHxvfHxhfHxyLCJvdXRlciIhPT1mLnNuYXBNb2RlJiYobj1nPj1NYXRoLmFicyhjLXYpLG89Zz49TWF0aC5hYnModS1iKSxhPWc+PU1hdGguYWJzKGgtbSkscj1nPj1NYXRoLmFicyhsLV8pLG4mJihpLnBvc2l0aW9uLnRvcD1zLl9jb252ZXJ0UG9zaXRpb25UbygicmVsYXRpdmUiLHt0b3A6YyxsZWZ0OjB9KS50b3ApLG8mJihpLnBvc2l0aW9uLnRvcD1zLl9jb252ZXJ0UG9zaXRpb25UbygicmVsYXRpdmUiLHt0b3A6dS1zLmhlbHBlclByb3BvcnRpb25zLmhlaWdodCxsZWZ0OjB9KS50b3ApLGEmJihpLnBvc2l0aW9uLmxlZnQ9cy5fY29udmVydFBvc2l0aW9uVG8oInJlbGF0aXZlIix7dG9wOjAsbGVmdDpofSkubGVmdCksciYmKGkucG9zaXRpb24ubGVmdD1zLl9jb252ZXJ0UG9zaXRpb25UbygicmVsYXRpdmUiLHt0b3A6MCxsZWZ0Omwtcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aH0pLmxlZnQpKSwhcy5zbmFwRWxlbWVudHNbZF0uc25hcHBpbmcmJihufHxvfHxhfHxyfHxwKSYmcy5vcHRpb25zLnNuYXAuc25hcCYmcy5vcHRpb25zLnNuYXAuc25hcC5jYWxsKHMuZWxlbWVudCxlLHQuZXh0ZW5kKHMuX3VpSGFzaCgpLHtzbmFwSXRlbTpzLnNuYXBFbGVtZW50c1tkXS5pdGVtfSkpLHMuc25hcEVsZW1lbnRzW2RdLnNuYXBwaW5nPW58fG98fGF8fHJ8fHApfX0pLHQudWkucGx1Z2luLmFkZCgiZHJhZ2dhYmxlIiwic3RhY2siLHtzdGFydDpmdW5jdGlvbihlLGkscyl7dmFyIG4sbz1zLm9wdGlvbnMsYT10Lm1ha2VBcnJheSh0KG8uc3RhY2spKS5zb3J0KGZ1bmN0aW9uKGUsaSl7cmV0dXJuKHBhcnNlSW50KHQoZSkuY3NzKCJ6SW5kZXgiKSwxMCl8fDApLShwYXJzZUludCh0KGkpLmNzcygiekluZGV4IiksMTApfHwwKX0pO2EubGVuZ3RoJiYobj1wYXJzZUludCh0KGFbMF0pLmNzcygiekluZGV4IiksMTApfHwwLHQoYSkuZWFjaChmdW5jdGlvbihlKXt0KHRoaXMpLmNzcygiekluZGV4IixuK2UpfSksdGhpcy5jc3MoInpJbmRleCIsbithLmxlbmd0aCkpfX0pLHQudWkucGx1Z2luLmFkZCgiZHJhZ2dhYmxlIiwiekluZGV4Iix7c3RhcnQ6ZnVuY3Rpb24oZSxpLHMpe3ZhciBuPXQoaS5oZWxwZXIpLG89cy5vcHRpb25zO24uY3NzKCJ6SW5kZXgiKSYmKG8uX3pJbmRleD1uLmNzcygiekluZGV4IikpLG4uY3NzKCJ6SW5kZXgiLG8uekluZGV4KX0sc3RvcDpmdW5jdGlvbihlLGkscyl7dmFyIG49cy5vcHRpb25zO24uX3pJbmRleCYmdChpLmhlbHBlcikuY3NzKCJ6SW5kZXgiLG4uX3pJbmRleCl9fSksdC51aS5kcmFnZ2FibGUsdC53aWRnZXQoInVpLnJlc2l6YWJsZSIsdC51aS5tb3VzZSx7dmVyc2lvbjoiMS4xMi4xIix3aWRnZXRFdmVudFByZWZpeDoicmVzaXplIixvcHRpb25zOnthbHNvUmVzaXplOiExLGFuaW1hdGU6ITEsYW5pbWF0ZUR1cmF0aW9uOiJzbG93IixhbmltYXRlRWFzaW5nOiJzd2luZyIsYXNwZWN0UmF0aW86ITEsYXV0b0hpZGU6ITEsY2xhc3Nlczp7InVpLXJlc2l6YWJsZS1zZSI6InVpLWljb24gdWktaWNvbi1ncmlwc21hbGwtZGlhZ29uYWwtc2UifSxjb250YWlubWVudDohMSxnaG9zdDohMSxncmlkOiExLGhhbmRsZXM6ImUscyxzZSIsaGVscGVyOiExLG1heEhlaWdodDpudWxsLG1heFdpZHRoOm51bGwsbWluSGVpZ2h0OjEwLG1pbldpZHRoOjEwLHpJbmRleDo5MCxyZXNpemU6bnVsbCxzdGFydDpudWxsLHN0b3A6bnVsbH0sX251bTpmdW5jdGlvbih0KXtyZXR1cm4gcGFyc2VGbG9hdCh0KXx8MH0sX2lzTnVtYmVyOmZ1bmN0aW9uKHQpe3JldHVybiFpc05hTihwYXJzZUZsb2F0KHQpKX0sX2hhc1Njcm9sbDpmdW5jdGlvbihlLGkpe2lmKCJoaWRkZW4iPT09dChlKS5jc3MoIm92ZXJmbG93IikpcmV0dXJuITE7dmFyIHM9aSYmImxlZnQiPT09aT8ic2Nyb2xsTGVmdCI6InNjcm9sbFRvcCIsbj0hMTtyZXR1cm4gZVtzXT4wPyEwOihlW3NdPTEsbj1lW3NdPjAsZVtzXT0wLG4pfSxfY3JlYXRlOmZ1bmN0aW9uKCl7dmFyIGUsaT10aGlzLm9wdGlvbnMscz10aGlzO3RoaXMuX2FkZENsYXNzKCJ1aS1yZXNpemFibGUiKSx0LmV4dGVuZCh0aGlzLHtfYXNwZWN0UmF0aW86ISFpLmFzcGVjdFJhdGlvLGFzcGVjdFJhdGlvOmkuYXNwZWN0UmF0aW8sb3JpZ2luYWxFbGVtZW50OnRoaXMuZWxlbWVudCxfcHJvcG9ydGlvbmFsbHlSZXNpemVFbGVtZW50czpbXSxfaGVscGVyOmkuaGVscGVyfHxpLmdob3N0fHxpLmFuaW1hdGU/aS5oZWxwZXJ8fCJ1aS1yZXNpemFibGUtaGVscGVyIjpudWxsfSksdGhpcy5lbGVtZW50WzBdLm5vZGVOYW1lLm1hdGNoKC9eKGNhbnZhc3x0ZXh0YXJlYXxpbnB1dHxzZWxlY3R8YnV0dG9ufGltZykkL2kpJiYodGhpcy5lbGVtZW50LndyYXAodCgiPGRpdiBjbGFzcz0ndWktd3JhcHBlcicgc3R5bGU9J292ZXJmbG93OiBoaWRkZW47Jz48L2Rpdj4iKS5jc3Moe3Bvc2l0aW9uOnRoaXMuZWxlbWVudC5jc3MoInBvc2l0aW9uIiksd2lkdGg6dGhpcy5lbGVtZW50Lm91dGVyV2lkdGgoKSxoZWlnaHQ6dGhpcy5lbGVtZW50Lm91dGVySGVpZ2h0KCksdG9wOnRoaXMuZWxlbWVudC5jc3MoInRvcCIpLGxlZnQ6dGhpcy5lbGVtZW50LmNzcygibGVmdCIpfSkpLHRoaXMuZWxlbWVudD10aGlzLmVsZW1lbnQucGFyZW50KCkuZGF0YSgidWktcmVzaXphYmxlIix0aGlzLmVsZW1lbnQucmVzaXphYmxlKCJpbnN0YW5jZSIpKSx0aGlzLmVsZW1lbnRJc1dyYXBwZXI9ITAsZT17bWFyZ2luVG9wOnRoaXMub3JpZ2luYWxFbGVtZW50LmNzcygibWFyZ2luVG9wIiksbWFyZ2luUmlnaHQ6dGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKCJtYXJnaW5SaWdodCIpLG1hcmdpbkJvdHRvbTp0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3MoIm1hcmdpbkJvdHRvbSIpLG1hcmdpbkxlZnQ6dGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKCJtYXJnaW5MZWZ0Iil9LHRoaXMuZWxlbWVudC5jc3MoZSksdGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKCJtYXJnaW4iLDApLHRoaXMub3JpZ2luYWxSZXNpemVTdHlsZT10aGlzLm9yaWdpbmFsRWxlbWVudC5jc3MoInJlc2l6ZSIpLHRoaXMub3JpZ2luYWxFbGVtZW50LmNzcygicmVzaXplIiwibm9uZSIpLHRoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplRWxlbWVudHMucHVzaCh0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3Moe3Bvc2l0aW9uOiJzdGF0aWMiLHpvb206MSxkaXNwbGF5OiJibG9jayJ9KSksdGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKGUpLHRoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplKCkpLHRoaXMuX3NldHVwSGFuZGxlcygpLGkuYXV0b0hpZGUmJnQodGhpcy5lbGVtZW50KS5vbigibW91c2VlbnRlciIsZnVuY3Rpb24oKXtpLmRpc2FibGVkfHwocy5fcmVtb3ZlQ2xhc3MoInVpLXJlc2l6YWJsZS1hdXRvaGlkZSIpLHMuX2hhbmRsZXMuc2hvdygpKX0pLm9uKCJtb3VzZWxlYXZlIixmdW5jdGlvbigpe2kuZGlzYWJsZWR8fHMucmVzaXppbmd8fChzLl9hZGRDbGFzcygidWktcmVzaXphYmxlLWF1dG9oaWRlIikscy5faGFuZGxlcy5oaWRlKCkpfSksdGhpcy5fbW91c2VJbml0KCl9LF9kZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5fbW91c2VEZXN0cm95KCk7dmFyIGUsaT1mdW5jdGlvbihlKXt0KGUpLnJlbW92ZURhdGEoInJlc2l6YWJsZSIpLnJlbW92ZURhdGEoInVpLXJlc2l6YWJsZSIpLm9mZigiLnJlc2l6YWJsZSIpLmZpbmQoIi51aS1yZXNpemFibGUtaGFuZGxlIikucmVtb3ZlKCl9O3JldHVybiB0aGlzLmVsZW1lbnRJc1dyYXBwZXImJihpKHRoaXMuZWxlbWVudCksZT10aGlzLmVsZW1lbnQsdGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKHtwb3NpdGlvbjplLmNzcygicG9zaXRpb24iKSx3aWR0aDplLm91dGVyV2lkdGgoKSxoZWlnaHQ6ZS5vdXRlckhlaWdodCgpLHRvcDplLmNzcygidG9wIiksbGVmdDplLmNzcygibGVmdCIpfSkuaW5zZXJ0QWZ0ZXIoZSksZS5yZW1vdmUoKSksdGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKCJyZXNpemUiLHRoaXMub3JpZ2luYWxSZXNpemVTdHlsZSksaSh0aGlzLm9yaWdpbmFsRWxlbWVudCksdGhpc30sX3NldE9wdGlvbjpmdW5jdGlvbih0LGUpe3N3aXRjaCh0aGlzLl9zdXBlcih0LGUpLHQpe2Nhc2UiaGFuZGxlcyI6dGhpcy5fcmVtb3ZlSGFuZGxlcygpLHRoaXMuX3NldHVwSGFuZGxlcygpO2JyZWFrO2RlZmF1bHQ6fX0sX3NldHVwSGFuZGxlczpmdW5jdGlvbigpe3ZhciBlLGkscyxuLG8sYT10aGlzLm9wdGlvbnMscj10aGlzO2lmKHRoaXMuaGFuZGxlcz1hLmhhbmRsZXN8fCh0KCIudWktcmVzaXphYmxlLWhhbmRsZSIsdGhpcy5lbGVtZW50KS5sZW5ndGg/e246Ii51aS1yZXNpemFibGUtbiIsZToiLnVpLXJlc2l6YWJsZS1lIixzOiIudWktcmVzaXphYmxlLXMiLHc6Ii51aS1yZXNpemFibGUtdyIsc2U6Ii51aS1yZXNpemFibGUtc2UiLHN3OiIudWktcmVzaXphYmxlLXN3IixuZToiLnVpLXJlc2l6YWJsZS1uZSIsbnc6Ii51aS1yZXNpemFibGUtbncifToiZSxzLHNlIiksdGhpcy5faGFuZGxlcz10KCksdGhpcy5oYW5kbGVzLmNvbnN0cnVjdG9yPT09U3RyaW5nKWZvcigiYWxsIj09PXRoaXMuaGFuZGxlcyYmKHRoaXMuaGFuZGxlcz0ibixlLHMsdyxzZSxzdyxuZSxudyIpLHM9dGhpcy5oYW5kbGVzLnNwbGl0KCIsIiksdGhpcy5oYW5kbGVzPXt9LGk9MDtzLmxlbmd0aD5pO2krKyllPXQudHJpbShzW2ldKSxuPSJ1aS1yZXNpemFibGUtIitlLG89dCgiPGRpdj4iKSx0aGlzLl9hZGRDbGFzcyhvLCJ1aS1yZXNpemFibGUtaGFuZGxlICIrbiksby5jc3Moe3pJbmRleDphLnpJbmRleH0pLHRoaXMuaGFuZGxlc1tlXT0iLnVpLXJlc2l6YWJsZS0iK2UsdGhpcy5lbGVtZW50LmFwcGVuZChvKTt0aGlzLl9yZW5kZXJBeGlzPWZ1bmN0aW9uKGUpe3ZhciBpLHMsbixvO2U9ZXx8dGhpcy5lbGVtZW50O2ZvcihpIGluIHRoaXMuaGFuZGxlcyl0aGlzLmhhbmRsZXNbaV0uY29uc3RydWN0b3I9PT1TdHJpbmc/dGhpcy5oYW5kbGVzW2ldPXRoaXMuZWxlbWVudC5jaGlsZHJlbih0aGlzLmhhbmRsZXNbaV0pLmZpcnN0KCkuc2hvdygpOih0aGlzLmhhbmRsZXNbaV0uanF1ZXJ5fHx0aGlzLmhhbmRsZXNbaV0ubm9kZVR5cGUpJiYodGhpcy5oYW5kbGVzW2ldPXQodGhpcy5oYW5kbGVzW2ldKSx0aGlzLl9vbih0aGlzLmhhbmRsZXNbaV0se21vdXNlZG93bjpyLl9tb3VzZURvd259KSksdGhpcy5lbGVtZW50SXNXcmFwcGVyJiZ0aGlzLm9yaWdpbmFsRWxlbWVudFswXS5ub2RlTmFtZS5tYXRjaCgvXih0ZXh0YXJlYXxpbnB1dHxzZWxlY3R8YnV0dG9uKSQvaSkmJihzPXQodGhpcy5oYW5kbGVzW2ldLHRoaXMuZWxlbWVudCksbz0vc3d8bmV8bnd8c2V8bnxzLy50ZXN0KGkpP3Mub3V0ZXJIZWlnaHQoKTpzLm91dGVyV2lkdGgoKSxuPVsicGFkZGluZyIsL25lfG53fG4vLnRlc3QoaSk/IlRvcCI6L3NlfHN3fHMvLnRlc3QoaSk/IkJvdHRvbSI6L15lJC8udGVzdChpKT8iUmlnaHQiOiJMZWZ0Il0uam9pbigiIiksZS5jc3MobixvKSx0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZSgpKSx0aGlzLl9oYW5kbGVzPXRoaXMuX2hhbmRsZXMuYWRkKHRoaXMuaGFuZGxlc1tpXSl9LHRoaXMuX3JlbmRlckF4aXModGhpcy5lbGVtZW50KSx0aGlzLl9oYW5kbGVzPXRoaXMuX2hhbmRsZXMuYWRkKHRoaXMuZWxlbWVudC5maW5kKCIudWktcmVzaXphYmxlLWhhbmRsZSIpKSx0aGlzLl9oYW5kbGVzLmRpc2FibGVTZWxlY3Rpb24oKSx0aGlzLl9oYW5kbGVzLm9uKCJtb3VzZW92ZXIiLGZ1bmN0aW9uKCl7ci5yZXNpemluZ3x8KHRoaXMuY2xhc3NOYW1lJiYobz10aGlzLmNsYXNzTmFtZS5tYXRjaCgvdWktcmVzaXphYmxlLShzZXxzd3xuZXxud3xufGV8c3x3KS9pKSksci5heGlzPW8mJm9bMV0/b1sxXToic2UiKX0pLGEuYXV0b0hpZGUmJih0aGlzLl9oYW5kbGVzLmhpZGUoKSx0aGlzLl9hZGRDbGFzcygidWktcmVzaXphYmxlLWF1dG9oaWRlIikpfSxfcmVtb3ZlSGFuZGxlczpmdW5jdGlvbigpe3RoaXMuX2hhbmRsZXMucmVtb3ZlKCl9LF9tb3VzZUNhcHR1cmU6ZnVuY3Rpb24oZSl7dmFyIGkscyxuPSExO2ZvcihpIGluIHRoaXMuaGFuZGxlcylzPXQodGhpcy5oYW5kbGVzW2ldKVswXSwocz09PWUudGFyZ2V0fHx0LmNvbnRhaW5zKHMsZS50YXJnZXQpKSYmKG49ITApO3JldHVybiF0aGlzLm9wdGlvbnMuZGlzYWJsZWQmJm59LF9tb3VzZVN0YXJ0OmZ1bmN0aW9uKGUpe3ZhciBpLHMsbixvPXRoaXMub3B0aW9ucyxhPXRoaXMuZWxlbWVudDtyZXR1cm4gdGhpcy5yZXNpemluZz0hMCx0aGlzLl9yZW5kZXJQcm94eSgpLGk9dGhpcy5fbnVtKHRoaXMuaGVscGVyLmNzcygibGVmdCIpKSxzPXRoaXMuX251bSh0aGlzLmhlbHBlci5jc3MoInRvcCIpKSxvLmNvbnRhaW5tZW50JiYoaSs9dChvLmNvbnRhaW5tZW50KS5zY3JvbGxMZWZ0KCl8fDAscys9dChvLmNvbnRhaW5tZW50KS5zY3JvbGxUb3AoKXx8MCksdGhpcy5vZmZzZXQ9dGhpcy5oZWxwZXIub2Zmc2V0KCksdGhpcy5wb3NpdGlvbj17bGVmdDppLHRvcDpzfSx0aGlzLnNpemU9dGhpcy5faGVscGVyP3t3aWR0aDp0aGlzLmhlbHBlci53aWR0aCgpLGhlaWdodDp0aGlzLmhlbHBlci5oZWlnaHQoKX06e3dpZHRoOmEud2lkdGgoKSxoZWlnaHQ6YS5oZWlnaHQoKX0sdGhpcy5vcmlnaW5hbFNpemU9dGhpcy5faGVscGVyP3t3aWR0aDphLm91dGVyV2lkdGgoKSxoZWlnaHQ6YS5vdXRlckhlaWdodCgpfTp7d2lkdGg6YS53aWR0aCgpLGhlaWdodDphLmhlaWdodCgpfSx0aGlzLnNpemVEaWZmPXt3aWR0aDphLm91dGVyV2lkdGgoKS1hLndpZHRoKCksaGVpZ2h0OmEub3V0ZXJIZWlnaHQoKS1hLmhlaWdodCgpfSx0aGlzLm9yaWdpbmFsUG9zaXRpb249e2xlZnQ6aSx0b3A6c30sdGhpcy5vcmlnaW5hbE1vdXNlUG9zaXRpb249e2xlZnQ6ZS5wYWdlWCx0b3A6ZS5wYWdlWX0sdGhpcy5hc3BlY3RSYXRpbz0ibnVtYmVyIj09dHlwZW9mIG8uYXNwZWN0UmF0aW8/by5hc3BlY3RSYXRpbzp0aGlzLm9yaWdpbmFsU2l6ZS53aWR0aC90aGlzLm9yaWdpbmFsU2l6ZS5oZWlnaHR8fDEsbj10KCIudWktcmVzaXphYmxlLSIrdGhpcy5heGlzKS5jc3MoImN1cnNvciIpLHQoImJvZHkiKS5jc3MoImN1cnNvciIsImF1dG8iPT09bj90aGlzLmF4aXMrIi1yZXNpemUiOm4pLHRoaXMuX2FkZENsYXNzKCJ1aS1yZXNpemFibGUtcmVzaXppbmciKSx0aGlzLl9wcm9wYWdhdGUoInN0YXJ0IixlKSwhMH0sX21vdXNlRHJhZzpmdW5jdGlvbihlKXt2YXIgaSxzLG49dGhpcy5vcmlnaW5hbE1vdXNlUG9zaXRpb24sbz10aGlzLmF4aXMsYT1lLnBhZ2VYLW4ubGVmdHx8MCxyPWUucGFnZVktbi50b3B8fDAsaD10aGlzLl9jaGFuZ2Vbb107cmV0dXJuIHRoaXMuX3VwZGF0ZVByZXZQcm9wZXJ0aWVzKCksaD8oaT1oLmFwcGx5KHRoaXMsW2UsYSxyXSksdGhpcy5fdXBkYXRlVmlydHVhbEJvdW5kYXJpZXMoZS5zaGlmdEtleSksKHRoaXMuX2FzcGVjdFJhdGlvfHxlLnNoaWZ0S2V5KSYmKGk9dGhpcy5fdXBkYXRlUmF0aW8oaSxlKSksaT10aGlzLl9yZXNwZWN0U2l6ZShpLGUpLHRoaXMuX3VwZGF0ZUNhY2hlKGkpLHRoaXMuX3Byb3BhZ2F0ZSgicmVzaXplIixlKSxzPXRoaXMuX2FwcGx5Q2hhbmdlcygpLCF0aGlzLl9oZWxwZXImJnRoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplRWxlbWVudHMubGVuZ3RoJiZ0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZSgpLHQuaXNFbXB0eU9iamVjdChzKXx8KHRoaXMuX3VwZGF0ZVByZXZQcm9wZXJ0aWVzKCksdGhpcy5fdHJpZ2dlcigicmVzaXplIixlLHRoaXMudWkoKSksdGhpcy5fYXBwbHlDaGFuZ2VzKCkpLCExKTohMX0sX21vdXNlU3RvcDpmdW5jdGlvbihlKXt0aGlzLnJlc2l6aW5nPSExO3ZhciBpLHMsbixvLGEscixoLGw9dGhpcy5vcHRpb25zLGM9dGhpcztyZXR1cm4gdGhpcy5faGVscGVyJiYoaT10aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZUVsZW1lbnRzLHM9aS5sZW5ndGgmJi90ZXh0YXJlYS9pLnRlc3QoaVswXS5ub2RlTmFtZSksbj1zJiZ0aGlzLl9oYXNTY3JvbGwoaVswXSwibGVmdCIpPzA6Yy5zaXplRGlmZi5oZWlnaHQsbz1zPzA6Yy5zaXplRGlmZi53aWR0aCxhPXt3aWR0aDpjLmhlbHBlci53aWR0aCgpLW8saGVpZ2h0OmMuaGVscGVyLmhlaWdodCgpLW59LHI9cGFyc2VGbG9hdChjLmVsZW1lbnQuY3NzKCJsZWZ0IikpKyhjLnBvc2l0aW9uLmxlZnQtYy5vcmlnaW5hbFBvc2l0aW9uLmxlZnQpfHxudWxsLGg9cGFyc2VGbG9hdChjLmVsZW1lbnQuY3NzKCJ0b3AiKSkrKGMucG9zaXRpb24udG9wLWMub3JpZ2luYWxQb3NpdGlvbi50b3ApfHxudWxsLGwuYW5pbWF0ZXx8dGhpcy5lbGVtZW50LmNzcyh0LmV4dGVuZChhLHt0b3A6aCxsZWZ0OnJ9KSksYy5oZWxwZXIuaGVpZ2h0KGMuc2l6ZS5oZWlnaHQpLGMuaGVscGVyLndpZHRoKGMuc2l6ZS53aWR0aCksdGhpcy5faGVscGVyJiYhbC5hbmltYXRlJiZ0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZSgpKSx0KCJib2R5IikuY3NzKCJjdXJzb3IiLCJhdXRvIiksdGhpcy5fcmVtb3ZlQ2xhc3MoInVpLXJlc2l6YWJsZS1yZXNpemluZyIpLHRoaXMuX3Byb3BhZ2F0ZSgic3RvcCIsZSksdGhpcy5faGVscGVyJiZ0aGlzLmhlbHBlci5yZW1vdmUoKSwhMX0sX3VwZGF0ZVByZXZQcm9wZXJ0aWVzOmZ1bmN0aW9uKCl7dGhpcy5wcmV2UG9zaXRpb249e3RvcDp0aGlzLnBvc2l0aW9uLnRvcCxsZWZ0OnRoaXMucG9zaXRpb24ubGVmdH0sdGhpcy5wcmV2U2l6ZT17d2lkdGg6dGhpcy5zaXplLndpZHRoLGhlaWdodDp0aGlzLnNpemUuaGVpZ2h0fX0sX2FwcGx5Q2hhbmdlczpmdW5jdGlvbigpe3ZhciB0PXt9O3JldHVybiB0aGlzLnBvc2l0aW9uLnRvcCE9PXRoaXMucHJldlBvc2l0aW9uLnRvcCYmKHQudG9wPXRoaXMucG9zaXRpb24udG9wKyJweCIpLHRoaXMucG9zaXRpb24ubGVmdCE9PXRoaXMucHJldlBvc2l0aW9uLmxlZnQmJih0LmxlZnQ9dGhpcy5wb3NpdGlvbi5sZWZ0KyJweCIpLHRoaXMuc2l6ZS53aWR0aCE9PXRoaXMucHJldlNpemUud2lkdGgmJih0LndpZHRoPXRoaXMuc2l6ZS53aWR0aCsicHgiKSx0aGlzLnNpemUuaGVpZ2h0IT09dGhpcy5wcmV2U2l6ZS5oZWlnaHQmJih0LmhlaWdodD10aGlzLnNpemUuaGVpZ2h0KyJweCIpLHRoaXMuaGVscGVyLmNzcyh0KSx0fSxfdXBkYXRlVmlydHVhbEJvdW5kYXJpZXM6ZnVuY3Rpb24odCl7dmFyIGUsaSxzLG4sbyxhPXRoaXMub3B0aW9ucztvPXttaW5XaWR0aDp0aGlzLl9pc051bWJlcihhLm1pbldpZHRoKT9hLm1pbldpZHRoOjAsbWF4V2lkdGg6dGhpcy5faXNOdW1iZXIoYS5tYXhXaWR0aCk/YS5tYXhXaWR0aDoxLzAsbWluSGVpZ2h0OnRoaXMuX2lzTnVtYmVyKGEubWluSGVpZ2h0KT9hLm1pbkhlaWdodDowLG1heEhlaWdodDp0aGlzLl9pc051bWJlcihhLm1heEhlaWdodCk/YS5tYXhIZWlnaHQ6MS8wfSwodGhpcy5fYXNwZWN0UmF0aW98fHQpJiYoZT1vLm1pbkhlaWdodCp0aGlzLmFzcGVjdFJhdGlvLHM9by5taW5XaWR0aC90aGlzLmFzcGVjdFJhdGlvLGk9by5tYXhIZWlnaHQqdGhpcy5hc3BlY3RSYXRpbyxuPW8ubWF4V2lkdGgvdGhpcy5hc3BlY3RSYXRpbyxlPm8ubWluV2lkdGgmJihvLm1pbldpZHRoPWUpLHM+by5taW5IZWlnaHQmJihvLm1pbkhlaWdodD1zKSxvLm1heFdpZHRoPmkmJihvLm1heFdpZHRoPWkpLG8ubWF4SGVpZ2h0Pm4mJihvLm1heEhlaWdodD1uKSksdGhpcy5fdkJvdW5kYXJpZXM9b30sX3VwZGF0ZUNhY2hlOmZ1bmN0aW9uKHQpe3RoaXMub2Zmc2V0PXRoaXMuaGVscGVyLm9mZnNldCgpLHRoaXMuX2lzTnVtYmVyKHQubGVmdCkmJih0aGlzLnBvc2l0aW9uLmxlZnQ9dC5sZWZ0KSx0aGlzLl9pc051bWJlcih0LnRvcCkmJih0aGlzLnBvc2l0aW9uLnRvcD10LnRvcCksdGhpcy5faXNOdW1iZXIodC5oZWlnaHQpJiYodGhpcy5zaXplLmhlaWdodD10LmhlaWdodCksdGhpcy5faXNOdW1iZXIodC53aWR0aCkmJih0aGlzLnNpemUud2lkdGg9dC53aWR0aCl9LF91cGRhdGVSYXRpbzpmdW5jdGlvbih0KXt2YXIgZT10aGlzLnBvc2l0aW9uLGk9dGhpcy5zaXplLHM9dGhpcy5heGlzO3JldHVybiB0aGlzLl9pc051bWJlcih0LmhlaWdodCk/dC53aWR0aD10LmhlaWdodCp0aGlzLmFzcGVjdFJhdGlvOnRoaXMuX2lzTnVtYmVyKHQud2lkdGgpJiYodC5oZWlnaHQ9dC53aWR0aC90aGlzLmFzcGVjdFJhdGlvKSwic3ciPT09cyYmKHQubGVmdD1lLmxlZnQrKGkud2lkdGgtdC53aWR0aCksdC50b3A9bnVsbCksIm53Ij09PXMmJih0LnRvcD1lLnRvcCsoaS5oZWlnaHQtdC5oZWlnaHQpLHQubGVmdD1lLmxlZnQrKGkud2lkdGgtdC53aWR0aCkpLHR9LF9yZXNwZWN0U2l6ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl92Qm91bmRhcmllcyxpPXRoaXMuYXhpcyxzPXRoaXMuX2lzTnVtYmVyKHQud2lkdGgpJiZlLm1heFdpZHRoJiZlLm1heFdpZHRoPHQud2lkdGgsbj10aGlzLl9pc051bWJlcih0LmhlaWdodCkmJmUubWF4SGVpZ2h0JiZlLm1heEhlaWdodDx0LmhlaWdodCxvPXRoaXMuX2lzTnVtYmVyKHQud2lkdGgpJiZlLm1pbldpZHRoJiZlLm1pbldpZHRoPnQud2lkdGgsYT10aGlzLl9pc051bWJlcih0LmhlaWdodCkmJmUubWluSGVpZ2h0JiZlLm1pbkhlaWdodD50LmhlaWdodCxyPXRoaXMub3JpZ2luYWxQb3NpdGlvbi5sZWZ0K3RoaXMub3JpZ2luYWxTaXplLndpZHRoLGg9dGhpcy5vcmlnaW5hbFBvc2l0aW9uLnRvcCt0aGlzLm9yaWdpbmFsU2l6ZS5oZWlnaHQsbD0vc3d8bnd8dy8udGVzdChpKSxjPS9ud3xuZXxuLy50ZXN0KGkpO3JldHVybiBvJiYodC53aWR0aD1lLm1pbldpZHRoKSxhJiYodC5oZWlnaHQ9ZS5taW5IZWlnaHQpLHMmJih0LndpZHRoPWUubWF4V2lkdGgpLG4mJih0LmhlaWdodD1lLm1heEhlaWdodCksbyYmbCYmKHQubGVmdD1yLWUubWluV2lkdGgpLHMmJmwmJih0LmxlZnQ9ci1lLm1heFdpZHRoKSxhJiZjJiYodC50b3A9aC1lLm1pbkhlaWdodCksbiYmYyYmKHQudG9wPWgtZS5tYXhIZWlnaHQpLHQud2lkdGh8fHQuaGVpZ2h0fHx0LmxlZnR8fCF0LnRvcD90LndpZHRofHx0LmhlaWdodHx8dC50b3B8fCF0LmxlZnR8fCh0LmxlZnQ9bnVsbCk6dC50b3A9bnVsbCx0fSxfZ2V0UGFkZGluZ1BsdXNCb3JkZXJEaW1lbnNpb25zOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLGk9W10scz1bdC5jc3MoImJvcmRlclRvcFdpZHRoIiksdC5jc3MoImJvcmRlclJpZ2h0V2lkdGgiKSx0LmNzcygiYm9yZGVyQm90dG9tV2lkdGgiKSx0LmNzcygiYm9yZGVyTGVmdFdpZHRoIildLG49W3QuY3NzKCJwYWRkaW5nVG9wIiksdC5jc3MoInBhZGRpbmdSaWdodCIpLHQuY3NzKCJwYWRkaW5nQm90dG9tIiksdC5jc3MoInBhZGRpbmdMZWZ0IildOzQ+ZTtlKyspaVtlXT1wYXJzZUZsb2F0KHNbZV0pfHwwLGlbZV0rPXBhcnNlRmxvYXQobltlXSl8fDA7cmV0dXJue2hlaWdodDppWzBdK2lbMl0sd2lkdGg6aVsxXStpWzNdfX0sX3Byb3BvcnRpb25hbGx5UmVzaXplOmZ1bmN0aW9uKCl7aWYodGhpcy5fcHJvcG9ydGlvbmFsbHlSZXNpemVFbGVtZW50cy5sZW5ndGgpZm9yKHZhciB0LGU9MCxpPXRoaXMuaGVscGVyfHx0aGlzLmVsZW1lbnQ7dGhpcy5fcHJvcG9ydGlvbmFsbHlSZXNpemVFbGVtZW50cy5sZW5ndGg+ZTtlKyspdD10aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZUVsZW1lbnRzW2VdLHRoaXMub3V0ZXJEaW1lbnNpb25zfHwodGhpcy5vdXRlckRpbWVuc2lvbnM9dGhpcy5fZ2V0UGFkZGluZ1BsdXNCb3JkZXJEaW1lbnNpb25zKHQpKSx0LmNzcyh7aGVpZ2h0OmkuaGVpZ2h0KCktdGhpcy5vdXRlckRpbWVuc2lvbnMuaGVpZ2h0fHwwLHdpZHRoOmkud2lkdGgoKS10aGlzLm91dGVyRGltZW5zaW9ucy53aWR0aHx8MH0pfSxfcmVuZGVyUHJveHk6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmVsZW1lbnQsaT10aGlzLm9wdGlvbnM7dGhpcy5lbGVtZW50T2Zmc2V0PWUub2Zmc2V0KCksdGhpcy5faGVscGVyPyh0aGlzLmhlbHBlcj10aGlzLmhlbHBlcnx8dCgiPGRpdiBzdHlsZT0nb3ZlcmZsb3c6aGlkZGVuOyc+PC9kaXY+IiksdGhpcy5fYWRkQ2xhc3ModGhpcy5oZWxwZXIsdGhpcy5faGVscGVyKSx0aGlzLmhlbHBlci5jc3Moe3dpZHRoOnRoaXMuZWxlbWVudC5vdXRlcldpZHRoKCksaGVpZ2h0OnRoaXMuZWxlbWVudC5vdXRlckhlaWdodCgpLHBvc2l0aW9uOiJhYnNvbHV0ZSIsbGVmdDp0aGlzLmVsZW1lbnRPZmZzZXQubGVmdCsicHgiLHRvcDp0aGlzLmVsZW1lbnRPZmZzZXQudG9wKyJweCIsekluZGV4OisraS56SW5kZXh9KSx0aGlzLmhlbHBlci5hcHBlbmRUbygiYm9keSIpLmRpc2FibGVTZWxlY3Rpb24oKSk6dGhpcy5oZWxwZXI9dGhpcy5lbGVtZW50fSxfY2hhbmdlOntlOmZ1bmN0aW9uKHQsZSl7cmV0dXJue3dpZHRoOnRoaXMub3JpZ2luYWxTaXplLndpZHRoK2V9fSx3OmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5vcmlnaW5hbFNpemUscz10aGlzLm9yaWdpbmFsUG9zaXRpb247cmV0dXJue2xlZnQ6cy5sZWZ0K2Usd2lkdGg6aS53aWR0aC1lfX0sbjpmdW5jdGlvbih0LGUsaSl7dmFyIHM9dGhpcy5vcmlnaW5hbFNpemUsbj10aGlzLm9yaWdpbmFsUG9zaXRpb247cmV0dXJue3RvcDpuLnRvcCtpLGhlaWdodDpzLmhlaWdodC1pfX0sczpmdW5jdGlvbih0LGUsaSl7cmV0dXJue2hlaWdodDp0aGlzLm9yaWdpbmFsU2l6ZS5oZWlnaHQraX19LHNlOmZ1bmN0aW9uKGUsaSxzKXtyZXR1cm4gdC5leHRlbmQodGhpcy5fY2hhbmdlLnMuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuX2NoYW5nZS5lLmFwcGx5KHRoaXMsW2UsaSxzXSkpfSxzdzpmdW5jdGlvbihlLGkscyl7cmV0dXJuIHQuZXh0ZW5kKHRoaXMuX2NoYW5nZS5zLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLl9jaGFuZ2Uudy5hcHBseSh0aGlzLFtlLGksc10pKX0sbmU6ZnVuY3Rpb24oZSxpLHMpe3JldHVybiB0LmV4dGVuZCh0aGlzLl9jaGFuZ2Uubi5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5fY2hhbmdlLmUuYXBwbHkodGhpcyxbZSxpLHNdKSl9LG53OmZ1bmN0aW9uKGUsaSxzKXtyZXR1cm4gdC5leHRlbmQodGhpcy5fY2hhbmdlLm4uYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuX2NoYW5nZS53LmFwcGx5KHRoaXMsW2UsaSxzXSkpfX0sX3Byb3BhZ2F0ZTpmdW5jdGlvbihlLGkpe3QudWkucGx1Z2luLmNhbGwodGhpcyxlLFtpLHRoaXMudWkoKV0pLCJyZXNpemUiIT09ZSYmdGhpcy5fdHJpZ2dlcihlLGksdGhpcy51aSgpKX0scGx1Z2luczp7fSx1aTpmdW5jdGlvbigpe3JldHVybntvcmlnaW5hbEVsZW1lbnQ6dGhpcy5vcmlnaW5hbEVsZW1lbnQsZWxlbWVudDp0aGlzLmVsZW1lbnQsaGVscGVyOnRoaXMuaGVscGVyLHBvc2l0aW9uOnRoaXMucG9zaXRpb24sc2l6ZTp0aGlzLnNpemUsb3JpZ2luYWxTaXplOnRoaXMub3JpZ2luYWxTaXplLG9yaWdpbmFsUG9zaXRpb246dGhpcy5vcmlnaW5hbFBvc2l0aW9ufX19KSx0LnVpLnBsdWdpbi5hZGQoInJlc2l6YWJsZSIsImFuaW1hdGUiLHtzdG9wOmZ1bmN0aW9uKGUpe3ZhciBpPXQodGhpcykucmVzaXphYmxlKCJpbnN0YW5jZSIpLHM9aS5vcHRpb25zLG49aS5fcHJvcG9ydGlvbmFsbHlSZXNpemVFbGVtZW50cyxvPW4ubGVuZ3RoJiYvdGV4dGFyZWEvaS50ZXN0KG5bMF0ubm9kZU5hbWUpLGE9byYmaS5faGFzU2Nyb2xsKG5bMF0sImxlZnQiKT8wOmkuc2l6ZURpZmYuaGVpZ2h0LHI9bz8wOmkuc2l6ZURpZmYud2lkdGgsaD17d2lkdGg6aS5zaXplLndpZHRoLXIsaGVpZ2h0Omkuc2l6ZS5oZWlnaHQtYX0sbD1wYXJzZUZsb2F0KGkuZWxlbWVudC5jc3MoImxlZnQiKSkrKGkucG9zaXRpb24ubGVmdC1pLm9yaWdpbmFsUG9zaXRpb24ubGVmdCl8fG51bGwsYz1wYXJzZUZsb2F0KGkuZWxlbWVudC5jc3MoInRvcCIpKSsoaS5wb3NpdGlvbi50b3AtaS5vcmlnaW5hbFBvc2l0aW9uLnRvcCl8fG51bGw7aS5lbGVtZW50LmFuaW1hdGUodC5leHRlbmQoaCxjJiZsP3t0b3A6YyxsZWZ0Omx9Ont9KSx7ZHVyYXRpb246cy5hbmltYXRlRHVyYXRpb24sZWFzaW5nOnMuYW5pbWF0ZUVhc2luZyxzdGVwOmZ1bmN0aW9uKCl7dmFyIHM9e3dpZHRoOnBhcnNlRmxvYXQoaS5lbGVtZW50LmNzcygid2lkdGgiKSksaGVpZ2h0OnBhcnNlRmxvYXQoaS5lbGVtZW50LmNzcygiaGVpZ2h0IikpLHRvcDpwYXJzZUZsb2F0KGkuZWxlbWVudC5jc3MoInRvcCIpKSxsZWZ0OnBhcnNlRmxvYXQoaS5lbGVtZW50LmNzcygibGVmdCIpKX07biYmbi5sZW5ndGgmJnQoblswXSkuY3NzKHt3aWR0aDpzLndpZHRoLGhlaWdodDpzLmhlaWdodH0pLGkuX3VwZGF0ZUNhY2hlKHMpLGkuX3Byb3BhZ2F0ZSgicmVzaXplIixlKX19KX19KSx0LnVpLnBsdWdpbi5hZGQoInJlc2l6YWJsZSIsImNvbnRhaW5tZW50Iix7c3RhcnQ6ZnVuY3Rpb24oKXt2YXIgZSxpLHMsbixvLGEscixoPXQodGhpcykucmVzaXphYmxlKCJpbnN0YW5jZSIpLGw9aC5vcHRpb25zLGM9aC5lbGVtZW50LHU9bC5jb250YWlubWVudCxkPXUgaW5zdGFuY2VvZiB0P3UuZ2V0KDApOi9wYXJlbnQvLnRlc3QodSk/Yy5wYXJlbnQoKS5nZXQoMCk6dTtkJiYoaC5jb250YWluZXJFbGVtZW50PXQoZCksL2RvY3VtZW50Ly50ZXN0KHUpfHx1PT09ZG9jdW1lbnQ/KGguY29udGFpbmVyT2Zmc2V0PXtsZWZ0OjAsdG9wOjB9LGguY29udGFpbmVyUG9zaXRpb249e2xlZnQ6MCx0b3A6MH0saC5wYXJlbnREYXRhPXtlbGVtZW50OnQoZG9jdW1lbnQpLGxlZnQ6MCx0b3A6MCx3aWR0aDp0KGRvY3VtZW50KS53aWR0aCgpLGhlaWdodDp0KGRvY3VtZW50KS5oZWlnaHQoKXx8ZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlLnNjcm9sbEhlaWdodH0pOihlPXQoZCksaT1bXSx0KFsiVG9wIiwiUmlnaHQiLCJMZWZ0IiwiQm90dG9tIl0pLmVhY2goZnVuY3Rpb24odCxzKXtpW3RdPWguX251bShlLmNzcygicGFkZGluZyIrcykpfSksaC5jb250YWluZXJPZmZzZXQ9ZS5vZmZzZXQoKSxoLmNvbnRhaW5lclBvc2l0aW9uPWUucG9zaXRpb24oKSxoLmNvbnRhaW5lclNpemU9e2hlaWdodDplLmlubmVySGVpZ2h0KCktaVszXSx3aWR0aDplLmlubmVyV2lkdGgoKS1pWzFdfSxzPWguY29udGFpbmVyT2Zmc2V0LG49aC5jb250YWluZXJTaXplLmhlaWdodCxvPWguY29udGFpbmVyU2l6ZS53aWR0aCxhPWguX2hhc1Njcm9sbChkLCJsZWZ0Iik/ZC5zY3JvbGxXaWR0aDpvLHI9aC5faGFzU2Nyb2xsKGQpP2Quc2Nyb2xsSGVpZ2h0Om4saC5wYXJlbnREYXRhPXtlbGVtZW50OmQsbGVmdDpzLmxlZnQsdG9wOnMudG9wLHdpZHRoOmEsaGVpZ2h0OnJ9KSl9LHJlc2l6ZTpmdW5jdGlvbihlKXt2YXIgaSxzLG4sbyxhPXQodGhpcykucmVzaXphYmxlKCJpbnN0YW5jZSIpLHI9YS5vcHRpb25zLGg9YS5jb250YWluZXJPZmZzZXQsbD1hLnBvc2l0aW9uLGM9YS5fYXNwZWN0UmF0aW98fGUuc2hpZnRLZXksdT17dG9wOjAsbGVmdDowfSxkPWEuY29udGFpbmVyRWxlbWVudCxwPSEwO2RbMF0hPT1kb2N1bWVudCYmL3N0YXRpYy8udGVzdChkLmNzcygicG9zaXRpb24iKSkmJih1PWgpLGwubGVmdDwoYS5faGVscGVyP2gubGVmdDowKSYmKGEuc2l6ZS53aWR0aD1hLnNpemUud2lkdGgrKGEuX2hlbHBlcj9hLnBvc2l0aW9uLmxlZnQtaC5sZWZ0OmEucG9zaXRpb24ubGVmdC11LmxlZnQpLGMmJihhLnNpemUuaGVpZ2h0PWEuc2l6ZS53aWR0aC9hLmFzcGVjdFJhdGlvLHA9ITEpLGEucG9zaXRpb24ubGVmdD1yLmhlbHBlcj9oLmxlZnQ6MCksbC50b3A8KGEuX2hlbHBlcj9oLnRvcDowKSYmKGEuc2l6ZS5oZWlnaHQ9YS5zaXplLmhlaWdodCsoYS5faGVscGVyP2EucG9zaXRpb24udG9wLWgudG9wOmEucG9zaXRpb24udG9wKSxjJiYoYS5zaXplLndpZHRoPWEuc2l6ZS5oZWlnaHQqYS5hc3BlY3RSYXRpbyxwPSExKSxhLnBvc2l0aW9uLnRvcD1hLl9oZWxwZXI/aC50b3A6MCksbj1hLmNvbnRhaW5lckVsZW1lbnQuZ2V0KDApPT09YS5lbGVtZW50LnBhcmVudCgpLmdldCgwKSxvPS9yZWxhdGl2ZXxhYnNvbHV0ZS8udGVzdChhLmNvbnRhaW5lckVsZW1lbnQuY3NzKCJwb3NpdGlvbiIpKSxuJiZvPyhhLm9mZnNldC5sZWZ0PWEucGFyZW50RGF0YS5sZWZ0K2EucG9zaXRpb24ubGVmdCxhLm9mZnNldC50b3A9YS5wYXJlbnREYXRhLnRvcCthLnBvc2l0aW9uLnRvcCk6KGEub2Zmc2V0LmxlZnQ9YS5lbGVtZW50Lm9mZnNldCgpLmxlZnQsYS5vZmZzZXQudG9wPWEuZWxlbWVudC5vZmZzZXQoKS50b3ApLGk9TWF0aC5hYnMoYS5zaXplRGlmZi53aWR0aCsoYS5faGVscGVyP2Eub2Zmc2V0LmxlZnQtdS5sZWZ0OmEub2Zmc2V0LmxlZnQtaC5sZWZ0KSkscz1NYXRoLmFicyhhLnNpemVEaWZmLmhlaWdodCsoYS5faGVscGVyP2Eub2Zmc2V0LnRvcC11LnRvcDphLm9mZnNldC50b3AtaC50b3ApKSxpK2Euc2l6ZS53aWR0aD49YS5wYXJlbnREYXRhLndpZHRoJiYoYS5zaXplLndpZHRoPWEucGFyZW50RGF0YS53aWR0aC1pLGMmJihhLnNpemUuaGVpZ2h0PWEuc2l6ZS53aWR0aC9hLmFzcGVjdFJhdGlvLHA9ITEpKSxzK2Euc2l6ZS5oZWlnaHQ+PWEucGFyZW50RGF0YS5oZWlnaHQmJihhLnNpemUuaGVpZ2h0PWEucGFyZW50RGF0YS5oZWlnaHQtcyxjJiYoYS5zaXplLndpZHRoPWEuc2l6ZS5oZWlnaHQqYS5hc3BlY3RSYXRpbyxwPSExKSkscHx8KGEucG9zaXRpb24ubGVmdD1hLnByZXZQb3NpdGlvbi5sZWZ0LGEucG9zaXRpb24udG9wPWEucHJldlBvc2l0aW9uLnRvcCxhLnNpemUud2lkdGg9YS5wcmV2U2l6ZS53aWR0aCxhLnNpemUuaGVpZ2h0PWEucHJldlNpemUuaGVpZ2h0KX0sc3RvcDpmdW5jdGlvbigpe3ZhciBlPXQodGhpcykucmVzaXphYmxlKCJpbnN0YW5jZSIpLGk9ZS5vcHRpb25zLHM9ZS5jb250YWluZXJPZmZzZXQsbj1lLmNvbnRhaW5lclBvc2l0aW9uLG89ZS5jb250YWluZXJFbGVtZW50LGE9dChlLmhlbHBlcikscj1hLm9mZnNldCgpLGg9YS5vdXRlcldpZHRoKCktZS5zaXplRGlmZi53aWR0aCxsPWEub3V0ZXJIZWlnaHQoKS1lLnNpemVEaWZmLmhlaWdodDtlLl9oZWxwZXImJiFpLmFuaW1hdGUmJi9yZWxhdGl2ZS8udGVzdChvLmNzcygicG9zaXRpb24iKSkmJnQodGhpcykuY3NzKHtsZWZ0OnIubGVmdC1uLmxlZnQtcy5sZWZ0LHdpZHRoOmgsaGVpZ2h0Omx9KSxlLl9oZWxwZXImJiFpLmFuaW1hdGUmJi9zdGF0aWMvLnRlc3Qoby5jc3MoInBvc2l0aW9uIikpJiZ0KHRoaXMpLmNzcyh7bGVmdDpyLmxlZnQtbi5sZWZ0LXMubGVmdCx3aWR0aDpoLGhlaWdodDpsfSl9fSksdC51aS5wbHVnaW4uYWRkKCJyZXNpemFibGUiLCJhbHNvUmVzaXplIix7c3RhcnQ6ZnVuY3Rpb24oKXt2YXIgZT10KHRoaXMpLnJlc2l6YWJsZSgiaW5zdGFuY2UiKSxpPWUub3B0aW9uczt0KGkuYWxzb1Jlc2l6ZSkuZWFjaChmdW5jdGlvbigpe3ZhciBlPXQodGhpcyk7ZS5kYXRhKCJ1aS1yZXNpemFibGUtYWxzb3Jlc2l6ZSIse3dpZHRoOnBhcnNlRmxvYXQoZS53aWR0aCgpKSxoZWlnaHQ6cGFyc2VGbG9hdChlLmhlaWdodCgpKSxsZWZ0OnBhcnNlRmxvYXQoZS5jc3MoImxlZnQiKSksdG9wOnBhcnNlRmxvYXQoZS5jc3MoInRvcCIpKX0pfSl9LHJlc2l6ZTpmdW5jdGlvbihlLGkpe3ZhciBzPXQodGhpcykucmVzaXphYmxlKCJpbnN0YW5jZSIpLG49cy5vcHRpb25zLG89cy5vcmlnaW5hbFNpemUsYT1zLm9yaWdpbmFsUG9zaXRpb24scj17aGVpZ2h0OnMuc2l6ZS5oZWlnaHQtby5oZWlnaHR8fDAsd2lkdGg6cy5zaXplLndpZHRoLW8ud2lkdGh8fDAsdG9wOnMucG9zaXRpb24udG9wLWEudG9wfHwwLGxlZnQ6cy5wb3NpdGlvbi5sZWZ0LWEubGVmdHx8MH07dChuLmFsc29SZXNpemUpLmVhY2goZnVuY3Rpb24oKXt2YXIgZT10KHRoaXMpLHM9dCh0aGlzKS5kYXRhKCJ1aS1yZXNpemFibGUtYWxzb3Jlc2l6ZSIpLG49e30sbz1lLnBhcmVudHMoaS5vcmlnaW5hbEVsZW1lbnRbMF0pLmxlbmd0aD9bIndpZHRoIiwiaGVpZ2h0Il06WyJ3aWR0aCIsImhlaWdodCIsInRvcCIsImxlZnQiXTt0LmVhY2gobyxmdW5jdGlvbih0LGUpe3ZhciBpPShzW2VdfHwwKSsocltlXXx8MCk7aSYmaT49MCYmKG5bZV09aXx8bnVsbCl9KSxlLmNzcyhuKX0pfSxzdG9wOmZ1bmN0aW9uKCl7dCh0aGlzKS5yZW1vdmVEYXRhKCJ1aS1yZXNpemFibGUtYWxzb3Jlc2l6ZSIpfX0pLHQudWkucGx1Z2luLmFkZCgicmVzaXphYmxlIiwiZ2hvc3QiLHtzdGFydDpmdW5jdGlvbigpe3ZhciBlPXQodGhpcykucmVzaXphYmxlKCJpbnN0YW5jZSIpLGk9ZS5zaXplO2UuZ2hvc3Q9ZS5vcmlnaW5hbEVsZW1lbnQuY2xvbmUoKSxlLmdob3N0LmNzcyh7b3BhY2l0eTouMjUsZGlzcGxheToiYmxvY2siLHBvc2l0aW9uOiJyZWxhdGl2ZSIsaGVpZ2h0OmkuaGVpZ2h0LHdpZHRoOmkud2lkdGgsbWFyZ2luOjAsbGVmdDowLHRvcDowfSksZS5fYWRkQ2xhc3MoZS5naG9zdCwidWktcmVzaXphYmxlLWdob3N0IiksdC51aUJhY2tDb21wYXQhPT0hMSYmInN0cmluZyI9PXR5cGVvZiBlLm9wdGlvbnMuZ2hvc3QmJmUuZ2hvc3QuYWRkQ2xhc3ModGhpcy5vcHRpb25zLmdob3N0KSxlLmdob3N0LmFwcGVuZFRvKGUuaGVscGVyKX0scmVzaXplOmZ1bmN0aW9uKCl7dmFyIGU9dCh0aGlzKS5yZXNpemFibGUoImluc3RhbmNlIik7ZS5naG9zdCYmZS5naG9zdC5jc3Moe3Bvc2l0aW9uOiJyZWxhdGl2ZSIsaGVpZ2h0OmUuc2l6ZS5oZWlnaHQsd2lkdGg6ZS5zaXplLndpZHRofSl9LHN0b3A6ZnVuY3Rpb24oKXt2YXIgZT10KHRoaXMpLnJlc2l6YWJsZSgiaW5zdGFuY2UiKTtlLmdob3N0JiZlLmhlbHBlciYmZS5oZWxwZXIuZ2V0KDApLnJlbW92ZUNoaWxkKGUuZ2hvc3QuZ2V0KDApKX19KSx0LnVpLnBsdWdpbi5hZGQoInJlc2l6YWJsZSIsImdyaWQiLHtyZXNpemU6ZnVuY3Rpb24oKXt2YXIgZSxpPXQodGhpcykucmVzaXphYmxlKCJpbnN0YW5jZSIpLHM9aS5vcHRpb25zLG49aS5zaXplLG89aS5vcmlnaW5hbFNpemUsYT1pLm9yaWdpbmFsUG9zaXRpb24scj1pLmF4aXMsaD0ibnVtYmVyIj09dHlwZW9mIHMuZ3JpZD9bcy5ncmlkLHMuZ3JpZF06cy5ncmlkLGw9aFswXXx8MSxjPWhbMV18fDEsdT1NYXRoLnJvdW5kKChuLndpZHRoLW8ud2lkdGgpL2wpKmwsZD1NYXRoLnJvdW5kKChuLmhlaWdodC1vLmhlaWdodCkvYykqYyxwPW8ud2lkdGgrdSxmPW8uaGVpZ2h0K2QsZz1zLm1heFdpZHRoJiZwPnMubWF4V2lkdGgsbT1zLm1heEhlaWdodCYmZj5zLm1heEhlaWdodCxfPXMubWluV2lkdGgmJnMubWluV2lkdGg+cCx2PXMubWluSGVpZ2h0JiZzLm1pbkhlaWdodD5mO3MuZ3JpZD1oLF8mJihwKz1sKSx2JiYoZis9YyksZyYmKHAtPWwpLG0mJihmLT1jKSwvXihzZXxzfGUpJC8udGVzdChyKT8oaS5zaXplLndpZHRoPXAsaS5zaXplLmhlaWdodD1mKTovXihuZSkkLy50ZXN0KHIpPyhpLnNpemUud2lkdGg9cCxpLnNpemUuaGVpZ2h0PWYsaS5wb3NpdGlvbi50b3A9YS50b3AtZCk6L14oc3cpJC8udGVzdChyKT8oaS5zaXplLndpZHRoPXAsaS5zaXplLmhlaWdodD1mLGkucG9zaXRpb24ubGVmdD1hLmxlZnQtdSk6KCgwPj1mLWN8fDA+PXAtbCkmJihlPWkuX2dldFBhZGRpbmdQbHVzQm9yZGVyRGltZW5zaW9ucyh0aGlzKSksZi1jPjA/KGkuc2l6ZS5oZWlnaHQ9ZixpLnBvc2l0aW9uLnRvcD1hLnRvcC1kKTooZj1jLWUuaGVpZ2h0LGkuc2l6ZS5oZWlnaHQ9ZixpLnBvc2l0aW9uLnRvcD1hLnRvcCtvLmhlaWdodC1mKSxwLWw+MD8oaS5zaXplLndpZHRoPXAsaS5wb3NpdGlvbi5sZWZ0PWEubGVmdC11KToocD1sLWUud2lkdGgsaS5zaXplLndpZHRoPXAsaS5wb3NpdGlvbi5sZWZ0PWEubGVmdCtvLndpZHRoLXApKX19KSx0LnVpLnJlc2l6YWJsZSx0LndpZGdldCgidWkuZGlhbG9nIix7dmVyc2lvbjoiMS4xMi4xIixvcHRpb25zOnthcHBlbmRUbzoiYm9keSIsYXV0b09wZW46ITAsYnV0dG9uczpbXSxjbGFzc2VzOnsidWktZGlhbG9nIjoidWktY29ybmVyLWFsbCIsInVpLWRpYWxvZy10aXRsZWJhciI6InVpLWNvcm5lci1hbGwifSxjbG9zZU9uRXNjYXBlOiEwLGNsb3NlVGV4dDoiQ2xvc2UiLGRyYWdnYWJsZTohMCxoaWRlOm51bGwsaGVpZ2h0OiJhdXRvIixtYXhIZWlnaHQ6bnVsbCxtYXhXaWR0aDpudWxsLG1pbkhlaWdodDoxNTAsbWluV2lkdGg6MTUwLG1vZGFsOiExLHBvc2l0aW9uOntteToiY2VudGVyIixhdDoiY2VudGVyIixvZjp3aW5kb3csY29sbGlzaW9uOiJmaXQiLHVzaW5nOmZ1bmN0aW9uKGUpe3ZhciBpPXQodGhpcykuY3NzKGUpLm9mZnNldCgpLnRvcDswPmkmJnQodGhpcykuY3NzKCJ0b3AiLGUudG9wLWkpfX0scmVzaXphYmxlOiEwLHNob3c6bnVsbCx0aXRsZTpudWxsLHdpZHRoOjMwMCxiZWZvcmVDbG9zZTpudWxsLGNsb3NlOm51bGwsZHJhZzpudWxsLGRyYWdTdGFydDpudWxsLGRyYWdTdG9wOm51bGwsZm9jdXM6bnVsbCxvcGVuOm51bGwscmVzaXplOm51bGwscmVzaXplU3RhcnQ6bnVsbCxyZXNpemVTdG9wOm51bGx9LHNpemVSZWxhdGVkT3B0aW9uczp7YnV0dG9uczohMCxoZWlnaHQ6ITAsbWF4SGVpZ2h0OiEwLG1heFdpZHRoOiEwLG1pbkhlaWdodDohMCxtaW5XaWR0aDohMCx3aWR0aDohMH0scmVzaXphYmxlUmVsYXRlZE9wdGlvbnM6e21heEhlaWdodDohMCxtYXhXaWR0aDohMCxtaW5IZWlnaHQ6ITAsbWluV2lkdGg6ITB9LF9jcmVhdGU6ZnVuY3Rpb24oKXt0aGlzLm9yaWdpbmFsQ3NzPXtkaXNwbGF5OnRoaXMuZWxlbWVudFswXS5zdHlsZS5kaXNwbGF5LHdpZHRoOnRoaXMuZWxlbWVudFswXS5zdHlsZS53aWR0aCxtaW5IZWlnaHQ6dGhpcy5lbGVtZW50WzBdLnN0eWxlLm1pbkhlaWdodCxtYXhIZWlnaHQ6dGhpcy5lbGVtZW50WzBdLnN0eWxlLm1heEhlaWdodCxoZWlnaHQ6dGhpcy5lbGVtZW50WzBdLnN0eWxlLmhlaWdodH0sdGhpcy5vcmlnaW5hbFBvc2l0aW9uPXtwYXJlbnQ6dGhpcy5lbGVtZW50LnBhcmVudCgpLGluZGV4OnRoaXMuZWxlbWVudC5wYXJlbnQoKS5jaGlsZHJlbigpLmluZGV4KHRoaXMuZWxlbWVudCl9LHRoaXMub3JpZ2luYWxUaXRsZT10aGlzLmVsZW1lbnQuYXR0cigidGl0bGUiKSxudWxsPT10aGlzLm9wdGlvbnMudGl0bGUmJm51bGwhPXRoaXMub3JpZ2luYWxUaXRsZSYmKHRoaXMub3B0aW9ucy50aXRsZT10aGlzLm9yaWdpbmFsVGl0bGUpLHRoaXMub3B0aW9ucy5kaXNhYmxlZCYmKHRoaXMub3B0aW9ucy5kaXNhYmxlZD0hMSksdGhpcy5fY3JlYXRlV3JhcHBlcigpLHRoaXMuZWxlbWVudC5zaG93KCkucmVtb3ZlQXR0cigidGl0bGUiKS5hcHBlbmRUbyh0aGlzLnVpRGlhbG9nKSx0aGlzLl9hZGRDbGFzcygidWktZGlhbG9nLWNvbnRlbnQiLCJ1aS13aWRnZXQtY29udGVudCIpLHRoaXMuX2NyZWF0ZVRpdGxlYmFyKCksdGhpcy5fY3JlYXRlQnV0dG9uUGFuZSgpLHRoaXMub3B0aW9ucy5kcmFnZ2FibGUmJnQuZm4uZHJhZ2dhYmxlJiZ0aGlzLl9tYWtlRHJhZ2dhYmxlKCksdGhpcy5vcHRpb25zLnJlc2l6YWJsZSYmdC5mbi5yZXNpemFibGUmJnRoaXMuX21ha2VSZXNpemFibGUoKSx0aGlzLl9pc09wZW49ITEsdGhpcy5fdHJhY2tGb2N1cygpfSxfaW5pdDpmdW5jdGlvbigpe3RoaXMub3B0aW9ucy5hdXRvT3BlbiYmdGhpcy5vcGVuKCl9LF9hcHBlbmRUbzpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucy5hcHBlbmRUbztyZXR1cm4gZSYmKGUuanF1ZXJ5fHxlLm5vZGVUeXBlKT90KGUpOnRoaXMuZG9jdW1lbnQuZmluZChlfHwiYm9keSIpLmVxKDApfSxfZGVzdHJveTpmdW5jdGlvbigpe3ZhciB0LGU9dGhpcy5vcmlnaW5hbFBvc2l0aW9uO3RoaXMuX3VudHJhY2tJbnN0YW5jZSgpLHRoaXMuX2Rlc3Ryb3lPdmVybGF5KCksdGhpcy5lbGVtZW50LnJlbW92ZVVuaXF1ZUlkKCkuY3NzKHRoaXMub3JpZ2luYWxDc3MpLmRldGFjaCgpLHRoaXMudWlEaWFsb2cucmVtb3ZlKCksdGhpcy5vcmlnaW5hbFRpdGxlJiZ0aGlzLmVsZW1lbnQuYXR0cigidGl0bGUiLHRoaXMub3JpZ2luYWxUaXRsZSksdD1lLnBhcmVudC5jaGlsZHJlbigpLmVxKGUuaW5kZXgpLHQubGVuZ3RoJiZ0WzBdIT09dGhpcy5lbGVtZW50WzBdP3QuYmVmb3JlKHRoaXMuZWxlbWVudCk6ZS5wYXJlbnQuYXBwZW5kKHRoaXMuZWxlbWVudCl9LHdpZGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnVpRGlhbG9nCn0sZGlzYWJsZTp0Lm5vb3AsZW5hYmxlOnQubm9vcCxjbG9zZTpmdW5jdGlvbihlKXt2YXIgaT10aGlzO3RoaXMuX2lzT3BlbiYmdGhpcy5fdHJpZ2dlcigiYmVmb3JlQ2xvc2UiLGUpIT09ITEmJih0aGlzLl9pc09wZW49ITEsdGhpcy5fZm9jdXNlZEVsZW1lbnQ9bnVsbCx0aGlzLl9kZXN0cm95T3ZlcmxheSgpLHRoaXMuX3VudHJhY2tJbnN0YW5jZSgpLHRoaXMub3BlbmVyLmZpbHRlcigiOmZvY3VzYWJsZSIpLnRyaWdnZXIoImZvY3VzIikubGVuZ3RofHx0LnVpLnNhZmVCbHVyKHQudWkuc2FmZUFjdGl2ZUVsZW1lbnQodGhpcy5kb2N1bWVudFswXSkpLHRoaXMuX2hpZGUodGhpcy51aURpYWxvZyx0aGlzLm9wdGlvbnMuaGlkZSxmdW5jdGlvbigpe2kuX3RyaWdnZXIoImNsb3NlIixlKX0pKX0saXNPcGVuOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzT3Blbn0sbW92ZVRvVG9wOmZ1bmN0aW9uKCl7dGhpcy5fbW92ZVRvVG9wKCl9LF9tb3ZlVG9Ub3A6ZnVuY3Rpb24oZSxpKXt2YXIgcz0hMSxuPXRoaXMudWlEaWFsb2cuc2libGluZ3MoIi51aS1mcm9udDp2aXNpYmxlIikubWFwKGZ1bmN0aW9uKCl7cmV0dXJuK3QodGhpcykuY3NzKCJ6LWluZGV4Iil9KS5nZXQoKSxvPU1hdGgubWF4LmFwcGx5KG51bGwsbik7cmV0dXJuIG8+PSt0aGlzLnVpRGlhbG9nLmNzcygiei1pbmRleCIpJiYodGhpcy51aURpYWxvZy5jc3MoInotaW5kZXgiLG8rMSkscz0hMCkscyYmIWkmJnRoaXMuX3RyaWdnZXIoImZvY3VzIixlKSxzfSxvcGVuOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gdGhpcy5faXNPcGVuPyh0aGlzLl9tb3ZlVG9Ub3AoKSYmdGhpcy5fZm9jdXNUYWJiYWJsZSgpLHZvaWQgMCk6KHRoaXMuX2lzT3Blbj0hMCx0aGlzLm9wZW5lcj10KHQudWkuc2FmZUFjdGl2ZUVsZW1lbnQodGhpcy5kb2N1bWVudFswXSkpLHRoaXMuX3NpemUoKSx0aGlzLl9wb3NpdGlvbigpLHRoaXMuX2NyZWF0ZU92ZXJsYXkoKSx0aGlzLl9tb3ZlVG9Ub3AobnVsbCwhMCksdGhpcy5vdmVybGF5JiZ0aGlzLm92ZXJsYXkuY3NzKCJ6LWluZGV4Iix0aGlzLnVpRGlhbG9nLmNzcygiei1pbmRleCIpLTEpLHRoaXMuX3Nob3codGhpcy51aURpYWxvZyx0aGlzLm9wdGlvbnMuc2hvdyxmdW5jdGlvbigpe2UuX2ZvY3VzVGFiYmFibGUoKSxlLl90cmlnZ2VyKCJmb2N1cyIpfSksdGhpcy5fbWFrZUZvY3VzVGFyZ2V0KCksdGhpcy5fdHJpZ2dlcigib3BlbiIpLHZvaWQgMCl9LF9mb2N1c1RhYmJhYmxlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fZm9jdXNlZEVsZW1lbnQ7dHx8KHQ9dGhpcy5lbGVtZW50LmZpbmQoIlthdXRvZm9jdXNdIikpLHQubGVuZ3RofHwodD10aGlzLmVsZW1lbnQuZmluZCgiOnRhYmJhYmxlIikpLHQubGVuZ3RofHwodD10aGlzLnVpRGlhbG9nQnV0dG9uUGFuZS5maW5kKCI6dGFiYmFibGUiKSksdC5sZW5ndGh8fCh0PXRoaXMudWlEaWFsb2dUaXRsZWJhckNsb3NlLmZpbHRlcigiOnRhYmJhYmxlIikpLHQubGVuZ3RofHwodD10aGlzLnVpRGlhbG9nKSx0LmVxKDApLnRyaWdnZXIoImZvY3VzIil9LF9rZWVwRm9jdXM6ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gaSgpe3ZhciBlPXQudWkuc2FmZUFjdGl2ZUVsZW1lbnQodGhpcy5kb2N1bWVudFswXSksaT10aGlzLnVpRGlhbG9nWzBdPT09ZXx8dC5jb250YWlucyh0aGlzLnVpRGlhbG9nWzBdLGUpO2l8fHRoaXMuX2ZvY3VzVGFiYmFibGUoKX1lLnByZXZlbnREZWZhdWx0KCksaS5jYWxsKHRoaXMpLHRoaXMuX2RlbGF5KGkpfSxfY3JlYXRlV3JhcHBlcjpmdW5jdGlvbigpe3RoaXMudWlEaWFsb2c9dCgiPGRpdj4iKS5oaWRlKCkuYXR0cih7dGFiSW5kZXg6LTEscm9sZToiZGlhbG9nIn0pLmFwcGVuZFRvKHRoaXMuX2FwcGVuZFRvKCkpLHRoaXMuX2FkZENsYXNzKHRoaXMudWlEaWFsb2csInVpLWRpYWxvZyIsInVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1mcm9udCIpLHRoaXMuX29uKHRoaXMudWlEaWFsb2cse2tleWRvd246ZnVuY3Rpb24oZSl7aWYodGhpcy5vcHRpb25zLmNsb3NlT25Fc2NhcGUmJiFlLmlzRGVmYXVsdFByZXZlbnRlZCgpJiZlLmtleUNvZGUmJmUua2V5Q29kZT09PXQudWkua2V5Q29kZS5FU0NBUEUpcmV0dXJuIGUucHJldmVudERlZmF1bHQoKSx0aGlzLmNsb3NlKGUpLHZvaWQgMDtpZihlLmtleUNvZGU9PT10LnVpLmtleUNvZGUuVEFCJiYhZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7dmFyIGk9dGhpcy51aURpYWxvZy5maW5kKCI6dGFiYmFibGUiKSxzPWkuZmlsdGVyKCI6Zmlyc3QiKSxuPWkuZmlsdGVyKCI6bGFzdCIpO2UudGFyZ2V0IT09blswXSYmZS50YXJnZXQhPT10aGlzLnVpRGlhbG9nWzBdfHxlLnNoaWZ0S2V5P2UudGFyZ2V0IT09c1swXSYmZS50YXJnZXQhPT10aGlzLnVpRGlhbG9nWzBdfHwhZS5zaGlmdEtleXx8KHRoaXMuX2RlbGF5KGZ1bmN0aW9uKCl7bi50cmlnZ2VyKCJmb2N1cyIpfSksZS5wcmV2ZW50RGVmYXVsdCgpKToodGhpcy5fZGVsYXkoZnVuY3Rpb24oKXtzLnRyaWdnZXIoImZvY3VzIil9KSxlLnByZXZlbnREZWZhdWx0KCkpfX0sbW91c2Vkb3duOmZ1bmN0aW9uKHQpe3RoaXMuX21vdmVUb1RvcCh0KSYmdGhpcy5fZm9jdXNUYWJiYWJsZSgpfX0pLHRoaXMuZWxlbWVudC5maW5kKCJbYXJpYS1kZXNjcmliZWRieV0iKS5sZW5ndGh8fHRoaXMudWlEaWFsb2cuYXR0cih7ImFyaWEtZGVzY3JpYmVkYnkiOnRoaXMuZWxlbWVudC51bmlxdWVJZCgpLmF0dHIoImlkIil9KX0sX2NyZWF0ZVRpdGxlYmFyOmZ1bmN0aW9uKCl7dmFyIGU7dGhpcy51aURpYWxvZ1RpdGxlYmFyPXQoIjxkaXY+IiksdGhpcy5fYWRkQ2xhc3ModGhpcy51aURpYWxvZ1RpdGxlYmFyLCJ1aS1kaWFsb2ctdGl0bGViYXIiLCJ1aS13aWRnZXQtaGVhZGVyIHVpLWhlbHBlci1jbGVhcmZpeCIpLHRoaXMuX29uKHRoaXMudWlEaWFsb2dUaXRsZWJhcix7bW91c2Vkb3duOmZ1bmN0aW9uKGUpe3QoZS50YXJnZXQpLmNsb3Nlc3QoIi51aS1kaWFsb2ctdGl0bGViYXItY2xvc2UiKXx8dGhpcy51aURpYWxvZy50cmlnZ2VyKCJmb2N1cyIpfX0pLHRoaXMudWlEaWFsb2dUaXRsZWJhckNsb3NlPXQoIjxidXR0b24gdHlwZT0nYnV0dG9uJz48L2J1dHRvbj4iKS5idXR0b24oe2xhYmVsOnQoIjxhPiIpLnRleHQodGhpcy5vcHRpb25zLmNsb3NlVGV4dCkuaHRtbCgpLGljb246InVpLWljb24tY2xvc2V0aGljayIsc2hvd0xhYmVsOiExfSkuYXBwZW5kVG8odGhpcy51aURpYWxvZ1RpdGxlYmFyKSx0aGlzLl9hZGRDbGFzcyh0aGlzLnVpRGlhbG9nVGl0bGViYXJDbG9zZSwidWktZGlhbG9nLXRpdGxlYmFyLWNsb3NlIiksdGhpcy5fb24odGhpcy51aURpYWxvZ1RpdGxlYmFyQ2xvc2Use2NsaWNrOmZ1bmN0aW9uKHQpe3QucHJldmVudERlZmF1bHQoKSx0aGlzLmNsb3NlKHQpfX0pLGU9dCgiPHNwYW4+IikudW5pcXVlSWQoKS5wcmVwZW5kVG8odGhpcy51aURpYWxvZ1RpdGxlYmFyKSx0aGlzLl9hZGRDbGFzcyhlLCJ1aS1kaWFsb2ctdGl0bGUiKSx0aGlzLl90aXRsZShlKSx0aGlzLnVpRGlhbG9nVGl0bGViYXIucHJlcGVuZFRvKHRoaXMudWlEaWFsb2cpLHRoaXMudWlEaWFsb2cuYXR0cih7ImFyaWEtbGFiZWxsZWRieSI6ZS5hdHRyKCJpZCIpfSl9LF90aXRsZTpmdW5jdGlvbih0KXt0aGlzLm9wdGlvbnMudGl0bGU/dC50ZXh0KHRoaXMub3B0aW9ucy50aXRsZSk6dC5odG1sKCImIzE2MDsiKX0sX2NyZWF0ZUJ1dHRvblBhbmU6ZnVuY3Rpb24oKXt0aGlzLnVpRGlhbG9nQnV0dG9uUGFuZT10KCI8ZGl2PiIpLHRoaXMuX2FkZENsYXNzKHRoaXMudWlEaWFsb2dCdXR0b25QYW5lLCJ1aS1kaWFsb2ctYnV0dG9ucGFuZSIsInVpLXdpZGdldC1jb250ZW50IHVpLWhlbHBlci1jbGVhcmZpeCIpLHRoaXMudWlCdXR0b25TZXQ9dCgiPGRpdj4iKS5hcHBlbmRUbyh0aGlzLnVpRGlhbG9nQnV0dG9uUGFuZSksdGhpcy5fYWRkQ2xhc3ModGhpcy51aUJ1dHRvblNldCwidWktZGlhbG9nLWJ1dHRvbnNldCIpLHRoaXMuX2NyZWF0ZUJ1dHRvbnMoKX0sX2NyZWF0ZUJ1dHRvbnM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLGk9dGhpcy5vcHRpb25zLmJ1dHRvbnM7cmV0dXJuIHRoaXMudWlEaWFsb2dCdXR0b25QYW5lLnJlbW92ZSgpLHRoaXMudWlCdXR0b25TZXQuZW1wdHkoKSx0LmlzRW1wdHlPYmplY3QoaSl8fHQuaXNBcnJheShpKSYmIWkubGVuZ3RoPyh0aGlzLl9yZW1vdmVDbGFzcyh0aGlzLnVpRGlhbG9nLCJ1aS1kaWFsb2ctYnV0dG9ucyIpLHZvaWQgMCk6KHQuZWFjaChpLGZ1bmN0aW9uKGkscyl7dmFyIG4sbztzPXQuaXNGdW5jdGlvbihzKT97Y2xpY2s6cyx0ZXh0Oml9OnMscz10LmV4dGVuZCh7dHlwZToiYnV0dG9uIn0scyksbj1zLmNsaWNrLG89e2ljb246cy5pY29uLGljb25Qb3NpdGlvbjpzLmljb25Qb3NpdGlvbixzaG93TGFiZWw6cy5zaG93TGFiZWwsaWNvbnM6cy5pY29ucyx0ZXh0OnMudGV4dH0sZGVsZXRlIHMuY2xpY2ssZGVsZXRlIHMuaWNvbixkZWxldGUgcy5pY29uUG9zaXRpb24sZGVsZXRlIHMuc2hvd0xhYmVsLGRlbGV0ZSBzLmljb25zLCJib29sZWFuIj09dHlwZW9mIHMudGV4dCYmZGVsZXRlIHMudGV4dCx0KCI8YnV0dG9uPjwvYnV0dG9uPiIscykuYnV0dG9uKG8pLmFwcGVuZFRvKGUudWlCdXR0b25TZXQpLm9uKCJjbGljayIsZnVuY3Rpb24oKXtuLmFwcGx5KGUuZWxlbWVudFswXSxhcmd1bWVudHMpfSl9KSx0aGlzLl9hZGRDbGFzcyh0aGlzLnVpRGlhbG9nLCJ1aS1kaWFsb2ctYnV0dG9ucyIpLHRoaXMudWlEaWFsb2dCdXR0b25QYW5lLmFwcGVuZFRvKHRoaXMudWlEaWFsb2cpLHZvaWQgMCl9LF9tYWtlRHJhZ2dhYmxlOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtyZXR1cm57cG9zaXRpb246dC5wb3NpdGlvbixvZmZzZXQ6dC5vZmZzZXR9fXZhciBpPXRoaXMscz10aGlzLm9wdGlvbnM7dGhpcy51aURpYWxvZy5kcmFnZ2FibGUoe2NhbmNlbDoiLnVpLWRpYWxvZy1jb250ZW50LCAudWktZGlhbG9nLXRpdGxlYmFyLWNsb3NlIixoYW5kbGU6Ii51aS1kaWFsb2ctdGl0bGViYXIiLGNvbnRhaW5tZW50OiJkb2N1bWVudCIsc3RhcnQ6ZnVuY3Rpb24ocyxuKXtpLl9hZGRDbGFzcyh0KHRoaXMpLCJ1aS1kaWFsb2ctZHJhZ2dpbmciKSxpLl9ibG9ja0ZyYW1lcygpLGkuX3RyaWdnZXIoImRyYWdTdGFydCIscyxlKG4pKX0sZHJhZzpmdW5jdGlvbih0LHMpe2kuX3RyaWdnZXIoImRyYWciLHQsZShzKSl9LHN0b3A6ZnVuY3Rpb24obixvKXt2YXIgYT1vLm9mZnNldC5sZWZ0LWkuZG9jdW1lbnQuc2Nyb2xsTGVmdCgpLHI9by5vZmZzZXQudG9wLWkuZG9jdW1lbnQuc2Nyb2xsVG9wKCk7cy5wb3NpdGlvbj17bXk6ImxlZnQgdG9wIixhdDoibGVmdCIrKGE+PTA/IisiOiIiKSthKyIgIisidG9wIisocj49MD8iKyI6IiIpK3Isb2Y6aS53aW5kb3d9LGkuX3JlbW92ZUNsYXNzKHQodGhpcyksInVpLWRpYWxvZy1kcmFnZ2luZyIpLGkuX3VuYmxvY2tGcmFtZXMoKSxpLl90cmlnZ2VyKCJkcmFnU3RvcCIsbixlKG8pKX19KX0sX21ha2VSZXNpemFibGU6ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3JldHVybntvcmlnaW5hbFBvc2l0aW9uOnQub3JpZ2luYWxQb3NpdGlvbixvcmlnaW5hbFNpemU6dC5vcmlnaW5hbFNpemUscG9zaXRpb246dC5wb3NpdGlvbixzaXplOnQuc2l6ZX19dmFyIGk9dGhpcyxzPXRoaXMub3B0aW9ucyxuPXMucmVzaXphYmxlLG89dGhpcy51aURpYWxvZy5jc3MoInBvc2l0aW9uIiksYT0ic3RyaW5nIj09dHlwZW9mIG4/bjoibixlLHMsdyxzZSxzdyxuZSxudyI7dGhpcy51aURpYWxvZy5yZXNpemFibGUoe2NhbmNlbDoiLnVpLWRpYWxvZy1jb250ZW50Iixjb250YWlubWVudDoiZG9jdW1lbnQiLGFsc29SZXNpemU6dGhpcy5lbGVtZW50LG1heFdpZHRoOnMubWF4V2lkdGgsbWF4SGVpZ2h0OnMubWF4SGVpZ2h0LG1pbldpZHRoOnMubWluV2lkdGgsbWluSGVpZ2h0OnRoaXMuX21pbkhlaWdodCgpLGhhbmRsZXM6YSxzdGFydDpmdW5jdGlvbihzLG4pe2kuX2FkZENsYXNzKHQodGhpcyksInVpLWRpYWxvZy1yZXNpemluZyIpLGkuX2Jsb2NrRnJhbWVzKCksaS5fdHJpZ2dlcigicmVzaXplU3RhcnQiLHMsZShuKSl9LHJlc2l6ZTpmdW5jdGlvbih0LHMpe2kuX3RyaWdnZXIoInJlc2l6ZSIsdCxlKHMpKX0sc3RvcDpmdW5jdGlvbihuLG8pe3ZhciBhPWkudWlEaWFsb2cub2Zmc2V0KCkscj1hLmxlZnQtaS5kb2N1bWVudC5zY3JvbGxMZWZ0KCksaD1hLnRvcC1pLmRvY3VtZW50LnNjcm9sbFRvcCgpO3MuaGVpZ2h0PWkudWlEaWFsb2cuaGVpZ2h0KCkscy53aWR0aD1pLnVpRGlhbG9nLndpZHRoKCkscy5wb3NpdGlvbj17bXk6ImxlZnQgdG9wIixhdDoibGVmdCIrKHI+PTA/IisiOiIiKStyKyIgIisidG9wIisoaD49MD8iKyI6IiIpK2gsb2Y6aS53aW5kb3d9LGkuX3JlbW92ZUNsYXNzKHQodGhpcyksInVpLWRpYWxvZy1yZXNpemluZyIpLGkuX3VuYmxvY2tGcmFtZXMoKSxpLl90cmlnZ2VyKCJyZXNpemVTdG9wIixuLGUobykpfX0pLmNzcygicG9zaXRpb24iLG8pfSxfdHJhY2tGb2N1czpmdW5jdGlvbigpe3RoaXMuX29uKHRoaXMud2lkZ2V0KCkse2ZvY3VzaW46ZnVuY3Rpb24oZSl7dGhpcy5fbWFrZUZvY3VzVGFyZ2V0KCksdGhpcy5fZm9jdXNlZEVsZW1lbnQ9dChlLnRhcmdldCl9fSl9LF9tYWtlRm9jdXNUYXJnZXQ6ZnVuY3Rpb24oKXt0aGlzLl91bnRyYWNrSW5zdGFuY2UoKSx0aGlzLl90cmFja2luZ0luc3RhbmNlcygpLnVuc2hpZnQodGhpcyl9LF91bnRyYWNrSW5zdGFuY2U6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl90cmFja2luZ0luc3RhbmNlcygpLGk9dC5pbkFycmF5KHRoaXMsZSk7LTEhPT1pJiZlLnNwbGljZShpLDEpfSxfdHJhY2tpbmdJbnN0YW5jZXM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmRvY3VtZW50LmRhdGEoInVpLWRpYWxvZy1pbnN0YW5jZXMiKTtyZXR1cm4gdHx8KHQ9W10sdGhpcy5kb2N1bWVudC5kYXRhKCJ1aS1kaWFsb2ctaW5zdGFuY2VzIix0KSksdH0sX21pbkhlaWdodDpmdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9ucztyZXR1cm4iYXV0byI9PT10LmhlaWdodD90Lm1pbkhlaWdodDpNYXRoLm1pbih0Lm1pbkhlaWdodCx0LmhlaWdodCl9LF9wb3NpdGlvbjpmdW5jdGlvbigpe3ZhciB0PXRoaXMudWlEaWFsb2cuaXMoIjp2aXNpYmxlIik7dHx8dGhpcy51aURpYWxvZy5zaG93KCksdGhpcy51aURpYWxvZy5wb3NpdGlvbih0aGlzLm9wdGlvbnMucG9zaXRpb24pLHR8fHRoaXMudWlEaWFsb2cuaGlkZSgpfSxfc2V0T3B0aW9uczpmdW5jdGlvbihlKXt2YXIgaT10aGlzLHM9ITEsbj17fTt0LmVhY2goZSxmdW5jdGlvbih0LGUpe2kuX3NldE9wdGlvbih0LGUpLHQgaW4gaS5zaXplUmVsYXRlZE9wdGlvbnMmJihzPSEwKSx0IGluIGkucmVzaXphYmxlUmVsYXRlZE9wdGlvbnMmJihuW3RdPWUpfSkscyYmKHRoaXMuX3NpemUoKSx0aGlzLl9wb3NpdGlvbigpKSx0aGlzLnVpRGlhbG9nLmlzKCI6ZGF0YSh1aS1yZXNpemFibGUpIikmJnRoaXMudWlEaWFsb2cucmVzaXphYmxlKCJvcHRpb24iLG4pfSxfc2V0T3B0aW9uOmZ1bmN0aW9uKGUsaSl7dmFyIHMsbixvPXRoaXMudWlEaWFsb2c7ImRpc2FibGVkIiE9PWUmJih0aGlzLl9zdXBlcihlLGkpLCJhcHBlbmRUbyI9PT1lJiZ0aGlzLnVpRGlhbG9nLmFwcGVuZFRvKHRoaXMuX2FwcGVuZFRvKCkpLCJidXR0b25zIj09PWUmJnRoaXMuX2NyZWF0ZUJ1dHRvbnMoKSwiY2xvc2VUZXh0Ij09PWUmJnRoaXMudWlEaWFsb2dUaXRsZWJhckNsb3NlLmJ1dHRvbih7bGFiZWw6dCgiPGE+IikudGV4dCgiIit0aGlzLm9wdGlvbnMuY2xvc2VUZXh0KS5odG1sKCl9KSwiZHJhZ2dhYmxlIj09PWUmJihzPW8uaXMoIjpkYXRhKHVpLWRyYWdnYWJsZSkiKSxzJiYhaSYmby5kcmFnZ2FibGUoImRlc3Ryb3kiKSwhcyYmaSYmdGhpcy5fbWFrZURyYWdnYWJsZSgpKSwicG9zaXRpb24iPT09ZSYmdGhpcy5fcG9zaXRpb24oKSwicmVzaXphYmxlIj09PWUmJihuPW8uaXMoIjpkYXRhKHVpLXJlc2l6YWJsZSkiKSxuJiYhaSYmby5yZXNpemFibGUoImRlc3Ryb3kiKSxuJiYic3RyaW5nIj09dHlwZW9mIGkmJm8ucmVzaXphYmxlKCJvcHRpb24iLCJoYW5kbGVzIixpKSxufHxpPT09ITF8fHRoaXMuX21ha2VSZXNpemFibGUoKSksInRpdGxlIj09PWUmJnRoaXMuX3RpdGxlKHRoaXMudWlEaWFsb2dUaXRsZWJhci5maW5kKCIudWktZGlhbG9nLXRpdGxlIikpKX0sX3NpemU6ZnVuY3Rpb24oKXt2YXIgdCxlLGkscz10aGlzLm9wdGlvbnM7dGhpcy5lbGVtZW50LnNob3coKS5jc3Moe3dpZHRoOiJhdXRvIixtaW5IZWlnaHQ6MCxtYXhIZWlnaHQ6Im5vbmUiLGhlaWdodDowfSkscy5taW5XaWR0aD5zLndpZHRoJiYocy53aWR0aD1zLm1pbldpZHRoKSx0PXRoaXMudWlEaWFsb2cuY3NzKHtoZWlnaHQ6ImF1dG8iLHdpZHRoOnMud2lkdGh9KS5vdXRlckhlaWdodCgpLGU9TWF0aC5tYXgoMCxzLm1pbkhlaWdodC10KSxpPSJudW1iZXIiPT10eXBlb2Ygcy5tYXhIZWlnaHQ/TWF0aC5tYXgoMCxzLm1heEhlaWdodC10KToibm9uZSIsImF1dG8iPT09cy5oZWlnaHQ/dGhpcy5lbGVtZW50LmNzcyh7bWluSGVpZ2h0OmUsbWF4SGVpZ2h0OmksaGVpZ2h0OiJhdXRvIn0pOnRoaXMuZWxlbWVudC5oZWlnaHQoTWF0aC5tYXgoMCxzLmhlaWdodC10KSksdGhpcy51aURpYWxvZy5pcygiOmRhdGEodWktcmVzaXphYmxlKSIpJiZ0aGlzLnVpRGlhbG9nLnJlc2l6YWJsZSgib3B0aW9uIiwibWluSGVpZ2h0Iix0aGlzLl9taW5IZWlnaHQoKSl9LF9ibG9ja0ZyYW1lczpmdW5jdGlvbigpe3RoaXMuaWZyYW1lQmxvY2tzPXRoaXMuZG9jdW1lbnQuZmluZCgiaWZyYW1lIikubWFwKGZ1bmN0aW9uKCl7dmFyIGU9dCh0aGlzKTtyZXR1cm4gdCgiPGRpdj4iKS5jc3Moe3Bvc2l0aW9uOiJhYnNvbHV0ZSIsd2lkdGg6ZS5vdXRlcldpZHRoKCksaGVpZ2h0OmUub3V0ZXJIZWlnaHQoKX0pLmFwcGVuZFRvKGUucGFyZW50KCkpLm9mZnNldChlLm9mZnNldCgpKVswXX0pfSxfdW5ibG9ja0ZyYW1lczpmdW5jdGlvbigpe3RoaXMuaWZyYW1lQmxvY2tzJiYodGhpcy5pZnJhbWVCbG9ja3MucmVtb3ZlKCksZGVsZXRlIHRoaXMuaWZyYW1lQmxvY2tzKX0sX2FsbG93SW50ZXJhY3Rpb246ZnVuY3Rpb24oZSl7cmV0dXJuIHQoZS50YXJnZXQpLmNsb3Nlc3QoIi51aS1kaWFsb2ciKS5sZW5ndGg/ITA6ISF0KGUudGFyZ2V0KS5jbG9zZXN0KCIudWktZGF0ZXBpY2tlciIpLmxlbmd0aH0sX2NyZWF0ZU92ZXJsYXk6ZnVuY3Rpb24oKXtpZih0aGlzLm9wdGlvbnMubW9kYWwpe3ZhciBlPSEwO3RoaXMuX2RlbGF5KGZ1bmN0aW9uKCl7ZT0hMX0pLHRoaXMuZG9jdW1lbnQuZGF0YSgidWktZGlhbG9nLW92ZXJsYXlzIil8fHRoaXMuX29uKHRoaXMuZG9jdW1lbnQse2ZvY3VzaW46ZnVuY3Rpb24odCl7ZXx8dGhpcy5fYWxsb3dJbnRlcmFjdGlvbih0KXx8KHQucHJldmVudERlZmF1bHQoKSx0aGlzLl90cmFja2luZ0luc3RhbmNlcygpWzBdLl9mb2N1c1RhYmJhYmxlKCkpfX0pLHRoaXMub3ZlcmxheT10KCI8ZGl2PiIpLmFwcGVuZFRvKHRoaXMuX2FwcGVuZFRvKCkpLHRoaXMuX2FkZENsYXNzKHRoaXMub3ZlcmxheSxudWxsLCJ1aS13aWRnZXQtb3ZlcmxheSB1aS1mcm9udCIpLHRoaXMuX29uKHRoaXMub3ZlcmxheSx7bW91c2Vkb3duOiJfa2VlcEZvY3VzIn0pLHRoaXMuZG9jdW1lbnQuZGF0YSgidWktZGlhbG9nLW92ZXJsYXlzIiwodGhpcy5kb2N1bWVudC5kYXRhKCJ1aS1kaWFsb2ctb3ZlcmxheXMiKXx8MCkrMSl9fSxfZGVzdHJveU92ZXJsYXk6ZnVuY3Rpb24oKXtpZih0aGlzLm9wdGlvbnMubW9kYWwmJnRoaXMub3ZlcmxheSl7dmFyIHQ9dGhpcy5kb2N1bWVudC5kYXRhKCJ1aS1kaWFsb2ctb3ZlcmxheXMiKS0xO3Q/dGhpcy5kb2N1bWVudC5kYXRhKCJ1aS1kaWFsb2ctb3ZlcmxheXMiLHQpOih0aGlzLl9vZmYodGhpcy5kb2N1bWVudCwiZm9jdXNpbiIpLHRoaXMuZG9jdW1lbnQucmVtb3ZlRGF0YSgidWktZGlhbG9nLW92ZXJsYXlzIikpLHRoaXMub3ZlcmxheS5yZW1vdmUoKSx0aGlzLm92ZXJsYXk9bnVsbH19fSksdC51aUJhY2tDb21wYXQhPT0hMSYmdC53aWRnZXQoInVpLmRpYWxvZyIsdC51aS5kaWFsb2cse29wdGlvbnM6e2RpYWxvZ0NsYXNzOiIifSxfY3JlYXRlV3JhcHBlcjpmdW5jdGlvbigpe3RoaXMuX3N1cGVyKCksdGhpcy51aURpYWxvZy5hZGRDbGFzcyh0aGlzLm9wdGlvbnMuZGlhbG9nQ2xhc3MpfSxfc2V0T3B0aW9uOmZ1bmN0aW9uKHQsZSl7ImRpYWxvZ0NsYXNzIj09PXQmJnRoaXMudWlEaWFsb2cucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmRpYWxvZ0NsYXNzKS5hZGRDbGFzcyhlKSx0aGlzLl9zdXBlckFwcGx5KGFyZ3VtZW50cyl9fSksdC51aS5kaWFsb2csdC53aWRnZXQoInVpLmRyb3BwYWJsZSIse3ZlcnNpb246IjEuMTIuMSIsd2lkZ2V0RXZlbnRQcmVmaXg6ImRyb3AiLG9wdGlvbnM6e2FjY2VwdDoiKiIsYWRkQ2xhc3NlczohMCxncmVlZHk6ITEsc2NvcGU6ImRlZmF1bHQiLHRvbGVyYW5jZToiaW50ZXJzZWN0IixhY3RpdmF0ZTpudWxsLGRlYWN0aXZhdGU6bnVsbCxkcm9wOm51bGwsb3V0Om51bGwsb3ZlcjpudWxsfSxfY3JlYXRlOmZ1bmN0aW9uKCl7dmFyIGUsaT10aGlzLm9wdGlvbnMscz1pLmFjY2VwdDt0aGlzLmlzb3Zlcj0hMSx0aGlzLmlzb3V0PSEwLHRoaXMuYWNjZXB0PXQuaXNGdW5jdGlvbihzKT9zOmZ1bmN0aW9uKHQpe3JldHVybiB0LmlzKHMpfSx0aGlzLnByb3BvcnRpb25zPWZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGU9YXJndW1lbnRzWzBdLHZvaWQgMCk6ZT9lOmU9e3dpZHRoOnRoaXMuZWxlbWVudFswXS5vZmZzZXRXaWR0aCxoZWlnaHQ6dGhpcy5lbGVtZW50WzBdLm9mZnNldEhlaWdodH19LHRoaXMuX2FkZFRvTWFuYWdlcihpLnNjb3BlKSxpLmFkZENsYXNzZXMmJnRoaXMuX2FkZENsYXNzKCJ1aS1kcm9wcGFibGUiKX0sX2FkZFRvTWFuYWdlcjpmdW5jdGlvbihlKXt0LnVpLmRkbWFuYWdlci5kcm9wcGFibGVzW2VdPXQudWkuZGRtYW5hZ2VyLmRyb3BwYWJsZXNbZV18fFtdLHQudWkuZGRtYW5hZ2VyLmRyb3BwYWJsZXNbZV0ucHVzaCh0aGlzKX0sX3NwbGljZTpmdW5jdGlvbih0KXtmb3IodmFyIGU9MDt0Lmxlbmd0aD5lO2UrKyl0W2VdPT09dGhpcyYmdC5zcGxpY2UoZSwxKX0sX2Rlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10LnVpLmRkbWFuYWdlci5kcm9wcGFibGVzW3RoaXMub3B0aW9ucy5zY29wZV07dGhpcy5fc3BsaWNlKGUpfSxfc2V0T3B0aW9uOmZ1bmN0aW9uKGUsaSl7aWYoImFjY2VwdCI9PT1lKXRoaXMuYWNjZXB0PXQuaXNGdW5jdGlvbihpKT9pOmZ1bmN0aW9uKHQpe3JldHVybiB0LmlzKGkpfTtlbHNlIGlmKCJzY29wZSI9PT1lKXt2YXIgcz10LnVpLmRkbWFuYWdlci5kcm9wcGFibGVzW3RoaXMub3B0aW9ucy5zY29wZV07dGhpcy5fc3BsaWNlKHMpLHRoaXMuX2FkZFRvTWFuYWdlcihpKX10aGlzLl9zdXBlcihlLGkpfSxfYWN0aXZhdGU6ZnVuY3Rpb24oZSl7dmFyIGk9dC51aS5kZG1hbmFnZXIuY3VycmVudDt0aGlzLl9hZGRBY3RpdmVDbGFzcygpLGkmJnRoaXMuX3RyaWdnZXIoImFjdGl2YXRlIixlLHRoaXMudWkoaSkpfSxfZGVhY3RpdmF0ZTpmdW5jdGlvbihlKXt2YXIgaT10LnVpLmRkbWFuYWdlci5jdXJyZW50O3RoaXMuX3JlbW92ZUFjdGl2ZUNsYXNzKCksaSYmdGhpcy5fdHJpZ2dlcigiZGVhY3RpdmF0ZSIsZSx0aGlzLnVpKGkpKX0sX292ZXI6ZnVuY3Rpb24oZSl7dmFyIGk9dC51aS5kZG1hbmFnZXIuY3VycmVudDtpJiYoaS5jdXJyZW50SXRlbXx8aS5lbGVtZW50KVswXSE9PXRoaXMuZWxlbWVudFswXSYmdGhpcy5hY2NlcHQuY2FsbCh0aGlzLmVsZW1lbnRbMF0saS5jdXJyZW50SXRlbXx8aS5lbGVtZW50KSYmKHRoaXMuX2FkZEhvdmVyQ2xhc3MoKSx0aGlzLl90cmlnZ2VyKCJvdmVyIixlLHRoaXMudWkoaSkpKX0sX291dDpmdW5jdGlvbihlKXt2YXIgaT10LnVpLmRkbWFuYWdlci5jdXJyZW50O2kmJihpLmN1cnJlbnRJdGVtfHxpLmVsZW1lbnQpWzBdIT09dGhpcy5lbGVtZW50WzBdJiZ0aGlzLmFjY2VwdC5jYWxsKHRoaXMuZWxlbWVudFswXSxpLmN1cnJlbnRJdGVtfHxpLmVsZW1lbnQpJiYodGhpcy5fcmVtb3ZlSG92ZXJDbGFzcygpLHRoaXMuX3RyaWdnZXIoIm91dCIsZSx0aGlzLnVpKGkpKSl9LF9kcm9wOmZ1bmN0aW9uKGUsaSl7dmFyIHM9aXx8dC51aS5kZG1hbmFnZXIuY3VycmVudCxuPSExO3JldHVybiBzJiYocy5jdXJyZW50SXRlbXx8cy5lbGVtZW50KVswXSE9PXRoaXMuZWxlbWVudFswXT8odGhpcy5lbGVtZW50LmZpbmQoIjpkYXRhKHVpLWRyb3BwYWJsZSkiKS5ub3QoIi51aS1kcmFnZ2FibGUtZHJhZ2dpbmciKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGk9dCh0aGlzKS5kcm9wcGFibGUoImluc3RhbmNlIik7cmV0dXJuIGkub3B0aW9ucy5ncmVlZHkmJiFpLm9wdGlvbnMuZGlzYWJsZWQmJmkub3B0aW9ucy5zY29wZT09PXMub3B0aW9ucy5zY29wZSYmaS5hY2NlcHQuY2FsbChpLmVsZW1lbnRbMF0scy5jdXJyZW50SXRlbXx8cy5lbGVtZW50KSYmdihzLHQuZXh0ZW5kKGkse29mZnNldDppLmVsZW1lbnQub2Zmc2V0KCl9KSxpLm9wdGlvbnMudG9sZXJhbmNlLGUpPyhuPSEwLCExKTp2b2lkIDB9KSxuPyExOnRoaXMuYWNjZXB0LmNhbGwodGhpcy5lbGVtZW50WzBdLHMuY3VycmVudEl0ZW18fHMuZWxlbWVudCk/KHRoaXMuX3JlbW92ZUFjdGl2ZUNsYXNzKCksdGhpcy5fcmVtb3ZlSG92ZXJDbGFzcygpLHRoaXMuX3RyaWdnZXIoImRyb3AiLGUsdGhpcy51aShzKSksdGhpcy5lbGVtZW50KTohMSk6ITF9LHVpOmZ1bmN0aW9uKHQpe3JldHVybntkcmFnZ2FibGU6dC5jdXJyZW50SXRlbXx8dC5lbGVtZW50LGhlbHBlcjp0LmhlbHBlcixwb3NpdGlvbjp0LnBvc2l0aW9uLG9mZnNldDp0LnBvc2l0aW9uQWJzfX0sX2FkZEhvdmVyQ2xhc3M6ZnVuY3Rpb24oKXt0aGlzLl9hZGRDbGFzcygidWktZHJvcHBhYmxlLWhvdmVyIil9LF9yZW1vdmVIb3ZlckNsYXNzOmZ1bmN0aW9uKCl7dGhpcy5fcmVtb3ZlQ2xhc3MoInVpLWRyb3BwYWJsZS1ob3ZlciIpfSxfYWRkQWN0aXZlQ2xhc3M6ZnVuY3Rpb24oKXt0aGlzLl9hZGRDbGFzcygidWktZHJvcHBhYmxlLWFjdGl2ZSIpfSxfcmVtb3ZlQWN0aXZlQ2xhc3M6ZnVuY3Rpb24oKXt0aGlzLl9yZW1vdmVDbGFzcygidWktZHJvcHBhYmxlLWFjdGl2ZSIpfX0pO3ZhciB2PXQudWkuaW50ZXJzZWN0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUsaSl7cmV0dXJuIHQ+PWUmJmUraT50fXJldHVybiBmdW5jdGlvbihlLGkscyxuKXtpZighaS5vZmZzZXQpcmV0dXJuITE7dmFyIG89KGUucG9zaXRpb25BYnN8fGUucG9zaXRpb24uYWJzb2x1dGUpLmxlZnQrZS5tYXJnaW5zLmxlZnQsYT0oZS5wb3NpdGlvbkFic3x8ZS5wb3NpdGlvbi5hYnNvbHV0ZSkudG9wK2UubWFyZ2lucy50b3Ascj1vK2UuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgsaD1hK2UuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LGw9aS5vZmZzZXQubGVmdCxjPWkub2Zmc2V0LnRvcCx1PWwraS5wcm9wb3J0aW9ucygpLndpZHRoLGQ9YytpLnByb3BvcnRpb25zKCkuaGVpZ2h0O3N3aXRjaChzKXtjYXNlImZpdCI6cmV0dXJuIG8+PWwmJnU+PXImJmE+PWMmJmQ+PWg7Y2FzZSJpbnRlcnNlY3QiOnJldHVybiBvK2UuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgvMj5sJiZ1PnItZS5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aC8yJiZhK2UuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LzI+YyYmZD5oLWUuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LzI7Y2FzZSJwb2ludGVyIjpyZXR1cm4gdChuLnBhZ2VZLGMsaS5wcm9wb3J0aW9ucygpLmhlaWdodCkmJnQobi5wYWdlWCxsLGkucHJvcG9ydGlvbnMoKS53aWR0aCk7Y2FzZSJ0b3VjaCI6cmV0dXJuKGE+PWMmJmQ+PWF8fGg+PWMmJmQ+PWh8fGM+YSYmaD5kKSYmKG8+PWwmJnU+PW98fHI+PWwmJnU+PXJ8fGw+byYmcj51KTtkZWZhdWx0OnJldHVybiExfX19KCk7dC51aS5kZG1hbmFnZXI9e2N1cnJlbnQ6bnVsbCxkcm9wcGFibGVzOnsiZGVmYXVsdCI6W119LHByZXBhcmVPZmZzZXRzOmZ1bmN0aW9uKGUsaSl7dmFyIHMsbixvPXQudWkuZGRtYW5hZ2VyLmRyb3BwYWJsZXNbZS5vcHRpb25zLnNjb3BlXXx8W10sYT1pP2kudHlwZTpudWxsLHI9KGUuY3VycmVudEl0ZW18fGUuZWxlbWVudCkuZmluZCgiOmRhdGEodWktZHJvcHBhYmxlKSIpLmFkZEJhY2soKTt0OmZvcihzPTA7by5sZW5ndGg+cztzKyspaWYoIShvW3NdLm9wdGlvbnMuZGlzYWJsZWR8fGUmJiFvW3NdLmFjY2VwdC5jYWxsKG9bc10uZWxlbWVudFswXSxlLmN1cnJlbnRJdGVtfHxlLmVsZW1lbnQpKSl7Zm9yKG49MDtyLmxlbmd0aD5uO24rKylpZihyW25dPT09b1tzXS5lbGVtZW50WzBdKXtvW3NdLnByb3BvcnRpb25zKCkuaGVpZ2h0PTA7Y29udGludWUgdH1vW3NdLnZpc2libGU9Im5vbmUiIT09b1tzXS5lbGVtZW50LmNzcygiZGlzcGxheSIpLG9bc10udmlzaWJsZSYmKCJtb3VzZWRvd24iPT09YSYmb1tzXS5fYWN0aXZhdGUuY2FsbChvW3NdLGkpLG9bc10ub2Zmc2V0PW9bc10uZWxlbWVudC5vZmZzZXQoKSxvW3NdLnByb3BvcnRpb25zKHt3aWR0aDpvW3NdLmVsZW1lbnRbMF0ub2Zmc2V0V2lkdGgsaGVpZ2h0Om9bc10uZWxlbWVudFswXS5vZmZzZXRIZWlnaHR9KSl9fSxkcm9wOmZ1bmN0aW9uKGUsaSl7dmFyIHM9ITE7cmV0dXJuIHQuZWFjaCgodC51aS5kZG1hbmFnZXIuZHJvcHBhYmxlc1tlLm9wdGlvbnMuc2NvcGVdfHxbXSkuc2xpY2UoKSxmdW5jdGlvbigpe3RoaXMub3B0aW9ucyYmKCF0aGlzLm9wdGlvbnMuZGlzYWJsZWQmJnRoaXMudmlzaWJsZSYmdihlLHRoaXMsdGhpcy5vcHRpb25zLnRvbGVyYW5jZSxpKSYmKHM9dGhpcy5fZHJvcC5jYWxsKHRoaXMsaSl8fHMpLCF0aGlzLm9wdGlvbnMuZGlzYWJsZWQmJnRoaXMudmlzaWJsZSYmdGhpcy5hY2NlcHQuY2FsbCh0aGlzLmVsZW1lbnRbMF0sZS5jdXJyZW50SXRlbXx8ZS5lbGVtZW50KSYmKHRoaXMuaXNvdXQ9ITAsdGhpcy5pc292ZXI9ITEsdGhpcy5fZGVhY3RpdmF0ZS5jYWxsKHRoaXMsaSkpKX0pLHN9LGRyYWdTdGFydDpmdW5jdGlvbihlLGkpe2UuZWxlbWVudC5wYXJlbnRzVW50aWwoImJvZHkiKS5vbigic2Nyb2xsLmRyb3BwYWJsZSIsZnVuY3Rpb24oKXtlLm9wdGlvbnMucmVmcmVzaFBvc2l0aW9uc3x8dC51aS5kZG1hbmFnZXIucHJlcGFyZU9mZnNldHMoZSxpKX0pfSxkcmFnOmZ1bmN0aW9uKGUsaSl7ZS5vcHRpb25zLnJlZnJlc2hQb3NpdGlvbnMmJnQudWkuZGRtYW5hZ2VyLnByZXBhcmVPZmZzZXRzKGUsaSksdC5lYWNoKHQudWkuZGRtYW5hZ2VyLmRyb3BwYWJsZXNbZS5vcHRpb25zLnNjb3BlXXx8W10sZnVuY3Rpb24oKXtpZighdGhpcy5vcHRpb25zLmRpc2FibGVkJiYhdGhpcy5ncmVlZHlDaGlsZCYmdGhpcy52aXNpYmxlKXt2YXIgcyxuLG8sYT12KGUsdGhpcyx0aGlzLm9wdGlvbnMudG9sZXJhbmNlLGkpLHI9IWEmJnRoaXMuaXNvdmVyPyJpc291dCI6YSYmIXRoaXMuaXNvdmVyPyJpc292ZXIiOm51bGw7ciYmKHRoaXMub3B0aW9ucy5ncmVlZHkmJihuPXRoaXMub3B0aW9ucy5zY29wZSxvPXRoaXMuZWxlbWVudC5wYXJlbnRzKCI6ZGF0YSh1aS1kcm9wcGFibGUpIikuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIHQodGhpcykuZHJvcHBhYmxlKCJpbnN0YW5jZSIpLm9wdGlvbnMuc2NvcGU9PT1ufSksby5sZW5ndGgmJihzPXQob1swXSkuZHJvcHBhYmxlKCJpbnN0YW5jZSIpLHMuZ3JlZWR5Q2hpbGQ9Imlzb3ZlciI9PT1yKSkscyYmImlzb3ZlciI9PT1yJiYocy5pc292ZXI9ITEscy5pc291dD0hMCxzLl9vdXQuY2FsbChzLGkpKSx0aGlzW3JdPSEwLHRoaXNbImlzb3V0Ij09PXI/Imlzb3ZlciI6Imlzb3V0Il09ITEsdGhpc1siaXNvdmVyIj09PXI/Il9vdmVyIjoiX291dCJdLmNhbGwodGhpcyxpKSxzJiYiaXNvdXQiPT09ciYmKHMuaXNvdXQ9ITEscy5pc292ZXI9ITAscy5fb3Zlci5jYWxsKHMsaSkpKX19KX0sZHJhZ1N0b3A6ZnVuY3Rpb24oZSxpKXtlLmVsZW1lbnQucGFyZW50c1VudGlsKCJib2R5Iikub2ZmKCJzY3JvbGwuZHJvcHBhYmxlIiksZS5vcHRpb25zLnJlZnJlc2hQb3NpdGlvbnN8fHQudWkuZGRtYW5hZ2VyLnByZXBhcmVPZmZzZXRzKGUsaSl9fSx0LnVpQmFja0NvbXBhdCE9PSExJiZ0LndpZGdldCgidWkuZHJvcHBhYmxlIix0LnVpLmRyb3BwYWJsZSx7b3B0aW9uczp7aG92ZXJDbGFzczohMSxhY3RpdmVDbGFzczohMX0sX2FkZEFjdGl2ZUNsYXNzOmZ1bmN0aW9uKCl7dGhpcy5fc3VwZXIoKSx0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MmJnRoaXMuZWxlbWVudC5hZGRDbGFzcyh0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MpfSxfcmVtb3ZlQWN0aXZlQ2xhc3M6ZnVuY3Rpb24oKXt0aGlzLl9zdXBlcigpLHRoaXMub3B0aW9ucy5hY3RpdmVDbGFzcyYmdGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKHRoaXMub3B0aW9ucy5hY3RpdmVDbGFzcyl9LF9hZGRIb3ZlckNsYXNzOmZ1bmN0aW9uKCl7dGhpcy5fc3VwZXIoKSx0aGlzLm9wdGlvbnMuaG92ZXJDbGFzcyYmdGhpcy5lbGVtZW50LmFkZENsYXNzKHRoaXMub3B0aW9ucy5ob3ZlckNsYXNzKX0sX3JlbW92ZUhvdmVyQ2xhc3M6ZnVuY3Rpb24oKXt0aGlzLl9zdXBlcigpLHRoaXMub3B0aW9ucy5ob3ZlckNsYXNzJiZ0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmhvdmVyQ2xhc3MpfX0pLHQudWkuZHJvcHBhYmxlLHQud2lkZ2V0KCJ1aS5wcm9ncmVzc2JhciIse3ZlcnNpb246IjEuMTIuMSIsb3B0aW9uczp7Y2xhc3Nlczp7InVpLXByb2dyZXNzYmFyIjoidWktY29ybmVyLWFsbCIsInVpLXByb2dyZXNzYmFyLXZhbHVlIjoidWktY29ybmVyLWxlZnQiLCJ1aS1wcm9ncmVzc2Jhci1jb21wbGV0ZSI6InVpLWNvcm5lci1yaWdodCJ9LG1heDoxMDAsdmFsdWU6MCxjaGFuZ2U6bnVsbCxjb21wbGV0ZTpudWxsfSxtaW46MCxfY3JlYXRlOmZ1bmN0aW9uKCl7dGhpcy5vbGRWYWx1ZT10aGlzLm9wdGlvbnMudmFsdWU9dGhpcy5fY29uc3RyYWluZWRWYWx1ZSgpLHRoaXMuZWxlbWVudC5hdHRyKHtyb2xlOiJwcm9ncmVzc2JhciIsImFyaWEtdmFsdWVtaW4iOnRoaXMubWlufSksdGhpcy5fYWRkQ2xhc3MoInVpLXByb2dyZXNzYmFyIiwidWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IiksdGhpcy52YWx1ZURpdj10KCI8ZGl2PiIpLmFwcGVuZFRvKHRoaXMuZWxlbWVudCksdGhpcy5fYWRkQ2xhc3ModGhpcy52YWx1ZURpdiwidWktcHJvZ3Jlc3NiYXItdmFsdWUiLCJ1aS13aWRnZXQtaGVhZGVyIiksdGhpcy5fcmVmcmVzaFZhbHVlKCl9LF9kZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LnJlbW92ZUF0dHIoInJvbGUgYXJpYS12YWx1ZW1pbiBhcmlhLXZhbHVlbWF4IGFyaWEtdmFsdWVub3ciKSx0aGlzLnZhbHVlRGl2LnJlbW92ZSgpfSx2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwPT09dD90aGlzLm9wdGlvbnMudmFsdWU6KHRoaXMub3B0aW9ucy52YWx1ZT10aGlzLl9jb25zdHJhaW5lZFZhbHVlKHQpLHRoaXMuX3JlZnJlc2hWYWx1ZSgpLHZvaWQgMCl9LF9jb25zdHJhaW5lZFZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10JiYodD10aGlzLm9wdGlvbnMudmFsdWUpLHRoaXMuaW5kZXRlcm1pbmF0ZT10PT09ITEsIm51bWJlciIhPXR5cGVvZiB0JiYodD0wKSx0aGlzLmluZGV0ZXJtaW5hdGU/ITE6TWF0aC5taW4odGhpcy5vcHRpb25zLm1heCxNYXRoLm1heCh0aGlzLm1pbix0KSl9LF9zZXRPcHRpb25zOmZ1bmN0aW9uKHQpe3ZhciBlPXQudmFsdWU7ZGVsZXRlIHQudmFsdWUsdGhpcy5fc3VwZXIodCksdGhpcy5vcHRpb25zLnZhbHVlPXRoaXMuX2NvbnN0cmFpbmVkVmFsdWUoZSksdGhpcy5fcmVmcmVzaFZhbHVlKCl9LF9zZXRPcHRpb246ZnVuY3Rpb24odCxlKXsibWF4Ij09PXQmJihlPU1hdGgubWF4KHRoaXMubWluLGUpKSx0aGlzLl9zdXBlcih0LGUpfSxfc2V0T3B0aW9uRGlzYWJsZWQ6ZnVuY3Rpb24odCl7dGhpcy5fc3VwZXIodCksdGhpcy5lbGVtZW50LmF0dHIoImFyaWEtZGlzYWJsZWQiLHQpLHRoaXMuX3RvZ2dsZUNsYXNzKG51bGwsInVpLXN0YXRlLWRpc2FibGVkIiwhIXQpfSxfcGVyY2VudGFnZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmluZGV0ZXJtaW5hdGU/MTAwOjEwMCoodGhpcy5vcHRpb25zLnZhbHVlLXRoaXMubWluKS8odGhpcy5vcHRpb25zLm1heC10aGlzLm1pbil9LF9yZWZyZXNoVmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnMudmFsdWUsaT10aGlzLl9wZXJjZW50YWdlKCk7dGhpcy52YWx1ZURpdi50b2dnbGUodGhpcy5pbmRldGVybWluYXRlfHxlPnRoaXMubWluKS53aWR0aChpLnRvRml4ZWQoMCkrIiUiKSx0aGlzLl90b2dnbGVDbGFzcyh0aGlzLnZhbHVlRGl2LCJ1aS1wcm9ncmVzc2Jhci1jb21wbGV0ZSIsbnVsbCxlPT09dGhpcy5vcHRpb25zLm1heCkuX3RvZ2dsZUNsYXNzKCJ1aS1wcm9ncmVzc2Jhci1pbmRldGVybWluYXRlIixudWxsLHRoaXMuaW5kZXRlcm1pbmF0ZSksdGhpcy5pbmRldGVybWluYXRlPyh0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cigiYXJpYS12YWx1ZW5vdyIpLHRoaXMub3ZlcmxheURpdnx8KHRoaXMub3ZlcmxheURpdj10KCI8ZGl2PiIpLmFwcGVuZFRvKHRoaXMudmFsdWVEaXYpLHRoaXMuX2FkZENsYXNzKHRoaXMub3ZlcmxheURpdiwidWktcHJvZ3Jlc3NiYXItb3ZlcmxheSIpKSk6KHRoaXMuZWxlbWVudC5hdHRyKHsiYXJpYS12YWx1ZW1heCI6dGhpcy5vcHRpb25zLm1heCwiYXJpYS12YWx1ZW5vdyI6ZX0pLHRoaXMub3ZlcmxheURpdiYmKHRoaXMub3ZlcmxheURpdi5yZW1vdmUoKSx0aGlzLm92ZXJsYXlEaXY9bnVsbCkpLHRoaXMub2xkVmFsdWUhPT1lJiYodGhpcy5vbGRWYWx1ZT1lLHRoaXMuX3RyaWdnZXIoImNoYW5nZSIpKSxlPT09dGhpcy5vcHRpb25zLm1heCYmdGhpcy5fdHJpZ2dlcigiY29tcGxldGUiKX19KSx0LndpZGdldCgidWkuc2VsZWN0YWJsZSIsdC51aS5tb3VzZSx7dmVyc2lvbjoiMS4xMi4xIixvcHRpb25zOnthcHBlbmRUbzoiYm9keSIsYXV0b1JlZnJlc2g6ITAsZGlzdGFuY2U6MCxmaWx0ZXI6IioiLHRvbGVyYW5jZToidG91Y2giLHNlbGVjdGVkOm51bGwsc2VsZWN0aW5nOm51bGwsc3RhcnQ6bnVsbCxzdG9wOm51bGwsdW5zZWxlY3RlZDpudWxsLHVuc2VsZWN0aW5nOm51bGx9LF9jcmVhdGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuX2FkZENsYXNzKCJ1aS1zZWxlY3RhYmxlIiksdGhpcy5kcmFnZ2VkPSExLHRoaXMucmVmcmVzaD1mdW5jdGlvbigpe2UuZWxlbWVudFBvcz10KGUuZWxlbWVudFswXSkub2Zmc2V0KCksZS5zZWxlY3RlZXM9dChlLm9wdGlvbnMuZmlsdGVyLGUuZWxlbWVudFswXSksZS5fYWRkQ2xhc3MoZS5zZWxlY3RlZXMsInVpLXNlbGVjdGVlIiksZS5zZWxlY3RlZXMuZWFjaChmdW5jdGlvbigpe3ZhciBpPXQodGhpcykscz1pLm9mZnNldCgpLG49e2xlZnQ6cy5sZWZ0LWUuZWxlbWVudFBvcy5sZWZ0LHRvcDpzLnRvcC1lLmVsZW1lbnRQb3MudG9wfTt0LmRhdGEodGhpcywic2VsZWN0YWJsZS1pdGVtIix7ZWxlbWVudDp0aGlzLCRlbGVtZW50OmksbGVmdDpuLmxlZnQsdG9wOm4udG9wLHJpZ2h0Om4ubGVmdCtpLm91dGVyV2lkdGgoKSxib3R0b206bi50b3AraS5vdXRlckhlaWdodCgpLHN0YXJ0c2VsZWN0ZWQ6ITEsc2VsZWN0ZWQ6aS5oYXNDbGFzcygidWktc2VsZWN0ZWQiKSxzZWxlY3Rpbmc6aS5oYXNDbGFzcygidWktc2VsZWN0aW5nIiksdW5zZWxlY3Rpbmc6aS5oYXNDbGFzcygidWktdW5zZWxlY3RpbmciKX0pfSl9LHRoaXMucmVmcmVzaCgpLHRoaXMuX21vdXNlSW5pdCgpLHRoaXMuaGVscGVyPXQoIjxkaXY+IiksdGhpcy5fYWRkQ2xhc3ModGhpcy5oZWxwZXIsInVpLXNlbGVjdGFibGUtaGVscGVyIil9LF9kZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5zZWxlY3RlZXMucmVtb3ZlRGF0YSgic2VsZWN0YWJsZS1pdGVtIiksdGhpcy5fbW91c2VEZXN0cm95KCl9LF9tb3VzZVN0YXJ0OmZ1bmN0aW9uKGUpe3ZhciBpPXRoaXMscz10aGlzLm9wdGlvbnM7dGhpcy5vcG9zPVtlLnBhZ2VYLGUucGFnZVldLHRoaXMuZWxlbWVudFBvcz10KHRoaXMuZWxlbWVudFswXSkub2Zmc2V0KCksdGhpcy5vcHRpb25zLmRpc2FibGVkfHwodGhpcy5zZWxlY3RlZXM9dChzLmZpbHRlcix0aGlzLmVsZW1lbnRbMF0pLHRoaXMuX3RyaWdnZXIoInN0YXJ0IixlKSx0KHMuYXBwZW5kVG8pLmFwcGVuZCh0aGlzLmhlbHBlciksdGhpcy5oZWxwZXIuY3NzKHtsZWZ0OmUucGFnZVgsdG9wOmUucGFnZVksd2lkdGg6MCxoZWlnaHQ6MH0pLHMuYXV0b1JlZnJlc2gmJnRoaXMucmVmcmVzaCgpLHRoaXMuc2VsZWN0ZWVzLmZpbHRlcigiLnVpLXNlbGVjdGVkIikuZWFjaChmdW5jdGlvbigpe3ZhciBzPXQuZGF0YSh0aGlzLCJzZWxlY3RhYmxlLWl0ZW0iKTtzLnN0YXJ0c2VsZWN0ZWQ9ITAsZS5tZXRhS2V5fHxlLmN0cmxLZXl8fChpLl9yZW1vdmVDbGFzcyhzLiRlbGVtZW50LCJ1aS1zZWxlY3RlZCIpLHMuc2VsZWN0ZWQ9ITEsaS5fYWRkQ2xhc3Mocy4kZWxlbWVudCwidWktdW5zZWxlY3RpbmciKSxzLnVuc2VsZWN0aW5nPSEwLGkuX3RyaWdnZXIoInVuc2VsZWN0aW5nIixlLHt1bnNlbGVjdGluZzpzLmVsZW1lbnR9KSl9KSx0KGUudGFyZ2V0KS5wYXJlbnRzKCkuYWRkQmFjaygpLmVhY2goZnVuY3Rpb24oKXt2YXIgcyxuPXQuZGF0YSh0aGlzLCJzZWxlY3RhYmxlLWl0ZW0iKTtyZXR1cm4gbj8ocz0hZS5tZXRhS2V5JiYhZS5jdHJsS2V5fHwhbi4kZWxlbWVudC5oYXNDbGFzcygidWktc2VsZWN0ZWQiKSxpLl9yZW1vdmVDbGFzcyhuLiRlbGVtZW50LHM/InVpLXVuc2VsZWN0aW5nIjoidWktc2VsZWN0ZWQiKS5fYWRkQ2xhc3Mobi4kZWxlbWVudCxzPyJ1aS1zZWxlY3RpbmciOiJ1aS11bnNlbGVjdGluZyIpLG4udW5zZWxlY3Rpbmc9IXMsbi5zZWxlY3Rpbmc9cyxuLnNlbGVjdGVkPXMscz9pLl90cmlnZ2VyKCJzZWxlY3RpbmciLGUse3NlbGVjdGluZzpuLmVsZW1lbnR9KTppLl90cmlnZ2VyKCJ1bnNlbGVjdGluZyIsZSx7dW5zZWxlY3Rpbmc6bi5lbGVtZW50fSksITEpOnZvaWQgMH0pKX0sX21vdXNlRHJhZzpmdW5jdGlvbihlKXtpZih0aGlzLmRyYWdnZWQ9ITAsIXRoaXMub3B0aW9ucy5kaXNhYmxlZCl7dmFyIGkscz10aGlzLG49dGhpcy5vcHRpb25zLG89dGhpcy5vcG9zWzBdLGE9dGhpcy5vcG9zWzFdLHI9ZS5wYWdlWCxoPWUucGFnZVk7cmV0dXJuIG8+ciYmKGk9cixyPW8sbz1pKSxhPmgmJihpPWgsaD1hLGE9aSksdGhpcy5oZWxwZXIuY3NzKHtsZWZ0Om8sdG9wOmEsd2lkdGg6ci1vLGhlaWdodDpoLWF9KSx0aGlzLnNlbGVjdGVlcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGk9dC5kYXRhKHRoaXMsInNlbGVjdGFibGUtaXRlbSIpLGw9ITEsYz17fTtpJiZpLmVsZW1lbnQhPT1zLmVsZW1lbnRbMF0mJihjLmxlZnQ9aS5sZWZ0K3MuZWxlbWVudFBvcy5sZWZ0LGMucmlnaHQ9aS5yaWdodCtzLmVsZW1lbnRQb3MubGVmdCxjLnRvcD1pLnRvcCtzLmVsZW1lbnRQb3MudG9wLGMuYm90dG9tPWkuYm90dG9tK3MuZWxlbWVudFBvcy50b3AsInRvdWNoIj09PW4udG9sZXJhbmNlP2w9IShjLmxlZnQ+cnx8bz5jLnJpZ2h0fHxjLnRvcD5ofHxhPmMuYm90dG9tKToiZml0Ij09PW4udG9sZXJhbmNlJiYobD1jLmxlZnQ+byYmcj5jLnJpZ2h0JiZjLnRvcD5hJiZoPmMuYm90dG9tKSxsPyhpLnNlbGVjdGVkJiYocy5fcmVtb3ZlQ2xhc3MoaS4kZWxlbWVudCwidWktc2VsZWN0ZWQiKSxpLnNlbGVjdGVkPSExKSxpLnVuc2VsZWN0aW5nJiYocy5fcmVtb3ZlQ2xhc3MoaS4kZWxlbWVudCwidWktdW5zZWxlY3RpbmciKSxpLnVuc2VsZWN0aW5nPSExKSxpLnNlbGVjdGluZ3x8KHMuX2FkZENsYXNzKGkuJGVsZW1lbnQsInVpLXNlbGVjdGluZyIpLGkuc2VsZWN0aW5nPSEwLHMuX3RyaWdnZXIoInNlbGVjdGluZyIsZSx7c2VsZWN0aW5nOmkuZWxlbWVudH0pKSk6KGkuc2VsZWN0aW5nJiYoKGUubWV0YUtleXx8ZS5jdHJsS2V5KSYmaS5zdGFydHNlbGVjdGVkPyhzLl9yZW1vdmVDbGFzcyhpLiRlbGVtZW50LCJ1aS1zZWxlY3RpbmciKSxpLnNlbGVjdGluZz0hMSxzLl9hZGRDbGFzcyhpLiRlbGVtZW50LCJ1aS1zZWxlY3RlZCIpLGkuc2VsZWN0ZWQ9ITApOihzLl9yZW1vdmVDbGFzcyhpLiRlbGVtZW50LCJ1aS1zZWxlY3RpbmciKSxpLnNlbGVjdGluZz0hMSxpLnN0YXJ0c2VsZWN0ZWQmJihzLl9hZGRDbGFzcyhpLiRlbGVtZW50LCJ1aS11bnNlbGVjdGluZyIpLGkudW5zZWxlY3Rpbmc9ITApLHMuX3RyaWdnZXIoInVuc2VsZWN0aW5nIixlLHt1bnNlbGVjdGluZzppLmVsZW1lbnR9KSkpLGkuc2VsZWN0ZWQmJihlLm1ldGFLZXl8fGUuY3RybEtleXx8aS5zdGFydHNlbGVjdGVkfHwocy5fcmVtb3ZlQ2xhc3MoaS4kZWxlbWVudCwidWktc2VsZWN0ZWQiKSxpLnNlbGVjdGVkPSExLHMuX2FkZENsYXNzKGkuJGVsZW1lbnQsInVpLXVuc2VsZWN0aW5nIiksaS51bnNlbGVjdGluZz0hMCxzLl90cmlnZ2VyKCJ1bnNlbGVjdGluZyIsZSx7dW5zZWxlY3Rpbmc6aS5lbGVtZW50fSkpKSkpfSksITF9fSxfbW91c2VTdG9wOmZ1bmN0aW9uKGUpe3ZhciBpPXRoaXM7cmV0dXJuIHRoaXMuZHJhZ2dlZD0hMSx0KCIudWktdW5zZWxlY3RpbmciLHRoaXMuZWxlbWVudFswXSkuZWFjaChmdW5jdGlvbigpe3ZhciBzPXQuZGF0YSh0aGlzLCJzZWxlY3RhYmxlLWl0ZW0iKTtpLl9yZW1vdmVDbGFzcyhzLiRlbGVtZW50LCJ1aS11bnNlbGVjdGluZyIpLHMudW5zZWxlY3Rpbmc9ITEscy5zdGFydHNlbGVjdGVkPSExLGkuX3RyaWdnZXIoInVuc2VsZWN0ZWQiLGUse3Vuc2VsZWN0ZWQ6cy5lbGVtZW50fSl9KSx0KCIudWktc2VsZWN0aW5nIix0aGlzLmVsZW1lbnRbMF0pLmVhY2goZnVuY3Rpb24oKXt2YXIgcz10LmRhdGEodGhpcywic2VsZWN0YWJsZS1pdGVtIik7aS5fcmVtb3ZlQ2xhc3Mocy4kZWxlbWVudCwidWktc2VsZWN0aW5nIikuX2FkZENsYXNzKHMuJGVsZW1lbnQsInVpLXNlbGVjdGVkIikscy5zZWxlY3Rpbmc9ITEscy5zZWxlY3RlZD0hMCxzLnN0YXJ0c2VsZWN0ZWQ9ITAsaS5fdHJpZ2dlcigic2VsZWN0ZWQiLGUse3NlbGVjdGVkOnMuZWxlbWVudH0pfSksdGhpcy5fdHJpZ2dlcigic3RvcCIsZSksdGhpcy5oZWxwZXIucmVtb3ZlKCksITF9fSksdC53aWRnZXQoInVpLnNlbGVjdG1lbnUiLFt0LnVpLmZvcm1SZXNldE1peGluLHt2ZXJzaW9uOiIxLjEyLjEiLGRlZmF1bHRFbGVtZW50OiI8c2VsZWN0PiIsb3B0aW9uczp7YXBwZW5kVG86bnVsbCxjbGFzc2VzOnsidWktc2VsZWN0bWVudS1idXR0b24tb3BlbiI6InVpLWNvcm5lci10b3AiLCJ1aS1zZWxlY3RtZW51LWJ1dHRvbi1jbG9zZWQiOiJ1aS1jb3JuZXItYWxsIn0sZGlzYWJsZWQ6bnVsbCxpY29uczp7YnV0dG9uOiJ1aS1pY29uLXRyaWFuZ2xlLTEtcyJ9LHBvc2l0aW9uOntteToibGVmdCB0b3AiLGF0OiJsZWZ0IGJvdHRvbSIsY29sbGlzaW9uOiJub25lIn0sd2lkdGg6ITEsY2hhbmdlOm51bGwsY2xvc2U6bnVsbCxmb2N1czpudWxsLG9wZW46bnVsbCxzZWxlY3Q6bnVsbH0sX2NyZWF0ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZWxlbWVudC51bmlxdWVJZCgpLmF0dHIoImlkIik7dGhpcy5pZHM9e2VsZW1lbnQ6ZSxidXR0b246ZSsiLWJ1dHRvbiIsbWVudTplKyItbWVudSJ9LHRoaXMuX2RyYXdCdXR0b24oKSx0aGlzLl9kcmF3TWVudSgpLHRoaXMuX2JpbmRGb3JtUmVzZXRIYW5kbGVyKCksdGhpcy5fcmVuZGVyZWQ9ITEsdGhpcy5tZW51SXRlbXM9dCgpfSxfZHJhd0J1dHRvbjpmdW5jdGlvbigpe3ZhciBlLGk9dGhpcyxzPXRoaXMuX3BhcnNlT3B0aW9uKHRoaXMuZWxlbWVudC5maW5kKCJvcHRpb246c2VsZWN0ZWQiKSx0aGlzLmVsZW1lbnRbMF0uc2VsZWN0ZWRJbmRleCk7dGhpcy5sYWJlbHM9dGhpcy5lbGVtZW50LmxhYmVscygpLmF0dHIoImZvciIsdGhpcy5pZHMuYnV0dG9uKSx0aGlzLl9vbih0aGlzLmxhYmVscyx7Y2xpY2s6ZnVuY3Rpb24odCl7dGhpcy5idXR0b24uZm9jdXMoKSx0LnByZXZlbnREZWZhdWx0KCl9fSksdGhpcy5lbGVtZW50LmhpZGUoKSx0aGlzLmJ1dHRvbj10KCI8c3Bhbj4iLHt0YWJpbmRleDp0aGlzLm9wdGlvbnMuZGlzYWJsZWQ/LTE6MCxpZDp0aGlzLmlkcy5idXR0b24scm9sZToiY29tYm9ib3giLCJhcmlhLWV4cGFuZGVkIjoiZmFsc2UiLCJhcmlhLWF1dG9jb21wbGV0ZSI6Imxpc3QiLCJhcmlhLW93bnMiOnRoaXMuaWRzLm1lbnUsImFyaWEtaGFzcG9wdXAiOiJ0cnVlIix0aXRsZTp0aGlzLmVsZW1lbnQuYXR0cigidGl0bGUiKX0pLmluc2VydEFmdGVyKHRoaXMuZWxlbWVudCksdGhpcy5fYWRkQ2xhc3ModGhpcy5idXR0b24sInVpLXNlbGVjdG1lbnUtYnV0dG9uIHVpLXNlbGVjdG1lbnUtYnV0dG9uLWNsb3NlZCIsInVpLWJ1dHRvbiB1aS13aWRnZXQiKSxlPXQoIjxzcGFuPiIpLmFwcGVuZFRvKHRoaXMuYnV0dG9uKSx0aGlzLl9hZGRDbGFzcyhlLCJ1aS1zZWxlY3RtZW51LWljb24iLCJ1aS1pY29uICIrdGhpcy5vcHRpb25zLmljb25zLmJ1dHRvbiksdGhpcy5idXR0b25JdGVtPXRoaXMuX3JlbmRlckJ1dHRvbkl0ZW0ocykuYXBwZW5kVG8odGhpcy5idXR0b24pLHRoaXMub3B0aW9ucy53aWR0aCE9PSExJiZ0aGlzLl9yZXNpemVCdXR0b24oKSx0aGlzLl9vbih0aGlzLmJ1dHRvbix0aGlzLl9idXR0b25FdmVudHMpLHRoaXMuYnV0dG9uLm9uZSgiZm9jdXNpbiIsZnVuY3Rpb24oKXtpLl9yZW5kZXJlZHx8aS5fcmVmcmVzaE1lbnUoKX0pfSxfZHJhd01lbnU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMubWVudT10KCI8dWw+Iix7ImFyaWEtaGlkZGVuIjoidHJ1ZSIsImFyaWEtbGFiZWxsZWRieSI6dGhpcy5pZHMuYnV0dG9uLGlkOnRoaXMuaWRzLm1lbnV9KSx0aGlzLm1lbnVXcmFwPXQoIjxkaXY+IikuYXBwZW5kKHRoaXMubWVudSksdGhpcy5fYWRkQ2xhc3ModGhpcy5tZW51V3JhcCwidWktc2VsZWN0bWVudS1tZW51IiwidWktZnJvbnQiKSx0aGlzLm1lbnVXcmFwLmFwcGVuZFRvKHRoaXMuX2FwcGVuZFRvKCkpLHRoaXMubWVudUluc3RhbmNlPXRoaXMubWVudS5tZW51KHtjbGFzc2VzOnsidWktbWVudSI6InVpLWNvcm5lci1ib3R0b20ifSxyb2xlOiJsaXN0Ym94IixzZWxlY3Q6ZnVuY3Rpb24odCxpKXt0LnByZXZlbnREZWZhdWx0KCksZS5fc2V0U2VsZWN0aW9uKCksZS5fc2VsZWN0KGkuaXRlbS5kYXRhKCJ1aS1zZWxlY3RtZW51LWl0ZW0iKSx0KX0sZm9jdXM6ZnVuY3Rpb24odCxpKXt2YXIgcz1pLml0ZW0uZGF0YSgidWktc2VsZWN0bWVudS1pdGVtIik7bnVsbCE9ZS5mb2N1c0luZGV4JiZzLmluZGV4IT09ZS5mb2N1c0luZGV4JiYoZS5fdHJpZ2dlcigiZm9jdXMiLHQse2l0ZW06c30pLGUuaXNPcGVufHxlLl9zZWxlY3Qocyx0KSksZS5mb2N1c0luZGV4PXMuaW5kZXgsZS5idXR0b24uYXR0cigiYXJpYS1hY3RpdmVkZXNjZW5kYW50IixlLm1lbnVJdGVtcy5lcShzLmluZGV4KS5hdHRyKCJpZCIpKX19KS5tZW51KCJpbnN0YW5jZSIpLHRoaXMubWVudUluc3RhbmNlLl9vZmYodGhpcy5tZW51LCJtb3VzZWxlYXZlIiksdGhpcy5tZW51SW5zdGFuY2UuX2Nsb3NlT25Eb2N1bWVudENsaWNrPWZ1bmN0aW9uKCl7cmV0dXJuITF9LHRoaXMubWVudUluc3RhbmNlLl9pc0RpdmlkZXI9ZnVuY3Rpb24oKXtyZXR1cm4hMX19LHJlZnJlc2g6ZnVuY3Rpb24oKXt0aGlzLl9yZWZyZXNoTWVudSgpLHRoaXMuYnV0dG9uSXRlbS5yZXBsYWNlV2l0aCh0aGlzLmJ1dHRvbkl0ZW09dGhpcy5fcmVuZGVyQnV0dG9uSXRlbSh0aGlzLl9nZXRTZWxlY3RlZEl0ZW0oKS5kYXRhKCJ1aS1zZWxlY3RtZW51LWl0ZW0iKXx8e30pKSxudWxsPT09dGhpcy5vcHRpb25zLndpZHRoJiZ0aGlzLl9yZXNpemVCdXR0b24oKX0sX3JlZnJlc2hNZW51OmZ1bmN0aW9uKCl7dmFyIHQsZT10aGlzLmVsZW1lbnQuZmluZCgib3B0aW9uIik7dGhpcy5tZW51LmVtcHR5KCksdGhpcy5fcGFyc2VPcHRpb25zKGUpLHRoaXMuX3JlbmRlck1lbnUodGhpcy5tZW51LHRoaXMuaXRlbXMpLHRoaXMubWVudUluc3RhbmNlLnJlZnJlc2goKSx0aGlzLm1lbnVJdGVtcz10aGlzLm1lbnUuZmluZCgibGkiKS5ub3QoIi51aS1zZWxlY3RtZW51LW9wdGdyb3VwIikuZmluZCgiLnVpLW1lbnUtaXRlbS13cmFwcGVyIiksdGhpcy5fcmVuZGVyZWQ9ITAsZS5sZW5ndGgmJih0PXRoaXMuX2dldFNlbGVjdGVkSXRlbSgpLHRoaXMubWVudUluc3RhbmNlLmZvY3VzKG51bGwsdCksdGhpcy5fc2V0QXJpYSh0LmRhdGEoInVpLXNlbGVjdG1lbnUtaXRlbSIpKSx0aGlzLl9zZXRPcHRpb24oImRpc2FibGVkIix0aGlzLmVsZW1lbnQucHJvcCgiZGlzYWJsZWQiKSkpfSxvcGVuOmZ1bmN0aW9uKHQpe3RoaXMub3B0aW9ucy5kaXNhYmxlZHx8KHRoaXMuX3JlbmRlcmVkPyh0aGlzLl9yZW1vdmVDbGFzcyh0aGlzLm1lbnUuZmluZCgiLnVpLXN0YXRlLWFjdGl2ZSIpLG51bGwsInVpLXN0YXRlLWFjdGl2ZSIpLHRoaXMubWVudUluc3RhbmNlLmZvY3VzKG51bGwsdGhpcy5fZ2V0U2VsZWN0ZWRJdGVtKCkpKTp0aGlzLl9yZWZyZXNoTWVudSgpLHRoaXMubWVudUl0ZW1zLmxlbmd0aCYmKHRoaXMuaXNPcGVuPSEwLHRoaXMuX3RvZ2dsZUF0dHIoKSx0aGlzLl9yZXNpemVNZW51KCksdGhpcy5fcG9zaXRpb24oKSx0aGlzLl9vbih0aGlzLmRvY3VtZW50LHRoaXMuX2RvY3VtZW50Q2xpY2spLHRoaXMuX3RyaWdnZXIoIm9wZW4iLHQpKSl9LF9wb3NpdGlvbjpmdW5jdGlvbigpe3RoaXMubWVudVdyYXAucG9zaXRpb24odC5leHRlbmQoe29mOnRoaXMuYnV0dG9ufSx0aGlzLm9wdGlvbnMucG9zaXRpb24pKX0sY2xvc2U6ZnVuY3Rpb24odCl7dGhpcy5pc09wZW4mJih0aGlzLmlzT3Blbj0hMSx0aGlzLl90b2dnbGVBdHRyKCksdGhpcy5yYW5nZT1udWxsLHRoaXMuX29mZih0aGlzLmRvY3VtZW50KSx0aGlzLl90cmlnZ2VyKCJjbG9zZSIsdCkpfSx3aWRnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5idXR0b259LG1lbnVXaWRnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tZW51fSxfcmVuZGVyQnV0dG9uSXRlbTpmdW5jdGlvbihlKXt2YXIgaT10KCI8c3Bhbj4iKTtyZXR1cm4gdGhpcy5fc2V0VGV4dChpLGUubGFiZWwpLHRoaXMuX2FkZENsYXNzKGksInVpLXNlbGVjdG1lbnUtdGV4dCIpLGl9LF9yZW5kZXJNZW51OmZ1bmN0aW9uKGUsaSl7dmFyIHM9dGhpcyxuPSIiO3QuZWFjaChpLGZ1bmN0aW9uKGksbyl7dmFyIGE7by5vcHRncm91cCE9PW4mJihhPXQoIjxsaT4iLHt0ZXh0Om8ub3B0Z3JvdXB9KSxzLl9hZGRDbGFzcyhhLCJ1aS1zZWxlY3RtZW51LW9wdGdyb3VwIiwidWktbWVudS1kaXZpZGVyIisoby5lbGVtZW50LnBhcmVudCgib3B0Z3JvdXAiKS5wcm9wKCJkaXNhYmxlZCIpPyIgdWktc3RhdGUtZGlzYWJsZWQiOiIiKSksYS5hcHBlbmRUbyhlKSxuPW8ub3B0Z3JvdXApLHMuX3JlbmRlckl0ZW1EYXRhKGUsbyl9KX0sX3JlbmRlckl0ZW1EYXRhOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuX3JlbmRlckl0ZW0odCxlKS5kYXRhKCJ1aS1zZWxlY3RtZW51LWl0ZW0iLGUpfSxfcmVuZGVySXRlbTpmdW5jdGlvbihlLGkpe3ZhciBzPXQoIjxsaT4iKSxuPXQoIjxkaXY+Iix7dGl0bGU6aS5lbGVtZW50LmF0dHIoInRpdGxlIil9KTtyZXR1cm4gaS5kaXNhYmxlZCYmdGhpcy5fYWRkQ2xhc3MocyxudWxsLCJ1aS1zdGF0ZS1kaXNhYmxlZCIpLHRoaXMuX3NldFRleHQobixpLmxhYmVsKSxzLmFwcGVuZChuKS5hcHBlbmRUbyhlKX0sX3NldFRleHQ6ZnVuY3Rpb24odCxlKXtlP3QudGV4dChlKTp0Lmh0bWwoIiYjMTYwOyIpfSxfbW92ZTpmdW5jdGlvbih0LGUpe3ZhciBpLHMsbj0iLnVpLW1lbnUtaXRlbSI7dGhpcy5pc09wZW4/aT10aGlzLm1lbnVJdGVtcy5lcSh0aGlzLmZvY3VzSW5kZXgpLnBhcmVudCgibGkiKTooaT10aGlzLm1lbnVJdGVtcy5lcSh0aGlzLmVsZW1lbnRbMF0uc2VsZWN0ZWRJbmRleCkucGFyZW50KCJsaSIpLG4rPSI6bm90KC51aS1zdGF0ZS1kaXNhYmxlZCkiKSxzPSJmaXJzdCI9PT10fHwibGFzdCI9PT10P2lbImZpcnN0Ij09PXQ/InByZXZBbGwiOiJuZXh0QWxsIl0obikuZXEoLTEpOmlbdCsiQWxsIl0obikuZXEoMCkscy5sZW5ndGgmJnRoaXMubWVudUluc3RhbmNlLmZvY3VzKGUscyl9LF9nZXRTZWxlY3RlZEl0ZW06ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tZW51SXRlbXMuZXEodGhpcy5lbGVtZW50WzBdLnNlbGVjdGVkSW5kZXgpLnBhcmVudCgibGkiKX0sX3RvZ2dsZTpmdW5jdGlvbih0KXt0aGlzW3RoaXMuaXNPcGVuPyJjbG9zZSI6Im9wZW4iXSh0KX0sX3NldFNlbGVjdGlvbjpmdW5jdGlvbigpe3ZhciB0O3RoaXMucmFuZ2UmJih3aW5kb3cuZ2V0U2VsZWN0aW9uPyh0PXdpbmRvdy5nZXRTZWxlY3Rpb24oKSx0LnJlbW92ZUFsbFJhbmdlcygpLHQuYWRkUmFuZ2UodGhpcy5yYW5nZSkpOnRoaXMucmFuZ2Uuc2VsZWN0KCksdGhpcy5idXR0b24uZm9jdXMoKSl9LF9kb2N1bWVudENsaWNrOnttb3VzZWRvd246ZnVuY3Rpb24oZSl7dGhpcy5pc09wZW4mJih0KGUudGFyZ2V0KS5jbG9zZXN0KCIudWktc2VsZWN0bWVudS1tZW51LCAjIit0LnVpLmVzY2FwZVNlbGVjdG9yKHRoaXMuaWRzLmJ1dHRvbikpLmxlbmd0aHx8dGhpcy5jbG9zZShlKSl9fSxfYnV0dG9uRXZlbnRzOnttb3VzZWRvd246ZnVuY3Rpb24oKXt2YXIgdDt3aW5kb3cuZ2V0U2VsZWN0aW9uPyh0PXdpbmRvdy5nZXRTZWxlY3Rpb24oKSx0LnJhbmdlQ291bnQmJih0aGlzLnJhbmdlPXQuZ2V0UmFuZ2VBdCgwKSkpOnRoaXMucmFuZ2U9ZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCl9LGNsaWNrOmZ1bmN0aW9uKHQpe3RoaXMuX3NldFNlbGVjdGlvbigpLHRoaXMuX3RvZ2dsZSh0KX0sa2V5ZG93bjpmdW5jdGlvbihlKXt2YXIgaT0hMDtzd2l0Y2goZS5rZXlDb2RlKXtjYXNlIHQudWkua2V5Q29kZS5UQUI6Y2FzZSB0LnVpLmtleUNvZGUuRVNDQVBFOnRoaXMuY2xvc2UoZSksaT0hMTticmVhaztjYXNlIHQudWkua2V5Q29kZS5FTlRFUjp0aGlzLmlzT3BlbiYmdGhpcy5fc2VsZWN0Rm9jdXNlZEl0ZW0oZSk7YnJlYWs7Y2FzZSB0LnVpLmtleUNvZGUuVVA6ZS5hbHRLZXk/dGhpcy5fdG9nZ2xlKGUpOnRoaXMuX21vdmUoInByZXYiLGUpO2JyZWFrO2Nhc2UgdC51aS5rZXlDb2RlLkRPV046ZS5hbHRLZXk/dGhpcy5fdG9nZ2xlKGUpOnRoaXMuX21vdmUoIm5leHQiLGUpO2JyZWFrO2Nhc2UgdC51aS5rZXlDb2RlLlNQQUNFOnRoaXMuaXNPcGVuP3RoaXMuX3NlbGVjdEZvY3VzZWRJdGVtKGUpOnRoaXMuX3RvZ2dsZShlKTticmVhaztjYXNlIHQudWkua2V5Q29kZS5MRUZUOnRoaXMuX21vdmUoInByZXYiLGUpO2JyZWFrO2Nhc2UgdC51aS5rZXlDb2RlLlJJR0hUOnRoaXMuX21vdmUoIm5leHQiLGUpO2JyZWFrO2Nhc2UgdC51aS5rZXlDb2RlLkhPTUU6Y2FzZSB0LnVpLmtleUNvZGUuUEFHRV9VUDp0aGlzLl9tb3ZlKCJmaXJzdCIsZSk7YnJlYWs7Y2FzZSB0LnVpLmtleUNvZGUuRU5EOmNhc2UgdC51aS5rZXlDb2RlLlBBR0VfRE9XTjp0aGlzLl9tb3ZlKCJsYXN0IixlKTticmVhaztkZWZhdWx0OnRoaXMubWVudS50cmlnZ2VyKGUpLGk9ITF9aSYmZS5wcmV2ZW50RGVmYXVsdCgpfX0sX3NlbGVjdEZvY3VzZWRJdGVtOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubWVudUl0ZW1zLmVxKHRoaXMuZm9jdXNJbmRleCkucGFyZW50KCJsaSIpO2UuaGFzQ2xhc3MoInVpLXN0YXRlLWRpc2FibGVkIil8fHRoaXMuX3NlbGVjdChlLmRhdGEoInVpLXNlbGVjdG1lbnUtaXRlbSIpLHQpfSxfc2VsZWN0OmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5lbGVtZW50WzBdLnNlbGVjdGVkSW5kZXg7dGhpcy5lbGVtZW50WzBdLnNlbGVjdGVkSW5kZXg9dC5pbmRleCx0aGlzLmJ1dHRvbkl0ZW0ucmVwbGFjZVdpdGgodGhpcy5idXR0b25JdGVtPXRoaXMuX3JlbmRlckJ1dHRvbkl0ZW0odCkpLHRoaXMuX3NldEFyaWEodCksdGhpcy5fdHJpZ2dlcigic2VsZWN0IixlLHtpdGVtOnR9KSx0LmluZGV4IT09aSYmdGhpcy5fdHJpZ2dlcigiY2hhbmdlIixlLHtpdGVtOnR9KSx0aGlzLmNsb3NlKGUpfSxfc2V0QXJpYTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLm1lbnVJdGVtcy5lcSh0LmluZGV4KS5hdHRyKCJpZCIpO3RoaXMuYnV0dG9uLmF0dHIoeyJhcmlhLWxhYmVsbGVkYnkiOmUsImFyaWEtYWN0aXZlZGVzY2VuZGFudCI6ZX0pLHRoaXMubWVudS5hdHRyKCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnQiLGUpfSxfc2V0T3B0aW9uOmZ1bmN0aW9uKHQsZSl7aWYoImljb25zIj09PXQpe3ZhciBpPXRoaXMuYnV0dG9uLmZpbmQoInNwYW4udWktaWNvbiIpO3RoaXMuX3JlbW92ZUNsYXNzKGksbnVsbCx0aGlzLm9wdGlvbnMuaWNvbnMuYnV0dG9uKS5fYWRkQ2xhc3MoaSxudWxsLGUuYnV0dG9uKX10aGlzLl9zdXBlcih0LGUpLCJhcHBlbmRUbyI9PT10JiZ0aGlzLm1lbnVXcmFwLmFwcGVuZFRvKHRoaXMuX2FwcGVuZFRvKCkpLCJ3aWR0aCI9PT10JiZ0aGlzLl9yZXNpemVCdXR0b24oKX0sX3NldE9wdGlvbkRpc2FibGVkOmZ1bmN0aW9uKHQpe3RoaXMuX3N1cGVyKHQpLHRoaXMubWVudUluc3RhbmNlLm9wdGlvbigiZGlzYWJsZWQiLHQpLHRoaXMuYnV0dG9uLmF0dHIoImFyaWEtZGlzYWJsZWQiLHQpLHRoaXMuX3RvZ2dsZUNsYXNzKHRoaXMuYnV0dG9uLG51bGwsInVpLXN0YXRlLWRpc2FibGVkIix0KSx0aGlzLmVsZW1lbnQucHJvcCgiZGlzYWJsZWQiLHQpLHQ/KHRoaXMuYnV0dG9uLmF0dHIoInRhYmluZGV4IiwtMSksdGhpcy5jbG9zZSgpKTp0aGlzLmJ1dHRvbi5hdHRyKCJ0YWJpbmRleCIsMCl9LF9hcHBlbmRUbzpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucy5hcHBlbmRUbztyZXR1cm4gZSYmKGU9ZS5qcXVlcnl8fGUubm9kZVR5cGU/dChlKTp0aGlzLmRvY3VtZW50LmZpbmQoZSkuZXEoMCkpLGUmJmVbMF18fChlPXRoaXMuZWxlbWVudC5jbG9zZXN0KCIudWktZnJvbnQsIGRpYWxvZyIpKSxlLmxlbmd0aHx8KGU9dGhpcy5kb2N1bWVudFswXS5ib2R5KSxlfSxfdG9nZ2xlQXR0cjpmdW5jdGlvbigpe3RoaXMuYnV0dG9uLmF0dHIoImFyaWEtZXhwYW5kZWQiLHRoaXMuaXNPcGVuKSx0aGlzLl9yZW1vdmVDbGFzcyh0aGlzLmJ1dHRvbiwidWktc2VsZWN0bWVudS1idXR0b24tIisodGhpcy5pc09wZW4/ImNsb3NlZCI6Im9wZW4iKSkuX2FkZENsYXNzKHRoaXMuYnV0dG9uLCJ1aS1zZWxlY3RtZW51LWJ1dHRvbi0iKyh0aGlzLmlzT3Blbj8ib3BlbiI6ImNsb3NlZCIpKS5fdG9nZ2xlQ2xhc3ModGhpcy5tZW51V3JhcCwidWktc2VsZWN0bWVudS1vcGVuIixudWxsLHRoaXMuaXNPcGVuKSx0aGlzLm1lbnUuYXR0cigiYXJpYS1oaWRkZW4iLCF0aGlzLmlzT3Blbil9LF9yZXNpemVCdXR0b246ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMud2lkdGg7cmV0dXJuIHQ9PT0hMT8odGhpcy5idXR0b24uY3NzKCJ3aWR0aCIsIiIpLHZvaWQgMCk6KG51bGw9PT10JiYodD10aGlzLmVsZW1lbnQuc2hvdygpLm91dGVyV2lkdGgoKSx0aGlzLmVsZW1lbnQuaGlkZSgpKSx0aGlzLmJ1dHRvbi5vdXRlcldpZHRoKHQpLHZvaWQgMCl9LF9yZXNpemVNZW51OmZ1bmN0aW9uKCl7dGhpcy5tZW51Lm91dGVyV2lkdGgoTWF0aC5tYXgodGhpcy5idXR0b24ub3V0ZXJXaWR0aCgpLHRoaXMubWVudS53aWR0aCgiIikub3V0ZXJXaWR0aCgpKzEpKX0sX2dldENyZWF0ZU9wdGlvbnM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9zdXBlcigpO3JldHVybiB0LmRpc2FibGVkPXRoaXMuZWxlbWVudC5wcm9wKCJkaXNhYmxlZCIpLHR9LF9wYXJzZU9wdGlvbnM6ZnVuY3Rpb24oZSl7dmFyIGk9dGhpcyxzPVtdO2UuZWFjaChmdW5jdGlvbihlLG4pe3MucHVzaChpLl9wYXJzZU9wdGlvbih0KG4pLGUpKX0pLHRoaXMuaXRlbXM9c30sX3BhcnNlT3B0aW9uOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dC5wYXJlbnQoIm9wdGdyb3VwIik7cmV0dXJue2VsZW1lbnQ6dCxpbmRleDplLHZhbHVlOnQudmFsKCksbGFiZWw6dC50ZXh0KCksb3B0Z3JvdXA6aS5hdHRyKCJsYWJlbCIpfHwiIixkaXNhYmxlZDppLnByb3AoImRpc2FibGVkIil8fHQucHJvcCgiZGlzYWJsZWQiKX19LF9kZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5fdW5iaW5kRm9ybVJlc2V0SGFuZGxlcigpLHRoaXMubWVudVdyYXAucmVtb3ZlKCksdGhpcy5idXR0b24ucmVtb3ZlKCksdGhpcy5lbGVtZW50LnNob3coKSx0aGlzLmVsZW1lbnQucmVtb3ZlVW5pcXVlSWQoKSx0aGlzLmxhYmVscy5hdHRyKCJmb3IiLHRoaXMuaWRzLmVsZW1lbnQpfX1dKSx0LndpZGdldCgidWkuc2xpZGVyIix0LnVpLm1vdXNlLHt2ZXJzaW9uOiIxLjEyLjEiLHdpZGdldEV2ZW50UHJlZml4OiJzbGlkZSIsb3B0aW9uczp7YW5pbWF0ZTohMSxjbGFzc2VzOnsidWktc2xpZGVyIjoidWktY29ybmVyLWFsbCIsInVpLXNsaWRlci1oYW5kbGUiOiJ1aS1jb3JuZXItYWxsIiwidWktc2xpZGVyLXJhbmdlIjoidWktY29ybmVyLWFsbCB1aS13aWRnZXQtaGVhZGVyIn0sZGlzdGFuY2U6MCxtYXg6MTAwLG1pbjowLG9yaWVudGF0aW9uOiJob3Jpem9udGFsIixyYW5nZTohMSxzdGVwOjEsdmFsdWU6MCx2YWx1ZXM6bnVsbCxjaGFuZ2U6bnVsbCxzbGlkZTpudWxsLHN0YXJ0Om51bGwsc3RvcDpudWxsfSxudW1QYWdlczo1LF9jcmVhdGU6ZnVuY3Rpb24oKXt0aGlzLl9rZXlTbGlkaW5nPSExLHRoaXMuX21vdXNlU2xpZGluZz0hMSx0aGlzLl9hbmltYXRlT2ZmPSEwLHRoaXMuX2hhbmRsZUluZGV4PW51bGwsdGhpcy5fZGV0ZWN0T3JpZW50YXRpb24oKSx0aGlzLl9tb3VzZUluaXQoKSx0aGlzLl9jYWxjdWxhdGVOZXdNYXgoKSx0aGlzLl9hZGRDbGFzcygidWktc2xpZGVyIHVpLXNsaWRlci0iK3RoaXMub3JpZW50YXRpb24sInVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCIpLHRoaXMuX3JlZnJlc2goKSx0aGlzLl9hbmltYXRlT2ZmPSExCn0sX3JlZnJlc2g6ZnVuY3Rpb24oKXt0aGlzLl9jcmVhdGVSYW5nZSgpLHRoaXMuX2NyZWF0ZUhhbmRsZXMoKSx0aGlzLl9zZXR1cEV2ZW50cygpLHRoaXMuX3JlZnJlc2hWYWx1ZSgpfSxfY3JlYXRlSGFuZGxlczpmdW5jdGlvbigpe3ZhciBlLGkscz10aGlzLm9wdGlvbnMsbj10aGlzLmVsZW1lbnQuZmluZCgiLnVpLXNsaWRlci1oYW5kbGUiKSxvPSI8c3BhbiB0YWJpbmRleD0nMCc+PC9zcGFuPiIsYT1bXTtmb3IoaT1zLnZhbHVlcyYmcy52YWx1ZXMubGVuZ3RofHwxLG4ubGVuZ3RoPmkmJihuLnNsaWNlKGkpLnJlbW92ZSgpLG49bi5zbGljZSgwLGkpKSxlPW4ubGVuZ3RoO2k+ZTtlKyspYS5wdXNoKG8pO3RoaXMuaGFuZGxlcz1uLmFkZCh0KGEuam9pbigiIikpLmFwcGVuZFRvKHRoaXMuZWxlbWVudCkpLHRoaXMuX2FkZENsYXNzKHRoaXMuaGFuZGxlcywidWktc2xpZGVyLWhhbmRsZSIsInVpLXN0YXRlLWRlZmF1bHQiKSx0aGlzLmhhbmRsZT10aGlzLmhhbmRsZXMuZXEoMCksdGhpcy5oYW5kbGVzLmVhY2goZnVuY3Rpb24oZSl7dCh0aGlzKS5kYXRhKCJ1aS1zbGlkZXItaGFuZGxlLWluZGV4IixlKS5hdHRyKCJ0YWJJbmRleCIsMCl9KX0sX2NyZWF0ZVJhbmdlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zO2UucmFuZ2U/KGUucmFuZ2U9PT0hMCYmKGUudmFsdWVzP2UudmFsdWVzLmxlbmd0aCYmMiE9PWUudmFsdWVzLmxlbmd0aD9lLnZhbHVlcz1bZS52YWx1ZXNbMF0sZS52YWx1ZXNbMF1dOnQuaXNBcnJheShlLnZhbHVlcykmJihlLnZhbHVlcz1lLnZhbHVlcy5zbGljZSgwKSk6ZS52YWx1ZXM9W3RoaXMuX3ZhbHVlTWluKCksdGhpcy5fdmFsdWVNaW4oKV0pLHRoaXMucmFuZ2UmJnRoaXMucmFuZ2UubGVuZ3RoPyh0aGlzLl9yZW1vdmVDbGFzcyh0aGlzLnJhbmdlLCJ1aS1zbGlkZXItcmFuZ2UtbWluIHVpLXNsaWRlci1yYW5nZS1tYXgiKSx0aGlzLnJhbmdlLmNzcyh7bGVmdDoiIixib3R0b206IiJ9KSk6KHRoaXMucmFuZ2U9dCgiPGRpdj4iKS5hcHBlbmRUbyh0aGlzLmVsZW1lbnQpLHRoaXMuX2FkZENsYXNzKHRoaXMucmFuZ2UsInVpLXNsaWRlci1yYW5nZSIpKSwoIm1pbiI9PT1lLnJhbmdlfHwibWF4Ij09PWUucmFuZ2UpJiZ0aGlzLl9hZGRDbGFzcyh0aGlzLnJhbmdlLCJ1aS1zbGlkZXItcmFuZ2UtIitlLnJhbmdlKSk6KHRoaXMucmFuZ2UmJnRoaXMucmFuZ2UucmVtb3ZlKCksdGhpcy5yYW5nZT1udWxsKX0sX3NldHVwRXZlbnRzOmZ1bmN0aW9uKCl7dGhpcy5fb2ZmKHRoaXMuaGFuZGxlcyksdGhpcy5fb24odGhpcy5oYW5kbGVzLHRoaXMuX2hhbmRsZUV2ZW50cyksdGhpcy5faG92ZXJhYmxlKHRoaXMuaGFuZGxlcyksdGhpcy5fZm9jdXNhYmxlKHRoaXMuaGFuZGxlcyl9LF9kZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5oYW5kbGVzLnJlbW92ZSgpLHRoaXMucmFuZ2UmJnRoaXMucmFuZ2UucmVtb3ZlKCksdGhpcy5fbW91c2VEZXN0cm95KCl9LF9tb3VzZUNhcHR1cmU6ZnVuY3Rpb24oZSl7dmFyIGkscyxuLG8sYSxyLGgsbCxjPXRoaXMsdT10aGlzLm9wdGlvbnM7cmV0dXJuIHUuZGlzYWJsZWQ/ITE6KHRoaXMuZWxlbWVudFNpemU9e3dpZHRoOnRoaXMuZWxlbWVudC5vdXRlcldpZHRoKCksaGVpZ2h0OnRoaXMuZWxlbWVudC5vdXRlckhlaWdodCgpfSx0aGlzLmVsZW1lbnRPZmZzZXQ9dGhpcy5lbGVtZW50Lm9mZnNldCgpLGk9e3g6ZS5wYWdlWCx5OmUucGFnZVl9LHM9dGhpcy5fbm9ybVZhbHVlRnJvbU1vdXNlKGkpLG49dGhpcy5fdmFsdWVNYXgoKS10aGlzLl92YWx1ZU1pbigpKzEsdGhpcy5oYW5kbGVzLmVhY2goZnVuY3Rpb24oZSl7dmFyIGk9TWF0aC5hYnMocy1jLnZhbHVlcyhlKSk7KG4+aXx8bj09PWkmJihlPT09Yy5fbGFzdENoYW5nZWRWYWx1ZXx8Yy52YWx1ZXMoZSk9PT11Lm1pbikpJiYobj1pLG89dCh0aGlzKSxhPWUpfSkscj10aGlzLl9zdGFydChlLGEpLHI9PT0hMT8hMToodGhpcy5fbW91c2VTbGlkaW5nPSEwLHRoaXMuX2hhbmRsZUluZGV4PWEsdGhpcy5fYWRkQ2xhc3MobyxudWxsLCJ1aS1zdGF0ZS1hY3RpdmUiKSxvLnRyaWdnZXIoImZvY3VzIiksaD1vLm9mZnNldCgpLGw9IXQoZS50YXJnZXQpLnBhcmVudHMoKS5hZGRCYWNrKCkuaXMoIi51aS1zbGlkZXItaGFuZGxlIiksdGhpcy5fY2xpY2tPZmZzZXQ9bD97bGVmdDowLHRvcDowfTp7bGVmdDplLnBhZ2VYLWgubGVmdC1vLndpZHRoKCkvMix0b3A6ZS5wYWdlWS1oLnRvcC1vLmhlaWdodCgpLzItKHBhcnNlSW50KG8uY3NzKCJib3JkZXJUb3BXaWR0aCIpLDEwKXx8MCktKHBhcnNlSW50KG8uY3NzKCJib3JkZXJCb3R0b21XaWR0aCIpLDEwKXx8MCkrKHBhcnNlSW50KG8uY3NzKCJtYXJnaW5Ub3AiKSwxMCl8fDApfSx0aGlzLmhhbmRsZXMuaGFzQ2xhc3MoInVpLXN0YXRlLWhvdmVyIil8fHRoaXMuX3NsaWRlKGUsYSxzKSx0aGlzLl9hbmltYXRlT2ZmPSEwLCEwKSl9LF9tb3VzZVN0YXJ0OmZ1bmN0aW9uKCl7cmV0dXJuITB9LF9tb3VzZURyYWc6ZnVuY3Rpb24odCl7dmFyIGU9e3g6dC5wYWdlWCx5OnQucGFnZVl9LGk9dGhpcy5fbm9ybVZhbHVlRnJvbU1vdXNlKGUpO3JldHVybiB0aGlzLl9zbGlkZSh0LHRoaXMuX2hhbmRsZUluZGV4LGkpLCExfSxfbW91c2VTdG9wOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9yZW1vdmVDbGFzcyh0aGlzLmhhbmRsZXMsbnVsbCwidWktc3RhdGUtYWN0aXZlIiksdGhpcy5fbW91c2VTbGlkaW5nPSExLHRoaXMuX3N0b3AodCx0aGlzLl9oYW5kbGVJbmRleCksdGhpcy5fY2hhbmdlKHQsdGhpcy5faGFuZGxlSW5kZXgpLHRoaXMuX2hhbmRsZUluZGV4PW51bGwsdGhpcy5fY2xpY2tPZmZzZXQ9bnVsbCx0aGlzLl9hbmltYXRlT2ZmPSExLCExfSxfZGV0ZWN0T3JpZW50YXRpb246ZnVuY3Rpb24oKXt0aGlzLm9yaWVudGF0aW9uPSJ2ZXJ0aWNhbCI9PT10aGlzLm9wdGlvbnMub3JpZW50YXRpb24/InZlcnRpY2FsIjoiaG9yaXpvbnRhbCJ9LF9ub3JtVmFsdWVGcm9tTW91c2U6ZnVuY3Rpb24odCl7dmFyIGUsaSxzLG4sbztyZXR1cm4iaG9yaXpvbnRhbCI9PT10aGlzLm9yaWVudGF0aW9uPyhlPXRoaXMuZWxlbWVudFNpemUud2lkdGgsaT10LngtdGhpcy5lbGVtZW50T2Zmc2V0LmxlZnQtKHRoaXMuX2NsaWNrT2Zmc2V0P3RoaXMuX2NsaWNrT2Zmc2V0LmxlZnQ6MCkpOihlPXRoaXMuZWxlbWVudFNpemUuaGVpZ2h0LGk9dC55LXRoaXMuZWxlbWVudE9mZnNldC50b3AtKHRoaXMuX2NsaWNrT2Zmc2V0P3RoaXMuX2NsaWNrT2Zmc2V0LnRvcDowKSkscz1pL2Uscz4xJiYocz0xKSwwPnMmJihzPTApLCJ2ZXJ0aWNhbCI9PT10aGlzLm9yaWVudGF0aW9uJiYocz0xLXMpLG49dGhpcy5fdmFsdWVNYXgoKS10aGlzLl92YWx1ZU1pbigpLG89dGhpcy5fdmFsdWVNaW4oKStzKm4sdGhpcy5fdHJpbUFsaWduVmFsdWUobyl9LF91aUhhc2g6ZnVuY3Rpb24odCxlLGkpe3ZhciBzPXtoYW5kbGU6dGhpcy5oYW5kbGVzW3RdLGhhbmRsZUluZGV4OnQsdmFsdWU6dm9pZCAwIT09ZT9lOnRoaXMudmFsdWUoKX07cmV0dXJuIHRoaXMuX2hhc011bHRpcGxlVmFsdWVzKCkmJihzLnZhbHVlPXZvaWQgMCE9PWU/ZTp0aGlzLnZhbHVlcyh0KSxzLnZhbHVlcz1pfHx0aGlzLnZhbHVlcygpKSxzfSxfaGFzTXVsdGlwbGVWYWx1ZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zLnZhbHVlcyYmdGhpcy5vcHRpb25zLnZhbHVlcy5sZW5ndGh9LF9zdGFydDpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl90cmlnZ2VyKCJzdGFydCIsdCx0aGlzLl91aUhhc2goZSkpfSxfc2xpZGU6ZnVuY3Rpb24odCxlLGkpe3ZhciBzLG4sbz10aGlzLnZhbHVlKCksYT10aGlzLnZhbHVlcygpO3RoaXMuX2hhc011bHRpcGxlVmFsdWVzKCkmJihuPXRoaXMudmFsdWVzKGU/MDoxKSxvPXRoaXMudmFsdWVzKGUpLDI9PT10aGlzLm9wdGlvbnMudmFsdWVzLmxlbmd0aCYmdGhpcy5vcHRpb25zLnJhbmdlPT09ITAmJihpPTA9PT1lP01hdGgubWluKG4saSk6TWF0aC5tYXgobixpKSksYVtlXT1pKSxpIT09byYmKHM9dGhpcy5fdHJpZ2dlcigic2xpZGUiLHQsdGhpcy5fdWlIYXNoKGUsaSxhKSkscyE9PSExJiYodGhpcy5faGFzTXVsdGlwbGVWYWx1ZXMoKT90aGlzLnZhbHVlcyhlLGkpOnRoaXMudmFsdWUoaSkpKX0sX3N0b3A6ZnVuY3Rpb24odCxlKXt0aGlzLl90cmlnZ2VyKCJzdG9wIix0LHRoaXMuX3VpSGFzaChlKSl9LF9jaGFuZ2U6ZnVuY3Rpb24odCxlKXt0aGlzLl9rZXlTbGlkaW5nfHx0aGlzLl9tb3VzZVNsaWRpbmd8fCh0aGlzLl9sYXN0Q2hhbmdlZFZhbHVlPWUsdGhpcy5fdHJpZ2dlcigiY2hhbmdlIix0LHRoaXMuX3VpSGFzaChlKSkpfSx2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odGhpcy5vcHRpb25zLnZhbHVlPXRoaXMuX3RyaW1BbGlnblZhbHVlKHQpLHRoaXMuX3JlZnJlc2hWYWx1ZSgpLHRoaXMuX2NoYW5nZShudWxsLDApLHZvaWQgMCk6dGhpcy5fdmFsdWUoKX0sdmFsdWVzOmZ1bmN0aW9uKGUsaSl7dmFyIHMsbixvO2lmKGFyZ3VtZW50cy5sZW5ndGg+MSlyZXR1cm4gdGhpcy5vcHRpb25zLnZhbHVlc1tlXT10aGlzLl90cmltQWxpZ25WYWx1ZShpKSx0aGlzLl9yZWZyZXNoVmFsdWUoKSx0aGlzLl9jaGFuZ2UobnVsbCxlKSx2b2lkIDA7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRoaXMuX3ZhbHVlcygpO2lmKCF0LmlzQXJyYXkoYXJndW1lbnRzWzBdKSlyZXR1cm4gdGhpcy5faGFzTXVsdGlwbGVWYWx1ZXMoKT90aGlzLl92YWx1ZXMoZSk6dGhpcy52YWx1ZSgpO2ZvcihzPXRoaXMub3B0aW9ucy52YWx1ZXMsbj1hcmd1bWVudHNbMF0sbz0wO3MubGVuZ3RoPm87bys9MSlzW29dPXRoaXMuX3RyaW1BbGlnblZhbHVlKG5bb10pLHRoaXMuX2NoYW5nZShudWxsLG8pO3RoaXMuX3JlZnJlc2hWYWx1ZSgpfSxfc2V0T3B0aW9uOmZ1bmN0aW9uKGUsaSl7dmFyIHMsbj0wO3N3aXRjaCgicmFuZ2UiPT09ZSYmdGhpcy5vcHRpb25zLnJhbmdlPT09ITAmJigibWluIj09PWk/KHRoaXMub3B0aW9ucy52YWx1ZT10aGlzLl92YWx1ZXMoMCksdGhpcy5vcHRpb25zLnZhbHVlcz1udWxsKToibWF4Ij09PWkmJih0aGlzLm9wdGlvbnMudmFsdWU9dGhpcy5fdmFsdWVzKHRoaXMub3B0aW9ucy52YWx1ZXMubGVuZ3RoLTEpLHRoaXMub3B0aW9ucy52YWx1ZXM9bnVsbCkpLHQuaXNBcnJheSh0aGlzLm9wdGlvbnMudmFsdWVzKSYmKG49dGhpcy5vcHRpb25zLnZhbHVlcy5sZW5ndGgpLHRoaXMuX3N1cGVyKGUsaSksZSl7Y2FzZSJvcmllbnRhdGlvbiI6dGhpcy5fZGV0ZWN0T3JpZW50YXRpb24oKSx0aGlzLl9yZW1vdmVDbGFzcygidWktc2xpZGVyLWhvcml6b250YWwgdWktc2xpZGVyLXZlcnRpY2FsIikuX2FkZENsYXNzKCJ1aS1zbGlkZXItIit0aGlzLm9yaWVudGF0aW9uKSx0aGlzLl9yZWZyZXNoVmFsdWUoKSx0aGlzLm9wdGlvbnMucmFuZ2UmJnRoaXMuX3JlZnJlc2hSYW5nZShpKSx0aGlzLmhhbmRsZXMuY3NzKCJob3Jpem9udGFsIj09PWk/ImJvdHRvbSI6ImxlZnQiLCIiKTticmVhaztjYXNlInZhbHVlIjp0aGlzLl9hbmltYXRlT2ZmPSEwLHRoaXMuX3JlZnJlc2hWYWx1ZSgpLHRoaXMuX2NoYW5nZShudWxsLDApLHRoaXMuX2FuaW1hdGVPZmY9ITE7YnJlYWs7Y2FzZSJ2YWx1ZXMiOmZvcih0aGlzLl9hbmltYXRlT2ZmPSEwLHRoaXMuX3JlZnJlc2hWYWx1ZSgpLHM9bi0xO3M+PTA7cy0tKXRoaXMuX2NoYW5nZShudWxsLHMpO3RoaXMuX2FuaW1hdGVPZmY9ITE7YnJlYWs7Y2FzZSJzdGVwIjpjYXNlIm1pbiI6Y2FzZSJtYXgiOnRoaXMuX2FuaW1hdGVPZmY9ITAsdGhpcy5fY2FsY3VsYXRlTmV3TWF4KCksdGhpcy5fcmVmcmVzaFZhbHVlKCksdGhpcy5fYW5pbWF0ZU9mZj0hMTticmVhaztjYXNlInJhbmdlIjp0aGlzLl9hbmltYXRlT2ZmPSEwLHRoaXMuX3JlZnJlc2goKSx0aGlzLl9hbmltYXRlT2ZmPSExfX0sX3NldE9wdGlvbkRpc2FibGVkOmZ1bmN0aW9uKHQpe3RoaXMuX3N1cGVyKHQpLHRoaXMuX3RvZ2dsZUNsYXNzKG51bGwsInVpLXN0YXRlLWRpc2FibGVkIiwhIXQpfSxfdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMudmFsdWU7cmV0dXJuIHQ9dGhpcy5fdHJpbUFsaWduVmFsdWUodCl9LF92YWx1ZXM6ZnVuY3Rpb24odCl7dmFyIGUsaSxzO2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGU9dGhpcy5vcHRpb25zLnZhbHVlc1t0XSxlPXRoaXMuX3RyaW1BbGlnblZhbHVlKGUpO2lmKHRoaXMuX2hhc011bHRpcGxlVmFsdWVzKCkpe2ZvcihpPXRoaXMub3B0aW9ucy52YWx1ZXMuc2xpY2UoKSxzPTA7aS5sZW5ndGg+cztzKz0xKWlbc109dGhpcy5fdHJpbUFsaWduVmFsdWUoaVtzXSk7cmV0dXJuIGl9cmV0dXJuW119LF90cmltQWxpZ25WYWx1ZTpmdW5jdGlvbih0KXtpZih0aGlzLl92YWx1ZU1pbigpPj10KXJldHVybiB0aGlzLl92YWx1ZU1pbigpO2lmKHQ+PXRoaXMuX3ZhbHVlTWF4KCkpcmV0dXJuIHRoaXMuX3ZhbHVlTWF4KCk7dmFyIGU9dGhpcy5vcHRpb25zLnN0ZXA+MD90aGlzLm9wdGlvbnMuc3RlcDoxLGk9KHQtdGhpcy5fdmFsdWVNaW4oKSklZSxzPXQtaTtyZXR1cm4gMipNYXRoLmFicyhpKT49ZSYmKHMrPWk+MD9lOi1lKSxwYXJzZUZsb2F0KHMudG9GaXhlZCg1KSl9LF9jYWxjdWxhdGVOZXdNYXg6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMubWF4LGU9dGhpcy5fdmFsdWVNaW4oKSxpPXRoaXMub3B0aW9ucy5zdGVwLHM9TWF0aC5yb3VuZCgodC1lKS9pKSppO3Q9cytlLHQ+dGhpcy5vcHRpb25zLm1heCYmKHQtPWkpLHRoaXMubWF4PXBhcnNlRmxvYXQodC50b0ZpeGVkKHRoaXMuX3ByZWNpc2lvbigpKSl9LF9wcmVjaXNpb246ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9wcmVjaXNpb25PZih0aGlzLm9wdGlvbnMuc3RlcCk7cmV0dXJuIG51bGwhPT10aGlzLm9wdGlvbnMubWluJiYodD1NYXRoLm1heCh0LHRoaXMuX3ByZWNpc2lvbk9mKHRoaXMub3B0aW9ucy5taW4pKSksdH0sX3ByZWNpc2lvbk9mOmZ1bmN0aW9uKHQpe3ZhciBlPSIiK3QsaT1lLmluZGV4T2YoIi4iKTtyZXR1cm4tMT09PWk/MDplLmxlbmd0aC1pLTF9LF92YWx1ZU1pbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbnMubWlufSxfdmFsdWVNYXg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXh9LF9yZWZyZXNoUmFuZ2U6ZnVuY3Rpb24odCl7InZlcnRpY2FsIj09PXQmJnRoaXMucmFuZ2UuY3NzKHt3aWR0aDoiIixsZWZ0OiIifSksImhvcml6b250YWwiPT09dCYmdGhpcy5yYW5nZS5jc3Moe2hlaWdodDoiIixib3R0b206IiJ9KX0sX3JlZnJlc2hWYWx1ZTpmdW5jdGlvbigpe3ZhciBlLGkscyxuLG8sYT10aGlzLm9wdGlvbnMucmFuZ2Uscj10aGlzLm9wdGlvbnMsaD10aGlzLGw9dGhpcy5fYW5pbWF0ZU9mZj8hMTpyLmFuaW1hdGUsYz17fTt0aGlzLl9oYXNNdWx0aXBsZVZhbHVlcygpP3RoaXMuaGFuZGxlcy5lYWNoKGZ1bmN0aW9uKHMpe2k9MTAwKigoaC52YWx1ZXMocyktaC5fdmFsdWVNaW4oKSkvKGguX3ZhbHVlTWF4KCktaC5fdmFsdWVNaW4oKSkpLGNbImhvcml6b250YWwiPT09aC5vcmllbnRhdGlvbj8ibGVmdCI6ImJvdHRvbSJdPWkrIiUiLHQodGhpcykuc3RvcCgxLDEpW2w/ImFuaW1hdGUiOiJjc3MiXShjLHIuYW5pbWF0ZSksaC5vcHRpb25zLnJhbmdlPT09ITAmJigiaG9yaXpvbnRhbCI9PT1oLm9yaWVudGF0aW9uPygwPT09cyYmaC5yYW5nZS5zdG9wKDEsMSlbbD8iYW5pbWF0ZSI6ImNzcyJdKHtsZWZ0OmkrIiUifSxyLmFuaW1hdGUpLDE9PT1zJiZoLnJhbmdlW2w/ImFuaW1hdGUiOiJjc3MiXSh7d2lkdGg6aS1lKyIlIn0se3F1ZXVlOiExLGR1cmF0aW9uOnIuYW5pbWF0ZX0pKTooMD09PXMmJmgucmFuZ2Uuc3RvcCgxLDEpW2w/ImFuaW1hdGUiOiJjc3MiXSh7Ym90dG9tOmkrIiUifSxyLmFuaW1hdGUpLDE9PT1zJiZoLnJhbmdlW2w/ImFuaW1hdGUiOiJjc3MiXSh7aGVpZ2h0OmktZSsiJSJ9LHtxdWV1ZTohMSxkdXJhdGlvbjpyLmFuaW1hdGV9KSkpLGU9aX0pOihzPXRoaXMudmFsdWUoKSxuPXRoaXMuX3ZhbHVlTWluKCksbz10aGlzLl92YWx1ZU1heCgpLGk9byE9PW4/MTAwKigocy1uKS8oby1uKSk6MCxjWyJob3Jpem9udGFsIj09PXRoaXMub3JpZW50YXRpb24/ImxlZnQiOiJib3R0b20iXT1pKyIlIix0aGlzLmhhbmRsZS5zdG9wKDEsMSlbbD8iYW5pbWF0ZSI6ImNzcyJdKGMsci5hbmltYXRlKSwibWluIj09PWEmJiJob3Jpem9udGFsIj09PXRoaXMub3JpZW50YXRpb24mJnRoaXMucmFuZ2Uuc3RvcCgxLDEpW2w/ImFuaW1hdGUiOiJjc3MiXSh7d2lkdGg6aSsiJSJ9LHIuYW5pbWF0ZSksIm1heCI9PT1hJiYiaG9yaXpvbnRhbCI9PT10aGlzLm9yaWVudGF0aW9uJiZ0aGlzLnJhbmdlLnN0b3AoMSwxKVtsPyJhbmltYXRlIjoiY3NzIl0oe3dpZHRoOjEwMC1pKyIlIn0sci5hbmltYXRlKSwibWluIj09PWEmJiJ2ZXJ0aWNhbCI9PT10aGlzLm9yaWVudGF0aW9uJiZ0aGlzLnJhbmdlLnN0b3AoMSwxKVtsPyJhbmltYXRlIjoiY3NzIl0oe2hlaWdodDppKyIlIn0sci5hbmltYXRlKSwibWF4Ij09PWEmJiJ2ZXJ0aWNhbCI9PT10aGlzLm9yaWVudGF0aW9uJiZ0aGlzLnJhbmdlLnN0b3AoMSwxKVtsPyJhbmltYXRlIjoiY3NzIl0oe2hlaWdodDoxMDAtaSsiJSJ9LHIuYW5pbWF0ZSkpfSxfaGFuZGxlRXZlbnRzOntrZXlkb3duOmZ1bmN0aW9uKGUpe3ZhciBpLHMsbixvLGE9dChlLnRhcmdldCkuZGF0YSgidWktc2xpZGVyLWhhbmRsZS1pbmRleCIpO3N3aXRjaChlLmtleUNvZGUpe2Nhc2UgdC51aS5rZXlDb2RlLkhPTUU6Y2FzZSB0LnVpLmtleUNvZGUuRU5EOmNhc2UgdC51aS5rZXlDb2RlLlBBR0VfVVA6Y2FzZSB0LnVpLmtleUNvZGUuUEFHRV9ET1dOOmNhc2UgdC51aS5rZXlDb2RlLlVQOmNhc2UgdC51aS5rZXlDb2RlLlJJR0hUOmNhc2UgdC51aS5rZXlDb2RlLkRPV046Y2FzZSB0LnVpLmtleUNvZGUuTEVGVDppZihlLnByZXZlbnREZWZhdWx0KCksIXRoaXMuX2tleVNsaWRpbmcmJih0aGlzLl9rZXlTbGlkaW5nPSEwLHRoaXMuX2FkZENsYXNzKHQoZS50YXJnZXQpLG51bGwsInVpLXN0YXRlLWFjdGl2ZSIpLGk9dGhpcy5fc3RhcnQoZSxhKSxpPT09ITEpKXJldHVybn1zd2l0Y2gobz10aGlzLm9wdGlvbnMuc3RlcCxzPW49dGhpcy5faGFzTXVsdGlwbGVWYWx1ZXMoKT90aGlzLnZhbHVlcyhhKTp0aGlzLnZhbHVlKCksZS5rZXlDb2RlKXtjYXNlIHQudWkua2V5Q29kZS5IT01FOm49dGhpcy5fdmFsdWVNaW4oKTticmVhaztjYXNlIHQudWkua2V5Q29kZS5FTkQ6bj10aGlzLl92YWx1ZU1heCgpO2JyZWFrO2Nhc2UgdC51aS5rZXlDb2RlLlBBR0VfVVA6bj10aGlzLl90cmltQWxpZ25WYWx1ZShzKyh0aGlzLl92YWx1ZU1heCgpLXRoaXMuX3ZhbHVlTWluKCkpL3RoaXMubnVtUGFnZXMpO2JyZWFrO2Nhc2UgdC51aS5rZXlDb2RlLlBBR0VfRE9XTjpuPXRoaXMuX3RyaW1BbGlnblZhbHVlKHMtKHRoaXMuX3ZhbHVlTWF4KCktdGhpcy5fdmFsdWVNaW4oKSkvdGhpcy5udW1QYWdlcyk7YnJlYWs7Y2FzZSB0LnVpLmtleUNvZGUuVVA6Y2FzZSB0LnVpLmtleUNvZGUuUklHSFQ6aWYocz09PXRoaXMuX3ZhbHVlTWF4KCkpcmV0dXJuO249dGhpcy5fdHJpbUFsaWduVmFsdWUocytvKTticmVhaztjYXNlIHQudWkua2V5Q29kZS5ET1dOOmNhc2UgdC51aS5rZXlDb2RlLkxFRlQ6aWYocz09PXRoaXMuX3ZhbHVlTWluKCkpcmV0dXJuO249dGhpcy5fdHJpbUFsaWduVmFsdWUocy1vKX10aGlzLl9zbGlkZShlLGEsbil9LGtleXVwOmZ1bmN0aW9uKGUpe3ZhciBpPXQoZS50YXJnZXQpLmRhdGEoInVpLXNsaWRlci1oYW5kbGUtaW5kZXgiKTt0aGlzLl9rZXlTbGlkaW5nJiYodGhpcy5fa2V5U2xpZGluZz0hMSx0aGlzLl9zdG9wKGUsaSksdGhpcy5fY2hhbmdlKGUsaSksdGhpcy5fcmVtb3ZlQ2xhc3ModChlLnRhcmdldCksbnVsbCwidWktc3RhdGUtYWN0aXZlIikpfX19KSx0LndpZGdldCgidWkuc29ydGFibGUiLHQudWkubW91c2Use3ZlcnNpb246IjEuMTIuMSIsd2lkZ2V0RXZlbnRQcmVmaXg6InNvcnQiLHJlYWR5OiExLG9wdGlvbnM6e2FwcGVuZFRvOiJwYXJlbnQiLGF4aXM6ITEsY29ubmVjdFdpdGg6ITEsY29udGFpbm1lbnQ6ITEsY3Vyc29yOiJhdXRvIixjdXJzb3JBdDohMSxkcm9wT25FbXB0eTohMCxmb3JjZVBsYWNlaG9sZGVyU2l6ZTohMSxmb3JjZUhlbHBlclNpemU6ITEsZ3JpZDohMSxoYW5kbGU6ITEsaGVscGVyOiJvcmlnaW5hbCIsaXRlbXM6Ij4gKiIsb3BhY2l0eTohMSxwbGFjZWhvbGRlcjohMSxyZXZlcnQ6ITEsc2Nyb2xsOiEwLHNjcm9sbFNlbnNpdGl2aXR5OjIwLHNjcm9sbFNwZWVkOjIwLHNjb3BlOiJkZWZhdWx0Iix0b2xlcmFuY2U6ImludGVyc2VjdCIsekluZGV4OjFlMyxhY3RpdmF0ZTpudWxsLGJlZm9yZVN0b3A6bnVsbCxjaGFuZ2U6bnVsbCxkZWFjdGl2YXRlOm51bGwsb3V0Om51bGwsb3ZlcjpudWxsLHJlY2VpdmU6bnVsbCxyZW1vdmU6bnVsbCxzb3J0Om51bGwsc3RhcnQ6bnVsbCxzdG9wOm51bGwsdXBkYXRlOm51bGx9LF9pc092ZXJBeGlzOmZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gdD49ZSYmZStpPnR9LF9pc0Zsb2F0aW5nOmZ1bmN0aW9uKHQpe3JldHVybi9sZWZ0fHJpZ2h0Ly50ZXN0KHQuY3NzKCJmbG9hdCIpKXx8L2lubGluZXx0YWJsZS1jZWxsLy50ZXN0KHQuY3NzKCJkaXNwbGF5IikpfSxfY3JlYXRlOmZ1bmN0aW9uKCl7dGhpcy5jb250YWluZXJDYWNoZT17fSx0aGlzLl9hZGRDbGFzcygidWktc29ydGFibGUiKSx0aGlzLnJlZnJlc2goKSx0aGlzLm9mZnNldD10aGlzLmVsZW1lbnQub2Zmc2V0KCksdGhpcy5fbW91c2VJbml0KCksdGhpcy5fc2V0SGFuZGxlQ2xhc3NOYW1lKCksdGhpcy5yZWFkeT0hMH0sX3NldE9wdGlvbjpmdW5jdGlvbih0LGUpe3RoaXMuX3N1cGVyKHQsZSksImhhbmRsZSI9PT10JiZ0aGlzLl9zZXRIYW5kbGVDbGFzc05hbWUoKX0sX3NldEhhbmRsZUNsYXNzTmFtZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5fcmVtb3ZlQ2xhc3ModGhpcy5lbGVtZW50LmZpbmQoIi51aS1zb3J0YWJsZS1oYW5kbGUiKSwidWktc29ydGFibGUtaGFuZGxlIiksdC5lYWNoKHRoaXMuaXRlbXMsZnVuY3Rpb24oKXtlLl9hZGRDbGFzcyh0aGlzLmluc3RhbmNlLm9wdGlvbnMuaGFuZGxlP3RoaXMuaXRlbS5maW5kKHRoaXMuaW5zdGFuY2Uub3B0aW9ucy5oYW5kbGUpOnRoaXMuaXRlbSwidWktc29ydGFibGUtaGFuZGxlIil9KX0sX2Rlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLl9tb3VzZURlc3Ryb3koKTtmb3IodmFyIHQ9dGhpcy5pdGVtcy5sZW5ndGgtMTt0Pj0wO3QtLSl0aGlzLml0ZW1zW3RdLml0ZW0ucmVtb3ZlRGF0YSh0aGlzLndpZGdldE5hbWUrIi1pdGVtIik7cmV0dXJuIHRoaXN9LF9tb3VzZUNhcHR1cmU6ZnVuY3Rpb24oZSxpKXt2YXIgcz1udWxsLG49ITEsbz10aGlzO3JldHVybiB0aGlzLnJldmVydGluZz8hMTp0aGlzLm9wdGlvbnMuZGlzYWJsZWR8fCJzdGF0aWMiPT09dGhpcy5vcHRpb25zLnR5cGU/ITE6KHRoaXMuX3JlZnJlc2hJdGVtcyhlKSx0KGUudGFyZ2V0KS5wYXJlbnRzKCkuZWFjaChmdW5jdGlvbigpe3JldHVybiB0LmRhdGEodGhpcyxvLndpZGdldE5hbWUrIi1pdGVtIik9PT1vPyhzPXQodGhpcyksITEpOnZvaWQgMH0pLHQuZGF0YShlLnRhcmdldCxvLndpZGdldE5hbWUrIi1pdGVtIik9PT1vJiYocz10KGUudGFyZ2V0KSkscz8hdGhpcy5vcHRpb25zLmhhbmRsZXx8aXx8KHQodGhpcy5vcHRpb25zLmhhbmRsZSxzKS5maW5kKCIqIikuYWRkQmFjaygpLmVhY2goZnVuY3Rpb24oKXt0aGlzPT09ZS50YXJnZXQmJihuPSEwKX0pLG4pPyh0aGlzLmN1cnJlbnRJdGVtPXMsdGhpcy5fcmVtb3ZlQ3VycmVudHNGcm9tSXRlbXMoKSwhMCk6ITE6ITEpfSxfbW91c2VTdGFydDpmdW5jdGlvbihlLGkscyl7dmFyIG4sbyxhPXRoaXMub3B0aW9ucztpZih0aGlzLmN1cnJlbnRDb250YWluZXI9dGhpcyx0aGlzLnJlZnJlc2hQb3NpdGlvbnMoKSx0aGlzLmhlbHBlcj10aGlzLl9jcmVhdGVIZWxwZXIoZSksdGhpcy5fY2FjaGVIZWxwZXJQcm9wb3J0aW9ucygpLHRoaXMuX2NhY2hlTWFyZ2lucygpLHRoaXMuc2Nyb2xsUGFyZW50PXRoaXMuaGVscGVyLnNjcm9sbFBhcmVudCgpLHRoaXMub2Zmc2V0PXRoaXMuY3VycmVudEl0ZW0ub2Zmc2V0KCksdGhpcy5vZmZzZXQ9e3RvcDp0aGlzLm9mZnNldC50b3AtdGhpcy5tYXJnaW5zLnRvcCxsZWZ0OnRoaXMub2Zmc2V0LmxlZnQtdGhpcy5tYXJnaW5zLmxlZnR9LHQuZXh0ZW5kKHRoaXMub2Zmc2V0LHtjbGljazp7bGVmdDplLnBhZ2VYLXRoaXMub2Zmc2V0LmxlZnQsdG9wOmUucGFnZVktdGhpcy5vZmZzZXQudG9wfSxwYXJlbnQ6dGhpcy5fZ2V0UGFyZW50T2Zmc2V0KCkscmVsYXRpdmU6dGhpcy5fZ2V0UmVsYXRpdmVPZmZzZXQoKX0pLHRoaXMuaGVscGVyLmNzcygicG9zaXRpb24iLCJhYnNvbHV0ZSIpLHRoaXMuY3NzUG9zaXRpb249dGhpcy5oZWxwZXIuY3NzKCJwb3NpdGlvbiIpLHRoaXMub3JpZ2luYWxQb3NpdGlvbj10aGlzLl9nZW5lcmF0ZVBvc2l0aW9uKGUpLHRoaXMub3JpZ2luYWxQYWdlWD1lLnBhZ2VYLHRoaXMub3JpZ2luYWxQYWdlWT1lLnBhZ2VZLGEuY3Vyc29yQXQmJnRoaXMuX2FkanVzdE9mZnNldEZyb21IZWxwZXIoYS5jdXJzb3JBdCksdGhpcy5kb21Qb3NpdGlvbj17cHJldjp0aGlzLmN1cnJlbnRJdGVtLnByZXYoKVswXSxwYXJlbnQ6dGhpcy5jdXJyZW50SXRlbS5wYXJlbnQoKVswXX0sdGhpcy5oZWxwZXJbMF0hPT10aGlzLmN1cnJlbnRJdGVtWzBdJiZ0aGlzLmN1cnJlbnRJdGVtLmhpZGUoKSx0aGlzLl9jcmVhdGVQbGFjZWhvbGRlcigpLGEuY29udGFpbm1lbnQmJnRoaXMuX3NldENvbnRhaW5tZW50KCksYS5jdXJzb3ImJiJhdXRvIiE9PWEuY3Vyc29yJiYobz10aGlzLmRvY3VtZW50LmZpbmQoImJvZHkiKSx0aGlzLnN0b3JlZEN1cnNvcj1vLmNzcygiY3Vyc29yIiksby5jc3MoImN1cnNvciIsYS5jdXJzb3IpLHRoaXMuc3RvcmVkU3R5bGVzaGVldD10KCI8c3R5bGU+KnsgY3Vyc29yOiAiK2EuY3Vyc29yKyIgIWltcG9ydGFudDsgfTwvc3R5bGU+IikuYXBwZW5kVG8obykpLGEub3BhY2l0eSYmKHRoaXMuaGVscGVyLmNzcygib3BhY2l0eSIpJiYodGhpcy5fc3RvcmVkT3BhY2l0eT10aGlzLmhlbHBlci5jc3MoIm9wYWNpdHkiKSksdGhpcy5oZWxwZXIuY3NzKCJvcGFjaXR5IixhLm9wYWNpdHkpKSxhLnpJbmRleCYmKHRoaXMuaGVscGVyLmNzcygiekluZGV4IikmJih0aGlzLl9zdG9yZWRaSW5kZXg9dGhpcy5oZWxwZXIuY3NzKCJ6SW5kZXgiKSksdGhpcy5oZWxwZXIuY3NzKCJ6SW5kZXgiLGEuekluZGV4KSksdGhpcy5zY3JvbGxQYXJlbnRbMF0hPT10aGlzLmRvY3VtZW50WzBdJiYiSFRNTCIhPT10aGlzLnNjcm9sbFBhcmVudFswXS50YWdOYW1lJiYodGhpcy5vdmVyZmxvd09mZnNldD10aGlzLnNjcm9sbFBhcmVudC5vZmZzZXQoKSksdGhpcy5fdHJpZ2dlcigic3RhcnQiLGUsdGhpcy5fdWlIYXNoKCkpLHRoaXMuX3ByZXNlcnZlSGVscGVyUHJvcG9ydGlvbnN8fHRoaXMuX2NhY2hlSGVscGVyUHJvcG9ydGlvbnMoKSwhcylmb3Iobj10aGlzLmNvbnRhaW5lcnMubGVuZ3RoLTE7bj49MDtuLS0pdGhpcy5jb250YWluZXJzW25dLl90cmlnZ2VyKCJhY3RpdmF0ZSIsZSx0aGlzLl91aUhhc2godGhpcykpO3JldHVybiB0LnVpLmRkbWFuYWdlciYmKHQudWkuZGRtYW5hZ2VyLmN1cnJlbnQ9dGhpcyksdC51aS5kZG1hbmFnZXImJiFhLmRyb3BCZWhhdmlvdXImJnQudWkuZGRtYW5hZ2VyLnByZXBhcmVPZmZzZXRzKHRoaXMsZSksdGhpcy5kcmFnZ2luZz0hMCx0aGlzLl9hZGRDbGFzcyh0aGlzLmhlbHBlciwidWktc29ydGFibGUtaGVscGVyIiksdGhpcy5fbW91c2VEcmFnKGUpLCEwfSxfbW91c2VEcmFnOmZ1bmN0aW9uKGUpe3ZhciBpLHMsbixvLGE9dGhpcy5vcHRpb25zLHI9ITE7Zm9yKHRoaXMucG9zaXRpb249dGhpcy5fZ2VuZXJhdGVQb3NpdGlvbihlKSx0aGlzLnBvc2l0aW9uQWJzPXRoaXMuX2NvbnZlcnRQb3NpdGlvblRvKCJhYnNvbHV0ZSIpLHRoaXMubGFzdFBvc2l0aW9uQWJzfHwodGhpcy5sYXN0UG9zaXRpb25BYnM9dGhpcy5wb3NpdGlvbkFicyksdGhpcy5vcHRpb25zLnNjcm9sbCYmKHRoaXMuc2Nyb2xsUGFyZW50WzBdIT09dGhpcy5kb2N1bWVudFswXSYmIkhUTUwiIT09dGhpcy5zY3JvbGxQYXJlbnRbMF0udGFnTmFtZT8odGhpcy5vdmVyZmxvd09mZnNldC50b3ArdGhpcy5zY3JvbGxQYXJlbnRbMF0ub2Zmc2V0SGVpZ2h0LWUucGFnZVk8YS5zY3JvbGxTZW5zaXRpdml0eT90aGlzLnNjcm9sbFBhcmVudFswXS5zY3JvbGxUb3A9cj10aGlzLnNjcm9sbFBhcmVudFswXS5zY3JvbGxUb3ArYS5zY3JvbGxTcGVlZDplLnBhZ2VZLXRoaXMub3ZlcmZsb3dPZmZzZXQudG9wPGEuc2Nyb2xsU2Vuc2l0aXZpdHkmJih0aGlzLnNjcm9sbFBhcmVudFswXS5zY3JvbGxUb3A9cj10aGlzLnNjcm9sbFBhcmVudFswXS5zY3JvbGxUb3AtYS5zY3JvbGxTcGVlZCksdGhpcy5vdmVyZmxvd09mZnNldC5sZWZ0K3RoaXMuc2Nyb2xsUGFyZW50WzBdLm9mZnNldFdpZHRoLWUucGFnZVg8YS5zY3JvbGxTZW5zaXRpdml0eT90aGlzLnNjcm9sbFBhcmVudFswXS5zY3JvbGxMZWZ0PXI9dGhpcy5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsTGVmdCthLnNjcm9sbFNwZWVkOmUucGFnZVgtdGhpcy5vdmVyZmxvd09mZnNldC5sZWZ0PGEuc2Nyb2xsU2Vuc2l0aXZpdHkmJih0aGlzLnNjcm9sbFBhcmVudFswXS5zY3JvbGxMZWZ0PXI9dGhpcy5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsTGVmdC1hLnNjcm9sbFNwZWVkKSk6KGUucGFnZVktdGhpcy5kb2N1bWVudC5zY3JvbGxUb3AoKTxhLnNjcm9sbFNlbnNpdGl2aXR5P3I9dGhpcy5kb2N1bWVudC5zY3JvbGxUb3AodGhpcy5kb2N1bWVudC5zY3JvbGxUb3AoKS1hLnNjcm9sbFNwZWVkKTp0aGlzLndpbmRvdy5oZWlnaHQoKS0oZS5wYWdlWS10aGlzLmRvY3VtZW50LnNjcm9sbFRvcCgpKTxhLnNjcm9sbFNlbnNpdGl2aXR5JiYocj10aGlzLmRvY3VtZW50LnNjcm9sbFRvcCh0aGlzLmRvY3VtZW50LnNjcm9sbFRvcCgpK2Euc2Nyb2xsU3BlZWQpKSxlLnBhZ2VYLXRoaXMuZG9jdW1lbnQuc2Nyb2xsTGVmdCgpPGEuc2Nyb2xsU2Vuc2l0aXZpdHk/cj10aGlzLmRvY3VtZW50LnNjcm9sbExlZnQodGhpcy5kb2N1bWVudC5zY3JvbGxMZWZ0KCktYS5zY3JvbGxTcGVlZCk6dGhpcy53aW5kb3cud2lkdGgoKS0oZS5wYWdlWC10aGlzLmRvY3VtZW50LnNjcm9sbExlZnQoKSk8YS5zY3JvbGxTZW5zaXRpdml0eSYmKHI9dGhpcy5kb2N1bWVudC5zY3JvbGxMZWZ0KHRoaXMuZG9jdW1lbnQuc2Nyb2xsTGVmdCgpK2Euc2Nyb2xsU3BlZWQpKSksciE9PSExJiZ0LnVpLmRkbWFuYWdlciYmIWEuZHJvcEJlaGF2aW91ciYmdC51aS5kZG1hbmFnZXIucHJlcGFyZU9mZnNldHModGhpcyxlKSksdGhpcy5wb3NpdGlvbkFicz10aGlzLl9jb252ZXJ0UG9zaXRpb25UbygiYWJzb2x1dGUiKSx0aGlzLm9wdGlvbnMuYXhpcyYmInkiPT09dGhpcy5vcHRpb25zLmF4aXN8fCh0aGlzLmhlbHBlclswXS5zdHlsZS5sZWZ0PXRoaXMucG9zaXRpb24ubGVmdCsicHgiKSx0aGlzLm9wdGlvbnMuYXhpcyYmIngiPT09dGhpcy5vcHRpb25zLmF4aXN8fCh0aGlzLmhlbHBlclswXS5zdHlsZS50b3A9dGhpcy5wb3NpdGlvbi50b3ArInB4IiksaT10aGlzLml0ZW1zLmxlbmd0aC0xO2k+PTA7aS0tKWlmKHM9dGhpcy5pdGVtc1tpXSxuPXMuaXRlbVswXSxvPXRoaXMuX2ludGVyc2VjdHNXaXRoUG9pbnRlcihzKSxvJiZzLmluc3RhbmNlPT09dGhpcy5jdXJyZW50Q29udGFpbmVyJiZuIT09dGhpcy5jdXJyZW50SXRlbVswXSYmdGhpcy5wbGFjZWhvbGRlclsxPT09bz8ibmV4dCI6InByZXYiXSgpWzBdIT09biYmIXQuY29udGFpbnModGhpcy5wbGFjZWhvbGRlclswXSxuKSYmKCJzZW1pLWR5bmFtaWMiPT09dGhpcy5vcHRpb25zLnR5cGU/IXQuY29udGFpbnModGhpcy5lbGVtZW50WzBdLG4pOiEwKSl7aWYodGhpcy5kaXJlY3Rpb249MT09PW8/ImRvd24iOiJ1cCIsInBvaW50ZXIiIT09dGhpcy5vcHRpb25zLnRvbGVyYW5jZSYmIXRoaXMuX2ludGVyc2VjdHNXaXRoU2lkZXMocykpYnJlYWs7dGhpcy5fcmVhcnJhbmdlKGUscyksdGhpcy5fdHJpZ2dlcigiY2hhbmdlIixlLHRoaXMuX3VpSGFzaCgpKTticmVha31yZXR1cm4gdGhpcy5fY29udGFjdENvbnRhaW5lcnMoZSksdC51aS5kZG1hbmFnZXImJnQudWkuZGRtYW5hZ2VyLmRyYWcodGhpcyxlKSx0aGlzLl90cmlnZ2VyKCJzb3J0IixlLHRoaXMuX3VpSGFzaCgpKSx0aGlzLmxhc3RQb3NpdGlvbkFicz10aGlzLnBvc2l0aW9uQWJzLCExfSxfbW91c2VTdG9wOmZ1bmN0aW9uKGUsaSl7aWYoZSl7aWYodC51aS5kZG1hbmFnZXImJiF0aGlzLm9wdGlvbnMuZHJvcEJlaGF2aW91ciYmdC51aS5kZG1hbmFnZXIuZHJvcCh0aGlzLGUpLHRoaXMub3B0aW9ucy5yZXZlcnQpe3ZhciBzPXRoaXMsbj10aGlzLnBsYWNlaG9sZGVyLm9mZnNldCgpLG89dGhpcy5vcHRpb25zLmF4aXMsYT17fTtvJiYieCIhPT1vfHwoYS5sZWZ0PW4ubGVmdC10aGlzLm9mZnNldC5wYXJlbnQubGVmdC10aGlzLm1hcmdpbnMubGVmdCsodGhpcy5vZmZzZXRQYXJlbnRbMF09PT10aGlzLmRvY3VtZW50WzBdLmJvZHk/MDp0aGlzLm9mZnNldFBhcmVudFswXS5zY3JvbGxMZWZ0KSksbyYmInkiIT09b3x8KGEudG9wPW4udG9wLXRoaXMub2Zmc2V0LnBhcmVudC50b3AtdGhpcy5tYXJnaW5zLnRvcCsodGhpcy5vZmZzZXRQYXJlbnRbMF09PT10aGlzLmRvY3VtZW50WzBdLmJvZHk/MDp0aGlzLm9mZnNldFBhcmVudFswXS5zY3JvbGxUb3ApKSx0aGlzLnJldmVydGluZz0hMCx0KHRoaXMuaGVscGVyKS5hbmltYXRlKGEscGFyc2VJbnQodGhpcy5vcHRpb25zLnJldmVydCwxMCl8fDUwMCxmdW5jdGlvbigpe3MuX2NsZWFyKGUpfSl9ZWxzZSB0aGlzLl9jbGVhcihlLGkpO3JldHVybiExfX0sY2FuY2VsOmZ1bmN0aW9uKCl7aWYodGhpcy5kcmFnZ2luZyl7dGhpcy5fbW91c2VVcChuZXcgdC5FdmVudCgibW91c2V1cCIse3RhcmdldDpudWxsfSkpLCJvcmlnaW5hbCI9PT10aGlzLm9wdGlvbnMuaGVscGVyPyh0aGlzLmN1cnJlbnRJdGVtLmNzcyh0aGlzLl9zdG9yZWRDU1MpLHRoaXMuX3JlbW92ZUNsYXNzKHRoaXMuY3VycmVudEl0ZW0sInVpLXNvcnRhYmxlLWhlbHBlciIpKTp0aGlzLmN1cnJlbnRJdGVtLnNob3coKTtmb3IodmFyIGU9dGhpcy5jb250YWluZXJzLmxlbmd0aC0xO2U+PTA7ZS0tKXRoaXMuY29udGFpbmVyc1tlXS5fdHJpZ2dlcigiZGVhY3RpdmF0ZSIsbnVsbCx0aGlzLl91aUhhc2godGhpcykpLHRoaXMuY29udGFpbmVyc1tlXS5jb250YWluZXJDYWNoZS5vdmVyJiYodGhpcy5jb250YWluZXJzW2VdLl90cmlnZ2VyKCJvdXQiLG51bGwsdGhpcy5fdWlIYXNoKHRoaXMpKSx0aGlzLmNvbnRhaW5lcnNbZV0uY29udGFpbmVyQ2FjaGUub3Zlcj0wKX1yZXR1cm4gdGhpcy5wbGFjZWhvbGRlciYmKHRoaXMucGxhY2Vob2xkZXJbMF0ucGFyZW50Tm9kZSYmdGhpcy5wbGFjZWhvbGRlclswXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMucGxhY2Vob2xkZXJbMF0pLCJvcmlnaW5hbCIhPT10aGlzLm9wdGlvbnMuaGVscGVyJiZ0aGlzLmhlbHBlciYmdGhpcy5oZWxwZXJbMF0ucGFyZW50Tm9kZSYmdGhpcy5oZWxwZXIucmVtb3ZlKCksdC5leHRlbmQodGhpcyx7aGVscGVyOm51bGwsZHJhZ2dpbmc6ITEscmV2ZXJ0aW5nOiExLF9ub0ZpbmFsU29ydDpudWxsfSksdGhpcy5kb21Qb3NpdGlvbi5wcmV2P3QodGhpcy5kb21Qb3NpdGlvbi5wcmV2KS5hZnRlcih0aGlzLmN1cnJlbnRJdGVtKTp0KHRoaXMuZG9tUG9zaXRpb24ucGFyZW50KS5wcmVwZW5kKHRoaXMuY3VycmVudEl0ZW0pKSx0aGlzfSxzZXJpYWxpemU6ZnVuY3Rpb24oZSl7dmFyIGk9dGhpcy5fZ2V0SXRlbXNBc2pRdWVyeShlJiZlLmNvbm5lY3RlZCkscz1bXTtyZXR1cm4gZT1lfHx7fSx0KGkpLmVhY2goZnVuY3Rpb24oKXt2YXIgaT0odChlLml0ZW18fHRoaXMpLmF0dHIoZS5hdHRyaWJ1dGV8fCJpZCIpfHwiIikubWF0Y2goZS5leHByZXNzaW9ufHwvKC4rKVtcLT1fXSguKykvKTtpJiZzLnB1c2goKGUua2V5fHxpWzFdKyJbXSIpKyI9IisoZS5rZXkmJmUuZXhwcmVzc2lvbj9pWzFdOmlbMl0pKX0pLCFzLmxlbmd0aCYmZS5rZXkmJnMucHVzaChlLmtleSsiPSIpLHMuam9pbigiJiIpfSx0b0FycmF5OmZ1bmN0aW9uKGUpe3ZhciBpPXRoaXMuX2dldEl0ZW1zQXNqUXVlcnkoZSYmZS5jb25uZWN0ZWQpLHM9W107cmV0dXJuIGU9ZXx8e30saS5lYWNoKGZ1bmN0aW9uKCl7cy5wdXNoKHQoZS5pdGVtfHx0aGlzKS5hdHRyKGUuYXR0cmlidXRlfHwiaWQiKXx8IiIpfSksc30sX2ludGVyc2VjdHNXaXRoOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucG9zaXRpb25BYnMubGVmdCxpPWUrdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aCxzPXRoaXMucG9zaXRpb25BYnMudG9wLG49cyt0aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodCxvPXQubGVmdCxhPW8rdC53aWR0aCxyPXQudG9wLGg9cit0LmhlaWdodCxsPXRoaXMub2Zmc2V0LmNsaWNrLnRvcCxjPXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQsdT0ieCI9PT10aGlzLm9wdGlvbnMuYXhpc3x8cytsPnImJmg+cytsLGQ9InkiPT09dGhpcy5vcHRpb25zLmF4aXN8fGUrYz5vJiZhPmUrYyxwPXUmJmQ7cmV0dXJuInBvaW50ZXIiPT09dGhpcy5vcHRpb25zLnRvbGVyYW5jZXx8dGhpcy5vcHRpb25zLmZvcmNlUG9pbnRlckZvckNvbnRhaW5lcnN8fCJwb2ludGVyIiE9PXRoaXMub3B0aW9ucy50b2xlcmFuY2UmJnRoaXMuaGVscGVyUHJvcG9ydGlvbnNbdGhpcy5mbG9hdGluZz8id2lkdGgiOiJoZWlnaHQiXT50W3RoaXMuZmxvYXRpbmc/IndpZHRoIjoiaGVpZ2h0Il0/cDplK3RoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgvMj5vJiZhPmktdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aC8yJiZzK3RoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LzI+ciYmaD5uLXRoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LzJ9LF9pbnRlcnNlY3RzV2l0aFBvaW50ZXI6ZnVuY3Rpb24odCl7dmFyIGUsaSxzPSJ4Ij09PXRoaXMub3B0aW9ucy5heGlzfHx0aGlzLl9pc092ZXJBeGlzKHRoaXMucG9zaXRpb25BYnMudG9wK3RoaXMub2Zmc2V0LmNsaWNrLnRvcCx0LnRvcCx0LmhlaWdodCksbj0ieSI9PT10aGlzLm9wdGlvbnMuYXhpc3x8dGhpcy5faXNPdmVyQXhpcyh0aGlzLnBvc2l0aW9uQWJzLmxlZnQrdGhpcy5vZmZzZXQuY2xpY2subGVmdCx0LmxlZnQsdC53aWR0aCksbz1zJiZuO3JldHVybiBvPyhlPXRoaXMuX2dldERyYWdWZXJ0aWNhbERpcmVjdGlvbigpLGk9dGhpcy5fZ2V0RHJhZ0hvcml6b250YWxEaXJlY3Rpb24oKSx0aGlzLmZsb2F0aW5nPyJyaWdodCI9PT1pfHwiZG93biI9PT1lPzI6MTplJiYoImRvd24iPT09ZT8yOjEpKTohMX0sX2ludGVyc2VjdHNXaXRoU2lkZXM6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5faXNPdmVyQXhpcyh0aGlzLnBvc2l0aW9uQWJzLnRvcCt0aGlzLm9mZnNldC5jbGljay50b3AsdC50b3ArdC5oZWlnaHQvMix0LmhlaWdodCksaT10aGlzLl9pc092ZXJBeGlzKHRoaXMucG9zaXRpb25BYnMubGVmdCt0aGlzLm9mZnNldC5jbGljay5sZWZ0LHQubGVmdCt0LndpZHRoLzIsdC53aWR0aCkscz10aGlzLl9nZXREcmFnVmVydGljYWxEaXJlY3Rpb24oKSxuPXRoaXMuX2dldERyYWdIb3Jpem9udGFsRGlyZWN0aW9uKCk7cmV0dXJuIHRoaXMuZmxvYXRpbmcmJm4/InJpZ2h0Ij09PW4mJml8fCJsZWZ0Ij09PW4mJiFpOnMmJigiZG93biI9PT1zJiZlfHwidXAiPT09cyYmIWUpfSxfZ2V0RHJhZ1ZlcnRpY2FsRGlyZWN0aW9uOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5wb3NpdGlvbkFicy50b3AtdGhpcy5sYXN0UG9zaXRpb25BYnMudG9wO3JldHVybiAwIT09dCYmKHQ+MD8iZG93biI6InVwIil9LF9nZXREcmFnSG9yaXpvbnRhbERpcmVjdGlvbjpmdW5jdGlvbigpe3ZhciB0PXRoaXMucG9zaXRpb25BYnMubGVmdC10aGlzLmxhc3RQb3NpdGlvbkFicy5sZWZ0O3JldHVybiAwIT09dCYmKHQ+MD8icmlnaHQiOiJsZWZ0Iil9LHJlZnJlc2g6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3JlZnJlc2hJdGVtcyh0KSx0aGlzLl9zZXRIYW5kbGVDbGFzc05hbWUoKSx0aGlzLnJlZnJlc2hQb3NpdGlvbnMoKSx0aGlzfSxfY29ubmVjdFdpdGg6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnM7cmV0dXJuIHQuY29ubmVjdFdpdGguY29uc3RydWN0b3I9PT1TdHJpbmc/W3QuY29ubmVjdFdpdGhdOnQuY29ubmVjdFdpdGh9LF9nZXRJdGVtc0FzalF1ZXJ5OmZ1bmN0aW9uKGUpe2Z1bmN0aW9uIGkoKXtyLnB1c2godGhpcyl9dmFyIHMsbixvLGEscj1bXSxoPVtdLGw9dGhpcy5fY29ubmVjdFdpdGgoKTtpZihsJiZlKWZvcihzPWwubGVuZ3RoLTE7cz49MDtzLS0pZm9yKG89dChsW3NdLHRoaXMuZG9jdW1lbnRbMF0pLG49by5sZW5ndGgtMTtuPj0wO24tLSlhPXQuZGF0YShvW25dLHRoaXMud2lkZ2V0RnVsbE5hbWUpLGEmJmEhPT10aGlzJiYhYS5vcHRpb25zLmRpc2FibGVkJiZoLnB1c2goW3QuaXNGdW5jdGlvbihhLm9wdGlvbnMuaXRlbXMpP2Eub3B0aW9ucy5pdGVtcy5jYWxsKGEuZWxlbWVudCk6dChhLm9wdGlvbnMuaXRlbXMsYS5lbGVtZW50KS5ub3QoIi51aS1zb3J0YWJsZS1oZWxwZXIiKS5ub3QoIi51aS1zb3J0YWJsZS1wbGFjZWhvbGRlciIpLGFdKTtmb3IoaC5wdXNoKFt0LmlzRnVuY3Rpb24odGhpcy5vcHRpb25zLml0ZW1zKT90aGlzLm9wdGlvbnMuaXRlbXMuY2FsbCh0aGlzLmVsZW1lbnQsbnVsbCx7b3B0aW9uczp0aGlzLm9wdGlvbnMsaXRlbTp0aGlzLmN1cnJlbnRJdGVtfSk6dCh0aGlzLm9wdGlvbnMuaXRlbXMsdGhpcy5lbGVtZW50KS5ub3QoIi51aS1zb3J0YWJsZS1oZWxwZXIiKS5ub3QoIi51aS1zb3J0YWJsZS1wbGFjZWhvbGRlciIpLHRoaXNdKSxzPWgubGVuZ3RoLTE7cz49MDtzLS0paFtzXVswXS5lYWNoKGkpO3JldHVybiB0KHIpfSxfcmVtb3ZlQ3VycmVudHNGcm9tSXRlbXM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmN1cnJlbnRJdGVtLmZpbmQoIjpkYXRhKCIrdGhpcy53aWRnZXROYW1lKyItaXRlbSkiKTt0aGlzLml0ZW1zPXQuZ3JlcCh0aGlzLml0ZW1zLGZ1bmN0aW9uKHQpe2Zvcih2YXIgaT0wO2UubGVuZ3RoPmk7aSsrKWlmKGVbaV09PT10Lml0ZW1bMF0pcmV0dXJuITE7cmV0dXJuITB9KX0sX3JlZnJlc2hJdGVtczpmdW5jdGlvbihlKXt0aGlzLml0ZW1zPVtdLHRoaXMuY29udGFpbmVycz1bdGhpc107dmFyIGkscyxuLG8sYSxyLGgsbCxjPXRoaXMuaXRlbXMsdT1bW3QuaXNGdW5jdGlvbih0aGlzLm9wdGlvbnMuaXRlbXMpP3RoaXMub3B0aW9ucy5pdGVtcy5jYWxsKHRoaXMuZWxlbWVudFswXSxlLHtpdGVtOnRoaXMuY3VycmVudEl0ZW19KTp0KHRoaXMub3B0aW9ucy5pdGVtcyx0aGlzLmVsZW1lbnQpLHRoaXNdXSxkPXRoaXMuX2Nvbm5lY3RXaXRoKCk7aWYoZCYmdGhpcy5yZWFkeSlmb3IoaT1kLmxlbmd0aC0xO2k+PTA7aS0tKWZvcihuPXQoZFtpXSx0aGlzLmRvY3VtZW50WzBdKSxzPW4ubGVuZ3RoLTE7cz49MDtzLS0pbz10LmRhdGEobltzXSx0aGlzLndpZGdldEZ1bGxOYW1lKSxvJiZvIT09dGhpcyYmIW8ub3B0aW9ucy5kaXNhYmxlZCYmKHUucHVzaChbdC5pc0Z1bmN0aW9uKG8ub3B0aW9ucy5pdGVtcyk/by5vcHRpb25zLml0ZW1zLmNhbGwoby5lbGVtZW50WzBdLGUse2l0ZW06dGhpcy5jdXJyZW50SXRlbX0pOnQoby5vcHRpb25zLml0ZW1zLG8uZWxlbWVudCksb10pLHRoaXMuY29udGFpbmVycy5wdXNoKG8pKTtmb3IoaT11Lmxlbmd0aC0xO2k+PTA7aS0tKWZvcihhPXVbaV1bMV0scj11W2ldWzBdLHM9MCxsPXIubGVuZ3RoO2w+cztzKyspaD10KHJbc10pLGguZGF0YSh0aGlzLndpZGdldE5hbWUrIi1pdGVtIixhKSxjLnB1c2goe2l0ZW06aCxpbnN0YW5jZTphLHdpZHRoOjAsaGVpZ2h0OjAsbGVmdDowLHRvcDowfSl9LHJlZnJlc2hQb3NpdGlvbnM6ZnVuY3Rpb24oZSl7dGhpcy5mbG9hdGluZz10aGlzLml0ZW1zLmxlbmd0aD8ieCI9PT10aGlzLm9wdGlvbnMuYXhpc3x8dGhpcy5faXNGbG9hdGluZyh0aGlzLml0ZW1zWzBdLml0ZW0pOiExLHRoaXMub2Zmc2V0UGFyZW50JiZ0aGlzLmhlbHBlciYmKHRoaXMub2Zmc2V0LnBhcmVudD10aGlzLl9nZXRQYXJlbnRPZmZzZXQoKSk7dmFyIGkscyxuLG87Zm9yKGk9dGhpcy5pdGVtcy5sZW5ndGgtMTtpPj0wO2ktLSlzPXRoaXMuaXRlbXNbaV0scy5pbnN0YW5jZSE9PXRoaXMuY3VycmVudENvbnRhaW5lciYmdGhpcy5jdXJyZW50Q29udGFpbmVyJiZzLml0ZW1bMF0hPT10aGlzLmN1cnJlbnRJdGVtWzBdfHwobj10aGlzLm9wdGlvbnMudG9sZXJhbmNlRWxlbWVudD90KHRoaXMub3B0aW9ucy50b2xlcmFuY2VFbGVtZW50LHMuaXRlbSk6cy5pdGVtLGV8fChzLndpZHRoPW4ub3V0ZXJXaWR0aCgpLHMuaGVpZ2h0PW4ub3V0ZXJIZWlnaHQoKSksbz1uLm9mZnNldCgpLHMubGVmdD1vLmxlZnQscy50b3A9by50b3ApO2lmKHRoaXMub3B0aW9ucy5jdXN0b20mJnRoaXMub3B0aW9ucy5jdXN0b20ucmVmcmVzaENvbnRhaW5lcnMpdGhpcy5vcHRpb25zLmN1c3RvbS5yZWZyZXNoQ29udGFpbmVycy5jYWxsKHRoaXMpO2Vsc2UgZm9yKGk9dGhpcy5jb250YWluZXJzLmxlbmd0aC0xO2k+PTA7aS0tKW89dGhpcy5jb250YWluZXJzW2ldLmVsZW1lbnQub2Zmc2V0KCksdGhpcy5jb250YWluZXJzW2ldLmNvbnRhaW5lckNhY2hlLmxlZnQ9by5sZWZ0LHRoaXMuY29udGFpbmVyc1tpXS5jb250YWluZXJDYWNoZS50b3A9by50b3AsdGhpcy5jb250YWluZXJzW2ldLmNvbnRhaW5lckNhY2hlLndpZHRoPXRoaXMuY29udGFpbmVyc1tpXS5lbGVtZW50Lm91dGVyV2lkdGgoKSx0aGlzLmNvbnRhaW5lcnNbaV0uY29udGFpbmVyQ2FjaGUuaGVpZ2h0PXRoaXMuY29udGFpbmVyc1tpXS5lbGVtZW50Lm91dGVySGVpZ2h0KCk7cmV0dXJuIHRoaXN9LF9jcmVhdGVQbGFjZWhvbGRlcjpmdW5jdGlvbihlKXtlPWV8fHRoaXM7dmFyIGkscz1lLm9wdGlvbnM7cy5wbGFjZWhvbGRlciYmcy5wbGFjZWhvbGRlci5jb25zdHJ1Y3RvciE9PVN0cmluZ3x8KGk9cy5wbGFjZWhvbGRlcixzLnBsYWNlaG9sZGVyPXtlbGVtZW50OmZ1bmN0aW9uKCl7dmFyIHM9ZS5jdXJyZW50SXRlbVswXS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLG49dCgiPCIrcysiPiIsZS5kb2N1bWVudFswXSk7cmV0dXJuIGUuX2FkZENsYXNzKG4sInVpLXNvcnRhYmxlLXBsYWNlaG9sZGVyIixpfHxlLmN1cnJlbnRJdGVtWzBdLmNsYXNzTmFtZSkuX3JlbW92ZUNsYXNzKG4sInVpLXNvcnRhYmxlLWhlbHBlciIpLCJ0Ym9keSI9PT1zP2UuX2NyZWF0ZVRyUGxhY2Vob2xkZXIoZS5jdXJyZW50SXRlbS5maW5kKCJ0ciIpLmVxKDApLHQoIjx0cj4iLGUuZG9jdW1lbnRbMF0pLmFwcGVuZFRvKG4pKToidHIiPT09cz9lLl9jcmVhdGVUclBsYWNlaG9sZGVyKGUuY3VycmVudEl0ZW0sbik6ImltZyI9PT1zJiZuLmF0dHIoInNyYyIsZS5jdXJyZW50SXRlbS5hdHRyKCJzcmMiKSksaXx8bi5jc3MoInZpc2liaWxpdHkiLCJoaWRkZW4iKSxufSx1cGRhdGU6ZnVuY3Rpb24odCxuKXsoIWl8fHMuZm9yY2VQbGFjZWhvbGRlclNpemUpJiYobi5oZWlnaHQoKXx8bi5oZWlnaHQoZS5jdXJyZW50SXRlbS5pbm5lckhlaWdodCgpLXBhcnNlSW50KGUuY3VycmVudEl0ZW0uY3NzKCJwYWRkaW5nVG9wIil8fDAsMTApLXBhcnNlSW50KGUuY3VycmVudEl0ZW0uY3NzKCJwYWRkaW5nQm90dG9tIil8fDAsMTApKSxuLndpZHRoKCl8fG4ud2lkdGgoZS5jdXJyZW50SXRlbS5pbm5lcldpZHRoKCktcGFyc2VJbnQoZS5jdXJyZW50SXRlbS5jc3MoInBhZGRpbmdMZWZ0Iil8fDAsMTApLXBhcnNlSW50KGUuY3VycmVudEl0ZW0uY3NzKCJwYWRkaW5nUmlnaHQiKXx8MCwxMCkpKX19KSxlLnBsYWNlaG9sZGVyPXQocy5wbGFjZWhvbGRlci5lbGVtZW50LmNhbGwoZS5lbGVtZW50LGUuY3VycmVudEl0ZW0pKSxlLmN1cnJlbnRJdGVtLmFmdGVyKGUucGxhY2Vob2xkZXIpLHMucGxhY2Vob2xkZXIudXBkYXRlKGUsZS5wbGFjZWhvbGRlcil9LF9jcmVhdGVUclBsYWNlaG9sZGVyOmZ1bmN0aW9uKGUsaSl7dmFyIHM9dGhpcztlLmNoaWxkcmVuKCkuZWFjaChmdW5jdGlvbigpe3QoIjx0ZD4mIzE2MDs8L3RkPiIscy5kb2N1bWVudFswXSkuYXR0cigiY29sc3BhbiIsdCh0aGlzKS5hdHRyKCJjb2xzcGFuIil8fDEpLmFwcGVuZFRvKGkpfSl9LF9jb250YWN0Q29udGFpbmVyczpmdW5jdGlvbihlKXt2YXIgaSxzLG4sbyxhLHIsaCxsLGMsdSxkPW51bGwscD1udWxsO2ZvcihpPXRoaXMuY29udGFpbmVycy5sZW5ndGgtMTtpPj0wO2ktLSlpZighdC5jb250YWlucyh0aGlzLmN1cnJlbnRJdGVtWzBdLHRoaXMuY29udGFpbmVyc1tpXS5lbGVtZW50WzBdKSlpZih0aGlzLl9pbnRlcnNlY3RzV2l0aCh0aGlzLmNvbnRhaW5lcnNbaV0uY29udGFpbmVyQ2FjaGUpKXtpZihkJiZ0LmNvbnRhaW5zKHRoaXMuY29udGFpbmVyc1tpXS5lbGVtZW50WzBdLGQuZWxlbWVudFswXSkpY29udGludWU7ZD10aGlzLmNvbnRhaW5lcnNbaV0scD1pfWVsc2UgdGhpcy5jb250YWluZXJzW2ldLmNvbnRhaW5lckNhY2hlLm92ZXImJih0aGlzLmNvbnRhaW5lcnNbaV0uX3RyaWdnZXIoIm91dCIsZSx0aGlzLl91aUhhc2godGhpcykpLHRoaXMuY29udGFpbmVyc1tpXS5jb250YWluZXJDYWNoZS5vdmVyPTApO2lmKGQpaWYoMT09PXRoaXMuY29udGFpbmVycy5sZW5ndGgpdGhpcy5jb250YWluZXJzW3BdLmNvbnRhaW5lckNhY2hlLm92ZXJ8fCh0aGlzLmNvbnRhaW5lcnNbcF0uX3RyaWdnZXIoIm92ZXIiLGUsdGhpcy5fdWlIYXNoKHRoaXMpKSx0aGlzLmNvbnRhaW5lcnNbcF0uY29udGFpbmVyQ2FjaGUub3Zlcj0xKTtlbHNle2ZvcihuPTFlNCxvPW51bGwsYz1kLmZsb2F0aW5nfHx0aGlzLl9pc0Zsb2F0aW5nKHRoaXMuY3VycmVudEl0ZW0pLGE9Yz8ibGVmdCI6InRvcCIscj1jPyJ3aWR0aCI6ImhlaWdodCIsdT1jPyJwYWdlWCI6InBhZ2VZIixzPXRoaXMuaXRlbXMubGVuZ3RoLTE7cz49MDtzLS0pdC5jb250YWlucyh0aGlzLmNvbnRhaW5lcnNbcF0uZWxlbWVudFswXSx0aGlzLml0ZW1zW3NdLml0ZW1bMF0pJiZ0aGlzLml0ZW1zW3NdLml0ZW1bMF0hPT10aGlzLmN1cnJlbnRJdGVtWzBdJiYoaD10aGlzLml0ZW1zW3NdLml0ZW0ub2Zmc2V0KClbYV0sbD0hMSxlW3VdLWg+dGhpcy5pdGVtc1tzXVtyXS8yJiYobD0hMCksbj5NYXRoLmFicyhlW3VdLWgpJiYobj1NYXRoLmFicyhlW3VdLWgpLG89dGhpcy5pdGVtc1tzXSx0aGlzLmRpcmVjdGlvbj1sPyJ1cCI6ImRvd24iKSk7aWYoIW8mJiF0aGlzLm9wdGlvbnMuZHJvcE9uRW1wdHkpcmV0dXJuO2lmKHRoaXMuY3VycmVudENvbnRhaW5lcj09PXRoaXMuY29udGFpbmVyc1twXSlyZXR1cm4gdGhpcy5jdXJyZW50Q29udGFpbmVyLmNvbnRhaW5lckNhY2hlLm92ZXJ8fCh0aGlzLmNvbnRhaW5lcnNbcF0uX3RyaWdnZXIoIm92ZXIiLGUsdGhpcy5fdWlIYXNoKCkpLHRoaXMuY3VycmVudENvbnRhaW5lci5jb250YWluZXJDYWNoZS5vdmVyPTEpLHZvaWQgMDtvP3RoaXMuX3JlYXJyYW5nZShlLG8sbnVsbCwhMCk6dGhpcy5fcmVhcnJhbmdlKGUsbnVsbCx0aGlzLmNvbnRhaW5lcnNbcF0uZWxlbWVudCwhMCksdGhpcy5fdHJpZ2dlcigiY2hhbmdlIixlLHRoaXMuX3VpSGFzaCgpKSx0aGlzLmNvbnRhaW5lcnNbcF0uX3RyaWdnZXIoImNoYW5nZSIsZSx0aGlzLl91aUhhc2godGhpcykpLHRoaXMuY3VycmVudENvbnRhaW5lcj10aGlzLmNvbnRhaW5lcnNbcF0sdGhpcy5vcHRpb25zLnBsYWNlaG9sZGVyLnVwZGF0ZSh0aGlzLmN1cnJlbnRDb250YWluZXIsdGhpcy5wbGFjZWhvbGRlciksdGhpcy5jb250YWluZXJzW3BdLl90cmlnZ2VyKCJvdmVyIixlLHRoaXMuX3VpSGFzaCh0aGlzKSksdGhpcy5jb250YWluZXJzW3BdLmNvbnRhaW5lckNhY2hlLm92ZXI9MX19LF9jcmVhdGVIZWxwZXI6ZnVuY3Rpb24oZSl7dmFyIGk9dGhpcy5vcHRpb25zLHM9dC5pc0Z1bmN0aW9uKGkuaGVscGVyKT90KGkuaGVscGVyLmFwcGx5KHRoaXMuZWxlbWVudFswXSxbZSx0aGlzLmN1cnJlbnRJdGVtXSkpOiJjbG9uZSI9PT1pLmhlbHBlcj90aGlzLmN1cnJlbnRJdGVtLmNsb25lKCk6dGhpcy5jdXJyZW50SXRlbTtyZXR1cm4gcy5wYXJlbnRzKCJib2R5IikubGVuZ3RofHx0KCJwYXJlbnQiIT09aS5hcHBlbmRUbz9pLmFwcGVuZFRvOnRoaXMuY3VycmVudEl0ZW1bMF0ucGFyZW50Tm9kZSlbMF0uYXBwZW5kQ2hpbGQoc1swXSksc1swXT09PXRoaXMuY3VycmVudEl0ZW1bMF0mJih0aGlzLl9zdG9yZWRDU1M9e3dpZHRoOnRoaXMuY3VycmVudEl0ZW1bMF0uc3R5bGUud2lkdGgsaGVpZ2h0OnRoaXMuY3VycmVudEl0ZW1bMF0uc3R5bGUuaGVpZ2h0LHBvc2l0aW9uOnRoaXMuY3VycmVudEl0ZW0uY3NzKCJwb3NpdGlvbiIpLHRvcDp0aGlzLmN1cnJlbnRJdGVtLmNzcygidG9wIiksbGVmdDp0aGlzLmN1cnJlbnRJdGVtLmNzcygibGVmdCIpfSksKCFzWzBdLnN0eWxlLndpZHRofHxpLmZvcmNlSGVscGVyU2l6ZSkmJnMud2lkdGgodGhpcy5jdXJyZW50SXRlbS53aWR0aCgpKSwoIXNbMF0uc3R5bGUuaGVpZ2h0fHxpLmZvcmNlSGVscGVyU2l6ZSkmJnMuaGVpZ2h0KHRoaXMuY3VycmVudEl0ZW0uaGVpZ2h0KCkpLHN9LF9hZGp1c3RPZmZzZXRGcm9tSGVscGVyOmZ1bmN0aW9uKGUpeyJzdHJpbmciPT10eXBlb2YgZSYmKGU9ZS5zcGxpdCgiICIpKSx0LmlzQXJyYXkoZSkmJihlPXtsZWZ0OitlWzBdLHRvcDorZVsxXXx8MH0pLCJsZWZ0ImluIGUmJih0aGlzLm9mZnNldC5jbGljay5sZWZ0PWUubGVmdCt0aGlzLm1hcmdpbnMubGVmdCksInJpZ2h0ImluIGUmJih0aGlzLm9mZnNldC5jbGljay5sZWZ0PXRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgtZS5yaWdodCt0aGlzLm1hcmdpbnMubGVmdCksInRvcCJpbiBlJiYodGhpcy5vZmZzZXQuY2xpY2sudG9wPWUudG9wK3RoaXMubWFyZ2lucy50b3ApLCJib3R0b20iaW4gZSYmKHRoaXMub2Zmc2V0LmNsaWNrLnRvcD10aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodC1lLmJvdHRvbSt0aGlzLm1hcmdpbnMudG9wKX0sX2dldFBhcmVudE9mZnNldDpmdW5jdGlvbigpe3RoaXMub2Zmc2V0UGFyZW50PXRoaXMuaGVscGVyLm9mZnNldFBhcmVudCgpO3ZhciBlPXRoaXMub2Zmc2V0UGFyZW50Lm9mZnNldCgpO3JldHVybiJhYnNvbHV0ZSI9PT10aGlzLmNzc1Bvc2l0aW9uJiZ0aGlzLnNjcm9sbFBhcmVudFswXSE9PXRoaXMuZG9jdW1lbnRbMF0mJnQuY29udGFpbnModGhpcy5zY3JvbGxQYXJlbnRbMF0sdGhpcy5vZmZzZXRQYXJlbnRbMF0pJiYoZS5sZWZ0Kz10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0KCksZS50b3ArPXRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpKSwodGhpcy5vZmZzZXRQYXJlbnRbMF09PT10aGlzLmRvY3VtZW50WzBdLmJvZHl8fHRoaXMub2Zmc2V0UGFyZW50WzBdLnRhZ05hbWUmJiJodG1sIj09PXRoaXMub2Zmc2V0UGFyZW50WzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKSYmdC51aS5pZSkmJihlPXt0b3A6MCxsZWZ0OjB9KSx7dG9wOmUudG9wKyhwYXJzZUludCh0aGlzLm9mZnNldFBhcmVudC5jc3MoImJvcmRlclRvcFdpZHRoIiksMTApfHwwKSxsZWZ0OmUubGVmdCsocGFyc2VJbnQodGhpcy5vZmZzZXRQYXJlbnQuY3NzKCJib3JkZXJMZWZ0V2lkdGgiKSwxMCl8fDApfX0sX2dldFJlbGF0aXZlT2Zmc2V0OmZ1bmN0aW9uKCl7aWYoInJlbGF0aXZlIj09PXRoaXMuY3NzUG9zaXRpb24pe3ZhciB0PXRoaXMuY3VycmVudEl0ZW0ucG9zaXRpb24oKTtyZXR1cm57dG9wOnQudG9wLShwYXJzZUludCh0aGlzLmhlbHBlci5jc3MoInRvcCIpLDEwKXx8MCkrdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsVG9wKCksbGVmdDp0LmxlZnQtKHBhcnNlSW50KHRoaXMuaGVscGVyLmNzcygibGVmdCIpLDEwKXx8MCkrdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpfX1yZXR1cm57dG9wOjAsbGVmdDowfX0sX2NhY2hlTWFyZ2luczpmdW5jdGlvbigpe3RoaXMubWFyZ2lucz17bGVmdDpwYXJzZUludCh0aGlzLmN1cnJlbnRJdGVtLmNzcygibWFyZ2luTGVmdCIpLDEwKXx8MCx0b3A6cGFyc2VJbnQodGhpcy5jdXJyZW50SXRlbS5jc3MoIm1hcmdpblRvcCIpLDEwKXx8MH19LF9jYWNoZUhlbHBlclByb3BvcnRpb25zOmZ1bmN0aW9uKCl7dGhpcy5oZWxwZXJQcm9wb3J0aW9ucz17d2lkdGg6dGhpcy5oZWxwZXIub3V0ZXJXaWR0aCgpLGhlaWdodDp0aGlzLmhlbHBlci5vdXRlckhlaWdodCgpfX0sX3NldENvbnRhaW5tZW50OmZ1bmN0aW9uKCl7dmFyIGUsaSxzLG49dGhpcy5vcHRpb25zOyJwYXJlbnQiPT09bi5jb250YWlubWVudCYmKG4uY29udGFpbm1lbnQ9dGhpcy5oZWxwZXJbMF0ucGFyZW50Tm9kZSksKCJkb2N1bWVudCI9PT1uLmNvbnRhaW5tZW50fHwid2luZG93Ij09PW4uY29udGFpbm1lbnQpJiYodGhpcy5jb250YWlubWVudD1bMC10aGlzLm9mZnNldC5yZWxhdGl2ZS5sZWZ0LXRoaXMub2Zmc2V0LnBhcmVudC5sZWZ0LDAtdGhpcy5vZmZzZXQucmVsYXRpdmUudG9wLXRoaXMub2Zmc2V0LnBhcmVudC50b3AsImRvY3VtZW50Ij09PW4uY29udGFpbm1lbnQ/dGhpcy5kb2N1bWVudC53aWR0aCgpOnRoaXMud2luZG93LndpZHRoKCktdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aC10aGlzLm1hcmdpbnMubGVmdCwoImRvY3VtZW50Ij09PW4uY29udGFpbm1lbnQ/dGhpcy5kb2N1bWVudC5oZWlnaHQoKXx8ZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlLnNjcm9sbEhlaWdodDp0aGlzLndpbmRvdy5oZWlnaHQoKXx8dGhpcy5kb2N1bWVudFswXS5ib2R5LnBhcmVudE5vZGUuc2Nyb2xsSGVpZ2h0KS10aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodC10aGlzLm1hcmdpbnMudG9wXSksL14oZG9jdW1lbnR8d2luZG93fHBhcmVudCkkLy50ZXN0KG4uY29udGFpbm1lbnQpfHwoZT10KG4uY29udGFpbm1lbnQpWzBdLGk9dChuLmNvbnRhaW5tZW50KS5vZmZzZXQoKSxzPSJoaWRkZW4iIT09dChlKS5jc3MoIm92ZXJmbG93IiksdGhpcy5jb250YWlubWVudD1baS5sZWZ0KyhwYXJzZUludCh0KGUpLmNzcygiYm9yZGVyTGVmdFdpZHRoIiksMTApfHwwKSsocGFyc2VJbnQodChlKS5jc3MoInBhZGRpbmdMZWZ0IiksMTApfHwwKS10aGlzLm1hcmdpbnMubGVmdCxpLnRvcCsocGFyc2VJbnQodChlKS5jc3MoImJvcmRlclRvcFdpZHRoIiksMTApfHwwKSsocGFyc2VJbnQodChlKS5jc3MoInBhZGRpbmdUb3AiKSwxMCl8fDApLXRoaXMubWFyZ2lucy50b3AsaS5sZWZ0KyhzP01hdGgubWF4KGUuc2Nyb2xsV2lkdGgsZS5vZmZzZXRXaWR0aCk6ZS5vZmZzZXRXaWR0aCktKHBhcnNlSW50KHQoZSkuY3NzKCJib3JkZXJMZWZ0V2lkdGgiKSwxMCl8fDApLShwYXJzZUludCh0KGUpLmNzcygicGFkZGluZ1JpZ2h0IiksMTApfHwwKS10aGlzLmhlbHBlclByb3BvcnRpb25zLndpZHRoLXRoaXMubWFyZ2lucy5sZWZ0LGkudG9wKyhzP01hdGgubWF4KGUuc2Nyb2xsSGVpZ2h0LGUub2Zmc2V0SGVpZ2h0KTplLm9mZnNldEhlaWdodCktKHBhcnNlSW50KHQoZSkuY3NzKCJib3JkZXJUb3BXaWR0aCIpLDEwKXx8MCktKHBhcnNlSW50KHQoZSkuY3NzKCJwYWRkaW5nQm90dG9tIiksMTApfHwwKS10aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodC10aGlzLm1hcmdpbnMudG9wXSl9LF9jb252ZXJ0UG9zaXRpb25UbzpmdW5jdGlvbihlLGkpe2l8fChpPXRoaXMucG9zaXRpb24pO3ZhciBzPSJhYnNvbHV0ZSI9PT1lPzE6LTEsbj0iYWJzb2x1dGUiIT09dGhpcy5jc3NQb3NpdGlvbnx8dGhpcy5zY3JvbGxQYXJlbnRbMF0hPT10aGlzLmRvY3VtZW50WzBdJiZ0LmNvbnRhaW5zKHRoaXMuc2Nyb2xsUGFyZW50WzBdLHRoaXMub2Zmc2V0UGFyZW50WzBdKT90aGlzLnNjcm9sbFBhcmVudDp0aGlzLm9mZnNldFBhcmVudCxvPS8oaHRtbHxib2R5KS9pLnRlc3QoblswXS50YWdOYW1lKTtyZXR1cm57dG9wOmkudG9wK3RoaXMub2Zmc2V0LnJlbGF0aXZlLnRvcCpzK3RoaXMub2Zmc2V0LnBhcmVudC50b3Aqcy0oImZpeGVkIj09PXRoaXMuY3NzUG9zaXRpb24/LXRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpOm8/MDpuLnNjcm9sbFRvcCgpKSpzLGxlZnQ6aS5sZWZ0K3RoaXMub2Zmc2V0LnJlbGF0aXZlLmxlZnQqcyt0aGlzLm9mZnNldC5wYXJlbnQubGVmdCpzLSgiZml4ZWQiPT09dGhpcy5jc3NQb3NpdGlvbj8tdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpOm8/MDpuLnNjcm9sbExlZnQoKSkqc319LF9nZW5lcmF0ZVBvc2l0aW9uOmZ1bmN0aW9uKGUpe3ZhciBpLHMsbj10aGlzLm9wdGlvbnMsbz1lLnBhZ2VYLGE9ZS5wYWdlWSxyPSJhYnNvbHV0ZSIhPT10aGlzLmNzc1Bvc2l0aW9ufHx0aGlzLnNjcm9sbFBhcmVudFswXSE9PXRoaXMuZG9jdW1lbnRbMF0mJnQuY29udGFpbnModGhpcy5zY3JvbGxQYXJlbnRbMF0sdGhpcy5vZmZzZXRQYXJlbnRbMF0pP3RoaXMuc2Nyb2xsUGFyZW50OnRoaXMub2Zmc2V0UGFyZW50LGg9LyhodG1sfGJvZHkpL2kudGVzdChyWzBdLnRhZ05hbWUpO3JldHVybiJyZWxhdGl2ZSIhPT10aGlzLmNzc1Bvc2l0aW9ufHx0aGlzLnNjcm9sbFBhcmVudFswXSE9PXRoaXMuZG9jdW1lbnRbMF0mJnRoaXMuc2Nyb2xsUGFyZW50WzBdIT09dGhpcy5vZmZzZXRQYXJlbnRbMF18fCh0aGlzLm9mZnNldC5yZWxhdGl2ZT10aGlzLl9nZXRSZWxhdGl2ZU9mZnNldCgpKSx0aGlzLm9yaWdpbmFsUG9zaXRpb24mJih0aGlzLmNvbnRhaW5tZW50JiYoZS5wYWdlWC10aGlzLm9mZnNldC5jbGljay5sZWZ0PHRoaXMuY29udGFpbm1lbnRbMF0mJihvPXRoaXMuY29udGFpbm1lbnRbMF0rdGhpcy5vZmZzZXQuY2xpY2subGVmdCksZS5wYWdlWS10aGlzLm9mZnNldC5jbGljay50b3A8dGhpcy5jb250YWlubWVudFsxXSYmKGE9dGhpcy5jb250YWlubWVudFsxXSt0aGlzLm9mZnNldC5jbGljay50b3ApLGUucGFnZVgtdGhpcy5vZmZzZXQuY2xpY2subGVmdD50aGlzLmNvbnRhaW5tZW50WzJdJiYobz10aGlzLmNvbnRhaW5tZW50WzJdK3RoaXMub2Zmc2V0LmNsaWNrLmxlZnQpLGUucGFnZVktdGhpcy5vZmZzZXQuY2xpY2sudG9wPnRoaXMuY29udGFpbm1lbnRbM10mJihhPXRoaXMuY29udGFpbm1lbnRbM10rdGhpcy5vZmZzZXQuY2xpY2sudG9wKSksbi5ncmlkJiYoaT10aGlzLm9yaWdpbmFsUGFnZVkrTWF0aC5yb3VuZCgoYS10aGlzLm9yaWdpbmFsUGFnZVkpL24uZ3JpZFsxXSkqbi5ncmlkWzFdLGE9dGhpcy5jb250YWlubWVudD9pLXRoaXMub2Zmc2V0LmNsaWNrLnRvcD49dGhpcy5jb250YWlubWVudFsxXSYmaS10aGlzLm9mZnNldC5jbGljay50b3A8PXRoaXMuY29udGFpbm1lbnRbM10/aTppLXRoaXMub2Zmc2V0LmNsaWNrLnRvcD49dGhpcy5jb250YWlubWVudFsxXT9pLW4uZ3JpZFsxXTppK24uZ3JpZFsxXTppLHM9dGhpcy5vcmlnaW5hbFBhZ2VYK01hdGgucm91bmQoKG8tdGhpcy5vcmlnaW5hbFBhZ2VYKS9uLmdyaWRbMF0pKm4uZ3JpZFswXSxvPXRoaXMuY29udGFpbm1lbnQ/cy10aGlzLm9mZnNldC5jbGljay5sZWZ0Pj10aGlzLmNvbnRhaW5tZW50WzBdJiZzLXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQ8PXRoaXMuY29udGFpbm1lbnRbMl0/czpzLXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQ+PXRoaXMuY29udGFpbm1lbnRbMF0/cy1uLmdyaWRbMF06cytuLmdyaWRbMF06cykpLHt0b3A6YS10aGlzLm9mZnNldC5jbGljay50b3AtdGhpcy5vZmZzZXQucmVsYXRpdmUudG9wLXRoaXMub2Zmc2V0LnBhcmVudC50b3ArKCJmaXhlZCI9PT10aGlzLmNzc1Bvc2l0aW9uPy10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKTpoPzA6ci5zY3JvbGxUb3AoKSksbGVmdDpvLXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQtdGhpcy5vZmZzZXQucmVsYXRpdmUubGVmdC10aGlzLm9mZnNldC5wYXJlbnQubGVmdCsoImZpeGVkIj09PXRoaXMuY3NzUG9zaXRpb24/LXRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbExlZnQoKTpoPzA6ci5zY3JvbGxMZWZ0KCkpfX0sX3JlYXJyYW5nZTpmdW5jdGlvbih0LGUsaSxzKXtpP2lbMF0uYXBwZW5kQ2hpbGQodGhpcy5wbGFjZWhvbGRlclswXSk6ZS5pdGVtWzBdLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMucGxhY2Vob2xkZXJbMF0sImRvd24iPT09dGhpcy5kaXJlY3Rpb24/ZS5pdGVtWzBdOmUuaXRlbVswXS5uZXh0U2libGluZyksdGhpcy5jb3VudGVyPXRoaXMuY291bnRlcj8rK3RoaXMuY291bnRlcjoxO3ZhciBuPXRoaXMuY291bnRlcjsKICAgIHRoaXMuX2RlbGF5KGZ1bmN0aW9uKCl7bj09PXRoaXMuY291bnRlciYmdGhpcy5yZWZyZXNoUG9zaXRpb25zKCFzKX0pfSxfY2xlYXI6ZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBpKHQsZSxpKXtyZXR1cm4gZnVuY3Rpb24ocyl7aS5fdHJpZ2dlcih0LHMsZS5fdWlIYXNoKGUpKX19dGhpcy5yZXZlcnRpbmc9ITE7dmFyIHMsbj1bXTtpZighdGhpcy5fbm9GaW5hbFNvcnQmJnRoaXMuY3VycmVudEl0ZW0ucGFyZW50KCkubGVuZ3RoJiZ0aGlzLnBsYWNlaG9sZGVyLmJlZm9yZSh0aGlzLmN1cnJlbnRJdGVtKSx0aGlzLl9ub0ZpbmFsU29ydD1udWxsLHRoaXMuaGVscGVyWzBdPT09dGhpcy5jdXJyZW50SXRlbVswXSl7Zm9yKHMgaW4gdGhpcy5fc3RvcmVkQ1NTKSgiYXV0byI9PT10aGlzLl9zdG9yZWRDU1Nbc118fCJzdGF0aWMiPT09dGhpcy5fc3RvcmVkQ1NTW3NdKSYmKHRoaXMuX3N0b3JlZENTU1tzXT0iIik7dGhpcy5jdXJyZW50SXRlbS5jc3ModGhpcy5fc3RvcmVkQ1NTKSx0aGlzLl9yZW1vdmVDbGFzcyh0aGlzLmN1cnJlbnRJdGVtLCJ1aS1zb3J0YWJsZS1oZWxwZXIiKX1lbHNlIHRoaXMuY3VycmVudEl0ZW0uc2hvdygpO2Zvcih0aGlzLmZyb21PdXRzaWRlJiYhZSYmbi5wdXNoKGZ1bmN0aW9uKHQpe3RoaXMuX3RyaWdnZXIoInJlY2VpdmUiLHQsdGhpcy5fdWlIYXNoKHRoaXMuZnJvbU91dHNpZGUpKX0pLCF0aGlzLmZyb21PdXRzaWRlJiZ0aGlzLmRvbVBvc2l0aW9uLnByZXY9PT10aGlzLmN1cnJlbnRJdGVtLnByZXYoKS5ub3QoIi51aS1zb3J0YWJsZS1oZWxwZXIiKVswXSYmdGhpcy5kb21Qb3NpdGlvbi5wYXJlbnQ9PT10aGlzLmN1cnJlbnRJdGVtLnBhcmVudCgpWzBdfHxlfHxuLnB1c2goZnVuY3Rpb24odCl7dGhpcy5fdHJpZ2dlcigidXBkYXRlIix0LHRoaXMuX3VpSGFzaCgpKX0pLHRoaXMhPT10aGlzLmN1cnJlbnRDb250YWluZXImJihlfHwobi5wdXNoKGZ1bmN0aW9uKHQpe3RoaXMuX3RyaWdnZXIoInJlbW92ZSIsdCx0aGlzLl91aUhhc2goKSl9KSxuLnB1c2goZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3QuX3RyaWdnZXIoInJlY2VpdmUiLGUsdGhpcy5fdWlIYXNoKHRoaXMpKX19LmNhbGwodGhpcyx0aGlzLmN1cnJlbnRDb250YWluZXIpKSxuLnB1c2goZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3QuX3RyaWdnZXIoInVwZGF0ZSIsZSx0aGlzLl91aUhhc2godGhpcykpfX0uY2FsbCh0aGlzLHRoaXMuY3VycmVudENvbnRhaW5lcikpKSkscz10aGlzLmNvbnRhaW5lcnMubGVuZ3RoLTE7cz49MDtzLS0pZXx8bi5wdXNoKGkoImRlYWN0aXZhdGUiLHRoaXMsdGhpcy5jb250YWluZXJzW3NdKSksdGhpcy5jb250YWluZXJzW3NdLmNvbnRhaW5lckNhY2hlLm92ZXImJihuLnB1c2goaSgib3V0Iix0aGlzLHRoaXMuY29udGFpbmVyc1tzXSkpLHRoaXMuY29udGFpbmVyc1tzXS5jb250YWluZXJDYWNoZS5vdmVyPTApO2lmKHRoaXMuc3RvcmVkQ3Vyc29yJiYodGhpcy5kb2N1bWVudC5maW5kKCJib2R5IikuY3NzKCJjdXJzb3IiLHRoaXMuc3RvcmVkQ3Vyc29yKSx0aGlzLnN0b3JlZFN0eWxlc2hlZXQucmVtb3ZlKCkpLHRoaXMuX3N0b3JlZE9wYWNpdHkmJnRoaXMuaGVscGVyLmNzcygib3BhY2l0eSIsdGhpcy5fc3RvcmVkT3BhY2l0eSksdGhpcy5fc3RvcmVkWkluZGV4JiZ0aGlzLmhlbHBlci5jc3MoInpJbmRleCIsImF1dG8iPT09dGhpcy5fc3RvcmVkWkluZGV4PyIiOnRoaXMuX3N0b3JlZFpJbmRleCksdGhpcy5kcmFnZ2luZz0hMSxlfHx0aGlzLl90cmlnZ2VyKCJiZWZvcmVTdG9wIix0LHRoaXMuX3VpSGFzaCgpKSx0aGlzLnBsYWNlaG9sZGVyWzBdLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5wbGFjZWhvbGRlclswXSksdGhpcy5jYW5jZWxIZWxwZXJSZW1vdmFsfHwodGhpcy5oZWxwZXJbMF0hPT10aGlzLmN1cnJlbnRJdGVtWzBdJiZ0aGlzLmhlbHBlci5yZW1vdmUoKSx0aGlzLmhlbHBlcj1udWxsKSwhZSl7Zm9yKHM9MDtuLmxlbmd0aD5zO3MrKyluW3NdLmNhbGwodGhpcyx0KTt0aGlzLl90cmlnZ2VyKCJzdG9wIix0LHRoaXMuX3VpSGFzaCgpKX1yZXR1cm4gdGhpcy5mcm9tT3V0c2lkZT0hMSwhdGhpcy5jYW5jZWxIZWxwZXJSZW1vdmFsfSxfdHJpZ2dlcjpmdW5jdGlvbigpe3QuV2lkZ2V0LnByb3RvdHlwZS5fdHJpZ2dlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk9PT0hMSYmdGhpcy5jYW5jZWwoKX0sX3VpSGFzaDpmdW5jdGlvbihlKXt2YXIgaT1lfHx0aGlzO3JldHVybntoZWxwZXI6aS5oZWxwZXIscGxhY2Vob2xkZXI6aS5wbGFjZWhvbGRlcnx8dChbXSkscG9zaXRpb246aS5wb3NpdGlvbixvcmlnaW5hbFBvc2l0aW9uOmkub3JpZ2luYWxQb3NpdGlvbixvZmZzZXQ6aS5wb3NpdGlvbkFicyxpdGVtOmkuY3VycmVudEl0ZW0sc2VuZGVyOmU/ZS5lbGVtZW50Om51bGx9fX0pLHQud2lkZ2V0KCJ1aS5zcGlubmVyIix7dmVyc2lvbjoiMS4xMi4xIixkZWZhdWx0RWxlbWVudDoiPGlucHV0PiIsd2lkZ2V0RXZlbnRQcmVmaXg6InNwaW4iLG9wdGlvbnM6e2NsYXNzZXM6eyJ1aS1zcGlubmVyIjoidWktY29ybmVyLWFsbCIsInVpLXNwaW5uZXItZG93biI6InVpLWNvcm5lci1iciIsInVpLXNwaW5uZXItdXAiOiJ1aS1jb3JuZXItdHIifSxjdWx0dXJlOm51bGwsaWNvbnM6e2Rvd246InVpLWljb24tdHJpYW5nbGUtMS1zIix1cDoidWktaWNvbi10cmlhbmdsZS0xLW4ifSxpbmNyZW1lbnRhbDohMCxtYXg6bnVsbCxtaW46bnVsbCxudW1iZXJGb3JtYXQ6bnVsbCxwYWdlOjEwLHN0ZXA6MSxjaGFuZ2U6bnVsbCxzcGluOm51bGwsc3RhcnQ6bnVsbCxzdG9wOm51bGx9LF9jcmVhdGU6ZnVuY3Rpb24oKXt0aGlzLl9zZXRPcHRpb24oIm1heCIsdGhpcy5vcHRpb25zLm1heCksdGhpcy5fc2V0T3B0aW9uKCJtaW4iLHRoaXMub3B0aW9ucy5taW4pLHRoaXMuX3NldE9wdGlvbigic3RlcCIsdGhpcy5vcHRpb25zLnN0ZXApLCIiIT09dGhpcy52YWx1ZSgpJiZ0aGlzLl92YWx1ZSh0aGlzLmVsZW1lbnQudmFsKCksITApLHRoaXMuX2RyYXcoKSx0aGlzLl9vbih0aGlzLl9ldmVudHMpLHRoaXMuX3JlZnJlc2goKSx0aGlzLl9vbih0aGlzLndpbmRvdyx7YmVmb3JldW5sb2FkOmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LnJlbW92ZUF0dHIoImF1dG9jb21wbGV0ZSIpfX0pfSxfZ2V0Q3JlYXRlT3B0aW9uczpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX3N1cGVyKCksaT10aGlzLmVsZW1lbnQ7cmV0dXJuIHQuZWFjaChbIm1pbiIsIm1heCIsInN0ZXAiXSxmdW5jdGlvbih0LHMpe3ZhciBuPWkuYXR0cihzKTtudWxsIT1uJiZuLmxlbmd0aCYmKGVbc109bil9KSxlfSxfZXZlbnRzOntrZXlkb3duOmZ1bmN0aW9uKHQpe3RoaXMuX3N0YXJ0KHQpJiZ0aGlzLl9rZXlkb3duKHQpJiZ0LnByZXZlbnREZWZhdWx0KCl9LGtleXVwOiJfc3RvcCIsZm9jdXM6ZnVuY3Rpb24oKXt0aGlzLnByZXZpb3VzPXRoaXMuZWxlbWVudC52YWwoKX0sYmx1cjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jYW5jZWxCbHVyPyhkZWxldGUgdGhpcy5jYW5jZWxCbHVyLHZvaWQgMCk6KHRoaXMuX3N0b3AoKSx0aGlzLl9yZWZyZXNoKCksdGhpcy5wcmV2aW91cyE9PXRoaXMuZWxlbWVudC52YWwoKSYmdGhpcy5fdHJpZ2dlcigiY2hhbmdlIix0KSx2b2lkIDApfSxtb3VzZXdoZWVsOmZ1bmN0aW9uKHQsZSl7aWYoZSl7aWYoIXRoaXMuc3Bpbm5pbmcmJiF0aGlzLl9zdGFydCh0KSlyZXR1cm4hMTt0aGlzLl9zcGluKChlPjA/MTotMSkqdGhpcy5vcHRpb25zLnN0ZXAsdCksY2xlYXJUaW1lb3V0KHRoaXMubW91c2V3aGVlbFRpbWVyKSx0aGlzLm1vdXNld2hlZWxUaW1lcj10aGlzLl9kZWxheShmdW5jdGlvbigpe3RoaXMuc3Bpbm5pbmcmJnRoaXMuX3N0b3AodCl9LDEwMCksdC5wcmV2ZW50RGVmYXVsdCgpfX0sIm1vdXNlZG93biAudWktc3Bpbm5lci1idXR0b24iOmZ1bmN0aW9uKGUpe2Z1bmN0aW9uIGkoKXt2YXIgZT10aGlzLmVsZW1lbnRbMF09PT10LnVpLnNhZmVBY3RpdmVFbGVtZW50KHRoaXMuZG9jdW1lbnRbMF0pO2V8fCh0aGlzLmVsZW1lbnQudHJpZ2dlcigiZm9jdXMiKSx0aGlzLnByZXZpb3VzPXMsdGhpcy5fZGVsYXkoZnVuY3Rpb24oKXt0aGlzLnByZXZpb3VzPXN9KSl9dmFyIHM7cz10aGlzLmVsZW1lbnRbMF09PT10LnVpLnNhZmVBY3RpdmVFbGVtZW50KHRoaXMuZG9jdW1lbnRbMF0pP3RoaXMucHJldmlvdXM6dGhpcy5lbGVtZW50LnZhbCgpLGUucHJldmVudERlZmF1bHQoKSxpLmNhbGwodGhpcyksdGhpcy5jYW5jZWxCbHVyPSEwLHRoaXMuX2RlbGF5KGZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXMuY2FuY2VsQmx1cixpLmNhbGwodGhpcyl9KSx0aGlzLl9zdGFydChlKSE9PSExJiZ0aGlzLl9yZXBlYXQobnVsbCx0KGUuY3VycmVudFRhcmdldCkuaGFzQ2xhc3MoInVpLXNwaW5uZXItdXAiKT8xOi0xLGUpfSwibW91c2V1cCAudWktc3Bpbm5lci1idXR0b24iOiJfc3RvcCIsIm1vdXNlZW50ZXIgLnVpLXNwaW5uZXItYnV0dG9uIjpmdW5jdGlvbihlKXtyZXR1cm4gdChlLmN1cnJlbnRUYXJnZXQpLmhhc0NsYXNzKCJ1aS1zdGF0ZS1hY3RpdmUiKT90aGlzLl9zdGFydChlKT09PSExPyExOih0aGlzLl9yZXBlYXQobnVsbCx0KGUuY3VycmVudFRhcmdldCkuaGFzQ2xhc3MoInVpLXNwaW5uZXItdXAiKT8xOi0xLGUpLHZvaWQgMCk6dm9pZCAwfSwibW91c2VsZWF2ZSAudWktc3Bpbm5lci1idXR0b24iOiJfc3RvcCJ9LF9lbmhhbmNlOmZ1bmN0aW9uKCl7dGhpcy51aVNwaW5uZXI9dGhpcy5lbGVtZW50LmF0dHIoImF1dG9jb21wbGV0ZSIsIm9mZiIpLndyYXAoIjxzcGFuPiIpLnBhcmVudCgpLmFwcGVuZCgiPGE+PC9hPjxhPjwvYT4iKX0sX2RyYXc6ZnVuY3Rpb24oKXt0aGlzLl9lbmhhbmNlKCksdGhpcy5fYWRkQ2xhc3ModGhpcy51aVNwaW5uZXIsInVpLXNwaW5uZXIiLCJ1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQiKSx0aGlzLl9hZGRDbGFzcygidWktc3Bpbm5lci1pbnB1dCIpLHRoaXMuZWxlbWVudC5hdHRyKCJyb2xlIiwic3BpbmJ1dHRvbiIpLHRoaXMuYnV0dG9ucz10aGlzLnVpU3Bpbm5lci5jaGlsZHJlbigiYSIpLmF0dHIoInRhYkluZGV4IiwtMSkuYXR0cigiYXJpYS1oaWRkZW4iLCEwKS5idXR0b24oe2NsYXNzZXM6eyJ1aS1idXR0b24iOiIifX0pLHRoaXMuX3JlbW92ZUNsYXNzKHRoaXMuYnV0dG9ucywidWktY29ybmVyLWFsbCIpLHRoaXMuX2FkZENsYXNzKHRoaXMuYnV0dG9ucy5maXJzdCgpLCJ1aS1zcGlubmVyLWJ1dHRvbiB1aS1zcGlubmVyLXVwIiksdGhpcy5fYWRkQ2xhc3ModGhpcy5idXR0b25zLmxhc3QoKSwidWktc3Bpbm5lci1idXR0b24gdWktc3Bpbm5lci1kb3duIiksdGhpcy5idXR0b25zLmZpcnN0KCkuYnV0dG9uKHtpY29uOnRoaXMub3B0aW9ucy5pY29ucy51cCxzaG93TGFiZWw6ITF9KSx0aGlzLmJ1dHRvbnMubGFzdCgpLmJ1dHRvbih7aWNvbjp0aGlzLm9wdGlvbnMuaWNvbnMuZG93bixzaG93TGFiZWw6ITF9KSx0aGlzLmJ1dHRvbnMuaGVpZ2h0KCk+TWF0aC5jZWlsKC41KnRoaXMudWlTcGlubmVyLmhlaWdodCgpKSYmdGhpcy51aVNwaW5uZXIuaGVpZ2h0KCk+MCYmdGhpcy51aVNwaW5uZXIuaGVpZ2h0KHRoaXMudWlTcGlubmVyLmhlaWdodCgpKX0sX2tleWRvd246ZnVuY3Rpb24oZSl7dmFyIGk9dGhpcy5vcHRpb25zLHM9dC51aS5rZXlDb2RlO3N3aXRjaChlLmtleUNvZGUpe2Nhc2Ugcy5VUDpyZXR1cm4gdGhpcy5fcmVwZWF0KG51bGwsMSxlKSwhMDtjYXNlIHMuRE9XTjpyZXR1cm4gdGhpcy5fcmVwZWF0KG51bGwsLTEsZSksITA7Y2FzZSBzLlBBR0VfVVA6cmV0dXJuIHRoaXMuX3JlcGVhdChudWxsLGkucGFnZSxlKSwhMDtjYXNlIHMuUEFHRV9ET1dOOnJldHVybiB0aGlzLl9yZXBlYXQobnVsbCwtaS5wYWdlLGUpLCEwfXJldHVybiExfSxfc3RhcnQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc3Bpbm5pbmd8fHRoaXMuX3RyaWdnZXIoInN0YXJ0Iix0KSE9PSExPyh0aGlzLmNvdW50ZXJ8fCh0aGlzLmNvdW50ZXI9MSksdGhpcy5zcGlubmluZz0hMCwhMCk6ITF9LF9yZXBlYXQ6ZnVuY3Rpb24odCxlLGkpe3Q9dHx8NTAwLGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKSx0aGlzLnRpbWVyPXRoaXMuX2RlbGF5KGZ1bmN0aW9uKCl7dGhpcy5fcmVwZWF0KDQwLGUsaSl9LHQpLHRoaXMuX3NwaW4oZSp0aGlzLm9wdGlvbnMuc3RlcCxpKX0sX3NwaW46ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLnZhbHVlKCl8fDA7dGhpcy5jb3VudGVyfHwodGhpcy5jb3VudGVyPTEpLGk9dGhpcy5fYWRqdXN0VmFsdWUoaSt0KnRoaXMuX2luY3JlbWVudCh0aGlzLmNvdW50ZXIpKSx0aGlzLnNwaW5uaW5nJiZ0aGlzLl90cmlnZ2VyKCJzcGluIixlLHt2YWx1ZTppfSk9PT0hMXx8KHRoaXMuX3ZhbHVlKGkpLHRoaXMuY291bnRlcisrKX0sX2luY3JlbWVudDpmdW5jdGlvbihlKXt2YXIgaT10aGlzLm9wdGlvbnMuaW5jcmVtZW50YWw7cmV0dXJuIGk/dC5pc0Z1bmN0aW9uKGkpP2koZSk6TWF0aC5mbG9vcihlKmUqZS81ZTQtZSplLzUwMCsxNyplLzIwMCsxKToxfSxfcHJlY2lzaW9uOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fcHJlY2lzaW9uT2YodGhpcy5vcHRpb25zLnN0ZXApO3JldHVybiBudWxsIT09dGhpcy5vcHRpb25zLm1pbiYmKHQ9TWF0aC5tYXgodCx0aGlzLl9wcmVjaXNpb25PZih0aGlzLm9wdGlvbnMubWluKSkpLHR9LF9wcmVjaXNpb25PZjpmdW5jdGlvbih0KXt2YXIgZT0iIit0LGk9ZS5pbmRleE9mKCIuIik7cmV0dXJuLTE9PT1pPzA6ZS5sZW5ndGgtaS0xfSxfYWRqdXN0VmFsdWU6ZnVuY3Rpb24odCl7dmFyIGUsaSxzPXRoaXMub3B0aW9ucztyZXR1cm4gZT1udWxsIT09cy5taW4/cy5taW46MCxpPXQtZSxpPU1hdGgucm91bmQoaS9zLnN0ZXApKnMuc3RlcCx0PWUraSx0PXBhcnNlRmxvYXQodC50b0ZpeGVkKHRoaXMuX3ByZWNpc2lvbigpKSksbnVsbCE9PXMubWF4JiZ0PnMubWF4P3MubWF4Om51bGwhPT1zLm1pbiYmcy5taW4+dD9zLm1pbjp0fSxfc3RvcDpmdW5jdGlvbih0KXt0aGlzLnNwaW5uaW5nJiYoY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpLGNsZWFyVGltZW91dCh0aGlzLm1vdXNld2hlZWxUaW1lciksdGhpcy5jb3VudGVyPTAsdGhpcy5zcGlubmluZz0hMSx0aGlzLl90cmlnZ2VyKCJzdG9wIix0KSl9LF9zZXRPcHRpb246ZnVuY3Rpb24odCxlKXt2YXIgaSxzLG47cmV0dXJuImN1bHR1cmUiPT09dHx8Im51bWJlckZvcm1hdCI9PT10PyhpPXRoaXMuX3BhcnNlKHRoaXMuZWxlbWVudC52YWwoKSksdGhpcy5vcHRpb25zW3RdPWUsdGhpcy5lbGVtZW50LnZhbCh0aGlzLl9mb3JtYXQoaSkpLHZvaWQgMCk6KCgibWF4Ij09PXR8fCJtaW4iPT09dHx8InN0ZXAiPT09dCkmJiJzdHJpbmciPT10eXBlb2YgZSYmKGU9dGhpcy5fcGFyc2UoZSkpLCJpY29ucyI9PT10JiYocz10aGlzLmJ1dHRvbnMuZmlyc3QoKS5maW5kKCIudWktaWNvbiIpLHRoaXMuX3JlbW92ZUNsYXNzKHMsbnVsbCx0aGlzLm9wdGlvbnMuaWNvbnMudXApLHRoaXMuX2FkZENsYXNzKHMsbnVsbCxlLnVwKSxuPXRoaXMuYnV0dG9ucy5sYXN0KCkuZmluZCgiLnVpLWljb24iKSx0aGlzLl9yZW1vdmVDbGFzcyhuLG51bGwsdGhpcy5vcHRpb25zLmljb25zLmRvd24pLHRoaXMuX2FkZENsYXNzKG4sbnVsbCxlLmRvd24pKSx0aGlzLl9zdXBlcih0LGUpLHZvaWQgMCl9LF9zZXRPcHRpb25EaXNhYmxlZDpmdW5jdGlvbih0KXt0aGlzLl9zdXBlcih0KSx0aGlzLl90b2dnbGVDbGFzcyh0aGlzLnVpU3Bpbm5lcixudWxsLCJ1aS1zdGF0ZS1kaXNhYmxlZCIsISF0KSx0aGlzLmVsZW1lbnQucHJvcCgiZGlzYWJsZWQiLCEhdCksdGhpcy5idXR0b25zLmJ1dHRvbih0PyJkaXNhYmxlIjoiZW5hYmxlIil9LF9zZXRPcHRpb25zOnIoZnVuY3Rpb24odCl7dGhpcy5fc3VwZXIodCl9KSxfcGFyc2U6ZnVuY3Rpb24odCl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0JiYiIiE9PXQmJih0PXdpbmRvdy5HbG9iYWxpemUmJnRoaXMub3B0aW9ucy5udW1iZXJGb3JtYXQ/R2xvYmFsaXplLnBhcnNlRmxvYXQodCwxMCx0aGlzLm9wdGlvbnMuY3VsdHVyZSk6K3QpLCIiPT09dHx8aXNOYU4odCk/bnVsbDp0fSxfZm9ybWF0OmZ1bmN0aW9uKHQpe3JldHVybiIiPT09dD8iIjp3aW5kb3cuR2xvYmFsaXplJiZ0aGlzLm9wdGlvbnMubnVtYmVyRm9ybWF0P0dsb2JhbGl6ZS5mb3JtYXQodCx0aGlzLm9wdGlvbnMubnVtYmVyRm9ybWF0LHRoaXMub3B0aW9ucy5jdWx0dXJlKTp0fSxfcmVmcmVzaDpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5hdHRyKHsiYXJpYS12YWx1ZW1pbiI6dGhpcy5vcHRpb25zLm1pbiwiYXJpYS12YWx1ZW1heCI6dGhpcy5vcHRpb25zLm1heCwiYXJpYS12YWx1ZW5vdyI6dGhpcy5fcGFyc2UodGhpcy5lbGVtZW50LnZhbCgpKX0pfSxpc1ZhbGlkOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy52YWx1ZSgpO3JldHVybiBudWxsPT09dD8hMTp0PT09dGhpcy5fYWRqdXN0VmFsdWUodCl9LF92YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBpOyIiIT09dCYmKGk9dGhpcy5fcGFyc2UodCksbnVsbCE9PWkmJihlfHwoaT10aGlzLl9hZGp1c3RWYWx1ZShpKSksdD10aGlzLl9mb3JtYXQoaSkpKSx0aGlzLmVsZW1lbnQudmFsKHQpLHRoaXMuX3JlZnJlc2goKX0sX2Rlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQucHJvcCgiZGlzYWJsZWQiLCExKS5yZW1vdmVBdHRyKCJhdXRvY29tcGxldGUgcm9sZSBhcmlhLXZhbHVlbWluIGFyaWEtdmFsdWVtYXggYXJpYS12YWx1ZW5vdyIpLHRoaXMudWlTcGlubmVyLnJlcGxhY2VXaXRoKHRoaXMuZWxlbWVudCl9LHN0ZXBVcDpyKGZ1bmN0aW9uKHQpe3RoaXMuX3N0ZXBVcCh0KX0pLF9zdGVwVXA6ZnVuY3Rpb24odCl7dGhpcy5fc3RhcnQoKSYmKHRoaXMuX3NwaW4oKHR8fDEpKnRoaXMub3B0aW9ucy5zdGVwKSx0aGlzLl9zdG9wKCkpfSxzdGVwRG93bjpyKGZ1bmN0aW9uKHQpe3RoaXMuX3N0ZXBEb3duKHQpfSksX3N0ZXBEb3duOmZ1bmN0aW9uKHQpe3RoaXMuX3N0YXJ0KCkmJih0aGlzLl9zcGluKCh0fHwxKSotdGhpcy5vcHRpb25zLnN0ZXApLHRoaXMuX3N0b3AoKSl9LHBhZ2VVcDpyKGZ1bmN0aW9uKHQpe3RoaXMuX3N0ZXBVcCgodHx8MSkqdGhpcy5vcHRpb25zLnBhZ2UpfSkscGFnZURvd246cihmdW5jdGlvbih0KXt0aGlzLl9zdGVwRG93bigodHx8MSkqdGhpcy5vcHRpb25zLnBhZ2UpfSksdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHIodGhpcy5fdmFsdWUpLmNhbGwodGhpcyx0KSx2b2lkIDApOnRoaXMuX3BhcnNlKHRoaXMuZWxlbWVudC52YWwoKSl9LHdpZGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnVpU3Bpbm5lcn19KSx0LnVpQmFja0NvbXBhdCE9PSExJiZ0LndpZGdldCgidWkuc3Bpbm5lciIsdC51aS5zcGlubmVyLHtfZW5oYW5jZTpmdW5jdGlvbigpe3RoaXMudWlTcGlubmVyPXRoaXMuZWxlbWVudC5hdHRyKCJhdXRvY29tcGxldGUiLCJvZmYiKS53cmFwKHRoaXMuX3VpU3Bpbm5lckh0bWwoKSkucGFyZW50KCkuYXBwZW5kKHRoaXMuX2J1dHRvbkh0bWwoKSl9LF91aVNwaW5uZXJIdG1sOmZ1bmN0aW9uKCl7cmV0dXJuIjxzcGFuPiJ9LF9idXR0b25IdG1sOmZ1bmN0aW9uKCl7cmV0dXJuIjxhPjwvYT48YT48L2E+In19KSx0LnVpLnNwaW5uZXIsdC53aWRnZXQoInVpLnRhYnMiLHt2ZXJzaW9uOiIxLjEyLjEiLGRlbGF5OjMwMCxvcHRpb25zOnthY3RpdmU6bnVsbCxjbGFzc2VzOnsidWktdGFicyI6InVpLWNvcm5lci1hbGwiLCJ1aS10YWJzLW5hdiI6InVpLWNvcm5lci1hbGwiLCJ1aS10YWJzLXBhbmVsIjoidWktY29ybmVyLWJvdHRvbSIsInVpLXRhYnMtdGFiIjoidWktY29ybmVyLXRvcCJ9LGNvbGxhcHNpYmxlOiExLGV2ZW50OiJjbGljayIsaGVpZ2h0U3R5bGU6ImNvbnRlbnQiLGhpZGU6bnVsbCxzaG93Om51bGwsYWN0aXZhdGU6bnVsbCxiZWZvcmVBY3RpdmF0ZTpudWxsLGJlZm9yZUxvYWQ6bnVsbCxsb2FkOm51bGx9LF9pc0xvY2FsOmZ1bmN0aW9uKCl7dmFyIHQ9LyMuKiQvO3JldHVybiBmdW5jdGlvbihlKXt2YXIgaSxzO2k9ZS5ocmVmLnJlcGxhY2UodCwiIikscz1sb2NhdGlvbi5ocmVmLnJlcGxhY2UodCwiIik7dHJ5e2k9ZGVjb2RlVVJJQ29tcG9uZW50KGkpfWNhdGNoKG4pe310cnl7cz1kZWNvZGVVUklDb21wb25lbnQocyl9Y2F0Y2gobil7fXJldHVybiBlLmhhc2gubGVuZ3RoPjEmJmk9PT1zfX0oKSxfY3JlYXRlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxpPXRoaXMub3B0aW9uczt0aGlzLnJ1bm5pbmc9ITEsdGhpcy5fYWRkQ2xhc3MoInVpLXRhYnMiLCJ1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQiKSx0aGlzLl90b2dnbGVDbGFzcygidWktdGFicy1jb2xsYXBzaWJsZSIsbnVsbCxpLmNvbGxhcHNpYmxlKSx0aGlzLl9wcm9jZXNzVGFicygpLGkuYWN0aXZlPXRoaXMuX2luaXRpYWxBY3RpdmUoKSx0LmlzQXJyYXkoaS5kaXNhYmxlZCkmJihpLmRpc2FibGVkPXQudW5pcXVlKGkuZGlzYWJsZWQuY29uY2F0KHQubWFwKHRoaXMudGFicy5maWx0ZXIoIi51aS1zdGF0ZS1kaXNhYmxlZCIpLGZ1bmN0aW9uKHQpe3JldHVybiBlLnRhYnMuaW5kZXgodCl9KSkpLnNvcnQoKSksdGhpcy5hY3RpdmU9dGhpcy5vcHRpb25zLmFjdGl2ZSE9PSExJiZ0aGlzLmFuY2hvcnMubGVuZ3RoP3RoaXMuX2ZpbmRBY3RpdmUoaS5hY3RpdmUpOnQoKSx0aGlzLl9yZWZyZXNoKCksdGhpcy5hY3RpdmUubGVuZ3RoJiZ0aGlzLmxvYWQoaS5hY3RpdmUpfSxfaW5pdGlhbEFjdGl2ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucy5hY3RpdmUsaT10aGlzLm9wdGlvbnMuY29sbGFwc2libGUscz1sb2NhdGlvbi5oYXNoLnN1YnN0cmluZygxKTtyZXR1cm4gbnVsbD09PWUmJihzJiZ0aGlzLnRhYnMuZWFjaChmdW5jdGlvbihpLG4pe3JldHVybiB0KG4pLmF0dHIoImFyaWEtY29udHJvbHMiKT09PXM/KGU9aSwhMSk6dm9pZCAwfSksbnVsbD09PWUmJihlPXRoaXMudGFicy5pbmRleCh0aGlzLnRhYnMuZmlsdGVyKCIudWktdGFicy1hY3RpdmUiKSkpLChudWxsPT09ZXx8LTE9PT1lKSYmKGU9dGhpcy50YWJzLmxlbmd0aD8wOiExKSksZSE9PSExJiYoZT10aGlzLnRhYnMuaW5kZXgodGhpcy50YWJzLmVxKGUpKSwtMT09PWUmJihlPWk/ITE6MCkpLCFpJiZlPT09ITEmJnRoaXMuYW5jaG9ycy5sZW5ndGgmJihlPTApLGV9LF9nZXRDcmVhdGVFdmVudERhdGE6ZnVuY3Rpb24oKXtyZXR1cm57dGFiOnRoaXMuYWN0aXZlLHBhbmVsOnRoaXMuYWN0aXZlLmxlbmd0aD90aGlzLl9nZXRQYW5lbEZvclRhYih0aGlzLmFjdGl2ZSk6dCgpfX0sX3RhYktleWRvd246ZnVuY3Rpb24oZSl7dmFyIGk9dCh0LnVpLnNhZmVBY3RpdmVFbGVtZW50KHRoaXMuZG9jdW1lbnRbMF0pKS5jbG9zZXN0KCJsaSIpLHM9dGhpcy50YWJzLmluZGV4KGkpLG49ITA7aWYoIXRoaXMuX2hhbmRsZVBhZ2VOYXYoZSkpe3N3aXRjaChlLmtleUNvZGUpe2Nhc2UgdC51aS5rZXlDb2RlLlJJR0hUOmNhc2UgdC51aS5rZXlDb2RlLkRPV046cysrO2JyZWFrO2Nhc2UgdC51aS5rZXlDb2RlLlVQOmNhc2UgdC51aS5rZXlDb2RlLkxFRlQ6bj0hMSxzLS07YnJlYWs7Y2FzZSB0LnVpLmtleUNvZGUuRU5EOnM9dGhpcy5hbmNob3JzLmxlbmd0aC0xO2JyZWFrO2Nhc2UgdC51aS5rZXlDb2RlLkhPTUU6cz0wO2JyZWFrO2Nhc2UgdC51aS5rZXlDb2RlLlNQQUNFOnJldHVybiBlLnByZXZlbnREZWZhdWx0KCksY2xlYXJUaW1lb3V0KHRoaXMuYWN0aXZhdGluZyksdGhpcy5fYWN0aXZhdGUocyksdm9pZCAwO2Nhc2UgdC51aS5rZXlDb2RlLkVOVEVSOnJldHVybiBlLnByZXZlbnREZWZhdWx0KCksY2xlYXJUaW1lb3V0KHRoaXMuYWN0aXZhdGluZyksdGhpcy5fYWN0aXZhdGUocz09PXRoaXMub3B0aW9ucy5hY3RpdmU/ITE6cyksdm9pZCAwO2RlZmF1bHQ6cmV0dXJufWUucHJldmVudERlZmF1bHQoKSxjbGVhclRpbWVvdXQodGhpcy5hY3RpdmF0aW5nKSxzPXRoaXMuX2ZvY3VzTmV4dFRhYihzLG4pLGUuY3RybEtleXx8ZS5tZXRhS2V5fHwoaS5hdHRyKCJhcmlhLXNlbGVjdGVkIiwiZmFsc2UiKSx0aGlzLnRhYnMuZXEocykuYXR0cigiYXJpYS1zZWxlY3RlZCIsInRydWUiKSx0aGlzLmFjdGl2YXRpbmc9dGhpcy5fZGVsYXkoZnVuY3Rpb24oKXt0aGlzLm9wdGlvbigiYWN0aXZlIixzKX0sdGhpcy5kZWxheSkpfX0sX3BhbmVsS2V5ZG93bjpmdW5jdGlvbihlKXt0aGlzLl9oYW5kbGVQYWdlTmF2KGUpfHxlLmN0cmxLZXkmJmUua2V5Q29kZT09PXQudWkua2V5Q29kZS5VUCYmKGUucHJldmVudERlZmF1bHQoKSx0aGlzLmFjdGl2ZS50cmlnZ2VyKCJmb2N1cyIpKX0sX2hhbmRsZVBhZ2VOYXY6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuYWx0S2V5JiZlLmtleUNvZGU9PT10LnVpLmtleUNvZGUuUEFHRV9VUD8odGhpcy5fYWN0aXZhdGUodGhpcy5fZm9jdXNOZXh0VGFiKHRoaXMub3B0aW9ucy5hY3RpdmUtMSwhMSkpLCEwKTplLmFsdEtleSYmZS5rZXlDb2RlPT09dC51aS5rZXlDb2RlLlBBR0VfRE9XTj8odGhpcy5fYWN0aXZhdGUodGhpcy5fZm9jdXNOZXh0VGFiKHRoaXMub3B0aW9ucy5hY3RpdmUrMSwhMCkpLCEwKTp2b2lkIDB9LF9maW5kTmV4dFRhYjpmdW5jdGlvbihlLGkpe2Z1bmN0aW9uIHMoKXtyZXR1cm4gZT5uJiYoZT0wKSwwPmUmJihlPW4pLGV9Zm9yKHZhciBuPXRoaXMudGFicy5sZW5ndGgtMTstMSE9PXQuaW5BcnJheShzKCksdGhpcy5vcHRpb25zLmRpc2FibGVkKTspZT1pP2UrMTplLTE7cmV0dXJuIGV9LF9mb2N1c05leHRUYWI6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD10aGlzLl9maW5kTmV4dFRhYih0LGUpLHRoaXMudGFicy5lcSh0KS50cmlnZ2VyKCJmb2N1cyIpLHR9LF9zZXRPcHRpb246ZnVuY3Rpb24odCxlKXtyZXR1cm4iYWN0aXZlIj09PXQ/KHRoaXMuX2FjdGl2YXRlKGUpLHZvaWQgMCk6KHRoaXMuX3N1cGVyKHQsZSksImNvbGxhcHNpYmxlIj09PXQmJih0aGlzLl90b2dnbGVDbGFzcygidWktdGFicy1jb2xsYXBzaWJsZSIsbnVsbCxlKSxlfHx0aGlzLm9wdGlvbnMuYWN0aXZlIT09ITF8fHRoaXMuX2FjdGl2YXRlKDApKSwiZXZlbnQiPT09dCYmdGhpcy5fc2V0dXBFdmVudHMoZSksImhlaWdodFN0eWxlIj09PXQmJnRoaXMuX3NldHVwSGVpZ2h0U3R5bGUoZSksdm9pZCAwKX0sX3Nhbml0aXplU2VsZWN0b3I6ZnVuY3Rpb24odCl7cmV0dXJuIHQ/dC5yZXBsYWNlKC9bISIkJSYnKCkqKywuXC86Ozw9Pj9AXFtcXVxeYHt8fX5dL2csIlxcJCYiKToiIn0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucyxpPXRoaXMudGFibGlzdC5jaGlsZHJlbigiOmhhcyhhW2hyZWZdKSIpO2UuZGlzYWJsZWQ9dC5tYXAoaS5maWx0ZXIoIi51aS1zdGF0ZS1kaXNhYmxlZCIpLGZ1bmN0aW9uKHQpe3JldHVybiBpLmluZGV4KHQpfSksdGhpcy5fcHJvY2Vzc1RhYnMoKSxlLmFjdGl2ZSE9PSExJiZ0aGlzLmFuY2hvcnMubGVuZ3RoP3RoaXMuYWN0aXZlLmxlbmd0aCYmIXQuY29udGFpbnModGhpcy50YWJsaXN0WzBdLHRoaXMuYWN0aXZlWzBdKT90aGlzLnRhYnMubGVuZ3RoPT09ZS5kaXNhYmxlZC5sZW5ndGg/KGUuYWN0aXZlPSExLHRoaXMuYWN0aXZlPXQoKSk6dGhpcy5fYWN0aXZhdGUodGhpcy5fZmluZE5leHRUYWIoTWF0aC5tYXgoMCxlLmFjdGl2ZS0xKSwhMSkpOmUuYWN0aXZlPXRoaXMudGFicy5pbmRleCh0aGlzLmFjdGl2ZSk6KGUuYWN0aXZlPSExLHRoaXMuYWN0aXZlPXQoKSksdGhpcy5fcmVmcmVzaCgpfSxfcmVmcmVzaDpmdW5jdGlvbigpe3RoaXMuX3NldE9wdGlvbkRpc2FibGVkKHRoaXMub3B0aW9ucy5kaXNhYmxlZCksdGhpcy5fc2V0dXBFdmVudHModGhpcy5vcHRpb25zLmV2ZW50KSx0aGlzLl9zZXR1cEhlaWdodFN0eWxlKHRoaXMub3B0aW9ucy5oZWlnaHRTdHlsZSksdGhpcy50YWJzLm5vdCh0aGlzLmFjdGl2ZSkuYXR0cih7ImFyaWEtc2VsZWN0ZWQiOiJmYWxzZSIsImFyaWEtZXhwYW5kZWQiOiJmYWxzZSIsdGFiSW5kZXg6LTF9KSx0aGlzLnBhbmVscy5ub3QodGhpcy5fZ2V0UGFuZWxGb3JUYWIodGhpcy5hY3RpdmUpKS5oaWRlKCkuYXR0cih7ImFyaWEtaGlkZGVuIjoidHJ1ZSJ9KSx0aGlzLmFjdGl2ZS5sZW5ndGg/KHRoaXMuYWN0aXZlLmF0dHIoeyJhcmlhLXNlbGVjdGVkIjoidHJ1ZSIsImFyaWEtZXhwYW5kZWQiOiJ0cnVlIix0YWJJbmRleDowfSksdGhpcy5fYWRkQ2xhc3ModGhpcy5hY3RpdmUsInVpLXRhYnMtYWN0aXZlIiwidWktc3RhdGUtYWN0aXZlIiksdGhpcy5fZ2V0UGFuZWxGb3JUYWIodGhpcy5hY3RpdmUpLnNob3coKS5hdHRyKHsiYXJpYS1oaWRkZW4iOiJmYWxzZSJ9KSk6dGhpcy50YWJzLmVxKDApLmF0dHIoInRhYkluZGV4IiwwKX0sX3Byb2Nlc3NUYWJzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxpPXRoaXMudGFicyxzPXRoaXMuYW5jaG9ycyxuPXRoaXMucGFuZWxzO3RoaXMudGFibGlzdD10aGlzLl9nZXRMaXN0KCkuYXR0cigicm9sZSIsInRhYmxpc3QiKSx0aGlzLl9hZGRDbGFzcyh0aGlzLnRhYmxpc3QsInVpLXRhYnMtbmF2IiwidWktaGVscGVyLXJlc2V0IHVpLWhlbHBlci1jbGVhcmZpeCB1aS13aWRnZXQtaGVhZGVyIiksdGhpcy50YWJsaXN0Lm9uKCJtb3VzZWRvd24iK3RoaXMuZXZlbnROYW1lc3BhY2UsIj4gbGkiLGZ1bmN0aW9uKGUpe3QodGhpcykuaXMoIi51aS1zdGF0ZS1kaXNhYmxlZCIpJiZlLnByZXZlbnREZWZhdWx0KCl9KS5vbigiZm9jdXMiK3RoaXMuZXZlbnROYW1lc3BhY2UsIi51aS10YWJzLWFuY2hvciIsZnVuY3Rpb24oKXt0KHRoaXMpLmNsb3Nlc3QoImxpIikuaXMoIi51aS1zdGF0ZS1kaXNhYmxlZCIpJiZ0aGlzLmJsdXIoKX0pLHRoaXMudGFicz10aGlzLnRhYmxpc3QuZmluZCgiPiBsaTpoYXMoYVtocmVmXSkiKS5hdHRyKHtyb2xlOiJ0YWIiLHRhYkluZGV4Oi0xfSksdGhpcy5fYWRkQ2xhc3ModGhpcy50YWJzLCJ1aS10YWJzLXRhYiIsInVpLXN0YXRlLWRlZmF1bHQiKSx0aGlzLmFuY2hvcnM9dGhpcy50YWJzLm1hcChmdW5jdGlvbigpe3JldHVybiB0KCJhIix0aGlzKVswXX0pLmF0dHIoe3JvbGU6InByZXNlbnRhdGlvbiIsdGFiSW5kZXg6LTF9KSx0aGlzLl9hZGRDbGFzcyh0aGlzLmFuY2hvcnMsInVpLXRhYnMtYW5jaG9yIiksdGhpcy5wYW5lbHM9dCgpLHRoaXMuYW5jaG9ycy5lYWNoKGZ1bmN0aW9uKGkscyl7dmFyIG4sbyxhLHI9dChzKS51bmlxdWVJZCgpLmF0dHIoImlkIiksaD10KHMpLmNsb3Nlc3QoImxpIiksbD1oLmF0dHIoImFyaWEtY29udHJvbHMiKTtlLl9pc0xvY2FsKHMpPyhuPXMuaGFzaCxhPW4uc3Vic3RyaW5nKDEpLG89ZS5lbGVtZW50LmZpbmQoZS5fc2FuaXRpemVTZWxlY3RvcihuKSkpOihhPWguYXR0cigiYXJpYS1jb250cm9scyIpfHx0KHt9KS51bmlxdWVJZCgpWzBdLmlkLG49IiMiK2Esbz1lLmVsZW1lbnQuZmluZChuKSxvLmxlbmd0aHx8KG89ZS5fY3JlYXRlUGFuZWwoYSksby5pbnNlcnRBZnRlcihlLnBhbmVsc1tpLTFdfHxlLnRhYmxpc3QpKSxvLmF0dHIoImFyaWEtbGl2ZSIsInBvbGl0ZSIpKSxvLmxlbmd0aCYmKGUucGFuZWxzPWUucGFuZWxzLmFkZChvKSksbCYmaC5kYXRhKCJ1aS10YWJzLWFyaWEtY29udHJvbHMiLGwpLGguYXR0cih7ImFyaWEtY29udHJvbHMiOmEsImFyaWEtbGFiZWxsZWRieSI6cn0pLG8uYXR0cigiYXJpYS1sYWJlbGxlZGJ5IixyKX0pLHRoaXMucGFuZWxzLmF0dHIoInJvbGUiLCJ0YWJwYW5lbCIpLHRoaXMuX2FkZENsYXNzKHRoaXMucGFuZWxzLCJ1aS10YWJzLXBhbmVsIiwidWktd2lkZ2V0LWNvbnRlbnQiKSxpJiYodGhpcy5fb2ZmKGkubm90KHRoaXMudGFicykpLHRoaXMuX29mZihzLm5vdCh0aGlzLmFuY2hvcnMpKSx0aGlzLl9vZmYobi5ub3QodGhpcy5wYW5lbHMpKSl9LF9nZXRMaXN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGFibGlzdHx8dGhpcy5lbGVtZW50LmZpbmQoIm9sLCB1bCIpLmVxKDApfSxfY3JlYXRlUGFuZWw6ZnVuY3Rpb24oZSl7cmV0dXJuIHQoIjxkaXY+IikuYXR0cigiaWQiLGUpLmRhdGEoInVpLXRhYnMtZGVzdHJveSIsITApfSxfc2V0T3B0aW9uRGlzYWJsZWQ6ZnVuY3Rpb24oZSl7dmFyIGkscyxuO2Zvcih0LmlzQXJyYXkoZSkmJihlLmxlbmd0aD9lLmxlbmd0aD09PXRoaXMuYW5jaG9ycy5sZW5ndGgmJihlPSEwKTplPSExKSxuPTA7cz10aGlzLnRhYnNbbl07bisrKWk9dChzKSxlPT09ITB8fC0xIT09dC5pbkFycmF5KG4sZSk/KGkuYXR0cigiYXJpYS1kaXNhYmxlZCIsInRydWUiKSx0aGlzLl9hZGRDbGFzcyhpLG51bGwsInVpLXN0YXRlLWRpc2FibGVkIikpOihpLnJlbW92ZUF0dHIoImFyaWEtZGlzYWJsZWQiKSx0aGlzLl9yZW1vdmVDbGFzcyhpLG51bGwsInVpLXN0YXRlLWRpc2FibGVkIikpO3RoaXMub3B0aW9ucy5kaXNhYmxlZD1lLHRoaXMuX3RvZ2dsZUNsYXNzKHRoaXMud2lkZ2V0KCksdGhpcy53aWRnZXRGdWxsTmFtZSsiLWRpc2FibGVkIixudWxsLGU9PT0hMCl9LF9zZXR1cEV2ZW50czpmdW5jdGlvbihlKXt2YXIgaT17fTtlJiZ0LmVhY2goZS5zcGxpdCgiICIpLGZ1bmN0aW9uKHQsZSl7aVtlXT0iX2V2ZW50SGFuZGxlciJ9KSx0aGlzLl9vZmYodGhpcy5hbmNob3JzLmFkZCh0aGlzLnRhYnMpLmFkZCh0aGlzLnBhbmVscykpLHRoaXMuX29uKCEwLHRoaXMuYW5jaG9ycyx7Y2xpY2s6ZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpfX0pLHRoaXMuX29uKHRoaXMuYW5jaG9ycyxpKSx0aGlzLl9vbih0aGlzLnRhYnMse2tleWRvd246Il90YWJLZXlkb3duIn0pLHRoaXMuX29uKHRoaXMucGFuZWxzLHtrZXlkb3duOiJfcGFuZWxLZXlkb3duIn0pLHRoaXMuX2ZvY3VzYWJsZSh0aGlzLnRhYnMpLHRoaXMuX2hvdmVyYWJsZSh0aGlzLnRhYnMpfSxfc2V0dXBIZWlnaHRTdHlsZTpmdW5jdGlvbihlKXt2YXIgaSxzPXRoaXMuZWxlbWVudC5wYXJlbnQoKTsiZmlsbCI9PT1lPyhpPXMuaGVpZ2h0KCksaS09dGhpcy5lbGVtZW50Lm91dGVySGVpZ2h0KCktdGhpcy5lbGVtZW50LmhlaWdodCgpLHRoaXMuZWxlbWVudC5zaWJsaW5ncygiOnZpc2libGUiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGU9dCh0aGlzKSxzPWUuY3NzKCJwb3NpdGlvbiIpOyJhYnNvbHV0ZSIhPT1zJiYiZml4ZWQiIT09cyYmKGktPWUub3V0ZXJIZWlnaHQoITApKX0pLHRoaXMuZWxlbWVudC5jaGlsZHJlbigpLm5vdCh0aGlzLnBhbmVscykuZWFjaChmdW5jdGlvbigpe2ktPXQodGhpcykub3V0ZXJIZWlnaHQoITApfSksdGhpcy5wYW5lbHMuZWFjaChmdW5jdGlvbigpe3QodGhpcykuaGVpZ2h0KE1hdGgubWF4KDAsaS10KHRoaXMpLmlubmVySGVpZ2h0KCkrdCh0aGlzKS5oZWlnaHQoKSkpfSkuY3NzKCJvdmVyZmxvdyIsImF1dG8iKSk6ImF1dG8iPT09ZSYmKGk9MCx0aGlzLnBhbmVscy5lYWNoKGZ1bmN0aW9uKCl7aT1NYXRoLm1heChpLHQodGhpcykuaGVpZ2h0KCIiKS5oZWlnaHQoKSl9KS5oZWlnaHQoaSkpfSxfZXZlbnRIYW5kbGVyOmZ1bmN0aW9uKGUpe3ZhciBpPXRoaXMub3B0aW9ucyxzPXRoaXMuYWN0aXZlLG49dChlLmN1cnJlbnRUYXJnZXQpLG89bi5jbG9zZXN0KCJsaSIpLGE9b1swXT09PXNbMF0scj1hJiZpLmNvbGxhcHNpYmxlLGg9cj90KCk6dGhpcy5fZ2V0UGFuZWxGb3JUYWIobyksbD1zLmxlbmd0aD90aGlzLl9nZXRQYW5lbEZvclRhYihzKTp0KCksYz17b2xkVGFiOnMsb2xkUGFuZWw6bCxuZXdUYWI6cj90KCk6byxuZXdQYW5lbDpofTtlLnByZXZlbnREZWZhdWx0KCksby5oYXNDbGFzcygidWktc3RhdGUtZGlzYWJsZWQiKXx8by5oYXNDbGFzcygidWktdGFicy1sb2FkaW5nIil8fHRoaXMucnVubmluZ3x8YSYmIWkuY29sbGFwc2libGV8fHRoaXMuX3RyaWdnZXIoImJlZm9yZUFjdGl2YXRlIixlLGMpPT09ITF8fChpLmFjdGl2ZT1yPyExOnRoaXMudGFicy5pbmRleChvKSx0aGlzLmFjdGl2ZT1hP3QoKTpvLHRoaXMueGhyJiZ0aGlzLnhoci5hYm9ydCgpLGwubGVuZ3RofHxoLmxlbmd0aHx8dC5lcnJvcigialF1ZXJ5IFVJIFRhYnM6IE1pc21hdGNoaW5nIGZyYWdtZW50IGlkZW50aWZpZXIuIiksaC5sZW5ndGgmJnRoaXMubG9hZCh0aGlzLnRhYnMuaW5kZXgobyksZSksdGhpcy5fdG9nZ2xlKGUsYykpfSxfdG9nZ2xlOmZ1bmN0aW9uKGUsaSl7ZnVuY3Rpb24gcygpe28ucnVubmluZz0hMSxvLl90cmlnZ2VyKCJhY3RpdmF0ZSIsZSxpKX1mdW5jdGlvbiBuKCl7by5fYWRkQ2xhc3MoaS5uZXdUYWIuY2xvc2VzdCgibGkiKSwidWktdGFicy1hY3RpdmUiLCJ1aS1zdGF0ZS1hY3RpdmUiKSxhLmxlbmd0aCYmby5vcHRpb25zLnNob3c/by5fc2hvdyhhLG8ub3B0aW9ucy5zaG93LHMpOihhLnNob3coKSxzKCkpfXZhciBvPXRoaXMsYT1pLm5ld1BhbmVsLHI9aS5vbGRQYW5lbDt0aGlzLnJ1bm5pbmc9ITAsci5sZW5ndGgmJnRoaXMub3B0aW9ucy5oaWRlP3RoaXMuX2hpZGUocix0aGlzLm9wdGlvbnMuaGlkZSxmdW5jdGlvbigpe28uX3JlbW92ZUNsYXNzKGkub2xkVGFiLmNsb3Nlc3QoImxpIiksInVpLXRhYnMtYWN0aXZlIiwidWktc3RhdGUtYWN0aXZlIiksbigpfSk6KHRoaXMuX3JlbW92ZUNsYXNzKGkub2xkVGFiLmNsb3Nlc3QoImxpIiksInVpLXRhYnMtYWN0aXZlIiwidWktc3RhdGUtYWN0aXZlIiksci5oaWRlKCksbigpKSxyLmF0dHIoImFyaWEtaGlkZGVuIiwidHJ1ZSIpLGkub2xkVGFiLmF0dHIoeyJhcmlhLXNlbGVjdGVkIjoiZmFsc2UiLCJhcmlhLWV4cGFuZGVkIjoiZmFsc2UifSksYS5sZW5ndGgmJnIubGVuZ3RoP2kub2xkVGFiLmF0dHIoInRhYkluZGV4IiwtMSk6YS5sZW5ndGgmJnRoaXMudGFicy5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gMD09PXQodGhpcykuYXR0cigidGFiSW5kZXgiKX0pLmF0dHIoInRhYkluZGV4IiwtMSksYS5hdHRyKCJhcmlhLWhpZGRlbiIsImZhbHNlIiksaS5uZXdUYWIuYXR0cih7ImFyaWEtc2VsZWN0ZWQiOiJ0cnVlIiwiYXJpYS1leHBhbmRlZCI6InRydWUiLHRhYkluZGV4OjB9KX0sX2FjdGl2YXRlOmZ1bmN0aW9uKGUpe3ZhciBpLHM9dGhpcy5fZmluZEFjdGl2ZShlKTtzWzBdIT09dGhpcy5hY3RpdmVbMF0mJihzLmxlbmd0aHx8KHM9dGhpcy5hY3RpdmUpLGk9cy5maW5kKCIudWktdGFicy1hbmNob3IiKVswXSx0aGlzLl9ldmVudEhhbmRsZXIoe3RhcmdldDppLGN1cnJlbnRUYXJnZXQ6aSxwcmV2ZW50RGVmYXVsdDp0Lm5vb3B9KSl9LF9maW5kQWN0aXZlOmZ1bmN0aW9uKGUpe3JldHVybiBlPT09ITE/dCgpOnRoaXMudGFicy5lcShlKX0sX2dldEluZGV4OmZ1bmN0aW9uKGUpe3JldHVybiJzdHJpbmciPT10eXBlb2YgZSYmKGU9dGhpcy5hbmNob3JzLmluZGV4KHRoaXMuYW5jaG9ycy5maWx0ZXIoIltocmVmJD0nIit0LnVpLmVzY2FwZVNlbGVjdG9yKGUpKyInXSIpKSksZX0sX2Rlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLnhociYmdGhpcy54aHIuYWJvcnQoKSx0aGlzLnRhYmxpc3QucmVtb3ZlQXR0cigicm9sZSIpLm9mZih0aGlzLmV2ZW50TmFtZXNwYWNlKSx0aGlzLmFuY2hvcnMucmVtb3ZlQXR0cigicm9sZSB0YWJJbmRleCIpLnJlbW92ZVVuaXF1ZUlkKCksdGhpcy50YWJzLmFkZCh0aGlzLnBhbmVscykuZWFjaChmdW5jdGlvbigpe3QuZGF0YSh0aGlzLCJ1aS10YWJzLWRlc3Ryb3kiKT90KHRoaXMpLnJlbW92ZSgpOnQodGhpcykucmVtb3ZlQXR0cigicm9sZSB0YWJJbmRleCBhcmlhLWxpdmUgYXJpYS1idXN5IGFyaWEtc2VsZWN0ZWQgYXJpYS1sYWJlbGxlZGJ5IGFyaWEtaGlkZGVuIGFyaWEtZXhwYW5kZWQiKX0pLHRoaXMudGFicy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGU9dCh0aGlzKSxpPWUuZGF0YSgidWktdGFicy1hcmlhLWNvbnRyb2xzIik7aT9lLmF0dHIoImFyaWEtY29udHJvbHMiLGkpLnJlbW92ZURhdGEoInVpLXRhYnMtYXJpYS1jb250cm9scyIpOmUucmVtb3ZlQXR0cigiYXJpYS1jb250cm9scyIpfSksdGhpcy5wYW5lbHMuc2hvdygpLCJjb250ZW50IiE9PXRoaXMub3B0aW9ucy5oZWlnaHRTdHlsZSYmdGhpcy5wYW5lbHMuY3NzKCJoZWlnaHQiLCIiKX0sZW5hYmxlOmZ1bmN0aW9uKGUpe3ZhciBpPXRoaXMub3B0aW9ucy5kaXNhYmxlZDtpIT09ITEmJih2b2lkIDA9PT1lP2k9ITE6KGU9dGhpcy5fZ2V0SW5kZXgoZSksaT10LmlzQXJyYXkoaSk/dC5tYXAoaSxmdW5jdGlvbih0KXtyZXR1cm4gdCE9PWU/dDpudWxsfSk6dC5tYXAodGhpcy50YWJzLGZ1bmN0aW9uKHQsaSl7cmV0dXJuIGkhPT1lP2k6bnVsbH0pKSx0aGlzLl9zZXRPcHRpb25EaXNhYmxlZChpKSl9LGRpc2FibGU6ZnVuY3Rpb24oZSl7dmFyIGk9dGhpcy5vcHRpb25zLmRpc2FibGVkO2lmKGkhPT0hMCl7aWYodm9pZCAwPT09ZSlpPSEwO2Vsc2V7aWYoZT10aGlzLl9nZXRJbmRleChlKSwtMSE9PXQuaW5BcnJheShlLGkpKXJldHVybjtpPXQuaXNBcnJheShpKT90Lm1lcmdlKFtlXSxpKS5zb3J0KCk6W2VdfXRoaXMuX3NldE9wdGlvbkRpc2FibGVkKGkpfX0sbG9hZDpmdW5jdGlvbihlLGkpe2U9dGhpcy5fZ2V0SW5kZXgoZSk7dmFyIHM9dGhpcyxuPXRoaXMudGFicy5lcShlKSxvPW4uZmluZCgiLnVpLXRhYnMtYW5jaG9yIiksYT10aGlzLl9nZXRQYW5lbEZvclRhYihuKSxyPXt0YWI6bixwYW5lbDphfSxoPWZ1bmN0aW9uKHQsZSl7ImFib3J0Ij09PWUmJnMucGFuZWxzLnN0b3AoITEsITApLHMuX3JlbW92ZUNsYXNzKG4sInVpLXRhYnMtbG9hZGluZyIpLGEucmVtb3ZlQXR0cigiYXJpYS1idXN5IiksdD09PXMueGhyJiZkZWxldGUgcy54aHJ9O3RoaXMuX2lzTG9jYWwob1swXSl8fCh0aGlzLnhocj10LmFqYXgodGhpcy5fYWpheFNldHRpbmdzKG8saSxyKSksdGhpcy54aHImJiJjYW5jZWxlZCIhPT10aGlzLnhoci5zdGF0dXNUZXh0JiYodGhpcy5fYWRkQ2xhc3MobiwidWktdGFicy1sb2FkaW5nIiksYS5hdHRyKCJhcmlhLWJ1c3kiLCJ0cnVlIiksdGhpcy54aHIuZG9uZShmdW5jdGlvbih0LGUsbil7c2V0VGltZW91dChmdW5jdGlvbigpe2EuaHRtbCh0KSxzLl90cmlnZ2VyKCJsb2FkIixpLHIpLGgobixlKX0sMSl9KS5mYWlsKGZ1bmN0aW9uKHQsZSl7c2V0VGltZW91dChmdW5jdGlvbigpe2godCxlKX0sMSl9KSkpfSxfYWpheFNldHRpbmdzOmZ1bmN0aW9uKGUsaSxzKXt2YXIgbj10aGlzO3JldHVybnt1cmw6ZS5hdHRyKCJocmVmIikucmVwbGFjZSgvIy4qJC8sIiIpLGJlZm9yZVNlbmQ6ZnVuY3Rpb24oZSxvKXtyZXR1cm4gbi5fdHJpZ2dlcigiYmVmb3JlTG9hZCIsaSx0LmV4dGVuZCh7anFYSFI6ZSxhamF4U2V0dGluZ3M6b30scykpfX19LF9nZXRQYW5lbEZvclRhYjpmdW5jdGlvbihlKXt2YXIgaT10KGUpLmF0dHIoImFyaWEtY29udHJvbHMiKTtyZXR1cm4gdGhpcy5lbGVtZW50LmZpbmQodGhpcy5fc2FuaXRpemVTZWxlY3RvcigiIyIraSkpfX0pLHQudWlCYWNrQ29tcGF0IT09ITEmJnQud2lkZ2V0KCJ1aS50YWJzIix0LnVpLnRhYnMse19wcm9jZXNzVGFiczpmdW5jdGlvbigpe3RoaXMuX3N1cGVyQXBwbHkoYXJndW1lbnRzKSx0aGlzLl9hZGRDbGFzcyh0aGlzLnRhYnMsInVpLXRhYiIpfX0pLHQudWkudGFicyx0LndpZGdldCgidWkudG9vbHRpcCIse3ZlcnNpb246IjEuMTIuMSIsb3B0aW9uczp7Y2xhc3Nlczp7InVpLXRvb2x0aXAiOiJ1aS1jb3JuZXItYWxsIHVpLXdpZGdldC1zaGFkb3cifSxjb250ZW50OmZ1bmN0aW9uKCl7dmFyIGU9dCh0aGlzKS5hdHRyKCJ0aXRsZSIpfHwiIjtyZXR1cm4gdCgiPGE+IikudGV4dChlKS5odG1sKCl9LGhpZGU6ITAsaXRlbXM6Ilt0aXRsZV06bm90KFtkaXNhYmxlZF0pIixwb3NpdGlvbjp7bXk6ImxlZnQgdG9wKzE1IixhdDoibGVmdCBib3R0b20iLGNvbGxpc2lvbjoiZmxpcGZpdCBmbGlwIn0sc2hvdzohMCx0cmFjazohMSxjbG9zZTpudWxsLG9wZW46bnVsbH0sX2FkZERlc2NyaWJlZEJ5OmZ1bmN0aW9uKGUsaSl7dmFyIHM9KGUuYXR0cigiYXJpYS1kZXNjcmliZWRieSIpfHwiIikuc3BsaXQoL1xzKy8pO3MucHVzaChpKSxlLmRhdGEoInVpLXRvb2x0aXAtaWQiLGkpLmF0dHIoImFyaWEtZGVzY3JpYmVkYnkiLHQudHJpbShzLmpvaW4oIiAiKSkpfSxfcmVtb3ZlRGVzY3JpYmVkQnk6ZnVuY3Rpb24oZSl7dmFyIGk9ZS5kYXRhKCJ1aS10b29sdGlwLWlkIikscz0oZS5hdHRyKCJhcmlhLWRlc2NyaWJlZGJ5Iil8fCIiKS5zcGxpdCgvXHMrLyksbj10LmluQXJyYXkoaSxzKTstMSE9PW4mJnMuc3BsaWNlKG4sMSksZS5yZW1vdmVEYXRhKCJ1aS10b29sdGlwLWlkIikscz10LnRyaW0ocy5qb2luKCIgIikpLHM/ZS5hdHRyKCJhcmlhLWRlc2NyaWJlZGJ5IixzKTplLnJlbW92ZUF0dHIoImFyaWEtZGVzY3JpYmVkYnkiKX0sX2NyZWF0ZTpmdW5jdGlvbigpe3RoaXMuX29uKHttb3VzZW92ZXI6Im9wZW4iLGZvY3VzaW46Im9wZW4ifSksdGhpcy50b29sdGlwcz17fSx0aGlzLnBhcmVudHM9e30sdGhpcy5saXZlUmVnaW9uPXQoIjxkaXY+IikuYXR0cih7cm9sZToibG9nIiwiYXJpYS1saXZlIjoiYXNzZXJ0aXZlIiwiYXJpYS1yZWxldmFudCI6ImFkZGl0aW9ucyJ9KS5hcHBlbmRUbyh0aGlzLmRvY3VtZW50WzBdLmJvZHkpLHRoaXMuX2FkZENsYXNzKHRoaXMubGl2ZVJlZ2lvbixudWxsLCJ1aS1oZWxwZXItaGlkZGVuLWFjY2Vzc2libGUiKSx0aGlzLmRpc2FibGVkVGl0bGVzPXQoW10pfSxfc2V0T3B0aW9uOmZ1bmN0aW9uKGUsaSl7dmFyIHM9dGhpczt0aGlzLl9zdXBlcihlLGkpLCJjb250ZW50Ij09PWUmJnQuZWFjaCh0aGlzLnRvb2x0aXBzLGZ1bmN0aW9uKHQsZSl7cy5fdXBkYXRlQ29udGVudChlLmVsZW1lbnQpfSl9LF9zZXRPcHRpb25EaXNhYmxlZDpmdW5jdGlvbih0KXt0aGlzW3Q/Il9kaXNhYmxlIjoiX2VuYWJsZSJdKCl9LF9kaXNhYmxlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0LmVhY2godGhpcy50b29sdGlwcyxmdW5jdGlvbihpLHMpe3ZhciBuPXQuRXZlbnQoImJsdXIiKTtuLnRhcmdldD1uLmN1cnJlbnRUYXJnZXQ9cy5lbGVtZW50WzBdLGUuY2xvc2UobiwhMCl9KSx0aGlzLmRpc2FibGVkVGl0bGVzPXRoaXMuZGlzYWJsZWRUaXRsZXMuYWRkKHRoaXMuZWxlbWVudC5maW5kKHRoaXMub3B0aW9ucy5pdGVtcykuYWRkQmFjaygpLmZpbHRlcihmdW5jdGlvbigpe3ZhciBlPXQodGhpcyk7cmV0dXJuIGUuaXMoIlt0aXRsZV0iKT9lLmRhdGEoInVpLXRvb2x0aXAtdGl0bGUiLGUuYXR0cigidGl0bGUiKSkucmVtb3ZlQXR0cigidGl0bGUiKTp2b2lkIDB9KSl9LF9lbmFibGU6ZnVuY3Rpb24oKXt0aGlzLmRpc2FibGVkVGl0bGVzLmVhY2goZnVuY3Rpb24oKXt2YXIgZT10KHRoaXMpO2UuZGF0YSgidWktdG9vbHRpcC10aXRsZSIpJiZlLmF0dHIoInRpdGxlIixlLmRhdGEoInVpLXRvb2x0aXAtdGl0bGUiKSl9KSx0aGlzLmRpc2FibGVkVGl0bGVzPXQoW10pfSxvcGVuOmZ1bmN0aW9uKGUpe3ZhciBpPXRoaXMscz10KGU/ZS50YXJnZXQ6dGhpcy5lbGVtZW50KS5jbG9zZXN0KHRoaXMub3B0aW9ucy5pdGVtcyk7cy5sZW5ndGgmJiFzLmRhdGEoInVpLXRvb2x0aXAtaWQiKSYmKHMuYXR0cigidGl0bGUiKSYmcy5kYXRhKCJ1aS10b29sdGlwLXRpdGxlIixzLmF0dHIoInRpdGxlIikpLHMuZGF0YSgidWktdG9vbHRpcC1vcGVuIiwhMCksZSYmIm1vdXNlb3ZlciI9PT1lLnR5cGUmJnMucGFyZW50cygpLmVhY2goZnVuY3Rpb24oKXt2YXIgZSxzPXQodGhpcyk7cy5kYXRhKCJ1aS10b29sdGlwLW9wZW4iKSYmKGU9dC5FdmVudCgiYmx1ciIpLGUudGFyZ2V0PWUuY3VycmVudFRhcmdldD10aGlzLGkuY2xvc2UoZSwhMCkpLHMuYXR0cigidGl0bGUiKSYmKHMudW5pcXVlSWQoKSxpLnBhcmVudHNbdGhpcy5pZF09e2VsZW1lbnQ6dGhpcyx0aXRsZTpzLmF0dHIoInRpdGxlIil9LHMuYXR0cigidGl0bGUiLCIiKSl9KSx0aGlzLl9yZWdpc3RlckNsb3NlSGFuZGxlcnMoZSxzKSx0aGlzLl91cGRhdGVDb250ZW50KHMsZSkpfSxfdXBkYXRlQ29udGVudDpmdW5jdGlvbih0LGUpe3ZhciBpLHM9dGhpcy5vcHRpb25zLmNvbnRlbnQsbj10aGlzLG89ZT9lLnR5cGU6bnVsbDtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHN8fHMubm9kZVR5cGV8fHMuanF1ZXJ5P3RoaXMuX29wZW4oZSx0LHMpOihpPXMuY2FsbCh0WzBdLGZ1bmN0aW9uKGkpe24uX2RlbGF5KGZ1bmN0aW9uKCl7dC5kYXRhKCJ1aS10b29sdGlwLW9wZW4iKSYmKGUmJihlLnR5cGU9byksdGhpcy5fb3BlbihlLHQsaSkpfSl9KSxpJiZ0aGlzLl9vcGVuKGUsdCxpKSx2b2lkIDApfSxfb3BlbjpmdW5jdGlvbihlLGkscyl7ZnVuY3Rpb24gbih0KXtsLm9mPXQsYS5pcygiOmhpZGRlbiIpfHxhLnBvc2l0aW9uKGwpfXZhciBvLGEscixoLGw9dC5leHRlbmQoe30sdGhpcy5vcHRpb25zLnBvc2l0aW9uKTtpZihzKXtpZihvPXRoaXMuX2ZpbmQoaSkpcmV0dXJuIG8udG9vbHRpcC5maW5kKCIudWktdG9vbHRpcC1jb250ZW50IikuaHRtbChzKSx2b2lkIDA7aS5pcygiW3RpdGxlXSIpJiYoZSYmIm1vdXNlb3ZlciI9PT1lLnR5cGU/aS5hdHRyKCJ0aXRsZSIsIiIpOmkucmVtb3ZlQXR0cigidGl0bGUiKSksbz10aGlzLl90b29sdGlwKGkpLGE9by50b29sdGlwLHRoaXMuX2FkZERlc2NyaWJlZEJ5KGksYS5hdHRyKCJpZCIpKSxhLmZpbmQoIi51aS10b29sdGlwLWNvbnRlbnQiKS5odG1sKHMpLHRoaXMubGl2ZVJlZ2lvbi5jaGlsZHJlbigpLmhpZGUoKSxoPXQoIjxkaXY+IikuaHRtbChhLmZpbmQoIi51aS10b29sdGlwLWNvbnRlbnQiKS5odG1sKCkpLGgucmVtb3ZlQXR0cigibmFtZSIpLmZpbmQoIltuYW1lXSIpLnJlbW92ZUF0dHIoIm5hbWUiKSxoLnJlbW92ZUF0dHIoImlkIikuZmluZCgiW2lkXSIpLnJlbW92ZUF0dHIoImlkIiksaC5hcHBlbmRUbyh0aGlzLmxpdmVSZWdpb24pLHRoaXMub3B0aW9ucy50cmFjayYmZSYmL15tb3VzZS8udGVzdChlLnR5cGUpPyh0aGlzLl9vbih0aGlzLmRvY3VtZW50LHttb3VzZW1vdmU6bn0pLG4oZSkpOmEucG9zaXRpb24odC5leHRlbmQoe29mOml9LHRoaXMub3B0aW9ucy5wb3NpdGlvbikpLGEuaGlkZSgpLHRoaXMuX3Nob3coYSx0aGlzLm9wdGlvbnMuc2hvdyksdGhpcy5vcHRpb25zLnRyYWNrJiZ0aGlzLm9wdGlvbnMuc2hvdyYmdGhpcy5vcHRpb25zLnNob3cuZGVsYXkmJihyPXRoaXMuZGVsYXllZFNob3c9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXthLmlzKCI6dmlzaWJsZSIpJiYobihsLm9mKSxjbGVhckludGVydmFsKHIpKX0sdC5meC5pbnRlcnZhbCkpLHRoaXMuX3RyaWdnZXIoIm9wZW4iLGUse3Rvb2x0aXA6YX0pfX0sX3JlZ2lzdGVyQ2xvc2VIYW5kbGVyczpmdW5jdGlvbihlLGkpe3ZhciBzPXtrZXl1cDpmdW5jdGlvbihlKXtpZihlLmtleUNvZGU9PT10LnVpLmtleUNvZGUuRVNDQVBFKXt2YXIgcz10LkV2ZW50KGUpO3MuY3VycmVudFRhcmdldD1pWzBdLHRoaXMuY2xvc2UocywhMCl9fX07aVswXSE9PXRoaXMuZWxlbWVudFswXSYmKHMucmVtb3ZlPWZ1bmN0aW9uKCl7dGhpcy5fcmVtb3ZlVG9vbHRpcCh0aGlzLl9maW5kKGkpLnRvb2x0aXApfSksZSYmIm1vdXNlb3ZlciIhPT1lLnR5cGV8fChzLm1vdXNlbGVhdmU9ImNsb3NlIiksZSYmImZvY3VzaW4iIT09ZS50eXBlfHwocy5mb2N1c291dD0iY2xvc2UiKSx0aGlzLl9vbighMCxpLHMpfSxjbG9zZTpmdW5jdGlvbihlKXt2YXIgaSxzPXRoaXMsbj10KGU/ZS5jdXJyZW50VGFyZ2V0OnRoaXMuZWxlbWVudCksbz10aGlzLl9maW5kKG4pO3JldHVybiBvPyhpPW8udG9vbHRpcCxvLmNsb3Npbmd8fChjbGVhckludGVydmFsKHRoaXMuZGVsYXllZFNob3cpLG4uZGF0YSgidWktdG9vbHRpcC10aXRsZSIpJiYhbi5hdHRyKCJ0aXRsZSIpJiZuLmF0dHIoInRpdGxlIixuLmRhdGEoInVpLXRvb2x0aXAtdGl0bGUiKSksdGhpcy5fcmVtb3ZlRGVzY3JpYmVkQnkobiksby5oaWRpbmc9ITAsaS5zdG9wKCEwKSx0aGlzLl9oaWRlKGksdGhpcy5vcHRpb25zLmhpZGUsZnVuY3Rpb24oKXtzLl9yZW1vdmVUb29sdGlwKHQodGhpcykpfSksbi5yZW1vdmVEYXRhKCJ1aS10b29sdGlwLW9wZW4iKSx0aGlzLl9vZmYobiwibW91c2VsZWF2ZSBmb2N1c291dCBrZXl1cCIpLG5bMF0hPT10aGlzLmVsZW1lbnRbMF0mJnRoaXMuX29mZihuLCJyZW1vdmUiKSx0aGlzLl9vZmYodGhpcy5kb2N1bWVudCwibW91c2Vtb3ZlIiksZSYmIm1vdXNlbGVhdmUiPT09ZS50eXBlJiZ0LmVhY2godGhpcy5wYXJlbnRzLGZ1bmN0aW9uKGUsaSl7dChpLmVsZW1lbnQpLmF0dHIoInRpdGxlIixpLnRpdGxlKSxkZWxldGUgcy5wYXJlbnRzW2VdfSksby5jbG9zaW5nPSEwLHRoaXMuX3RyaWdnZXIoImNsb3NlIixlLHt0b29sdGlwOml9KSxvLmhpZGluZ3x8KG8uY2xvc2luZz0hMSkpLHZvaWQgMCk6KG4ucmVtb3ZlRGF0YSgidWktdG9vbHRpcC1vcGVuIiksdm9pZCAwKX0sX3Rvb2x0aXA6ZnVuY3Rpb24oZSl7dmFyIGk9dCgiPGRpdj4iKS5hdHRyKCJyb2xlIiwidG9vbHRpcCIpLHM9dCgiPGRpdj4iKS5hcHBlbmRUbyhpKSxuPWkudW5pcXVlSWQoKS5hdHRyKCJpZCIpO3JldHVybiB0aGlzLl9hZGRDbGFzcyhzLCJ1aS10b29sdGlwLWNvbnRlbnQiKSx0aGlzLl9hZGRDbGFzcyhpLCJ1aS10b29sdGlwIiwidWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IiksaS5hcHBlbmRUbyh0aGlzLl9hcHBlbmRUbyhlKSksdGhpcy50b29sdGlwc1tuXT17ZWxlbWVudDplLHRvb2x0aXA6aX19LF9maW5kOmZ1bmN0aW9uKHQpe3ZhciBlPXQuZGF0YSgidWktdG9vbHRpcC1pZCIpO3JldHVybiBlP3RoaXMudG9vbHRpcHNbZV06bnVsbH0sX3JlbW92ZVRvb2x0aXA6ZnVuY3Rpb24odCl7dC5yZW1vdmUoKSxkZWxldGUgdGhpcy50b29sdGlwc1t0LmF0dHIoImlkIildfSxfYXBwZW5kVG86ZnVuY3Rpb24odCl7dmFyIGU9dC5jbG9zZXN0KCIudWktZnJvbnQsIGRpYWxvZyIpO3JldHVybiBlLmxlbmd0aHx8KGU9dGhpcy5kb2N1bWVudFswXS5ib2R5KSxlfSxfZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7dC5lYWNoKHRoaXMudG9vbHRpcHMsZnVuY3Rpb24oaSxzKXt2YXIgbj10LkV2ZW50KCJibHVyIiksbz1zLmVsZW1lbnQ7bi50YXJnZXQ9bi5jdXJyZW50VGFyZ2V0PW9bMF0sZS5jbG9zZShuLCEwKSx0KCIjIitpKS5yZW1vdmUoKSxvLmRhdGEoInVpLXRvb2x0aXAtdGl0bGUiKSYmKG8uYXR0cigidGl0bGUiKXx8by5hdHRyKCJ0aXRsZSIsby5kYXRhKCJ1aS10b29sdGlwLXRpdGxlIikpLG8ucmVtb3ZlRGF0YSgidWktdG9vbHRpcC10aXRsZSIpKX0pLHRoaXMubGl2ZVJlZ2lvbi5yZW1vdmUoKX19KSx0LnVpQmFja0NvbXBhdCE9PSExJiZ0LndpZGdldCgidWkudG9vbHRpcCIsdC51aS50b29sdGlwLHtvcHRpb25zOnt0b29sdGlwQ2xhc3M6bnVsbH0sX3Rvb2x0aXA6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9zdXBlckFwcGx5KGFyZ3VtZW50cyk7cmV0dXJuIHRoaXMub3B0aW9ucy50b29sdGlwQ2xhc3MmJnQudG9vbHRpcC5hZGRDbGFzcyh0aGlzLm9wdGlvbnMudG9vbHRpcENsYXNzKSx0fX0pLHQudWkudG9vbHRpcH0pOwovKiEKICogalF1ZXJ5IFVJIFRvdWNoIFB1bmNoIDAuMi4zCiAqCiAqIENvcHlyaWdodCAyMDEx4oCTMjAxNCwgRGF2ZSBGdXJmZXJvCiAqIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBvciBHUEwgVmVyc2lvbiAyIGxpY2Vuc2VzLgogKgogKiBEZXBlbmRzOgogKiAganF1ZXJ5LnVpLndpZGdldC5qcwogKiAganF1ZXJ5LnVpLm1vdXNlLmpzCiAqLwooZnVuY3Rpb24gKCQpIHsKCiAgLy8gRGV0ZWN0IHRvdWNoIHN1cHBvcnQKICAkLnN1cHBvcnQudG91Y2ggPSAnb250b3VjaGVuZCcgaW4gZG9jdW1lbnQ7CgogIC8vIElnbm9yZSBicm93c2VycyB3aXRob3V0IHRvdWNoIHN1cHBvcnQKICBpZiAoISQuc3VwcG9ydC50b3VjaCkgewogICAgcmV0dXJuOwogIH0KCiAgdmFyIG1vdXNlUHJvdG8gPSAkLnVpLm1vdXNlLnByb3RvdHlwZSwKICAgICAgX21vdXNlSW5pdCA9IG1vdXNlUHJvdG8uX21vdXNlSW5pdCwKICAgICAgX21vdXNlRGVzdHJveSA9IG1vdXNlUHJvdG8uX21vdXNlRGVzdHJveSwKICAgICAgdG91Y2hIYW5kbGVkOwoKICAvKioKICAgKiBTaW11bGF0ZSBhIG1vdXNlIGV2ZW50IGJhc2VkIG9uIGEgY29ycmVzcG9uZGluZyB0b3VjaCBldmVudAogICAqIEBwYXJhbSB7T2JqZWN0fSBldmVudCBBIHRvdWNoIGV2ZW50CiAgICogQHBhcmFtIHtTdHJpbmd9IHNpbXVsYXRlZFR5cGUgVGhlIGNvcnJlc3BvbmRpbmcgbW91c2UgZXZlbnQKICAgKi8KICBmdW5jdGlvbiBzaW11bGF0ZU1vdXNlRXZlbnQgKGV2ZW50LCBzaW11bGF0ZWRUeXBlKSB7CgogICAgLy8gSWdub3JlIG11bHRpLXRvdWNoIGV2ZW50cwogICAgaWYgKGV2ZW50Lm9yaWdpbmFsRXZlbnQudG91Y2hlcy5sZW5ndGggPiAxKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoKICAgIHZhciB0b3VjaCA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0sCiAgICAgICAgc2ltdWxhdGVkRXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnTW91c2VFdmVudHMnKTsKICAgIAogICAgLy8gSW5pdGlhbGl6ZSB0aGUgc2ltdWxhdGVkIG1vdXNlIGV2ZW50IHVzaW5nIHRoZSB0b3VjaCBldmVudCdzIGNvb3JkaW5hdGVzCiAgICBzaW11bGF0ZWRFdmVudC5pbml0TW91c2VFdmVudCgKICAgICAgc2ltdWxhdGVkVHlwZSwgICAgLy8gdHlwZQogICAgICB0cnVlLCAgICAgICAgICAgICAvLyBidWJibGVzICAgICAgICAgICAgICAgICAgICAKICAgICAgdHJ1ZSwgICAgICAgICAgICAgLy8gY2FuY2VsYWJsZSAgICAgICAgICAgICAgICAgCiAgICAgIHdpbmRvdywgICAgICAgICAgIC8vIHZpZXcgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAxLCAgICAgICAgICAgICAgICAvLyBkZXRhaWwgICAgICAgICAgICAgICAgICAgICAKICAgICAgdG91Y2guc2NyZWVuWCwgICAgLy8gc2NyZWVuWCAgICAgICAgICAgICAgICAgICAgCiAgICAgIHRvdWNoLnNjcmVlblksICAgIC8vIHNjcmVlblkgICAgICAgICAgICAgICAgICAgIAogICAgICB0b3VjaC5jbGllbnRYLCAgICAvLyBjbGllbnRYICAgICAgICAgICAgICAgICAgICAKICAgICAgdG91Y2guY2xpZW50WSwgICAgLy8gY2xpZW50WSAgICAgICAgICAgICAgICAgICAgCiAgICAgIGZhbHNlLCAgICAgICAgICAgIC8vIGN0cmxLZXkgICAgICAgICAgICAgICAgICAgIAogICAgICBmYWxzZSwgICAgICAgICAgICAvLyBhbHRLZXkgICAgICAgICAgICAgICAgICAgICAKICAgICAgZmFsc2UsICAgICAgICAgICAgLy8gc2hpZnRLZXkgICAgICAgICAgICAgICAgICAgCiAgICAgIGZhbHNlLCAgICAgICAgICAgIC8vIG1ldGFLZXkgICAgICAgICAgICAgICAgICAgIAogICAgICAwLCAgICAgICAgICAgICAgICAvLyBidXR0b24gICAgICAgICAgICAgICAgICAgICAKICAgICAgbnVsbCAgICAgICAgICAgICAgLy8gcmVsYXRlZFRhcmdldCAgICAgICAgICAgICAgCiAgICApOwoKICAgIC8vIERpc3BhdGNoIHRoZSBzaW11bGF0ZWQgZXZlbnQgdG8gdGhlIHRhcmdldCBlbGVtZW50CiAgICBldmVudC50YXJnZXQuZGlzcGF0Y2hFdmVudChzaW11bGF0ZWRFdmVudCk7CiAgfQoKICAvKioKICAgKiBIYW5kbGUgdGhlIGpRdWVyeSBVSSB3aWRnZXQncyB0b3VjaHN0YXJ0IGV2ZW50cwogICAqIEBwYXJhbSB7T2JqZWN0fSBldmVudCBUaGUgd2lkZ2V0IGVsZW1lbnQncyB0b3VjaHN0YXJ0IGV2ZW50CiAgICovCiAgbW91c2VQcm90by5fdG91Y2hTdGFydCA9IGZ1bmN0aW9uIChldmVudCkgewoKICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAvLyBJZ25vcmUgdGhlIGV2ZW50IGlmIGFub3RoZXIgd2lkZ2V0IGlzIGFscmVhZHkgYmVpbmcgaGFuZGxlZAogICAgaWYgKHRvdWNoSGFuZGxlZCB8fCAhc2VsZi5fbW91c2VDYXB0dXJlKGV2ZW50Lm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0pKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICAvLyBTZXQgdGhlIGZsYWcgdG8gcHJldmVudCBvdGhlciB3aWRnZXRzIGZyb20gaW5oZXJpdGluZyB0aGUgdG91Y2ggZXZlbnQKICAgIHRvdWNoSGFuZGxlZCA9IHRydWU7CgogICAgLy8gVHJhY2sgbW92ZW1lbnQgdG8gZGV0ZXJtaW5lIGlmIGludGVyYWN0aW9uIHdhcyBhIGNsaWNrCiAgICBzZWxmLl90b3VjaE1vdmVkID0gZmFsc2U7CgogICAgLy8gU2ltdWxhdGUgdGhlIG1vdXNlb3ZlciBldmVudAogICAgc2ltdWxhdGVNb3VzZUV2ZW50KGV2ZW50LCAnbW91c2VvdmVyJyk7CgogICAgLy8gU2ltdWxhdGUgdGhlIG1vdXNlbW92ZSBldmVudAogICAgc2ltdWxhdGVNb3VzZUV2ZW50KGV2ZW50LCAnbW91c2Vtb3ZlJyk7CgogICAgLy8gU2ltdWxhdGUgdGhlIG1vdXNlZG93biBldmVudAogICAgc2ltdWxhdGVNb3VzZUV2ZW50KGV2ZW50LCAnbW91c2Vkb3duJyk7CiAgfTsKCiAgLyoqCiAgICogSGFuZGxlIHRoZSBqUXVlcnkgVUkgd2lkZ2V0J3MgdG91Y2htb3ZlIGV2ZW50cwogICAqIEBwYXJhbSB7T2JqZWN0fSBldmVudCBUaGUgZG9jdW1lbnQncyB0b3VjaG1vdmUgZXZlbnQKICAgKi8KICBtb3VzZVByb3RvLl90b3VjaE1vdmUgPSBmdW5jdGlvbiAoZXZlbnQpIHsKCiAgICAvLyBJZ25vcmUgZXZlbnQgaWYgbm90IGhhbmRsZWQKICAgIGlmICghdG91Y2hIYW5kbGVkKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICAvLyBJbnRlcmFjdGlvbiB3YXMgbm90IGEgY2xpY2sKICAgIHRoaXMuX3RvdWNoTW92ZWQgPSB0cnVlOwoKICAgIC8vIFNpbXVsYXRlIHRoZSBtb3VzZW1vdmUgZXZlbnQKICAgIHNpbXVsYXRlTW91c2VFdmVudChldmVudCwgJ21vdXNlbW92ZScpOwogIH07CgogIC8qKgogICAqIEhhbmRsZSB0aGUgalF1ZXJ5IFVJIHdpZGdldCdzIHRvdWNoZW5kIGV2ZW50cwogICAqIEBwYXJhbSB7T2JqZWN0fSBldmVudCBUaGUgZG9jdW1lbnQncyB0b3VjaGVuZCBldmVudAogICAqLwogIG1vdXNlUHJvdG8uX3RvdWNoRW5kID0gZnVuY3Rpb24gKGV2ZW50KSB7CgogICAgLy8gSWdub3JlIGV2ZW50IGlmIG5vdCBoYW5kbGVkCiAgICBpZiAoIXRvdWNoSGFuZGxlZCkgewogICAgICByZXR1cm47CiAgICB9CgogICAgLy8gU2ltdWxhdGUgdGhlIG1vdXNldXAgZXZlbnQKICAgIHNpbXVsYXRlTW91c2VFdmVudChldmVudCwgJ21vdXNldXAnKTsKCiAgICAvLyBTaW11bGF0ZSB0aGUgbW91c2VvdXQgZXZlbnQKICAgIHNpbXVsYXRlTW91c2VFdmVudChldmVudCwgJ21vdXNlb3V0Jyk7CgogICAgLy8gSWYgdGhlIHRvdWNoIGludGVyYWN0aW9uIGRpZCBub3QgbW92ZSwgaXQgc2hvdWxkIHRyaWdnZXIgYSBjbGljawogICAgaWYgKCF0aGlzLl90b3VjaE1vdmVkKSB7CgogICAgICAvLyBTaW11bGF0ZSB0aGUgY2xpY2sgZXZlbnQKICAgICAgc2ltdWxhdGVNb3VzZUV2ZW50KGV2ZW50LCAnY2xpY2snKTsKICAgIH0KCiAgICAvLyBVbnNldCB0aGUgZmxhZyB0byBhbGxvdyBvdGhlciB3aWRnZXRzIHRvIGluaGVyaXQgdGhlIHRvdWNoIGV2ZW50CiAgICB0b3VjaEhhbmRsZWQgPSBmYWxzZTsKICB9OwoKICAvKioKICAgKiBBIGR1Y2sgcHVuY2ggb2YgdGhlICQudWkubW91c2UgX21vdXNlSW5pdCBtZXRob2QgdG8gc3VwcG9ydCB0b3VjaCBldmVudHMuCiAgICogVGhpcyBtZXRob2QgZXh0ZW5kcyB0aGUgd2lkZ2V0IHdpdGggYm91bmQgdG91Y2ggZXZlbnQgaGFuZGxlcnMgdGhhdAogICAqIHRyYW5zbGF0ZSB0b3VjaCBldmVudHMgdG8gbW91c2UgZXZlbnRzIGFuZCBwYXNzIHRoZW0gdG8gdGhlIHdpZGdldCdzCiAgICogb3JpZ2luYWwgbW91c2UgZXZlbnQgaGFuZGxpbmcgbWV0aG9kcy4KICAgKi8KICBtb3VzZVByb3RvLl9tb3VzZUluaXQgPSBmdW5jdGlvbiAoKSB7CiAgICAKICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAvLyBEZWxlZ2F0ZSB0aGUgdG91Y2ggaGFuZGxlcnMgdG8gdGhlIHdpZGdldCdzIGVsZW1lbnQKICAgIHNlbGYuZWxlbWVudC5iaW5kKHsKICAgICAgdG91Y2hzdGFydDogJC5wcm94eShzZWxmLCAnX3RvdWNoU3RhcnQnKSwKICAgICAgdG91Y2htb3ZlOiAkLnByb3h5KHNlbGYsICdfdG91Y2hNb3ZlJyksCiAgICAgIHRvdWNoZW5kOiAkLnByb3h5KHNlbGYsICdfdG91Y2hFbmQnKQogICAgfSk7CgogICAgLy8gQ2FsbCB0aGUgb3JpZ2luYWwgJC51aS5tb3VzZSBpbml0IG1ldGhvZAogICAgX21vdXNlSW5pdC5jYWxsKHNlbGYpOwogIH07CgogIC8qKgogICAqIFJlbW92ZSB0aGUgdG91Y2ggZXZlbnQgaGFuZGxlcnMKICAgKi8KICBtb3VzZVByb3RvLl9tb3VzZURlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7CiAgICAKICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAvLyBEZWxlZ2F0ZSB0aGUgdG91Y2ggaGFuZGxlcnMgdG8gdGhlIHdpZGdldCdzIGVsZW1lbnQKICAgIHNlbGYuZWxlbWVudC51bmJpbmQoewogICAgICB0b3VjaHN0YXJ0OiAkLnByb3h5KHNlbGYsICdfdG91Y2hTdGFydCcpLAogICAgICB0b3VjaG1vdmU6ICQucHJveHkoc2VsZiwgJ190b3VjaE1vdmUnKSwKICAgICAgdG91Y2hlbmQ6ICQucHJveHkoc2VsZiwgJ190b3VjaEVuZCcpCiAgICB9KTsKCiAgICAvLyBDYWxsIHRoZSBvcmlnaW5hbCAkLnVpLm1vdXNlIGRlc3Ryb3kgbWV0aG9kCiAgICBfbW91c2VEZXN0cm95LmNhbGwoc2VsZik7CiAgfTsKCn0pKGpRdWVyeSk7Ci8qKgogKiBDaGVja2xpc3QtbW9kZWwKICogQW5ndWxhckpTIGRpcmVjdGl2ZSBmb3IgbGlzdCBvZiBjaGVja2JveGVzCiAqIGh0dHBzOi8vZ2l0aHViLmNvbS92aXRhbGV0cy9jaGVja2xpc3QtbW9kZWwKICogTGljZW5zZTogTUlUIGh0dHA6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQKICovCgphbmd1bGFyLm1vZHVsZSgnY2hlY2tsaXN0LW1vZGVsJywgW10pCi5kaXJlY3RpdmUoJ2NoZWNrbGlzdE1vZGVsJywgWyckcGFyc2UnLCAnJGNvbXBpbGUnLCBmdW5jdGlvbigkcGFyc2UsICRjb21waWxlKSB7CiAgLy8gY29udGFpbnMKICBmdW5jdGlvbiBjb250YWlucyhhcnIsIGl0ZW0sIGNvbXBhcmF0b3IpIHsKICAgIGlmIChhbmd1bGFyLmlzQXJyYXkoYXJyKSkgewogICAgICBmb3IgKHZhciBpID0gYXJyLmxlbmd0aDsgaS0tOykgewogICAgICAgIGlmIChjb21wYXJhdG9yKGFycltpXSwgaXRlbSkpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgLy8gYWRkCiAgZnVuY3Rpb24gYWRkKGFyciwgaXRlbSwgY29tcGFyYXRvcikgewogICAgYXJyID0gYW5ndWxhci5pc0FycmF5KGFycikgPyBhcnIgOiBbXTsKICAgICAgaWYoIWNvbnRhaW5zKGFyciwgaXRlbSwgY29tcGFyYXRvcikpIHsKICAgICAgICAgIGFyci5wdXNoKGl0ZW0pOwogICAgICB9CiAgICByZXR1cm4gYXJyOwogIH0gIAoKICAvLyByZW1vdmUKICBmdW5jdGlvbiByZW1vdmUoYXJyLCBpdGVtLCBjb21wYXJhdG9yKSB7CiAgICBpZiAoYW5ndWxhci5pc0FycmF5KGFycikpIHsKICAgICAgZm9yICh2YXIgaSA9IGFyci5sZW5ndGg7IGktLTspIHsKICAgICAgICBpZiAoY29tcGFyYXRvcihhcnJbaV0sIGl0ZW0pKSB7CiAgICAgICAgICBhcnIuc3BsaWNlKGksIDEpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gYXJyOwogIH0KCiAgLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMTkyMjgzMDIvMTQ1ODE2MgogIGZ1bmN0aW9uIHBvc3RMaW5rRm4oc2NvcGUsIGVsZW0sIGF0dHJzKSB7CiAgICAgLy8gZXhjbHVkZSByZWN1cnNpb24sIGJ1dCBzdGlsbCBrZWVwIHRoZSBtb2RlbAogICAgdmFyIGNoZWNrbGlzdE1vZGVsID0gYXR0cnMuY2hlY2tsaXN0TW9kZWw7CiAgICBhdHRycy4kc2V0KCJjaGVja2xpc3RNb2RlbCIsIG51bGwpOwogICAgLy8gY29tcGlsZSB3aXRoIGBuZy1tb2RlbGAgcG9pbnRpbmcgdG8gYGNoZWNrZWRgCiAgICAkY29tcGlsZShlbGVtKShzY29wZSk7CiAgICBhdHRycy4kc2V0KCJjaGVja2xpc3RNb2RlbCIsIGNoZWNrbGlzdE1vZGVsKTsKCiAgICAvLyBnZXR0ZXIgLyBzZXR0ZXIgZm9yIG9yaWdpbmFsIG1vZGVsCiAgICB2YXIgZ2V0dGVyID0gJHBhcnNlKGNoZWNrbGlzdE1vZGVsKTsKICAgIHZhciBzZXR0ZXIgPSBnZXR0ZXIuYXNzaWduOwogICAgdmFyIGNoZWNrbGlzdENoYW5nZSA9ICRwYXJzZShhdHRycy5jaGVja2xpc3RDaGFuZ2UpOwogICAgdmFyIGNoZWNrbGlzdEJlZm9yZUNoYW5nZSA9ICRwYXJzZShhdHRycy5jaGVja2xpc3RCZWZvcmVDaGFuZ2UpOwoKICAgIC8vIHZhbHVlIGFkZGVkIHRvIGxpc3QKICAgIHZhciB2YWx1ZSA9IGF0dHJzLmNoZWNrbGlzdFZhbHVlID8gJHBhcnNlKGF0dHJzLmNoZWNrbGlzdFZhbHVlKShzY29wZS4kcGFyZW50KSA6IGF0dHJzLnZhbHVlOwoKCiAgICB2YXIgY29tcGFyYXRvciA9IGFuZ3VsYXIuZXF1YWxzOwoKICAgIGlmIChhdHRycy5oYXNPd25Qcm9wZXJ0eSgnY2hlY2tsaXN0Q29tcGFyYXRvcicpKXsKICAgICAgaWYgKGF0dHJzLmNoZWNrbGlzdENvbXBhcmF0b3JbMF0gPT0gJy4nKSB7CiAgICAgICAgdmFyIGNvbXBhcmF0b3JFeHByZXNzaW9uID0gYXR0cnMuY2hlY2tsaXN0Q29tcGFyYXRvci5zdWJzdHJpbmcoMSk7CiAgICAgICAgY29tcGFyYXRvciA9IGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICByZXR1cm4gYVtjb21wYXJhdG9yRXhwcmVzc2lvbl0gPT09IGJbY29tcGFyYXRvckV4cHJlc3Npb25dOwogICAgICAgIH07CiAgICAgICAgCiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29tcGFyYXRvciA9ICRwYXJzZShhdHRycy5jaGVja2xpc3RDb21wYXJhdG9yKShzY29wZS4kcGFyZW50KTsKICAgICAgfQogICAgfQoKICAgIC8vIHdhdGNoIFVJIGNoZWNrZWQgY2hhbmdlCiAgICBzY29wZS4kd2F0Y2goYXR0cnMubmdNb2RlbCwgZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7CiAgICAgIGlmIChuZXdWYWx1ZSA9PT0gb2xkVmFsdWUpIHsgCiAgICAgICAgcmV0dXJuOwogICAgICB9IAoKICAgICAgaWYgKGNoZWNrbGlzdEJlZm9yZUNoYW5nZSAmJiAoY2hlY2tsaXN0QmVmb3JlQ2hhbmdlKHNjb3BlKSA9PT0gZmFsc2UpKSB7CiAgICAgICAgc2NvcGVbYXR0cnMubmdNb2RlbF0gPSBjb250YWlucyhnZXR0ZXIoc2NvcGUuJHBhcmVudCksIHZhbHVlLCBjb21wYXJhdG9yKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHNldFZhbHVlSW5DaGVja2xpc3RNb2RlbCh2YWx1ZSwgbmV3VmFsdWUpOwoKICAgICAgaWYgKGNoZWNrbGlzdENoYW5nZSkgewogICAgICAgIGNoZWNrbGlzdENoYW5nZShzY29wZSk7CiAgICAgIH0KICAgIH0pOwoKICAgIGZ1bmN0aW9uIHNldFZhbHVlSW5DaGVja2xpc3RNb2RlbCh2YWx1ZSwgY2hlY2tlZCkgewogICAgICB2YXIgY3VycmVudCA9IGdldHRlcihzY29wZS4kcGFyZW50KTsKICAgICAgaWYgKGFuZ3VsYXIuaXNGdW5jdGlvbihzZXR0ZXIpKSB7CiAgICAgICAgaWYgKGNoZWNrZWQgPT09IHRydWUpIHsKICAgICAgICAgIHNldHRlcihzY29wZS4kcGFyZW50LCBhZGQoY3VycmVudCwgdmFsdWUsIGNvbXBhcmF0b3IpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc2V0dGVyKHNjb3BlLiRwYXJlbnQsIHJlbW92ZShjdXJyZW50LCB2YWx1ZSwgY29tcGFyYXRvcikpOwogICAgICAgIH0KICAgICAgfQogICAgICAKICAgIH0KCiAgICAvLyBkZWNsYXJlIG9uZSBmdW5jdGlvbiB0byBiZSB1c2VkIGZvciBib3RoICR3YXRjaCBmdW5jdGlvbnMKICAgIGZ1bmN0aW9uIHNldENoZWNrZWQobmV3QXJyLCBvbGRBcnIpIHsKICAgICAgaWYgKGNoZWNrbGlzdEJlZm9yZUNoYW5nZSAmJiAoY2hlY2tsaXN0QmVmb3JlQ2hhbmdlKHNjb3BlKSA9PT0gZmFsc2UpKSB7CiAgICAgICAgc2V0VmFsdWVJbkNoZWNrbGlzdE1vZGVsKHZhbHVlLCBzY29wZVthdHRycy5uZ01vZGVsXSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHNjb3BlW2F0dHJzLm5nTW9kZWxdID0gY29udGFpbnMobmV3QXJyLCB2YWx1ZSwgY29tcGFyYXRvcik7CiAgICB9CgogICAgLy8gd2F0Y2ggb3JpZ2luYWwgbW9kZWwgY2hhbmdlCiAgICAvLyB1c2UgdGhlIGZhc3RlciAkd2F0Y2hDb2xsZWN0aW9uIG1ldGhvZCBpZiBpdCdzIGF2YWlsYWJsZQogICAgaWYgKGFuZ3VsYXIuaXNGdW5jdGlvbihzY29wZS4kcGFyZW50LiR3YXRjaENvbGxlY3Rpb24pKSB7CiAgICAgICAgc2NvcGUuJHBhcmVudC4kd2F0Y2hDb2xsZWN0aW9uKGNoZWNrbGlzdE1vZGVsLCBzZXRDaGVja2VkKTsKICAgIH0gZWxzZSB7CiAgICAgICAgc2NvcGUuJHBhcmVudC4kd2F0Y2goY2hlY2tsaXN0TW9kZWwsIHNldENoZWNrZWQsIHRydWUpOwogICAgfQogIH0KCiAgcmV0dXJuIHsKICAgIHJlc3RyaWN0OiAnQScsCiAgICBwcmlvcml0eTogMTAwMCwKICAgIHRlcm1pbmFsOiB0cnVlLAogICAgc2NvcGU6IHRydWUsCiAgICBjb21waWxlOiBmdW5jdGlvbih0RWxlbWVudCwgdEF0dHJzKSB7CiAgICAgIGlmICgodEVsZW1lbnRbMF0udGFnTmFtZSAhPT0gJ0lOUFVUJyB8fCB0QXR0cnMudHlwZSAhPT0gJ2NoZWNrYm94JykgJiYgKHRFbGVtZW50WzBdLnRhZ05hbWUgIT09ICdNRC1DSEVDS0JPWCcpICYmICghdEF0dHJzLmJ0bkNoZWNrYm94KSkgewogICAgICAgIHRocm93ICdjaGVja2xpc3QtbW9kZWwgc2hvdWxkIGJlIGFwcGxpZWQgdG8gYGlucHV0W3R5cGU9ImNoZWNrYm94Il1gIG9yIGBtZC1jaGVja2JveGAuJzsKICAgICAgfQoKICAgICAgaWYgKCF0QXR0cnMuY2hlY2tsaXN0VmFsdWUgJiYgIXRBdHRycy52YWx1ZSkgewogICAgICAgIHRocm93ICdZb3Ugc2hvdWxkIHByb3ZpZGUgYHZhbHVlYCBvciBgY2hlY2tsaXN0LXZhbHVlYC4nOwogICAgICB9CgogICAgICAvLyBieSBkZWZhdWx0IG5nTW9kZWwgaXMgJ2NoZWNrZWQnLCBzbyB3ZSBzZXQgaXQgaWYgbm90IHNwZWNpZmllZAogICAgICBpZiAoIXRBdHRycy5uZ01vZGVsKSB7CiAgICAgICAgLy8gbG9jYWwgc2NvcGUgdmFyIHN0b3JpbmcgaW5kaXZpZHVhbCBjaGVja2JveCBtb2RlbAogICAgICAgIHRBdHRycy4kc2V0KCJuZ01vZGVsIiwgImNoZWNrZWQiKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHBvc3RMaW5rRm47CiAgICB9CiAgfTsKfV0pOwoKLyoqCiAqIEBsaWNlbnNlCiAqIFZpZGVvLmpzIDUuMTUuMSA8aHR0cDovL3ZpZGVvanMuY29tLz4KICogQ29weXJpZ2h0IEJyaWdodGNvdmUsIEluYy4gPGh0dHBzOi8vd3d3LmJyaWdodGNvdmUuY29tLz4KICogQXZhaWxhYmxlIHVuZGVyIEFwYWNoZSBMaWNlbnNlIFZlcnNpb24gMi4wCiAqIDxodHRwczovL2dpdGh1Yi5jb20vdmlkZW9qcy92aWRlby5qcy9ibG9iL21hc3Rlci9MSUNFTlNFPgogKgogKiBJbmNsdWRlcyB2dHQuanMgPGh0dHBzOi8vZ2l0aHViLmNvbS9tb3ppbGxhL3Z0dC5qcz4KICogQXZhaWxhYmxlIHVuZGVyIEFwYWNoZSBMaWNlbnNlIFZlcnNpb24gMi4wCiAqIDxodHRwczovL2dpdGh1Yi5jb20vbW96aWxsYS92dHQuanMvYmxvYi9tYXN0ZXIvTElDRU5TRT4KICovCiFmdW5jdGlvbihhKXtpZigib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHMmJiJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlKW1vZHVsZS5leHBvcnRzPWEoKTtlbHNlIGlmKCJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFtdLGEpO2Vsc2V7dmFyIGI7Yj0idW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOnRoaXMsYi52aWRlb2pzPWEoKX19KGZ1bmN0aW9uKCl7dmFyIGE7cmV0dXJuIGZ1bmN0aW9uIGIoYSxjLGQpe2Z1bmN0aW9uIGUoZyxoKXtpZighY1tnXSl7aWYoIWFbZ10pe3ZhciBpPSJmdW5jdGlvbiI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFoJiZpKXJldHVybiBpKGcsITApO2lmKGYpcmV0dXJuIGYoZywhMCk7dmFyIGo9bmV3IEVycm9yKCJDYW5ub3QgZmluZCBtb2R1bGUgJyIrZysiJyIpO3Rocm93IGouY29kZT0iTU9EVUxFX05PVF9GT1VORCIsan12YXIgaz1jW2ddPXtleHBvcnRzOnt9fTthW2ddWzBdLmNhbGwoay5leHBvcnRzLGZ1bmN0aW9uKGIpe3ZhciBjPWFbZ11bMV1bYl07cmV0dXJuIGUoYz9jOmIpfSxrLGsuZXhwb3J0cyxiLGEsYyxkKX1yZXR1cm4gY1tnXS5leHBvcnRzfWZvcih2YXIgZj0iZnVuY3Rpb24iPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxnPTA7ZzxkLmxlbmd0aDtnKyspZShkW2ddKTtyZXR1cm4gZX0oezE6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZChhKXtyZXR1cm4gYSYmYS5fX2VzTW9kdWxlP2E6eyJkZWZhdWx0IjphfX1mdW5jdGlvbiBlKGEsYil7aWYoIShhIGluc3RhbmNlb2YgYikpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gZihhLGIpe2lmKCFhKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWJ8fCJvYmplY3QiIT10eXBlb2YgYiYmImZ1bmN0aW9uIiE9dHlwZW9mIGI/YTpifWZ1bmN0aW9uIGcoYSxiKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgYiYmbnVsbCE9PWIpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBiKTthLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGImJmIucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6YSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxiJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihhLGIpOmEuX19wcm90b19fPWIpfWMuX19lc01vZHVsZT0hMDt2YXIgaD1hKDIpLGk9ZChoKSxqPWEoNSksaz1kKGopLGw9ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe3JldHVybiBlKHRoaXMsYiksZih0aGlzLGEuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gZyhiLGEpLGIucHJvdG90eXBlLmJ1aWxkQ1NTQ2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4idmpzLWJpZy1wbGF5LWJ1dHRvbiJ9LGIucHJvdG90eXBlLmhhbmRsZUNsaWNrPWZ1bmN0aW9uKGEpe3RoaXMucGxheWVyXy5wbGF5KCl9LGJ9KGlbImRlZmF1bHQiXSk7bC5wcm90b3R5cGUuY29udHJvbFRleHRfPSJQbGF5IFZpZGVvIixrWyJkZWZhdWx0Il0ucmVnaXN0ZXJDb21wb25lbnQoIkJpZ1BsYXlCdXR0b24iLGwpLGNbImRlZmF1bHQiXT1sfSx7MjoyLDU6NX1dLDI6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZChhKXtyZXR1cm4gYSYmYS5fX2VzTW9kdWxlP2E6eyJkZWZhdWx0IjphfX1mdW5jdGlvbiBlKGEsYil7aWYoIShhIGluc3RhbmNlb2YgYikpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gZihhLGIpe2lmKCFhKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWJ8fCJvYmplY3QiIT10eXBlb2YgYiYmImZ1bmN0aW9uIiE9dHlwZW9mIGI/YTpifWZ1bmN0aW9uIGcoYSxiKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgYiYmbnVsbCE9PWIpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBiKTthLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGImJmIucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6YSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxiJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihhLGIpOmEuX19wcm90b19fPWIpfWMuX19lc01vZHVsZT0hMDt2YXIgaD1hKDMpLGk9ZChoKSxqPWEoNSksaz1kKGopLGw9YSg4NiksbT1kKGwpLG49YSg4OCksbz1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7cmV0dXJuIGUodGhpcyxiKSxmKHRoaXMsYS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBnKGIsYSksYi5wcm90b3R5cGUuY3JlYXRlRWw9ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06ImJ1dHRvbiIsYj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e30sYz1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06e307Yj0oMCxuLmFzc2lnbikoe2NsYXNzTmFtZTp0aGlzLmJ1aWxkQ1NTQ2xhc3MoKX0sYiksImJ1dHRvbiIhPT1hJiYobVsiZGVmYXVsdCJdLndhcm4oIkNyZWF0aW5nIGEgQnV0dG9uIHdpdGggYW4gSFRNTCBlbGVtZW50IG9mICIrYSsiIGlzIGRlcHJlY2F0ZWQ7IHVzZSBDbGlja2FibGVDb21wb25lbnQgaW5zdGVhZC4iKSxiPSgwLG4uYXNzaWduKSh7dGFiSW5kZXg6MH0sYiksYz0oMCxuLmFzc2lnbikoe3JvbGU6ImJ1dHRvbiJ9LGMpKSxjPSgwLG4uYXNzaWduKSh7dHlwZToiYnV0dG9uIiwiYXJpYS1saXZlIjoicG9saXRlIn0sYyk7dmFyIGQ9a1siZGVmYXVsdCJdLnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsYSxiLGMpO3JldHVybiB0aGlzLmNyZWF0ZUNvbnRyb2xUZXh0RWwoZCksZH0sYi5wcm90b3R5cGUuYWRkQ2hpbGQ9ZnVuY3Rpb24oYSl7dmFyIGI9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9LGM9dGhpcy5jb25zdHJ1Y3Rvci5uYW1lO3JldHVybiBtWyJkZWZhdWx0Il0ud2FybigiQWRkaW5nIGFuIGFjdGlvbmFibGUgKHVzZXIgY29udHJvbGxhYmxlKSBjaGlsZCB0byBhIEJ1dHRvbiAoIitjKyIpIGlzIG5vdCBzdXBwb3J0ZWQ7IHVzZSBhIENsaWNrYWJsZUNvbXBvbmVudCBpbnN0ZWFkLiIpLGtbImRlZmF1bHQiXS5wcm90b3R5cGUuYWRkQ2hpbGQuY2FsbCh0aGlzLGEsYil9LGIucHJvdG90eXBlLmVuYWJsZT1mdW5jdGlvbigpe2EucHJvdG90eXBlLmVuYWJsZS5jYWxsKHRoaXMpLHRoaXMuZWxfLnJlbW92ZUF0dHJpYnV0ZSgiZGlzYWJsZWQiKX0sYi5wcm90b3R5cGUuZGlzYWJsZT1mdW5jdGlvbigpe2EucHJvdG90eXBlLmRpc2FibGUuY2FsbCh0aGlzKSx0aGlzLmVsXy5zZXRBdHRyaWJ1dGUoImRpc2FibGVkIiwiZGlzYWJsZWQiKX0sYi5wcm90b3R5cGUuaGFuZGxlS2V5UHJlc3M9ZnVuY3Rpb24oYil7MzIhPT1iLndoaWNoJiYxMyE9PWIud2hpY2gmJmEucHJvdG90eXBlLmhhbmRsZUtleVByZXNzLmNhbGwodGhpcyxiKX0sYn0oaVsiZGVmYXVsdCJdKTtrWyJkZWZhdWx0Il0ucmVnaXN0ZXJDb21wb25lbnQoIkJ1dHRvbiIsbyksY1siZGVmYXVsdCJdPW99LHszOjMsNTo1LDg2Ojg2LDg4Ojg4fV0sMzpbZnVuY3Rpb24oYSxiLGMpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBkKGEpe2lmKGEmJmEuX19lc01vZHVsZSlyZXR1cm4gYTt2YXIgYj17fTtpZihudWxsIT1hKWZvcih2YXIgYyBpbiBhKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLGMpJiYoYltjXT1hW2NdKTtyZXR1cm4gYlsiZGVmYXVsdCJdPWEsYn1mdW5jdGlvbiBlKGEpe3JldHVybiBhJiZhLl9fZXNNb2R1bGU/YTp7ImRlZmF1bHQiOmF9fWZ1bmN0aW9uIGYoYSxiKXtpZighKGEgaW5zdGFuY2VvZiBiKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1mdW5jdGlvbiBnKGEsYil7aWYoIWEpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTtyZXR1cm4hYnx8Im9iamVjdCIhPXR5cGVvZiBiJiYiZnVuY3Rpb24iIT10eXBlb2YgYj9hOmJ9ZnVuY3Rpb24gaChhLGIpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBiJiZudWxsIT09Yil0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIGIpO2EucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYiYmYi5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTphLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGImJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKGEsYik6YS5fX3Byb3RvX189Yil9Yy5fX2VzTW9kdWxlPSEwO3ZhciBpPWEoNSksaj1lKGkpLGs9YSg4MSksbD1kKGspLG09YSg4Miksbj1kKG0pLG89YSg4MykscD1kKG8pLHE9YSg4Nikscj1lKHEpLHM9YSg5NCksdD1lKHMpLHU9YSg4OCksdj1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGMsZCl7Zih0aGlzLGIpO3ZhciBlPWcodGhpcyxhLmNhbGwodGhpcyxjLGQpKTtyZXR1cm4gZS5lbWl0VGFwRXZlbnRzKCksZS5lbmFibGUoKSxlfXJldHVybiBoKGIsYSksYi5wcm90b3R5cGUuY3JlYXRlRWw9ZnVuY3Rpb24oKXt2YXIgYj1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06ImRpdiIsYz1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e30sZD1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06e307Yz0oMCx1LmFzc2lnbikoe2NsYXNzTmFtZTp0aGlzLmJ1aWxkQ1NTQ2xhc3MoKSx0YWJJbmRleDowfSxjKSwiYnV0dG9uIj09PWImJnJbImRlZmF1bHQiXS5lcnJvcigiQ3JlYXRpbmcgYSBDbGlja2FibGVDb21wb25lbnQgd2l0aCBhbiBIVE1MIGVsZW1lbnQgb2YgIitiKyIgaXMgbm90IHN1cHBvcnRlZDsgdXNlIGEgQnV0dG9uIGluc3RlYWQuIiksZD0oMCx1LmFzc2lnbikoe3JvbGU6ImJ1dHRvbiIsImFyaWEtbGl2ZSI6InBvbGl0ZSJ9LGQpLHRoaXMudGFiSW5kZXhfPWMudGFiSW5kZXg7dmFyIGU9YS5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLGIsYyxkKTtyZXR1cm4gdGhpcy5jcmVhdGVDb250cm9sVGV4dEVsKGUpLGV9LGIucHJvdG90eXBlLmNyZWF0ZUNvbnRyb2xUZXh0RWw9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY29udHJvbFRleHRFbF89bC5jcmVhdGVFbCgic3BhbiIse2NsYXNzTmFtZToidmpzLWNvbnRyb2wtdGV4dCJ9KSxhJiZhLmFwcGVuZENoaWxkKHRoaXMuY29udHJvbFRleHRFbF8pLHRoaXMuY29udHJvbFRleHQodGhpcy5jb250cm9sVGV4dF8sYSksdGhpcy5jb250cm9sVGV4dEVsX30sYi5wcm90b3R5cGUuY29udHJvbFRleHQ9ZnVuY3Rpb24oYSl7dmFyIGI9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnRoaXMuZWwoKTtpZighYSlyZXR1cm4gdGhpcy5jb250cm9sVGV4dF98fCJOZWVkIFRleHQiO3ZhciBjPXRoaXMubG9jYWxpemUoYSk7cmV0dXJuIHRoaXMuY29udHJvbFRleHRfPWEsdGhpcy5jb250cm9sVGV4dEVsXy5pbm5lckhUTUw9YyxiLnNldEF0dHJpYnV0ZSgidGl0bGUiLGMpLHRoaXN9LGIucHJvdG90eXBlLmJ1aWxkQ1NTQ2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4idmpzLWNvbnRyb2wgdmpzLWJ1dHRvbiAiK2EucHJvdG90eXBlLmJ1aWxkQ1NTQ2xhc3MuY2FsbCh0aGlzKX0sYi5wcm90b3R5cGUuZW5hYmxlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVtb3ZlQ2xhc3MoInZqcy1kaXNhYmxlZCIpLHRoaXMuZWxfLnNldEF0dHJpYnV0ZSgiYXJpYS1kaXNhYmxlZCIsImZhbHNlIiksInVuZGVmaW5lZCIhPXR5cGVvZiB0aGlzLnRhYkluZGV4XyYmdGhpcy5lbF8uc2V0QXR0cmlidXRlKCJ0YWJJbmRleCIsdGhpcy50YWJJbmRleF8pLHRoaXMub24oInRhcCIsdGhpcy5oYW5kbGVDbGljayksdGhpcy5vbigiY2xpY2siLHRoaXMuaGFuZGxlQ2xpY2spLHRoaXMub24oImZvY3VzIix0aGlzLmhhbmRsZUZvY3VzKSx0aGlzLm9uKCJibHVyIix0aGlzLmhhbmRsZUJsdXIpLHRoaXN9LGIucHJvdG90eXBlLmRpc2FibGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hZGRDbGFzcygidmpzLWRpc2FibGVkIiksdGhpcy5lbF8uc2V0QXR0cmlidXRlKCJhcmlhLWRpc2FibGVkIiwidHJ1ZSIpLCJ1bmRlZmluZWQiIT10eXBlb2YgdGhpcy50YWJJbmRleF8mJnRoaXMuZWxfLnJlbW92ZUF0dHJpYnV0ZSgidGFiSW5kZXgiKSx0aGlzLm9mZigidGFwIix0aGlzLmhhbmRsZUNsaWNrKSx0aGlzLm9mZigiY2xpY2siLHRoaXMuaGFuZGxlQ2xpY2spLHRoaXMub2ZmKCJmb2N1cyIsdGhpcy5oYW5kbGVGb2N1cyksdGhpcy5vZmYoImJsdXIiLHRoaXMuaGFuZGxlQmx1ciksdGhpc30sYi5wcm90b3R5cGUuaGFuZGxlQ2xpY2s9ZnVuY3Rpb24oYSl7fSxiLnByb3RvdHlwZS5oYW5kbGVGb2N1cz1mdW5jdGlvbihhKXtuLm9uKHRbImRlZmF1bHQiXSwia2V5ZG93biIscC5iaW5kKHRoaXMsdGhpcy5oYW5kbGVLZXlQcmVzcykpfSxiLnByb3RvdHlwZS5oYW5kbGVLZXlQcmVzcz1mdW5jdGlvbihiKXszMj09PWIud2hpY2h8fDEzPT09Yi53aGljaD8oYi5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuaGFuZGxlQ2xpY2soYikpOmEucHJvdG90eXBlLmhhbmRsZUtleVByZXNzJiZhLnByb3RvdHlwZS5oYW5kbGVLZXlQcmVzcy5jYWxsKHRoaXMsYil9LGIucHJvdG90eXBlLmhhbmRsZUJsdXI9ZnVuY3Rpb24oYSl7bi5vZmYodFsiZGVmYXVsdCJdLCJrZXlkb3duIixwLmJpbmQodGhpcyx0aGlzLmhhbmRsZUtleVByZXNzKSl9LGJ9KGpbImRlZmF1bHQiXSk7alsiZGVmYXVsdCJdLnJlZ2lzdGVyQ29tcG9uZW50KCJDbGlja2FibGVDb21wb25lbnQiLHYpLGNbImRlZmF1bHQiXT12fSx7NTo1LDgxOjgxLDgyOjgyLDgzOjgzLDg2Ojg2LDg4Ojg4LDk0Ojk0fV0sNDpbZnVuY3Rpb24oYSxiLGMpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBkKGEpe3JldHVybiBhJiZhLl9fZXNNb2R1bGU/YTp7ImRlZmF1bHQiOmF9fWZ1bmN0aW9uIGUoYSxiKXtpZighKGEgaW5zdGFuY2VvZiBiKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1mdW5jdGlvbiBmKGEsYil7aWYoIWEpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTtyZXR1cm4hYnx8Im9iamVjdCIhPXR5cGVvZiBiJiYiZnVuY3Rpb24iIT10eXBlb2YgYj9hOmJ9ZnVuY3Rpb24gZyhhLGIpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBiJiZudWxsIT09Yil0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIGIpO2EucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYiYmYi5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTphLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGImJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKGEsYik6YS5fX3Byb3RvX189Yil9Yy5fX2VzTW9kdWxlPSEwO3ZhciBoPWEoMiksaT1kKGgpLGo9YSg1KSxrPWQoaiksbD1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGMsZCl7ZSh0aGlzLGIpO3ZhciBnPWYodGhpcyxhLmNhbGwodGhpcyxjLGQpKTtyZXR1cm4gZy5jb250cm9sVGV4dChkJiZkLmNvbnRyb2xUZXh0fHxnLmxvY2FsaXplKCJDbG9zZSIpKSxnfXJldHVybiBnKGIsYSksYi5wcm90b3R5cGUuYnVpbGRDU1NDbGFzcz1mdW5jdGlvbigpe3JldHVybiJ2anMtY2xvc2UtYnV0dG9uICIrYS5wcm90b3R5cGUuYnVpbGRDU1NDbGFzcy5jYWxsKHRoaXMpfSxiLnByb3RvdHlwZS5oYW5kbGVDbGljaz1mdW5jdGlvbihhKXt0aGlzLnRyaWdnZXIoe3R5cGU6ImNsb3NlIixidWJibGVzOiExfSl9LGJ9KGlbImRlZmF1bHQiXSk7a1siZGVmYXVsdCJdLnJlZ2lzdGVyQ29tcG9uZW50KCJDbG9zZUJ1dHRvbiIsbCksY1siZGVmYXVsdCJdPWx9LHsyOjIsNTo1fV0sNTpbZnVuY3Rpb24oYSxiLGMpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBkKGEpe2lmKGEmJmEuX19lc01vZHVsZSlyZXR1cm4gYTt2YXIgYj17fTtpZihudWxsIT1hKWZvcih2YXIgYyBpbiBhKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLGMpJiYoYltjXT1hW2NdKTtyZXR1cm4gYlsiZGVmYXVsdCJdPWEsYn1mdW5jdGlvbiBlKGEpe3JldHVybiBhJiZhLl9fZXNNb2R1bGU/YTp7ImRlZmF1bHQiOmF9fWZ1bmN0aW9uIGYoYSxiKXtpZighKGEgaW5zdGFuY2VvZiBiKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1jLl9fZXNNb2R1bGU9ITA7dmFyIGc9YSg5NSksaD1lKGcpLGk9YSg4MSksaj1kKGkpLGs9YSg4MyksbD1kKGspLG09YSg4NSksbj1kKG0pLG89YSg4MikscD1kKG8pLHE9YSg4Nikscj1lKHEpLHM9YSg5MSksdD1lKHMpLHU9YSg4Nyksdj1lKHUpLHc9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGIsYyxkKXtpZihmKHRoaXMsYSksIWImJnRoaXMucGxheT90aGlzLnBsYXllcl89Yj10aGlzOnRoaXMucGxheWVyXz1iLHRoaXMub3B0aW9uc189KDAsdlsiZGVmYXVsdCJdKSh7fSx0aGlzLm9wdGlvbnNfKSxjPXRoaXMub3B0aW9uc189KDAsdlsiZGVmYXVsdCJdKSh0aGlzLm9wdGlvbnNfLGMpLHRoaXMuaWRfPWMuaWR8fGMuZWwmJmMuZWwuaWQsIXRoaXMuaWRfKXt2YXIgZT1iJiZiLmlkJiZiLmlkKCl8fCJub19wbGF5ZXIiO3RoaXMuaWRfPWUrIl9jb21wb25lbnRfIituLm5ld0dVSUQoKX10aGlzLm5hbWVfPWMubmFtZXx8bnVsbCxjLmVsP3RoaXMuZWxfPWMuZWw6Yy5jcmVhdGVFbCE9PSExJiYodGhpcy5lbF89dGhpcy5jcmVhdGVFbCgpKSx0aGlzLmNoaWxkcmVuXz1bXSx0aGlzLmNoaWxkSW5kZXhfPXt9LHRoaXMuY2hpbGROYW1lSW5kZXhfPXt9LGMuaW5pdENoaWxkcmVuIT09ITEmJnRoaXMuaW5pdENoaWxkcmVuKCksdGhpcy5yZWFkeShkKSxjLnJlcG9ydFRvdWNoQWN0aXZpdHkhPT0hMSYmdGhpcy5lbmFibGVUb3VjaEFjdGl2aXR5KCl9cmV0dXJuIGEucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtpZih0aGlzLnRyaWdnZXIoe3R5cGU6ImRpc3Bvc2UiLGJ1YmJsZXM6ITF9KSx0aGlzLmNoaWxkcmVuXylmb3IodmFyIGE9dGhpcy5jaGlsZHJlbl8ubGVuZ3RoLTE7YT49MDthLS0pdGhpcy5jaGlsZHJlbl9bYV0uZGlzcG9zZSYmdGhpcy5jaGlsZHJlbl9bYV0uZGlzcG9zZSgpO3RoaXMuY2hpbGRyZW5fPW51bGwsdGhpcy5jaGlsZEluZGV4Xz1udWxsLHRoaXMuY2hpbGROYW1lSW5kZXhfPW51bGwsdGhpcy5vZmYoKSx0aGlzLmVsXy5wYXJlbnROb2RlJiZ0aGlzLmVsXy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZWxfKSxqLnJlbW92ZUVsRGF0YSh0aGlzLmVsXyksdGhpcy5lbF89bnVsbH0sYS5wcm90b3R5cGUucGxheWVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGxheWVyX30sYS5wcm90b3R5cGUub3B0aW9ucz1mdW5jdGlvbihhKXtyZXR1cm4gclsiZGVmYXVsdCJdLndhcm4oInRoaXMub3B0aW9ucygpIGhhcyBiZWVuIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgbW92ZWQgdG8gdGhlIGNvbnN0cnVjdG9yIGluIDYuMCIpLGE/KHRoaXMub3B0aW9uc189KDAsdlsiZGVmYXVsdCJdKSh0aGlzLm9wdGlvbnNfLGEpLHRoaXMub3B0aW9uc18pOnRoaXMub3B0aW9uc199LGEucHJvdG90eXBlLmVsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWxffSxhLnByb3RvdHlwZS5jcmVhdGVFbD1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGouY3JlYXRlRWwoYSxiLGMpfSxhLnByb3RvdHlwZS5sb2NhbGl6ZT1mdW5jdGlvbihhKXt2YXIgYj10aGlzLnBsYXllcl8ubGFuZ3VhZ2UmJnRoaXMucGxheWVyXy5sYW5ndWFnZSgpLGM9dGhpcy5wbGF5ZXJfLmxhbmd1YWdlcyYmdGhpcy5wbGF5ZXJfLmxhbmd1YWdlcygpO2lmKCFifHwhYylyZXR1cm4gYTt2YXIgZD1jW2JdO2lmKGQmJmRbYV0pcmV0dXJuIGRbYV07dmFyIGU9Yi5zcGxpdCgiLSIpWzBdLGY9Y1tlXTtyZXR1cm4gZiYmZlthXT9mW2FdOmF9LGEucHJvdG90eXBlLmNvbnRlbnRFbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnRFbF98fHRoaXMuZWxffSxhLnByb3RvdHlwZS5pZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlkX30sYS5wcm90b3R5cGUubmFtZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5hbWVffSxhLnByb3RvdHlwZS5jaGlsZHJlbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNoaWxkcmVuX30sYS5wcm90b3R5cGUuZ2V0Q2hpbGRCeUlkPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNoaWxkSW5kZXhfW2FdfSxhLnByb3RvdHlwZS5nZXRDaGlsZD1mdW5jdGlvbihhKXtpZihhKXJldHVybiBhPSgwLHRbImRlZmF1bHQiXSkoYSksdGhpcy5jaGlsZE5hbWVJbmRleF9bYV19LGEucHJvdG90eXBlLmFkZENoaWxkPWZ1bmN0aW9uKGIpe3ZhciBjPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fSxkPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTp0aGlzLmNoaWxkcmVuXy5sZW5ndGgsZT12b2lkIDAsZj12b2lkIDA7aWYoInN0cmluZyI9PXR5cGVvZiBiKXtmPSgwLHRbImRlZmF1bHQiXSkoYiksY3x8KGM9e30pLGM9PT0hMCYmKHJbImRlZmF1bHQiXS53YXJuKCJJbml0aWFsaXppbmcgYSBjaGlsZCBjb21wb25lbnQgd2l0aCBgdHJ1ZWAgaXMgZGVwcmVjYXRlZC5DaGlsZHJlbiBzaG91bGQgYmUgZGVmaW5lZCBpbiBhbiBhcnJheSB3aGVuIHBvc3NpYmxlLCBidXQgaWYgbmVjZXNzYXJ5IHVzZSBhbiBvYmplY3QgaW5zdGVhZCBvZiBgdHJ1ZWAuIiksYz17fSk7dmFyIGc9Yy5jb21wb25lbnRDbGFzc3x8ZjtjLm5hbWU9Zjt2YXIgaD1hLmdldENvbXBvbmVudChnKTtpZighaCl0aHJvdyBuZXcgRXJyb3IoIkNvbXBvbmVudCAiK2crIiBkb2VzIG5vdCBleGlzdCIpO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBoKXJldHVybiBudWxsO2U9bmV3IGgodGhpcy5wbGF5ZXJffHx0aGlzLGMpfWVsc2UgZT1iO2lmKHRoaXMuY2hpbGRyZW5fLnNwbGljZShkLDAsZSksImZ1bmN0aW9uIj09dHlwZW9mIGUuaWQmJih0aGlzLmNoaWxkSW5kZXhfW2UuaWQoKV09ZSksZj1mfHxlLm5hbWUmJmUubmFtZSgpLGYmJih0aGlzLmNoaWxkTmFtZUluZGV4X1tmXT1lKSwiZnVuY3Rpb24iPT10eXBlb2YgZS5lbCYmZS5lbCgpKXt2YXIgaT10aGlzLmNvbnRlbnRFbCgpLmNoaWxkcmVuLGo9aVtkXXx8bnVsbDt0aGlzLmNvbnRlbnRFbCgpLmluc2VydEJlZm9yZShlLmVsKCksail9cmV0dXJuIGV9LGEucHJvdG90eXBlLnJlbW92ZUNoaWxkPWZ1bmN0aW9uKGEpe2lmKCJzdHJpbmciPT10eXBlb2YgYSYmKGE9dGhpcy5nZXRDaGlsZChhKSksYSYmdGhpcy5jaGlsZHJlbl8pe2Zvcih2YXIgYj0hMSxjPXRoaXMuY2hpbGRyZW5fLmxlbmd0aC0xO2M+PTA7Yy0tKWlmKHRoaXMuY2hpbGRyZW5fW2NdPT09YSl7Yj0hMCx0aGlzLmNoaWxkcmVuXy5zcGxpY2UoYywxKTticmVha31pZihiKXt0aGlzLmNoaWxkSW5kZXhfW2EuaWQoKV09bnVsbCx0aGlzLmNoaWxkTmFtZUluZGV4X1thLm5hbWUoKV09bnVsbDt2YXIgZD1hLmVsKCk7ZCYmZC5wYXJlbnROb2RlPT09dGhpcy5jb250ZW50RWwoKSYmdGhpcy5jb250ZW50RWwoKS5yZW1vdmVDaGlsZChhLmVsKCkpfX19LGEucHJvdG90eXBlLmluaXRDaGlsZHJlbj1mdW5jdGlvbigpe3ZhciBiPXRoaXMsYz10aGlzLm9wdGlvbnNfLmNoaWxkcmVuO2MmJiFmdW5jdGlvbigpe3ZhciBkPWIub3B0aW9uc18sZT1mdW5jdGlvbihhKXt2YXIgYz1hLm5hbWUsZT1hLm9wdHM7aWYodm9pZCAwIT09ZFtjXSYmKGU9ZFtjXSksZSE9PSExKXtlPT09ITAmJihlPXt9KSxlLnBsYXllck9wdGlvbnM9Yi5vcHRpb25zXy5wbGF5ZXJPcHRpb25zO3ZhciBmPWIuYWRkQ2hpbGQoYyxlKTtmJiYoYltjXT1mKX19LGY9dm9pZCAwLGc9YS5nZXRDb21wb25lbnQoIlRlY2giKTtmPUFycmF5LmlzQXJyYXkoYyk/YzpPYmplY3Qua2V5cyhjKSxmLmNvbmNhdChPYmplY3Qua2V5cyhiLm9wdGlvbnNfKS5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIWYuc29tZShmdW5jdGlvbihiKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGI/YT09PWI6YT09PWIubmFtZX0pfSkpLm1hcChmdW5jdGlvbihhKXt2YXIgZD12b2lkIDAsZT12b2lkIDA7cmV0dXJuInN0cmluZyI9PXR5cGVvZiBhPyhkPWEsZT1jW2RdfHxiLm9wdGlvbnNfW2RdfHx7fSk6KGQ9YS5uYW1lLGU9YSkse25hbWU6ZCxvcHRzOmV9fSkuZmlsdGVyKGZ1bmN0aW9uKGIpe3ZhciBjPWEuZ2V0Q29tcG9uZW50KGIub3B0cy5jb21wb25lbnRDbGFzc3x8KDAsdFsiZGVmYXVsdCJdKShiLm5hbWUpKTtyZXR1cm4gYyYmIWcuaXNUZWNoKGMpfSkuZm9yRWFjaChlKX0oKX0sYS5wcm90b3R5cGUuYnVpbGRDU1NDbGFzcz1mdW5jdGlvbigpe3JldHVybiIifSxhLnByb3RvdHlwZS5vbj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcztyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGF8fEFycmF5LmlzQXJyYXkoYSk/cC5vbih0aGlzLmVsXyxhLGwuYmluZCh0aGlzLGIpKTohZnVuY3Rpb24oKXt2YXIgZT1hLGY9YixnPWwuYmluZChkLGMpLGg9ZnVuY3Rpb24oKXtyZXR1cm4gZC5vZmYoZSxmLGcpfTtoLmd1aWQ9Zy5ndWlkLGQub24oImRpc3Bvc2UiLGgpO3ZhciBpPWZ1bmN0aW9uKCl7cmV0dXJuIGQub2ZmKCJkaXNwb3NlIixoKX07aS5ndWlkPWcuZ3VpZCxhLm5vZGVOYW1lPyhwLm9uKGUsZixnKSxwLm9uKGUsImRpc3Bvc2UiLGkpKToiZnVuY3Rpb24iPT10eXBlb2YgYS5vbiYmKGUub24oZixnKSxlLm9uKCJkaXNwb3NlIixpKSl9KCksdGhpc30sYS5wcm90b3R5cGUub2ZmPWZ1bmN0aW9uKGEsYixjKXtpZighYXx8InN0cmluZyI9PXR5cGVvZiBhfHxBcnJheS5pc0FycmF5KGEpKXAub2ZmKHRoaXMuZWxfLGEsYik7ZWxzZXt2YXIgZD1hLGU9YixmPWwuYmluZCh0aGlzLGMpO3RoaXMub2ZmKCJkaXNwb3NlIixmKSxhLm5vZGVOYW1lPyhwLm9mZihkLGUsZikscC5vZmYoZCwiZGlzcG9zZSIsZikpOihkLm9mZihlLGYpLGQub2ZmKCJkaXNwb3NlIixmKSl9cmV0dXJuIHRoaXN9LGEucHJvdG90eXBlLm9uZT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcyxlPWFyZ3VtZW50cztyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGF8fEFycmF5LmlzQXJyYXkoYSk/cC5vbmUodGhpcy5lbF8sYSxsLmJpbmQodGhpcyxiKSk6IWZ1bmN0aW9uKCl7dmFyIGY9YSxnPWIsaD1sLmJpbmQoZCxjKSxpPWZ1bmN0aW9uIGooKXtkLm9mZihmLGcsaiksaC5hcHBseShudWxsLGUpfTtpLmd1aWQ9aC5ndWlkLGQub24oZixnLGkpfSgpLHRoaXN9LGEucHJvdG90eXBlLnRyaWdnZXI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gcC50cmlnZ2VyKHRoaXMuZWxfLGEsYiksdGhpc30sYS5wcm90b3R5cGUucmVhZHk9ZnVuY3Rpb24oYSl7dmFyIGI9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0mJmFyZ3VtZW50c1sxXTtyZXR1cm4gYSYmKHRoaXMuaXNSZWFkeV8/Yj9hLmNhbGwodGhpcyk6dGhpcy5zZXRUaW1lb3V0KGEsMSk6KHRoaXMucmVhZHlRdWV1ZV89dGhpcy5yZWFkeVF1ZXVlX3x8W10sdGhpcy5yZWFkeVF1ZXVlXy5wdXNoKGEpKSksdGhpc30sYS5wcm90b3R5cGUudHJpZ2dlclJlYWR5PWZ1bmN0aW9uKCl7dGhpcy5pc1JlYWR5Xz0hMCx0aGlzLnNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgYT10aGlzLnJlYWR5UXVldWVfO3RoaXMucmVhZHlRdWV1ZV89W10sYSYmYS5sZW5ndGg+MCYmYS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EuY2FsbCh0aGlzKX0sdGhpcyksdGhpcy50cmlnZ2VyKCJyZWFkeSIpfSwxKX0sYS5wcm90b3R5cGUuJD1mdW5jdGlvbihhLGIpe3JldHVybiBqLiQoYSxifHx0aGlzLmNvbnRlbnRFbCgpKX0sYS5wcm90b3R5cGUuJCQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gai4kJChhLGJ8fHRoaXMuY29udGVudEVsKCkpfSxhLnByb3RvdHlwZS5oYXNDbGFzcz1mdW5jdGlvbihhKXtyZXR1cm4gai5oYXNFbENsYXNzKHRoaXMuZWxfLGEpfSxhLnByb3RvdHlwZS5hZGRDbGFzcz1mdW5jdGlvbihhKXtyZXR1cm4gai5hZGRFbENsYXNzKHRoaXMuZWxfLGEpLHRoaXN9LGEucHJvdG90eXBlLnJlbW92ZUNsYXNzPWZ1bmN0aW9uKGEpe3JldHVybiBqLnJlbW92ZUVsQ2xhc3ModGhpcy5lbF8sYSksdGhpc30sYS5wcm90b3R5cGUudG9nZ2xlQ2xhc3M9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gai50b2dnbGVFbENsYXNzKHRoaXMuZWxfLGEsYiksdGhpc30sYS5wcm90b3R5cGUuc2hvdz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJlbW92ZUNsYXNzKCJ2anMtaGlkZGVuIiksdGhpc30sYS5wcm90b3R5cGUuaGlkZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFkZENsYXNzKCJ2anMtaGlkZGVuIiksdGhpc30sYS5wcm90b3R5cGUubG9ja1Nob3dpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hZGRDbGFzcygidmpzLWxvY2stc2hvd2luZyIpLHRoaXN9LGEucHJvdG90eXBlLnVubG9ja1Nob3dpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZW1vdmVDbGFzcygidmpzLWxvY2stc2hvd2luZyIpLHRoaXN9LGEucHJvdG90eXBlLmdldEF0dHJpYnV0ZT1mdW5jdGlvbihhKXtyZXR1cm4gai5nZXRBdHRyaWJ1dGUodGhpcy5lbF8sYSl9LGEucHJvdG90eXBlLnNldEF0dHJpYnV0ZT1mdW5jdGlvbihhLGIpe3JldHVybiBqLnNldEF0dHJpYnV0ZSh0aGlzLmVsXyxhLGIpLHRoaXN9LGEucHJvdG90eXBlLnJlbW92ZUF0dHJpYnV0ZT1mdW5jdGlvbihhKXtyZXR1cm4gai5yZW1vdmVBdHRyaWJ1dGUodGhpcy5lbF8sYSksdGhpc30sYS5wcm90b3R5cGUud2lkdGg9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5kaW1lbnNpb24oIndpZHRoIixhLGIpfSxhLnByb3RvdHlwZS5oZWlnaHQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5kaW1lbnNpb24oImhlaWdodCIsYSxiKX0sYS5wcm90b3R5cGUuZGltZW5zaW9ucz1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLndpZHRoKGEsITApLmhlaWdodChiKX0sYS5wcm90b3R5cGUuZGltZW5zaW9uPWZ1bmN0aW9uKGEsYixjKXtpZih2b2lkIDAhPT1iKXJldHVybiBudWxsIT09YiYmYj09PWJ8fChiPTApLCgiIitiKS5pbmRleE9mKCIlIikhPT0tMXx8KCIiK2IpLmluZGV4T2YoInB4IikhPT0tMT90aGlzLmVsXy5zdHlsZVthXT1iOiJhdXRvIj09PWI/dGhpcy5lbF8uc3R5bGVbYV09IiI6dGhpcy5lbF8uc3R5bGVbYV09YisicHgiLGN8fHRoaXMudHJpZ2dlcigicmVzaXplIiksdGhpcztpZighdGhpcy5lbF8pcmV0dXJuIDA7dmFyIGQ9dGhpcy5lbF8uc3R5bGVbYV0sZT1kLmluZGV4T2YoInB4Iik7cmV0dXJuIGUhPT0tMT9wYXJzZUludChkLnNsaWNlKDAsZSksMTApOnBhcnNlSW50KHRoaXMuZWxfWyJvZmZzZXQiKygwLHRbImRlZmF1bHQiXSkoYSldLDEwKX0sYS5wcm90b3R5cGUuY3VycmVudERpbWVuc2lvbj1mdW5jdGlvbihhKXt2YXIgYj0wO2lmKCJ3aWR0aCIhPT1hJiYiaGVpZ2h0IiE9PWEpdGhyb3cgbmV3IEVycm9yKCJjdXJyZW50RGltZW5zaW9uIG9ubHkgYWNjZXB0cyB3aWR0aCBvciBoZWlnaHQgdmFsdWUiKTtpZigiZnVuY3Rpb24iPT10eXBlb2YgaFsiZGVmYXVsdCJdLmdldENvbXB1dGVkU3R5bGUpe3ZhciBjPWhbImRlZmF1bHQiXS5nZXRDb21wdXRlZFN0eWxlKHRoaXMuZWxfKTtiPWMuZ2V0UHJvcGVydHlWYWx1ZShhKXx8Y1thXX1pZihiPXBhcnNlRmxvYXQoYiksMD09PWIpe3ZhciBkPSJvZmZzZXQiKygwLHRbImRlZmF1bHQiXSkoYSk7Yj10aGlzLmVsX1tkXX1yZXR1cm4gYn0sYS5wcm90b3R5cGUuY3VycmVudERpbWVuc2lvbnM9ZnVuY3Rpb24oKXtyZXR1cm57d2lkdGg6dGhpcy5jdXJyZW50RGltZW5zaW9uKCJ3aWR0aCIpLGhlaWdodDp0aGlzLmN1cnJlbnREaW1lbnNpb24oImhlaWdodCIpfX0sYS5wcm90b3R5cGUuY3VycmVudFdpZHRoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3VycmVudERpbWVuc2lvbigid2lkdGgiKX0sYS5wcm90b3R5cGUuY3VycmVudEhlaWdodD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmN1cnJlbnREaW1lbnNpb24oImhlaWdodCIpfSxhLnByb3RvdHlwZS5lbWl0VGFwRXZlbnRzPWZ1bmN0aW9uKCl7dmFyIGE9MCxiPW51bGwsYz0xMCxkPTIwMCxlPXZvaWQgMDt0aGlzLm9uKCJ0b3VjaHN0YXJ0IixmdW5jdGlvbihjKXsxPT09Yy50b3VjaGVzLmxlbmd0aCYmKGI9e3BhZ2VYOmMudG91Y2hlc1swXS5wYWdlWCxwYWdlWTpjLnRvdWNoZXNbMF0ucGFnZVl9LGE9KG5ldyBEYXRlKS5nZXRUaW1lKCksZT0hMCl9KSx0aGlzLm9uKCJ0b3VjaG1vdmUiLGZ1bmN0aW9uKGEpe2lmKGEudG91Y2hlcy5sZW5ndGg+MSllPSExO2Vsc2UgaWYoYil7dmFyIGQ9YS50b3VjaGVzWzBdLnBhZ2VYLWIucGFnZVgsZj1hLnRvdWNoZXNbMF0ucGFnZVktYi5wYWdlWSxnPU1hdGguc3FydChkKmQrZipmKTtnPmMmJihlPSExKX19KTt2YXIgZj1mdW5jdGlvbigpe2U9ITF9O3RoaXMub24oInRvdWNobGVhdmUiLGYpLHRoaXMub24oInRvdWNoY2FuY2VsIixmKSx0aGlzLm9uKCJ0b3VjaGVuZCIsZnVuY3Rpb24oYyl7aWYoYj1udWxsLGU9PT0hMCl7dmFyIGY9KG5ldyBEYXRlKS5nZXRUaW1lKCktYTtmPGQmJihjLnByZXZlbnREZWZhdWx0KCksdGhpcy50cmlnZ2VyKCJ0YXAiKSl9fSl9LGEucHJvdG90eXBlLmVuYWJsZVRvdWNoQWN0aXZpdHk9ZnVuY3Rpb24oKXtpZih0aGlzLnBsYXllcigpJiZ0aGlzLnBsYXllcigpLnJlcG9ydFVzZXJBY3Rpdml0eSl7dmFyIGE9bC5iaW5kKHRoaXMucGxheWVyKCksdGhpcy5wbGF5ZXIoKS5yZXBvcnRVc2VyQWN0aXZpdHkpLGI9dm9pZCAwO3RoaXMub24oInRvdWNoc3RhcnQiLGZ1bmN0aW9uKCl7YSgpLHRoaXMuY2xlYXJJbnRlcnZhbChiKSxiPXRoaXMuc2V0SW50ZXJ2YWwoYSwyNTApfSk7dmFyIGM9ZnVuY3Rpb24oYyl7YSgpLHRoaXMuY2xlYXJJbnRlcnZhbChiKX07dGhpcy5vbigidG91Y2htb3ZlIixhKSx0aGlzLm9uKCJ0b3VjaGVuZCIsYyksdGhpcy5vbigidG91Y2hjYW5jZWwiLGMpfX0sYS5wcm90b3R5cGUuc2V0VGltZW91dD1mdW5jdGlvbihhLGIpe2E9bC5iaW5kKHRoaXMsYSk7dmFyIGM9aFsiZGVmYXVsdCJdLnNldFRpbWVvdXQoYSxiKSxkPWZ1bmN0aW9uKCl7dGhpcy5jbGVhclRpbWVvdXQoYyl9O3JldHVybiBkLmd1aWQ9InZqcy10aW1lb3V0LSIrYyx0aGlzLm9uKCJkaXNwb3NlIixkKSxjfSxhLnByb3RvdHlwZS5jbGVhclRpbWVvdXQ9ZnVuY3Rpb24oYSl7aFsiZGVmYXVsdCJdLmNsZWFyVGltZW91dChhKTt2YXIgYj1mdW5jdGlvbigpe307cmV0dXJuIGIuZ3VpZD0idmpzLXRpbWVvdXQtIithLHRoaXMub2ZmKCJkaXNwb3NlIixiKSxhfSxhLnByb3RvdHlwZS5zZXRJbnRlcnZhbD1mdW5jdGlvbihhLGIpe2E9bC5iaW5kKHRoaXMsYSk7dmFyIGM9aFsiZGVmYXVsdCJdLnNldEludGVydmFsKGEsYiksZD1mdW5jdGlvbigpe3RoaXMuY2xlYXJJbnRlcnZhbChjKX07cmV0dXJuIGQuZ3VpZD0idmpzLWludGVydmFsLSIrYyx0aGlzLm9uKCJkaXNwb3NlIixkKSxjfSxhLnByb3RvdHlwZS5jbGVhckludGVydmFsPWZ1bmN0aW9uKGEpe2hbImRlZmF1bHQiXS5jbGVhckludGVydmFsKGEpO3ZhciBiPWZ1bmN0aW9uKCl7fTtyZXR1cm4gYi5ndWlkPSJ2anMtaW50ZXJ2YWwtIithLHRoaXMub2ZmKCJkaXNwb3NlIixiKSxhfSxhLnJlZ2lzdGVyQ29tcG9uZW50PWZ1bmN0aW9uKGIsYyl7aWYoYilyZXR1cm4gYj0oMCx0WyJkZWZhdWx0Il0pKGIpLGEuY29tcG9uZW50c198fChhLmNvbXBvbmVudHNfPXt9KSwiUGxheWVyIj09PWImJmEuY29tcG9uZW50c19bYl0mJiFmdW5jdGlvbigpe3ZhciBjPWEuY29tcG9uZW50c19bYl07aWYoYy5wbGF5ZXJzJiZPYmplY3Qua2V5cyhjLnBsYXllcnMpLmxlbmd0aD4wJiZPYmplY3Qua2V5cyhjLnBsYXllcnMpLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYy5wbGF5ZXJzW2FdfSkuZXZlcnkoQm9vbGVhbikpdGhyb3cgbmV3IEVycm9yKCJDYW4gbm90IHJlZ2lzdGVyIFBsYXllciBjb21wb25lbnQgYWZ0ZXIgcGxheWVyIGhhcyBiZWVuIGNyZWF0ZWQiKX0oKSxhLmNvbXBvbmVudHNfW2JdPWMsY30sYS5nZXRDb21wb25lbnQ9ZnVuY3Rpb24oYil7aWYoYilyZXR1cm4gYj0oMCx0WyJkZWZhdWx0Il0pKGIpLGEuY29tcG9uZW50c18mJmEuY29tcG9uZW50c19bYl0/YS5jb21wb25lbnRzX1tiXTpoWyJkZWZhdWx0Il0mJmhbImRlZmF1bHQiXS52aWRlb2pzJiZoWyJkZWZhdWx0Il0udmlkZW9qc1tiXT8oclsiZGVmYXVsdCJdLndhcm4oIlRoZSAiK2IrIiBjb21wb25lbnQgd2FzIGFkZGVkIHRvIHRoZSB2aWRlb2pzIG9iamVjdCB3aGVuIGl0IHNob3VsZCBiZSByZWdpc3RlcmVkIHVzaW5nIHZpZGVvanMucmVnaXN0ZXJDb21wb25lbnQobmFtZSwgY29tcG9uZW50KSIpLGhbImRlZmF1bHQiXS52aWRlb2pzW2JdKTp2b2lkIDB9LGEuZXh0ZW5kPWZ1bmN0aW9uKGIpe2I9Ynx8e30sclsiZGVmYXVsdCJdLndhcm4oIkNvbXBvbmVudC5leHRlbmQoe30pIGhhcyBiZWVuIGRlcHJlY2F0ZWQsICB1c2UgdmlkZW9qcy5leHRlbmQoQ29tcG9uZW50LCB7fSkgaW5zdGVhZCIpO3ZhciBjPWIuaW5pdHx8Yi5pbml0fHx0aGlzLnByb3RvdHlwZS5pbml0fHx0aGlzLnByb3RvdHlwZS5pbml0fHxmdW5jdGlvbigpe30sZD1mdW5jdGlvbigpe2MuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtkLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHRoaXMucHJvdG90eXBlKSxkLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1kLGQuZXh0ZW5kPWEuZXh0ZW5kO2Zvcih2YXIgZSBpbiBiKWIuaGFzT3duUHJvcGVydHkoZSkmJihkLnByb3RvdHlwZVtlXT1iW2VdKTtyZXR1cm4gZH0sYX0oKTt3LnJlZ2lzdGVyQ29tcG9uZW50KCJDb21wb25lbnQiLHcpLGNbImRlZmF1bHQiXT13fSx7ODE6ODEsODI6ODIsODM6ODMsODU6ODUsODY6ODYsODc6ODcsOTE6OTEsOTU6OTV9XSw2OltmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGQoYSl7cmV0dXJuIGEmJmEuX19lc01vZHVsZT9hOnsiZGVmYXVsdCI6YX19ZnVuY3Rpb24gZShhLGIpe2lmKCEoYSBpbnN0YW5jZW9mIGIpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIGYoYSxiKXtpZighYSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiFifHwib2JqZWN0IiE9dHlwZW9mIGImJiJmdW5jdGlvbiIhPXR5cGVvZiBiP2E6Yn1mdW5jdGlvbiBnKGEsYil7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGImJm51bGwhPT1iKXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgYik7YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiJiZiLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmEsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksYiYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoYSxiKTphLl9fcHJvdG9fXz1iKX1jLl9fZXNNb2R1bGU9ITA7dmFyIGg9YSgzNiksaT1kKGgpLGo9YSg1KSxrPWQoaiksbD1hKDcpLG09ZChsKSxuPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYyl7dmFyIGQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O2UodGhpcyxiKSxkLnRyYWNrcz1jLmF1ZGlvVHJhY2tzJiZjLmF1ZGlvVHJhY2tzKCk7dmFyIGc9Zih0aGlzLGEuY2FsbCh0aGlzLGMsZCkpO3JldHVybiBnLmVsXy5zZXRBdHRyaWJ1dGUoImFyaWEtbGFiZWwiLCJBdWRpbyBNZW51IiksZ31yZXR1cm4gZyhiLGEpLGIucHJvdG90eXBlLmJ1aWxkQ1NTQ2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4idmpzLWF1ZGlvLWJ1dHRvbiAiK2EucHJvdG90eXBlLmJ1aWxkQ1NTQ2xhc3MuY2FsbCh0aGlzKX0sYi5wcm90b3R5cGUuY3JlYXRlSXRlbXM9ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06W10sYj10aGlzLnBsYXllcl8uYXVkaW9UcmFja3MmJnRoaXMucGxheWVyXy5hdWRpb1RyYWNrcygpO2lmKCFiKXJldHVybiBhO2Zvcih2YXIgYz0wO2M8Yi5sZW5ndGg7YysrKXt2YXIgZD1iW2NdO2EucHVzaChuZXcgbVsiZGVmYXVsdCJdKHRoaXMucGxheWVyXyx7dHJhY2s6ZCxzZWxlY3RhYmxlOiEwfSkpfXJldHVybiBhfSxifShpWyJkZWZhdWx0Il0pO24ucHJvdG90eXBlLmNvbnRyb2xUZXh0Xz0iQXVkaW8gVHJhY2siLGtbImRlZmF1bHQiXS5yZWdpc3RlckNvbXBvbmVudCgiQXVkaW9UcmFja0J1dHRvbiIsbiksY1siZGVmYXVsdCJdPW59LHszNjozNiw1OjUsNzo3fV0sNzpbZnVuY3Rpb24oYSxiLGMpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBkKGEpe2lmKGEmJmEuX19lc01vZHVsZSlyZXR1cm4gYTt2YXIgYj17fTtpZihudWxsIT1hKWZvcih2YXIgYyBpbiBhKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLGMpJiYoYltjXT1hW2NdKTtyZXR1cm4gYlsiZGVmYXVsdCJdPWEsYn1mdW5jdGlvbiBlKGEpe3JldHVybiBhJiZhLl9fZXNNb2R1bGU/YTp7ImRlZmF1bHQiOmF9fWZ1bmN0aW9uIGYoYSxiKXtpZighKGEgaW5zdGFuY2VvZiBiKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1mdW5jdGlvbiBnKGEsYil7aWYoIWEpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTtyZXR1cm4hYnx8Im9iamVjdCIhPXR5cGVvZiBiJiYiZnVuY3Rpb24iIT10eXBlb2YgYj9hOmJ9ZnVuY3Rpb24gaChhLGIpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBiJiZudWxsIT09Yil0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIGIpO2EucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYiYmYi5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTphLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGImJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKGEsYik6YS5fX3Byb3RvX189Yil9Yy5fX2VzTW9kdWxlPSEwO3ZhciBpPWEoNDgpLGo9ZShpKSxrPWEoNSksbD1lKGspLG09YSg4Myksbj1kKG0pLG89ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihjLGQpe2YodGhpcyxiKTt2YXIgZT1kLnRyYWNrLGg9Yy5hdWRpb1RyYWNrcygpO2QubGFiZWw9ZS5sYWJlbHx8ZS5sYW5ndWFnZXx8IlVua25vd24iLGQuc2VsZWN0ZWQ9ZS5lbmFibGVkO3ZhciBpPWcodGhpcyxhLmNhbGwodGhpcyxjLGQpKTtyZXR1cm4gaS50cmFjaz1lLGgmJiFmdW5jdGlvbigpe3ZhciBhPW4uYmluZChpLGkuaGFuZGxlVHJhY2tzQ2hhbmdlKTtoLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsYSksaS5vbigiZGlzcG9zZSIsZnVuY3Rpb24oKXtoLnJlbW92ZUV2ZW50TGlzdGVuZXIoImNoYW5nZSIsYSl9KX0oKSxpfXJldHVybiBoKGIsYSksYi5wcm90b3R5cGUuaGFuZGxlQ2xpY2s9ZnVuY3Rpb24oYil7dmFyIGM9dGhpcy5wbGF5ZXJfLmF1ZGlvVHJhY2tzKCk7aWYoYS5wcm90b3R5cGUuaGFuZGxlQ2xpY2suY2FsbCh0aGlzLGIpLGMpZm9yKHZhciBkPTA7ZDxjLmxlbmd0aDtkKyspe3ZhciBlPWNbZF07ZS5lbmFibGVkPWU9PT10aGlzLnRyYWNrfX0sYi5wcm90b3R5cGUuaGFuZGxlVHJhY2tzQ2hhbmdlPWZ1bmN0aW9uKGEpe3RoaXMuc2VsZWN0ZWQodGhpcy50cmFjay5lbmFibGVkKX0sYn0oalsiZGVmYXVsdCJdKTtsWyJkZWZhdWx0Il0ucmVnaXN0ZXJDb21wb25lbnQoIkF1ZGlvVHJhY2tNZW51SXRlbSIsbyksY1siZGVmYXVsdCJdPW99LHs0ODo0OCw1OjUsODM6ODN9XSw4OltmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGQoYSl7cmV0dXJuIGEmJmEuX19lc01vZHVsZT9hOnsiZGVmYXVsdCI6YX19ZnVuY3Rpb24gZShhLGIpe2lmKCEoYSBpbnN0YW5jZW9mIGIpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIGYoYSxiKXtpZighYSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiFifHwib2JqZWN0IiE9dHlwZW9mIGImJiJmdW5jdGlvbiIhPXR5cGVvZiBiP2E6Yn1mdW5jdGlvbiBnKGEsYil7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGImJm51bGwhPT1iKXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgYik7YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiJiZiLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmEsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksYiYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoYSxiKTphLl9fcHJvdG9fXz1iKX1jLl9fZXNNb2R1bGU9ITA7dmFyIGg9YSg1KSxpPWQoaCk7YSgxMiksYSgzMiksYSgzMyksYSgzNSksYSgzNCksYSgxMCksYSgxOCksYSg5KSxhKDM4KSxhKDQwKSxhKDExKSxhKDI1KSxhKDI3KSxhKDI5KSxhKDI0KSxhKDYpLGEoMTMpLGEoMjEpO3ZhciBqPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXtyZXR1cm4gZSh0aGlzLGIpLGYodGhpcyxhLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGcoYixhKSxiLnByb3RvdHlwZS5jcmVhdGVFbD1mdW5jdGlvbigpe3JldHVybiBhLnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsImRpdiIse2NsYXNzTmFtZToidmpzLWNvbnRyb2wtYmFyIixkaXI6Imx0ciJ9LHtyb2xlOiJncm91cCJ9KX0sYn0oaVsiZGVmYXVsdCJdKTtqLnByb3RvdHlwZS5vcHRpb25zXz17Y2hpbGRyZW46WyJwbGF5VG9nZ2xlIiwidm9sdW1lTWVudUJ1dHRvbiIsImN1cnJlbnRUaW1lRGlzcGxheSIsInRpbWVEaXZpZGVyIiwiZHVyYXRpb25EaXNwbGF5IiwicHJvZ3Jlc3NDb250cm9sIiwibGl2ZURpc3BsYXkiLCJyZW1haW5pbmdUaW1lRGlzcGxheSIsImN1c3RvbUNvbnRyb2xTcGFjZXIiLCJwbGF5YmFja1JhdGVNZW51QnV0dG9uIiwiY2hhcHRlcnNCdXR0b24iLCJkZXNjcmlwdGlvbnNCdXR0b24iLCJzdWJ0aXRsZXNCdXR0b24iLCJjYXB0aW9uc0J1dHRvbiIsImF1ZGlvVHJhY2tCdXR0b24iLCJmdWxsc2NyZWVuVG9nZ2xlIl19LGlbImRlZmF1bHQiXS5yZWdpc3RlckNvbXBvbmVudCgiQ29udHJvbEJhciIsaiksY1siZGVmYXVsdCJdPWp9LHsxMDoxMCwxMToxMSwxMjoxMiwxMzoxMywxODoxOCwyMToyMSwyNDoyNCwyNToyNSwyNzoyNywyOToyOSwzMjozMiwzMzozMywzNDozNCwzNTozNSwzODozOCw0MDo0MCw1OjUsNjo2LDk6OX1dLDk6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZChhKXtyZXR1cm4gYSYmYS5fX2VzTW9kdWxlP2E6eyJkZWZhdWx0IjphfX1mdW5jdGlvbiBlKGEsYil7aWYoIShhIGluc3RhbmNlb2YgYikpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gZihhLGIpe2lmKCFhKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWJ8fCJvYmplY3QiIT10eXBlb2YgYiYmImZ1bmN0aW9uIiE9dHlwZW9mIGI/YTpifWZ1bmN0aW9uIGcoYSxiKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgYiYmbnVsbCE9PWIpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBiKTthLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGImJmIucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6YSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxiJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihhLGIpOmEuX19wcm90b19fPWIpfWMuX19lc01vZHVsZT0hMDt2YXIgaD1hKDIpLGk9ZChoKSxqPWEoNSksaz1kKGopLGw9ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihjLGQpe2UodGhpcyxiKTt2YXIgZz1mKHRoaXMsYS5jYWxsKHRoaXMsYyxkKSk7cmV0dXJuIGcub24oYywiZnVsbHNjcmVlbmNoYW5nZSIsZy5oYW5kbGVGdWxsc2NyZWVuQ2hhbmdlKSxnfXJldHVybiBnKGIsYSksYi5wcm90b3R5cGUuYnVpbGRDU1NDbGFzcz1mdW5jdGlvbigpe3JldHVybiJ2anMtZnVsbHNjcmVlbi1jb250cm9sICIrYS5wcm90b3R5cGUuYnVpbGRDU1NDbGFzcy5jYWxsKHRoaXMpfSxiLnByb3RvdHlwZS5oYW5kbGVGdWxsc2NyZWVuQ2hhbmdlPWZ1bmN0aW9uKGEpe3RoaXMucGxheWVyXy5pc0Z1bGxzY3JlZW4oKT90aGlzLmNvbnRyb2xUZXh0KCJOb24tRnVsbHNjcmVlbiIpOnRoaXMuY29udHJvbFRleHQoIkZ1bGxzY3JlZW4iKX0sYi5wcm90b3R5cGUuaGFuZGxlQ2xpY2s9ZnVuY3Rpb24oYSl7dGhpcy5wbGF5ZXJfLmlzRnVsbHNjcmVlbigpP3RoaXMucGxheWVyXy5leGl0RnVsbHNjcmVlbigpOnRoaXMucGxheWVyXy5yZXF1ZXN0RnVsbHNjcmVlbigpfSxifShpWyJkZWZhdWx0Il0pO2wucHJvdG90eXBlLmNvbnRyb2xUZXh0Xz0iRnVsbHNjcmVlbiIsa1siZGVmYXVsdCJdLnJlZ2lzdGVyQ29tcG9uZW50KCJGdWxsc2NyZWVuVG9nZ2xlIixsKSxjWyJkZWZhdWx0Il09bH0sezI6Miw1OjV9XSwxMDpbZnVuY3Rpb24oYSxiLGMpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBkKGEpe2lmKGEmJmEuX19lc01vZHVsZSlyZXR1cm4gYTt2YXIgYj17fTtpZihudWxsIT1hKWZvcih2YXIgYyBpbiBhKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLGMpJiYoYltjXT1hW2NdKTtyZXR1cm4gYlsiZGVmYXVsdCJdPWEsYn1mdW5jdGlvbiBlKGEpe3JldHVybiBhJiZhLl9fZXNNb2R1bGU/YTp7ImRlZmF1bHQiOmF9fWZ1bmN0aW9uIGYoYSxiKXtpZighKGEgaW5zdGFuY2VvZiBiKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1mdW5jdGlvbiBnKGEsYil7aWYoIWEpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTtyZXR1cm4hYnx8Im9iamVjdCIhPXR5cGVvZiBiJiYiZnVuY3Rpb24iIT10eXBlb2YgYj9hOmJ9ZnVuY3Rpb24gaChhLGIpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBiJiZudWxsIT09Yil0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIGIpO2EucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYiYmYi5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTphLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGImJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKGEsYik6YS5fX3Byb3RvX189Yil9Yy5fX2VzTW9kdWxlPSEwO3ZhciBpPWEoNSksaj1lKGkpLGs9YSg4MSksbD1kKGspLG09ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihjLGQpe2YodGhpcyxiKTt2YXIgZT1nKHRoaXMsYS5jYWxsKHRoaXMsYyxkKSk7cmV0dXJuIGUudXBkYXRlU2hvd2luZygpLGUub24oZS5wbGF5ZXIoKSwiZHVyYXRpb25jaGFuZ2UiLGUudXBkYXRlU2hvd2luZyksZX1yZXR1cm4gaChiLGEpLGIucHJvdG90eXBlLmNyZWF0ZUVsPWZ1bmN0aW9uKCl7dmFyIGI9YS5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCJkaXYiLHtjbGFzc05hbWU6InZqcy1saXZlLWNvbnRyb2wgdmpzLWNvbnRyb2wifSk7cmV0dXJuIHRoaXMuY29udGVudEVsXz1sLmNyZWF0ZUVsKCJkaXYiLHtjbGFzc05hbWU6InZqcy1saXZlLWRpc3BsYXkiLGlubmVySFRNTDonPHNwYW4gY2xhc3M9InZqcy1jb250cm9sLXRleHQiPicrdGhpcy5sb2NhbGl6ZSgiU3RyZWFtIFR5cGUiKSsiPC9zcGFuPiIrdGhpcy5sb2NhbGl6ZSgiTElWRSIpfSx7ImFyaWEtbGl2ZSI6Im9mZiJ9KSxiLmFwcGVuZENoaWxkKHRoaXMuY29udGVudEVsXyksYn0sYi5wcm90b3R5cGUudXBkYXRlU2hvd2luZz1mdW5jdGlvbihhKXt0aGlzLnBsYXllcigpLmR1cmF0aW9uKCk9PT0xLzA/dGhpcy5zaG93KCk6dGhpcy5oaWRlKCl9LGJ9KGpbImRlZmF1bHQiXSk7alsiZGVmYXVsdCJdLnJlZ2lzdGVyQ29tcG9uZW50KCJMaXZlRGlzcGxheSIsbSksY1siZGVmYXVsdCJdPW19LHs1OjUsODE6ODF9XSwxMTpbZnVuY3Rpb24oYSxiLGMpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBkKGEpe2lmKGEmJmEuX19lc01vZHVsZSlyZXR1cm4gYTt2YXIgYj17fTtpZihudWxsIT1hKWZvcih2YXIgYyBpbiBhKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLGMpJiYoYltjXT1hW2NdKTtyZXR1cm4gYlsiZGVmYXVsdCJdPWEsYn1mdW5jdGlvbiBlKGEpe3JldHVybiBhJiZhLl9fZXNNb2R1bGU/YTp7ImRlZmF1bHQiOmF9fWZ1bmN0aW9uIGYoYSxiKXtpZighKGEgaW5zdGFuY2VvZiBiKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1mdW5jdGlvbiBnKGEsYil7aWYoIWEpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTtyZXR1cm4hYnx8Im9iamVjdCIhPXR5cGVvZiBiJiYiZnVuY3Rpb24iIT10eXBlb2YgYj9hOmJ9ZnVuY3Rpb24gaChhLGIpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBiJiZudWxsIT09Yil0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIGIpO2EucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYiYmYi5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTphLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGImJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKGEsYik6YS5fX3Byb3RvX189Yil9Yy5fX2VzTW9kdWxlPSEwO3ZhciBpPWEoMiksaj1lKGkpLGs9YSg1KSxsPWUoayksbT1hKDgxKSxuPWQobSksbz1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGMsZCl7Zih0aGlzLGIpO3ZhciBlPWcodGhpcyxhLmNhbGwodGhpcyxjLGQpKTtyZXR1cm4gZS5vbihjLCJ2b2x1bWVjaGFuZ2UiLGUudXBkYXRlKSxjLnRlY2hfJiZjLnRlY2hfLmZlYXR1cmVzVm9sdW1lQ29udHJvbD09PSExJiZlLmFkZENsYXNzKCJ2anMtaGlkZGVuIiksZS5vbihjLCJsb2Fkc3RhcnQiLGZ1bmN0aW9uKCl7dGhpcy51cGRhdGUoKSxjLnRlY2hfLmZlYXR1cmVzVm9sdW1lQ29udHJvbD09PSExP3RoaXMuYWRkQ2xhc3MoInZqcy1oaWRkZW4iKTp0aGlzLnJlbW92ZUNsYXNzKCJ2anMtaGlkZGVuIil9KSxlfXJldHVybiBoKGIsYSksYi5wcm90b3R5cGUuYnVpbGRDU1NDbGFzcz1mdW5jdGlvbigpe3JldHVybiJ2anMtbXV0ZS1jb250cm9sICIrYS5wcm90b3R5cGUuYnVpbGRDU1NDbGFzcy5jYWxsKHRoaXMpfSxiLnByb3RvdHlwZS5oYW5kbGVDbGljaz1mdW5jdGlvbihhKXt0aGlzLnBsYXllcl8ubXV0ZWQoIXRoaXMucGxheWVyXy5tdXRlZCgpKX0sYi5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucGxheWVyXy52b2x1bWUoKSxjPTM7MD09PWJ8fHRoaXMucGxheWVyXy5tdXRlZCgpP2M9MDpiPC4zMz9jPTE6YjwuNjcmJihjPTIpO3ZhciBkPXRoaXMucGxheWVyXy5tdXRlZCgpPyJVbm11dGUiOiJNdXRlIjt0aGlzLmNvbnRyb2xUZXh0KCkhPT1kJiZ0aGlzLmNvbnRyb2xUZXh0KGQpO2Zvcih2YXIgZT0wO2U8NDtlKyspbi5yZW1vdmVFbENsYXNzKHRoaXMuZWxfLCJ2anMtdm9sLSIrZSk7bi5hZGRFbENsYXNzKHRoaXMuZWxfLCJ2anMtdm9sLSIrYyl9LGJ9KGpbImRlZmF1bHQiXSk7by5wcm90b3R5cGUuY29udHJvbFRleHRfPSJNdXRlIixsWyJkZWZhdWx0Il0ucmVnaXN0ZXJDb21wb25lbnQoIk11dGVUb2dnbGUiLG8pLGNbImRlZmF1bHQiXT1vfSx7MjoyLDU6NSw4MTo4MX1dLDEyOltmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGQoYSl7cmV0dXJuIGEmJmEuX19lc01vZHVsZT9hOnsiZGVmYXVsdCI6YX19ZnVuY3Rpb24gZShhLGIpe2lmKCEoYSBpbnN0YW5jZW9mIGIpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIGYoYSxiKXtpZighYSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiFifHwib2JqZWN0IiE9dHlwZW9mIGImJiJmdW5jdGlvbiIhPXR5cGVvZiBiP2E6Yn1mdW5jdGlvbiBnKGEsYil7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGImJm51bGwhPT1iKXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgYik7YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiJiZiLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmEsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksYiYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoYSxiKTphLl9fcHJvdG9fXz1iKX1jLl9fZXNNb2R1bGU9ITA7dmFyIGg9YSgyKSxpPWQoaCksaj1hKDUpLGs9ZChqKSxsPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYyxkKXtlKHRoaXMsYik7dmFyIGc9Zih0aGlzLGEuY2FsbCh0aGlzLGMsZCkpO3JldHVybiBnLm9uKGMsInBsYXkiLGcuaGFuZGxlUGxheSksZy5vbihjLCJwYXVzZSIsZy5oYW5kbGVQYXVzZSksZ31yZXR1cm4gZyhiLGEpLGIucHJvdG90eXBlLmJ1aWxkQ1NTQ2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4idmpzLXBsYXktY29udHJvbCAiK2EucHJvdG90eXBlLmJ1aWxkQ1NTQ2xhc3MuY2FsbCh0aGlzKX0sYi5wcm90b3R5cGUuaGFuZGxlQ2xpY2s9ZnVuY3Rpb24oYSl7dGhpcy5wbGF5ZXJfLnBhdXNlZCgpP3RoaXMucGxheWVyXy5wbGF5KCk6dGhpcy5wbGF5ZXJfLnBhdXNlKCl9LGIucHJvdG90eXBlLmhhbmRsZVBsYXk9ZnVuY3Rpb24oYSl7dGhpcy5yZW1vdmVDbGFzcygidmpzLXBhdXNlZCIpLHRoaXMuYWRkQ2xhc3MoInZqcy1wbGF5aW5nIiksdGhpcy5jb250cm9sVGV4dCgiUGF1c2UiKX0sYi5wcm90b3R5cGUuaGFuZGxlUGF1c2U9ZnVuY3Rpb24oYSl7dGhpcy5yZW1vdmVDbGFzcygidmpzLXBsYXlpbmciKSx0aGlzLmFkZENsYXNzKCJ2anMtcGF1c2VkIiksdGhpcy5jb250cm9sVGV4dCgiUGxheSIpfSxifShpWyJkZWZhdWx0Il0pO2wucHJvdG90eXBlLmNvbnRyb2xUZXh0Xz0iUGxheSIsa1siZGVmYXVsdCJdLnJlZ2lzdGVyQ29tcG9uZW50KCJQbGF5VG9nZ2xlIixsKSxjWyJkZWZhdWx0Il09bH0sezI6Miw1OjV9XSwxMzpbZnVuY3Rpb24oYSxiLGMpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBkKGEpe2lmKGEmJmEuX19lc01vZHVsZSlyZXR1cm4gYTt2YXIgYj17fTtpZihudWxsIT1hKWZvcih2YXIgYyBpbiBhKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLGMpJiYoYltjXT1hW2NdKTtyZXR1cm4gYlsiZGVmYXVsdCJdPWEsYn1mdW5jdGlvbiBlKGEpe3JldHVybiBhJiZhLl9fZXNNb2R1bGU/YTp7ImRlZmF1bHQiOmF9fWZ1bmN0aW9uIGYoYSxiKXtpZighKGEgaW5zdGFuY2VvZiBiKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1mdW5jdGlvbiBnKGEsYil7aWYoIWEpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTtyZXR1cm4hYnx8Im9iamVjdCIhPXR5cGVvZiBiJiYiZnVuY3Rpb24iIT10eXBlb2YgYj9hOmJ9ZnVuY3Rpb24gaChhLGIpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBiJiZudWxsIT09Yil0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIGIpO2EucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYiYmYi5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTphLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGImJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKGEsYik6YS5fX3Byb3RvX189Yil9Yy5fX2VzTW9kdWxlPSEwO3ZhciBpPWEoNDcpLGo9ZShpKSxrPWEoNDkpLGw9ZShrKSxtPWEoMTQpLG49ZShtKSxvPWEoNSkscD1lKG8pLHE9YSg4MSkscj1kKHEpLHM9ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihjLGQpe2YodGhpcyxiKTt2YXIgZT1nKHRoaXMsYS5jYWxsKHRoaXMsYyxkKSk7cmV0dXJuIGUudXBkYXRlVmlzaWJpbGl0eSgpLGUudXBkYXRlTGFiZWwoKSxlLm9uKGMsImxvYWRzdGFydCIsZS51cGRhdGVWaXNpYmlsaXR5KSxlLm9uKGMsInJhdGVjaGFuZ2UiLGUudXBkYXRlTGFiZWwpLGV9cmV0dXJuIGgoYixhKSxiLnByb3RvdHlwZS5jcmVhdGVFbD1mdW5jdGlvbigpe3ZhciBiPWEucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcyk7cmV0dXJuIHRoaXMubGFiZWxFbF89ci5jcmVhdGVFbCgiZGl2Iix7Y2xhc3NOYW1lOiJ2anMtcGxheWJhY2stcmF0ZS12YWx1ZSIsaW5uZXJIVE1MOjF9KSxiLmFwcGVuZENoaWxkKHRoaXMubGFiZWxFbF8pLGJ9LGIucHJvdG90eXBlLmJ1aWxkQ1NTQ2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4idmpzLXBsYXliYWNrLXJhdGUgIithLnByb3RvdHlwZS5idWlsZENTU0NsYXNzLmNhbGwodGhpcyl9LGIucHJvdG90eXBlLmNyZWF0ZU1lbnU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgbFsiZGVmYXVsdCJdKHRoaXMucGxheWVyKCkpLGI9dGhpcy5wbGF5YmFja1JhdGVzKCk7aWYoYilmb3IodmFyIGM9Yi5sZW5ndGgtMTtjPj0wO2MtLSlhLmFkZENoaWxkKG5ldyBuWyJkZWZhdWx0Il0odGhpcy5wbGF5ZXIoKSx7cmF0ZTpiW2NdKyJ4In0pKTtyZXR1cm4gYX0sYi5wcm90b3R5cGUudXBkYXRlQVJJQUF0dHJpYnV0ZXM9ZnVuY3Rpb24oKXt0aGlzLmVsKCkuc2V0QXR0cmlidXRlKCJhcmlhLXZhbHVlbm93Iix0aGlzLnBsYXllcigpLnBsYXliYWNrUmF0ZSgpKX0sYi5wcm90b3R5cGUuaGFuZGxlQ2xpY2s9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMucGxheWVyKCkucGxheWJhY2tSYXRlKCksYz10aGlzLnBsYXliYWNrUmF0ZXMoKSxkPWNbMF0sZT0wO2U8Yy5sZW5ndGg7ZSsrKWlmKGNbZV0+Yil7CmQ9Y1tlXTticmVha310aGlzLnBsYXllcigpLnBsYXliYWNrUmF0ZShkKX0sYi5wcm90b3R5cGUucGxheWJhY2tSYXRlcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbnNfLnBsYXliYWNrUmF0ZXN8fHRoaXMub3B0aW9uc18ucGxheWVyT3B0aW9ucyYmdGhpcy5vcHRpb25zXy5wbGF5ZXJPcHRpb25zLnBsYXliYWNrUmF0ZXN9LGIucHJvdG90eXBlLnBsYXliYWNrUmF0ZVN1cHBvcnRlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBsYXllcigpLnRlY2hfJiZ0aGlzLnBsYXllcigpLnRlY2hfLmZlYXR1cmVzUGxheWJhY2tSYXRlJiZ0aGlzLnBsYXliYWNrUmF0ZXMoKSYmdGhpcy5wbGF5YmFja1JhdGVzKCkubGVuZ3RoPjB9LGIucHJvdG90eXBlLnVwZGF0ZVZpc2liaWxpdHk9ZnVuY3Rpb24oYSl7dGhpcy5wbGF5YmFja1JhdGVTdXBwb3J0ZWQoKT90aGlzLnJlbW92ZUNsYXNzKCJ2anMtaGlkZGVuIik6dGhpcy5hZGRDbGFzcygidmpzLWhpZGRlbiIpfSxiLnByb3RvdHlwZS51cGRhdGVMYWJlbD1mdW5jdGlvbihhKXt0aGlzLnBsYXliYWNrUmF0ZVN1cHBvcnRlZCgpJiYodGhpcy5sYWJlbEVsXy5pbm5lckhUTUw9dGhpcy5wbGF5ZXIoKS5wbGF5YmFja1JhdGUoKSsieCIpfSxifShqWyJkZWZhdWx0Il0pO3MucHJvdG90eXBlLmNvbnRyb2xUZXh0Xz0iUGxheWJhY2sgUmF0ZSIscFsiZGVmYXVsdCJdLnJlZ2lzdGVyQ29tcG9uZW50KCJQbGF5YmFja1JhdGVNZW51QnV0dG9uIixzKSxjWyJkZWZhdWx0Il09c30sezE0OjE0LDQ3OjQ3LDQ5OjQ5LDU6NSw4MTo4MX1dLDE0OltmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGQoYSl7cmV0dXJuIGEmJmEuX19lc01vZHVsZT9hOnsiZGVmYXVsdCI6YX19ZnVuY3Rpb24gZShhLGIpe2lmKCEoYSBpbnN0YW5jZW9mIGIpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIGYoYSxiKXtpZighYSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiFifHwib2JqZWN0IiE9dHlwZW9mIGImJiJmdW5jdGlvbiIhPXR5cGVvZiBiP2E6Yn1mdW5jdGlvbiBnKGEsYil7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGImJm51bGwhPT1iKXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgYik7YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiJiZiLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmEsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksYiYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoYSxiKTphLl9fcHJvdG9fXz1iKX1jLl9fZXNNb2R1bGU9ITA7dmFyIGg9YSg0OCksaT1kKGgpLGo9YSg1KSxrPWQoaiksbD1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGMsZCl7ZSh0aGlzLGIpO3ZhciBnPWQucmF0ZSxoPXBhcnNlRmxvYXQoZywxMCk7ZC5sYWJlbD1nLGQuc2VsZWN0ZWQ9MT09PWg7dmFyIGk9Zih0aGlzLGEuY2FsbCh0aGlzLGMsZCkpO3JldHVybiBpLmxhYmVsPWcsaS5yYXRlPWgsaS5vbihjLCJyYXRlY2hhbmdlIixpLnVwZGF0ZSksaX1yZXR1cm4gZyhiLGEpLGIucHJvdG90eXBlLmhhbmRsZUNsaWNrPWZ1bmN0aW9uKGIpe2EucHJvdG90eXBlLmhhbmRsZUNsaWNrLmNhbGwodGhpcyksdGhpcy5wbGF5ZXIoKS5wbGF5YmFja1JhdGUodGhpcy5yYXRlKX0sYi5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKGEpe3RoaXMuc2VsZWN0ZWQodGhpcy5wbGF5ZXIoKS5wbGF5YmFja1JhdGUoKT09PXRoaXMucmF0ZSl9LGJ9KGlbImRlZmF1bHQiXSk7bC5wcm90b3R5cGUuY29udGVudEVsVHlwZT0iYnV0dG9uIixrWyJkZWZhdWx0Il0ucmVnaXN0ZXJDb21wb25lbnQoIlBsYXliYWNrUmF0ZU1lbnVJdGVtIixsKSxjWyJkZWZhdWx0Il09bH0sezQ4OjQ4LDU6NX1dLDE1OltmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGQoYSl7aWYoYSYmYS5fX2VzTW9kdWxlKXJldHVybiBhO3ZhciBiPXt9O2lmKG51bGwhPWEpZm9yKHZhciBjIGluIGEpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGEsYykmJihiW2NdPWFbY10pO3JldHVybiBiWyJkZWZhdWx0Il09YSxifWZ1bmN0aW9uIGUoYSl7cmV0dXJuIGEmJmEuX19lc01vZHVsZT9hOnsiZGVmYXVsdCI6YX19ZnVuY3Rpb24gZihhLGIpe2lmKCEoYSBpbnN0YW5jZW9mIGIpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIGcoYSxiKXtpZighYSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiFifHwib2JqZWN0IiE9dHlwZW9mIGImJiJmdW5jdGlvbiIhPXR5cGVvZiBiP2E6Yn1mdW5jdGlvbiBoKGEsYil7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGImJm51bGwhPT1iKXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgYik7YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiJiZiLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmEsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksYiYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoYSxiKTphLl9fcHJvdG9fXz1iKX1jLl9fZXNNb2R1bGU9ITA7dmFyIGk9YSg1KSxqPWUoaSksaz1hKDgxKSxsPWQoayksbT1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGMsZCl7Zih0aGlzLGIpO3ZhciBlPWcodGhpcyxhLmNhbGwodGhpcyxjLGQpKTtyZXR1cm4gZS5wYXJ0RWxzXz1bXSxlLm9uKGMsInByb2dyZXNzIixlLnVwZGF0ZSksZX1yZXR1cm4gaChiLGEpLGIucHJvdG90eXBlLmNyZWF0ZUVsPWZ1bmN0aW9uKCl7cmV0dXJuIGEucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywiZGl2Iix7Y2xhc3NOYW1lOiJ2anMtbG9hZC1wcm9ncmVzcyIsaW5uZXJIVE1MOic8c3BhbiBjbGFzcz0idmpzLWNvbnRyb2wtdGV4dCI+PHNwYW4+Jyt0aGlzLmxvY2FsaXplKCJMb2FkZWQiKSsiPC9zcGFuPjogMCU8L3NwYW4+In0pfSxiLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5wbGF5ZXJfLmJ1ZmZlcmVkKCksYz10aGlzLnBsYXllcl8uZHVyYXRpb24oKSxkPXRoaXMucGxheWVyXy5idWZmZXJlZEVuZCgpLGU9dGhpcy5wYXJ0RWxzXyxmPWZ1bmN0aW9uKGEsYil7dmFyIGM9YS9ifHwwO3JldHVybiAxMDAqKGM+PTE/MTpjKSsiJSJ9O3RoaXMuZWxfLnN0eWxlLndpZHRoPWYoZCxjKTtmb3IodmFyIGc9MDtnPGIubGVuZ3RoO2crKyl7dmFyIGg9Yi5zdGFydChnKSxpPWIuZW5kKGcpLGo9ZVtnXTtqfHwoaj10aGlzLmVsXy5hcHBlbmRDaGlsZChsLmNyZWF0ZUVsKCkpLGVbZ109aiksai5zdHlsZS5sZWZ0PWYoaCxkKSxqLnN0eWxlLndpZHRoPWYoaS1oLGQpfWZvcih2YXIgaz1lLmxlbmd0aDtrPmIubGVuZ3RoO2stLSl0aGlzLmVsXy5yZW1vdmVDaGlsZChlW2stMV0pO2UubGVuZ3RoPWIubGVuZ3RofSxifShqWyJkZWZhdWx0Il0pO2pbImRlZmF1bHQiXS5yZWdpc3RlckNvbXBvbmVudCgiTG9hZFByb2dyZXNzQmFyIixtKSxjWyJkZWZhdWx0Il09bX0sezU6NSw4MTo4MX1dLDE2OltmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGQoYSl7aWYoYSYmYS5fX2VzTW9kdWxlKXJldHVybiBhO3ZhciBiPXt9O2lmKG51bGwhPWEpZm9yKHZhciBjIGluIGEpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGEsYykmJihiW2NdPWFbY10pO3JldHVybiBiWyJkZWZhdWx0Il09YSxifWZ1bmN0aW9uIGUoYSl7cmV0dXJuIGEmJmEuX19lc01vZHVsZT9hOnsiZGVmYXVsdCI6YX19ZnVuY3Rpb24gZihhLGIpe2lmKCEoYSBpbnN0YW5jZW9mIGIpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIGcoYSxiKXtpZighYSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiFifHwib2JqZWN0IiE9dHlwZW9mIGImJiJmdW5jdGlvbiIhPXR5cGVvZiBiP2E6Yn1mdW5jdGlvbiBoKGEsYil7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGImJm51bGwhPT1iKXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgYik7YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiJiZiLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmEsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksYiYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoYSxiKTphLl9fcHJvdG9fXz1iKX1jLl9fZXNNb2R1bGU9ITA7dmFyIGk9YSg1KSxqPWUoaSksaz1hKDgxKSxsPWQoayksbT1hKDgzKSxuPWQobSksbz1hKDg0KSxwPWUobykscT1hKDgwKSxyPWUocSkscz1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGMsZCl7Zih0aGlzLGIpO3ZhciBlPWcodGhpcyxhLmNhbGwodGhpcyxjLGQpKTtyZXR1cm4gZC5wbGF5ZXJPcHRpb25zJiZkLnBsYXllck9wdGlvbnMuY29udHJvbEJhciYmZC5wbGF5ZXJPcHRpb25zLmNvbnRyb2xCYXIucHJvZ3Jlc3NDb250cm9sJiZkLnBsYXllck9wdGlvbnMuY29udHJvbEJhci5wcm9ncmVzc0NvbnRyb2wua2VlcFRvb2x0aXBzSW5zaWRlJiYoZS5rZWVwVG9vbHRpcHNJbnNpZGU9ZC5wbGF5ZXJPcHRpb25zLmNvbnRyb2xCYXIucHJvZ3Jlc3NDb250cm9sLmtlZXBUb29sdGlwc0luc2lkZSksZS5rZWVwVG9vbHRpcHNJbnNpZGUmJihlLnRvb2x0aXA9bC5jcmVhdGVFbCgiZGl2Iix7Y2xhc3NOYW1lOiJ2anMtdGltZS10b29sdGlwIn0pLGUuZWwoKS5hcHBlbmRDaGlsZChlLnRvb2x0aXApLGUuYWRkQ2xhc3MoInZqcy1rZWVwLXRvb2x0aXBzLWluc2lkZSIpKSxlLnVwZGF0ZSgwLDApLGMub24oInJlYWR5IixmdW5jdGlvbigpe2Uub24oYy5jb250cm9sQmFyLnByb2dyZXNzQ29udHJvbC5lbCgpLCJtb3VzZW1vdmUiLG4udGhyb3R0bGUobi5iaW5kKGUsZS5oYW5kbGVNb3VzZU1vdmUpLDI1KSl9KSxlfXJldHVybiBoKGIsYSksYi5wcm90b3R5cGUuY3JlYXRlRWw9ZnVuY3Rpb24oKXtyZXR1cm4gYS5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCJkaXYiLHtjbGFzc05hbWU6InZqcy1tb3VzZS1kaXNwbGF5In0pfSxiLnByb3RvdHlwZS5oYW5kbGVNb3VzZU1vdmU9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5wbGF5ZXJfLmR1cmF0aW9uKCksYz10aGlzLmNhbGN1bGF0ZURpc3RhbmNlKGEpKmIsZD1hLnBhZ2VYLWwuZmluZEVsUG9zaXRpb24odGhpcy5lbCgpLnBhcmVudE5vZGUpLmxlZnQ7dGhpcy51cGRhdGUoYyxkKX0sYi5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKGEsYil7dmFyIGM9KDAscFsiZGVmYXVsdCJdKShhLHRoaXMucGxheWVyXy5kdXJhdGlvbigpKTtpZih0aGlzLmVsKCkuc3R5bGUubGVmdD1iKyJweCIsdGhpcy5lbCgpLnNldEF0dHJpYnV0ZSgiZGF0YS1jdXJyZW50LXRpbWUiLGMpLHRoaXMua2VlcFRvb2x0aXBzSW5zaWRlKXt2YXIgZD10aGlzLmNsYW1wUG9zaXRpb25fKGIpLGU9Yi1kKzEsZj1wYXJzZUZsb2F0KCgwLHJbImRlZmF1bHQiXSkodGhpcy50b29sdGlwLCJ3aWR0aCIpKSxnPWYvMjt0aGlzLnRvb2x0aXAuaW5uZXJIVE1MPWMsdGhpcy50b29sdGlwLnN0eWxlLnJpZ2h0PSItIisoZy1lKSsicHgifX0sYi5wcm90b3R5cGUuY2FsY3VsYXRlRGlzdGFuY2U9ZnVuY3Rpb24oYSl7cmV0dXJuIGwuZ2V0UG9pbnRlclBvc2l0aW9uKHRoaXMuZWwoKS5wYXJlbnROb2RlLGEpLnh9LGIucHJvdG90eXBlLmNsYW1wUG9zaXRpb25fPWZ1bmN0aW9uKGEpe2lmKCF0aGlzLmtlZXBUb29sdGlwc0luc2lkZSlyZXR1cm4gYTt2YXIgYj1wYXJzZUZsb2F0KCgwLHJbImRlZmF1bHQiXSkodGhpcy5wbGF5ZXIoKS5lbCgpLCJ3aWR0aCIpKSxjPXBhcnNlRmxvYXQoKDAsclsiZGVmYXVsdCJdKSh0aGlzLnRvb2x0aXAsIndpZHRoIikpLGQ9Yy8yLGU9YTtyZXR1cm4gYTxkP2U9TWF0aC5jZWlsKGQpOmE+Yi1kJiYoZT1NYXRoLmZsb29yKGItZCkpLGV9LGJ9KGpbImRlZmF1bHQiXSk7alsiZGVmYXVsdCJdLnJlZ2lzdGVyQ29tcG9uZW50KCJNb3VzZVRpbWVEaXNwbGF5IixzKSxjWyJkZWZhdWx0Il09c30sezU6NSw4MDo4MCw4MTo4MSw4Mzo4Myw4NDo4NH1dLDE3OltmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGQoYSl7aWYoYSYmYS5fX2VzTW9kdWxlKXJldHVybiBhO3ZhciBiPXt9O2lmKG51bGwhPWEpZm9yKHZhciBjIGluIGEpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGEsYykmJihiW2NdPWFbY10pO3JldHVybiBiWyJkZWZhdWx0Il09YSxifWZ1bmN0aW9uIGUoYSl7cmV0dXJuIGEmJmEuX19lc01vZHVsZT9hOnsiZGVmYXVsdCI6YX19ZnVuY3Rpb24gZihhLGIpe2lmKCEoYSBpbnN0YW5jZW9mIGIpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIGcoYSxiKXtpZighYSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiFifHwib2JqZWN0IiE9dHlwZW9mIGImJiJmdW5jdGlvbiIhPXR5cGVvZiBiP2E6Yn1mdW5jdGlvbiBoKGEsYil7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGImJm51bGwhPT1iKXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgYik7YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiJiZiLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmEsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksYiYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoYSxiKTphLl9fcHJvdG9fXz1iKX1jLl9fZXNNb2R1bGU9ITA7dmFyIGk9YSg1KSxqPWUoaSksaz1hKDgzKSxsPWQoayksbT1hKDg0KSxuPWUobSksbz1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGMsZCl7Zih0aGlzLGIpO3ZhciBlPWcodGhpcyxhLmNhbGwodGhpcyxjLGQpKTtyZXR1cm4gZS51cGRhdGVEYXRhQXR0cigpLGUub24oYywidGltZXVwZGF0ZSIsZS51cGRhdGVEYXRhQXR0ciksYy5yZWFkeShsLmJpbmQoZSxlLnVwZGF0ZURhdGFBdHRyKSksZC5wbGF5ZXJPcHRpb25zJiZkLnBsYXllck9wdGlvbnMuY29udHJvbEJhciYmZC5wbGF5ZXJPcHRpb25zLmNvbnRyb2xCYXIucHJvZ3Jlc3NDb250cm9sJiZkLnBsYXllck9wdGlvbnMuY29udHJvbEJhci5wcm9ncmVzc0NvbnRyb2wua2VlcFRvb2x0aXBzSW5zaWRlJiYoZS5rZWVwVG9vbHRpcHNJbnNpZGU9ZC5wbGF5ZXJPcHRpb25zLmNvbnRyb2xCYXIucHJvZ3Jlc3NDb250cm9sLmtlZXBUb29sdGlwc0luc2lkZSksZS5rZWVwVG9vbHRpcHNJbnNpZGUmJmUuYWRkQ2xhc3MoInZqcy1rZWVwLXRvb2x0aXBzLWluc2lkZSIpLGV9cmV0dXJuIGgoYixhKSxiLnByb3RvdHlwZS5jcmVhdGVFbD1mdW5jdGlvbigpe3JldHVybiBhLnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsImRpdiIse2NsYXNzTmFtZToidmpzLXBsYXktcHJvZ3Jlc3MgdmpzLXNsaWRlci1iYXIiLGlubmVySFRNTDonPHNwYW4gY2xhc3M9InZqcy1jb250cm9sLXRleHQiPjxzcGFuPicrdGhpcy5sb2NhbGl6ZSgiUHJvZ3Jlc3MiKSsiPC9zcGFuPjogMCU8L3NwYW4+In0pfSxiLnByb3RvdHlwZS51cGRhdGVEYXRhQXR0cj1mdW5jdGlvbihhKXt2YXIgYj10aGlzLnBsYXllcl8uc2NydWJiaW5nKCk/dGhpcy5wbGF5ZXJfLmdldENhY2hlKCkuY3VycmVudFRpbWU6dGhpcy5wbGF5ZXJfLmN1cnJlbnRUaW1lKCk7dGhpcy5lbF8uc2V0QXR0cmlidXRlKCJkYXRhLWN1cnJlbnQtdGltZSIsKDAsblsiZGVmYXVsdCJdKShiLHRoaXMucGxheWVyXy5kdXJhdGlvbigpKSl9LGJ9KGpbImRlZmF1bHQiXSk7alsiZGVmYXVsdCJdLnJlZ2lzdGVyQ29tcG9uZW50KCJQbGF5UHJvZ3Jlc3NCYXIiLG8pLGNbImRlZmF1bHQiXT1vfSx7NTo1LDgzOjgzLDg0Ojg0fV0sMTg6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZChhKXtyZXR1cm4gYSYmYS5fX2VzTW9kdWxlP2E6eyJkZWZhdWx0IjphfX1mdW5jdGlvbiBlKGEsYil7aWYoIShhIGluc3RhbmNlb2YgYikpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gZihhLGIpe2lmKCFhKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWJ8fCJvYmplY3QiIT10eXBlb2YgYiYmImZ1bmN0aW9uIiE9dHlwZW9mIGI/YTpifWZ1bmN0aW9uIGcoYSxiKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgYiYmbnVsbCE9PWIpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBiKTthLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGImJmIucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6YSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxiJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihhLGIpOmEuX19wcm90b19fPWIpfWMuX19lc01vZHVsZT0hMDt2YXIgaD1hKDUpLGk9ZChoKTthKDE5KSxhKDE2KTt2YXIgaj1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7cmV0dXJuIGUodGhpcyxiKSxmKHRoaXMsYS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBnKGIsYSksYi5wcm90b3R5cGUuY3JlYXRlRWw9ZnVuY3Rpb24oKXtyZXR1cm4gYS5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCJkaXYiLHtjbGFzc05hbWU6InZqcy1wcm9ncmVzcy1jb250cm9sIHZqcy1jb250cm9sIn0pfSxifShpWyJkZWZhdWx0Il0pO2oucHJvdG90eXBlLm9wdGlvbnNfPXtjaGlsZHJlbjpbInNlZWtCYXIiXX0saVsiZGVmYXVsdCJdLnJlZ2lzdGVyQ29tcG9uZW50KCJQcm9ncmVzc0NvbnRyb2wiLGopLGNbImRlZmF1bHQiXT1qfSx7MTY6MTYsMTk6MTksNTo1fV0sMTk6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZChhKXtpZihhJiZhLl9fZXNNb2R1bGUpcmV0dXJuIGE7dmFyIGI9e307aWYobnVsbCE9YSlmb3IodmFyIGMgaW4gYSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxjKSYmKGJbY109YVtjXSk7cmV0dXJuIGJbImRlZmF1bHQiXT1hLGJ9ZnVuY3Rpb24gZShhKXtyZXR1cm4gYSYmYS5fX2VzTW9kdWxlP2E6eyJkZWZhdWx0IjphfX1mdW5jdGlvbiBmKGEsYil7aWYoIShhIGluc3RhbmNlb2YgYikpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gZyhhLGIpe2lmKCFhKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWJ8fCJvYmplY3QiIT10eXBlb2YgYiYmImZ1bmN0aW9uIiE9dHlwZW9mIGI/YTpifWZ1bmN0aW9uIGgoYSxiKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgYiYmbnVsbCE9PWIpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBiKTthLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGImJmIucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6YSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxiJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihhLGIpOmEuX19wcm90b19fPWIpfWMuX19lc01vZHVsZT0hMDt2YXIgaT1hKDU3KSxqPWUoaSksaz1hKDUpLGw9ZShrKSxtPWEoODMpLG49ZChtKSxvPWEoODQpLHA9ZShvKSxxPWEoODApLHI9ZShxKTthKDE1KSxhKDE3KSxhKDIwKTt2YXIgcz1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGMsZCl7Zih0aGlzLGIpO3ZhciBlPWcodGhpcyxhLmNhbGwodGhpcyxjLGQpKTtyZXR1cm4gZS5vbihjLCJ0aW1ldXBkYXRlIixlLnVwZGF0ZVByb2dyZXNzKSxlLm9uKGMsImVuZGVkIixlLnVwZGF0ZVByb2dyZXNzKSxjLnJlYWR5KG4uYmluZChlLGUudXBkYXRlUHJvZ3Jlc3MpKSxkLnBsYXllck9wdGlvbnMmJmQucGxheWVyT3B0aW9ucy5jb250cm9sQmFyJiZkLnBsYXllck9wdGlvbnMuY29udHJvbEJhci5wcm9ncmVzc0NvbnRyb2wmJmQucGxheWVyT3B0aW9ucy5jb250cm9sQmFyLnByb2dyZXNzQ29udHJvbC5rZWVwVG9vbHRpcHNJbnNpZGUmJihlLmtlZXBUb29sdGlwc0luc2lkZT1kLnBsYXllck9wdGlvbnMuY29udHJvbEJhci5wcm9ncmVzc0NvbnRyb2wua2VlcFRvb2x0aXBzSW5zaWRlKSxlLmtlZXBUb29sdGlwc0luc2lkZSYmKGUudG9vbHRpcFByb2dyZXNzQmFyPWUuYWRkQ2hpbGQoIlRvb2x0aXBQcm9ncmVzc0JhciIpKSxlfXJldHVybiBoKGIsYSksYi5wcm90b3R5cGUuY3JlYXRlRWw9ZnVuY3Rpb24oKXtyZXR1cm4gYS5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCJkaXYiLHtjbGFzc05hbWU6InZqcy1wcm9ncmVzcy1ob2xkZXIifSx7ImFyaWEtbGFiZWwiOiJwcm9ncmVzcyBiYXIifSl9LGIucHJvdG90eXBlLnVwZGF0ZVByb2dyZXNzPWZ1bmN0aW9uKGEpe2lmKHRoaXMudXBkYXRlQXJpYUF0dHJpYnV0ZXModGhpcy5lbF8pLHRoaXMua2VlcFRvb2x0aXBzSW5zaWRlKXt0aGlzLnVwZGF0ZUFyaWFBdHRyaWJ1dGVzKHRoaXMudG9vbHRpcFByb2dyZXNzQmFyLmVsXyksdGhpcy50b29sdGlwUHJvZ3Jlc3NCYXIuZWxfLnN0eWxlLndpZHRoPXRoaXMuYmFyLmVsXy5zdHlsZS53aWR0aDt2YXIgYj1wYXJzZUZsb2F0KCgwLHJbImRlZmF1bHQiXSkodGhpcy5wbGF5ZXIoKS5lbCgpLCJ3aWR0aCIpKSxjPXBhcnNlRmxvYXQoKDAsclsiZGVmYXVsdCJdKSh0aGlzLnRvb2x0aXBQcm9ncmVzc0Jhci50b29sdGlwLCJ3aWR0aCIpKSxkPXRoaXMudG9vbHRpcFByb2dyZXNzQmFyLmVsKCkuc3R5bGU7ZC5tYXhXaWR0aD1NYXRoLmZsb29yKGItYy8yKSsicHgiLGQubWluV2lkdGg9TWF0aC5jZWlsKGMvMikrInB4IixkLnJpZ2h0PSItIitjLzIrInB4In19LGIucHJvdG90eXBlLnVwZGF0ZUFyaWFBdHRyaWJ1dGVzPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucGxheWVyXy5zY3J1YmJpbmcoKT90aGlzLnBsYXllcl8uZ2V0Q2FjaGUoKS5jdXJyZW50VGltZTp0aGlzLnBsYXllcl8uY3VycmVudFRpbWUoKTthLnNldEF0dHJpYnV0ZSgiYXJpYS12YWx1ZW5vdyIsKDEwMCp0aGlzLmdldFBlcmNlbnQoKSkudG9GaXhlZCgyKSksYS5zZXRBdHRyaWJ1dGUoImFyaWEtdmFsdWV0ZXh0IiwoMCxwWyJkZWZhdWx0Il0pKGIsdGhpcy5wbGF5ZXJfLmR1cmF0aW9uKCkpKX0sYi5wcm90b3R5cGUuZ2V0UGVyY2VudD1mdW5jdGlvbigpe3ZhciBhPXRoaXMucGxheWVyXy5jdXJyZW50VGltZSgpL3RoaXMucGxheWVyXy5kdXJhdGlvbigpO3JldHVybiBhPj0xPzE6YX0sYi5wcm90b3R5cGUuaGFuZGxlTW91c2VEb3duPWZ1bmN0aW9uKGIpe2EucHJvdG90eXBlLmhhbmRsZU1vdXNlRG93bi5jYWxsKHRoaXMsYiksdGhpcy5wbGF5ZXJfLnNjcnViYmluZyghMCksdGhpcy52aWRlb1dhc1BsYXlpbmc9IXRoaXMucGxheWVyXy5wYXVzZWQoKSx0aGlzLnBhdXNlVGltZXJfPXRoaXMuc2V0VGltZW91dChmdW5jdGlvbigpe3RoaXMucGxheWVyXy5wYXVzZSgpfSwxMDApfSxiLnByb3RvdHlwZS5oYW5kbGVNb3VzZU1vdmU9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jYWxjdWxhdGVEaXN0YW5jZShhKSp0aGlzLnBsYXllcl8uZHVyYXRpb24oKTtiPT09dGhpcy5wbGF5ZXJfLmR1cmF0aW9uKCkmJihiLT0uMSksdGhpcy5wbGF5ZXJfLmN1cnJlbnRUaW1lKGIpLCJtb3VzZW1vdmUiPT09YS50eXBlJiYodGhpcy5jbGVhclRpbWVvdXQodGhpcy5wYXVzZVRpbWVyXyksdGhpcy5wbGF5ZXJfLnBhdXNlKCkpfSxiLnByb3RvdHlwZS5oYW5kbGVNb3VzZVVwPWZ1bmN0aW9uKGIpe2EucHJvdG90eXBlLmhhbmRsZU1vdXNlVXAuY2FsbCh0aGlzLGIpLHRoaXMuY2xlYXJUaW1lb3V0KHRoaXMucGF1c2VUaW1lcl8pLHRoaXMucGxheWVyXy5zY3J1YmJpbmcoITEpLHRoaXMudmlkZW9XYXNQbGF5aW5nJiZ0aGlzLnBsYXllcl8ucGxheSgpfSxiLnByb3RvdHlwZS5zdGVwRm9yd2FyZD1mdW5jdGlvbigpe3RoaXMucGxheWVyXy5jdXJyZW50VGltZSh0aGlzLnBsYXllcl8uY3VycmVudFRpbWUoKSs1KX0sYi5wcm90b3R5cGUuc3RlcEJhY2s9ZnVuY3Rpb24oKXt0aGlzLnBsYXllcl8uY3VycmVudFRpbWUodGhpcy5wbGF5ZXJfLmN1cnJlbnRUaW1lKCktNSl9LGJ9KGpbImRlZmF1bHQiXSk7cy5wcm90b3R5cGUub3B0aW9uc189e2NoaWxkcmVuOlsibG9hZFByb2dyZXNzQmFyIiwibW91c2VUaW1lRGlzcGxheSIsInBsYXlQcm9ncmVzc0JhciJdLGJhck5hbWU6InBsYXlQcm9ncmVzc0JhciJ9LHMucHJvdG90eXBlLnBsYXllckV2ZW50PSJ0aW1ldXBkYXRlIixsWyJkZWZhdWx0Il0ucmVnaXN0ZXJDb21wb25lbnQoIlNlZWtCYXIiLHMpLGNbImRlZmF1bHQiXT1zfSx7MTU6MTUsMTc6MTcsMjA6MjAsNTo1LDU3OjU3LDgwOjgwLDgzOjgzLDg0Ojg0fV0sMjA6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZChhKXtpZihhJiZhLl9fZXNNb2R1bGUpcmV0dXJuIGE7dmFyIGI9e307aWYobnVsbCE9YSlmb3IodmFyIGMgaW4gYSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxjKSYmKGJbY109YVtjXSk7cmV0dXJuIGJbImRlZmF1bHQiXT1hLGJ9ZnVuY3Rpb24gZShhKXtyZXR1cm4gYSYmYS5fX2VzTW9kdWxlP2E6eyJkZWZhdWx0IjphfX1mdW5jdGlvbiBmKGEsYil7aWYoIShhIGluc3RhbmNlb2YgYikpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gZyhhLGIpe2lmKCFhKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWJ8fCJvYmplY3QiIT10eXBlb2YgYiYmImZ1bmN0aW9uIiE9dHlwZW9mIGI/YTpifWZ1bmN0aW9uIGgoYSxiKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgYiYmbnVsbCE9PWIpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBiKTthLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGImJmIucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6YSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxiJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihhLGIpOmEuX19wcm90b19fPWIpfWMuX19lc01vZHVsZT0hMDt2YXIgaT1hKDUpLGo9ZShpKSxrPWEoODMpLGw9ZChrKSxtPWEoODQpLG49ZShtKSxvPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYyxkKXtmKHRoaXMsYik7dmFyIGU9Zyh0aGlzLGEuY2FsbCh0aGlzLGMsZCkpO3JldHVybiBlLnVwZGF0ZURhdGFBdHRyKCksZS5vbihjLCJ0aW1ldXBkYXRlIixlLnVwZGF0ZURhdGFBdHRyKSxjLnJlYWR5KGwuYmluZChlLGUudXBkYXRlRGF0YUF0dHIpKSxlfXJldHVybiBoKGIsYSksYi5wcm90b3R5cGUuY3JlYXRlRWw9ZnVuY3Rpb24oKXt2YXIgYj1hLnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsImRpdiIse2NsYXNzTmFtZToidmpzLXRvb2x0aXAtcHJvZ3Jlc3MtYmFyIHZqcy1zbGlkZXItYmFyIixpbm5lckhUTUw6JzxkaXYgY2xhc3M9InZqcy10aW1lLXRvb2x0aXAiPjwvZGl2PlxuICAgICAgICA8c3BhbiBjbGFzcz0idmpzLWNvbnRyb2wtdGV4dCI+PHNwYW4+Jyt0aGlzLmxvY2FsaXplKCJQcm9ncmVzcyIpKyI8L3NwYW4+OiAwJTwvc3Bhbj4ifSk7cmV0dXJuIHRoaXMudG9vbHRpcD1iLnF1ZXJ5U2VsZWN0b3IoIi52anMtdGltZS10b29sdGlwIiksYn0sYi5wcm90b3R5cGUudXBkYXRlRGF0YUF0dHI9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5wbGF5ZXJfLnNjcnViYmluZygpP3RoaXMucGxheWVyXy5nZXRDYWNoZSgpLmN1cnJlbnRUaW1lOnRoaXMucGxheWVyXy5jdXJyZW50VGltZSgpLGM9KDAsblsiZGVmYXVsdCJdKShiLHRoaXMucGxheWVyXy5kdXJhdGlvbigpKTt0aGlzLmVsXy5zZXRBdHRyaWJ1dGUoImRhdGEtY3VycmVudC10aW1lIixjKSx0aGlzLnRvb2x0aXAuaW5uZXJIVE1MPWN9LGJ9KGpbImRlZmF1bHQiXSk7alsiZGVmYXVsdCJdLnJlZ2lzdGVyQ29tcG9uZW50KCJUb29sdGlwUHJvZ3Jlc3NCYXIiLG8pLGNbImRlZmF1bHQiXT1vfSx7NTo1LDgzOjgzLDg0Ojg0fV0sMjE6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZChhKXtyZXR1cm4gYSYmYS5fX2VzTW9kdWxlP2E6eyJkZWZhdWx0IjphfX1mdW5jdGlvbiBlKGEsYil7aWYoIShhIGluc3RhbmNlb2YgYikpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gZihhLGIpe2lmKCFhKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWJ8fCJvYmplY3QiIT10eXBlb2YgYiYmImZ1bmN0aW9uIiE9dHlwZW9mIGI/YTpifWZ1bmN0aW9uIGcoYSxiKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgYiYmbnVsbCE9PWIpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBiKTthLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGImJmIucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6YSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxiJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihhLGIpOmEuX19wcm90b19fPWIpfWMuX19lc01vZHVsZT0hMDt2YXIgaD1hKDIyKSxpPWQoaCksaj1hKDUpLGs9ZChqKSxsPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXtyZXR1cm4gZSh0aGlzLGIpLGYodGhpcyxhLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGcoYixhKSxiLnByb3RvdHlwZS5idWlsZENTU0NsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuInZqcy1jdXN0b20tY29udHJvbC1zcGFjZXIgIithLnByb3RvdHlwZS5idWlsZENTU0NsYXNzLmNhbGwodGhpcyl9LGIucHJvdG90eXBlLmNyZWF0ZUVsPWZ1bmN0aW9uKCl7dmFyIGI9YS5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLHtjbGFzc05hbWU6dGhpcy5idWlsZENTU0NsYXNzKCl9KTtyZXR1cm4gYi5pbm5lckhUTUw9IiZuYnNwOyIsYn0sYn0oaVsiZGVmYXVsdCJdKTtrWyJkZWZhdWx0Il0ucmVnaXN0ZXJDb21wb25lbnQoIkN1c3RvbUNvbnRyb2xTcGFjZXIiLGwpLGNbImRlZmF1bHQiXT1sfSx7MjI6MjIsNTo1fV0sMjI6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZChhKXtyZXR1cm4gYSYmYS5fX2VzTW9kdWxlP2E6eyJkZWZhdWx0IjphfX1mdW5jdGlvbiBlKGEsYil7aWYoIShhIGluc3RhbmNlb2YgYikpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gZihhLGIpe2lmKCFhKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWJ8fCJvYmplY3QiIT10eXBlb2YgYiYmImZ1bmN0aW9uIiE9dHlwZW9mIGI/YTpifWZ1bmN0aW9uIGcoYSxiKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgYiYmbnVsbCE9PWIpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBiKTthLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGImJmIucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6YSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxiJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihhLGIpOmEuX19wcm90b19fPWIpfWMuX19lc01vZHVsZT0hMDt2YXIgaD1hKDUpLGk9ZChoKSxqPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXtyZXR1cm4gZSh0aGlzLGIpLGYodGhpcyxhLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGcoYixhKSxiLnByb3RvdHlwZS5idWlsZENTU0NsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuInZqcy1zcGFjZXIgIithLnByb3RvdHlwZS5idWlsZENTU0NsYXNzLmNhbGwodGhpcyl9LGIucHJvdG90eXBlLmNyZWF0ZUVsPWZ1bmN0aW9uKCl7cmV0dXJuIGEucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywiZGl2Iix7Y2xhc3NOYW1lOnRoaXMuYnVpbGRDU1NDbGFzcygpfSl9LGJ9KGlbImRlZmF1bHQiXSk7aVsiZGVmYXVsdCJdLnJlZ2lzdGVyQ29tcG9uZW50KCJTcGFjZXIiLGopLGNbImRlZmF1bHQiXT1qfSx7NTo1fV0sMjM6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZChhKXtyZXR1cm4gYSYmYS5fX2VzTW9kdWxlP2E6eyJkZWZhdWx0IjphfX1mdW5jdGlvbiBlKGEsYil7aWYoIShhIGluc3RhbmNlb2YgYikpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gZihhLGIpe2lmKCFhKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWJ8fCJvYmplY3QiIT10eXBlb2YgYiYmImZ1bmN0aW9uIiE9dHlwZW9mIGI/YTpifWZ1bmN0aW9uIGcoYSxiKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgYiYmbnVsbCE9PWIpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBiKTthLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGImJmIucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6YSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxiJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihhLGIpOmEuX19wcm90b19fPWIpfWMuX19lc01vZHVsZT0hMDt2YXIgaD1hKDMxKSxpPWQoaCksaj1hKDUpLGs9ZChqKSxsPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYyxkKXtlKHRoaXMsYiksZC50cmFjaz17cGxheWVyOmMsa2luZDpkLmtpbmQsbGFiZWw6ZC5raW5kKyIgc2V0dGluZ3MiLHNlbGVjdGFibGU6ITEsImRlZmF1bHQiOiExLG1vZGU6ImRpc2FibGVkIn0sZC5zZWxlY3RhYmxlPSExO3ZhciBnPWYodGhpcyxhLmNhbGwodGhpcyxjLGQpKTtyZXR1cm4gZy5hZGRDbGFzcygidmpzLXRleHR0cmFjay1zZXR0aW5ncyIpLGcuY29udHJvbFRleHQoIiwgb3BlbnMgIitkLmtpbmQrIiBzZXR0aW5ncyBkaWFsb2ciKSxnfXJldHVybiBnKGIsYSksYi5wcm90b3R5cGUuaGFuZGxlQ2xpY2s9ZnVuY3Rpb24oYSl7dGhpcy5wbGF5ZXIoKS5nZXRDaGlsZCgidGV4dFRyYWNrU2V0dGluZ3MiKS5zaG93KCksdGhpcy5wbGF5ZXIoKS5nZXRDaGlsZCgidGV4dFRyYWNrU2V0dGluZ3MiKS5lbF8uZm9jdXMoKX0sYn0oaVsiZGVmYXVsdCJdKTtrWyJkZWZhdWx0Il0ucmVnaXN0ZXJDb21wb25lbnQoIkNhcHRpb25TZXR0aW5nc01lbnVJdGVtIixsKSxjWyJkZWZhdWx0Il09bH0sezMxOjMxLDU6NX1dLDI0OltmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGQoYSl7cmV0dXJuIGEmJmEuX19lc01vZHVsZT9hOnsiZGVmYXVsdCI6YX19ZnVuY3Rpb24gZShhLGIpe2lmKCEoYSBpbnN0YW5jZW9mIGIpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIGYoYSxiKXtpZighYSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiFifHwib2JqZWN0IiE9dHlwZW9mIGImJiJmdW5jdGlvbiIhPXR5cGVvZiBiP2E6Yn1mdW5jdGlvbiBnKGEsYil7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGImJm51bGwhPT1iKXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgYik7YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiJiZiLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmEsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksYiYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoYSxiKTphLl9fcHJvdG9fXz1iKX1jLl9fZXNNb2R1bGU9ITA7dmFyIGg9YSgzMCksaT1kKGgpLGo9YSg1KSxrPWQoaiksbD1hKDIzKSxtPWQobCksbj1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGMsZCxnKXtlKHRoaXMsYik7dmFyIGg9Zih0aGlzLGEuY2FsbCh0aGlzLGMsZCxnKSk7cmV0dXJuIGguZWxfLnNldEF0dHJpYnV0ZSgiYXJpYS1sYWJlbCIsIkNhcHRpb25zIE1lbnUiKSxofXJldHVybiBnKGIsYSksYi5wcm90b3R5cGUuYnVpbGRDU1NDbGFzcz1mdW5jdGlvbigpe3JldHVybiJ2anMtY2FwdGlvbnMtYnV0dG9uICIrYS5wcm90b3R5cGUuYnVpbGRDU1NDbGFzcy5jYWxsKHRoaXMpfSxiLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oYil7dmFyIGM9MjthLnByb3RvdHlwZS51cGRhdGUuY2FsbCh0aGlzKSx0aGlzLnBsYXllcigpLnRlY2hfJiZ0aGlzLnBsYXllcigpLnRlY2hfLmZlYXR1cmVzTmF0aXZlVGV4dFRyYWNrcyYmKGM9MSksdGhpcy5pdGVtcyYmdGhpcy5pdGVtcy5sZW5ndGg+Yz90aGlzLnNob3coKTp0aGlzLmhpZGUoKX0sYi5wcm90b3R5cGUuY3JlYXRlSXRlbXM9ZnVuY3Rpb24oKXt2YXIgYj1bXTtyZXR1cm4gdGhpcy5wbGF5ZXIoKS50ZWNoXyYmdGhpcy5wbGF5ZXIoKS50ZWNoXy5mZWF0dXJlc05hdGl2ZVRleHRUcmFja3N8fGIucHVzaChuZXcgbVsiZGVmYXVsdCJdKHRoaXMucGxheWVyXyx7a2luZDp0aGlzLmtpbmRffSkpLGEucHJvdG90eXBlLmNyZWF0ZUl0ZW1zLmNhbGwodGhpcyxiKX0sYn0oaVsiZGVmYXVsdCJdKTtuLnByb3RvdHlwZS5raW5kXz0iY2FwdGlvbnMiLG4ucHJvdG90eXBlLmNvbnRyb2xUZXh0Xz0iQ2FwdGlvbnMiLGtbImRlZmF1bHQiXS5yZWdpc3RlckNvbXBvbmVudCgiQ2FwdGlvbnNCdXR0b24iLG4pLGNbImRlZmF1bHQiXT1ufSx7MjM6MjMsMzA6MzAsNTo1fV0sMjU6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZChhKXtyZXR1cm4gYSYmYS5fX2VzTW9kdWxlP2E6eyJkZWZhdWx0IjphfX1mdW5jdGlvbiBlKGEsYil7aWYoIShhIGluc3RhbmNlb2YgYikpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gZihhLGIpe2lmKCFhKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWJ8fCJvYmplY3QiIT10eXBlb2YgYiYmImZ1bmN0aW9uIiE9dHlwZW9mIGI/YTpifWZ1bmN0aW9uIGcoYSxiKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgYiYmbnVsbCE9PWIpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBiKTthLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGImJmIucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6YSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxiJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihhLGIpOmEuX19wcm90b19fPWIpfWMuX19lc01vZHVsZT0hMDt2YXIgaD1hKDMwKSxpPWQoaCksaj1hKDUpLGs9ZChqKSxsPWEoMjYpLG09ZChsKSxuPWEoOTEpLG89ZChuKSxwPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYyxkLGcpe2UodGhpcyxiKTt2YXIgaD1mKHRoaXMsYS5jYWxsKHRoaXMsYyxkLGcpKTtyZXR1cm4gaC5lbF8uc2V0QXR0cmlidXRlKCJhcmlhLWxhYmVsIiwiQ2hhcHRlcnMgTWVudSIpLGh9cmV0dXJuIGcoYixhKSxiLnByb3RvdHlwZS5idWlsZENTU0NsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuInZqcy1jaGFwdGVycy1idXR0b24gIithLnByb3RvdHlwZS5idWlsZENTU0NsYXNzLmNhbGwodGhpcyl9LGIucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbihiKXt0aGlzLnRyYWNrXyYmKCFifHwiYWRkdHJhY2siIT09Yi50eXBlJiYicmVtb3ZldHJhY2siIT09Yi50eXBlKXx8dGhpcy5zZXRUcmFjayh0aGlzLmZpbmRDaGFwdGVyc1RyYWNrKCkpLGEucHJvdG90eXBlLnVwZGF0ZS5jYWxsKHRoaXMpfSxiLnByb3RvdHlwZS5zZXRUcmFjaz1mdW5jdGlvbihhKXtpZih0aGlzLnRyYWNrXyE9PWEpe2lmKHRoaXMudXBkYXRlSGFuZGxlcl98fCh0aGlzLnVwZGF0ZUhhbmRsZXJfPXRoaXMudXBkYXRlLmJpbmQodGhpcykpLHRoaXMudHJhY2tfKXt2YXIgYj10aGlzLnBsYXllcl8ucmVtb3RlVGV4dFRyYWNrRWxzKCkuZ2V0VHJhY2tFbGVtZW50QnlUcmFja18odGhpcy50cmFja18pO2ImJmIucmVtb3ZlRXZlbnRMaXN0ZW5lcigibG9hZCIsdGhpcy51cGRhdGVIYW5kbGVyXyksdGhpcy50cmFja189bnVsbH1pZih0aGlzLnRyYWNrXz1hLHRoaXMudHJhY2tfKXt0aGlzLnRyYWNrXy5tb2RlPSJoaWRkZW4iO3ZhciBjPXRoaXMucGxheWVyXy5yZW1vdGVUZXh0VHJhY2tFbHMoKS5nZXRUcmFja0VsZW1lbnRCeVRyYWNrXyh0aGlzLnRyYWNrXyk7YyYmYy5hZGRFdmVudExpc3RlbmVyKCJsb2FkIix0aGlzLnVwZGF0ZUhhbmRsZXJfKX19fSxiLnByb3RvdHlwZS5maW5kQ2hhcHRlcnNUcmFjaz1mdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLnBsYXllcl8udGV4dFRyYWNrcygpfHxbXSxiPWEubGVuZ3RoLTE7Yj49MDtiLS0pe3ZhciBjPWFbYl07aWYoYy5raW5kPT09dGhpcy5raW5kXylyZXR1cm4gY319LGIucHJvdG90eXBlLmdldE1lbnVDYXB0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJhY2tfJiZ0aGlzLnRyYWNrXy5sYWJlbD90aGlzLnRyYWNrXy5sYWJlbDp0aGlzLmxvY2FsaXplKCgwLG9bImRlZmF1bHQiXSkodGhpcy5raW5kXykpfSxiLnByb3RvdHlwZS5jcmVhdGVNZW51PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9uc18udGl0bGU9dGhpcy5nZXRNZW51Q2FwdGlvbigpLGEucHJvdG90eXBlLmNyZWF0ZU1lbnUuY2FsbCh0aGlzKX0sYi5wcm90b3R5cGUuY3JlYXRlSXRlbXM9ZnVuY3Rpb24oKXt2YXIgYT1bXTtpZighdGhpcy50cmFja18pcmV0dXJuIGE7dmFyIGI9dGhpcy50cmFja18uY3VlcztpZighYilyZXR1cm4gYTtmb3IodmFyIGM9MCxkPWIubGVuZ3RoO2M8ZDtjKyspe3ZhciBlPWJbY10sZj1uZXcgbVsiZGVmYXVsdCJdKHRoaXMucGxheWVyXyx7dHJhY2s6dGhpcy50cmFja18sY3VlOmV9KTthLnB1c2goZil9cmV0dXJuIGF9LGJ9KGlbImRlZmF1bHQiXSk7cC5wcm90b3R5cGUua2luZF89ImNoYXB0ZXJzIixwLnByb3RvdHlwZS5jb250cm9sVGV4dF89IkNoYXB0ZXJzIixrWyJkZWZhdWx0Il0ucmVnaXN0ZXJDb21wb25lbnQoIkNoYXB0ZXJzQnV0dG9uIixwKSxjWyJkZWZhdWx0Il09cH0sezI2OjI2LDMwOjMwLDU6NSw5MTo5MX1dLDI2OltmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGQoYSl7aWYoYSYmYS5fX2VzTW9kdWxlKXJldHVybiBhO3ZhciBiPXt9O2lmKG51bGwhPWEpZm9yKHZhciBjIGluIGEpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGEsYykmJihiW2NdPWFbY10pO3JldHVybiBiWyJkZWZhdWx0Il09YSxifWZ1bmN0aW9uIGUoYSl7cmV0dXJuIGEmJmEuX19lc01vZHVsZT9hOnsiZGVmYXVsdCI6YX19ZnVuY3Rpb24gZihhLGIpe2lmKCEoYSBpbnN0YW5jZW9mIGIpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIGcoYSxiKXtpZighYSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiFifHwib2JqZWN0IiE9dHlwZW9mIGImJiJmdW5jdGlvbiIhPXR5cGVvZiBiP2E6Yn1mdW5jdGlvbiBoKGEsYil7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGImJm51bGwhPT1iKXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgYik7YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiJiZiLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmEsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksYiYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoYSxiKTphLl9fcHJvdG9fXz1iKX1jLl9fZXNNb2R1bGU9ITA7dmFyIGk9YSg0OCksaj1lKGkpLGs9YSg1KSxsPWUoayksbT1hKDgzKSxuPWQobSksbz1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGMsZCl7Zih0aGlzLGIpO3ZhciBlPWQudHJhY2ssaD1kLmN1ZSxpPWMuY3VycmVudFRpbWUoKTtkLnNlbGVjdGFibGU9ITAsZC5sYWJlbD1oLnRleHQsZC5zZWxlY3RlZD1oLnN0YXJ0VGltZTw9aSYmaTxoLmVuZFRpbWU7dmFyIGo9Zyh0aGlzLGEuY2FsbCh0aGlzLGMsZCkpO3JldHVybiBqLnRyYWNrPWUsai5jdWU9aCxlLmFkZEV2ZW50TGlzdGVuZXIoImN1ZWNoYW5nZSIsbi5iaW5kKGosai51cGRhdGUpKSxqfXJldHVybiBoKGIsYSksYi5wcm90b3R5cGUuaGFuZGxlQ2xpY2s9ZnVuY3Rpb24oYil7YS5wcm90b3R5cGUuaGFuZGxlQ2xpY2suY2FsbCh0aGlzKSx0aGlzLnBsYXllcl8uY3VycmVudFRpbWUodGhpcy5jdWUuc3RhcnRUaW1lKSx0aGlzLnVwZGF0ZSh0aGlzLmN1ZS5zdGFydFRpbWUpfSxiLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jdWUsYz10aGlzLnBsYXllcl8uY3VycmVudFRpbWUoKTt0aGlzLnNlbGVjdGVkKGIuc3RhcnRUaW1lPD1jJiZjPGIuZW5kVGltZSl9LGJ9KGpbImRlZmF1bHQiXSk7bFsiZGVmYXVsdCJdLnJlZ2lzdGVyQ29tcG9uZW50KCJDaGFwdGVyc1RyYWNrTWVudUl0ZW0iLG8pLGNbImRlZmF1bHQiXT1vfSx7NDg6NDgsNTo1LDgzOjgzfV0sMjc6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZChhKXtpZihhJiZhLl9fZXNNb2R1bGUpcmV0dXJuIGE7dmFyIGI9e307aWYobnVsbCE9YSlmb3IodmFyIGMgaW4gYSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxjKSYmKGJbY109YVtjXSk7cmV0dXJuIGJbImRlZmF1bHQiXT1hLGJ9ZnVuY3Rpb24gZShhKXtyZXR1cm4gYSYmYS5fX2VzTW9kdWxlP2E6eyJkZWZhdWx0IjphfX1mdW5jdGlvbiBmKGEsYil7aWYoIShhIGluc3RhbmNlb2YgYikpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gZyhhLGIpe2lmKCFhKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWJ8fCJvYmplY3QiIT10eXBlb2YgYiYmImZ1bmN0aW9uIiE9dHlwZW9mIGI/YTpifWZ1bmN0aW9uIGgoYSxiKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgYiYmbnVsbCE9PWIpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBiKTthLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGImJmIucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6YSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxiJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihhLGIpOmEuX19wcm90b19fPWIpfWMuX19lc01vZHVsZT0hMDt2YXIgaT1hKDMwKSxqPWUoaSksaz1hKDUpLGw9ZShrKSxtPWEoODMpLG49ZChtKSxvPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYyxkLGUpe2YodGhpcyxiKTt2YXIgaD1nKHRoaXMsYS5jYWxsKHRoaXMsYyxkLGUpKTtoLmVsXy5zZXRBdHRyaWJ1dGUoImFyaWEtbGFiZWwiLCJEZXNjcmlwdGlvbnMgTWVudSIpO3ZhciBpPWMudGV4dFRyYWNrcygpO3JldHVybiBpJiYhZnVuY3Rpb24oKXt2YXIgYT1uLmJpbmQoaCxoLmhhbmRsZVRyYWNrc0NoYW5nZSk7aS5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLGEpLGgub24oImRpc3Bvc2UiLGZ1bmN0aW9uKCl7aS5yZW1vdmVFdmVudExpc3RlbmVyKCJjaGFuZ2UiLGEpfSl9KCksaH1yZXR1cm4gaChiLGEpLGIucHJvdG90eXBlLmhhbmRsZVRyYWNrc0NoYW5nZT1mdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5wbGF5ZXIoKS50ZXh0VHJhY2tzKCksYz0hMSxkPTAsZT1iLmxlbmd0aDtkPGU7ZCsrKXt2YXIgZj1iW2RdO2lmKGYua2luZCE9PXRoaXMua2luZF8mJiJzaG93aW5nIj09PWYubW9kZSl7Yz0hMDticmVha319Yz90aGlzLmRpc2FibGUoKTp0aGlzLmVuYWJsZSgpfSxiLnByb3RvdHlwZS5idWlsZENTU0NsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuInZqcy1kZXNjcmlwdGlvbnMtYnV0dG9uICIrYS5wcm90b3R5cGUuYnVpbGRDU1NDbGFzcy5jYWxsKHRoaXMpfSxifShqWyJkZWZhdWx0Il0pO28ucHJvdG90eXBlLmtpbmRfPSJkZXNjcmlwdGlvbnMiLG8ucHJvdG90eXBlLmNvbnRyb2xUZXh0Xz0iRGVzY3JpcHRpb25zIixsWyJkZWZhdWx0Il0ucmVnaXN0ZXJDb21wb25lbnQoIkRlc2NyaXB0aW9uc0J1dHRvbiIsbyksY1siZGVmYXVsdCJdPW99LHszMDozMCw1OjUsODM6ODN9XSwyODpbZnVuY3Rpb24oYSxiLGMpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBkKGEpe3JldHVybiBhJiZhLl9fZXNNb2R1bGU/YTp7ImRlZmF1bHQiOmF9fWZ1bmN0aW9uIGUoYSxiKXtpZighKGEgaW5zdGFuY2VvZiBiKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1mdW5jdGlvbiBmKGEsYil7aWYoIWEpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTtyZXR1cm4hYnx8Im9iamVjdCIhPXR5cGVvZiBiJiYiZnVuY3Rpb24iIT10eXBlb2YgYj9hOmJ9ZnVuY3Rpb24gZyhhLGIpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBiJiZudWxsIT09Yil0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIGIpO2EucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYiYmYi5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTphLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGImJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKGEsYik6YS5fX3Byb3RvX189Yil9Yy5fX2VzTW9kdWxlPSEwO3ZhciBoPWEoMzEpLGk9ZChoKSxqPWEoNSksaz1kKGopLGw9ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihjLGQpe2UodGhpcyxiKSxkLnRyYWNrPXtwbGF5ZXI6YyxraW5kOmQua2luZCxsYWJlbDpkLmtpbmQrIiBvZmYiLCJkZWZhdWx0IjohMSxtb2RlOiJkaXNhYmxlZCJ9LGQuc2VsZWN0YWJsZT0hMDt2YXIgZz1mKHRoaXMsYS5jYWxsKHRoaXMsYyxkKSk7cmV0dXJuIGcuc2VsZWN0ZWQoITApLGd9cmV0dXJuIGcoYixhKSxiLnByb3RvdHlwZS5oYW5kbGVUcmFja3NDaGFuZ2U9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMucGxheWVyKCkudGV4dFRyYWNrcygpLGM9ITAsZD0wLGU9Yi5sZW5ndGg7ZDxlO2QrKyl7dmFyIGY9YltkXTtpZihmLmtpbmQ9PT10aGlzLnRyYWNrLmtpbmQmJiJzaG93aW5nIj09PWYubW9kZSl7Yz0hMTticmVha319dGhpcy5zZWxlY3RlZChjKX0sYn0oaVsiZGVmYXVsdCJdKTtrWyJkZWZhdWx0Il0ucmVnaXN0ZXJDb21wb25lbnQoIk9mZlRleHRUcmFja01lbnVJdGVtIixsKSxjWyJkZWZhdWx0Il09bH0sezMxOjMxLDU6NX1dLDI5OltmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGQoYSl7cmV0dXJuIGEmJmEuX19lc01vZHVsZT9hOnsiZGVmYXVsdCI6YX19ZnVuY3Rpb24gZShhLGIpe2lmKCEoYSBpbnN0YW5jZW9mIGIpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIGYoYSxiKXtpZighYSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiFifHwib2JqZWN0IiE9dHlwZW9mIGImJiJmdW5jdGlvbiIhPXR5cGVvZiBiP2E6Yn1mdW5jdGlvbiBnKGEsYil7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGImJm51bGwhPT1iKXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgYik7YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiJiZiLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmEsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksYiYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoYSxiKTphLl9fcHJvdG9fXz1iKX1jLl9fZXNNb2R1bGU9ITA7dmFyIGg9YSgzMCksaT1kKGgpLGo9YSg1KSxrPWQoaiksbD1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGMsZCxnKXtlKHRoaXMsYik7dmFyIGg9Zih0aGlzLGEuY2FsbCh0aGlzLGMsZCxnKSk7cmV0dXJuIGguZWxfLnNldEF0dHJpYnV0ZSgiYXJpYS1sYWJlbCIsIlN1YnRpdGxlcyBNZW51IiksaH1yZXR1cm4gZyhiLGEpLGIucHJvdG90eXBlLmJ1aWxkQ1NTQ2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4idmpzLXN1YnRpdGxlcy1idXR0b24gIithLnByb3RvdHlwZS5idWlsZENTU0NsYXNzLmNhbGwodGhpcyl9LGJ9KGlbImRlZmF1bHQiXSk7bC5wcm90b3R5cGUua2luZF89InN1YnRpdGxlcyIsbC5wcm90b3R5cGUuY29udHJvbFRleHRfPSJTdWJ0aXRsZXMiLGtbImRlZmF1bHQiXS5yZWdpc3RlckNvbXBvbmVudCgiU3VidGl0bGVzQnV0dG9uIixsKSxjWyJkZWZhdWx0Il09bH0sezMwOjMwLDU6NX1dLDMwOltmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGQoYSl7cmV0dXJuIGEmJmEuX19lc01vZHVsZT9hOnsiZGVmYXVsdCI6YX19ZnVuY3Rpb24gZShhLGIpe2lmKCEoYSBpbnN0YW5jZW9mIGIpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIGYoYSxiKXtpZighYSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiFifHwib2JqZWN0IiE9dHlwZW9mIGImJiJmdW5jdGlvbiIhPXR5cGVvZiBiP2E6Yn1mdW5jdGlvbiBnKGEsYil7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGImJm51bGwhPT1iKXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgYik7YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiJiZiLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmEsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksYiYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoYSxiKTphLl9fcHJvdG9fXz1iKX1jLl9fZXNNb2R1bGU9ITA7dmFyIGg9YSgzNiksaT1kKGgpLGo9YSg1KSxrPWQoaiksbD1hKDMxKSxtPWQobCksbj1hKDI4KSxvPWQobikscD1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGMpe3ZhciBkPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fTtyZXR1cm4gZSh0aGlzLGIpLGQudHJhY2tzPWMudGV4dFRyYWNrcygpLGYodGhpcyxhLmNhbGwodGhpcyxjLGQpKX1yZXR1cm4gZyhiLGEpLGIucHJvdG90eXBlLmNyZWF0ZUl0ZW1zPWZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOltdO2EucHVzaChuZXcgb1siZGVmYXVsdCJdKHRoaXMucGxheWVyXyx7a2luZDp0aGlzLmtpbmRffSkpO3ZhciBiPXRoaXMucGxheWVyXy50ZXh0VHJhY2tzKCk7aWYoIWIpcmV0dXJuIGE7Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspe3ZhciBkPWJbY107ZC5raW5kPT09dGhpcy5raW5kXyYmYS5wdXNoKG5ldyBtWyJkZWZhdWx0Il0odGhpcy5wbGF5ZXJfLHt0cmFjazpkLHNlbGVjdGFibGU6ITB9KSl9cmV0dXJuIGF9LGJ9KGlbImRlZmF1bHQiXSk7a1siZGVmYXVsdCJdLnJlZ2lzdGVyQ29tcG9uZW50KCJUZXh0VHJhY2tCdXR0b24iLHApLGNbImRlZmF1bHQiXT1wfSx7Mjg6MjgsMzE6MzEsMzY6MzYsNTo1fV0sMzE6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZChhKXtpZihhJiZhLl9fZXNNb2R1bGUpcmV0dXJuIGE7dmFyIGI9e307aWYobnVsbCE9YSlmb3IodmFyIGMgaW4gYSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxjKSYmKGJbY109YVtjXSk7cmV0dXJuIGJbImRlZmF1bHQiXT1hLGJ9ZnVuY3Rpb24gZShhKXtyZXR1cm4gYSYmYS5fX2VzTW9kdWxlP2E6eyJkZWZhdWx0IjphfX1mdW5jdGlvbiBmKGEsYil7aWYoIShhIGluc3RhbmNlb2YgYikpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gZyhhLGIpe2lmKCFhKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWJ8fCJvYmplY3QiIT10eXBlb2YgYiYmImZ1bmN0aW9uIiE9dHlwZW9mIGI/YTpifWZ1bmN0aW9uIGgoYSxiKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgYiYmbnVsbCE9PWIpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBiKTthLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGImJmIucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6YSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxiJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihhLGIpOmEuX19wcm90b19fPWIpfWMuX19lc01vZHVsZT0hMDt2YXIgaT0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYic3ltYm9sIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihhKXtyZXR1cm4gdHlwZW9mIGF9OmZ1bmN0aW9uKGEpe3JldHVybiBhJiYiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZhLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZhIT09U3ltYm9sLnByb3RvdHlwZT8ic3ltYm9sIjp0eXBlb2YgYX0saj1hKDQ4KSxrPWUoaiksbD1hKDUpLG09ZShsKSxuPWEoODMpLG89ZChuKSxwPWEoOTUpLHE9ZShwKSxyPWEoOTQpLHM9ZShyKSx0PWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYyxkKXtmKHRoaXMsYik7dmFyIGU9ZC50cmFjayxoPWMudGV4dFRyYWNrcygpO2QubGFiZWw9ZS5sYWJlbHx8ZS5sYW5ndWFnZXx8IlVua25vd24iLGQuc2VsZWN0ZWQ9ZVsiZGVmYXVsdCJdfHwic2hvd2luZyI9PT1lLm1vZGU7dmFyIGo9Zyh0aGlzLGEuY2FsbCh0aGlzLGMsZCkpO3JldHVybiBqLnRyYWNrPWUsaCYmIWZ1bmN0aW9uKCl7dmFyIGE9by5iaW5kKGosai5oYW5kbGVUcmFja3NDaGFuZ2UpO2guYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIixhKSxqLm9uKCJkaXNwb3NlIixmdW5jdGlvbigpe2gucmVtb3ZlRXZlbnRMaXN0ZW5lcigiY2hhbmdlIixhKX0pfSgpLGgmJnZvaWQgMD09PWgub25jaGFuZ2UmJiFmdW5jdGlvbigpe3ZhciBhPXZvaWQgMDtqLm9uKFsidGFwIiwiY2xpY2siXSxmdW5jdGlvbigpe2lmKCJvYmplY3QiIT09aShxWyJkZWZhdWx0Il0uRXZlbnQpKXRyeXthPW5ldyBxWyJkZWZhdWx0Il0uRXZlbnQoImNoYW5nZSIpfWNhdGNoKGIpe31hfHwoYT1zWyJkZWZhdWx0Il0uY3JlYXRlRXZlbnQoIkV2ZW50IiksYS5pbml0RXZlbnQoImNoYW5nZSIsITAsITApKSxoLmRpc3BhdGNoRXZlbnQoYSl9KX0oKSxqfXJldHVybiBoKGIsYSksYi5wcm90b3R5cGUuaGFuZGxlQ2xpY2s9ZnVuY3Rpb24oYil7dmFyIGM9dGhpcy50cmFjay5raW5kLGQ9dGhpcy5wbGF5ZXJfLnRleHRUcmFja3MoKTtpZihhLnByb3RvdHlwZS5oYW5kbGVDbGljay5jYWxsKHRoaXMsYiksZClmb3IodmFyIGU9MDtlPGQubGVuZ3RoO2UrKyl7dmFyIGY9ZFtlXTtmLmtpbmQ9PT1jJiYoZj09PXRoaXMudHJhY2s/Zi5tb2RlPSJzaG93aW5nIjpmLm1vZGU9ImRpc2FibGVkIil9fSxiLnByb3RvdHlwZS5oYW5kbGVUcmFja3NDaGFuZ2U9ZnVuY3Rpb24oYSl7dGhpcy5zZWxlY3RlZCgic2hvd2luZyI9PT10aGlzLnRyYWNrLm1vZGUpfSxifShrWyJkZWZhdWx0Il0pO21bImRlZmF1bHQiXS5yZWdpc3RlckNvbXBvbmVudCgiVGV4dFRyYWNrTWVudUl0ZW0iLHQpLGNbImRlZmF1bHQiXT10fSx7NDg6NDgsNTo1LDgzOjgzLDk0Ojk0LDk1Ojk1fV0sMzI6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZChhKXtpZihhJiZhLl9fZXNNb2R1bGUpcmV0dXJuIGE7dmFyIGI9e307aWYobnVsbCE9YSlmb3IodmFyIGMgaW4gYSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxjKSYmKGJbY109YVtjXSk7cmV0dXJuIGJbImRlZmF1bHQiXT1hLGJ9ZnVuY3Rpb24gZShhKXtyZXR1cm4gYSYmYS5fX2VzTW9kdWxlP2E6eyJkZWZhdWx0IjphfX1mdW5jdGlvbiBmKGEsYil7aWYoIShhIGluc3RhbmNlb2YgYikpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gZyhhLGIpe2lmKCFhKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWJ8fCJvYmplY3QiIT10eXBlb2YgYiYmImZ1bmN0aW9uIiE9dHlwZW9mIGI/YTpifWZ1bmN0aW9uIGgoYSxiKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgYiYmbnVsbCE9PWIpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBiKTthLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGImJmIucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6YSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSwKYiYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoYSxiKTphLl9fcHJvdG9fXz1iKX1jLl9fZXNNb2R1bGU9ITA7dmFyIGk9YSg1KSxqPWUoaSksaz1hKDgxKSxsPWQoayksbT1hKDg0KSxuPWUobSksbz1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGMsZCl7Zih0aGlzLGIpO3ZhciBlPWcodGhpcyxhLmNhbGwodGhpcyxjLGQpKTtyZXR1cm4gZS5vbihjLCJ0aW1ldXBkYXRlIixlLnVwZGF0ZUNvbnRlbnQpLGV9cmV0dXJuIGgoYixhKSxiLnByb3RvdHlwZS5jcmVhdGVFbD1mdW5jdGlvbigpe3ZhciBiPWEucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywiZGl2Iix7Y2xhc3NOYW1lOiJ2anMtY3VycmVudC10aW1lIHZqcy10aW1lLWNvbnRyb2wgdmpzLWNvbnRyb2wifSk7cmV0dXJuIHRoaXMuY29udGVudEVsXz1sLmNyZWF0ZUVsKCJkaXYiLHtjbGFzc05hbWU6InZqcy1jdXJyZW50LXRpbWUtZGlzcGxheSIsaW5uZXJIVE1MOic8c3BhbiBjbGFzcz0idmpzLWNvbnRyb2wtdGV4dCI+Q3VycmVudCBUaW1lIDwvc3Bhbj4wOjAwJ30seyJhcmlhLWxpdmUiOiJvZmYifSksYi5hcHBlbmRDaGlsZCh0aGlzLmNvbnRlbnRFbF8pLGJ9LGIucHJvdG90eXBlLnVwZGF0ZUNvbnRlbnQ9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5wbGF5ZXJfLnNjcnViYmluZygpP3RoaXMucGxheWVyXy5nZXRDYWNoZSgpLmN1cnJlbnRUaW1lOnRoaXMucGxheWVyXy5jdXJyZW50VGltZSgpLGM9dGhpcy5sb2NhbGl6ZSgiQ3VycmVudCBUaW1lIiksZD0oMCxuWyJkZWZhdWx0Il0pKGIsdGhpcy5wbGF5ZXJfLmR1cmF0aW9uKCkpO2QhPT10aGlzLmZvcm1hdHRlZFRpbWVfJiYodGhpcy5mb3JtYXR0ZWRUaW1lXz1kLHRoaXMuY29udGVudEVsXy5pbm5lckhUTUw9JzxzcGFuIGNsYXNzPSJ2anMtY29udHJvbC10ZXh0Ij4nK2MrIjwvc3Bhbj4gIitkKX0sYn0oalsiZGVmYXVsdCJdKTtqWyJkZWZhdWx0Il0ucmVnaXN0ZXJDb21wb25lbnQoIkN1cnJlbnRUaW1lRGlzcGxheSIsbyksY1siZGVmYXVsdCJdPW99LHs1OjUsODE6ODEsODQ6ODR9XSwzMzpbZnVuY3Rpb24oYSxiLGMpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBkKGEpe2lmKGEmJmEuX19lc01vZHVsZSlyZXR1cm4gYTt2YXIgYj17fTtpZihudWxsIT1hKWZvcih2YXIgYyBpbiBhKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLGMpJiYoYltjXT1hW2NdKTtyZXR1cm4gYlsiZGVmYXVsdCJdPWEsYn1mdW5jdGlvbiBlKGEpe3JldHVybiBhJiZhLl9fZXNNb2R1bGU/YTp7ImRlZmF1bHQiOmF9fWZ1bmN0aW9uIGYoYSxiKXtpZighKGEgaW5zdGFuY2VvZiBiKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1mdW5jdGlvbiBnKGEsYil7aWYoIWEpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTtyZXR1cm4hYnx8Im9iamVjdCIhPXR5cGVvZiBiJiYiZnVuY3Rpb24iIT10eXBlb2YgYj9hOmJ9ZnVuY3Rpb24gaChhLGIpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBiJiZudWxsIT09Yil0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIGIpO2EucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYiYmYi5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTphLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGImJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKGEsYik6YS5fX3Byb3RvX189Yil9Yy5fX2VzTW9kdWxlPSEwO3ZhciBpPWEoNSksaj1lKGkpLGs9YSg4MSksbD1kKGspLG09YSg4NCksbj1lKG0pLG89ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihjLGQpe2YodGhpcyxiKTt2YXIgZT1nKHRoaXMsYS5jYWxsKHRoaXMsYyxkKSk7cmV0dXJuIGUub24oYywiZHVyYXRpb25jaGFuZ2UiLGUudXBkYXRlQ29udGVudCksZS5vbihjLCJ0aW1ldXBkYXRlIixlLnVwZGF0ZUNvbnRlbnQpLGUub24oYywibG9hZGVkbWV0YWRhdGEiLGUudXBkYXRlQ29udGVudCksZX1yZXR1cm4gaChiLGEpLGIucHJvdG90eXBlLmNyZWF0ZUVsPWZ1bmN0aW9uKCl7dmFyIGI9YS5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCJkaXYiLHtjbGFzc05hbWU6InZqcy1kdXJhdGlvbiB2anMtdGltZS1jb250cm9sIHZqcy1jb250cm9sIn0pO3JldHVybiB0aGlzLmNvbnRlbnRFbF89bC5jcmVhdGVFbCgiZGl2Iix7Y2xhc3NOYW1lOiJ2anMtZHVyYXRpb24tZGlzcGxheSIsaW5uZXJIVE1MOic8c3BhbiBjbGFzcz0idmpzLWNvbnRyb2wtdGV4dCI+Jyt0aGlzLmxvY2FsaXplKCJEdXJhdGlvbiBUaW1lIikrIjwvc3Bhbj4gMDowMCJ9LHsiYXJpYS1saXZlIjoib2ZmIn0pLGIuYXBwZW5kQ2hpbGQodGhpcy5jb250ZW50RWxfKSxifSxiLnByb3RvdHlwZS51cGRhdGVDb250ZW50PWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucGxheWVyXy5kdXJhdGlvbigpO2lmKGImJnRoaXMuZHVyYXRpb25fIT09Yil7dGhpcy5kdXJhdGlvbl89Yjt2YXIgYz10aGlzLmxvY2FsaXplKCJEdXJhdGlvbiBUaW1lIiksZD0oMCxuWyJkZWZhdWx0Il0pKGIpO3RoaXMuY29udGVudEVsXy5pbm5lckhUTUw9JzxzcGFuIGNsYXNzPSJ2anMtY29udHJvbC10ZXh0Ij4nK2MrIjwvc3Bhbj4gIitkfX0sYn0oalsiZGVmYXVsdCJdKTtqWyJkZWZhdWx0Il0ucmVnaXN0ZXJDb21wb25lbnQoIkR1cmF0aW9uRGlzcGxheSIsbyksY1siZGVmYXVsdCJdPW99LHs1OjUsODE6ODEsODQ6ODR9XSwzNDpbZnVuY3Rpb24oYSxiLGMpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBkKGEpe2lmKGEmJmEuX19lc01vZHVsZSlyZXR1cm4gYTt2YXIgYj17fTtpZihudWxsIT1hKWZvcih2YXIgYyBpbiBhKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLGMpJiYoYltjXT1hW2NdKTtyZXR1cm4gYlsiZGVmYXVsdCJdPWEsYn1mdW5jdGlvbiBlKGEpe3JldHVybiBhJiZhLl9fZXNNb2R1bGU/YTp7ImRlZmF1bHQiOmF9fWZ1bmN0aW9uIGYoYSxiKXtpZighKGEgaW5zdGFuY2VvZiBiKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1mdW5jdGlvbiBnKGEsYil7aWYoIWEpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTtyZXR1cm4hYnx8Im9iamVjdCIhPXR5cGVvZiBiJiYiZnVuY3Rpb24iIT10eXBlb2YgYj9hOmJ9ZnVuY3Rpb24gaChhLGIpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBiJiZudWxsIT09Yil0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIGIpO2EucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYiYmYi5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTphLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGImJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKGEsYik6YS5fX3Byb3RvX189Yil9Yy5fX2VzTW9kdWxlPSEwO3ZhciBpPWEoNSksaj1lKGkpLGs9YSg4MSksbD1kKGspLG09YSg4NCksbj1lKG0pLG89ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihjLGQpe2YodGhpcyxiKTt2YXIgZT1nKHRoaXMsYS5jYWxsKHRoaXMsYyxkKSk7cmV0dXJuIGUub24oYywidGltZXVwZGF0ZSIsZS51cGRhdGVDb250ZW50KSxlLm9uKGMsImR1cmF0aW9uY2hhbmdlIixlLnVwZGF0ZUNvbnRlbnQpLGV9cmV0dXJuIGgoYixhKSxiLnByb3RvdHlwZS5jcmVhdGVFbD1mdW5jdGlvbigpe3ZhciBiPWEucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywiZGl2Iix7Y2xhc3NOYW1lOiJ2anMtcmVtYWluaW5nLXRpbWUgdmpzLXRpbWUtY29udHJvbCB2anMtY29udHJvbCJ9KTtyZXR1cm4gdGhpcy5jb250ZW50RWxfPWwuY3JlYXRlRWwoImRpdiIse2NsYXNzTmFtZToidmpzLXJlbWFpbmluZy10aW1lLWRpc3BsYXkiLGlubmVySFRNTDonPHNwYW4gY2xhc3M9InZqcy1jb250cm9sLXRleHQiPicrdGhpcy5sb2NhbGl6ZSgiUmVtYWluaW5nIFRpbWUiKSsiPC9zcGFuPiAtMDowMCJ9LHsiYXJpYS1saXZlIjoib2ZmIn0pLGIuYXBwZW5kQ2hpbGQodGhpcy5jb250ZW50RWxfKSxifSxiLnByb3RvdHlwZS51cGRhdGVDb250ZW50PWZ1bmN0aW9uKGEpe2lmKHRoaXMucGxheWVyXy5kdXJhdGlvbigpKXt2YXIgYj10aGlzLmxvY2FsaXplKCJSZW1haW5pbmcgVGltZSIpLGM9KDAsblsiZGVmYXVsdCJdKSh0aGlzLnBsYXllcl8ucmVtYWluaW5nVGltZSgpKTtjIT09dGhpcy5mb3JtYXR0ZWRUaW1lXyYmKHRoaXMuZm9ybWF0dGVkVGltZV89Yyx0aGlzLmNvbnRlbnRFbF8uaW5uZXJIVE1MPSc8c3BhbiBjbGFzcz0idmpzLWNvbnRyb2wtdGV4dCI+JytiKyI8L3NwYW4+IC0iK2MpfX0sYn0oalsiZGVmYXVsdCJdKTtqWyJkZWZhdWx0Il0ucmVnaXN0ZXJDb21wb25lbnQoIlJlbWFpbmluZ1RpbWVEaXNwbGF5IixvKSxjWyJkZWZhdWx0Il09b30sezU6NSw4MTo4MSw4NDo4NH1dLDM1OltmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGQoYSl7cmV0dXJuIGEmJmEuX19lc01vZHVsZT9hOnsiZGVmYXVsdCI6YX19ZnVuY3Rpb24gZShhLGIpe2lmKCEoYSBpbnN0YW5jZW9mIGIpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIGYoYSxiKXtpZighYSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiFifHwib2JqZWN0IiE9dHlwZW9mIGImJiJmdW5jdGlvbiIhPXR5cGVvZiBiP2E6Yn1mdW5jdGlvbiBnKGEsYil7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGImJm51bGwhPT1iKXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgYik7YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiJiZiLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmEsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksYiYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoYSxiKTphLl9fcHJvdG9fXz1iKX1jLl9fZXNNb2R1bGU9ITA7dmFyIGg9YSg1KSxpPWQoaCksaj1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7cmV0dXJuIGUodGhpcyxiKSxmKHRoaXMsYS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBnKGIsYSksYi5wcm90b3R5cGUuY3JlYXRlRWw9ZnVuY3Rpb24oKXtyZXR1cm4gYS5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCJkaXYiLHtjbGFzc05hbWU6InZqcy10aW1lLWNvbnRyb2wgdmpzLXRpbWUtZGl2aWRlciIsaW5uZXJIVE1MOiI8ZGl2PjxzcGFuPi88L3NwYW4+PC9kaXY+In0pfSxifShpWyJkZWZhdWx0Il0pO2lbImRlZmF1bHQiXS5yZWdpc3RlckNvbXBvbmVudCgiVGltZURpdmlkZXIiLGopLGNbImRlZmF1bHQiXT1qfSx7NTo1fV0sMzY6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZChhKXtpZihhJiZhLl9fZXNNb2R1bGUpcmV0dXJuIGE7dmFyIGI9e307aWYobnVsbCE9YSlmb3IodmFyIGMgaW4gYSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxjKSYmKGJbY109YVtjXSk7cmV0dXJuIGJbImRlZmF1bHQiXT1hLGJ9ZnVuY3Rpb24gZShhKXtyZXR1cm4gYSYmYS5fX2VzTW9kdWxlP2E6eyJkZWZhdWx0IjphfX1mdW5jdGlvbiBmKGEsYil7aWYoIShhIGluc3RhbmNlb2YgYikpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gZyhhLGIpe2lmKCFhKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWJ8fCJvYmplY3QiIT10eXBlb2YgYiYmImZ1bmN0aW9uIiE9dHlwZW9mIGI/YTpifWZ1bmN0aW9uIGgoYSxiKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgYiYmbnVsbCE9PWIpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBiKTthLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGImJmIucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6YSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxiJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihhLGIpOmEuX19wcm90b19fPWIpfWMuX19lc01vZHVsZT0hMDt2YXIgaT1hKDQ3KSxqPWUoaSksaz1hKDUpLGw9ZShrKSxtPWEoODMpLG49ZChtKSxvPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYyxkKXtmKHRoaXMsYik7dmFyIGU9ZC50cmFja3MsaD1nKHRoaXMsYS5jYWxsKHRoaXMsYyxkKSk7aWYoaC5pdGVtcy5sZW5ndGg8PTEmJmguaGlkZSgpLCFlKXJldHVybiBnKGgpO3ZhciBpPW4uYmluZChoLGgudXBkYXRlKTtyZXR1cm4gZS5hZGRFdmVudExpc3RlbmVyKCJyZW1vdmV0cmFjayIsaSksZS5hZGRFdmVudExpc3RlbmVyKCJhZGR0cmFjayIsaSksaC5wbGF5ZXJfLm9uKCJkaXNwb3NlIixmdW5jdGlvbigpe2UucmVtb3ZlRXZlbnRMaXN0ZW5lcigicmVtb3ZldHJhY2siLGkpLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcigiYWRkdHJhY2siLGkpfSksaH1yZXR1cm4gaChiLGEpLGJ9KGpbImRlZmF1bHQiXSk7bFsiZGVmYXVsdCJdLnJlZ2lzdGVyQ29tcG9uZW50KCJUcmFja0J1dHRvbiIsbyksY1siZGVmYXVsdCJdPW99LHs0Nzo0Nyw1OjUsODM6ODN9XSwzNzpbZnVuY3Rpb24oYSxiLGMpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBkKGEpe2lmKGEmJmEuX19lc01vZHVsZSlyZXR1cm4gYTt2YXIgYj17fTtpZihudWxsIT1hKWZvcih2YXIgYyBpbiBhKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLGMpJiYoYltjXT1hW2NdKTtyZXR1cm4gYlsiZGVmYXVsdCJdPWEsYn1mdW5jdGlvbiBlKGEpe3JldHVybiBhJiZhLl9fZXNNb2R1bGU/YTp7ImRlZmF1bHQiOmF9fWZ1bmN0aW9uIGYoYSxiKXtpZighKGEgaW5zdGFuY2VvZiBiKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1mdW5jdGlvbiBnKGEsYil7aWYoIWEpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTtyZXR1cm4hYnx8Im9iamVjdCIhPXR5cGVvZiBiJiYiZnVuY3Rpb24iIT10eXBlb2YgYj9hOmJ9ZnVuY3Rpb24gaChhLGIpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBiJiZudWxsIT09Yil0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIGIpO2EucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYiYmYi5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTphLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGImJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKGEsYik6YS5fX3Byb3RvX189Yil9Yy5fX2VzTW9kdWxlPSEwO3ZhciBpPWEoNTcpLGo9ZShpKSxrPWEoNSksbD1lKGspLG09YSg4Myksbj1kKG0pO2EoMzkpO3ZhciBvPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYyxkKXtmKHRoaXMsYik7dmFyIGU9Zyh0aGlzLGEuY2FsbCh0aGlzLGMsZCkpO3JldHVybiBlLm9uKGMsInZvbHVtZWNoYW5nZSIsZS51cGRhdGVBUklBQXR0cmlidXRlcyksYy5yZWFkeShuLmJpbmQoZSxlLnVwZGF0ZUFSSUFBdHRyaWJ1dGVzKSksZX1yZXR1cm4gaChiLGEpLGIucHJvdG90eXBlLmNyZWF0ZUVsPWZ1bmN0aW9uKCl7cmV0dXJuIGEucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywiZGl2Iix7Y2xhc3NOYW1lOiJ2anMtdm9sdW1lLWJhciB2anMtc2xpZGVyLWJhciJ9LHsiYXJpYS1sYWJlbCI6InZvbHVtZSBsZXZlbCJ9KX0sYi5wcm90b3R5cGUuaGFuZGxlTW91c2VNb3ZlPWZ1bmN0aW9uKGEpe3RoaXMuY2hlY2tNdXRlZCgpLHRoaXMucGxheWVyXy52b2x1bWUodGhpcy5jYWxjdWxhdGVEaXN0YW5jZShhKSl9LGIucHJvdG90eXBlLmNoZWNrTXV0ZWQ9ZnVuY3Rpb24oKXt0aGlzLnBsYXllcl8ubXV0ZWQoKSYmdGhpcy5wbGF5ZXJfLm11dGVkKCExKX0sYi5wcm90b3R5cGUuZ2V0UGVyY2VudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBsYXllcl8ubXV0ZWQoKT8wOnRoaXMucGxheWVyXy52b2x1bWUoKX0sYi5wcm90b3R5cGUuc3RlcEZvcndhcmQ9ZnVuY3Rpb24oKXt0aGlzLmNoZWNrTXV0ZWQoKSx0aGlzLnBsYXllcl8udm9sdW1lKHRoaXMucGxheWVyXy52b2x1bWUoKSsuMSl9LGIucHJvdG90eXBlLnN0ZXBCYWNrPWZ1bmN0aW9uKCl7dGhpcy5jaGVja011dGVkKCksdGhpcy5wbGF5ZXJfLnZvbHVtZSh0aGlzLnBsYXllcl8udm9sdW1lKCktLjEpfSxiLnByb3RvdHlwZS51cGRhdGVBUklBQXR0cmlidXRlcz1mdW5jdGlvbihhKXt2YXIgYj0oMTAwKnRoaXMucGxheWVyXy52b2x1bWUoKSkudG9GaXhlZCgyKTt0aGlzLmVsXy5zZXRBdHRyaWJ1dGUoImFyaWEtdmFsdWVub3ciLGIpLHRoaXMuZWxfLnNldEF0dHJpYnV0ZSgiYXJpYS12YWx1ZXRleHQiLGIrIiUiKX0sYn0oalsiZGVmYXVsdCJdKTtvLnByb3RvdHlwZS5vcHRpb25zXz17Y2hpbGRyZW46WyJ2b2x1bWVMZXZlbCJdLGJhck5hbWU6InZvbHVtZUxldmVsIn0sby5wcm90b3R5cGUucGxheWVyRXZlbnQ9InZvbHVtZWNoYW5nZSIsbFsiZGVmYXVsdCJdLnJlZ2lzdGVyQ29tcG9uZW50KCJWb2x1bWVCYXIiLG8pLGNbImRlZmF1bHQiXT1vfSx7Mzk6MzksNTo1LDU3OjU3LDgzOjgzfV0sMzg6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZChhKXtyZXR1cm4gYSYmYS5fX2VzTW9kdWxlP2E6eyJkZWZhdWx0IjphfX1mdW5jdGlvbiBlKGEsYil7aWYoIShhIGluc3RhbmNlb2YgYikpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gZihhLGIpe2lmKCFhKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWJ8fCJvYmplY3QiIT10eXBlb2YgYiYmImZ1bmN0aW9uIiE9dHlwZW9mIGI/YTpifWZ1bmN0aW9uIGcoYSxiKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgYiYmbnVsbCE9PWIpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBiKTthLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGImJmIucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6YSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxiJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihhLGIpOmEuX19wcm90b19fPWIpfWMuX19lc01vZHVsZT0hMDt2YXIgaD1hKDUpLGk9ZChoKTthKDM3KTt2YXIgaj1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGMsZCl7ZSh0aGlzLGIpO3ZhciBnPWYodGhpcyxhLmNhbGwodGhpcyxjLGQpKTtyZXR1cm4gYy50ZWNoXyYmYy50ZWNoXy5mZWF0dXJlc1ZvbHVtZUNvbnRyb2w9PT0hMSYmZy5hZGRDbGFzcygidmpzLWhpZGRlbiIpLGcub24oYywibG9hZHN0YXJ0IixmdW5jdGlvbigpe2MudGVjaF8uZmVhdHVyZXNWb2x1bWVDb250cm9sPT09ITE/dGhpcy5hZGRDbGFzcygidmpzLWhpZGRlbiIpOnRoaXMucmVtb3ZlQ2xhc3MoInZqcy1oaWRkZW4iKX0pLGd9cmV0dXJuIGcoYixhKSxiLnByb3RvdHlwZS5jcmVhdGVFbD1mdW5jdGlvbigpe3JldHVybiBhLnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsImRpdiIse2NsYXNzTmFtZToidmpzLXZvbHVtZS1jb250cm9sIHZqcy1jb250cm9sIn0pfSxifShpWyJkZWZhdWx0Il0pO2oucHJvdG90eXBlLm9wdGlvbnNfPXtjaGlsZHJlbjpbInZvbHVtZUJhciJdfSxpWyJkZWZhdWx0Il0ucmVnaXN0ZXJDb21wb25lbnQoIlZvbHVtZUNvbnRyb2wiLGopLGNbImRlZmF1bHQiXT1qfSx7Mzc6MzcsNTo1fV0sMzk6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZChhKXtyZXR1cm4gYSYmYS5fX2VzTW9kdWxlP2E6eyJkZWZhdWx0IjphfX1mdW5jdGlvbiBlKGEsYil7aWYoIShhIGluc3RhbmNlb2YgYikpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gZihhLGIpe2lmKCFhKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWJ8fCJvYmplY3QiIT10eXBlb2YgYiYmImZ1bmN0aW9uIiE9dHlwZW9mIGI/YTpifWZ1bmN0aW9uIGcoYSxiKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgYiYmbnVsbCE9PWIpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBiKTthLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGImJmIucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6YSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxiJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihhLGIpOmEuX19wcm90b19fPWIpfWMuX19lc01vZHVsZT0hMDt2YXIgaD1hKDUpLGk9ZChoKSxqPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXtyZXR1cm4gZSh0aGlzLGIpLGYodGhpcyxhLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGcoYixhKSxiLnByb3RvdHlwZS5jcmVhdGVFbD1mdW5jdGlvbigpe3JldHVybiBhLnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsImRpdiIse2NsYXNzTmFtZToidmpzLXZvbHVtZS1sZXZlbCIsaW5uZXJIVE1MOic8c3BhbiBjbGFzcz0idmpzLWNvbnRyb2wtdGV4dCI+PC9zcGFuPid9KX0sYn0oaVsiZGVmYXVsdCJdKTtpWyJkZWZhdWx0Il0ucmVnaXN0ZXJDb21wb25lbnQoIlZvbHVtZUxldmVsIixqKSxjWyJkZWZhdWx0Il09an0sezU6NX1dLDQwOltmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGQoYSl7cmV0dXJuIGEmJmEuX19lc01vZHVsZT9hOnsiZGVmYXVsdCI6YX19ZnVuY3Rpb24gZShhKXtpZihhJiZhLl9fZXNNb2R1bGUpcmV0dXJuIGE7dmFyIGI9e307aWYobnVsbCE9YSlmb3IodmFyIGMgaW4gYSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxjKSYmKGJbY109YVtjXSk7cmV0dXJuIGJbImRlZmF1bHQiXT1hLGJ9ZnVuY3Rpb24gZihhLGIpe2lmKCEoYSBpbnN0YW5jZW9mIGIpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIGcoYSxiKXtpZighYSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiFifHwib2JqZWN0IiE9dHlwZW9mIGImJiJmdW5jdGlvbiIhPXR5cGVvZiBiP2E6Yn1mdW5jdGlvbiBoKGEsYil7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGImJm51bGwhPT1iKXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgYik7YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiJiZiLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmEsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksYiYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoYSxiKTphLl9fcHJvdG9fXz1iKX1jLl9fZXNNb2R1bGU9ITA7dmFyIGk9YSg4Myksaj1lKGkpLGs9YSg1KSxsPWQoayksbT1hKDU0KSxuPWQobSksbz1hKDUzKSxwPWQobykscT1hKDExKSxyPWQocSkscz1hKDM3KSx0PWQocyksdT1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGMpe2Z1bmN0aW9uIGQoKXtjLnRlY2hfJiZjLnRlY2hfLmZlYXR1cmVzVm9sdW1lQ29udHJvbD09PSExP3RoaXMuYWRkQ2xhc3MoInZqcy1oaWRkZW4iKTp0aGlzLnJlbW92ZUNsYXNzKCJ2anMtaGlkZGVuIil9dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O2YodGhpcyxiKSx2b2lkIDA9PT1lLmlubGluZSYmKGUuaW5saW5lPSEwKSx2b2lkIDA9PT1lLnZlcnRpY2FsJiYoZS5pbmxpbmU/ZS52ZXJ0aWNhbD0hMTplLnZlcnRpY2FsPSEwKSxlLnZvbHVtZUJhcj1lLnZvbHVtZUJhcnx8e30sZS52b2x1bWVCYXIudmVydGljYWw9ISFlLnZlcnRpY2FsO3ZhciBoPWcodGhpcyxhLmNhbGwodGhpcyxjLGUpKTtyZXR1cm4gaC5vbihjLCJ2b2x1bWVjaGFuZ2UiLGgudm9sdW1lVXBkYXRlKSxoLm9uKGMsImxvYWRzdGFydCIsaC52b2x1bWVVcGRhdGUpLGQuY2FsbChoKSxoLm9uKGMsImxvYWRzdGFydCIsZCksaC5vbihoLnZvbHVtZUJhcixbInNsaWRlcmFjdGl2ZSIsImZvY3VzIl0sZnVuY3Rpb24oKXt0aGlzLmFkZENsYXNzKCJ2anMtc2xpZGVyLWFjdGl2ZSIpfSksaC5vbihoLnZvbHVtZUJhcixbInNsaWRlcmluYWN0aXZlIiwiYmx1ciJdLGZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVDbGFzcygidmpzLXNsaWRlci1hY3RpdmUiKX0pLGgub24oaC52b2x1bWVCYXIsWyJmb2N1cyJdLGZ1bmN0aW9uKCl7dGhpcy5hZGRDbGFzcygidmpzLWxvY2stc2hvd2luZyIpfSksaC5vbihoLnZvbHVtZUJhcixbImJsdXIiXSxmdW5jdGlvbigpe3RoaXMucmVtb3ZlQ2xhc3MoInZqcy1sb2NrLXNob3dpbmciKX0pLGh9cmV0dXJuIGgoYixhKSxiLnByb3RvdHlwZS5idWlsZENTU0NsYXNzPWZ1bmN0aW9uKCl7dmFyIGI9IiI7cmV0dXJuIGI9dGhpcy5vcHRpb25zXy52ZXJ0aWNhbD8idmpzLXZvbHVtZS1tZW51LWJ1dHRvbi12ZXJ0aWNhbCI6InZqcy12b2x1bWUtbWVudS1idXR0b24taG9yaXpvbnRhbCIsInZqcy12b2x1bWUtbWVudS1idXR0b24gIithLnByb3RvdHlwZS5idWlsZENTU0NsYXNzLmNhbGwodGhpcykrIiAiK2J9LGIucHJvdG90eXBlLmNyZWF0ZVBvcHVwPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IG5bImRlZmF1bHQiXSh0aGlzLnBsYXllcl8se2NvbnRlbnRFbFR5cGU6ImRpdiJ9KSxiPW5ldyB0WyJkZWZhdWx0Il0odGhpcy5wbGF5ZXJfLHRoaXMub3B0aW9uc18udm9sdW1lQmFyKTtyZXR1cm4gYS5hZGRDaGlsZChiKSx0aGlzLm1lbnVDb250ZW50PWEsdGhpcy52b2x1bWVCYXI9Yix0aGlzLmF0dGFjaFZvbHVtZUJhckV2ZW50cygpLGF9LGIucHJvdG90eXBlLmhhbmRsZUNsaWNrPWZ1bmN0aW9uKGIpe3JbImRlZmF1bHQiXS5wcm90b3R5cGUuaGFuZGxlQ2xpY2suY2FsbCh0aGlzKSxhLnByb3RvdHlwZS5oYW5kbGVDbGljay5jYWxsKHRoaXMpfSxiLnByb3RvdHlwZS5hdHRhY2hWb2x1bWVCYXJFdmVudHM9ZnVuY3Rpb24oKXt0aGlzLm1lbnVDb250ZW50Lm9uKFsibW91c2Vkb3duIiwidG91Y2hkb3duIl0sai5iaW5kKHRoaXMsdGhpcy5oYW5kbGVNb3VzZURvd24pKX0sYi5wcm90b3R5cGUuaGFuZGxlTW91c2VEb3duPWZ1bmN0aW9uKGEpe3RoaXMub24oWyJtb3VzZW1vdmUiLCJ0b3VjaG1vdmUiXSxqLmJpbmQodGhpcy52b2x1bWVCYXIsdGhpcy52b2x1bWVCYXIuaGFuZGxlTW91c2VNb3ZlKSksdGhpcy5vbih0aGlzLmVsXy5vd25lckRvY3VtZW50LFsibW91c2V1cCIsInRvdWNoZW5kIl0sdGhpcy5oYW5kbGVNb3VzZVVwKX0sYi5wcm90b3R5cGUuaGFuZGxlTW91c2VVcD1mdW5jdGlvbihhKXt0aGlzLm9mZihbIm1vdXNlbW92ZSIsInRvdWNobW92ZSJdLGouYmluZCh0aGlzLnZvbHVtZUJhcix0aGlzLnZvbHVtZUJhci5oYW5kbGVNb3VzZU1vdmUpKX0sYn0ocFsiZGVmYXVsdCJdKTt1LnByb3RvdHlwZS52b2x1bWVVcGRhdGU9clsiZGVmYXVsdCJdLnByb3RvdHlwZS51cGRhdGUsdS5wcm90b3R5cGUuY29udHJvbFRleHRfPSJNdXRlIixsWyJkZWZhdWx0Il0ucmVnaXN0ZXJDb21wb25lbnQoIlZvbHVtZU1lbnVCdXR0b24iLHUpLGNbImRlZmF1bHQiXT11fSx7MTE6MTEsMzc6MzcsNTo1LDUzOjUzLDU0OjU0LDgzOjgzfV0sNDE6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZChhKXtyZXR1cm4gYSYmYS5fX2VzTW9kdWxlP2E6eyJkZWZhdWx0IjphfX1mdW5jdGlvbiBlKGEsYil7aWYoIShhIGluc3RhbmNlb2YgYikpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gZihhLGIpe2lmKCFhKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWJ8fCJvYmplY3QiIT10eXBlb2YgYiYmImZ1bmN0aW9uIiE9dHlwZW9mIGI/YTpifWZ1bmN0aW9uIGcoYSxiKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgYiYmbnVsbCE9PWIpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBiKTthLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGImJmIucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6YSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxiJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihhLGIpOmEuX19wcm90b19fPWIpfWMuX19lc01vZHVsZT0hMDt2YXIgaD1hKDUpLGk9ZChoKSxqPWEoNTApLGs9ZChqKSxsPWEoODcpLG09ZChsKSxuPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYyxkKXtlKHRoaXMsYik7dmFyIGc9Zih0aGlzLGEuY2FsbCh0aGlzLGMsZCkpO3JldHVybiBnLm9uKGMsImVycm9yIixnLm9wZW4pLGd9cmV0dXJuIGcoYixhKSxiLnByb3RvdHlwZS5idWlsZENTU0NsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuInZqcy1lcnJvci1kaXNwbGF5ICIrYS5wcm90b3R5cGUuYnVpbGRDU1NDbGFzcy5jYWxsKHRoaXMpfSxiLnByb3RvdHlwZS5jb250ZW50PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5wbGF5ZXIoKS5lcnJvcigpO3JldHVybiBhP3RoaXMubG9jYWxpemUoYS5tZXNzYWdlKToiIn0sYn0oa1siZGVmYXVsdCJdKTtuLnByb3RvdHlwZS5vcHRpb25zXz0oMCxtWyJkZWZhdWx0Il0pKGtbImRlZmF1bHQiXS5wcm90b3R5cGUub3B0aW9uc18se2ZpbGxBbHdheXM6ITAsdGVtcG9yYXJ5OiExLHVuY2xvc2VhYmxlOiEwfSksaVsiZGVmYXVsdCJdLnJlZ2lzdGVyQ29tcG9uZW50KCJFcnJvckRpc3BsYXkiLG4pLGNbImRlZmF1bHQiXT1ufSx7NTo1LDUwOjUwLDg3Ojg3fV0sNDI6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZChhKXtpZihhJiZhLl9fZXNNb2R1bGUpcmV0dXJuIGE7dmFyIGI9e307aWYobnVsbCE9YSlmb3IodmFyIGMgaW4gYSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxjKSYmKGJbY109YVtjXSk7cmV0dXJuIGJbImRlZmF1bHQiXT1hLGJ9Yy5fX2VzTW9kdWxlPSEwO3ZhciBlPWEoODIpLGY9ZChlKSxnPWZ1bmN0aW9uKCl7fTtnLnByb3RvdHlwZS5hbGxvd2VkRXZlbnRzXz17fSxnLnByb3RvdHlwZS5vbj1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuYWRkRXZlbnRMaXN0ZW5lcjt0aGlzLmFkZEV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oKXt9LGYub24odGhpcyxhLGIpLHRoaXMuYWRkRXZlbnRMaXN0ZW5lcj1jfSxnLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyPWcucHJvdG90eXBlLm9uLGcucHJvdG90eXBlLm9mZj1mdW5jdGlvbihhLGIpe2Yub2ZmKHRoaXMsYSxiKX0sZy5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lcj1nLnByb3RvdHlwZS5vZmYsZy5wcm90b3R5cGUub25lPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5hZGRFdmVudExpc3RlbmVyO3RoaXMuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbigpe30sZi5vbmUodGhpcyxhLGIpLHRoaXMuYWRkRXZlbnRMaXN0ZW5lcj1jfSxnLnByb3RvdHlwZS50cmlnZ2VyPWZ1bmN0aW9uKGEpe3ZhciBiPWEudHlwZXx8YTsic3RyaW5nIj09dHlwZW9mIGEmJihhPXt0eXBlOmJ9KSxhPWYuZml4RXZlbnQoYSksdGhpcy5hbGxvd2VkRXZlbnRzX1tiXSYmdGhpc1sib24iK2JdJiZ0aGlzWyJvbiIrYl0oYSksZi50cmlnZ2VyKHRoaXMsYSl9LGcucHJvdG90eXBlLmRpc3BhdGNoRXZlbnQ9Zy5wcm90b3R5cGUudHJpZ2dlcixjWyJkZWZhdWx0Il09Z30sezgyOjgyfV0sNDM6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZChhKXtyZXR1cm4gYSYmYS5fX2VzTW9kdWxlP2E6eyJkZWZhdWx0IjphfX1jLl9fZXNNb2R1bGU9ITA7dmFyIGU9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmInN5bWJvbCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24oYSl7cmV0dXJuIHR5cGVvZiBhfTpmdW5jdGlvbihhKXtyZXR1cm4gYSYmImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmYS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmYSE9PVN5bWJvbC5wcm90b3R5cGU/InN5bWJvbCI6dHlwZW9mIGF9LGY9YSg4NiksZz1kKGYpLGg9YSg4OCksaT1mdW5jdGlvbihhLGIpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBiJiZudWxsIT09Yil0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrKCJ1bmRlZmluZWQiPT10eXBlb2YgYj8idW5kZWZpbmVkIjplKGIpKSk7YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiJiZiLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmEsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksYiYmKGEuc3VwZXJfPWIpfSxqPWZ1bmN0aW9uKGEpe3ZhciBiPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fSxjPWZ1bmN0aW9uKCl7YS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGQ9e307KDAsaC5pc09iamVjdCkoYik/KCJmdW5jdGlvbiI9PXR5cGVvZiBiLmluaXQmJihnWyJkZWZhdWx0Il0ud2FybigiQ29uc3RydWN0b3IgbG9naWMgdmlhIGluaXQoKSBpcyBkZXByZWNhdGVkOyBwbGVhc2UgdXNlIGNvbnN0cnVjdG9yKCkgaW5zdGVhZC4iKSxiLmNvbnN0cnVjdG9yPWIuaW5pdCksYi5jb25zdHJ1Y3RvciE9PU9iamVjdC5wcm90b3R5cGUuY29uc3RydWN0b3ImJihjPWIuY29uc3RydWN0b3IpLGQ9Yik6ImZ1bmN0aW9uIj09dHlwZW9mIGImJihjPWIpLGkoYyxhKTtmb3IodmFyIGUgaW4gZClkLmhhc093blByb3BlcnR5KGUpJiYoYy5wcm90b3R5cGVbZV09ZFtlXSk7cmV0dXJuIGN9O2NbImRlZmF1bHQiXT1qfSx7ODY6ODYsODg6ODh9XSw0NDpbZnVuY3Rpb24oYSxiLGMpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBkKGEpe3JldHVybiBhJiZhLl9fZXNNb2R1bGU/YTp7ImRlZmF1bHQiOmF9fWMuX19lc01vZHVsZT0hMDtmb3IodmFyIGU9YSg5NCksZj1kKGUpLGc9e30saD1bWyJyZXF1ZXN0RnVsbHNjcmVlbiIsImV4aXRGdWxsc2NyZWVuIiwiZnVsbHNjcmVlbkVsZW1lbnQiLCJmdWxsc2NyZWVuRW5hYmxlZCIsImZ1bGxzY3JlZW5jaGFuZ2UiLCJmdWxsc2NyZWVuZXJyb3IiXSxbIndlYmtpdFJlcXVlc3RGdWxsc2NyZWVuIiwid2Via2l0RXhpdEZ1bGxzY3JlZW4iLCJ3ZWJraXRGdWxsc2NyZWVuRWxlbWVudCIsIndlYmtpdEZ1bGxzY3JlZW5FbmFibGVkIiwid2Via2l0ZnVsbHNjcmVlbmNoYW5nZSIsIndlYmtpdGZ1bGxzY3JlZW5lcnJvciJdLFsid2Via2l0UmVxdWVzdEZ1bGxTY3JlZW4iLCJ3ZWJraXRDYW5jZWxGdWxsU2NyZWVuIiwid2Via2l0Q3VycmVudEZ1bGxTY3JlZW5FbGVtZW50Iiwid2Via2l0Q2FuY2VsRnVsbFNjcmVlbiIsIndlYmtpdGZ1bGxzY3JlZW5jaGFuZ2UiLCJ3ZWJraXRmdWxsc2NyZWVuZXJyb3IiXSxbIm1velJlcXVlc3RGdWxsU2NyZWVuIiwibW96Q2FuY2VsRnVsbFNjcmVlbiIsIm1vekZ1bGxTY3JlZW5FbGVtZW50IiwibW96RnVsbFNjcmVlbkVuYWJsZWQiLCJtb3pmdWxsc2NyZWVuY2hhbmdlIiwibW96ZnVsbHNjcmVlbmVycm9yIl0sWyJtc1JlcXVlc3RGdWxsc2NyZWVuIiwibXNFeGl0RnVsbHNjcmVlbiIsIm1zRnVsbHNjcmVlbkVsZW1lbnQiLCJtc0Z1bGxzY3JlZW5FbmFibGVkIiwiTVNGdWxsc2NyZWVuQ2hhbmdlIiwiTVNGdWxsc2NyZWVuRXJyb3IiXV0saT1oWzBdLGo9dm9pZCAwLGs9MDtrPGgubGVuZ3RoO2srKylpZihoW2tdWzFdaW4gZlsiZGVmYXVsdCJdKXtqPWhba107YnJlYWt9aWYoailmb3IodmFyIGw9MDtsPGoubGVuZ3RoO2wrKylnW2lbbF1dPWpbbF07Y1siZGVmYXVsdCJdPWd9LHs5NDo5NH1dLDQ1OltmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGQoYSl7cmV0dXJuIGEmJmEuX19lc01vZHVsZT9hOnsiZGVmYXVsdCI6YX19ZnVuY3Rpb24gZShhLGIpe2lmKCEoYSBpbnN0YW5jZW9mIGIpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIGYoYSxiKXtpZighYSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiFifHwib2JqZWN0IiE9dHlwZW9mIGImJiJmdW5jdGlvbiIhPXR5cGVvZiBiP2E6Yn1mdW5jdGlvbiBnKGEsYil7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGImJm51bGwhPT1iKXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgYik7YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiJiZiLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmEsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksYiYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoYSxiKTphLl9fcHJvdG9fXz1iKX1jLl9fZXNNb2R1bGU9ITA7dmFyIGg9YSg1KSxpPWQoaCksaj1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7cmV0dXJuIGUodGhpcyxiKSxmKHRoaXMsYS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBnKGIsYSksYi5wcm90b3R5cGUuY3JlYXRlRWw9ZnVuY3Rpb24oKXtyZXR1cm4gYS5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCJkaXYiLHtjbGFzc05hbWU6InZqcy1sb2FkaW5nLXNwaW5uZXIiLGRpcjoibHRyIn0pfSxifShpWyJkZWZhdWx0Il0pO2lbImRlZmF1bHQiXS5yZWdpc3RlckNvbXBvbmVudCgiTG9hZGluZ1NwaW5uZXIiLGopLGNbImRlZmF1bHQiXT1qfSx7NTo1fV0sNDY6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZChhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIGQ/YTooIm51bWJlciI9PXR5cGVvZiBhP3RoaXMuY29kZT1hOiJzdHJpbmciPT10eXBlb2YgYT90aGlzLm1lc3NhZ2U9YTooMCxlLmlzT2JqZWN0KShhKSYmKCJudW1iZXIiPT10eXBlb2YgYS5jb2RlJiYodGhpcy5jb2RlPWEuY29kZSksKDAsZS5hc3NpZ24pKHRoaXMsYSkpLHZvaWQodGhpcy5tZXNzYWdlfHwodGhpcy5tZXNzYWdlPWQuZGVmYXVsdE1lc3NhZ2VzW3RoaXMuY29kZV18fCIiKSkpfWMuX19lc01vZHVsZT0hMDt2YXIgZT1hKDg4KTtkLnByb3RvdHlwZS5jb2RlPTAsZC5wcm90b3R5cGUubWVzc2FnZT0iIixkLnByb3RvdHlwZS5zdGF0dXM9bnVsbCxkLmVycm9yVHlwZXM9WyJNRURJQV9FUlJfQ1VTVE9NIiwiTUVESUFfRVJSX0FCT1JURUQiLCJNRURJQV9FUlJfTkVUV09SSyIsIk1FRElBX0VSUl9ERUNPREUiLCJNRURJQV9FUlJfU1JDX05PVF9TVVBQT1JURUQiLCJNRURJQV9FUlJfRU5DUllQVEVEIl0sZC5kZWZhdWx0TWVzc2FnZXM9ezE6IllvdSBhYm9ydGVkIHRoZSBtZWRpYSBwbGF5YmFjayIsMjoiQSBuZXR3b3JrIGVycm9yIGNhdXNlZCB0aGUgbWVkaWEgZG93bmxvYWQgdG8gZmFpbCBwYXJ0LXdheS4iLDM6IlRoZSBtZWRpYSBwbGF5YmFjayB3YXMgYWJvcnRlZCBkdWUgdG8gYSBjb3JydXB0aW9uIHByb2JsZW0gb3IgYmVjYXVzZSB0aGUgbWVkaWEgdXNlZCBmZWF0dXJlcyB5b3VyIGJyb3dzZXIgZGlkIG5vdCBzdXBwb3J0LiIsNDoiVGhlIG1lZGlhIGNvdWxkIG5vdCBiZSBsb2FkZWQsIGVpdGhlciBiZWNhdXNlIHRoZSBzZXJ2ZXIgb3IgbmV0d29yayBmYWlsZWQgb3IgYmVjYXVzZSB0aGUgZm9ybWF0IGlzIG5vdCBzdXBwb3J0ZWQuIiw1OiJUaGUgbWVkaWEgaXMgZW5jcnlwdGVkIGFuZCB3ZSBkbyBub3QgaGF2ZSB0aGUga2V5cyB0byBkZWNyeXB0IGl0LiJ9O2Zvcih2YXIgZj0wO2Y8ZC5lcnJvclR5cGVzLmxlbmd0aDtmKyspZFtkLmVycm9yVHlwZXNbZl1dPWYsZC5wcm90b3R5cGVbZC5lcnJvclR5cGVzW2ZdXT1mO2NbImRlZmF1bHQiXT1kfSx7ODg6ODh9XSw0NzpbZnVuY3Rpb24oYSxiLGMpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBkKGEpe2lmKGEmJmEuX19lc01vZHVsZSlyZXR1cm4gYTt2YXIgYj17fTtpZihudWxsIT1hKWZvcih2YXIgYyBpbiBhKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLGMpJiYoYltjXT1hW2NdKTtyZXR1cm4gYlsiZGVmYXVsdCJdPWEsYn1mdW5jdGlvbiBlKGEpe3JldHVybiBhJiZhLl9fZXNNb2R1bGU/YTp7ImRlZmF1bHQiOmF9fWZ1bmN0aW9uIGYoYSxiKXtpZighKGEgaW5zdGFuY2VvZiBiKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1mdW5jdGlvbiBnKGEsYil7aWYoIWEpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTtyZXR1cm4hYnx8Im9iamVjdCIhPXR5cGVvZiBiJiYiZnVuY3Rpb24iIT10eXBlb2YgYj9hOmJ9ZnVuY3Rpb24gaChhLGIpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBiJiZudWxsIT09Yil0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIGIpO2EucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYiYmYi5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTphLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGImJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKGEsYik6YS5fX3Byb3RvX189Yil9Yy5fX2VzTW9kdWxlPSEwO3ZhciBpPWEoMyksaj1lKGkpLGs9YSg1KSxsPWUoayksbT1hKDQ5KSxuPWUobSksbz1hKDgxKSxwPWQobykscT1hKDgzKSxyPWQocSkscz1hKDkxKSx0PWUocyksdT1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGMpe3ZhciBkPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fTtmKHRoaXMsYik7dmFyIGU9Zyh0aGlzLGEuY2FsbCh0aGlzLGMsZCkpO3JldHVybiBlLnVwZGF0ZSgpLGUuZW5hYmxlZF89ITAsZS5lbF8uc2V0QXR0cmlidXRlKCJhcmlhLWhhc3BvcHVwIiwidHJ1ZSIpLGUuZWxfLnNldEF0dHJpYnV0ZSgicm9sZSIsIm1lbnVpdGVtIiksZS5vbigia2V5ZG93biIsZS5oYW5kbGVTdWJtZW51S2V5UHJlc3MpLGV9cmV0dXJuIGgoYixhKSxiLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmNyZWF0ZU1lbnUoKTt0aGlzLm1lbnUmJnRoaXMucmVtb3ZlQ2hpbGQodGhpcy5tZW51KSx0aGlzLm1lbnU9YSx0aGlzLmFkZENoaWxkKGEpLHRoaXMuYnV0dG9uUHJlc3NlZF89ITEsdGhpcy5lbF8uc2V0QXR0cmlidXRlKCJhcmlhLWV4cGFuZGVkIiwiZmFsc2UiKSx0aGlzLml0ZW1zJiYwPT09dGhpcy5pdGVtcy5sZW5ndGg/dGhpcy5oaWRlKCk6dGhpcy5pdGVtcyYmdGhpcy5pdGVtcy5sZW5ndGg+MSYmdGhpcy5zaG93KCl9LGIucHJvdG90eXBlLmNyZWF0ZU1lbnU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgblsiZGVmYXVsdCJdKHRoaXMucGxheWVyXyk7aWYodGhpcy5vcHRpb25zXy50aXRsZSl7dmFyIGI9cC5jcmVhdGVFbCgibGkiLHtjbGFzc05hbWU6InZqcy1tZW51LXRpdGxlIixpbm5lckhUTUw6KDAsdFsiZGVmYXVsdCJdKSh0aGlzLm9wdGlvbnNfLnRpdGxlKSx0YWJJbmRleDotMX0pO2EuY2hpbGRyZW5fLnVuc2hpZnQoYikscC5pbnNlcnRFbEZpcnN0KGIsYS5jb250ZW50RWwoKSl9aWYodGhpcy5pdGVtcz10aGlzLmNyZWF0ZUl0ZW1zKCksdGhpcy5pdGVtcylmb3IodmFyIGM9MDtjPHRoaXMuaXRlbXMubGVuZ3RoO2MrKylhLmFkZEl0ZW0odGhpcy5pdGVtc1tjXSk7cmV0dXJuIGF9LGIucHJvdG90eXBlLmNyZWF0ZUl0ZW1zPWZ1bmN0aW9uKCl7fSxiLnByb3RvdHlwZS5jcmVhdGVFbD1mdW5jdGlvbigpe3JldHVybiBhLnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsImRpdiIse2NsYXNzTmFtZTp0aGlzLmJ1aWxkQ1NTQ2xhc3MoKX0pfSxiLnByb3RvdHlwZS5idWlsZENTU0NsYXNzPWZ1bmN0aW9uKCl7dmFyIGI9InZqcy1tZW51LWJ1dHRvbiI7cmV0dXJuIGIrPXRoaXMub3B0aW9uc18uaW5saW5lPT09ITA/Ii1pbmxpbmUiOiItcG9wdXAiLCJ2anMtbWVudS1idXR0b24gIitiKyIgIithLnByb3RvdHlwZS5idWlsZENTU0NsYXNzLmNhbGwodGhpcyl9LGIucHJvdG90eXBlLmhhbmRsZUNsaWNrPWZ1bmN0aW9uKGEpe3RoaXMub25lKHRoaXMubWVudS5jb250ZW50RWwoKSwibW91c2VsZWF2ZSIsci5iaW5kKHRoaXMsZnVuY3Rpb24oYSl7dGhpcy51bnByZXNzQnV0dG9uKCksdGhpcy5lbF8uYmx1cigpfSkpLHRoaXMuYnV0dG9uUHJlc3NlZF8/dGhpcy51bnByZXNzQnV0dG9uKCk6dGhpcy5wcmVzc0J1dHRvbigpfSxiLnByb3RvdHlwZS5oYW5kbGVLZXlQcmVzcz1mdW5jdGlvbihiKXsyNz09PWIud2hpY2h8fDk9PT1iLndoaWNoPyh0aGlzLmJ1dHRvblByZXNzZWRfJiZ0aGlzLnVucHJlc3NCdXR0b24oKSw5IT09Yi53aGljaCYmYi5wcmV2ZW50RGVmYXVsdCgpKTozOD09PWIud2hpY2h8fDQwPT09Yi53aGljaD90aGlzLmJ1dHRvblByZXNzZWRffHwodGhpcy5wcmVzc0J1dHRvbigpLGIucHJldmVudERlZmF1bHQoKSk6YS5wcm90b3R5cGUuaGFuZGxlS2V5UHJlc3MuY2FsbCh0aGlzLGIpfSxiLnByb3RvdHlwZS5oYW5kbGVTdWJtZW51S2V5UHJlc3M9ZnVuY3Rpb24oYSl7MjchPT1hLndoaWNoJiY5IT09YS53aGljaHx8KHRoaXMuYnV0dG9uUHJlc3NlZF8mJnRoaXMudW5wcmVzc0J1dHRvbigpLDkhPT1hLndoaWNoJiZhLnByZXZlbnREZWZhdWx0KCkpfSxiLnByb3RvdHlwZS5wcmVzc0J1dHRvbj1mdW5jdGlvbigpe3RoaXMuZW5hYmxlZF8mJih0aGlzLmJ1dHRvblByZXNzZWRfPSEwLHRoaXMubWVudS5sb2NrU2hvd2luZygpLHRoaXMuZWxfLnNldEF0dHJpYnV0ZSgiYXJpYS1leHBhbmRlZCIsInRydWUiKSx0aGlzLm1lbnUuZm9jdXMoKSl9LGIucHJvdG90eXBlLnVucHJlc3NCdXR0b249ZnVuY3Rpb24oKXt0aGlzLmVuYWJsZWRfJiYodGhpcy5idXR0b25QcmVzc2VkXz0hMSx0aGlzLm1lbnUudW5sb2NrU2hvd2luZygpLHRoaXMuZWxfLnNldEF0dHJpYnV0ZSgiYXJpYS1leHBhbmRlZCIsImZhbHNlIiksdGhpcy5lbF8uZm9jdXMoKSl9LGIucHJvdG90eXBlLmRpc2FibGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5idXR0b25QcmVzc2VkXz0hMSx0aGlzLm1lbnUudW5sb2NrU2hvd2luZygpLHRoaXMuZWxfLnNldEF0dHJpYnV0ZSgiYXJpYS1leHBhbmRlZCIsImZhbHNlIiksdGhpcy5lbmFibGVkXz0hMSxhLnByb3RvdHlwZS5kaXNhYmxlLmNhbGwodGhpcyl9LGIucHJvdG90eXBlLmVuYWJsZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVuYWJsZWRfPSEwLGEucHJvdG90eXBlLmVuYWJsZS5jYWxsKHRoaXMpfSxifShqWyJkZWZhdWx0Il0pO2xbImRlZmF1bHQiXS5yZWdpc3RlckNvbXBvbmVudCgiTWVudUJ1dHRvbiIsdSksY1siZGVmYXVsdCJdPXV9LHszOjMsNDk6NDksNTo1LDgxOjgxLDgzOjgzLDkxOjkxfV0sNDg6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZChhKXtyZXR1cm4gYSYmYS5fX2VzTW9kdWxlP2E6eyJkZWZhdWx0IjphfX1mdW5jdGlvbiBlKGEsYil7aWYoIShhIGluc3RhbmNlb2YgYikpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gZihhLGIpe2lmKCFhKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWJ8fCJvYmplY3QiIT10eXBlb2YgYiYmImZ1bmN0aW9uIiE9dHlwZW9mIGI/YTpifWZ1bmN0aW9uIGcoYSxiKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgYiYmbnVsbCE9PWIpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBiKTthLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGImJmIucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6YSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxiJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihhLGIpOmEuX19wcm90b19fPWIpfWMuX19lc01vZHVsZT0hMDt2YXIgaD1hKDMpLGk9ZChoKSxqPWEoNSksaz1kKGopLGw9YSg4OCksbT1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGMsZCl7ZSh0aGlzLGIpO3ZhciBnPWYodGhpcyxhLmNhbGwodGhpcyxjLGQpKTtyZXR1cm4gZy5zZWxlY3RhYmxlPWQuc2VsZWN0YWJsZSxnLnNlbGVjdGVkKGQuc2VsZWN0ZWQpLGcuc2VsZWN0YWJsZT9nLmVsXy5zZXRBdHRyaWJ1dGUoInJvbGUiLCJtZW51aXRlbWNoZWNrYm94Iik6Zy5lbF8uc2V0QXR0cmlidXRlKCJyb2xlIiwibWVudWl0ZW0iKSxnfXJldHVybiBnKGIsYSksYi5wcm90b3R5cGUuY3JlYXRlRWw9ZnVuY3Rpb24oYixjLGQpe3JldHVybiBhLnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsImxpIiwoMCxsLmFzc2lnbikoe2NsYXNzTmFtZToidmpzLW1lbnUtaXRlbSIsaW5uZXJIVE1MOnRoaXMubG9jYWxpemUodGhpcy5vcHRpb25zXy5sYWJlbCksdGFiSW5kZXg6LTF9LGMpLGQpfSxiLnByb3RvdHlwZS5oYW5kbGVDbGljaz1mdW5jdGlvbihhKXt0aGlzLnNlbGVjdGVkKCEwKX0sYi5wcm90b3R5cGUuc2VsZWN0ZWQ9ZnVuY3Rpb24oYSl7dGhpcy5zZWxlY3RhYmxlJiYoYT8odGhpcy5hZGRDbGFzcygidmpzLXNlbGVjdGVkIiksdGhpcy5lbF8uc2V0QXR0cmlidXRlKCJhcmlhLWNoZWNrZWQiLCJ0cnVlIiksdGhpcy5jb250cm9sVGV4dCgiLCBzZWxlY3RlZCIpKToodGhpcy5yZW1vdmVDbGFzcygidmpzLXNlbGVjdGVkIiksdGhpcy5lbF8uc2V0QXR0cmlidXRlKCJhcmlhLWNoZWNrZWQiLCJmYWxzZSIpLHRoaXMuY29udHJvbFRleHQoIiAiKSkpfSxifShpWyJkZWZhdWx0Il0pO2tbImRlZmF1bHQiXS5yZWdpc3RlckNvbXBvbmVudCgiTWVudUl0ZW0iLG0pLGNbImRlZmF1bHQiXT1tfSx7MzozLDU6NSw4ODo4OH1dLDQ5OltmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGQoYSl7aWYoYSYmYS5fX2VzTW9kdWxlKXJldHVybiBhO3ZhciBiPXt9O2lmKG51bGwhPWEpZm9yKHZhciBjIGluIGEpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGEsYykmJihiW2NdPWFbY10pO3JldHVybiBiWyJkZWZhdWx0Il09YSxifWZ1bmN0aW9uIGUoYSl7cmV0dXJuIGEmJmEuX19lc01vZHVsZT9hOnsiZGVmYXVsdCI6YX19ZnVuY3Rpb24gZihhLGIpe2lmKCEoYSBpbnN0YW5jZW9mIGIpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIGcoYSxiKXtpZighYSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiFifHwib2JqZWN0IiE9dHlwZW9mIGImJiJmdW5jdGlvbiIhPXR5cGVvZiBiP2E6Yn1mdW5jdGlvbiBoKGEsYil7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGImJm51bGwhPT1iKXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgYik7YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiJiZiLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmEsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksYiYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoYSxiKTphLl9fcHJvdG9fXz1iKX1jLl9fZXNNb2R1bGU9ITA7dmFyIGk9YSg1KSxqPWUoaSksaz1hKDgxKSxsPWQoayksbT1hKDgzKSxuPWQobSksbz1hKDgyKSxwPWQobykscT1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGMsZCl7Zih0aGlzLGIpO3ZhciBlPWcodGhpcyxhLmNhbGwodGhpcyxjLGQpKTtyZXR1cm4gZS5mb2N1c2VkQ2hpbGRfPS0xLGUub24oImtleWRvd24iLGUuaGFuZGxlS2V5UHJlc3MpLGV9cmV0dXJuIGgoYixhKSxiLnByb3RvdHlwZS5hZGRJdGVtPWZ1bmN0aW9uKGEpe3RoaXMuYWRkQ2hpbGQoYSksYS5vbigiY2xpY2siLG4uYmluZCh0aGlzLGZ1bmN0aW9uKGEpe3RoaXMudW5sb2NrU2hvd2luZygpfSkpfSxiLnByb3RvdHlwZS5jcmVhdGVFbD1mdW5jdGlvbigpe3ZhciBiPXRoaXMub3B0aW9uc18uY29udGVudEVsVHlwZXx8InVsIjt0aGlzLmNvbnRlbnRFbF89bC5jcmVhdGVFbChiLHtjbGFzc05hbWU6InZqcy1tZW51LWNvbnRlbnQifSksdGhpcy5jb250ZW50RWxfLnNldEF0dHJpYnV0ZSgicm9sZSIsIm1lbnUiKTt2YXIgYz1hLnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsImRpdiIse2FwcGVuZDp0aGlzLmNvbnRlbnRFbF8sY2xhc3NOYW1lOiJ2anMtbWVudSJ9KTtyZXR1cm4gYy5zZXRBdHRyaWJ1dGUoInJvbGUiLCJwcmVzZW50YXRpb24iKSxjLmFwcGVuZENoaWxkKHRoaXMuY29udGVudEVsXykscC5vbihjLCJjbGljayIsZnVuY3Rpb24oYSl7YS5wcmV2ZW50RGVmYXVsdCgpLGEuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCl9KSxjfSxiLnByb3RvdHlwZS5oYW5kbGVLZXlQcmVzcz1mdW5jdGlvbihhKXszNz09PWEud2hpY2h8fDQwPT09YS53aGljaD8oYS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuc3RlcEZvcndhcmQoKSk6MzghPT1hLndoaWNoJiYzOSE9PWEud2hpY2h8fChhLnByZXZlbnREZWZhdWx0KCksdGhpcy5zdGVwQmFjaygpKX0sYi5wcm90b3R5cGUuc3RlcEZvcndhcmQ9ZnVuY3Rpb24oKXt2YXIgYT0wO3ZvaWQgMCE9PXRoaXMuZm9jdXNlZENoaWxkXyYmKGE9dGhpcy5mb2N1c2VkQ2hpbGRfKzEpLHRoaXMuZm9jdXMoYSl9LGIucHJvdG90eXBlLnN0ZXBCYWNrPWZ1bmN0aW9uKCl7dmFyIGE9MDt2b2lkIDAhPT10aGlzLmZvY3VzZWRDaGlsZF8mJihhPXRoaXMuZm9jdXNlZENoaWxkXy0xKSx0aGlzLmZvY3VzKGEpfSxiLnByb3RvdHlwZS5mb2N1cz1mdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTowLGI9dGhpcy5jaGlsZHJlbigpLnNsaWNlKCksYz1iLmxlbmd0aCYmYlswXS5jbGFzc05hbWUmJi92anMtbWVudS10aXRsZS8udGVzdChiWzBdLmNsYXNzTmFtZSk7YyYmYi5zaGlmdCgpLGIubGVuZ3RoPjAmJihhPDA/YT0wOmE+PWIubGVuZ3RoJiYoYT1iLmxlbmd0aC0xKSx0aGlzLmZvY3VzZWRDaGlsZF89YSxiW2FdLmVsXy5mb2N1cygpKX0sYn0oalsiZGVmYXVsdCJdKTtqWyJkZWZhdWx0Il0ucmVnaXN0ZXJDb21wb25lbnQoIk1lbnUiLHEpLGNbImRlZmF1bHQiXT1xfSx7NTo1LDgxOjgxLDgyOjgyLDgzOjgzfV0sNTA6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZChhKXtyZXR1cm4gYSYmYS5fX2VzTW9kdWxlP2E6eyJkZWZhdWx0IjphfX1mdW5jdGlvbiBlKGEpe2lmKGEmJmEuX19lc01vZHVsZSlyZXR1cm4gYTt2YXIgYj17fTtpZihudWxsIT1hKWZvcih2YXIgYyBpbiBhKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLGMpJiYoYltjXT1hW2NdKTtyZXR1cm4gYlsiZGVmYXVsdCJdPWEsYn1mdW5jdGlvbiBmKGEsYil7aWYoIShhIGluc3RhbmNlb2YgYikpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gZyhhLGIpe2lmKCFhKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWJ8fCJvYmplY3QiIT10eXBlb2YgYiYmImZ1bmN0aW9uIiE9dHlwZW9mIGI/YTpifWZ1bmN0aW9uIGgoYSxiKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgYiYmbnVsbCE9PWIpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBiKTthLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGImJmIucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6YSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxiJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihhLGIpOmEuX19wcm90b19fPWIpfWMuX19lc01vZHVsZT0hMDt2YXIgaT1hKDgxKSxqPWUoaSksaz1hKDgzKSxsPWUoayksbT1hKDUpLG49ZChtKSxvPSJ2anMtbW9kYWwtZGlhbG9nIixwPTI3LHE9ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihjLGQpe2YodGhpcyxiKTt2YXIgZT1nKHRoaXMsYS5jYWxsKHRoaXMsYyxkKSk7cmV0dXJuIGUub3BlbmVkXz1lLmhhc0JlZW5PcGVuZWRfPWUuaGFzQmVlbkZpbGxlZF89ITEsZS5jbG9zZWFibGUoIWUub3B0aW9uc18udW5jbG9zZWFibGUpLGUuY29udGVudChlLm9wdGlvbnNfLmNvbnRlbnQpLGUuY29udGVudEVsXz1qLmNyZWF0ZUVsKCJkaXYiLHtjbGFzc05hbWU6bysiLWNvbnRlbnQifSx7cm9sZToiZG9jdW1lbnQifSksZS5kZXNjRWxfPWouY3JlYXRlRWwoInAiLHtjbGFzc05hbWU6bysiLWRlc2NyaXB0aW9uIHZqcy1vZmZzY3JlZW4iLGlkOmUuZWwoKS5nZXRBdHRyaWJ1dGUoImFyaWEtZGVzY3JpYmVkYnkiKX0pLGoudGV4dENvbnRlbnQoZS5kZXNjRWxfLGUuZGVzY3JpcHRpb24oKSksZS5lbF8uYXBwZW5kQ2hpbGQoZS5kZXNjRWxfKSxlLmVsXy5hcHBlbmRDaGlsZChlLmNvbnRlbnRFbF8pLGV9cmV0dXJuIGgoYixhKSxiLnByb3RvdHlwZS5jcmVhdGVFbD1mdW5jdGlvbigpe3JldHVybiBhLnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsImRpdiIse2NsYXNzTmFtZTp0aGlzLmJ1aWxkQ1NTQ2xhc3MoKSx0YWJJbmRleDotMX0seyJhcmlhLWRlc2NyaWJlZGJ5Ijp0aGlzLmlkKCkrIl9kZXNjcmlwdGlvbiIsImFyaWEtaGlkZGVuIjoidHJ1ZSIsImFyaWEtbGFiZWwiOnRoaXMubGFiZWwoKSxyb2xlOiJkaWFsb2cifSl9LGIucHJvdG90eXBlLmJ1aWxkQ1NTQ2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gbysiIHZqcy1oaWRkZW4gIithLnByb3RvdHlwZS5idWlsZENTU0NsYXNzLmNhbGwodGhpcyl9LGIucHJvdG90eXBlLmhhbmRsZUtleVByZXNzPWZ1bmN0aW9uKGEpe2Eud2hpY2g9PT1wJiZ0aGlzLmNsb3NlYWJsZSgpJiZ0aGlzLmNsb3NlKCl9LGIucHJvdG90eXBlLmxhYmVsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9uc18ubGFiZWx8fHRoaXMubG9jYWxpemUoIk1vZGFsIFdpbmRvdyIpfSxiLnByb3RvdHlwZS5kZXNjcmlwdGlvbj1mdW5jdGlvbigpe3ZhciBhPXRoaXMub3B0aW9uc18uZGVzY3JpcHRpb258fHRoaXMubG9jYWxpemUoIlRoaXMgaXMgYSBtb2RhbCB3aW5kb3cuIik7cmV0dXJuIHRoaXMuY2xvc2VhYmxlKCkmJihhKz0iICIrdGhpcy5sb2NhbGl6ZSgiVGhpcyBtb2RhbCBjYW4gYmUgY2xvc2VkIGJ5IHByZXNzaW5nIHRoZSBFc2NhcGUga2V5IG9yIGFjdGl2YXRpbmcgdGhlIGNsb3NlIGJ1dHRvbi4iKSksYX0sYi5wcm90b3R5cGUub3Blbj1mdW5jdGlvbigpe2lmKCF0aGlzLm9wZW5lZF8pe3ZhciBhPXRoaXMucGxheWVyKCk7dGhpcy50cmlnZ2VyKCJiZWZvcmVtb2RhbG9wZW4iKSx0aGlzLm9wZW5lZF89ITAsKHRoaXMub3B0aW9uc18uZmlsbEFsd2F5c3x8IXRoaXMuaGFzQmVlbk9wZW5lZF8mJiF0aGlzLmhhc0JlZW5GaWxsZWRfKSYmdGhpcy5maWxsKCksdGhpcy53YXNQbGF5aW5nXz0hYS5wYXVzZWQoKSx0aGlzLndhc1BsYXlpbmdfJiZhLnBhdXNlKCksdGhpcy5jbG9zZWFibGUoKSYmdGhpcy5vbih0aGlzLmVsXy5vd25lckRvY3VtZW50LCJrZXlkb3duIixsLmJpbmQodGhpcyx0aGlzLmhhbmRsZUtleVByZXNzKSksYS5jb250cm9scyghMSksdGhpcy5zaG93KCksdGhpcy5lbCgpLnNldEF0dHJpYnV0ZSgiYXJpYS1oaWRkZW4iLCJmYWxzZSIpLHRoaXMudHJpZ2dlcigibW9kYWxvcGVuIiksdGhpcy5oYXNCZWVuT3BlbmVkXz0hMH1yZXR1cm4gdGhpc30sYi5wcm90b3R5cGUub3BlbmVkPWZ1bmN0aW9uKGEpe3JldHVybiJib29sZWFuIj09dHlwZW9mIGEmJnRoaXNbYT8ib3BlbiI6ImNsb3NlIl0oKSx0aGlzLm9wZW5lZF99LGIucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKCl7aWYodGhpcy5vcGVuZWRfKXt2YXIgYT10aGlzLnBsYXllcigpO3RoaXMudHJpZ2dlcigiYmVmb3JlbW9kYWxjbG9zZSIpLHRoaXMub3BlbmVkXz0hMSx0aGlzLndhc1BsYXlpbmdfJiZhLnBsYXkoKSx0aGlzLmNsb3NlYWJsZSgpJiZ0aGlzLm9mZih0aGlzLmVsXy5vd25lckRvY3VtZW50LCJrZXlkb3duIixsLmJpbmQodGhpcyx0aGlzLmhhbmRsZUtleVByZXNzKSksYS5jb250cm9scyghMCksdGhpcy5oaWRlKCksdGhpcy5lbCgpLnNldEF0dHJpYnV0ZSgiYXJpYS1oaWRkZW4iLCJ0cnVlIiksdGhpcy50cmlnZ2VyKCJtb2RhbGNsb3NlIiksdGhpcy5vcHRpb25zXy50ZW1wb3JhcnkmJnRoaXMuZGlzcG9zZSgpfXJldHVybiB0aGlzfSxiLnByb3RvdHlwZS5jbG9zZWFibGU9ZnVuY3Rpb24gYyhhKXtpZigiYm9vbGVhbiI9PXR5cGVvZiBhKXt2YXIgYz10aGlzLmNsb3NlYWJsZV89ISFhLGI9dGhpcy5nZXRDaGlsZCgiY2xvc2VCdXR0b24iKTtpZihjJiYhYil7dmFyIGQ9dGhpcy5jb250ZW50RWxfO3RoaXMuY29udGVudEVsXz10aGlzLmVsXyxiPXRoaXMuYWRkQ2hpbGQoImNsb3NlQnV0dG9uIix7Y29udHJvbFRleHQ6IkNsb3NlIE1vZGFsIERpYWxvZyJ9KSx0aGlzLmNvbnRlbnRFbF89ZCx0aGlzLm9uKGIsImNsb3NlIix0aGlzLmNsb3NlKX0hYyYmYiYmKHRoaXMub2ZmKGIsImNsb3NlIix0aGlzLmNsb3NlKSx0aGlzLnJlbW92ZUNoaWxkKGIpLGIuZGlzcG9zZSgpKX1yZXR1cm4gdGhpcy5jbG9zZWFibGVffSxiLnByb3RvdHlwZS5maWxsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZmlsbFdpdGgodGhpcy5jb250ZW50KCkpfSxiLnByb3RvdHlwZS5maWxsV2l0aD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmNvbnRlbnRFbCgpLGM9Yi5wYXJlbnROb2RlLGQ9Yi5uZXh0U2libGluZztyZXR1cm4gdGhpcy50cmlnZ2VyKCJiZWZvcmVtb2RhbGZpbGwiKSx0aGlzLmhhc0JlZW5GaWxsZWRfPSEwLGMucmVtb3ZlQ2hpbGQoYiksdGhpcy5lbXB0eSgpLGouaW5zZXJ0Q29udGVudChiLGEpLHRoaXMudHJpZ2dlcigibW9kYWxmaWxsIiksCmQ/Yy5pbnNlcnRCZWZvcmUoYixkKTpjLmFwcGVuZENoaWxkKGIpLHRoaXN9LGIucHJvdG90eXBlLmVtcHR5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJpZ2dlcigiYmVmb3JlbW9kYWxlbXB0eSIpLGouZW1wdHlFbCh0aGlzLmNvbnRlbnRFbCgpKSx0aGlzLnRyaWdnZXIoIm1vZGFsZW1wdHkiKSx0aGlzfSxiLnByb3RvdHlwZS5jb250ZW50PWZ1bmN0aW9uKGEpe3JldHVybiJ1bmRlZmluZWQiIT10eXBlb2YgYSYmKHRoaXMuY29udGVudF89YSksdGhpcy5jb250ZW50X30sYn0oblsiZGVmYXVsdCJdKTtxLnByb3RvdHlwZS5vcHRpb25zXz17dGVtcG9yYXJ5OiEwfSxuWyJkZWZhdWx0Il0ucmVnaXN0ZXJDb21wb25lbnQoIk1vZGFsRGlhbG9nIixxKSxjWyJkZWZhdWx0Il09cX0sezU6NSw4MTo4MSw4Mzo4M31dLDUxOltmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGQoYSl7aWYoYSYmYS5fX2VzTW9kdWxlKXJldHVybiBhO3ZhciBiPXt9O2lmKG51bGwhPWEpZm9yKHZhciBjIGluIGEpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGEsYykmJihiW2NdPWFbY10pO3JldHVybiBiWyJkZWZhdWx0Il09YSxifWZ1bmN0aW9uIGUoYSl7cmV0dXJuIGEmJmEuX19lc01vZHVsZT9hOnsiZGVmYXVsdCI6YX19ZnVuY3Rpb24gZihhLGIpe2lmKCEoYSBpbnN0YW5jZW9mIGIpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIGcoYSxiKXtpZighYSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiFifHwib2JqZWN0IiE9dHlwZW9mIGImJiJmdW5jdGlvbiIhPXR5cGVvZiBiP2E6Yn1mdW5jdGlvbiBoKGEsYil7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGImJm51bGwhPT1iKXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgYik7YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiJiZiLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmEsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksYiYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoYSxiKTphLl9fcHJvdG9fXz1iKX1jLl9fZXNNb2R1bGU9ITA7dmFyIGk9YSg1KSxqPWUoaSksaz1hKDk0KSxsPWUoayksbT1hKDk1KSxuPWUobSksbz1hKDgyKSxwPWQobykscT1hKDgxKSxyPWQocSkscz1hKDgzKSx0PWQocyksdT1hKDg1KSx2PWQodSksdz1hKDc4KSx4PWQodykseT1hKDg2KSx6PWUoeSksQT1hKDkxKSxCPWUoQSksQz1hKDkwKSxEPWEoNzkpLEU9YSg4OSksRj1kKEUpLEc9YSg0NCksSD1lKEcpLEk9YSg0NiksSj1lKEkpLEs9YSg5NyksTD1lKEspLE09YSg4OCksTj1hKDg3KSxPPWUoTiksUD1hKDY5KSxRPWUoUCksUj1hKDUwKSxTPWUoUiksVD1hKDYyKSxVPWUoVCksVj1hKDYzKSxXPWUoViksWD1hKDc2KSxZPWUoWCk7YSg2MSksYSg1OSksYSg1NSksYSg2OCksYSg0NSksYSgxKSxhKDQpLGEoOCksYSg0MSksYSg3MSksYSg2MCk7dmFyIFo9WyJwcm9ncmVzcyIsImFib3J0Iiwic3VzcGVuZCIsImVtcHRpZWQiLCJzdGFsbGVkIiwibG9hZGVkbWV0YWRhdGEiLCJsb2FkZWRkYXRhIiwidGltZXVwZGF0ZSIsInJhdGVjaGFuZ2UiLCJ2b2x1bWVjaGFuZ2UiLCJ0ZXh0dHJhY2tjaGFuZ2UiXSwkPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYyxkLGUpe2lmKGYodGhpcyxiKSxjLmlkPWMuaWR8fCJ2anNfdmlkZW9fIit2Lm5ld0dVSUQoKSxkPSgwLE0uYXNzaWduKShiLmdldFRhZ1NldHRpbmdzKGMpLGQpLGQuaW5pdENoaWxkcmVuPSExLGQuY3JlYXRlRWw9ITEsZC5yZXBvcnRUb3VjaEFjdGl2aXR5PSExLCFkLmxhbmd1YWdlKWlmKCJmdW5jdGlvbiI9PXR5cGVvZiBjLmNsb3Nlc3Qpe3ZhciBoPWMuY2xvc2VzdCgiW2xhbmddIik7aCYmKGQubGFuZ3VhZ2U9aC5nZXRBdHRyaWJ1dGUoImxhbmciKSl9ZWxzZSBmb3IodmFyIGk9YztpJiYxPT09aS5ub2RlVHlwZTspe2lmKHIuZ2V0RWxBdHRyaWJ1dGVzKGkpLmhhc093blByb3BlcnR5KCJsYW5nIikpe2QubGFuZ3VhZ2U9aS5nZXRBdHRyaWJ1dGUoImxhbmciKTticmVha31pPWkucGFyZW50Tm9kZX12YXIgaj1nKHRoaXMsYS5jYWxsKHRoaXMsbnVsbCxkLGUpKTtpZighai5vcHRpb25zX3x8IWoub3B0aW9uc18udGVjaE9yZGVyfHwhai5vcHRpb25zXy50ZWNoT3JkZXIubGVuZ3RoKXRocm93IG5ldyBFcnJvcigiTm8gdGVjaE9yZGVyIHNwZWNpZmllZC4gRGlkIHlvdSBvdmVyd3JpdGUgdmlkZW9qcy5vcHRpb25zIGluc3RlYWQgb2YganVzdCBjaGFuZ2luZyB0aGUgcHJvcGVydGllcyB5b3Ugd2FudCB0byBvdmVycmlkZT8iKTtqLnRhZz1jLGoudGFnQXR0cmlidXRlcz1jJiZyLmdldEVsQXR0cmlidXRlcyhjKSxqLmxhbmd1YWdlKGoub3B0aW9uc18ubGFuZ3VhZ2UpLGQubGFuZ3VhZ2VzPyFmdW5jdGlvbigpe3ZhciBhPXt9O09iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGQubGFuZ3VhZ2VzKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe2FbYi50b0xvd2VyQ2FzZSgpXT1kLmxhbmd1YWdlc1tiXX0pLGoubGFuZ3VhZ2VzXz1hfSgpOmoubGFuZ3VhZ2VzXz1iLnByb3RvdHlwZS5vcHRpb25zXy5sYW5ndWFnZXMsai5jYWNoZV89e30sai5wb3N0ZXJfPWQucG9zdGVyfHwiIixqLmNvbnRyb2xzXz0hIWQuY29udHJvbHMsYy5jb250cm9scz0hMSxqLnNjcnViYmluZ189ITEsai5lbF89ai5jcmVhdGVFbCgpO3ZhciBrPSgwLE9bImRlZmF1bHQiXSkoai5vcHRpb25zXyk7cmV0dXJuIGQucGx1Z2lucyYmIWZ1bmN0aW9uKCl7dmFyIGE9ZC5wbHVnaW5zO09iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGEpLmZvckVhY2goZnVuY3Rpb24oYil7ImZ1bmN0aW9uIj09dHlwZW9mIHRoaXNbYl0/dGhpc1tiXShhW2JdKTp6WyJkZWZhdWx0Il0uZXJyb3IoIlVuYWJsZSB0byBmaW5kIHBsdWdpbjoiLGIpfSxqKX0oKSxqLm9wdGlvbnNfLnBsYXllck9wdGlvbnM9ayxqLmluaXRDaGlsZHJlbigpLGouaXNBdWRpbygiYXVkaW8iPT09Yy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKSxqLmNvbnRyb2xzKCk/ai5hZGRDbGFzcygidmpzLWNvbnRyb2xzLWVuYWJsZWQiKTpqLmFkZENsYXNzKCJ2anMtY29udHJvbHMtZGlzYWJsZWQiKSxqLmVsXy5zZXRBdHRyaWJ1dGUoInJvbGUiLCJyZWdpb24iKSxqLmlzQXVkaW8oKT9qLmVsXy5zZXRBdHRyaWJ1dGUoImFyaWEtbGFiZWwiLCJhdWRpbyBwbGF5ZXIiKTpqLmVsXy5zZXRBdHRyaWJ1dGUoImFyaWEtbGFiZWwiLCJ2aWRlbyBwbGF5ZXIiKSxqLmlzQXVkaW8oKSYmai5hZGRDbGFzcygidmpzLWF1ZGlvIiksai5mbGV4Tm90U3VwcG9ydGVkXygpJiZqLmFkZENsYXNzKCJ2anMtbm8tZmxleCIpLHguSVNfSU9TfHxqLmFkZENsYXNzKCJ2anMtd29ya2luZ2hvdmVyIiksYi5wbGF5ZXJzW2ouaWRfXT1qLGoudXNlckFjdGl2ZSghMCksai5yZXBvcnRVc2VyQWN0aXZpdHkoKSxqLmxpc3RlbkZvclVzZXJBY3Rpdml0eV8oKSxqLm9uKCJmdWxsc2NyZWVuY2hhbmdlIixqLmhhbmRsZUZ1bGxzY3JlZW5DaGFuZ2VfKSxqLm9uKCJzdGFnZWNsaWNrIixqLmhhbmRsZVN0YWdlQ2xpY2tfKSxqfXJldHVybiBoKGIsYSksYi5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMudHJpZ2dlcigiZGlzcG9zZSIpLHRoaXMub2ZmKCJkaXNwb3NlIiksdGhpcy5zdHlsZUVsXyYmdGhpcy5zdHlsZUVsXy5wYXJlbnROb2RlJiZ0aGlzLnN0eWxlRWxfLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5zdHlsZUVsXyksYi5wbGF5ZXJzW3RoaXMuaWRfXT1udWxsLHRoaXMudGFnJiZ0aGlzLnRhZy5wbGF5ZXImJih0aGlzLnRhZy5wbGF5ZXI9bnVsbCksdGhpcy5lbF8mJnRoaXMuZWxfLnBsYXllciYmKHRoaXMuZWxfLnBsYXllcj1udWxsKSx0aGlzLnRlY2hfJiZ0aGlzLnRlY2hfLmRpc3Bvc2UoKSxhLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyl9LGIucHJvdG90eXBlLmNyZWF0ZUVsPWZ1bmN0aW9uKCl7dmFyIGI9dGhpcy50YWcsYz12b2lkIDAsZD10aGlzLnBsYXllckVsSW5nZXN0Xz1iLnBhcmVudE5vZGUmJmIucGFyZW50Tm9kZS5oYXNBdHRyaWJ1dGUoImRhdGEtdmpzLXBsYXllciIpO2M9ZD90aGlzLmVsXz1iLnBhcmVudE5vZGU6dGhpcy5lbF89YS5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCJkaXYiKSxiLnJlbW92ZUF0dHJpYnV0ZSgid2lkdGgiKSxiLnJlbW92ZUF0dHJpYnV0ZSgiaGVpZ2h0Iik7dmFyIGU9ci5nZXRFbEF0dHJpYnV0ZXMoYik7aWYoT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZSkuZm9yRWFjaChmdW5jdGlvbihhKXsiY2xhc3MiPT09YT9jLmNsYXNzTmFtZSs9IiAiK2VbYV06Yy5zZXRBdHRyaWJ1dGUoYSxlW2FdKX0pLGIucGxheWVySWQ9Yi5pZCxiLmlkKz0iX2h0bWw1X2FwaSIsYi5jbGFzc05hbWU9InZqcy10ZWNoIixiLnBsYXllcj1jLnBsYXllcj10aGlzLHRoaXMuYWRkQ2xhc3MoInZqcy1wYXVzZWQiKSxuWyJkZWZhdWx0Il0uVklERU9KU19OT19EWU5BTUlDX1NUWUxFIT09ITApe3RoaXMuc3R5bGVFbF89Ri5jcmVhdGVTdHlsZUVsZW1lbnQoInZqcy1zdHlsZXMtZGltZW5zaW9ucyIpO3ZhciBmPXIuJCgiLnZqcy1zdHlsZXMtZGVmYXVsdHMiKSxnPXIuJCgiaGVhZCIpO2cuaW5zZXJ0QmVmb3JlKHRoaXMuc3R5bGVFbF8sZj9mLm5leHRTaWJsaW5nOmcuZmlyc3RDaGlsZCl9dGhpcy53aWR0aCh0aGlzLm9wdGlvbnNfLndpZHRoKSx0aGlzLmhlaWdodCh0aGlzLm9wdGlvbnNfLmhlaWdodCksdGhpcy5mbHVpZCh0aGlzLm9wdGlvbnNfLmZsdWlkKSx0aGlzLmFzcGVjdFJhdGlvKHRoaXMub3B0aW9uc18uYXNwZWN0UmF0aW8pO2Zvcih2YXIgaD1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJhIiksaT0wO2k8aC5sZW5ndGg7aSsrKXt2YXIgaj1oLml0ZW0oaSk7ci5hZGRFbENsYXNzKGosInZqcy1oaWRkZW4iKSxqLnNldEF0dHJpYnV0ZSgiaGlkZGVuIiwiaGlkZGVuIil9cmV0dXJuIGIuaW5pdE5ldHdvcmtTdGF0ZV89Yi5uZXR3b3JrU3RhdGUsYi5wYXJlbnROb2RlJiYhZCYmYi5wYXJlbnROb2RlLmluc2VydEJlZm9yZShjLGIpLHIuaW5zZXJ0RWxGaXJzdChiLGMpLHRoaXMuY2hpbGRyZW5fLnVuc2hpZnQoYiksdGhpcy5lbF89YyxjfSxiLnByb3RvdHlwZS53aWR0aD1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5kaW1lbnNpb24oIndpZHRoIixhKX0sYi5wcm90b3R5cGUuaGVpZ2h0PWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRpbWVuc2lvbigiaGVpZ2h0IixhKX0sYi5wcm90b3R5cGUuZGltZW5zaW9uPWZ1bmN0aW9uKGEsYil7dmFyIGM9YSsiXyI7aWYodm9pZCAwPT09YilyZXR1cm4gdGhpc1tjXXx8MDtpZigiIj09PWIpdGhpc1tjXT12b2lkIDA7ZWxzZXt2YXIgZD1wYXJzZUZsb2F0KGIpO2lmKGlzTmFOKGQpKXJldHVybiB6WyJkZWZhdWx0Il0uZXJyb3IoJ0ltcHJvcGVyIHZhbHVlICInK2IrJyIgc3VwcGxpZWQgZm9yIGZvciAnK2EpLHRoaXM7dGhpc1tjXT1kfXJldHVybiB0aGlzLnVwZGF0ZVN0eWxlRWxfKCksdGhpc30sYi5wcm90b3R5cGUuZmx1aWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHZvaWQgMD09PWE/ISF0aGlzLmZsdWlkXzoodGhpcy5mbHVpZF89ISFhLGE/dGhpcy5hZGRDbGFzcygidmpzLWZsdWlkIik6dGhpcy5yZW1vdmVDbGFzcygidmpzLWZsdWlkIiksdm9pZCB0aGlzLnVwZGF0ZVN0eWxlRWxfKCkpfSxiLnByb3RvdHlwZS5hc3BlY3RSYXRpbz1mdW5jdGlvbihhKXtpZih2b2lkIDA9PT1hKXJldHVybiB0aGlzLmFzcGVjdFJhdGlvXztpZighL15cZCtcOlxkKyQvLnRlc3QoYSkpdGhyb3cgbmV3IEVycm9yKCJJbXByb3BlciB2YWx1ZSBzdXBwbGllZCBmb3IgYXNwZWN0IHJhdGlvLiBUaGUgZm9ybWF0IHNob3VsZCBiZSB3aWR0aDpoZWlnaHQsIGZvciBleGFtcGxlIDE2OjkuIik7dGhpcy5hc3BlY3RSYXRpb189YSx0aGlzLmZsdWlkKCEwKSx0aGlzLnVwZGF0ZVN0eWxlRWxfKCl9LGIucHJvdG90eXBlLnVwZGF0ZVN0eWxlRWxfPWZ1bmN0aW9uKCl7aWYoblsiZGVmYXVsdCJdLlZJREVPSlNfTk9fRFlOQU1JQ19TVFlMRT09PSEwKXt2YXIgYT0ibnVtYmVyIj09dHlwZW9mIHRoaXMud2lkdGhfP3RoaXMud2lkdGhfOnRoaXMub3B0aW9uc18ud2lkdGgsYj0ibnVtYmVyIj09dHlwZW9mIHRoaXMuaGVpZ2h0Xz90aGlzLmhlaWdodF86dGhpcy5vcHRpb25zXy5oZWlnaHQsYz10aGlzLnRlY2hfJiZ0aGlzLnRlY2hfLmVsKCk7cmV0dXJuIHZvaWQoYyYmKGE+PTAmJihjLndpZHRoPWEpLGI+PTAmJihjLmhlaWdodD1iKSkpfXZhciBkPXZvaWQgMCxlPXZvaWQgMCxmPXZvaWQgMCxnPXZvaWQgMDtmPXZvaWQgMCE9PXRoaXMuYXNwZWN0UmF0aW9fJiYiYXV0byIhPT10aGlzLmFzcGVjdFJhdGlvXz90aGlzLmFzcGVjdFJhdGlvXzp0aGlzLnZpZGVvV2lkdGgoKT4wP3RoaXMudmlkZW9XaWR0aCgpKyI6Iit0aGlzLnZpZGVvSGVpZ2h0KCk6IjE2OjkiO3ZhciBoPWYuc3BsaXQoIjoiKSxpPWhbMV0vaFswXTtkPXZvaWQgMCE9PXRoaXMud2lkdGhfP3RoaXMud2lkdGhfOnZvaWQgMCE9PXRoaXMuaGVpZ2h0Xz90aGlzLmhlaWdodF8vaTp0aGlzLnZpZGVvV2lkdGgoKXx8MzAwLGU9dm9pZCAwIT09dGhpcy5oZWlnaHRfP3RoaXMuaGVpZ2h0XzpkKmksZz0vXlteYS16QS1aXS8udGVzdCh0aGlzLmlkKCkpPyJkaW1lbnNpb25zLSIrdGhpcy5pZCgpOnRoaXMuaWQoKSsiLWRpbWVuc2lvbnMiLHRoaXMuYWRkQ2xhc3MoZyksRi5zZXRUZXh0Q29udGVudCh0aGlzLnN0eWxlRWxfLCJcbiAgICAgIC4iK2crIiB7XG4gICAgICAgIHdpZHRoOiAiK2QrInB4O1xuICAgICAgICBoZWlnaHQ6ICIrZSsicHg7XG4gICAgICB9XG5cbiAgICAgIC4iK2crIi52anMtZmx1aWQge1xuICAgICAgICBwYWRkaW5nLXRvcDogIisxMDAqaSsiJTtcbiAgICAgIH1cbiAgICAiKX0sYi5wcm90b3R5cGUubG9hZFRlY2hfPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpczt0aGlzLnRlY2hfJiZ0aGlzLnVubG9hZFRlY2hfKCksIkh0bWw1IiE9PWEmJnRoaXMudGFnJiYoVVsiZGVmYXVsdCJdLmdldFRlY2goIkh0bWw1IikuZGlzcG9zZU1lZGlhRWxlbWVudCh0aGlzLnRhZyksdGhpcy50YWcucGxheWVyPW51bGwsdGhpcy50YWc9bnVsbCksdGhpcy50ZWNoTmFtZV89YSx0aGlzLmlzUmVhZHlfPSExO3ZhciBkPSgwLE0uYXNzaWduKSh7c291cmNlOmIsbmF0aXZlQ29udHJvbHNGb3JUb3VjaDp0aGlzLm9wdGlvbnNfLm5hdGl2ZUNvbnRyb2xzRm9yVG91Y2gscGxheWVySWQ6dGhpcy5pZCgpLHRlY2hJZDp0aGlzLmlkKCkrIl8iK2ErIl9hcGkiLHZpZGVvVHJhY2tzOnRoaXMudmlkZW9UcmFja3NfLHRleHRUcmFja3M6dGhpcy50ZXh0VHJhY2tzXyxhdWRpb1RyYWNrczp0aGlzLmF1ZGlvVHJhY2tzXyxhdXRvcGxheTp0aGlzLm9wdGlvbnNfLmF1dG9wbGF5LHByZWxvYWQ6dGhpcy5vcHRpb25zXy5wcmVsb2FkLGxvb3A6dGhpcy5vcHRpb25zXy5sb29wLG11dGVkOnRoaXMub3B0aW9uc18ubXV0ZWQscG9zdGVyOnRoaXMucG9zdGVyKCksbGFuZ3VhZ2U6dGhpcy5sYW5ndWFnZSgpLHBsYXllckVsSW5nZXN0OnRoaXMucGxheWVyRWxJbmdlc3RffHwhMSwidnR0LmpzIjp0aGlzLm9wdGlvbnNfWyJ2dHQuanMiXX0sdGhpcy5vcHRpb25zX1thLnRvTG93ZXJDYXNlKCldKTt0aGlzLnRhZyYmKGQudGFnPXRoaXMudGFnKSxiJiYodGhpcy5jdXJyZW50VHlwZV89Yi50eXBlLGIuc3JjPT09dGhpcy5jYWNoZV8uc3JjJiZ0aGlzLmNhY2hlXy5jdXJyZW50VGltZT4wJiYoZC5zdGFydFRpbWU9dGhpcy5jYWNoZV8uY3VycmVudFRpbWUpLHRoaXMuY2FjaGVfLnNvdXJjZXM9bnVsbCx0aGlzLmNhY2hlXy5zb3VyY2U9Yix0aGlzLmNhY2hlXy5zcmM9Yi5zcmMpO3ZhciBlPVVbImRlZmF1bHQiXS5nZXRUZWNoKGEpO2V8fChlPWpbImRlZmF1bHQiXS5nZXRDb21wb25lbnQoYSkpLHRoaXMudGVjaF89bmV3IGUoZCksdGhpcy50ZWNoXy5yZWFkeSh0LmJpbmQodGhpcyx0aGlzLmhhbmRsZVRlY2hSZWFkeV8pLCEwKSxRWyJkZWZhdWx0Il0uanNvblRvVGV4dFRyYWNrcyh0aGlzLnRleHRUcmFja3NKc29uX3x8W10sdGhpcy50ZWNoXyksWi5mb3JFYWNoKGZ1bmN0aW9uKGEpe2Mub24oYy50ZWNoXyxhLGNbImhhbmRsZVRlY2giKygwLEJbImRlZmF1bHQiXSkoYSkrIl8iXSl9KSx0aGlzLm9uKHRoaXMudGVjaF8sImxvYWRzdGFydCIsdGhpcy5oYW5kbGVUZWNoTG9hZFN0YXJ0XyksdGhpcy5vbih0aGlzLnRlY2hfLCJ3YWl0aW5nIix0aGlzLmhhbmRsZVRlY2hXYWl0aW5nXyksdGhpcy5vbih0aGlzLnRlY2hfLCJjYW5wbGF5Iix0aGlzLmhhbmRsZVRlY2hDYW5QbGF5XyksdGhpcy5vbih0aGlzLnRlY2hfLCJjYW5wbGF5dGhyb3VnaCIsdGhpcy5oYW5kbGVUZWNoQ2FuUGxheVRocm91Z2hfKSx0aGlzLm9uKHRoaXMudGVjaF8sInBsYXlpbmciLHRoaXMuaGFuZGxlVGVjaFBsYXlpbmdfKSx0aGlzLm9uKHRoaXMudGVjaF8sImVuZGVkIix0aGlzLmhhbmRsZVRlY2hFbmRlZF8pLHRoaXMub24odGhpcy50ZWNoXywic2Vla2luZyIsdGhpcy5oYW5kbGVUZWNoU2Vla2luZ18pLHRoaXMub24odGhpcy50ZWNoXywic2Vla2VkIix0aGlzLmhhbmRsZVRlY2hTZWVrZWRfKSx0aGlzLm9uKHRoaXMudGVjaF8sInBsYXkiLHRoaXMuaGFuZGxlVGVjaFBsYXlfKSx0aGlzLm9uKHRoaXMudGVjaF8sImZpcnN0cGxheSIsdGhpcy5oYW5kbGVUZWNoRmlyc3RQbGF5XyksdGhpcy5vbih0aGlzLnRlY2hfLCJwYXVzZSIsdGhpcy5oYW5kbGVUZWNoUGF1c2VfKSx0aGlzLm9uKHRoaXMudGVjaF8sImR1cmF0aW9uY2hhbmdlIix0aGlzLmhhbmRsZVRlY2hEdXJhdGlvbkNoYW5nZV8pLHRoaXMub24odGhpcy50ZWNoXywiZnVsbHNjcmVlbmNoYW5nZSIsdGhpcy5oYW5kbGVUZWNoRnVsbHNjcmVlbkNoYW5nZV8pLHRoaXMub24odGhpcy50ZWNoXywiZXJyb3IiLHRoaXMuaGFuZGxlVGVjaEVycm9yXyksdGhpcy5vbih0aGlzLnRlY2hfLCJsb2FkZWRtZXRhZGF0YSIsdGhpcy51cGRhdGVTdHlsZUVsXyksdGhpcy5vbih0aGlzLnRlY2hfLCJwb3N0ZXJjaGFuZ2UiLHRoaXMuaGFuZGxlVGVjaFBvc3RlckNoYW5nZV8pLHRoaXMub24odGhpcy50ZWNoXywidGV4dGRhdGEiLHRoaXMuaGFuZGxlVGVjaFRleHREYXRhXyksdGhpcy51c2luZ05hdGl2ZUNvbnRyb2xzKHRoaXMudGVjaEdldF8oImNvbnRyb2xzIikpLHRoaXMuY29udHJvbHMoKSYmIXRoaXMudXNpbmdOYXRpdmVDb250cm9scygpJiZ0aGlzLmFkZFRlY2hDb250cm9sc0xpc3RlbmVyc18oKSx0aGlzLnRlY2hfLmVsKCkucGFyZW50Tm9kZT09PXRoaXMuZWwoKXx8Ikh0bWw1Ij09PWEmJnRoaXMudGFnfHxyLmluc2VydEVsRmlyc3QodGhpcy50ZWNoXy5lbCgpLHRoaXMuZWwoKSksdGhpcy50YWcmJih0aGlzLnRhZy5wbGF5ZXI9bnVsbCx0aGlzLnRhZz1udWxsKX0sYi5wcm90b3R5cGUudW5sb2FkVGVjaF89ZnVuY3Rpb24oKXt0aGlzLnZpZGVvVHJhY2tzXz10aGlzLnZpZGVvVHJhY2tzKCksdGhpcy50ZXh0VHJhY2tzXz10aGlzLnRleHRUcmFja3MoKSx0aGlzLmF1ZGlvVHJhY2tzXz10aGlzLmF1ZGlvVHJhY2tzKCksdGhpcy50ZXh0VHJhY2tzSnNvbl89UVsiZGVmYXVsdCJdLnRleHRUcmFja3NUb0pzb24odGhpcy50ZWNoXyksdGhpcy5pc1JlYWR5Xz0hMSx0aGlzLnRlY2hfLmRpc3Bvc2UoKSx0aGlzLnRlY2hfPSExfSxiLnByb3RvdHlwZS50ZWNoPWZ1bmN0aW9uKGEpe2lmKGEmJmEuSVdpbGxOb3RVc2VUaGlzSW5QbHVnaW5zKXJldHVybiB0aGlzLnRlY2hfO3ZhciBiPSJcbiAgICAgIFBsZWFzZSBtYWtlIHN1cmUgdGhhdCB5b3UgYXJlIG5vdCB1c2luZyB0aGlzIGluc2lkZSBvZiBhIHBsdWdpbi5cbiAgICAgIFRvIGRpc2FibGUgdGhpcyBhbGVydCBhbmQgZXJyb3IsIHBsZWFzZSBwYXNzIGluIGFuIG9iamVjdCB3aXRoXG4gICAgICBgSVdpbGxOb3RVc2VUaGlzSW5QbHVnaW5zYCB0byB0aGUgYHRlY2hgIG1ldGhvZC4gU2VlXG4gICAgICBodHRwczovL2dpdGh1Yi5jb20vdmlkZW9qcy92aWRlby5qcy9pc3N1ZXMvMjYxNyBmb3IgbW9yZSBpbmZvLlxuICAgICI7dGhyb3cgblsiZGVmYXVsdCJdLmFsZXJ0KGIpLG5ldyBFcnJvcihiKX0sYi5wcm90b3R5cGUuYWRkVGVjaENvbnRyb2xzTGlzdGVuZXJzXz1mdW5jdGlvbigpe3RoaXMucmVtb3ZlVGVjaENvbnRyb2xzTGlzdGVuZXJzXygpLHRoaXMub24odGhpcy50ZWNoXywibW91c2Vkb3duIix0aGlzLmhhbmRsZVRlY2hDbGlja18pLHRoaXMub24odGhpcy50ZWNoXywidG91Y2hzdGFydCIsdGhpcy5oYW5kbGVUZWNoVG91Y2hTdGFydF8pLHRoaXMub24odGhpcy50ZWNoXywidG91Y2htb3ZlIix0aGlzLmhhbmRsZVRlY2hUb3VjaE1vdmVfKSx0aGlzLm9uKHRoaXMudGVjaF8sInRvdWNoZW5kIix0aGlzLmhhbmRsZVRlY2hUb3VjaEVuZF8pLHRoaXMub24odGhpcy50ZWNoXywidGFwIix0aGlzLmhhbmRsZVRlY2hUYXBfKX0sYi5wcm90b3R5cGUucmVtb3ZlVGVjaENvbnRyb2xzTGlzdGVuZXJzXz1mdW5jdGlvbigpe3RoaXMub2ZmKHRoaXMudGVjaF8sInRhcCIsdGhpcy5oYW5kbGVUZWNoVGFwXyksdGhpcy5vZmYodGhpcy50ZWNoXywidG91Y2hzdGFydCIsdGhpcy5oYW5kbGVUZWNoVG91Y2hTdGFydF8pLHRoaXMub2ZmKHRoaXMudGVjaF8sInRvdWNobW92ZSIsdGhpcy5oYW5kbGVUZWNoVG91Y2hNb3ZlXyksdGhpcy5vZmYodGhpcy50ZWNoXywidG91Y2hlbmQiLHRoaXMuaGFuZGxlVGVjaFRvdWNoRW5kXyksdGhpcy5vZmYodGhpcy50ZWNoXywibW91c2Vkb3duIix0aGlzLmhhbmRsZVRlY2hDbGlja18pfSxiLnByb3RvdHlwZS5oYW5kbGVUZWNoUmVhZHlfPWZ1bmN0aW9uKCl7aWYodGhpcy50cmlnZ2VyUmVhZHkoKSx0aGlzLmNhY2hlXy52b2x1bWUmJnRoaXMudGVjaENhbGxfKCJzZXRWb2x1bWUiLHRoaXMuY2FjaGVfLnZvbHVtZSksdGhpcy5oYW5kbGVUZWNoUG9zdGVyQ2hhbmdlXygpLHRoaXMuaGFuZGxlVGVjaER1cmF0aW9uQ2hhbmdlXygpLCh0aGlzLnNyYygpfHx0aGlzLmN1cnJlbnRTcmMoKSkmJnRoaXMudGFnJiZ0aGlzLm9wdGlvbnNfLmF1dG9wbGF5JiZ0aGlzLnBhdXNlZCgpKXt0cnl7ZGVsZXRlIHRoaXMudGFnLnBvc3Rlcn1jYXRjaChhKXsoMCx6WyJkZWZhdWx0Il0pKCJkZWxldGluZyB0YWcucG9zdGVyIHRocm93cyBpbiBzb21lIGJyb3dzZXJzIixhKX10aGlzLnBsYXkoKX19LGIucHJvdG90eXBlLmhhbmRsZVRlY2hMb2FkU3RhcnRfPWZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVDbGFzcygidmpzLWVuZGVkIiksdGhpcy5yZW1vdmVDbGFzcygidmpzLXNlZWtpbmciKSx0aGlzLmVycm9yKG51bGwpLHRoaXMucGF1c2VkKCk/KHRoaXMuaGFzU3RhcnRlZCghMSksdGhpcy50cmlnZ2VyKCJsb2Fkc3RhcnQiKSk6KHRoaXMudHJpZ2dlcigibG9hZHN0YXJ0IiksdGhpcy50cmlnZ2VyKCJmaXJzdHBsYXkiKSl9LGIucHJvdG90eXBlLmhhc1N0YXJ0ZWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHZvaWQgMCE9PWE/KHRoaXMuaGFzU3RhcnRlZF8hPT1hJiYodGhpcy5oYXNTdGFydGVkXz1hLGE/KHRoaXMuYWRkQ2xhc3MoInZqcy1oYXMtc3RhcnRlZCIpLHRoaXMudHJpZ2dlcigiZmlyc3RwbGF5IikpOnRoaXMucmVtb3ZlQ2xhc3MoInZqcy1oYXMtc3RhcnRlZCIpKSx0aGlzKTohIXRoaXMuaGFzU3RhcnRlZF99LGIucHJvdG90eXBlLmhhbmRsZVRlY2hQbGF5Xz1mdW5jdGlvbigpe3RoaXMucmVtb3ZlQ2xhc3MoInZqcy1lbmRlZCIpLHRoaXMucmVtb3ZlQ2xhc3MoInZqcy1wYXVzZWQiKSx0aGlzLmFkZENsYXNzKCJ2anMtcGxheWluZyIpLHRoaXMuaGFzU3RhcnRlZCghMCksdGhpcy50cmlnZ2VyKCJwbGF5Iil9LGIucHJvdG90eXBlLmhhbmRsZVRlY2hXYWl0aW5nXz1mdW5jdGlvbigpe3ZhciBhPXRoaXM7dGhpcy5hZGRDbGFzcygidmpzLXdhaXRpbmciKSx0aGlzLnRyaWdnZXIoIndhaXRpbmciKSx0aGlzLm9uZSgidGltZXVwZGF0ZSIsZnVuY3Rpb24oKXtyZXR1cm4gYS5yZW1vdmVDbGFzcygidmpzLXdhaXRpbmciKX0pfSxiLnByb3RvdHlwZS5oYW5kbGVUZWNoQ2FuUGxheV89ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUNsYXNzKCJ2anMtd2FpdGluZyIpLHRoaXMudHJpZ2dlcigiY2FucGxheSIpfSxiLnByb3RvdHlwZS5oYW5kbGVUZWNoQ2FuUGxheVRocm91Z2hfPWZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVDbGFzcygidmpzLXdhaXRpbmciKSx0aGlzLnRyaWdnZXIoImNhbnBsYXl0aHJvdWdoIil9LGIucHJvdG90eXBlLmhhbmRsZVRlY2hQbGF5aW5nXz1mdW5jdGlvbigpe3RoaXMucmVtb3ZlQ2xhc3MoInZqcy13YWl0aW5nIiksdGhpcy50cmlnZ2VyKCJwbGF5aW5nIil9LGIucHJvdG90eXBlLmhhbmRsZVRlY2hTZWVraW5nXz1mdW5jdGlvbigpe3RoaXMuYWRkQ2xhc3MoInZqcy1zZWVraW5nIiksdGhpcy50cmlnZ2VyKCJzZWVraW5nIil9LGIucHJvdG90eXBlLmhhbmRsZVRlY2hTZWVrZWRfPWZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVDbGFzcygidmpzLXNlZWtpbmciKSx0aGlzLnRyaWdnZXIoInNlZWtlZCIpfSxiLnByb3RvdHlwZS5oYW5kbGVUZWNoRmlyc3RQbGF5Xz1mdW5jdGlvbigpe3RoaXMub3B0aW9uc18uc3RhcnR0aW1lJiYoelsiZGVmYXVsdCJdLndhcm4oIlBhc3NpbmcgdGhlIGBzdGFydHRpbWVgIG9wdGlvbiB0byB0aGUgcGxheWVyIHdpbGwgYmUgZGVwcmVjYXRlZCBpbiA2LjAiKSx0aGlzLmN1cnJlbnRUaW1lKHRoaXMub3B0aW9uc18uc3RhcnR0aW1lKSksdGhpcy5hZGRDbGFzcygidmpzLWhhcy1zdGFydGVkIiksdGhpcy50cmlnZ2VyKCJmaXJzdHBsYXkiKX0sYi5wcm90b3R5cGUuaGFuZGxlVGVjaFBhdXNlXz1mdW5jdGlvbigpe3RoaXMucmVtb3ZlQ2xhc3MoInZqcy1wbGF5aW5nIiksdGhpcy5hZGRDbGFzcygidmpzLXBhdXNlZCIpLHRoaXMudHJpZ2dlcigicGF1c2UiKX0sYi5wcm90b3R5cGUuaGFuZGxlVGVjaEVuZGVkXz1mdW5jdGlvbigpe3RoaXMuYWRkQ2xhc3MoInZqcy1lbmRlZCIpLHRoaXMub3B0aW9uc18ubG9vcD8odGhpcy5jdXJyZW50VGltZSgwKSx0aGlzLnBsYXkoKSk6dGhpcy5wYXVzZWQoKXx8dGhpcy5wYXVzZSgpLHRoaXMudHJpZ2dlcigiZW5kZWQiKX0sYi5wcm90b3R5cGUuaGFuZGxlVGVjaER1cmF0aW9uQ2hhbmdlXz1mdW5jdGlvbigpe3RoaXMuZHVyYXRpb24odGhpcy50ZWNoR2V0XygiZHVyYXRpb24iKSl9LGIucHJvdG90eXBlLmhhbmRsZVRlY2hDbGlja189ZnVuY3Rpb24oYSl7MD09PWEuYnV0dG9uJiZ0aGlzLmNvbnRyb2xzKCkmJih0aGlzLnBhdXNlZCgpP3RoaXMucGxheSgpOnRoaXMucGF1c2UoKSl9LGIucHJvdG90eXBlLmhhbmRsZVRlY2hUYXBfPWZ1bmN0aW9uKCl7dGhpcy51c2VyQWN0aXZlKCF0aGlzLnVzZXJBY3RpdmUoKSl9LGIucHJvdG90eXBlLmhhbmRsZVRlY2hUb3VjaFN0YXJ0Xz1mdW5jdGlvbigpe3RoaXMudXNlcldhc0FjdGl2ZT10aGlzLnVzZXJBY3RpdmUoKX0sYi5wcm90b3R5cGUuaGFuZGxlVGVjaFRvdWNoTW92ZV89ZnVuY3Rpb24oKXt0aGlzLnVzZXJXYXNBY3RpdmUmJnRoaXMucmVwb3J0VXNlckFjdGl2aXR5KCl9LGIucHJvdG90eXBlLmhhbmRsZVRlY2hUb3VjaEVuZF89ZnVuY3Rpb24oYSl7YS5wcmV2ZW50RGVmYXVsdCgpfSxiLnByb3RvdHlwZS5oYW5kbGVGdWxsc2NyZWVuQ2hhbmdlXz1mdW5jdGlvbigpe3RoaXMuaXNGdWxsc2NyZWVuKCk/dGhpcy5hZGRDbGFzcygidmpzLWZ1bGxzY3JlZW4iKTp0aGlzLnJlbW92ZUNsYXNzKCJ2anMtZnVsbHNjcmVlbiIpfSxiLnByb3RvdHlwZS5oYW5kbGVTdGFnZUNsaWNrXz1mdW5jdGlvbigpe3RoaXMucmVwb3J0VXNlckFjdGl2aXR5KCl9LGIucHJvdG90eXBlLmhhbmRsZVRlY2hGdWxsc2NyZWVuQ2hhbmdlXz1mdW5jdGlvbihhLGIpe2ImJnRoaXMuaXNGdWxsc2NyZWVuKGIuaXNGdWxsc2NyZWVuKSx0aGlzLnRyaWdnZXIoImZ1bGxzY3JlZW5jaGFuZ2UiKX0sYi5wcm90b3R5cGUuaGFuZGxlVGVjaEVycm9yXz1mdW5jdGlvbigpe3ZhciBhPXRoaXMudGVjaF8uZXJyb3IoKTt0aGlzLmVycm9yKGEpfSxiLnByb3RvdHlwZS5oYW5kbGVUZWNoVGV4dERhdGFfPWZ1bmN0aW9uKCl7dmFyIGE9bnVsbDthcmd1bWVudHMubGVuZ3RoPjEmJihhPWFyZ3VtZW50c1sxXSksdGhpcy50cmlnZ2VyKCJ0ZXh0ZGF0YSIsYSl9LGIucHJvdG90eXBlLmdldENhY2hlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2FjaGVffSxiLnByb3RvdHlwZS50ZWNoQ2FsbF89ZnVuY3Rpb24oYSxiKXtpZih0aGlzLnRlY2hfJiYhdGhpcy50ZWNoXy5pc1JlYWR5Xyl0aGlzLnRlY2hfLnJlYWR5KGZ1bmN0aW9uKCl7dGhpc1thXShiKX0sITApO2Vsc2UgdHJ5e3RoaXMudGVjaF8mJnRoaXMudGVjaF9bYV0oYil9Y2F0Y2goYyl7dGhyb3coMCx6WyJkZWZhdWx0Il0pKGMpLGN9fSxiLnByb3RvdHlwZS50ZWNoR2V0Xz1mdW5jdGlvbihhKXtpZih0aGlzLnRlY2hfJiZ0aGlzLnRlY2hfLmlzUmVhZHlfKXRyeXtyZXR1cm4gdGhpcy50ZWNoX1thXSgpfWNhdGNoKGIpe3Rocm93IHZvaWQgMD09PXRoaXMudGVjaF9bYV0/KDAselsiZGVmYXVsdCJdKSgiVmlkZW8uanM6ICIrYSsiIG1ldGhvZCBub3QgZGVmaW5lZCBmb3IgIit0aGlzLnRlY2hOYW1lXysiIHBsYXliYWNrIHRlY2hub2xvZ3kuIixiKToiVHlwZUVycm9yIj09PWIubmFtZT8oKDAselsiZGVmYXVsdCJdKSgiVmlkZW8uanM6ICIrYSsiIHVuYXZhaWxhYmxlIG9uICIrdGhpcy50ZWNoTmFtZV8rIiBwbGF5YmFjayB0ZWNobm9sb2d5IGVsZW1lbnQuIixiKSx0aGlzLnRlY2hfLmlzUmVhZHlfPSExKTooMCx6WyJkZWZhdWx0Il0pKGIpLGJ9fSxiLnByb3RvdHlwZS5wbGF5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3JjKCl8fHRoaXMuY3VycmVudFNyYygpP3RoaXMudGVjaENhbGxfKCJwbGF5Iik6dGhpcy50ZWNoXy5vbmUoImxvYWRzdGFydCIsZnVuY3Rpb24oKXt0aGlzLnBsYXkoKX0pLHRoaXN9LGIucHJvdG90eXBlLnBhdXNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGVjaENhbGxfKCJwYXVzZSIpLHRoaXN9LGIucHJvdG90eXBlLnBhdXNlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRlY2hHZXRfKCJwYXVzZWQiKSE9PSExfSxiLnByb3RvdHlwZS5zY3J1YmJpbmc9ZnVuY3Rpb24oYSl7cmV0dXJuIHZvaWQgMCE9PWE/KHRoaXMuc2NydWJiaW5nXz0hIWEsYT90aGlzLmFkZENsYXNzKCJ2anMtc2NydWJiaW5nIik6dGhpcy5yZW1vdmVDbGFzcygidmpzLXNjcnViYmluZyIpLHRoaXMpOnRoaXMuc2NydWJiaW5nX30sYi5wcm90b3R5cGUuY3VycmVudFRpbWU9ZnVuY3Rpb24oYSl7cmV0dXJuIHZvaWQgMCE9PWE/KHRoaXMudGVjaENhbGxfKCJzZXRDdXJyZW50VGltZSIsYSksdGhpcyk6KHRoaXMuY2FjaGVfLmN1cnJlbnRUaW1lPXRoaXMudGVjaEdldF8oImN1cnJlbnRUaW1lIil8fDAsdGhpcy5jYWNoZV8uY3VycmVudFRpbWUpfSxiLnByb3RvdHlwZS5kdXJhdGlvbj1mdW5jdGlvbihhKXtyZXR1cm4gdm9pZCAwPT09YT90aGlzLmNhY2hlXy5kdXJhdGlvbnx8MDooYT1wYXJzZUZsb2F0KGEpfHwwLGE8MCYmKGE9MS8wKSxhIT09dGhpcy5jYWNoZV8uZHVyYXRpb24mJih0aGlzLmNhY2hlXy5kdXJhdGlvbj1hLGE9PT0xLzA/dGhpcy5hZGRDbGFzcygidmpzLWxpdmUiKTp0aGlzLnJlbW92ZUNsYXNzKCJ2anMtbGl2ZSIpLHRoaXMudHJpZ2dlcigiZHVyYXRpb25jaGFuZ2UiKSksdGhpcyl9LGIucHJvdG90eXBlLnJlbWFpbmluZ1RpbWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kdXJhdGlvbigpLXRoaXMuY3VycmVudFRpbWUoKX0sYi5wcm90b3R5cGUuYnVmZmVyZWQ9ZnVuY3Rpb24gYygpe3ZhciBjPXRoaXMudGVjaEdldF8oImJ1ZmZlcmVkIik7cmV0dXJuIGMmJmMubGVuZ3RofHwoYz0oMCxDLmNyZWF0ZVRpbWVSYW5nZSkoMCwwKSksY30sYi5wcm90b3R5cGUuYnVmZmVyZWRQZXJjZW50PWZ1bmN0aW9uKCl7cmV0dXJuKDAsRC5idWZmZXJlZFBlcmNlbnQpKHRoaXMuYnVmZmVyZWQoKSx0aGlzLmR1cmF0aW9uKCkpfSxiLnByb3RvdHlwZS5idWZmZXJlZEVuZD1mdW5jdGlvbigpe3ZhciBhPXRoaXMuYnVmZmVyZWQoKSxiPXRoaXMuZHVyYXRpb24oKSxjPWEuZW5kKGEubGVuZ3RoLTEpO3JldHVybiBjPmImJihjPWIpLGN9LGIucHJvdG90eXBlLnZvbHVtZT1mdW5jdGlvbihhKXt2YXIgYj12b2lkIDA7cmV0dXJuIHZvaWQgMCE9PWE/KGI9TWF0aC5tYXgoMCxNYXRoLm1pbigxLHBhcnNlRmxvYXQoYSkpKSx0aGlzLmNhY2hlXy52b2x1bWU9Yix0aGlzLnRlY2hDYWxsXygic2V0Vm9sdW1lIixiKSx0aGlzKTooYj1wYXJzZUZsb2F0KHRoaXMudGVjaEdldF8oInZvbHVtZSIpKSxpc05hTihiKT8xOmIpfSxiLnByb3RvdHlwZS5tdXRlZD1mdW5jdGlvbihhKXtyZXR1cm4gdm9pZCAwIT09YT8odGhpcy50ZWNoQ2FsbF8oInNldE11dGVkIixhKSx0aGlzKTp0aGlzLnRlY2hHZXRfKCJtdXRlZCIpfHwhMX0sYi5wcm90b3R5cGUuc3VwcG9ydHNGdWxsU2NyZWVuPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGVjaEdldF8oInN1cHBvcnRzRnVsbFNjcmVlbiIpfHwhMX0sYi5wcm90b3R5cGUuaXNGdWxsc2NyZWVuPWZ1bmN0aW9uKGEpe3JldHVybiB2b2lkIDAhPT1hPyh0aGlzLmlzRnVsbHNjcmVlbl89ISFhLHRoaXMpOiEhdGhpcy5pc0Z1bGxzY3JlZW5ffSxiLnByb3RvdHlwZS5yZXF1ZXN0RnVsbHNjcmVlbj1mdW5jdGlvbigpe3ZhciBhPUhbImRlZmF1bHQiXTtyZXR1cm4gdGhpcy5pc0Z1bGxzY3JlZW4oITApLGEucmVxdWVzdEZ1bGxzY3JlZW4/KHAub24obFsiZGVmYXVsdCJdLGEuZnVsbHNjcmVlbmNoYW5nZSx0LmJpbmQodGhpcyxmdW5jdGlvbiBiKGMpe3RoaXMuaXNGdWxsc2NyZWVuKGxbImRlZmF1bHQiXVthLmZ1bGxzY3JlZW5FbGVtZW50XSksdGhpcy5pc0Z1bGxzY3JlZW4oKT09PSExJiZwLm9mZihsWyJkZWZhdWx0Il0sYS5mdWxsc2NyZWVuY2hhbmdlLGIpLHRoaXMudHJpZ2dlcigiZnVsbHNjcmVlbmNoYW5nZSIpfSkpLHRoaXMuZWxfW2EucmVxdWVzdEZ1bGxzY3JlZW5dKCkpOnRoaXMudGVjaF8uc3VwcG9ydHNGdWxsU2NyZWVuKCk/dGhpcy50ZWNoQ2FsbF8oImVudGVyRnVsbFNjcmVlbiIpOih0aGlzLmVudGVyRnVsbFdpbmRvdygpLHRoaXMudHJpZ2dlcigiZnVsbHNjcmVlbmNoYW5nZSIpKSx0aGlzfSxiLnByb3RvdHlwZS5leGl0RnVsbHNjcmVlbj1mdW5jdGlvbigpe3ZhciBhPUhbImRlZmF1bHQiXTtyZXR1cm4gdGhpcy5pc0Z1bGxzY3JlZW4oITEpLGEucmVxdWVzdEZ1bGxzY3JlZW4/bFsiZGVmYXVsdCJdW2EuZXhpdEZ1bGxzY3JlZW5dKCk6dGhpcy50ZWNoXy5zdXBwb3J0c0Z1bGxTY3JlZW4oKT90aGlzLnRlY2hDYWxsXygiZXhpdEZ1bGxTY3JlZW4iKToodGhpcy5leGl0RnVsbFdpbmRvdygpLHRoaXMudHJpZ2dlcigiZnVsbHNjcmVlbmNoYW5nZSIpKSx0aGlzfSxiLnByb3RvdHlwZS5lbnRlckZ1bGxXaW5kb3c9ZnVuY3Rpb24oKXt0aGlzLmlzRnVsbFdpbmRvdz0hMCx0aGlzLmRvY09yaWdPdmVyZmxvdz1sWyJkZWZhdWx0Il0uZG9jdW1lbnRFbGVtZW50LnN0eWxlLm92ZXJmbG93LHAub24obFsiZGVmYXVsdCJdLCJrZXlkb3duIix0LmJpbmQodGhpcyx0aGlzLmZ1bGxXaW5kb3dPbkVzY0tleSkpLGxbImRlZmF1bHQiXS5kb2N1bWVudEVsZW1lbnQuc3R5bGUub3ZlcmZsb3c9ImhpZGRlbiIsci5hZGRFbENsYXNzKGxbImRlZmF1bHQiXS5ib2R5LCJ2anMtZnVsbC13aW5kb3ciKSx0aGlzLnRyaWdnZXIoImVudGVyRnVsbFdpbmRvdyIpfSxiLnByb3RvdHlwZS5mdWxsV2luZG93T25Fc2NLZXk9ZnVuY3Rpb24oYSl7Mjc9PT1hLmtleUNvZGUmJih0aGlzLmlzRnVsbHNjcmVlbigpPT09ITA/dGhpcy5leGl0RnVsbHNjcmVlbigpOnRoaXMuZXhpdEZ1bGxXaW5kb3coKSl9LGIucHJvdG90eXBlLmV4aXRGdWxsV2luZG93PWZ1bmN0aW9uKCl7dGhpcy5pc0Z1bGxXaW5kb3c9ITEscC5vZmYobFsiZGVmYXVsdCJdLCJrZXlkb3duIix0aGlzLmZ1bGxXaW5kb3dPbkVzY0tleSksbFsiZGVmYXVsdCJdLmRvY3VtZW50RWxlbWVudC5zdHlsZS5vdmVyZmxvdz10aGlzLmRvY09yaWdPdmVyZmxvdyxyLnJlbW92ZUVsQ2xhc3MobFsiZGVmYXVsdCJdLmJvZHksInZqcy1mdWxsLXdpbmRvdyIpLHRoaXMudHJpZ2dlcigiZXhpdEZ1bGxXaW5kb3ciKX0sYi5wcm90b3R5cGUuY2FuUGxheVR5cGU9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXZvaWQgMCxjPTAsZD10aGlzLm9wdGlvbnNfLnRlY2hPcmRlcjtjPGQubGVuZ3RoO2MrKyl7dmFyIGU9KDAsQlsiZGVmYXVsdCJdKShkW2NdKSxmPVVbImRlZmF1bHQiXS5nZXRUZWNoKGUpO2lmKGZ8fChmPWpbImRlZmF1bHQiXS5nZXRDb21wb25lbnQoZSkpLGYpe2lmKGYuaXNTdXBwb3J0ZWQoKSYmKGI9Zi5jYW5QbGF5VHlwZShhKSkpcmV0dXJuIGJ9ZWxzZSB6WyJkZWZhdWx0Il0uZXJyb3IoJ1RoZSAiJytlKyciIHRlY2ggaXMgdW5kZWZpbmVkLiBTa2lwcGVkIGJyb3dzZXIgc3VwcG9ydCBjaGVjayBmb3IgdGhhdCB0ZWNoLicpfXJldHVybiIifSxiLnByb3RvdHlwZS5zZWxlY3RTb3VyY2U9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPXRoaXMub3B0aW9uc18udGVjaE9yZGVyLm1hcChCWyJkZWZhdWx0Il0pLm1hcChmdW5jdGlvbihhKXtyZXR1cm5bYSxVWyJkZWZhdWx0Il0uZ2V0VGVjaChhKXx8alsiZGVmYXVsdCJdLmdldENvbXBvbmVudChhKV19KS5maWx0ZXIoZnVuY3Rpb24oYSl7dmFyIGI9YVswXSxjPWFbMV07cmV0dXJuIGM/Yy5pc1N1cHBvcnRlZCgpOih6WyJkZWZhdWx0Il0uZXJyb3IoJ1RoZSAiJytiKyciIHRlY2ggaXMgdW5kZWZpbmVkLiBTa2lwcGVkIGJyb3dzZXIgc3VwcG9ydCBjaGVjayBmb3IgdGhhdCB0ZWNoLicpLCExKX0pLGQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXZvaWQgMDtyZXR1cm4gYS5zb21lKGZ1bmN0aW9uKGEpe3JldHVybiBiLnNvbWUoZnVuY3Rpb24oYil7aWYoZD1jKGEsYikpcmV0dXJuITB9KX0pLGR9LGU9dm9pZCAwLGY9ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEoYyxiKX19LGc9ZnVuY3Rpb24oYSxjKXt2YXIgZD1hWzBdLGU9YVsxXTtpZihlLmNhblBsYXlTb3VyY2UoYyxiLm9wdGlvbnNfW2QudG9Mb3dlckNhc2UoKV0pKXJldHVybntzb3VyY2U6Yyx0ZWNoOmR9fTtyZXR1cm4gZT10aGlzLm9wdGlvbnNfLnNvdXJjZU9yZGVyP2QoYSxjLGYoZykpOmQoYyxhLGcpLGV8fCExfSxiLnByb3RvdHlwZS5zcmM9ZnVuY3Rpb24oYSl7aWYodm9pZCAwPT09YSlyZXR1cm4gdGhpcy50ZWNoR2V0Xygic3JjIik7dmFyIGI9VVsiZGVmYXVsdCJdLmdldFRlY2godGhpcy50ZWNoTmFtZV8pO3JldHVybiBifHwoYj1qWyJkZWZhdWx0Il0uZ2V0Q29tcG9uZW50KHRoaXMudGVjaE5hbWVfKSksQXJyYXkuaXNBcnJheShhKT90aGlzLnNvdXJjZUxpc3RfKGEpOiJzdHJpbmciPT10eXBlb2YgYT90aGlzLnNyYyh7c3JjOmF9KTphIGluc3RhbmNlb2YgT2JqZWN0JiYoYS50eXBlJiYhYi5jYW5QbGF5U291cmNlKGEsdGhpcy5vcHRpb25zX1t0aGlzLnRlY2hOYW1lXy50b0xvd2VyQ2FzZSgpXSk/dGhpcy5zb3VyY2VMaXN0XyhbYV0pOih0aGlzLmNhY2hlXy5zb3VyY2VzPW51bGwsdGhpcy5jYWNoZV8uc291cmNlPWEsdGhpcy5jYWNoZV8uc3JjPWEuc3JjLHRoaXMuY3VycmVudFR5cGVfPWEudHlwZXx8IiIsdGhpcy5yZWFkeShmdW5jdGlvbigpe2IucHJvdG90eXBlLmhhc093blByb3BlcnR5KCJzZXRTb3VyY2UiKT90aGlzLnRlY2hDYWxsXygic2V0U291cmNlIixhKTp0aGlzLnRlY2hDYWxsXygic3JjIixhLnNyYyksImF1dG8iPT09dGhpcy5vcHRpb25zXy5wcmVsb2FkJiZ0aGlzLmxvYWQoKSx0aGlzLm9wdGlvbnNfLmF1dG9wbGF5JiZ0aGlzLnBsYXkoKX0sITApKSksdGhpc30sYi5wcm90b3R5cGUuc291cmNlTGlzdF89ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5zZWxlY3RTb3VyY2UoYSk7Yj8oYi50ZWNoPT09dGhpcy50ZWNoTmFtZV8/dGhpcy5zcmMoYi5zb3VyY2UpOnRoaXMubG9hZFRlY2hfKGIudGVjaCxiLnNvdXJjZSksdGhpcy5jYWNoZV8uc291cmNlcz1hKToodGhpcy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhpcy5lcnJvcih7Y29kZTo0LG1lc3NhZ2U6dGhpcy5sb2NhbGl6ZSh0aGlzLm9wdGlvbnNfLm5vdFN1cHBvcnRlZE1lc3NhZ2UpfSl9LDApLHRoaXMudHJpZ2dlclJlYWR5KCkpfSxiLnByb3RvdHlwZS5sb2FkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGVjaENhbGxfKCJsb2FkIiksdGhpc30sYi5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sb2FkVGVjaF8oKDAsQlsiZGVmYXVsdCJdKSh0aGlzLm9wdGlvbnNfLnRlY2hPcmRlclswXSksbnVsbCksdGhpcy50ZWNoQ2FsbF8oInJlc2V0IiksdGhpc30sYi5wcm90b3R5cGUuY3VycmVudFNvdXJjZXM9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmN1cnJlbnRTb3VyY2UoKSxiPVtdO3JldHVybiAwIT09T2JqZWN0LmtleXMoYSkubGVuZ3RoJiZiLnB1c2goYSksdGhpcy5jYWNoZV8uc291cmNlc3x8Yn0sYi5wcm90b3R5cGUuY3VycmVudFNvdXJjZT1mdW5jdGlvbigpe3ZhciBhPXt9LGI9dGhpcy5jdXJyZW50U3JjKCk7cmV0dXJuIGImJihhLnNyYz1iKSx0aGlzLmNhY2hlXy5zb3VyY2V8fGF9LGIucHJvdG90eXBlLmN1cnJlbnRTcmM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZWNoR2V0XygiY3VycmVudFNyYyIpfHx0aGlzLmNhY2hlXy5zcmN8fCIifSxiLnByb3RvdHlwZS5jdXJyZW50VHlwZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmN1cnJlbnRUeXBlX3x8IiJ9LGIucHJvdG90eXBlLnByZWxvYWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHZvaWQgMCE9PWE/KHRoaXMudGVjaENhbGxfKCJzZXRQcmVsb2FkIixhKSx0aGlzLm9wdGlvbnNfLnByZWxvYWQ9YSx0aGlzKTp0aGlzLnRlY2hHZXRfKCJwcmVsb2FkIil9LGIucHJvdG90eXBlLmF1dG9wbGF5PWZ1bmN0aW9uKGEpe3JldHVybiB2b2lkIDAhPT1hPyh0aGlzLnRlY2hDYWxsXygic2V0QXV0b3BsYXkiLGEpLHRoaXMub3B0aW9uc18uYXV0b3BsYXk9YSx0aGlzKTp0aGlzLnRlY2hHZXRfKCJhdXRvcGxheSIsYSl9LGIucHJvdG90eXBlLmxvb3A9ZnVuY3Rpb24oYSl7cmV0dXJuIHZvaWQgMCE9PWE/KHRoaXMudGVjaENhbGxfKCJzZXRMb29wIixhKSx0aGlzLm9wdGlvbnNfLmxvb3A9YSx0aGlzKTp0aGlzLnRlY2hHZXRfKCJsb29wIil9LGIucHJvdG90eXBlLnBvc3Rlcj1mdW5jdGlvbihhKXtyZXR1cm4gdm9pZCAwPT09YT90aGlzLnBvc3Rlcl86KGF8fChhPSIiKSx0aGlzLnBvc3Rlcl89YSx0aGlzLnRlY2hDYWxsXygic2V0UG9zdGVyIixhKSx0aGlzLnRyaWdnZXIoInBvc3RlcmNoYW5nZSIpLHRoaXMpfSxiLnByb3RvdHlwZS5oYW5kbGVUZWNoUG9zdGVyQ2hhbmdlXz1mdW5jdGlvbigpeyF0aGlzLnBvc3Rlcl8mJnRoaXMudGVjaF8mJnRoaXMudGVjaF8ucG9zdGVyJiYodGhpcy5wb3N0ZXJfPXRoaXMudGVjaF8ucG9zdGVyKCl8fCIiLHRoaXMudHJpZ2dlcigicG9zdGVyY2hhbmdlIikpfSxiLnByb3RvdHlwZS5jb250cm9scz1mdW5jdGlvbihhKXtyZXR1cm4gdm9pZCAwIT09YT8oYT0hIWEsdGhpcy5jb250cm9sc18hPT1hJiYodGhpcy5jb250cm9sc189YSx0aGlzLnVzaW5nTmF0aXZlQ29udHJvbHMoKSYmdGhpcy50ZWNoQ2FsbF8oInNldENvbnRyb2xzIixhKSxhPyh0aGlzLnJlbW92ZUNsYXNzKCJ2anMtY29udHJvbHMtZGlzYWJsZWQiKSx0aGlzLmFkZENsYXNzKCJ2anMtY29udHJvbHMtZW5hYmxlZCIpLHRoaXMudHJpZ2dlcigiY29udHJvbHNlbmFibGVkIiksdGhpcy51c2luZ05hdGl2ZUNvbnRyb2xzKCl8fHRoaXMuYWRkVGVjaENvbnRyb2xzTGlzdGVuZXJzXygpKToodGhpcy5yZW1vdmVDbGFzcygidmpzLWNvbnRyb2xzLWVuYWJsZWQiKSx0aGlzLmFkZENsYXNzKCJ2anMtY29udHJvbHMtZGlzYWJsZWQiKSx0aGlzLnRyaWdnZXIoImNvbnRyb2xzZGlzYWJsZWQiKSx0aGlzLnVzaW5nTmF0aXZlQ29udHJvbHMoKXx8dGhpcy5yZW1vdmVUZWNoQ29udHJvbHNMaXN0ZW5lcnNfKCkpKSx0aGlzKTohIXRoaXMuY29udHJvbHNffSxiLnByb3RvdHlwZS51c2luZ05hdGl2ZUNvbnRyb2xzPWZ1bmN0aW9uKGEpe3JldHVybiB2b2lkIDAhPT1hPyhhPSEhYSx0aGlzLnVzaW5nTmF0aXZlQ29udHJvbHNfIT09YSYmKHRoaXMudXNpbmdOYXRpdmVDb250cm9sc189YSxhPyh0aGlzLmFkZENsYXNzKCJ2anMtdXNpbmctbmF0aXZlLWNvbnRyb2xzIiksdGhpcy50cmlnZ2VyKCJ1c2luZ25hdGl2ZWNvbnRyb2xzIikpOih0aGlzLnJlbW92ZUNsYXNzKCJ2anMtdXNpbmctbmF0aXZlLWNvbnRyb2xzIiksdGhpcy50cmlnZ2VyKCJ1c2luZ2N1c3RvbWNvbnRyb2xzIikpKSx0aGlzKTohIXRoaXMudXNpbmdOYXRpdmVDb250cm9sc199LGIucHJvdG90eXBlLmVycm9yPWZ1bmN0aW9uKGEpe3JldHVybiB2b2lkIDA9PT1hP3RoaXMuZXJyb3JffHxudWxsOm51bGw9PT1hPyh0aGlzLmVycm9yXz1hLHRoaXMucmVtb3ZlQ2xhc3MoInZqcy1lcnJvciIpLHRoaXMuZXJyb3JEaXNwbGF5JiZ0aGlzLmVycm9yRGlzcGxheS5jbG9zZSgpLHRoaXMpOih0aGlzLmVycm9yXz1uZXcgSlsiZGVmYXVsdCJdKGEpLHRoaXMuYWRkQ2xhc3MoInZqcy1lcnJvciIpLHpbImRlZmF1bHQiXS5lcnJvcigiKENPREU6Iit0aGlzLmVycm9yXy5jb2RlKyIgIitKWyJkZWZhdWx0Il0uZXJyb3JUeXBlc1t0aGlzLmVycm9yXy5jb2RlXSsiKSIsdGhpcy5lcnJvcl8ubWVzc2FnZSx0aGlzLmVycm9yXyksdGhpcy50cmlnZ2VyKCJlcnJvciIpLHRoaXMpfSxiLnByb3RvdHlwZS5yZXBvcnRVc2VyQWN0aXZpdHk9ZnVuY3Rpb24oYSl7dGhpcy51c2VyQWN0aXZpdHlfPSEwfSxiLnByb3RvdHlwZS51c2VyQWN0aXZlPWZ1bmN0aW9uKGEpe3JldHVybiB2b2lkIDAhPT1hPyhhPSEhYSxhIT09dGhpcy51c2VyQWN0aXZlXyYmKHRoaXMudXNlckFjdGl2ZV89YSxhPyh0aGlzLnVzZXJBY3Rpdml0eV89ITAsdGhpcy5yZW1vdmVDbGFzcygidmpzLXVzZXItaW5hY3RpdmUiKSx0aGlzLmFkZENsYXNzKCJ2anMtdXNlci1hY3RpdmUiKSx0aGlzLnRyaWdnZXIoInVzZXJhY3RpdmUiKSk6KHRoaXMudXNlckFjdGl2aXR5Xz0hMSx0aGlzLnRlY2hfJiZ0aGlzLnRlY2hfLm9uZSgibW91c2Vtb3ZlIixmdW5jdGlvbihhKXthLnN0b3BQcm9wYWdhdGlvbigpLGEucHJldmVudERlZmF1bHQoKX0pLHRoaXMucmVtb3ZlQ2xhc3MoInZqcy11c2VyLWFjdGl2ZSIpLHRoaXMuYWRkQ2xhc3MoInZqcy11c2VyLWluYWN0aXZlIiksdGhpcy50cmlnZ2VyKCJ1c2VyaW5hY3RpdmUiKSkpLHRoaXMpOnRoaXMudXNlckFjdGl2ZV99LGIucHJvdG90eXBlLmxpc3RlbkZvclVzZXJBY3Rpdml0eV89ZnVuY3Rpb24oKXt2YXIgYT12b2lkIDAsYj12b2lkIDAsYz12b2lkIDAsZD10LmJpbmQodGhpcyx0aGlzLnJlcG9ydFVzZXJBY3Rpdml0eSksZT1mdW5jdGlvbihhKXthLnNjcmVlblg9PT1iJiZhLnNjcmVlblk9PT1jfHwoYj1hLnNjcmVlblgsYz1hLnNjcmVlblksZCgpKX0sZj1mdW5jdGlvbigpe2QoKSx0aGlzLmNsZWFySW50ZXJ2YWwoYSksYT10aGlzLnNldEludGVydmFsKGQsMjUwKX0sZz1mdW5jdGlvbihiKXtkKCksdGhpcy5jbGVhckludGVydmFsKGEpfTt0aGlzLm9uKCJtb3VzZWRvd24iLGYpLHRoaXMub24oIm1vdXNlbW92ZSIsZSksdGhpcy5vbigibW91c2V1cCIsZyksdGhpcy5vbigia2V5ZG93biIsZCksdGhpcy5vbigia2V5dXAiLGQpO3ZhciBoPXZvaWQgMDt0aGlzLnNldEludGVydmFsKGZ1bmN0aW9uKCl7aWYodGhpcy51c2VyQWN0aXZpdHlfKXt0aGlzLnVzZXJBY3Rpdml0eV89ITEsdGhpcy51c2VyQWN0aXZlKCEwKSx0aGlzLmNsZWFyVGltZW91dChoKTt2YXIgYT10aGlzLm9wdGlvbnNfLmluYWN0aXZpdHlUaW1lb3V0O2E+MCYmKGg9dGhpcy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhpcy51c2VyQWN0aXZpdHlffHx0aGlzLnVzZXJBY3RpdmUoITEpfSxhKSl9fSwyNTApfSxiLnByb3RvdHlwZS5wbGF5YmFja1JhdGU9ZnVuY3Rpb24oYSl7cmV0dXJuIHZvaWQgMCE9PWE/KHRoaXMudGVjaENhbGxfKCJzZXRQbGF5YmFja1JhdGUiLGEpLHRoaXMpOnRoaXMudGVjaF8mJnRoaXMudGVjaF8uZmVhdHVyZXNQbGF5YmFja1JhdGU/dGhpcy50ZWNoR2V0XygicGxheWJhY2tSYXRlIik6MX0sYi5wcm90b3R5cGUuaXNBdWRpbz1mdW5jdGlvbihhKXtyZXR1cm4gdm9pZCAwIT09YT8odGhpcy5pc0F1ZGlvXz0hIWEsdGhpcyk6ISF0aGlzLmlzQXVkaW9ffSxiLnByb3RvdHlwZS52aWRlb1RyYWNrcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRlY2hfP3RoaXMudGVjaF8udmlkZW9UcmFja3MoKToodGhpcy52aWRlb1RyYWNrc189dGhpcy52aWRlb1RyYWNrc198fG5ldyBZWyJkZWZhdWx0Il0sdGhpcy52aWRlb1RyYWNrc18pfSxiLnByb3RvdHlwZS5hdWRpb1RyYWNrcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRlY2hfP3RoaXMudGVjaF8uYXVkaW9UcmFja3MoKToodGhpcy5hdWRpb1RyYWNrc189dGhpcy5hdWRpb1RyYWNrc198fG5ldyBXWyJkZWZhdWx0Il0sdGhpcy5hdWRpb1RyYWNrc18pfSxiLnByb3RvdHlwZS50ZXh0VHJhY2tzPWZ1bmN0aW9uKCl7aWYodGhpcy50ZWNoXylyZXR1cm4gdGhpcy50ZWNoXy50ZXh0VHJhY2tzKCl9LGIucHJvdG90eXBlLnJlbW90ZVRleHRUcmFja3M9ZnVuY3Rpb24oKXtpZih0aGlzLnRlY2hfKXJldHVybiB0aGlzLnRlY2hfLnJlbW90ZVRleHRUcmFja3MoKX0sYi5wcm90b3R5cGUucmVtb3RlVGV4dFRyYWNrRWxzPWZ1bmN0aW9uKCl7aWYodGhpcy50ZWNoXylyZXR1cm4gdGhpcy50ZWNoXy5yZW1vdGVUZXh0VHJhY2tFbHMoKX0sYi5wcm90b3R5cGUuYWRkVGV4dFRyYWNrPWZ1bmN0aW9uKGEsYixjKXtpZih0aGlzLnRlY2hfKXJldHVybiB0aGlzLnRlY2hfLmFkZFRleHRUcmFjayhhLGIsYyl9LGIucHJvdG90eXBlLmFkZFJlbW90ZVRleHRUcmFjaz1mdW5jdGlvbihhLGIpe2lmKHRoaXMudGVjaF8pcmV0dXJuIHRoaXMudGVjaF8uYWRkUmVtb3RlVGV4dFRyYWNrKGEsYil9LGIucHJvdG90eXBlLnJlbW92ZVJlbW90ZVRleHRUcmFjaz1mdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxiPWEudHJhY2ssYz12b2lkIDA9PT1iP2FyZ3VtZW50c1swXTpiO2lmKHRoaXMudGVjaF8pcmV0dXJuIHRoaXMudGVjaF8ucmVtb3ZlUmVtb3RlVGV4dFRyYWNrKGMpfSxiLnByb3RvdHlwZS52aWRlb1dpZHRoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGVjaF8mJnRoaXMudGVjaF8udmlkZW9XaWR0aCYmdGhpcy50ZWNoXy52aWRlb1dpZHRoKCl8fDB9LGIucHJvdG90eXBlLnZpZGVvSGVpZ2h0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGVjaF8mJnRoaXMudGVjaF8udmlkZW9IZWlnaHQmJnRoaXMudGVjaF8udmlkZW9IZWlnaHQoKXx8MH0sYi5wcm90b3R5cGUubGFuZ3VhZ2U9ZnVuY3Rpb24oYSl7cmV0dXJuIHZvaWQgMD09PWE/dGhpcy5sYW5ndWFnZV86KHRoaXMubGFuZ3VhZ2VfPVN0cmluZyhhKS50b0xvd2VyQ2FzZSgpLHRoaXMpfSxiLnByb3RvdHlwZS5sYW5ndWFnZXM9ZnVuY3Rpb24oKXtyZXR1cm4oMCxPWyJkZWZhdWx0Il0pKGIucHJvdG90eXBlLm9wdGlvbnNfLmxhbmd1YWdlcyx0aGlzLmxhbmd1YWdlc18pfSxiLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgYT0oMCxPWyJkZWZhdWx0Il0pKHRoaXMub3B0aW9uc18pLGI9YS50cmFja3M7YS50cmFja3M9W107Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspe3ZhciBkPWJbY107ZD0oMCxPWyJkZWZhdWx0Il0pKGQpLGQucGxheWVyPXZvaWQgMCxhLnRyYWNrc1tjXT1kfXJldHVybiBhfSxiLnByb3RvdHlwZS5jcmVhdGVNb2RhbD1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXM7Yj1ifHx7fSxiLmNvbnRlbnQ9YXx8IiI7dmFyIGQ9bmV3IFNbImRlZmF1bHQiXSh0aGlzLGIpO3JldHVybiB0aGlzLmFkZENoaWxkKGQpLGQub24oImRpc3Bvc2UiLGZ1bmN0aW9uKCl7Yy5yZW1vdmVDaGlsZChkKX0pLGQub3BlbigpfSxiLmdldFRhZ1NldHRpbmdzPWZ1bmN0aW9uKGEpe3ZhciBiPXtzb3VyY2VzOltdLHRyYWNrczpbXX0sYz1yLmdldEVsQXR0cmlidXRlcyhhKSxkPWNbImRhdGEtc2V0dXAiXTtpZihyLmhhc0VsQ2xhc3MoYSwidmpzLWZsdWlkIikmJihjLmZsdWlkPSEwKSxudWxsIT09ZCl7dmFyIGU9KDAsTFsiZGVmYXVsdCJdKShkfHwie30iKSxmPWVbMF0sZz1lWzFdO2YmJnpbImRlZmF1bHQiXS5lcnJvcihmKSwoMCxNLmFzc2lnbikoYyxnKX1pZigoMCxNLmFzc2lnbikoYixjKSxhLmhhc0NoaWxkTm9kZXMoKSlmb3IodmFyIGg9YS5jaGlsZE5vZGVzLGk9MCxqPWgubGVuZ3RoO2k8ajtpKyspe3ZhciBrPWhbaV0sbD1rLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7InNvdXJjZSI9PT1sP2Iuc291cmNlcy5wdXNoKHIuZ2V0RWxBdHRyaWJ1dGVzKGspKToidHJhY2siPT09bCYmYi50cmFja3MucHVzaChyLmdldEVsQXR0cmlidXRlcyhrKSl9cmV0dXJuIGJ9LGIucHJvdG90eXBlLmZsZXhOb3RTdXBwb3J0ZWRfPWZ1bmN0aW9uKCl7dmFyIGE9bFsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoImkiKTtyZXR1cm4hKCJmbGV4QmFzaXMiaW4gYS5zdHlsZXx8IndlYmtpdEZsZXhCYXNpcyJpbiBhLnN0eWxlfHwibW96RmxleEJhc2lzImluIGEuc3R5bGV8fCJtc0ZsZXhCYXNpcyJpbiBhLnN0eWxlfHwibXNGbGV4T3JkZXIiaW4gYS5zdHlsZSl9LGJ9KGpbImRlZmF1bHQiXSk7JC5wbGF5ZXJzPXt9O3ZhciBfPW5bImRlZmF1bHQiXS5uYXZpZ2F0b3I7JC5wcm90b3R5cGUub3B0aW9uc189e3RlY2hPcmRlcjpbImh0bWw1IiwiZmxhc2giXSxodG1sNTp7fSxmbGFzaDp7fSxkZWZhdWx0Vm9sdW1lOjAsaW5hY3Rpdml0eVRpbWVvdXQ6MmUzLHBsYXliYWNrUmF0ZXM6W10sY2hpbGRyZW46WyJtZWRpYUxvYWRlciIsInBvc3RlckltYWdlIiwidGV4dFRyYWNrRGlzcGxheSIsImxvYWRpbmdTcGlubmVyIiwiYmlnUGxheUJ1dHRvbiIsImNvbnRyb2xCYXIiLCJlcnJvckRpc3BsYXkiLCJ0ZXh0VHJhY2tTZXR0aW5ncyJdLGxhbmd1YWdlOl8mJihfLmxhbmd1YWdlcyYmXy5sYW5ndWFnZXNbMF18fF8udXNlckxhbmd1YWdlfHxfLmxhbmd1YWdlKXx8ImVuIixsYW5ndWFnZXM6e30sbm90U3VwcG9ydGVkTWVzc2FnZToiTm8gY29tcGF0aWJsZSBzb3VyY2Ugd2FzIGZvdW5kIGZvciB0aGlzIG1lZGlhLiJ9LFsiZW5kZWQiLCJzZWVraW5nIiwic2Vla2FibGUiLCJuZXR3b3JrU3RhdGUiLCJyZWFkeVN0YXRlIl0uZm9yRWFjaChmdW5jdGlvbihhKXskLnByb3RvdHlwZVthXT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRlY2hHZXRfKGEpfX0pLFouZm9yRWFjaChmdW5jdGlvbihhKXskLnByb3RvdHlwZVsiaGFuZGxlVGVjaCIrKDAsQlsiZGVmYXVsdCJdKShhKSsiXyJdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJpZ2dlcihhKX19KSxqWyJkZWZhdWx0Il0ucmVnaXN0ZXJDb21wb25lbnQoIlBsYXllciIsJCksY1siZGVmYXVsdCJdPSR9LHsxOjEsNDo0LDQxOjQxLDQ0OjQ0LDQ1OjQ1LDQ2OjQ2LDU6NSw1MDo1MCw1NTo1NSw1OTo1OSw2MDo2MCw2MTo2MSw2Mjo2Miw2Mzo2Myw2ODo2OCw2OTo2OSw3MTo3MSw3Njo3Niw3ODo3OCw3OTo3OSw4OjgsODE6ODEsODI6ODIsODM6ODMsODU6ODUsODY6ODYsODc6ODcsODg6ODgsODk6ODksOTA6OTAsOTE6OTEsOTQ6OTQsOTU6OTUsOTc6OTd9XSw1MjpbZnVuY3Rpb24oYSxiLGMpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBkKGEpe3JldHVybiBhJiZhLl9fZXNNb2R1bGU/YTp7ImRlZmF1bHQiOmF9fWMuX19lc01vZHVsZT0hMDt2YXIgZT1hKDUxKSxmPWQoZSksZz1mdW5jdGlvbihhLGIpe2ZbImRlZmF1bHQiXS5wcm90b3R5cGVbYV09Yn07Y1siZGVmYXVsdCJdPWd9LHs1MTo1MX1dLDUzOltmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGQoYSl7cmV0dXJuIGEmJmEuX19lc01vZHVsZT9hOnsiZGVmYXVsdCI6YX19ZnVuY3Rpb24gZShhLGIpe2lmKCEoYSBpbnN0YW5jZW9mIGIpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIGYoYSxiKXtpZighYSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiFifHwib2JqZWN0IiE9dHlwZW9mIGImJiJmdW5jdGlvbiIhPXR5cGVvZiBiP2E6Yn1mdW5jdGlvbiBnKGEsYil7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGImJm51bGwhPT1iKXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgYik7YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiJiZiLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmEsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksYiYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoYSxiKTphLl9fcHJvdG9fXz1iKX1jLl9fZXNNb2R1bGU9ITA7dmFyIGg9YSgzKSxpPWQoaCksaj1hKDUpLGs9ZChqKSxsPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYyl7dmFyIGQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O2UodGhpcyxiKTt2YXIgZz1mKHRoaXMsYS5jYWxsKHRoaXMsYyxkKSk7cmV0dXJuIGcudXBkYXRlKCksZ31yZXR1cm4gZyhiLGEpLGIucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3ZhciBhPXRoaXMuY3JlYXRlUG9wdXAoKTt0aGlzLnBvcHVwJiZ0aGlzLnJlbW92ZUNoaWxkKHRoaXMucG9wdXApLHRoaXMucG9wdXA9YSx0aGlzLmFkZENoaWxkKGEpLHRoaXMuaXRlbXMmJjA9PT10aGlzLml0ZW1zLmxlbmd0aD90aGlzLmhpZGUoKTp0aGlzLml0ZW1zJiZ0aGlzLml0ZW1zLmxlbmd0aD4xJiZ0aGlzLnNob3coKX0sYi5wcm90b3R5cGUuY3JlYXRlUG9wdXA9ZnVuY3Rpb24oKXt9LGIucHJvdG90eXBlLmNyZWF0ZUVsPWZ1bmN0aW9uKCl7cmV0dXJuIGEucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywiZGl2Iix7Y2xhc3NOYW1lOnRoaXMuYnVpbGRDU1NDbGFzcygpfSl9LGIucHJvdG90eXBlLmJ1aWxkQ1NTQ2xhc3M9ZnVuY3Rpb24oKXt2YXIgYj0idmpzLW1lbnUtYnV0dG9uIjtyZXR1cm4gYis9dGhpcy5vcHRpb25zXy5pbmxpbmU9PT0hMD8iLWlubGluZSI6Ii1wb3B1cCIsInZqcy1tZW51LWJ1dHRvbiAiK2IrIiAiK2EucHJvdG90eXBlLmJ1aWxkQ1NTQ2xhc3MuY2FsbCh0aGlzKX0sYn0oaVsiZGVmYXVsdCJdKTtrWyJkZWZhdWx0Il0ucmVnaXN0ZXJDb21wb25lbnQoIlBvcHVwQnV0dG9uIixsKSxjWyJkZWZhdWx0Il09bH0sezM6Myw1OjV9XSw1NDpbZnVuY3Rpb24oYSxiLGMpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBkKGEpe2lmKGEmJmEuX19lc01vZHVsZSlyZXR1cm4gYTt2YXIgYj17fTtpZihudWxsIT1hKWZvcih2YXIgYyBpbiBhKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLGMpJiYoYltjXT1hW2NdKTtyZXR1cm4gYlsiZGVmYXVsdCJdPWEsYn1mdW5jdGlvbiBlKGEpe3JldHVybiBhJiZhLl9fZXNNb2R1bGU/YTp7ImRlZmF1bHQiOmF9fWZ1bmN0aW9uIGYoYSxiKXtpZighKGEgaW5zdGFuY2VvZiBiKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1mdW5jdGlvbiBnKGEsYil7aWYoIWEpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTtyZXR1cm4hYnx8Im9iamVjdCIhPXR5cGVvZiBiJiYiZnVuY3Rpb24iIT10eXBlb2YgYj9hOmJ9ZnVuY3Rpb24gaChhLGIpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBiJiZudWxsIT09Yil0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIGIpO2EucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYiYmYi5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTphLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGImJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKGEsYik6YS5fX3Byb3RvX189Yil9Yy5fX2VzTW9kdWxlPSEwO3ZhciBpPWEoNSksaj1lKGkpLGs9YSg4MSksbD1kKGspLG09YSg4Myksbj1kKG0pLG89YSg4MikscD1kKG8pLHE9ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe3JldHVybiBmKHRoaXMsYiksZyh0aGlzLGEuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gaChiLGEpLGIucHJvdG90eXBlLmFkZEl0ZW09ZnVuY3Rpb24oYSl7dGhpcy5hZGRDaGlsZChhKSxhLm9uKCJjbGljayIsbi5iaW5kKHRoaXMsZnVuY3Rpb24oKXt0aGlzLnVubG9ja1Nob3dpbmcoKX0pKX0sYi5wcm90b3R5cGUuY3JlYXRlRWw9ZnVuY3Rpb24oKXt2YXIgYj10aGlzLm9wdGlvbnNfLmNvbnRlbnRFbFR5cGV8fCJ1bCI7dGhpcy5jb250ZW50RWxfPWwuY3JlYXRlRWwoYix7Y2xhc3NOYW1lOiJ2anMtbWVudS1jb250ZW50In0pO3ZhciBjPWEucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywiZGl2Iix7YXBwZW5kOnRoaXMuY29udGVudEVsXyxjbGFzc05hbWU6InZqcy1tZW51In0pO3JldHVybiBjLmFwcGVuZENoaWxkKHRoaXMuY29udGVudEVsXykscC5vbihjLCJjbGljayIsZnVuY3Rpb24oYSl7YS5wcmV2ZW50RGVmYXVsdCgpLGEuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCl9KSxjfSxifShqWyJkZWZhdWx0Il0pO2pbImRlZmF1bHQiXS5yZWdpc3RlckNvbXBvbmVudCgiUG9wdXAiLHEpLGNbImRlZmF1bHQiXT1xfSx7NTo1LDgxOjgxLDgyOjgyLDgzOjgzfV0sNTU6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZChhKXtpZihhJiZhLl9fZXNNb2R1bGUpcmV0dXJuIGE7dmFyIGI9e307aWYobnVsbCE9YSlmb3IodmFyIGMgaW4gYSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxjKSYmKGJbY109YVtjXSk7cmV0dXJuIGJbImRlZmF1bHQiXT1hLGJ9ZnVuY3Rpb24gZShhKXtyZXR1cm4gYSYmYS5fX2VzTW9kdWxlP2E6eyJkZWZhdWx0IjphfX1mdW5jdGlvbiBmKGEsYil7aWYoIShhIGluc3RhbmNlb2YgYikpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gZyhhLGIpe2lmKCFhKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWJ8fCJvYmplY3QiIT10eXBlb2YgYiYmImZ1bmN0aW9uIiE9dHlwZW9mIGI/YTpifWZ1bmN0aW9uIGgoYSxiKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgYiYmbnVsbCE9PWIpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBiKTthLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGImJmIucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6YSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxiJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihhLGIpOmEuX19wcm90b19fPWIpfWMuX19lc01vZHVsZT0hMDt2YXIgaT1hKDMpLGo9ZShpKSxrPWEoNSksbD1lKGspLG09YSg4Myksbj1kKG0pLG89YSg4MSkscD1kKG8pLHE9YSg3OCkscj1kKHEpLHM9ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihjLGQpe2YodGhpcyxiKTt2YXIgZT1nKHRoaXMsYS5jYWxsKHRoaXMsYyxkKSk7cmV0dXJuIGUudXBkYXRlKCksYy5vbigicG9zdGVyY2hhbmdlIixuLmJpbmQoZSxlLnVwZGF0ZSkpLGV9cmV0dXJuIGgoYixhKSxiLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5wbGF5ZXIoKS5vZmYoInBvc3RlcmNoYW5nZSIsdGhpcy51cGRhdGUpLGEucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKX0sYi5wcm90b3R5cGUuY3JlYXRlRWw9ZnVuY3Rpb24oKXt2YXIgYT1wLmNyZWF0ZUVsKCJkaXYiLHsKY2xhc3NOYW1lOiJ2anMtcG9zdGVyIix0YWJJbmRleDotMX0pO3JldHVybiByLkJBQ0tHUk9VTkRfU0laRV9TVVBQT1JURUR8fCh0aGlzLmZhbGxiYWNrSW1nXz1wLmNyZWF0ZUVsKCJpbWciKSxhLmFwcGVuZENoaWxkKHRoaXMuZmFsbGJhY2tJbWdfKSksYX0sYi5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucGxheWVyKCkucG9zdGVyKCk7dGhpcy5zZXRTcmMoYiksYj90aGlzLnNob3coKTp0aGlzLmhpZGUoKX0sYi5wcm90b3R5cGUuc2V0U3JjPWZ1bmN0aW9uKGEpe2lmKHRoaXMuZmFsbGJhY2tJbWdfKXRoaXMuZmFsbGJhY2tJbWdfLnNyYz1hO2Vsc2V7dmFyIGI9IiI7YSYmKGI9J3VybCgiJythKyciKScpLHRoaXMuZWxfLnN0eWxlLmJhY2tncm91bmRJbWFnZT1ifX0sYi5wcm90b3R5cGUuaGFuZGxlQ2xpY2s9ZnVuY3Rpb24oYSl7dGhpcy5wbGF5ZXJfLnBhdXNlZCgpP3RoaXMucGxheWVyXy5wbGF5KCk6dGhpcy5wbGF5ZXJfLnBhdXNlKCl9LGJ9KGpbImRlZmF1bHQiXSk7bFsiZGVmYXVsdCJdLnJlZ2lzdGVyQ29tcG9uZW50KCJQb3N0ZXJJbWFnZSIscyksY1siZGVmYXVsdCJdPXN9LHszOjMsNTo1LDc4Ojc4LDgxOjgxLDgzOjgzfV0sNTY6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZChhKXtyZXR1cm4gYSYmYS5fX2VzTW9kdWxlP2E6eyJkZWZhdWx0IjphfX1mdW5jdGlvbiBlKGEpe2lmKGEmJmEuX19lc01vZHVsZSlyZXR1cm4gYTt2YXIgYj17fTtpZihudWxsIT1hKWZvcih2YXIgYyBpbiBhKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLGMpJiYoYltjXT1hW2NdKTtyZXR1cm4gYlsiZGVmYXVsdCJdPWEsYn1mdW5jdGlvbiBmKGEsYil7YiYmKHA9YiksblsiZGVmYXVsdCJdLnNldFRpbWVvdXQocSxhKX1jLl9fZXNNb2R1bGU9ITAsYy5oYXNMb2FkZWQ9Yy5hdXRvU2V0dXBUaW1lb3V0PWMuYXV0b1NldHVwPXZvaWQgMDt2YXIgZz1hKDgxKSxoPWUoZyksaT1hKDgyKSxqPWUoaSksaz1hKDk0KSxsPWQoayksbT1hKDk1KSxuPWQobSksbz0hMSxwPXZvaWQgMCxxPWZ1bmN0aW9uKCl7aWYoaC5pc1JlYWwoKSl7dmFyIGE9bFsiZGVmYXVsdCJdLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ2aWRlbyIpLGI9bFsiZGVmYXVsdCJdLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJhdWRpbyIpLGM9W107aWYoYSYmYS5sZW5ndGg+MClmb3IodmFyIGQ9MCxlPWEubGVuZ3RoO2Q8ZTtkKyspYy5wdXNoKGFbZF0pO2lmKGImJmIubGVuZ3RoPjApZm9yKHZhciBnPTAsaT1iLmxlbmd0aDtnPGk7ZysrKWMucHVzaChiW2ddKTtpZihjJiZjLmxlbmd0aD4wKWZvcih2YXIgaj0wLGs9Yy5sZW5ndGg7ajxrO2orKyl7dmFyIG09Y1tqXTtpZighbXx8IW0uZ2V0QXR0cmlidXRlKXtmKDEpO2JyZWFrfWlmKHZvaWQgMD09PW0ucGxheWVyKXt2YXIgbj1tLmdldEF0dHJpYnV0ZSgiZGF0YS1zZXR1cCIpO251bGwhPT1uJiZwKG0pfX1lbHNlIG98fGYoMSl9fTtoLmlzUmVhbCgpJiYiY29tcGxldGUiPT09bFsiZGVmYXVsdCJdLnJlYWR5U3RhdGU/bz0hMDpqLm9uZShuWyJkZWZhdWx0Il0sImxvYWQiLGZ1bmN0aW9uKCl7bz0hMH0pO3ZhciByPWZ1bmN0aW9uKCl7cmV0dXJuIG99O2MuYXV0b1NldHVwPXEsYy5hdXRvU2V0dXBUaW1lb3V0PWYsYy5oYXNMb2FkZWQ9cn0sezgxOjgxLDgyOjgyLDk0Ojk0LDk1Ojk1fV0sNTc6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZChhKXtpZihhJiZhLl9fZXNNb2R1bGUpcmV0dXJuIGE7dmFyIGI9e307aWYobnVsbCE9YSlmb3IodmFyIGMgaW4gYSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxjKSYmKGJbY109YVtjXSk7cmV0dXJuIGJbImRlZmF1bHQiXT1hLGJ9ZnVuY3Rpb24gZShhKXtyZXR1cm4gYSYmYS5fX2VzTW9kdWxlP2E6eyJkZWZhdWx0IjphfX1mdW5jdGlvbiBmKGEsYil7aWYoIShhIGluc3RhbmNlb2YgYikpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gZyhhLGIpe2lmKCFhKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWJ8fCJvYmplY3QiIT10eXBlb2YgYiYmImZ1bmN0aW9uIiE9dHlwZW9mIGI/YTpifWZ1bmN0aW9uIGgoYSxiKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgYiYmbnVsbCE9PWIpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBiKTthLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGImJmIucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6YSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxiJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihhLGIpOmEuX19wcm90b19fPWIpfWMuX19lc01vZHVsZT0hMDt2YXIgaT1hKDUpLGo9ZShpKSxrPWEoODEpLGw9ZChrKSxtPWEoODgpLG49ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihjLGQpe2YodGhpcyxiKTt2YXIgZT1nKHRoaXMsYS5jYWxsKHRoaXMsYyxkKSk7cmV0dXJuIGUuYmFyPWUuZ2V0Q2hpbGQoZS5vcHRpb25zXy5iYXJOYW1lKSxlLnZlcnRpY2FsKCEhZS5vcHRpb25zXy52ZXJ0aWNhbCksZS5vbigibW91c2Vkb3duIixlLmhhbmRsZU1vdXNlRG93biksZS5vbigidG91Y2hzdGFydCIsZS5oYW5kbGVNb3VzZURvd24pLGUub24oImZvY3VzIixlLmhhbmRsZUZvY3VzKSxlLm9uKCJibHVyIixlLmhhbmRsZUJsdXIpLGUub24oImNsaWNrIixlLmhhbmRsZUNsaWNrKSxlLm9uKGMsImNvbnRyb2xzdmlzaWJsZSIsZS51cGRhdGUpLGUub24oYyxlLnBsYXllckV2ZW50LGUudXBkYXRlKSxlfXJldHVybiBoKGIsYSksYi5wcm90b3R5cGUuY3JlYXRlRWw9ZnVuY3Rpb24oYil7dmFyIGM9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9LGQ9YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOnt9O3JldHVybiBjLmNsYXNzTmFtZT1jLmNsYXNzTmFtZSsiIHZqcy1zbGlkZXIiLGM9KDAsbS5hc3NpZ24pKHt0YWJJbmRleDowfSxjKSxkPSgwLG0uYXNzaWduKSh7cm9sZToic2xpZGVyIiwiYXJpYS12YWx1ZW5vdyI6MCwiYXJpYS12YWx1ZW1pbiI6MCwiYXJpYS12YWx1ZW1heCI6MTAwLHRhYkluZGV4OjB9LGQpLGEucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcyxiLGMsZCl9LGIucHJvdG90eXBlLmhhbmRsZU1vdXNlRG93bj1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmJhci5lbF8ub3duZXJEb2N1bWVudDthLnByZXZlbnREZWZhdWx0KCksbC5ibG9ja1RleHRTZWxlY3Rpb24oKSx0aGlzLmFkZENsYXNzKCJ2anMtc2xpZGluZyIpLHRoaXMudHJpZ2dlcigic2xpZGVyYWN0aXZlIiksdGhpcy5vbihiLCJtb3VzZW1vdmUiLHRoaXMuaGFuZGxlTW91c2VNb3ZlKSx0aGlzLm9uKGIsIm1vdXNldXAiLHRoaXMuaGFuZGxlTW91c2VVcCksdGhpcy5vbihiLCJ0b3VjaG1vdmUiLHRoaXMuaGFuZGxlTW91c2VNb3ZlKSx0aGlzLm9uKGIsInRvdWNoZW5kIix0aGlzLmhhbmRsZU1vdXNlVXApLHRoaXMuaGFuZGxlTW91c2VNb3ZlKGEpfSxiLnByb3RvdHlwZS5oYW5kbGVNb3VzZU1vdmU9ZnVuY3Rpb24oYSl7fSxiLnByb3RvdHlwZS5oYW5kbGVNb3VzZVVwPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5iYXIuZWxfLm93bmVyRG9jdW1lbnQ7bC51bmJsb2NrVGV4dFNlbGVjdGlvbigpLHRoaXMucmVtb3ZlQ2xhc3MoInZqcy1zbGlkaW5nIiksdGhpcy50cmlnZ2VyKCJzbGlkZXJpbmFjdGl2ZSIpLHRoaXMub2ZmKGEsIm1vdXNlbW92ZSIsdGhpcy5oYW5kbGVNb3VzZU1vdmUpLHRoaXMub2ZmKGEsIm1vdXNldXAiLHRoaXMuaGFuZGxlTW91c2VVcCksdGhpcy5vZmYoYSwidG91Y2htb3ZlIix0aGlzLmhhbmRsZU1vdXNlTW92ZSksdGhpcy5vZmYoYSwidG91Y2hlbmQiLHRoaXMuaGFuZGxlTW91c2VVcCksdGhpcy51cGRhdGUoKX0sYi5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7aWYodGhpcy5lbF8pe3ZhciBhPXRoaXMuZ2V0UGVyY2VudCgpLGI9dGhpcy5iYXI7aWYoYil7KCJudW1iZXIiIT10eXBlb2YgYXx8YSE9PWF8fGE8MHx8YT09PTEvMCkmJihhPTApO3ZhciBjPSgxMDAqYSkudG9GaXhlZCgyKSsiJSI7dGhpcy52ZXJ0aWNhbCgpP2IuZWwoKS5zdHlsZS5oZWlnaHQ9YzpiLmVsKCkuc3R5bGUud2lkdGg9Y319fSxiLnByb3RvdHlwZS5jYWxjdWxhdGVEaXN0YW5jZT1mdW5jdGlvbihhKXt2YXIgYj1sLmdldFBvaW50ZXJQb3NpdGlvbih0aGlzLmVsXyxhKTtyZXR1cm4gdGhpcy52ZXJ0aWNhbCgpP2IueTpiLnh9LGIucHJvdG90eXBlLmhhbmRsZUZvY3VzPWZ1bmN0aW9uKCl7dGhpcy5vbih0aGlzLmJhci5lbF8ub3duZXJEb2N1bWVudCwia2V5ZG93biIsdGhpcy5oYW5kbGVLZXlQcmVzcyl9LGIucHJvdG90eXBlLmhhbmRsZUtleVByZXNzPWZ1bmN0aW9uKGEpezM3PT09YS53aGljaHx8NDA9PT1hLndoaWNoPyhhLnByZXZlbnREZWZhdWx0KCksdGhpcy5zdGVwQmFjaygpKTozOCE9PWEud2hpY2gmJjM5IT09YS53aGljaHx8KGEucHJldmVudERlZmF1bHQoKSx0aGlzLnN0ZXBGb3J3YXJkKCkpfSxiLnByb3RvdHlwZS5oYW5kbGVCbHVyPWZ1bmN0aW9uKCl7dGhpcy5vZmYodGhpcy5iYXIuZWxfLm93bmVyRG9jdW1lbnQsImtleWRvd24iLHRoaXMuaGFuZGxlS2V5UHJlc3MpfSxiLnByb3RvdHlwZS5oYW5kbGVDbGljaz1mdW5jdGlvbihhKXthLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLGEucHJldmVudERlZmF1bHQoKX0sYi5wcm90b3R5cGUudmVydGljYWw9ZnVuY3Rpb24oYSl7cmV0dXJuIHZvaWQgMD09PWE/dGhpcy52ZXJ0aWNhbF98fCExOih0aGlzLnZlcnRpY2FsXz0hIWEsdGhpcy52ZXJ0aWNhbF8/dGhpcy5hZGRDbGFzcygidmpzLXNsaWRlci12ZXJ0aWNhbCIpOnRoaXMuYWRkQ2xhc3MoInZqcy1zbGlkZXItaG9yaXpvbnRhbCIpLHRoaXMpfSxifShqWyJkZWZhdWx0Il0pO2pbImRlZmF1bHQiXS5yZWdpc3RlckNvbXBvbmVudCgiU2xpZGVyIixuKSxjWyJkZWZhdWx0Il09bn0sezU6NSw4MTo4MSw4ODo4OH1dLDU4OltmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGQoYSl7cmV0dXJuIGEuc3RyZWFtaW5nRm9ybWF0cz17InJ0bXAvbXA0IjoiTVA0IiwicnRtcC9mbHYiOiJGTFYifSxhLnN0cmVhbUZyb21QYXJ0cz1mdW5jdGlvbihhLGIpe3JldHVybiBhKyImIitifSxhLnN0cmVhbVRvUGFydHM9ZnVuY3Rpb24oYSl7dmFyIGI9e2Nvbm5lY3Rpb246IiIsc3RyZWFtOiIifTtpZighYSlyZXR1cm4gYjt2YXIgYz1hLnNlYXJjaCgvJig/IVx3Kz0pLyksZD12b2lkIDA7cmV0dXJuIGMhPT0tMT9kPWMrMTooYz1kPWEubGFzdEluZGV4T2YoIi8iKSsxLDA9PT1jJiYoYz1kPWEubGVuZ3RoKSksYi5jb25uZWN0aW9uPWEuc3Vic3RyaW5nKDAsYyksYi5zdHJlYW09YS5zdWJzdHJpbmcoZCxhLmxlbmd0aCksYn0sYS5pc1N0cmVhbWluZ1R5cGU9ZnVuY3Rpb24oYil7cmV0dXJuIGIgaW4gYS5zdHJlYW1pbmdGb3JtYXRzfSxhLlJUTVBfUkU9L15ydG1wW3NldF0/OlwvXC8vaSxhLmlzU3RyZWFtaW5nU3JjPWZ1bmN0aW9uKGIpe3JldHVybiBhLlJUTVBfUkUudGVzdChiKX0sYS5ydG1wU291cmNlSGFuZGxlcj17fSxhLnJ0bXBTb3VyY2VIYW5kbGVyLmNhblBsYXlUeXBlPWZ1bmN0aW9uKGIpe3JldHVybiBhLmlzU3RyZWFtaW5nVHlwZShiKT8ibWF5YmUiOiIifSxhLnJ0bXBTb3VyY2VIYW5kbGVyLmNhbkhhbmRsZVNvdXJjZT1mdW5jdGlvbihiLGMpe3ZhciBkPWEucnRtcFNvdXJjZUhhbmRsZXIuY2FuUGxheVR5cGUoYi50eXBlKTtyZXR1cm4gZD9kOmEuaXNTdHJlYW1pbmdTcmMoYi5zcmMpPyJtYXliZSI6IiJ9LGEucnRtcFNvdXJjZUhhbmRsZXIuaGFuZGxlU291cmNlPWZ1bmN0aW9uKGIsYyxkKXt2YXIgZT1hLnN0cmVhbVRvUGFydHMoYi5zcmMpO2Muc2V0UnRtcENvbm5lY3Rpb24oZS5jb25uZWN0aW9uKSxjLnNldFJ0bXBTdHJlYW0oZS5zdHJlYW0pfSxhLnJlZ2lzdGVyU291cmNlSGFuZGxlcihhLnJ0bXBTb3VyY2VIYW5kbGVyKSxhfWMuX19lc01vZHVsZT0hMCxjWyJkZWZhdWx0Il09ZH0se31dLDU5OltmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGQoYSl7aWYoYSYmYS5fX2VzTW9kdWxlKXJldHVybiBhO3ZhciBiPXt9O2lmKG51bGwhPWEpZm9yKHZhciBjIGluIGEpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGEsYykmJihiW2NdPWFbY10pO3JldHVybiBiWyJkZWZhdWx0Il09YSxifWZ1bmN0aW9uIGUoYSl7cmV0dXJuIGEmJmEuX19lc01vZHVsZT9hOnsiZGVmYXVsdCI6YX19ZnVuY3Rpb24gZihhLGIpe2lmKCEoYSBpbnN0YW5jZW9mIGIpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIGcoYSxiKXtpZighYSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiFifHwib2JqZWN0IiE9dHlwZW9mIGImJiJmdW5jdGlvbiIhPXR5cGVvZiBiP2E6Yn1mdW5jdGlvbiBoKGEsYil7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGImJm51bGwhPT1iKXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgYik7YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiJiZiLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmEsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksYiYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoYSxiKTphLl9fcHJvdG9fXz1iKX1mdW5jdGlvbiBpKGEpe3ZhciBiPWEuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrYS5zbGljZSgxKTtBWyJzZXQiK2JdPWZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLmVsXy52anNfc2V0UHJvcGVydHkoYSxiKX19ZnVuY3Rpb24gaihhKXtBW2FdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWxfLnZqc19nZXRQcm9wZXJ0eShhKX19Yy5fX2VzTW9kdWxlPSEwO2Zvcih2YXIgaz1hKDYyKSxsPWUoayksbT1hKDgxKSxuPWQobSksbz1hKDkyKSxwPWQobykscT1hKDkwKSxyPWEoNTgpLHM9ZShyKSx0PWEoNSksdT1lKHQpLHY9YSg5NSksdz1lKHYpLHg9YSg4OCkseT13WyJkZWZhdWx0Il0ubmF2aWdhdG9yLHo9ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihjLGQpe2YodGhpcyxiKTt2YXIgZT1nKHRoaXMsYS5jYWxsKHRoaXMsYyxkKSk7cmV0dXJuIGMuc291cmNlJiZlLnJlYWR5KGZ1bmN0aW9uKCl7dGhpcy5zZXRTb3VyY2UoYy5zb3VyY2UpfSwhMCksYy5zdGFydFRpbWUmJmUucmVhZHkoZnVuY3Rpb24oKXt0aGlzLmxvYWQoKSx0aGlzLnBsYXkoKSx0aGlzLmN1cnJlbnRUaW1lKGMuc3RhcnRUaW1lKX0sITApLHdbImRlZmF1bHQiXS52aWRlb2pzPXdbImRlZmF1bHQiXS52aWRlb2pzfHx7fSx3WyJkZWZhdWx0Il0udmlkZW9qcy5GbGFzaD13WyJkZWZhdWx0Il0udmlkZW9qcy5GbGFzaHx8e30sd1siZGVmYXVsdCJdLnZpZGVvanMuRmxhc2gub25SZWFkeT1iLm9uUmVhZHksd1siZGVmYXVsdCJdLnZpZGVvanMuRmxhc2gub25FdmVudD1iLm9uRXZlbnQsd1siZGVmYXVsdCJdLnZpZGVvanMuRmxhc2gub25FcnJvcj1iLm9uRXJyb3IsZS5vbigic2Vla2VkIixmdW5jdGlvbigpe3RoaXMubGFzdFNlZWtUYXJnZXRfPXZvaWQgMH0pLGV9cmV0dXJuIGgoYixhKSxiLnByb3RvdHlwZS5jcmVhdGVFbD1mdW5jdGlvbigpe3ZhciBhPXRoaXMub3B0aW9uc187aWYoIWEuc3dmKXt2YXIgYz0iNS4xLjAiO2Euc3dmPSIvL3Zqcy56ZW5jZG4ubmV0L3N3Zi8iK2MrIi92aWRlby1qcy5zd2YifXZhciBkPWEudGVjaElkLGU9KDAseC5hc3NpZ24pKHtyZWFkeUZ1bmN0aW9uOiJ2aWRlb2pzLkZsYXNoLm9uUmVhZHkiLGV2ZW50UHJveHlGdW5jdGlvbjoidmlkZW9qcy5GbGFzaC5vbkV2ZW50IixlcnJvckV2ZW50UHJveHlGdW5jdGlvbjoidmlkZW9qcy5GbGFzaC5vbkVycm9yIixhdXRvcGxheTphLmF1dG9wbGF5LHByZWxvYWQ6YS5wcmVsb2FkLGxvb3A6YS5sb29wLG11dGVkOmEubXV0ZWR9LGEuZmxhc2hWYXJzKSxmPSgwLHguYXNzaWduKSh7d21vZGU6Im9wYXF1ZSIsYmdjb2xvcjoiIzAwMDAwMCJ9LGEucGFyYW1zKSxnPSgwLHguYXNzaWduKSh7aWQ6ZCxuYW1lOmQsImNsYXNzIjoidmpzLXRlY2gifSxhLmF0dHJpYnV0ZXMpO3JldHVybiB0aGlzLmVsXz1iLmVtYmVkKGEuc3dmLGUsZixnKSx0aGlzLmVsXy50ZWNoPXRoaXMsdGhpcy5lbF99LGIucHJvdG90eXBlLnBsYXk9ZnVuY3Rpb24oKXt0aGlzLmVuZGVkKCkmJnRoaXMuc2V0Q3VycmVudFRpbWUoMCksdGhpcy5lbF8udmpzX3BsYXkoKX0sYi5wcm90b3R5cGUucGF1c2U9ZnVuY3Rpb24oKXt0aGlzLmVsXy52anNfcGF1c2UoKX0sYi5wcm90b3R5cGUuc3JjPWZ1bmN0aW9uKGEpe3JldHVybiB2b2lkIDA9PT1hP3RoaXMuY3VycmVudFNyYygpOnRoaXMuc2V0U3JjKGEpfSxiLnByb3RvdHlwZS5zZXRTcmM9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpczthPXAuZ2V0QWJzb2x1dGVVUkwoYSksdGhpcy5lbF8udmpzX3NyYyhhKSx0aGlzLmF1dG9wbGF5KCkmJnRoaXMuc2V0VGltZW91dChmdW5jdGlvbigpe3JldHVybiBiLnBsYXkoKX0sMCl9LGIucHJvdG90eXBlLnNlZWtpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwIT09dGhpcy5sYXN0U2Vla1RhcmdldF99LGIucHJvdG90eXBlLnNldEN1cnJlbnRUaW1lPWZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMuc2Vla2FibGUoKTtjLmxlbmd0aCYmKGI9Yj5jLnN0YXJ0KDApP2I6Yy5zdGFydCgwKSxiPWI8Yy5lbmQoYy5sZW5ndGgtMSk/YjpjLmVuZChjLmxlbmd0aC0xKSx0aGlzLmxhc3RTZWVrVGFyZ2V0Xz1iLHRoaXMudHJpZ2dlcigic2Vla2luZyIpLHRoaXMuZWxfLnZqc19zZXRQcm9wZXJ0eSgiY3VycmVudFRpbWUiLGIpLGEucHJvdG90eXBlLnNldEN1cnJlbnRUaW1lLmNhbGwodGhpcykpfSxiLnByb3RvdHlwZS5jdXJyZW50VGltZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNlZWtpbmcoKT90aGlzLmxhc3RTZWVrVGFyZ2V0X3x8MDp0aGlzLmVsXy52anNfZ2V0UHJvcGVydHkoImN1cnJlbnRUaW1lIil9LGIucHJvdG90eXBlLmN1cnJlbnRTcmM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jdXJyZW50U291cmNlXz90aGlzLmN1cnJlbnRTb3VyY2VfLnNyYzp0aGlzLmVsXy52anNfZ2V0UHJvcGVydHkoImN1cnJlbnRTcmMiKX0sYi5wcm90b3R5cGUuZHVyYXRpb249ZnVuY3Rpb24gYygpe2lmKDA9PT10aGlzLnJlYWR5U3RhdGUoKSlyZXR1cm4gTmFOO3ZhciBjPXRoaXMuZWxfLnZqc19nZXRQcm9wZXJ0eSgiZHVyYXRpb24iKTtyZXR1cm4gYz49MD9jOjEvMH0sYi5wcm90b3R5cGUubG9hZD1mdW5jdGlvbigpe3RoaXMuZWxfLnZqc19sb2FkKCl9LGIucHJvdG90eXBlLnBvc3Rlcj1mdW5jdGlvbigpe3RoaXMuZWxfLnZqc19nZXRQcm9wZXJ0eSgicG9zdGVyIil9LGIucHJvdG90eXBlLnNldFBvc3Rlcj1mdW5jdGlvbigpe30sYi5wcm90b3R5cGUuc2Vla2FibGU9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmR1cmF0aW9uKCk7cmV0dXJuIDA9PT1hPygwLHEuY3JlYXRlVGltZVJhbmdlKSgpOigwLHEuY3JlYXRlVGltZVJhbmdlKSgwLGEpfSxiLnByb3RvdHlwZS5idWZmZXJlZD1mdW5jdGlvbigpe3ZhciBhPXRoaXMuZWxfLnZqc19nZXRQcm9wZXJ0eSgiYnVmZmVyZWQiKTtyZXR1cm4gMD09PWEubGVuZ3RoPygwLHEuY3JlYXRlVGltZVJhbmdlKSgpOigwLHEuY3JlYXRlVGltZVJhbmdlKShhWzBdWzBdLGFbMF1bMV0pfSxiLnByb3RvdHlwZS5zdXBwb3J0c0Z1bGxTY3JlZW49ZnVuY3Rpb24oKXtyZXR1cm4hMX0sYi5wcm90b3R5cGUuZW50ZXJGdWxsU2NyZWVuPWZ1bmN0aW9uKCl7cmV0dXJuITF9LGJ9KGxbImRlZmF1bHQiXSksQT16LnByb3RvdHlwZSxCPSJydG1wQ29ubmVjdGlvbixydG1wU3RyZWFtLHByZWxvYWQsZGVmYXVsdFBsYXliYWNrUmF0ZSxwbGF5YmFja1JhdGUsYXV0b3BsYXksbG9vcCxtZWRpYUdyb3VwLGNvbnRyb2xsZXIsY29udHJvbHMsdm9sdW1lLG11dGVkLGRlZmF1bHRNdXRlZCIuc3BsaXQoIiwiKSxDPSJuZXR3b3JrU3RhdGUscmVhZHlTdGF0ZSxpbml0aWFsVGltZSxzdGFydE9mZnNldFRpbWUscGF1c2VkLGVuZGVkLHZpZGVvV2lkdGgsdmlkZW9IZWlnaHQiLnNwbGl0KCIsIiksRD0wO0Q8Qi5sZW5ndGg7RCsrKWooQltEXSksaShCW0RdKTtmb3IodmFyIEU9MDtFPEMubGVuZ3RoO0UrKylqKENbRV0pO3ouaXNTdXBwb3J0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gei52ZXJzaW9uKClbMF0+PTEwfSxsWyJkZWZhdWx0Il0ud2l0aFNvdXJjZUhhbmRsZXJzKHopLHoubmF0aXZlU291cmNlSGFuZGxlcj17fSx6Lm5hdGl2ZVNvdXJjZUhhbmRsZXIuY2FuUGxheVR5cGU9ZnVuY3Rpb24oYSl7cmV0dXJuIGEgaW4gei5mb3JtYXRzPyJtYXliZSI6IiJ9LHoubmF0aXZlU291cmNlSGFuZGxlci5jYW5IYW5kbGVTb3VyY2U9ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEpe3ZhciBiPXAuZ2V0RmlsZUV4dGVuc2lvbihhKTtyZXR1cm4gYj8idmlkZW8vIitiOiIifXZhciBkPXZvaWQgMDtyZXR1cm4gZD1hLnR5cGU/YS50eXBlLnJlcGxhY2UoLzsuKi8sIiIpLnRvTG93ZXJDYXNlKCk6YyhhLnNyYyksei5uYXRpdmVTb3VyY2VIYW5kbGVyLmNhblBsYXlUeXBlKGQpfSx6Lm5hdGl2ZVNvdXJjZUhhbmRsZXIuaGFuZGxlU291cmNlPWZ1bmN0aW9uKGEsYixjKXtiLnNldFNyYyhhLnNyYyl9LHoubmF0aXZlU291cmNlSGFuZGxlci5kaXNwb3NlPWZ1bmN0aW9uKCl7fSx6LnJlZ2lzdGVyU291cmNlSGFuZGxlcih6Lm5hdGl2ZVNvdXJjZUhhbmRsZXIpLHouZm9ybWF0cz17InZpZGVvL2ZsdiI6IkZMViIsInZpZGVvL3gtZmx2IjoiRkxWIiwidmlkZW8vbXA0IjoiTVA0IiwidmlkZW8vbTR2IjoiTVA0In0sei5vblJlYWR5PWZ1bmN0aW9uKGEpe3ZhciBiPW4uZ2V0RWwoYSksYz1iJiZiLnRlY2g7YyYmYy5lbCgpJiZ6LmNoZWNrUmVhZHkoYyl9LHouY2hlY2tSZWFkeT1mdW5jdGlvbihhKXthLmVsKCkmJihhLmVsKCkudmpzX2dldFByb3BlcnR5P2EudHJpZ2dlclJlYWR5KCk6dGhpcy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ei5jaGVja1JlYWR5KGEpfSw1MCkpfSx6Lm9uRXZlbnQ9ZnVuY3Rpb24oYSxiKXt2YXIgYz1uLmdldEVsKGEpLnRlY2gsZD1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMik7Yy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yy50cmlnZ2VyKGIsZCl9LDEpfSx6Lm9uRXJyb3I9ZnVuY3Rpb24oYSxiKXt2YXIgYz1uLmdldEVsKGEpLnRlY2g7cmV0dXJuInNyY25vdGZvdW5kIj09PWI/Yy5lcnJvcig0KTp2b2lkIGMuZXJyb3IoIkZMQVNIOiAiK2IpfSx6LnZlcnNpb249ZnVuY3Rpb24oKXt2YXIgYT0iMCwwLDAiO3RyeXthPW5ldyB3WyJkZWZhdWx0Il0uQWN0aXZlWE9iamVjdCgiU2hvY2t3YXZlRmxhc2guU2hvY2t3YXZlRmxhc2giKS5HZXRWYXJpYWJsZSgiJHZlcnNpb24iKS5yZXBsYWNlKC9cRCsvZywiLCIpLm1hdGNoKC9eLD8oLispLD8kLylbMV19Y2F0Y2goYil7dHJ5e3kubWltZVR5cGVzWyJhcHBsaWNhdGlvbi94LXNob2Nrd2F2ZS1mbGFzaCJdLmVuYWJsZWRQbHVnaW4mJihhPSh5LnBsdWdpbnNbIlNob2Nrd2F2ZSBGbGFzaCAyLjAiXXx8eS5wbHVnaW5zWyJTaG9ja3dhdmUgRmxhc2giXSkuZGVzY3JpcHRpb24ucmVwbGFjZSgvXEQrL2csIiwiKS5tYXRjaCgvXiw/KC4rKSw/JC8pWzFdKX1jYXRjaChjKXt9fXJldHVybiBhLnNwbGl0KCIsIil9LHouZW1iZWQ9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9ei5nZXRFbWJlZENvZGUoYSxiLGMsZCksZj1uLmNyZWF0ZUVsKCJkaXYiLHtpbm5lckhUTUw6ZX0pLmNoaWxkTm9kZXNbMF07cmV0dXJuIGZ9LHouZ2V0RW1iZWRDb2RlPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPSc8b2JqZWN0IHR5cGU9ImFwcGxpY2F0aW9uL3gtc2hvY2t3YXZlLWZsYXNoIiAnLGY9IiIsZz0iIixoPSIiO3JldHVybiBiJiZPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhiKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2YrPWErIj0iK2JbYV0rIiZhbXA7In0pLGM9KDAseC5hc3NpZ24pKHttb3ZpZTphLGZsYXNodmFyczpmLGFsbG93U2NyaXB0QWNjZXNzOiJhbHdheXMiLGFsbG93TmV0d29ya2luZzoiYWxsIn0sYyksT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYykuZm9yRWFjaChmdW5jdGlvbihhKXtnKz0nPHBhcmFtIG5hbWU9IicrYSsnIiB2YWx1ZT0iJytjW2FdKyciIC8+J30pLGQ9KDAseC5hc3NpZ24pKHtkYXRhOmEsd2lkdGg6IjEwMCUiLGhlaWdodDoiMTAwJSJ9LGQpLE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGQpLmZvckVhY2goZnVuY3Rpb24oYSl7aCs9YSsnPSInK2RbYV0rJyIgJ30pLCIiK2UraCsiPiIrZysiPC9vYmplY3Q+In0sKDAsc1siZGVmYXVsdCJdKSh6KSx1WyJkZWZhdWx0Il0ucmVnaXN0ZXJDb21wb25lbnQoIkZsYXNoIix6KSxsWyJkZWZhdWx0Il0ucmVnaXN0ZXJUZWNoKCJGbGFzaCIseiksY1siZGVmYXVsdCJdPXp9LHs1OjUsNTg6NTgsNjI6NjIsODE6ODEsODg6ODgsOTA6OTAsOTI6OTIsOTU6OTV9XSw2MDpbZnVuY3Rpb24oYSxiLGMpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBkKGEpe2lmKGEmJmEuX19lc01vZHVsZSlyZXR1cm4gYTt2YXIgYj17fTtpZihudWxsIT1hKWZvcih2YXIgYyBpbiBhKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLGMpJiYoYltjXT1hW2NdKTtyZXR1cm4gYlsiZGVmYXVsdCJdPWEsYn1mdW5jdGlvbiBlKGEpe3JldHVybiBhJiZhLl9fZXNNb2R1bGU/YTp7ImRlZmF1bHQiOmF9fWZ1bmN0aW9uIGYoYSxiKXtyZXR1cm4gYS5yYXc9YixhfWZ1bmN0aW9uIGcoYSxiKXtpZighKGEgaW5zdGFuY2VvZiBiKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1mdW5jdGlvbiBoKGEsYil7aWYoIWEpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTtyZXR1cm4hYnx8Im9iamVjdCIhPXR5cGVvZiBiJiYiZnVuY3Rpb24iIT10eXBlb2YgYj9hOmJ9ZnVuY3Rpb24gaShhLGIpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBiJiZudWxsIT09Yil0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIGIpO2EucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYiYmYi5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTphLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGImJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKGEsYik6YS5fX3Byb3RvX189Yil9Yy5fX2VzTW9kdWxlPSEwO3ZhciBqPSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJiJzeW1ib2wiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGEpe3JldHVybiB0eXBlb2YgYX06ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJiJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJmEuY29uc3RydWN0b3I9PT1TeW1ib2wmJmEhPT1TeW1ib2wucHJvdG90eXBlPyJzeW1ib2wiOnR5cGVvZiBhfSxrPWYoWyJUZXh0IFRyYWNrcyBhcmUgYmVpbmcgbG9hZGVkIGZyb20gYW5vdGhlciBvcmlnaW4gYnV0IHRoZSBjcm9zc29yaWdpbiBhdHRyaWJ1dGUgaXNuJ3QgdXNlZC5cbiAgICAgICAgICAgIFRoaXMgbWF5IHByZXZlbnQgdGV4dCB0cmFja3MgZnJvbSBsb2FkaW5nLiJdLFsiVGV4dCBUcmFja3MgYXJlIGJlaW5nIGxvYWRlZCBmcm9tIGFub3RoZXIgb3JpZ2luIGJ1dCB0aGUgY3Jvc3NvcmlnaW4gYXR0cmlidXRlIGlzbid0IHVzZWQuXG4gICAgICAgICAgICBUaGlzIG1heSBwcmV2ZW50IHRleHQgdHJhY2tzIGZyb20gbG9hZGluZy4iXSksbD1hKDYyKSxtPWUobCksbj1hKDUpLG89ZShuKSxwPWEoODEpLHE9ZChwKSxyPWEoOTIpLHM9ZChyKSx0PWEoODMpLHU9ZCh0KSx2PWEoODYpLHc9ZSh2KSx4PWEoOTgpLHk9ZSh4KSx6PWEoNzgpLEE9ZCh6KSxCPWEoOTQpLEM9ZShCKSxEPWEoOTUpLEU9ZShEKSxGPWEoODgpLEc9YSg4NyksSD1lKEcpLEk9YSg5MSksSj1lKEkpLEs9ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihjLGQpe2codGhpcyxiKTt2YXIgZT1oKHRoaXMsYS5jYWxsKHRoaXMsYyxkKSksZj1jLnNvdXJjZSxpPSExO2lmKGYmJihlLmVsXy5jdXJyZW50U3JjIT09Zi5zcmN8fGMudGFnJiYzPT09Yy50YWcuaW5pdE5ldHdvcmtTdGF0ZV8pP2Uuc2V0U291cmNlKGYpOmUuaGFuZGxlTGF0ZUluaXRfKGUuZWxfKSxlLmVsXy5oYXNDaGlsZE5vZGVzKCkpe2Zvcih2YXIgaj1lLmVsXy5jaGlsZE5vZGVzLGw9ai5sZW5ndGgsbT1bXTtsLS07KXt2YXIgbj1qW2xdLG89bi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOyJ0cmFjayI9PT1vJiYoZS5mZWF0dXJlc05hdGl2ZVRleHRUcmFja3M/KGUucmVtb3RlVGV4dFRyYWNrRWxzKCkuYWRkVHJhY2tFbGVtZW50XyhuKSxlLnJlbW90ZVRleHRUcmFja3MoKS5hZGRUcmFja18obi50cmFjayksaXx8ZS5lbF8uaGFzQXR0cmlidXRlKCJjcm9zc29yaWdpbiIpfHwhcy5pc0Nyb3NzT3JpZ2luKG4uc3JjKXx8KGk9ITApKTptLnB1c2gobikpfWZvcih2YXIgcD0wO3A8bS5sZW5ndGg7cCsrKWUuZWxfLnJlbW92ZUNoaWxkKG1bcF0pfXZhciBxPVsiYXVkaW8iLCJ2aWRlbyJdO3JldHVybiBxLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGI9ZS5lbCgpW2ErIlRyYWNrcyJdLGM9ZVthKyJUcmFja3MiXSgpLGQ9KDAsSlsiZGVmYXVsdCJdKShhKTtlWyJmZWF0dXJlc05hdGl2ZSIrZCsiVHJhY2tzIl0mJmImJmIuYWRkRXZlbnRMaXN0ZW5lciYmKGVbImhhbmRsZSIrZCsiVHJhY2tDaGFuZ2VfIl09ZnVuY3Rpb24oYSl7Yy50cmlnZ2VyKHt0eXBlOiJjaGFuZ2UiLHRhcmdldDpjLGN1cnJlbnRUYXJnZXQ6YyxzcmNFbGVtZW50OmN9KX0sZVsiaGFuZGxlIitkKyJUcmFja0FkZF8iXT1mdW5jdGlvbihhKXtyZXR1cm4gYy5hZGRUcmFjayhhLnRyYWNrKX0sZVsiaGFuZGxlIitkKyJUcmFja1JlbW92ZV8iXT1mdW5jdGlvbihhKXtyZXR1cm4gYy5yZW1vdmVUcmFjayhhLnRyYWNrKX0sYi5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLGVbImhhbmRsZSIrZCsiVHJhY2tDaGFuZ2VfIl0pLGIuYWRkRXZlbnRMaXN0ZW5lcigiYWRkdHJhY2siLGVbImhhbmRsZSIrZCsiVHJhY2tBZGRfIl0pLGIuYWRkRXZlbnRMaXN0ZW5lcigicmVtb3ZldHJhY2siLGVbImhhbmRsZSIrZCsiVHJhY2tSZW1vdmVfIl0pLGVbInJlbW92ZU9sZCIrZCsiVHJhY2tzXyJdPWZ1bmN0aW9uKGEpe3JldHVybiBlLnJlbW92ZU9sZFRyYWNrc18oYyxiKX0sZS5vbigibG9hZHN0YXJ0IixlWyJyZW1vdmVPbGQiK2QrIlRyYWNrc18iXSkpfSksZS5mZWF0dXJlc05hdGl2ZVRleHRUcmFja3MmJihpJiZ3WyJkZWZhdWx0Il0ud2FybigoMCx5WyJkZWZhdWx0Il0pKGspKSxlLmhhbmRsZVRleHRUcmFja0NoYW5nZV89dS5iaW5kKGUsZS5oYW5kbGVUZXh0VHJhY2tDaGFuZ2UpLGUuaGFuZGxlVGV4dFRyYWNrQWRkXz11LmJpbmQoZSxlLmhhbmRsZVRleHRUcmFja0FkZCksZS5oYW5kbGVUZXh0VHJhY2tSZW1vdmVfPXUuYmluZChlLGUuaGFuZGxlVGV4dFRyYWNrUmVtb3ZlKSxlLnByb3h5TmF0aXZlVGV4dFRyYWNrc18oKSksKEEuVE9VQ0hfRU5BQkxFRHx8QS5JU19JUEhPTkV8fEEuSVNfTkFUSVZFX0FORFJPSUQpJiZjLm5hdGl2ZUNvbnRyb2xzRm9yVG91Y2g9PT0hMCYmZS5zZXRDb250cm9scyghMCksZS5wcm94eVdlYmtpdEZ1bGxzY3JlZW5fKCksZS50cmlnZ2VyUmVhZHkoKSxlfXJldHVybiBpKGIsYSksYi5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3ZhciBjPXRoaXM7WyJhdWRpbyIsInZpZGVvIiwidGV4dCJdLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGI9KDAsSlsiZGVmYXVsdCJdKShhKSxkPWMuZWxfW2ErIlRyYWNrcyJdO2QmJmQucmVtb3ZlRXZlbnRMaXN0ZW5lciYmKGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigiY2hhbmdlIixjWyJoYW5kbGUiK2IrIlRyYWNrQ2hhbmdlXyJdKSxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoImFkZHRyYWNrIixjWyJoYW5kbGUiK2IrIlRyYWNrQWRkXyJdKSxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoInJlbW92ZXRyYWNrIixjWyJoYW5kbGUiK2IrIlRyYWNrUmVtb3ZlXyJdKSksZCYmYy5vZmYoImxvYWRzdGFydCIsY1sicmVtb3ZlT2xkIitiKyJUcmFja3NfIl0pfSksYi5kaXNwb3NlTWVkaWFFbGVtZW50KHRoaXMuZWxfKSxhLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyl9LGIucHJvdG90eXBlLmNyZWF0ZUVsPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcHRpb25zXy50YWc7aWYoIWF8fCF0aGlzLm9wdGlvbnNfLnBsYXllckVsSW5nZXN0JiYhdGhpcy5tb3ZpbmdNZWRpYUVsZW1lbnRJbkRPTSl7aWYoYSl7dmFyIGM9YS5jbG9uZU5vZGUoITApO2EucGFyZW50Tm9kZSYmYS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShjLGEpLGIuZGlzcG9zZU1lZGlhRWxlbWVudChhKSxhPWN9ZWxzZXthPUNbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCJ2aWRlbyIpO3ZhciBkPXRoaXMub3B0aW9uc18udGFnJiZxLmdldEVsQXR0cmlidXRlcyh0aGlzLm9wdGlvbnNfLnRhZyksZT0oMCxIWyJkZWZhdWx0Il0pKHt9LGQpO0EuVE9VQ0hfRU5BQkxFRCYmdGhpcy5vcHRpb25zXy5uYXRpdmVDb250cm9sc0ZvclRvdWNoPT09ITB8fGRlbGV0ZSBlLmNvbnRyb2xzLHEuc2V0RWxBdHRyaWJ1dGVzKGEsKDAsRi5hc3NpZ24pKGUse2lkOnRoaXMub3B0aW9uc18udGVjaElkLCJjbGFzcyI6InZqcy10ZWNoIn0pKX1hLnBsYXllcklkPXRoaXMub3B0aW9uc18ucGxheWVySWR9Zm9yKHZhciBmPVsiYXV0b3BsYXkiLCJwcmVsb2FkIiwibG9vcCIsIm11dGVkIl0sZz1mLmxlbmd0aC0xO2c+PTA7Zy0tKXt2YXIgaD1mW2ddLGk9e307InVuZGVmaW5lZCIhPXR5cGVvZiB0aGlzLm9wdGlvbnNfW2hdJiYoaVtoXT10aGlzLm9wdGlvbnNfW2hdKSxxLnNldEVsQXR0cmlidXRlcyhhLGkpfXJldHVybiBhfSxiLnByb3RvdHlwZS5oYW5kbGVMYXRlSW5pdF89ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztpZigwIT09YS5uZXR3b3JrU3RhdGUmJjMhPT1hLm5ldHdvcmtTdGF0ZSl7aWYoMD09PWEucmVhZHlTdGF0ZSl7dmFyIGM9ZnVuY3Rpb24oKXt2YXIgYT0hMSxjPWZ1bmN0aW9uKCl7YT0hMH07Yi5vbigibG9hZHN0YXJ0IixjKTt2YXIgZD1mdW5jdGlvbigpe2F8fHRoaXMudHJpZ2dlcigibG9hZHN0YXJ0Iil9O3JldHVybiBiLm9uKCJsb2FkZWRtZXRhZGF0YSIsZCksYi5yZWFkeShmdW5jdGlvbigpe3RoaXMub2ZmKCJsb2Fkc3RhcnQiLGMpLHRoaXMub2ZmKCJsb2FkZWRtZXRhZGF0YSIsZCksYXx8dGhpcy50cmlnZ2VyKCJsb2Fkc3RhcnQiKX0pLHt2OnZvaWQgMH19KCk7aWYoIm9iamVjdCI9PT0oInVuZGVmaW5lZCI9PXR5cGVvZiBjPyJ1bmRlZmluZWQiOmooYykpKXJldHVybiBjLnZ9dmFyIGQ9WyJsb2Fkc3RhcnQiXTtkLnB1c2goImxvYWRlZG1ldGFkYXRhIiksYS5yZWFkeVN0YXRlPj0yJiZkLnB1c2goImxvYWRlZGRhdGEiKSxhLnJlYWR5U3RhdGU+PTMmJmQucHVzaCgiY2FucGxheSIpLGEucmVhZHlTdGF0ZT49NCYmZC5wdXNoKCJjYW5wbGF5dGhyb3VnaCIpLHRoaXMucmVhZHkoZnVuY3Rpb24oKXtkLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy50cmlnZ2VyKGEpfSx0aGlzKX0pfX0sYi5wcm90b3R5cGUucHJveHlOYXRpdmVUZXh0VHJhY2tzXz1mdW5jdGlvbigpe3ZhciBhPXRoaXMuZWwoKS50ZXh0VHJhY2tzO2lmKGEpe2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKXRoaXMudGV4dFRyYWNrcygpLmFkZFRyYWNrXyhhW2JdKTthLmFkZEV2ZW50TGlzdGVuZXImJihhLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsdGhpcy5oYW5kbGVUZXh0VHJhY2tDaGFuZ2VfKSxhLmFkZEV2ZW50TGlzdGVuZXIoImFkZHRyYWNrIix0aGlzLmhhbmRsZVRleHRUcmFja0FkZF8pLGEuYWRkRXZlbnRMaXN0ZW5lcigicmVtb3ZldHJhY2siLHRoaXMuaGFuZGxlVGV4dFRyYWNrUmVtb3ZlXykpLHRoaXMub24oImxvYWRzdGFydCIsdGhpcy5yZW1vdmVPbGRUZXh0VHJhY2tzXyl9fSxiLnByb3RvdHlwZS5oYW5kbGVUZXh0VHJhY2tDaGFuZ2U9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy50ZXh0VHJhY2tzKCk7dGhpcy50ZXh0VHJhY2tzKCkudHJpZ2dlcih7dHlwZToiY2hhbmdlIix0YXJnZXQ6YixjdXJyZW50VGFyZ2V0OmIsc3JjRWxlbWVudDpifSl9LGIucHJvdG90eXBlLmhhbmRsZVRleHRUcmFja0FkZD1mdW5jdGlvbihhKXt0aGlzLnRleHRUcmFja3MoKS5hZGRUcmFja18oYS50cmFjayl9LGIucHJvdG90eXBlLmhhbmRsZVRleHRUcmFja1JlbW92ZT1mdW5jdGlvbihhKXt0aGlzLnRleHRUcmFja3MoKS5yZW1vdmVUcmFja18oYS50cmFjayl9LGIucHJvdG90eXBlLnJlbW92ZU9sZFRyYWNrc189ZnVuY3Rpb24oYSxiKXt2YXIgYz1bXTtpZihiKXtmb3IodmFyIGQ9MDtkPGEubGVuZ3RoO2QrKyl7Zm9yKHZhciBlPWFbZF0sZj0hMSxnPTA7ZzxiLmxlbmd0aDtnKyspaWYoYltnXT09PWUpe2Y9ITA7YnJlYWt9Znx8Yy5wdXNoKGUpfWZvcih2YXIgaD0wO2g8Yy5sZW5ndGg7aCsrKXt2YXIgaT1jW2hdO2EucmVtb3ZlVHJhY2tfKGkpfX19LGIucHJvdG90eXBlLnJlbW92ZU9sZFRleHRUcmFja3NfPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMudGV4dFRyYWNrcygpLGM9dGhpcy5lbCgpLnRleHRUcmFja3M7dGhpcy5yZW1vdmVPbGRUcmFja3NfKGIsYyl9LGIucHJvdG90eXBlLnBsYXk9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVsXy5wbGF5KCk7dm9pZCAwIT09YSYmImZ1bmN0aW9uIj09dHlwZW9mIGEudGhlbiYmYS50aGVuKG51bGwsZnVuY3Rpb24oYSl7fSl9LGIucHJvdG90eXBlLnNldEN1cnJlbnRUaW1lPWZ1bmN0aW9uKGEpe3RyeXt0aGlzLmVsXy5jdXJyZW50VGltZT1hfWNhdGNoKGIpeygwLHdbImRlZmF1bHQiXSkoYiwiVmlkZW8gaXMgbm90IHJlYWR5LiAoVmlkZW8uanMpIil9fSxiLnByb3RvdHlwZS5kdXJhdGlvbj1mdW5jdGlvbigpe3ZhciBhPXRoaXM7aWYodGhpcy5lbF8uZHVyYXRpb249PT0xLzAmJkEuSVNfQU5EUk9JRCYmQS5JU19DSFJPTUUmJjA9PT10aGlzLmVsXy5jdXJyZW50VGltZSl7dmFyIGI9ZnVuY3Rpb24oKXt2YXIgYj1mdW5jdGlvbiBjKCl7YS5lbF8uY3VycmVudFRpbWU+MCYmKGEuZWxfLmR1cmF0aW9uPT09MS8wJiZhLnRyaWdnZXIoImR1cmF0aW9uY2hhbmdlIiksYS5vZmYoInRpbWV1cGRhdGUiLGMpKX07cmV0dXJuIGEub24oInRpbWV1cGRhdGUiLGIpLHt2Ok5hTn19KCk7aWYoIm9iamVjdCI9PT0oInVuZGVmaW5lZCI9PXR5cGVvZiBiPyJ1bmRlZmluZWQiOmooYikpKXJldHVybiBiLnZ9cmV0dXJuIHRoaXMuZWxfLmR1cmF0aW9ufHxOYU59LGIucHJvdG90eXBlLndpZHRoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWxfLm9mZnNldFdpZHRofSxiLnByb3RvdHlwZS5oZWlnaHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbF8ub2Zmc2V0SGVpZ2h0fSxiLnByb3RvdHlwZS5wcm94eVdlYmtpdEZ1bGxzY3JlZW5fPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZigid2Via2l0RGlzcGxheWluZ0Z1bGxzY3JlZW4iaW4gdGhpcy5lbF8pe3ZhciBiPWZ1bmN0aW9uKCl7dGhpcy50cmlnZ2VyKCJmdWxsc2NyZWVuY2hhbmdlIix7aXNGdWxsc2NyZWVuOiExfSl9LGM9ZnVuY3Rpb24oKXt0aGlzLm9uZSgid2Via2l0ZW5kZnVsbHNjcmVlbiIsYiksdGhpcy50cmlnZ2VyKCJmdWxsc2NyZWVuY2hhbmdlIix7aXNGdWxsc2NyZWVuOiEwfSl9O3RoaXMub24oIndlYmtpdGJlZ2luZnVsbHNjcmVlbiIsYyksdGhpcy5vbigiZGlzcG9zZSIsZnVuY3Rpb24oKXthLm9mZigid2Via2l0YmVnaW5mdWxsc2NyZWVuIixjKSxhLm9mZigid2Via2l0ZW5kZnVsbHNjcmVlbiIsYil9KX19LGIucHJvdG90eXBlLnN1cHBvcnRzRnVsbFNjcmVlbj1mdW5jdGlvbigpe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzLmVsXy53ZWJraXRFbnRlckZ1bGxTY3JlZW4pe3ZhciBhPUVbImRlZmF1bHQiXS5uYXZpZ2F0b3ImJkVbImRlZmF1bHQiXS5uYXZpZ2F0b3IudXNlckFnZW50fHwiIjtpZigvQW5kcm9pZC8udGVzdChhKXx8IS9DaHJvbWV8TWFjIE9TIFggMTAuNS8udGVzdChhKSlyZXR1cm4hMH1yZXR1cm4hMX0sYi5wcm90b3R5cGUuZW50ZXJGdWxsU2NyZWVuPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5lbF87YS5wYXVzZWQmJmEubmV0d29ya1N0YXRlPD1hLkhBVkVfTUVUQURBVEE/KHRoaXMuZWxfLnBsYXkoKSx0aGlzLnNldFRpbWVvdXQoZnVuY3Rpb24oKXthLnBhdXNlKCksYS53ZWJraXRFbnRlckZ1bGxTY3JlZW4oKX0sMCkpOmEud2Via2l0RW50ZXJGdWxsU2NyZWVuKCl9LGIucHJvdG90eXBlLmV4aXRGdWxsU2NyZWVuPWZ1bmN0aW9uKCl7dGhpcy5lbF8ud2Via2l0RXhpdEZ1bGxTY3JlZW4oKX0sYi5wcm90b3R5cGUuc3JjPWZ1bmN0aW9uKGEpe3JldHVybiB2b2lkIDA9PT1hP3RoaXMuZWxfLnNyYzp2b2lkIHRoaXMuc2V0U3JjKGEpfSxiLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe2IucmVzZXRNZWRpYUVsZW1lbnQodGhpcy5lbF8pfSxiLnByb3RvdHlwZS5jdXJyZW50U3JjPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3VycmVudFNvdXJjZV8/dGhpcy5jdXJyZW50U291cmNlXy5zcmM6dGhpcy5lbF8uY3VycmVudFNyY30sYi5wcm90b3R5cGUuc2V0Q29udHJvbHM9ZnVuY3Rpb24oYSl7dGhpcy5lbF8uY29udHJvbHM9ISFhfSxiLnByb3RvdHlwZS5hZGRUZXh0VHJhY2s9ZnVuY3Rpb24oYixjLGQpe3JldHVybiB0aGlzLmZlYXR1cmVzTmF0aXZlVGV4dFRyYWNrcz90aGlzLmVsXy5hZGRUZXh0VHJhY2soYixjLGQpOmEucHJvdG90eXBlLmFkZFRleHRUcmFjay5jYWxsKHRoaXMsYixjLGQpfSxiLnByb3RvdHlwZS5jcmVhdGVSZW1vdGVUZXh0VHJhY2s9ZnVuY3Rpb24oYil7aWYoIXRoaXMuZmVhdHVyZXNOYXRpdmVUZXh0VHJhY2tzKXJldHVybiBhLnByb3RvdHlwZS5jcmVhdGVSZW1vdGVUZXh0VHJhY2suY2FsbCh0aGlzLGIpO3ZhciBjPUNbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCJ0cmFjayIpO3JldHVybiBiLmtpbmQmJihjLmtpbmQ9Yi5raW5kKSxiLmxhYmVsJiYoYy5sYWJlbD1iLmxhYmVsKSwoYi5sYW5ndWFnZXx8Yi5zcmNsYW5nKSYmKGMuc3JjbGFuZz1iLmxhbmd1YWdlfHxiLnNyY2xhbmcpLGJbImRlZmF1bHQiXSYmKGNbImRlZmF1bHQiXT1iWyJkZWZhdWx0Il0pLGIuaWQmJihjLmlkPWIuaWQpLGIuc3JjJiYoYy5zcmM9Yi5zcmMpLGN9LGIucHJvdG90eXBlLmFkZFJlbW90ZVRleHRUcmFjaz1mdW5jdGlvbihiLGMpe3ZhciBkPWEucHJvdG90eXBlLmFkZFJlbW90ZVRleHRUcmFjay5jYWxsKHRoaXMsYixjKTtyZXR1cm4gdGhpcy5mZWF0dXJlc05hdGl2ZVRleHRUcmFja3MmJnRoaXMuZWwoKS5hcHBlbmRDaGlsZChkKSxkfSxiLnByb3RvdHlwZS5yZW1vdmVSZW1vdGVUZXh0VHJhY2s9ZnVuY3Rpb24oYil7aWYoYS5wcm90b3R5cGUucmVtb3ZlUmVtb3RlVGV4dFRyYWNrLmNhbGwodGhpcyxiKSx0aGlzLmZlYXR1cmVzTmF0aXZlVGV4dFRyYWNrcylmb3IodmFyIGM9dGhpcy4kJCgidHJhY2siKSxkPWMubGVuZ3RoO2QtLTspYiE9PWNbZF0mJmIhPT1jW2RdLnRyYWNrfHx0aGlzLmVsKCkucmVtb3ZlQ2hpbGQoY1tkXSl9LGJ9KG1bImRlZmF1bHQiXSk7aWYocS5pc1JlYWwoKSl7Sy5URVNUX1ZJRD1DWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgidmlkZW8iKTt2YXIgTD1DWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgidHJhY2siKTtMLmtpbmQ9ImNhcHRpb25zIixMLnNyY2xhbmc9ImVuIixMLmxhYmVsPSJFbmdsaXNoIixLLlRFU1RfVklELmFwcGVuZENoaWxkKEwpfUsuaXNTdXBwb3J0ZWQ9ZnVuY3Rpb24oKXt0cnl7Sy5URVNUX1ZJRC52b2x1bWU9LjV9Y2F0Y2goYSl7cmV0dXJuITF9cmV0dXJuISghSy5URVNUX1ZJRHx8IUsuVEVTVF9WSUQuY2FuUGxheVR5cGUpfSxLLmNhbkNvbnRyb2xWb2x1bWU9ZnVuY3Rpb24oKXt0cnl7dmFyIGE9Sy5URVNUX1ZJRC52b2x1bWU7cmV0dXJuIEsuVEVTVF9WSUQudm9sdW1lPWEvMisuMSxhIT09Sy5URVNUX1ZJRC52b2x1bWV9Y2F0Y2goYil7cmV0dXJuITF9fSxLLmNhbkNvbnRyb2xQbGF5YmFja1JhdGU9ZnVuY3Rpb24oKXtpZihBLklTX0FORFJPSUQmJkEuSVNfQ0hST01FKXJldHVybiExO3RyeXt2YXIgYT1LLlRFU1RfVklELnBsYXliYWNrUmF0ZTtyZXR1cm4gSy5URVNUX1ZJRC5wbGF5YmFja1JhdGU9YS8yKy4xLGEhPT1LLlRFU1RfVklELnBsYXliYWNrUmF0ZX1jYXRjaChiKXtyZXR1cm4hMX19LEsuc3VwcG9ydHNOYXRpdmVUZXh0VHJhY2tzPWZ1bmN0aW9uKCl7cmV0dXJuIEEuSVNfQU5ZX1NBRkFSSX0sSy5zdXBwb3J0c05hdGl2ZVZpZGVvVHJhY2tzPWZ1bmN0aW9uKCl7cmV0dXJuISghSy5URVNUX1ZJRHx8IUsuVEVTVF9WSUQudmlkZW9UcmFja3MpfSxLLnN1cHBvcnRzTmF0aXZlQXVkaW9UcmFja3M9ZnVuY3Rpb24oKXtyZXR1cm4hKCFLLlRFU1RfVklEfHwhSy5URVNUX1ZJRC5hdWRpb1RyYWNrcyl9LEsuRXZlbnRzPVsibG9hZHN0YXJ0Iiwic3VzcGVuZCIsImFib3J0IiwiZXJyb3IiLCJlbXB0aWVkIiwic3RhbGxlZCIsImxvYWRlZG1ldGFkYXRhIiwibG9hZGVkZGF0YSIsImNhbnBsYXkiLCJjYW5wbGF5dGhyb3VnaCIsInBsYXlpbmciLCJ3YWl0aW5nIiwic2Vla2luZyIsInNlZWtlZCIsImVuZGVkIiwiZHVyYXRpb25jaGFuZ2UiLCJ0aW1ldXBkYXRlIiwicHJvZ3Jlc3MiLCJwbGF5IiwicGF1c2UiLCJyYXRlY2hhbmdlIiwidm9sdW1lY2hhbmdlIl0sSy5wcm90b3R5cGUuZmVhdHVyZXNWb2x1bWVDb250cm9sPUsuY2FuQ29udHJvbFZvbHVtZSgpLEsucHJvdG90eXBlLmZlYXR1cmVzUGxheWJhY2tSYXRlPUsuY2FuQ29udHJvbFBsYXliYWNrUmF0ZSgpLEsucHJvdG90eXBlLm1vdmluZ01lZGlhRWxlbWVudEluRE9NPSFBLklTX0lPUyxLLnByb3RvdHlwZS5mZWF0dXJlc0Z1bGxzY3JlZW5SZXNpemU9ITAsSy5wcm90b3R5cGUuZmVhdHVyZXNQcm9ncmVzc0V2ZW50cz0hMCxLLnByb3RvdHlwZS5mZWF0dXJlc1RpbWV1cGRhdGVFdmVudHM9ITAsSy5wcm90b3R5cGUuZmVhdHVyZXNOYXRpdmVUZXh0VHJhY2tzPUsuc3VwcG9ydHNOYXRpdmVUZXh0VHJhY2tzKCksSy5wcm90b3R5cGUuZmVhdHVyZXNOYXRpdmVWaWRlb1RyYWNrcz1LLnN1cHBvcnRzTmF0aXZlVmlkZW9UcmFja3MoKSxLLnByb3RvdHlwZS5mZWF0dXJlc05hdGl2ZUF1ZGlvVHJhY2tzPUsuc3VwcG9ydHNOYXRpdmVBdWRpb1RyYWNrcygpO3ZhciBNPUsuVEVTVF9WSUQmJksuVEVTVF9WSUQuY29uc3RydWN0b3IucHJvdG90eXBlLmNhblBsYXlUeXBlLE49L15hcHBsaWNhdGlvblwvKD86eC18dm5kXC5hcHBsZVwuKW1wZWd1cmwvaSxPPS9edmlkZW9cL21wNC9pO0sucGF0Y2hDYW5QbGF5VHlwZT1mdW5jdGlvbigpe0EuQU5EUk9JRF9WRVJTSU9OPj00JiYhQS5JU19GSVJFRk9YP0suVEVTVF9WSUQuY29uc3RydWN0b3IucHJvdG90eXBlLmNhblBsYXlUeXBlPWZ1bmN0aW9uKGEpe3JldHVybiBhJiZOLnRlc3QoYSk/Im1heWJlIjpNLmNhbGwodGhpcyxhKX06QS5JU19PTERfQU5EUk9JRCYmKEsuVEVTVF9WSUQuY29uc3RydWN0b3IucHJvdG90eXBlLmNhblBsYXlUeXBlPWZ1bmN0aW9uKGEpe3JldHVybiBhJiZPLnRlc3QoYSk/Im1heWJlIjpNLmNhbGwodGhpcyxhKX0pfSxLLnVucGF0Y2hDYW5QbGF5VHlwZT1mdW5jdGlvbigpe3ZhciBhPUsuVEVTVF9WSUQuY29uc3RydWN0b3IucHJvdG90eXBlLmNhblBsYXlUeXBlO3JldHVybiBLLlRFU1RfVklELmNvbnN0cnVjdG9yLnByb3RvdHlwZS5jYW5QbGF5VHlwZT1NLGF9LEsucGF0Y2hDYW5QbGF5VHlwZSgpLEsuZGlzcG9zZU1lZGlhRWxlbWVudD1mdW5jdGlvbihhKXtpZihhKXtmb3IoYS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSk7YS5oYXNDaGlsZE5vZGVzKCk7KWEucmVtb3ZlQ2hpbGQoYS5maXJzdENoaWxkKTthLnJlbW92ZUF0dHJpYnV0ZSgic3JjIiksImZ1bmN0aW9uIj09dHlwZW9mIGEubG9hZCYmIWZ1bmN0aW9uKCl7dHJ5e2EubG9hZCgpfWNhdGNoKGIpe319KCl9fSxLLnJlc2V0TWVkaWFFbGVtZW50PWZ1bmN0aW9uKGEpe2lmKGEpe2Zvcih2YXIgYj1hLnF1ZXJ5U2VsZWN0b3JBbGwoInNvdXJjZSIpLGM9Yi5sZW5ndGg7Yy0tOylhLnJlbW92ZUNoaWxkKGJbY10pO2EucmVtb3ZlQXR0cmlidXRlKCJzcmMiKSwiZnVuY3Rpb24iPT10eXBlb2YgYS5sb2FkJiYhZnVuY3Rpb24oKXt0cnl7YS5sb2FkKCl9Y2F0Y2goYil7fX0oKX19LFsicGF1c2VkIiwiY3VycmVudFRpbWUiLCJidWZmZXJlZCIsInZvbHVtZSIsIm11dGVkIiwicG9zdGVyIiwicHJlbG9hZCIsImF1dG9wbGF5IiwiY29udHJvbHMiLCJsb29wIiwiZXJyb3IiLCJzZWVraW5nIiwic2Vla2FibGUiLCJlbmRlZCIsImRlZmF1bHRNdXRlZCIsInBsYXliYWNrUmF0ZSIsInBsYXllZCIsIm5ldHdvcmtTdGF0ZSIsInJlYWR5U3RhdGUiLCJ2aWRlb1dpZHRoIiwidmlkZW9IZWlnaHQiXS5mb3JFYWNoKGZ1bmN0aW9uKGEpe0sucHJvdG90eXBlW2FdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWxfW2FdfX0pLFsidm9sdW1lIiwibXV0ZWQiLCJzcmMiLCJwb3N0ZXIiLCJwcmVsb2FkIiwiYXV0b3BsYXkiLCJsb29wIiwicGxheWJhY2tSYXRlIl0uZm9yRWFjaChmdW5jdGlvbihhKXtLLnByb3RvdHlwZVsic2V0IisoMCxKWyJkZWZhdWx0Il0pKGEpXT1mdW5jdGlvbihiKXt0aGlzLmVsX1thXT1ifX0pLFsicGF1c2UiLCJsb2FkIl0uZm9yRWFjaChmdW5jdGlvbihhKXtLLnByb3RvdHlwZVthXT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVsX1thXSgpfX0pLG1bImRlZmF1bHQiXS53aXRoU291cmNlSGFuZGxlcnMoSyksSy5uYXRpdmVTb3VyY2VIYW5kbGVyPXt9LEsubmF0aXZlU291cmNlSGFuZGxlci5jYW5QbGF5VHlwZT1mdW5jdGlvbihhKXt0cnl7cmV0dXJuIEsuVEVTVF9WSUQuY2FuUGxheVR5cGUoYSl9Y2F0Y2goYil7cmV0dXJuIiJ9fSxLLm5hdGl2ZVNvdXJjZUhhbmRsZXIuY2FuSGFuZGxlU291cmNlPWZ1bmN0aW9uKGEsYil7aWYoYS50eXBlKXJldHVybiBLLm5hdGl2ZVNvdXJjZUhhbmRsZXIuY2FuUGxheVR5cGUoYS50eXBlKTtpZihhLnNyYyl7dmFyIGM9cy5nZXRGaWxlRXh0ZW5zaW9uKGEuc3JjKTtyZXR1cm4gSy5uYXRpdmVTb3VyY2VIYW5kbGVyLmNhblBsYXlUeXBlKCJ2aWRlby8iK2MpfXJldHVybiIifSxLLm5hdGl2ZVNvdXJjZUhhbmRsZXIuaGFuZGxlU291cmNlPWZ1bmN0aW9uKGEsYixjKXtiLnNldFNyYyhhLnNyYyl9LEsubmF0aXZlU291cmNlSGFuZGxlci5kaXNwb3NlPWZ1bmN0aW9uKCl7fSxLLnJlZ2lzdGVyU291cmNlSGFuZGxlcihLLm5hdGl2ZVNvdXJjZUhhbmRsZXIpLG9bImRlZmF1bHQiXS5yZWdpc3RlckNvbXBvbmVudCgiSHRtbDUiLEspLG1bImRlZmF1bHQiXS5yZWdpc3RlclRlY2goIkh0bWw1IixLKSxjWyJkZWZhdWx0Il09S30sezU6NSw2Mjo2Miw3ODo3OCw4MTo4MSw4Mzo4Myw4Njo4Niw4Nzo4Nyw4ODo4OCw5MTo5MSw5Mjo5Miw5NDo5NCw5NTo5NSw5ODo5OH1dLDYxOltmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGQoYSl7cmV0dXJuIGEmJmEuX19lc01vZHVsZT9hOnsiZGVmYXVsdCI6YX19ZnVuY3Rpb24gZShhLGIpe2lmKCEoYSBpbnN0YW5jZW9mIGIpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIGYoYSxiKXtpZighYSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiFifHwib2JqZWN0IiE9dHlwZW9mIGImJiJmdW5jdGlvbiIhPXR5cGVvZiBiP2E6Yn1mdW5jdGlvbiBnKGEsYil7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGImJm51bGwhPT1iKXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgYik7YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiJiZiLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmEsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksYiYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoYSxiKTphLl9fcHJvdG9fXz1iKX1jLl9fZXNNb2R1bGU9ITA7dmFyIGg9YSg1KSxpPWQoaCksaj1hKDYyKSxrPWQoaiksbD1hKDkxKSxtPWQobCksbj1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGMsZCxnKXtlKHRoaXMsYik7dmFyIGg9Zih0aGlzLGEuY2FsbCh0aGlzLGMsZCxnKSk7aWYoZC5wbGF5ZXJPcHRpb25zLnNvdXJjZXMmJjAhPT1kLnBsYXllck9wdGlvbnMuc291cmNlcy5sZW5ndGgpYy5zcmMoZC5wbGF5ZXJPcHRpb25zLnNvdXJjZXMpO2Vsc2UgZm9yKHZhciBqPTAsbD1kLnBsYXllck9wdGlvbnMudGVjaE9yZGVyO2o8bC5sZW5ndGg7aisrKXt2YXIgbj0oMCxtWyJkZWZhdWx0Il0pKGxbal0pLG89a1siZGVmYXVsdCJdLmdldFRlY2gobik7aWYobnx8KG89aVsiZGVmYXVsdCJdLmdldENvbXBvbmVudChuKSksbyYmby5pc1N1cHBvcnRlZCgpKXtjLmxvYWRUZWNoXyhuKTticmVha319cmV0dXJuIGh9cmV0dXJuIGcoYixhKSxifShpWyJkZWZhdWx0Il0pO2lbImRlZmF1bHQiXS5yZWdpc3RlckNvbXBvbmVudCgiTWVkaWFMb2FkZXIiLG4pLGNbImRlZmF1bHQiXT1ufSx7NTo1LDYyOjYyLDkxOjkxfV0sNjI6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZChhKXtpZihhJiZhLl9fZXNNb2R1bGUpcmV0dXJuIGE7dmFyIGI9e307aWYobnVsbCE9YSlmb3IodmFyIGMgaW4gYSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxjKSYmKGJbY109YVtjXSk7cmV0dXJuIGJbImRlZmF1bHQiXT1hLGJ9ZnVuY3Rpb24gZShhKXtyZXR1cm4gYSYmYS5fX2VzTW9kdWxlP2E6eyJkZWZhdWx0IjphfX1mdW5jdGlvbiBmKGEsYil7aWYoIShhIGluc3RhbmNlb2YgYikpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gZyhhLGIpe2lmKCFhKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWJ8fCJvYmplY3QiIT10eXBlb2YgYiYmImZ1bmN0aW9uIiE9dHlwZW9mIGI/YTpifWZ1bmN0aW9uIGgoYSxiKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgYiYmbnVsbCE9PWIpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBiKTthLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGImJmIucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6YSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxiJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihhLGIpOmEuX19wcm90b19fPWIpfWZ1bmN0aW9uIGkoYSxiLGMsZCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD40JiZ2b2lkIDAhPT1hcmd1bWVudHNbNF0/YXJndW1lbnRzWzRdOnt9LGY9YS50ZXh0VHJhY2tzKCk7ZS5raW5kPWIsYyYmKGUubGFiZWw9YyksZCYmKGUubGFuZ3VhZ2U9ZCksZS50ZWNoPWE7dmFyIGc9bmV3IHNbImRlZmF1bHQiXShlKTtyZXR1cm4gZi5hZGRUcmFja18oZyksZ31jLl9fZXNNb2R1bGU9ITA7dmFyIGo9YSg1KSxrPWUoaiksbD1hKDY2KSxtPWUobCksbj1hKDY1KSxvPWUobikscD1hKDg3KSxxPWUocCkscj1hKDcyKSxzPWUociksdD1hKDcwKSx1PWUodCksdj1hKDc2KSx3PWUodikseD1hKDYzKSx5PWUoeCksej1hKDgzKSxBPWQoeiksQj1hKDg2KSxDPWUoQiksRD1hKDkwKSxFPWEoNzkpLEY9YSg0NiksRz1lKEYpLEg9YSg5NSksST1lKEgpLEo9YSg5NCksSz1lKEopLEw9ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe3ZhciBjPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxkPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpmdW5jdGlvbigpe307Zih0aGlzLGIpLGMucmVwb3J0VG91Y2hBY3Rpdml0eT0hMTt2YXIgZT1nKHRoaXMsYS5jYWxsKHRoaXMsbnVsbCxjLGQpKTtyZXR1cm4gZS5oYXNTdGFydGVkXz0hMSxlLm9uKCJwbGF5aW5nIixmdW5jdGlvbigpe3RoaXMuaGFzU3RhcnRlZF89ITB9KSxlLm9uKCJsb2Fkc3RhcnQiLGZ1bmN0aW9uKCl7dGhpcy5oYXNTdGFydGVkXz0hMX0pLGUudGV4dFRyYWNrc189Yy50ZXh0VHJhY2tzLGUudmlkZW9UcmFja3NfPWMudmlkZW9UcmFja3MsZS5hdWRpb1RyYWNrc189Yy5hdWRpb1RyYWNrcyxlLmZlYXR1cmVzUHJvZ3Jlc3NFdmVudHN8fGUubWFudWFsUHJvZ3Jlc3NPbigpLGUuZmVhdHVyZXNUaW1ldXBkYXRlRXZlbnRzfHxlLm1hbnVhbFRpbWVVcGRhdGVzT24oKSxbIlRleHQiLCJBdWRpbyIsIlZpZGVvIl0uZm9yRWFjaChmdW5jdGlvbihhKXtjWyJuYXRpdmUiK2ErIlRyYWNrcyJdPT09ITEmJihlWyJmZWF0dXJlc05hdGl2ZSIrYSsiVHJhY2tzIl09ITEpfSksYy5uYXRpdmVDYXB0aW9ucz09PSExJiYoZS5mZWF0dXJlc05hdGl2ZVRleHRUcmFja3M9ITEpLGUuZmVhdHVyZXNOYXRpdmVUZXh0VHJhY2tzfHxlLmVtdWxhdGVUZXh0VHJhY2tzKCksZS5hdXRvUmVtb3RlVGV4dFRyYWNrc189bmV3IHVbImRlZmF1bHQiXSxlLmluaXRUZXh0VHJhY2tMaXN0ZW5lcnMoKSxlLmluaXRUcmFja0xpc3RlbmVycygpLGMubmF0aXZlQ29udHJvbHNGb3JUb3VjaHx8ZS5lbWl0VGFwRXZlbnRzKCksZX1yZXR1cm4gaChiLGEpLGIucHJvdG90eXBlLm1hbnVhbFByb2dyZXNzT249ZnVuY3Rpb24oKXt0aGlzLm9uKCJkdXJhdGlvbmNoYW5nZSIsdGhpcy5vbkR1cmF0aW9uQ2hhbmdlKSx0aGlzLm1hbnVhbFByb2dyZXNzPSEwLHRoaXMub25lKCJyZWFkeSIsdGhpcy50cmFja1Byb2dyZXNzKX0sYi5wcm90b3R5cGUubWFudWFsUHJvZ3Jlc3NPZmY9ZnVuY3Rpb24oKXt0aGlzLm1hbnVhbFByb2dyZXNzPSExLHRoaXMuc3RvcFRyYWNraW5nUHJvZ3Jlc3MoKSx0aGlzLm9mZigiZHVyYXRpb25jaGFuZ2UiLHRoaXMub25EdXJhdGlvbkNoYW5nZSl9LGIucHJvdG90eXBlLnRyYWNrUHJvZ3Jlc3M9ZnVuY3Rpb24oYSl7dGhpcy5zdG9wVHJhY2tpbmdQcm9ncmVzcygpLHRoaXMucHJvZ3Jlc3NJbnRlcnZhbD10aGlzLnNldEludGVydmFsKEEuYmluZCh0aGlzLGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5idWZmZXJlZFBlcmNlbnQoKTt0aGlzLmJ1ZmZlcmVkUGVyY2VudF8hPT1hJiZ0aGlzLnRyaWdnZXIoInByb2dyZXNzIiksdGhpcy5idWZmZXJlZFBlcmNlbnRfPWEsMT09PWEmJnRoaXMuc3RvcFRyYWNraW5nUHJvZ3Jlc3MoKX0pLDUwMCl9LGIucHJvdG90eXBlLm9uRHVyYXRpb25DaGFuZ2U9ZnVuY3Rpb24oYSl7dGhpcy5kdXJhdGlvbl89dGhpcy5kdXJhdGlvbigpfSxiLnByb3RvdHlwZS5idWZmZXJlZD1mdW5jdGlvbigpe3JldHVybigwLEQuY3JlYXRlVGltZVJhbmdlKSgwLDApfSxiLnByb3RvdHlwZS5idWZmZXJlZFBlcmNlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4oMCxFLmJ1ZmZlcmVkUGVyY2VudCkodGhpcy5idWZmZXJlZCgpLHRoaXMuZHVyYXRpb25fKX0sYi5wcm90b3R5cGUuc3RvcFRyYWNraW5nUHJvZ3Jlc3M9ZnVuY3Rpb24oKXt0aGlzLmNsZWFySW50ZXJ2YWwodGhpcy5wcm9ncmVzc0ludGVydmFsKX0sYi5wcm90b3R5cGUubWFudWFsVGltZVVwZGF0ZXNPbj1mdW5jdGlvbigpe3RoaXMubWFudWFsVGltZVVwZGF0ZXM9ITAsdGhpcy5vbigicGxheSIsdGhpcy50cmFja0N1cnJlbnRUaW1lKSx0aGlzLm9uKCJwYXVzZSIsdGhpcy5zdG9wVHJhY2tpbmdDdXJyZW50VGltZSl9LGIucHJvdG90eXBlLm1hbnVhbFRpbWVVcGRhdGVzT2ZmPWZ1bmN0aW9uKCl7dGhpcy5tYW51YWxUaW1lVXBkYXRlcz0hMSx0aGlzLnN0b3BUcmFja2luZ0N1cnJlbnRUaW1lKCksdGhpcy5vZmYoInBsYXkiLHRoaXMudHJhY2tDdXJyZW50VGltZSksdGhpcy5vZmYoInBhdXNlIix0aGlzLnN0b3BUcmFja2luZ0N1cnJlbnRUaW1lKX0sYi5wcm90b3R5cGUudHJhY2tDdXJyZW50VGltZT1mdW5jdGlvbigpe3RoaXMuY3VycmVudFRpbWVJbnRlcnZhbCYmdGhpcy5zdG9wVHJhY2tpbmdDdXJyZW50VGltZSgpLHRoaXMuY3VycmVudFRpbWVJbnRlcnZhbD10aGlzLnNldEludGVydmFsKGZ1bmN0aW9uKCl7dGhpcy50cmlnZ2VyKHt0eXBlOiJ0aW1ldXBkYXRlIix0YXJnZXQ6dGhpcyxtYW51YWxseVRyaWdnZXJlZDohMH0pfSwyNTApfSxiLnByb3RvdHlwZS5zdG9wVHJhY2tpbmdDdXJyZW50VGltZT1mdW5jdGlvbigpe3RoaXMuY2xlYXJJbnRlcnZhbCh0aGlzLmN1cnJlbnRUaW1lSW50ZXJ2YWwpLHRoaXMudHJpZ2dlcih7dHlwZToidGltZXVwZGF0ZSIsdGFyZ2V0OnRoaXMsbWFudWFsbHlUcmlnZ2VyZWQ6ITB9KX0sYi5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuY2xlYXJUcmFja3MoWyJhdWRpbyIsInZpZGVvIiwidGV4dCJdKSx0aGlzLm1hbnVhbFByb2dyZXNzJiZ0aGlzLm1hbnVhbFByb2dyZXNzT2ZmKCksdGhpcy5tYW51YWxUaW1lVXBkYXRlcyYmdGhpcy5tYW51YWxUaW1lVXBkYXRlc09mZigpLGEucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKX0sYi5wcm90b3R5cGUuY2xlYXJUcmFja3M9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpczthPVtdLmNvbmNhdChhKSxhLmZvckVhY2goZnVuY3Rpb24oYSl7Zm9yKHZhciBjPWJbYSsiVHJhY2tzIl0oKXx8W10sZD1jLmxlbmd0aDtkLS07KXt2YXIgZT1jW2RdOyJ0ZXh0Ij09PWEmJmIucmVtb3ZlUmVtb3RlVGV4dFRyYWNrKGUpLGMucmVtb3ZlVHJhY2tfKGUpfX0pfSxiLnByb3RvdHlwZS5jbGVhbnVwQXV0b1RleHRUcmFja3M9ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5hdXRvUmVtb3RlVGV4dFRyYWNrc198fFtdLGI9YS5sZW5ndGg7Yi0tOyl7dmFyIGM9YVtiXTt0aGlzLnJlbW92ZVJlbW90ZVRleHRUcmFjayhjKX19LGIucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7fSxiLnByb3RvdHlwZS5lcnJvcj1mdW5jdGlvbihhKXtyZXR1cm4gdm9pZCAwIT09YSYmKHRoaXMuZXJyb3JfPW5ldyBHWyJkZWZhdWx0Il0oYSksdGhpcy50cmlnZ2VyKCJlcnJvciIpKSx0aGlzLmVycm9yX30sYi5wcm90b3R5cGUucGxheWVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzU3RhcnRlZF8/KDAsRC5jcmVhdGVUaW1lUmFuZ2UpKDAsMCk6KDAsRC5jcmVhdGVUaW1lUmFuZ2UpKCl9LGIucHJvdG90eXBlLnNldEN1cnJlbnRUaW1lPWZ1bmN0aW9uKCl7dGhpcy5tYW51YWxUaW1lVXBkYXRlcyYmdGhpcy50cmlnZ2VyKHt0eXBlOiJ0aW1ldXBkYXRlIix0YXJnZXQ6dGhpcyxtYW51YWxseVRyaWdnZXJlZDohMH0pfSxiLnByb3RvdHlwZS5pbml0VGV4dFRyYWNrTGlzdGVuZXJzPWZ1bmN0aW9uKCl7dmFyIGE9QS5iaW5kKHRoaXMsZnVuY3Rpb24oKXt0aGlzLnRyaWdnZXIoInRleHR0cmFja2NoYW5nZSIpfSksYj10aGlzLnRleHRUcmFja3MoKTtiJiYoYi5hZGRFdmVudExpc3RlbmVyKCJyZW1vdmV0cmFjayIsYSksYi5hZGRFdmVudExpc3RlbmVyKCJhZGR0cmFjayIsYSksdGhpcy5vbigiZGlzcG9zZSIsQS5iaW5kKHRoaXMsZnVuY3Rpb24oKXtiLnJlbW92ZUV2ZW50TGlzdGVuZXIoInJlbW92ZXRyYWNrIixhKSxiLnJlbW92ZUV2ZW50TGlzdGVuZXIoImFkZHRyYWNrIixhKX0pKSl9LGIucHJvdG90eXBlLmluaXRUcmFja0xpc3RlbmVycz1mdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1bInZpZGVvIiwiYXVkaW8iXTtiLmZvckVhY2goZnVuY3Rpb24oYil7CnZhciBjPWZ1bmN0aW9uKCl7YS50cmlnZ2VyKGIrInRyYWNrY2hhbmdlIil9LGQ9YVtiKyJUcmFja3MiXSgpO2QuYWRkRXZlbnRMaXN0ZW5lcigicmVtb3ZldHJhY2siLGMpLGQuYWRkRXZlbnRMaXN0ZW5lcigiYWRkdHJhY2siLGMpLGEub24oImRpc3Bvc2UiLGZ1bmN0aW9uKCl7ZC5yZW1vdmVFdmVudExpc3RlbmVyKCJyZW1vdmV0cmFjayIsYyksZC5yZW1vdmVFdmVudExpc3RlbmVyKCJhZGR0cmFjayIsYyl9KX0pfSxiLnByb3RvdHlwZS5hZGRXZWJWdHRTY3JpcHRfPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcztJWyJkZWZhdWx0Il0uV2ViVlRUfHxudWxsPT09dGhpcy5lbCgpLnBhcmVudE5vZGV8fHZvaWQgMD09PXRoaXMuZWwoKS5wYXJlbnROb2RlfHwhZnVuY3Rpb24oKXt2YXIgYj1LWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7Yi5zcmM9YS5vcHRpb25zX1sidnR0LmpzIl18fCJodHRwczovL2Nkbi5yYXdnaXQuY29tL2drYXRzZXYvdnR0LmpzL3Zqcy12MC4xMi4xL2Rpc3QvdnR0Lm1pbi5qcyIsYi5vbmxvYWQ9ZnVuY3Rpb24oKXthLnRyaWdnZXIoInZ0dGpzbG9hZGVkIil9LGIub25lcnJvcj1mdW5jdGlvbigpe2EudHJpZ2dlcigidnR0anNlcnJvciIpfSxhLm9uKCJkaXNwb3NlIixmdW5jdGlvbigpe2Iub25sb2FkPW51bGwsYi5vbmVycm9yPW51bGx9KSxJWyJkZWZhdWx0Il0uV2ViVlRUPSEwLGEuZWwoKS5wYXJlbnROb2RlLmFwcGVuZENoaWxkKGIpfSgpfSxiLnByb3RvdHlwZS5lbXVsYXRlVGV4dFRyYWNrcz1mdW5jdGlvbigpe3ZhciBhPXRoaXMsYj10aGlzLnRleHRUcmFja3MoKTtpZihiKXt0aGlzLnJlbW90ZVRleHRUcmFja3MoKS5vbigiYWRkdHJhY2siLGZ1bmN0aW9uKGIpe2EudGV4dFRyYWNrcygpLmFkZFRyYWNrXyhiLnRyYWNrKX0pLHRoaXMucmVtb3RlVGV4dFRyYWNrcygpLm9uKCJyZW1vdmV0cmFjayIsZnVuY3Rpb24oYil7YS50ZXh0VHJhY2tzKCkucmVtb3ZlVHJhY2tfKGIudHJhY2spfSksdGhpcy5vbigicmVhZHkiLHRoaXMuYWRkV2ViVnR0U2NyaXB0Xyk7dmFyIGM9ZnVuY3Rpb24oKXtyZXR1cm4gYS50cmlnZ2VyKCJ0ZXh0dHJhY2tjaGFuZ2UiKX0sZD1mdW5jdGlvbigpe2MoKTtmb3IodmFyIGE9MDthPGIubGVuZ3RoO2ErKyl7dmFyIGQ9YlthXTtkLnJlbW92ZUV2ZW50TGlzdGVuZXIoImN1ZWNoYW5nZSIsYyksInNob3dpbmciPT09ZC5tb2RlJiZkLmFkZEV2ZW50TGlzdGVuZXIoImN1ZWNoYW5nZSIsYyl9fTtkKCksYi5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLGQpLHRoaXMub24oImRpc3Bvc2UiLGZ1bmN0aW9uKCl7Yi5yZW1vdmVFdmVudExpc3RlbmVyKCJjaGFuZ2UiLGQpfSl9fSxiLnByb3RvdHlwZS52aWRlb1RyYWNrcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnZpZGVvVHJhY2tzXz10aGlzLnZpZGVvVHJhY2tzX3x8bmV3IHdbImRlZmF1bHQiXSx0aGlzLnZpZGVvVHJhY2tzX30sYi5wcm90b3R5cGUuYXVkaW9UcmFja3M9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hdWRpb1RyYWNrc189dGhpcy5hdWRpb1RyYWNrc198fG5ldyB5WyJkZWZhdWx0Il0sdGhpcy5hdWRpb1RyYWNrc199LGIucHJvdG90eXBlLnRleHRUcmFja3M9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0VHJhY2tzXz10aGlzLnRleHRUcmFja3NffHxuZXcgdVsiZGVmYXVsdCJdLHRoaXMudGV4dFRyYWNrc199LGIucHJvdG90eXBlLnJlbW90ZVRleHRUcmFja3M9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZW1vdGVUZXh0VHJhY2tzXz10aGlzLnJlbW90ZVRleHRUcmFja3NffHxuZXcgdVsiZGVmYXVsdCJdLHRoaXMucmVtb3RlVGV4dFRyYWNrc199LGIucHJvdG90eXBlLnJlbW90ZVRleHRUcmFja0Vscz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJlbW90ZVRleHRUcmFja0Vsc189dGhpcy5yZW1vdGVUZXh0VHJhY2tFbHNffHxuZXcgb1siZGVmYXVsdCJdLHRoaXMucmVtb3RlVGV4dFRyYWNrRWxzX30sYi5wcm90b3R5cGUuYWRkVGV4dFRyYWNrPWZ1bmN0aW9uKGEsYixjKXtpZighYSl0aHJvdyBuZXcgRXJyb3IoIlRleHRUcmFjayBraW5kIGlzIHJlcXVpcmVkIGJ1dCB3YXMgbm90IHByb3ZpZGVkIik7cmV0dXJuIGkodGhpcyxhLGIsYyl9LGIucHJvdG90eXBlLmNyZWF0ZVJlbW90ZVRleHRUcmFjaz1mdW5jdGlvbihhKXt2YXIgYj0oMCxxWyJkZWZhdWx0Il0pKGEse3RlY2g6dGhpc30pO3JldHVybiBuZXcgbVsiZGVmYXVsdCJdKGIpfSxiLnByb3RvdHlwZS5hZGRSZW1vdGVUZXh0VHJhY2s9ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sYj1hcmd1bWVudHNbMV0sYz10aGlzLmNyZWF0ZVJlbW90ZVRleHRUcmFjayhhKTtyZXR1cm4gYiE9PSEwJiZiIT09ITEmJihDWyJkZWZhdWx0Il0ud2FybignQ2FsbGluZyBhZGRSZW1vdGVUZXh0VHJhY2sgd2l0aG91dCBleHBsaWNpdGx5IHNldHRpbmcgdGhlICJtYW51YWxDbGVhbnVwIiBwYXJhbWV0ZXIgdG8gYHRydWVgIGlzIGRlcHJlY2F0ZWQgYW5kIGRlZmF1bHQgdG8gYGZhbHNlYCBpbiBmdXR1cmUgdmVyc2lvbiBvZiB2aWRlby5qcycpLGI9ITApLHRoaXMucmVtb3RlVGV4dFRyYWNrRWxzKCkuYWRkVHJhY2tFbGVtZW50XyhjKSx0aGlzLnJlbW90ZVRleHRUcmFja3MoKS5hZGRUcmFja18oYy50cmFjayksYiE9PSEwJiZ0aGlzLmF1dG9SZW1vdGVUZXh0VHJhY2tzXy5hZGRUcmFja18oYy50cmFjayksY30sYi5wcm90b3R5cGUucmVtb3ZlUmVtb3RlVGV4dFRyYWNrPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucmVtb3RlVGV4dFRyYWNrRWxzKCkuZ2V0VHJhY2tFbGVtZW50QnlUcmFja18oYSk7dGhpcy5yZW1vdGVUZXh0VHJhY2tFbHMoKS5yZW1vdmVUcmFja0VsZW1lbnRfKGIpLHRoaXMucmVtb3RlVGV4dFRyYWNrcygpLnJlbW92ZVRyYWNrXyhhKSx0aGlzLmF1dG9SZW1vdGVUZXh0VHJhY2tzXy5yZW1vdmVUcmFja18oYSl9LGIucHJvdG90eXBlLnNldFBvc3Rlcj1mdW5jdGlvbigpe30sYi5wcm90b3R5cGUuY2FuUGxheVR5cGU9ZnVuY3Rpb24oKXtyZXR1cm4iIn0sYi5pc1RlY2g9ZnVuY3Rpb24oYSl7cmV0dXJuIGEucHJvdG90eXBlIGluc3RhbmNlb2YgYnx8YSBpbnN0YW5jZW9mIGJ8fGE9PT1ifSxiLnJlZ2lzdGVyVGVjaD1mdW5jdGlvbihhLGMpe2lmKGIudGVjaHNffHwoYi50ZWNoc189e30pLCFiLmlzVGVjaChjKSl0aHJvdyBuZXcgRXJyb3IoIlRlY2ggIithKyIgbXVzdCBiZSBhIFRlY2giKTtyZXR1cm4gYi50ZWNoc19bYV09YyxjfSxiLmdldFRlY2g9ZnVuY3Rpb24oYSl7cmV0dXJuIGIudGVjaHNfJiZiLnRlY2hzX1thXT9iLnRlY2hzX1thXTpJWyJkZWZhdWx0Il0mJklbImRlZmF1bHQiXS52aWRlb2pzJiZJWyJkZWZhdWx0Il0udmlkZW9qc1thXT8oQ1siZGVmYXVsdCJdLndhcm4oIlRoZSAiK2ErIiB0ZWNoIHdhcyBhZGRlZCB0byB0aGUgdmlkZW9qcyBvYmplY3Qgd2hlbiBpdCBzaG91bGQgYmUgcmVnaXN0ZXJlZCB1c2luZyB2aWRlb2pzLnJlZ2lzdGVyVGVjaChuYW1lLCB0ZWNoKSIpLElbImRlZmF1bHQiXS52aWRlb2pzW2FdKTp2b2lkIDB9LGJ9KGtbImRlZmF1bHQiXSk7TC5wcm90b3R5cGUudGV4dFRyYWNrc18sTC5wcm90b3R5cGUuYXVkaW9UcmFja3NfLEwucHJvdG90eXBlLnZpZGVvVHJhY2tzXyxMLnByb3RvdHlwZS5mZWF0dXJlc1ZvbHVtZUNvbnRyb2w9ITAsTC5wcm90b3R5cGUuZmVhdHVyZXNGdWxsc2NyZWVuUmVzaXplPSExLEwucHJvdG90eXBlLmZlYXR1cmVzUGxheWJhY2tSYXRlPSExLEwucHJvdG90eXBlLmZlYXR1cmVzUHJvZ3Jlc3NFdmVudHM9ITEsTC5wcm90b3R5cGUuZmVhdHVyZXNUaW1ldXBkYXRlRXZlbnRzPSExLEwucHJvdG90eXBlLmZlYXR1cmVzTmF0aXZlVGV4dFRyYWNrcz0hMSxMLndpdGhTb3VyY2VIYW5kbGVycz1mdW5jdGlvbihhKXthLnJlZ2lzdGVyU291cmNlSGFuZGxlcj1mdW5jdGlvbihiLGMpe3ZhciBkPWEuc291cmNlSGFuZGxlcnM7ZHx8KGQ9YS5zb3VyY2VIYW5kbGVycz1bXSksdm9pZCAwPT09YyYmKGM9ZC5sZW5ndGgpLGQuc3BsaWNlKGMsMCxiKX0sYS5jYW5QbGF5VHlwZT1mdW5jdGlvbihiKXtmb3IodmFyIGM9YS5zb3VyY2VIYW5kbGVyc3x8W10sZD12b2lkIDAsZT0wO2U8Yy5sZW5ndGg7ZSsrKWlmKGQ9Y1tlXS5jYW5QbGF5VHlwZShiKSlyZXR1cm4gZDtyZXR1cm4iIn0sYS5zZWxlY3RTb3VyY2VIYW5kbGVyPWZ1bmN0aW9uKGIsYyl7Zm9yKHZhciBkPWEuc291cmNlSGFuZGxlcnN8fFtdLGU9dm9pZCAwLGY9MDtmPGQubGVuZ3RoO2YrKylpZihlPWRbZl0uY2FuSGFuZGxlU291cmNlKGIsYykpcmV0dXJuIGRbZl07cmV0dXJuIG51bGx9LGEuY2FuUGxheVNvdXJjZT1mdW5jdGlvbihiLGMpe3ZhciBkPWEuc2VsZWN0U291cmNlSGFuZGxlcihiLGMpO3JldHVybiBkP2QuY2FuSGFuZGxlU291cmNlKGIsYyk6IiJ9O3ZhciBiPVsic2Vla2FibGUiLCJkdXJhdGlvbiJdO2IuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj10aGlzW2FdOyJmdW5jdGlvbiI9PXR5cGVvZiBiJiYodGhpc1thXT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNvdXJjZUhhbmRsZXJfJiZ0aGlzLnNvdXJjZUhhbmRsZXJfW2FdP3RoaXMuc291cmNlSGFuZGxlcl9bYV0uYXBwbHkodGhpcy5zb3VyY2VIYW5kbGVyXyxhcmd1bWVudHMpOmIuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LGEucHJvdG90eXBlKSxhLnByb3RvdHlwZS5zZXRTb3VyY2U9ZnVuY3Rpb24oYil7dmFyIGM9YS5zZWxlY3RTb3VyY2VIYW5kbGVyKGIsdGhpcy5vcHRpb25zXyk7cmV0dXJuIGN8fChhLm5hdGl2ZVNvdXJjZUhhbmRsZXI/Yz1hLm5hdGl2ZVNvdXJjZUhhbmRsZXI6Q1siZGVmYXVsdCJdLmVycm9yKCJObyBzb3VyY2UgaGFuZGVyIGZvdW5kIGZvciB0aGUgY3VycmVudCBzb3VyY2UuIikpLHRoaXMuZGlzcG9zZVNvdXJjZUhhbmRsZXIoKSx0aGlzLm9mZigiZGlzcG9zZSIsdGhpcy5kaXNwb3NlU291cmNlSGFuZGxlciksYyE9PWEubmF0aXZlU291cmNlSGFuZGxlciYmKHRoaXMuY3VycmVudFNvdXJjZV89Yix0aGlzLm9mZih0aGlzLmVsXywibG9hZHN0YXJ0IixhLnByb3RvdHlwZS5maXJzdExvYWRTdGFydExpc3RlbmVyXyksdGhpcy5vZmYodGhpcy5lbF8sImxvYWRzdGFydCIsYS5wcm90b3R5cGUuc3VjY2Vzc2l2ZUxvYWRTdGFydExpc3RlbmVyXyksdGhpcy5vbmUodGhpcy5lbF8sImxvYWRzdGFydCIsYS5wcm90b3R5cGUuZmlyc3RMb2FkU3RhcnRMaXN0ZW5lcl8pKSx0aGlzLnNvdXJjZUhhbmRsZXJfPWMuaGFuZGxlU291cmNlKGIsdGhpcyx0aGlzLm9wdGlvbnNfKSx0aGlzLm9uKCJkaXNwb3NlIix0aGlzLmRpc3Bvc2VTb3VyY2VIYW5kbGVyKSx0aGlzfSxhLnByb3RvdHlwZS5maXJzdExvYWRTdGFydExpc3RlbmVyXz1mdW5jdGlvbigpe3RoaXMub25lKHRoaXMuZWxfLCJsb2Fkc3RhcnQiLGEucHJvdG90eXBlLnN1Y2Nlc3NpdmVMb2FkU3RhcnRMaXN0ZW5lcl8pfSxhLnByb3RvdHlwZS5zdWNjZXNzaXZlTG9hZFN0YXJ0TGlzdGVuZXJfPWZ1bmN0aW9uKCl7dGhpcy5kaXNwb3NlU291cmNlSGFuZGxlcigpLHRoaXMub25lKHRoaXMuZWxfLCJsb2Fkc3RhcnQiLGEucHJvdG90eXBlLnN1Y2Nlc3NpdmVMb2FkU3RhcnRMaXN0ZW5lcl8pfSxhLnByb3RvdHlwZS5kaXNwb3NlU291cmNlSGFuZGxlcj1mdW5jdGlvbigpe3RoaXMuY3VycmVudFNvdXJjZV8mJih0aGlzLmNsZWFyVHJhY2tzKFsiYXVkaW8iLCJ2aWRlbyJdKSx0aGlzLmN1cnJlbnRTb3VyY2VfPW51bGwpLHRoaXMuY2xlYW51cEF1dG9UZXh0VHJhY2tzKCksdGhpcy5zb3VyY2VIYW5kbGVyXyYmKHRoaXMub2ZmKHRoaXMuZWxfLCJsb2Fkc3RhcnQiLGEucHJvdG90eXBlLmZpcnN0TG9hZFN0YXJ0TGlzdGVuZXJfKSx0aGlzLm9mZih0aGlzLmVsXywibG9hZHN0YXJ0IixhLnByb3RvdHlwZS5zdWNjZXNzaXZlTG9hZFN0YXJ0TGlzdGVuZXJfKSx0aGlzLnNvdXJjZUhhbmRsZXJfLmRpc3Bvc2UmJnRoaXMuc291cmNlSGFuZGxlcl8uZGlzcG9zZSgpLHRoaXMuc291cmNlSGFuZGxlcl89bnVsbCl9fSxrWyJkZWZhdWx0Il0ucmVnaXN0ZXJDb21wb25lbnQoIlRlY2giLEwpLGtbImRlZmF1bHQiXS5yZWdpc3RlckNvbXBvbmVudCgiTWVkaWFUZWNoQ29udHJvbGxlciIsTCksTC5yZWdpc3RlclRlY2goIlRlY2giLEwpLGNbImRlZmF1bHQiXT1MfSx7NDY6NDYsNTo1LDYzOjYzLDY1OjY1LDY2OjY2LDcwOjcwLDcyOjcyLDc2Ojc2LDc5Ojc5LDgzOjgzLDg2Ojg2LDg3Ojg3LDkwOjkwLDk0Ojk0LDk1Ojk1fV0sNjM6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZChhKXtpZihhJiZhLl9fZXNNb2R1bGUpcmV0dXJuIGE7dmFyIGI9e307aWYobnVsbCE9YSlmb3IodmFyIGMgaW4gYSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxjKSYmKGJbY109YVtjXSk7cmV0dXJuIGJbImRlZmF1bHQiXT1hLGJ9ZnVuY3Rpb24gZShhKXtyZXR1cm4gYSYmYS5fX2VzTW9kdWxlP2E6eyJkZWZhdWx0IjphfX1mdW5jdGlvbiBmKGEsYil7aWYoIShhIGluc3RhbmNlb2YgYikpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gZyhhLGIpe2lmKCFhKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWJ8fCJvYmplY3QiIT10eXBlb2YgYiYmImZ1bmN0aW9uIiE9dHlwZW9mIGI/YTpifWZ1bmN0aW9uIGgoYSxiKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgYiYmbnVsbCE9PWIpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBiKTthLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGImJmIucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6YSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxiJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihhLGIpOmEuX19wcm90b19fPWIpfWMuX19lc01vZHVsZT0hMDt2YXIgaT1hKDc0KSxqPWUoaSksaz1hKDc4KSxsPWQoayksbT1hKDk0KSxuPWUobSksbz1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKWIuaWQhPT1hW2NdLmlkJiYoYVtjXS5lbmFibGVkPSExKX0scD1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7dmFyIGMsZCxlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpbXTtmKHRoaXMsYik7Zm9yKHZhciBoPXZvaWQgMCxpPWUubGVuZ3RoLTE7aT49MDtpLS0paWYoZVtpXS5lbmFibGVkKXtvKGUsZVtpXSk7YnJlYWt9aWYobC5JU19JRTgpe2g9blsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoImN1c3RvbSIpO2Zvcih2YXIgayBpbiBqWyJkZWZhdWx0Il0ucHJvdG90eXBlKSJjb25zdHJ1Y3RvciIhPT1rJiYoaFtrXT1qWyJkZWZhdWx0Il0ucHJvdG90eXBlW2tdKTtmb3IodmFyIG0gaW4gYi5wcm90b3R5cGUpImNvbnN0cnVjdG9yIiE9PW0mJihoW21dPWIucHJvdG90eXBlW21dKX1yZXR1cm4gaD1jPWcodGhpcyxhLmNhbGwodGhpcyxlLGgpKSxoLmNoYW5naW5nXz0hMSxkPWgsZyhjLGQpfXJldHVybiBoKGIsYSksYi5wcm90b3R5cGUuYWRkVHJhY2tfPWZ1bmN0aW9uKGIpe3ZhciBjPXRoaXM7Yi5lbmFibGVkJiZvKHRoaXMsYiksYS5wcm90b3R5cGUuYWRkVHJhY2tfLmNhbGwodGhpcyxiKSxiLmFkZEV2ZW50TGlzdGVuZXImJmIuYWRkRXZlbnRMaXN0ZW5lcigiZW5hYmxlZGNoYW5nZSIsZnVuY3Rpb24oKXtjLmNoYW5naW5nX3x8KGMuY2hhbmdpbmdfPSEwLG8oYyxiKSxjLmNoYW5naW5nXz0hMSxjLnRyaWdnZXIoImNoYW5nZSIpKX0pfSxiLnByb3RvdHlwZS5hZGRUcmFjaz1mdW5jdGlvbihhKXt0aGlzLmFkZFRyYWNrXyhhKX0sYi5wcm90b3R5cGUucmVtb3ZlVHJhY2s9ZnVuY3Rpb24oYil7YS5wcm90b3R5cGUucmVtb3ZlVHJhY2tfLmNhbGwodGhpcyxiKX0sYn0oalsiZGVmYXVsdCJdKTtjWyJkZWZhdWx0Il09cH0sezc0Ojc0LDc4Ojc4LDk0Ojk0fV0sNjQ6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZChhKXtpZihhJiZhLl9fZXNNb2R1bGUpcmV0dXJuIGE7dmFyIGI9e307aWYobnVsbCE9YSlmb3IodmFyIGMgaW4gYSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxjKSYmKGJbY109YVtjXSk7cmV0dXJuIGJbImRlZmF1bHQiXT1hLGJ9ZnVuY3Rpb24gZShhKXtyZXR1cm4gYSYmYS5fX2VzTW9kdWxlP2E6eyJkZWZhdWx0IjphfX1mdW5jdGlvbiBmKGEsYil7aWYoIShhIGluc3RhbmNlb2YgYikpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gZyhhLGIpe2lmKCFhKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWJ8fCJvYmplY3QiIT10eXBlb2YgYiYmImZ1bmN0aW9uIiE9dHlwZW9mIGI/YTpifWZ1bmN0aW9uIGgoYSxiKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgYiYmbnVsbCE9PWIpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBiKTthLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGImJmIucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6YSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxiJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihhLGIpOmEuX19wcm90b19fPWIpfWMuX19lc01vZHVsZT0hMDt2YXIgaT1hKDczKSxqPWEoNzUpLGs9ZShqKSxsPWEoODcpLG09ZShsKSxuPWEoNzgpLG89ZChuKSxwPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXt2YXIgYyxkLGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O2YodGhpcyxiKTt2YXIgaD0oMCxtWyJkZWZhdWx0Il0pKGUse2tpbmQ6aS5BdWRpb1RyYWNrS2luZFtlLmtpbmRdfHwiIn0pLGo9Yz1nKHRoaXMsYS5jYWxsKHRoaXMsaCkpLGs9ITE7aWYoby5JU19JRTgpZm9yKHZhciBsIGluIGIucHJvdG90eXBlKSJjb25zdHJ1Y3RvciIhPT1sJiYoaltsXT1iLnByb3RvdHlwZVtsXSk7cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShqLCJlbmFibGVkIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGt9LHNldDpmdW5jdGlvbihhKXsiYm9vbGVhbiI9PXR5cGVvZiBhJiZhIT09ayYmKGs9YSx0aGlzLnRyaWdnZXIoImVuYWJsZWRjaGFuZ2UiKSl9fSksaC5lbmFibGVkJiYoai5lbmFibGVkPWguZW5hYmxlZCksai5sb2FkZWRfPSEwLGQ9aixnKGMsZCl9cmV0dXJuIGgoYixhKSxifShrWyJkZWZhdWx0Il0pO2NbImRlZmF1bHQiXT1wfSx7NzM6NzMsNzU6NzUsNzg6NzgsODc6ODd9XSw2NTpbZnVuY3Rpb24oYSxiLGMpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBkKGEpe3JldHVybiBhJiZhLl9fZXNNb2R1bGU/YTp7ImRlZmF1bHQiOmF9fWZ1bmN0aW9uIGUoYSl7aWYoYSYmYS5fX2VzTW9kdWxlKXJldHVybiBhO3ZhciBiPXt9O2lmKG51bGwhPWEpZm9yKHZhciBjIGluIGEpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGEsYykmJihiW2NdPWFbY10pO3JldHVybiBiWyJkZWZhdWx0Il09YSxifWZ1bmN0aW9uIGYoYSxiKXtpZighKGEgaW5zdGFuY2VvZiBiKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1jLl9fZXNNb2R1bGU9ITA7dmFyIGc9YSg3OCksaD1lKGcpLGk9YSg5NCksaj1kKGkpLGs9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7dmFyIGI9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOltdO2YodGhpcyxhKTt2YXIgYz10aGlzO2lmKGguSVNfSUU4KXtjPWpbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCJjdXN0b20iKTtmb3IodmFyIGQgaW4gYS5wcm90b3R5cGUpImNvbnN0cnVjdG9yIiE9PWQmJihjW2RdPWEucHJvdG90eXBlW2RdKX1jLnRyYWNrRWxlbWVudHNfPVtdLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjLCJsZW5ndGgiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmFja0VsZW1lbnRzXy5sZW5ndGh9fSk7Zm9yKHZhciBlPTAsZz1iLmxlbmd0aDtlPGc7ZSsrKWMuYWRkVHJhY2tFbGVtZW50XyhiW2VdKTtpZihoLklTX0lFOClyZXR1cm4gY31yZXR1cm4gYS5wcm90b3R5cGUuYWRkVHJhY2tFbGVtZW50Xz1mdW5jdGlvbihhKXt2YXIgYj10aGlzLnRyYWNrRWxlbWVudHNfLmxlbmd0aDsiIitiIGluIHRoaXN8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLGIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRyYWNrRWxlbWVudHNfW2JdfX0pLHRoaXMudHJhY2tFbGVtZW50c18uaW5kZXhPZihhKT09PS0xJiZ0aGlzLnRyYWNrRWxlbWVudHNfLnB1c2goYSl9LGEucHJvdG90eXBlLmdldFRyYWNrRWxlbWVudEJ5VHJhY2tfPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj12b2lkIDAsYz0wLGQ9dGhpcy50cmFja0VsZW1lbnRzXy5sZW5ndGg7YzxkO2MrKylpZihhPT09dGhpcy50cmFja0VsZW1lbnRzX1tjXS50cmFjayl7Yj10aGlzLnRyYWNrRWxlbWVudHNfW2NdO2JyZWFrfXJldHVybiBifSxhLnByb3RvdHlwZS5yZW1vdmVUcmFja0VsZW1lbnRfPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9dGhpcy50cmFja0VsZW1lbnRzXy5sZW5ndGg7YjxjO2IrKylpZihhPT09dGhpcy50cmFja0VsZW1lbnRzX1tiXSl7dGhpcy50cmFja0VsZW1lbnRzXy5zcGxpY2UoYiwxKTticmVha319LGF9KCk7Y1siZGVmYXVsdCJdPWt9LHs3ODo3OCw5NDo5NH1dLDY2OltmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGQoYSl7cmV0dXJuIGEmJmEuX19lc01vZHVsZT9hOnsiZGVmYXVsdCI6YX19ZnVuY3Rpb24gZShhKXtpZihhJiZhLl9fZXNNb2R1bGUpcmV0dXJuIGE7dmFyIGI9e307aWYobnVsbCE9YSlmb3IodmFyIGMgaW4gYSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxjKSYmKGJbY109YVtjXSk7cmV0dXJuIGJbImRlZmF1bHQiXT1hLGJ9ZnVuY3Rpb24gZihhLGIpe2lmKCEoYSBpbnN0YW5jZW9mIGIpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIGcoYSxiKXtpZighYSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiFifHwib2JqZWN0IiE9dHlwZW9mIGImJiJmdW5jdGlvbiIhPXR5cGVvZiBiP2E6Yn1mdW5jdGlvbiBoKGEsYil7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGImJm51bGwhPT1iKXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgYik7YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiJiZiLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmEsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksYiYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoYSxiKTphLl9fcHJvdG9fXz1iKX1jLl9fZXNNb2R1bGU9ITA7dmFyIGk9YSg3OCksaj1lKGkpLGs9YSg5NCksbD1kKGspLG09YSg0Miksbj1kKG0pLG89YSg3MikscD1kKG8pLHE9MCxyPTEscz0yLHQ9Myx1PWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXt2YXIgYz1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e307Zih0aGlzLGIpO3ZhciBkPWcodGhpcyxhLmNhbGwodGhpcykpLGU9dm9pZCAwLGg9ZDtpZihqLklTX0lFOCl7aD1sWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgiY3VzdG9tIik7Zm9yKHZhciBpIGluIGIucHJvdG90eXBlKSJjb25zdHJ1Y3RvciIhPT1pJiYoaFtpXT1iLnByb3RvdHlwZVtpXSl9dmFyIGs9bmV3IHBbImRlZmF1bHQiXShjKTtpZihoLmtpbmQ9ay5raW5kLGguc3JjPWsuc3JjLGguc3JjbGFuZz1rLmxhbmd1YWdlLGgubGFiZWw9ay5sYWJlbCxoWyJkZWZhdWx0Il09a1siZGVmYXVsdCJdLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShoLCJyZWFkeVN0YXRlIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGV9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGgsInRyYWNrIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGt9fSksZT1xLGsuYWRkRXZlbnRMaXN0ZW5lcigibG9hZGVkZGF0YSIsZnVuY3Rpb24oKXtlPXMsaC50cmlnZ2VyKHt0eXBlOiJsb2FkIix0YXJnZXQ6aH0pfSksai5JU19JRTgpe3ZhciBtO3JldHVybiBtPWgsZyhkLG0pfXJldHVybiBkfXJldHVybiBoKGIsYSksYn0oblsiZGVmYXVsdCJdKTt1LnByb3RvdHlwZS5hbGxvd2VkRXZlbnRzXz17bG9hZDoibG9hZCJ9LHUuTk9ORT1xLHUuTE9BRElORz1yLHUuTE9BREVEPXMsdS5FUlJPUj10LGNbImRlZmF1bHQiXT11fSx7NDI6NDIsNzI6NzIsNzg6NzgsOTQ6OTR9XSw2NzpbZnVuY3Rpb24oYSxiLGMpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBkKGEpe3JldHVybiBhJiZhLl9fZXNNb2R1bGU/YTp7ImRlZmF1bHQiOmF9fWZ1bmN0aW9uIGUoYSl7aWYoYSYmYS5fX2VzTW9kdWxlKXJldHVybiBhO3ZhciBiPXt9O2lmKG51bGwhPWEpZm9yKHZhciBjIGluIGEpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGEsYykmJihiW2NdPWFbY10pO3JldHVybiBiWyJkZWZhdWx0Il09YSxifWZ1bmN0aW9uIGYoYSxiKXtpZighKGEgaW5zdGFuY2VvZiBiKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1jLl9fZXNNb2R1bGU9ITA7dmFyIGc9YSg3OCksaD1lKGcpLGk9YSg5NCksaj1kKGkpLGs9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGIpe2YodGhpcyxhKTt2YXIgYz10aGlzO2lmKGguSVNfSUU4KXtjPWpbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCJjdXN0b20iKTtmb3IodmFyIGQgaW4gYS5wcm90b3R5cGUpImNvbnN0cnVjdG9yIiE9PWQmJihjW2RdPWEucHJvdG90eXBlW2RdKX1pZihhLnByb3RvdHlwZS5zZXRDdWVzXy5jYWxsKGMsYiksT2JqZWN0LmRlZmluZVByb3BlcnR5KGMsImxlbmd0aCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxlbmd0aF99fSksaC5JU19JRTgpcmV0dXJuIGN9cmV0dXJuIGEucHJvdG90eXBlLnNldEN1ZXNfPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMubGVuZ3RofHwwLGM9MCxkPWEubGVuZ3RoO3RoaXMuY3Vlc189YSx0aGlzLmxlbmd0aF89YS5sZW5ndGg7dmFyIGU9ZnVuY3Rpb24oYSl7IiIrYSBpbiB0aGlzfHxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywiIithLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jdWVzX1thXX19KX07aWYoYjxkKWZvcihjPWI7YzxkO2MrKyllLmNhbGwodGhpcyxjKX0sYS5wcm90b3R5cGUuZ2V0Q3VlQnlJZD1mdW5jdGlvbihhKXtmb3IodmFyIGI9bnVsbCxjPTAsZD10aGlzLmxlbmd0aDtjPGQ7YysrKXt2YXIgZT10aGlzW2NdO2lmKGUuaWQ9PT1hKXtiPWU7YnJlYWt9fXJldHVybiBifSxhfSgpO2NbImRlZmF1bHQiXT1rfSx7Nzg6NzgsOTQ6OTR9XSw2ODpbZnVuY3Rpb24oYSxiLGMpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBkKGEpe2lmKGEmJmEuX19lc01vZHVsZSlyZXR1cm4gYTt2YXIgYj17fTtpZihudWxsIT1hKWZvcih2YXIgYyBpbiBhKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLGMpJiYoYltjXT1hW2NdKTtyZXR1cm4gYlsiZGVmYXVsdCJdPWEsYn1mdW5jdGlvbiBlKGEpe3JldHVybiBhJiZhLl9fZXNNb2R1bGU/YTp7ImRlZmF1bHQiOmF9fWZ1bmN0aW9uIGYoYSxiKXtpZighKGEgaW5zdGFuY2VvZiBiKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1mdW5jdGlvbiBnKGEsYil7aWYoIWEpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTtyZXR1cm4hYnx8Im9iamVjdCIhPXR5cGVvZiBiJiYiZnVuY3Rpb24iIT10eXBlb2YgYj9hOmJ9ZnVuY3Rpb24gaChhLGIpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBiJiZudWxsIT09Yil0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIGIpO2EucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYiYmYi5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTphLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGImJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKGEsYik6YS5fX3Byb3RvX189Yil9ZnVuY3Rpb24gaShhLGIpe3JldHVybiJyZ2JhKCIrcGFyc2VJbnQoYVsxXSthWzFdLDE2KSsiLCIrcGFyc2VJbnQoYVsyXSthWzJdLDE2KSsiLCIrcGFyc2VJbnQoYVszXSthWzNdLDE2KSsiLCIrYisiKSJ9ZnVuY3Rpb24gaihhLGIsYyl7dHJ5e2Euc3R5bGVbYl09Y31jYXRjaChkKXtyZXR1cm59fWMuX19lc01vZHVsZT0hMDt2YXIgaz1hKDUpLGw9ZShrKSxtPWEoODMpLG49ZChtKSxvPWEoOTUpLHA9ZShvKSxxPSIjMjIyIixyPSIjY2NjIixzPXttb25vc3BhY2U6Im1vbm9zcGFjZSIsc2Fuc1NlcmlmOiJzYW5zLXNlcmlmIixzZXJpZjoic2VyaWYiLG1vbm9zcGFjZVNhbnNTZXJpZjonIkFuZGFsZSBNb25vIiwgIkx1Y2lkYSBDb25zb2xlIiwgbW9ub3NwYWNlJyxtb25vc3BhY2VTZXJpZjonIkNvdXJpZXIgTmV3IiwgbW9ub3NwYWNlJyxwcm9wb3J0aW9uYWxTYW5zU2VyaWY6InNhbnMtc2VyaWYiLHByb3BvcnRpb25hbFNlcmlmOiJzZXJpZiIsY2FzdWFsOiciQ29taWMgU2FucyBNUyIsIEltcGFjdCwgZmFudGFzeScsc2NyaXB0OiciTW9ub3R5cGUgQ29yc2l2YSIsIGN1cnNpdmUnLHNtYWxsY2FwczonIkFuZGFsZSBNb25vIiwgIkx1Y2lkYSBDb25zb2xlIiwgbW9ub3NwYWNlLCBzYW5zLXNlcmlmJ30sdD1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGMsZCxlKXtmKHRoaXMsYik7dmFyIGg9Zyh0aGlzLGEuY2FsbCh0aGlzLGMsZCxlKSk7cmV0dXJuIGMub24oImxvYWRzdGFydCIsbi5iaW5kKGgsaC50b2dnbGVEaXNwbGF5KSksYy5vbigidGV4dHRyYWNrY2hhbmdlIixuLmJpbmQoaCxoLnVwZGF0ZURpc3BsYXkpKSxjLnJlYWR5KG4uYmluZChoLGZ1bmN0aW9uKCl7aWYoYy50ZWNoXyYmYy50ZWNoXy5mZWF0dXJlc05hdGl2ZVRleHRUcmFja3MpcmV0dXJuIHZvaWQgdGhpcy5oaWRlKCk7Yy5vbigiZnVsbHNjcmVlbmNoYW5nZSIsbi5iaW5kKHRoaXMsdGhpcy51cGRhdGVEaXNwbGF5KSk7Zm9yKHZhciBhPXRoaXMub3B0aW9uc18ucGxheWVyT3B0aW9ucy50cmFja3N8fFtdLGI9MDtiPGEubGVuZ3RoO2IrKyl0aGlzLnBsYXllcl8uYWRkUmVtb3RlVGV4dFRyYWNrKGFbYl0sITApO3ZhciBkPXtjYXB0aW9uczoxLHN1YnRpdGxlczoxfSxlPXRoaXMucGxheWVyXy50ZXh0VHJhY2tzKCksZj12b2lkIDAsZz12b2lkIDA7aWYoZSl7Zm9yKHZhciBoPTA7aDxlLmxlbmd0aDtoKyspe3ZhciBpPWVbaF07aVsiZGVmYXVsdCJdJiYoImRlc2NyaXB0aW9ucyIhPT1pLmtpbmR8fGY/aS5raW5kIGluIGQmJiFnJiYoZz1pKTpmPWkpfWc/Zy5tb2RlPSJzaG93aW5nIjpmJiYoZi5tb2RlPSJzaG93aW5nIil9fSkpLGh9cmV0dXJuIGgoYixhKSxiLnByb3RvdHlwZS50b2dnbGVEaXNwbGF5PWZ1bmN0aW9uKCl7dGhpcy5wbGF5ZXJfLnRlY2hfJiZ0aGlzLnBsYXllcl8udGVjaF8uZmVhdHVyZXNOYXRpdmVUZXh0VHJhY2tzP3RoaXMuaGlkZSgpOnRoaXMuc2hvdygpfSxiLnByb3RvdHlwZS5jcmVhdGVFbD1mdW5jdGlvbigpe3JldHVybiBhLnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsImRpdiIse2NsYXNzTmFtZToidmpzLXRleHQtdHJhY2stZGlzcGxheSJ9LHsiYXJpYS1saXZlIjoib2ZmIiwiYXJpYS1hdG9taWMiOiJ0cnVlIn0pfSxiLnByb3RvdHlwZS5jbGVhckRpc3BsYXk9ZnVuY3Rpb24oKXsiZnVuY3Rpb24iPT10eXBlb2YgcFsiZGVmYXVsdCJdLldlYlZUVCYmcFsiZGVmYXVsdCJdLldlYlZUVC5wcm9jZXNzQ3VlcyhwWyJkZWZhdWx0Il0sW10sdGhpcy5lbF8pfSxiLnByb3RvdHlwZS51cGRhdGVEaXNwbGF5PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5wbGF5ZXJfLnRleHRUcmFja3MoKTtpZih0aGlzLmNsZWFyRGlzcGxheSgpLGEpe2Zvcih2YXIgYj1udWxsLGM9bnVsbCxkPWEubGVuZ3RoO2QtLTspe3ZhciBlPWFbZF07InNob3dpbmciPT09ZS5tb2RlJiYoImRlc2NyaXB0aW9ucyI9PT1lLmtpbmQ/Yj1lOmM9ZSl9Yz8oIm9mZiIhPT10aGlzLmdldEF0dHJpYnV0ZSgiYXJpYS1saXZlIikmJnRoaXMuc2V0QXR0cmlidXRlKCJhcmlhLWxpdmUiLCJvZmYiKSx0aGlzLnVwZGF0ZUZvclRyYWNrKGMpKTpiJiYoImFzc2VydGl2ZSIhPT10aGlzLmdldEF0dHJpYnV0ZSgiYXJpYS1saXZlIikmJnRoaXMuc2V0QXR0cmlidXRlKCJhcmlhLWxpdmUiLCJhc3NlcnRpdmUiKSx0aGlzLnVwZGF0ZUZvclRyYWNrKGIpKX19LGIucHJvdG90eXBlLnVwZGF0ZUZvclRyYWNrPWZ1bmN0aW9uKGEpe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBwWyJkZWZhdWx0Il0uV2ViVlRUJiZhLmFjdGl2ZUN1ZXMpe2Zvcih2YXIgYj10aGlzLnBsYXllcl8udGV4dFRyYWNrU2V0dGluZ3MuZ2V0VmFsdWVzKCksYz1bXSxkPTA7ZDxhLmFjdGl2ZUN1ZXMubGVuZ3RoO2QrKyljLnB1c2goYS5hY3RpdmVDdWVzW2RdKTtwWyJkZWZhdWx0Il0uV2ViVlRULnByb2Nlc3NDdWVzKHBbImRlZmF1bHQiXSxjLHRoaXMuZWxfKTtmb3IodmFyIGU9Yy5sZW5ndGg7ZS0tOyl7dmFyIGY9Y1tlXTtpZihmKXt2YXIgZz1mLmRpc3BsYXlTdGF0ZTtpZihiLmNvbG9yJiYoZy5maXJzdENoaWxkLnN0eWxlLmNvbG9yPWIuY29sb3IpLGIudGV4dE9wYWNpdHkmJmooZy5maXJzdENoaWxkLCJjb2xvciIsaShiLmNvbG9yfHwiI2ZmZiIsYi50ZXh0T3BhY2l0eSkpLGIuYmFja2dyb3VuZENvbG9yJiYoZy5maXJzdENoaWxkLnN0eWxlLmJhY2tncm91bmRDb2xvcj1iLmJhY2tncm91bmRDb2xvciksYi5iYWNrZ3JvdW5kT3BhY2l0eSYmaihnLmZpcnN0Q2hpbGQsImJhY2tncm91bmRDb2xvciIsaShiLmJhY2tncm91bmRDb2xvcnx8IiMwMDAiLGIuYmFja2dyb3VuZE9wYWNpdHkpKSxiLndpbmRvd0NvbG9yJiYoYi53aW5kb3dPcGFjaXR5P2ooZywiYmFja2dyb3VuZENvbG9yIixpKGIud2luZG93Q29sb3IsYi53aW5kb3dPcGFjaXR5KSk6Zy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9Yi53aW5kb3dDb2xvciksYi5lZGdlU3R5bGUmJigiZHJvcHNoYWRvdyI9PT1iLmVkZ2VTdHlsZT9nLmZpcnN0Q2hpbGQuc3R5bGUudGV4dFNoYWRvdz0iMnB4IDJweCAzcHggIitxKyIsIDJweCAycHggNHB4ICIrcSsiLCAycHggMnB4IDVweCAiK3E6InJhaXNlZCI9PT1iLmVkZ2VTdHlsZT9nLmZpcnN0Q2hpbGQuc3R5bGUudGV4dFNoYWRvdz0iMXB4IDFweCAiK3ErIiwgMnB4IDJweCAiK3ErIiwgM3B4IDNweCAiK3E6ImRlcHJlc3NlZCI9PT1iLmVkZ2VTdHlsZT9nLmZpcnN0Q2hpbGQuc3R5bGUudGV4dFNoYWRvdz0iMXB4IDFweCAiK3IrIiwgMCAxcHggIityKyIsIC0xcHggLTFweCAiK3ErIiwgMCAtMXB4ICIrcToidW5pZm9ybSI9PT1iLmVkZ2VTdHlsZSYmKGcuZmlyc3RDaGlsZC5zdHlsZS50ZXh0U2hhZG93PSIwIDAgNHB4ICIrcSsiLCAwIDAgNHB4ICIrcSsiLCAwIDAgNHB4ICIrcSsiLCAwIDAgNHB4ICIrcSkpLGIuZm9udFBlcmNlbnQmJjEhPT1iLmZvbnRQZXJjZW50KXt2YXIgaD1wWyJkZWZhdWx0Il0ucGFyc2VGbG9hdChnLnN0eWxlLmZvbnRTaXplKTtnLnN0eWxlLmZvbnRTaXplPWgqYi5mb250UGVyY2VudCsicHgiLGcuc3R5bGUuaGVpZ2h0PSJhdXRvIixnLnN0eWxlLnRvcD0iYXV0byIsZy5zdHlsZS5ib3R0b209IjJweCJ9Yi5mb250RmFtaWx5JiYiZGVmYXVsdCIhPT1iLmZvbnRGYW1pbHkmJigic21hbGwtY2FwcyI9PT1iLmZvbnRGYW1pbHk/Zy5maXJzdENoaWxkLnN0eWxlLmZvbnRWYXJpYW50PSJzbWFsbC1jYXBzIjpnLmZpcnN0Q2hpbGQuc3R5bGUuZm9udEZhbWlseT1zW2IuZm9udEZhbWlseV0pfX19fSxifShsWyJkZWZhdWx0Il0pO2xbImRlZmF1bHQiXS5yZWdpc3RlckNvbXBvbmVudCgiVGV4dFRyYWNrRGlzcGxheSIsdCksY1siZGVmYXVsdCJdPXR9LHs1OjUsODM6ODMsOTU6OTV9XSw2OTpbZnVuY3Rpb24oYSxiLGMpeyJ1c2Ugc3RyaWN0IjtjLl9fZXNNb2R1bGU9ITA7dmFyIGQ9ZnVuY3Rpb24oYSl7dmFyIGI9WyJraW5kIiwibGFiZWwiLCJsYW5ndWFnZSIsImlkIiwiaW5CYW5kTWV0YWRhdGFUcmFja0Rpc3BhdGNoVHlwZSIsIm1vZGUiLCJzcmMiXS5yZWR1Y2UoZnVuY3Rpb24oYixjLGQpe3JldHVybiBhW2NdJiYoYltjXT1hW2NdKSxifSx7Y3VlczphLmN1ZXMmJkFycmF5LnByb3RvdHlwZS5tYXAuY2FsbChhLmN1ZXMsZnVuY3Rpb24oYSl7cmV0dXJue3N0YXJ0VGltZTphLnN0YXJ0VGltZSxlbmRUaW1lOmEuZW5kVGltZSx0ZXh0OmEudGV4dCxpZDphLmlkfX0pfSk7cmV0dXJuIGJ9LGU9ZnVuY3Rpb24oYSl7dmFyIGI9YS4kJCgidHJhY2siKSxjPUFycmF5LnByb3RvdHlwZS5tYXAuY2FsbChiLGZ1bmN0aW9uKGEpe3JldHVybiBhLnRyYWNrfSksZT1BcnJheS5wcm90b3R5cGUubWFwLmNhbGwoYixmdW5jdGlvbihhKXt2YXIgYj1kKGEudHJhY2spO3JldHVybiBhLnNyYyYmKGIuc3JjPWEuc3JjKSxifSk7cmV0dXJuIGUuY29uY2F0KEFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbChhLnRleHRUcmFja3MoKSxmdW5jdGlvbihhKXtyZXR1cm4gYy5pbmRleE9mKGEpPT09LTF9KS5tYXAoZCkpfSxmPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYz1iLmFkZFJlbW90ZVRleHRUcmFjayhhKS50cmFjazshYS5zcmMmJmEuY3VlcyYmYS5jdWVzLmZvckVhY2goZnVuY3Rpb24oYSl7cmV0dXJuIGMuYWRkQ3VlKGEpfSl9KSxiLnRleHRUcmFja3MoKX07Y1siZGVmYXVsdCJdPXt0ZXh0VHJhY2tzVG9Kc29uOmUsanNvblRvVGV4dFRyYWNrczpmLHRyYWNrVG9Kc29uXzpkfX0se31dLDcwOltmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGQoYSl7aWYoYSYmYS5fX2VzTW9kdWxlKXJldHVybiBhO3ZhciBiPXt9O2lmKG51bGwhPWEpZm9yKHZhciBjIGluIGEpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGEsYykmJihiW2NdPWFbY10pO3JldHVybiBiWyJkZWZhdWx0Il09YSxifWZ1bmN0aW9uIGUoYSl7cmV0dXJuIGEmJmEuX19lc01vZHVsZT9hOnsiZGVmYXVsdCI6YX19ZnVuY3Rpb24gZihhLGIpe2lmKCEoYSBpbnN0YW5jZW9mIGIpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIGcoYSxiKXtpZighYSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiFifHwib2JqZWN0IiE9dHlwZW9mIGImJiJmdW5jdGlvbiIhPXR5cGVvZiBiP2E6Yn1mdW5jdGlvbiBoKGEsYil7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGImJm51bGwhPT1iKXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgYik7YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiJiZiLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmEsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksYiYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoYSxiKTphLl9fcHJvdG9fXz1iKX1jLl9fZXNNb2R1bGU9ITA7dmFyIGk9YSg3NCksaj1lKGkpLGs9YSg4MyksbD1kKGspLG09YSg3OCksbj1kKG0pLG89YSg5NCkscD1lKG8pLHE9ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe3ZhciBjLGQsZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06W107Zih0aGlzLGIpO3ZhciBoPXZvaWQgMDtpZihuLklTX0lFOCl7aD1wWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgiY3VzdG9tIik7Zm9yKHZhciBpIGluIGpbImRlZmF1bHQiXS5wcm90b3R5cGUpImNvbnN0cnVjdG9yIiE9PWkmJihoW2ldPWpbImRlZmF1bHQiXS5wcm90b3R5cGVbaV0pO2Zvcih2YXIgayBpbiBiLnByb3RvdHlwZSkiY29uc3RydWN0b3IiIT09ayYmKGhba109Yi5wcm90b3R5cGVba10pfXJldHVybiBoPWM9Zyh0aGlzLGEuY2FsbCh0aGlzLGUsaCkpLGQ9aCxnKGMsZCl9cmV0dXJuIGgoYixhKSxiLnByb3RvdHlwZS5hZGRUcmFja189ZnVuY3Rpb24oYil7YS5wcm90b3R5cGUuYWRkVHJhY2tfLmNhbGwodGhpcyxiKSxiLmFkZEV2ZW50TGlzdGVuZXIoIm1vZGVjaGFuZ2UiLGwuYmluZCh0aGlzLGZ1bmN0aW9uKCl7dGhpcy50cmlnZ2VyKCJjaGFuZ2UiKX0pKX0sYn0oalsiZGVmYXVsdCJdKTtjWyJkZWZhdWx0Il09cX0sezc0Ojc0LDc4Ojc4LDgzOjgzLDk0Ojk0fV0sNzE6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZChhKXtpZihhJiZhLl9fZXNNb2R1bGUpcmV0dXJuIGE7dmFyIGI9e307aWYobnVsbCE9YSlmb3IodmFyIGMgaW4gYSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxjKSYmKGJbY109YVtjXSk7cmV0dXJuIGJbImRlZmF1bHQiXT1hLGJ9ZnVuY3Rpb24gZShhKXtyZXR1cm4gYSYmYS5fX2VzTW9kdWxlP2E6eyJkZWZhdWx0IjphfX1mdW5jdGlvbiBmKGEsYil7aWYoIShhIGluc3RhbmNlb2YgYikpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gZyhhLGIpe2lmKCFhKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWJ8fCJvYmplY3QiIT10eXBlb2YgYiYmImZ1bmN0aW9uIiE9dHlwZW9mIGI/YTpifWZ1bmN0aW9uIGgoYSxiKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgYiYmbnVsbCE9PWIpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBiKTthLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGImJmIucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6YSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxiJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihhLGIpOmEuX19wcm90b19fPWIpfWZ1bmN0aW9uIGkoYSxiKXtpZihiJiYoYT1iKGEpKSxhJiYibm9uZSIhPT1hKXJldHVybiBhfWZ1bmN0aW9uIGooYSxiKXt2YXIgYz1hLm9wdGlvbnNbYS5vcHRpb25zLnNlbGVjdGVkSW5kZXhdLnZhbHVlO3JldHVybiBpKGMsYil9ZnVuY3Rpb24gayhhLGIsYyl7aWYoYilmb3IodmFyIGQ9MDtkPGEub3B0aW9ucy5sZW5ndGg7ZCsrKWlmKGkoYS5vcHRpb25zW2RdLnZhbHVlLGMpPT09Yil7YS5zZWxlY3RlZEluZGV4PWQ7YnJlYWt9fWMuX19lc01vZHVsZT0hMDt2YXIgbD1hKDk1KSxtPWUobCksbj1hKDUpLG89ZShuKSxwPWEoODEpLHE9YSg4Mykscj1kKHEpLHM9YSg4OCksdD1kKHMpLHU9YSg4Niksdj1lKHUpLHc9InZqcy10ZXh0LXRyYWNrLXNldHRpbmdzIix4PVsiIzAwMCIsIkJsYWNrIl0seT1bIiMwMEYiLCJCbHVlIl0sej1bIiMwRkYiLCJDeWFuIl0sQT1bIiMwRjAiLCJHcmVlbiJdLEI9WyIjRjBGIiwiTWFnZW50YSJdLEM9WyIjRjAwIiwiUmVkIl0sRD1bIiNGRkYiLCJXaGl0ZSJdLEU9WyIjRkYwIiwiWWVsbG93Il0sRj1bIjEiLCJPcGFxdWUiXSxHPVsiMC41IiwiU2VtaS1UcmFuc3BhcmVudCJdLEg9WyIwIiwiVHJhbnNwYXJlbnQiXSxJPXtiYWNrZ3JvdW5kQ29sb3I6e3NlbGVjdG9yOiIudmpzLWJnLWNvbG9yID4gc2VsZWN0IixpZDoiY2FwdGlvbnMtYmFja2dyb3VuZC1jb2xvci0lcyIsbGFiZWw6IkNvbG9yIixvcHRpb25zOlt4LEQsQyxBLHksRSxCLHpdfSxiYWNrZ3JvdW5kT3BhY2l0eTp7c2VsZWN0b3I6Ii52anMtYmctb3BhY2l0eSA+IHNlbGVjdCIsaWQ6ImNhcHRpb25zLWJhY2tncm91bmQtb3BhY2l0eS0lcyIsbGFiZWw6IlRyYW5zcGFyZW5jeSIsb3B0aW9uczpbRixHLEhdfSxjb2xvcjp7c2VsZWN0b3I6Ii52anMtZmctY29sb3IgPiBzZWxlY3QiLGlkOiJjYXB0aW9ucy1mb3JlZ3JvdW5kLWNvbG9yLSVzIixsYWJlbDoiQ29sb3IiLG9wdGlvbnM6W0QseCxDLEEseSxFLEIsel19LGVkZ2VTdHlsZTp7c2VsZWN0b3I6Ii52anMtZWRnZS1zdHlsZSA+IHNlbGVjdCIsaWQ6IiVzIixsYWJlbDoiVGV4dCBFZGdlIFN0eWxlIixvcHRpb25zOltbIm5vbmUiLCJOb25lIl0sWyJyYWlzZWQiLCJSYWlzZWQiXSxbImRlcHJlc3NlZCIsIkRlcHJlc3NlZCJdLFsidW5pZm9ybSIsIlVuaWZvcm0iXSxbImRyb3BzaGFkb3ciLCJEcm9wc2hhZG93Il1dfSxmb250RmFtaWx5OntzZWxlY3RvcjoiLnZqcy1mb250LWZhbWlseSA+IHNlbGVjdCIsaWQ6ImNhcHRpb25zLWZvbnQtZmFtaWx5LSVzIixsYWJlbDoiRm9udCBGYW1pbHkiLG9wdGlvbnM6W1sicHJvcG9ydGlvbmFsU2Fuc1NlcmlmIiwiUHJvcG9ydGlvbmFsIFNhbnMtU2VyaWYiXSxbIm1vbm9zcGFjZVNhbnNTZXJpZiIsIk1vbm9zcGFjZSBTYW5zLVNlcmlmIl0sWyJwcm9wb3J0aW9uYWxTZXJpZiIsIlByb3BvcnRpb25hbCBTZXJpZiJdLFsibW9ub3NwYWNlU2VyaWYiLCJNb25vc3BhY2UgU2VyaWYiXSxbImNhc3VhbCIsIkNhc3VhbCJdLFsic2NyaXB0IiwiU2NyaXB0Il0sWyJzbWFsbC1jYXBzIiwiU21hbGwgQ2FwcyJdXX0sZm9udFBlcmNlbnQ6e3NlbGVjdG9yOiIudmpzLWZvbnQtcGVyY2VudCA+IHNlbGVjdCIsaWQ6ImNhcHRpb25zLWZvbnQtc2l6ZS0lcyIsbGFiZWw6IkZvbnQgU2l6ZSIsb3B0aW9uczpbWyIwLjUwIiwiNTAlIl0sWyIwLjc1IiwiNzUlIl0sWyIxLjAwIiwiMTAwJSJdLFsiMS4yNSIsIjEyNSUiXSxbIjEuNTAiLCIxNTAlIl0sWyIxLjc1IiwiMTc1JSJdLFsiMi4wMCIsIjIwMCUiXSxbIjMuMDAiLCIzMDAlIl0sWyI0LjAwIiwiNDAwJSJdXSwiZGVmYXVsdCI6MixwYXJzZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIjEuMDAiPT09YT9udWxsOk51bWJlcihhKX19LHRleHRPcGFjaXR5OntzZWxlY3RvcjoiLnZqcy10ZXh0LW9wYWNpdHkgPiBzZWxlY3QiLGlkOiJjYXB0aW9ucy1mb3JlZ3JvdW5kLW9wYWNpdHktJXMiLGxhYmVsOiJUcmFuc3BhcmVuY3kiLG9wdGlvbnM6W0YsR119LHdpbmRvd0NvbG9yOntzZWxlY3RvcjoiLnZqcy13aW5kb3ctY29sb3IgPiBzZWxlY3QiLGlkOiJjYXB0aW9ucy13aW5kb3ctY29sb3ItJXMiLGxhYmVsOiJDb2xvciJ9LHdpbmRvd09wYWNpdHk6e3NlbGVjdG9yOiIudmpzLXdpbmRvdy1vcGFjaXR5ID4gc2VsZWN0IixpZDoiY2FwdGlvbnMtd2luZG93LW9wYWNpdHktJXMiLGxhYmVsOiJUcmFuc3BhcmVuY3kiLG9wdGlvbnM6W0gsRyxGXX19O0kud2luZG93Q29sb3Iub3B0aW9ucz1JLmJhY2tncm91bmRDb2xvci5vcHRpb25zO3ZhciBKPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYyxkKXtmKHRoaXMsYik7dmFyIGU9Zyh0aGlzLGEuY2FsbCh0aGlzLGMsZCkpO3JldHVybiBlLnNldERlZmF1bHRzKCksZS5oaWRlKCksZS51cGRhdGVEaXNwbGF5PXIuYmluZChlLGUudXBkYXRlRGlzcGxheSksdm9pZCAwPT09ZC5wZXJzaXN0VGV4dFRyYWNrU2V0dGluZ3MmJihlLm9wdGlvbnNfLnBlcnNpc3RUZXh0VHJhY2tTZXR0aW5ncz1lLm9wdGlvbnNfLnBsYXllck9wdGlvbnMucGVyc2lzdFRleHRUcmFja1NldHRpbmdzKSxlLm9uKGUuJCgiLnZqcy1kb25lLWJ1dHRvbiIpLCJjbGljayIsZnVuY3Rpb24oKXtlLnNhdmVTZXR0aW5ncygpLGUuaGlkZSgpfSksZS5vbihlLiQoIi52anMtZGVmYXVsdC1idXR0b24iKSwiY2xpY2siLGZ1bmN0aW9uKCl7ZS5zZXREZWZhdWx0cygpLGUudXBkYXRlRGlzcGxheSgpfSksdC5lYWNoKEksZnVuY3Rpb24oYSl7ZS5vbihlLiQoYS5zZWxlY3RvciksImNoYW5nZSIsZS51cGRhdGVEaXNwbGF5KX0pLGUub3B0aW9uc18ucGVyc2lzdFRleHRUcmFja1NldHRpbmdzJiZlLnJlc3RvcmVTZXR0aW5ncygpLGV9cmV0dXJuIGgoYixhKSxiLnByb3RvdHlwZS5jcmVhdGVFbFNlbGVjdF89ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPUlbYV0sZD1jLmlkLnJlcGxhY2UoIiVzIix0aGlzLmlkXyk7cmV0dXJuWygwLHAuY3JlYXRlRWwpKCJsYWJlbCIse2NsYXNzTmFtZToidmpzLWxhYmVsIix0ZXh0Q29udGVudDpjLmxhYmVsfSx7ImZvciI6ZH0pLCgwLHAuY3JlYXRlRWwpKCJzZWxlY3QiLHtpZDpkfSx2b2lkIDAsYy5vcHRpb25zLm1hcChmdW5jdGlvbihhKXtyZXR1cm4oMCxwLmNyZWF0ZUVsKSgib3B0aW9uIix7dGV4dENvbnRlbnQ6Yi5sb2NhbGl6ZShhWzFdKSx2YWx1ZTphWzBdfSl9KSldfSxiLnByb3RvdHlwZS5jcmVhdGVFbEZnQ29sb3JfPWZ1bmN0aW9uKCl7dmFyIGE9KDAscC5jcmVhdGVFbCkoImxlZ2VuZCIse3RleHRDb250ZW50OnRoaXMubG9jYWxpemUoIlRleHQiKX0pLGI9dGhpcy5jcmVhdGVFbFNlbGVjdF8oImNvbG9yIiksYz0oMCxwLmNyZWF0ZUVsKSgic3BhbiIse2NsYXNzTmFtZToidmpzLXRleHQtb3BhY2l0eSB2anMtb3BhY2l0eSJ9LHZvaWQgMCx0aGlzLmNyZWF0ZUVsU2VsZWN0XygidGV4dE9wYWNpdHkiKSk7cmV0dXJuKDAscC5jcmVhdGVFbCkoImZpZWxkc2V0Iix7Y2xhc3NOYW1lOiJ2anMtZmctY29sb3IgdmpzLXRyYWNrc2V0dGluZyJ9LHZvaWQgMCxbYV0uY29uY2F0KGIsYykpfSxiLnByb3RvdHlwZS5jcmVhdGVFbEJnQ29sb3JfPWZ1bmN0aW9uKCl7dmFyIGE9KDAscC5jcmVhdGVFbCkoImxlZ2VuZCIse3RleHRDb250ZW50OnRoaXMubG9jYWxpemUoIkJhY2tncm91bmQiKX0pLGI9dGhpcy5jcmVhdGVFbFNlbGVjdF8oImJhY2tncm91bmRDb2xvciIpLGM9KDAscC5jcmVhdGVFbCkoInNwYW4iLHtjbGFzc05hbWU6InZqcy1iZy1vcGFjaXR5IHZqcy1vcGFjaXR5In0sdm9pZCAwLHRoaXMuY3JlYXRlRWxTZWxlY3RfKCJiYWNrZ3JvdW5kT3BhY2l0eSIpKTtyZXR1cm4oMCxwLmNyZWF0ZUVsKSgiZmllbGRzZXQiLHtjbGFzc05hbWU6InZqcy1iZy1jb2xvciB2anMtdHJhY2tzZXR0aW5nIn0sdm9pZCAwLFthXS5jb25jYXQoYixjKSl9LGIucHJvdG90eXBlLmNyZWF0ZUVsV2luQ29sb3JfPWZ1bmN0aW9uKCl7dmFyIGE9KDAscC5jcmVhdGVFbCkoImxlZ2VuZCIse3RleHRDb250ZW50OnRoaXMubG9jYWxpemUoIldpbmRvdyIpfSksYj10aGlzLmNyZWF0ZUVsU2VsZWN0Xygid2luZG93Q29sb3IiKSxjPSgwLHAuY3JlYXRlRWwpKCJzcGFuIix7Y2xhc3NOYW1lOiJ2anMtd2luZG93LW9wYWNpdHkgdmpzLW9wYWNpdHkifSx2b2lkIDAsdGhpcy5jcmVhdGVFbFNlbGVjdF8oIndpbmRvd09wYWNpdHkiKSk7cmV0dXJuKDAscC5jcmVhdGVFbCkoImZpZWxkc2V0Iix7Y2xhc3NOYW1lOiJ2anMtd2luZG93LWNvbG9yIHZqcy10cmFja3NldHRpbmcifSx2b2lkIDAsW2FdLmNvbmNhdChiLGMpKX0sYi5wcm90b3R5cGUuY3JlYXRlRWxDb2xvcnNfPWZ1bmN0aW9uKCl7cmV0dXJuKDAscC5jcmVhdGVFbCkoImRpdiIse2NsYXNzTmFtZToidmpzLXRyYWNrc2V0dGluZ3MtY29sb3JzIn0sdm9pZCAwLFt0aGlzLmNyZWF0ZUVsRmdDb2xvcl8oKSx0aGlzLmNyZWF0ZUVsQmdDb2xvcl8oKSx0aGlzLmNyZWF0ZUVsV2luQ29sb3JfKCldKX0sYi5wcm90b3R5cGUuY3JlYXRlRWxGb250Xz1mdW5jdGlvbigpe3ZhciBhPSgwLHAuY3JlYXRlRWwpKCJkaXYiLHtjbGFzc05hbWU6InZqcy1mb250LXBlcmNlbnQgdmpzLXRyYWNrc2V0dGluZyJ9LHZvaWQgMCx0aGlzLmNyZWF0ZUVsU2VsZWN0XygiZm9udFBlcmNlbnQiKSksYj0oMCxwLmNyZWF0ZUVsKSgiZGl2Iix7Y2xhc3NOYW1lOiJ2anMtZWRnZS1zdHlsZSB2anMtdHJhY2tzZXR0aW5nIn0sdm9pZCAwLHRoaXMuY3JlYXRlRWxTZWxlY3RfKCJlZGdlU3R5bGUiKSksYz0oMCxwLmNyZWF0ZUVsKSgiZGl2Iix7Y2xhc3NOYW1lOiJ2anMtZm9udC1mYW1pbHkgdmpzLXRyYWNrc2V0dGluZyJ9LHZvaWQgMCx0aGlzLmNyZWF0ZUVsU2VsZWN0XygiZm9udEZhbWlseSIpKTtyZXR1cm4oMCxwLmNyZWF0ZUVsKSgiZGl2Iix7Y2xhc3NOYW1lOiJ2anMtdHJhY2tzZXR0aW5ncy1mb250In0sdm9pZCAwLFthLGIsY10pfSxiLnByb3RvdHlwZS5jcmVhdGVFbENvbnRyb2xzXz1mdW5jdGlvbigpe3ZhciBhPSgwLHAuY3JlYXRlRWwpKCJidXR0b24iLHtjbGFzc05hbWU6InZqcy1kZWZhdWx0LWJ1dHRvbiIsdGV4dENvbnRlbnQ6dGhpcy5sb2NhbGl6ZSgiRGVmYXVsdHMiKX0pLGI9KDAscC5jcmVhdGVFbCkoImJ1dHRvbiIse2NsYXNzTmFtZToidmpzLWRvbmUtYnV0dG9uIix0ZXh0Q29udGVudDoiRG9uZSJ9KTtyZXR1cm4oMCxwLmNyZWF0ZUVsKSgiZGl2Iix7Y2xhc3NOYW1lOiJ2anMtdHJhY2tzZXR0aW5ncy1jb250cm9scyJ9LHZvaWQgMCxbYSxiXSl9LGIucHJvdG90eXBlLmNyZWF0ZUVsPWZ1bmN0aW9uKCl7dmFyIGE9KDAscC5jcmVhdGVFbCkoImRpdiIse2NsYXNzTmFtZToidmpzLXRyYWNrc2V0dGluZ3MifSx2b2lkIDAsW3RoaXMuY3JlYXRlRWxDb2xvcnNfKCksdGhpcy5jcmVhdGVFbEZvbnRfKCksdGhpcy5jcmVhdGVFbENvbnRyb2xzXygpXSksYj0oMCxwLmNyZWF0ZUVsKSgiZGl2Iix7Y2xhc3NOYW1lOiJ2anMtY29udHJvbC10ZXh0IixpZDoiVFRzZXR0aW5nc0RpYWxvZ0xhYmVsLSIrdGhpcy5pZF8sdGV4dENvbnRlbnQ6IkNhcHRpb24gU2V0dGluZ3MgRGlhbG9nIn0seyJhcmlhLWxldmVsIjoiMSIscm9sZToiaGVhZGluZyJ9KSxjPSgwLHAuY3JlYXRlRWwpKCJkaXYiLHtjbGFzc05hbWU6InZqcy1jb250cm9sLXRleHQiLGlkOiJUVHNldHRpbmdzRGlhbG9nRGVzY3JpcHRpb24tIit0aGlzLmlkXyx0ZXh0Q29udGVudDoiQmVnaW5uaW5nIG9mIGRpYWxvZyB3aW5kb3cuIEVzY2FwZSB3aWxsIGNhbmNlbCBhbmQgY2xvc2UgdGhlIHdpbmRvdy4ifSksZD0oMCxwLmNyZWF0ZUVsKSgiZGl2Iix2b2lkIDAse3JvbGU6ImRvY3VtZW50In0sW2IsYyxhXSk7cmV0dXJuKDAscC5jcmVhdGVFbCkoImRpdiIse2NsYXNzTmFtZToidmpzLWNhcHRpb24tc2V0dGluZ3MgdmpzLW1vZGFsLW92ZXJsYXkiLHRhYkluZGV4Oi0xfSx7cm9sZToiZGlhbG9nIiwiYXJpYS1sYWJlbGxlZGJ5IjpiLmlkLCJhcmlhLWRlc2NyaWJlZGJ5IjpjLmlkfSxkKX0sYi5wcm90b3R5cGUuZ2V0VmFsdWVzPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcztyZXR1cm4gdC5yZWR1Y2UoSSxmdW5jdGlvbihiLGMsZCl7dmFyIGU9aihhLiQoYy5zZWxlY3RvciksYy5wYXJzZXIpO3JldHVybiB2b2lkIDAhPT1lJiYoYltkXT1lKSxifSx7fSl9LGIucHJvdG90eXBlLnNldFZhbHVlcz1mdW5jdGlvbihhKXt2YXIgYj10aGlzO3QuZWFjaChJLGZ1bmN0aW9uKGMsZCl7ayhiLiQoYy5zZWxlY3RvciksYVtkXSxjLnBhcnNlcil9KX0sYi5wcm90b3R5cGUuc2V0RGVmYXVsdHM9ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3QuZWFjaChJLGZ1bmN0aW9uKGIpe3ZhciBjPWIuaGFzT3duUHJvcGVydHkoImRlZmF1bHQiKT9iWyJkZWZhdWx0Il06MDthLiQoYi5zZWxlY3Rvcikuc2VsZWN0ZWRJbmRleD1jfSl9LGIucHJvdG90eXBlLnJlc3RvcmVTZXR0aW5ncz1mdW5jdGlvbigpe3ZhciBhPXZvaWQgMDt0cnl7YT1KU09OLnBhcnNlKG1bImRlZmF1bHQiXS5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSh3KSl9Y2F0Y2goYil7dlsiZGVmYXVsdCJdLndhcm4oYil9YSYmdGhpcy5zZXRWYWx1ZXMoYSl9LGIucHJvdG90eXBlLnNhdmVTZXR0aW5ncz1mdW5jdGlvbigpe2lmKHRoaXMub3B0aW9uc18ucGVyc2lzdFRleHRUcmFja1NldHRpbmdzKXt2YXIgYT10aGlzLmdldFZhbHVlcygpO3RyeXtPYmplY3Qua2V5cyhhKS5sZW5ndGg/bVsiZGVmYXVsdCJdLmxvY2FsU3RvcmFnZS5zZXRJdGVtKHcsSlNPTi5zdHJpbmdpZnkoYSkpOm1bImRlZmF1bHQiXS5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSh3KX1jYXRjaChiKXt2WyJkZWZhdWx0Il0ud2FybihiKX19fSxiLnByb3RvdHlwZS51cGRhdGVEaXNwbGF5PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5wbGF5ZXJfLmdldENoaWxkKCJ0ZXh0VHJhY2tEaXNwbGF5Iik7YSYmYS51cGRhdGVEaXNwbGF5KCl9LGJ9KG9bImRlZmF1bHQiXSk7b1siZGVmYXVsdCJdLnJlZ2lzdGVyQ29tcG9uZW50KCJUZXh0VHJhY2tTZXR0aW5ncyIsSiksY1siZGVmYXVsdCJdPUp9LHs1OjUsODE6ODEsODM6ODMsODY6ODYsODg6ODgsOTU6OTV9XSw3MjpbZnVuY3Rpb24oYSxiLGMpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBkKGEpe2lmKGEmJmEuX19lc01vZHVsZSlyZXR1cm4gYTt2YXIgYj17fTtpZihudWxsIT1hKWZvcih2YXIgYyBpbiBhKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLGMpJiYoYltjXT1hW2NdKTtyZXR1cm4gYlsiZGVmYXVsdCJdPWEsYn1mdW5jdGlvbiBlKGEpe3JldHVybiBhJiZhLl9fZXNNb2R1bGU/YTp7ImRlZmF1bHQiOmF9fWZ1bmN0aW9uIGYoYSxiKXtpZighKGEgaW5zdGFuY2VvZiBiKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1mdW5jdGlvbiBnKGEsYil7aWYoIWEpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTtyZXR1cm4hYnx8Im9iamVjdCIhPXR5cGVvZiBiJiYiZnVuY3Rpb24iIT10eXBlb2YgYj9hOmJ9ZnVuY3Rpb24gaChhLGIpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBiJiZudWxsIT09Yil0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIGIpO2EucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYiYmYi5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTphLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGImJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKGEsYik6YS5fX3Byb3RvX189Yil9Yy5fX2VzTW9kdWxlPSEwO3ZhciBpPWEoNjcpLGo9ZShpKSxrPWEoODMpLGw9ZChrKSxtPWEoNzMpLG49YSg4Niksbz1lKG4pLHA9YSg5NSkscT1lKHApLHI9YSg3NSkscz1lKHIpLHQ9YSg5MiksdT1hKDk5KSx2PWUodSksdz1hKDg3KSx4PWUodykseT1hKDc4KSx6PWQoeSksQT1mdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBxWyJkZWZhdWx0Il0uV2ViVlRULlBhcnNlcihxWyJkZWZhdWx0Il0scVsiZGVmYXVsdCJdLnZ0dGpzLHFbImRlZmF1bHQiXS5XZWJWVFQuU3RyaW5nRGVjb2RlcigpKSxkPVtdO2Mub25jdWU9ZnVuY3Rpb24oYSl7Yi5hZGRDdWUoYSl9LGMub25wYXJzaW5nZXJyb3I9ZnVuY3Rpb24oYSl7ZC5wdXNoKGEpfSxjLm9uZmx1c2g9ZnVuY3Rpb24oKXtiLnRyaWdnZXIoe3R5cGU6ImxvYWRlZGRhdGEiLHRhcmdldDpifSl9LGMucGFyc2UoYSksZC5sZW5ndGg+MCYmKHFbImRlZmF1bHQiXS5jb25zb2xlJiZxWyJkZWZhdWx0Il0uY29uc29sZS5ncm91cENvbGxhcHNlZCYmcVsiZGVmYXVsdCJdLmNvbnNvbGUuZ3JvdXBDb2xsYXBzZWQoIlRleHQgVHJhY2sgcGFyc2luZyBlcnJvcnMgZm9yICIrYi5zcmMpLGQuZm9yRWFjaChmdW5jdGlvbihhKXtyZXR1cm4gb1siZGVmYXVsdCJdLmVycm9yKGEpfSkscVsiZGVmYXVsdCJdLmNvbnNvbGUmJnFbImRlZmF1bHQiXS5jb25zb2xlLmdyb3VwRW5kJiZxWyJkZWZhdWx0Il0uY29uc29sZS5ncm91cEVuZCgpKSxjLmZsdXNoKCl9LEI9ZnVuY3Rpb24oYSxiKXt2YXIgYz17dXJpOmF9LGQ9KDAsdC5pc0Nyb3NzT3JpZ2luKShhKTtkJiYoYy5jb3JzPWQpLCgwLHZbImRlZmF1bHQiXSkoYyxsLmJpbmQodGhpcyxmdW5jdGlvbihhLGMsZCl7cmV0dXJuIGE/b1siZGVmYXVsdCJdLmVycm9yKGEsYyk6KGIubG9hZGVkXz0hMCx2b2lkKCJmdW5jdGlvbiIhPXR5cGVvZiBxWyJkZWZhdWx0Il0uV2ViVlRUP2IudGVjaF8mJiFmdW5jdGlvbigpe3ZhciBhPWZ1bmN0aW9uKCl7cmV0dXJuIEEoZCxiKX07Yi50ZWNoXy5vbigidnR0anNsb2FkZWQiLGEpLGIudGVjaF8ub24oInZ0dGpzZXJyb3IiLGZ1bmN0aW9uKCl7b1siZGVmYXVsdCJdLmVycm9yKCJ2dHRqcyBmYWlsZWQgdG8gbG9hZCwgc3RvcHBpbmcgdHJ5aW5nIHRvIHByb2Nlc3MgIitiLnNyYyksYi50ZWNoXy5vZmYoInZ0dGpzbG9hZGVkIixhKX0pfSgpOkEoZCxiKSkpfSkpfSxDPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXt2YXIgYyxkLGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O2lmKGYodGhpcyxiKSwhZS50ZWNoKXRocm93IG5ldyBFcnJvcigiQSB0ZWNoIHdhcyBub3QgcHJvdmlkZWQuIik7dmFyIGg9KDAseFsiZGVmYXVsdCJdKShlLHtraW5kOm0uVGV4dFRyYWNrS2luZFtlLmtpbmRdfHwic3VidGl0bGVzIixsYW5ndWFnZTplLmxhbmd1YWdlfHxlLnNyY2xhbmd8fCIifSksaT1tLlRleHRUcmFja01vZGVbaC5tb2RlXXx8ImRpc2FibGVkIixrPWhbImRlZmF1bHQiXTsibWV0YWRhdGEiIT09aC5raW5kJiYiY2hhcHRlcnMiIT09aC5raW5kfHwoaT0iaGlkZGVuIik7dmFyIG49Yz1nKHRoaXMsYS5jYWxsKHRoaXMsaCkpO2lmKG4udGVjaF89aC50ZWNoLHouSVNfSUU4KWZvcih2YXIgbyBpbiBiLnByb3RvdHlwZSkiY29uc3RydWN0b3IiIT09byYmKG5bb109Yi5wcm90b3R5cGVbb10pO24uY3Vlc189W10sbi5hY3RpdmVDdWVzXz1bXTt2YXIgcD1uZXcgalsiZGVmYXVsdCJdKG4uY3Vlc18pLHE9bmV3IGpbImRlZmF1bHQiXShuLmFjdGl2ZUN1ZXNfKSxyPSExLHM9bC5iaW5kKG4sZnVuY3Rpb24oKXt0aGlzLmFjdGl2ZUN1ZXMsciYmKHRoaXMudHJpZ2dlcigiY3VlY2hhbmdlIikscj0hMSl9KTtyZXR1cm4iZGlzYWJsZWQiIT09aSYmbi50ZWNoXy5vbigidGltZXVwZGF0ZSIscyksT2JqZWN0LmRlZmluZVByb3BlcnR5KG4sImRlZmF1bHQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4ga30sc2V0OmZ1bmN0aW9uKCl7fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLCJtb2RlIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGl9LHNldDpmdW5jdGlvbihhKXttLlRleHRUcmFja01vZGVbYV0mJihpPWEsInNob3dpbmciPT09aSYmdGhpcy50ZWNoXy5vbigidGltZXVwZGF0ZSIscyksdGhpcy50cmlnZ2VyKCJtb2RlY2hhbmdlIikpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLCJjdWVzIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubG9hZGVkXz9wOm51bGx9LHNldDpmdW5jdGlvbigpe319KSxPYmplY3QuZGVmaW5lUHJvcGVydHkobiwiYWN0aXZlQ3VlcyIse2dldDpmdW5jdGlvbigpe2lmKCF0aGlzLmxvYWRlZF8pcmV0dXJuIG51bGw7aWYoMD09PXRoaXMuY3Vlcy5sZW5ndGgpcmV0dXJuIHE7Zm9yKHZhciBhPXRoaXMudGVjaF8uY3VycmVudFRpbWUoKSxiPVtdLGM9MCxkPXRoaXMuY3Vlcy5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9dGhpcy5jdWVzW2NdO2Uuc3RhcnRUaW1lPD1hJiZlLmVuZFRpbWU+PWE/Yi5wdXNoKGUpOmUuc3RhcnRUaW1lPT09ZS5lbmRUaW1lJiZlLnN0YXJ0VGltZTw9YSYmZS5zdGFydFRpbWUrLjU+PWEmJmIucHVzaChlKX1pZihyPSExLGIubGVuZ3RoIT09dGhpcy5hY3RpdmVDdWVzXy5sZW5ndGgpcj0hMDtlbHNlIGZvcih2YXIgZj0wO2Y8Yi5sZW5ndGg7ZisrKXRoaXMuYWN0aXZlQ3Vlc18uaW5kZXhPZihiW2ZdKT09PS0xJiYocj0hMCk7cmV0dXJuIHRoaXMuYWN0aXZlQ3Vlc189YixxLnNldEN1ZXNfKHRoaXMuYWN0aXZlQ3Vlc18pLApxfSxzZXQ6ZnVuY3Rpb24oKXt9fSksaC5zcmM/KG4uc3JjPWguc3JjLEIoaC5zcmMsbikpOm4ubG9hZGVkXz0hMCxkPW4sZyhjLGQpfXJldHVybiBoKGIsYSksYi5wcm90b3R5cGUuYWRkQ3VlPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMudGVjaF8udGV4dFRyYWNrcygpO2lmKGIpZm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspYltjXSE9PXRoaXMmJmJbY10ucmVtb3ZlQ3VlKGEpO3RoaXMuY3Vlc18ucHVzaChhKSx0aGlzLmN1ZXMuc2V0Q3Vlc18odGhpcy5jdWVzXyl9LGIucHJvdG90eXBlLnJlbW92ZUN1ZT1mdW5jdGlvbihhKXtmb3IodmFyIGI9ITEsYz0wLGQ9dGhpcy5jdWVzXy5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9dGhpcy5jdWVzX1tjXTtlPT09YSYmKHRoaXMuY3Vlc18uc3BsaWNlKGMsMSksYj0hMCl9YiYmdGhpcy5jdWVzLnNldEN1ZXNfKHRoaXMuY3Vlc18pfSxifShzWyJkZWZhdWx0Il0pO0MucHJvdG90eXBlLmFsbG93ZWRFdmVudHNfPXtjdWVjaGFuZ2U6ImN1ZWNoYW5nZSJ9LGNbImRlZmF1bHQiXT1DfSx7Njc6NjcsNzM6NzMsNzU6NzUsNzg6NzgsODM6ODMsODY6ODYsODc6ODcsOTI6OTIsOTU6OTUsOTk6OTl9XSw3MzpbZnVuY3Rpb24oYSxiLGMpeyJ1c2Ugc3RyaWN0IjtjLl9fZXNNb2R1bGU9ITA7Yy5WaWRlb1RyYWNrS2luZD17YWx0ZXJuYXRpdmU6ImFsdGVybmF0aXZlIixjYXB0aW9uczoiY2FwdGlvbnMiLG1haW46Im1haW4iLHNpZ246InNpZ24iLHN1YnRpdGxlczoic3VidGl0bGVzIixjb21tZW50YXJ5OiJjb21tZW50YXJ5In0sYy5BdWRpb1RyYWNrS2luZD17YWx0ZXJuYXRpdmU6ImFsdGVybmF0aXZlIixkZXNjcmlwdGlvbnM6ImRlc2NyaXB0aW9ucyIsbWFpbjoibWFpbiIsIm1haW4tZGVzYyI6Im1haW4tZGVzYyIsdHJhbnNsYXRpb246InRyYW5zbGF0aW9uIixjb21tZW50YXJ5OiJjb21tZW50YXJ5In0sYy5UZXh0VHJhY2tLaW5kPXtzdWJ0aXRsZXM6InN1YnRpdGxlcyIsY2FwdGlvbnM6ImNhcHRpb25zIixkZXNjcmlwdGlvbnM6ImRlc2NyaXB0aW9ucyIsY2hhcHRlcnM6ImNoYXB0ZXJzIixtZXRhZGF0YToibWV0YWRhdGEifSxjLlRleHRUcmFja01vZGU9e2Rpc2FibGVkOiJkaXNhYmxlZCIsaGlkZGVuOiJoaWRkZW4iLHNob3dpbmc6InNob3dpbmcifX0se31dLDc0OltmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGQoYSl7aWYoYSYmYS5fX2VzTW9kdWxlKXJldHVybiBhO3ZhciBiPXt9O2lmKG51bGwhPWEpZm9yKHZhciBjIGluIGEpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGEsYykmJihiW2NdPWFbY10pO3JldHVybiBiWyJkZWZhdWx0Il09YSxifWZ1bmN0aW9uIGUoYSl7cmV0dXJuIGEmJmEuX19lc01vZHVsZT9hOnsiZGVmYXVsdCI6YX19ZnVuY3Rpb24gZihhLGIpe2lmKCEoYSBpbnN0YW5jZW9mIGIpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIGcoYSxiKXtpZighYSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiFifHwib2JqZWN0IiE9dHlwZW9mIGImJiJmdW5jdGlvbiIhPXR5cGVvZiBiP2E6Yn1mdW5jdGlvbiBoKGEsYil7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGImJm51bGwhPT1iKXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgYik7YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiJiZiLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmEsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksYiYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoYSxiKTphLl9fcHJvdG9fXz1iKX1jLl9fZXNNb2R1bGU9ITA7dmFyIGk9YSg0Miksaj1lKGkpLGs9YSg3OCksbD1kKGspLG09YSg5NCksbj1lKG0pLG89ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe3ZhciBjLGQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOltdLGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOm51bGw7Zih0aGlzLGIpO3ZhciBoPWcodGhpcyxhLmNhbGwodGhpcykpO2lmKCFlJiYoZT1oLGwuSVNfSUU4KSl7ZT1uWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgiY3VzdG9tIik7Zm9yKHZhciBpIGluIGIucHJvdG90eXBlKSJjb25zdHJ1Y3RvciIhPT1pJiYoZVtpXT1iLnByb3RvdHlwZVtpXSl9ZS50cmFja3NfPVtdLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJsZW5ndGgiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmFja3NfLmxlbmd0aH19KTtmb3IodmFyIGo9MDtqPGQubGVuZ3RoO2orKyllLmFkZFRyYWNrXyhkW2pdKTtyZXR1cm4gYz1lLGcoaCxjKX1yZXR1cm4gaChiLGEpLGIucHJvdG90eXBlLmFkZFRyYWNrXz1mdW5jdGlvbihhKXt2YXIgYj10aGlzLnRyYWNrc18ubGVuZ3RoOyIiK2IgaW4gdGhpc3x8T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsYix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJhY2tzX1tiXX19KSx0aGlzLnRyYWNrc18uaW5kZXhPZihhKT09PS0xJiYodGhpcy50cmFja3NfLnB1c2goYSksdGhpcy50cmlnZ2VyKHt0cmFjazphLHR5cGU6ImFkZHRyYWNrIn0pKX0sYi5wcm90b3R5cGUucmVtb3ZlVHJhY2tfPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj12b2lkIDAsYz0wLGQ9dGhpcy5sZW5ndGg7YzxkO2MrKylpZih0aGlzW2NdPT09YSl7Yj10aGlzW2NdLGIub2ZmJiZiLm9mZigpLHRoaXMudHJhY2tzXy5zcGxpY2UoYywxKTticmVha31iJiZ0aGlzLnRyaWdnZXIoe3RyYWNrOmIsdHlwZToicmVtb3ZldHJhY2sifSl9LGIucHJvdG90eXBlLmdldFRyYWNrQnlJZD1mdW5jdGlvbihhKXtmb3IodmFyIGI9bnVsbCxjPTAsZD10aGlzLmxlbmd0aDtjPGQ7YysrKXt2YXIgZT10aGlzW2NdO2lmKGUuaWQ9PT1hKXtiPWU7YnJlYWt9fXJldHVybiBifSxifShqWyJkZWZhdWx0Il0pO28ucHJvdG90eXBlLmFsbG93ZWRFdmVudHNfPXtjaGFuZ2U6ImNoYW5nZSIsYWRkdHJhY2s6ImFkZHRyYWNrIixyZW1vdmV0cmFjazoicmVtb3ZldHJhY2sifTtmb3IodmFyIHAgaW4gby5wcm90b3R5cGUuYWxsb3dlZEV2ZW50c18pby5wcm90b3R5cGVbIm9uIitwXT1udWxsO2NbImRlZmF1bHQiXT1vfSx7NDI6NDIsNzg6NzgsOTQ6OTR9XSw3NTpbZnVuY3Rpb24oYSxiLGMpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBkKGEpe3JldHVybiBhJiZhLl9fZXNNb2R1bGU/YTp7ImRlZmF1bHQiOmF9fWZ1bmN0aW9uIGUoYSl7aWYoYSYmYS5fX2VzTW9kdWxlKXJldHVybiBhO3ZhciBiPXt9O2lmKG51bGwhPWEpZm9yKHZhciBjIGluIGEpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGEsYykmJihiW2NdPWFbY10pO3JldHVybiBiWyJkZWZhdWx0Il09YSxifWZ1bmN0aW9uIGYoYSxiKXtpZighKGEgaW5zdGFuY2VvZiBiKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1mdW5jdGlvbiBnKGEsYil7aWYoIWEpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTtyZXR1cm4hYnx8Im9iamVjdCIhPXR5cGVvZiBiJiYiZnVuY3Rpb24iIT10eXBlb2YgYj9hOmJ9ZnVuY3Rpb24gaChhLGIpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBiJiZudWxsIT09Yil0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIGIpO2EucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYiYmYi5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTphLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGImJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKGEsYik6YS5fX3Byb3RvX189Yil9Yy5fX2VzTW9kdWxlPSEwO3ZhciBpPWEoNzgpLGo9ZShpKSxrPWEoOTQpLGw9ZChrKSxtPWEoODUpLG49ZShtKSxvPWEoNDIpLHA9ZChvKSxxPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXt2YXIgYyxkPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTtmKHRoaXMsYik7dmFyIGU9Zyh0aGlzLGEuY2FsbCh0aGlzKSksaD1lO2lmKGouSVNfSUU4KXtoPWxbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCJjdXN0b20iKTtmb3IodmFyIGkgaW4gYi5wcm90b3R5cGUpImNvbnN0cnVjdG9yIiE9PWkmJihoW2ldPWIucHJvdG90eXBlW2ldKX12YXIgaz17aWQ6ZC5pZHx8InZqc190cmFja18iK24ubmV3R1VJRCgpLGtpbmQ6ZC5raW5kfHwiIixsYWJlbDpkLmxhYmVsfHwiIixsYW5ndWFnZTpkLmxhbmd1YWdlfHwiIn0sbT1mdW5jdGlvbihhKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoaCxhLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4ga1thXX0sc2V0OmZ1bmN0aW9uKCl7fX0pfTtmb3IodmFyIG8gaW4gayltKG8pO3JldHVybiBjPWgsZyhlLGMpfXJldHVybiBoKGIsYSksYn0ocFsiZGVmYXVsdCJdKTtjWyJkZWZhdWx0Il09cX0sezQyOjQyLDc4Ojc4LDg1Ojg1LDk0Ojk0fV0sNzY6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZChhKXtpZihhJiZhLl9fZXNNb2R1bGUpcmV0dXJuIGE7dmFyIGI9e307aWYobnVsbCE9YSlmb3IodmFyIGMgaW4gYSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxjKSYmKGJbY109YVtjXSk7cmV0dXJuIGJbImRlZmF1bHQiXT1hLGJ9ZnVuY3Rpb24gZShhKXtyZXR1cm4gYSYmYS5fX2VzTW9kdWxlP2E6eyJkZWZhdWx0IjphfX1mdW5jdGlvbiBmKGEsYil7aWYoIShhIGluc3RhbmNlb2YgYikpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gZyhhLGIpe2lmKCFhKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWJ8fCJvYmplY3QiIT10eXBlb2YgYiYmImZ1bmN0aW9uIiE9dHlwZW9mIGI/YTpifWZ1bmN0aW9uIGgoYSxiKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgYiYmbnVsbCE9PWIpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBiKTthLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGImJmIucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6YSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxiJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihhLGIpOmEuX19wcm90b19fPWIpfWMuX19lc01vZHVsZT0hMDt2YXIgaT1hKDc0KSxqPWUoaSksaz1hKDc4KSxsPWQoayksbT1hKDk0KSxuPWUobSksbz1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKWIuaWQhPT1hW2NdLmlkJiYoYVtjXS5zZWxlY3RlZD0hMSl9LHA9ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe3ZhciBjLGQsZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06W107Zih0aGlzLGIpO2Zvcih2YXIgaD12b2lkIDAsaT1lLmxlbmd0aC0xO2k+PTA7aS0tKWlmKGVbaV0uc2VsZWN0ZWQpe28oZSxlW2ldKTticmVha31pZihsLklTX0lFOCl7aD1uWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgiY3VzdG9tIik7Zm9yKHZhciBrIGluIGpbImRlZmF1bHQiXS5wcm90b3R5cGUpImNvbnN0cnVjdG9yIiE9PWsmJihoW2tdPWpbImRlZmF1bHQiXS5wcm90b3R5cGVba10pO2Zvcih2YXIgbSBpbiBiLnByb3RvdHlwZSkiY29uc3RydWN0b3IiIT09bSYmKGhbbV09Yi5wcm90b3R5cGVbbV0pfXJldHVybiBoPWM9Zyh0aGlzLGEuY2FsbCh0aGlzLGUsaCkpLGguY2hhbmdpbmdfPSExLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShoLCJzZWxlY3RlZEluZGV4Iix7Z2V0OmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTx0aGlzLmxlbmd0aDthKyspaWYodGhpc1thXS5zZWxlY3RlZClyZXR1cm4gYTtyZXR1cm4tMX0sc2V0OmZ1bmN0aW9uKCl7fX0pLGQ9aCxnKGMsZCl9cmV0dXJuIGgoYixhKSxiLnByb3RvdHlwZS5hZGRUcmFja189ZnVuY3Rpb24oYil7dmFyIGM9dGhpcztiLnNlbGVjdGVkJiZvKHRoaXMsYiksYS5wcm90b3R5cGUuYWRkVHJhY2tfLmNhbGwodGhpcyxiKSxiLmFkZEV2ZW50TGlzdGVuZXImJmIuYWRkRXZlbnRMaXN0ZW5lcigic2VsZWN0ZWRjaGFuZ2UiLGZ1bmN0aW9uKCl7Yy5jaGFuZ2luZ198fChjLmNoYW5naW5nXz0hMCxvKGMsYiksYy5jaGFuZ2luZ189ITEsYy50cmlnZ2VyKCJjaGFuZ2UiKSl9KX0sYi5wcm90b3R5cGUuYWRkVHJhY2s9ZnVuY3Rpb24oYSl7dGhpcy5hZGRUcmFja18oYSl9LGIucHJvdG90eXBlLnJlbW92ZVRyYWNrPWZ1bmN0aW9uKGIpe2EucHJvdG90eXBlLnJlbW92ZVRyYWNrXy5jYWxsKHRoaXMsYil9LGJ9KGpbImRlZmF1bHQiXSk7Y1siZGVmYXVsdCJdPXB9LHs3NDo3NCw3ODo3OCw5NDo5NH1dLDc3OltmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGQoYSl7aWYoYSYmYS5fX2VzTW9kdWxlKXJldHVybiBhO3ZhciBiPXt9O2lmKG51bGwhPWEpZm9yKHZhciBjIGluIGEpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGEsYykmJihiW2NdPWFbY10pO3JldHVybiBiWyJkZWZhdWx0Il09YSxifWZ1bmN0aW9uIGUoYSl7cmV0dXJuIGEmJmEuX19lc01vZHVsZT9hOnsiZGVmYXVsdCI6YX19ZnVuY3Rpb24gZihhLGIpe2lmKCEoYSBpbnN0YW5jZW9mIGIpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIGcoYSxiKXtpZighYSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiFifHwib2JqZWN0IiE9dHlwZW9mIGImJiJmdW5jdGlvbiIhPXR5cGVvZiBiP2E6Yn1mdW5jdGlvbiBoKGEsYil7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGImJm51bGwhPT1iKXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgYik7YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiJiZiLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmEsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksYiYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoYSxiKTphLl9fcHJvdG9fXz1iKX1jLl9fZXNNb2R1bGU9ITA7dmFyIGk9YSg3Myksaj1hKDc1KSxrPWUoaiksbD1hKDg3KSxtPWUobCksbj1hKDc4KSxvPWQobikscD1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7dmFyIGMsZCxlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTtmKHRoaXMsYik7dmFyIGg9KDAsbVsiZGVmYXVsdCJdKShlLHtraW5kOmkuVmlkZW9UcmFja0tpbmRbZS5raW5kXXx8IiJ9KSxqPWM9Zyh0aGlzLGEuY2FsbCh0aGlzLGgpKSxrPSExO2lmKG8uSVNfSUU4KWZvcih2YXIgbCBpbiBiLnByb3RvdHlwZSkiY29uc3RydWN0b3IiIT09bCYmKGpbbF09Yi5wcm90b3R5cGVbbF0pO3JldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoaiwic2VsZWN0ZWQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4ga30sc2V0OmZ1bmN0aW9uKGEpeyJib29sZWFuIj09dHlwZW9mIGEmJmEhPT1rJiYoaz1hLHRoaXMudHJpZ2dlcigic2VsZWN0ZWRjaGFuZ2UiKSl9fSksaC5zZWxlY3RlZCYmKGouc2VsZWN0ZWQ9aC5zZWxlY3RlZCksZD1qLGcoYyxkKX1yZXR1cm4gaChiLGEpLGJ9KGtbImRlZmF1bHQiXSk7Y1siZGVmYXVsdCJdPXB9LHs3Mzo3Myw3NTo3NSw3ODo3OCw4Nzo4N31dLDc4OltmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGQoYSl7cmV0dXJuIGEmJmEuX19lc01vZHVsZT9hOnsiZGVmYXVsdCI6YX19ZnVuY3Rpb24gZShhKXtpZihhJiZhLl9fZXNNb2R1bGUpcmV0dXJuIGE7dmFyIGI9e307aWYobnVsbCE9YSlmb3IodmFyIGMgaW4gYSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxjKSYmKGJbY109YVtjXSk7cmV0dXJuIGJbImRlZmF1bHQiXT1hLGJ9Yy5fX2VzTW9kdWxlPSEwLGMuQkFDS0dST1VORF9TSVpFX1NVUFBPUlRFRD1jLlRPVUNIX0VOQUJMRUQ9Yy5JU19BTllfU0FGQVJJPWMuSVNfU0FGQVJJPWMuSUVfVkVSU0lPTj1jLklTX0lFOD1jLklTX0NIUk9NRT1jLklTX0VER0U9Yy5JU19GSVJFRk9YPWMuSVNfTkFUSVZFX0FORFJPSUQ9Yy5JU19PTERfQU5EUk9JRD1jLkFORFJPSURfVkVSU0lPTj1jLklTX0FORFJPSUQ9Yy5JT1NfVkVSU0lPTj1jLklTX0lPUz1jLklTX0lQT0Q9Yy5JU19JUEhPTkU9Yy5JU19JUEFEPXZvaWQgMDt2YXIgZj1hKDgxKSxnPWUoZiksaD1hKDk1KSxpPWQoaCksaj1pWyJkZWZhdWx0Il0ubmF2aWdhdG9yJiZpWyJkZWZhdWx0Il0ubmF2aWdhdG9yLnVzZXJBZ2VudHx8IiIsaz0vQXBwbGVXZWJLaXRcLyhbXGQuXSspL2kuZXhlYyhqKSxsPWs/cGFyc2VGbG9hdChrLnBvcCgpKTpudWxsLG09Yy5JU19JUEFEPS9pUGFkL2kudGVzdChqKSxuPWMuSVNfSVBIT05FPS9pUGhvbmUvaS50ZXN0KGopJiYhbSxvPWMuSVNfSVBPRD0vaVBvZC9pLnRlc3QoaikscD1jLklTX0lPUz1ufHxtfHxvLHE9KGMuSU9TX1ZFUlNJT049ZnVuY3Rpb24oKXt2YXIgYT1qLm1hdGNoKC9PUyAoXGQrKV8vaSk7cmV0dXJuIGEmJmFbMV0/YVsxXTpudWxsfSgpLGMuSVNfQU5EUk9JRD0vQW5kcm9pZC9pLnRlc3QoaikpLHI9Yy5BTkRST0lEX1ZFUlNJT049ZnVuY3Rpb24oKXt2YXIgYT1qLm1hdGNoKC9BbmRyb2lkIChcZCspKD86XC4oXGQrKSk/KD86XC4oXGQrKSkqL2kpO2lmKCFhKXJldHVybiBudWxsO3ZhciBiPWFbMV0mJnBhcnNlRmxvYXQoYVsxXSksYz1hWzJdJiZwYXJzZUZsb2F0KGFbMl0pO3JldHVybiBiJiZjP3BhcnNlRmxvYXQoYVsxXSsiLiIrYVsyXSk6Yj9iOm51bGx9KCkscz0oYy5JU19PTERfQU5EUk9JRD1xJiYvd2Via2l0L2kudGVzdChqKSYmcjwyLjMsYy5JU19OQVRJVkVfQU5EUk9JRD1xJiZyPDUmJmw8NTM3LGMuSVNfRklSRUZPWD0vRmlyZWZveC9pLnRlc3QoaiksYy5JU19FREdFPS9FZGdlL2kudGVzdChqKSksdD1jLklTX0NIUk9NRT0hcyYmL0Nocm9tZS9pLnRlc3QoaiksdT0oYy5JU19JRTg9L01TSUVcczhcLjAvLnRlc3QoaiksYy5JRV9WRVJTSU9OPWZ1bmN0aW9uKGEpe3JldHVybiBhJiZwYXJzZUZsb2F0KGFbMV0pfSgvTVNJRVxzKFxkKylcLlxkLy5leGVjKGopKSxjLklTX1NBRkFSST0vU2FmYXJpL2kudGVzdChqKSYmIXQmJiFxJiYhcyk7Yy5JU19BTllfU0FGQVJJPXV8fHAsYy5UT1VDSF9FTkFCTEVEPWcuaXNSZWFsKCkmJigib250b3VjaHN0YXJ0ImluIGlbImRlZmF1bHQiXXx8aVsiZGVmYXVsdCJdLkRvY3VtZW50VG91Y2gmJmlbImRlZmF1bHQiXS5kb2N1bWVudCBpbnN0YW5jZW9mIGlbImRlZmF1bHQiXS5Eb2N1bWVudFRvdWNoKSxjLkJBQ0tHUk9VTkRfU0laRV9TVVBQT1JURUQ9Zy5pc1JlYWwoKSYmImJhY2tncm91bmRTaXplImluIGlbImRlZmF1bHQiXS5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ2aWRlbyIpLnN0eWxlfSx7ODE6ODEsOTU6OTV9XSw3OTpbZnVuY3Rpb24oYSxiLGMpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBkKGEsYil7dmFyIGM9MCxkPXZvaWQgMCxmPXZvaWQgMDtpZighYilyZXR1cm4gMDthJiZhLmxlbmd0aHx8KGE9KDAsZS5jcmVhdGVUaW1lUmFuZ2UpKDAsMCkpO2Zvcih2YXIgZz0wO2c8YS5sZW5ndGg7ZysrKWQ9YS5zdGFydChnKSxmPWEuZW5kKGcpLGY+YiYmKGY9YiksYys9Zi1kO3JldHVybiBjL2J9Yy5fX2VzTW9kdWxlPSEwLGMuYnVmZmVyZWRQZXJjZW50PWQ7dmFyIGU9YSg5MCl9LHs5MDo5MH1dLDgwOltmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGQoYSl7cmV0dXJuIGEmJmEuX19lc01vZHVsZT9hOnsiZGVmYXVsdCI6YX19ZnVuY3Rpb24gZShhLGIpe2lmKCFhfHwhYilyZXR1cm4iIjtpZigiZnVuY3Rpb24iPT10eXBlb2YgZ1siZGVmYXVsdCJdLmdldENvbXB1dGVkU3R5bGUpe3ZhciBjPWdbImRlZmF1bHQiXS5nZXRDb21wdXRlZFN0eWxlKGEpO3JldHVybiBjP2NbYl06IiJ9cmV0dXJuIGEuY3VycmVudFN0eWxlW2JdfHwiIn1jLl9fZXNNb2R1bGU9ITAsY1siZGVmYXVsdCJdPWU7dmFyIGY9YSg5NSksZz1kKGYpfSx7OTU6OTV9XSw4MTpbZnVuY3Rpb24oYSxiLGMpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBkKGEpe2lmKGEmJmEuX19lc01vZHVsZSlyZXR1cm4gYTt2YXIgYj17fTtpZihudWxsIT1hKWZvcih2YXIgYyBpbiBhKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLGMpJiYoYltjXT1hW2NdKTtyZXR1cm4gYlsiZGVmYXVsdCJdPWEsYn1mdW5jdGlvbiBlKGEpe3JldHVybiBhJiZhLl9fZXNNb2R1bGU/YTp7ImRlZmF1bHQiOmF9fWZ1bmN0aW9uIGYoYSxiKXtyZXR1cm4gYS5yYXc9YixhfWZ1bmN0aW9uIGcoYSl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiBhJiYvXFMvLnRlc3QoYSl9ZnVuY3Rpb24gaChhKXtpZigvXHMvLnRlc3QoYSkpdGhyb3cgbmV3IEVycm9yKCJjbGFzcyBoYXMgaWxsZWdhbCB3aGl0ZXNwYWNlIGNoYXJhY3RlcnMiKX1mdW5jdGlvbiBpKGEpe3JldHVybiBuZXcgUmVnRXhwKCIoXnxcXHMpIithKyIoJHxcXHMpIil9ZnVuY3Rpb24gaigpe3JldHVybiBOWyJkZWZhdWx0Il09PT1QWyJkZWZhdWx0Il0uZG9jdW1lbnQmJiJ1bmRlZmluZWQiIT10eXBlb2YgTlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnR9ZnVuY3Rpb24gayhhKXtyZXR1cm4oMCxXLmlzT2JqZWN0KShhKSYmMT09PWEubm9kZVR5cGV9ZnVuY3Rpb24gbChhKXtyZXR1cm4gZnVuY3Rpb24oYixjKXtpZighZyhiKSlyZXR1cm4gTlsiZGVmYXVsdCJdW2FdKG51bGwpO2coYykmJihjPU5bImRlZmF1bHQiXS5xdWVyeVNlbGVjdG9yKGMpKTt2YXIgZD1rKGMpP2M6TlsiZGVmYXVsdCJdO3JldHVybiBkW2FdJiZkW2FdKGIpfX1mdW5jdGlvbiBtKGEpe3JldHVybiAwPT09YS5pbmRleE9mKCIjIikmJihhPWEuc2xpY2UoMSkpLE5bImRlZmF1bHQiXS5nZXRFbGVtZW50QnlJZChhKX1mdW5jdGlvbiBuKCl7dmFyIGE9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOiJkaXYiLGI9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9LGM9YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOnt9LGQ9YXJndW1lbnRzWzNdLGU9TlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoYSk7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGIpLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGM9YlthXTthLmluZGV4T2YoImFyaWEtIikhPT0tMXx8InJvbGUiPT09YXx8InR5cGUiPT09YT8oVFsiZGVmYXVsdCJdLndhcm4oKDAsVlsiZGVmYXVsdCJdKShMLGEsYykpLGUuc2V0QXR0cmlidXRlKGEsYykpOiJ0ZXh0Q29udGVudCI9PT1hP28oZSxjKTplW2FdPWN9KSxPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhjKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2Uuc2V0QXR0cmlidXRlKGEsY1thXSl9KSxkJiZKKGUsZCksZX1mdW5jdGlvbiBvKGEsYil7cmV0dXJuInVuZGVmaW5lZCI9PXR5cGVvZiBhLnRleHRDb250ZW50P2EuaW5uZXJUZXh0PWI6YS50ZXh0Q29udGVudD1iLGF9ZnVuY3Rpb24gcChhLGIpe2IuZmlyc3RDaGlsZD9iLmluc2VydEJlZm9yZShhLGIuZmlyc3RDaGlsZCk6Yi5hcHBlbmRDaGlsZChhKX1mdW5jdGlvbiBxKGEpe3ZhciBiPWFbWV07cmV0dXJuIGJ8fChiPWFbWV09Ui5uZXdHVUlEKCkpLFhbYl18fChYW2JdPXt9KSxYW2JdfWZ1bmN0aW9uIHIoYSl7dmFyIGI9YVtZXTtyZXR1cm4hIWImJiEhT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoWFtiXSkubGVuZ3RofWZ1bmN0aW9uIHMoYSl7dmFyIGI9YVtZXTtpZihiKXtkZWxldGUgWFtiXTt0cnl7ZGVsZXRlIGFbWV19Y2F0Y2goYyl7YS5yZW1vdmVBdHRyaWJ1dGU/YS5yZW1vdmVBdHRyaWJ1dGUoWSk6YVtZXT1udWxsfX19ZnVuY3Rpb24gdChhLGIpe3JldHVybiBoKGIpLGEuY2xhc3NMaXN0P2EuY2xhc3NMaXN0LmNvbnRhaW5zKGIpOmkoYikudGVzdChhLmNsYXNzTmFtZSl9ZnVuY3Rpb24gdShhLGIpe3JldHVybiBhLmNsYXNzTGlzdD9hLmNsYXNzTGlzdC5hZGQoYik6dChhLGIpfHwoYS5jbGFzc05hbWU9KGEuY2xhc3NOYW1lKyIgIitiKS50cmltKCkpLGF9ZnVuY3Rpb24gdihhLGIpe3JldHVybiBhLmNsYXNzTGlzdD9hLmNsYXNzTGlzdC5yZW1vdmUoYik6KGgoYiksYS5jbGFzc05hbWU9YS5jbGFzc05hbWUuc3BsaXQoL1xzKy8pLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4gYSE9PWJ9KS5qb2luKCIgIikpLGF9ZnVuY3Rpb24gdyhhLGIsYyl7dmFyIGQ9dChhLGIpO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBjJiYoYz1jKGEsYikpLCJib29sZWFuIiE9dHlwZW9mIGMmJihjPSFkKSxjIT09ZClyZXR1cm4gYz91KGEsYik6dihhLGIpLGF9ZnVuY3Rpb24geChhLGIpe09iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGIpLmZvckVhY2goZnVuY3Rpb24oYyl7dmFyIGQ9YltjXTtudWxsPT09ZHx8InVuZGVmaW5lZCI9PXR5cGVvZiBkfHxkPT09ITE/YS5yZW1vdmVBdHRyaWJ1dGUoYyk6YS5zZXRBdHRyaWJ1dGUoYyxkPT09ITA/IiI6ZCl9KX1mdW5jdGlvbiB5KGEpe3ZhciBiPXt9LGM9IixhdXRvcGxheSxjb250cm9scyxsb29wLG11dGVkLGRlZmF1bHQsIjtpZihhJiZhLmF0dHJpYnV0ZXMmJmEuYXR0cmlidXRlcy5sZW5ndGg+MClmb3IodmFyIGQ9YS5hdHRyaWJ1dGVzLGU9ZC5sZW5ndGgtMTtlPj0wO2UtLSl7dmFyIGY9ZFtlXS5uYW1lLGc9ZFtlXS52YWx1ZTsiYm9vbGVhbiIhPXR5cGVvZiBhW2ZdJiZjLmluZGV4T2YoIiwiK2YrIiwiKT09PS0xfHwoZz1udWxsIT09ZyksYltmXT1nfXJldHVybiBifWZ1bmN0aW9uIHooYSxiKXtyZXR1cm4gYS5nZXRBdHRyaWJ1dGUoYil9ZnVuY3Rpb24gQShhLGIsYyl7YS5zZXRBdHRyaWJ1dGUoYixjKX1mdW5jdGlvbiBCKGEsYil7YS5yZW1vdmVBdHRyaWJ1dGUoYil9ZnVuY3Rpb24gQygpe05bImRlZmF1bHQiXS5ib2R5LmZvY3VzKCksTlsiZGVmYXVsdCJdLm9uc2VsZWN0c3RhcnQ9ZnVuY3Rpb24oKXtyZXR1cm4hMX19ZnVuY3Rpb24gRCgpe05bImRlZmF1bHQiXS5vbnNlbGVjdHN0YXJ0PWZ1bmN0aW9uKCl7cmV0dXJuITB9fWZ1bmN0aW9uIEUoYSl7dmFyIGI9dm9pZCAwO2lmKGEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0JiZhLnBhcmVudE5vZGUmJihiPWEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpLCFiKXJldHVybntsZWZ0OjAsdG9wOjB9O3ZhciBjPU5bImRlZmF1bHQiXS5kb2N1bWVudEVsZW1lbnQsZD1OWyJkZWZhdWx0Il0uYm9keSxlPWMuY2xpZW50TGVmdHx8ZC5jbGllbnRMZWZ0fHwwLGY9UFsiZGVmYXVsdCJdLnBhZ2VYT2Zmc2V0fHxkLnNjcm9sbExlZnQsZz1iLmxlZnQrZi1lLGg9Yy5jbGllbnRUb3B8fGQuY2xpZW50VG9wfHwwLGk9UFsiZGVmYXVsdCJdLnBhZ2VZT2Zmc2V0fHxkLnNjcm9sbFRvcCxqPWIudG9wK2ktaDtyZXR1cm57bGVmdDpNYXRoLnJvdW5kKGcpLHRvcDpNYXRoLnJvdW5kKGopfX1mdW5jdGlvbiBGKGEsYil7dmFyIGM9e30sZD1FKGEpLGU9YS5vZmZzZXRXaWR0aCxmPWEub2Zmc2V0SGVpZ2h0LGc9ZC50b3AsaD1kLmxlZnQsaT1iLnBhZ2VZLGo9Yi5wYWdlWDtyZXR1cm4gYi5jaGFuZ2VkVG91Y2hlcyYmKGo9Yi5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWCxpPWIuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVkpLGMueT1NYXRoLm1heCgwLE1hdGgubWluKDEsKGctaStmKS9mKSksYy54PU1hdGgubWF4KDAsTWF0aC5taW4oMSwoai1oKS9lKSksY31mdW5jdGlvbiBHKGEpe3JldHVybigwLFcuaXNPYmplY3QpKGEpJiYzPT09YS5ub2RlVHlwZX1mdW5jdGlvbiBIKGEpe2Zvcig7YS5maXJzdENoaWxkOylhLnJlbW92ZUNoaWxkKGEuZmlyc3RDaGlsZCk7cmV0dXJuIGF9ZnVuY3Rpb24gSShhKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgYSYmKGE9YSgpKSwoQXJyYXkuaXNBcnJheShhKT9hOlthXSkubWFwKGZ1bmN0aW9uKGEpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBhJiYoYT1hKCkpLGsoYSl8fEcoYSk/YToic3RyaW5nIj09dHlwZW9mIGEmJi9cUy8udGVzdChhKT9OWyJkZWZhdWx0Il0uY3JlYXRlVGV4dE5vZGUoYSk6dm9pZCAwfSkuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBhfSl9ZnVuY3Rpb24gSihhLGIpe3JldHVybiBJKGIpLmZvckVhY2goZnVuY3Rpb24oYil7cmV0dXJuIGEuYXBwZW5kQ2hpbGQoYil9KSxhfWZ1bmN0aW9uIEsoYSxiKXtyZXR1cm4gSihIKGEpLGIpfWMuX19lc01vZHVsZT0hMCxjLiQkPWMuJD12b2lkIDA7dmFyIEw9ZihbIlNldHRpbmcgYXR0cmlidXRlcyBpbiB0aGUgc2Vjb25kIGFyZ3VtZW50IG9mIGNyZWF0ZUVsKClcbiAgICAgICAgICAgICAgICBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgdGhlIHRoaXJkIGFyZ3VtZW50IGluc3RlYWQuXG4gICAgICAgICAgICAgICAgY3JlYXRlRWwodHlwZSwgcHJvcGVydGllcywgYXR0cmlidXRlcykuIEF0dGVtcHRpbmcgdG8gc2V0ICIsIiB0byAiLCIuIl0sWyJTZXR0aW5nIGF0dHJpYnV0ZXMgaW4gdGhlIHNlY29uZCBhcmd1bWVudCBvZiBjcmVhdGVFbCgpXG4gICAgICAgICAgICAgICAgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIHRoZSB0aGlyZCBhcmd1bWVudCBpbnN0ZWFkLlxuICAgICAgICAgICAgICAgIGNyZWF0ZUVsKHR5cGUsIHByb3BlcnRpZXMsIGF0dHJpYnV0ZXMpLiBBdHRlbXB0aW5nIHRvIHNldCAiLCIgdG8gIiwiLiJdKTtjLmlzUmVhbD1qLGMuaXNFbD1rLGMuZ2V0RWw9bSxjLmNyZWF0ZUVsPW4sYy50ZXh0Q29udGVudD1vLGMuaW5zZXJ0RWxGaXJzdD1wLGMuZ2V0RWxEYXRhPXEsYy5oYXNFbERhdGE9cixjLnJlbW92ZUVsRGF0YT1zLGMuaGFzRWxDbGFzcz10LGMuYWRkRWxDbGFzcz11LGMucmVtb3ZlRWxDbGFzcz12LGMudG9nZ2xlRWxDbGFzcz13LGMuc2V0RWxBdHRyaWJ1dGVzPXgsYy5nZXRFbEF0dHJpYnV0ZXM9eSxjLmdldEF0dHJpYnV0ZT16LGMuc2V0QXR0cmlidXRlPUEsYy5yZW1vdmVBdHRyaWJ1dGU9QixjLmJsb2NrVGV4dFNlbGVjdGlvbj1DLGMudW5ibG9ja1RleHRTZWxlY3Rpb249RCxjLmZpbmRFbFBvc2l0aW9uPUUsYy5nZXRQb2ludGVyUG9zaXRpb249RixjLmlzVGV4dE5vZGU9RyxjLmVtcHR5RWw9SCxjLm5vcm1hbGl6ZUNvbnRlbnQ9SSxjLmFwcGVuZENvbnRlbnQ9SixjLmluc2VydENvbnRlbnQ9Szt2YXIgTT1hKDk0KSxOPWUoTSksTz1hKDk1KSxQPWUoTyksUT1hKDg1KSxSPWQoUSksUz1hKDg2KSxUPWUoUyksVT1hKDk4KSxWPWUoVSksVz1hKDg4KSxYPXt9LFk9InZkYXRhIisobmV3IERhdGUpLmdldFRpbWUoKTtjLiQ9bCgicXVlcnlTZWxlY3RvciIpLGMuJCQ9bCgicXVlcnlTZWxlY3RvckFsbCIpfSx7ODU6ODUsODY6ODYsODg6ODgsOTQ6OTQsOTU6OTUsOTg6OTh9XSw4MjpbZnVuY3Rpb24oYSxiLGMpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBkKGEpe3JldHVybiBhJiZhLl9fZXNNb2R1bGU/YTp7ImRlZmF1bHQiOmF9fWZ1bmN0aW9uIGUoYSl7aWYoYSYmYS5fX2VzTW9kdWxlKXJldHVybiBhO3ZhciBiPXt9O2lmKG51bGwhPWEpZm9yKHZhciBjIGluIGEpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGEsYykmJihiW2NdPWFbY10pO3JldHVybiBiWyJkZWZhdWx0Il09YSxifWZ1bmN0aW9uIGYoYSxiKXt2YXIgYz1uLmdldEVsRGF0YShhKTswPT09Yy5oYW5kbGVyc1tiXS5sZW5ndGgmJihkZWxldGUgYy5oYW5kbGVyc1tiXSxhLnJlbW92ZUV2ZW50TGlzdGVuZXI/YS5yZW1vdmVFdmVudExpc3RlbmVyKGIsYy5kaXNwYXRjaGVyLCExKTphLmRldGFjaEV2ZW50JiZhLmRldGFjaEV2ZW50KCJvbiIrYixjLmRpc3BhdGNoZXIpKSxPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhjLmhhbmRsZXJzKS5sZW5ndGg8PTAmJihkZWxldGUgYy5oYW5kbGVycyxkZWxldGUgYy5kaXNwYXRjaGVyLGRlbGV0ZSBjLmRpc2FibGVkKSwwPT09T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYykubGVuZ3RoJiZuLnJlbW92ZUVsRGF0YShhKX1mdW5jdGlvbiBnKGEsYixjLGQpe2MuZm9yRWFjaChmdW5jdGlvbihjKXthKGIsYyxkKX0pfWZ1bmN0aW9uIGgoYSl7ZnVuY3Rpb24gYigpe3JldHVybiEwfWZ1bmN0aW9uIGMoKXtyZXR1cm4hMX1yZXR1cm4gYSYmYS5pc1Byb3BhZ2F0aW9uU3RvcHBlZHx8IWZ1bmN0aW9uKCl7dmFyIGQ9YXx8dFsiZGVmYXVsdCJdLmV2ZW50O2E9e307Zm9yKHZhciBlIGluIGQpImxheWVyWCIhPT1lJiYibGF5ZXJZIiE9PWUmJiJrZXlMb2NhdGlvbiIhPT1lJiYid2Via2l0TW92ZW1lbnRYIiE9PWUmJiJ3ZWJraXRNb3ZlbWVudFkiIT09ZSYmKCJyZXR1cm5WYWx1ZSI9PT1lJiZkLnByZXZlbnREZWZhdWx0fHwoYVtlXT1kW2VdKSk7aWYoYS50YXJnZXR8fChhLnRhcmdldD1hLnNyY0VsZW1lbnR8fHZbImRlZmF1bHQiXSksYS5yZWxhdGVkVGFyZ2V0fHwoYS5yZWxhdGVkVGFyZ2V0PWEuZnJvbUVsZW1lbnQ9PT1hLnRhcmdldD9hLnRvRWxlbWVudDphLmZyb21FbGVtZW50KSxhLnByZXZlbnREZWZhdWx0PWZ1bmN0aW9uKCl7ZC5wcmV2ZW50RGVmYXVsdCYmZC5wcmV2ZW50RGVmYXVsdCgpLGEucmV0dXJuVmFsdWU9ITEsZC5yZXR1cm5WYWx1ZT0hMSxhLmRlZmF1bHRQcmV2ZW50ZWQ9ITB9LGEuZGVmYXVsdFByZXZlbnRlZD0hMSxhLnN0b3BQcm9wYWdhdGlvbj1mdW5jdGlvbigpe2Quc3RvcFByb3BhZ2F0aW9uJiZkLnN0b3BQcm9wYWdhdGlvbigpLGEuY2FuY2VsQnViYmxlPSEwLGQuY2FuY2VsQnViYmxlPSEwLGEuaXNQcm9wYWdhdGlvblN0b3BwZWQ9Yn0sYS5pc1Byb3BhZ2F0aW9uU3RvcHBlZD1jLGEuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uPWZ1bmN0aW9uKCl7ZC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24mJmQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksYS5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD1iLGEuc3RvcFByb3BhZ2F0aW9uKCl9LGEuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9YyxudWxsIT09YS5jbGllbnRYJiZ2b2lkIDAhPT1hLmNsaWVudFgpe3ZhciBmPXZbImRlZmF1bHQiXS5kb2N1bWVudEVsZW1lbnQsZz12WyJkZWZhdWx0Il0uYm9keTthLnBhZ2VYPWEuY2xpZW50WCsoZiYmZi5zY3JvbGxMZWZ0fHxnJiZnLnNjcm9sbExlZnR8fDApLShmJiZmLmNsaWVudExlZnR8fGcmJmcuY2xpZW50TGVmdHx8MCksYS5wYWdlWT1hLmNsaWVudFkrKGYmJmYuc2Nyb2xsVG9wfHxnJiZnLnNjcm9sbFRvcHx8MCktKGYmJmYuY2xpZW50VG9wfHxnJiZnLmNsaWVudFRvcHx8MCl9YS53aGljaD1hLmNoYXJDb2RlfHxhLmtleUNvZGUsbnVsbCE9PWEuYnV0dG9uJiZ2b2lkIDAhPT1hLmJ1dHRvbiYmKGEuYnV0dG9uPTEmYS5idXR0b24/MDo0JmEuYnV0dG9uPzE6MiZhLmJ1dHRvbj8yOjApfSgpLGF9ZnVuY3Rpb24gaShhLGIsYyl7aWYoQXJyYXkuaXNBcnJheShiKSlyZXR1cm4gZyhpLGEsYixjKTt2YXIgZD1uLmdldEVsRGF0YShhKTtkLmhhbmRsZXJzfHwoZC5oYW5kbGVycz17fSksZC5oYW5kbGVyc1tiXXx8KGQuaGFuZGxlcnNbYl09W10pLGMuZ3VpZHx8KGMuZ3VpZD1wLm5ld0dVSUQoKSksZC5oYW5kbGVyc1tiXS5wdXNoKGMpLGQuZGlzcGF0Y2hlcnx8KGQuZGlzYWJsZWQ9ITEsZC5kaXNwYXRjaGVyPWZ1bmN0aW9uKGIsYyl7aWYoIWQuZGlzYWJsZWQpe2I9aChiKTt2YXIgZT1kLmhhbmRsZXJzW2IudHlwZV07aWYoZSlmb3IodmFyIGY9ZS5zbGljZSgwKSxnPTAsaT1mLmxlbmd0aDtnPGkmJiFiLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCk7ZysrKXRyeXtmW2ddLmNhbGwoYSxiLGMpfWNhdGNoKGope3JbImRlZmF1bHQiXS5lcnJvcihqKX19fSksMT09PWQuaGFuZGxlcnNbYl0ubGVuZ3RoJiYoYS5hZGRFdmVudExpc3RlbmVyP2EuYWRkRXZlbnRMaXN0ZW5lcihiLGQuZGlzcGF0Y2hlciwhMSk6YS5hdHRhY2hFdmVudCYmYS5hdHRhY2hFdmVudCgib24iK2IsZC5kaXNwYXRjaGVyKSl9ZnVuY3Rpb24gaihhLGIsYyl7aWYobi5oYXNFbERhdGEoYSkpe3ZhciBkPW4uZ2V0RWxEYXRhKGEpO2lmKGQuaGFuZGxlcnMpe2lmKEFycmF5LmlzQXJyYXkoYikpcmV0dXJuIGcoaixhLGIsYyk7dmFyIGU9ZnVuY3Rpb24oYil7ZC5oYW5kbGVyc1tiXT1bXSxmKGEsYil9O2lmKGIpe3ZhciBoPWQuaGFuZGxlcnNbYl07aWYoaCl7aWYoIWMpcmV0dXJuIHZvaWQgZShiKTtpZihjLmd1aWQpZm9yKHZhciBpPTA7aTxoLmxlbmd0aDtpKyspaFtpXS5ndWlkPT09Yy5ndWlkJiZoLnNwbGljZShpLS0sMSk7ZihhLGIpfX1lbHNlIGZvcih2YXIgayBpbiBkLmhhbmRsZXJzKWUoayl9fX1mdW5jdGlvbiBrKGEsYixjKXt2YXIgZD1uLmhhc0VsRGF0YShhKT9uLmdldEVsRGF0YShhKTp7fSxlPWEucGFyZW50Tm9kZXx8YS5vd25lckRvY3VtZW50O2lmKCJzdHJpbmciPT10eXBlb2YgYiYmKGI9e3R5cGU6Yix0YXJnZXQ6YX0pLGI9aChiKSxkLmRpc3BhdGNoZXImJmQuZGlzcGF0Y2hlci5jYWxsKGEsYixjKSxlJiYhYi5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpJiZiLmJ1YmJsZXM9PT0hMClrLmNhbGwobnVsbCxlLGIsYyk7ZWxzZSBpZighZSYmIWIuZGVmYXVsdFByZXZlbnRlZCl7dmFyIGY9bi5nZXRFbERhdGEoYi50YXJnZXQpO2IudGFyZ2V0W2IudHlwZV0mJihmLmRpc2FibGVkPSEwLCJmdW5jdGlvbiI9PXR5cGVvZiBiLnRhcmdldFtiLnR5cGVdJiZiLnRhcmdldFtiLnR5cGVdKCksZi5kaXNhYmxlZD0hMSl9cmV0dXJuIWIuZGVmYXVsdFByZXZlbnRlZH1mdW5jdGlvbiBsKGEsYixjKXtpZihBcnJheS5pc0FycmF5KGIpKXJldHVybiBnKGwsYSxiLGMpO3ZhciBkPWZ1bmN0aW9uIGUoKXtqKGEsYixlKSxjLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07ZC5ndWlkPWMuZ3VpZD1jLmd1aWR8fHAubmV3R1VJRCgpLGkoYSxiLGQpfWMuX19lc01vZHVsZT0hMCxjLmZpeEV2ZW50PWgsYy5vbj1pLGMub2ZmPWosYy50cmlnZ2VyPWssYy5vbmU9bDt2YXIgbT1hKDgxKSxuPWUobSksbz1hKDg1KSxwPWUobykscT1hKDg2KSxyPWQocSkscz1hKDk1KSx0PWQocyksdT1hKDk0KSx2PWQodSl9LHs4MTo4MSw4NTo4NSw4Njo4Niw5NDo5NCw5NTo5NX1dLDgzOltmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2MuX19lc01vZHVsZT0hMCxjLnRocm90dGxlPWMuYmluZD12b2lkIDA7dmFyIGQ9YSg4NSk7Yy5iaW5kPWZ1bmN0aW9uKGEsYixjKXtiLmd1aWR8fChiLmd1aWQ9KDAsZC5uZXdHVUlEKSgpKTt2YXIgZT1mdW5jdGlvbigpe3JldHVybiBiLmFwcGx5KGEsYXJndW1lbnRzKX07cmV0dXJuIGUuZ3VpZD1jP2MrIl8iK2IuZ3VpZDpiLmd1aWQsZX0sYy50aHJvdHRsZT1mdW5jdGlvbihhLGIpe3ZhciBjPURhdGUubm93KCksZD1mdW5jdGlvbigpe3ZhciBkPURhdGUubm93KCk7ZC1jPj1iJiYoYS5hcHBseSh2b2lkIDAsYXJndW1lbnRzKSxjPWQpfTtyZXR1cm4gZH19LHs4NTo4NX1dLDg0OltmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGQoYSl7dmFyIGI9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOmE7YT1hPDA/MDphO3ZhciBjPU1hdGguZmxvb3IoYSU2MCksZD1NYXRoLmZsb29yKGEvNjAlNjApLGU9TWF0aC5mbG9vcihhLzM2MDApLGY9TWF0aC5mbG9vcihiLzYwJTYwKSxnPU1hdGguZmxvb3IoYi8zNjAwKTtyZXR1cm4oaXNOYU4oYSl8fGE9PT0xLzApJiYoZT1kPWM9Ii0iKSxlPWU+MHx8Zz4wP2UrIjoiOiIiLGQ9KChlfHxmPj0xMCkmJmQ8MTA/IjAiK2Q6ZCkrIjoiLGM9YzwxMD8iMCIrYzpjLGUrZCtjfWMuX19lc01vZHVsZT0hMCxjWyJkZWZhdWx0Il09ZH0se31dLDg1OltmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGQoKXtyZXR1cm4gZSsrfWMuX19lc01vZHVsZT0hMCxjLm5ld0dVSUQ9ZDt2YXIgZT0xfSx7fV0sODY6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZChhKXtyZXR1cm4gYSYmYS5fX2VzTW9kdWxlP2E6eyJkZWZhdWx0IjphfX1jLl9fZXNNb2R1bGU9ITAsYy5sb2dCeVR5cGU9dm9pZCAwO3ZhciBlPWEoOTUpLGY9ZChlKSxnPWEoNzgpLGg9YSg4OCksaT12b2lkIDAsaj1jLmxvZ0J5VHlwZT1mdW5jdGlvbihhLGIpe3ZhciBjPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTohIWcuSUVfVkVSU0lPTiYmZy5JRV9WRVJTSU9OPDExOyJsb2ciIT09YSYmYi51bnNoaWZ0KGEudG9VcHBlckNhc2UoKSsiOiIpLGkuaGlzdG9yeS5wdXNoKGIpLGIudW5zaGlmdCgiVklERU9KUzoiKTt2YXIgZD1mWyJkZWZhdWx0Il0uY29uc29sZSYmZlsiZGVmYXVsdCJdLmNvbnNvbGVbYV07ZCYmKGMmJihiPWIubWFwKGZ1bmN0aW9uKGEpe2lmKCgwLGguaXNPYmplY3QpKGEpfHxBcnJheS5pc0FycmF5KGEpKXRyeXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkoYSl9Y2F0Y2goYil7cmV0dXJuIFN0cmluZyhhKX1yZXR1cm4gU3RyaW5nKGEpfSkuam9pbigiICIpKSxkLmFwcGx5P2RbQXJyYXkuaXNBcnJheShiKT8iYXBwbHkiOiJjYWxsIl0oZlsiZGVmYXVsdCJdLmNvbnNvbGUsYik6ZChiKSl9O2k9ZnVuY3Rpb24oKXtmb3IodmFyIGE9YXJndW1lbnRzLmxlbmd0aCxiPUFycmF5KGEpLGM9MDtjPGE7YysrKWJbY109YXJndW1lbnRzW2NdO2ooImxvZyIsYil9LGkuaGlzdG9yeT1bXSxpLmVycm9yPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPWFyZ3VtZW50cy5sZW5ndGgsYj1BcnJheShhKSxjPTA7YzxhO2MrKyliW2NdPWFyZ3VtZW50c1tjXTtyZXR1cm4gaigiZXJyb3IiLGIpfSxpLndhcm49ZnVuY3Rpb24oKXtmb3IodmFyIGE9YXJndW1lbnRzLmxlbmd0aCxiPUFycmF5KGEpLGM9MDtjPGE7YysrKWJbY109YXJndW1lbnRzW2NdO3JldHVybiBqKCJ3YXJuIixiKX0sY1siZGVmYXVsdCJdPWl9LHs3ODo3OCw4ODo4OCw5NTo5NX1dLDg3OltmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGQoKXtmb3IodmFyIGE9e30sYj1hcmd1bWVudHMubGVuZ3RoLGM9QXJyYXkoYiksZj0wO2Y8YjtmKyspY1tmXT1hcmd1bWVudHNbZl07cmV0dXJuIGMuZm9yRWFjaChmdW5jdGlvbihiKXtiJiYoMCxlLmVhY2gpKGIsZnVuY3Rpb24oYixjKXtyZXR1cm4oMCxlLmlzUGxhaW4pKGIpPygoMCxlLmlzUGxhaW4pKGFbY10pfHwoYVtjXT17fSksdm9pZChhW2NdPWQoYVtjXSxiKSkpOnZvaWQoYVtjXT1iKX0pfSksYX1jLl9fZXNNb2R1bGU9ITAsY1siZGVmYXVsdCJdPWQ7dmFyIGU9YSg4OCl9LHs4ODo4OH1dLDg4OltmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGQoYSxiKXtPYmplY3Qua2V5cyhhKS5mb3JFYWNoKGZ1bmN0aW9uKGMpe3JldHVybiBiKGFbY10sYyl9KX1mdW5jdGlvbiBlKGEsYil7dmFyIGM9YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOjA7cmV0dXJuIE9iamVjdC5rZXlzKGEpLnJlZHVjZShmdW5jdGlvbihjLGQpe3JldHVybiBiKGMsYVtkXSxkKX0sYyl9ZnVuY3Rpb24gZihhKXtmb3IodmFyIGI9YXJndW1lbnRzLmxlbmd0aCxjPUFycmF5KGI+MT9iLTE6MCksZT0xO2U8YjtlKyspY1tlLTFdPWFyZ3VtZW50c1tlXTtyZXR1cm4gT2JqZWN0LmFzc2lnbj9PYmplY3QuYXNzaWduLmFwcGx5KE9iamVjdCxbYV0uY29uY2F0KGMpKTooYy5mb3JFYWNoKGZ1bmN0aW9uKGIpe2ImJmQoYixmdW5jdGlvbihiLGMpe2FbY109Yn0pfSksYSl9ZnVuY3Rpb24gZyhhKXtyZXR1cm4hIWEmJiJvYmplY3QiPT09KCJ1bmRlZmluZWQiPT10eXBlb2YgYT8idW5kZWZpbmVkIjppKGEpKX1mdW5jdGlvbiBoKGEpe3JldHVybiBnKGEpJiYiW29iamVjdCBPYmplY3RdIj09PWouY2FsbChhKSYmYS5jb25zdHJ1Y3Rvcj09PU9iamVjdH1jLl9fZXNNb2R1bGU9ITA7dmFyIGk9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmInN5bWJvbCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24oYSl7cmV0dXJuIHR5cGVvZiBhfTpmdW5jdGlvbihhKXtyZXR1cm4gYSYmImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmYS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmYSE9PVN5bWJvbC5wcm90b3R5cGU/InN5bWJvbCI6dHlwZW9mIGF9O2MuZWFjaD1kLGMucmVkdWNlPWUsYy5hc3NpZ249ZixjLmlzT2JqZWN0PWcsYy5pc1BsYWluPWg7dmFyIGo9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZ30se31dLDg5OltmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGQoYSl7cmV0dXJuIGEmJmEuX19lc01vZHVsZT9hOnsiZGVmYXVsdCI6YX19Yy5fX2VzTW9kdWxlPSEwLGMuc2V0VGV4dENvbnRlbnQ9Yy5jcmVhdGVTdHlsZUVsZW1lbnQ9dm9pZCAwO3ZhciBlPWEoOTQpLGY9ZChlKTtjLmNyZWF0ZVN0eWxlRWxlbWVudD1mdW5jdGlvbihhKXt2YXIgYj1mWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgic3R5bGUiKTtyZXR1cm4gYi5jbGFzc05hbWU9YSxifSxjLnNldFRleHRDb250ZW50PWZ1bmN0aW9uKGEsYil7YS5zdHlsZVNoZWV0P2Euc3R5bGVTaGVldC5jc3NUZXh0PWI6YS50ZXh0Q29udGVudD1ifX0sezk0Ojk0fV0sOTA6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZChhKXtyZXR1cm4gYSYmYS5fX2VzTW9kdWxlP2E6eyJkZWZhdWx0IjphfX1mdW5jdGlvbiBlKGEsYixjKXtpZihiPDB8fGI+Yyl0aHJvdyBuZXcgRXJyb3IoIkZhaWxlZCB0byBleGVjdXRlICciK2ErIicgb24gJ1RpbWVSYW5nZXMnOiBUaGUgaW5kZXggcHJvdmlkZWQgKCIrYisiKSBpcyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gdGhlIG1heGltdW0gYm91bmQgKCIrYysiKS4iKX1mdW5jdGlvbiBmKGEsYixjLGQpe3JldHVybiB2b2lkIDA9PT1kJiYoalsiZGVmYXVsdCJdLndhcm4oIkRFUFJFQ0FURUQ6IEZ1bmN0aW9uICciK2ErIicgb24gJ1RpbWVSYW5nZXMnIGNhbGxlZCB3aXRob3V0IGFuIGluZGV4IGFyZ3VtZW50LiIpLGQ9MCksZShhLGQsYy5sZW5ndGgtMSksY1tkXVtiXX1mdW5jdGlvbiBnKGEpe3JldHVybiB2b2lkIDA9PT1hfHwwPT09YS5sZW5ndGg/e2xlbmd0aDowLHN0YXJ0OmZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKCJUaGlzIFRpbWVSYW5nZXMgb2JqZWN0IGlzIGVtcHR5Iil9LGVuZDpmdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcigiVGhpcyBUaW1lUmFuZ2VzIG9iamVjdCBpcyBlbXB0eSIpfX06e2xlbmd0aDphLmxlbmd0aCxzdGFydDpmLmJpbmQobnVsbCwic3RhcnQiLDAsYSksZW5kOmYuYmluZChudWxsLCJlbmQiLDEsYSl9fWZ1bmN0aW9uIGgoYSxiKXtyZXR1cm4gQXJyYXkuaXNBcnJheShhKT9nKGEpOnZvaWQgMD09PWF8fHZvaWQgMD09PWI/ZygpOmcoW1thLGJdXSl9Yy5fX2VzTW9kdWxlPSEwLGMuY3JlYXRlVGltZVJhbmdlPXZvaWQgMCxjLmNyZWF0ZVRpbWVSYW5nZXM9aDt2YXIgaT1hKDg2KSxqPWQoaSk7Yy5jcmVhdGVUaW1lUmFuZ2U9aH0sezg2Ojg2fV0sOTE6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZChhKXtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGE/YTphLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2Euc2xpY2UoMSl9Yy5fX2VzTW9kdWxlPSEwLGNbImRlZmF1bHQiXT1kfSx7fV0sOTI6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZChhKXtyZXR1cm4gYSYmYS5fX2VzTW9kdWxlP2E6eyJkZWZhdWx0IjphfX1jLl9fZXNNb2R1bGU9ITAsYy5pc0Nyb3NzT3JpZ2luPWMuZ2V0RmlsZUV4dGVuc2lvbj1jLmdldEFic29sdXRlVVJMPWMucGFyc2VVcmw9dm9pZCAwO3ZhciBlPWEoOTQpLGY9ZChlKSxnPWEoOTUpLGg9ZChnKSxpPWMucGFyc2VVcmw9ZnVuY3Rpb24oYSl7dmFyIGI9WyJwcm90b2NvbCIsImhvc3RuYW1lIiwicG9ydCIsInBhdGhuYW1lIiwic2VhcmNoIiwiaGFzaCIsImhvc3QiXSxjPWZbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCJhIik7Yy5ocmVmPWE7dmFyIGQ9IiI9PT1jLmhvc3QmJiJmaWxlOiIhPT1jLnByb3RvY29sLGU9dm9pZCAwO2QmJihlPWZbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCJkaXYiKSxlLmlubmVySFRNTD0nPGEgaHJlZj0iJythKyciPjwvYT4nLGM9ZS5maXJzdENoaWxkLGUuc2V0QXR0cmlidXRlKCJzdHlsZSIsImRpc3BsYXk6bm9uZTsgcG9zaXRpb246YWJzb2x1dGU7IiksZlsiZGVmYXVsdCJdLmJvZHkuYXBwZW5kQ2hpbGQoZSkpO2Zvcih2YXIgZz17fSxoPTA7aDxiLmxlbmd0aDtoKyspZ1tiW2hdXT1jW2JbaF1dO3JldHVybiJodHRwOiI9PT1nLnByb3RvY29sJiYoZy5ob3N0PWcuaG9zdC5yZXBsYWNlKC86ODAkLywiIikpLCJodHRwczoiPT09Zy5wcm90b2NvbCYmKGcuaG9zdD1nLmhvc3QucmVwbGFjZSgvOjQ0MyQvLCIiKSksZCYmZlsiZGVmYXVsdCJdLmJvZHkucmVtb3ZlQ2hpbGQoZSksZ307Yy5nZXRBYnNvbHV0ZVVSTD1mdW5jdGlvbihhKXtpZighYS5tYXRjaCgvXmh0dHBzPzpcL1wvLykpe3ZhciBiPWZbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCJkaXYiKTtiLmlubmVySFRNTD0nPGEgaHJlZj0iJythKyciPng8L2E+JyxhPWIuZmlyc3RDaGlsZC5ocmVmfXJldHVybiBhfSxjLmdldEZpbGVFeHRlbnNpb249ZnVuY3Rpb24oYSl7aWYoInN0cmluZyI9PXR5cGVvZiBhKXt2YXIgYj0vXihcLz8pKFtcc1xTXSo/KSgoPzpcLnsxLDJ9fFteXC9dKz8pKFwuKFteXC5cL1w/XSspKSkoPzpbXC9dKnxbXD9dLiopJC9pLGM9Yi5leGVjKGEpO2lmKGMpcmV0dXJuIGMucG9wKCkudG9Mb3dlckNhc2UoKX1yZXR1cm4iIn0sYy5pc0Nyb3NzT3JpZ2luPWZ1bmN0aW9uKGEpe3ZhciBiPWhbImRlZmF1bHQiXS5sb2NhdGlvbixjPWkoYSksZD0iOiI9PT1jLnByb3RvY29sP2IucHJvdG9jb2w6Yy5wcm90b2NvbCxlPWQrYy5ob3N0IT09Yi5wcm90b2NvbCtiLmhvc3Q7cmV0dXJuIGV9fSx7OTQ6OTQsOTU6OTV9XSw5MzpbZnVuY3Rpb24oYixjLGQpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBlKGEpe2lmKGEmJmEuX19lc01vZHVsZSlyZXR1cm4gYTt2YXIgYj17fTtpZihudWxsIT1hKWZvcih2YXIgYyBpbiBhKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLGMpJiYoYltjXT1hW2NdKTtyZXR1cm4gYlsiZGVmYXVsdCJdPWEsYn1mdW5jdGlvbiBmKGEpe3JldHVybiBhJiZhLl9fZXNNb2R1bGU/YTp7ImRlZmF1bHQiOmF9fWZ1bmN0aW9uIGcoYSxiLGMpe3ZhciBkPXZvaWQgMDtpZigic3RyaW5nIj09dHlwZW9mIGEpe2lmKDA9PT1hLmluZGV4T2YoIiMiKSYmKGE9YS5zbGljZSgxKSksZy5nZXRQbGF5ZXJzKClbYV0pcmV0dXJuIGImJk9bImRlZmF1bHQiXS53YXJuKCdQbGF5ZXIgIicrYSsnIiBpcyBhbHJlYWR5IGluaXRpYWxpc2VkLiBPcHRpb25zIHdpbGwgbm90IGJlIGFwcGxpZWQuJyksYyYmZy5nZXRQbGF5ZXJzKClbYV0ucmVhZHkoYyksZy5nZXRQbGF5ZXJzKClbYV07ZD1RLmdldEVsKGEpfWVsc2UgZD1hO2lmKCFkfHwhZC5ub2RlTmFtZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJUaGUgZWxlbWVudCBvciBJRCBzdXBwbGllZCBpcyBub3QgdmFsaWQuICh2aWRlb2pzKSIpO2lmKGQucGxheWVyfHx4WyJkZWZhdWx0Il0ucGxheWVyc1tkLnBsYXllcklkXSlyZXR1cm4gZC5wbGF5ZXJ8fHhbImRlZmF1bHQiXS5wbGF5ZXJzW2QucGxheWVySWRdO2I9Ynx8e30sZy5ob29rcygiYmVmb3Jlc2V0dXAiKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBjPWEoZCwoMCxCWyJkZWZhdWx0Il0pKGIpKTtyZXR1cm4hKDAsVi5pc09iamVjdCkoYyl8fEFycmF5LmlzQXJyYXkoYyk/dm9pZCBPWyJkZWZhdWx0Il0uZXJyb3IoInBsZWFzZSByZXR1cm4gYW4gb2JqZWN0IGluIGJlZm9yZXNldHVwIGhvb2tzIik6dm9pZChiPSgwLEJbImRlZmF1bHQiXSkoYixjKSl9KTt2YXIgZT1yWyJkZWZhdWx0Il0uZ2V0Q29tcG9uZW50KCJQbGF5ZXIiKSxmPW5ldyBlKGQsYixjKTtyZXR1cm4gZy5ob29rcygic2V0dXAiKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3JldHVybiBhKGYpfSksZn1kLl9fZXNNb2R1bGU9ITA7dmFyIGg9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmInN5bWJvbCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24oYSl7cmV0dXJuIHR5cGVvZiBhfTpmdW5jdGlvbihhKXtyZXR1cm4gYSYmImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmYS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmYSE9PVN5bWJvbC5wcm90b3R5cGU/InN5bWJvbCI6dHlwZW9mIGF9LGk9Yig5NSksaj1mKGkpLGs9Yig5NCksbD1mKGspLG09Yig1Niksbj1lKG0pLG89Yig4OSkscD1lKG8pLHE9Yig1KSxyPWYocSkscz1iKDQyKSx0PWYocyksdT1iKDgyKSx2PWUodSksdz1iKDUxKSx4PWYodykseT1iKDUyKSx6PWYoeSksQT1iKDg3KSxCPWYoQSksQz1iKDgzKSxEPWUoQyksRT1iKDcyKSxGPWYoRSksRz1iKDY0KSxIPWYoRyksST1iKDc3KSxKPWYoSSksSz1iKDkwKSxMPWIoODQpLE09ZihMKSxOPWIoODYpLE89ZihOKSxQPWIoODEpLFE9ZShQKSxSPWIoNzgpLFM9ZShSKSxUPWIoOTIpLFU9ZShUKSxWPWIoODgpLFc9Yig4MCksWD1mKFcpLFk9Yig0MyksWj1mKFkpLCQ9Yig5OSksXz1mKCQpLGFhPWIoNjIpLGJhPWYoYWEpO2lmKCJ1bmRlZmluZWQiPT10eXBlb2YgSFRNTFZpZGVvRWxlbWVudCYmUS5pc1JlYWwoKSYmKGxbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCJ2aWRlbyIpLGxbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCJhdWRpbyIpLGxbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCJ0cmFjayIpKSxnLmhvb2tzXz17fSxnLmhvb2tzPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGcuaG9va3NfW2FdPWcuaG9va3NfW2FdfHxbXSxiJiYoZy5ob29rc19bYV09Zy5ob29rc19bYV0uY29uY2F0KGIpKSxnLmhvb2tzX1thXX0sZy5ob29rPWZ1bmN0aW9uKGEsYil7Zy5ob29rcyhhLGIpfSxnLnJlbW92ZUhvb2s9ZnVuY3Rpb24oYSxiKXt2YXIgYz1nLmhvb2tzKGEpLmluZGV4T2YoYik7cmV0dXJuIShjPD0tMSkmJihnLmhvb2tzX1thXT1nLmhvb2tzX1thXS5zbGljZSgpLGcuaG9va3NfW2FdLnNwbGljZShjLDEpLCEwKX0salsiZGVmYXVsdCJdLlZJREVPSlNfTk9fRFlOQU1JQ19TVFlMRSE9PSEwJiZRLmlzUmVhbCgpKXt2YXIgY2E9US4kKCIudmpzLXN0eWxlcy1kZWZhdWx0cyIpO2lmKCFjYSl7Y2E9cC5jcmVhdGVTdHlsZUVsZW1lbnQoInZqcy1zdHlsZXMtZGVmYXVsdHMiKTt2YXIgZGE9US4kKCJoZWFkIik7ZGEmJmRhLmluc2VydEJlZm9yZShjYSxkYS5maXJzdENoaWxkKSxwLnNldFRleHRDb250ZW50KGNhLCJcbiAgICAgIC52aWRlby1qcyB7XG4gICAgICAgIHdpZHRoOiAzMDBweDtcbiAgICAgICAgaGVpZ2h0OiAxNTBweDtcbiAgICAgIH1cblxuICAgICAgLnZqcy1mbHVpZCB7XG4gICAgICAgIHBhZGRpbmctdG9wOiA1Ni4yNSVcbiAgICAgIH1cbiAgICAiKX19bi5hdXRvU2V0dXBUaW1lb3V0KDEsZyksZy5WRVJTSU9OPSI1LjE1LjEiLGcub3B0aW9ucz14WyJkZWZhdWx0Il0ucHJvdG90eXBlLm9wdGlvbnNfLGcuZ2V0UGxheWVycz1mdW5jdGlvbigpe3JldHVybiB4WyJkZWZhdWx0Il0ucGxheWVyc30sZy5wbGF5ZXJzPXhbImRlZmF1bHQiXS5wbGF5ZXJzLGcuZ2V0Q29tcG9uZW50PXJbImRlZmF1bHQiXS5nZXRDb21wb25lbnQsZy5yZWdpc3RlckNvbXBvbmVudD1mdW5jdGlvbihhLGIpe2JhWyJkZWZhdWx0Il0uaXNUZWNoKGIpJiZPWyJkZWZhdWx0Il0ud2FybigiVGhlICIrYSsiIHRlY2ggd2FzIHJlZ2lzdGVyZWQgYXMgYSBjb21wb25lbnQuIEl0IHNob3VsZCBpbnN0ZWFkIGJlIHJlZ2lzdGVyZWQgdXNpbmcgdmlkZW9qcy5yZWdpc3RlclRlY2gobmFtZSwgdGVjaCkiKSxyWyJkZWZhdWx0Il0ucmVnaXN0ZXJDb21wb25lbnQuY2FsbChyWyJkZWZhdWx0Il0sYSxiKX0sZy5nZXRUZWNoPWJhWyJkZWZhdWx0Il0uZ2V0VGVjaCxnLnJlZ2lzdGVyVGVjaD1iYVsiZGVmYXVsdCJdLnJlZ2lzdGVyVGVjaCxnLmJyb3dzZXI9UyxnLlRPVUNIX0VOQUJMRUQ9Uy5UT1VDSF9FTkFCTEVELGcuZXh0ZW5kPVpbImRlZmF1bHQiXSxnLm1lcmdlT3B0aW9ucz1CWyJkZWZhdWx0Il0sZy5iaW5kPUQuYmluZCxnLnBsdWdpbj16WyJkZWZhdWx0Il0sZy5hZGRMYW5ndWFnZT1mdW5jdGlvbihhLGIpe3ZhciBjO3JldHVybiBhPSgiIithKS50b0xvd2VyQ2FzZSgpLGcub3B0aW9ucy5sYW5ndWFnZXM9KDAsQlsiZGVmYXVsdCJdKShnLm9wdGlvbnMubGFuZ3VhZ2VzLChjPXt9LGNbYV09YixjKSksZy5vcHRpb25zLmxhbmd1YWdlc1thXX0sZy5sb2c9T1siZGVmYXVsdCJdLGcuY3JlYXRlVGltZVJhbmdlPWcuY3JlYXRlVGltZVJhbmdlcz1LLmNyZWF0ZVRpbWVSYW5nZXMsZy5mb3JtYXRUaW1lPU1bImRlZmF1bHQiXSxnLnBhcnNlVXJsPVUucGFyc2VVcmwsZy5pc0Nyb3NzT3JpZ2luPVUuaXNDcm9zc09yaWdpbixnLkV2ZW50VGFyZ2V0PXRbImRlZmF1bHQiXSxnLm9uPXYub24sZy5vbmU9di5vbmUsZy5vZmY9di5vZmYsZy50cmlnZ2VyPXYudHJpZ2dlcixnLnhocj1fWyJkZWZhdWx0Il0sZy5UZXh0VHJhY2s9RlsiZGVmYXVsdCJdLGcuQXVkaW9UcmFjaz1IWyJkZWZhdWx0Il0sZy5WaWRlb1RyYWNrPUpbImRlZmF1bHQiXSxnLmlzRWw9US5pc0VsLGcuaXNUZXh0Tm9kZT1RLmlzVGV4dE5vZGUsZy5jcmVhdGVFbD1RLmNyZWF0ZUVsLGcuaGFzQ2xhc3M9US5oYXNFbENsYXNzLGcuYWRkQ2xhc3M9US5hZGRFbENsYXNzLGcucmVtb3ZlQ2xhc3M9US5yZW1vdmVFbENsYXNzLGcudG9nZ2xlQ2xhc3M9US50b2dnbGVFbENsYXNzLGcuc2V0QXR0cmlidXRlcz1RLnNldEVsQXR0cmlidXRlcyxnLmdldEF0dHJpYnV0ZXM9US5nZXRFbEF0dHJpYnV0ZXMsZy5lbXB0eUVsPVEuZW1wdHlFbCxnLmFwcGVuZENvbnRlbnQ9US5hcHBlbmRDb250ZW50LGcuaW5zZXJ0Q29udGVudD1RLmluc2VydENvbnRlbnQsZy5jb21wdXRlZFN0eWxlPVhbImRlZmF1bHQiXSwiZnVuY3Rpb24iPT10eXBlb2YgYSYmYS5hbWQ/YSgidmlkZW9qcyIsW10sZnVuY3Rpb24oKXtyZXR1cm4gZ30pOiJvYmplY3QiPT09KCJ1bmRlZmluZWQiPT10eXBlb2YgZD8idW5kZWZpbmVkIjpoKGQpKSYmIm9iamVjdCI9PT0oInVuZGVmaW5lZCI9PXR5cGVvZiBjPyJ1bmRlZmluZWQiOmgoYykpJiYoYy5leHBvcnRzPWcpLGRbImRlZmF1bHQiXT1nfSx7NDI6NDIsNDM6NDMsNTo1LDUxOjUxLDUyOjUyLDU2OjU2LDYyOjYyLDY0OjY0LDcyOjcyLDc3Ojc3LDc4Ojc4LDgwOjgwLDgxOjgxLDgyOjgyLDgzOjgzLDg0Ojg0LDg2Ojg2LDg3Ojg3LDg4Ojg4LDg5Ojg5LDkwOjkwLDkyOjkyLDk0Ojk0LDk1Ojk1LDk5Ojk5fV0sOTQ6W2Z1bmN0aW9uKGEsYixjKXsoZnVuY3Rpb24oYyl7dmFyIGQ9InVuZGVmaW5lZCIhPXR5cGVvZiBjP2M6InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9LGU9YSg5Nik7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBkb2N1bWVudCliLmV4cG9ydHM9ZG9jdW1lbnQ7ZWxzZXt2YXIgZj1kWyJfX0dMT0JBTF9ET0NVTUVOVF9DQUNIRUA0Il07Znx8KGY9ZFsiX19HTE9CQUxfRE9DVU1FTlRfQ0FDSEVANCJdPWUpLGIuZXhwb3J0cz1mfX0pLmNhbGwodGhpcywidW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmP3NlbGY6InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9KX0sezk2Ojk2fV0sOTU6W2Z1bmN0aW9uKGEsYixjKXsoZnVuY3Rpb24oYSl7InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/Yi5leHBvcnRzPXdpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIGE/Yi5leHBvcnRzPWE6InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmP2IuZXhwb3J0cz1zZWxmOmIuZXhwb3J0cz17fX0pLmNhbGwodGhpcywidW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmP3NlbGY6InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9KX0se31dLDk2OltmdW5jdGlvbihhLGIsYyl7fSx7fV0sOTc6W2Z1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKGEsYil7dmFyIGMsZD1udWxsO3RyeXtjPUpTT04ucGFyc2UoYSxiKX1jYXRjaChlKXtkPWV9cmV0dXJuW2QsY119Yi5leHBvcnRzPWR9LHt9XSw5ODpbZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoYSl7cmV0dXJuIGEucmVwbGFjZSgvXG5ccj9ccyovZywiIil9Yi5leHBvcnRzPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0iIixjPTA7Yzxhcmd1bWVudHMubGVuZ3RoO2MrKyliKz1kKGFbY10pKyhhcmd1bWVudHNbYysxXXx8IiIpO3JldHVybiBifX0se31dLDk5OltmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGQoYSxiKXtmb3IodmFyIGM9MDtjPGEubGVuZ3RoO2MrKyliKGFbY10pfWZ1bmN0aW9uIGUoYSl7Zm9yKHZhciBiIGluIGEpaWYoYS5oYXNPd25Qcm9wZXJ0eShiKSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBmKGEsYixjKXt2YXIgZD1hO3JldHVybiBsKGIpPyhjPWIsInN0cmluZyI9PXR5cGVvZiBhJiYoZD17dXJpOmF9KSk6ZD1uKGIse3VyaTphfSksZC5jYWxsYmFjaz1jLGR9ZnVuY3Rpb24gZyhhLGIsYyl7cmV0dXJuIGI9ZihhLGIsYyksaChiKX1mdW5jdGlvbiBoKGEpe2Z1bmN0aW9uIGIoKXs0PT09bC5yZWFkeVN0YXRlJiZmKCl9ZnVuY3Rpb24gYygpe3ZhciBhPXZvaWQgMDtpZihhPWwucmVzcG9uc2U/bC5yZXNwb25zZTpsLnJlc3BvbnNlVGV4dHx8aShsKSx2KXRyeXthPUpTT04ucGFyc2UoYSl9Y2F0Y2goYil7fXJldHVybiBhfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGNsZWFyVGltZW91dChwKSxhIGluc3RhbmNlb2YgRXJyb3J8fChhPW5ldyBFcnJvcigiIisoYXx8IlVua25vd24gWE1MSHR0cFJlcXVlc3QgRXJyb3IiKSkpLGEuc3RhdHVzQ29kZT0wLGooYSxrKX1mdW5jdGlvbiBmKCl7aWYoIW8pe3ZhciBiO2NsZWFyVGltZW91dChwKSxiPWEudXNlWERSJiZ2b2lkIDA9PT1sLnN0YXR1cz8yMDA6MTIyMz09PWwuc3RhdHVzPzIwNDpsLnN0YXR1czt2YXIgZD1rLGU9bnVsbDtyZXR1cm4gMCE9PWI/KGQ9e2JvZHk6YygpLHN0YXR1c0NvZGU6YixtZXRob2Q6cixoZWFkZXJzOnt9LHVybDpxLHJhd1JlcXVlc3Q6bH0sbC5nZXRBbGxSZXNwb25zZUhlYWRlcnMmJihkLmhlYWRlcnM9bShsLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSkpOmU9bmV3IEVycm9yKCJJbnRlcm5hbCBYTUxIdHRwUmVxdWVzdCBFcnJvciIpLGooZSxkLGQuYm9keSl9fWlmKCJ1bmRlZmluZWQiPT10eXBlb2YgYS5jYWxsYmFjayl0aHJvdyBuZXcgRXJyb3IoImNhbGxiYWNrIGFyZ3VtZW50IG1pc3NpbmciKTt2YXIgaD0hMSxqPWZ1bmN0aW9uKGIsYyxkKXtofHwoaD0hMCxhLmNhbGxiYWNrKGIsYyxkKSl9LGs9e2JvZHk6dm9pZCAwLGhlYWRlcnM6e30sc3RhdHVzQ29kZTowLG1ldGhvZDpyLHVybDpxLHJhd1JlcXVlc3Q6bH0sbD1hLnhocnx8bnVsbDtsfHwobD1hLmNvcnN8fGEudXNlWERSP25ldyBnLlhEb21haW5SZXF1ZXN0Om5ldyBnLlhNTEh0dHBSZXF1ZXN0KTt2YXIgbixvLHAscT1sLnVybD1hLnVyaXx8YS51cmwscj1sLm1ldGhvZD1hLm1ldGhvZHx8IkdFVCIscz1hLmJvZHl8fGEuZGF0YXx8bnVsbCx0PWwuaGVhZGVycz1hLmhlYWRlcnN8fHt9LHU9ISFhLnN5bmMsdj0hMTtpZigianNvbiJpbiBhJiYodj0hMCx0LmFjY2VwdHx8dC5BY2NlcHR8fCh0LkFjY2VwdD0iYXBwbGljYXRpb24vanNvbiIpLCJHRVQiIT09ciYmIkhFQUQiIT09ciYmKHRbImNvbnRlbnQtdHlwZSJdfHx0WyJDb250ZW50LVR5cGUiXXx8KHRbIkNvbnRlbnQtVHlwZSJdPSJhcHBsaWNhdGlvbi9qc29uIiksCnM9SlNPTi5zdHJpbmdpZnkoYS5qc29uKSkpLGwub25yZWFkeXN0YXRlY2hhbmdlPWIsbC5vbmxvYWQ9ZixsLm9uZXJyb3I9ZCxsLm9ucHJvZ3Jlc3M9ZnVuY3Rpb24oKXt9LGwub250aW1lb3V0PWQsbC5vcGVuKHIscSwhdSxhLnVzZXJuYW1lLGEucGFzc3dvcmQpLHV8fChsLndpdGhDcmVkZW50aWFscz0hIWEud2l0aENyZWRlbnRpYWxzKSwhdSYmYS50aW1lb3V0PjAmJihwPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtvPSEwLGwuYWJvcnQoInRpbWVvdXQiKTt2YXIgYT1uZXcgRXJyb3IoIlhNTEh0dHBSZXF1ZXN0IHRpbWVvdXQiKTthLmNvZGU9IkVUSU1FRE9VVCIsZChhKX0sYS50aW1lb3V0KSksbC5zZXRSZXF1ZXN0SGVhZGVyKWZvcihuIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShuKSYmbC5zZXRSZXF1ZXN0SGVhZGVyKG4sdFtuXSk7ZWxzZSBpZihhLmhlYWRlcnMmJiFlKGEuaGVhZGVycykpdGhyb3cgbmV3IEVycm9yKCJIZWFkZXJzIGNhbm5vdCBiZSBzZXQgb24gYW4gWERvbWFpblJlcXVlc3Qgb2JqZWN0Iik7cmV0dXJuInJlc3BvbnNlVHlwZSJpbiBhJiYobC5yZXNwb25zZVR5cGU9YS5yZXNwb25zZVR5cGUpLCJiZWZvcmVTZW5kImluIGEmJiJmdW5jdGlvbiI9PXR5cGVvZiBhLmJlZm9yZVNlbmQmJmEuYmVmb3JlU2VuZChsKSxsLnNlbmQocyksbH1mdW5jdGlvbiBpKGEpe2lmKCJkb2N1bWVudCI9PT1hLnJlc3BvbnNlVHlwZSlyZXR1cm4gYS5yZXNwb25zZVhNTDt2YXIgYj0yMDQ9PT1hLnN0YXR1cyYmYS5yZXNwb25zZVhNTCYmInBhcnNlcmVycm9yIj09PWEucmVzcG9uc2VYTUwuZG9jdW1lbnRFbGVtZW50Lm5vZGVOYW1lO3JldHVybiIiIT09YS5yZXNwb25zZVR5cGV8fGI/bnVsbDphLnJlc3BvbnNlWE1MfWZ1bmN0aW9uIGooKXt9dmFyIGs9YSg5NSksbD1hKDEwMCksbT1hKDEwMyksbj1hKDEwNCk7Yi5leHBvcnRzPWcsZy5YTUxIdHRwUmVxdWVzdD1rLlhNTEh0dHBSZXF1ZXN0fHxqLGcuWERvbWFpblJlcXVlc3Q9IndpdGhDcmVkZW50aWFscyJpbiBuZXcgZy5YTUxIdHRwUmVxdWVzdD9nLlhNTEh0dHBSZXF1ZXN0OmsuWERvbWFpblJlcXVlc3QsZChbImdldCIsInB1dCIsInBvc3QiLCJwYXRjaCIsImhlYWQiLCJkZWxldGUiXSxmdW5jdGlvbihhKXtnWyJkZWxldGUiPT09YT8iZGVsIjphXT1mdW5jdGlvbihiLGMsZCl7cmV0dXJuIGM9ZihiLGMsZCksYy5tZXRob2Q9YS50b1VwcGVyQ2FzZSgpLGgoYyl9fSl9LHsxMDA6MTAwLDEwMzoxMDMsMTA0OjEwNCw5NTo5NX1dLDEwMDpbZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoYSl7dmFyIGI9ZS5jYWxsKGEpO3JldHVybiJbb2JqZWN0IEZ1bmN0aW9uXSI9PT1ifHwiZnVuY3Rpb24iPT10eXBlb2YgYSYmIltvYmplY3QgUmVnRXhwXSIhPT1ifHwidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmKGE9PT13aW5kb3cuc2V0VGltZW91dHx8YT09PXdpbmRvdy5hbGVydHx8YT09PXdpbmRvdy5jb25maXJtfHxhPT09d2luZG93LnByb21wdCl9Yi5leHBvcnRzPWQ7dmFyIGU9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZ30se31dLDEwMTpbZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoYSxiLGMpe2lmKCFoKGIpKXRocm93IG5ldyBUeXBlRXJyb3IoIml0ZXJhdG9yIG11c3QgYmUgYSBmdW5jdGlvbiIpO2FyZ3VtZW50cy5sZW5ndGg8MyYmKGM9dGhpcyksIltvYmplY3QgQXJyYXldIj09PWkuY2FsbChhKT9lKGEsYixjKToic3RyaW5nIj09dHlwZW9mIGE/ZihhLGIsYyk6ZyhhLGIsYyl9ZnVuY3Rpb24gZShhLGIsYyl7Zm9yKHZhciBkPTAsZT1hLmxlbmd0aDtkPGU7ZCsrKWouY2FsbChhLGQpJiZiLmNhbGwoYyxhW2RdLGQsYSl9ZnVuY3Rpb24gZihhLGIsYyl7Zm9yKHZhciBkPTAsZT1hLmxlbmd0aDtkPGU7ZCsrKWIuY2FsbChjLGEuY2hhckF0KGQpLGQsYSl9ZnVuY3Rpb24gZyhhLGIsYyl7Zm9yKHZhciBkIGluIGEpai5jYWxsKGEsZCkmJmIuY2FsbChjLGFbZF0sZCxhKX12YXIgaD1hKDEwMCk7Yi5leHBvcnRzPWQ7dmFyIGk9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxqPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHl9LHsxMDA6MTAwfV0sMTAyOltmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhKXtyZXR1cm4gYS5yZXBsYWNlKC9eXHMqfFxzKiQvZywiIil9Yz1iLmV4cG9ydHM9ZCxjLmxlZnQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZSgvXlxzKi8sIiIpfSxjLnJpZ2h0PWZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoL1xzKiQvLCIiKX19LHt9XSwxMDM6W2Z1bmN0aW9uKGEsYixjKXt2YXIgZD1hKDEwMiksZT1hKDEwMSksZj1mdW5jdGlvbihhKXtyZXR1cm4iW29iamVjdCBBcnJheV0iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpfTtiLmV4cG9ydHM9ZnVuY3Rpb24oYSl7aWYoIWEpcmV0dXJue307dmFyIGI9e307cmV0dXJuIGUoZChhKS5zcGxpdCgiXG4iKSxmdW5jdGlvbihhKXt2YXIgYz1hLmluZGV4T2YoIjoiKSxlPWQoYS5zbGljZSgwLGMpKS50b0xvd2VyQ2FzZSgpLGc9ZChhLnNsaWNlKGMrMSkpOyJ1bmRlZmluZWQiPT10eXBlb2YgYltlXT9iW2VdPWc6ZihiW2VdKT9iW2VdLnB1c2goZyk6YltlXT1bYltlXSxnXX0pLGJ9fSx7MTAxOjEwMSwxMDI6MTAyfV0sMTA0OltmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZCgpe2Zvcih2YXIgYT17fSxiPTA7Yjxhcmd1bWVudHMubGVuZ3RoO2IrKyl7dmFyIGM9YXJndW1lbnRzW2JdO2Zvcih2YXIgZCBpbiBjKWUuY2FsbChjLGQpJiYoYVtkXT1jW2RdKX1yZXR1cm4gYX1iLmV4cG9ydHM9ZDt2YXIgZT1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5fSx7fV19LHt9LFs5M10pKDkzKX0pLGZ1bmN0aW9uKGEpe3ZhciBiPWEudnR0anM9e30sYz1iLlZUVEN1ZSxkPWIuVlRUUmVnaW9uLGU9YS5WVFRDdWUsZj1hLlZUVFJlZ2lvbjtiLnNoaW09ZnVuY3Rpb24oKXtiLlZUVEN1ZT1jLGIuVlRUUmVnaW9uPWR9LGIucmVzdG9yZT1mdW5jdGlvbigpe2IuVlRUQ3VlPWUsYi5WVFRSZWdpb249Zn19KHRoaXMpLGZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhKXtpZigic3RyaW5nIiE9dHlwZW9mIGEpcmV0dXJuITE7dmFyIGI9aFthLnRvTG93ZXJDYXNlKCldO3JldHVybiEhYiYmYS50b0xvd2VyQ2FzZSgpfWZ1bmN0aW9uIGQoYSl7aWYoInN0cmluZyIhPXR5cGVvZiBhKXJldHVybiExO3ZhciBiPWlbYS50b0xvd2VyQ2FzZSgpXTtyZXR1cm4hIWImJmEudG9Mb3dlckNhc2UoKX1mdW5jdGlvbiBlKGEpe2Zvcih2YXIgYj0xO2I8YXJndW1lbnRzLmxlbmd0aDtiKyspe3ZhciBjPWFyZ3VtZW50c1tiXTtmb3IodmFyIGQgaW4gYylhW2RdPWNbZF19cmV0dXJuIGF9ZnVuY3Rpb24gZihhLGIsZil7dmFyIGg9dGhpcyxpPS9NU0lFXHM4XC4wLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLGo9e307aT9oPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImN1c3RvbSIpOmouZW51bWVyYWJsZT0hMCxoLmhhc0JlZW5SZXNldD0hMTt2YXIgaz0iIixsPSExLG09YSxuPWIsbz1mLHA9bnVsbCxxPSIiLHI9ITAscz0iYXV0byIsdD0ic3RhcnQiLHU9NTAsdj0ibWlkZGxlIix3PTUwLHg9Im1pZGRsZSI7aWYoT2JqZWN0LmRlZmluZVByb3BlcnR5KGgsImlkIixlKHt9LGose2dldDpmdW5jdGlvbigpe3JldHVybiBrfSxzZXQ6ZnVuY3Rpb24oYSl7az0iIithfX0pKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaCwicGF1c2VPbkV4aXQiLGUoe30saix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGx9LHNldDpmdW5jdGlvbihhKXtsPSEhYX19KSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGgsInN0YXJ0VGltZSIsZSh7fSxqLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbX0sc2V0OmZ1bmN0aW9uKGEpe2lmKCJudW1iZXIiIT10eXBlb2YgYSl0aHJvdyBuZXcgVHlwZUVycm9yKCJTdGFydCB0aW1lIG11c3QgYmUgc2V0IHRvIGEgbnVtYmVyLiIpO209YSx0aGlzLmhhc0JlZW5SZXNldD0hMH19KSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGgsImVuZFRpbWUiLGUoe30saix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG59LHNldDpmdW5jdGlvbihhKXtpZigibnVtYmVyIiE9dHlwZW9mIGEpdGhyb3cgbmV3IFR5cGVFcnJvcigiRW5kIHRpbWUgbXVzdCBiZSBzZXQgdG8gYSBudW1iZXIuIik7bj1hLHRoaXMuaGFzQmVlblJlc2V0PSEwfX0pKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaCwidGV4dCIsZSh7fSxqLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gb30sc2V0OmZ1bmN0aW9uKGEpe289IiIrYSx0aGlzLmhhc0JlZW5SZXNldD0hMH19KSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGgsInJlZ2lvbiIsZSh7fSxqLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcH0sc2V0OmZ1bmN0aW9uKGEpe3A9YSx0aGlzLmhhc0JlZW5SZXNldD0hMH19KSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGgsInZlcnRpY2FsIixlKHt9LGose2dldDpmdW5jdGlvbigpe3JldHVybiBxfSxzZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9YyhhKTtpZihiPT09ITEpdGhyb3cgbmV3IFN5bnRheEVycm9yKCJBbiBpbnZhbGlkIG9yIGlsbGVnYWwgc3RyaW5nIHdhcyBzcGVjaWZpZWQuIik7cT1iLHRoaXMuaGFzQmVlblJlc2V0PSEwfX0pKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaCwic25hcFRvTGluZXMiLGUoe30saix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHJ9LHNldDpmdW5jdGlvbihhKXtyPSEhYSx0aGlzLmhhc0JlZW5SZXNldD0hMH19KSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGgsImxpbmUiLGUoe30saix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHN9LHNldDpmdW5jdGlvbihhKXtpZigibnVtYmVyIiE9dHlwZW9mIGEmJmEhPT1nKXRocm93IG5ldyBTeW50YXhFcnJvcigiQW4gaW52YWxpZCBudW1iZXIgb3IgaWxsZWdhbCBzdHJpbmcgd2FzIHNwZWNpZmllZC4iKTtzPWEsdGhpcy5oYXNCZWVuUmVzZXQ9ITB9fSkpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShoLCJsaW5lQWxpZ24iLGUoe30saix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHR9LHNldDpmdW5jdGlvbihhKXt2YXIgYj1kKGEpO2lmKCFiKXRocm93IG5ldyBTeW50YXhFcnJvcigiQW4gaW52YWxpZCBvciBpbGxlZ2FsIHN0cmluZyB3YXMgc3BlY2lmaWVkLiIpO3Q9Yix0aGlzLmhhc0JlZW5SZXNldD0hMH19KSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGgsInBvc2l0aW9uIixlKHt9LGose2dldDpmdW5jdGlvbigpe3JldHVybiB1fSxzZXQ6ZnVuY3Rpb24oYSl7aWYoYTwwfHxhPjEwMCl0aHJvdyBuZXcgRXJyb3IoIlBvc2l0aW9uIG11c3QgYmUgYmV0d2VlbiAwIGFuZCAxMDAuIik7dT1hLHRoaXMuaGFzQmVlblJlc2V0PSEwfX0pKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaCwicG9zaXRpb25BbGlnbiIsZSh7fSxqLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdn0sc2V0OmZ1bmN0aW9uKGEpe3ZhciBiPWQoYSk7aWYoIWIpdGhyb3cgbmV3IFN5bnRheEVycm9yKCJBbiBpbnZhbGlkIG9yIGlsbGVnYWwgc3RyaW5nIHdhcyBzcGVjaWZpZWQuIik7dj1iLHRoaXMuaGFzQmVlblJlc2V0PSEwfX0pKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaCwic2l6ZSIsZSh7fSxqLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gd30sc2V0OmZ1bmN0aW9uKGEpe2lmKGE8MHx8YT4xMDApdGhyb3cgbmV3IEVycm9yKCJTaXplIG11c3QgYmUgYmV0d2VlbiAwIGFuZCAxMDAuIik7dz1hLHRoaXMuaGFzQmVlblJlc2V0PSEwfX0pKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaCwiYWxpZ24iLGUoe30saix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHh9LHNldDpmdW5jdGlvbihhKXt2YXIgYj1kKGEpO2lmKCFiKXRocm93IG5ldyBTeW50YXhFcnJvcigiQW4gaW52YWxpZCBvciBpbGxlZ2FsIHN0cmluZyB3YXMgc3BlY2lmaWVkLiIpO3g9Yix0aGlzLmhhc0JlZW5SZXNldD0hMH19KSksaC5kaXNwbGF5U3RhdGU9dm9pZCAwLGkpcmV0dXJuIGh9dmFyIGc9ImF1dG8iLGg9eyIiOiEwLGxyOiEwLHJsOiEwfSxpPXtzdGFydDohMCxtaWRkbGU6ITAsZW5kOiEwLGxlZnQ6ITAscmlnaHQ6ITB9O2YucHJvdG90eXBlLmdldEN1ZUFzSFRNTD1mdW5jdGlvbigpe3JldHVybiBXZWJWVFQuY29udmVydEN1ZVRvRE9NVHJlZSh3aW5kb3csdGhpcy50ZXh0KX0sYS5WVFRDdWU9YS5WVFRDdWV8fGYsYi5WVFRDdWU9Zn0odGhpcyx0aGlzLnZ0dGpzfHx7fSksZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEpe2lmKCJzdHJpbmciIT10eXBlb2YgYSlyZXR1cm4hMTt2YXIgYj1mW2EudG9Mb3dlckNhc2UoKV07cmV0dXJuISFiJiZhLnRvTG93ZXJDYXNlKCl9ZnVuY3Rpb24gZChhKXtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIGEmJmE+PTAmJmE8PTEwMH1mdW5jdGlvbiBlKCl7dmFyIGE9MTAwLGI9MyxlPTAsZj0xMDAsZz0wLGg9MTAwLGk9IiI7T2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcyx7d2lkdGg6e2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGF9LHNldDpmdW5jdGlvbihiKXtpZighZChiKSl0aHJvdyBuZXcgRXJyb3IoIldpZHRoIG11c3QgYmUgYmV0d2VlbiAwIGFuZCAxMDAuIik7YT1ifX0sbGluZXM6e2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGJ9LHNldDpmdW5jdGlvbihhKXtpZigibnVtYmVyIiE9dHlwZW9mIGEpdGhyb3cgbmV3IFR5cGVFcnJvcigiTGluZXMgbXVzdCBiZSBzZXQgdG8gYSBudW1iZXIuIik7Yj1hfX0scmVnaW9uQW5jaG9yWTp7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZn0sc2V0OmZ1bmN0aW9uKGEpe2lmKCFkKGEpKXRocm93IG5ldyBFcnJvcigiUmVnaW9uQW5jaG9yWCBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMTAwLiIpO2Y9YX19LHJlZ2lvbkFuY2hvclg6e2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGV9LHNldDpmdW5jdGlvbihhKXtpZighZChhKSl0aHJvdyBuZXcgRXJyb3IoIlJlZ2lvbkFuY2hvclkgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDEwMC4iKTtlPWF9fSx2aWV3cG9ydEFuY2hvclk6e2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGh9LHNldDpmdW5jdGlvbihhKXtpZighZChhKSl0aHJvdyBuZXcgRXJyb3IoIlZpZXdwb3J0QW5jaG9yWSBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMTAwLiIpO2g9YX19LHZpZXdwb3J0QW5jaG9yWDp7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZ30sc2V0OmZ1bmN0aW9uKGEpe2lmKCFkKGEpKXRocm93IG5ldyBFcnJvcigiVmlld3BvcnRBbmNob3JYIG11c3QgYmUgYmV0d2VlbiAwIGFuZCAxMDAuIik7Zz1hfX0sc2Nyb2xsOntlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBpfSxzZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9YyhhKTtpZihiPT09ITEpdGhyb3cgbmV3IFN5bnRheEVycm9yKCJBbiBpbnZhbGlkIG9yIGlsbGVnYWwgc3RyaW5nIHdhcyBzcGVjaWZpZWQuIik7aT1ifX19KX12YXIgZj17IiI6ITAsdXA6ITB9O2EuVlRUUmVnaW9uPWEuVlRUUmVnaW9ufHxlLGIuVlRUUmVnaW9uPWV9KHRoaXMsdGhpcy52dHRqc3x8e30pLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXt0aGlzLm5hbWU9IlBhcnNpbmdFcnJvciIsdGhpcy5jb2RlPWEuY29kZSx0aGlzLm1lc3NhZ2U9Ynx8YS5tZXNzYWdlfWZ1bmN0aW9uIGMoYSl7ZnVuY3Rpb24gYihhLGIsYyxkKXtyZXR1cm4gMzYwMCooMHxhKSs2MCooMHxiKSsoMHxjKSsoMHxkKS8xZTN9dmFyIGM9YS5tYXRjaCgvXihcZCspOihcZHsyfSkoOlxkezJ9KT9cLihcZHszfSkvKTtyZXR1cm4gYz9jWzNdP2IoY1sxXSxjWzJdLGNbM10ucmVwbGFjZSgiOiIsIiIpLGNbNF0pOmNbMV0+NTk/YihjWzFdLGNbMl0sMCxjWzRdKTpiKDAsY1sxXSxjWzJdLGNbNF0pOm51bGx9ZnVuY3Rpb24gZCgpe3RoaXMudmFsdWVzPW8obnVsbCl9ZnVuY3Rpb24gZShhLGIsYyxkKXt2YXIgZT1kP2Euc3BsaXQoZCk6W2FdO2Zvcih2YXIgZiBpbiBlKWlmKCJzdHJpbmciPT10eXBlb2YgZVtmXSl7dmFyIGc9ZVtmXS5zcGxpdChjKTtpZigyPT09Zy5sZW5ndGgpe3ZhciBoPWdbMF0saT1nWzFdO2IoaCxpKX19fWZ1bmN0aW9uIGYoYSxmLGcpe2Z1bmN0aW9uIGgoKXt2YXIgZD1jKGEpO2lmKG51bGw9PT1kKXRocm93IG5ldyBiKGIuRXJyb3JzLkJhZFRpbWVTdGFtcCwiTWFsZm9ybWVkIHRpbWVzdGFtcDogIitrKTtyZXR1cm4gYT1hLnJlcGxhY2UoL15bXlxzYS16QS1aLV0rLywiIiksZH1mdW5jdGlvbiBpKGEsYil7dmFyIGM9bmV3IGQ7ZShhLGZ1bmN0aW9uKGEsYil7c3dpdGNoKGEpe2Nhc2UicmVnaW9uIjpmb3IodmFyIGQ9Zy5sZW5ndGgtMTtkPj0wO2QtLSlpZihnW2RdLmlkPT09Yil7Yy5zZXQoYSxnW2RdLnJlZ2lvbik7YnJlYWt9YnJlYWs7Y2FzZSJ2ZXJ0aWNhbCI6Yy5hbHQoYSxiLFsicmwiLCJsciJdKTticmVhaztjYXNlImxpbmUiOnZhciBlPWIuc3BsaXQoIiwiKSxmPWVbMF07Yy5pbnRlZ2VyKGEsZiksYy5wZXJjZW50KGEsZik/Yy5zZXQoInNuYXBUb0xpbmVzIiwhMSk6bnVsbCxjLmFsdChhLGYsWyJhdXRvIl0pLDI9PT1lLmxlbmd0aCYmYy5hbHQoImxpbmVBbGlnbiIsZVsxXSxbInN0YXJ0IiwibWlkZGxlIiwiZW5kIl0pO2JyZWFrO2Nhc2UicG9zaXRpb24iOmU9Yi5zcGxpdCgiLCIpLGMucGVyY2VudChhLGVbMF0pLDI9PT1lLmxlbmd0aCYmYy5hbHQoInBvc2l0aW9uQWxpZ24iLGVbMV0sWyJzdGFydCIsIm1pZGRsZSIsImVuZCJdKTticmVhaztjYXNlInNpemUiOmMucGVyY2VudChhLGIpO2JyZWFrO2Nhc2UiYWxpZ24iOmMuYWx0KGEsYixbInN0YXJ0IiwibWlkZGxlIiwiZW5kIiwibGVmdCIsInJpZ2h0Il0pfX0sLzovLC9ccy8pLGIucmVnaW9uPWMuZ2V0KCJyZWdpb24iLG51bGwpLGIudmVydGljYWw9Yy5nZXQoInZlcnRpY2FsIiwiIiksYi5saW5lPWMuZ2V0KCJsaW5lIiwiYXV0byIpLGIubGluZUFsaWduPWMuZ2V0KCJsaW5lQWxpZ24iLCJzdGFydCIpLGIuc25hcFRvTGluZXM9Yy5nZXQoInNuYXBUb0xpbmVzIiwhMCksYi5zaXplPWMuZ2V0KCJzaXplIiwxMDApLGIuYWxpZ249Yy5nZXQoImFsaWduIiwibWlkZGxlIiksYi5wb3NpdGlvbj1jLmdldCgicG9zaXRpb24iLHtzdGFydDowLGxlZnQ6MCxtaWRkbGU6NTAsZW5kOjEwMCxyaWdodDoxMDB9LGIuYWxpZ24pLGIucG9zaXRpb25BbGlnbj1jLmdldCgicG9zaXRpb25BbGlnbiIse3N0YXJ0OiJzdGFydCIsbGVmdDoic3RhcnQiLG1pZGRsZToibWlkZGxlIixlbmQ6ImVuZCIscmlnaHQ6ImVuZCJ9LGIuYWxpZ24pfWZ1bmN0aW9uIGooKXthPWEucmVwbGFjZSgvXlxzKy8sIiIpfXZhciBrPWE7aWYoaigpLGYuc3RhcnRUaW1lPWgoKSxqKCksIi0tPiIhPT1hLnN1YnN0cigwLDMpKXRocm93IG5ldyBiKGIuRXJyb3JzLkJhZFRpbWVTdGFtcCwiTWFsZm9ybWVkIHRpbWUgc3RhbXAgKHRpbWUgc3RhbXBzIG11c3QgYmUgc2VwYXJhdGVkIGJ5ICctLT4nKTogIitrKTthPWEuc3Vic3RyKDMpLGooKSxmLmVuZFRpbWU9aCgpLGooKSxpKGEsZil9ZnVuY3Rpb24gZyhhLGIpe2Z1bmN0aW9uIGQoKXtmdW5jdGlvbiBhKGEpe3JldHVybiBiPWIuc3Vic3RyKGEubGVuZ3RoKSxhfWlmKCFiKXJldHVybiBudWxsO3ZhciBjPWIubWF0Y2goL14oW148XSopKDxbXj5dKz4/KT8vKTtyZXR1cm4gYShjWzFdP2NbMV06Y1syXSl9ZnVuY3Rpb24gZShhKXtyZXR1cm4gcFthXX1mdW5jdGlvbiBmKGEpe2Zvcig7bz1hLm1hdGNoKC8mKGFtcHxsdHxndHxscm18cmxtfG5ic3ApOy8pOylhPWEucmVwbGFjZShvWzBdLGUpO3JldHVybiBhfWZ1bmN0aW9uIGcoYSxiKXtyZXR1cm4hc1tiLmxvY2FsTmFtZV18fHNbYi5sb2NhbE5hbWVdPT09YS5sb2NhbE5hbWV9ZnVuY3Rpb24gaChiLGMpe3ZhciBkPXFbYl07aWYoIWQpcmV0dXJuIG51bGw7dmFyIGU9YS5kb2N1bWVudC5jcmVhdGVFbGVtZW50KGQpO2UubG9jYWxOYW1lPWQ7dmFyIGY9cltiXTtyZXR1cm4gZiYmYyYmKGVbZl09Yy50cmltKCkpLGV9Zm9yKHZhciBpLGo9YS5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxrPWosbD1bXTtudWxsIT09KGk9ZCgpKTspaWYoIjwiIT09aVswXSlrLmFwcGVuZENoaWxkKGEuZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoZihpKSkpO2Vsc2V7aWYoIi8iPT09aVsxXSl7bC5sZW5ndGgmJmxbbC5sZW5ndGgtMV09PT1pLnN1YnN0cigyKS5yZXBsYWNlKCI+IiwiIikmJihsLnBvcCgpLGs9ay5wYXJlbnROb2RlKTtjb250aW51ZX12YXIgbSxuPWMoaS5zdWJzdHIoMSxpLmxlbmd0aC0yKSk7aWYobil7bT1hLmRvY3VtZW50LmNyZWF0ZVByb2Nlc3NpbmdJbnN0cnVjdGlvbigidGltZXN0YW1wIixuKSxrLmFwcGVuZENoaWxkKG0pO2NvbnRpbnVlfXZhciBvPWkubWF0Y2goL148KFteLlxzXC8wLTk+XSspKFwuW15cc1xcPl0rKT8oW14+XFxdKyk/KFxcPyk+PyQvKTtpZighbyljb250aW51ZTtpZihtPWgob1sxXSxvWzNdKSwhbSljb250aW51ZTtpZighZyhrLG0pKWNvbnRpbnVlO29bMl0mJihtLmNsYXNzTmFtZT1vWzJdLnN1YnN0cigxKS5yZXBsYWNlKCIuIiwiICIpKSxsLnB1c2gob1sxXSksay5hcHBlbmRDaGlsZChtKSxrPW19cmV0dXJuIGp9ZnVuY3Rpb24gaChhKXtmdW5jdGlvbiBiKGEsYil7Zm9yKHZhciBjPWIuY2hpbGROb2Rlcy5sZW5ndGgtMTtjPj0wO2MtLSlhLnB1c2goYi5jaGlsZE5vZGVzW2NdKX1mdW5jdGlvbiBjKGEpe2lmKCFhfHwhYS5sZW5ndGgpcmV0dXJuIG51bGw7dmFyIGQ9YS5wb3AoKSxlPWQudGV4dENvbnRlbnR8fGQuaW5uZXJUZXh0O2lmKGUpe3ZhciBmPWUubWF0Y2goL14uKihcbnxccikvKTtyZXR1cm4gZj8oYS5sZW5ndGg9MCxmWzBdKTplfXJldHVybiJydWJ5Ij09PWQudGFnTmFtZT9jKGEpOmQuY2hpbGROb2Rlcz8oYihhLGQpLGMoYSkpOnZvaWQgMH12YXIgZCxlPVtdLGY9IiI7aWYoIWF8fCFhLmNoaWxkTm9kZXMpcmV0dXJuImx0ciI7Zm9yKGIoZSxhKTtmPWMoZSk7KWZvcih2YXIgZz0wO2c8Zi5sZW5ndGg7ZysrKXtkPWYuY2hhckNvZGVBdChnKTtmb3IodmFyIGg9MDtoPHQubGVuZ3RoO2grKylpZih0W2hdPT09ZClyZXR1cm4icnRsIn1yZXR1cm4ibHRyIn1mdW5jdGlvbiBpKGEpe2lmKCJudW1iZXIiPT10eXBlb2YgYS5saW5lJiYoYS5zbmFwVG9MaW5lc3x8YS5saW5lPj0wJiZhLmxpbmU8PTEwMCkpcmV0dXJuIGEubGluZTtpZighYS50cmFja3x8IWEudHJhY2sudGV4dFRyYWNrTGlzdHx8IWEudHJhY2sudGV4dFRyYWNrTGlzdC5tZWRpYUVsZW1lbnQpcmV0dXJuLTE7Zm9yKHZhciBiPWEudHJhY2ssYz1iLnRleHRUcmFja0xpc3QsZD0wLGU9MDtlPGMubGVuZ3RoJiZjW2VdIT09YjtlKyspInNob3dpbmciPT09Y1tlXS5tb2RlJiZkKys7cmV0dXJuKytkKi0xfWZ1bmN0aW9uIGooKXt9ZnVuY3Rpb24gayhhLGIsYyl7dmFyIGQ9L01TSUVcczhcLjAvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksZT0icmdiYSgyNTUsIDI1NSwgMjU1LCAxKSIsZj0icmdiYSgwLCAwLCAwLCAwLjgpIjtkJiYoZT0icmdiKDI1NSwgMjU1LCAyNTUpIixmPSJyZ2IoMCwgMCwgMCkiKSxqLmNhbGwodGhpcyksdGhpcy5jdWU9Yix0aGlzLmN1ZURpdj1nKGEsYi50ZXh0KTt2YXIgaT17Y29sb3I6ZSxiYWNrZ3JvdW5kQ29sb3I6Zixwb3NpdGlvbjoicmVsYXRpdmUiLGxlZnQ6MCxyaWdodDowLHRvcDowLGJvdHRvbTowLGRpc3BsYXk6ImlubGluZSJ9O2R8fChpLndyaXRpbmdNb2RlPSIiPT09Yi52ZXJ0aWNhbD8iaG9yaXpvbnRhbC10YiI6ImxyIj09PWIudmVydGljYWw/InZlcnRpY2FsLWxyIjoidmVydGljYWwtcmwiLGkudW5pY29kZUJpZGk9InBsYWludGV4dCIpLHRoaXMuYXBwbHlTdHlsZXMoaSx0aGlzLmN1ZURpdiksdGhpcy5kaXY9YS5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxpPXt0ZXh0QWxpZ246Im1pZGRsZSI9PT1iLmFsaWduPyJjZW50ZXIiOmIuYWxpZ24sZm9udDpjLmZvbnQsd2hpdGVTcGFjZToicHJlLWxpbmUiLHBvc2l0aW9uOiJhYnNvbHV0ZSJ9LGR8fChpLmRpcmVjdGlvbj1oKHRoaXMuY3VlRGl2KSxpLndyaXRpbmdNb2RlPSIiPT09Yi52ZXJ0aWNhbD8iaG9yaXpvbnRhbC10YiI6ImxyIj09PWIudmVydGljYWw/InZlcnRpY2FsLWxyIjoidmVydGljYWwtcmwiLnN0eWxlc3VuaWNvZGVCaWRpPSJwbGFpbnRleHQiKSx0aGlzLmFwcGx5U3R5bGVzKGkpLHRoaXMuZGl2LmFwcGVuZENoaWxkKHRoaXMuY3VlRGl2KTt2YXIgaz0wO3N3aXRjaChiLnBvc2l0aW9uQWxpZ24pe2Nhc2Uic3RhcnQiOms9Yi5wb3NpdGlvbjticmVhaztjYXNlIm1pZGRsZSI6az1iLnBvc2l0aW9uLWIuc2l6ZS8yO2JyZWFrO2Nhc2UiZW5kIjprPWIucG9zaXRpb24tYi5zaXplfSIiPT09Yi52ZXJ0aWNhbD90aGlzLmFwcGx5U3R5bGVzKHtsZWZ0OnRoaXMuZm9ybWF0U3R5bGUoaywiJSIpLHdpZHRoOnRoaXMuZm9ybWF0U3R5bGUoYi5zaXplLCIlIil9KTp0aGlzLmFwcGx5U3R5bGVzKHt0b3A6dGhpcy5mb3JtYXRTdHlsZShrLCIlIiksaGVpZ2h0OnRoaXMuZm9ybWF0U3R5bGUoYi5zaXplLCIlIil9KSx0aGlzLm1vdmU9ZnVuY3Rpb24oYSl7dGhpcy5hcHBseVN0eWxlcyh7dG9wOnRoaXMuZm9ybWF0U3R5bGUoYS50b3AsInB4IiksYm90dG9tOnRoaXMuZm9ybWF0U3R5bGUoYS5ib3R0b20sInB4IiksbGVmdDp0aGlzLmZvcm1hdFN0eWxlKGEubGVmdCwicHgiKSxyaWdodDp0aGlzLmZvcm1hdFN0eWxlKGEucmlnaHQsInB4IiksaGVpZ2h0OnRoaXMuZm9ybWF0U3R5bGUoYS5oZWlnaHQsInB4Iiksd2lkdGg6dGhpcy5mb3JtYXRTdHlsZShhLndpZHRoLCJweCIpfSl9fWZ1bmN0aW9uIGwoYSl7dmFyIGIsYyxkLGUsZj0vTVNJRVxzOFwuMC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtpZihhLmRpdil7Yz1hLmRpdi5vZmZzZXRIZWlnaHQsZD1hLmRpdi5vZmZzZXRXaWR0aCxlPWEuZGl2Lm9mZnNldFRvcDt2YXIgZz0oZz1hLmRpdi5jaGlsZE5vZGVzKSYmKGc9Z1swXSkmJmcuZ2V0Q2xpZW50UmVjdHMmJmcuZ2V0Q2xpZW50UmVjdHMoKTthPWEuZGl2LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGI9Zz9NYXRoLm1heChnWzBdJiZnWzBdLmhlaWdodHx8MCxhLmhlaWdodC9nLmxlbmd0aCk6MH10aGlzLmxlZnQ9YS5sZWZ0LHRoaXMucmlnaHQ9YS5yaWdodCx0aGlzLnRvcD1hLnRvcHx8ZSx0aGlzLmhlaWdodD1hLmhlaWdodHx8Yyx0aGlzLmJvdHRvbT1hLmJvdHRvbXx8ZSsoYS5oZWlnaHR8fGMpLHRoaXMud2lkdGg9YS53aWR0aHx8ZCx0aGlzLmxpbmVIZWlnaHQ9dm9pZCAwIT09Yj9iOmEubGluZUhlaWdodCxmJiYhdGhpcy5saW5lSGVpZ2h0JiYodGhpcy5saW5lSGVpZ2h0PTEzKX1mdW5jdGlvbiBtKGEsYixjLGQpe2Z1bmN0aW9uIGUoYSxiKXtmb3IodmFyIGUsZj1uZXcgbChhKSxnPTEsaD0wO2g8Yi5sZW5ndGg7aCsrKXtmb3IoO2Eub3ZlcmxhcHNPcHBvc2l0ZUF4aXMoYyxiW2hdKXx8YS53aXRoaW4oYykmJmEub3ZlcmxhcHNBbnkoZCk7KWEubW92ZShiW2hdKTtpZihhLndpdGhpbihjKSlyZXR1cm4gYTt2YXIgaT1hLmludGVyc2VjdFBlcmNlbnRhZ2UoYyk7Zz5pJiYoZT1uZXcgbChhKSxnPWkpLGE9bmV3IGwoZil9cmV0dXJuIGV8fGZ9dmFyIGY9bmV3IGwoYiksZz1iLmN1ZSxoPWkoZyksaj1bXTtpZihnLnNuYXBUb0xpbmVzKXt2YXIgaztzd2l0Y2goZy52ZXJ0aWNhbCl7Y2FzZSIiOmo9WyIreSIsIi15Il0saz0iaGVpZ2h0IjticmVhaztjYXNlInJsIjpqPVsiK3giLCIteCJdLGs9IndpZHRoIjticmVhaztjYXNlImxyIjpqPVsiLXgiLCIreCJdLGs9IndpZHRoIn12YXIgbT1mLmxpbmVIZWlnaHQsbj1tKk1hdGgucm91bmQoaCksbz1jW2tdK20scD1qWzBdO01hdGguYWJzKG4pPm8mJihuPW48MD8tMToxLG4qPU1hdGguY2VpbChvL20pKm0pLGg8MCYmKG4rPSIiPT09Zy52ZXJ0aWNhbD9jLmhlaWdodDpjLndpZHRoLGo9ai5yZXZlcnNlKCkpLGYubW92ZShwLG4pfWVsc2V7dmFyIHE9Zi5saW5lSGVpZ2h0L2MuaGVpZ2h0KjEwMDtzd2l0Y2goZy5saW5lQWxpZ24pe2Nhc2UibWlkZGxlIjpoLT1xLzI7YnJlYWs7Y2FzZSJlbmQiOmgtPXF9c3dpdGNoKGcudmVydGljYWwpe2Nhc2UiIjpiLmFwcGx5U3R5bGVzKHt0b3A6Yi5mb3JtYXRTdHlsZShoLCIlIil9KTticmVhaztjYXNlInJsIjpiLmFwcGx5U3R5bGVzKHtsZWZ0OmIuZm9ybWF0U3R5bGUoaCwiJSIpfSk7YnJlYWs7Y2FzZSJsciI6Yi5hcHBseVN0eWxlcyh7cmlnaHQ6Yi5mb3JtYXRTdHlsZShoLCIlIil9KX1qPVsiK3kiLCIteCIsIit4IiwiLXkiXSxmPW5ldyBsKGIpfXZhciByPWUoZixqKTtiLm1vdmUoci50b0NTU0NvbXBhdFZhbHVlcyhjKSl9ZnVuY3Rpb24gbigpe312YXIgbz1PYmplY3QuY3JlYXRlfHxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXt9cmV0dXJuIGZ1bmN0aW9uKGIpe2lmKDEhPT1hcmd1bWVudHMubGVuZ3RoKXRocm93IG5ldyBFcnJvcigiT2JqZWN0LmNyZWF0ZSBzaGltIG9ubHkgYWNjZXB0cyBvbmUgcGFyYW1ldGVyLiIpO3JldHVybiBhLnByb3RvdHlwZT1iLG5ldyBhfX0oKTtiLnByb3RvdHlwZT1vKEVycm9yLnByb3RvdHlwZSksYi5wcm90b3R5cGUuY29uc3RydWN0b3I9YixiLkVycm9ycz17QmFkU2lnbmF0dXJlOntjb2RlOjAsbWVzc2FnZToiTWFsZm9ybWVkIFdlYlZUVCBzaWduYXR1cmUuIn0sQmFkVGltZVN0YW1wOntjb2RlOjEsbWVzc2FnZToiTWFsZm9ybWVkIHRpbWUgc3RhbXAuIn19LGQucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmdldChhKXx8IiI9PT1ifHwodGhpcy52YWx1ZXNbYV09Yil9LGdldDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGM/dGhpcy5oYXMoYSk/dGhpcy52YWx1ZXNbYV06YltjXTp0aGlzLmhhcyhhKT90aGlzLnZhbHVlc1thXTpifSxoYXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEgaW4gdGhpcy52YWx1ZXN9LGFsdDpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTA7ZDxjLmxlbmd0aDsrK2QpaWYoYj09PWNbZF0pe3RoaXMuc2V0KGEsYik7YnJlYWt9fSxpbnRlZ2VyOmZ1bmN0aW9uKGEsYil7L14tP1xkKyQvLnRlc3QoYikmJnRoaXMuc2V0KGEscGFyc2VJbnQoYiwxMCkpfSxwZXJjZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM7cmV0dXJuISEoKGM9Yi5tYXRjaCgvXihbXGRdezEsM30pKFwuW1xkXSopPyUkLykpJiYoYj1wYXJzZUZsb2F0KGIpLGI+PTAmJmI8PTEwMCkpJiYodGhpcy5zZXQoYSxiKSwhMCl9fTt2YXIgcD17IiZhbXA7IjoiJiIsIiZsdDsiOiI8IiwiJmd0OyI6Ij4iLCImbHJtOyI6IuKAjiIsIiZybG07Ijoi4oCPIiwiJm5ic3A7IjoiwqAifSxxPXtjOiJzcGFuIixpOiJpIixiOiJiIix1OiJ1IixydWJ5OiJydWJ5IixydDoicnQiLHY6InNwYW4iLGxhbmc6InNwYW4ifSxyPXt2OiJ0aXRsZSIsbGFuZzoibGFuZyJ9LHM9e3J0OiJydWJ5In0sdD1bMTQ3MCwxNDcyLDE0NzUsMTQ3OCwxNDg4LDE0ODksMTQ5MCwxNDkxLDE0OTIsMTQ5MywxNDk0LDE0OTUsMTQ5NiwxNDk3LDE0OTgsMTQ5OSwxNTAwLDE1MDEsMTUwMiwxNTAzLDE1MDQsMTUwNSwxNTA2LDE1MDcsMTUwOCwxNTA5LDE1MTAsMTUxMSwxNTEyLDE1MTMsMTUxNCwxNTIwLDE1MjEsMTUyMiwxNTIzLDE1MjQsMTU0NCwxNTQ3LDE1NDksMTU2MywxNTY2LDE1NjcsMTU2OCwxNTY5LDE1NzAsMTU3MSwxNTcyLDE1NzMsMTU3NCwxNTc1LDE1NzYsMTU3NywxNTc4LDE1NzksMTU4MCwxNTgxLDE1ODIsMTU4MywxNTg0LDE1ODUsMTU4NiwxNTg3LDE1ODgsMTU4OSwxNTkwLDE1OTEsMTU5MiwxNTkzLDE1OTQsMTU5NSwxNTk2LDE1OTcsMTU5OCwxNTk5LDE2MDAsMTYwMSwxNjAyLDE2MDMsMTYwNCwxNjA1LDE2MDYsMTYwNywxNjA4LDE2MDksMTYxMCwxNjQ1LDE2NDYsMTY0NywxNjQ5LDE2NTAsMTY1MSwxNjUyLDE2NTMsMTY1NCwxNjU1LDE2NTYsMTY1NywxNjU4LDE2NTksMTY2MCwxNjYxLDE2NjIsMTY2MywxNjY0LDE2NjUsMTY2NiwxNjY3LDE2NjgsMTY2OSwxNjcwLDE2NzEsMTY3MiwxNjczLDE2NzQsMTY3NSwxNjc2LDE2NzcsMTY3OCwxNjc5LDE2ODAsMTY4MSwxNjgyLDE2ODMsMTY4NCwxNjg1LDE2ODYsMTY4NywxNjg4LDE2ODksMTY5MCwxNjkxLDE2OTIsMTY5MywxNjk0LDE2OTUsMTY5NiwxNjk3LDE2OTgsMTY5OSwxNzAwLDE3MDEsMTcwMiwxNzAzLDE3MDQsMTcwNSwxNzA2LDE3MDcsMTcwOCwxNzA5LDE3MTAsMTcxMSwxNzEyLDE3MTMsMTcxNCwxNzE1LDE3MTYsMTcxNywxNzE4LDE3MTksMTcyMCwxNzIxLDE3MjIsMTcyMywxNzI0LDE3MjUsMTcyNiwxNzI3LDE3MjgsMTcyOSwxNzMwLDE3MzEsMTczMiwxNzMzLDE3MzQsMTczNSwxNzM2LDE3MzcsMTczOCwxNzM5LDE3NDAsMTc0MSwxNzQyLDE3NDMsMTc0NCwxNzQ1LDE3NDYsMTc0NywxNzQ4LDE3NDksMTc2NSwxNzY2LDE3NzQsMTc3NSwxNzg2LDE3ODcsMTc4OCwxNzg5LDE3OTAsMTc5MSwxNzkyLDE3OTMsMTc5NCwxNzk1LDE3OTYsMTc5NywxNzk4LDE3OTksMTgwMCwxODAxLDE4MDIsMTgwMywxODA0LDE4MDUsMTgwNywxODA4LDE4MTAsMTgxMSwxODEyLDE4MTMsMTgxNCwxODE1LDE4MTYsMTgxNywxODE4LDE4MTksMTgyMCwxODIxLDE4MjIsMTgyMywxODI0LDE4MjUsMTgyNiwxODI3LDE4MjgsMTgyOSwxODMwLDE4MzEsMTgzMiwxODMzLDE4MzQsMTgzNSwxODM2LDE4MzcsMTgzOCwxODM5LDE4NjksMTg3MCwxODcxLDE4NzIsMTg3MywxODc0LDE4NzUsMTg3NiwxODc3LDE4NzgsMTg3OSwxODgwLDE4ODEsMTg4MiwxODgzLDE4ODQsMTg4NSwxODg2LDE4ODcsMTg4OCwxODg5LDE4OTAsMTg5MSwxODkyLDE4OTMsMTg5NCwxODk1LDE4OTYsMTg5NywxODk4LDE4OTksMTkwMCwxOTAxLDE5MDIsMTkwMywxOTA0LDE5MDUsMTkwNiwxOTA3LDE5MDgsMTkwOSwxOTEwLDE5MTEsMTkxMiwxOTEzLDE5MTQsMTkxNSwxOTE2LDE5MTcsMTkxOCwxOTE5LDE5MjAsMTkyMSwxOTIyLDE5MjMsMTkyNCwxOTI1LDE5MjYsMTkyNywxOTI4LDE5MjksMTkzMCwxOTMxLDE5MzIsMTkzMywxOTM0LDE5MzUsMTkzNiwxOTM3LDE5MzgsMTkzOSwxOTQwLDE5NDEsMTk0MiwxOTQzLDE5NDQsMTk0NSwxOTQ2LDE5NDcsMTk0OCwxOTQ5LDE5NTAsMTk1MSwxOTUyLDE5NTMsMTk1NCwxOTU1LDE5NTYsMTk1NywxOTY5LDE5ODQsMTk4NSwxOTg2LDE5ODcsMTk4OCwxOTg5LDE5OTAsMTk5MSwxOTkyLDE5OTMsMTk5NCwxOTk1LDE5OTYsMTk5NywxOTk4LDE5OTksMmUzLDIwMDEsMjAwMiwyMDAzLDIwMDQsMjAwNSwyMDA2LDIwMDcsMjAwOCwyMDA5LDIwMTAsMjAxMSwyMDEyLDIwMTMsMjAxNCwyMDE1LDIwMTYsMjAxNywyMDE4LDIwMTksMjAyMCwyMDIxLDIwMjIsMjAyMywyMDI0LDIwMjUsMjAyNiwyMDM2LDIwMzcsMjA0MiwyMDQ4LDIwNDksMjA1MCwyMDUxLDIwNTIsMjA1MywyMDU0LDIwNTUsMjA1NiwyMDU3LDIwNTgsMjA1OSwyMDYwLDIwNjEsMjA2MiwyMDYzLDIwNjQsMjA2NSwyMDY2LDIwNjcsMjA2OCwyMDY5LDIwNzQsMjA4NCwyMDg4LDIwOTYsMjA5NywyMDk4LDIwOTksMjEwMCwyMTAxLDIxMDIsMjEwMywyMTA0LDIxMDUsMjEwNiwyMTA3LDIxMDgsMjEwOSwyMTEwLDIxMTIsMjExMywyMTE0LDIxMTUsMjExNiwyMTE3LDIxMTgsMjExOSwyMTIwLDIxMjEsMjEyMiwyMTIzLDIxMjQsMjEyNSwyMTI2LDIxMjcsMjEyOCwyMTI5LDIxMzAsMjEzMSwyMTMyLDIxMzMsMjEzNCwyMTM1LDIxMzYsMjE0MiwyMjA4LDIyMTAsMjIxMSwyMjEyLDIyMTMsMjIxNCwyMjE1LDIyMTYsMjIxNywyMjE4LDIyMTksMjIyMCw4MjA3LDY0Mjg1LDY0Mjg3LDY0Mjg4LDY0Mjg5LDY0MjkwLDY0MjkxLDY0MjkyLDY0MjkzLDY0Mjk0LDY0Mjk1LDY0Mjk2LDY0Mjk4LDY0Mjk5LDY0MzAwLDY0MzAxLDY0MzAyLDY0MzAzLDY0MzA0LDY0MzA1LDY0MzA2LDY0MzA3LDY0MzA4LDY0MzA5LDY0MzEwLDY0MzEyLDY0MzEzLDY0MzE0LDY0MzE1LDY0MzE2LDY0MzE4LDY0MzIwLDY0MzIxLDY0MzIzLDY0MzI0LDY0MzI2LDY0MzI3LDY0MzI4LDY0MzI5LDY0MzMwLDY0MzMxLDY0MzMyLDY0MzMzLDY0MzM0LDY0MzM1LDY0MzM2LDY0MzM3LDY0MzM4LDY0MzM5LDY0MzQwLDY0MzQxLDY0MzQyLDY0MzQzLDY0MzQ0LDY0MzQ1LDY0MzQ2LDY0MzQ3LDY0MzQ4LDY0MzQ5LDY0MzUwLDY0MzUxLDY0MzUyLDY0MzUzLDY0MzU0LDY0MzU1LDY0MzU2LDY0MzU3LDY0MzU4LDY0MzU5LDY0MzYwLDY0MzYxLDY0MzYyLDY0MzYzLDY0MzY0LDY0MzY1LDY0MzY2LDY0MzY3LDY0MzY4LDY0MzY5LDY0MzcwLDY0MzcxLDY0MzcyLDY0MzczLDY0Mzc0LDY0Mzc1LDY0Mzc2LDY0Mzc3LDY0Mzc4LDY0Mzc5LDY0MzgwLDY0MzgxLDY0MzgyLDY0MzgzLDY0Mzg0LDY0Mzg1LDY0Mzg2LDY0Mzg3LDY0Mzg4LDY0Mzg5LDY0MzkwLDY0MzkxLDY0MzkyLDY0MzkzLDY0Mzk0LDY0Mzk1LDY0Mzk2LDY0Mzk3LDY0Mzk4LDY0Mzk5LDY0NDAwLDY0NDAxLDY0NDAyLDY0NDAzLDY0NDA0LDY0NDA1LDY0NDA2LDY0NDA3LDY0NDA4LDY0NDA5LDY0NDEwLDY0NDExLDY0NDEyLDY0NDEzLDY0NDE0LDY0NDE1LDY0NDE2LDY0NDE3LDY0NDE4LDY0NDE5LDY0NDIwLDY0NDIxLDY0NDIyLDY0NDIzLDY0NDI0LDY0NDI1LDY0NDI2LDY0NDI3LDY0NDI4LDY0NDI5LDY0NDMwLDY0NDMxLDY0NDMyLDY0NDMzLDY0NDM0LDY0NDM1LDY0NDM2LDY0NDM3LDY0NDM4LDY0NDM5LDY0NDQwLDY0NDQxLDY0NDQyLDY0NDQzLDY0NDQ0LDY0NDQ1LDY0NDQ2LDY0NDQ3LDY0NDQ4LDY0NDQ5LDY0NDY3LDY0NDY4LDY0NDY5LDY0NDcwLDY0NDcxLDY0NDcyLDY0NDczLDY0NDc0LDY0NDc1LDY0NDc2LDY0NDc3LDY0NDc4LDY0NDc5LDY0NDgwLDY0NDgxLDY0NDgyLDY0NDgzLDY0NDg0LDY0NDg1LDY0NDg2LDY0NDg3LDY0NDg4LDY0NDg5LDY0NDkwLDY0NDkxLDY0NDkyLDY0NDkzLDY0NDk0LDY0NDk1LDY0NDk2LDY0NDk3LDY0NDk4LDY0NDk5LDY0NTAwLDY0NTAxLDY0NTAyLDY0NTAzLDY0NTA0LDY0NTA1LDY0NTA2LDY0NTA3LDY0NTA4LDY0NTA5LDY0NTEwLDY0NTExLDY0NTEyLDY0NTEzLDY0NTE0LDY0NTE1LDY0NTE2LDY0NTE3LDY0NTE4LDY0NTE5LDY0NTIwLDY0NTIxLDY0NTIyLDY0NTIzLDY0NTI0LDY0NTI1LDY0NTI2LDY0NTI3LDY0NTI4LDY0NTI5LDY0NTMwLDY0NTMxLDY0NTMyLDY0NTMzLDY0NTM0LDY0NTM1LDY0NTM2LDY0NTM3LDY0NTM4LDY0NTM5LDY0NTQwLDY0NTQxLDY0NTQyLDY0NTQzLDY0NTQ0LDY0NTQ1LDY0NTQ2LDY0NTQ3LDY0NTQ4LDY0NTQ5LDY0NTUwLDY0NTUxLDY0NTUyLDY0NTUzLDY0NTU0LDY0NTU1LDY0NTU2LDY0NTU3LDY0NTU4LDY0NTU5LDY0NTYwLDY0NTYxLDY0NTYyLDY0NTYzLDY0NTY0LDY0NTY1LDY0NTY2LDY0NTY3LDY0NTY4LDY0NTY5LDY0NTcwLDY0NTcxLDY0NTcyLDY0NTczLDY0NTc0LDY0NTc1LDY0NTc2LDY0NTc3LDY0NTc4LDY0NTc5LDY0NTgwLDY0NTgxLDY0NTgyLDY0NTgzLDY0NTg0LDY0NTg1LDY0NTg2LDY0NTg3LDY0NTg4LDY0NTg5LDY0NTkwLDY0NTkxLDY0NTkyLDY0NTkzLDY0NTk0LDY0NTk1LDY0NTk2LDY0NTk3LDY0NTk4LDY0NTk5LDY0NjAwLDY0NjAxLDY0NjAyLDY0NjAzLDY0NjA0LDY0NjA1LDY0NjA2LDY0NjA3LDY0NjA4LDY0NjA5LDY0NjEwLDY0NjExLDY0NjEyLDY0NjEzLDY0NjE0LDY0NjE1LDY0NjE2LDY0NjE3LDY0NjE4LDY0NjE5LDY0NjIwLDY0NjIxLDY0NjIyLDY0NjIzLDY0NjI0LDY0NjI1LDY0NjI2LDY0NjI3LDY0NjI4LDY0NjI5LDY0NjMwLDY0NjMxLDY0NjMyLDY0NjMzLDY0NjM0LDY0NjM1LDY0NjM2LDY0NjM3LDY0NjM4LDY0NjM5LDY0NjQwLDY0NjQxLDY0NjQyLDY0NjQzLDY0NjQ0LDY0NjQ1LDY0NjQ2LDY0NjQ3LDY0NjQ4LDY0NjQ5LDY0NjUwLDY0NjUxLDY0NjUyLDY0NjUzLDY0NjU0LDY0NjU1LDY0NjU2LDY0NjU3LDY0NjU4LDY0NjU5LDY0NjYwLDY0NjYxLDY0NjYyLDY0NjYzLDY0NjY0LDY0NjY1LDY0NjY2LDY0NjY3LDY0NjY4LDY0NjY5LDY0NjcwLDY0NjcxLDY0NjcyLDY0NjczLDY0Njc0LDY0Njc1LDY0Njc2LDY0Njc3LDY0Njc4LDY0Njc5LDY0NjgwLDY0NjgxLDY0NjgyLDY0NjgzLDY0Njg0LDY0Njg1LDY0Njg2LDY0Njg3LDY0Njg4LDY0Njg5LDY0NjkwLDY0NjkxLDY0NjkyLDY0NjkzLDY0Njk0LDY0Njk1LDY0Njk2LDY0Njk3LDY0Njk4LDY0Njk5LDY0NzAwLDY0NzAxLDY0NzAyLDY0NzAzLDY0NzA0LDY0NzA1LDY0NzA2LDY0NzA3LDY0NzA4LDY0NzA5LDY0NzEwLDY0NzExLDY0NzEyLDY0NzEzLDY0NzE0LDY0NzE1LDY0NzE2LDY0NzE3LDY0NzE4LDY0NzE5LDY0NzIwLDY0NzIxLDY0NzIyLDY0NzIzLDY0NzI0LDY0NzI1LDY0NzI2LDY0NzI3LDY0NzI4LDY0NzI5LDY0NzMwLDY0NzMxLDY0NzMyLDY0NzMzLDY0NzM0LDY0NzM1LDY0NzM2LDY0NzM3LDY0NzM4LDY0NzM5LDY0NzQwLDY0NzQxLDY0NzQyLDY0NzQzLDY0NzQ0LDY0NzQ1LDY0NzQ2LDY0NzQ3LDY0NzQ4LDY0NzQ5LDY0NzUwLDY0NzUxLDY0NzUyLDY0NzUzLDY0NzU0LDY0NzU1LDY0NzU2LDY0NzU3LDY0NzU4LDY0NzU5LDY0NzYwLDY0NzYxLDY0NzYyLDY0NzYzLDY0NzY0LDY0NzY1LDY0NzY2LDY0NzY3LDY0NzY4LDY0NzY5LDY0NzcwLDY0NzcxLDY0NzcyLDY0NzczLDY0Nzc0LDY0Nzc1LDY0Nzc2LDY0Nzc3LDY0Nzc4LDY0Nzc5LDY0NzgwLDY0NzgxLDY0NzgyLDY0NzgzLDY0Nzg0LDY0Nzg1LDY0Nzg2LDY0Nzg3LDY0Nzg4LDY0Nzg5LDY0NzkwLDY0NzkxLDY0NzkyLDY0NzkzLDY0Nzk0LDY0Nzk1LDY0Nzk2LDY0Nzk3LDY0Nzk4LDY0Nzk5LDY0ODAwLDY0ODAxLDY0ODAyLDY0ODAzLDY0ODA0LDY0ODA1LDY0ODA2LDY0ODA3LDY0ODA4LDY0ODA5LDY0ODEwLDY0ODExLDY0ODEyLDY0ODEzLDY0ODE0LDY0ODE1LDY0ODE2LDY0ODE3LDY0ODE4LDY0ODE5LDY0ODIwLDY0ODIxLDY0ODIyLDY0ODIzLDY0ODI0LDY0ODI1LDY0ODI2LDY0ODI3LDY0ODI4LDY0ODI5LDY0ODQ4LDY0ODQ5LDY0ODUwLDY0ODUxLDY0ODUyLDY0ODUzLDY0ODU0LDY0ODU1LDY0ODU2LDY0ODU3LDY0ODU4LDY0ODU5LDY0ODYwLDY0ODYxLDY0ODYyLDY0ODYzLDY0ODY0LDY0ODY1LDY0ODY2LDY0ODY3LDY0ODY4LDY0ODY5LDY0ODcwLDY0ODcxLDY0ODcyLDY0ODczLDY0ODc0LDY0ODc1LDY0ODc2LDY0ODc3LDY0ODc4LDY0ODc5LDY0ODgwLDY0ODgxLDY0ODgyLDY0ODgzLDY0ODg0LDY0ODg1LDY0ODg2LDY0ODg3LDY0ODg4LDY0ODg5LDY0ODkwLDY0ODkxLDY0ODkyLDY0ODkzLDY0ODk0LDY0ODk1LDY0ODk2LDY0ODk3LDY0ODk4LDY0ODk5LDY0OTAwLDY0OTAxLDY0OTAyLDY0OTAzLDY0OTA0LDY0OTA1LDY0OTA2LDY0OTA3LDY0OTA4LDY0OTA5LDY0OTEwLDY0OTExLDY0OTE0LDY0OTE1LDY0OTE2LDY0OTE3LDY0OTE4LDY0OTE5LDY0OTIwLDY0OTIxLDY0OTIyLDY0OTIzLDY0OTI0LDY0OTI1LDY0OTI2LDY0OTI3LDY0OTI4LDY0OTI5LDY0OTMwLDY0OTMxLDY0OTMyLDY0OTMzLDY0OTM0LDY0OTM1LDY0OTM2LDY0OTM3LDY0OTM4LDY0OTM5LDY0OTQwLDY0OTQxLDY0OTQyLDY0OTQzLDY0OTQ0LDY0OTQ1LDY0OTQ2LDY0OTQ3LDY0OTQ4LDY0OTQ5LDY0OTUwLDY0OTUxLDY0OTUyLDY0OTUzLDY0OTU0LDY0OTU1LDY0OTU2LDY0OTU3LDY0OTU4LDY0OTU5LDY0OTYwLDY0OTYxLDY0OTYyLDY0OTYzLDY0OTY0LDY0OTY1LDY0OTY2LDY0OTY3LDY1MDA4LDY1MDA5LDY1MDEwLDY1MDExLDY1MDEyLDY1MDEzLDY1MDE0LDY1MDE1LDY1MDE2LDY1MDE3LDY1MDE4LDY1MDE5LDY1MDIwLDY1MTM2LDY1MTM3LDY1MTM4LDY1MTM5LDY1MTQwLDY1MTQyLDY1MTQzLDY1MTQ0LDY1MTQ1LDY1MTQ2LDY1MTQ3LDY1MTQ4LDY1MTQ5LDY1MTUwLDY1MTUxLDY1MTUyLDY1MTUzLDY1MTU0LDY1MTU1LDY1MTU2LDY1MTU3LDY1MTU4LDY1MTU5LDY1MTYwLDY1MTYxLDY1MTYyLDY1MTYzLDY1MTY0LDY1MTY1LDY1MTY2LDY1MTY3LDY1MTY4LDY1MTY5LDY1MTcwLDY1MTcxLDY1MTcyLDY1MTczLDY1MTc0LDY1MTc1LDY1MTc2LDY1MTc3LDY1MTc4LDY1MTc5LDY1MTgwLDY1MTgxLDY1MTgyLDY1MTgzLDY1MTg0LDY1MTg1LDY1MTg2LDY1MTg3LDY1MTg4LDY1MTg5LDY1MTkwLDY1MTkxLDY1MTkyLDY1MTkzLDY1MTk0LDY1MTk1LDY1MTk2LDY1MTk3LDY1MTk4LDY1MTk5LDY1MjAwLDY1MjAxLDY1MjAyLDY1MjAzLDY1MjA0LDY1MjA1LDY1MjA2LDY1MjA3LDY1MjA4LDY1MjA5LDY1MjEwLDY1MjExLDY1MjEyLDY1MjEzLDY1MjE0LDY1MjE1LDY1MjE2LDY1MjE3LDY1MjE4LDY1MjE5LDY1MjIwLDY1MjIxLDY1MjIyLDY1MjIzLDY1MjI0LDY1MjI1LDY1MjI2LDY1MjI3LDY1MjI4LDY1MjI5LDY1MjMwLDY1MjMxLDY1MjMyLDY1MjMzLDY1MjM0LDY1MjM1LDY1MjM2LDY1MjM3LDY1MjM4LDY1MjM5LDY1MjQwLDY1MjQxLDY1MjQyLDY1MjQzLDY1MjQ0LDY1MjQ1LDY1MjQ2LDY1MjQ3LDY1MjQ4LDY1MjQ5LDY1MjUwLDY1MjUxLDY1MjUyLDY1MjUzLDY1MjU0LDY1MjU1LDY1MjU2LDY1MjU3LDY1MjU4LDY1MjU5LDY1MjYwLDY1MjYxLDY1MjYyLDY1MjYzLDY1MjY0LDY1MjY1LDY1MjY2LDY1MjY3LDY1MjY4LDY1MjY5LDY1MjcwLDY1MjcxLDY1MjcyLDY1MjczLDY1Mjc0LDY1Mjc1LDY1Mjc2LDY3NTg0LDY3NTg1LDY3NTg2LDY3NTg3LDY3NTg4LDY3NTg5LDY3NTkyLDY3NTk0LDY3NTk1LDY3NTk2LDY3NTk3LDY3NTk4LDY3NTk5LDY3NjAwLDY3NjAxLDY3NjAyLDY3NjAzLDY3NjA0LDY3NjA1LDY3NjA2LDY3NjA3LDY3NjA4LDY3NjA5LDY3NjEwLDY3NjExLDY3NjEyLDY3NjEzLDY3NjE0LDY3NjE1LDY3NjE2LDY3NjE3LDY3NjE4LDY3NjE5LDY3NjIwLDY3NjIxLDY3NjIyLDY3NjIzLDY3NjI0LDY3NjI1LDY3NjI2LDY3NjI3LDY3NjI4LDY3NjI5LDY3NjMwLDY3NjMxLDY3NjMyLDY3NjMzLDY3NjM0LDY3NjM1LDY3NjM2LDY3NjM3LDY3NjM5LDY3NjQwLDY3NjQ0LDY3NjQ3LDY3NjQ4LDY3NjQ5LDY3NjUwLDY3NjUxLDY3NjUyLDY3NjUzLDY3NjU0LDY3NjU1LDY3NjU2LDY3NjU3LDY3NjU4LDY3NjU5LDY3NjYwLDY3NjYxLDY3NjYyLDY3NjYzLDY3NjY0LDY3NjY1LDY3NjY2LDY3NjY3LDY3NjY4LDY3NjY5LDY3NjcxLDY3NjcyLDY3NjczLDY3Njc0LDY3Njc1LDY3Njc2LDY3Njc3LDY3Njc4LDY3Njc5LDY3ODQwLDY3ODQxLDY3ODQyLDY3ODQzLDY3ODQ0LDY3ODQ1LDY3ODQ2LDY3ODQ3LDY3ODQ4LDY3ODQ5LDY3ODUwLDY3ODUxLDY3ODUyLDY3ODUzLDY3ODU0LDY3ODU1LDY3ODU2LDY3ODU3LDY3ODU4LDY3ODU5LDY3ODYwLDY3ODYxLDY3ODYyLDY3ODYzLDY3ODY0LDY3ODY1LDY3ODY2LDY3ODY3LDY3ODcyLDY3ODczLDY3ODc0LDY3ODc1LDY3ODc2LDY3ODc3LDY3ODc4LDY3ODc5LDY3ODgwLDY3ODgxLDY3ODgyLDY3ODgzLDY3ODg0LDY3ODg1LDY3ODg2LDY3ODg3LDY3ODg4LDY3ODg5LDY3ODkwLDY3ODkxLDY3ODkyLDY3ODkzLDY3ODk0LDY3ODk1LDY3ODk2LDY3ODk3LDY3OTAzLDY3OTY4LDY3OTY5LDY3OTcwLDY3OTcxLDY3OTcyLDY3OTczLDY3OTc0LDY3OTc1LDY3OTc2LDY3OTc3LDY3OTc4LDY3OTc5LDY3OTgwLDY3OTgxLDY3OTgyLDY3OTgzLDY3OTg0LDY3OTg1LDY3OTg2LDY3OTg3LDY3OTg4LDY3OTg5LDY3OTkwLDY3OTkxLDY3OTkyLDY3OTkzLDY3OTk0LDY3OTk1LDY3OTk2LDY3OTk3LDY3OTk4LDY3OTk5LDY4ZTMsNjgwMDEsNjgwMDIsNjgwMDMsNjgwMDQsNjgwMDUsNjgwMDYsNjgwMDcsNjgwMDgsNjgwMDksNjgwMTAsNjgwMTEsNjgwMTIsNjgwMTMsNjgwMTQsNjgwMTUsNjgwMTYsNjgwMTcsNjgwMTgsNjgwMTksNjgwMjAsNjgwMjEsNjgwMjIsNjgwMjMsNjgwMzAsNjgwMzEsNjgwOTYsNjgxMTIsNjgxMTMsNjgxMTQsNjgxMTUsNjgxMTcsNjgxMTgsNjgxMTksNjgxMjEsNjgxMjIsNjgxMjMsNjgxMjQsNjgxMjUsNjgxMjYsNjgxMjcsNjgxMjgsNjgxMjksNjgxMzAsNjgxMzEsNjgxMzIsNjgxMzMsNjgxMzQsNjgxMzUsNjgxMzYsNjgxMzcsNjgxMzgsNjgxMzksNjgxNDAsNjgxNDEsNjgxNDIsNjgxNDMsNjgxNDQsNjgxNDUsNjgxNDYsNjgxNDcsNjgxNjAsNjgxNjEsNjgxNjIsNjgxNjMsNjgxNjQsNjgxNjUsNjgxNjYsNjgxNjcsNjgxNzYsNjgxNzcsNjgxNzgsNjgxNzksNjgxODAsNjgxODEsNjgxODIsNjgxODMsNjgxODQsNjgxOTIsNjgxOTMsNjgxOTQsNjgxOTUsNjgxOTYsNjgxOTcsNjgxOTgsNjgxOTksNjgyMDAsNjgyMDEsNjgyMDIsNjgyMDMsNjgyMDQsNjgyMDUsNjgyMDYsNjgyMDcsNjgyMDgsNjgyMDksNjgyMTAsNjgyMTEsNjgyMTIsNjgyMTMsNjgyMTQsNjgyMTUsNjgyMTYsNjgyMTcsNjgyMTgsNjgyMTksNjgyMjAsNjgyMjEsNjgyMjIsNjgyMjMsNjgzNTIsNjgzNTMsNjgzNTQsNjgzNTUsNjgzNTYsNjgzNTcsNjgzNTgsNjgzNTksNjgzNjAsNjgzNjEsNjgzNjIsNjgzNjMsNjgzNjQsNjgzNjUsNjgzNjYsNjgzNjcsNjgzNjgsNjgzNjksNjgzNzAsNjgzNzEsNjgzNzIsNjgzNzMsNjgzNzQsNjgzNzUsNjgzNzYsNjgzNzcsNjgzNzgsNjgzNzksNjgzODAsNjgzODEsNjgzODIsNjgzODMsNjgzODQsNjgzODUsNjgzODYsNjgzODcsNjgzODgsNjgzODksNjgzOTAsNjgzOTEsNjgzOTIsNjgzOTMsNjgzOTQsNjgzOTUsNjgzOTYsNjgzOTcsNjgzOTgsNjgzOTksNjg0MDAsNjg0MDEsNjg0MDIsNjg0MDMsNjg0MDQsNjg0MDUsNjg0MTYsNjg0MTcsNjg0MTgsNjg0MTksNjg0MjAsNjg0MjEsNjg0MjIsNjg0MjMsNjg0MjQsNjg0MjUsNjg0MjYsNjg0MjcsNjg0MjgsNjg0MjksNjg0MzAsNjg0MzEsNjg0MzIsNjg0MzMsNjg0MzQsNjg0MzUsNjg0MzYsNjg0MzcsNjg0NDAsNjg0NDEsNjg0NDIsNjg0NDMsNjg0NDQsNjg0NDUsNjg0NDYsNjg0NDcsNjg0NDgsNjg0NDksNjg0NTAsNjg0NTEsNjg0NTIsNjg0NTMsNjg0NTQsNjg0NTUsNjg0NTYsNjg0NTcsNjg0NTgsNjg0NTksNjg0NjAsNjg0NjEsNjg0NjIsNjg0NjMsNjg0NjQsNjg0NjUsNjg0NjYsNjg0NzIsNjg0NzMsNjg0NzQsNjg0NzUsNjg0NzYsNjg0NzcsNjg0NzgsNjg0NzksNjg2MDgsNjg2MDksNjg2MTAsNjg2MTEsNjg2MTIsNjg2MTMsNjg2MTQsNjg2MTUsNjg2MTYsNjg2MTcsNjg2MTgsNjg2MTksNjg2MjAsNjg2MjEsNjg2MjIsNjg2MjMsNjg2MjQsNjg2MjUsNjg2MjYsNjg2MjcsNjg2MjgsNjg2MjksNjg2MzAsNjg2MzEsNjg2MzIsNjg2MzMsNjg2MzQsNjg2MzUsNjg2MzYsNjg2MzcsNjg2MzgsNjg2MzksNjg2NDAsNjg2NDEsNjg2NDIsNjg2NDMsNjg2NDQsNjg2NDUsNjg2NDYsNjg2NDcsNjg2NDgsNjg2NDksNjg2NTAsNjg2NTEsNjg2NTIsNjg2NTMsNjg2NTQsNjg2NTUsNjg2NTYsNjg2NTcsNjg2NTgsNjg2NTksNjg2NjAsNjg2NjEsNjg2NjIsNjg2NjMsNjg2NjQsNjg2NjUsNjg2NjYsNjg2NjcsNjg2NjgsNjg2NjksNjg2NzAsNjg2NzEsNjg2NzIsNjg2NzMsNjg2NzQsNjg2NzUsNjg2NzYsNjg2NzcsNjg2NzgsNjg2NzksNjg2ODAsMTI2NDY0LDEyNjQ2NSwxMjY0NjYsMTI2NDY3LDEyNjQ2OSwxMjY0NzAsMTI2NDcxLDEyNjQ3MiwxMjY0NzMsMTI2NDc0LDEyNjQ3NSwxMjY0NzYsMTI2NDc3LDEyNjQ3OCwxMjY0NzksMTI2NDgwLDEyNjQ4MSwxMjY0ODIsMTI2NDgzLDEyNjQ4NCwxMjY0ODUsMTI2NDg2LDEyNjQ4NywxMjY0ODgsMTI2NDg5LDEyNjQ5MCwxMjY0OTEsMTI2NDkyLDEyNjQ5MywxMjY0OTQsMTI2NDk1LDEyNjQ5NywxMjY0OTgsMTI2NTAwLDEyNjUwMywxMjY1MDUsMTI2NTA2LDEyNjUwNywxMjY1MDgsMTI2NTA5LDEyNjUxMCwxMjY1MTEsMTI2NTEyLDEyNjUxMywxMjY1MTQsMTI2NTE2LDEyNjUxNywxMjY1MTgsMTI2NTE5LDEyNjUyMSwxMjY1MjMsMTI2NTMwLDEyNjUzNSwxMjY1MzcsMTI2NTM5LDEyNjU0MSwxMjY1NDIsMTI2NTQzLDEyNjU0NSwxMjY1NDYsMTI2NTQ4LDEyNjU1MSwxMjY1NTMsMTI2NTU1LDEyNjU1NywxMjY1NTksMTI2NTYxLDEyNjU2MiwxMjY1NjQsMTI2NTY3LDEyNjU2OCwxMjY1NjksMTI2NTcwLDEyNjU3MiwxMjY1NzMsMTI2NTc0LDEyNjU3NSwxMjY1NzYsMTI2NTc3LDEyNjU3OCwxMjY1ODAsMTI2NTgxLDEyNjU4MiwxMjY1ODMsMTI2NTg1LDEyNjU4NiwxMjY1ODcsMTI2NTg4LDEyNjU5MCwxMjY1OTIsMTI2NTkzLDEyNjU5NCwxMjY1OTUsMTI2NTk2LDEyNjU5NywxMjY1OTgsMTI2NTk5LDEyNjYwMCwxMjY2MDEsMTI2NjAzLDEyNjYwNCwxMjY2MDUsMTI2NjA2LDEyNjYwNywxMjY2MDgsMTI2NjA5LDEyNjYxMCwxMjY2MTEsMTI2NjEyLDEyNjYxMywxMjY2MTQsMTI2NjE1LDEyNjYxNiwxMjY2MTcsMTI2NjE4LDEyNjYxOSwxMjY2MjUsMTI2NjI2LDEyNjYyNywxMjY2MjksMTI2NjMwLDEyNjYzMSwxMjY2MzIsMTI2NjMzLDEyNjYzNSwxMjY2MzYsMTI2NjM3LDEyNjYzOCwxMjY2MzksMTI2NjQwLDEyNjY0MSwxMjY2NDIsMTI2NjQzLDEyNjY0NCwxMjY2NDUsMTI2NjQ2LDEyNjY0NywxMjY2NDgsMTI2NjQ5LDEyNjY1MCwxMjY2NTEsMTExNDEwOV07ai5wcm90b3R5cGUuYXBwbHlTdHlsZXM9ZnVuY3Rpb24oYSxiKXtiPWJ8fHRoaXMuZGl2O2Zvcih2YXIgYyBpbiBhKWEuaGFzT3duUHJvcGVydHkoYykmJihiLnN0eWxlW2NdPWFbY10pfSxqLnByb3RvdHlwZS5mb3JtYXRTdHlsZT1mdW5jdGlvbihhLGIpe3JldHVybiAwPT09YT8wOmErYn0say5wcm90b3R5cGU9byhqLnByb3RvdHlwZSksay5wcm90b3R5cGUuY29uc3RydWN0b3I9ayxsLnByb3RvdHlwZS5tb3ZlPWZ1bmN0aW9uKGEsYil7c3dpdGNoKGI9dm9pZCAwIT09Yj9iOnRoaXMubGluZUhlaWdodCxhKXtjYXNlIit4Ijp0aGlzLmxlZnQrPWIsdGhpcy5yaWdodCs9YjticmVhaztjYXNlIi14Ijp0aGlzLmxlZnQtPWIsdGhpcy5yaWdodC09YjticmVhaztjYXNlIit5Ijp0aGlzLnRvcCs9Yix0aGlzLmJvdHRvbSs9YjticmVhaztjYXNlIi15Ijp0aGlzLnRvcC09Yix0aGlzLmJvdHRvbS09Yn19LGwucHJvdG90eXBlLm92ZXJsYXBzPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmxlZnQ8YS5yaWdodCYmdGhpcy5yaWdodD5hLmxlZnQmJnRoaXMudG9wPGEuYm90dG9tJiZ0aGlzLmJvdHRvbT5hLnRvcH0sbC5wcm90b3R5cGUub3ZlcmxhcHNBbnk9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspaWYodGhpcy5vdmVybGFwcyhhW2JdKSlyZXR1cm4hMDtyZXR1cm4hMX0sbC5wcm90b3R5cGUud2l0aGluPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnRvcD49YS50b3AmJnRoaXMuYm90dG9tPD1hLmJvdHRvbSYmdGhpcy5sZWZ0Pj1hLmxlZnQmJnRoaXMucmlnaHQ8PWEucmlnaHR9LGwucHJvdG90eXBlLm92ZXJsYXBzT3Bwb3NpdGVBeGlzPWZ1bmN0aW9uKGEsYil7c3dpdGNoKGIpe2Nhc2UiK3giOnJldHVybiB0aGlzLmxlZnQ8YS5sZWZ0O2Nhc2UiLXgiOnJldHVybiB0aGlzLnJpZ2h0PmEucmlnaHQ7Y2FzZSIreSI6cmV0dXJuIHRoaXMudG9wPGEudG9wO2Nhc2UiLXkiOnJldHVybiB0aGlzLmJvdHRvbT5hLmJvdHRvbX19LGwucHJvdG90eXBlLmludGVyc2VjdFBlcmNlbnRhZ2U9ZnVuY3Rpb24oYSl7dmFyIGI9TWF0aC5tYXgoMCxNYXRoLm1pbih0aGlzLnJpZ2h0LGEucmlnaHQpLU1hdGgubWF4KHRoaXMubGVmdCxhLmxlZnQpKSxjPU1hdGgubWF4KDAsTWF0aC5taW4odGhpcy5ib3R0b20sYS5ib3R0b20pLU1hdGgubWF4KHRoaXMudG9wLGEudG9wKSksZD1iKmM7cmV0dXJuIGQvKHRoaXMuaGVpZ2h0KnRoaXMud2lkdGgpfSxsLnByb3RvdHlwZS50b0NTU0NvbXBhdFZhbHVlcz1mdW5jdGlvbihhKXtyZXR1cm57dG9wOnRoaXMudG9wLWEudG9wLGJvdHRvbTphLmJvdHRvbS10aGlzLmJvdHRvbSxsZWZ0OnRoaXMubGVmdC1hLmxlZnQscmlnaHQ6YS5yaWdodC10aGlzLnJpZ2h0LGhlaWdodDp0aGlzLmhlaWdodCx3aWR0aDp0aGlzLndpZHRofX0sbC5nZXRTaW1wbGVCb3hQb3NpdGlvbj1mdW5jdGlvbihhKXt2YXIgYj1hLmRpdj9hLmRpdi5vZmZzZXRIZWlnaHQ6YS50YWdOYW1lP2Eub2Zmc2V0SGVpZ2h0OjAsYz1hLmRpdj9hLmRpdi5vZmZzZXRXaWR0aDphLnRhZ05hbWU/YS5vZmZzZXRXaWR0aDowLGQ9YS5kaXY/YS5kaXYub2Zmc2V0VG9wOmEudGFnTmFtZT9hLm9mZnNldFRvcDowO2E9YS5kaXY/YS5kaXYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk6YS50YWdOYW1lP2EuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk6YTt2YXIgZT17bGVmdDphLmxlZnQscmlnaHQ6YS5yaWdodCx0b3A6YS50b3B8fGQsaGVpZ2h0OmEuaGVpZ2h0fHxiLGJvdHRvbTphLmJvdHRvbXx8ZCsoYS5oZWlnaHR8fGIpLHdpZHRoOmEud2lkdGh8fGN9O3JldHVybiBlfSxuLlN0cmluZ0RlY29kZXI9ZnVuY3Rpb24oKXtyZXR1cm57ZGVjb2RlOmZ1bmN0aW9uKGEpe2lmKCFhKXJldHVybiIiO2lmKCJzdHJpbmciIT10eXBlb2YgYSl0aHJvdyBuZXcgRXJyb3IoIkVycm9yIC0gZXhwZWN0ZWQgc3RyaW5nIGRhdGEuIik7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChlbmNvZGVVUklDb21wb25lbnQoYSkpfX19LG4uY29udmVydEN1ZVRvRE9NVHJlZT1mdW5jdGlvbihhLGIpe3JldHVybiBhJiZiP2coYSxiKTpudWxsfTt2YXIgdT0uMDUsdj0ic2Fucy1zZXJpZiIsdz0iMS41JSI7bi5wcm9jZXNzQ3Vlcz1mdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhKXtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylpZihhW2JdLmhhc0JlZW5SZXNldHx8IWFbYl0uZGlzcGxheVN0YXRlKXJldHVybiEwO3JldHVybiExfWlmKCFhfHwhYnx8IWMpcmV0dXJuIG51bGw7Zm9yKDtjLmZpcnN0Q2hpbGQ7KWMucmVtb3ZlQ2hpbGQoYy5maXJzdENoaWxkKTt2YXIgZT1hLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2lmKGUuc3R5bGUucG9zaXRpb249ImFic29sdXRlIixlLnN0eWxlLmxlZnQ9IjAiLGUuc3R5bGUucmlnaHQ9IjAiLGUuc3R5bGUudG9wPSIwIixlLnN0eWxlLmJvdHRvbT0iMCIsZS5zdHlsZS5tYXJnaW49dyxjLmFwcGVuZENoaWxkKGUpLGQoYikpe3ZhciBmPVtdLGc9bC5nZXRTaW1wbGVCb3hQb3NpdGlvbihlKSxoPU1hdGgucm91bmQoZy5oZWlnaHQqdSoxMDApLzEwMCxpPXtmb250OmgrInB4ICIrdn07IWZ1bmN0aW9uKCl7Zm9yKHZhciBjLGQsaD0wO2g8Yi5sZW5ndGg7aCsrKWQ9YltoXSxjPW5ldyBrKGEsZCxpKSxlLmFwcGVuZENoaWxkKGMuZGl2KSxtKGEsYyxnLGYpLGQuZGlzcGxheVN0YXRlPWMuZGl2LGYucHVzaChsLmdldFNpbXBsZUJveFBvc2l0aW9uKGMpKX0oKX1lbHNlIGZvcih2YXIgaj0wO2o8Yi5sZW5ndGg7aisrKWUuYXBwZW5kQ2hpbGQoYltqXS5kaXNwbGF5U3RhdGUpfSxuLlBhcnNlcj1mdW5jdGlvbihhLGIsYyl7Y3x8KGM9YixiPXt9KSxifHwoYj17fSksdGhpcy53aW5kb3c9YSx0aGlzLnZ0dGpzPWIsdGhpcy5zdGF0ZT0iSU5JVElBTCIsdGhpcy5idWZmZXI9IiIsdGhpcy5kZWNvZGVyPWN8fG5ldyBUZXh0RGVjb2RlcigidXRmOCIpLHRoaXMucmVnaW9uTGlzdD1bXX0sbi5QYXJzZXIucHJvdG90eXBlPXtyZXBvcnRPclRocm93RXJyb3I6ZnVuY3Rpb24oYSl7aWYoIShhIGluc3RhbmNlb2YgYikpdGhyb3cgYTt0aGlzLm9ucGFyc2luZ2Vycm9yJiZ0aGlzLm9ucGFyc2luZ2Vycm9yKGEpfSxwYXJzZTpmdW5jdGlvbihhKXtmdW5jdGlvbiBjKCl7Zm9yKHZhciBhPWkuYnVmZmVyLGI9MDtiPGEubGVuZ3RoJiYiXHIiIT09YVtiXSYmIlxuIiE9PWFbYl07KSsrYjt2YXIgYz1hLnN1YnN0cigwLGIpO3JldHVybiJcciI9PT1hW2JdJiYrK2IsIlxuIj09PWFbYl0mJisrYixpLmJ1ZmZlcj1hLnN1YnN0cihiKSxjfWZ1bmN0aW9uIGcoYSl7dmFyIGI9bmV3IGQ7aWYoZShhLGZ1bmN0aW9uKGEsYyl7c3dpdGNoKGEpe2Nhc2UiaWQiOmIuc2V0KGEsYyk7YnJlYWs7Y2FzZSJ3aWR0aCI6Yi5wZXJjZW50KGEsYyk7YnJlYWs7Y2FzZSJsaW5lcyI6Yi5pbnRlZ2VyKGEsYyk7YnJlYWs7Y2FzZSJyZWdpb25hbmNob3IiOmNhc2Uidmlld3BvcnRhbmNob3IiOnZhciBlPWMuc3BsaXQoIiwiKTtpZigyIT09ZS5sZW5ndGgpYnJlYWs7dmFyIGY9bmV3IGQ7aWYoZi5wZXJjZW50KCJ4IixlWzBdKSxmLnBlcmNlbnQoInkiLGVbMV0pLCFmLmhhcygieCIpfHwhZi5oYXMoInkiKSlicmVhaztiLnNldChhKyJYIixmLmdldCgieCIpKSxiLnNldChhKyJZIixmLmdldCgieSIpKTticmVhaztjYXNlInNjcm9sbCI6Yi5hbHQoYSxjLFsidXAiXSl9fSwvPS8sL1xzLyksYi5oYXMoImlkIikpe3ZhciBjPW5ldyhpLnZ0dGpzLlZUVFJlZ2lvbnx8aS53aW5kb3cuVlRUUmVnaW9uKTtjLndpZHRoPWIuZ2V0KCJ3aWR0aCIsMTAwKSxjLmxpbmVzPWIuZ2V0KCJsaW5lcyIsMyksYy5yZWdpb25BbmNob3JYPWIuZ2V0KCJyZWdpb25hbmNob3JYIiwwKSxjLnJlZ2lvbkFuY2hvclk9Yi5nZXQoInJlZ2lvbmFuY2hvclkiLDEwMCksYy52aWV3cG9ydEFuY2hvclg9Yi5nZXQoInZpZXdwb3J0YW5jaG9yWCIsMCksYy52aWV3cG9ydEFuY2hvclk9Yi5nZXQoInZpZXdwb3J0YW5jaG9yWSIsMTAwKSxjLnNjcm9sbD1iLmdldCgic2Nyb2xsIiwiIiksaS5vbnJlZ2lvbiYmaS5vbnJlZ2lvbihjKSxpLnJlZ2lvbkxpc3QucHVzaCh7aWQ6Yi5nZXQoImlkIikscmVnaW9uOmN9KX19ZnVuY3Rpb24gaChhKXtlKGEsZnVuY3Rpb24oYSxiKXtzd2l0Y2goYSl7Y2FzZSJSZWdpb24iOmcoYil9fSwvOi8pfXZhciBpPXRoaXM7YSYmKGkuYnVmZmVyKz1pLmRlY29kZXIuZGVjb2RlKGEse3N0cmVhbTohMH0pKTt0cnl7dmFyIGo7aWYoIklOSVRJQUwiPT09aS5zdGF0ZSl7aWYoIS9cclxufFxuLy50ZXN0KGkuYnVmZmVyKSlyZXR1cm4gdGhpcztqPWMoKTt2YXIgaz1qLm1hdGNoKC9eV0VCVlRUKFsgXHRdLiopPyQvKTtpZigha3x8IWtbMF0pdGhyb3cgbmV3IGIoYi5FcnJvcnMuQmFkU2lnbmF0dXJlKTtpLnN0YXRlPSJIRUFERVIifWZvcih2YXIgbD0hMTtpLmJ1ZmZlcjspe2lmKCEvXHJcbnxcbi8udGVzdChpLmJ1ZmZlcikpcmV0dXJuIHRoaXM7c3dpdGNoKGw/bD0hMTpqPWMoKSxpLnN0YXRlKXtjYXNlIkhFQURFUiI6LzovLnRlc3Qoaik/aChqKTpqfHwoaS5zdGF0ZT0iSUQiKTtjb250aW51ZTtjYXNlIk5PVEUiOmp8fChpLnN0YXRlPSJJRCIpO2NvbnRpbnVlO2Nhc2UiSUQiOmlmKC9eTk9URSgkfFsgXHRdKS8udGVzdChqKSl7aS5zdGF0ZT0iTk9URSI7YnJlYWt9aWYoIWopY29udGludWU7aWYoaS5jdWU9bmV3KGkudnR0anMuVlRUQ3VlfHxpLndpbmRvdy5WVFRDdWUpKDAsMCwiIiksaS5zdGF0ZT0iQ1VFIixqLmluZGV4T2YoIi0tPiIpPT09LTEpe2kuY3VlLmlkPWo7Y29udGludWV9Y2FzZSJDVUUiOnRyeXtmKGosaS5jdWUsaS5yZWdpb25MaXN0KX1jYXRjaChtKXtpLnJlcG9ydE9yVGhyb3dFcnJvcihtKSxpLmN1ZT1udWxsLGkuc3RhdGU9IkJBRENVRSI7Y29udGludWV9aS5zdGF0ZT0iQ1VFVEVYVCI7Y29udGludWU7Y2FzZSJDVUVURVhUIjp2YXIgbj1qLmluZGV4T2YoIi0tPiIpIT09LTE7aWYoIWp8fG4mJihsPSEwKSl7aS5vbmN1ZSYmaS5vbmN1ZShpLmN1ZSksaS5jdWU9bnVsbCxpLnN0YXRlPSJJRCI7Y29udGludWV9aS5jdWUudGV4dCYmKGkuY3VlLnRleHQrPSJcbiIpLGkuY3VlLnRleHQrPWo7Y29udGludWU7Y2FzZSJCQURDVUUiOmp8fChpLnN0YXRlPSJJRCIpO2NvbnRpbnVlfX19Y2F0Y2gobSl7aS5yZXBvcnRPclRocm93RXJyb3IobSksIkNVRVRFWFQiPT09aS5zdGF0ZSYmaS5jdWUmJmkub25jdWUmJmkub25jdWUoaS5jdWUpLGkuY3VlPW51bGwsaS5zdGF0ZT0iSU5JVElBTCI9PT1pLnN0YXRlPyJCQURXRUJWVFQiOiJCQURDVUUifXJldHVybiB0aGlzfSxmbHVzaDpmdW5jdGlvbigpe3ZhciBhPXRoaXM7dHJ5e2lmKGEuYnVmZmVyKz1hLmRlY29kZXIuZGVjb2RlKCksKGEuY3VlfHwiSEVBREVSIj09PWEuc3RhdGUpJiYoYS5idWZmZXIrPSJcblxuIixhLnBhcnNlKCkpLCJJTklUSUFMIj09PWEuc3RhdGUpdGhyb3cgbmV3IGIoYi5FcnJvcnMuQmFkU2lnbmF0dXJlKX1jYXRjaChjKXthLnJlcG9ydE9yVGhyb3dFcnJvcihjKX1yZXR1cm4gYS5vbmZsdXNoJiZhLm9uZmx1c2goKSx0aGlzfX0sYS5XZWJWVFQ9bn0odGhpcyx0aGlzLnZ0dGpzfHx7fSk7Ci8qCiAqIGFuZ3VsYXItdWktYm9vdHN0cmFwCiAqIGh0dHA6Ly9hbmd1bGFyLXVpLmdpdGh1Yi5pby9ib290c3RyYXAvCgogKiBWZXJzaW9uOiAyLjUuMCAtIDIwMTctMDEtMjgKICogTGljZW5zZTogTUlUCiAqL2FuZ3VsYXIubW9kdWxlKCJ1aS5ib290c3RyYXAiLFsidWkuYm9vdHN0cmFwLnRwbHMiLCJ1aS5ib290c3RyYXAuY29sbGFwc2UiLCJ1aS5ib290c3RyYXAudGFiaW5kZXgiLCJ1aS5ib290c3RyYXAuYWNjb3JkaW9uIiwidWkuYm9vdHN0cmFwLmFsZXJ0IiwidWkuYm9vdHN0cmFwLmJ1dHRvbnMiLCJ1aS5ib290c3RyYXAuY2Fyb3VzZWwiLCJ1aS5ib290c3RyYXAuZGF0ZXBhcnNlciIsInVpLmJvb3RzdHJhcC5pc0NsYXNzIiwidWkuYm9vdHN0cmFwLmRhdGVwaWNrZXIiLCJ1aS5ib290c3RyYXAucG9zaXRpb24iLCJ1aS5ib290c3RyYXAuZGF0ZXBpY2tlclBvcHVwIiwidWkuYm9vdHN0cmFwLmRlYm91bmNlIiwidWkuYm9vdHN0cmFwLm11bHRpTWFwIiwidWkuYm9vdHN0cmFwLmRyb3Bkb3duIiwidWkuYm9vdHN0cmFwLnN0YWNrZWRNYXAiLCJ1aS5ib290c3RyYXAubW9kYWwiLCJ1aS5ib290c3RyYXAucGFnaW5nIiwidWkuYm9vdHN0cmFwLnBhZ2VyIiwidWkuYm9vdHN0cmFwLnBhZ2luYXRpb24iLCJ1aS5ib290c3RyYXAudG9vbHRpcCIsInVpLmJvb3RzdHJhcC5wb3BvdmVyIiwidWkuYm9vdHN0cmFwLnByb2dyZXNzYmFyIiwidWkuYm9vdHN0cmFwLnJhdGluZyIsInVpLmJvb3RzdHJhcC50YWJzIiwidWkuYm9vdHN0cmFwLnRpbWVwaWNrZXIiLCJ1aS5ib290c3RyYXAudHlwZWFoZWFkIl0pLGFuZ3VsYXIubW9kdWxlKCJ1aS5ib290c3RyYXAudHBscyIsWyJ1aWIvdGVtcGxhdGUvYWNjb3JkaW9uL2FjY29yZGlvbi1ncm91cC5odG1sIiwidWliL3RlbXBsYXRlL2FjY29yZGlvbi9hY2NvcmRpb24uaHRtbCIsInVpYi90ZW1wbGF0ZS9hbGVydC9hbGVydC5odG1sIiwidWliL3RlbXBsYXRlL2Nhcm91c2VsL2Nhcm91c2VsLmh0bWwiLCJ1aWIvdGVtcGxhdGUvY2Fyb3VzZWwvc2xpZGUuaHRtbCIsInVpYi90ZW1wbGF0ZS9kYXRlcGlja2VyL2RhdGVwaWNrZXIuaHRtbCIsInVpYi90ZW1wbGF0ZS9kYXRlcGlja2VyL2RheS5odG1sIiwidWliL3RlbXBsYXRlL2RhdGVwaWNrZXIvbW9udGguaHRtbCIsInVpYi90ZW1wbGF0ZS9kYXRlcGlja2VyL3llYXIuaHRtbCIsInVpYi90ZW1wbGF0ZS9kYXRlcGlja2VyUG9wdXAvcG9wdXAuaHRtbCIsInVpYi90ZW1wbGF0ZS9tb2RhbC93aW5kb3cuaHRtbCIsInVpYi90ZW1wbGF0ZS9wYWdlci9wYWdlci5odG1sIiwidWliL3RlbXBsYXRlL3BhZ2luYXRpb24vcGFnaW5hdGlvbi5odG1sIiwidWliL3RlbXBsYXRlL3Rvb2x0aXAvdG9vbHRpcC1odG1sLXBvcHVwLmh0bWwiLCJ1aWIvdGVtcGxhdGUvdG9vbHRpcC90b29sdGlwLXBvcHVwLmh0bWwiLCJ1aWIvdGVtcGxhdGUvdG9vbHRpcC90b29sdGlwLXRlbXBsYXRlLXBvcHVwLmh0bWwiLCJ1aWIvdGVtcGxhdGUvcG9wb3Zlci9wb3BvdmVyLWh0bWwuaHRtbCIsInVpYi90ZW1wbGF0ZS9wb3BvdmVyL3BvcG92ZXItdGVtcGxhdGUuaHRtbCIsInVpYi90ZW1wbGF0ZS9wb3BvdmVyL3BvcG92ZXIuaHRtbCIsInVpYi90ZW1wbGF0ZS9wcm9ncmVzc2Jhci9iYXIuaHRtbCIsInVpYi90ZW1wbGF0ZS9wcm9ncmVzc2Jhci9wcm9ncmVzcy5odG1sIiwidWliL3RlbXBsYXRlL3Byb2dyZXNzYmFyL3Byb2dyZXNzYmFyLmh0bWwiLCJ1aWIvdGVtcGxhdGUvcmF0aW5nL3JhdGluZy5odG1sIiwidWliL3RlbXBsYXRlL3RhYnMvdGFiLmh0bWwiLCJ1aWIvdGVtcGxhdGUvdGFicy90YWJzZXQuaHRtbCIsInVpYi90ZW1wbGF0ZS90aW1lcGlja2VyL3RpbWVwaWNrZXIuaHRtbCIsInVpYi90ZW1wbGF0ZS90eXBlYWhlYWQvdHlwZWFoZWFkLW1hdGNoLmh0bWwiLCJ1aWIvdGVtcGxhdGUvdHlwZWFoZWFkL3R5cGVhaGVhZC1wb3B1cC5odG1sIl0pLGFuZ3VsYXIubW9kdWxlKCJ1aS5ib290c3RyYXAuY29sbGFwc2UiLFtdKS5kaXJlY3RpdmUoInVpYkNvbGxhcHNlIixbIiRhbmltYXRlIiwiJHEiLCIkcGFyc2UiLCIkaW5qZWN0b3IiLGZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWQuaGFzKCIkYW5pbWF0ZUNzcyIpP2QuZ2V0KCIkYW5pbWF0ZUNzcyIpOm51bGw7cmV0dXJue2xpbms6ZnVuY3Rpb24oZCxmLGcpe2Z1bmN0aW9uIGgoKXtyPSEhKCJob3Jpem9udGFsImluIGcpLHI/KHM9e3dpZHRoOiIifSx0PXt3aWR0aDoiMCJ9KToocz17aGVpZ2h0OiIifSx0PXtoZWlnaHQ6IjAifSksZC4kZXZhbChnLnVpYkNvbGxhcHNlKXx8Zi5hZGRDbGFzcygiaW4iKS5hZGRDbGFzcygiY29sbGFwc2UiKS5hdHRyKCJhcmlhLWV4cGFuZGVkIiwhMCkuYXR0cigiYXJpYS1oaWRkZW4iLCExKS5jc3Mocyl9ZnVuY3Rpb24gaShhKXtyZXR1cm4gcj97d2lkdGg6YS5zY3JvbGxXaWR0aCsicHgifTp7aGVpZ2h0OmEuc2Nyb2xsSGVpZ2h0KyJweCJ9fWZ1bmN0aW9uIGooKXtmLmhhc0NsYXNzKCJjb2xsYXBzZSIpJiZmLmhhc0NsYXNzKCJpbiIpfHxiLnJlc29sdmUobihkKSkudGhlbihmdW5jdGlvbigpe2YucmVtb3ZlQ2xhc3MoImNvbGxhcHNlIikuYWRkQ2xhc3MoImNvbGxhcHNpbmciKS5hdHRyKCJhcmlhLWV4cGFuZGVkIiwhMCkuYXR0cigiYXJpYS1oaWRkZW4iLCExKSxlP2UoZix7YWRkQ2xhc3M6ImluIixlYXNpbmc6ImVhc2UiLGNzczp7b3ZlcmZsb3c6ImhpZGRlbiJ9LHRvOmkoZlswXSl9KS5zdGFydCgpWyJmaW5hbGx5Il0oayk6YS5hZGRDbGFzcyhmLCJpbiIse2Nzczp7b3ZlcmZsb3c6ImhpZGRlbiJ9LHRvOmkoZlswXSl9KS50aGVuKGspfSxhbmd1bGFyLm5vb3ApfWZ1bmN0aW9uIGsoKXtmLnJlbW92ZUNsYXNzKCJjb2xsYXBzaW5nIikuYWRkQ2xhc3MoImNvbGxhcHNlIikuY3NzKHMpLG8oZCl9ZnVuY3Rpb24gbCgpe3JldHVybiBmLmhhc0NsYXNzKCJjb2xsYXBzZSIpfHxmLmhhc0NsYXNzKCJpbiIpP3ZvaWQgYi5yZXNvbHZlKHAoZCkpLnRoZW4oZnVuY3Rpb24oKXtmLmNzcyhpKGZbMF0pKS5yZW1vdmVDbGFzcygiY29sbGFwc2UiKS5hZGRDbGFzcygiY29sbGFwc2luZyIpLmF0dHIoImFyaWEtZXhwYW5kZWQiLCExKS5hdHRyKCJhcmlhLWhpZGRlbiIsITApLGU/ZShmLHtyZW1vdmVDbGFzczoiaW4iLHRvOnR9KS5zdGFydCgpWyJmaW5hbGx5Il0obSk6YS5yZW1vdmVDbGFzcyhmLCJpbiIse3RvOnR9KS50aGVuKG0pfSxhbmd1bGFyLm5vb3ApOm0oKX1mdW5jdGlvbiBtKCl7Zi5jc3ModCksZi5yZW1vdmVDbGFzcygiY29sbGFwc2luZyIpLmFkZENsYXNzKCJjb2xsYXBzZSIpLHEoZCl9dmFyIG49YyhnLmV4cGFuZGluZyksbz1jKGcuZXhwYW5kZWQpLHA9YyhnLmNvbGxhcHNpbmcpLHE9YyhnLmNvbGxhcHNlZCkscj0hMSxzPXt9LHQ9e307aCgpLGQuJHdhdGNoKGcudWliQ29sbGFwc2UsZnVuY3Rpb24oYSl7YT9sKCk6aigpfSl9fX1dKSxhbmd1bGFyLm1vZHVsZSgidWkuYm9vdHN0cmFwLnRhYmluZGV4IixbXSkuZGlyZWN0aXZlKCJ1aWJUYWJpbmRleFRvZ2dsZSIsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6IkEiLGxpbms6ZnVuY3Rpb24oYSxiLGMpe2MuJG9ic2VydmUoImRpc2FibGVkIixmdW5jdGlvbihhKXtjLiRzZXQoInRhYmluZGV4IixhPy0xOm51bGwpfSl9fX0pLGFuZ3VsYXIubW9kdWxlKCJ1aS5ib290c3RyYXAuYWNjb3JkaW9uIixbInVpLmJvb3RzdHJhcC5jb2xsYXBzZSIsInVpLmJvb3RzdHJhcC50YWJpbmRleCJdKS5jb25zdGFudCgidWliQWNjb3JkaW9uQ29uZmlnIix7Y2xvc2VPdGhlcnM6ITB9KS5jb250cm9sbGVyKCJVaWJBY2NvcmRpb25Db250cm9sbGVyIixbIiRzY29wZSIsIiRhdHRycyIsInVpYkFjY29yZGlvbkNvbmZpZyIsZnVuY3Rpb24oYSxiLGMpe3RoaXMuZ3JvdXBzPVtdLHRoaXMuY2xvc2VPdGhlcnM9ZnVuY3Rpb24oZCl7dmFyIGU9YW5ndWxhci5pc0RlZmluZWQoYi5jbG9zZU90aGVycyk/YS4kZXZhbChiLmNsb3NlT3RoZXJzKTpjLmNsb3NlT3RoZXJzO2UmJmFuZ3VsYXIuZm9yRWFjaCh0aGlzLmdyb3VwcyxmdW5jdGlvbihhKXthIT09ZCYmKGEuaXNPcGVuPSExKX0pfSx0aGlzLmFkZEdyb3VwPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7dGhpcy5ncm91cHMucHVzaChhKSxhLiRvbigiJGRlc3Ryb3kiLGZ1bmN0aW9uKGMpe2IucmVtb3ZlR3JvdXAoYSl9KX0sdGhpcy5yZW1vdmVHcm91cD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmdyb3Vwcy5pbmRleE9mKGEpOy0xIT09YiYmdGhpcy5ncm91cHMuc3BsaWNlKGIsMSl9fV0pLmRpcmVjdGl2ZSgidWliQWNjb3JkaW9uIixmdW5jdGlvbigpe3JldHVybntjb250cm9sbGVyOiJVaWJBY2NvcmRpb25Db250cm9sbGVyIixjb250cm9sbGVyQXM6ImFjY29yZGlvbiIsdHJhbnNjbHVkZTohMCx0ZW1wbGF0ZVVybDpmdW5jdGlvbihhLGIpe3JldHVybiBiLnRlbXBsYXRlVXJsfHwidWliL3RlbXBsYXRlL2FjY29yZGlvbi9hY2NvcmRpb24uaHRtbCJ9fX0pLmRpcmVjdGl2ZSgidWliQWNjb3JkaW9uR3JvdXAiLGZ1bmN0aW9uKCl7cmV0dXJue3JlcXVpcmU6Il51aWJBY2NvcmRpb24iLHRyYW5zY2x1ZGU6ITAscmVzdHJpY3Q6IkEiLHRlbXBsYXRlVXJsOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudGVtcGxhdGVVcmx8fCJ1aWIvdGVtcGxhdGUvYWNjb3JkaW9uL2FjY29yZGlvbi1ncm91cC5odG1sIn0sc2NvcGU6e2hlYWRpbmc6IkAiLHBhbmVsQ2xhc3M6IkA/Iixpc09wZW46Ij0/Iixpc0Rpc2FibGVkOiI9PyJ9LGNvbnRyb2xsZXI6ZnVuY3Rpb24oKXt0aGlzLnNldEhlYWRpbmc9ZnVuY3Rpb24oYSl7dGhpcy5oZWFkaW5nPWF9fSxsaW5rOmZ1bmN0aW9uKGEsYixjLGQpe2IuYWRkQ2xhc3MoInBhbmVsIiksZC5hZGRHcm91cChhKSxhLm9wZW5DbGFzcz1jLm9wZW5DbGFzc3x8InBhbmVsLW9wZW4iLGEucGFuZWxDbGFzcz1jLnBhbmVsQ2xhc3N8fCJwYW5lbC1kZWZhdWx0IixhLiR3YXRjaCgiaXNPcGVuIixmdW5jdGlvbihjKXtiLnRvZ2dsZUNsYXNzKGEub3BlbkNsYXNzLCEhYyksYyYmZC5jbG9zZU90aGVycyhhKX0pLGEudG9nZ2xlT3Blbj1mdW5jdGlvbihiKXthLmlzRGlzYWJsZWR8fGImJjMyIT09Yi53aGljaHx8KGEuaXNPcGVuPSFhLmlzT3Blbil9O3ZhciBlPSJhY2NvcmRpb25ncm91cC0iK2EuJGlkKyItIitNYXRoLmZsb29yKDFlNCpNYXRoLnJhbmRvbSgpKTthLmhlYWRpbmdJZD1lKyItdGFiIixhLnBhbmVsSWQ9ZSsiLXBhbmVsIn19fSkuZGlyZWN0aXZlKCJ1aWJBY2NvcmRpb25IZWFkaW5nIixmdW5jdGlvbigpe3JldHVybnt0cmFuc2NsdWRlOiEwLHRlbXBsYXRlOiIiLHJlcGxhY2U6ITAscmVxdWlyZToiXnVpYkFjY29yZGlvbkdyb3VwIixsaW5rOmZ1bmN0aW9uKGEsYixjLGQsZSl7ZC5zZXRIZWFkaW5nKGUoYSxhbmd1bGFyLm5vb3ApKX19fSkuZGlyZWN0aXZlKCJ1aWJBY2NvcmRpb25UcmFuc2NsdWRlIixmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXtyZXR1cm4idWliLWFjY29yZGlvbi1oZWFkZXIsZGF0YS11aWItYWNjb3JkaW9uLWhlYWRlcix4LXVpYi1hY2NvcmRpb24taGVhZGVyLHVpYlxcOmFjY29yZGlvbi1oZWFkZXIsW3VpYi1hY2NvcmRpb24taGVhZGVyXSxbZGF0YS11aWItYWNjb3JkaW9uLWhlYWRlcl0sW3gtdWliLWFjY29yZGlvbi1oZWFkZXJdIn1yZXR1cm57cmVxdWlyZToiXnVpYkFjY29yZGlvbkdyb3VwIixsaW5rOmZ1bmN0aW9uKGIsYyxkLGUpe2IuJHdhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIGVbZC51aWJBY2NvcmRpb25UcmFuc2NsdWRlXX0sZnVuY3Rpb24oYil7aWYoYil7dmFyIGQ9YW5ndWxhci5lbGVtZW50KGNbMF0ucXVlcnlTZWxlY3RvcihhKCkpKTtkLmh0bWwoIiIpLGQuYXBwZW5kKGIpfX0pfX19KSxhbmd1bGFyLm1vZHVsZSgidWkuYm9vdHN0cmFwLmFsZXJ0IixbXSkuY29udHJvbGxlcigiVWliQWxlcnRDb250cm9sbGVyIixbIiRzY29wZSIsIiRlbGVtZW50IiwiJGF0dHJzIiwiJGludGVycG9sYXRlIiwiJHRpbWVvdXQiLGZ1bmN0aW9uKGEsYixjLGQsZSl7YS5jbG9zZWFibGU9ISFjLmNsb3NlLGIuYWRkQ2xhc3MoImFsZXJ0IiksYy4kc2V0KCJyb2xlIiwiYWxlcnQiKSxhLmNsb3NlYWJsZSYmYi5hZGRDbGFzcygiYWxlcnQtZGlzbWlzc2libGUiKTt2YXIgZj1hbmd1bGFyLmlzRGVmaW5lZChjLmRpc21pc3NPblRpbWVvdXQpP2QoYy5kaXNtaXNzT25UaW1lb3V0KShhLiRwYXJlbnQpOm51bGw7ZiYmZShmdW5jdGlvbigpe2EuY2xvc2UoKX0scGFyc2VJbnQoZiwxMCkpfV0pLmRpcmVjdGl2ZSgidWliQWxlcnQiLGZ1bmN0aW9uKCl7cmV0dXJue2NvbnRyb2xsZXI6IlVpYkFsZXJ0Q29udHJvbGxlciIsY29udHJvbGxlckFzOiJhbGVydCIscmVzdHJpY3Q6IkEiLHRlbXBsYXRlVXJsOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudGVtcGxhdGVVcmx8fCJ1aWIvdGVtcGxhdGUvYWxlcnQvYWxlcnQuaHRtbCJ9LHRyYW5zY2x1ZGU6ITAsc2NvcGU6e2Nsb3NlOiImIn19fSksYW5ndWxhci5tb2R1bGUoInVpLmJvb3RzdHJhcC5idXR0b25zIixbXSkuY29uc3RhbnQoInVpYkJ1dHRvbkNvbmZpZyIse2FjdGl2ZUNsYXNzOiJhY3RpdmUiLHRvZ2dsZUV2ZW50OiJjbGljayJ9KS5jb250cm9sbGVyKCJVaWJCdXR0b25zQ29udHJvbGxlciIsWyJ1aWJCdXR0b25Db25maWciLGZ1bmN0aW9uKGEpe3RoaXMuYWN0aXZlQ2xhc3M9YS5hY3RpdmVDbGFzc3x8ImFjdGl2ZSIsdGhpcy50b2dnbGVFdmVudD1hLnRvZ2dsZUV2ZW50fHwiY2xpY2sifV0pLmRpcmVjdGl2ZSgidWliQnRuUmFkaW8iLFsiJHBhcnNlIixmdW5jdGlvbihhKXtyZXR1cm57cmVxdWlyZTpbInVpYkJ0blJhZGlvIiwibmdNb2RlbCJdLGNvbnRyb2xsZXI6IlVpYkJ1dHRvbnNDb250cm9sbGVyIixjb250cm9sbGVyQXM6ImJ1dHRvbnMiLGxpbms6ZnVuY3Rpb24oYixjLGQsZSl7dmFyIGY9ZVswXSxnPWVbMV0saD1hKGQudWliVW5jaGVja2FibGUpO2MuZmluZCgiaW5wdXQiKS5jc3Moe2Rpc3BsYXk6Im5vbmUifSksZy4kcmVuZGVyPWZ1bmN0aW9uKCl7Yy50b2dnbGVDbGFzcyhmLmFjdGl2ZUNsYXNzLGFuZ3VsYXIuZXF1YWxzKGcuJG1vZGVsVmFsdWUsYi4kZXZhbChkLnVpYkJ0blJhZGlvKSkpfSxjLm9uKGYudG9nZ2xlRXZlbnQsZnVuY3Rpb24oKXtpZighZC5kaXNhYmxlZCl7dmFyIGE9Yy5oYXNDbGFzcyhmLmFjdGl2ZUNsYXNzKTthJiYhYW5ndWxhci5pc0RlZmluZWQoZC51bmNoZWNrYWJsZSl8fGIuJGFwcGx5KGZ1bmN0aW9uKCl7Zy4kc2V0Vmlld1ZhbHVlKGE/bnVsbDpiLiRldmFsKGQudWliQnRuUmFkaW8pKSxnLiRyZW5kZXIoKX0pfX0pLGQudWliVW5jaGVja2FibGUmJmIuJHdhdGNoKGgsZnVuY3Rpb24oYSl7ZC4kc2V0KCJ1bmNoZWNrYWJsZSIsYT8iIjp2b2lkIDApfSl9fX1dKS5kaXJlY3RpdmUoInVpYkJ0bkNoZWNrYm94IixmdW5jdGlvbigpe3JldHVybntyZXF1aXJlOlsidWliQnRuQ2hlY2tib3giLCJuZ01vZGVsIl0sY29udHJvbGxlcjoiVWliQnV0dG9uc0NvbnRyb2xsZXIiLGNvbnRyb2xsZXJBczoiYnV0dG9uIixsaW5rOmZ1bmN0aW9uKGEsYixjLGQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gZyhjLmJ0bkNoZWNrYm94VHJ1ZSwhMCl9ZnVuY3Rpb24gZigpe3JldHVybiBnKGMuYnRuQ2hlY2tib3hGYWxzZSwhMSl9ZnVuY3Rpb24gZyhiLGMpe3JldHVybiBhbmd1bGFyLmlzRGVmaW5lZChiKT9hLiRldmFsKGIpOmN9dmFyIGg9ZFswXSxpPWRbMV07Yi5maW5kKCJpbnB1dCIpLmNzcyh7ZGlzcGxheToibm9uZSJ9KSxpLiRyZW5kZXI9ZnVuY3Rpb24oKXtiLnRvZ2dsZUNsYXNzKGguYWN0aXZlQ2xhc3MsYW5ndWxhci5lcXVhbHMoaS4kbW9kZWxWYWx1ZSxlKCkpKX0sYi5vbihoLnRvZ2dsZUV2ZW50LGZ1bmN0aW9uKCl7Yy5kaXNhYmxlZHx8YS4kYXBwbHkoZnVuY3Rpb24oKXtpLiRzZXRWaWV3VmFsdWUoYi5oYXNDbGFzcyhoLmFjdGl2ZUNsYXNzKT9mKCk6ZSgpKSxpLiRyZW5kZXIoKX0pfSl9fX0pLGFuZ3VsYXIubW9kdWxlKCJ1aS5ib290c3RyYXAuY2Fyb3VzZWwiLFtdKS5jb250cm9sbGVyKCJVaWJDYXJvdXNlbENvbnRyb2xsZXIiLFsiJHNjb3BlIiwiJGVsZW1lbnQiLCIkaW50ZXJ2YWwiLCIkdGltZW91dCIsIiRhbmltYXRlIixmdW5jdGlvbihhLGIsYyxkLGUpe2Z1bmN0aW9uIGYoYSl7Zm9yKHZhciBiPTA7YjxwLmxlbmd0aDtiKyspcFtiXS5zbGlkZS5hY3RpdmU9Yj09PWF9ZnVuY3Rpb24gZyhjLGQsZyl7aWYoIXMpe2lmKGFuZ3VsYXIuZXh0ZW5kKGMse2RpcmVjdGlvbjpnfSksYW5ndWxhci5leHRlbmQocFtyXS5zbGlkZXx8e30se2RpcmVjdGlvbjpnfSksZS5lbmFibGVkKGIpJiYhYS4kY3VycmVudFRyYW5zaXRpb24mJnBbZF0uZWxlbWVudCYmby5zbGlkZXMubGVuZ3RoPjEpe3BbZF0uZWxlbWVudC5kYXRhKHEsYy5kaXJlY3Rpb24pO3ZhciBoPW8uZ2V0Q3VycmVudEluZGV4KCk7YW5ndWxhci5pc051bWJlcihoKSYmcFtoXS5lbGVtZW50JiZwW2hdLmVsZW1lbnQuZGF0YShxLGMuZGlyZWN0aW9uKSxhLiRjdXJyZW50VHJhbnNpdGlvbj0hMCxlLm9uKCJhZGRDbGFzcyIscFtkXS5lbGVtZW50LGZ1bmN0aW9uKGIsYyl7ImNsb3NlIj09PWMmJihhLiRjdXJyZW50VHJhbnNpdGlvbj1udWxsLGUub2ZmKCJhZGRDbGFzcyIsYikpfSl9YS5hY3RpdmU9Yy5pbmRleCxyPWMuaW5kZXgsZihkKSxrKCl9fWZ1bmN0aW9uIGgoYSl7Zm9yKHZhciBiPTA7YjxwLmxlbmd0aDtiKyspaWYocFtiXS5zbGlkZT09PWEpcmV0dXJuIGJ9ZnVuY3Rpb24gaSgpe20mJihjLmNhbmNlbChtKSxtPW51bGwpfWZ1bmN0aW9uIGooYil7Yi5sZW5ndGh8fChhLiRjdXJyZW50VHJhbnNpdGlvbj1udWxsKX1mdW5jdGlvbiBrKCl7aSgpO3ZhciBiPSthLmludGVydmFsOyFpc05hTihiKSYmYj4wJiYobT1jKGwsYikpfWZ1bmN0aW9uIGwoKXt2YXIgYj0rYS5pbnRlcnZhbDtuJiYhaXNOYU4oYikmJmI+MCYmcC5sZW5ndGg/YS5uZXh0KCk6YS5wYXVzZSgpfXZhciBtLG4sbz10aGlzLHA9by5zbGlkZXM9YS5zbGlkZXM9W10scT0idWliLXNsaWRlRGlyZWN0aW9uIixyPWEuYWN0aXZlLHM9ITE7Yi5hZGRDbGFzcygiY2Fyb3VzZWwiKSxvLmFkZFNsaWRlPWZ1bmN0aW9uKGIsYyl7cC5wdXNoKHtzbGlkZTpiLGVsZW1lbnQ6Y30pLHAuc29ydChmdW5jdGlvbihhLGIpe3JldHVybithLnNsaWRlLmluZGV4LStiLnNsaWRlLmluZGV4fSksKGIuaW5kZXg9PT1hLmFjdGl2ZXx8MT09PXAubGVuZ3RoJiYhYW5ndWxhci5pc051bWJlcihhLmFjdGl2ZSkpJiYoYS4kY3VycmVudFRyYW5zaXRpb24mJihhLiRjdXJyZW50VHJhbnNpdGlvbj1udWxsKSxyPWIuaW5kZXgsYS5hY3RpdmU9Yi5pbmRleCxmKHIpLG8uc2VsZWN0KHBbaChiKV0pLDE9PT1wLmxlbmd0aCYmYS5wbGF5KCkpfSxvLmdldEN1cnJlbnRJbmRleD1mdW5jdGlvbigpe2Zvcih2YXIgYT0wO2E8cC5sZW5ndGg7YSsrKWlmKHBbYV0uc2xpZGUuaW5kZXg9PT1yKXJldHVybiBhfSxvLm5leHQ9YS5uZXh0PWZ1bmN0aW9uKCl7dmFyIGI9KG8uZ2V0Q3VycmVudEluZGV4KCkrMSklcC5sZW5ndGg7cmV0dXJuIDA9PT1iJiZhLm5vV3JhcCgpP3ZvaWQgYS5wYXVzZSgpOm8uc2VsZWN0KHBbYl0sIm5leHQiKX0sby5wcmV2PWEucHJldj1mdW5jdGlvbigpe3ZhciBiPW8uZ2V0Q3VycmVudEluZGV4KCktMTwwP3AubGVuZ3RoLTE6by5nZXRDdXJyZW50SW5kZXgoKS0xO3JldHVybiBhLm5vV3JhcCgpJiZiPT09cC5sZW5ndGgtMT92b2lkIGEucGF1c2UoKTpvLnNlbGVjdChwW2JdLCJwcmV2Iil9LG8ucmVtb3ZlU2xpZGU9ZnVuY3Rpb24oYil7dmFyIGM9aChiKTtwLnNwbGljZShjLDEpLHAubGVuZ3RoPjAmJnI9PT1jP2M+PXAubGVuZ3RoPyhyPXAubGVuZ3RoLTEsYS5hY3RpdmU9cixmKHIpLG8uc2VsZWN0KHBbcC5sZW5ndGgtMV0pKToocj1jLGEuYWN0aXZlPXIsZihyKSxvLnNlbGVjdChwW2NdKSk6cj5jJiYoci0tLGEuYWN0aXZlPXIpLDA9PT1wLmxlbmd0aCYmKHI9bnVsbCxhLmFjdGl2ZT1udWxsKX0sby5zZWxlY3Q9YS5zZWxlY3Q9ZnVuY3Rpb24oYixjKXt2YXIgZD1oKGIuc2xpZGUpO3ZvaWQgMD09PWMmJihjPWQ+by5nZXRDdXJyZW50SW5kZXgoKT8ibmV4dCI6InByZXYiKSxiLnNsaWRlLmluZGV4PT09cnx8YS4kY3VycmVudFRyYW5zaXRpb258fGcoYi5zbGlkZSxkLGMpfSxhLmluZGV4T2ZTbGlkZT1mdW5jdGlvbihhKXtyZXR1cm4rYS5zbGlkZS5pbmRleH0sYS5pc0FjdGl2ZT1mdW5jdGlvbihiKXtyZXR1cm4gYS5hY3RpdmU9PT1iLnNsaWRlLmluZGV4fSxhLmlzUHJldkRpc2FibGVkPWZ1bmN0aW9uKCl7cmV0dXJuIDA9PT1hLmFjdGl2ZSYmYS5ub1dyYXAoKX0sYS5pc05leHREaXNhYmxlZD1mdW5jdGlvbigpe3JldHVybiBhLmFjdGl2ZT09PXAubGVuZ3RoLTEmJmEubm9XcmFwKCl9LGEucGF1c2U9ZnVuY3Rpb24oKXthLm5vUGF1c2V8fChuPSExLGkoKSl9LGEucGxheT1mdW5jdGlvbigpe258fChuPSEwLGsoKSl9LGIub24oIm1vdXNlZW50ZXIiLGEucGF1c2UpLGIub24oIm1vdXNlbGVhdmUiLGEucGxheSksYS4kb24oIiRkZXN0cm95IixmdW5jdGlvbigpe3M9ITAsaSgpfSksYS4kd2F0Y2goIm5vVHJhbnNpdGlvbiIsZnVuY3Rpb24oYSl7ZS5lbmFibGVkKGIsIWEpfSksYS4kd2F0Y2goImludGVydmFsIixrKSxhLiR3YXRjaENvbGxlY3Rpb24oInNsaWRlcyIsaiksYS4kd2F0Y2goImFjdGl2ZSIsZnVuY3Rpb24oYSl7aWYoYW5ndWxhci5pc051bWJlcihhKSYmciE9PWEpe2Zvcih2YXIgYj0wO2I8cC5sZW5ndGg7YisrKWlmKHBbYl0uc2xpZGUuaW5kZXg9PT1hKXthPWI7YnJlYWt9dmFyIGM9cFthXTtjJiYoZihhKSxvLnNlbGVjdChwW2FdKSxyPWEpfX0pfV0pLmRpcmVjdGl2ZSgidWliQ2Fyb3VzZWwiLGZ1bmN0aW9uKCl7cmV0dXJue3RyYW5zY2x1ZGU6ITAsY29udHJvbGxlcjoiVWliQ2Fyb3VzZWxDb250cm9sbGVyIixjb250cm9sbGVyQXM6ImNhcm91c2VsIixyZXN0cmljdDoiQSIsdGVtcGxhdGVVcmw6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50ZW1wbGF0ZVVybHx8InVpYi90ZW1wbGF0ZS9jYXJvdXNlbC9jYXJvdXNlbC5odG1sIn0sc2NvcGU6e2FjdGl2ZToiPSIsaW50ZXJ2YWw6Ij0iLG5vVHJhbnNpdGlvbjoiPSIsbm9QYXVzZToiPSIsbm9XcmFwOiImIn19fSkuZGlyZWN0aXZlKCJ1aWJTbGlkZSIsWyIkYW5pbWF0ZSIsZnVuY3Rpb24oYSl7cmV0dXJue3JlcXVpcmU6Il51aWJDYXJvdXNlbCIscmVzdHJpY3Q6IkEiLHRyYW5zY2x1ZGU6ITAsdGVtcGxhdGVVcmw6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50ZW1wbGF0ZVVybHx8InVpYi90ZW1wbGF0ZS9jYXJvdXNlbC9zbGlkZS5odG1sIn0sc2NvcGU6e2FjdHVhbDoiPT8iLGluZGV4OiI9PyJ9LGxpbms6ZnVuY3Rpb24oYixjLGQsZSl7Yy5hZGRDbGFzcygiaXRlbSIpLGUuYWRkU2xpZGUoYixjKSxiLiRvbigiJGRlc3Ryb3kiLGZ1bmN0aW9uKCl7ZS5yZW1vdmVTbGlkZShiKX0pLGIuJHdhdGNoKCJhY3RpdmUiLGZ1bmN0aW9uKGIpe2FbYj8iYWRkQ2xhc3MiOiJyZW1vdmVDbGFzcyJdKGMsImFjdGl2ZSIpfSl9fX1dKS5hbmltYXRpb24oIi5pdGVtIixbIiRhbmltYXRlQ3NzIixmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYixjKXthLnJlbW92ZUNsYXNzKGIpLGMmJmMoKX12YXIgYz0idWliLXNsaWRlRGlyZWN0aW9uIjtyZXR1cm57YmVmb3JlQWRkQ2xhc3M6ZnVuY3Rpb24oZCxlLGYpe2lmKCJhY3RpdmUiPT09ZSl7dmFyIGc9ITEsaD1kLmRhdGEoYyksaT0ibmV4dCI9PT1oPyJsZWZ0IjoicmlnaHQiLGo9Yi5iaW5kKHRoaXMsZCxpKyIgIitoLGYpO3JldHVybiBkLmFkZENsYXNzKGgpLGEoZCx7YWRkQ2xhc3M6aX0pLnN0YXJ0KCkuZG9uZShqKSxmdW5jdGlvbigpe2c9ITB9fWYoKX0sYmVmb3JlUmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oZCxlLGYpe2lmKCJhY3RpdmUiPT09ZSl7dmFyIGc9ITEsaD1kLmRhdGEoYyksaT0ibmV4dCI9PT1oPyJsZWZ0IjoicmlnaHQiLGo9Yi5iaW5kKHRoaXMsZCxpLGYpO3JldHVybiBhKGQse2FkZENsYXNzOml9KS5zdGFydCgpLmRvbmUoaiksZnVuY3Rpb24oKXtnPSEwfX1mKCl9fX1dKSxhbmd1bGFyLm1vZHVsZSgidWkuYm9vdHN0cmFwLmRhdGVwYXJzZXIiLFtdKS5zZXJ2aWNlKCJ1aWJEYXRlUGFyc2VyIixbIiRsb2ciLCIkbG9jYWxlIiwiZGF0ZUZpbHRlciIsIm9yZGVyQnlGaWx0ZXIiLCJmaWx0ZXJGaWx0ZXIiLGZ1bmN0aW9uKGEsYixjLGQsZSl7ZnVuY3Rpb24gZihhKXtyZXR1cm4gZShzLHtrZXk6YX0sITApWzBdfWZ1bmN0aW9uIGcoYSl7dmFyIGI9W10sYz1hLnNwbGl0KCIiKSxlPWEuaW5kZXhPZigiJyIpO2lmKGU+LTEpe3ZhciBmPSExO2E9YS5zcGxpdCgiIik7Zm9yKHZhciBnPWU7ZzxhLmxlbmd0aDtnKyspZj8oIiciPT09YVtnXSYmKGcrMTxhLmxlbmd0aCYmIiciPT09YVtnKzFdPyhhW2crMV09IiQiLGNbZysxXT0iIik6KGNbZ109IiIsZj0hMSkpLGFbZ109IiQiKToiJyI9PT1hW2ddJiYoYVtnXT0iJCIsY1tnXT0iIixmPSEwKTthPWEuam9pbigiIil9cmV0dXJuIGFuZ3VsYXIuZm9yRWFjaChzLGZ1bmN0aW9uKGQpe3ZhciBlPWEuaW5kZXhPZihkLmtleSk7aWYoZT4tMSl7YT1hLnNwbGl0KCIiKSxjW2VdPSIoIitkLnJlZ2V4KyIpIixhW2VdPSIkIjtmb3IodmFyIGY9ZSsxLGc9ZStkLmtleS5sZW5ndGg7Zz5mO2YrKyljW2ZdPSIiLGFbZl09IiQiO2E9YS5qb2luKCIiKSxiLnB1c2goe2luZGV4OmUsa2V5OmQua2V5LGFwcGx5OmQuYXBwbHksbWF0Y2hlcjpkLnJlZ2V4fSl9fSkse3JlZ2V4Om5ldyBSZWdFeHAoIl4iK2Muam9pbigiIikrIiQiKSxtYXA6ZChiLCJpbmRleCIpfX1mdW5jdGlvbiBoKGEpe2Zvcih2YXIgYixjLGQ9W10sZT0wO2U8YS5sZW5ndGg7KWlmKGFuZ3VsYXIuaXNOdW1iZXIoYykpe2lmKCInIj09PWEuY2hhckF0KGUpKShlKzE+PWEubGVuZ3RofHwiJyIhPT1hLmNoYXJBdChlKzEpKSYmKGQucHVzaChpKGEsYyxlKSksYz1udWxsKTtlbHNlIGlmKGU9PT1hLmxlbmd0aClmb3IoO2M8YS5sZW5ndGg7KWI9aihhLGMpLGQucHVzaChiKSxjPWIuZW5kSWR4O2UrK31lbHNlIiciIT09YS5jaGFyQXQoZSk/KGI9aihhLGUpLGQucHVzaChiLnBhcnNlciksZT1iLmVuZElkeCk6KGM9ZSxlKyspO3JldHVybiBkfWZ1bmN0aW9uIGkoYSxiLGMpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBhLnN1YnN0cihiKzEsYy1iLTEpfX1mdW5jdGlvbiBqKGEsYil7Zm9yKHZhciBjPWEuc3Vic3RyKGIpLGQ9MDtkPHMubGVuZ3RoO2QrKylpZihuZXcgUmVnRXhwKCJeIitzW2RdLmtleSkudGVzdChjKSl7dmFyIGU9c1tkXTtyZXR1cm57ZW5kSWR4OmIrZS5rZXkubGVuZ3RoLHBhcnNlcjplLmZvcm1hdHRlcn19cmV0dXJue2VuZElkeDpiKzEscGFyc2VyOmZ1bmN0aW9uKCl7cmV0dXJuIGMuY2hhckF0KDApfX19ZnVuY3Rpb24gayhhLGIsYyl7cmV0dXJuIDE+Yz8hMToxPT09YiYmYz4yOD8yOT09PWMmJihhJTQ9PT0wJiZhJTEwMCE9PTB8fGElNDAwPT09MCk6Mz09PWJ8fDU9PT1ifHw4PT09Ynx8MTA9PT1iPzMxPmM6ITB9ZnVuY3Rpb24gbChhKXtyZXR1cm4gcGFyc2VJbnQoYSwxMCl9ZnVuY3Rpb24gbShhLGIpe3JldHVybiBhJiZiP3EoYSxiKTphfWZ1bmN0aW9uIG4oYSxiKXtyZXR1cm4gYSYmYj9xKGEsYiwhMCk6YX1mdW5jdGlvbiBvKGEsYil7YT1hLnJlcGxhY2UoLzovZywiIik7dmFyIGM9RGF0ZS5wYXJzZSgiSmFuIDAxLCAxOTcwIDAwOjAwOjAwICIrYSkvNmU0O3JldHVybiBpc05hTihjKT9iOmN9ZnVuY3Rpb24gcChhLGIpe3JldHVybiBhPW5ldyBEYXRlKGEuZ2V0VGltZSgpKSxhLnNldE1pbnV0ZXMoYS5nZXRNaW51dGVzKCkrYiksYX1mdW5jdGlvbiBxKGEsYixjKXtjPWM/LTE6MTt2YXIgZD1hLmdldFRpbWV6b25lT2Zmc2V0KCksZT1vKGIsZCk7cmV0dXJuIHAoYSxjKihlLWQpKX12YXIgcixzLHQ9L1tcXFxeXCRcKlwrXD9cfFxbXF1cKFwpXC5ce1x9XS9nO3RoaXMuaW5pdD1mdW5jdGlvbigpe3I9Yi5pZCx0aGlzLnBhcnNlcnM9e30sdGhpcy5mb3JtYXR0ZXJzPXt9LHM9W3trZXk6Inl5eXkiLHJlZ2V4OiJcXGR7NH0iLGFwcGx5OmZ1bmN0aW9uKGEpe3RoaXMueWVhcj0rYX0sZm9ybWF0dGVyOmZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBEYXRlO3JldHVybiBiLnNldEZ1bGxZZWFyKE1hdGguYWJzKGEuZ2V0RnVsbFllYXIoKSkpLGMoYiwieXl5eSIpfX0se2tleToieXkiLHJlZ2V4OiJcXGR7Mn0iLGFwcGx5OmZ1bmN0aW9uKGEpe2E9K2EsdGhpcy55ZWFyPTY5PmE/YSsyZTM6YSsxOTAwfSxmb3JtYXR0ZXI6ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IERhdGU7cmV0dXJuIGIuc2V0RnVsbFllYXIoTWF0aC5hYnMoYS5nZXRGdWxsWWVhcigpKSksYyhiLCJ5eSIpfX0se2tleToieSIscmVnZXg6IlxcZHsxLDR9IixhcHBseTpmdW5jdGlvbihhKXt0aGlzLnllYXI9K2F9LGZvcm1hdHRlcjpmdW5jdGlvbihhKXt2YXIgYj1uZXcgRGF0ZTtyZXR1cm4gYi5zZXRGdWxsWWVhcihNYXRoLmFicyhhLmdldEZ1bGxZZWFyKCkpKSxjKGIsInkiKX19LHtrZXk6Ik0hIixyZWdleDoiMD9bMS05XXwxWzAtMl0iLGFwcGx5OmZ1bmN0aW9uKGEpe3RoaXMubW9udGg9YS0xfSxmb3JtYXR0ZXI6ZnVuY3Rpb24oYSl7dmFyIGI9YS5nZXRNb250aCgpO3JldHVybi9eWzAtOV0kLy50ZXN0KGIpP2MoYSwiTU0iKTpjKGEsIk0iKX19LHtrZXk6Ik1NTU0iLHJlZ2V4OmIuREFURVRJTUVfRk9STUFUUy5NT05USC5qb2luKCJ8IiksYXBwbHk6ZnVuY3Rpb24oYSl7dGhpcy5tb250aD1iLkRBVEVUSU1FX0ZPUk1BVFMuTU9OVEguaW5kZXhPZihhKX0sZm9ybWF0dGVyOmZ1bmN0aW9uKGEpe3JldHVybiBjKGEsIk1NTU0iKX19LHtrZXk6Ik1NTSIscmVnZXg6Yi5EQVRFVElNRV9GT1JNQVRTLlNIT1JUTU9OVEguam9pbigifCIpLGFwcGx5OmZ1bmN0aW9uKGEpe3RoaXMubW9udGg9Yi5EQVRFVElNRV9GT1JNQVRTLlNIT1JUTU9OVEguaW5kZXhPZihhKX0sZm9ybWF0dGVyOmZ1bmN0aW9uKGEpe3JldHVybiBjKGEsIk1NTSIpfX0se2tleToiTU0iLHJlZ2V4OiIwWzEtOV18MVswLTJdIixhcHBseTpmdW5jdGlvbihhKXt0aGlzLm1vbnRoPWEtMX0sZm9ybWF0dGVyOmZ1bmN0aW9uKGEpe3JldHVybiBjKGEsIk1NIil9fSx7a2V5OiJNIixyZWdleDoiWzEtOV18MVswLTJdIixhcHBseTpmdW5jdGlvbihhKXt0aGlzLm1vbnRoPWEtMX0sZm9ybWF0dGVyOmZ1bmN0aW9uKGEpe3JldHVybiBjKGEsIk0iKX19LHtrZXk6ImQhIixyZWdleDoiWzAtMl0/WzAtOV17MX18M1swLTFdezF9IixhcHBseTpmdW5jdGlvbihhKXt0aGlzLmRhdGU9K2F9LGZvcm1hdHRlcjpmdW5jdGlvbihhKXt2YXIgYj1hLmdldERhdGUoKTtyZXR1cm4vXlsxLTldJC8udGVzdChiKT9jKGEsImRkIik6YyhhLCJkIil9fSx7a2V5OiJkZCIscmVnZXg6IlswLTJdWzAtOV17MX18M1swLTFdezF9IixhcHBseTpmdW5jdGlvbihhKXt0aGlzLmRhdGU9K2F9LGZvcm1hdHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gYyhhLCJkZCIpfX0se2tleToiZCIscmVnZXg6IlsxLTJdP1swLTldezF9fDNbMC0xXXsxfSIsYXBwbHk6ZnVuY3Rpb24oYSl7dGhpcy5kYXRlPSthfSxmb3JtYXR0ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGMoYSwiZCIpfX0se2tleToiRUVFRSIscmVnZXg6Yi5EQVRFVElNRV9GT1JNQVRTLkRBWS5qb2luKCJ8IiksZm9ybWF0dGVyOmZ1bmN0aW9uKGEpe3JldHVybiBjKGEsIkVFRUUiKX19LHtrZXk6IkVFRSIscmVnZXg6Yi5EQVRFVElNRV9GT1JNQVRTLlNIT1JUREFZLmpvaW4oInwiKSxmb3JtYXR0ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGMoYSwiRUVFIil9fSx7a2V5OiJISCIscmVnZXg6Iig/OjB8MSlbMC05XXwyWzAtM10iLGFwcGx5OmZ1bmN0aW9uKGEpe3RoaXMuaG91cnM9K2F9LGZvcm1hdHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gYyhhLCJISCIpfX0se2tleToiaGgiLHJlZ2V4OiIwWzAtOV18MVswLTJdIixhcHBseTpmdW5jdGlvbihhKXt0aGlzLmhvdXJzPSthfSxmb3JtYXR0ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGMoYSwiaGgiKX19LHtrZXk6IkgiLHJlZ2V4OiIxP1swLTldfDJbMC0zXSIsYXBwbHk6ZnVuY3Rpb24oYSl7dGhpcy5ob3Vycz0rYX0sZm9ybWF0dGVyOmZ1bmN0aW9uKGEpe3JldHVybiBjKGEsIkgiKX19LHtrZXk6ImgiLHJlZ2V4OiJbMC05XXwxWzAtMl0iLGFwcGx5OmZ1bmN0aW9uKGEpe3RoaXMuaG91cnM9K2F9LGZvcm1hdHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gYyhhLCJoIil9fSx7a2V5OiJtbSIscmVnZXg6IlswLTVdWzAtOV0iLGFwcGx5OmZ1bmN0aW9uKGEpe3RoaXMubWludXRlcz0rYX0sZm9ybWF0dGVyOmZ1bmN0aW9uKGEpe3JldHVybiBjKGEsIm1tIil9fSx7a2V5OiJtIixyZWdleDoiWzAtOV18WzEtNV1bMC05XSIsYXBwbHk6ZnVuY3Rpb24oYSl7dGhpcy5taW51dGVzPSthfSxmb3JtYXR0ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGMoYSwibSIpfX0se2tleToic3NzIixyZWdleDoiWzAtOV1bMC05XVswLTldIixhcHBseTpmdW5jdGlvbihhKXt0aGlzLm1pbGxpc2Vjb25kcz0rYX0sZm9ybWF0dGVyOmZ1bmN0aW9uKGEpe3JldHVybiBjKGEsInNzcyIpfX0se2tleToic3MiLHJlZ2V4OiJbMC01XVswLTldIixhcHBseTpmdW5jdGlvbihhKXt0aGlzLnNlY29uZHM9K2F9LGZvcm1hdHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gYyhhLCJzcyIpfX0se2tleToicyIscmVnZXg6IlswLTldfFsxLTVdWzAtOV0iLGFwcGx5OmZ1bmN0aW9uKGEpe3RoaXMuc2Vjb25kcz0rYX0sZm9ybWF0dGVyOmZ1bmN0aW9uKGEpe3JldHVybiBjKGEsInMiKX19LHtrZXk6ImEiLHJlZ2V4OmIuREFURVRJTUVfRk9STUFUUy5BTVBNUy5qb2luKCJ8IiksYXBwbHk6ZnVuY3Rpb24oYSl7MTI9PT10aGlzLmhvdXJzJiYodGhpcy5ob3Vycz0wKSwiUE0iPT09YSYmKHRoaXMuaG91cnMrPTEyKX0sZm9ybWF0dGVyOmZ1bmN0aW9uKGEpe3JldHVybiBjKGEsImEiKX19LHtrZXk6IloiLHJlZ2V4OiJbKy1dXFxkezR9IixhcHBseTpmdW5jdGlvbihhKXt2YXIgYj1hLm1hdGNoKC8oWystXSkoXGR7Mn0pKFxkezJ9KS8pLGM9YlsxXSxkPWJbMl0sZT1iWzNdO3RoaXMuaG91cnMrPWwoYytkKSx0aGlzLm1pbnV0ZXMrPWwoYytlKX0sZm9ybWF0dGVyOmZ1bmN0aW9uKGEpe3JldHVybiBjKGEsIloiKX19LHtrZXk6Ind3IixyZWdleDoiWzAtNF1bMC05XXw1WzAtM10iLGZvcm1hdHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gYyhhLCJ3dyIpfX0se2tleToidyIscmVnZXg6IlswLTldfFsxLTRdWzAtOV18NVswLTNdIixmb3JtYXR0ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGMoYSwidyIpfX0se2tleToiR0dHRyIscmVnZXg6Yi5EQVRFVElNRV9GT1JNQVRTLkVSQU5BTUVTLmpvaW4oInwiKS5yZXBsYWNlKC9ccy9nLCJcXHMiKSxmb3JtYXR0ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGMoYSwiR0dHRyIpfX0se2tleToiR0dHIixyZWdleDpiLkRBVEVUSU1FX0ZPUk1BVFMuRVJBUy5qb2luKCJ8IiksZm9ybWF0dGVyOmZ1bmN0aW9uKGEpe3JldHVybiBjKGEsIkdHRyIpfX0se2tleToiR0ciLHJlZ2V4OmIuREFURVRJTUVfRk9STUFUUy5FUkFTLmpvaW4oInwiKSxmb3JtYXR0ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGMoYSwiR0ciKX19LHtrZXk6IkciLHJlZ2V4OmIuREFURVRJTUVfRk9STUFUUy5FUkFTLmpvaW4oInwiKSxmb3JtYXR0ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGMoYSwiRyIpfX1dLGFuZ3VsYXIudmVyc2lvbi5tYWpvcj49MSYmYW5ndWxhci52ZXJzaW9uLm1pbm9yPjQmJnMucHVzaCh7a2V5OiJMTExMIixyZWdleDpiLkRBVEVUSU1FX0ZPUk1BVFMuU1RBTkRBTE9ORU1PTlRILmpvaW4oInwiKSxhcHBseTpmdW5jdGlvbihhKXt0aGlzLm1vbnRoPWIuREFURVRJTUVfRk9STUFUUy5TVEFOREFMT05FTU9OVEguaW5kZXhPZihhKX0sZm9ybWF0dGVyOmZ1bmN0aW9uKGEpe3JldHVybiBjKGEsIkxMTEwiKX19KX0sdGhpcy5pbml0KCksdGhpcy5nZXRQYXJzZXI9ZnVuY3Rpb24oYSl7dmFyIGI9ZihhKTtyZXR1cm4gYiYmYi5hcHBseXx8bnVsbH0sdGhpcy5vdmVycmlkZVBhcnNlcj1mdW5jdGlvbihhLGIpe3ZhciBjPWYoYSk7YyYmYW5ndWxhci5pc0Z1bmN0aW9uKGIpJiYodGhpcy5wYXJzZXJzPXt9LGMuYXBwbHk9Yil9LmJpbmQodGhpcyksdGhpcy5maWx0ZXI9ZnVuY3Rpb24oYSxjKXtpZighYW5ndWxhci5pc0RhdGUoYSl8fGlzTmFOKGEpfHwhYylyZXR1cm4iIjtjPWIuREFURVRJTUVfRk9STUFUU1tjXXx8YyxiLmlkIT09ciYmdGhpcy5pbml0KCksdGhpcy5mb3JtYXR0ZXJzW2NdfHwodGhpcy5mb3JtYXR0ZXJzW2NdPWgoYykpO3ZhciBkPXRoaXMuZm9ybWF0dGVyc1tjXTtyZXR1cm4gZC5yZWR1Y2UoZnVuY3Rpb24oYixjKXtyZXR1cm4gYitjKGEpfSwiIil9LHRoaXMucGFyc2U9ZnVuY3Rpb24oYyxkLGUpe2lmKCFhbmd1bGFyLmlzU3RyaW5nKGMpfHwhZClyZXR1cm4gYztkPWIuREFURVRJTUVfRk9STUFUU1tkXXx8ZCxkPWQucmVwbGFjZSh0LCJcXCQmIiksYi5pZCE9PXImJnRoaXMuaW5pdCgpLHRoaXMucGFyc2Vyc1tkXXx8KHRoaXMucGFyc2Vyc1tkXT1nKGQsImFwcGx5IikpO3ZhciBmPXRoaXMucGFyc2Vyc1tkXSxoPWYucmVnZXgsaT1mLm1hcCxqPWMubWF0Y2goaCksbD0hMTtpZihqJiZqLmxlbmd0aCl7dmFyIG0sbjthbmd1bGFyLmlzRGF0ZShlKSYmIWlzTmFOKGUuZ2V0VGltZSgpKT9tPXt5ZWFyOmUuZ2V0RnVsbFllYXIoKSxtb250aDplLmdldE1vbnRoKCksZGF0ZTplLmdldERhdGUoKSxob3VyczplLmdldEhvdXJzKCksbWludXRlczplLmdldE1pbnV0ZXMoKSxzZWNvbmRzOmUuZ2V0U2Vjb25kcygpLG1pbGxpc2Vjb25kczplLmdldE1pbGxpc2Vjb25kcygpfTooZSYmYS53YXJuKCJkYXRlcGFyc2VyOiIsImJhc2VEYXRlIGlzIG5vdCBhIHZhbGlkIGRhdGUiKSxtPXt5ZWFyOjE5MDAsbW9udGg6MCxkYXRlOjEsaG91cnM6MCxtaW51dGVzOjAsc2Vjb25kczowLG1pbGxpc2Vjb25kczowfSk7Zm9yKHZhciBvPTEscD1qLmxlbmd0aDtwPm87bysrKXt2YXIgcT1pW28tMV07IloiPT09cS5tYXRjaGVyJiYobD0hMCkscS5hcHBseSYmcS5hcHBseS5jYWxsKG0saltvXSl9dmFyIHM9bD9EYXRlLnByb3RvdHlwZS5zZXRVVENGdWxsWWVhcjpEYXRlLnByb3RvdHlwZS5zZXRGdWxsWWVhcix1PWw/RGF0ZS5wcm90b3R5cGUuc2V0VVRDSG91cnM6RGF0ZS5wcm90b3R5cGUuc2V0SG91cnM7cmV0dXJuIGsobS55ZWFyLG0ubW9udGgsbS5kYXRlKSYmKCFhbmd1bGFyLmlzRGF0ZShlKXx8aXNOYU4oZS5nZXRUaW1lKCkpfHxsPyhuPW5ldyBEYXRlKDApLHMuY2FsbChuLG0ueWVhcixtLm1vbnRoLG0uZGF0ZSksdS5jYWxsKG4sbS5ob3Vyc3x8MCxtLm1pbnV0ZXN8fDAsbS5zZWNvbmRzfHwwLG0ubWlsbGlzZWNvbmRzfHwwKSk6KG49bmV3IERhdGUoZSkscy5jYWxsKG4sbS55ZWFyLG0ubW9udGgsbS5kYXRlKSx1LmNhbGwobixtLmhvdXJzLG0ubWludXRlcyxtLnNlY29uZHMsbS5taWxsaXNlY29uZHMpKSksbn19LHRoaXMudG9UaW1lem9uZT1tLHRoaXMuZnJvbVRpbWV6b25lPW4sdGhpcy50aW1lem9uZVRvT2Zmc2V0PW8sdGhpcy5hZGREYXRlTWludXRlcz1wLHRoaXMuY29udmVydFRpbWV6b25lVG9Mb2NhbD1xfV0pLGFuZ3VsYXIubW9kdWxlKCJ1aS5ib290c3RyYXAuaXNDbGFzcyIsW10pLmRpcmVjdGl2ZSgidWliSXNDbGFzcyIsWyIkYW5pbWF0ZSIsZnVuY3Rpb24oYSl7dmFyIGI9L15ccyooW1xzXFNdKz8pXHMrb25ccysoW1xzXFNdKz8pXHMqJC8sYz0vXlxzKihbXHNcU10rPylccytmb3JccysoW1xzXFNdKz8pXHMqJC87cmV0dXJue3Jlc3RyaWN0OiJBIixjb21waWxlOmZ1bmN0aW9uKGQsZSl7ZnVuY3Rpb24gZihhLGIsYyl7aS5wdXNoKGEpLGoucHVzaCh7c2NvcGU6YSxlbGVtZW50OmJ9KSxvLmZvckVhY2goZnVuY3Rpb24oYixjKXtnKGIsYSl9KSxhLiRvbigiJGRlc3Ryb3kiLGgpfWZ1bmN0aW9uIGcoYixkKXt2YXIgZT1iLm1hdGNoKGMpLGY9ZC4kZXZhbChlWzFdKSxnPWVbMl0saD1rW2JdO2lmKCFoKXt2YXIgaT1mdW5jdGlvbihiKXt2YXIgYz1udWxsO2ouc29tZShmdW5jdGlvbihhKXt2YXIgZD1hLnNjb3BlLiRldmFsKG0pO3JldHVybiBkPT09Yj8oYz1hLCEwKTp2b2lkIDB9KSxoLmxhc3RBY3RpdmF0ZWQhPT1jJiYoaC5sYXN0QWN0aXZhdGVkJiZhLnJlbW92ZUNsYXNzKGgubGFzdEFjdGl2YXRlZC5lbGVtZW50LGYpLGMmJmEuYWRkQ2xhc3MoYy5lbGVtZW50LGYpLGgubGFzdEFjdGl2YXRlZD1jKX07a1tiXT1oPXtsYXN0QWN0aXZhdGVkOm51bGwsc2NvcGU6ZCx3YXRjaEZuOmksY29tcGFyZVdpdGhFeHA6Zyx3YXRjaGVyOmQuJHdhdGNoKGcsaSl9fWgud2F0Y2hGbihkLiRldmFsKGcpKX1mdW5jdGlvbiBoKGEpe3ZhciBiPWEudGFyZ2V0U2NvcGUsYz1pLmluZGV4T2YoYik7aWYoaS5zcGxpY2UoYywxKSxqLnNwbGljZShjLDEpLGkubGVuZ3RoKXt2YXIgZD1pWzBdO2FuZ3VsYXIuZm9yRWFjaChrLGZ1bmN0aW9uKGEpe2Euc2NvcGU9PT1iJiYoYS53YXRjaGVyPWQuJHdhdGNoKGEuY29tcGFyZVdpdGhFeHAsYS53YXRjaEZuKSxhLnNjb3BlPWQpfSl9ZWxzZSBrPXt9fXZhciBpPVtdLGo9W10saz17fSxsPWUudWliSXNDbGFzcy5tYXRjaChiKSxtPWxbMl0sbj1sWzFdLG89bi5zcGxpdCgiLCIpO3JldHVybiBmfX19XSksYW5ndWxhci5tb2R1bGUoInVpLmJvb3RzdHJhcC5kYXRlcGlja2VyIixbInVpLmJvb3RzdHJhcC5kYXRlcGFyc2VyIiwidWkuYm9vdHN0cmFwLmlzQ2xhc3MiXSkudmFsdWUoIiRkYXRlcGlja2VyU3VwcHJlc3NFcnJvciIsITEpLnZhbHVlKCIkZGF0ZXBpY2tlckxpdGVyYWxXYXJuaW5nIiwhMCkuY29uc3RhbnQoInVpYkRhdGVwaWNrZXJDb25maWciLHtkYXRlcGlja2VyTW9kZToiZGF5Iixmb3JtYXREYXk6ImRkIixmb3JtYXRNb250aDoiTU1NTSIsZm9ybWF0WWVhcjoieXl5eSIsZm9ybWF0RGF5SGVhZGVyOiJFRUUiLGZvcm1hdERheVRpdGxlOiJNTU1NIHl5eXkiLGZvcm1hdE1vbnRoVGl0bGU6Inl5eXkiLG1heERhdGU6bnVsbCxtYXhNb2RlOiJ5ZWFyIixtaW5EYXRlOm51bGwsbWluTW9kZToiZGF5Iixtb250aENvbHVtbnM6MyxuZ01vZGVsT3B0aW9uczp7fSxzaG9ydGN1dFByb3BhZ2F0aW9uOiExLHNob3dXZWVrczohMCx5ZWFyQ29sdW1uczo1LHllYXJSb3dzOjR9KS5jb250cm9sbGVyKCJVaWJEYXRlcGlja2VyQ29udHJvbGxlciIsWyIkc2NvcGUiLCIkZWxlbWVudCIsIiRhdHRycyIsIiRwYXJzZSIsIiRpbnRlcnBvbGF0ZSIsIiRsb2NhbGUiLCIkbG9nIiwiZGF0ZUZpbHRlciIsInVpYkRhdGVwaWNrZXJDb25maWciLCIkZGF0ZXBpY2tlckxpdGVyYWxXYXJuaW5nIiwiJGRhdGVwaWNrZXJTdXBwcmVzc0Vycm9yIiwidWliRGF0ZVBhcnNlciIsZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoLGksaixrLGwpe2Z1bmN0aW9uIG0oYil7YS5kYXRlcGlja2VyTW9kZT1iLGEuZGF0ZXBpY2tlck9wdGlvbnMuZGF0ZXBpY2tlck1vZGU9Yn1mdW5jdGlvbiBuKGIpe3ZhciBjO2lmKGFuZ3VsYXIudmVyc2lvbi5taW5vcjw2KWM9Yi4kb3B0aW9uc3x8YS5kYXRlcGlja2VyT3B0aW9ucy5uZ01vZGVsT3B0aW9uc3x8aS5uZ01vZGVsT3B0aW9uc3x8e30sYy5nZXRPcHRpb249ZnVuY3Rpb24oYSl7cmV0dXJuIGNbYV19O2Vsc2V7dmFyIGQ9Yi4kb3B0aW9ucy5nZXRPcHRpb24oInRpbWV6b25lIil8fChhLmRhdGVwaWNrZXJPcHRpb25zLm5nTW9kZWxPcHRpb25zP2EuZGF0ZXBpY2tlck9wdGlvbnMubmdNb2RlbE9wdGlvbnMudGltZXpvbmU6bnVsbCl8fChpLm5nTW9kZWxPcHRpb25zP2kubmdNb2RlbE9wdGlvbnMudGltZXpvbmU6bnVsbCk7Yz1iLiRvcHRpb25zLmNyZWF0ZUNoaWxkKGkubmdNb2RlbE9wdGlvbnMpLmNyZWF0ZUNoaWxkKGEuZGF0ZXBpY2tlck9wdGlvbnMubmdNb2RlbE9wdGlvbnMpLmNyZWF0ZUNoaWxkKGIuJG9wdGlvbnMpLmNyZWF0ZUNoaWxkKHt0aW1lem9uZTpkfSl9cmV0dXJuIGN9dmFyIG89dGhpcyxwPXskc2V0Vmlld1ZhbHVlOmFuZ3VsYXIubm9vcH0scT17fSxyPVtdO2IuYWRkQ2xhc3MoInVpYi1kYXRlcGlja2VyIiksYy4kc2V0KCJyb2xlIiwiYXBwbGljYXRpb24iKSxhLmRhdGVwaWNrZXJPcHRpb25zfHwoYS5kYXRlcGlja2VyT3B0aW9ucz17fSksdGhpcy5tb2Rlcz1bImRheSIsIm1vbnRoIiwieWVhciJdLFsiY3VzdG9tQ2xhc3MiLCJkYXRlRGlzYWJsZWQiLCJkYXRlcGlja2VyTW9kZSIsImZvcm1hdERheSIsImZvcm1hdERheUhlYWRlciIsImZvcm1hdERheVRpdGxlIiwiZm9ybWF0TW9udGgiLCJmb3JtYXRNb250aFRpdGxlIiwiZm9ybWF0WWVhciIsIm1heERhdGUiLCJtYXhNb2RlIiwibWluRGF0ZSIsIm1pbk1vZGUiLCJtb250aENvbHVtbnMiLCJzaG93V2Vla3MiLCJzaG9ydGN1dFByb3BhZ2F0aW9uIiwic3RhcnRpbmdEYXkiLCJ5ZWFyQ29sdW1ucyIsInllYXJSb3dzIl0uZm9yRWFjaChmdW5jdGlvbihiKXtzd2l0Y2goYil7Y2FzZSJjdXN0b21DbGFzcyI6Y2FzZSJkYXRlRGlzYWJsZWQiOmFbYl09YS5kYXRlcGlja2VyT3B0aW9uc1tiXXx8YW5ndWxhci5ub29wO2JyZWFrO2Nhc2UiZGF0ZXBpY2tlck1vZGUiOmEuZGF0ZXBpY2tlck1vZGU9YW5ndWxhci5pc0RlZmluZWQoYS5kYXRlcGlja2VyT3B0aW9ucy5kYXRlcGlja2VyTW9kZSk/YS5kYXRlcGlja2VyT3B0aW9ucy5kYXRlcGlja2VyTW9kZTppLmRhdGVwaWNrZXJNb2RlO2JyZWFrO2Nhc2UiZm9ybWF0RGF5IjpjYXNlImZvcm1hdERheUhlYWRlciI6Y2FzZSJmb3JtYXREYXlUaXRsZSI6Y2FzZSJmb3JtYXRNb250aCI6Y2FzZSJmb3JtYXRNb250aFRpdGxlIjpjYXNlImZvcm1hdFllYXIiOm9bYl09YW5ndWxhci5pc0RlZmluZWQoYS5kYXRlcGlja2VyT3B0aW9uc1tiXSk/ZShhLmRhdGVwaWNrZXJPcHRpb25zW2JdKShhLiRwYXJlbnQpOmlbYl07YnJlYWs7Y2FzZSJtb250aENvbHVtbnMiOmNhc2Uic2hvd1dlZWtzIjpjYXNlInNob3J0Y3V0UHJvcGFnYXRpb24iOmNhc2UieWVhckNvbHVtbnMiOmNhc2UieWVhclJvd3MiOm9bYl09YW5ndWxhci5pc0RlZmluZWQoYS5kYXRlcGlja2VyT3B0aW9uc1tiXSk/YS5kYXRlcGlja2VyT3B0aW9uc1tiXTppW2JdO2JyZWFrO2Nhc2Uic3RhcnRpbmdEYXkiOmFuZ3VsYXIuaXNEZWZpbmVkKGEuZGF0ZXBpY2tlck9wdGlvbnMuc3RhcnRpbmdEYXkpP28uc3RhcnRpbmdEYXk9YS5kYXRlcGlja2VyT3B0aW9ucy5zdGFydGluZ0RheTphbmd1bGFyLmlzTnVtYmVyKGkuc3RhcnRpbmdEYXkpP28uc3RhcnRpbmdEYXk9aS5zdGFydGluZ0RheTpvLnN0YXJ0aW5nRGF5PShmLkRBVEVUSU1FX0ZPUk1BVFMuRklSU1REQVlPRldFRUsrOCklNzticmVhaztjYXNlIm1heERhdGUiOmNhc2UibWluRGF0ZSI6YS4kd2F0Y2goImRhdGVwaWNrZXJPcHRpb25zLiIrYixmdW5jdGlvbihhKXthP2FuZ3VsYXIuaXNEYXRlKGEpP29bYl09bC5mcm9tVGltZXpvbmUobmV3IERhdGUoYSkscS5nZXRPcHRpb24oInRpbWV6b25lIikpOihqJiZnLndhcm4oIkxpdGVyYWwgZGF0ZSBzdXBwb3J0IGhhcyBiZWVuIGRlcHJlY2F0ZWQsIHBsZWFzZSBzd2l0Y2ggdG8gZGF0ZSBvYmplY3QgdXNhZ2UiKSxvW2JdPW5ldyBEYXRlKGgoYSwibWVkaXVtIikpKTpvW2JdPWlbYl0/bC5mcm9tVGltZXpvbmUobmV3IERhdGUoaVtiXSkscS5nZXRPcHRpb24oInRpbWV6b25lIikpOm51bGwsby5yZWZyZXNoVmlldygpfSk7YnJlYWs7Y2FzZSJtYXhNb2RlIjpjYXNlIm1pbk1vZGUiOmEuZGF0ZXBpY2tlck9wdGlvbnNbYl0/YS4kd2F0Y2goZnVuY3Rpb24oKXtyZXR1cm4gYS5kYXRlcGlja2VyT3B0aW9uc1tiXX0sZnVuY3Rpb24oYyl7b1tiXT1hW2JdPWFuZ3VsYXIuaXNEZWZpbmVkKGMpP2M6YS5kYXRlcGlja2VyT3B0aW9uc1tiXSwoIm1pbk1vZGUiPT09YiYmby5tb2Rlcy5pbmRleE9mKGEuZGF0ZXBpY2tlck9wdGlvbnMuZGF0ZXBpY2tlck1vZGUpPG8ubW9kZXMuaW5kZXhPZihvW2JdKXx8Im1heE1vZGUiPT09YiYmby5tb2Rlcy5pbmRleE9mKGEuZGF0ZXBpY2tlck9wdGlvbnMuZGF0ZXBpY2tlck1vZGUpPm8ubW9kZXMuaW5kZXhPZihvW2JdKSkmJihhLmRhdGVwaWNrZXJNb2RlPW9bYl0sYS5kYXRlcGlja2VyT3B0aW9ucy5kYXRlcGlja2VyTW9kZT1vW2JdKX0pOm9bYl09YVtiXT1pW2JdfHxudWxsfX0pLGEudW5pcXVlSWQ9ImRhdGVwaWNrZXItIithLiRpZCsiLSIrTWF0aC5mbG9vcigxZTQqTWF0aC5yYW5kb20oKSksYS5kaXNhYmxlZD1hbmd1bGFyLmlzRGVmaW5lZChjLmRpc2FibGVkKXx8ITEsYW5ndWxhci5pc0RlZmluZWQoYy5uZ0Rpc2FibGVkKSYmci5wdXNoKGEuJHBhcmVudC4kd2F0Y2goYy5uZ0Rpc2FibGVkLGZ1bmN0aW9uKGIpe2EuZGlzYWJsZWQ9YixvLnJlZnJlc2hWaWV3KCl9KSksYS5pc0FjdGl2ZT1mdW5jdGlvbihiKXtyZXR1cm4gMD09PW8uY29tcGFyZShiLmRhdGUsby5hY3RpdmVEYXRlKT8oYS5hY3RpdmVEYXRlSWQ9Yi51aWQsITApOiExfSx0aGlzLmluaXQ9ZnVuY3Rpb24oYil7cD1iLHE9bihwKSxhLmRhdGVwaWNrZXJPcHRpb25zLmluaXREYXRlPyhvLmFjdGl2ZURhdGU9bC5mcm9tVGltZXpvbmUoYS5kYXRlcGlja2VyT3B0aW9ucy5pbml0RGF0ZSxxLmdldE9wdGlvbigidGltZXpvbmUiKSl8fG5ldyBEYXRlLGEuJHdhdGNoKCJkYXRlcGlja2VyT3B0aW9ucy5pbml0RGF0ZSIsZnVuY3Rpb24oYSl7YSYmKHAuJGlzRW1wdHkocC4kbW9kZWxWYWx1ZSl8fHAuJGludmFsaWQpJiYoby5hY3RpdmVEYXRlPWwuZnJvbVRpbWV6b25lKGEscS5nZXRPcHRpb24oInRpbWV6b25lIikpLG8ucmVmcmVzaFZpZXcoKSl9KSk6by5hY3RpdmVEYXRlPW5ldyBEYXRlO3ZhciBjPXAuJG1vZGVsVmFsdWU/bmV3IERhdGUocC4kbW9kZWxWYWx1ZSk6bmV3IERhdGU7dGhpcy5hY3RpdmVEYXRlPWlzTmFOKGMpP2wuZnJvbVRpbWV6b25lKG5ldyBEYXRlLHEuZ2V0T3B0aW9uKCJ0aW1lem9uZSIpKTpsLmZyb21UaW1lem9uZShjLHEuZ2V0T3B0aW9uKCJ0aW1lem9uZSIpKSxwLiRyZW5kZXI9ZnVuY3Rpb24oKXtvLnJlbmRlcigpfX0sdGhpcy5yZW5kZXI9ZnVuY3Rpb24oKXtpZihwLiR2aWV3VmFsdWUpe3ZhciBhPW5ldyBEYXRlKHAuJHZpZXdWYWx1ZSksYj0haXNOYU4oYSk7Yj90aGlzLmFjdGl2ZURhdGU9bC5mcm9tVGltZXpvbmUoYSxxLmdldE9wdGlvbigidGltZXpvbmUiKSk6a3x8Zy5lcnJvcignRGF0ZXBpY2tlciBkaXJlY3RpdmU6ICJuZy1tb2RlbCIgdmFsdWUgbXVzdCBiZSBhIERhdGUgb2JqZWN0Jyl9dGhpcy5yZWZyZXNoVmlldygpfSx0aGlzLnJlZnJlc2hWaWV3PWZ1bmN0aW9uKCl7aWYodGhpcy5lbGVtZW50KXthLnNlbGVjdGVkRHQ9bnVsbCx0aGlzLl9yZWZyZXNoVmlldygpLGEuYWN0aXZlRHQmJihhLmFjdGl2ZURhdGVJZD1hLmFjdGl2ZUR0LnVpZCk7dmFyIGI9cC4kdmlld1ZhbHVlP25ldyBEYXRlKHAuJHZpZXdWYWx1ZSk6bnVsbDtiPWwuZnJvbVRpbWV6b25lKGIscS5nZXRPcHRpb24oInRpbWV6b25lIikpLHAuJHNldFZhbGlkaXR5KCJkYXRlRGlzYWJsZWQiLCFifHx0aGlzLmVsZW1lbnQmJiF0aGlzLmlzRGlzYWJsZWQoYikpfX0sdGhpcy5jcmVhdGVEYXRlT2JqZWN0PWZ1bmN0aW9uKGIsYyl7dmFyIGQ9cC4kdmlld1ZhbHVlP25ldyBEYXRlKHAuJHZpZXdWYWx1ZSk6bnVsbDtkPWwuZnJvbVRpbWV6b25lKGQscS5nZXRPcHRpb24oInRpbWV6b25lIikpO3ZhciBlPW5ldyBEYXRlO2U9bC5mcm9tVGltZXpvbmUoZSxxLmdldE9wdGlvbigidGltZXpvbmUiKSk7dmFyIGY9dGhpcy5jb21wYXJlKGIsZSksZz17ZGF0ZTpiLGxhYmVsOmwuZmlsdGVyKGIsYyksc2VsZWN0ZWQ6ZCYmMD09PXRoaXMuY29tcGFyZShiLGQpLGRpc2FibGVkOnRoaXMuaXNEaXNhYmxlZChiKSxwYXN0OjA+ZixjdXJyZW50OjA9PT1mLGZ1dHVyZTpmPjAsY3VzdG9tQ2xhc3M6dGhpcy5jdXN0b21DbGFzcyhiKXx8bnVsbH07cmV0dXJuIGQmJjA9PT10aGlzLmNvbXBhcmUoYixkKSYmKGEuc2VsZWN0ZWREdD1nKSxvLmFjdGl2ZURhdGUmJjA9PT10aGlzLmNvbXBhcmUoZy5kYXRlLG8uYWN0aXZlRGF0ZSkmJihhLmFjdGl2ZUR0PWcpLGd9LHRoaXMuaXNEaXNhYmxlZD1mdW5jdGlvbihiKXtyZXR1cm4gYS5kaXNhYmxlZHx8dGhpcy5taW5EYXRlJiZ0aGlzLmNvbXBhcmUoYix0aGlzLm1pbkRhdGUpPDB8fHRoaXMubWF4RGF0ZSYmdGhpcy5jb21wYXJlKGIsdGhpcy5tYXhEYXRlKT4wfHxhLmRhdGVEaXNhYmxlZCYmYS5kYXRlRGlzYWJsZWQoe2RhdGU6Yixtb2RlOmEuZGF0ZXBpY2tlck1vZGV9KX0sdGhpcy5jdXN0b21DbGFzcz1mdW5jdGlvbihiKXtyZXR1cm4gYS5jdXN0b21DbGFzcyh7ZGF0ZTpiLG1vZGU6YS5kYXRlcGlja2VyTW9kZX0pfSx0aGlzLnNwbGl0PWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPVtdO2EubGVuZ3RoPjA7KWMucHVzaChhLnNwbGljZSgwLGIpKTtyZXR1cm4gY30sYS5zZWxlY3Q9ZnVuY3Rpb24oYil7aWYoYS5kYXRlcGlja2VyTW9kZT09PW8ubWluTW9kZSl7dmFyIGM9cC4kdmlld1ZhbHVlP2wuZnJvbVRpbWV6b25lKG5ldyBEYXRlKHAuJHZpZXdWYWx1ZSkscS5nZXRPcHRpb24oInRpbWV6b25lIikpOm5ldyBEYXRlKDAsMCwwLDAsMCwwLDApO2Muc2V0RnVsbFllYXIoYi5nZXRGdWxsWWVhcigpLGIuZ2V0TW9udGgoKSxiLmdldERhdGUoKSksYz1sLnRvVGltZXpvbmUoYyxxLmdldE9wdGlvbigidGltZXpvbmUiKSkscC4kc2V0Vmlld1ZhbHVlKGMpLHAuJHJlbmRlcigpfWVsc2Ugby5hY3RpdmVEYXRlPWIsbShvLm1vZGVzW28ubW9kZXMuaW5kZXhPZihhLmRhdGVwaWNrZXJNb2RlKS0xXSksYS4kZW1pdCgidWliOmRhdGVwaWNrZXIubW9kZSIpO2EuJGJyb2FkY2FzdCgidWliOmRhdGVwaWNrZXIuZm9jdXMiKX0sYS5tb3ZlPWZ1bmN0aW9uKGEpe3ZhciBiPW8uYWN0aXZlRGF0ZS5nZXRGdWxsWWVhcigpK2EqKG8uc3RlcC55ZWFyc3x8MCksYz1vLmFjdGl2ZURhdGUuZ2V0TW9udGgoKSthKihvLnN0ZXAubW9udGhzfHwwKTtvLmFjdGl2ZURhdGUuc2V0RnVsbFllYXIoYixjLDEpLG8ucmVmcmVzaFZpZXcoKX0sYS50b2dnbGVNb2RlPWZ1bmN0aW9uKGIpe2I9Ynx8MSxhLmRhdGVwaWNrZXJNb2RlPT09by5tYXhNb2RlJiYxPT09Ynx8YS5kYXRlcGlja2VyTW9kZT09PW8ubWluTW9kZSYmLTE9PT1ifHwobShvLm1vZGVzW28ubW9kZXMuaW5kZXhPZihhLmRhdGVwaWNrZXJNb2RlKStiXSksYS4kZW1pdCgidWliOmRhdGVwaWNrZXIubW9kZSIpKX0sYS5rZXlzPXsxMzoiZW50ZXIiLDMyOiJzcGFjZSIsMzM6InBhZ2V1cCIsMzQ6InBhZ2Vkb3duIiwzNToiZW5kIiwzNjoiaG9tZSIsMzc6ImxlZnQiLDM4OiJ1cCIsMzk6InJpZ2h0Iiw0MDoiZG93biJ9O3ZhciBzPWZ1bmN0aW9uKCl7by5lbGVtZW50WzBdLmZvY3VzKCl9O2EuJG9uKCJ1aWI6ZGF0ZXBpY2tlci5mb2N1cyIscyksYS5rZXlkb3duPWZ1bmN0aW9uKGIpe3ZhciBjPWEua2V5c1tiLndoaWNoXTtpZihjJiYhYi5zaGlmdEtleSYmIWIuYWx0S2V5JiYhYS5kaXNhYmxlZClpZihiLnByZXZlbnREZWZhdWx0KCksby5zaG9ydGN1dFByb3BhZ2F0aW9ufHxiLnN0b3BQcm9wYWdhdGlvbigpLCJlbnRlciI9PT1jfHwic3BhY2UiPT09Yyl7aWYoby5pc0Rpc2FibGVkKG8uYWN0aXZlRGF0ZSkpcmV0dXJuO2Euc2VsZWN0KG8uYWN0aXZlRGF0ZSl9ZWxzZSFiLmN0cmxLZXl8fCJ1cCIhPT1jJiYiZG93biIhPT1jPyhvLmhhbmRsZUtleURvd24oYyxiKSxvLnJlZnJlc2hWaWV3KCkpOmEudG9nZ2xlTW9kZSgidXAiPT09Yz8xOi0xKX0sYi5vbigia2V5ZG93biIsZnVuY3Rpb24oYil7YS4kYXBwbHkoZnVuY3Rpb24oKXthLmtleWRvd24oYil9KX0pLGEuJG9uKCIkZGVzdHJveSIsZnVuY3Rpb24oKXtmb3IoO3IubGVuZ3RoOylyLnNoaWZ0KCkoKX0pfV0pLmNvbnRyb2xsZXIoIlVpYkRheXBpY2tlckNvbnRyb2xsZXIiLFsiJHNjb3BlIiwiJGVsZW1lbnQiLCJkYXRlRmlsdGVyIixmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhLGIpe3JldHVybiAxIT09Ynx8YSU0IT09MHx8YSUxMDA9PT0wJiZhJTQwMCE9PTA/ZltiXToyOX1mdW5jdGlvbiBlKGEpe3ZhciBiPW5ldyBEYXRlKGEpO2Iuc2V0RGF0ZShiLmdldERhdGUoKSs0LShiLmdldERheSgpfHw3KSk7dmFyIGM9Yi5nZXRUaW1lKCk7cmV0dXJuIGIuc2V0TW9udGgoMCksYi5zZXREYXRlKDEpLE1hdGguZmxvb3IoTWF0aC5yb3VuZCgoYy1iKS84NjRlNSkvNykrMX12YXIgZj1bMzEsMjgsMzEsMzAsMzEsMzAsMzEsMzEsMzAsMzEsMzAsMzFdO3RoaXMuc3RlcD17bW9udGhzOjF9LHRoaXMuZWxlbWVudD1iLHRoaXMuaW5pdD1mdW5jdGlvbihiKXthbmd1bGFyLmV4dGVuZChiLHRoaXMpLGEuc2hvd1dlZWtzPWIuc2hvd1dlZWtzLGIucmVmcmVzaFZpZXcoKX0sdGhpcy5nZXREYXRlcz1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPW5ldyBBcnJheShiKSxlPW5ldyBEYXRlKGEpLGY9MDtiPmY7KWM9bmV3IERhdGUoZSksZFtmKytdPWMsZS5zZXREYXRlKGUuZ2V0RGF0ZSgpKzEpO3JldHVybiBkfSx0aGlzLl9yZWZyZXNoVmlldz1mdW5jdGlvbigpe3ZhciBiPXRoaXMuYWN0aXZlRGF0ZS5nZXRGdWxsWWVhcigpLGQ9dGhpcy5hY3RpdmVEYXRlLmdldE1vbnRoKCksZj1uZXcgRGF0ZSh0aGlzLmFjdGl2ZURhdGUpO2Yuc2V0RnVsbFllYXIoYixkLDEpO3ZhciBnPXRoaXMuc3RhcnRpbmdEYXktZi5nZXREYXkoKSxoPWc+MD83LWc6LWcsaT1uZXcgRGF0ZShmKTtoPjAmJmkuc2V0RGF0ZSgtaCsxKTtmb3IodmFyIGo9dGhpcy5nZXREYXRlcyhpLDQyKSxrPTA7NDI+aztrKyspaltrXT1hbmd1bGFyLmV4dGVuZCh0aGlzLmNyZWF0ZURhdGVPYmplY3QoaltrXSx0aGlzLmZvcm1hdERheSkse3NlY29uZGFyeTpqW2tdLmdldE1vbnRoKCkhPT1kLHVpZDphLnVuaXF1ZUlkKyItIitrfSk7YS5sYWJlbHM9bmV3IEFycmF5KDcpO2Zvcih2YXIgbD0wOzc+bDtsKyspYS5sYWJlbHNbbF09e2FiYnI6YyhqW2xdLmRhdGUsdGhpcy5mb3JtYXREYXlIZWFkZXIpLGZ1bGw6YyhqW2xdLmRhdGUsIkVFRUUiKX07aWYoYS50aXRsZT1jKHRoaXMuYWN0aXZlRGF0ZSx0aGlzLmZvcm1hdERheVRpdGxlKSxhLnJvd3M9dGhpcy5zcGxpdChqLDcpLGEuc2hvd1dlZWtzKXthLndlZWtOdW1iZXJzPVtdO2Zvcih2YXIgbT0oMTEtdGhpcy5zdGFydGluZ0RheSklNyxuPWEucm93cy5sZW5ndGgsbz0wO24+bztvKyspYS53ZWVrTnVtYmVycy5wdXNoKGUoYS5yb3dzW29dW21dLmRhdGUpKX19LHRoaXMuY29tcGFyZT1mdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBEYXRlKGEuZ2V0RnVsbFllYXIoKSxhLmdldE1vbnRoKCksYS5nZXREYXRlKCkpLGQ9bmV3IERhdGUoYi5nZXRGdWxsWWVhcigpLGIuZ2V0TW9udGgoKSxiLmdldERhdGUoKSk7cmV0dXJuIGMuc2V0RnVsbFllYXIoYS5nZXRGdWxsWWVhcigpKSxkLnNldEZ1bGxZZWFyKGIuZ2V0RnVsbFllYXIoKSksYy1kfSx0aGlzLmhhbmRsZUtleURvd249ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmFjdGl2ZURhdGUuZ2V0RGF0ZSgpO2lmKCJsZWZ0Ij09PWEpYy09MTtlbHNlIGlmKCJ1cCI9PT1hKWMtPTc7ZWxzZSBpZigicmlnaHQiPT09YSljKz0xO2Vsc2UgaWYoImRvd24iPT09YSljKz03O2Vsc2UgaWYoInBhZ2V1cCI9PT1hfHwicGFnZWRvd24iPT09YSl7dmFyIGU9dGhpcy5hY3RpdmVEYXRlLmdldE1vbnRoKCkrKCJwYWdldXAiPT09YT8tMToxKTt0aGlzLmFjdGl2ZURhdGUuc2V0TW9udGgoZSwxKSxjPU1hdGgubWluKGQodGhpcy5hY3RpdmVEYXRlLmdldEZ1bGxZZWFyKCksdGhpcy5hY3RpdmVEYXRlLmdldE1vbnRoKCkpLGMpfWVsc2UiaG9tZSI9PT1hP2M9MToiZW5kIj09PWEmJihjPWQodGhpcy5hY3RpdmVEYXRlLmdldEZ1bGxZZWFyKCksdGhpcy5hY3RpdmVEYXRlLmdldE1vbnRoKCkpKTt0aGlzLmFjdGl2ZURhdGUuc2V0RGF0ZShjKX19XSkuY29udHJvbGxlcigiVWliTW9udGhwaWNrZXJDb250cm9sbGVyIixbIiRzY29wZSIsIiRlbGVtZW50IiwiZGF0ZUZpbHRlciIsZnVuY3Rpb24oYSxiLGMpe3RoaXMuc3RlcD17eWVhcnM6MX0sdGhpcy5lbGVtZW50PWIsdGhpcy5pbml0PWZ1bmN0aW9uKGEpe2FuZ3VsYXIuZXh0ZW5kKGEsdGhpcyksYS5yZWZyZXNoVmlldygpfSx0aGlzLl9yZWZyZXNoVmlldz1mdW5jdGlvbigpe2Zvcih2YXIgYixkPW5ldyBBcnJheSgxMiksZT10aGlzLmFjdGl2ZURhdGUuZ2V0RnVsbFllYXIoKSxmPTA7MTI+ZjtmKyspYj1uZXcgRGF0ZSh0aGlzLmFjdGl2ZURhdGUpLGIuc2V0RnVsbFllYXIoZSxmLDEpLGRbZl09YW5ndWxhci5leHRlbmQodGhpcy5jcmVhdGVEYXRlT2JqZWN0KGIsdGhpcy5mb3JtYXRNb250aCkse3VpZDphLnVuaXF1ZUlkKyItIitmfSk7YS50aXRsZT1jKHRoaXMuYWN0aXZlRGF0ZSx0aGlzLmZvcm1hdE1vbnRoVGl0bGUpLGEucm93cz10aGlzLnNwbGl0KGQsdGhpcy5tb250aENvbHVtbnMpLGEueWVhckhlYWRlckNvbHNwYW49dGhpcy5tb250aENvbHVtbnM+Mz90aGlzLm1vbnRoQ29sdW1ucy0yOjF9LHRoaXMuY29tcGFyZT1mdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBEYXRlKGEuZ2V0RnVsbFllYXIoKSxhLmdldE1vbnRoKCkpLGQ9bmV3IERhdGUoYi5nZXRGdWxsWWVhcigpLGIuZ2V0TW9udGgoKSk7cmV0dXJuIGMuc2V0RnVsbFllYXIoYS5nZXRGdWxsWWVhcigpKSxkLnNldEZ1bGxZZWFyKGIuZ2V0RnVsbFllYXIoKSksYy1kfSx0aGlzLmhhbmRsZUtleURvd249ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmFjdGl2ZURhdGUuZ2V0TW9udGgoKTtpZigibGVmdCI9PT1hKWMtPTE7ZWxzZSBpZigidXAiPT09YSljLT10aGlzLm1vbnRoQ29sdW1ucztlbHNlIGlmKCJyaWdodCI9PT1hKWMrPTE7ZWxzZSBpZigiZG93biI9PT1hKWMrPXRoaXMubW9udGhDb2x1bW5zO2Vsc2UgaWYoInBhZ2V1cCI9PT1hfHwicGFnZWRvd24iPT09YSl7dmFyIGQ9dGhpcy5hY3RpdmVEYXRlLmdldEZ1bGxZZWFyKCkrKCJwYWdldXAiPT09YT8tMToxKTt0aGlzLmFjdGl2ZURhdGUuc2V0RnVsbFllYXIoZCl9ZWxzZSJob21lIj09PWE/Yz0wOiJlbmQiPT09YSYmKGM9MTEpO3RoaXMuYWN0aXZlRGF0ZS5zZXRNb250aChjKX19XSkuY29udHJvbGxlcigiVWliWWVhcnBpY2tlckNvbnRyb2xsZXIiLFsiJHNjb3BlIiwiJGVsZW1lbnQiLCJkYXRlRmlsdGVyIixmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhKXtyZXR1cm4gcGFyc2VJbnQoKGEtMSkvZiwxMCkqZisxfXZhciBlLGY7dGhpcy5lbGVtZW50PWIsdGhpcy55ZWFycGlja2VySW5pdD1mdW5jdGlvbigpe2U9dGhpcy55ZWFyQ29sdW1ucyxmPXRoaXMueWVhclJvd3MqZSx0aGlzLnN0ZXA9e3llYXJzOmZ9fSx0aGlzLl9yZWZyZXNoVmlldz1mdW5jdGlvbigpe2Zvcih2YXIgYixjPW5ldyBBcnJheShmKSxnPTAsaD1kKHRoaXMuYWN0aXZlRGF0ZS5nZXRGdWxsWWVhcigpKTtmPmc7ZysrKWI9bmV3IERhdGUodGhpcy5hY3RpdmVEYXRlKSxiLnNldEZ1bGxZZWFyKGgrZywwLDEpLGNbZ109YW5ndWxhci5leHRlbmQodGhpcy5jcmVhdGVEYXRlT2JqZWN0KGIsdGhpcy5mb3JtYXRZZWFyKSx7dWlkOmEudW5pcXVlSWQrIi0iK2d9KTthLnRpdGxlPVtjWzBdLmxhYmVsLGNbZi0xXS5sYWJlbF0uam9pbigiIC0gIiksYS5yb3dzPXRoaXMuc3BsaXQoYyxlKSxhLmNvbHVtbnM9ZX0sdGhpcy5jb21wYXJlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuZ2V0RnVsbFllYXIoKS1iLmdldEZ1bGxZZWFyKCl9LHRoaXMuaGFuZGxlS2V5RG93bj1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuYWN0aXZlRGF0ZS5nZXRGdWxsWWVhcigpOyJsZWZ0Ij09PWE/Yy09MToidXAiPT09YT9jLT1lOiJyaWdodCI9PT1hP2MrPTE6ImRvd24iPT09YT9jKz1lOiJwYWdldXAiPT09YXx8InBhZ2Vkb3duIj09PWE/Yys9KCJwYWdldXAiPT09YT8tMToxKSpmOiJob21lIj09PWE/Yz1kKHRoaXMuYWN0aXZlRGF0ZS5nZXRGdWxsWWVhcigpKToiZW5kIj09PWEmJihjPWQodGhpcy5hY3RpdmVEYXRlLmdldEZ1bGxZZWFyKCkpK2YtMSksdGhpcy5hY3RpdmVEYXRlLnNldEZ1bGxZZWFyKGMpfX1dKS5kaXJlY3RpdmUoInVpYkRhdGVwaWNrZXIiLGZ1bmN0aW9uKCl7cmV0dXJue3RlbXBsYXRlVXJsOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudGVtcGxhdGVVcmx8fCJ1aWIvdGVtcGxhdGUvZGF0ZXBpY2tlci9kYXRlcGlja2VyLmh0bWwifSxzY29wZTp7ZGF0ZXBpY2tlck9wdGlvbnM6Ij0/In0scmVxdWlyZTpbInVpYkRhdGVwaWNrZXIiLCJebmdNb2RlbCJdLHJlc3RyaWN0OiJBIixjb250cm9sbGVyOiJVaWJEYXRlcGlja2VyQ29udHJvbGxlciIsY29udHJvbGxlckFzOiJkYXRlcGlja2VyIixsaW5rOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWRbMF0sZj1kWzFdO2UuaW5pdChmKX19fSkuZGlyZWN0aXZlKCJ1aWJEYXlwaWNrZXIiLGZ1bmN0aW9uKCl7cmV0dXJue3RlbXBsYXRlVXJsOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudGVtcGxhdGVVcmx8fCJ1aWIvdGVtcGxhdGUvZGF0ZXBpY2tlci9kYXkuaHRtbCJ9LAogICAgcmVxdWlyZTpbIl51aWJEYXRlcGlja2VyIiwidWliRGF5cGlja2VyIl0scmVzdHJpY3Q6IkEiLGNvbnRyb2xsZXI6IlVpYkRheXBpY2tlckNvbnRyb2xsZXIiLGxpbms6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9ZFswXSxmPWRbMV07Zi5pbml0KGUpfX19KS5kaXJlY3RpdmUoInVpYk1vbnRocGlja2VyIixmdW5jdGlvbigpe3JldHVybnt0ZW1wbGF0ZVVybDpmdW5jdGlvbihhLGIpe3JldHVybiBiLnRlbXBsYXRlVXJsfHwidWliL3RlbXBsYXRlL2RhdGVwaWNrZXIvbW9udGguaHRtbCJ9LHJlcXVpcmU6WyJedWliRGF0ZXBpY2tlciIsInVpYk1vbnRocGlja2VyIl0scmVzdHJpY3Q6IkEiLGNvbnRyb2xsZXI6IlVpYk1vbnRocGlja2VyQ29udHJvbGxlciIsbGluazpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1kWzBdLGY9ZFsxXTtmLmluaXQoZSl9fX0pLmRpcmVjdGl2ZSgidWliWWVhcnBpY2tlciIsZnVuY3Rpb24oKXtyZXR1cm57dGVtcGxhdGVVcmw6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50ZW1wbGF0ZVVybHx8InVpYi90ZW1wbGF0ZS9kYXRlcGlja2VyL3llYXIuaHRtbCJ9LHJlcXVpcmU6WyJedWliRGF0ZXBpY2tlciIsInVpYlllYXJwaWNrZXIiXSxyZXN0cmljdDoiQSIsY29udHJvbGxlcjoiVWliWWVhcnBpY2tlckNvbnRyb2xsZXIiLGxpbms6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9ZFswXTthbmd1bGFyLmV4dGVuZChlLGRbMV0pLGUueWVhcnBpY2tlckluaXQoKSxlLnJlZnJlc2hWaWV3KCl9fX0pLGFuZ3VsYXIubW9kdWxlKCJ1aS5ib290c3RyYXAucG9zaXRpb24iLFtdKS5mYWN0b3J5KCIkdWliUG9zaXRpb24iLFsiJGRvY3VtZW50IiwiJHdpbmRvdyIsZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9e25vcm1hbDovKGF1dG98c2Nyb2xsKS8saGlkZGVuOi8oYXV0b3xzY3JvbGx8aGlkZGVuKS99LGY9e2F1dG86L1xzP2F1dG8/XHM/L2kscHJpbWFyeTovXih0b3B8Ym90dG9tfGxlZnR8cmlnaHQpJC8sc2Vjb25kYXJ5Oi9eKHRvcHxib3R0b218bGVmdHxyaWdodHxjZW50ZXIpJC8sdmVydGljYWw6L14odG9wfGJvdHRvbSkkL30sZz0vKEhUTUx8Qk9EWSkvO3JldHVybntnZXRSYXdOb2RlOmZ1bmN0aW9uKGEpe3JldHVybiBhLm5vZGVOYW1lP2E6YVswXXx8YX0scGFyc2VTdHlsZTpmdW5jdGlvbihhKXtyZXR1cm4gYT1wYXJzZUZsb2F0KGEpLGlzRmluaXRlKGEpP2E6MH0sb2Zmc2V0UGFyZW50OmZ1bmN0aW9uKGMpe2Z1bmN0aW9uIGQoYSl7cmV0dXJuInN0YXRpYyI9PT0oYi5nZXRDb21wdXRlZFN0eWxlKGEpLnBvc2l0aW9ufHwic3RhdGljIil9Yz10aGlzLmdldFJhd05vZGUoYyk7Zm9yKHZhciBlPWMub2Zmc2V0UGFyZW50fHxhWzBdLmRvY3VtZW50RWxlbWVudDtlJiZlIT09YVswXS5kb2N1bWVudEVsZW1lbnQmJmQoZSk7KWU9ZS5vZmZzZXRQYXJlbnQ7cmV0dXJuIGV8fGFbMF0uZG9jdW1lbnRFbGVtZW50fSxzY3JvbGxiYXJXaWR0aDpmdW5jdGlvbihlKXtpZihlKXtpZihhbmd1bGFyLmlzVW5kZWZpbmVkKGQpKXt2YXIgZj1hLmZpbmQoImJvZHkiKTtmLmFkZENsYXNzKCJ1aWItcG9zaXRpb24tYm9keS1zY3JvbGxiYXItbWVhc3VyZSIpLGQ9Yi5pbm5lcldpZHRoLWZbMF0uY2xpZW50V2lkdGgsZD1pc0Zpbml0ZShkKT9kOjAsZi5yZW1vdmVDbGFzcygidWliLXBvc2l0aW9uLWJvZHktc2Nyb2xsYmFyLW1lYXN1cmUiKX1yZXR1cm4gZH1pZihhbmd1bGFyLmlzVW5kZWZpbmVkKGMpKXt2YXIgZz1hbmd1bGFyLmVsZW1lbnQoJzxkaXYgY2xhc3M9InVpYi1wb3NpdGlvbi1zY3JvbGxiYXItbWVhc3VyZSI+PC9kaXY+Jyk7YS5maW5kKCJib2R5IikuYXBwZW5kKGcpLGM9Z1swXS5vZmZzZXRXaWR0aC1nWzBdLmNsaWVudFdpZHRoLGM9aXNGaW5pdGUoYyk/YzowLGcucmVtb3ZlKCl9cmV0dXJuIGN9LHNjcm9sbGJhclBhZGRpbmc6ZnVuY3Rpb24oYSl7YT10aGlzLmdldFJhd05vZGUoYSk7dmFyIGM9Yi5nZXRDb21wdXRlZFN0eWxlKGEpLGQ9dGhpcy5wYXJzZVN0eWxlKGMucGFkZGluZ1JpZ2h0KSxlPXRoaXMucGFyc2VTdHlsZShjLnBhZGRpbmdCb3R0b20pLGY9dGhpcy5zY3JvbGxQYXJlbnQoYSwhMSwhMCksaD10aGlzLnNjcm9sbGJhcldpZHRoKGcudGVzdChmLnRhZ05hbWUpKTtyZXR1cm57c2Nyb2xsYmFyV2lkdGg6aCx3aWR0aE92ZXJmbG93OmYuc2Nyb2xsV2lkdGg+Zi5jbGllbnRXaWR0aCxyaWdodDpkK2gsb3JpZ2luYWxSaWdodDpkLGhlaWdodE92ZXJmbG93OmYuc2Nyb2xsSGVpZ2h0PmYuY2xpZW50SGVpZ2h0LGJvdHRvbTplK2gsb3JpZ2luYWxCb3R0b206ZX19LGlzU2Nyb2xsYWJsZTpmdW5jdGlvbihhLGMpe2E9dGhpcy5nZXRSYXdOb2RlKGEpO3ZhciBkPWM/ZS5oaWRkZW46ZS5ub3JtYWwsZj1iLmdldENvbXB1dGVkU3R5bGUoYSk7cmV0dXJuIGQudGVzdChmLm92ZXJmbG93K2Yub3ZlcmZsb3dZK2Yub3ZlcmZsb3dYKX0sc2Nyb2xsUGFyZW50OmZ1bmN0aW9uKGMsZCxmKXtjPXRoaXMuZ2V0UmF3Tm9kZShjKTt2YXIgZz1kP2UuaGlkZGVuOmUubm9ybWFsLGg9YVswXS5kb2N1bWVudEVsZW1lbnQsaT1iLmdldENvbXB1dGVkU3R5bGUoYyk7aWYoZiYmZy50ZXN0KGkub3ZlcmZsb3craS5vdmVyZmxvd1kraS5vdmVyZmxvd1gpKXJldHVybiBjO3ZhciBqPSJhYnNvbHV0ZSI9PT1pLnBvc2l0aW9uLGs9Yy5wYXJlbnRFbGVtZW50fHxoO2lmKGs9PT1ofHwiZml4ZWQiPT09aS5wb3NpdGlvbilyZXR1cm4gaDtmb3IoO2sucGFyZW50RWxlbWVudCYmayE9PWg7KXt2YXIgbD1iLmdldENvbXB1dGVkU3R5bGUoayk7aWYoaiYmInN0YXRpYyIhPT1sLnBvc2l0aW9uJiYoaj0hMSksIWomJmcudGVzdChsLm92ZXJmbG93K2wub3ZlcmZsb3dZK2wub3ZlcmZsb3dYKSlicmVhaztrPWsucGFyZW50RWxlbWVudH1yZXR1cm4ga30scG9zaXRpb246ZnVuY3Rpb24oYyxkKXtjPXRoaXMuZ2V0UmF3Tm9kZShjKTt2YXIgZT10aGlzLm9mZnNldChjKTtpZihkKXt2YXIgZj1iLmdldENvbXB1dGVkU3R5bGUoYyk7ZS50b3AtPXRoaXMucGFyc2VTdHlsZShmLm1hcmdpblRvcCksZS5sZWZ0LT10aGlzLnBhcnNlU3R5bGUoZi5tYXJnaW5MZWZ0KX12YXIgZz10aGlzLm9mZnNldFBhcmVudChjKSxoPXt0b3A6MCxsZWZ0OjB9O3JldHVybiBnIT09YVswXS5kb2N1bWVudEVsZW1lbnQmJihoPXRoaXMub2Zmc2V0KGcpLGgudG9wKz1nLmNsaWVudFRvcC1nLnNjcm9sbFRvcCxoLmxlZnQrPWcuY2xpZW50TGVmdC1nLnNjcm9sbExlZnQpLHt3aWR0aDpNYXRoLnJvdW5kKGFuZ3VsYXIuaXNOdW1iZXIoZS53aWR0aCk/ZS53aWR0aDpjLm9mZnNldFdpZHRoKSxoZWlnaHQ6TWF0aC5yb3VuZChhbmd1bGFyLmlzTnVtYmVyKGUuaGVpZ2h0KT9lLmhlaWdodDpjLm9mZnNldEhlaWdodCksdG9wOk1hdGgucm91bmQoZS50b3AtaC50b3ApLGxlZnQ6TWF0aC5yb3VuZChlLmxlZnQtaC5sZWZ0KX19LG9mZnNldDpmdW5jdGlvbihjKXtjPXRoaXMuZ2V0UmF3Tm9kZShjKTt2YXIgZD1jLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3JldHVybnt3aWR0aDpNYXRoLnJvdW5kKGFuZ3VsYXIuaXNOdW1iZXIoZC53aWR0aCk/ZC53aWR0aDpjLm9mZnNldFdpZHRoKSxoZWlnaHQ6TWF0aC5yb3VuZChhbmd1bGFyLmlzTnVtYmVyKGQuaGVpZ2h0KT9kLmhlaWdodDpjLm9mZnNldEhlaWdodCksdG9wOk1hdGgucm91bmQoZC50b3ArKGIucGFnZVlPZmZzZXR8fGFbMF0uZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCkpLGxlZnQ6TWF0aC5yb3VuZChkLmxlZnQrKGIucGFnZVhPZmZzZXR8fGFbMF0uZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQpKX19LHZpZXdwb3J0T2Zmc2V0OmZ1bmN0aW9uKGMsZCxlKXtjPXRoaXMuZ2V0UmF3Tm9kZShjKSxlPWUhPT0hMTt2YXIgZj1jLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGc9e3RvcDowLGxlZnQ6MCxib3R0b206MCxyaWdodDowfSxoPWQ/YVswXS5kb2N1bWVudEVsZW1lbnQ6dGhpcy5zY3JvbGxQYXJlbnQoYyksaT1oLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO2lmKGcudG9wPWkudG9wK2guY2xpZW50VG9wLGcubGVmdD1pLmxlZnQraC5jbGllbnRMZWZ0LGg9PT1hWzBdLmRvY3VtZW50RWxlbWVudCYmKGcudG9wKz1iLnBhZ2VZT2Zmc2V0LGcubGVmdCs9Yi5wYWdlWE9mZnNldCksZy5ib3R0b209Zy50b3AraC5jbGllbnRIZWlnaHQsZy5yaWdodD1nLmxlZnQraC5jbGllbnRXaWR0aCxlKXt2YXIgaj1iLmdldENvbXB1dGVkU3R5bGUoaCk7Zy50b3ArPXRoaXMucGFyc2VTdHlsZShqLnBhZGRpbmdUb3ApLGcuYm90dG9tLT10aGlzLnBhcnNlU3R5bGUoai5wYWRkaW5nQm90dG9tKSxnLmxlZnQrPXRoaXMucGFyc2VTdHlsZShqLnBhZGRpbmdMZWZ0KSxnLnJpZ2h0LT10aGlzLnBhcnNlU3R5bGUoai5wYWRkaW5nUmlnaHQpfXJldHVybnt0b3A6TWF0aC5yb3VuZChmLnRvcC1nLnRvcCksYm90dG9tOk1hdGgucm91bmQoZy5ib3R0b20tZi5ib3R0b20pLGxlZnQ6TWF0aC5yb3VuZChmLmxlZnQtZy5sZWZ0KSxyaWdodDpNYXRoLnJvdW5kKGcucmlnaHQtZi5yaWdodCl9fSxwYXJzZVBsYWNlbWVudDpmdW5jdGlvbihhKXt2YXIgYj1mLmF1dG8udGVzdChhKTtyZXR1cm4gYiYmKGE9YS5yZXBsYWNlKGYuYXV0bywiIikpLGE9YS5zcGxpdCgiLSIpLGFbMF09YVswXXx8InRvcCIsZi5wcmltYXJ5LnRlc3QoYVswXSl8fChhWzBdPSJ0b3AiKSxhWzFdPWFbMV18fCJjZW50ZXIiLGYuc2Vjb25kYXJ5LnRlc3QoYVsxXSl8fChhWzFdPSJjZW50ZXIiKSxiP2FbMl09ITA6YVsyXT0hMSxhfSxwb3NpdGlvbkVsZW1lbnRzOmZ1bmN0aW9uKGEsYyxkLGUpe2E9dGhpcy5nZXRSYXdOb2RlKGEpLGM9dGhpcy5nZXRSYXdOb2RlKGMpO3ZhciBnPWFuZ3VsYXIuaXNEZWZpbmVkKGMub2Zmc2V0V2lkdGgpP2Mub2Zmc2V0V2lkdGg6Yy5wcm9wKCJvZmZzZXRXaWR0aCIpLGg9YW5ndWxhci5pc0RlZmluZWQoYy5vZmZzZXRIZWlnaHQpP2Mub2Zmc2V0SGVpZ2h0OmMucHJvcCgib2Zmc2V0SGVpZ2h0Iik7ZD10aGlzLnBhcnNlUGxhY2VtZW50KGQpO3ZhciBpPWU/dGhpcy5vZmZzZXQoYSk6dGhpcy5wb3NpdGlvbihhKSxqPXt0b3A6MCxsZWZ0OjAscGxhY2VtZW50OiIifTtpZihkWzJdKXt2YXIgaz10aGlzLnZpZXdwb3J0T2Zmc2V0KGEsZSksbD1iLmdldENvbXB1dGVkU3R5bGUoYyksbT17d2lkdGg6ZytNYXRoLnJvdW5kKE1hdGguYWJzKHRoaXMucGFyc2VTdHlsZShsLm1hcmdpbkxlZnQpK3RoaXMucGFyc2VTdHlsZShsLm1hcmdpblJpZ2h0KSkpLGhlaWdodDpoK01hdGgucm91bmQoTWF0aC5hYnModGhpcy5wYXJzZVN0eWxlKGwubWFyZ2luVG9wKSt0aGlzLnBhcnNlU3R5bGUobC5tYXJnaW5Cb3R0b20pKSl9O2lmKGRbMF09InRvcCI9PT1kWzBdJiZtLmhlaWdodD5rLnRvcCYmbS5oZWlnaHQ8PWsuYm90dG9tPyJib3R0b20iOiJib3R0b20iPT09ZFswXSYmbS5oZWlnaHQ+ay5ib3R0b20mJm0uaGVpZ2h0PD1rLnRvcD8idG9wIjoibGVmdCI9PT1kWzBdJiZtLndpZHRoPmsubGVmdCYmbS53aWR0aDw9ay5yaWdodD8icmlnaHQiOiJyaWdodCI9PT1kWzBdJiZtLndpZHRoPmsucmlnaHQmJm0ud2lkdGg8PWsubGVmdD8ibGVmdCI6ZFswXSxkWzFdPSJ0b3AiPT09ZFsxXSYmbS5oZWlnaHQtaS5oZWlnaHQ+ay5ib3R0b20mJm0uaGVpZ2h0LWkuaGVpZ2h0PD1rLnRvcD8iYm90dG9tIjoiYm90dG9tIj09PWRbMV0mJm0uaGVpZ2h0LWkuaGVpZ2h0PmsudG9wJiZtLmhlaWdodC1pLmhlaWdodDw9ay5ib3R0b20/InRvcCI6ImxlZnQiPT09ZFsxXSYmbS53aWR0aC1pLndpZHRoPmsucmlnaHQmJm0ud2lkdGgtaS53aWR0aDw9ay5sZWZ0PyJyaWdodCI6InJpZ2h0Ij09PWRbMV0mJm0ud2lkdGgtaS53aWR0aD5rLmxlZnQmJm0ud2lkdGgtaS53aWR0aDw9ay5yaWdodD8ibGVmdCI6ZFsxXSwiY2VudGVyIj09PWRbMV0paWYoZi52ZXJ0aWNhbC50ZXN0KGRbMF0pKXt2YXIgbj1pLndpZHRoLzItZy8yO2subGVmdCtuPDAmJm0ud2lkdGgtaS53aWR0aDw9ay5yaWdodD9kWzFdPSJsZWZ0IjprLnJpZ2h0K248MCYmbS53aWR0aC1pLndpZHRoPD1rLmxlZnQmJihkWzFdPSJyaWdodCIpfWVsc2V7dmFyIG89aS5oZWlnaHQvMi1tLmhlaWdodC8yO2sudG9wK288MCYmbS5oZWlnaHQtaS5oZWlnaHQ8PWsuYm90dG9tP2RbMV09InRvcCI6ay5ib3R0b20rbzwwJiZtLmhlaWdodC1pLmhlaWdodDw9ay50b3AmJihkWzFdPSJib3R0b20iKX19c3dpdGNoKGRbMF0pe2Nhc2UidG9wIjpqLnRvcD1pLnRvcC1oO2JyZWFrO2Nhc2UiYm90dG9tIjpqLnRvcD1pLnRvcCtpLmhlaWdodDticmVhaztjYXNlImxlZnQiOmoubGVmdD1pLmxlZnQtZzticmVhaztjYXNlInJpZ2h0IjpqLmxlZnQ9aS5sZWZ0K2kud2lkdGh9c3dpdGNoKGRbMV0pe2Nhc2UidG9wIjpqLnRvcD1pLnRvcDticmVhaztjYXNlImJvdHRvbSI6ai50b3A9aS50b3AraS5oZWlnaHQtaDticmVhaztjYXNlImxlZnQiOmoubGVmdD1pLmxlZnQ7YnJlYWs7Y2FzZSJyaWdodCI6ai5sZWZ0PWkubGVmdCtpLndpZHRoLWc7YnJlYWs7Y2FzZSJjZW50ZXIiOmYudmVydGljYWwudGVzdChkWzBdKT9qLmxlZnQ9aS5sZWZ0K2kud2lkdGgvMi1nLzI6ai50b3A9aS50b3AraS5oZWlnaHQvMi1oLzJ9cmV0dXJuIGoudG9wPU1hdGgucm91bmQoai50b3ApLGoubGVmdD1NYXRoLnJvdW5kKGoubGVmdCksai5wbGFjZW1lbnQ9ImNlbnRlciI9PT1kWzFdP2RbMF06ZFswXSsiLSIrZFsxXSxqfSxhZGp1c3RUb3A6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuLTEhPT1hLmluZGV4T2YoInRvcCIpJiZjIT09ZD97dG9wOmIudG9wLWQrInB4In06dm9pZCAwfSxwb3NpdGlvbkFycm93OmZ1bmN0aW9uKGEsYyl7YT10aGlzLmdldFJhd05vZGUoYSk7dmFyIGQ9YS5xdWVyeVNlbGVjdG9yKCIudG9vbHRpcC1pbm5lciwgLnBvcG92ZXItaW5uZXIiKTtpZihkKXt2YXIgZT1hbmd1bGFyLmVsZW1lbnQoZCkuaGFzQ2xhc3MoInRvb2x0aXAtaW5uZXIiKSxnPWU/YS5xdWVyeVNlbGVjdG9yKCIudG9vbHRpcC1hcnJvdyIpOmEucXVlcnlTZWxlY3RvcigiLmFycm93Iik7aWYoZyl7dmFyIGg9e3RvcDoiIixib3R0b206IiIsbGVmdDoiIixyaWdodDoiIn07aWYoYz10aGlzLnBhcnNlUGxhY2VtZW50KGMpLCJjZW50ZXIiPT09Y1sxXSlyZXR1cm4gdm9pZCBhbmd1bGFyLmVsZW1lbnQoZykuY3NzKGgpO3ZhciBpPSJib3JkZXItIitjWzBdKyItd2lkdGgiLGo9Yi5nZXRDb21wdXRlZFN0eWxlKGcpW2ldLGs9ImJvcmRlci0iO2srPWYudmVydGljYWwudGVzdChjWzBdKT9jWzBdKyItIitjWzFdOmNbMV0rIi0iK2NbMF0says9Ii1yYWRpdXMiO3ZhciBsPWIuZ2V0Q29tcHV0ZWRTdHlsZShlP2Q6YSlba107c3dpdGNoKGNbMF0pe2Nhc2UidG9wIjpoLmJvdHRvbT1lPyIwIjoiLSIrajticmVhaztjYXNlImJvdHRvbSI6aC50b3A9ZT8iMCI6Ii0iK2o7YnJlYWs7Y2FzZSJsZWZ0IjpoLnJpZ2h0PWU/IjAiOiItIitqO2JyZWFrO2Nhc2UicmlnaHQiOmgubGVmdD1lPyIwIjoiLSIran1oW2NbMV1dPWwsYW5ndWxhci5lbGVtZW50KGcpLmNzcyhoKX19fX19XSksYW5ndWxhci5tb2R1bGUoInVpLmJvb3RzdHJhcC5kYXRlcGlja2VyUG9wdXAiLFsidWkuYm9vdHN0cmFwLmRhdGVwaWNrZXIiLCJ1aS5ib290c3RyYXAucG9zaXRpb24iXSkudmFsdWUoIiRkYXRlcGlja2VyUG9wdXBMaXRlcmFsV2FybmluZyIsITApLmNvbnN0YW50KCJ1aWJEYXRlcGlja2VyUG9wdXBDb25maWciLHthbHRJbnB1dEZvcm1hdHM6W10sYXBwZW5kVG9Cb2R5OiExLGNsZWFyVGV4dDoiQ2xlYXIiLGNsb3NlT25EYXRlU2VsZWN0aW9uOiEwLGNsb3NlVGV4dDoiRG9uZSIsY3VycmVudFRleHQ6IlRvZGF5IixkYXRlcGlja2VyUG9wdXA6Inl5eXktTU0tZGQiLGRhdGVwaWNrZXJQb3B1cFRlbXBsYXRlVXJsOiJ1aWIvdGVtcGxhdGUvZGF0ZXBpY2tlclBvcHVwL3BvcHVwLmh0bWwiLGRhdGVwaWNrZXJUZW1wbGF0ZVVybDoidWliL3RlbXBsYXRlL2RhdGVwaWNrZXIvZGF0ZXBpY2tlci5odG1sIixodG1sNVR5cGVzOntkYXRlOiJ5eXl5LU1NLWRkIiwiZGF0ZXRpbWUtbG9jYWwiOiJ5eXl5LU1NLWRkVEhIOm1tOnNzLnNzcyIsbW9udGg6Inl5eXktTU0ifSxvbk9wZW5Gb2N1czohMCxzaG93QnV0dG9uQmFyOiEwLHBsYWNlbWVudDoiYXV0byBib3R0b20tbGVmdCJ9KS5jb250cm9sbGVyKCJVaWJEYXRlcGlja2VyUG9wdXBDb250cm9sbGVyIixbIiRzY29wZSIsIiRlbGVtZW50IiwiJGF0dHJzIiwiJGNvbXBpbGUiLCIkbG9nIiwiJHBhcnNlIiwiJHdpbmRvdyIsIiRkb2N1bWVudCIsIiRyb290U2NvcGUiLCIkdWliUG9zaXRpb24iLCJkYXRlRmlsdGVyIiwidWliRGF0ZVBhcnNlciIsInVpYkRhdGVwaWNrZXJQb3B1cENvbmZpZyIsIiR0aW1lb3V0IiwidWliRGF0ZXBpY2tlckNvbmZpZyIsIiRkYXRlcGlja2VyUG9wdXBMaXRlcmFsV2FybmluZyIsZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoLGksaixrLGwsbSxuLG8scCl7ZnVuY3Rpb24gcShiKXt2YXIgYz1sLnBhcnNlKGIseCxhLmRhdGUpO2lmKGlzTmFOKGMpKWZvcih2YXIgZD0wO2Q8Si5sZW5ndGg7ZCsrKWlmKGM9bC5wYXJzZShiLEpbZF0sYS5kYXRlKSwhaXNOYU4oYykpcmV0dXJuIGM7cmV0dXJuIGN9ZnVuY3Rpb24gcihhKXtpZihhbmd1bGFyLmlzTnVtYmVyKGEpJiYoYT1uZXcgRGF0ZShhKSksIWEpcmV0dXJuIG51bGw7aWYoYW5ndWxhci5pc0RhdGUoYSkmJiFpc05hTihhKSlyZXR1cm4gYTtpZihhbmd1bGFyLmlzU3RyaW5nKGEpKXt2YXIgYj1xKGEpO2lmKCFpc05hTihiKSlyZXR1cm4gbC50b1RpbWV6b25lKGIsSC5nZXRPcHRpb24oInRpbWV6b25lIikpfXJldHVybiBILmdldE9wdGlvbigiYWxsb3dJbnZhbGlkIik/YTp2b2lkIDB9ZnVuY3Rpb24gcyhhLGIpe3ZhciBkPWF8fGI7cmV0dXJuIGMubmdSZXF1aXJlZHx8ZD8oYW5ndWxhci5pc051bWJlcihkKSYmKGQ9bmV3IERhdGUoZCkpLGQ/YW5ndWxhci5pc0RhdGUoZCkmJiFpc05hTihkKT8hMDphbmd1bGFyLmlzU3RyaW5nKGQpPyFpc05hTihxKGQpKTohMTohMCk6ITB9ZnVuY3Rpb24gdChjKXtpZihhLmlzT3Blbnx8IWEuZGlzYWJsZWQpe3ZhciBkPUlbMF0sZT1iWzBdLmNvbnRhaW5zKGMudGFyZ2V0KSxmPXZvaWQgMCE9PWQuY29udGFpbnMmJmQuY29udGFpbnMoYy50YXJnZXQpOyFhLmlzT3Blbnx8ZXx8Znx8YS4kYXBwbHkoZnVuY3Rpb24oKXthLmlzT3Blbj0hMX0pfX1mdW5jdGlvbiB1KGMpezI3PT09Yy53aGljaCYmYS5pc09wZW4/KGMucHJldmVudERlZmF1bHQoKSxjLnN0b3BQcm9wYWdhdGlvbigpLGEuJGFwcGx5KGZ1bmN0aW9uKCl7YS5pc09wZW49ITF9KSxiWzBdLmZvY3VzKCkpOjQwIT09Yy53aGljaHx8YS5pc09wZW58fChjLnByZXZlbnREZWZhdWx0KCksYy5zdG9wUHJvcGFnYXRpb24oKSxhLiRhcHBseShmdW5jdGlvbigpe2EuaXNPcGVuPSEwfSkpfWZ1bmN0aW9uIHYoKXtpZihhLmlzT3Blbil7dmFyIGQ9YW5ndWxhci5lbGVtZW50KElbMF0ucXVlcnlTZWxlY3RvcigiLnVpYi1kYXRlcGlja2VyLXBvcHVwIikpLGU9Yy5wb3B1cFBsYWNlbWVudD9jLnBvcHVwUGxhY2VtZW50Om0ucGxhY2VtZW50LGY9ai5wb3NpdGlvbkVsZW1lbnRzKGIsZCxlLHopO2QuY3NzKHt0b3A6Zi50b3ArInB4IixsZWZ0OmYubGVmdCsicHgifSksZC5oYXNDbGFzcygidWliLXBvc2l0aW9uLW1lYXN1cmUiKSYmZC5yZW1vdmVDbGFzcygidWliLXBvc2l0aW9uLW1lYXN1cmUiKX19ZnVuY3Rpb24gdyhhKXt2YXIgYjtyZXR1cm4gYW5ndWxhci52ZXJzaW9uLm1pbm9yPDY/KGI9YW5ndWxhci5pc09iamVjdChhLiRvcHRpb25zKT9hLiRvcHRpb25zOnt0aW1lem9uZTpudWxsfSxiLmdldE9wdGlvbj1mdW5jdGlvbihhKXtyZXR1cm4gYlthXX0pOmI9YS4kb3B0aW9ucyxifXZhciB4LHkseixBLEIsQyxELEUsRixHLEgsSSxKLEs9ITEsTD1bXTt0aGlzLmluaXQ9ZnVuY3Rpb24oZSl7aWYoRz1lLEg9dyhHKSx5PWFuZ3VsYXIuaXNEZWZpbmVkKGMuY2xvc2VPbkRhdGVTZWxlY3Rpb24pP2EuJHBhcmVudC4kZXZhbChjLmNsb3NlT25EYXRlU2VsZWN0aW9uKTptLmNsb3NlT25EYXRlU2VsZWN0aW9uLHo9YW5ndWxhci5pc0RlZmluZWQoYy5kYXRlcGlja2VyQXBwZW5kVG9Cb2R5KT9hLiRwYXJlbnQuJGV2YWwoYy5kYXRlcGlja2VyQXBwZW5kVG9Cb2R5KTptLmFwcGVuZFRvQm9keSxBPWFuZ3VsYXIuaXNEZWZpbmVkKGMub25PcGVuRm9jdXMpP2EuJHBhcmVudC4kZXZhbChjLm9uT3BlbkZvY3VzKTptLm9uT3BlbkZvY3VzLEI9YW5ndWxhci5pc0RlZmluZWQoYy5kYXRlcGlja2VyUG9wdXBUZW1wbGF0ZVVybCk/Yy5kYXRlcGlja2VyUG9wdXBUZW1wbGF0ZVVybDptLmRhdGVwaWNrZXJQb3B1cFRlbXBsYXRlVXJsLEM9YW5ndWxhci5pc0RlZmluZWQoYy5kYXRlcGlja2VyVGVtcGxhdGVVcmwpP2MuZGF0ZXBpY2tlclRlbXBsYXRlVXJsOm0uZGF0ZXBpY2tlclRlbXBsYXRlVXJsLEo9YW5ndWxhci5pc0RlZmluZWQoYy5hbHRJbnB1dEZvcm1hdHMpP2EuJHBhcmVudC4kZXZhbChjLmFsdElucHV0Rm9ybWF0cyk6bS5hbHRJbnB1dEZvcm1hdHMsYS5zaG93QnV0dG9uQmFyPWFuZ3VsYXIuaXNEZWZpbmVkKGMuc2hvd0J1dHRvbkJhcik/YS4kcGFyZW50LiRldmFsKGMuc2hvd0J1dHRvbkJhcik6bS5zaG93QnV0dG9uQmFyLG0uaHRtbDVUeXBlc1tjLnR5cGVdPyh4PW0uaHRtbDVUeXBlc1tjLnR5cGVdLEs9ITApOih4PWMudWliRGF0ZXBpY2tlclBvcHVwfHxtLmRhdGVwaWNrZXJQb3B1cCxjLiRvYnNlcnZlKCJ1aWJEYXRlcGlja2VyUG9wdXAiLGZ1bmN0aW9uKGEsYil7dmFyIGM9YXx8bS5kYXRlcGlja2VyUG9wdXA7aWYoYyE9PXgmJih4PWMsRy4kbW9kZWxWYWx1ZT1udWxsLCF4KSl0aHJvdyBuZXcgRXJyb3IoInVpYkRhdGVwaWNrZXJQb3B1cCBtdXN0IGhhdmUgYSBkYXRlIGZvcm1hdCBzcGVjaWZpZWQuIil9KSksIXgpdGhyb3cgbmV3IEVycm9yKCJ1aWJEYXRlcGlja2VyUG9wdXAgbXVzdCBoYXZlIGEgZGF0ZSBmb3JtYXQgc3BlY2lmaWVkLiIpO2lmKEsmJmMudWliRGF0ZXBpY2tlclBvcHVwKXRocm93IG5ldyBFcnJvcigiSFRNTDUgZGF0ZSBpbnB1dCB0eXBlcyBkbyBub3Qgc3VwcG9ydCBjdXN0b20gZm9ybWF0cy4iKTtEPWFuZ3VsYXIuZWxlbWVudCgiPGRpdiB1aWItZGF0ZXBpY2tlci1wb3B1cC13cmFwPjxkaXYgdWliLWRhdGVwaWNrZXI+PC9kaXY+PC9kaXY+IiksRC5hdHRyKHsibmctbW9kZWwiOiJkYXRlIiwibmctY2hhbmdlIjoiZGF0ZVNlbGVjdGlvbihkYXRlKSIsInRlbXBsYXRlLXVybCI6Qn0pLEU9YW5ndWxhci5lbGVtZW50KEQuY2hpbGRyZW4oKVswXSksRS5hdHRyKCJ0ZW1wbGF0ZS11cmwiLEMpLGEuZGF0ZXBpY2tlck9wdGlvbnN8fChhLmRhdGVwaWNrZXJPcHRpb25zPXt9KSxLJiYibW9udGgiPT09Yy50eXBlJiYoYS5kYXRlcGlja2VyT3B0aW9ucy5kYXRlcGlja2VyTW9kZT0ibW9udGgiLGEuZGF0ZXBpY2tlck9wdGlvbnMubWluTW9kZT0ibW9udGgiKSxFLmF0dHIoImRhdGVwaWNrZXItb3B0aW9ucyIsImRhdGVwaWNrZXJPcHRpb25zIiksSz9HLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24oYil7cmV0dXJuIGEuZGF0ZT1sLmZyb21UaW1lem9uZShiLEguZ2V0T3B0aW9uKCJ0aW1lem9uZSIpKSxifSk6KEcuJCRwYXJzZXJOYW1lPSJkYXRlIixHLiR2YWxpZGF0b3JzLmRhdGU9cyxHLiRwYXJzZXJzLnVuc2hpZnQociksRy4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKGIpe3JldHVybiBHLiRpc0VtcHR5KGIpPyhhLmRhdGU9YixiKTooYW5ndWxhci5pc051bWJlcihiKSYmKGI9bmV3IERhdGUoYikpLGEuZGF0ZT1sLmZyb21UaW1lem9uZShiLEguZ2V0T3B0aW9uKCJ0aW1lem9uZSIpKSxsLmZpbHRlcihhLmRhdGUseCkpfSkpLEcuJHZpZXdDaGFuZ2VMaXN0ZW5lcnMucHVzaChmdW5jdGlvbigpe2EuZGF0ZT1xKEcuJHZpZXdWYWx1ZSl9KSxiLm9uKCJrZXlkb3duIix1KSxJPWQoRCkoYSksRC5yZW1vdmUoKSx6P2guZmluZCgiYm9keSIpLmFwcGVuZChJKTpiLmFmdGVyKEkpLGEuJG9uKCIkZGVzdHJveSIsZnVuY3Rpb24oKXtmb3IoYS5pc09wZW49PT0hMCYmKGkuJCRwaGFzZXx8YS4kYXBwbHkoZnVuY3Rpb24oKXthLmlzT3Blbj0hMX0pKSxJLnJlbW92ZSgpLGIub2ZmKCJrZXlkb3duIix1KSxoLm9mZigiY2xpY2siLHQpLEYmJkYub2ZmKCJzY3JvbGwiLHYpLGFuZ3VsYXIuZWxlbWVudChnKS5vZmYoInJlc2l6ZSIsdik7TC5sZW5ndGg7KUwuc2hpZnQoKSgpfSl9LGEuZ2V0VGV4dD1mdW5jdGlvbihiKXtyZXR1cm4gYVtiKyJUZXh0Il18fG1bYisiVGV4dCJdfSxhLmlzRGlzYWJsZWQ9ZnVuY3Rpb24oYil7InRvZGF5Ij09PWImJihiPWwuZnJvbVRpbWV6b25lKG5ldyBEYXRlLEguZ2V0T3B0aW9uKCJ0aW1lem9uZSIpKSk7dmFyIGM9e307cmV0dXJuIGFuZ3VsYXIuZm9yRWFjaChbIm1pbkRhdGUiLCJtYXhEYXRlIl0sZnVuY3Rpb24oYil7YS5kYXRlcGlja2VyT3B0aW9uc1tiXT9hbmd1bGFyLmlzRGF0ZShhLmRhdGVwaWNrZXJPcHRpb25zW2JdKT9jW2JdPW5ldyBEYXRlKGEuZGF0ZXBpY2tlck9wdGlvbnNbYl0pOihwJiZlLndhcm4oIkxpdGVyYWwgZGF0ZSBzdXBwb3J0IGhhcyBiZWVuIGRlcHJlY2F0ZWQsIHBsZWFzZSBzd2l0Y2ggdG8gZGF0ZSBvYmplY3QgdXNhZ2UiKSxjW2JdPW5ldyBEYXRlKGsoYS5kYXRlcGlja2VyT3B0aW9uc1tiXSwibWVkaXVtIikpKTpjW2JdPW51bGx9KSxhLmRhdGVwaWNrZXJPcHRpb25zJiZjLm1pbkRhdGUmJmEuY29tcGFyZShiLGMubWluRGF0ZSk8MHx8Yy5tYXhEYXRlJiZhLmNvbXBhcmUoYixjLm1heERhdGUpPjB9LGEuY29tcGFyZT1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgRGF0ZShhLmdldEZ1bGxZZWFyKCksYS5nZXRNb250aCgpLGEuZ2V0RGF0ZSgpKS1uZXcgRGF0ZShiLmdldEZ1bGxZZWFyKCksYi5nZXRNb250aCgpLGIuZ2V0RGF0ZSgpKX0sYS5kYXRlU2VsZWN0aW9uPWZ1bmN0aW9uKGMpe2EuZGF0ZT1jO3ZhciBkPWEuZGF0ZT9sLmZpbHRlcihhLmRhdGUseCk6bnVsbDtiLnZhbChkKSxHLiRzZXRWaWV3VmFsdWUoZCkseSYmKGEuaXNPcGVuPSExLGJbMF0uZm9jdXMoKSl9LGEua2V5ZG93bj1mdW5jdGlvbihjKXsyNz09PWMud2hpY2gmJihjLnN0b3BQcm9wYWdhdGlvbigpLGEuaXNPcGVuPSExLGJbMF0uZm9jdXMoKSl9LGEuc2VsZWN0PWZ1bmN0aW9uKGIsYyl7aWYoYy5zdG9wUHJvcGFnYXRpb24oKSwidG9kYXkiPT09Yil7dmFyIGQ9bmV3IERhdGU7YW5ndWxhci5pc0RhdGUoYS5kYXRlKT8oYj1uZXcgRGF0ZShhLmRhdGUpLGIuc2V0RnVsbFllYXIoZC5nZXRGdWxsWWVhcigpLGQuZ2V0TW9udGgoKSxkLmdldERhdGUoKSkpOihiPWwuZnJvbVRpbWV6b25lKGQsSC5nZXRPcHRpb24oInRpbWV6b25lIikpLGIuc2V0SG91cnMoMCwwLDAsMCkpfWEuZGF0ZVNlbGVjdGlvbihiKX0sYS5jbG9zZT1mdW5jdGlvbihjKXtjLnN0b3BQcm9wYWdhdGlvbigpLGEuaXNPcGVuPSExLGJbMF0uZm9jdXMoKX0sYS5kaXNhYmxlZD1hbmd1bGFyLmlzRGVmaW5lZChjLmRpc2FibGVkKXx8ITEsYy5uZ0Rpc2FibGVkJiZMLnB1c2goYS4kcGFyZW50LiR3YXRjaChmKGMubmdEaXNhYmxlZCksZnVuY3Rpb24oYil7YS5kaXNhYmxlZD1ifSkpLGEuJHdhdGNoKCJpc09wZW4iLGZ1bmN0aW9uKGQpe2Q/YS5kaXNhYmxlZD9hLmlzT3Blbj0hMTpuKGZ1bmN0aW9uKCl7digpLEEmJmEuJGJyb2FkY2FzdCgidWliOmRhdGVwaWNrZXIuZm9jdXMiKSxoLm9uKCJjbGljayIsdCk7dmFyIGQ9Yy5wb3B1cFBsYWNlbWVudD9jLnBvcHVwUGxhY2VtZW50Om0ucGxhY2VtZW50O3p8fGoucGFyc2VQbGFjZW1lbnQoZClbMl0/KEY9Rnx8YW5ndWxhci5lbGVtZW50KGouc2Nyb2xsUGFyZW50KGIpKSxGJiZGLm9uKCJzY3JvbGwiLHYpKTpGPW51bGwsYW5ndWxhci5lbGVtZW50KGcpLm9uKCJyZXNpemUiLHYpfSwwLCExKTooaC5vZmYoImNsaWNrIix0KSxGJiZGLm9mZigic2Nyb2xsIix2KSxhbmd1bGFyLmVsZW1lbnQoZykub2ZmKCJyZXNpemUiLHYpKX0pLGEuJG9uKCJ1aWI6ZGF0ZXBpY2tlci5tb2RlIixmdW5jdGlvbigpe24odiwwLCExKX0pfV0pLmRpcmVjdGl2ZSgidWliRGF0ZXBpY2tlclBvcHVwIixmdW5jdGlvbigpe3JldHVybntyZXF1aXJlOlsibmdNb2RlbCIsInVpYkRhdGVwaWNrZXJQb3B1cCJdLGNvbnRyb2xsZXI6IlVpYkRhdGVwaWNrZXJQb3B1cENvbnRyb2xsZXIiLHNjb3BlOntkYXRlcGlja2VyT3B0aW9uczoiPT8iLGlzT3BlbjoiPT8iLGN1cnJlbnRUZXh0OiJAIixjbGVhclRleHQ6IkAiLGNsb3NlVGV4dDoiQCJ9LGxpbms6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9ZFswXSxmPWRbMV07Zi5pbml0KGUpfX19KS5kaXJlY3RpdmUoInVpYkRhdGVwaWNrZXJQb3B1cFdyYXAiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OiJBIix0cmFuc2NsdWRlOiEwLHRlbXBsYXRlVXJsOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudGVtcGxhdGVVcmx8fCJ1aWIvdGVtcGxhdGUvZGF0ZXBpY2tlclBvcHVwL3BvcHVwLmh0bWwifX19KSxhbmd1bGFyLm1vZHVsZSgidWkuYm9vdHN0cmFwLmRlYm91bmNlIixbXSkuZmFjdG9yeSgiJCRkZWJvdW5jZSIsWyIkdGltZW91dCIsZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7dmFyIGQ7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxmPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7ZCYmYS5jYW5jZWwoZCksZD1hKGZ1bmN0aW9uKCl7Yi5hcHBseShlLGYpfSxjKX19fV0pLGFuZ3VsYXIubW9kdWxlKCJ1aS5ib290c3RyYXAubXVsdGlNYXAiLFtdKS5mYWN0b3J5KCIkJG11bHRpTWFwIixmdW5jdGlvbigpe3JldHVybntjcmVhdGVOZXc6ZnVuY3Rpb24oKXt2YXIgYT17fTtyZXR1cm57ZW50cmllczpmdW5jdGlvbigpe3JldHVybiBPYmplY3Qua2V5cyhhKS5tYXAoZnVuY3Rpb24oYil7cmV0dXJue2tleTpiLHZhbHVlOmFbYl19fSl9LGdldDpmdW5jdGlvbihiKXtyZXR1cm4gYVtiXX0saGFzS2V5OmZ1bmN0aW9uKGIpe3JldHVybiEhYVtiXX0sa2V5czpmdW5jdGlvbigpe3JldHVybiBPYmplY3Qua2V5cyhhKX0scHV0OmZ1bmN0aW9uKGIsYyl7YVtiXXx8KGFbYl09W10pLGFbYl0ucHVzaChjKX0scmVtb3ZlOmZ1bmN0aW9uKGIsYyl7dmFyIGQ9YVtiXTtpZihkKXt2YXIgZT1kLmluZGV4T2YoYyk7LTEhPT1lJiZkLnNwbGljZShlLDEpLGQubGVuZ3RofHxkZWxldGUgYVtiXX19fX19fSksYW5ndWxhci5tb2R1bGUoInVpLmJvb3RzdHJhcC5kcm9wZG93biIsWyJ1aS5ib290c3RyYXAubXVsdGlNYXAiLCJ1aS5ib290c3RyYXAucG9zaXRpb24iXSkuY29uc3RhbnQoInVpYkRyb3Bkb3duQ29uZmlnIix7YXBwZW5kVG9PcGVuQ2xhc3M6InVpYi1kcm9wZG93bi1vcGVuIixvcGVuQ2xhc3M6Im9wZW4ifSkuc2VydmljZSgidWliRHJvcGRvd25TZXJ2aWNlIixbIiRkb2N1bWVudCIsIiRyb290U2NvcGUiLCIkJG11bHRpTWFwIixmdW5jdGlvbihhLGIsYyl7dmFyIGQ9bnVsbCxlPWMuY3JlYXRlTmV3KCk7dGhpcy5pc09ubHlPcGVuPWZ1bmN0aW9uKGEsYil7dmFyIGM9ZS5nZXQoYik7aWYoYyl7dmFyIGQ9Yy5yZWR1Y2UoZnVuY3Rpb24oYixjKXtyZXR1cm4gYy5zY29wZT09PWE/YzpifSx7fSk7aWYoZClyZXR1cm4gMT09PWMubGVuZ3RofXJldHVybiExfSx0aGlzLm9wZW49ZnVuY3Rpb24oYixjLGcpe2lmKGR8fGEub24oImNsaWNrIixmKSxkJiZkIT09YiYmKGQuaXNPcGVuPSExKSxkPWIsZyl7dmFyIGg9ZS5nZXQoZyk7aWYoaCl7dmFyIGk9aC5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGEuc2NvcGV9KTstMT09PWkuaW5kZXhPZihiKSYmZS5wdXQoZyx7c2NvcGU6Yn0pfWVsc2UgZS5wdXQoZyx7c2NvcGU6Yn0pfX0sdGhpcy5jbG9zZT1mdW5jdGlvbihiLGMsZyl7aWYoZD09PWImJihhLm9mZigiY2xpY2siLGYpLGEub2ZmKCJrZXlkb3duIix0aGlzLmtleWJpbmRGaWx0ZXIpLGQ9bnVsbCksZyl7dmFyIGg9ZS5nZXQoZyk7aWYoaCl7dmFyIGk9aC5yZWR1Y2UoZnVuY3Rpb24oYSxjKXtyZXR1cm4gYy5zY29wZT09PWI/YzphfSx7fSk7aSYmZS5yZW1vdmUoZyxpKX19fTt2YXIgZj1mdW5jdGlvbihhKXtpZihkJiZkLmlzT3BlbiYmIShhJiYiZGlzYWJsZWQiPT09ZC5nZXRBdXRvQ2xvc2UoKXx8YSYmMz09PWEud2hpY2gpKXt2YXIgYz1kLmdldFRvZ2dsZUVsZW1lbnQoKTtpZighKGEmJmMmJmNbMF0uY29udGFpbnMoYS50YXJnZXQpKSl7dmFyIGU9ZC5nZXREcm9wZG93bkVsZW1lbnQoKTthJiYib3V0c2lkZUNsaWNrIj09PWQuZ2V0QXV0b0Nsb3NlKCkmJmUmJmVbMF0uY29udGFpbnMoYS50YXJnZXQpfHwoZC5mb2N1c1RvZ2dsZUVsZW1lbnQoKSxkLmlzT3Blbj0hMSxiLiQkcGhhc2V8fGQuJGFwcGx5KCkpfX19O3RoaXMua2V5YmluZEZpbHRlcj1mdW5jdGlvbihhKXtpZihkKXt2YXIgYj1kLmdldERyb3Bkb3duRWxlbWVudCgpLGM9ZC5nZXRUb2dnbGVFbGVtZW50KCksZT1iJiZiWzBdLmNvbnRhaW5zKGEudGFyZ2V0KSxnPWMmJmNbMF0uY29udGFpbnMoYS50YXJnZXQpOzI3PT09YS53aGljaD8oYS5zdG9wUHJvcGFnYXRpb24oKSxkLmZvY3VzVG9nZ2xlRWxlbWVudCgpLGYoKSk6ZC5pc0tleW5hdkVuYWJsZWQoKSYmLTEhPT1bMzgsNDBdLmluZGV4T2YoYS53aGljaCkmJmQuaXNPcGVuJiYoZXx8ZykmJihhLnByZXZlbnREZWZhdWx0KCksYS5zdG9wUHJvcGFnYXRpb24oKSxkLmZvY3VzRHJvcGRvd25FbnRyeShhLndoaWNoKSl9fX1dKS5jb250cm9sbGVyKCJVaWJEcm9wZG93bkNvbnRyb2xsZXIiLFsiJHNjb3BlIiwiJGVsZW1lbnQiLCIkYXR0cnMiLCIkcGFyc2UiLCJ1aWJEcm9wZG93bkNvbmZpZyIsInVpYkRyb3Bkb3duU2VydmljZSIsIiRhbmltYXRlIiwiJHVpYlBvc2l0aW9uIiwiJGRvY3VtZW50IiwiJGNvbXBpbGUiLCIkdGVtcGxhdGVSZXF1ZXN0IixmdW5jdGlvbihhLGIsYyxkLGUsZixnLGgsaSxqLGspe2Z1bmN0aW9uIGwoKXtiLmFwcGVuZChvLmRyb3Bkb3duTWVudSl9dmFyIG0sbixvPXRoaXMscD1hLiRuZXcoKSxxPWUuYXBwZW5kVG9PcGVuQ2xhc3Mscj1lLm9wZW5DbGFzcyxzPWFuZ3VsYXIubm9vcCx0PWMub25Ub2dnbGU/ZChjLm9uVG9nZ2xlKTphbmd1bGFyLm5vb3AsdT0hMSx2PWkuZmluZCgiYm9keSIpO2IuYWRkQ2xhc3MoImRyb3Bkb3duIiksdGhpcy5pbml0PWZ1bmN0aW9uKCl7Yy5pc09wZW4mJihuPWQoYy5pc09wZW4pLHM9bi5hc3NpZ24sYS4kd2F0Y2gobixmdW5jdGlvbihhKXtwLmlzT3Blbj0hIWF9KSksdT1hbmd1bGFyLmlzRGVmaW5lZChjLmtleWJvYXJkTmF2KX0sdGhpcy50b2dnbGU9ZnVuY3Rpb24oYSl7cmV0dXJuIHAuaXNPcGVuPWFyZ3VtZW50cy5sZW5ndGg/ISFhOiFwLmlzT3Blbixhbmd1bGFyLmlzRnVuY3Rpb24ocykmJnMocCxwLmlzT3BlbikscC5pc09wZW59LHRoaXMuaXNPcGVuPWZ1bmN0aW9uKCl7cmV0dXJuIHAuaXNPcGVufSxwLmdldFRvZ2dsZUVsZW1lbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gby50b2dnbGVFbGVtZW50fSxwLmdldEF1dG9DbG9zZT1mdW5jdGlvbigpe3JldHVybiBjLmF1dG9DbG9zZXx8ImFsd2F5cyJ9LHAuZ2V0RWxlbWVudD1mdW5jdGlvbigpe3JldHVybiBifSxwLmlzS2V5bmF2RW5hYmxlZD1mdW5jdGlvbigpe3JldHVybiB1fSxwLmZvY3VzRHJvcGRvd25FbnRyeT1mdW5jdGlvbihhKXt2YXIgYz1vLmRyb3Bkb3duTWVudT9hbmd1bGFyLmVsZW1lbnQoby5kcm9wZG93bk1lbnUpLmZpbmQoImEiKTpiLmZpbmQoInVsIikuZXEoMCkuZmluZCgiYSIpO3N3aXRjaChhKXtjYXNlIDQwOmFuZ3VsYXIuaXNOdW1iZXIoby5zZWxlY3RlZE9wdGlvbik/by5zZWxlY3RlZE9wdGlvbj1vLnNlbGVjdGVkT3B0aW9uPT09Yy5sZW5ndGgtMT9vLnNlbGVjdGVkT3B0aW9uOm8uc2VsZWN0ZWRPcHRpb24rMTpvLnNlbGVjdGVkT3B0aW9uPTA7YnJlYWs7Y2FzZSAzODphbmd1bGFyLmlzTnVtYmVyKG8uc2VsZWN0ZWRPcHRpb24pP28uc2VsZWN0ZWRPcHRpb249MD09PW8uc2VsZWN0ZWRPcHRpb24/MDpvLnNlbGVjdGVkT3B0aW9uLTE6by5zZWxlY3RlZE9wdGlvbj1jLmxlbmd0aC0xfWNbby5zZWxlY3RlZE9wdGlvbl0uZm9jdXMoKX0scC5nZXREcm9wZG93bkVsZW1lbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gby5kcm9wZG93bk1lbnV9LHAuZm9jdXNUb2dnbGVFbGVtZW50PWZ1bmN0aW9uKCl7by50b2dnbGVFbGVtZW50JiZvLnRvZ2dsZUVsZW1lbnRbMF0uZm9jdXMoKX0scC4kd2F0Y2goImlzT3BlbiIsZnVuY3Rpb24oZSxuKXt2YXIgdT1udWxsLHc9ITE7aWYoYW5ndWxhci5pc0RlZmluZWQoYy5kcm9wZG93bkFwcGVuZFRvKSl7dmFyIHg9ZChjLmRyb3Bkb3duQXBwZW5kVG8pKHApO3gmJih1PWFuZ3VsYXIuZWxlbWVudCh4KSl9aWYoYW5ndWxhci5pc0RlZmluZWQoYy5kcm9wZG93bkFwcGVuZFRvQm9keSkpe3ZhciB5PWQoYy5kcm9wZG93bkFwcGVuZFRvQm9keSkocCk7eSE9PSExJiYodz0hMCl9aWYodyYmIXUmJih1PXYpLHUmJm8uZHJvcGRvd25NZW51JiYoZT8odS5hcHBlbmQoby5kcm9wZG93bk1lbnUpLGIub24oIiRkZXN0cm95IixsKSk6KGIub2ZmKCIkZGVzdHJveSIsbCksbCgpKSksdSYmby5kcm9wZG93bk1lbnUpe3ZhciB6LEEsQixDPWgucG9zaXRpb25FbGVtZW50cyhiLG8uZHJvcGRvd25NZW51LCJib3R0b20tbGVmdCIsITApLEQ9MDtpZih6PXt0b3A6Qy50b3ArInB4IixkaXNwbGF5OmU/ImJsb2NrIjoibm9uZSJ9LEE9by5kcm9wZG93bk1lbnUuaGFzQ2xhc3MoImRyb3Bkb3duLW1lbnUtcmlnaHQiKSxBPyh6LmxlZnQ9ImF1dG8iLEI9aC5zY3JvbGxiYXJQYWRkaW5nKHUpLEIuaGVpZ2h0T3ZlcmZsb3cmJkIuc2Nyb2xsYmFyV2lkdGgmJihEPUIuc2Nyb2xsYmFyV2lkdGgpLHoucmlnaHQ9d2luZG93LmlubmVyV2lkdGgtRC0oQy5sZWZ0K2IucHJvcCgib2Zmc2V0V2lkdGgiKSkrInB4Iik6KHoubGVmdD1DLmxlZnQrInB4Iix6LnJpZ2h0PSJhdXRvIiksIXcpe3ZhciBFPWgub2Zmc2V0KHUpO3oudG9wPUMudG9wLUUudG9wKyJweCIsQT96LnJpZ2h0PXdpbmRvdy5pbm5lcldpZHRoLShDLmxlZnQtRS5sZWZ0K2IucHJvcCgib2Zmc2V0V2lkdGgiKSkrInB4Ijp6LmxlZnQ9Qy5sZWZ0LUUubGVmdCsicHgifW8uZHJvcGRvd25NZW51LmNzcyh6KX12YXIgRj11P3U6YixHPXU/cTpyLEg9Ri5oYXNDbGFzcyhHKSxJPWYuaXNPbmx5T3BlbihhLHUpO2lmKEg9PT0hZSl7dmFyIEo7Sj11P0k/InJlbW92ZUNsYXNzIjoiYWRkQ2xhc3MiOmU/ImFkZENsYXNzIjoicmVtb3ZlQ2xhc3MiLGdbSl0oRixHKS50aGVuKGZ1bmN0aW9uKCl7YW5ndWxhci5pc0RlZmluZWQoZSkmJmUhPT1uJiZ0KGEse29wZW46ISFlfSl9KX1pZihlKW8uZHJvcGRvd25NZW51VGVtcGxhdGVVcmw/ayhvLmRyb3Bkb3duTWVudVRlbXBsYXRlVXJsKS50aGVuKGZ1bmN0aW9uKGEpe209cC4kbmV3KCksaihhLnRyaW0oKSkobSxmdW5jdGlvbihhKXt2YXIgYj1hO28uZHJvcGRvd25NZW51LnJlcGxhY2VXaXRoKGIpLG8uZHJvcGRvd25NZW51PWIsaS5vbigia2V5ZG93biIsZi5rZXliaW5kRmlsdGVyKX0pfSk6aS5vbigia2V5ZG93biIsZi5rZXliaW5kRmlsdGVyKSxwLmZvY3VzVG9nZ2xlRWxlbWVudCgpLGYub3BlbihwLGIsdSk7ZWxzZXtpZihmLmNsb3NlKHAsYix1KSxvLmRyb3Bkb3duTWVudVRlbXBsYXRlVXJsKXttJiZtLiRkZXN0cm95KCk7dmFyIEs9YW5ndWxhci5lbGVtZW50KCc8dWwgY2xhc3M9ImRyb3Bkb3duLW1lbnUiPjwvdWw+Jyk7by5kcm9wZG93bk1lbnUucmVwbGFjZVdpdGgoSyksby5kcm9wZG93bk1lbnU9S31vLnNlbGVjdGVkT3B0aW9uPW51bGx9YW5ndWxhci5pc0Z1bmN0aW9uKHMpJiZzKGEsZSl9KX1dKS5kaXJlY3RpdmUoInVpYkRyb3Bkb3duIixmdW5jdGlvbigpe3JldHVybntjb250cm9sbGVyOiJVaWJEcm9wZG93bkNvbnRyb2xsZXIiLGxpbms6ZnVuY3Rpb24oYSxiLGMsZCl7ZC5pbml0KCl9fX0pLmRpcmVjdGl2ZSgidWliRHJvcGRvd25NZW51IixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDoiQSIscmVxdWlyZToiP151aWJEcm9wZG93biIsbGluazpmdW5jdGlvbihhLGIsYyxkKXtpZihkJiYhYW5ndWxhci5pc0RlZmluZWQoYy5kcm9wZG93bk5lc3RlZCkpe2IuYWRkQ2xhc3MoImRyb3Bkb3duLW1lbnUiKTt2YXIgZT1jLnRlbXBsYXRlVXJsO2UmJihkLmRyb3Bkb3duTWVudVRlbXBsYXRlVXJsPWUpLGQuZHJvcGRvd25NZW51fHwoZC5kcm9wZG93bk1lbnU9Yil9fX19KS5kaXJlY3RpdmUoInVpYkRyb3Bkb3duVG9nZ2xlIixmdW5jdGlvbigpe3JldHVybntyZXF1aXJlOiI/XnVpYkRyb3Bkb3duIixsaW5rOmZ1bmN0aW9uKGEsYixjLGQpe2lmKGQpe2IuYWRkQ2xhc3MoImRyb3Bkb3duLXRvZ2dsZSIpLGQudG9nZ2xlRWxlbWVudD1iO3ZhciBlPWZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSxiLmhhc0NsYXNzKCJkaXNhYmxlZCIpfHxjLmRpc2FibGVkfHxhLiRhcHBseShmdW5jdGlvbigpe2QudG9nZ2xlKCl9KX07Yi5vbigiY2xpY2siLGUpLGIuYXR0cih7ImFyaWEtaGFzcG9wdXAiOiEwLCJhcmlhLWV4cGFuZGVkIjohMX0pLGEuJHdhdGNoKGQuaXNPcGVuLGZ1bmN0aW9uKGEpe2IuYXR0cigiYXJpYS1leHBhbmRlZCIsISFhKX0pLGEuJG9uKCIkZGVzdHJveSIsZnVuY3Rpb24oKXtiLm9mZigiY2xpY2siLGUpfSl9fX19KSxhbmd1bGFyLm1vZHVsZSgidWkuYm9vdHN0cmFwLnN0YWNrZWRNYXAiLFtdKS5mYWN0b3J5KCIkJHN0YWNrZWRNYXAiLGZ1bmN0aW9uKCl7cmV0dXJue2NyZWF0ZU5ldzpmdW5jdGlvbigpe3ZhciBhPVtdO3JldHVybnthZGQ6ZnVuY3Rpb24oYixjKXthLnB1c2goe2tleTpiLHZhbHVlOmN9KX0sZ2V0OmZ1bmN0aW9uKGIpe2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKWlmKGI9PT1hW2NdLmtleSlyZXR1cm4gYVtjXX0sa2V5czpmdW5jdGlvbigpe2Zvcih2YXIgYj1bXSxjPTA7YzxhLmxlbmd0aDtjKyspYi5wdXNoKGFbY10ua2V5KTtyZXR1cm4gYn0sdG9wOmZ1bmN0aW9uKCl7cmV0dXJuIGFbYS5sZW5ndGgtMV19LHJlbW92ZTpmdW5jdGlvbihiKXtmb3IodmFyIGM9LTEsZD0wO2Q8YS5sZW5ndGg7ZCsrKWlmKGI9PT1hW2RdLmtleSl7Yz1kO2JyZWFrfXJldHVybiBhLnNwbGljZShjLDEpWzBdfSxyZW1vdmVUb3A6ZnVuY3Rpb24oKXtyZXR1cm4gYS5wb3AoKX0sbGVuZ3RoOmZ1bmN0aW9uKCl7cmV0dXJuIGEubGVuZ3RofX19fX0pLGFuZ3VsYXIubW9kdWxlKCJ1aS5ib290c3RyYXAubW9kYWwiLFsidWkuYm9vdHN0cmFwLm11bHRpTWFwIiwidWkuYm9vdHN0cmFwLnN0YWNrZWRNYXAiLCJ1aS5ib290c3RyYXAucG9zaXRpb24iXSkucHJvdmlkZXIoIiR1aWJSZXNvbHZlIixmdW5jdGlvbigpe3ZhciBhPXRoaXM7dGhpcy5yZXNvbHZlcj1udWxsLHRoaXMuc2V0UmVzb2x2ZXI9ZnVuY3Rpb24oYSl7dGhpcy5yZXNvbHZlcj1hfSx0aGlzLiRnZXQ9WyIkaW5qZWN0b3IiLCIkcSIsZnVuY3Rpb24oYixjKXt2YXIgZD1hLnJlc29sdmVyP2IuZ2V0KGEucmVzb2x2ZXIpOm51bGw7cmV0dXJue3Jlc29sdmU6ZnVuY3Rpb24oYSxlLGYsZyl7aWYoZClyZXR1cm4gZC5yZXNvbHZlKGEsZSxmLGcpO3ZhciBoPVtdO3JldHVybiBhbmd1bGFyLmZvckVhY2goYSxmdW5jdGlvbihhKXthbmd1bGFyLmlzRnVuY3Rpb24oYSl8fGFuZ3VsYXIuaXNBcnJheShhKT9oLnB1c2goYy5yZXNvbHZlKGIuaW52b2tlKGEpKSk6YW5ndWxhci5pc1N0cmluZyhhKT9oLnB1c2goYy5yZXNvbHZlKGIuZ2V0KGEpKSk6aC5wdXNoKGMucmVzb2x2ZShhKSl9KSxjLmFsbChoKS50aGVuKGZ1bmN0aW9uKGIpe3ZhciBjPXt9LGQ9MDtyZXR1cm4gYW5ndWxhci5mb3JFYWNoKGEsZnVuY3Rpb24oYSxlKXtjW2VdPWJbZCsrXX0pLGN9KX19fV19KS5kaXJlY3RpdmUoInVpYk1vZGFsQmFja2Ryb3AiLFsiJGFuaW1hdGUiLCIkaW5qZWN0b3IiLCIkdWliTW9kYWxTdGFjayIsZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoYixkLGUpe2UubW9kYWxJbkNsYXNzJiYoYS5hZGRDbGFzcyhkLGUubW9kYWxJbkNsYXNzKSxiLiRvbihjLk5PV19DTE9TSU5HX0VWRU5ULGZ1bmN0aW9uKGMsZil7dmFyIGc9ZigpO2IubW9kYWxPcHRpb25zLmFuaW1hdGlvbj9hLnJlbW92ZUNsYXNzKGQsZS5tb2RhbEluQ2xhc3MpLnRoZW4oZyk6ZygpfSkpfXJldHVybntyZXN0cmljdDoiQSIsY29tcGlsZTpmdW5jdGlvbihhLGIpe3JldHVybiBhLmFkZENsYXNzKGIuYmFja2Ryb3BDbGFzcyksZH19fV0pLmRpcmVjdGl2ZSgidWliTW9kYWxXaW5kb3ciLFsiJHVpYk1vZGFsU3RhY2siLCIkcSIsIiRhbmltYXRlQ3NzIiwiJGRvY3VtZW50IixmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm57c2NvcGU6e2luZGV4OiJAIn0scmVzdHJpY3Q6IkEiLHRyYW5zY2x1ZGU6ITAsdGVtcGxhdGVVcmw6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50ZW1wbGF0ZVVybHx8InVpYi90ZW1wbGF0ZS9tb2RhbC93aW5kb3cuaHRtbCJ9LGxpbms6ZnVuY3Rpb24oZSxmLGcpe2YuYWRkQ2xhc3MoZy53aW5kb3dUb3BDbGFzc3x8IiIpLGUuc2l6ZT1nLnNpemUsZS5jbG9zZT1mdW5jdGlvbihiKXt2YXIgYz1hLmdldFRvcCgpO2MmJmMudmFsdWUuYmFja2Ryb3AmJiJzdGF0aWMiIT09Yy52YWx1ZS5iYWNrZHJvcCYmYi50YXJnZXQ9PT1iLmN1cnJlbnRUYXJnZXQmJihiLnByZXZlbnREZWZhdWx0KCksYi5zdG9wUHJvcGFnYXRpb24oKSxhLmRpc21pc3MoYy5rZXksImJhY2tkcm9wIGNsaWNrIikpfSxmLm9uKCJjbGljayIsZS5jbG9zZSksZS4kaXNSZW5kZXJlZD0hMDt2YXIgaD1iLmRlZmVyKCk7ZS4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKXtoLnJlc29sdmUoKX0pLGgucHJvbWlzZS50aGVuKGZ1bmN0aW9uKCl7dmFyIGg9bnVsbDtnLm1vZGFsSW5DbGFzcyYmKGg9YyhmLHthZGRDbGFzczpnLm1vZGFsSW5DbGFzc30pLnN0YXJ0KCksZS4kb24oYS5OT1dfQ0xPU0lOR19FVkVOVCxmdW5jdGlvbihhLGIpe3ZhciBkPWIoKTtjKGYse3JlbW92ZUNsYXNzOmcubW9kYWxJbkNsYXNzfSkuc3RhcnQoKS50aGVuKGQpfSkpLGIud2hlbihoKS50aGVuKGZ1bmN0aW9uKCl7dmFyIGI9YS5nZXRUb3AoKTtpZihiJiZhLm1vZGFsUmVuZGVyZWQoYi5rZXkpLCFkWzBdLmFjdGl2ZUVsZW1lbnR8fCFmWzBdLmNvbnRhaW5zKGRbMF0uYWN0aXZlRWxlbWVudCkpe3ZhciBjPWZbMF0ucXVlcnlTZWxlY3RvcigiW2F1dG9mb2N1c10iKTtjP2MuZm9jdXMoKTpmWzBdLmZvY3VzKCl9fSl9KX19fV0pLmRpcmVjdGl2ZSgidWliTW9kYWxBbmltYXRpb25DbGFzcyIsZnVuY3Rpb24oKXtyZXR1cm57Y29tcGlsZTpmdW5jdGlvbihhLGIpe2IubW9kYWxBbmltYXRpb24mJmEuYWRkQ2xhc3MoYi51aWJNb2RhbEFuaW1hdGlvbkNsYXNzKX19fSkuZGlyZWN0aXZlKCJ1aWJNb2RhbFRyYW5zY2x1ZGUiLFsiJGFuaW1hdGUiLGZ1bmN0aW9uKGEpe3JldHVybntsaW5rOmZ1bmN0aW9uKGIsYyxkLGUsZil7ZihiLiRwYXJlbnQsZnVuY3Rpb24oYil7Yy5lbXB0eSgpLGEuZW50ZXIoYixjKX0pfX19XSkuZmFjdG9yeSgiJHVpYk1vZGFsU3RhY2siLFsiJGFuaW1hdGUiLCIkYW5pbWF0ZUNzcyIsIiRkb2N1bWVudCIsIiRjb21waWxlIiwiJHJvb3RTY29wZSIsIiRxIiwiJCRtdWx0aU1hcCIsIiQkc3RhY2tlZE1hcCIsIiR1aWJQb3NpdGlvbiIsZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoLGkpe2Z1bmN0aW9uIGooYSl7dmFyIGI9Ii0iO3JldHVybiBhLnJlcGxhY2UoRSxmdW5jdGlvbihhLGMpe3JldHVybihjP2I6IiIpK2EudG9Mb3dlckNhc2UoKX0pfWZ1bmN0aW9uIGsoYSl7cmV0dXJuISEoYS5vZmZzZXRXaWR0aHx8YS5vZmZzZXRIZWlnaHR8fGEuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgpfWZ1bmN0aW9uIGwoKXtmb3IodmFyIGE9LTEsYj14LmtleXMoKSxjPTA7YzxiLmxlbmd0aDtjKyspeC5nZXQoYltjXSkudmFsdWUuYmFja2Ryb3AmJihhPWMpO3JldHVybiBhPi0xJiZBPmEmJihhPUEpLGF9ZnVuY3Rpb24gbShhLGIpe3ZhciBjPXguZ2V0KGEpLnZhbHVlLGQ9Yy5hcHBlbmRUbzt4LnJlbW92ZShhKSxCPXgudG9wKCksQiYmKEE9cGFyc2VJbnQoQi52YWx1ZS5tb2RhbERvbUVsLmF0dHIoImluZGV4IiksMTApKSxwKGMubW9kYWxEb21FbCxjLm1vZGFsU2NvcGUsZnVuY3Rpb24oKXt2YXIgYj1jLm9wZW5lZENsYXNzfHx3O3kucmVtb3ZlKGIsYSk7dmFyIGU9eS5oYXNLZXkoYik7ZC50b2dnbGVDbGFzcyhiLGUpLCFlJiZ2JiZ2LmhlaWdodE92ZXJmbG93JiZ2LnNjcm9sbGJhcldpZHRoJiYodi5vcmlnaW5hbFJpZ2h0P2QuY3NzKHtwYWRkaW5nUmlnaHQ6di5vcmlnaW5hbFJpZ2h0KyJweCJ9KTpkLmNzcyh7cGFkZGluZ1JpZ2h0OiIifSksdj1udWxsKSxuKCEwKX0sYy5jbG9zZWREZWZlcnJlZCksbygpLGImJmIuZm9jdXM/Yi5mb2N1cygpOmQuZm9jdXMmJmQuZm9jdXMoKX1mdW5jdGlvbiBuKGEpe3ZhciBiO3gubGVuZ3RoKCk+MCYmKGI9eC50b3AoKS52YWx1ZSxiLm1vZGFsRG9tRWwudG9nZ2xlQ2xhc3MoYi53aW5kb3dUb3BDbGFzc3x8IiIsYSkpfWZ1bmN0aW9uIG8oKXtpZih0JiYtMT09PWwoKSl7dmFyIGE9dTtwKHQsdSxmdW5jdGlvbigpe2E9bnVsbH0pLHQ9dm9pZCAwLHU9dm9pZCAwfX1mdW5jdGlvbiBwKGIsYyxkLGUpe2Z1bmN0aW9uIGcoKXtnLmRvbmV8fChnLmRvbmU9ITAsYS5sZWF2ZShiKS50aGVuKGZ1bmN0aW9uKCl7ZCYmZCgpLGIucmVtb3ZlKCksZSYmZS5yZXNvbHZlKCl9KSxjLiRkZXN0cm95KCkpfXZhciBoLGk9bnVsbCxqPWZ1bmN0aW9uKCl7cmV0dXJuIGh8fChoPWYuZGVmZXIoKSxpPWgucHJvbWlzZSksZnVuY3Rpb24oKXtoLnJlc29sdmUoKX19O3JldHVybiBjLiRicm9hZGNhc3Qoei5OT1dfQ0xPU0lOR19FVkVOVCxqKSxmLndoZW4oaSkudGhlbihnKX1mdW5jdGlvbiBxKGEpe2lmKGEuaXNEZWZhdWx0UHJldmVudGVkKCkpcmV0dXJuIGE7dmFyIGI9eC50b3AoKTtpZihiKXN3aXRjaChhLndoaWNoKXtjYXNlIDI3OmIudmFsdWUua2V5Ym9hcmQmJihhLnByZXZlbnREZWZhdWx0KCksZS4kYXBwbHkoZnVuY3Rpb24oKXt6LmRpc21pc3MoYi5rZXksImVzY2FwZSBrZXkgcHJlc3MiKX0pKTticmVhaztjYXNlIDk6dmFyIGM9ei5sb2FkRm9jdXNFbGVtZW50TGlzdChiKSxkPSExO2Euc2hpZnRLZXk/KHouaXNGb2N1c0luRmlyc3RJdGVtKGEsYyl8fHouaXNNb2RhbEZvY3VzZWQoYSxiKSkmJihkPXouZm9jdXNMYXN0Rm9jdXNhYmxlRWxlbWVudChjKSk6ei5pc0ZvY3VzSW5MYXN0SXRlbShhLGMpJiYoZD16LmZvY3VzRmlyc3RGb2N1c2FibGVFbGVtZW50KGMpKSxkJiYoYS5wcmV2ZW50RGVmYXVsdCgpLGEuc3RvcFByb3BhZ2F0aW9uKCkpfX1mdW5jdGlvbiByKGEsYixjKXtyZXR1cm4hYS52YWx1ZS5tb2RhbFNjb3BlLiRicm9hZGNhc3QoIm1vZGFsLmNsb3NpbmciLGIsYykuZGVmYXVsdFByZXZlbnRlZH1mdW5jdGlvbiBzKCl7QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJbIitDKyJdIiksZnVuY3Rpb24oYSl7dmFyIGI9cGFyc2VJbnQoYS5nZXRBdHRyaWJ1dGUoQyksMTApLGM9Yi0xO2Euc2V0QXR0cmlidXRlKEMsYyksY3x8KGEucmVtb3ZlQXR0cmlidXRlKEMpLGEucmVtb3ZlQXR0cmlidXRlKCJhcmlhLWhpZGRlbiIpKX0pfXZhciB0LHUsdix3PSJtb2RhbC1vcGVuIix4PWguY3JlYXRlTmV3KCkseT1nLmNyZWF0ZU5ldygpLHo9e05PV19DTE9TSU5HX0VWRU5UOiJtb2RhbC5zdGFjay5ub3ctY2xvc2luZyJ9LEE9MCxCPW51bGwsQz0iZGF0YS1ib290c3RyYXAtbW9kYWwtYXJpYS1oaWRkZW4tY291bnQiLEQ9ImFbaHJlZl0sIGFyZWFbaHJlZl0sIGlucHV0Om5vdChbZGlzYWJsZWRdKTpub3QoW3RhYmluZGV4PSctMSddKSwgYnV0dG9uOm5vdChbZGlzYWJsZWRdKTpub3QoW3RhYmluZGV4PSctMSddKSxzZWxlY3Q6bm90KFtkaXNhYmxlZF0pOm5vdChbdGFiaW5kZXg9Jy0xJ10pLCB0ZXh0YXJlYTpub3QoW2Rpc2FibGVkXSk6bm90KFt0YWJpbmRleD0nLTEnXSksIGlmcmFtZSwgb2JqZWN0LCBlbWJlZCwgKlt0YWJpbmRleF06bm90KFt0YWJpbmRleD0nLTEnXSksICpbY29udGVudGVkaXRhYmxlPXRydWVdIixFPS9bQS1aXS9nO3JldHVybiBlLiR3YXRjaChsLGZ1bmN0aW9uKGEpe3UmJih1LmluZGV4PWEpfSksYy5vbigia2V5ZG93biIscSksZS4kb24oIiRkZXN0cm95IixmdW5jdGlvbigpe2Mub2ZmKCJrZXlkb3duIixxKX0pLHoub3Blbj1mdW5jdGlvbihiLGYpe2Z1bmN0aW9uIGcoYSl7ZnVuY3Rpb24gYihhKXt2YXIgYj1hLnBhcmVudCgpP2EucGFyZW50KCkuY2hpbGRyZW4oKTpbXTtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKGIsZnVuY3Rpb24oYil7cmV0dXJuIGIhPT1hWzBdfSl9aWYoYSYmIkJPRFkiIT09YVswXS50YWdOYW1lKXJldHVybiBiKGEpLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGI9InRydWUiPT09YS5nZXRBdHRyaWJ1dGUoImFyaWEtaGlkZGVuIiksYz1wYXJzZUludChhLmdldEF0dHJpYnV0ZShDKSwxMCk7Y3x8KGM9Yj8xOjApLGEuc2V0QXR0cmlidXRlKEMsYysxKSxhLnNldEF0dHJpYnV0ZSgiYXJpYS1oaWRkZW4iLCJ0cnVlIil9KSxnKGEucGFyZW50KCkpfXZhciBoPWNbMF0uYWN0aXZlRWxlbWVudCxrPWYub3BlbmVkQ2xhc3N8fHc7bighMSksQj14LnRvcCgpLHguYWRkKGIse2RlZmVycmVkOmYuZGVmZXJyZWQscmVuZGVyRGVmZXJyZWQ6Zi5yZW5kZXJEZWZlcnJlZCxjbG9zZWREZWZlcnJlZDpmLmNsb3NlZERlZmVycmVkLG1vZGFsU2NvcGU6Zi5zY29wZSxiYWNrZHJvcDpmLmJhY2tkcm9wLGtleWJvYXJkOmYua2V5Ym9hcmQsb3BlbmVkQ2xhc3M6Zi5vcGVuZWRDbGFzcyx3aW5kb3dUb3BDbGFzczpmLndpbmRvd1RvcENsYXNzLGFuaW1hdGlvbjpmLmFuaW1hdGlvbixhcHBlbmRUbzpmLmFwcGVuZFRvfSkseS5wdXQoayxiKTt2YXIgbT1mLmFwcGVuZFRvLG89bCgpO28+PTAmJiF0JiYodT1lLiRuZXcoITApLHUubW9kYWxPcHRpb25zPWYsdS5pbmRleD1vLHQ9YW5ndWxhci5lbGVtZW50KCc8ZGl2IHVpYi1tb2RhbC1iYWNrZHJvcD0ibW9kYWwtYmFja2Ryb3AiPjwvZGl2PicpLHQuYXR0cih7ImNsYXNzIjoibW9kYWwtYmFja2Ryb3AiLCJuZy1zdHlsZSI6Insnei1pbmRleCc6IDEwNDAgKyAoaW5kZXggJiYgMSB8fCAwKSArIGluZGV4KjEwfSIsInVpYi1tb2RhbC1hbmltYXRpb24tY2xhc3MiOiJmYWRlIiwibW9kYWwtaW4tY2xhc3MiOiJpbiJ9KSxmLmJhY2tkcm9wQ2xhc3MmJnQuYWRkQ2xhc3MoZi5iYWNrZHJvcENsYXNzKSxmLmFuaW1hdGlvbiYmdC5hdHRyKCJtb2RhbC1hbmltYXRpb24iLCJ0cnVlIiksZCh0KSh1KSxhLmVudGVyKHQsbSksaS5pc1Njcm9sbGFibGUobSkmJih2PWkuc2Nyb2xsYmFyUGFkZGluZyhtKSx2LmhlaWdodE92ZXJmbG93JiZ2LnNjcm9sbGJhcldpZHRoJiZtLmNzcyh7cGFkZGluZ1JpZ2h0OnYucmlnaHQrInB4In0pKSk7dmFyIHA7Zi5jb21wb25lbnQ/KHA9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChqKGYuY29tcG9uZW50Lm5hbWUpKSxwPWFuZ3VsYXIuZWxlbWVudChwKSxwLmF0dHIoe3Jlc29sdmU6IiRyZXNvbHZlIiwibW9kYWwtaW5zdGFuY2UiOiIkdWliTW9kYWxJbnN0YW5jZSIsY2xvc2U6IiRjbG9zZSgkdmFsdWUpIixkaXNtaXNzOiIkZGlzbWlzcygkdmFsdWUpIn0pKTpwPWYuY29udGVudCxBPUI/cGFyc2VJbnQoQi52YWx1ZS5tb2RhbERvbUVsLmF0dHIoImluZGV4IiksMTApKzE6MDt2YXIgcT1hbmd1bGFyLmVsZW1lbnQoJzxkaXYgdWliLW1vZGFsLXdpbmRvdz0ibW9kYWwtd2luZG93Ij48L2Rpdj4nKTtxLmF0dHIoeyJjbGFzcyI6Im1vZGFsIiwidGVtcGxhdGUtdXJsIjpmLndpbmRvd1RlbXBsYXRlVXJsLCJ3aW5kb3ctdG9wLWNsYXNzIjpmLndpbmRvd1RvcENsYXNzLHJvbGU6ImRpYWxvZyIsImFyaWEtbGFiZWxsZWRieSI6Zi5hcmlhTGFiZWxsZWRCeSwiYXJpYS1kZXNjcmliZWRieSI6Zi5hcmlhRGVzY3JpYmVkQnksc2l6ZTpmLnNpemUsaW5kZXg6QSxhbmltYXRlOiJhbmltYXRlIiwibmctc3R5bGUiOiJ7J3otaW5kZXgnOiAxMDUwICsgJCR0b3BNb2RhbEluZGV4KjEwLCBkaXNwbGF5OiAnYmxvY2snfSIsdGFiaW5kZXg6LTEsInVpYi1tb2RhbC1hbmltYXRpb24tY2xhc3MiOiJmYWRlIiwibW9kYWwtaW4tY2xhc3MiOiJpbiJ9KS5hcHBlbmQocCksZi53aW5kb3dDbGFzcyYmcS5hZGRDbGFzcyhmLndpbmRvd0NsYXNzKSxmLmFuaW1hdGlvbiYmcS5hdHRyKCJtb2RhbC1hbmltYXRpb24iLCJ0cnVlIiksbS5hZGRDbGFzcyhrKSxmLnNjb3BlJiYoZi5zY29wZS4kJHRvcE1vZGFsSW5kZXg9QSksYS5lbnRlcihkKHEpKGYuc2NvcGUpLG0pLHgudG9wKCkudmFsdWUubW9kYWxEb21FbD1xLHgudG9wKCkudmFsdWUubW9kYWxPcGVuZXI9aCxnKHEpfSx6LmNsb3NlPWZ1bmN0aW9uKGEsYil7dmFyIGM9eC5nZXQoYSk7cmV0dXJuIHMoKSxjJiZyKGMsYiwhMCk/KGMudmFsdWUubW9kYWxTY29wZS4kJHVpYkRlc3RydWN0aW9uU2NoZWR1bGVkPSEwLGMudmFsdWUuZGVmZXJyZWQucmVzb2x2ZShiKSxtKGEsYy52YWx1ZS5tb2RhbE9wZW5lciksITApOiFjfSx6LmRpc21pc3M9ZnVuY3Rpb24oYSxiKXt2YXIgYz14LmdldChhKTtyZXR1cm4gcygpLGMmJnIoYyxiLCExKT8oYy52YWx1ZS5tb2RhbFNjb3BlLiQkdWliRGVzdHJ1Y3Rpb25TY2hlZHVsZWQ9ITAsYy52YWx1ZS5kZWZlcnJlZC5yZWplY3QoYiksbShhLGMudmFsdWUubW9kYWxPcGVuZXIpLCEwKTohY30sei5kaXNtaXNzQWxsPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmdldFRvcCgpO2ImJnRoaXMuZGlzbWlzcyhiLmtleSxhKTspYj10aGlzLmdldFRvcCgpfSx6LmdldFRvcD1mdW5jdGlvbigpe3JldHVybiB4LnRvcCgpfSx6Lm1vZGFsUmVuZGVyZWQ9ZnVuY3Rpb24oYSl7dmFyIGI9eC5nZXQoYSk7YiYmYi52YWx1ZS5yZW5kZXJEZWZlcnJlZC5yZXNvbHZlKCl9LHouZm9jdXNGaXJzdEZvY3VzYWJsZUVsZW1lbnQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGEubGVuZ3RoPjA/KGFbMF0uZm9jdXMoKSwhMCk6ITF9LHouZm9jdXNMYXN0Rm9jdXNhYmxlRWxlbWVudD1mdW5jdGlvbihhKXtyZXR1cm4gYS5sZW5ndGg+MD8oYVthLmxlbmd0aC0xXS5mb2N1cygpLCEwKTohMX0sei5pc01vZGFsRm9jdXNlZD1mdW5jdGlvbihhLGIpe2lmKGEmJmIpe3ZhciBjPWIudmFsdWUubW9kYWxEb21FbDtpZihjJiZjLmxlbmd0aClyZXR1cm4oYS50YXJnZXR8fGEuc3JjRWxlbWVudCk9PT1jWzBdfXJldHVybiExfSx6LmlzRm9jdXNJbkZpcnN0SXRlbT1mdW5jdGlvbihhLGIpe3JldHVybiBiLmxlbmd0aD4wPyhhLnRhcmdldHx8YS5zcmNFbGVtZW50KT09PWJbMF06ITF9LHouaXNGb2N1c0luTGFzdEl0ZW09ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi5sZW5ndGg+MD8oYS50YXJnZXR8fGEuc3JjRWxlbWVudCk9PT1iW2IubGVuZ3RoLTFdOiExfSx6LmxvYWRGb2N1c0VsZW1lbnRMaXN0PWZ1bmN0aW9uKGEpe2lmKGEpe3ZhciBiPWEudmFsdWUubW9kYWxEb21FbDtpZihiJiZiLmxlbmd0aCl7dmFyIGM9YlswXS5xdWVyeVNlbGVjdG9yQWxsKEQpO3JldHVybiBjP0FycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbChjLGZ1bmN0aW9uKGEpe3JldHVybiBrKGEpfSk6Y319fSx6fV0pLnByb3ZpZGVyKCIkdWliTW9kYWwiLGZ1bmN0aW9uKCl7dmFyIGE9e29wdGlvbnM6e2FuaW1hdGlvbjohMCxiYWNrZHJvcDohMCxrZXlib2FyZDohMH0sJGdldDpbIiRyb290U2NvcGUiLCIkcSIsIiRkb2N1bWVudCIsIiR0ZW1wbGF0ZVJlcXVlc3QiLCIkY29udHJvbGxlciIsIiR1aWJSZXNvbHZlIiwiJHVpYk1vZGFsU3RhY2siLGZ1bmN0aW9uKGIsYyxkLGUsZixnLGgpe2Z1bmN0aW9uIGkoYSl7cmV0dXJuIGEudGVtcGxhdGU/Yy53aGVuKGEudGVtcGxhdGUpOmUoYW5ndWxhci5pc0Z1bmN0aW9uKGEudGVtcGxhdGVVcmwpP2EudGVtcGxhdGVVcmwoKTphLnRlbXBsYXRlVXJsKX12YXIgaj17fSxrPW51bGw7cmV0dXJuIGouZ2V0UHJvbWlzZUNoYWluPWZ1bmN0aW9uKCl7cmV0dXJuIGt9LGoub3Blbj1mdW5jdGlvbihlKXtmdW5jdGlvbiBqKCl7cmV0dXJuIHF9dmFyIGw9Yy5kZWZlcigpLG09Yy5kZWZlcigpLG49Yy5kZWZlcigpLG89Yy5kZWZlcigpLHA9e3Jlc3VsdDpsLnByb21pc2Usb3BlbmVkOm0ucHJvbWlzZSxjbG9zZWQ6bi5wcm9taXNlLHJlbmRlcmVkOm8ucHJvbWlzZSxjbG9zZTpmdW5jdGlvbihhKXtyZXR1cm4gaC5jbG9zZShwLGEpfSxkaXNtaXNzOmZ1bmN0aW9uKGEpe3JldHVybiBoLmRpc21pc3MocCxhKX19O2lmKGU9YW5ndWxhci5leHRlbmQoe30sYS5vcHRpb25zLGUpLGUucmVzb2x2ZT1lLnJlc29sdmV8fHt9LGUuYXBwZW5kVG89ZS5hcHBlbmRUb3x8ZC5maW5kKCJib2R5IikuZXEoMCksIWUuYXBwZW5kVG8ubGVuZ3RoKXRocm93IG5ldyBFcnJvcigiYXBwZW5kVG8gZWxlbWVudCBub3QgZm91bmQuIE1ha2Ugc3VyZSB0aGF0IHRoZSBlbGVtZW50IHBhc3NlZCBpcyBpbiBET00uIik7aWYoIWUuY29tcG9uZW50JiYhZS50ZW1wbGF0ZSYmIWUudGVtcGxhdGVVcmwpdGhyb3cgbmV3IEVycm9yKCJPbmUgb2YgY29tcG9uZW50IG9yIHRlbXBsYXRlIG9yIHRlbXBsYXRlVXJsIG9wdGlvbnMgaXMgcmVxdWlyZWQuIik7dmFyIHE7cT1lLmNvbXBvbmVudD9jLndoZW4oZy5yZXNvbHZlKGUucmVzb2x2ZSx7fSxudWxsLG51bGwpKTpjLmFsbChbaShlKSxnLnJlc29sdmUoZS5yZXNvbHZlLHt9LG51bGwsbnVsbCldKTt2YXIgcjtyZXR1cm4gcj1rPWMuYWxsKFtrXSkudGhlbihqLGopLnRoZW4oZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYyhiLGMsZCxlKXtiLiRzY29wZT1nLGIuJHNjb3BlLiRyZXNvbHZlPXt9LGQ/Yi4kc2NvcGUuJHVpYk1vZGFsSW5zdGFuY2U9cDpiLiR1aWJNb2RhbEluc3RhbmNlPXA7dmFyIGY9Yz9hWzFdOmE7YW5ndWxhci5mb3JFYWNoKGYsZnVuY3Rpb24oYSxjKXtlJiYoYltjXT1hKSxiLiRzY29wZS4kcmVzb2x2ZVtjXT1hfSl9dmFyIGQ9ZS5zY29wZXx8YixnPWQuJG5ldygpO2cuJGNsb3NlPXAuY2xvc2UsZy4kZGlzbWlzcz1wLmRpc21pc3MsZy4kb24oIiRkZXN0cm95IixmdW5jdGlvbigpe2cuJCR1aWJEZXN0cnVjdGlvblNjaGVkdWxlZHx8Zy4kZGlzbWlzcygiJHVpYlVuc2NoZWR1bGVkRGVzdHJ1Y3Rpb24iKX0pO3ZhciBpLGosaz17c2NvcGU6ZyxkZWZlcnJlZDpsLHJlbmRlckRlZmVycmVkOm8sY2xvc2VkRGVmZXJyZWQ6bixhbmltYXRpb246ZS5hbmltYXRpb24sYmFja2Ryb3A6ZS5iYWNrZHJvcCxrZXlib2FyZDplLmtleWJvYXJkLGJhY2tkcm9wQ2xhc3M6ZS5iYWNrZHJvcENsYXNzLHdpbmRvd1RvcENsYXNzOmUud2luZG93VG9wQ2xhc3Msd2luZG93Q2xhc3M6ZS53aW5kb3dDbGFzcyx3aW5kb3dUZW1wbGF0ZVVybDplLndpbmRvd1RlbXBsYXRlVXJsLGFyaWFMYWJlbGxlZEJ5OmUuYXJpYUxhYmVsbGVkQnksYXJpYURlc2NyaWJlZEJ5OmUuYXJpYURlc2NyaWJlZEJ5LHNpemU6ZS5zaXplLG9wZW5lZENsYXNzOmUub3BlbmVkQ2xhc3MsYXBwZW5kVG86ZS5hcHBlbmRUb30scT17fSxyPXt9O2UuY29tcG9uZW50PyhjKHEsITEsITAsITEpLHEubmFtZT1lLmNvbXBvbmVudCxrLmNvbXBvbmVudD1xKTplLmNvbnRyb2xsZXImJihjKHIsITAsITEsITApLGo9ZihlLmNvbnRyb2xsZXIsciwhMCxlLmNvbnRyb2xsZXJBcyksZS5jb250cm9sbGVyQXMmJmUuYmluZFRvQ29udHJvbGxlciYmKGk9ai5pbnN0YW5jZSxpLiRjbG9zZT1nLiRjbG9zZSxpLiRkaXNtaXNzPWcuJGRpc21pc3MsYW5ndWxhci5leHRlbmQoaSx7JHJlc29sdmU6ci4kc2NvcGUuJHJlc29sdmV9LGQpKSxpPWooKSxhbmd1bGFyLmlzRnVuY3Rpb24oaS4kb25Jbml0KSYmaS4kb25Jbml0KCkpLGUuY29tcG9uZW50fHwoay5jb250ZW50PWFbMF0pLGgub3BlbihwLGspLG0ucmVzb2x2ZSghMCl9LGZ1bmN0aW9uKGEpe20ucmVqZWN0KGEpLGwucmVqZWN0KGEpfSlbImZpbmFsbHkiXShmdW5jdGlvbigpe2s9PT1yJiYoaz1udWxsKX0pLHB9LGp9XX07cmV0dXJuIGF9KSxhbmd1bGFyLm1vZHVsZSgidWkuYm9vdHN0cmFwLnBhZ2luZyIsW10pLmZhY3RvcnkoInVpYlBhZ2luZyIsWyIkcGFyc2UiLGZ1bmN0aW9uKGEpe3JldHVybntjcmVhdGU6ZnVuY3Rpb24oYixjLGQpe2Iuc2V0TnVtUGFnZXM9ZC5udW1QYWdlcz9hKGQubnVtUGFnZXMpLmFzc2lnbjphbmd1bGFyLm5vb3AsYi5uZ01vZGVsQ3RybD17JHNldFZpZXdWYWx1ZTphbmd1bGFyLm5vb3B9LGIuX3dhdGNoZXJzPVtdLGIuaW5pdD1mdW5jdGlvbihhLGUpe2IubmdNb2RlbEN0cmw9YSxiLmNvbmZpZz1lLGEuJHJlbmRlcj1mdW5jdGlvbigpe2IucmVuZGVyKCl9LGQuaXRlbXNQZXJQYWdlP2IuX3dhdGNoZXJzLnB1c2goYy4kcGFyZW50LiR3YXRjaChkLml0ZW1zUGVyUGFnZSxmdW5jdGlvbihhKXsKICAgIGIuaXRlbXNQZXJQYWdlPXBhcnNlSW50KGEsMTApLGMudG90YWxQYWdlcz1iLmNhbGN1bGF0ZVRvdGFsUGFnZXMoKSxiLnVwZGF0ZVBhZ2UoKX0pKTpiLml0ZW1zUGVyUGFnZT1lLml0ZW1zUGVyUGFnZSxjLiR3YXRjaCgidG90YWxJdGVtcyIsZnVuY3Rpb24oYSxkKXsoYW5ndWxhci5pc0RlZmluZWQoYSl8fGEhPT1kKSYmKGMudG90YWxQYWdlcz1iLmNhbGN1bGF0ZVRvdGFsUGFnZXMoKSxiLnVwZGF0ZVBhZ2UoKSl9KX0sYi5jYWxjdWxhdGVUb3RhbFBhZ2VzPWZ1bmN0aW9uKCl7dmFyIGE9Yi5pdGVtc1BlclBhZ2U8MT8xOk1hdGguY2VpbChjLnRvdGFsSXRlbXMvYi5pdGVtc1BlclBhZ2UpO3JldHVybiBNYXRoLm1heChhfHwwLDEpfSxiLnJlbmRlcj1mdW5jdGlvbigpe2MucGFnZT1wYXJzZUludChiLm5nTW9kZWxDdHJsLiR2aWV3VmFsdWUsMTApfHwxfSxjLnNlbGVjdFBhZ2U9ZnVuY3Rpb24oYSxkKXtkJiZkLnByZXZlbnREZWZhdWx0KCk7dmFyIGU9IWMubmdEaXNhYmxlZHx8IWQ7ZSYmYy5wYWdlIT09YSYmYT4wJiZhPD1jLnRvdGFsUGFnZXMmJihkJiZkLnRhcmdldCYmZC50YXJnZXQuYmx1cigpLGIubmdNb2RlbEN0cmwuJHNldFZpZXdWYWx1ZShhKSxiLm5nTW9kZWxDdHJsLiRyZW5kZXIoKSl9LGMuZ2V0VGV4dD1mdW5jdGlvbihhKXtyZXR1cm4gY1thKyJUZXh0Il18fGIuY29uZmlnW2ErIlRleHQiXX0sYy5ub1ByZXZpb3VzPWZ1bmN0aW9uKCl7cmV0dXJuIDE9PT1jLnBhZ2V9LGMubm9OZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIGMucGFnZT09PWMudG90YWxQYWdlc30sYi51cGRhdGVQYWdlPWZ1bmN0aW9uKCl7Yi5zZXROdW1QYWdlcyhjLiRwYXJlbnQsYy50b3RhbFBhZ2VzKSxjLnBhZ2U+Yy50b3RhbFBhZ2VzP2Muc2VsZWN0UGFnZShjLnRvdGFsUGFnZXMpOmIubmdNb2RlbEN0cmwuJHJlbmRlcigpfSxjLiRvbigiJGRlc3Ryb3kiLGZ1bmN0aW9uKCl7Zm9yKDtiLl93YXRjaGVycy5sZW5ndGg7KWIuX3dhdGNoZXJzLnNoaWZ0KCkoKX0pfX19XSksYW5ndWxhci5tb2R1bGUoInVpLmJvb3RzdHJhcC5wYWdlciIsWyJ1aS5ib290c3RyYXAucGFnaW5nIiwidWkuYm9vdHN0cmFwLnRhYmluZGV4Il0pLmNvbnRyb2xsZXIoIlVpYlBhZ2VyQ29udHJvbGxlciIsWyIkc2NvcGUiLCIkYXR0cnMiLCJ1aWJQYWdpbmciLCJ1aWJQYWdlckNvbmZpZyIsZnVuY3Rpb24oYSxiLGMsZCl7YS5hbGlnbj1hbmd1bGFyLmlzRGVmaW5lZChiLmFsaWduKT9hLiRwYXJlbnQuJGV2YWwoYi5hbGlnbik6ZC5hbGlnbixjLmNyZWF0ZSh0aGlzLGEsYil9XSkuY29uc3RhbnQoInVpYlBhZ2VyQ29uZmlnIix7aXRlbXNQZXJQYWdlOjEwLHByZXZpb3VzVGV4dDoi0JLCqyBQcmV2aW91cyIsbmV4dFRleHQ6Ik5leHQg0JLCuyIsYWxpZ246ITB9KS5kaXJlY3RpdmUoInVpYlBhZ2VyIixbInVpYlBhZ2VyQ29uZmlnIixmdW5jdGlvbihhKXtyZXR1cm57c2NvcGU6e3RvdGFsSXRlbXM6Ij0iLHByZXZpb3VzVGV4dDoiQCIsbmV4dFRleHQ6IkAiLG5nRGlzYWJsZWQ6Ij0ifSxyZXF1aXJlOlsidWliUGFnZXIiLCI/bmdNb2RlbCJdLHJlc3RyaWN0OiJBIixjb250cm9sbGVyOiJVaWJQYWdlckNvbnRyb2xsZXIiLGNvbnRyb2xsZXJBczoicGFnZXIiLHRlbXBsYXRlVXJsOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudGVtcGxhdGVVcmx8fCJ1aWIvdGVtcGxhdGUvcGFnZXIvcGFnZXIuaHRtbCJ9LGxpbms6ZnVuY3Rpb24oYixjLGQsZSl7Yy5hZGRDbGFzcygicGFnZXIiKTt2YXIgZj1lWzBdLGc9ZVsxXTtnJiZmLmluaXQoZyxhKX19fV0pLGFuZ3VsYXIubW9kdWxlKCJ1aS5ib290c3RyYXAucGFnaW5hdGlvbiIsWyJ1aS5ib290c3RyYXAucGFnaW5nIiwidWkuYm9vdHN0cmFwLnRhYmluZGV4Il0pLmNvbnRyb2xsZXIoIlVpYlBhZ2luYXRpb25Db250cm9sbGVyIixbIiRzY29wZSIsIiRhdHRycyIsIiRwYXJzZSIsInVpYlBhZ2luZyIsInVpYlBhZ2luYXRpb25Db25maWciLGZ1bmN0aW9uKGEsYixjLGQsZSl7ZnVuY3Rpb24gZihhLGIsYyl7cmV0dXJue251bWJlcjphLHRleHQ6YixhY3RpdmU6Y319ZnVuY3Rpb24gZyhhLGIpe3ZhciBjPVtdLGQ9MSxlPWIsZz1hbmd1bGFyLmlzRGVmaW5lZChpKSYmYj5pO2cmJihqPyhkPU1hdGgubWF4KGEtTWF0aC5mbG9vcihpLzIpLDEpLGU9ZCtpLTEsZT5iJiYoZT1iLGQ9ZS1pKzEpKTooZD0oTWF0aC5jZWlsKGEvaSktMSkqaSsxLGU9TWF0aC5taW4oZCtpLTEsYikpKTtmb3IodmFyIGg9ZDtlPj1oO2grKyl7dmFyIG49ZihoLG0oaCksaD09PWEpO2MucHVzaChuKX1pZihnJiZpPjAmJighanx8a3x8bCkpe2lmKGQ+MSl7aWYoIWx8fGQ+Myl7dmFyIG89ZihkLTEsIi4uLiIsITEpO2MudW5zaGlmdChvKX1pZihsKXtpZigzPT09ZCl7dmFyIHA9ZigyLCIyIiwhMSk7Yy51bnNoaWZ0KHApfXZhciBxPWYoMSwiMSIsITEpO2MudW5zaGlmdChxKX19aWYoYj5lKXtpZighbHx8Yi0yPmUpe3ZhciByPWYoZSsxLCIuLi4iLCExKTtjLnB1c2gocil9aWYobCl7aWYoZT09PWItMil7dmFyIHM9ZihiLTEsYi0xLCExKTtjLnB1c2gocyl9dmFyIHQ9ZihiLGIsITEpO2MucHVzaCh0KX19fXJldHVybiBjfXZhciBoPXRoaXMsaT1hbmd1bGFyLmlzRGVmaW5lZChiLm1heFNpemUpP2EuJHBhcmVudC4kZXZhbChiLm1heFNpemUpOmUubWF4U2l6ZSxqPWFuZ3VsYXIuaXNEZWZpbmVkKGIucm90YXRlKT9hLiRwYXJlbnQuJGV2YWwoYi5yb3RhdGUpOmUucm90YXRlLGs9YW5ndWxhci5pc0RlZmluZWQoYi5mb3JjZUVsbGlwc2VzKT9hLiRwYXJlbnQuJGV2YWwoYi5mb3JjZUVsbGlwc2VzKTplLmZvcmNlRWxsaXBzZXMsbD1hbmd1bGFyLmlzRGVmaW5lZChiLmJvdW5kYXJ5TGlua051bWJlcnMpP2EuJHBhcmVudC4kZXZhbChiLmJvdW5kYXJ5TGlua051bWJlcnMpOmUuYm91bmRhcnlMaW5rTnVtYmVycyxtPWFuZ3VsYXIuaXNEZWZpbmVkKGIucGFnZUxhYmVsKT9mdW5jdGlvbihjKXtyZXR1cm4gYS4kcGFyZW50LiRldmFsKGIucGFnZUxhYmVsLHskcGFnZTpjfSl9OmFuZ3VsYXIuaWRlbnRpdHk7YS5ib3VuZGFyeUxpbmtzPWFuZ3VsYXIuaXNEZWZpbmVkKGIuYm91bmRhcnlMaW5rcyk/YS4kcGFyZW50LiRldmFsKGIuYm91bmRhcnlMaW5rcyk6ZS5ib3VuZGFyeUxpbmtzLGEuZGlyZWN0aW9uTGlua3M9YW5ndWxhci5pc0RlZmluZWQoYi5kaXJlY3Rpb25MaW5rcyk/YS4kcGFyZW50LiRldmFsKGIuZGlyZWN0aW9uTGlua3MpOmUuZGlyZWN0aW9uTGlua3MsYi4kc2V0KCJyb2xlIiwibWVudSIpLGQuY3JlYXRlKHRoaXMsYSxiKSxiLm1heFNpemUmJmguX3dhdGNoZXJzLnB1c2goYS4kcGFyZW50LiR3YXRjaChjKGIubWF4U2l6ZSksZnVuY3Rpb24oYSl7aT1wYXJzZUludChhLDEwKSxoLnJlbmRlcigpfSkpO3ZhciBuPXRoaXMucmVuZGVyO3RoaXMucmVuZGVyPWZ1bmN0aW9uKCl7bigpLGEucGFnZT4wJiZhLnBhZ2U8PWEudG90YWxQYWdlcyYmKGEucGFnZXM9ZyhhLnBhZ2UsYS50b3RhbFBhZ2VzKSl9fV0pLmNvbnN0YW50KCJ1aWJQYWdpbmF0aW9uQ29uZmlnIix7aXRlbXNQZXJQYWdlOjEwLGJvdW5kYXJ5TGlua3M6ITEsYm91bmRhcnlMaW5rTnVtYmVyczohMSxkaXJlY3Rpb25MaW5rczohMCxmaXJzdFRleHQ6IkZpcnN0IixwcmV2aW91c1RleHQ6IlByZXZpb3VzIixuZXh0VGV4dDoiTmV4dCIsbGFzdFRleHQ6Ikxhc3QiLHJvdGF0ZTohMCxmb3JjZUVsbGlwc2VzOiExfSkuZGlyZWN0aXZlKCJ1aWJQYWdpbmF0aW9uIixbIiRwYXJzZSIsInVpYlBhZ2luYXRpb25Db25maWciLGZ1bmN0aW9uKGEsYil7cmV0dXJue3Njb3BlOnt0b3RhbEl0ZW1zOiI9IixmaXJzdFRleHQ6IkAiLHByZXZpb3VzVGV4dDoiQCIsbmV4dFRleHQ6IkAiLGxhc3RUZXh0OiJAIixuZ0Rpc2FibGVkOiI9In0scmVxdWlyZTpbInVpYlBhZ2luYXRpb24iLCI/bmdNb2RlbCJdLHJlc3RyaWN0OiJBIixjb250cm9sbGVyOiJVaWJQYWdpbmF0aW9uQ29udHJvbGxlciIsY29udHJvbGxlckFzOiJwYWdpbmF0aW9uIix0ZW1wbGF0ZVVybDpmdW5jdGlvbihhLGIpe3JldHVybiBiLnRlbXBsYXRlVXJsfHwidWliL3RlbXBsYXRlL3BhZ2luYXRpb24vcGFnaW5hdGlvbi5odG1sIn0sbGluazpmdW5jdGlvbihhLGMsZCxlKXtjLmFkZENsYXNzKCJwYWdpbmF0aW9uIik7dmFyIGY9ZVswXSxnPWVbMV07ZyYmZi5pbml0KGcsYil9fX1dKSxhbmd1bGFyLm1vZHVsZSgidWkuYm9vdHN0cmFwLnRvb2x0aXAiLFsidWkuYm9vdHN0cmFwLnBvc2l0aW9uIiwidWkuYm9vdHN0cmFwLnN0YWNrZWRNYXAiXSkucHJvdmlkZXIoIiR1aWJUb29sdGlwIixmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7dmFyIGI9L1tBLVpdL2csYz0iLSI7cmV0dXJuIGEucmVwbGFjZShiLGZ1bmN0aW9uKGEsYil7cmV0dXJuKGI/YzoiIikrYS50b0xvd2VyQ2FzZSgpfSl9dmFyIGI9e3BsYWNlbWVudDoidG9wIixwbGFjZW1lbnRDbGFzc1ByZWZpeDoiIixhbmltYXRpb246ITAscG9wdXBEZWxheTowLHBvcHVwQ2xvc2VEZWxheTowLHVzZUNvbnRlbnRFeHA6ITF9LGM9e21vdXNlZW50ZXI6Im1vdXNlbGVhdmUiLGNsaWNrOiJjbGljayIsb3V0c2lkZUNsaWNrOiJvdXRzaWRlQ2xpY2siLGZvY3VzOiJibHVyIixub25lOiIifSxkPXt9O3RoaXMub3B0aW9ucz1mdW5jdGlvbihhKXthbmd1bGFyLmV4dGVuZChkLGEpfSx0aGlzLnNldFRyaWdnZXJzPWZ1bmN0aW9uKGEpe2FuZ3VsYXIuZXh0ZW5kKGMsYSl9LHRoaXMuJGdldD1bIiR3aW5kb3ciLCIkY29tcGlsZSIsIiR0aW1lb3V0IiwiJGRvY3VtZW50IiwiJHVpYlBvc2l0aW9uIiwiJGludGVycG9sYXRlIiwiJHJvb3RTY29wZSIsIiRwYXJzZSIsIiQkc3RhY2tlZE1hcCIsZnVuY3Rpb24oZSxmLGcsaCxpLGosayxsLG0pe2Z1bmN0aW9uIG4oYSl7aWYoMjc9PT1hLndoaWNoKXt2YXIgYj1vLnRvcCgpO2ImJihiLnZhbHVlLmNsb3NlKCksYj1udWxsKX19dmFyIG89bS5jcmVhdGVOZXcoKTtyZXR1cm4gaC5vbigia2V5dXAiLG4pLGsuJG9uKCIkZGVzdHJveSIsZnVuY3Rpb24oKXtoLm9mZigia2V5dXAiLG4pfSksZnVuY3Rpb24oZSxrLG0sbil7ZnVuY3Rpb24gcChhKXt2YXIgYj0oYXx8bi50cmlnZ2VyfHxtKS5zcGxpdCgiICIpLGQ9Yi5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGNbYV18fGF9KTtyZXR1cm57c2hvdzpiLGhpZGU6ZH19bj1hbmd1bGFyLmV4dGVuZCh7fSxiLGQsbik7dmFyIHE9YShlKSxyPWouc3RhcnRTeW1ib2woKSxzPWouZW5kU3ltYm9sKCksdD0iPGRpdiAiK3ErJy1wb3B1cCB1aWItdGl0bGU9IicrcisidGl0bGUiK3MrJyIgJysobi51c2VDb250ZW50RXhwPydjb250ZW50LWV4cD0iY29udGVudEV4cCgpIiAnOidjb250ZW50PSInK3IrImNvbnRlbnQiK3MrJyIgJykrJ29yaWdpbi1zY29wZT0ib3JpZ1Njb3BlIiBjbGFzcz0idWliLXBvc2l0aW9uLW1lYXN1cmUgJytrKyciIHRvb2x0aXAtYW5pbWF0aW9uLWNsYXNzPSJmYWRlInVpYi10b29sdGlwLWNsYXNzZXMgbmctY2xhc3M9InsgaW46IGlzT3BlbiB9IiA+PC9kaXY+JztyZXR1cm57Y29tcGlsZTpmdW5jdGlvbihhLGIpe3ZhciBjPWYodCk7cmV0dXJuIGZ1bmN0aW9uKGEsYixkLGYpe2Z1bmN0aW9uIGooKXtQLmlzT3Blbj9xKCk6bSgpfWZ1bmN0aW9uIG0oKXtPJiYhYS4kZXZhbChkW2srIkVuYWJsZSJdKXx8KHUoKSx4KCksUC5wb3B1cERlbGF5P0h8fChIPWcocixQLnBvcHVwRGVsYXksITEpKTpyKCkpfWZ1bmN0aW9uIHEoKXtzKCksUC5wb3B1cENsb3NlRGVsYXk/SXx8KEk9Zyh0LFAucG9wdXBDbG9zZURlbGF5LCExKSk6dCgpfWZ1bmN0aW9uIHIoKXtyZXR1cm4gcygpLHUoKSxQLmNvbnRlbnQ/KHYoKSx2b2lkIFAuJGV2YWxBc3luYyhmdW5jdGlvbigpe1AuaXNPcGVuPSEwLHkoITApLFUoKX0pKTphbmd1bGFyLm5vb3B9ZnVuY3Rpb24gcygpe0gmJihnLmNhbmNlbChIKSxIPW51bGwpLEomJihnLmNhbmNlbChKKSxKPW51bGwpfWZ1bmN0aW9uIHQoKXtQJiZQLiRldmFsQXN5bmMoZnVuY3Rpb24oKXtQJiYoUC5pc09wZW49ITEseSghMSksUC5hbmltYXRpb24/R3x8KEc9Zyh3LDE1MCwhMSkpOncoKSl9KX1mdW5jdGlvbiB1KCl7SSYmKGcuY2FuY2VsKEkpLEk9bnVsbCksRyYmKGcuY2FuY2VsKEcpLEc9bnVsbCl9ZnVuY3Rpb24gdigpe0V8fChGPVAuJG5ldygpLEU9YyhGLGZ1bmN0aW9uKGEpe00/aC5maW5kKCJib2R5IikuYXBwZW5kKGEpOmIuYWZ0ZXIoYSl9KSxvLmFkZChQLHtjbG9zZTp0fSkseigpKX1mdW5jdGlvbiB3KCl7cygpLHUoKSxBKCksRSYmKEUucmVtb3ZlKCksRT1udWxsLEsmJmcuY2FuY2VsKEspKSxvLnJlbW92ZShQKSxGJiYoRi4kZGVzdHJveSgpLEY9bnVsbCl9ZnVuY3Rpb24geCgpe1AudGl0bGU9ZFtrKyJUaXRsZSJdLFM/UC5jb250ZW50PVMoYSk6UC5jb250ZW50PWRbZV0sUC5wb3B1cENsYXNzPWRbaysiQ2xhc3MiXSxQLnBsYWNlbWVudD1hbmd1bGFyLmlzRGVmaW5lZChkW2srIlBsYWNlbWVudCJdKT9kW2srIlBsYWNlbWVudCJdOm4ucGxhY2VtZW50O3ZhciBiPWkucGFyc2VQbGFjZW1lbnQoUC5wbGFjZW1lbnQpO0w9YlsxXT9iWzBdKyItIitiWzFdOmJbMF07dmFyIGM9cGFyc2VJbnQoZFtrKyJQb3B1cERlbGF5Il0sMTApLGY9cGFyc2VJbnQoZFtrKyJQb3B1cENsb3NlRGVsYXkiXSwxMCk7UC5wb3B1cERlbGF5PWlzTmFOKGMpP24ucG9wdXBEZWxheTpjLFAucG9wdXBDbG9zZURlbGF5PWlzTmFOKGYpP24ucG9wdXBDbG9zZURlbGF5OmZ9ZnVuY3Rpb24geShiKXtSJiZhbmd1bGFyLmlzRnVuY3Rpb24oUi5hc3NpZ24pJiZSLmFzc2lnbihhLGIpfWZ1bmN0aW9uIHooKXtULmxlbmd0aD0wLFM/KFQucHVzaChhLiR3YXRjaChTLGZ1bmN0aW9uKGEpe1AuY29udGVudD1hLCFhJiZQLmlzT3BlbiYmdCgpfSkpLFQucHVzaChGLiR3YXRjaChmdW5jdGlvbigpe1F8fChRPSEwLEYuJCRwb3N0RGlnZXN0KGZ1bmN0aW9uKCl7UT0hMSxQJiZQLmlzT3BlbiYmVSgpfSkpfSkpKTpULnB1c2goZC4kb2JzZXJ2ZShlLGZ1bmN0aW9uKGEpe1AuY29udGVudD1hLCFhJiZQLmlzT3Blbj90KCk6VSgpfSkpLFQucHVzaChkLiRvYnNlcnZlKGsrIlRpdGxlIixmdW5jdGlvbihhKXtQLnRpdGxlPWEsUC5pc09wZW4mJlUoKX0pKSxULnB1c2goZC4kb2JzZXJ2ZShrKyJQbGFjZW1lbnQiLGZ1bmN0aW9uKGEpe1AucGxhY2VtZW50PWE/YTpuLnBsYWNlbWVudCxQLmlzT3BlbiYmVSgpfSkpfWZ1bmN0aW9uIEEoKXtULmxlbmd0aCYmKGFuZ3VsYXIuZm9yRWFjaChULGZ1bmN0aW9uKGEpe2EoKX0pLFQubGVuZ3RoPTApfWZ1bmN0aW9uIEIoYSl7UCYmUC5pc09wZW4mJkUmJihiWzBdLmNvbnRhaW5zKGEudGFyZ2V0KXx8RVswXS5jb250YWlucyhhLnRhcmdldCl8fHEoKSl9ZnVuY3Rpb24gQyhhKXsyNz09PWEud2hpY2gmJnEoKX1mdW5jdGlvbiBEKCl7dmFyIGM9W10sZT1bXSxmPWEuJGV2YWwoZFtrKyJUcmlnZ2VyIl0pO1YoKSxhbmd1bGFyLmlzT2JqZWN0KGYpPyhPYmplY3Qua2V5cyhmKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2MucHVzaChhKSxlLnB1c2goZlthXSl9KSxOPXtzaG93OmMsaGlkZTplfSk6Tj1wKGYpLCJub25lIiE9PU4uc2hvdyYmTi5zaG93LmZvckVhY2goZnVuY3Rpb24oYSxjKXsib3V0c2lkZUNsaWNrIj09PWE/KGIub24oImNsaWNrIixqKSxoLm9uKCJjbGljayIsQikpOmE9PT1OLmhpZGVbY10/Yi5vbihhLGopOmEmJihiLm9uKGEsbSksYi5vbihOLmhpZGVbY10scSkpLGIub24oImtleXByZXNzIixDKX0pfXZhciBFLEYsRyxILEksSixLLEwsTT1hbmd1bGFyLmlzRGVmaW5lZChuLmFwcGVuZFRvQm9keSk/bi5hcHBlbmRUb0JvZHk6ITEsTj1wKHZvaWQgMCksTz1hbmd1bGFyLmlzRGVmaW5lZChkW2srIkVuYWJsZSJdKSxQPWEuJG5ldyghMCksUT0hMSxSPWFuZ3VsYXIuaXNEZWZpbmVkKGRbaysiSXNPcGVuIl0pP2woZFtrKyJJc09wZW4iXSk6ITEsUz1uLnVzZUNvbnRlbnRFeHA/bChkW2VdKTohMSxUPVtdLFU9ZnVuY3Rpb24oKXtFJiZFLmh0bWwoKSYmKEp8fChKPWcoZnVuY3Rpb24oKXt2YXIgYT1pLnBvc2l0aW9uRWxlbWVudHMoYixFLFAucGxhY2VtZW50LE0pLGM9YW5ndWxhci5pc0RlZmluZWQoRS5vZmZzZXRIZWlnaHQpP0Uub2Zmc2V0SGVpZ2h0OkUucHJvcCgib2Zmc2V0SGVpZ2h0IiksZD1NP2kub2Zmc2V0KGIpOmkucG9zaXRpb24oYik7RS5jc3Moe3RvcDphLnRvcCsicHgiLGxlZnQ6YS5sZWZ0KyJweCJ9KTt2YXIgZT1hLnBsYWNlbWVudC5zcGxpdCgiLSIpO0UuaGFzQ2xhc3MoZVswXSl8fChFLnJlbW92ZUNsYXNzKEwuc3BsaXQoIi0iKVswXSksRS5hZGRDbGFzcyhlWzBdKSksRS5oYXNDbGFzcyhuLnBsYWNlbWVudENsYXNzUHJlZml4K2EucGxhY2VtZW50KXx8KEUucmVtb3ZlQ2xhc3Mobi5wbGFjZW1lbnRDbGFzc1ByZWZpeCtMKSxFLmFkZENsYXNzKG4ucGxhY2VtZW50Q2xhc3NQcmVmaXgrYS5wbGFjZW1lbnQpKSxLPWcoZnVuY3Rpb24oKXt2YXIgYT1hbmd1bGFyLmlzRGVmaW5lZChFLm9mZnNldEhlaWdodCk/RS5vZmZzZXRIZWlnaHQ6RS5wcm9wKCJvZmZzZXRIZWlnaHQiKSxiPWkuYWRqdXN0VG9wKGUsZCxjLGEpO2ImJkUuY3NzKGIpLEs9bnVsbH0sMCwhMSksRS5oYXNDbGFzcygidWliLXBvc2l0aW9uLW1lYXN1cmUiKT8oaS5wb3NpdGlvbkFycm93KEUsYS5wbGFjZW1lbnQpLEUucmVtb3ZlQ2xhc3MoInVpYi1wb3NpdGlvbi1tZWFzdXJlIikpOkwhPT1hLnBsYWNlbWVudCYmaS5wb3NpdGlvbkFycm93KEUsYS5wbGFjZW1lbnQpLEw9YS5wbGFjZW1lbnQsSj1udWxsfSwwLCExKSkpfTtQLm9yaWdTY29wZT1hLFAuaXNPcGVuPSExLFAuY29udGVudEV4cD1mdW5jdGlvbigpe3JldHVybiBQLmNvbnRlbnR9LGQuJG9ic2VydmUoImRpc2FibGVkIixmdW5jdGlvbihhKXthJiZzKCksYSYmUC5pc09wZW4mJnQoKX0pLFImJmEuJHdhdGNoKFIsZnVuY3Rpb24oYSl7UCYmIWE9PT1QLmlzT3BlbiYmaigpfSk7dmFyIFY9ZnVuY3Rpb24oKXtOLnNob3cuZm9yRWFjaChmdW5jdGlvbihhKXsib3V0c2lkZUNsaWNrIj09PWE/Yi5vZmYoImNsaWNrIixqKTooYi5vZmYoYSxtKSxiLm9mZihhLGopKSxiLm9mZigia2V5cHJlc3MiLEMpfSksTi5oaWRlLmZvckVhY2goZnVuY3Rpb24oYSl7Im91dHNpZGVDbGljayI9PT1hP2gub2ZmKCJjbGljayIsQik6Yi5vZmYoYSxxKX0pfTtEKCk7dmFyIFc9YS4kZXZhbChkW2srIkFuaW1hdGlvbiJdKTtQLmFuaW1hdGlvbj1hbmd1bGFyLmlzRGVmaW5lZChXKT8hIVc6bi5hbmltYXRpb247dmFyIFgsWT1rKyJBcHBlbmRUb0JvZHkiO1g9WSBpbiBkJiZ2b2lkIDA9PT1kW1ldPyEwOmEuJGV2YWwoZFtZXSksTT1hbmd1bGFyLmlzRGVmaW5lZChYKT9YOk0sYS4kb24oIiRkZXN0cm95IixmdW5jdGlvbigpe1YoKSx3KCksUD1udWxsfSl9fX19fV19KS5kaXJlY3RpdmUoInVpYlRvb2x0aXBUZW1wbGF0ZVRyYW5zY2x1ZGUiLFsiJGFuaW1hdGUiLCIkc2NlIiwiJGNvbXBpbGUiLCIkdGVtcGxhdGVSZXF1ZXN0IixmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm57bGluazpmdW5jdGlvbihlLGYsZyl7dmFyIGgsaSxqLGs9ZS4kZXZhbChnLnRvb2x0aXBUZW1wbGF0ZVRyYW5zY2x1ZGVTY29wZSksbD0wLG09ZnVuY3Rpb24oKXtpJiYoaS5yZW1vdmUoKSxpPW51bGwpLGgmJihoLiRkZXN0cm95KCksaD1udWxsKSxqJiYoYS5sZWF2ZShqKS50aGVuKGZ1bmN0aW9uKCl7aT1udWxsfSksaT1qLGo9bnVsbCl9O2UuJHdhdGNoKGIucGFyc2VBc1Jlc291cmNlVXJsKGcudWliVG9vbHRpcFRlbXBsYXRlVHJhbnNjbHVkZSksZnVuY3Rpb24oYil7dmFyIGc9KytsO2I/KGQoYiwhMCkudGhlbihmdW5jdGlvbihkKXtpZihnPT09bCl7dmFyIGU9ay4kbmV3KCksaT1kLG49YyhpKShlLGZ1bmN0aW9uKGIpe20oKSxhLmVudGVyKGIsZil9KTtoPWUsaj1uLGguJGVtaXQoIiRpbmNsdWRlQ29udGVudExvYWRlZCIsYil9fSxmdW5jdGlvbigpe2c9PT1sJiYobSgpLGUuJGVtaXQoIiRpbmNsdWRlQ29udGVudEVycm9yIixiKSl9KSxlLiRlbWl0KCIkaW5jbHVkZUNvbnRlbnRSZXF1ZXN0ZWQiLGIpKTptKCl9KSxlLiRvbigiJGRlc3Ryb3kiLG0pfX19XSkuZGlyZWN0aXZlKCJ1aWJUb29sdGlwQ2xhc3NlcyIsWyIkdWliUG9zaXRpb24iLGZ1bmN0aW9uKGEpe3JldHVybntyZXN0cmljdDoiQSIsbGluazpmdW5jdGlvbihiLGMsZCl7aWYoYi5wbGFjZW1lbnQpe3ZhciBlPWEucGFyc2VQbGFjZW1lbnQoYi5wbGFjZW1lbnQpO2MuYWRkQ2xhc3MoZVswXSl9Yi5wb3B1cENsYXNzJiZjLmFkZENsYXNzKGIucG9wdXBDbGFzcyksYi5hbmltYXRpb24mJmMuYWRkQ2xhc3MoZC50b29sdGlwQW5pbWF0aW9uQ2xhc3MpfX19XSkuZGlyZWN0aXZlKCJ1aWJUb29sdGlwUG9wdXAiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OiJBIixzY29wZTp7Y29udGVudDoiQCJ9LHRlbXBsYXRlVXJsOiJ1aWIvdGVtcGxhdGUvdG9vbHRpcC90b29sdGlwLXBvcHVwLmh0bWwifX0pLmRpcmVjdGl2ZSgidWliVG9vbHRpcCIsWyIkdWliVG9vbHRpcCIsZnVuY3Rpb24oYSl7cmV0dXJuIGEoInVpYlRvb2x0aXAiLCJ0b29sdGlwIiwibW91c2VlbnRlciIpfV0pLmRpcmVjdGl2ZSgidWliVG9vbHRpcFRlbXBsYXRlUG9wdXAiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OiJBIixzY29wZTp7Y29udGVudEV4cDoiJiIsb3JpZ2luU2NvcGU6IiYifSx0ZW1wbGF0ZVVybDoidWliL3RlbXBsYXRlL3Rvb2x0aXAvdG9vbHRpcC10ZW1wbGF0ZS1wb3B1cC5odG1sIn19KS5kaXJlY3RpdmUoInVpYlRvb2x0aXBUZW1wbGF0ZSIsWyIkdWliVG9vbHRpcCIsZnVuY3Rpb24oYSl7cmV0dXJuIGEoInVpYlRvb2x0aXBUZW1wbGF0ZSIsInRvb2x0aXAiLCJtb3VzZWVudGVyIix7dXNlQ29udGVudEV4cDohMH0pfV0pLmRpcmVjdGl2ZSgidWliVG9vbHRpcEh0bWxQb3B1cCIsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6IkEiLHNjb3BlOntjb250ZW50RXhwOiImIn0sdGVtcGxhdGVVcmw6InVpYi90ZW1wbGF0ZS90b29sdGlwL3Rvb2x0aXAtaHRtbC1wb3B1cC5odG1sIn19KS5kaXJlY3RpdmUoInVpYlRvb2x0aXBIdG1sIixbIiR1aWJUb29sdGlwIixmdW5jdGlvbihhKXtyZXR1cm4gYSgidWliVG9vbHRpcEh0bWwiLCJ0b29sdGlwIiwibW91c2VlbnRlciIse3VzZUNvbnRlbnRFeHA6ITB9KX1dKSxhbmd1bGFyLm1vZHVsZSgidWkuYm9vdHN0cmFwLnBvcG92ZXIiLFsidWkuYm9vdHN0cmFwLnRvb2x0aXAiXSkuZGlyZWN0aXZlKCJ1aWJQb3BvdmVyVGVtcGxhdGVQb3B1cCIsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6IkEiLHNjb3BlOnt1aWJUaXRsZToiQCIsY29udGVudEV4cDoiJiIsb3JpZ2luU2NvcGU6IiYifSx0ZW1wbGF0ZVVybDoidWliL3RlbXBsYXRlL3BvcG92ZXIvcG9wb3Zlci10ZW1wbGF0ZS5odG1sIn19KS5kaXJlY3RpdmUoInVpYlBvcG92ZXJUZW1wbGF0ZSIsWyIkdWliVG9vbHRpcCIsZnVuY3Rpb24oYSl7cmV0dXJuIGEoInVpYlBvcG92ZXJUZW1wbGF0ZSIsInBvcG92ZXIiLCJjbGljayIse3VzZUNvbnRlbnRFeHA6ITB9KX1dKS5kaXJlY3RpdmUoInVpYlBvcG92ZXJIdG1sUG9wdXAiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OiJBIixzY29wZTp7Y29udGVudEV4cDoiJiIsdWliVGl0bGU6IkAifSx0ZW1wbGF0ZVVybDoidWliL3RlbXBsYXRlL3BvcG92ZXIvcG9wb3Zlci1odG1sLmh0bWwifX0pLmRpcmVjdGl2ZSgidWliUG9wb3Zlckh0bWwiLFsiJHVpYlRvb2x0aXAiLGZ1bmN0aW9uKGEpe3JldHVybiBhKCJ1aWJQb3BvdmVySHRtbCIsInBvcG92ZXIiLCJjbGljayIse3VzZUNvbnRlbnRFeHA6ITB9KX1dKS5kaXJlY3RpdmUoInVpYlBvcG92ZXJQb3B1cCIsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6IkEiLHNjb3BlOnt1aWJUaXRsZToiQCIsY29udGVudDoiQCJ9LHRlbXBsYXRlVXJsOiJ1aWIvdGVtcGxhdGUvcG9wb3Zlci9wb3BvdmVyLmh0bWwifX0pLmRpcmVjdGl2ZSgidWliUG9wb3ZlciIsWyIkdWliVG9vbHRpcCIsZnVuY3Rpb24oYSl7cmV0dXJuIGEoInVpYlBvcG92ZXIiLCJwb3BvdmVyIiwiY2xpY2siKX1dKSxhbmd1bGFyLm1vZHVsZSgidWkuYm9vdHN0cmFwLnByb2dyZXNzYmFyIixbXSkuY29uc3RhbnQoInVpYlByb2dyZXNzQ29uZmlnIix7YW5pbWF0ZTohMCxtYXg6MTAwfSkuY29udHJvbGxlcigiVWliUHJvZ3Jlc3NDb250cm9sbGVyIixbIiRzY29wZSIsIiRhdHRycyIsInVpYlByb2dyZXNzQ29uZmlnIixmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZCgpe3JldHVybiBhbmd1bGFyLmlzRGVmaW5lZChhLm1heFBhcmFtKT9hLm1heFBhcmFtOmMubWF4fXZhciBlPXRoaXMsZj1hbmd1bGFyLmlzRGVmaW5lZChiLmFuaW1hdGUpP2EuJHBhcmVudC4kZXZhbChiLmFuaW1hdGUpOmMuYW5pbWF0ZTt0aGlzLmJhcnM9W10sYS5tYXg9ZCgpLHRoaXMuYWRkQmFyPWZ1bmN0aW9uKGEsYixjKXtmfHxiLmNzcyh7dHJhbnNpdGlvbjoibm9uZSJ9KSx0aGlzLmJhcnMucHVzaChhKSxhLm1heD1kKCksYS50aXRsZT1jJiZhbmd1bGFyLmlzRGVmaW5lZChjLnRpdGxlKT9jLnRpdGxlOiJwcm9ncmVzc2JhciIsYS4kd2F0Y2goInZhbHVlIixmdW5jdGlvbihiKXthLnJlY2FsY3VsYXRlUGVyY2VudGFnZSgpfSksYS5yZWNhbGN1bGF0ZVBlcmNlbnRhZ2U9ZnVuY3Rpb24oKXt2YXIgYj1lLmJhcnMucmVkdWNlKGZ1bmN0aW9uKGEsYil7cmV0dXJuIGIucGVyY2VudD0rKDEwMCpiLnZhbHVlL2IubWF4KS50b0ZpeGVkKDIpLGErYi5wZXJjZW50fSwwKTtiPjEwMCYmKGEucGVyY2VudC09Yi0xMDApfSxhLiRvbigiJGRlc3Ryb3kiLGZ1bmN0aW9uKCl7Yj1udWxsLGUucmVtb3ZlQmFyKGEpfSl9LHRoaXMucmVtb3ZlQmFyPWZ1bmN0aW9uKGEpe3RoaXMuYmFycy5zcGxpY2UodGhpcy5iYXJzLmluZGV4T2YoYSksMSksdGhpcy5iYXJzLmZvckVhY2goZnVuY3Rpb24oYSl7YS5yZWNhbGN1bGF0ZVBlcmNlbnRhZ2UoKX0pfSxhLiR3YXRjaCgibWF4UGFyYW0iLGZ1bmN0aW9uKGEpe2UuYmFycy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EubWF4PWQoKSxhLnJlY2FsY3VsYXRlUGVyY2VudGFnZSgpfSl9KX1dKS5kaXJlY3RpdmUoInVpYlByb2dyZXNzIixmdW5jdGlvbigpe3JldHVybntyZXBsYWNlOiEwLHRyYW5zY2x1ZGU6ITAsY29udHJvbGxlcjoiVWliUHJvZ3Jlc3NDb250cm9sbGVyIixyZXF1aXJlOiJ1aWJQcm9ncmVzcyIsc2NvcGU6e21heFBhcmFtOiI9P21heCJ9LHRlbXBsYXRlVXJsOiJ1aWIvdGVtcGxhdGUvcHJvZ3Jlc3NiYXIvcHJvZ3Jlc3MuaHRtbCJ9fSkuZGlyZWN0aXZlKCJ1aWJCYXIiLGZ1bmN0aW9uKCl7cmV0dXJue3JlcGxhY2U6ITAsdHJhbnNjbHVkZTohMCxyZXF1aXJlOiJedWliUHJvZ3Jlc3MiLHNjb3BlOnt2YWx1ZToiPSIsdHlwZToiQCJ9LHRlbXBsYXRlVXJsOiJ1aWIvdGVtcGxhdGUvcHJvZ3Jlc3NiYXIvYmFyLmh0bWwiLGxpbms6ZnVuY3Rpb24oYSxiLGMsZCl7ZC5hZGRCYXIoYSxiLGMpfX19KS5kaXJlY3RpdmUoInVpYlByb2dyZXNzYmFyIixmdW5jdGlvbigpe3JldHVybntyZXBsYWNlOiEwLHRyYW5zY2x1ZGU6ITAsY29udHJvbGxlcjoiVWliUHJvZ3Jlc3NDb250cm9sbGVyIixzY29wZTp7dmFsdWU6Ij0iLG1heFBhcmFtOiI9P21heCIsdHlwZToiQCJ9LHRlbXBsYXRlVXJsOiJ1aWIvdGVtcGxhdGUvcHJvZ3Jlc3NiYXIvcHJvZ3Jlc3NiYXIuaHRtbCIsbGluazpmdW5jdGlvbihhLGIsYyxkKXtkLmFkZEJhcihhLGFuZ3VsYXIuZWxlbWVudChiLmNoaWxkcmVuKClbMF0pLHt0aXRsZTpjLnRpdGxlfSl9fX0pLGFuZ3VsYXIubW9kdWxlKCJ1aS5ib290c3RyYXAucmF0aW5nIixbXSkuY29uc3RhbnQoInVpYlJhdGluZ0NvbmZpZyIse21heDo1LHN0YXRlT246bnVsbCxzdGF0ZU9mZjpudWxsLGVuYWJsZVJlc2V0OiEwLHRpdGxlczpbIm9uZSIsInR3byIsInRocmVlIiwiZm91ciIsImZpdmUiXX0pLmNvbnRyb2xsZXIoIlVpYlJhdGluZ0NvbnRyb2xsZXIiLFsiJHNjb3BlIiwiJGF0dHJzIiwidWliUmF0aW5nQ29uZmlnIixmdW5jdGlvbihhLGIsYyl7dmFyIGQ9eyRzZXRWaWV3VmFsdWU6YW5ndWxhci5ub29wfSxlPXRoaXM7dGhpcy5pbml0PWZ1bmN0aW9uKGUpe2Q9ZSxkLiRyZW5kZXI9dGhpcy5yZW5kZXIsZC4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKGEpe3JldHVybiBhbmd1bGFyLmlzTnVtYmVyKGEpJiZhPDwwIT09YSYmKGE9TWF0aC5yb3VuZChhKSksYX0pLHRoaXMuc3RhdGVPbj1hbmd1bGFyLmlzRGVmaW5lZChiLnN0YXRlT24pP2EuJHBhcmVudC4kZXZhbChiLnN0YXRlT24pOmMuc3RhdGVPbix0aGlzLnN0YXRlT2ZmPWFuZ3VsYXIuaXNEZWZpbmVkKGIuc3RhdGVPZmYpP2EuJHBhcmVudC4kZXZhbChiLnN0YXRlT2ZmKTpjLnN0YXRlT2ZmLHRoaXMuZW5hYmxlUmVzZXQ9YW5ndWxhci5pc0RlZmluZWQoYi5lbmFibGVSZXNldCk/YS4kcGFyZW50LiRldmFsKGIuZW5hYmxlUmVzZXQpOmMuZW5hYmxlUmVzZXQ7dmFyIGY9YW5ndWxhci5pc0RlZmluZWQoYi50aXRsZXMpP2EuJHBhcmVudC4kZXZhbChiLnRpdGxlcyk6Yy50aXRsZXM7dGhpcy50aXRsZXM9YW5ndWxhci5pc0FycmF5KGYpJiZmLmxlbmd0aD4wP2Y6Yy50aXRsZXM7dmFyIGc9YW5ndWxhci5pc0RlZmluZWQoYi5yYXRpbmdTdGF0ZXMpP2EuJHBhcmVudC4kZXZhbChiLnJhdGluZ1N0YXRlcyk6bmV3IEFycmF5KGFuZ3VsYXIuaXNEZWZpbmVkKGIubWF4KT9hLiRwYXJlbnQuJGV2YWwoYi5tYXgpOmMubWF4KTthLnJhbmdlPXRoaXMuYnVpbGRUZW1wbGF0ZU9iamVjdHMoZyl9LHRoaXMuYnVpbGRUZW1wbGF0ZU9iamVjdHM9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYz1hLmxlbmd0aDtjPmI7YisrKWFbYl09YW5ndWxhci5leHRlbmQoe2luZGV4OmJ9LHtzdGF0ZU9uOnRoaXMuc3RhdGVPbixzdGF0ZU9mZjp0aGlzLnN0YXRlT2ZmLHRpdGxlOnRoaXMuZ2V0VGl0bGUoYil9LGFbYl0pO3JldHVybiBhfSx0aGlzLmdldFRpdGxlPWZ1bmN0aW9uKGEpe3JldHVybiBhPj10aGlzLnRpdGxlcy5sZW5ndGg/YSsxOnRoaXMudGl0bGVzW2FdfSxhLnJhdGU9ZnVuY3Rpb24oYil7aWYoIWEucmVhZG9ubHkmJmI+PTAmJmI8PWEucmFuZ2UubGVuZ3RoKXt2YXIgYz1lLmVuYWJsZVJlc2V0JiZkLiR2aWV3VmFsdWU9PT1iPzA6YjtkLiRzZXRWaWV3VmFsdWUoYyksZC4kcmVuZGVyKCl9fSxhLmVudGVyPWZ1bmN0aW9uKGIpe2EucmVhZG9ubHl8fChhLnZhbHVlPWIpLGEub25Ib3Zlcih7dmFsdWU6Yn0pfSxhLnJlc2V0PWZ1bmN0aW9uKCl7YS52YWx1ZT1kLiR2aWV3VmFsdWUsYS5vbkxlYXZlKCl9LGEub25LZXlkb3duPWZ1bmN0aW9uKGIpey8oMzd8Mzh8Mzl8NDApLy50ZXN0KGIud2hpY2gpJiYoYi5wcmV2ZW50RGVmYXVsdCgpLGIuc3RvcFByb3BhZ2F0aW9uKCksYS5yYXRlKGEudmFsdWUrKDM4PT09Yi53aGljaHx8Mzk9PT1iLndoaWNoPzE6LTEpKSl9LHRoaXMucmVuZGVyPWZ1bmN0aW9uKCl7YS52YWx1ZT1kLiR2aWV3VmFsdWUsYS50aXRsZT1lLmdldFRpdGxlKGEudmFsdWUtMSl9fV0pLmRpcmVjdGl2ZSgidWliUmF0aW5nIixmdW5jdGlvbigpe3JldHVybntyZXF1aXJlOlsidWliUmF0aW5nIiwibmdNb2RlbCJdLHJlc3RyaWN0OiJBIixzY29wZTp7cmVhZG9ubHk6Ij0/cmVhZE9ubHkiLG9uSG92ZXI6IiYiLG9uTGVhdmU6IiYifSxjb250cm9sbGVyOiJVaWJSYXRpbmdDb250cm9sbGVyIix0ZW1wbGF0ZVVybDoidWliL3RlbXBsYXRlL3JhdGluZy9yYXRpbmcuaHRtbCIsbGluazpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1kWzBdLGY9ZFsxXTtlLmluaXQoZil9fX0pLGFuZ3VsYXIubW9kdWxlKCJ1aS5ib290c3RyYXAudGFicyIsW10pLmNvbnRyb2xsZXIoIlVpYlRhYnNldENvbnRyb2xsZXIiLFsiJHNjb3BlIixmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe2Zvcih2YXIgYj0wO2I8ZC50YWJzLmxlbmd0aDtiKyspaWYoZC50YWJzW2JdLmluZGV4PT09YSlyZXR1cm4gYn12YXIgYyxkPXRoaXM7ZC50YWJzPVtdLGQuc2VsZWN0PWZ1bmN0aW9uKGEsZil7aWYoIWUpe3ZhciBnPWIoYyksaD1kLnRhYnNbZ107aWYoaCl7aWYoaC50YWIub25EZXNlbGVjdCh7JGV2ZW50OmYsJHNlbGVjdGVkSW5kZXg6YX0pLGYmJmYuaXNEZWZhdWx0UHJldmVudGVkKCkpcmV0dXJuO2gudGFiLmFjdGl2ZT0hMX12YXIgaT1kLnRhYnNbYV07aT8oaS50YWIub25TZWxlY3QoeyRldmVudDpmfSksaS50YWIuYWN0aXZlPSEwLGQuYWN0aXZlPWkuaW5kZXgsYz1pLmluZGV4KTohaSYmYW5ndWxhci5pc0RlZmluZWQoYykmJihkLmFjdGl2ZT1udWxsLGM9bnVsbCl9fSxkLmFkZFRhYj1mdW5jdGlvbihhKXtpZihkLnRhYnMucHVzaCh7dGFiOmEsaW5kZXg6YS5pbmRleH0pLGQudGFicy5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuaW5kZXg+Yi5pbmRleD8xOmEuaW5kZXg8Yi5pbmRleD8tMTowfSksYS5pbmRleD09PWQuYWN0aXZlfHwhYW5ndWxhci5pc0RlZmluZWQoZC5hY3RpdmUpJiYxPT09ZC50YWJzLmxlbmd0aCl7dmFyIGM9YihhLmluZGV4KTtkLnNlbGVjdChjKX19LGQucmVtb3ZlVGFiPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPTA7YzxkLnRhYnMubGVuZ3RoO2MrKylpZihkLnRhYnNbY10udGFiPT09YSl7Yj1jO2JyZWFrfWlmKGQudGFic1tiXS5pbmRleD09PWQuYWN0aXZlKXt2YXIgZT1iPT09ZC50YWJzLmxlbmd0aC0xP2ItMTpiKzElZC50YWJzLmxlbmd0aDtkLnNlbGVjdChlKX1kLnRhYnMuc3BsaWNlKGIsMSl9LGEuJHdhdGNoKCJ0YWJzZXQuYWN0aXZlIixmdW5jdGlvbihhKXthbmd1bGFyLmlzRGVmaW5lZChhKSYmYSE9PWMmJmQuc2VsZWN0KGIoYSkpfSk7dmFyIGU7YS4kb24oIiRkZXN0cm95IixmdW5jdGlvbigpe2U9ITB9KX1dKS5kaXJlY3RpdmUoInVpYlRhYnNldCIsZnVuY3Rpb24oKXtyZXR1cm57dHJhbnNjbHVkZTohMCxyZXBsYWNlOiEwLHNjb3BlOnt9LGJpbmRUb0NvbnRyb2xsZXI6e2FjdGl2ZToiPT8iLHR5cGU6IkAifSxjb250cm9sbGVyOiJVaWJUYWJzZXRDb250cm9sbGVyIixjb250cm9sbGVyQXM6InRhYnNldCIsdGVtcGxhdGVVcmw6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50ZW1wbGF0ZVVybHx8InVpYi90ZW1wbGF0ZS90YWJzL3RhYnNldC5odG1sIn0sbGluazpmdW5jdGlvbihhLGIsYyl7YS52ZXJ0aWNhbD1hbmd1bGFyLmlzRGVmaW5lZChjLnZlcnRpY2FsKT9hLiRwYXJlbnQuJGV2YWwoYy52ZXJ0aWNhbCk6ITEsYS5qdXN0aWZpZWQ9YW5ndWxhci5pc0RlZmluZWQoYy5qdXN0aWZpZWQpP2EuJHBhcmVudC4kZXZhbChjLmp1c3RpZmllZCk6ITF9fX0pLmRpcmVjdGl2ZSgidWliVGFiIixbIiRwYXJzZSIsZnVuY3Rpb24oYSl7cmV0dXJue3JlcXVpcmU6Il51aWJUYWJzZXQiLHJlcGxhY2U6ITAsdGVtcGxhdGVVcmw6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50ZW1wbGF0ZVVybHx8InVpYi90ZW1wbGF0ZS90YWJzL3RhYi5odG1sIn0sdHJhbnNjbHVkZTohMCxzY29wZTp7aGVhZGluZzoiQCIsaW5kZXg6Ij0/IixjbGFzc2VzOiJAPyIsb25TZWxlY3Q6IiZzZWxlY3QiLG9uRGVzZWxlY3Q6IiZkZXNlbGVjdCJ9LGNvbnRyb2xsZXI6ZnVuY3Rpb24oKXt9LGNvbnRyb2xsZXJBczoidGFiIixsaW5rOmZ1bmN0aW9uKGIsYyxkLGUsZil7Yi5kaXNhYmxlZD0hMSxkLmRpc2FibGUmJmIuJHBhcmVudC4kd2F0Y2goYShkLmRpc2FibGUpLGZ1bmN0aW9uKGEpe2IuZGlzYWJsZWQ9ISFhfSksYW5ndWxhci5pc1VuZGVmaW5lZChkLmluZGV4KSYmKGUudGFicyYmZS50YWJzLmxlbmd0aD9iLmluZGV4PU1hdGgubWF4LmFwcGx5KG51bGwsZS50YWJzLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS5pbmRleH0pKSsxOmIuaW5kZXg9MCksYW5ndWxhci5pc1VuZGVmaW5lZChkLmNsYXNzZXMpJiYoYi5jbGFzc2VzPSIiKSxiLnNlbGVjdD1mdW5jdGlvbihhKXtpZighYi5kaXNhYmxlZCl7Zm9yKHZhciBjLGQ9MDtkPGUudGFicy5sZW5ndGg7ZCsrKWlmKGUudGFic1tkXS50YWI9PT1iKXtjPWQ7YnJlYWt9ZS5zZWxlY3QoYyxhKX19LGUuYWRkVGFiKGIpLGIuJG9uKCIkZGVzdHJveSIsZnVuY3Rpb24oKXtlLnJlbW92ZVRhYihiKX0pLGIuJHRyYW5zY2x1ZGVGbj1mfX19XSkuZGlyZWN0aXZlKCJ1aWJUYWJIZWFkaW5nVHJhbnNjbHVkZSIsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6IkEiLHJlcXVpcmU6Il51aWJUYWIiLGxpbms6ZnVuY3Rpb24oYSxiKXthLiR3YXRjaCgiaGVhZGluZ0VsZW1lbnQiLGZ1bmN0aW9uKGEpe2EmJihiLmh0bWwoIiIpLGIuYXBwZW5kKGEpKX0pfX19KS5kaXJlY3RpdmUoInVpYlRhYkNvbnRlbnRUcmFuc2NsdWRlIixmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7cmV0dXJuIGEudGFnTmFtZSYmKGEuaGFzQXR0cmlidXRlKCJ1aWItdGFiLWhlYWRpbmciKXx8YS5oYXNBdHRyaWJ1dGUoImRhdGEtdWliLXRhYi1oZWFkaW5nIil8fGEuaGFzQXR0cmlidXRlKCJ4LXVpYi10YWItaGVhZGluZyIpfHwidWliLXRhYi1oZWFkaW5nIj09PWEudGFnTmFtZS50b0xvd2VyQ2FzZSgpfHwiZGF0YS11aWItdGFiLWhlYWRpbmciPT09YS50YWdOYW1lLnRvTG93ZXJDYXNlKCl8fCJ4LXVpYi10YWItaGVhZGluZyI9PT1hLnRhZ05hbWUudG9Mb3dlckNhc2UoKXx8InVpYjp0YWItaGVhZGluZyI9PT1hLnRhZ05hbWUudG9Mb3dlckNhc2UoKSl9cmV0dXJue3Jlc3RyaWN0OiJBIixyZXF1aXJlOiJedWliVGFic2V0IixsaW5rOmZ1bmN0aW9uKGIsYyxkKXt2YXIgZT1iLiRldmFsKGQudWliVGFiQ29udGVudFRyYW5zY2x1ZGUpLnRhYjtlLiR0cmFuc2NsdWRlRm4oZS4kcGFyZW50LGZ1bmN0aW9uKGIpe2FuZ3VsYXIuZm9yRWFjaChiLGZ1bmN0aW9uKGIpe2EoYik/ZS5oZWFkaW5nRWxlbWVudD1iOmMuYXBwZW5kKGIpfSl9KX19fSksYW5ndWxhci5tb2R1bGUoInVpLmJvb3RzdHJhcC50aW1lcGlja2VyIixbXSkuY29uc3RhbnQoInVpYlRpbWVwaWNrZXJDb25maWciLHtob3VyU3RlcDoxLG1pbnV0ZVN0ZXA6MSxzZWNvbmRTdGVwOjEsc2hvd01lcmlkaWFuOiEwLHNob3dTZWNvbmRzOiExLG1lcmlkaWFuczpudWxsLHJlYWRvbmx5SW5wdXQ6ITEsbW91c2V3aGVlbDohMCxhcnJvd2tleXM6ITAsc2hvd1NwaW5uZXJzOiEwLHRlbXBsYXRlVXJsOiJ1aWIvdGVtcGxhdGUvdGltZXBpY2tlci90aW1lcGlja2VyLmh0bWwifSkuY29udHJvbGxlcigiVWliVGltZXBpY2tlckNvbnRyb2xsZXIiLFsiJHNjb3BlIiwiJGVsZW1lbnQiLCIkYXR0cnMiLCIkcGFyc2UiLCIkbG9nIiwiJGxvY2FsZSIsInVpYlRpbWVwaWNrZXJDb25maWciLGZ1bmN0aW9uKGEsYixjLGQsZSxmLGcpe2Z1bmN0aW9uIGgoKXt2YXIgYj0rYS5ob3VycyxjPWEuc2hvd01lcmlkaWFuP2I+MCYmMTM+YjpiPj0wJiYyND5iO3JldHVybiBjJiYiIiE9PWEuaG91cnM/KGEuc2hvd01lcmlkaWFuJiYoMTI9PT1iJiYoYj0wKSxhLm1lcmlkaWFuPT09eVsxXSYmKGIrPTEyKSksYik6dm9pZCAwfWZ1bmN0aW9uIGkoKXt2YXIgYj0rYS5taW51dGVzLGM9Yj49MCYmNjA+YjtyZXR1cm4gYyYmIiIhPT1hLm1pbnV0ZXM/Yjp2b2lkIDB9ZnVuY3Rpb24gaigpe3ZhciBiPSthLnNlY29uZHM7cmV0dXJuIGI+PTAmJjYwPmI/Yjp2b2lkIDB9ZnVuY3Rpb24gayhhLGIpe3JldHVybiBudWxsPT09YT8iIjphbmd1bGFyLmlzRGVmaW5lZChhKSYmYS50b1N0cmluZygpLmxlbmd0aDwyJiYhYj8iMCIrYTphLnRvU3RyaW5nKCl9ZnVuY3Rpb24gbChhKXttKCkseC4kc2V0Vmlld1ZhbHVlKG5ldyBEYXRlKHYpKSxuKGEpfWZ1bmN0aW9uIG0oKXtzJiZzLiRzZXRWYWxpZGl0eSgiaG91cnMiLCEwKSx0JiZ0LiRzZXRWYWxpZGl0eSgibWludXRlcyIsITApLHUmJnUuJHNldFZhbGlkaXR5KCJzZWNvbmRzIiwhMCkseC4kc2V0VmFsaWRpdHkoInRpbWUiLCEwKSxhLmludmFsaWRIb3Vycz0hMSxhLmludmFsaWRNaW51dGVzPSExLGEuaW52YWxpZFNlY29uZHM9ITF9ZnVuY3Rpb24gbihiKXtpZih4LiRtb2RlbFZhbHVlKXt2YXIgYz12LmdldEhvdXJzKCksZD12LmdldE1pbnV0ZXMoKSxlPXYuZ2V0U2Vjb25kcygpO2Euc2hvd01lcmlkaWFuJiYoYz0wPT09Y3x8MTI9PT1jPzEyOmMlMTIpLGEuaG91cnM9ImgiPT09Yj9jOmsoYywheiksIm0iIT09YiYmKGEubWludXRlcz1rKGQpKSxhLm1lcmlkaWFuPXYuZ2V0SG91cnMoKTwxMj95WzBdOnlbMV0sInMiIT09YiYmKGEuc2Vjb25kcz1rKGUpKSxhLm1lcmlkaWFuPXYuZ2V0SG91cnMoKTwxMj95WzBdOnlbMV19ZWxzZSBhLmhvdXJzPW51bGwsYS5taW51dGVzPW51bGwsYS5zZWNvbmRzPW51bGwsYS5tZXJpZGlhbj15WzBdfWZ1bmN0aW9uIG8oYSl7dj1xKHYsYSksbCgpfWZ1bmN0aW9uIHAoYSxiKXtyZXR1cm4gcShhLDYwKmIpfWZ1bmN0aW9uIHEoYSxiKXt2YXIgYz1uZXcgRGF0ZShhLmdldFRpbWUoKSsxZTMqYiksZD1uZXcgRGF0ZShhKTtyZXR1cm4gZC5zZXRIb3VycyhjLmdldEhvdXJzKCksYy5nZXRNaW51dGVzKCksYy5nZXRTZWNvbmRzKCkpLGR9ZnVuY3Rpb24gcigpe3JldHVybihudWxsPT09YS5ob3Vyc3x8IiI9PT1hLmhvdXJzKSYmKG51bGw9PT1hLm1pbnV0ZXN8fCIiPT09YS5taW51dGVzKSYmKCFhLnNob3dTZWNvbmRzfHxhLnNob3dTZWNvbmRzJiYobnVsbD09PWEuc2Vjb25kc3x8IiI9PT1hLnNlY29uZHMpKX12YXIgcyx0LHUsdj1uZXcgRGF0ZSx3PVtdLHg9eyRzZXRWaWV3VmFsdWU6YW5ndWxhci5ub29wfSx5PWFuZ3VsYXIuaXNEZWZpbmVkKGMubWVyaWRpYW5zKT9hLiRwYXJlbnQuJGV2YWwoYy5tZXJpZGlhbnMpOmcubWVyaWRpYW5zfHxmLkRBVEVUSU1FX0ZPUk1BVFMuQU1QTVMsej1hbmd1bGFyLmlzRGVmaW5lZChjLnBhZEhvdXJzKT9hLiRwYXJlbnQuJGV2YWwoYy5wYWRIb3Vycyk6ITA7YS50YWJpbmRleD1hbmd1bGFyLmlzRGVmaW5lZChjLnRhYmluZGV4KT9jLnRhYmluZGV4OjAsYi5yZW1vdmVBdHRyKCJ0YWJpbmRleCIpLHRoaXMuaW5pdD1mdW5jdGlvbihiLGQpe3g9Yix4LiRyZW5kZXI9dGhpcy5yZW5kZXIseC4kZm9ybWF0dGVycy51bnNoaWZ0KGZ1bmN0aW9uKGEpe3JldHVybiBhP25ldyBEYXRlKGEpOm51bGx9KTt2YXIgZT1kLmVxKDApLGY9ZC5lcSgxKSxoPWQuZXEoMik7cz1lLmNvbnRyb2xsZXIoIm5nTW9kZWwiKSx0PWYuY29udHJvbGxlcigibmdNb2RlbCIpLHU9aC5jb250cm9sbGVyKCJuZ01vZGVsIik7dmFyIGk9YW5ndWxhci5pc0RlZmluZWQoYy5tb3VzZXdoZWVsKT9hLiRwYXJlbnQuJGV2YWwoYy5tb3VzZXdoZWVsKTpnLm1vdXNld2hlZWw7aSYmdGhpcy5zZXR1cE1vdXNld2hlZWxFdmVudHMoZSxmLGgpO3ZhciBqPWFuZ3VsYXIuaXNEZWZpbmVkKGMuYXJyb3drZXlzKT9hLiRwYXJlbnQuJGV2YWwoYy5hcnJvd2tleXMpOmcuYXJyb3drZXlzO2omJnRoaXMuc2V0dXBBcnJvd2tleUV2ZW50cyhlLGYsaCksYS5yZWFkb25seUlucHV0PWFuZ3VsYXIuaXNEZWZpbmVkKGMucmVhZG9ubHlJbnB1dCk/YS4kcGFyZW50LiRldmFsKGMucmVhZG9ubHlJbnB1dCk6Zy5yZWFkb25seUlucHV0LHRoaXMuc2V0dXBJbnB1dEV2ZW50cyhlLGYsaCl9O3ZhciBBPWcuaG91clN0ZXA7Yy5ob3VyU3RlcCYmdy5wdXNoKGEuJHBhcmVudC4kd2F0Y2goZChjLmhvdXJTdGVwKSxmdW5jdGlvbihhKXtBPSthfSkpO3ZhciBCPWcubWludXRlU3RlcDtjLm1pbnV0ZVN0ZXAmJncucHVzaChhLiRwYXJlbnQuJHdhdGNoKGQoYy5taW51dGVTdGVwKSxmdW5jdGlvbihhKXtCPSthfSkpO3ZhciBDO3cucHVzaChhLiRwYXJlbnQuJHdhdGNoKGQoYy5taW4pLGZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBEYXRlKGEpO0M9aXNOYU4oYik/dm9pZCAwOmJ9KSk7dmFyIEQ7dy5wdXNoKGEuJHBhcmVudC4kd2F0Y2goZChjLm1heCksZnVuY3Rpb24oYSl7dmFyIGI9bmV3IERhdGUoYSk7RD1pc05hTihiKT92b2lkIDA6Yn0pKTt2YXIgRT0hMTtjLm5nRGlzYWJsZWQmJncucHVzaChhLiRwYXJlbnQuJHdhdGNoKGQoYy5uZ0Rpc2FibGVkKSxmdW5jdGlvbihhKXtFPWF9KSksYS5ub0luY3JlbWVudEhvdXJzPWZ1bmN0aW9uKCl7dmFyIGE9cCh2LDYwKkEpO3JldHVybiBFfHxhPkR8fHY+YSYmQz5hfSxhLm5vRGVjcmVtZW50SG91cnM9ZnVuY3Rpb24oKXt2YXIgYT1wKHYsNjAqLUEpO3JldHVybiBFfHxDPmF8fGE+diYmYT5EfSxhLm5vSW5jcmVtZW50TWludXRlcz1mdW5jdGlvbigpe3ZhciBhPXAodixCKTtyZXR1cm4gRXx8YT5EfHx2PmEmJkM+YX0sYS5ub0RlY3JlbWVudE1pbnV0ZXM9ZnVuY3Rpb24oKXt2YXIgYT1wKHYsLUIpO3JldHVybiBFfHxDPmF8fGE+diYmYT5EfSxhLm5vSW5jcmVtZW50U2Vjb25kcz1mdW5jdGlvbigpe3ZhciBhPXEodixGKTtyZXR1cm4gRXx8YT5EfHx2PmEmJkM+YX0sYS5ub0RlY3JlbWVudFNlY29uZHM9ZnVuY3Rpb24oKXt2YXIgYT1xKHYsLUYpO3JldHVybiBFfHxDPmF8fGE+diYmYT5EfSxhLm5vVG9nZ2xlTWVyaWRpYW49ZnVuY3Rpb24oKXtyZXR1cm4gdi5nZXRIb3VycygpPDEyP0V8fHAodiw3MjApPkQ6RXx8cCh2LC03MjApPEN9O3ZhciBGPWcuc2Vjb25kU3RlcDtjLnNlY29uZFN0ZXAmJncucHVzaChhLiRwYXJlbnQuJHdhdGNoKGQoYy5zZWNvbmRTdGVwKSxmdW5jdGlvbihhKXtGPSthfSkpLGEuc2hvd1NlY29uZHM9Zy5zaG93U2Vjb25kcyxjLnNob3dTZWNvbmRzJiZ3LnB1c2goYS4kcGFyZW50LiR3YXRjaChkKGMuc2hvd1NlY29uZHMpLGZ1bmN0aW9uKGIpe2Euc2hvd1NlY29uZHM9ISFifSkpLGEuc2hvd01lcmlkaWFuPWcuc2hvd01lcmlkaWFuLGMuc2hvd01lcmlkaWFuJiZ3LnB1c2goYS4kcGFyZW50LiR3YXRjaChkKGMuc2hvd01lcmlkaWFuKSxmdW5jdGlvbihiKXtpZihhLnNob3dNZXJpZGlhbj0hIWIseC4kZXJyb3IudGltZSl7dmFyIGM9aCgpLGQ9aSgpO2FuZ3VsYXIuaXNEZWZpbmVkKGMpJiZhbmd1bGFyLmlzRGVmaW5lZChkKSYmKHYuc2V0SG91cnMoYyksbCgpKX1lbHNlIG4oKX0pKSx0aGlzLnNldHVwTW91c2V3aGVlbEV2ZW50cz1mdW5jdGlvbihiLGMsZCl7dmFyIGU9ZnVuY3Rpb24oYSl7YS5vcmlnaW5hbEV2ZW50JiYoYT1hLm9yaWdpbmFsRXZlbnQpO3ZhciBiPWEud2hlZWxEZWx0YT9hLndoZWVsRGVsdGE6LWEuZGVsdGFZO3JldHVybiBhLmRldGFpbHx8Yj4wfTtiLm9uKCJtb3VzZXdoZWVsIHdoZWVsIixmdW5jdGlvbihiKXtFfHxhLiRhcHBseShlKGIpP2EuaW5jcmVtZW50SG91cnMoKTphLmRlY3JlbWVudEhvdXJzKCkpLGIucHJldmVudERlZmF1bHQoKX0pLGMub24oIm1vdXNld2hlZWwgd2hlZWwiLGZ1bmN0aW9uKGIpe0V8fGEuJGFwcGx5KGUoYik/YS5pbmNyZW1lbnRNaW51dGVzKCk6YS5kZWNyZW1lbnRNaW51dGVzKCkpLGIucHJldmVudERlZmF1bHQoKX0pLGQub24oIm1vdXNld2hlZWwgd2hlZWwiLGZ1bmN0aW9uKGIpe0V8fGEuJGFwcGx5KGUoYik/YS5pbmNyZW1lbnRTZWNvbmRzKCk6YS5kZWNyZW1lbnRTZWNvbmRzKCkpLGIucHJldmVudERlZmF1bHQoKX0pfSx0aGlzLnNldHVwQXJyb3drZXlFdmVudHM9ZnVuY3Rpb24oYixjLGQpe2Iub24oImtleWRvd24iLGZ1bmN0aW9uKGIpe0V8fCgzOD09PWIud2hpY2g/KGIucHJldmVudERlZmF1bHQoKSxhLmluY3JlbWVudEhvdXJzKCksYS4kYXBwbHkoKSk6NDA9PT1iLndoaWNoJiYoYi5wcmV2ZW50RGVmYXVsdCgpLGEuZGVjcmVtZW50SG91cnMoKSxhLiRhcHBseSgpKSl9KSxjLm9uKCJrZXlkb3duIixmdW5jdGlvbihiKXtFfHwoMzg9PT1iLndoaWNoPyhiLnByZXZlbnREZWZhdWx0KCksYS5pbmNyZW1lbnRNaW51dGVzKCksYS4kYXBwbHkoKSk6NDA9PT1iLndoaWNoJiYoYi5wcmV2ZW50RGVmYXVsdCgpLGEuZGVjcmVtZW50TWludXRlcygpLGEuJGFwcGx5KCkpKX0pLGQub24oImtleWRvd24iLGZ1bmN0aW9uKGIpe0V8fCgzOD09PWIud2hpY2g/KGIucHJldmVudERlZmF1bHQoKSxhLmluY3JlbWVudFNlY29uZHMoKSxhLiRhcHBseSgpKTo0MD09PWIud2hpY2gmJihiLnByZXZlbnREZWZhdWx0KCksYS5kZWNyZW1lbnRTZWNvbmRzKCksYS4kYXBwbHkoKSkpfSl9LHRoaXMuc2V0dXBJbnB1dEV2ZW50cz1mdW5jdGlvbihiLGMsZCl7aWYoYS5yZWFkb25seUlucHV0KXJldHVybiBhLnVwZGF0ZUhvdXJzPWFuZ3VsYXIubm9vcCxhLnVwZGF0ZU1pbnV0ZXM9YW5ndWxhci5ub29wLHZvaWQoYS51cGRhdGVTZWNvbmRzPWFuZ3VsYXIubm9vcCk7dmFyIGU9ZnVuY3Rpb24oYixjLGQpe3guJHNldFZpZXdWYWx1ZShudWxsKSx4LiRzZXRWYWxpZGl0eSgidGltZSIsITEpLGFuZ3VsYXIuaXNEZWZpbmVkKGIpJiYoYS5pbnZhbGlkSG91cnM9YixzJiZzLiRzZXRWYWxpZGl0eSgiaG91cnMiLCExKSksYW5ndWxhci5pc0RlZmluZWQoYykmJihhLmludmFsaWRNaW51dGVzPWMsdCYmdC4kc2V0VmFsaWRpdHkoIm1pbnV0ZXMiLCExKSksYW5ndWxhci5pc0RlZmluZWQoZCkmJihhLmludmFsaWRTZWNvbmRzPWQsdSYmdS4kc2V0VmFsaWRpdHkoInNlY29uZHMiLCExKSl9O2EudXBkYXRlSG91cnM9ZnVuY3Rpb24oKXt2YXIgYT1oKCksYj1pKCk7eC4kc2V0RGlydHkoKSxhbmd1bGFyLmlzRGVmaW5lZChhKSYmYW5ndWxhci5pc0RlZmluZWQoYik/KHYuc2V0SG91cnMoYSksdi5zZXRNaW51dGVzKGIpLEM+dnx8dj5EP2UoITApOmwoImgiKSk6ZSghMCl9LGIub24oImJsdXIiLGZ1bmN0aW9uKGIpe3guJHNldFRvdWNoZWQoKSxyKCk/bSgpOm51bGw9PT1hLmhvdXJzfHwiIj09PWEuaG91cnM/ZSghMCk6IWEuaW52YWxpZEhvdXJzJiZhLmhvdXJzPDEwJiZhLiRhcHBseShmdW5jdGlvbigpe2EuaG91cnM9ayhhLmhvdXJzLCF6KX0pfSksYS51cGRhdGVNaW51dGVzPWZ1bmN0aW9uKCl7dmFyIGE9aSgpLGI9aCgpO3guJHNldERpcnR5KCksYW5ndWxhci5pc0RlZmluZWQoYSkmJmFuZ3VsYXIuaXNEZWZpbmVkKGIpPyh2LnNldEhvdXJzKGIpLHYuc2V0TWludXRlcyhhKSxDPnZ8fHY+RD9lKHZvaWQgMCwhMCk6bCgibSIpKTplKHZvaWQgMCwhMCl9LGMub24oImJsdXIiLGZ1bmN0aW9uKGIpe3guJHNldFRvdWNoZWQoKSxyKCk/bSgpOm51bGw9PT1hLm1pbnV0ZXM/ZSh2b2lkIDAsITApOiFhLmludmFsaWRNaW51dGVzJiZhLm1pbnV0ZXM8MTAmJmEuJGFwcGx5KGZ1bmN0aW9uKCl7YS5taW51dGVzPWsoYS5taW51dGVzKX0pfSksYS51cGRhdGVTZWNvbmRzPWZ1bmN0aW9uKCl7dmFyIGE9aigpO3guJHNldERpcnR5KCksYW5ndWxhci5pc0RlZmluZWQoYSk/KHYuc2V0U2Vjb25kcyhhKSxsKCJzIikpOmUodm9pZCAwLHZvaWQgMCwhMCl9LGQub24oImJsdXIiLGZ1bmN0aW9uKGIpe3IoKT9tKCk6IWEuaW52YWxpZFNlY29uZHMmJmEuc2Vjb25kczwxMCYmYS4kYXBwbHkoZnVuY3Rpb24oKXthLnNlY29uZHM9ayhhLnNlY29uZHMpfSl9KX0sdGhpcy5yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgYj14LiR2aWV3VmFsdWU7aXNOYU4oYik/KHguJHNldFZhbGlkaXR5KCJ0aW1lIiwhMSksZS5lcnJvcignVGltZXBpY2tlciBkaXJlY3RpdmU6ICJuZy1tb2RlbCIgdmFsdWUgbXVzdCBiZSBhIERhdGUgb2JqZWN0LCBhIG51bWJlciBvZiBtaWxsaXNlY29uZHMgc2luY2UgMDEuMDEuMTk3MCBvciBhIHN0cmluZyByZXByZXNlbnRpbmcgYW4gUkZDMjgyMiBvciBJU08gODYwMSBkYXRlLicpKTooYiYmKHY9YiksQz52fHx2PkQ/KHguJHNldFZhbGlkaXR5KCJ0aW1lIiwhMSksYS5pbnZhbGlkSG91cnM9ITAsYS5pbnZhbGlkTWludXRlcz0hMCk6bSgpLG4oKSl9LGEuc2hvd1NwaW5uZXJzPWFuZ3VsYXIuaXNEZWZpbmVkKGMuc2hvd1NwaW5uZXJzKT9hLiRwYXJlbnQuJGV2YWwoYy5zaG93U3Bpbm5lcnMpOmcuc2hvd1NwaW5uZXJzLGEuaW5jcmVtZW50SG91cnM9ZnVuY3Rpb24oKXthLm5vSW5jcmVtZW50SG91cnMoKXx8byg2MCpBKjYwKX0sYS5kZWNyZW1lbnRIb3Vycz1mdW5jdGlvbigpe2Eubm9EZWNyZW1lbnRIb3VycygpfHxvKDYwKi1BKjYwKX0sYS5pbmNyZW1lbnRNaW51dGVzPWZ1bmN0aW9uKCl7YS5ub0luY3JlbWVudE1pbnV0ZXMoKXx8byg2MCpCKX0sYS5kZWNyZW1lbnRNaW51dGVzPWZ1bmN0aW9uKCl7YS5ub0RlY3JlbWVudE1pbnV0ZXMoKXx8byg2MCotQil9LGEuaW5jcmVtZW50U2Vjb25kcz1mdW5jdGlvbigpe2Eubm9JbmNyZW1lbnRTZWNvbmRzKCl8fG8oRil9LGEuZGVjcmVtZW50U2Vjb25kcz1mdW5jdGlvbigpe2Eubm9EZWNyZW1lbnRTZWNvbmRzKCl8fG8oLUYpfSxhLnRvZ2dsZU1lcmlkaWFuPWZ1bmN0aW9uKCl7dmFyIGI9aSgpLGM9aCgpO2Eubm9Ub2dnbGVNZXJpZGlhbigpfHwoYW5ndWxhci5pc0RlZmluZWQoYikmJmFuZ3VsYXIuaXNEZWZpbmVkKGMpP28oNzIwKih2LmdldEhvdXJzKCk8MTI/NjA6LTYwKSk6YS5tZXJpZGlhbj1hLm1lcmlkaWFuPT09eVswXT95WzFdOnlbMF0pfSxhLmJsdXI9ZnVuY3Rpb24oKXt4LiRzZXRUb3VjaGVkKCl9LGEuJG9uKCIkZGVzdHJveSIsZnVuY3Rpb24oKXtmb3IoO3cubGVuZ3RoOyl3LnNoaWZ0KCkoKX0pfV0pLmRpcmVjdGl2ZSgidWliVGltZXBpY2tlciIsWyJ1aWJUaW1lcGlja2VyQ29uZmlnIixmdW5jdGlvbihhKXtyZXR1cm57cmVxdWlyZTpbInVpYlRpbWVwaWNrZXIiLCI/Xm5nTW9kZWwiXSxyZXN0cmljdDoiQSIsY29udHJvbGxlcjoiVWliVGltZXBpY2tlckNvbnRyb2xsZXIiLGNvbnRyb2xsZXJBczoidGltZXBpY2tlciIsc2NvcGU6e30sdGVtcGxhdGVVcmw6ZnVuY3Rpb24oYixjKXtyZXR1cm4gYy50ZW1wbGF0ZVVybHx8YS50ZW1wbGF0ZVVybH0sbGluazpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1kWzBdLGY9ZFsxXTtmJiZlLmluaXQoZixiLmZpbmQoImlucHV0IikpfX19XSksYW5ndWxhci5tb2R1bGUoInVpLmJvb3RzdHJhcC50eXBlYWhlYWQiLFsidWkuYm9vdHN0cmFwLmRlYm91bmNlIiwidWkuYm9vdHN0cmFwLnBvc2l0aW9uIl0pLmZhY3RvcnkoInVpYlR5cGVhaGVhZFBhcnNlciIsWyIkcGFyc2UiLGZ1bmN0aW9uKGEpe3ZhciBiPS9eXHMqKFtcc1xTXSs/KSg/OlxzK2FzXHMrKFtcc1xTXSs/KSk/XHMrZm9yXHMrKD86KFtcJFx3XVtcJFx3XGRdKikpXHMraW5ccysoW1xzXFNdKz8pJC87cmV0dXJue3BhcnNlOmZ1bmN0aW9uKGMpe3ZhciBkPWMubWF0Y2goYik7aWYoIWQpdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCB0eXBlYWhlYWQgc3BlY2lmaWNhdGlvbiBpbiBmb3JtIG9mICJfbW9kZWxWYWx1ZV8gKGFzIF9sYWJlbF8pPyBmb3IgX2l0ZW1fIGluIF9jb2xsZWN0aW9uXyIgYnV0IGdvdCAiJytjKyciLicpO3JldHVybntpdGVtTmFtZTpkWzNdLHNvdXJjZTphKGRbNF0pLHZpZXdNYXBwZXI6YShkWzJdfHxkWzFdKSxtb2RlbE1hcHBlcjphKGRbMV0pfX19fV0pLmNvbnRyb2xsZXIoIlVpYlR5cGVhaGVhZENvbnRyb2xsZXIiLFsiJHNjb3BlIiwiJGVsZW1lbnQiLCIkYXR0cnMiLCIkY29tcGlsZSIsIiRwYXJzZSIsIiRxIiwiJHRpbWVvdXQiLCIkZG9jdW1lbnQiLCIkd2luZG93IiwiJHJvb3RTY29wZSIsIiQkZGVib3VuY2UiLCIkdWliUG9zaXRpb24iLCJ1aWJUeXBlYWhlYWRQYXJzZXIiLGZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCxpLGosayxsLG0pe2Z1bmN0aW9uIG4oKXtQLm1vdmVJblByb2dyZXNzfHwoUC5tb3ZlSW5Qcm9ncmVzcz0hMCxQLiRkaWdlc3QoKSksJCgpfWZ1bmN0aW9uIG8oKXtQLnBvc2l0aW9uPUY/bC5vZmZzZXQoYik6bC5wb3NpdGlvbihiKSxQLnBvc2l0aW9uLnRvcCs9Yi5wcm9wKCJvZmZzZXRIZWlnaHQiKX1mdW5jdGlvbiBwKGEpe3ZhciBiO3JldHVybiBhbmd1bGFyLnZlcnNpb24ubWlub3I8Nj8oYj1hLiRvcHRpb25zfHx7fSxiLmdldE9wdGlvbj1mdW5jdGlvbihhKXtyZXR1cm4gYlthXX0pOmI9YS4kb3B0aW9ucyxifXZhciBxLHIscz1bOSwxMywyNywzOCw0MF0sdD0yMDAsdT1hLiRldmFsKGMudHlwZWFoZWFkTWluTGVuZ3RoKTt1fHwwPT09dXx8KHU9MSksYS4kd2F0Y2goYy50eXBlYWhlYWRNaW5MZW5ndGgsZnVuY3Rpb24oYSl7dT1hfHwwPT09YT9hOjF9KTt2YXIgdj1hLiRldmFsKGMudHlwZWFoZWFkV2FpdE1zKXx8MCx3PWEuJGV2YWwoYy50eXBlYWhlYWRFZGl0YWJsZSkhPT0hMTthLiR3YXRjaChjLnR5cGVhaGVhZEVkaXRhYmxlLGZ1bmN0aW9uKGEpe3c9YSE9PSExfSk7dmFyIHgseSx6PWUoYy50eXBlYWhlYWRMb2FkaW5nKS5hc3NpZ258fGFuZ3VsYXIubm9vcCxBPWMudHlwZWFoZWFkU2hvdWxkU2VsZWN0P2UoYy50eXBlYWhlYWRTaG91bGRTZWxlY3QpOmZ1bmN0aW9uKGEsYil7dmFyIGM9Yi4kZXZlbnQ7cmV0dXJuIDEzPT09Yy53aGljaHx8OT09PWMud2hpY2h9LEI9ZShjLnR5cGVhaGVhZE9uU2VsZWN0KSxDPWFuZ3VsYXIuaXNEZWZpbmVkKGMudHlwZWFoZWFkU2VsZWN0T25CbHVyKT9hLiRldmFsKGMudHlwZWFoZWFkU2VsZWN0T25CbHVyKTohMSxEPWUoYy50eXBlYWhlYWROb1Jlc3VsdHMpLmFzc2lnbnx8YW5ndWxhci5ub29wLEU9Yy50eXBlYWhlYWRJbnB1dEZvcm1hdHRlcj9lKGMudHlwZWFoZWFkSW5wdXRGb3JtYXR0ZXIpOnZvaWQgMCxGPWMudHlwZWFoZWFkQXBwZW5kVG9Cb2R5P2EuJGV2YWwoYy50eXBlYWhlYWRBcHBlbmRUb0JvZHkpOiExLEc9Yy50eXBlYWhlYWRBcHBlbmRUbz9hLiRldmFsKGMudHlwZWFoZWFkQXBwZW5kVG8pOm51bGwsSD1hLiRldmFsKGMudHlwZWFoZWFkRm9jdXNGaXJzdCkhPT0hMSxJPWMudHlwZWFoZWFkU2VsZWN0T25FeGFjdD9hLiRldmFsKGMudHlwZWFoZWFkU2VsZWN0T25FeGFjdCk6ITEsSj1lKGMudHlwZWFoZWFkSXNPcGVuKS5hc3NpZ258fGFuZ3VsYXIubm9vcCxLPWEuJGV2YWwoYy50eXBlYWhlYWRTaG93SGludCl8fCExLEw9ZShjLm5nTW9kZWwpLE09ZShjLm5nTW9kZWwrIigkJCRwKSIpLE49ZnVuY3Rpb24oYixjKXtyZXR1cm4gYW5ndWxhci5pc0Z1bmN0aW9uKEwoYSkpJiZyLmdldE9wdGlvbigiZ2V0dGVyU2V0dGVyIik/TShiLHskJCRwOmN9KTpMLmFzc2lnbihiLGMpfSxPPW0ucGFyc2UoYy51aWJUeXBlYWhlYWQpLFA9YS4kbmV3KCksUT1hLiRvbigiJGRlc3Ryb3kiLGZ1bmN0aW9uKCl7UC4kZGVzdHJveSgpfSk7UC4kb24oIiRkZXN0cm95IixRKTt2YXIgUj0idHlwZWFoZWFkLSIrUC4kaWQrIi0iK01hdGguZmxvb3IoMWU0Kk1hdGgucmFuZG9tKCkpO2IuYXR0cih7ImFyaWEtYXV0b2NvbXBsZXRlIjoibGlzdCIsImFyaWEtZXhwYW5kZWQiOiExLCJhcmlhLW93bnMiOlJ9KTt2YXIgUyxUO0smJihTPWFuZ3VsYXIuZWxlbWVudCgiPGRpdj48L2Rpdj4iKSxTLmNzcygicG9zaXRpb24iLCJyZWxhdGl2ZSIpLGIuYWZ0ZXIoUyksVD1iLmNsb25lKCksVC5hdHRyKCJwbGFjZWhvbGRlciIsIiIpLFQuYXR0cigidGFiaW5kZXgiLCItMSIpLFQudmFsKCIiKSxULmNzcyh7cG9zaXRpb246ImFic29sdXRlIix0b3A6IjBweCIsbGVmdDoiMHB4IiwiYm9yZGVyLWNvbG9yIjoidHJhbnNwYXJlbnQiLCJib3gtc2hhZG93Ijoibm9uZSIsb3BhY2l0eToxLGJhY2tncm91bmQ6Im5vbmUgMCUgMCUgLyBhdXRvIHJlcGVhdCBzY3JvbGwgcGFkZGluZy1ib3ggYm9yZGVyLWJveCByZ2IoMjU1LCAyNTUsIDI1NSkiLGNvbG9yOiIjOTk5In0pLGIuY3NzKHtwb3NpdGlvbjoicmVsYXRpdmUiLCJ2ZXJ0aWNhbC1hbGlnbiI6InRvcCIsImJhY2tncm91bmQtY29sb3IiOiJ0cmFuc3BhcmVudCJ9KSxULmF0dHIoImlkIikmJlQucmVtb3ZlQXR0cigiaWQiKSxTLmFwcGVuZChUKSxULmFmdGVyKGIpKTt2YXIgVT1hbmd1bGFyLmVsZW1lbnQoIjxkaXYgdWliLXR5cGVhaGVhZC1wb3B1cD48L2Rpdj4iKTtVLmF0dHIoe2lkOlIsbWF0Y2hlczoibWF0Y2hlcyIsYWN0aXZlOiJhY3RpdmVJZHgiLHNlbGVjdDoic2VsZWN0KGFjdGl2ZUlkeCwgZXZ0KSIsIm1vdmUtaW4tcHJvZ3Jlc3MiOiJtb3ZlSW5Qcm9ncmVzcyIscXVlcnk6InF1ZXJ5Iixwb3NpdGlvbjoicG9zaXRpb24iLCJhc3NpZ24taXMtb3BlbiI6ImFzc2lnbklzT3Blbihpc09wZW4pIixkZWJvdW5jZToiZGVib3VuY2VVcGRhdGUifSksYW5ndWxhci5pc0RlZmluZWQoYy50eXBlYWhlYWRUZW1wbGF0ZVVybCkmJlUuYXR0cigidGVtcGxhdGUtdXJsIixjLnR5cGVhaGVhZFRlbXBsYXRlVXJsKSxhbmd1bGFyLmlzRGVmaW5lZChjLnR5cGVhaGVhZFBvcHVwVGVtcGxhdGVVcmwpJiZVLmF0dHIoInBvcHVwLXRlbXBsYXRlLXVybCIsYy50eXBlYWhlYWRQb3B1cFRlbXBsYXRlVXJsKTt2YXIgVj1mdW5jdGlvbigpe0smJlQudmFsKCIiKX0sVz1mdW5jdGlvbigpe1AubWF0Y2hlcz1bXSxQLmFjdGl2ZUlkeD0tMSxiLmF0dHIoImFyaWEtZXhwYW5kZWQiLCExKSxWKCl9LFg9ZnVuY3Rpb24oYSl7cmV0dXJuIFIrIi1vcHRpb24tIithfTtQLiR3YXRjaCgiYWN0aXZlSWR4IixmdW5jdGlvbihhKXswPmE/Yi5yZW1vdmVBdHRyKCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnQiKTpiLmF0dHIoImFyaWEtYWN0aXZlZGVzY2VuZGFudCIsWChhKSl9KTt2YXIgWT1mdW5jdGlvbihhLGIpe3JldHVybiBQLm1hdGNoZXMubGVuZ3RoPmImJmE/YS50b1VwcGVyQ2FzZSgpPT09UC5tYXRjaGVzW2JdLmxhYmVsLnRvVXBwZXJDYXNlKCk6ITF9LFo9ZnVuY3Rpb24oYyxkKXt2YXIgZT17JHZpZXdWYWx1ZTpjfTt6KGEsITApLEQoYSwhMSksZi53aGVuKE8uc291cmNlKGEsZSkpLnRoZW4oZnVuY3Rpb24oZil7dmFyIGc9Yz09PXEuJHZpZXdWYWx1ZTtpZihnJiZ4KWlmKGYmJmYubGVuZ3RoPjApe1AuYWN0aXZlSWR4PUg/MDotMSxEKGEsITEpLFAubWF0Y2hlcy5sZW5ndGg9MDtmb3IodmFyIGg9MDtoPGYubGVuZ3RoO2grKyllW08uaXRlbU5hbWVdPWZbaF0sUC5tYXRjaGVzLnB1c2goe2lkOlgoaCksbGFiZWw6Ty52aWV3TWFwcGVyKFAsZSksbW9kZWw6ZltoXX0pO2lmKFAucXVlcnk9YyxvKCksYi5hdHRyKCJhcmlhLWV4cGFuZGVkIiwhMCksSSYmMT09PVAubWF0Y2hlcy5sZW5ndGgmJlkoYywwKSYmKGFuZ3VsYXIuaXNOdW1iZXIoUC5kZWJvdW5jZVVwZGF0ZSl8fGFuZ3VsYXIuaXNPYmplY3QoUC5kZWJvdW5jZVVwZGF0ZSk/ayhmdW5jdGlvbigpe1Auc2VsZWN0KDAsZCl9LGFuZ3VsYXIuaXNOdW1iZXIoUC5kZWJvdW5jZVVwZGF0ZSk/UC5kZWJvdW5jZVVwZGF0ZTpQLmRlYm91bmNlVXBkYXRlWyJkZWZhdWx0Il0pOlAuc2VsZWN0KDAsZCkpLEspe3ZhciBpPVAubWF0Y2hlc1swXS5sYWJlbDthbmd1bGFyLmlzU3RyaW5nKGMpJiZjLmxlbmd0aD4wJiZpLnNsaWNlKDAsYy5sZW5ndGgpLnRvVXBwZXJDYXNlKCk9PT1jLnRvVXBwZXJDYXNlKCk/VC52YWwoYytpLnNsaWNlKGMubGVuZ3RoKSk6VC52YWwoIiIpfX1lbHNlIFcoKSxEKGEsITApO2cmJnooYSwhMSl9LGZ1bmN0aW9uKCl7VygpLHooYSwhMSksRChhLCEwKX0pfTtGJiYoYW5ndWxhci5lbGVtZW50KGkpLm9uKCJyZXNpemUiLG4pLGguZmluZCgiYm9keSIpLm9uKCJzY3JvbGwiLG4pKTt2YXIgJD1rKGZ1bmN0aW9uKCl7UC5tYXRjaGVzLmxlbmd0aCYmbygpLFAubW92ZUluUHJvZ3Jlc3M9ITF9LHQpO1AubW92ZUluUHJvZ3Jlc3M9ITEsUC5xdWVyeT12b2lkIDA7dmFyIF8sYWE9ZnVuY3Rpb24oYSl7Xz1nKGZ1bmN0aW9uKCl7WihhKX0sdil9LGJhPWZ1bmN0aW9uKCl7XyYmZy5jYW5jZWwoXyl9O1coKSxQLmFzc2lnbklzT3Blbj1mdW5jdGlvbihiKXtKKGEsYil9LFAuc2VsZWN0PWZ1bmN0aW9uKGQsZSl7dmFyIGYsaCxpPXt9O3k9ITAsaVtPLml0ZW1OYW1lXT1oPVAubWF0Y2hlc1tkXS5tb2RlbCxmPU8ubW9kZWxNYXBwZXIoYSxpKSxOKGEsZikscS4kc2V0VmFsaWRpdHkoImVkaXRhYmxlIiwhMCkscS4kc2V0VmFsaWRpdHkoInBhcnNlIiwhMCksQihhLHskaXRlbTpoLCRtb2RlbDpmLCRsYWJlbDpPLnZpZXdNYXBwZXIoYSxpKSwkZXZlbnQ6ZX0pLFcoKSxQLiRldmFsKGMudHlwZWFoZWFkRm9jdXNPblNlbGVjdCkhPT0hMSYmZyhmdW5jdGlvbigpe2JbMF0uZm9jdXMoKX0sMCwhMSl9LGIub24oImtleWRvd24iLGZ1bmN0aW9uKGIpe2lmKDAhPT1QLm1hdGNoZXMubGVuZ3RoJiYtMSE9PXMuaW5kZXhPZihiLndoaWNoKSl7dmFyIGM9QShhLHskZXZlbnQ6Yn0pO2lmKC0xPT09UC5hY3RpdmVJZHgmJmN8fDk9PT1iLndoaWNoJiZiLnNoaWZ0S2V5KXJldHVybiBXKCksdm9pZCBQLiRkaWdlc3QoKTtiLnByZXZlbnREZWZhdWx0KCk7dmFyIGQ7c3dpdGNoKGIud2hpY2gpe2Nhc2UgMjc6Yi5zdG9wUHJvcGFnYXRpb24oKSxXKCksYS4kZGlnZXN0KCk7YnJlYWs7Y2FzZSAzODpQLmFjdGl2ZUlkeD0oUC5hY3RpdmVJZHg+MD9QLmFjdGl2ZUlkeDpQLm1hdGNoZXMubGVuZ3RoKS0xLFAuJGRpZ2VzdCgpLGQ9VVswXS5xdWVyeVNlbGVjdG9yQWxsKCIudWliLXR5cGVhaGVhZC1tYXRjaCIpW1AuYWN0aXZlSWR4XSxkLnBhcmVudE5vZGUuc2Nyb2xsVG9wPWQub2Zmc2V0VG9wO2JyZWFrO2Nhc2UgNDA6UC5hY3RpdmVJZHg9KFAuYWN0aXZlSWR4KzEpJVAubWF0Y2hlcy5sZW5ndGgsUC4kZGlnZXN0KCksZD1VWzBdLnF1ZXJ5U2VsZWN0b3JBbGwoIi51aWItdHlwZWFoZWFkLW1hdGNoIilbUC5hY3RpdmVJZHhdLAogICAgZC5wYXJlbnROb2RlLnNjcm9sbFRvcD1kLm9mZnNldFRvcDticmVhaztkZWZhdWx0OmMmJlAuJGFwcGx5KGZ1bmN0aW9uKCl7YW5ndWxhci5pc051bWJlcihQLmRlYm91bmNlVXBkYXRlKXx8YW5ndWxhci5pc09iamVjdChQLmRlYm91bmNlVXBkYXRlKT9rKGZ1bmN0aW9uKCl7UC5zZWxlY3QoUC5hY3RpdmVJZHgsYil9LGFuZ3VsYXIuaXNOdW1iZXIoUC5kZWJvdW5jZVVwZGF0ZSk/UC5kZWJvdW5jZVVwZGF0ZTpQLmRlYm91bmNlVXBkYXRlWyJkZWZhdWx0Il0pOlAuc2VsZWN0KFAuYWN0aXZlSWR4LGIpfSl9fX0pLGIub24oImZvY3VzIixmdW5jdGlvbihhKXt4PSEwLDAhPT11fHxxLiR2aWV3VmFsdWV8fGcoZnVuY3Rpb24oKXtaKHEuJHZpZXdWYWx1ZSxhKX0sMCl9KSxiLm9uKCJibHVyIixmdW5jdGlvbihhKXtDJiZQLm1hdGNoZXMubGVuZ3RoJiYtMSE9PVAuYWN0aXZlSWR4JiYheSYmKHk9ITAsUC4kYXBwbHkoZnVuY3Rpb24oKXthbmd1bGFyLmlzT2JqZWN0KFAuZGVib3VuY2VVcGRhdGUpJiZhbmd1bGFyLmlzTnVtYmVyKFAuZGVib3VuY2VVcGRhdGUuYmx1cik/ayhmdW5jdGlvbigpe1Auc2VsZWN0KFAuYWN0aXZlSWR4LGEpfSxQLmRlYm91bmNlVXBkYXRlLmJsdXIpOlAuc2VsZWN0KFAuYWN0aXZlSWR4LGEpfSkpLCF3JiZxLiRlcnJvci5lZGl0YWJsZSYmKHEuJHNldFZpZXdWYWx1ZSgpLFAuJGFwcGx5KGZ1bmN0aW9uKCl7cS4kc2V0VmFsaWRpdHkoImVkaXRhYmxlIiwhMCkscS4kc2V0VmFsaWRpdHkoInBhcnNlIiwhMCl9KSxiLnZhbCgiIikpLHg9ITEseT0hMX0pO3ZhciBjYT1mdW5jdGlvbihjKXtiWzBdIT09Yy50YXJnZXQmJjMhPT1jLndoaWNoJiYwIT09UC5tYXRjaGVzLmxlbmd0aCYmKFcoKSxqLiQkcGhhc2V8fGEuJGRpZ2VzdCgpKX07aC5vbigiY2xpY2siLGNhKSxhLiRvbigiJGRlc3Ryb3kiLGZ1bmN0aW9uKCl7aC5vZmYoImNsaWNrIixjYSksKEZ8fEcpJiZkYS5yZW1vdmUoKSxGJiYoYW5ndWxhci5lbGVtZW50KGkpLm9mZigicmVzaXplIixuKSxoLmZpbmQoImJvZHkiKS5vZmYoInNjcm9sbCIsbikpLFUucmVtb3ZlKCksSyYmUy5yZW1vdmUoKX0pO3ZhciBkYT1kKFUpKFApO0Y/aC5maW5kKCJib2R5IikuYXBwZW5kKGRhKTpHP2FuZ3VsYXIuZWxlbWVudChHKS5lcSgwKS5hcHBlbmQoZGEpOmIuYWZ0ZXIoZGEpLHRoaXMuaW5pdD1mdW5jdGlvbihiKXtxPWIscj1wKHEpLFAuZGVib3VuY2VVcGRhdGU9ZShyLmdldE9wdGlvbigiZGVib3VuY2UiKSkoYSkscS4kcGFyc2Vycy51bnNoaWZ0KGZ1bmN0aW9uKGIpe3JldHVybiB4PSEwLDA9PT11fHxiJiZiLmxlbmd0aD49dT92PjA/KGJhKCksYWEoYikpOlooYik6KHooYSwhMSksYmEoKSxXKCkpLHc/YjpiP3ZvaWQgcS4kc2V0VmFsaWRpdHkoImVkaXRhYmxlIiwhMSk6KHEuJHNldFZhbGlkaXR5KCJlZGl0YWJsZSIsITApLG51bGwpfSkscS4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKGIpe3ZhciBjLGQsZT17fTtyZXR1cm4gd3x8cS4kc2V0VmFsaWRpdHkoImVkaXRhYmxlIiwhMCksRT8oZS4kbW9kZWw9YixFKGEsZSkpOihlW08uaXRlbU5hbWVdPWIsYz1PLnZpZXdNYXBwZXIoYSxlKSxlW08uaXRlbU5hbWVdPXZvaWQgMCxkPU8udmlld01hcHBlcihhLGUpLGMhPT1kP2M6Yil9KX19XSkuZGlyZWN0aXZlKCJ1aWJUeXBlYWhlYWQiLGZ1bmN0aW9uKCl7cmV0dXJue2NvbnRyb2xsZXI6IlVpYlR5cGVhaGVhZENvbnRyb2xsZXIiLHJlcXVpcmU6WyJuZ01vZGVsIiwidWliVHlwZWFoZWFkIl0sbGluazpmdW5jdGlvbihhLGIsYyxkKXtkWzFdLmluaXQoZFswXSl9fX0pLmRpcmVjdGl2ZSgidWliVHlwZWFoZWFkUG9wdXAiLFsiJCRkZWJvdW5jZSIsZnVuY3Rpb24oYSl7cmV0dXJue3Njb3BlOnttYXRjaGVzOiI9IixxdWVyeToiPSIsYWN0aXZlOiI9Iixwb3NpdGlvbjoiJiIsbW92ZUluUHJvZ3Jlc3M6Ij0iLHNlbGVjdDoiJiIsYXNzaWduSXNPcGVuOiImIixkZWJvdW5jZToiJiJ9LHJlcGxhY2U6ITAsdGVtcGxhdGVVcmw6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi5wb3B1cFRlbXBsYXRlVXJsfHwidWliL3RlbXBsYXRlL3R5cGVhaGVhZC90eXBlYWhlYWQtcG9wdXAuaHRtbCJ9LGxpbms6ZnVuY3Rpb24oYixjLGQpe2IudGVtcGxhdGVVcmw9ZC50ZW1wbGF0ZVVybCxiLmlzT3Blbj1mdW5jdGlvbigpe3ZhciBhPWIubWF0Y2hlcy5sZW5ndGg+MDtyZXR1cm4gYi5hc3NpZ25Jc09wZW4oe2lzT3BlbjphfSksYX0sYi5pc0FjdGl2ZT1mdW5jdGlvbihhKXtyZXR1cm4gYi5hY3RpdmU9PT1hfSxiLnNlbGVjdEFjdGl2ZT1mdW5jdGlvbihhKXtiLmFjdGl2ZT1hfSxiLnNlbGVjdE1hdGNoPWZ1bmN0aW9uKGMsZCl7dmFyIGU9Yi5kZWJvdW5jZSgpO2FuZ3VsYXIuaXNOdW1iZXIoZSl8fGFuZ3VsYXIuaXNPYmplY3QoZSk/YShmdW5jdGlvbigpe2Iuc2VsZWN0KHthY3RpdmVJZHg6YyxldnQ6ZH0pfSxhbmd1bGFyLmlzTnVtYmVyKGUpP2U6ZVsiZGVmYXVsdCJdKTpiLnNlbGVjdCh7YWN0aXZlSWR4OmMsZXZ0OmR9KX19fX1dKS5kaXJlY3RpdmUoInVpYlR5cGVhaGVhZE1hdGNoIixbIiR0ZW1wbGF0ZVJlcXVlc3QiLCIkY29tcGlsZSIsIiRwYXJzZSIsZnVuY3Rpb24oYSxiLGMpe3JldHVybntzY29wZTp7aW5kZXg6Ij0iLG1hdGNoOiI9IixxdWVyeToiPSJ9LGxpbms6ZnVuY3Rpb24oZCxlLGYpe3ZhciBnPWMoZi50ZW1wbGF0ZVVybCkoZC4kcGFyZW50KXx8InVpYi90ZW1wbGF0ZS90eXBlYWhlYWQvdHlwZWFoZWFkLW1hdGNoLmh0bWwiO2EoZykudGhlbihmdW5jdGlvbihhKXt2YXIgYz1hbmd1bGFyLmVsZW1lbnQoYS50cmltKCkpO2UucmVwbGFjZVdpdGgoYyksYihjKShkKX0pfX19XSkuZmlsdGVyKCJ1aWJUeXBlYWhlYWRIaWdobGlnaHQiLFsiJHNjZSIsIiRpbmplY3RvciIsIiRsb2ciLGZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKGEpe3JldHVybiBhLnJlcGxhY2UoLyhbLj8qK14kW1xdXFwoKXt9fC1dKS9nLCJcXCQxIil9ZnVuY3Rpb24gZShhKXtyZXR1cm4vPC4qPi9nLnRlc3QoYSl9dmFyIGY7cmV0dXJuIGY9Yi5oYXMoIiRzYW5pdGl6ZSIpLGZ1bmN0aW9uKGIsZyl7cmV0dXJuIWYmJmUoYikmJmMud2FybigiVW5zYWZlIHVzZSBvZiB0eXBlYWhlYWQgcGxlYXNlIHVzZSBuZ1Nhbml0aXplIiksYj1nPygiIitiKS5yZXBsYWNlKG5ldyBSZWdFeHAoZChnKSwiZ2kiKSwiPHN0cm9uZz4kJjwvc3Ryb25nPiIpOmIsZnx8KGI9YS50cnVzdEFzSHRtbChiKSksYn19XSksYW5ndWxhci5tb2R1bGUoInVpYi90ZW1wbGF0ZS9hY2NvcmRpb24vYWNjb3JkaW9uLWdyb3VwLmh0bWwiLFtdKS5ydW4oWyIkdGVtcGxhdGVDYWNoZSIsZnVuY3Rpb24oYSl7YS5wdXQoInVpYi90ZW1wbGF0ZS9hY2NvcmRpb24vYWNjb3JkaW9uLWdyb3VwLmh0bWwiLCc8ZGl2IHJvbGU9InRhYiIgaWQ9Int7OjpoZWFkaW5nSWR9fSIgYXJpYS1zZWxlY3RlZD0ie3tpc09wZW59fSIgY2xhc3M9InBhbmVsLWhlYWRpbmciIG5nLWtleXByZXNzPSJ0b2dnbGVPcGVuKCRldmVudCkiPlxuICA8aDQgY2xhc3M9InBhbmVsLXRpdGxlIj5cbiAgICA8YSByb2xlPSJidXR0b24iIGRhdGEtdG9nZ2xlPSJjb2xsYXBzZSIgaHJlZiBhcmlhLWV4cGFuZGVkPSJ7e2lzT3Blbn19IiBhcmlhLWNvbnRyb2xzPSJ7ezo6cGFuZWxJZH19IiB0YWJpbmRleD0iMCIgY2xhc3M9ImFjY29yZGlvbi10b2dnbGUiIG5nLWNsaWNrPSJ0b2dnbGVPcGVuKCkiIHVpYi1hY2NvcmRpb24tdHJhbnNjbHVkZT0iaGVhZGluZyIgbmctZGlzYWJsZWQ9ImlzRGlzYWJsZWQiIHVpYi10YWJpbmRleC10b2dnbGU+PHNwYW4gdWliLWFjY29yZGlvbi1oZWFkZXIgbmctY2xhc3M9IntcJ3RleHQtbXV0ZWRcJzogaXNEaXNhYmxlZH0iPnt7aGVhZGluZ319PC9zcGFuPjwvYT5cbiAgPC9oND5cbjwvZGl2PlxuPGRpdiBpZD0ie3s6OnBhbmVsSWR9fSIgYXJpYS1sYWJlbGxlZGJ5PSJ7ezo6aGVhZGluZ0lkfX0iIGFyaWEtaGlkZGVuPSJ7eyFpc09wZW59fSIgcm9sZT0idGFicGFuZWwiIGNsYXNzPSJwYW5lbC1jb2xsYXBzZSBjb2xsYXBzZSIgdWliLWNvbGxhcHNlPSIhaXNPcGVuIj5cbiAgPGRpdiBjbGFzcz0icGFuZWwtYm9keSIgbmctdHJhbnNjbHVkZT48L2Rpdj5cbjwvZGl2PlxuJyl9XSksYW5ndWxhci5tb2R1bGUoInVpYi90ZW1wbGF0ZS9hY2NvcmRpb24vYWNjb3JkaW9uLmh0bWwiLFtdKS5ydW4oWyIkdGVtcGxhdGVDYWNoZSIsZnVuY3Rpb24oYSl7YS5wdXQoInVpYi90ZW1wbGF0ZS9hY2NvcmRpb24vYWNjb3JkaW9uLmh0bWwiLCc8ZGl2IHJvbGU9InRhYmxpc3QiIGNsYXNzPSJwYW5lbC1ncm91cCIgbmctdHJhbnNjbHVkZT48L2Rpdj4nKX1dKSxhbmd1bGFyLm1vZHVsZSgidWliL3RlbXBsYXRlL2FsZXJ0L2FsZXJ0Lmh0bWwiLFtdKS5ydW4oWyIkdGVtcGxhdGVDYWNoZSIsZnVuY3Rpb24oYSl7YS5wdXQoInVpYi90ZW1wbGF0ZS9hbGVydC9hbGVydC5odG1sIiwnPGJ1dHRvbiBuZy1zaG93PSJjbG9zZWFibGUiIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImNsb3NlIiBuZy1jbGljaz0iY2xvc2UoeyRldmVudDogJGV2ZW50fSkiPlxuICA8c3BhbiBhcmlhLWhpZGRlbj0idHJ1ZSI+JnRpbWVzOzwvc3Bhbj5cbiAgPHNwYW4gY2xhc3M9InNyLW9ubHkiPkNsb3NlPC9zcGFuPlxuPC9idXR0b24+XG48ZGl2IG5nLXRyYW5zY2x1ZGU+PC9kaXY+XG4nKX1dKSxhbmd1bGFyLm1vZHVsZSgidWliL3RlbXBsYXRlL2Nhcm91c2VsL2Nhcm91c2VsLmh0bWwiLFtdKS5ydW4oWyIkdGVtcGxhdGVDYWNoZSIsZnVuY3Rpb24oYSl7YS5wdXQoInVpYi90ZW1wbGF0ZS9jYXJvdXNlbC9jYXJvdXNlbC5odG1sIiwnPGRpdiBjbGFzcz0iY2Fyb3VzZWwtaW5uZXIiIG5nLXRyYW5zY2x1ZGU+PC9kaXY+XG48YSByb2xlPSJidXR0b24iIGhyZWYgY2xhc3M9ImxlZnQgY2Fyb3VzZWwtY29udHJvbCIgbmctY2xpY2s9InByZXYoKSIgbmctY2xhc3M9InsgZGlzYWJsZWQ6IGlzUHJldkRpc2FibGVkKCkgfSIgbmctc2hvdz0ic2xpZGVzLmxlbmd0aCA+IDEiPlxuICA8c3BhbiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9ImdseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi1sZWZ0Ij48L3NwYW4+XG4gIDxzcGFuIGNsYXNzPSJzci1vbmx5Ij5wcmV2aW91czwvc3Bhbj5cbjwvYT5cbjxhIHJvbGU9ImJ1dHRvbiIgaHJlZiBjbGFzcz0icmlnaHQgY2Fyb3VzZWwtY29udHJvbCIgbmctY2xpY2s9Im5leHQoKSIgbmctY2xhc3M9InsgZGlzYWJsZWQ6IGlzTmV4dERpc2FibGVkKCkgfSIgbmctc2hvdz0ic2xpZGVzLmxlbmd0aCA+IDEiPlxuICA8c3BhbiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9ImdseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi1yaWdodCI+PC9zcGFuPlxuICA8c3BhbiBjbGFzcz0ic3Itb25seSI+bmV4dDwvc3Bhbj5cbjwvYT5cbjxvbCBjbGFzcz0iY2Fyb3VzZWwtaW5kaWNhdG9ycyIgbmctc2hvdz0ic2xpZGVzLmxlbmd0aCA+IDEiPlxuICA8bGkgbmctcmVwZWF0PSJzbGlkZSBpbiBzbGlkZXMgfCBvcmRlckJ5OmluZGV4T2ZTbGlkZSB0cmFjayBieSAkaW5kZXgiIG5nLWNsYXNzPSJ7IGFjdGl2ZTogaXNBY3RpdmUoc2xpZGUpIH0iIG5nLWNsaWNrPSJzZWxlY3Qoc2xpZGUpIj5cbiAgICA8c3BhbiBjbGFzcz0ic3Itb25seSI+c2xpZGUge3sgJGluZGV4ICsgMSB9fSBvZiB7eyBzbGlkZXMubGVuZ3RoIH19PHNwYW4gbmctaWY9ImlzQWN0aXZlKHNsaWRlKSI+LCBjdXJyZW50bHkgYWN0aXZlPC9zcGFuPjwvc3Bhbj5cbiAgPC9saT5cbjwvb2w+XG4nKX1dKSxhbmd1bGFyLm1vZHVsZSgidWliL3RlbXBsYXRlL2Nhcm91c2VsL3NsaWRlLmh0bWwiLFtdKS5ydW4oWyIkdGVtcGxhdGVDYWNoZSIsZnVuY3Rpb24oYSl7YS5wdXQoInVpYi90ZW1wbGF0ZS9jYXJvdXNlbC9zbGlkZS5odG1sIiwnPGRpdiBjbGFzcz0idGV4dC1jZW50ZXIiIG5nLXRyYW5zY2x1ZGU+PC9kaXY+XG4nKX1dKSxhbmd1bGFyLm1vZHVsZSgidWliL3RlbXBsYXRlL2RhdGVwaWNrZXIvZGF0ZXBpY2tlci5odG1sIixbXSkucnVuKFsiJHRlbXBsYXRlQ2FjaGUiLGZ1bmN0aW9uKGEpe2EucHV0KCJ1aWIvdGVtcGxhdGUvZGF0ZXBpY2tlci9kYXRlcGlja2VyLmh0bWwiLCc8ZGl2IG5nLXN3aXRjaD0iZGF0ZXBpY2tlck1vZGUiPlxuICA8ZGl2IHVpYi1kYXlwaWNrZXIgbmctc3dpdGNoLXdoZW49ImRheSIgdGFiaW5kZXg9IjAiIGNsYXNzPSJ1aWItZGF5cGlja2VyIj48L2Rpdj5cbiAgPGRpdiB1aWItbW9udGhwaWNrZXIgbmctc3dpdGNoLXdoZW49Im1vbnRoIiB0YWJpbmRleD0iMCIgY2xhc3M9InVpYi1tb250aHBpY2tlciI+PC9kaXY+XG4gIDxkaXYgdWliLXllYXJwaWNrZXIgbmctc3dpdGNoLXdoZW49InllYXIiIHRhYmluZGV4PSIwIiBjbGFzcz0idWliLXllYXJwaWNrZXIiPjwvZGl2PlxuPC9kaXY+XG4nKX1dKSxhbmd1bGFyLm1vZHVsZSgidWliL3RlbXBsYXRlL2RhdGVwaWNrZXIvZGF5Lmh0bWwiLFtdKS5ydW4oWyIkdGVtcGxhdGVDYWNoZSIsZnVuY3Rpb24oYSl7YS5wdXQoInVpYi90ZW1wbGF0ZS9kYXRlcGlja2VyL2RheS5odG1sIiwnPHRhYmxlIHJvbGU9ImdyaWQiIGFyaWEtbGFiZWxsZWRieT0ie3s6OnVuaXF1ZUlkfX0tdGl0bGUiIGFyaWEtYWN0aXZlZGVzY2VuZGFudD0ie3thY3RpdmVEYXRlSWR9fSI+XG4gIDx0aGVhZD5cbiAgICA8dHI+XG4gICAgICA8dGg+PGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLWRlZmF1bHQgYnRuLXNtIHB1bGwtbGVmdCB1aWItbGVmdCIgbmctY2xpY2s9Im1vdmUoLTEpIiB0YWJpbmRleD0iLTEiPjxpIGFyaWEtaGlkZGVuPSJ0cnVlIiBjbGFzcz0iZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLWxlZnQiPjwvaT48c3BhbiBjbGFzcz0ic3Itb25seSI+cHJldmlvdXM8L3NwYW4+PC9idXR0b24+PC90aD5cbiAgICAgIDx0aCBjb2xzcGFuPSJ7ezo6NSArIHNob3dXZWVrc319Ij48YnV0dG9uIGlkPSJ7ezo6dW5pcXVlSWR9fS10aXRsZSIgcm9sZT0iaGVhZGluZyIgYXJpYS1saXZlPSJhc3NlcnRpdmUiIGFyaWEtYXRvbWljPSJ0cnVlIiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLWRlZmF1bHQgYnRuLXNtIHVpYi10aXRsZSIgbmctY2xpY2s9InRvZ2dsZU1vZGUoKSIgbmctZGlzYWJsZWQ9ImRhdGVwaWNrZXJNb2RlID09PSBtYXhNb2RlIiB0YWJpbmRleD0iLTEiPjxzdHJvbmc+e3t0aXRsZX19PC9zdHJvbmc+PC9idXR0b24+PC90aD5cbiAgICAgIDx0aD48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImJ0biBidG4tZGVmYXVsdCBidG4tc20gcHVsbC1yaWdodCB1aWItcmlnaHQiIG5nLWNsaWNrPSJtb3ZlKDEpIiB0YWJpbmRleD0iLTEiPjxpIGFyaWEtaGlkZGVuPSJ0cnVlIiBjbGFzcz0iZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLXJpZ2h0Ij48L2k+PHNwYW4gY2xhc3M9InNyLW9ubHkiPm5leHQ8L3NwYW4+PC9idXR0b24+PC90aD5cbiAgICA8L3RyPlxuICAgIDx0cj5cbiAgICAgIDx0aCBuZy1pZj0ic2hvd1dlZWtzIiBjbGFzcz0idGV4dC1jZW50ZXIiPjwvdGg+XG4gICAgICA8dGggbmctcmVwZWF0PSJsYWJlbCBpbiA6OmxhYmVscyB0cmFjayBieSAkaW5kZXgiIGNsYXNzPSJ0ZXh0LWNlbnRlciI+PHNtYWxsIGFyaWEtbGFiZWw9Int7OjpsYWJlbC5mdWxsfX0iPnt7OjpsYWJlbC5hYmJyfX08L3NtYWxsPjwvdGg+XG4gICAgPC90cj5cbiAgPC90aGVhZD5cbiAgPHRib2R5PlxuICAgIDx0ciBjbGFzcz0idWliLXdlZWtzIiBuZy1yZXBlYXQ9InJvdyBpbiByb3dzIHRyYWNrIGJ5ICRpbmRleCIgcm9sZT0icm93Ij5cbiAgICAgIDx0ZCBuZy1pZj0ic2hvd1dlZWtzIiBjbGFzcz0idGV4dC1jZW50ZXIgaDYiPjxlbT57eyB3ZWVrTnVtYmVyc1skaW5kZXhdIH19PC9lbT48L3RkPlxuICAgICAgPHRkIG5nLXJlcGVhdD0iZHQgaW4gcm93IiBjbGFzcz0idWliLWRheSB0ZXh0LWNlbnRlciIgcm9sZT0iZ3JpZGNlbGwiXG4gICAgICAgIGlkPSJ7ezo6ZHQudWlkfX0iXG4gICAgICAgIG5nLWNsYXNzPSI6OmR0LmN1c3RvbUNsYXNzIj5cbiAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLWRlZmF1bHQgYnRuLXNtIlxuICAgICAgICAgIHVpYi1pcy1jbGFzcz0iXG4gICAgICAgICAgICBcJ2J0bi1pbmZvXCcgZm9yIHNlbGVjdGVkRHQsXG4gICAgICAgICAgICBcJ2FjdGl2ZVwnIGZvciBhY3RpdmVEdFxuICAgICAgICAgICAgb24gZHQiXG4gICAgICAgICAgbmctY2xpY2s9InNlbGVjdChkdC5kYXRlKSJcbiAgICAgICAgICBuZy1kaXNhYmxlZD0iOjpkdC5kaXNhYmxlZCJcbiAgICAgICAgICB0YWJpbmRleD0iLTEiPjxzcGFuIG5nLWNsYXNzPSI6OntcJ3RleHQtbXV0ZWRcJzogZHQuc2Vjb25kYXJ5LCBcJ3RleHQtaW5mb1wnOiBkdC5jdXJyZW50fSI+e3s6OmR0LmxhYmVsfX08L3NwYW4+PC9idXR0b24+XG4gICAgICA8L3RkPlxuICAgIDwvdHI+XG4gIDwvdGJvZHk+XG48L3RhYmxlPlxuJyl9XSksYW5ndWxhci5tb2R1bGUoInVpYi90ZW1wbGF0ZS9kYXRlcGlja2VyL21vbnRoLmh0bWwiLFtdKS5ydW4oWyIkdGVtcGxhdGVDYWNoZSIsZnVuY3Rpb24oYSl7YS5wdXQoInVpYi90ZW1wbGF0ZS9kYXRlcGlja2VyL21vbnRoLmh0bWwiLCc8dGFibGUgcm9sZT0iZ3JpZCIgYXJpYS1sYWJlbGxlZGJ5PSJ7ezo6dW5pcXVlSWR9fS10aXRsZSIgYXJpYS1hY3RpdmVkZXNjZW5kYW50PSJ7e2FjdGl2ZURhdGVJZH19Ij5cbiAgPHRoZWFkPlxuICAgIDx0cj5cbiAgICAgIDx0aD48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImJ0biBidG4tZGVmYXVsdCBidG4tc20gcHVsbC1sZWZ0IHVpYi1sZWZ0IiBuZy1jbGljaz0ibW92ZSgtMSkiIHRhYmluZGV4PSItMSI+PGkgYXJpYS1oaWRkZW49InRydWUiIGNsYXNzPSJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tbGVmdCI+PC9pPjxzcGFuIGNsYXNzPSJzci1vbmx5Ij5wcmV2aW91czwvc3Bhbj48L2J1dHRvbj48L3RoPlxuICAgICAgPHRoIGNvbHNwYW49Int7Ojp5ZWFySGVhZGVyQ29sc3Bhbn19Ij48YnV0dG9uIGlkPSJ7ezo6dW5pcXVlSWR9fS10aXRsZSIgcm9sZT0iaGVhZGluZyIgYXJpYS1saXZlPSJhc3NlcnRpdmUiIGFyaWEtYXRvbWljPSJ0cnVlIiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLWRlZmF1bHQgYnRuLXNtIHVpYi10aXRsZSIgbmctY2xpY2s9InRvZ2dsZU1vZGUoKSIgbmctZGlzYWJsZWQ9ImRhdGVwaWNrZXJNb2RlID09PSBtYXhNb2RlIiB0YWJpbmRleD0iLTEiPjxzdHJvbmc+e3t0aXRsZX19PC9zdHJvbmc+PC9idXR0b24+PC90aD5cbiAgICAgIDx0aD48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImJ0biBidG4tZGVmYXVsdCBidG4tc20gcHVsbC1yaWdodCB1aWItcmlnaHQiIG5nLWNsaWNrPSJtb3ZlKDEpIiB0YWJpbmRleD0iLTEiPjxpIGFyaWEtaGlkZGVuPSJ0cnVlIiBjbGFzcz0iZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLXJpZ2h0Ij48L2k+PHNwYW4gY2xhc3M9InNyLW9ubHkiPm5leHQ8L3NwYW4+PC9pPjwvYnV0dG9uPjwvdGg+XG4gICAgPC90cj5cbiAgPC90aGVhZD5cbiAgPHRib2R5PlxuICAgIDx0ciBjbGFzcz0idWliLW1vbnRocyIgbmctcmVwZWF0PSJyb3cgaW4gcm93cyB0cmFjayBieSAkaW5kZXgiIHJvbGU9InJvdyI+XG4gICAgICA8dGQgbmctcmVwZWF0PSJkdCBpbiByb3ciIGNsYXNzPSJ1aWItbW9udGggdGV4dC1jZW50ZXIiIHJvbGU9ImdyaWRjZWxsIlxuICAgICAgICBpZD0ie3s6OmR0LnVpZH19IlxuICAgICAgICBuZy1jbGFzcz0iOjpkdC5jdXN0b21DbGFzcyI+XG4gICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iYnRuIGJ0bi1kZWZhdWx0IlxuICAgICAgICAgIHVpYi1pcy1jbGFzcz0iXG4gICAgICAgICAgICBcJ2J0bi1pbmZvXCcgZm9yIHNlbGVjdGVkRHQsXG4gICAgICAgICAgICBcJ2FjdGl2ZVwnIGZvciBhY3RpdmVEdFxuICAgICAgICAgICAgb24gZHQiXG4gICAgICAgICAgbmctY2xpY2s9InNlbGVjdChkdC5kYXRlKSJcbiAgICAgICAgICBuZy1kaXNhYmxlZD0iOjpkdC5kaXNhYmxlZCJcbiAgICAgICAgICB0YWJpbmRleD0iLTEiPjxzcGFuIG5nLWNsYXNzPSI6OntcJ3RleHQtaW5mb1wnOiBkdC5jdXJyZW50fSI+e3s6OmR0LmxhYmVsfX08L3NwYW4+PC9idXR0b24+XG4gICAgICA8L3RkPlxuICAgIDwvdHI+XG4gIDwvdGJvZHk+XG48L3RhYmxlPlxuJyl9XSksYW5ndWxhci5tb2R1bGUoInVpYi90ZW1wbGF0ZS9kYXRlcGlja2VyL3llYXIuaHRtbCIsW10pLnJ1bihbIiR0ZW1wbGF0ZUNhY2hlIixmdW5jdGlvbihhKXthLnB1dCgidWliL3RlbXBsYXRlL2RhdGVwaWNrZXIveWVhci5odG1sIiwnPHRhYmxlIHJvbGU9ImdyaWQiIGFyaWEtbGFiZWxsZWRieT0ie3s6OnVuaXF1ZUlkfX0tdGl0bGUiIGFyaWEtYWN0aXZlZGVzY2VuZGFudD0ie3thY3RpdmVEYXRlSWR9fSI+XG4gIDx0aGVhZD5cbiAgICA8dHI+XG4gICAgICA8dGg+PGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLWRlZmF1bHQgYnRuLXNtIHB1bGwtbGVmdCB1aWItbGVmdCIgbmctY2xpY2s9Im1vdmUoLTEpIiB0YWJpbmRleD0iLTEiPjxpIGFyaWEtaGlkZGVuPSJ0cnVlIiBjbGFzcz0iZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLWxlZnQiPjwvaT48c3BhbiBjbGFzcz0ic3Itb25seSI+cHJldmlvdXM8L3NwYW4+PC9idXR0b24+PC90aD5cbiAgICAgIDx0aCBjb2xzcGFuPSJ7ezo6Y29sdW1ucyAtIDJ9fSI+PGJ1dHRvbiBpZD0ie3s6OnVuaXF1ZUlkfX0tdGl0bGUiIHJvbGU9ImhlYWRpbmciIGFyaWEtbGl2ZT0iYXNzZXJ0aXZlIiBhcmlhLWF0b21pYz0idHJ1ZSIgdHlwZT0iYnV0dG9uIiBjbGFzcz0iYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbSB1aWItdGl0bGUiIG5nLWNsaWNrPSJ0b2dnbGVNb2RlKCkiIG5nLWRpc2FibGVkPSJkYXRlcGlja2VyTW9kZSA9PT0gbWF4TW9kZSIgdGFiaW5kZXg9Ii0xIj48c3Ryb25nPnt7dGl0bGV9fTwvc3Ryb25nPjwvYnV0dG9uPjwvdGg+XG4gICAgICA8dGg+PGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLWRlZmF1bHQgYnRuLXNtIHB1bGwtcmlnaHQgdWliLXJpZ2h0IiBuZy1jbGljaz0ibW92ZSgxKSIgdGFiaW5kZXg9Ii0xIj48aSBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9ImdseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi1yaWdodCI+PC9pPjxzcGFuIGNsYXNzPSJzci1vbmx5Ij5uZXh0PC9zcGFuPjwvYnV0dG9uPjwvdGg+XG4gICAgPC90cj5cbiAgPC90aGVhZD5cbiAgPHRib2R5PlxuICAgIDx0ciBjbGFzcz0idWliLXllYXJzIiBuZy1yZXBlYXQ9InJvdyBpbiByb3dzIHRyYWNrIGJ5ICRpbmRleCIgcm9sZT0icm93Ij5cbiAgICAgIDx0ZCBuZy1yZXBlYXQ9ImR0IGluIHJvdyIgY2xhc3M9InVpYi15ZWFyIHRleHQtY2VudGVyIiByb2xlPSJncmlkY2VsbCJcbiAgICAgICAgaWQ9Int7OjpkdC51aWR9fSJcbiAgICAgICAgbmctY2xhc3M9Ijo6ZHQuY3VzdG9tQ2xhc3MiPlxuICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImJ0biBidG4tZGVmYXVsdCJcbiAgICAgICAgICB1aWItaXMtY2xhc3M9IlxuICAgICAgICAgICAgXCdidG4taW5mb1wnIGZvciBzZWxlY3RlZER0LFxuICAgICAgICAgICAgXCdhY3RpdmVcJyBmb3IgYWN0aXZlRHRcbiAgICAgICAgICAgIG9uIGR0IlxuICAgICAgICAgIG5nLWNsaWNrPSJzZWxlY3QoZHQuZGF0ZSkiXG4gICAgICAgICAgbmctZGlzYWJsZWQ9Ijo6ZHQuZGlzYWJsZWQiXG4gICAgICAgICAgdGFiaW5kZXg9Ii0xIj48c3BhbiBuZy1jbGFzcz0iOjp7XCd0ZXh0LWluZm9cJzogZHQuY3VycmVudH0iPnt7OjpkdC5sYWJlbH19PC9zcGFuPjwvYnV0dG9uPlxuICAgICAgPC90ZD5cbiAgICA8L3RyPlxuICA8L3Rib2R5PlxuPC90YWJsZT5cbicpfV0pLGFuZ3VsYXIubW9kdWxlKCJ1aWIvdGVtcGxhdGUvZGF0ZXBpY2tlclBvcHVwL3BvcHVwLmh0bWwiLFtdKS5ydW4oWyIkdGVtcGxhdGVDYWNoZSIsZnVuY3Rpb24oYSl7YS5wdXQoInVpYi90ZW1wbGF0ZS9kYXRlcGlja2VyUG9wdXAvcG9wdXAuaHRtbCIsJzx1bCByb2xlPSJwcmVzZW50YXRpb24iIGNsYXNzPSJ1aWItZGF0ZXBpY2tlci1wb3B1cCBkcm9wZG93bi1tZW51IHVpYi1wb3NpdGlvbi1tZWFzdXJlIiBkcm9wZG93bi1uZXN0ZWQgbmctaWY9ImlzT3BlbiIgbmcta2V5ZG93bj0ia2V5ZG93bigkZXZlbnQpIiBuZy1jbGljaz0iJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpIj5cbiAgPGxpIG5nLXRyYW5zY2x1ZGU+PC9saT5cbiAgPGxpIG5nLWlmPSJzaG93QnV0dG9uQmFyIiBjbGFzcz0idWliLWJ1dHRvbi1iYXIiPlxuICAgIDxzcGFuIGNsYXNzPSJidG4tZ3JvdXAgcHVsbC1sZWZ0Ij5cbiAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iYnRuIGJ0bi1zbSBidG4taW5mbyB1aWItZGF0ZXBpY2tlci1jdXJyZW50IiBuZy1jbGljaz0ic2VsZWN0KFwndG9kYXlcJywgJGV2ZW50KSIgbmctZGlzYWJsZWQ9ImlzRGlzYWJsZWQoXCd0b2RheVwnKSI+e3sgZ2V0VGV4dChcJ2N1cnJlbnRcJykgfX08L2J1dHRvbj5cbiAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iYnRuIGJ0bi1zbSBidG4tZGFuZ2VyIHVpYi1jbGVhciIgbmctY2xpY2s9InNlbGVjdChudWxsLCAkZXZlbnQpIj57eyBnZXRUZXh0KFwnY2xlYXJcJykgfX08L2J1dHRvbj5cbiAgICA8L3NwYW4+XG4gICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLXNtIGJ0bi1zdWNjZXNzIHB1bGwtcmlnaHQgdWliLWNsb3NlIiBuZy1jbGljaz0iY2xvc2UoJGV2ZW50KSI+e3sgZ2V0VGV4dChcJ2Nsb3NlXCcpIH19PC9idXR0b24+XG4gIDwvbGk+XG48L3VsPlxuJyl9XSksYW5ndWxhci5tb2R1bGUoInVpYi90ZW1wbGF0ZS9tb2RhbC93aW5kb3cuaHRtbCIsW10pLnJ1bihbIiR0ZW1wbGF0ZUNhY2hlIixmdW5jdGlvbihhKXthLnB1dCgidWliL3RlbXBsYXRlL21vZGFsL3dpbmRvdy5odG1sIiwiPGRpdiBjbGFzcz1cIm1vZGFsLWRpYWxvZyB7e3NpemUgPyAnbW9kYWwtJyArIHNpemUgOiAnJ319XCI+PGRpdiBjbGFzcz1cIm1vZGFsLWNvbnRlbnRcIiB1aWItbW9kYWwtdHJhbnNjbHVkZT48L2Rpdj48L2Rpdj5cbiIpfV0pLGFuZ3VsYXIubW9kdWxlKCJ1aWIvdGVtcGxhdGUvcGFnZXIvcGFnZXIuaHRtbCIsW10pLnJ1bihbIiR0ZW1wbGF0ZUNhY2hlIixmdW5jdGlvbihhKXthLnB1dCgidWliL3RlbXBsYXRlL3BhZ2VyL3BhZ2VyLmh0bWwiLCc8bGkgbmctY2xhc3M9IntkaXNhYmxlZDogbm9QcmV2aW91cygpfHxuZ0Rpc2FibGVkLCBwcmV2aW91czogYWxpZ259Ij48YSBocmVmIG5nLWNsaWNrPSJzZWxlY3RQYWdlKHBhZ2UgLSAxLCAkZXZlbnQpIiBuZy1kaXNhYmxlZD0ibm9QcmV2aW91cygpfHxuZ0Rpc2FibGVkIiB1aWItdGFiaW5kZXgtdG9nZ2xlPnt7OjpnZXRUZXh0KFwncHJldmlvdXNcJyl9fTwvYT48L2xpPlxuPGxpIG5nLWNsYXNzPSJ7ZGlzYWJsZWQ6IG5vTmV4dCgpfHxuZ0Rpc2FibGVkLCBuZXh0OiBhbGlnbn0iPjxhIGhyZWYgbmctY2xpY2s9InNlbGVjdFBhZ2UocGFnZSArIDEsICRldmVudCkiIG5nLWRpc2FibGVkPSJub05leHQoKXx8bmdEaXNhYmxlZCIgdWliLXRhYmluZGV4LXRvZ2dsZT57ezo6Z2V0VGV4dChcJ25leHRcJyl9fTwvYT48L2xpPlxuJyl9XSksYW5ndWxhci5tb2R1bGUoInVpYi90ZW1wbGF0ZS9wYWdpbmF0aW9uL3BhZ2luYXRpb24uaHRtbCIsW10pLnJ1bihbIiR0ZW1wbGF0ZUNhY2hlIixmdW5jdGlvbihhKXthLnB1dCgidWliL3RlbXBsYXRlL3BhZ2luYXRpb24vcGFnaW5hdGlvbi5odG1sIiwnPGxpIHJvbGU9Im1lbnVpdGVtIiBuZy1pZj0iOjpib3VuZGFyeUxpbmtzIiBuZy1jbGFzcz0ie2Rpc2FibGVkOiBub1ByZXZpb3VzKCl8fG5nRGlzYWJsZWR9IiBjbGFzcz0icGFnaW5hdGlvbi1maXJzdCI+PGEgaHJlZiBuZy1jbGljaz0ic2VsZWN0UGFnZSgxLCAkZXZlbnQpIiBuZy1kaXNhYmxlZD0ibm9QcmV2aW91cygpfHxuZ0Rpc2FibGVkIiB1aWItdGFiaW5kZXgtdG9nZ2xlPnt7OjpnZXRUZXh0KFwnZmlyc3RcJyl9fTwvYT48L2xpPlxuPGxpIHJvbGU9Im1lbnVpdGVtIiBuZy1pZj0iOjpkaXJlY3Rpb25MaW5rcyIgbmctY2xhc3M9IntkaXNhYmxlZDogbm9QcmV2aW91cygpfHxuZ0Rpc2FibGVkfSIgY2xhc3M9InBhZ2luYXRpb24tcHJldiI+PGEgaHJlZiBuZy1jbGljaz0ic2VsZWN0UGFnZShwYWdlIC0gMSwgJGV2ZW50KSIgbmctZGlzYWJsZWQ9Im5vUHJldmlvdXMoKXx8bmdEaXNhYmxlZCIgdWliLXRhYmluZGV4LXRvZ2dsZT57ezo6Z2V0VGV4dChcJ3ByZXZpb3VzXCcpfX08L2E+PC9saT5cbjxsaSByb2xlPSJtZW51aXRlbSIgbmctcmVwZWF0PSJwYWdlIGluIHBhZ2VzIHRyYWNrIGJ5ICRpbmRleCIgbmctY2xhc3M9InthY3RpdmU6IHBhZ2UuYWN0aXZlLGRpc2FibGVkOiBuZ0Rpc2FibGVkJiYhcGFnZS5hY3RpdmV9IiBjbGFzcz0icGFnaW5hdGlvbi1wYWdlIj48YSBocmVmIG5nLWNsaWNrPSJzZWxlY3RQYWdlKHBhZ2UubnVtYmVyLCAkZXZlbnQpIiBuZy1kaXNhYmxlZD0ibmdEaXNhYmxlZCYmIXBhZ2UuYWN0aXZlIiB1aWItdGFiaW5kZXgtdG9nZ2xlPnt7cGFnZS50ZXh0fX08L2E+PC9saT5cbjxsaSByb2xlPSJtZW51aXRlbSIgbmctaWY9Ijo6ZGlyZWN0aW9uTGlua3MiIG5nLWNsYXNzPSJ7ZGlzYWJsZWQ6IG5vTmV4dCgpfHxuZ0Rpc2FibGVkfSIgY2xhc3M9InBhZ2luYXRpb24tbmV4dCI+PGEgaHJlZiBuZy1jbGljaz0ic2VsZWN0UGFnZShwYWdlICsgMSwgJGV2ZW50KSIgbmctZGlzYWJsZWQ9Im5vTmV4dCgpfHxuZ0Rpc2FibGVkIiB1aWItdGFiaW5kZXgtdG9nZ2xlPnt7OjpnZXRUZXh0KFwnbmV4dFwnKX19PC9hPjwvbGk+XG48bGkgcm9sZT0ibWVudWl0ZW0iIG5nLWlmPSI6OmJvdW5kYXJ5TGlua3MiIG5nLWNsYXNzPSJ7ZGlzYWJsZWQ6IG5vTmV4dCgpfHxuZ0Rpc2FibGVkfSIgY2xhc3M9InBhZ2luYXRpb24tbGFzdCI+PGEgaHJlZiBuZy1jbGljaz0ic2VsZWN0UGFnZSh0b3RhbFBhZ2VzLCAkZXZlbnQpIiBuZy1kaXNhYmxlZD0ibm9OZXh0KCl8fG5nRGlzYWJsZWQiIHVpYi10YWJpbmRleC10b2dnbGU+e3s6OmdldFRleHQoXCdsYXN0XCcpfX08L2E+PC9saT5cbicpfV0pLGFuZ3VsYXIubW9kdWxlKCJ1aWIvdGVtcGxhdGUvdG9vbHRpcC90b29sdGlwLWh0bWwtcG9wdXAuaHRtbCIsW10pLnJ1bihbIiR0ZW1wbGF0ZUNhY2hlIixmdW5jdGlvbihhKXthLnB1dCgidWliL3RlbXBsYXRlL3Rvb2x0aXAvdG9vbHRpcC1odG1sLXBvcHVwLmh0bWwiLCc8ZGl2IGNsYXNzPSJ0b29sdGlwLWFycm93Ij48L2Rpdj5cbjxkaXYgY2xhc3M9InRvb2x0aXAtaW5uZXIiIG5nLWJpbmQtaHRtbD0iY29udGVudEV4cCgpIj48L2Rpdj5cbicpfV0pLGFuZ3VsYXIubW9kdWxlKCJ1aWIvdGVtcGxhdGUvdG9vbHRpcC90b29sdGlwLXBvcHVwLmh0bWwiLFtdKS5ydW4oWyIkdGVtcGxhdGVDYWNoZSIsZnVuY3Rpb24oYSl7YS5wdXQoInVpYi90ZW1wbGF0ZS90b29sdGlwL3Rvb2x0aXAtcG9wdXAuaHRtbCIsJzxkaXYgY2xhc3M9InRvb2x0aXAtYXJyb3ciPjwvZGl2PlxuPGRpdiBjbGFzcz0idG9vbHRpcC1pbm5lciIgbmctYmluZD0iY29udGVudCI+PC9kaXY+XG4nKX1dKSxhbmd1bGFyLm1vZHVsZSgidWliL3RlbXBsYXRlL3Rvb2x0aXAvdG9vbHRpcC10ZW1wbGF0ZS1wb3B1cC5odG1sIixbXSkucnVuKFsiJHRlbXBsYXRlQ2FjaGUiLGZ1bmN0aW9uKGEpe2EucHV0KCJ1aWIvdGVtcGxhdGUvdG9vbHRpcC90b29sdGlwLXRlbXBsYXRlLXBvcHVwLmh0bWwiLCc8ZGl2IGNsYXNzPSJ0b29sdGlwLWFycm93Ij48L2Rpdj5cbjxkaXYgY2xhc3M9InRvb2x0aXAtaW5uZXIiXG4gIHVpYi10b29sdGlwLXRlbXBsYXRlLXRyYW5zY2x1ZGU9ImNvbnRlbnRFeHAoKSJcbiAgdG9vbHRpcC10ZW1wbGF0ZS10cmFuc2NsdWRlLXNjb3BlPSJvcmlnaW5TY29wZSgpIj48L2Rpdj5cbicpfV0pLGFuZ3VsYXIubW9kdWxlKCJ1aWIvdGVtcGxhdGUvcG9wb3Zlci9wb3BvdmVyLWh0bWwuaHRtbCIsW10pLnJ1bihbIiR0ZW1wbGF0ZUNhY2hlIixmdW5jdGlvbihhKXthLnB1dCgidWliL3RlbXBsYXRlL3BvcG92ZXIvcG9wb3Zlci1odG1sLmh0bWwiLCc8ZGl2IGNsYXNzPSJhcnJvdyI+PC9kaXY+XG5cbjxkaXYgY2xhc3M9InBvcG92ZXItaW5uZXIiPlxuICAgIDxoMyBjbGFzcz0icG9wb3Zlci10aXRsZSIgbmctYmluZD0idWliVGl0bGUiIG5nLWlmPSJ1aWJUaXRsZSI+PC9oMz5cbiAgICA8ZGl2IGNsYXNzPSJwb3BvdmVyLWNvbnRlbnQiIG5nLWJpbmQtaHRtbD0iY29udGVudEV4cCgpIj48L2Rpdj5cbjwvZGl2PlxuJyl9XSksYW5ndWxhci5tb2R1bGUoInVpYi90ZW1wbGF0ZS9wb3BvdmVyL3BvcG92ZXItdGVtcGxhdGUuaHRtbCIsW10pLnJ1bihbIiR0ZW1wbGF0ZUNhY2hlIixmdW5jdGlvbihhKXthLnB1dCgidWliL3RlbXBsYXRlL3BvcG92ZXIvcG9wb3Zlci10ZW1wbGF0ZS5odG1sIiwnPGRpdiBjbGFzcz0iYXJyb3ciPjwvZGl2PlxuXG48ZGl2IGNsYXNzPSJwb3BvdmVyLWlubmVyIj5cbiAgICA8aDMgY2xhc3M9InBvcG92ZXItdGl0bGUiIG5nLWJpbmQ9InVpYlRpdGxlIiBuZy1pZj0idWliVGl0bGUiPjwvaDM+XG4gICAgPGRpdiBjbGFzcz0icG9wb3Zlci1jb250ZW50IlxuICAgICAgdWliLXRvb2x0aXAtdGVtcGxhdGUtdHJhbnNjbHVkZT0iY29udGVudEV4cCgpIlxuICAgICAgdG9vbHRpcC10ZW1wbGF0ZS10cmFuc2NsdWRlLXNjb3BlPSJvcmlnaW5TY29wZSgpIj48L2Rpdj5cbjwvZGl2PlxuJyl9XSksYW5ndWxhci5tb2R1bGUoInVpYi90ZW1wbGF0ZS9wb3BvdmVyL3BvcG92ZXIuaHRtbCIsW10pLnJ1bihbIiR0ZW1wbGF0ZUNhY2hlIixmdW5jdGlvbihhKXthLnB1dCgidWliL3RlbXBsYXRlL3BvcG92ZXIvcG9wb3Zlci5odG1sIiwnPGRpdiBjbGFzcz0iYXJyb3ciPjwvZGl2PlxuXG48ZGl2IGNsYXNzPSJwb3BvdmVyLWlubmVyIj5cbiAgICA8aDMgY2xhc3M9InBvcG92ZXItdGl0bGUiIG5nLWJpbmQ9InVpYlRpdGxlIiBuZy1pZj0idWliVGl0bGUiPjwvaDM+XG4gICAgPGRpdiBjbGFzcz0icG9wb3Zlci1jb250ZW50IiBuZy1iaW5kPSJjb250ZW50Ij48L2Rpdj5cbjwvZGl2PlxuJyl9XSksYW5ndWxhci5tb2R1bGUoInVpYi90ZW1wbGF0ZS9wcm9ncmVzc2Jhci9iYXIuaHRtbCIsW10pLnJ1bihbIiR0ZW1wbGF0ZUNhY2hlIixmdW5jdGlvbihhKXthLnB1dCgidWliL3RlbXBsYXRlL3Byb2dyZXNzYmFyL2Jhci5odG1sIiwnPGRpdiBjbGFzcz0icHJvZ3Jlc3MtYmFyIiBuZy1jbGFzcz0idHlwZSAmJiBcJ3Byb2dyZXNzLWJhci1cJyArIHR5cGUiIHJvbGU9InByb2dyZXNzYmFyIiBhcmlhLXZhbHVlbm93PSJ7e3ZhbHVlfX0iIGFyaWEtdmFsdWVtaW49IjAiIGFyaWEtdmFsdWVtYXg9Int7bWF4fX0iIG5nLXN0eWxlPSJ7d2lkdGg6IChwZXJjZW50IDwgMTAwID8gcGVyY2VudCA6IDEwMCkgKyBcJyVcJ30iIGFyaWEtdmFsdWV0ZXh0PSJ7e3BlcmNlbnQgfCBudW1iZXI6MH19JSIgYXJpYS1sYWJlbGxlZGJ5PSJ7ezo6dGl0bGV9fSIgbmctdHJhbnNjbHVkZT48L2Rpdj5cbicpfV0pLGFuZ3VsYXIubW9kdWxlKCJ1aWIvdGVtcGxhdGUvcHJvZ3Jlc3NiYXIvcHJvZ3Jlc3MuaHRtbCIsW10pLnJ1bihbIiR0ZW1wbGF0ZUNhY2hlIixmdW5jdGlvbihhKXthLnB1dCgidWliL3RlbXBsYXRlL3Byb2dyZXNzYmFyL3Byb2dyZXNzLmh0bWwiLCc8ZGl2IGNsYXNzPSJwcm9ncmVzcyIgbmctdHJhbnNjbHVkZSBhcmlhLWxhYmVsbGVkYnk9Int7Ojp0aXRsZX19Ij48L2Rpdj4nKX1dKSxhbmd1bGFyLm1vZHVsZSgidWliL3RlbXBsYXRlL3Byb2dyZXNzYmFyL3Byb2dyZXNzYmFyLmh0bWwiLFtdKS5ydW4oWyIkdGVtcGxhdGVDYWNoZSIsZnVuY3Rpb24oYSl7YS5wdXQoInVpYi90ZW1wbGF0ZS9wcm9ncmVzc2Jhci9wcm9ncmVzc2Jhci5odG1sIiwnPGRpdiBjbGFzcz0icHJvZ3Jlc3MiPlxuICA8ZGl2IGNsYXNzPSJwcm9ncmVzcy1iYXIiIG5nLWNsYXNzPSJ0eXBlICYmIFwncHJvZ3Jlc3MtYmFyLVwnICsgdHlwZSIgcm9sZT0icHJvZ3Jlc3NiYXIiIGFyaWEtdmFsdWVub3c9Int7dmFsdWV9fSIgYXJpYS12YWx1ZW1pbj0iMCIgYXJpYS12YWx1ZW1heD0ie3ttYXh9fSIgbmctc3R5bGU9Int3aWR0aDogKHBlcmNlbnQgPCAxMDAgPyBwZXJjZW50IDogMTAwKSArIFwnJVwnfSIgYXJpYS12YWx1ZXRleHQ9Int7cGVyY2VudCB8IG51bWJlcjowfX0lIiBhcmlhLWxhYmVsbGVkYnk9Int7Ojp0aXRsZX19IiBuZy10cmFuc2NsdWRlPjwvZGl2PlxuPC9kaXY+XG4nKX1dKSxhbmd1bGFyLm1vZHVsZSgidWliL3RlbXBsYXRlL3JhdGluZy9yYXRpbmcuaHRtbCIsW10pLnJ1bihbIiR0ZW1wbGF0ZUNhY2hlIixmdW5jdGlvbihhKXthLnB1dCgidWliL3RlbXBsYXRlL3JhdGluZy9yYXRpbmcuaHRtbCIsJzxzcGFuIG5nLW1vdXNlbGVhdmU9InJlc2V0KCkiIG5nLWtleWRvd249Im9uS2V5ZG93bigkZXZlbnQpIiB0YWJpbmRleD0iMCIgcm9sZT0ic2xpZGVyIiBhcmlhLXZhbHVlbWluPSIwIiBhcmlhLXZhbHVlbWF4PSJ7e3JhbmdlLmxlbmd0aH19IiBhcmlhLXZhbHVlbm93PSJ7e3ZhbHVlfX0iIGFyaWEtdmFsdWV0ZXh0PSJ7e3RpdGxlfX0iPlxuICAgIDxzcGFuIG5nLXJlcGVhdC1zdGFydD0iciBpbiByYW5nZSB0cmFjayBieSAkaW5kZXgiIGNsYXNzPSJzci1vbmx5Ij4oe3sgJGluZGV4IDwgdmFsdWUgPyBcJypcJyA6IFwnIFwnIH19KTwvc3Bhbj5cbiAgICA8aSBuZy1yZXBlYXQtZW5kIG5nLW1vdXNlZW50ZXI9ImVudGVyKCRpbmRleCArIDEpIiBuZy1jbGljaz0icmF0ZSgkaW5kZXggKyAxKSIgY2xhc3M9ImdseXBoaWNvbiIgbmctY2xhc3M9IiRpbmRleCA8IHZhbHVlICYmIChyLnN0YXRlT24gfHwgXCdnbHlwaGljb24tc3RhclwnKSB8fCAoci5zdGF0ZU9mZiB8fCBcJ2dseXBoaWNvbi1zdGFyLWVtcHR5XCcpIiBuZy1hdHRyLXRpdGxlPSJ7e3IudGl0bGV9fSI+PC9pPlxuPC9zcGFuPlxuJyl9XSksYW5ndWxhci5tb2R1bGUoInVpYi90ZW1wbGF0ZS90YWJzL3RhYi5odG1sIixbXSkucnVuKFsiJHRlbXBsYXRlQ2FjaGUiLGZ1bmN0aW9uKGEpe2EucHV0KCJ1aWIvdGVtcGxhdGUvdGFicy90YWIuaHRtbCIsJzxsaSBuZy1jbGFzcz0iW3thY3RpdmU6IGFjdGl2ZSwgZGlzYWJsZWQ6IGRpc2FibGVkfSwgY2xhc3Nlc10iIGNsYXNzPSJ1aWItdGFiIG5hdi1pdGVtIj5cbiAgPGEgaHJlZiBuZy1jbGljaz0ic2VsZWN0KCRldmVudCkiIGNsYXNzPSJuYXYtbGluayIgdWliLXRhYi1oZWFkaW5nLXRyYW5zY2x1ZGU+e3toZWFkaW5nfX08L2E+XG48L2xpPlxuJyl9XSksYW5ndWxhci5tb2R1bGUoInVpYi90ZW1wbGF0ZS90YWJzL3RhYnNldC5odG1sIixbXSkucnVuKFsiJHRlbXBsYXRlQ2FjaGUiLGZ1bmN0aW9uKGEpe2EucHV0KCJ1aWIvdGVtcGxhdGUvdGFicy90YWJzZXQuaHRtbCIsJzxkaXY+XG4gIDx1bCBjbGFzcz0ibmF2IG5hdi17e3RhYnNldC50eXBlIHx8IFwndGFic1wnfX0iIG5nLWNsYXNzPSJ7XCduYXYtc3RhY2tlZFwnOiB2ZXJ0aWNhbCwgXCduYXYtanVzdGlmaWVkXCc6IGp1c3RpZmllZH0iIG5nLXRyYW5zY2x1ZGU+PC91bD5cbiAgPGRpdiBjbGFzcz0idGFiLWNvbnRlbnQiPlxuICAgIDxkaXYgY2xhc3M9InRhYi1wYW5lIlxuICAgICAgICAgbmctcmVwZWF0PSJ0YWIgaW4gdGFic2V0LnRhYnMiXG4gICAgICAgICBuZy1jbGFzcz0ie2FjdGl2ZTogdGFic2V0LmFjdGl2ZSA9PT0gdGFiLmluZGV4fSJcbiAgICAgICAgIHVpYi10YWItY29udGVudC10cmFuc2NsdWRlPSJ0YWIiPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvZGl2PlxuJyl9XSksYW5ndWxhci5tb2R1bGUoInVpYi90ZW1wbGF0ZS90aW1lcGlja2VyL3RpbWVwaWNrZXIuaHRtbCIsW10pLnJ1bihbIiR0ZW1wbGF0ZUNhY2hlIixmdW5jdGlvbihhKXthLnB1dCgidWliL3RlbXBsYXRlL3RpbWVwaWNrZXIvdGltZXBpY2tlci5odG1sIiwnPHRhYmxlIGNsYXNzPSJ1aWItdGltZXBpY2tlciI+XG4gIDx0Ym9keT5cbiAgICA8dHIgY2xhc3M9InRleHQtY2VudGVyIiBuZy1zaG93PSI6OnNob3dTcGlubmVycyI+XG4gICAgICA8dGQgY2xhc3M9InVpYi1pbmNyZW1lbnQgaG91cnMiPjxhIG5nLWNsaWNrPSJpbmNyZW1lbnRIb3VycygpIiBuZy1jbGFzcz0ie2Rpc2FibGVkOiBub0luY3JlbWVudEhvdXJzKCl9IiBjbGFzcz0iYnRuIGJ0bi1saW5rIiBuZy1kaXNhYmxlZD0ibm9JbmNyZW1lbnRIb3VycygpIiB0YWJpbmRleD0iLTEiPjxzcGFuIGNsYXNzPSJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tdXAiPjwvc3Bhbj48L2E+PC90ZD5cbiAgICAgIDx0ZD4mbmJzcDs8L3RkPlxuICAgICAgPHRkIGNsYXNzPSJ1aWItaW5jcmVtZW50IG1pbnV0ZXMiPjxhIG5nLWNsaWNrPSJpbmNyZW1lbnRNaW51dGVzKCkiIG5nLWNsYXNzPSJ7ZGlzYWJsZWQ6IG5vSW5jcmVtZW50TWludXRlcygpfSIgY2xhc3M9ImJ0biBidG4tbGluayIgbmctZGlzYWJsZWQ9Im5vSW5jcmVtZW50TWludXRlcygpIiB0YWJpbmRleD0iLTEiPjxzcGFuIGNsYXNzPSJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tdXAiPjwvc3Bhbj48L2E+PC90ZD5cbiAgICAgIDx0ZCBuZy1zaG93PSJzaG93U2Vjb25kcyI+Jm5ic3A7PC90ZD5cbiAgICAgIDx0ZCBuZy1zaG93PSJzaG93U2Vjb25kcyIgY2xhc3M9InVpYi1pbmNyZW1lbnQgc2Vjb25kcyI+PGEgbmctY2xpY2s9ImluY3JlbWVudFNlY29uZHMoKSIgbmctY2xhc3M9IntkaXNhYmxlZDogbm9JbmNyZW1lbnRTZWNvbmRzKCl9IiBjbGFzcz0iYnRuIGJ0bi1saW5rIiBuZy1kaXNhYmxlZD0ibm9JbmNyZW1lbnRTZWNvbmRzKCkiIHRhYmluZGV4PSItMSI+PHNwYW4gY2xhc3M9ImdseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi11cCI+PC9zcGFuPjwvYT48L3RkPlxuICAgICAgPHRkIG5nLXNob3c9InNob3dNZXJpZGlhbiI+PC90ZD5cbiAgICA8L3RyPlxuICAgIDx0cj5cbiAgICAgIDx0ZCBjbGFzcz0iZm9ybS1ncm91cCB1aWItdGltZSBob3VycyIgbmctY2xhc3M9IntcJ2hhcy1lcnJvclwnOiBpbnZhbGlkSG91cnN9Ij5cbiAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIHBsYWNlaG9sZGVyPSJISCIgbmctbW9kZWw9ImhvdXJzIiBuZy1jaGFuZ2U9InVwZGF0ZUhvdXJzKCkiIGNsYXNzPSJmb3JtLWNvbnRyb2wgdGV4dC1jZW50ZXIiIG5nLXJlYWRvbmx5PSI6OnJlYWRvbmx5SW5wdXQiIG1heGxlbmd0aD0iMiIgdGFiaW5kZXg9Int7Ojp0YWJpbmRleH19IiBuZy1kaXNhYmxlZD0ibm9JbmNyZW1lbnRIb3VycygpIiBuZy1ibHVyPSJibHVyKCkiPlxuICAgICAgPC90ZD5cbiAgICAgIDx0ZCBjbGFzcz0idWliLXNlcGFyYXRvciI+OjwvdGQ+XG4gICAgICA8dGQgY2xhc3M9ImZvcm0tZ3JvdXAgdWliLXRpbWUgbWludXRlcyIgbmctY2xhc3M9IntcJ2hhcy1lcnJvclwnOiBpbnZhbGlkTWludXRlc30iPlxuICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgcGxhY2Vob2xkZXI9Ik1NIiBuZy1tb2RlbD0ibWludXRlcyIgbmctY2hhbmdlPSJ1cGRhdGVNaW51dGVzKCkiIGNsYXNzPSJmb3JtLWNvbnRyb2wgdGV4dC1jZW50ZXIiIG5nLXJlYWRvbmx5PSI6OnJlYWRvbmx5SW5wdXQiIG1heGxlbmd0aD0iMiIgdGFiaW5kZXg9Int7Ojp0YWJpbmRleH19IiBuZy1kaXNhYmxlZD0ibm9JbmNyZW1lbnRNaW51dGVzKCkiIG5nLWJsdXI9ImJsdXIoKSI+XG4gICAgICA8L3RkPlxuICAgICAgPHRkIG5nLXNob3c9InNob3dTZWNvbmRzIiBjbGFzcz0idWliLXNlcGFyYXRvciI+OjwvdGQ+XG4gICAgICA8dGQgY2xhc3M9ImZvcm0tZ3JvdXAgdWliLXRpbWUgc2Vjb25kcyIgbmctY2xhc3M9IntcJ2hhcy1lcnJvclwnOiBpbnZhbGlkU2Vjb25kc30iIG5nLXNob3c9InNob3dTZWNvbmRzIj5cbiAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIHBsYWNlaG9sZGVyPSJTUyIgbmctbW9kZWw9InNlY29uZHMiIG5nLWNoYW5nZT0idXBkYXRlU2Vjb25kcygpIiBjbGFzcz0iZm9ybS1jb250cm9sIHRleHQtY2VudGVyIiBuZy1yZWFkb25seT0icmVhZG9ubHlJbnB1dCIgbWF4bGVuZ3RoPSIyIiB0YWJpbmRleD0ie3s6OnRhYmluZGV4fX0iIG5nLWRpc2FibGVkPSJub0luY3JlbWVudFNlY29uZHMoKSIgbmctYmx1cj0iYmx1cigpIj5cbiAgICAgIDwvdGQ+XG4gICAgICA8dGQgbmctc2hvdz0ic2hvd01lcmlkaWFuIiBjbGFzcz0idWliLXRpbWUgYW0tcG0iPjxidXR0b24gdHlwZT0iYnV0dG9uIiBuZy1jbGFzcz0ie2Rpc2FibGVkOiBub1RvZ2dsZU1lcmlkaWFuKCl9IiBjbGFzcz0iYnRuIGJ0bi1kZWZhdWx0IHRleHQtY2VudGVyIiBuZy1jbGljaz0idG9nZ2xlTWVyaWRpYW4oKSIgbmctZGlzYWJsZWQ9Im5vVG9nZ2xlTWVyaWRpYW4oKSIgdGFiaW5kZXg9Int7Ojp0YWJpbmRleH19Ij57e21lcmlkaWFufX08L2J1dHRvbj48L3RkPlxuICAgIDwvdHI+XG4gICAgPHRyIGNsYXNzPSJ0ZXh0LWNlbnRlciIgbmctc2hvdz0iOjpzaG93U3Bpbm5lcnMiPlxuICAgICAgPHRkIGNsYXNzPSJ1aWItZGVjcmVtZW50IGhvdXJzIj48YSBuZy1jbGljaz0iZGVjcmVtZW50SG91cnMoKSIgbmctY2xhc3M9IntkaXNhYmxlZDogbm9EZWNyZW1lbnRIb3VycygpfSIgY2xhc3M9ImJ0biBidG4tbGluayIgbmctZGlzYWJsZWQ9Im5vRGVjcmVtZW50SG91cnMoKSIgdGFiaW5kZXg9Ii0xIj48c3BhbiBjbGFzcz0iZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLWRvd24iPjwvc3Bhbj48L2E+PC90ZD5cbiAgICAgIDx0ZD4mbmJzcDs8L3RkPlxuICAgICAgPHRkIGNsYXNzPSJ1aWItZGVjcmVtZW50IG1pbnV0ZXMiPjxhIG5nLWNsaWNrPSJkZWNyZW1lbnRNaW51dGVzKCkiIG5nLWNsYXNzPSJ7ZGlzYWJsZWQ6IG5vRGVjcmVtZW50TWludXRlcygpfSIgY2xhc3M9ImJ0biBidG4tbGluayIgbmctZGlzYWJsZWQ9Im5vRGVjcmVtZW50TWludXRlcygpIiB0YWJpbmRleD0iLTEiPjxzcGFuIGNsYXNzPSJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tZG93biI+PC9zcGFuPjwvYT48L3RkPlxuICAgICAgPHRkIG5nLXNob3c9InNob3dTZWNvbmRzIj4mbmJzcDs8L3RkPlxuICAgICAgPHRkIG5nLXNob3c9InNob3dTZWNvbmRzIiBjbGFzcz0idWliLWRlY3JlbWVudCBzZWNvbmRzIj48YSBuZy1jbGljaz0iZGVjcmVtZW50U2Vjb25kcygpIiBuZy1jbGFzcz0ie2Rpc2FibGVkOiBub0RlY3JlbWVudFNlY29uZHMoKX0iIGNsYXNzPSJidG4gYnRuLWxpbmsiIG5nLWRpc2FibGVkPSJub0RlY3JlbWVudFNlY29uZHMoKSIgdGFiaW5kZXg9Ii0xIj48c3BhbiBjbGFzcz0iZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLWRvd24iPjwvc3Bhbj48L2E+PC90ZD5cbiAgICAgIDx0ZCBuZy1zaG93PSJzaG93TWVyaWRpYW4iPjwvdGQ+XG4gICAgPC90cj5cbiAgPC90Ym9keT5cbjwvdGFibGU+XG4nKX1dKSxhbmd1bGFyLm1vZHVsZSgidWliL3RlbXBsYXRlL3R5cGVhaGVhZC90eXBlYWhlYWQtbWF0Y2guaHRtbCIsW10pLnJ1bihbIiR0ZW1wbGF0ZUNhY2hlIixmdW5jdGlvbihhKXthLnB1dCgidWliL3RlbXBsYXRlL3R5cGVhaGVhZC90eXBlYWhlYWQtbWF0Y2guaHRtbCIsJzxhIGhyZWZcbiAgIHRhYmluZGV4PSItMSJcbiAgIG5nLWJpbmQtaHRtbD0ibWF0Y2gubGFiZWwgfCB1aWJUeXBlYWhlYWRIaWdobGlnaHQ6cXVlcnkiXG4gICBuZy1hdHRyLXRpdGxlPSJ7e21hdGNoLmxhYmVsfX0iPjwvYT5cbicpfV0pLGFuZ3VsYXIubW9kdWxlKCJ1aWIvdGVtcGxhdGUvdHlwZWFoZWFkL3R5cGVhaGVhZC1wb3B1cC5odG1sIixbXSkucnVuKFsiJHRlbXBsYXRlQ2FjaGUiLGZ1bmN0aW9uKGEpe2EucHV0KCJ1aWIvdGVtcGxhdGUvdHlwZWFoZWFkL3R5cGVhaGVhZC1wb3B1cC5odG1sIiwnPHVsIGNsYXNzPSJkcm9wZG93bi1tZW51IiBuZy1zaG93PSJpc09wZW4oKSAmJiAhbW92ZUluUHJvZ3Jlc3MiIG5nLXN0eWxlPSJ7dG9wOiBwb3NpdGlvbigpLnRvcCtcJ3B4XCcsIGxlZnQ6IHBvc2l0aW9uKCkubGVmdCtcJ3B4XCd9IiByb2xlPSJsaXN0Ym94IiBhcmlhLWhpZGRlbj0ie3shaXNPcGVuKCl9fSI+XG4gICAgPGxpIGNsYXNzPSJ1aWItdHlwZWFoZWFkLW1hdGNoIiBuZy1yZXBlYXQ9Im1hdGNoIGluIG1hdGNoZXMgdHJhY2sgYnkgJGluZGV4IiBuZy1jbGFzcz0ie2FjdGl2ZTogaXNBY3RpdmUoJGluZGV4KSB9IiBuZy1tb3VzZWVudGVyPSJzZWxlY3RBY3RpdmUoJGluZGV4KSIgbmctY2xpY2s9InNlbGVjdE1hdGNoKCRpbmRleCwgJGV2ZW50KSIgcm9sZT0ib3B0aW9uIiBpZD0ie3s6Om1hdGNoLmlkfX0iPlxuICAgICAgICA8ZGl2IHVpYi10eXBlYWhlYWQtbWF0Y2ggaW5kZXg9IiRpbmRleCIgbWF0Y2g9Im1hdGNoIiBxdWVyeT0icXVlcnkiIHRlbXBsYXRlLXVybD0idGVtcGxhdGVVcmwiPjwvZGl2PlxuICAgIDwvbGk+XG48L3VsPlxuJyl9XSksYW5ndWxhci5tb2R1bGUoInVpLmJvb3RzdHJhcC5jYXJvdXNlbCIpLnJ1bihmdW5jdGlvbigpeyFhbmd1bGFyLiQkY3NwKCkubm9JbmxpbmVTdHlsZSYmIWFuZ3VsYXIuJCR1aWJDYXJvdXNlbENzcyYmYW5ndWxhci5lbGVtZW50KGRvY3VtZW50KS5maW5kKCJoZWFkIikucHJlcGVuZCgnPHN0eWxlIHR5cGU9InRleHQvY3NzIj4ubmctYW5pbWF0ZS5pdGVtOm5vdCgubGVmdCk6bm90KC5yaWdodCl7LXdlYmtpdC10cmFuc2l0aW9uOjBzIGVhc2UtaW4tb3V0IGxlZnQ7dHJhbnNpdGlvbjowcyBlYXNlLWluLW91dCBsZWZ0fTwvc3R5bGU+JyksYW5ndWxhci4kJHVpYkNhcm91c2VsQ3NzPSEwfSksYW5ndWxhci5tb2R1bGUoInVpLmJvb3RzdHJhcC5kYXRlcGlja2VyIikucnVuKGZ1bmN0aW9uKCl7IWFuZ3VsYXIuJCRjc3AoKS5ub0lubGluZVN0eWxlJiYhYW5ndWxhci4kJHVpYkRhdGVwaWNrZXJDc3MmJmFuZ3VsYXIuZWxlbWVudChkb2N1bWVudCkuZmluZCgiaGVhZCIpLnByZXBlbmQoJzxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+LnVpYi1kYXRlcGlja2VyIC51aWItdGl0bGV7d2lkdGg6MTAwJTt9LnVpYi1kYXkgYnV0dG9uLC51aWItbW9udGggYnV0dG9uLC51aWIteWVhciBidXR0b257bWluLXdpZHRoOjEwMCU7fS51aWItbGVmdCwudWliLXJpZ2h0e3dpZHRoOjEwMCV9PC9zdHlsZT4nKSxhbmd1bGFyLiQkdWliRGF0ZXBpY2tlckNzcz0hMH0pLGFuZ3VsYXIubW9kdWxlKCJ1aS5ib290c3RyYXAucG9zaXRpb24iKS5ydW4oZnVuY3Rpb24oKXshYW5ndWxhci4kJGNzcCgpLm5vSW5saW5lU3R5bGUmJiFhbmd1bGFyLiQkdWliUG9zaXRpb25Dc3MmJmFuZ3VsYXIuZWxlbWVudChkb2N1bWVudCkuZmluZCgiaGVhZCIpLnByZXBlbmQoJzxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+LnVpYi1wb3NpdGlvbi1tZWFzdXJle2Rpc3BsYXk6YmxvY2sgIWltcG9ydGFudDt2aXNpYmlsaXR5OmhpZGRlbiAhaW1wb3J0YW50O3Bvc2l0aW9uOmFic29sdXRlICFpbXBvcnRhbnQ7dG9wOi05OTk5cHggIWltcG9ydGFudDtsZWZ0Oi05OTk5cHggIWltcG9ydGFudDt9LnVpYi1wb3NpdGlvbi1zY3JvbGxiYXItbWVhc3VyZXtwb3NpdGlvbjphYnNvbHV0ZSAhaW1wb3J0YW50O3RvcDotOTk5OXB4ICFpbXBvcnRhbnQ7d2lkdGg6NTBweCAhaW1wb3J0YW50O2hlaWdodDo1MHB4ICFpbXBvcnRhbnQ7b3ZlcmZsb3c6c2Nyb2xsICFpbXBvcnRhbnQ7fS51aWItcG9zaXRpb24tYm9keS1zY3JvbGxiYXItbWVhc3VyZXtvdmVyZmxvdzpzY3JvbGwgIWltcG9ydGFudDt9PC9zdHlsZT4nKSxhbmd1bGFyLiQkdWliUG9zaXRpb25Dc3M9ITB9KSxhbmd1bGFyLm1vZHVsZSgidWkuYm9vdHN0cmFwLmRhdGVwaWNrZXJQb3B1cCIpLnJ1bihmdW5jdGlvbigpeyFhbmd1bGFyLiQkY3NwKCkubm9JbmxpbmVTdHlsZSYmIWFuZ3VsYXIuJCR1aWJEYXRlcGlja2VycG9wdXBDc3MmJmFuZ3VsYXIuZWxlbWVudChkb2N1bWVudCkuZmluZCgiaGVhZCIpLnByZXBlbmQoJzxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+LnVpYi1kYXRlcGlja2VyLXBvcHVwLmRyb3Bkb3duLW1lbnV7ZGlzcGxheTpibG9jaztmbG9hdDpub25lO21hcmdpbjowO30udWliLWJ1dHRvbi1iYXJ7cGFkZGluZzoxMHB4IDlweCAycHg7fTwvc3R5bGU+JyksYW5ndWxhci4kJHVpYkRhdGVwaWNrZXJwb3B1cENzcz0hMH0pLGFuZ3VsYXIubW9kdWxlKCJ1aS5ib290c3RyYXAudG9vbHRpcCIpLnJ1bihmdW5jdGlvbigpeyFhbmd1bGFyLiQkY3NwKCkubm9JbmxpbmVTdHlsZSYmIWFuZ3VsYXIuJCR1aWJUb29sdGlwQ3NzJiZhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQpLmZpbmQoImhlYWQiKS5wcmVwZW5kKCc8c3R5bGUgdHlwZT0idGV4dC9jc3MiPlt1aWItdG9vbHRpcC1wb3B1cF0udG9vbHRpcC50b3AtbGVmdCA+IC50b29sdGlwLWFycm93LFt1aWItdG9vbHRpcC1wb3B1cF0udG9vbHRpcC50b3AtcmlnaHQgPiAudG9vbHRpcC1hcnJvdyxbdWliLXRvb2x0aXAtcG9wdXBdLnRvb2x0aXAuYm90dG9tLWxlZnQgPiAudG9vbHRpcC1hcnJvdyxbdWliLXRvb2x0aXAtcG9wdXBdLnRvb2x0aXAuYm90dG9tLXJpZ2h0ID4gLnRvb2x0aXAtYXJyb3csW3VpYi10b29sdGlwLXBvcHVwXS50b29sdGlwLmxlZnQtdG9wID4gLnRvb2x0aXAtYXJyb3csW3VpYi10b29sdGlwLXBvcHVwXS50b29sdGlwLmxlZnQtYm90dG9tID4gLnRvb2x0aXAtYXJyb3csW3VpYi10b29sdGlwLXBvcHVwXS50b29sdGlwLnJpZ2h0LXRvcCA+IC50b29sdGlwLWFycm93LFt1aWItdG9vbHRpcC1wb3B1cF0udG9vbHRpcC5yaWdodC1ib3R0b20gPiAudG9vbHRpcC1hcnJvdyxbdWliLXRvb2x0aXAtaHRtbC1wb3B1cF0udG9vbHRpcC50b3AtbGVmdCA+IC50b29sdGlwLWFycm93LFt1aWItdG9vbHRpcC1odG1sLXBvcHVwXS50b29sdGlwLnRvcC1yaWdodCA+IC50b29sdGlwLWFycm93LFt1aWItdG9vbHRpcC1odG1sLXBvcHVwXS50b29sdGlwLmJvdHRvbS1sZWZ0ID4gLnRvb2x0aXAtYXJyb3csW3VpYi10b29sdGlwLWh0bWwtcG9wdXBdLnRvb2x0aXAuYm90dG9tLXJpZ2h0ID4gLnRvb2x0aXAtYXJyb3csW3VpYi10b29sdGlwLWh0bWwtcG9wdXBdLnRvb2x0aXAubGVmdC10b3AgPiAudG9vbHRpcC1hcnJvdyxbdWliLXRvb2x0aXAtaHRtbC1wb3B1cF0udG9vbHRpcC5sZWZ0LWJvdHRvbSA+IC50b29sdGlwLWFycm93LFt1aWItdG9vbHRpcC1odG1sLXBvcHVwXS50b29sdGlwLnJpZ2h0LXRvcCA+IC50b29sdGlwLWFycm93LFt1aWItdG9vbHRpcC1odG1sLXBvcHVwXS50b29sdGlwLnJpZ2h0LWJvdHRvbSA+IC50b29sdGlwLWFycm93LFt1aWItdG9vbHRpcC10ZW1wbGF0ZS1wb3B1cF0udG9vbHRpcC50b3AtbGVmdCA+IC50b29sdGlwLWFycm93LFt1aWItdG9vbHRpcC10ZW1wbGF0ZS1wb3B1cF0udG9vbHRpcC50b3AtcmlnaHQgPiAudG9vbHRpcC1hcnJvdyxbdWliLXRvb2x0aXAtdGVtcGxhdGUtcG9wdXBdLnRvb2x0aXAuYm90dG9tLWxlZnQgPiAudG9vbHRpcC1hcnJvdyxbdWliLXRvb2x0aXAtdGVtcGxhdGUtcG9wdXBdLnRvb2x0aXAuYm90dG9tLXJpZ2h0ID4gLnRvb2x0aXAtYXJyb3csW3VpYi10b29sdGlwLXRlbXBsYXRlLXBvcHVwXS50b29sdGlwLmxlZnQtdG9wID4gLnRvb2x0aXAtYXJyb3csW3VpYi10b29sdGlwLXRlbXBsYXRlLXBvcHVwXS50b29sdGlwLmxlZnQtYm90dG9tID4gLnRvb2x0aXAtYXJyb3csW3VpYi10b29sdGlwLXRlbXBsYXRlLXBvcHVwXS50b29sdGlwLnJpZ2h0LXRvcCA+IC50b29sdGlwLWFycm93LFt1aWItdG9vbHRpcC10ZW1wbGF0ZS1wb3B1cF0udG9vbHRpcC5yaWdodC1ib3R0b20gPiAudG9vbHRpcC1hcnJvdyxbdWliLXBvcG92ZXItcG9wdXBdLnBvcG92ZXIudG9wLWxlZnQgPiAuYXJyb3csW3VpYi1wb3BvdmVyLXBvcHVwXS5wb3BvdmVyLnRvcC1yaWdodCA+IC5hcnJvdyxbdWliLXBvcG92ZXItcG9wdXBdLnBvcG92ZXIuYm90dG9tLWxlZnQgPiAuYXJyb3csW3VpYi1wb3BvdmVyLXBvcHVwXS5wb3BvdmVyLmJvdHRvbS1yaWdodCA+IC5hcnJvdyxbdWliLXBvcG92ZXItcG9wdXBdLnBvcG92ZXIubGVmdC10b3AgPiAuYXJyb3csW3VpYi1wb3BvdmVyLXBvcHVwXS5wb3BvdmVyLmxlZnQtYm90dG9tID4gLmFycm93LFt1aWItcG9wb3Zlci1wb3B1cF0ucG9wb3Zlci5yaWdodC10b3AgPiAuYXJyb3csW3VpYi1wb3BvdmVyLXBvcHVwXS5wb3BvdmVyLnJpZ2h0LWJvdHRvbSA+IC5hcnJvdyxbdWliLXBvcG92ZXItaHRtbC1wb3B1cF0ucG9wb3Zlci50b3AtbGVmdCA+IC5hcnJvdyxbdWliLXBvcG92ZXItaHRtbC1wb3B1cF0ucG9wb3Zlci50b3AtcmlnaHQgPiAuYXJyb3csW3VpYi1wb3BvdmVyLWh0bWwtcG9wdXBdLnBvcG92ZXIuYm90dG9tLWxlZnQgPiAuYXJyb3csW3VpYi1wb3BvdmVyLWh0bWwtcG9wdXBdLnBvcG92ZXIuYm90dG9tLXJpZ2h0ID4gLmFycm93LFt1aWItcG9wb3Zlci1odG1sLXBvcHVwXS5wb3BvdmVyLmxlZnQtdG9wID4gLmFycm93LFt1aWItcG9wb3Zlci1odG1sLXBvcHVwXS5wb3BvdmVyLmxlZnQtYm90dG9tID4gLmFycm93LFt1aWItcG9wb3Zlci1odG1sLXBvcHVwXS5wb3BvdmVyLnJpZ2h0LXRvcCA+IC5hcnJvdyxbdWliLXBvcG92ZXItaHRtbC1wb3B1cF0ucG9wb3Zlci5yaWdodC1ib3R0b20gPiAuYXJyb3csW3VpYi1wb3BvdmVyLXRlbXBsYXRlLXBvcHVwXS5wb3BvdmVyLnRvcC1sZWZ0ID4gLmFycm93LFt1aWItcG9wb3Zlci10ZW1wbGF0ZS1wb3B1cF0ucG9wb3Zlci50b3AtcmlnaHQgPiAuYXJyb3csW3VpYi1wb3BvdmVyLXRlbXBsYXRlLXBvcHVwXS5wb3BvdmVyLmJvdHRvbS1sZWZ0ID4gLmFycm93LFt1aWItcG9wb3Zlci10ZW1wbGF0ZS1wb3B1cF0ucG9wb3Zlci5ib3R0b20tcmlnaHQgPiAuYXJyb3csW3VpYi1wb3BvdmVyLXRlbXBsYXRlLXBvcHVwXS5wb3BvdmVyLmxlZnQtdG9wID4gLmFycm93LFt1aWItcG9wb3Zlci10ZW1wbGF0ZS1wb3B1cF0ucG9wb3Zlci5sZWZ0LWJvdHRvbSA+IC5hcnJvdyxbdWliLXBvcG92ZXItdGVtcGxhdGUtcG9wdXBdLnBvcG92ZXIucmlnaHQtdG9wID4gLmFycm93LFt1aWItcG9wb3Zlci10ZW1wbGF0ZS1wb3B1cF0ucG9wb3Zlci5yaWdodC1ib3R0b20gPiAuYXJyb3d7dG9wOmF1dG87Ym90dG9tOmF1dG87bGVmdDphdXRvO3JpZ2h0OmF1dG87bWFyZ2luOjA7fVt1aWItcG9wb3Zlci1wb3B1cF0ucG9wb3ZlcixbdWliLXBvcG92ZXItaHRtbC1wb3B1cF0ucG9wb3ZlcixbdWliLXBvcG92ZXItdGVtcGxhdGUtcG9wdXBdLnBvcG92ZXJ7ZGlzcGxheTpibG9jayAhaW1wb3J0YW50O308L3N0eWxlPicpLGFuZ3VsYXIuJCR1aWJUb29sdGlwQ3NzPSEwfSksYW5ndWxhci5tb2R1bGUoInVpLmJvb3RzdHJhcC50aW1lcGlja2VyIikucnVuKGZ1bmN0aW9uKCl7IWFuZ3VsYXIuJCRjc3AoKS5ub0lubGluZVN0eWxlJiYhYW5ndWxhci4kJHVpYlRpbWVwaWNrZXJDc3MmJmFuZ3VsYXIuZWxlbWVudChkb2N1bWVudCkuZmluZCgiaGVhZCIpLnByZXBlbmQoJzxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+LnVpYi10aW1lIGlucHV0e3dpZHRoOjUwcHg7fTwvc3R5bGU+JyksYW5ndWxhci4kJHVpYlRpbWVwaWNrZXJDc3M9ITB9KSxhbmd1bGFyLm1vZHVsZSgidWkuYm9vdHN0cmFwLnR5cGVhaGVhZCIpLnJ1bihmdW5jdGlvbigpeyFhbmd1bGFyLiQkY3NwKCkubm9JbmxpbmVTdHlsZSYmIWFuZ3VsYXIuJCR1aWJUeXBlYWhlYWRDc3MmJmFuZ3VsYXIuZWxlbWVudChkb2N1bWVudCkuZmluZCgiaGVhZCIpLnByZXBlbmQoJzxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+W3VpYi10eXBlYWhlYWQtcG9wdXBdLmRyb3Bkb3duLW1lbnV7ZGlzcGxheTpibG9jazt9PC9zdHlsZT4nKSxhbmd1bGFyLiQkdWliVHlwZWFoZWFkQ3NzPSEwfSk7Ci8qIQogKiB1aS1ncmlkIC0gdjQuNC4xMSAtIDIwMTgtMDUtMTYKICogQ29weXJpZ2h0IChjKSAyMDE4IDsgTGljZW5zZTogTUlUIAogKi8KCgohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7YW5ndWxhci5tb2R1bGUoInVpLmdyaWQuaTE4biIsW10pLGFuZ3VsYXIubW9kdWxlKCJ1aS5ncmlkIixbInVpLmdyaWQuaTE4biJdKX0oKSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0Ijthbmd1bGFyLm1vZHVsZSgidWkuZ3JpZCIpLmNvbnN0YW50KCJ1aUdyaWRDb25zdGFudHMiLHtMT0dfREVCVUdfTUVTU0FHRVM6ITAsTE9HX1dBUk5fTUVTU0FHRVM6ITAsTE9HX0VSUk9SX01FU1NBR0VTOiEwLENVU1RPTV9GSUxURVJTOi9DVVNUT01fRklMVEVSUy9nLENPTF9GSUVMRDovQ09MX0ZJRUxEL2csTU9ERUxfQ09MX0ZJRUxEOi9NT0RFTF9DT0xfRklFTEQvZyxUT09MVElQOi90aXRsZT1cIlRPT0xUSVBcIi9nLERJU1BMQVlfQ0VMTF9URU1QTEFURTovRElTUExBWV9DRUxMX1RFTVBMQVRFL2csVEVNUExBVEVfUkVHRVhQOi88Lis+LyxGVU5DX1JFR0VYUDovKFwoW14pXSpcKSk/JC8sRE9UX1JFR0VYUDovXC4vZyxBUE9TX1JFR0VYUDovJy9nLEJSQUNLRVRfUkVHRVhQOi9eKC4qKSgoPzpccypcW1xzKlxkK1xzKlxdXHMqKXwoPzpccypcW1xzKiIoPzpbXiJcXF18XFwuKSoiXHMqXF1ccyopfCg/OlxzKlxbXHMqJyg/OlteJ1xcXXxcXC4pKidccypcXVxzKikpKC4qKSQvLENPTF9DTEFTU19QUkVGSVg6InVpLWdyaWQtY29sIixFTlRJVFlfQklORElORzoiJCR0aGlzIixldmVudHM6e0dSSURfU0NST0xMOiJ1aUdyaWRTY3JvbGwiLENPTFVNTl9NRU5VX1NIT1dOOiJ1aUdyaWRDb2xNZW51U2hvd24iLElURU1fRFJBR0dJTkc6InVpR3JpZEl0ZW1EcmFnU3RhcnQiLENPTFVNTl9IRUFERVJfQ0xJQ0s6InVpR3JpZENvbHVtbkhlYWRlckNsaWNrIn0sa2V5bWFwOntUQUI6OSxTVFJHOjE3LENBUFNMT0NLOjIwLENUUkw6MTcsQ1RSTFJJR0hUOjE4LENUUkxSOjE4LFNISUZUOjE2LFJFVFVSTjoxMyxFTlRFUjoxMyxCQUNLU1BBQ0U6OCxCQ0tTUDo4LEFMVDoxOCxBTFRSOjE3LEFMVFJJR0hUOjE3LFNQQUNFOjMyLFdJTjo5MSxNQUM6OTEsRk46bnVsbCxQR19VUDozMyxQR19ET1dOOjM0LFVQOjM4LERPV046NDAsTEVGVDozNyxSSUdIVDozOSxFU0M6MjcsREVMOjQ2LEYxOjExMixGMjoxMTMsRjM6MTE0LEY0OjExNSxGNToxMTYsRjY6MTE3LEY3OjExOCxGODoxMTksRjk6MTIwLEYxMDoxMjEsRjExOjEyMixGMTI6MTIzfSxBU0M6ImFzYyIsREVTQzoiZGVzYyIsZmlsdGVyOntTVEFSVFNfV0lUSDoyLEVORFNfV0lUSDo0LEVYQUNUOjgsQ09OVEFJTlM6MTYsR1JFQVRFUl9USEFOOjMyLEdSRUFURVJfVEhBTl9PUl9FUVVBTDo2NCxMRVNTX1RIQU46MTI4LExFU1NfVEhBTl9PUl9FUVVBTDoyNTYsTk9UX0VRVUFMOjUxMixTRUxFQ1Q6InNlbGVjdCIsSU5QVVQ6ImlucHV0In0sYWdncmVnYXRpb25UeXBlczp7c3VtOjIsY291bnQ6NCxhdmc6OCxtaW46MTYsbWF4OjMyfSxDVVJSRU5DWV9TWU1CT0xTOlsiwqQiLCLYiyIsIkFyIiwiyYMiLCLguL8iLCJCLy4iLCJCciIsIkJzLiIsIkJzLkYuIiwiR0jigrUiLCLCoiIsImMiLCJDaC4iLCLigqEiLCJDJCIsIkQiLCLQtNC10L0iLCLYr9isIiwiLtivLtioIiwi2K8u2LkiLCJKRCIsItivLtmDIiwi2YQu2K8iLCLQtNC40L0iLCLYry7YqiIsItivLtmFLiIsItivLtilIiwiRGIiLCIkIiwi4oKrIiwiRXNjIiwi4oKsIiwixpIiLCJGdCIsIkZCdSIsIkZDRkEiLCJDRkEiLCJGciIsIkZSdyIsIkciLCJnciIsIuKCsiIsImgiLCLigrQiLCLigq0iLCJLxI0iLCJrciIsImtuIiwiTUsiLCJaSyIsIkt6IiwiSyIsIkwiLCJMZSIsItC70LIiLCJFIiwibHAiLCJNIiwiS00iLCJNVCIsIuKCpSIsIk5mayIsIuKCpiIsIk51LiIsIlVNIiwiVCQiLCJNT1AkIiwi4oKxIiwiUHQuIiwiwqMiLCLYrC7ZhS4iLCJMTCIsIkxTIiwiUCIsIlEiLCJxIiwiUiIsIlIkIiwi2LEu2LkuIiwi2LEu2YIiLCLYsS7YsyIsIuGfmyIsIlJNIiwicCIsIlJmLiIsIuKCuSIsIuKCqCIsIlNSZSIsIlJwIiwi4oKqIiwiS3NoIiwiU2guU28uIiwiVVNoIiwiUy8iLCJTRFIiLCLRgdC+0LwiLCLgp7NcdCIsIldTJCIsIuKCriIsIlZUIiwi4oKpIiwiwqUiLCJ6xYIiXSxzY3JvbGxEaXJlY3Rpb246e1VQOiJ1cCIsRE9XTjoiZG93biIsTEVGVDoibGVmdCIsUklHSFQ6InJpZ2h0IixOT05FOiJub25lIn0sZGF0YUNoYW5nZTp7QUxMOiJhbGwiLEVESVQ6ImVkaXQiLFJPVzoicm93IixDT0xVTU46ImNvbHVtbiIsT1BUSU9OUzoib3B0aW9ucyJ9LHNjcm9sbGJhcnM6e05FVkVSOjAsQUxXQVlTOjEsV0hFTl9ORUVERUQ6Mn19KX0oKSxhbmd1bGFyLm1vZHVsZSgidWkuZ3JpZCIpLmRpcmVjdGl2ZSgidWlHcmlkQ2VsbCIsWyIkY29tcGlsZSIsIiRwYXJzZSIsImdyaWRVdGlsIiwidWlHcmlkQ29uc3RhbnRzIixmdW5jdGlvbihhLGUsbCx1KXtyZXR1cm57cHJpb3JpdHk6MCxzY29wZTohMSxyZXF1aXJlOiI/XnVpR3JpZCIsY29tcGlsZTpmdW5jdGlvbigpe3JldHVybntwcmU6ZnVuY3Rpb24odCxyLGUsaSl7aWYoaSYmdC5jb2wuY29tcGlsZWRFbGVtZW50Rm4pKDAsdC5jb2wuY29tcGlsZWRFbGVtZW50Rm4pKHQsZnVuY3Rpb24oZSx0KXtyLmFwcGVuZChlKX0pO2Vsc2UgaWYoaSYmIXQuY29sLmNvbXBpbGVkRWxlbWVudEZuKXQuY29sLmdldENvbXBpbGVkRWxlbWVudEZuKCkudGhlbihmdW5jdGlvbihlKXtlKHQsZnVuY3Rpb24oZSx0KXtyLmFwcGVuZChlKX0pfSkuY2F0Y2goYW5ndWxhci5ub29wKTtlbHNle3ZhciBuPXQuY29sLmNlbGxUZW1wbGF0ZS5yZXBsYWNlKHUuTU9ERUxfQ09MX0ZJRUxELCJyb3cuZW50aXR5LiIrbC5wcmVFdmFsKHQuY29sLmZpZWxkKSkucmVwbGFjZSh1LkNPTF9GSUVMRCwiZ3JpZC5nZXRDZWxsVmFsdWUocm93LCBjb2wpIiksbz1hKG4pKHQpO3IuYXBwZW5kKG8pfX0scG9zdDpmdW5jdGlvbihpLG4sZSx0KXt2YXIgbyxhPWkuY29sLmdldENvbENsYXNzKCExKTtuLmFkZENsYXNzKGEpO3ZhciBsPWZ1bmN0aW9uKGUpe3ZhciB0PW47byYmKHQucmVtb3ZlQ2xhc3Mobyksbz1udWxsKSxvPWFuZ3VsYXIuaXNGdW5jdGlvbihpLmNvbC5jZWxsQ2xhc3MpP2kuY29sLmNlbGxDbGFzcyhpLmdyaWQsaS5yb3csaS5jb2wsaS5yb3dSZW5kZXJJbmRleCxpLmNvbFJlbmRlckluZGV4KTppLmNvbC5jZWxsQ2xhc3MsdC5hZGRDbGFzcyhvKX07aS5jb2wuY2VsbENsYXNzJiZsKCk7dmFyIHI9aS5ncmlkLnJlZ2lzdGVyRGF0YUNoYW5nZUNhbGxiYWNrKGwsW3UuZGF0YUNoYW5nZS5DT0xVTU4sdS5kYXRhQ2hhbmdlLkVESVRdKSxzPWkuJHdhdGNoKCJyb3ciLGZ1bmN0aW9uKGUsdCl7aWYoZSE9PXQpeyhvfHxpLmNvbC5jZWxsQ2xhc3MpJiZsKCk7dmFyIHI9aS5jb2wuZ2V0Q29sQ2xhc3MoITEpO3IhPT1hJiYobi5yZW1vdmVDbGFzcyhhKSxuLmFkZENsYXNzKHIpLGE9cil9fSksZD1mdW5jdGlvbigpe3IoKSxzKCl9O2kuJG9uKCIkZGVzdHJveSIsZCksbi5vbigiJGRlc3Ryb3kiLGQpfX19fX1dKSxhbmd1bGFyLm1vZHVsZSgidWkuZ3JpZCIpLnNlcnZpY2UoInVpR3JpZENvbHVtbk1lbnVTZXJ2aWNlIixbImkxOG5TZXJ2aWNlIiwidWlHcmlkQ29uc3RhbnRzIiwiZ3JpZFV0aWwiLGZ1bmN0aW9uKGUscixnKXt2YXIgaT17aW5pdGlhbGl6ZTpmdW5jdGlvbihlLHQpe2UuZ3JpZD10LmdyaWQsKHQuY29sdW1uTWVudVNjb3BlPWUpLm1lbnVTaG93bj0hMX0sc2V0Q29sTWVudUl0ZW1XYXRjaDpmdW5jdGlvbih0KXt2YXIgZT10LiR3YXRjaCgiY29sLm1lbnVJdGVtcyIsZnVuY3Rpb24oZSl7dm9pZCAwIT09ZSYmZSYmYW5ndWxhci5pc0FycmF5KGUpPyhlLmZvckVhY2goZnVuY3Rpb24oZSl7dm9pZCAwIT09ZS5jb250ZXh0JiZlLmNvbnRleHR8fChlLmNvbnRleHQ9e30pLGUuY29udGV4dC5jb2w9dC5jb2x9KSx0Lm1lbnVJdGVtcz10LmRlZmF1bHRNZW51SXRlbXMuY29uY2F0KGUpKTp0Lm1lbnVJdGVtcz10LmRlZmF1bHRNZW51SXRlbXN9KTt0LiRvbigiJGRlc3Ryb3kiLGUpfSxzb3J0YWJsZTpmdW5jdGlvbihlKXtyZXR1cm4hIShlLmdyaWQub3B0aW9ucy5lbmFibGVTb3J0aW5nJiZ2b2lkIDAhPT1lLmNvbCYmZS5jb2wmJmUuY29sLmVuYWJsZVNvcnRpbmcpfSxpc0FjdGl2ZVNvcnQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwIT09ZS5jb2wmJnZvaWQgMCE9PWUuY29sLnNvcnQmJnZvaWQgMCE9PWUuY29sLnNvcnQuZGlyZWN0aW9uJiZlLmNvbC5zb3J0LmRpcmVjdGlvbj09PXR9LHN1cHByZXNzUmVtb3ZlU29ydDpmdW5jdGlvbihlKXtyZXR1cm4hKCFlLmNvbHx8IWUuY29sLnN1cHByZXNzUmVtb3ZlU29ydCl9LGhpZGVhYmxlOmZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lLmNvbHx8IWUuY29sfHwhZS5jb2wuY29sRGVmfHwhMSE9PWUuY29sLmNvbERlZi5lbmFibGVIaWRpbmd9LGdldERlZmF1bHRNZW51SXRlbXM6ZnVuY3Rpb24odCl7cmV0dXJuW3t0aXRsZTpmdW5jdGlvbigpe3JldHVybiBlLmdldFNhZmVUZXh0KCJzb3J0LmFzY2VuZGluZyIpfSxpY29uOiJ1aS1ncmlkLWljb24tc29ydC1hbHQtdXAiLGFjdGlvbjpmdW5jdGlvbihlKXtlLnN0b3BQcm9wYWdhdGlvbigpLHQuc29ydENvbHVtbihlLHIuQVNDKX0sc2hvd246ZnVuY3Rpb24oKXtyZXR1cm4gaS5zb3J0YWJsZSh0KX0sYWN0aXZlOmZ1bmN0aW9uKCl7cmV0dXJuIGkuaXNBY3RpdmVTb3J0KHQsci5BU0MpfX0se3RpdGxlOmZ1bmN0aW9uKCl7cmV0dXJuIGUuZ2V0U2FmZVRleHQoInNvcnQuZGVzY2VuZGluZyIpfSxpY29uOiJ1aS1ncmlkLWljb24tc29ydC1hbHQtZG93biIsYWN0aW9uOmZ1bmN0aW9uKGUpe2Uuc3RvcFByb3BhZ2F0aW9uKCksdC5zb3J0Q29sdW1uKGUsci5ERVNDKX0sc2hvd246ZnVuY3Rpb24oKXtyZXR1cm4gaS5zb3J0YWJsZSh0KX0sYWN0aXZlOmZ1bmN0aW9uKCl7cmV0dXJuIGkuaXNBY3RpdmVTb3J0KHQsci5ERVNDKX19LHt0aXRsZTpmdW5jdGlvbigpe3JldHVybiBlLmdldFNhZmVUZXh0KCJzb3J0LnJlbW92ZSIpfSxpY29uOiJ1aS1ncmlkLWljb24tY2FuY2VsIixhY3Rpb246ZnVuY3Rpb24oZSl7ZS5zdG9wUHJvcGFnYXRpb24oKSx0LnVuc29ydENvbHVtbigpfSxzaG93bjpmdW5jdGlvbigpe3JldHVybiBpLnNvcnRhYmxlKHQpJiZ2b2lkIDAhPT10LmNvbCYmdm9pZCAwIT09dC5jb2wuc29ydCYmdm9pZCAwIT09dC5jb2wuc29ydC5kaXJlY3Rpb24mJm51bGwhPT10LmNvbC5zb3J0LmRpcmVjdGlvbiYmIWkuc3VwcHJlc3NSZW1vdmVTb3J0KHQpfX0se3RpdGxlOmZ1bmN0aW9uKCl7cmV0dXJuIGUuZ2V0U2FmZVRleHQoImNvbHVtbi5oaWRlIil9LGljb246InVpLWdyaWQtaWNvbi1jYW5jZWwiLHNob3duOmZ1bmN0aW9uKCl7cmV0dXJuIGkuaGlkZWFibGUodCl9LGFjdGlvbjpmdW5jdGlvbihlKXtlLnN0b3BQcm9wYWdhdGlvbigpLHQuaGlkZUNvbHVtbigpfX1dfSxnZXRDb2x1bW5FbGVtZW50UG9zaXRpb246ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXt9O3JldHVybiBpLmxlZnQ9clswXS5vZmZzZXRMZWZ0LGkudG9wPXJbMF0ub2Zmc2V0VG9wLGkucGFyZW50TGVmdD1yWzBdLm9mZnNldFBhcmVudC5vZmZzZXRMZWZ0LGkub2Zmc2V0PTAsdC5ncmlkLm9wdGlvbnMub2Zmc2V0TGVmdCYmKGkub2Zmc2V0PXQuZ3JpZC5vcHRpb25zLm9mZnNldExlZnQpLGkuaGVpZ2h0PWcuZWxlbWVudEhlaWdodChyLCEwKSxpLndpZHRoPWcuZWxlbWVudFdpZHRoKHIsITApLGl9LHJlcG9zaXRpb25NZW51OmZ1bmN0aW9uKGUsdCxyLGksbil7dmFyIG89aVswXS5xdWVyeVNlbGVjdG9yQWxsKCIudWktZ3JpZC1tZW51IiksYT1nLmNsb3Nlc3RFbG0obiwiLnVpLWdyaWQtcmVuZGVyLWNvbnRhaW5lciIpLGw9YS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0LWUuZ3JpZC5lbGVtZW50WzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQscz1hLnF1ZXJ5U2VsZWN0b3JBbGwoIi51aS1ncmlkLXZpZXdwb3J0IilbMF0uc2Nyb2xsTGVmdCxkPWcuZWxlbWVudFdpZHRoKG8sITApLHU9dC5sYXN0TWVudVBhZGRpbmdSaWdodD90Lmxhc3RNZW51UGFkZGluZ1JpZ2h0OmUubGFzdE1lbnVQYWRkaW5nUmlnaHQ/ZS5sYXN0TWVudVBhZGRpbmdSaWdodDoxMDswIT09by5sZW5ndGgmJjAhPT1vWzBdLnF1ZXJ5U2VsZWN0b3JBbGwoIi51aS1ncmlkLW1lbnUtbWlkIikubGVuZ3RoJiYodT1wYXJzZUludChnLmdldFN0eWxlcyhhbmd1bGFyLmVsZW1lbnQobylbMF0pLnBhZGRpbmdSaWdodCwxMCksZS5sYXN0TWVudVBhZGRpbmdSaWdodD11LHQubGFzdE1lbnVQYWRkaW5nUmlnaHQ9dSk7dmFyIGM9ci5sZWZ0K2wtcytyLnBhcmVudExlZnQrci53aWR0aCt1O2M8ci5vZmZzZXQrZCYmKGM9TWF0aC5tYXgoci5sZWZ0LXMrci5wYXJlbnRMZWZ0LXUrZCxyLm9mZnNldCtkKSksaS5jc3MoImxlZnQiLGMrInB4IiksaS5jc3MoInRvcCIsci50b3Arci5oZWlnaHQrInB4Iil9fTtyZXR1cm4gaX1dKS5kaXJlY3RpdmUoInVpR3JpZENvbHVtbk1lbnUiLFsiJHRpbWVvdXQiLCJncmlkVXRpbCIsInVpR3JpZENvbnN0YW50cyIsInVpR3JpZENvbHVtbk1lbnVTZXJ2aWNlIiwiJGRvY3VtZW50IixmdW5jdGlvbihyLG4sYSxsLHMpe3JldHVybntwcmlvcml0eTowLHNjb3BlOiEwLHJlcXVpcmU6Il51aUdyaWQiLHRlbXBsYXRlVXJsOiJ1aS1ncmlkL3VpR3JpZENvbHVtbk1lbnUiLHJlcGxhY2U6ITAsbGluazpmdW5jdGlvbihvLGksZSx0KXtsLmluaXRpYWxpemUobyx0KSxvLmRlZmF1bHRNZW51SXRlbXM9bC5nZXREZWZhdWx0TWVudUl0ZW1zKG8pLG8ubWVudUl0ZW1zPW8uZGVmYXVsdE1lbnVJdGVtcyxsLnNldENvbE1lbnVJdGVtV2F0Y2gobyksby5zaG93TWVudT1mdW5jdGlvbihlLHQscil7by5jb2w9ZTt2YXIgaT1sLmdldENvbHVtbkVsZW1lbnRQb3NpdGlvbihvLGUsdCk7by5tZW51U2hvd24/KG8uY29sRWxlbWVudD10LG8uY29sRWxlbWVudFBvc2l0aW9uPWksby5oaWRlVGhlblNob3c9ITAsby4kYnJvYWRjYXN0KCJoaWRlLW1lbnUiLHtvcmlnaW5hbEV2ZW50OnJ9KSk6KG8ubWVudVNob3duPSEwLG8uY29sRWxlbWVudD10LG8uY29sRWxlbWVudFBvc2l0aW9uPWksby4kYnJvYWRjYXN0KCJzaG93LW1lbnUiLHtvcmlnaW5hbEV2ZW50OnJ9KSl9LG8uaGlkZU1lbnU9ZnVuY3Rpb24oZSl7by5tZW51U2hvd249ITEsZXx8by4kYnJvYWRjYXN0KCJoaWRlLW1lbnUiKX0sby4kb24oIm1lbnUtaGlkZGVuIixmdW5jdGlvbigpe3ZhciBlPWFuZ3VsYXIuZWxlbWVudChpWzBdLnF1ZXJ5U2VsZWN0b3IoIi51aS1ncmlkLW1lbnUtaXRlbXMiKSlbMF07aVswXS5yZW1vdmVBdHRyaWJ1dGUoInN0eWxlIiksby5oaWRlVGhlblNob3c/KGRlbGV0ZSBvLmhpZGVUaGVuU2hvdyxvLiRicm9hZGNhc3QoInNob3ctbWVudSIpLG8ubWVudVNob3duPSEwKTooby5oaWRlTWVudSghMCksby5jb2wmJm4uZm9jdXMuYnlTZWxlY3RvcihzLCIudWktZ3JpZC1oZWFkZXItY2VsbC4iK28uY29sLmdldENvbENsYXNzKCkrIiAudWktZ3JpZC1jb2x1bW4tbWVudS1idXR0b24iLG8uY29sLmdyaWQsITEpKSxlJiYoZS5vbmtleWRvd249bnVsbCxhbmd1bGFyLmZvckVhY2goZS5jaGlsZHJlbixmdW5jdGlvbihlKXtlLm9ua2V5ZG93bj1udWxsfSkpfSksby4kb24oIm1lbnUtc2hvd24iLGZ1bmN0aW9uKCl7cihmdW5jdGlvbigpe2wucmVwb3NpdGlvbk1lbnUobyxvLmNvbCxvLmNvbEVsZW1lbnRQb3NpdGlvbixpLG8uY29sRWxlbWVudCksbi5mb2N1cy5ieVNlbGVjdG9yKHMsIi51aS1ncmlkLW1lbnUtaXRlbXMgLnVpLWdyaWQtbWVudS1pdGVtOm5vdCgubmctaGlkZSkiLCEwKSxkZWxldGUgby5jb2xFbGVtZW50UG9zaXRpb24sZGVsZXRlIG8uY29sdW1uRWxlbWVudCxmdW5jdGlvbigpe3ZhciBlLHQ9YW5ndWxhci5lbGVtZW50KGlbMF0ucXVlcnlTZWxlY3RvcigiLnVpLWdyaWQtbWVudS1pdGVtcyIpKVswXSxuPVtdO2Z1bmN0aW9uIHIoZSx0LHIsaSl7ZS5rZXlDb2RlPT09YS5rZXltYXAuVEFCJiYodD9lLnByZXZlbnREZWZhdWx0KCk6ciYmKGUucHJldmVudERlZmF1bHQoKSxuW2ldLmZvY3VzKCkpKX10JiYodC5vbmtleWRvd249ZnVuY3Rpb24oZSl7ZS5rZXlDb2RlPT09YS5rZXltYXAuRVNDJiYoZS5wcmV2ZW50RGVmYXVsdCgpLG8uaGlkZU1lbnUoKSl9LGU9dC5xdWVyeVNlbGVjdG9yQWxsKCIudWktZ3JpZC1tZW51LWl0ZW06bm90KC5uZy1oaWRlKSIpLGFuZ3VsYXIuZm9yRWFjaChlLGZ1bmN0aW9uKGUpe251bGwhPT1lLm9mZnNldFBhcmVudCYmdGhpcy5wdXNoKGUpfSxuKSxuLmxlbmd0aCYmKDE9PT1uLmxlbmd0aD9uWzBdLm9ua2V5ZG93bj1mdW5jdGlvbihlKXtyKGUsITApfTooblswXS5vbmtleWRvd249ZnVuY3Rpb24oZSl7cihlLCExLGUuc2hpZnRLZXksbi5sZW5ndGgtMSl9LG5bbi5sZW5ndGgtMV0ub25rZXlkb3duPWZ1bmN0aW9uKGUpe3IoZSwhMSwhZS5zaGlmdEtleSwwKX0pKSl9KCl9KX0pLG8uc29ydENvbHVtbj1mdW5jdGlvbihlLHQpe2Uuc3RvcFByb3BhZ2F0aW9uKCksby5ncmlkLnNvcnRDb2x1bW4oby5jb2wsdCwhMCkudGhlbihmdW5jdGlvbigpe28uZ3JpZC5yZWZyZXNoKCksby5oaWRlTWVudSgpfSkuY2F0Y2goYW5ndWxhci5ub29wKX0sby51bnNvcnRDb2x1bW49ZnVuY3Rpb24oKXtvLmNvbC51bnNvcnQoKSxvLmdyaWQucmVmcmVzaCgpLG8uaGlkZU1lbnUoKX0sby5oaWRlQ29sdW1uPWZ1bmN0aW9uKCl7by5jb2wuY29sRGVmLnZpc2libGU9ITEsby5jb2wudmlzaWJsZT0hMSxvLmdyaWQucXVldWVHcmlkUmVmcmVzaCgpLG8uaGlkZU1lbnUoKSxvLmdyaWQuYXBpLmNvcmUubm90aWZ5RGF0YUNoYW5nZShhLmRhdGFDaGFuZ2UuQ09MVU1OKSxvLmdyaWQuYXBpLmNvcmUucmFpc2UuY29sdW1uVmlzaWJpbGl0eUNoYW5nZWQoby5jb2wpLHIoZnVuY3Rpb24oKXt2YXIgcixpLHQ9ZnVuY3Rpb24oKXtyZXR1cm4gbi5mb2N1cy5ieUlkKCJncmlkLW1lbnUiLG8uZ3JpZCl9O2lmKG8uZ3JpZC5jb2x1bW5zLnNvbWUoZnVuY3Rpb24oZSx0KXtpZihhbmd1bGFyLmVxdWFscyhlLG8uY29sKSlyZXR1cm4gcj10LCEwfSksby5ncmlkLmNvbHVtbnMuc29tZShmdW5jdGlvbihlLHQpe2lmKCFlLnZpc2libGUpcmV0dXJuITE7aWYodDxyKWk9ZTtlbHNle2lmKHI8dCYmIWkpcmV0dXJuIGk9ZSwhMDtpZihyPHQmJmkpcmV0dXJuITB9fSksaSl7dmFyIGU9aS5nZXRDb2xDbGFzcygpO24uZm9jdXMuYnlTZWxlY3RvcihzLCIudWktZ3JpZC1oZWFkZXItY2VsbC4iK2UrIiAudWktZ3JpZC1oZWFkZXItY2VsbC1wcmltYXJ5LWZvY3VzIiwhMCkudGhlbihhbmd1bGFyLm5vb3AsZnVuY3Rpb24oZSl7aWYoImNhbmNlbGVkIiE9PWUpcmV0dXJuIHQoKX0pLmNhdGNoKGFuZ3VsYXIubm9vcCl9ZWxzZSB0KCl9KX19LGNvbnRyb2xsZXI6WyIkc2NvcGUiLGZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZS4kd2F0Y2goIm1lbnVJdGVtcyIsZnVuY3Rpb24oZSl7dC5tZW51SXRlbXM9ZX0pfV19fV0pLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2FuZ3VsYXIubW9kdWxlKCJ1aS5ncmlkIikuZGlyZWN0aXZlKCJ1aUdyaWRGaWx0ZXIiLFsiJGNvbXBpbGUiLCIkdGVtcGxhdGVDYWNoZSIsImkxOG5TZXJ2aWNlIiwiZ3JpZFV0aWwiLGZ1bmN0aW9uKG4sZSxvLGEpe3JldHVybntjb21waWxlOmZ1bmN0aW9uKCl7cmV0dXJue3ByZTpmdW5jdGlvbihyLGksZSx0KXtyLmNvbC51cGRhdGVGaWx0ZXJzPWZ1bmN0aW9uKGUpe2lmKGkuY2hpbGRyZW4oKS5yZW1vdmUoKSxlKXt2YXIgdD1yLmNvbC5maWx0ZXJIZWFkZXJUZW1wbGF0ZTt2b2lkIDA9PT10JiYiIiE9PXIuY29sLnByb3ZpZGVkRmlsdGVySGVhZGVyVGVtcGxhdGU/ci5jb2wuZmlsdGVySGVhZGVyVGVtcGxhdGVQcm9taXNlJiZyLmNvbC5maWx0ZXJIZWFkZXJUZW1wbGF0ZVByb21pc2UudGhlbihmdW5jdGlvbigpe3Q9ci5jb2wuZmlsdGVySGVhZGVyVGVtcGxhdGUsaS5hcHBlbmQobih0KShyKSl9KTppLmFwcGVuZChuKHQpKHIpKX19LHIuJG9uKCIkZGVzdHJveSIsZnVuY3Rpb24oKXtkZWxldGUgci5jb2wudXBkYXRlRmlsdGVyc30pfSxwb3N0OmZ1bmN0aW9uKGUscix0LGkpe2UuYXJpYT1vLmdldFNhZmVUZXh0KCJoZWFkZXJDZWxsLmFyaWEiKSxlLnJlbW92ZUZpbHRlcj1mdW5jdGlvbihlLHQpe2UudGVybT1udWxsLGEuZm9jdXMuYnlTZWxlY3RvcihyLCIudWktZ3JpZC1maWx0ZXItaW5wdXQtIit0KX19fX19fV0pfSgpLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2FuZ3VsYXIubW9kdWxlKCJ1aS5ncmlkIikuZGlyZWN0aXZlKCJ1aUdyaWRGb290ZXJDZWxsIixbIiR0aW1lb3V0IiwiZ3JpZFV0aWwiLCJ1aUdyaWRDb25zdGFudHMiLCIkY29tcGlsZSIsZnVuY3Rpb24oZSx0LHMsbyl7cmV0dXJue3ByaW9yaXR5OjAsc2NvcGU6e2NvbDoiPSIscm93OiI9IixyZW5kZXJJbmRleDoiPSJ9LHJlcGxhY2U6ITAscmVxdWlyZToiXnVpR3JpZCIsY29tcGlsZTpmdW5jdGlvbihlLHQscil7cmV0dXJue3ByZTpmdW5jdGlvbihlLHQscixpKXt2YXIgbj1lLmNvbC5mb290ZXJDZWxsVGVtcGxhdGU7dm9pZCAwPT09biYmIiIhPT1lLmNvbC5wcm92aWRlZEZvb3RlckNlbGxUZW1wbGF0ZT9lLmNvbC5mb290ZXJDZWxsVGVtcGxhdGVQcm9taXNlJiZlLmNvbC5mb290ZXJDZWxsVGVtcGxhdGVQcm9taXNlLnRoZW4oZnVuY3Rpb24oKXtuPWUuY29sLmZvb3RlckNlbGxUZW1wbGF0ZSx0LmFwcGVuZChvKG4pKGUpKX0pOnQuYXBwZW5kKG8obikoZSkpfSxwb3N0OmZ1bmN0aW9uKHIsaSxlLHQpe3IuZ3JpZD10LmdyaWQ7dmFyIG4sbz1yLmNvbC5nZXRDb2xDbGFzcyghMSk7aS5hZGRDbGFzcyhvKTt2YXIgYT1mdW5jdGlvbihlKXt2YXIgdD1pO24mJih0LnJlbW92ZUNsYXNzKG4pLG49bnVsbCksbj1hbmd1bGFyLmlzRnVuY3Rpb24oci5jb2wuZm9vdGVyQ2VsbENsYXNzKT9yLmNvbC5mb290ZXJDZWxsQ2xhc3Moci5ncmlkLHIucm93LHIuY29sLHIucm93UmVuZGVySW5kZXgsci5jb2xSZW5kZXJJbmRleCk6ci5jb2wuZm9vdGVyQ2VsbENsYXNzLHQuYWRkQ2xhc3Mobil9O3IuY29sLmZvb3RlckNlbGxDbGFzcyYmYSgpLHIuY29sLnVwZGF0ZUFnZ3JlZ2F0aW9uVmFsdWUoKTt2YXIgbD1yLmdyaWQucmVnaXN0ZXJEYXRhQ2hhbmdlQ2FsbGJhY2soYSxbcy5kYXRhQ2hhbmdlLkNPTFVNTl0pO3IuZ3JpZC5hcGkuY29yZS5vbi5yb3dzUmVuZGVyZWQocixyLmNvbC51cGRhdGVBZ2dyZWdhdGlvblZhbHVlKSxyLmdyaWQuYXBpLmNvcmUub24ucm93c1JlbmRlcmVkKHIsYSksci4kb24oIiRkZXN0cm95IixsKX19fX19XSl9KCksZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7YW5ndWxhci5tb2R1bGUoInVpLmdyaWQiKS5kaXJlY3RpdmUoInVpR3JpZEZvb3RlciIsWyIkdGVtcGxhdGVDYWNoZSIsIiRjb21waWxlIiwidWlHcmlkQ29uc3RhbnRzIiwiZ3JpZFV0aWwiLCIkdGltZW91dCIsZnVuY3Rpb24oZSxsLHQscyxyKXtyZXR1cm57cmVzdHJpY3Q6IkVBIixyZXBsYWNlOiEwLHJlcXVpcmU6WyJedWlHcmlkIiwiXnVpR3JpZFJlbmRlckNvbnRhaW5lciJdLHNjb3BlOiEwLGNvbXBpbGU6ZnVuY3Rpb24oZSx0KXtyZXR1cm57cHJlOmZ1bmN0aW9uKG4sbyxlLHQpe3ZhciByPXRbMF0sYT10WzFdO24uZ3JpZD1yLmdyaWQsbi5jb2xDb250YWluZXI9YS5jb2xDb250YWluZXIsYS5mb290ZXI9bzt2YXIgaT1uLmdyaWQub3B0aW9ucy5mb290ZXJUZW1wbGF0ZTtzLmdldFRlbXBsYXRlKGkpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHQ9YW5ndWxhci5lbGVtZW50KGUpLHI9bCh0KShuKTtpZihvLmFwcGVuZChyKSxhKXt2YXIgaT1vWzBdLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoInVpLWdyaWQtZm9vdGVyLXZpZXdwb3J0IilbMF07aSYmKGEuZm9vdGVyVmlld3BvcnQ9aSl9fSkuY2F0Y2goYW5ndWxhci5ub29wKX0scG9zdDpmdW5jdGlvbihlLHQscixpKXt2YXIgbj1pWzBdLG89aVsxXTtuLmdyaWQ7cy5kaXNhYmxlQW5pbWF0aW9ucyh0KTt2YXIgYT0oby5mb290ZXI9dClbMF0uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgidWktZ3JpZC1mb290ZXItdmlld3BvcnQiKVswXTthJiYoby5mb290ZXJWaWV3cG9ydD1hKX19fX19XSl9KCksZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7YW5ndWxhci5tb2R1bGUoInVpLmdyaWQiKS5kaXJlY3RpdmUoInVpR3JpZEdyaWRGb290ZXIiLFsiJHRlbXBsYXRlQ2FjaGUiLCIkY29tcGlsZSIsInVpR3JpZENvbnN0YW50cyIsImdyaWRVdGlsIiwiJHRpbWVvdXQiLGZ1bmN0aW9uKGUsbyx0LGEscil7cmV0dXJue3Jlc3RyaWN0OiJFQSIscmVwbGFjZTohMCxyZXF1aXJlOiJedWlHcmlkIixzY29wZTohMCxjb21waWxlOmZ1bmN0aW9uKGUsdCl7cmV0dXJue3ByZTpmdW5jdGlvbihpLG4sZSx0KXtpLmdyaWQ9dC5ncmlkO3ZhciByPWkuZ3JpZC5vcHRpb25zLmdyaWRGb290ZXJUZW1wbGF0ZTthLmdldFRlbXBsYXRlKHIpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHQ9YW5ndWxhci5lbGVtZW50KGUpLHI9byh0KShpKTtuLmFwcGVuZChyKX0pLmNhdGNoKGFuZ3VsYXIubm9vcCl9LHBvc3Q6ZnVuY3Rpb24oZSx0LHIsaSl7fX19fX1dKX0oKSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0Ijthbmd1bGFyLm1vZHVsZSgidWkuZ3JpZCIpLmRpcmVjdGl2ZSgidWlHcmlkSGVhZGVyQ2VsbCIsWyIkY29tcGlsZSIsIiR0aW1lb3V0IiwiJHdpbmRvdyIsIiRkb2N1bWVudCIsImdyaWRVdGlsIiwidWlHcmlkQ29uc3RhbnRzIiwiU2Nyb2xsRXZlbnQiLCJpMThuU2VydmljZSIsZnVuY3Rpb24obixwLGUsZix0LG0scixoKXtyZXR1cm57cHJpb3JpdHk6MCxzY29wZTp7Y29sOiI9Iixyb3c6Ij0iLHJlbmRlckluZGV4OiI9In0scmVxdWlyZTpbIl51aUdyaWQiLCJedWlHcmlkUmVuZGVyQ29udGFpbmVyIl0scmVwbGFjZTohMCxjb21waWxlOmZ1bmN0aW9uKCl7cmV0dXJue3ByZTpmdW5jdGlvbihlLHQscil7dmFyIGk9ZS5jb2wuaGVhZGVyQ2VsbFRlbXBsYXRlO3ZvaWQgMD09PWkmJiIiIT09ZS5jb2wucHJvdmlkZWRIZWFkZXJDZWxsVGVtcGxhdGU/ZS5jb2wuaGVhZGVyQ2VsbFRlbXBsYXRlUHJvbWlzZSYmZS5jb2wuaGVhZGVyQ2VsbFRlbXBsYXRlUHJvbWlzZS50aGVuKGZ1bmN0aW9uKCl7aT1lLmNvbC5oZWFkZXJDZWxsVGVtcGxhdGUsdC5hcHBlbmQobihpKShlKSl9KTp0LmFwcGVuZChuKGkpKGUpKX0scG9zdDpmdW5jdGlvbihpLG4sZSx0KXt2YXIgbz10WzBdLHI9dFsxXTtpLmkxOG49e2hlYWRlckNlbGw6aC5nZXRTYWZlVGV4dCgiaGVhZGVyQ2VsbCIpLHNvcnQ6aC5nZXRTYWZlVGV4dCgic29ydCIpfSxpLmlzU29ydFByaW9yaXR5VmlzaWJsZT1mdW5jdGlvbigpe3JldHVybiBhbmd1bGFyLmlzTnVtYmVyKGkuY29sLnNvcnQucHJpb3JpdHkpJiZpLmdyaWQuY29sdW1ucy5zb21lKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGFuZ3VsYXIuaXNOdW1iZXIoZS5zb3J0LnByaW9yaXR5KSYmZSE9PWkuY29sfSl9LGkuZ2V0U29ydERpcmVjdGlvbkFyaWFMYWJlbD1mdW5jdGlvbigpe3ZhciBlPWkuY29sLHQ9ZS5zb3J0LmRpcmVjdGlvbj09PW0uQVNDP2kuaTE4bi5zb3J0LmFzY2VuZGluZzplLnNvcnQuZGlyZWN0aW9uPT09bS5ERVNDP2kuaTE4bi5zb3J0LmRlc2NlbmRpbmc6aS5pMThuLnNvcnQubm9uZTtyZXR1cm4gaS5pc1NvcnRQcmlvcml0eVZpc2libGUoKSYmKHQ9dCsiLiAiK2kuaTE4bi5oZWFkZXJDZWxsLnByaW9yaXR5KyIgIisoZS5zb3J0LnByaW9yaXR5KzEpKSx0fSxpLmdyaWQ9by5ncmlkLGkucmVuZGVyQ29udGFpbmVyPW8uZ3JpZC5yZW5kZXJDb250YWluZXJzW3IuY29udGFpbmVySWRdO3ZhciBhPWkuY29sLmdldENvbENsYXNzKCExKTtuLmFkZENsYXNzKGEpLGkubWVudVNob3duPSExLGkuYXNjPW0uQVNDLGkuZGVzYz1tLkRFU0M7YW5ndWxhci5lbGVtZW50KG5bMF0ucXVlcnlTZWxlY3RvckFsbCgiLnVpLWdyaWQtaGVhZGVyLWNlbGwtbWVudSIpKTt2YXIgbCxzLGQ9YW5ndWxhci5lbGVtZW50KG5bMF0ucXVlcnlTZWxlY3RvckFsbCgiLnVpLWdyaWQtY2VsbC1jb250ZW50cyIpKSx1PVtdO2kuZG93bkZuPWZ1bmN0aW9uKGUpe2Uuc3RvcFByb3BhZ2F0aW9uKCksdm9pZCAwIT09ZS5vcmlnaW5hbEV2ZW50JiZ2b2lkIDAhPT1lLm9yaWdpbmFsRXZlbnQmJihlPWUub3JpZ2luYWxFdmVudCksZS5idXR0b24mJjAhPT1lLmJ1dHRvbnx8KHM9ZS5wYWdlWCxpLm1vdXNlZG93blN0YXJ0VGltZT0obmV3IERhdGUpLmdldFRpbWUoKSxpLm1vdXNlZG93blRpbWVvdXQ9cChmdW5jdGlvbigpe30sNTAwKSxpLm1vdXNlZG93blRpbWVvdXQudGhlbihmdW5jdGlvbigpe2kuY29sTWVudSYmby5jb2x1bW5NZW51U2NvcGUuc2hvd01lbnUoaS5jb2wsbixlKX0pLmNhdGNoKGFuZ3VsYXIubm9vcCksby5maXJlRXZlbnQobS5ldmVudHMuQ09MVU1OX0hFQURFUl9DTElDSyx7ZXZlbnQ6ZSxjb2x1bW5OYW1lOmkuY29sLmNvbERlZi5uYW1lfSksaS5vZmZBbGxFdmVudHMoKSwidG91Y2hzdGFydCI9PT1lLnR5cGU/KGYub24oInRvdWNoZW5kIixpLnVwRm4pLGYub24oInRvdWNobW92ZSIsaS5tb3ZlRm4pKToibW91c2Vkb3duIj09PWUudHlwZSYmKGYub24oIm1vdXNldXAiLGkudXBGbiksZi5vbigibW91c2Vtb3ZlIixpLm1vdmVGbikpKX0saS51cEZuPWZ1bmN0aW9uKGUpe2Uuc3RvcFByb3BhZ2F0aW9uKCkscC5jYW5jZWwoaS5tb3VzZWRvd25UaW1lb3V0KSxpLm9mZkFsbEV2ZW50cygpLGkub25Eb3duRXZlbnRzKGUudHlwZSksNTAwPChuZXcgRGF0ZSkuZ2V0VGltZSgpLWkubW91c2Vkb3duU3RhcnRUaW1lfHxpLnNvcnRhYmxlJiZpLmhhbmRsZUNsaWNrKGUpfSxpLmhhbmRsZUtleURvd249ZnVuY3Rpb24oZSl7MzI9PT1lLmtleUNvZGUmJmUucHJldmVudERlZmF1bHQoKX0saS5tb3ZlRm49ZnVuY3Rpb24oZSl7MCE9PWUucGFnZVgtcyYmKHAuY2FuY2VsKGkubW91c2Vkb3duVGltZW91dCksaS5vZmZBbGxFdmVudHMoKSxpLm9uRG93bkV2ZW50cyhlLnR5cGUpKX0saS5jbGlja0ZuPWZ1bmN0aW9uKGUpe2Uuc3RvcFByb3BhZ2F0aW9uKCksZC5vZmYoImNsaWNrIixpLmNsaWNrRm4pfSxpLm9mZkFsbEV2ZW50cz1mdW5jdGlvbigpe2Qub2ZmKCJ0b3VjaHN0YXJ0IixpLmRvd25GbiksZC5vZmYoIm1vdXNlZG93biIsaS5kb3duRm4pLGYub2ZmKCJ0b3VjaGVuZCIsaS51cEZuKSxmLm9mZigibW91c2V1cCIsaS51cEZuKSxmLm9mZigidG91Y2htb3ZlIixpLm1vdmVGbiksZi5vZmYoIm1vdXNlbW92ZSIsaS5tb3ZlRm4pLGQub2ZmKCJjbGljayIsaS5jbGlja0ZuKX0saS5vbkRvd25FdmVudHM9ZnVuY3Rpb24oZSl7c3dpdGNoKGUpe2Nhc2UidG91Y2htb3ZlIjpjYXNlInRvdWNoZW5kIjpkLm9uKCJjbGljayIsaS5jbGlja0ZuKSxkLm9uKCJ0b3VjaHN0YXJ0IixpLmRvd25GbikscChmdW5jdGlvbigpe2Qub24oIm1vdXNlZG93biIsaS5kb3duRm4pfSw1MDApO2JyZWFrO2Nhc2UibW91c2Vtb3ZlIjpjYXNlIm1vdXNldXAiOmQub24oImNsaWNrIixpLmNsaWNrRm4pLGQub24oIm1vdXNlZG93biIsaS5kb3duRm4pLHAoZnVuY3Rpb24oKXtkLm9uKCJ0b3VjaHN0YXJ0IixpLmRvd25Gbil9LDUwMCk7YnJlYWs7ZGVmYXVsdDpkLm9uKCJjbGljayIsaS5jbGlja0ZuKSxkLm9uKCJ0b3VjaHN0YXJ0IixpLmRvd25GbiksZC5vbigibW91c2Vkb3duIixpLmRvd25Gbil9fTt2YXIgYz1mdW5jdGlvbihlKXt2YXIgdD1uO2wmJih0LnJlbW92ZUNsYXNzKGwpLGw9bnVsbCksbD1hbmd1bGFyLmlzRnVuY3Rpb24oaS5jb2wuaGVhZGVyQ2VsbENsYXNzKT9pLmNvbC5oZWFkZXJDZWxsQ2xhc3MoaS5ncmlkLGkucm93LGkuY29sLGkucm93UmVuZGVySW5kZXgsaS5jb2xSZW5kZXJJbmRleCk6aS5jb2wuaGVhZGVyQ2VsbENsYXNzLHQuYWRkQ2xhc3MobCksaS4kYXBwbHlBc3luYyhmdW5jdGlvbigpe3ZhciBlPWkuZ3JpZC5yZW5kZXJDb250YWluZXJzLnJpZ2h0JiZpLmdyaWQucmVuZGVyQ29udGFpbmVycy5yaWdodC52aXNpYmxlQ29sdW1uQ2FjaGUubGVuZ3RoP2kuZ3JpZC5yZW5kZXJDb250YWluZXJzLnJpZ2h0OmkuZ3JpZC5yZW5kZXJDb250YWluZXJzLmJvZHk7aS5pc0xhc3RDb2w9by5ncmlkLm9wdGlvbnMmJm8uZ3JpZC5vcHRpb25zLmVuYWJsZUdyaWRNZW51JiZpLmNvbD09PWUudmlzaWJsZUNvbHVtbkNhY2hlW2UudmlzaWJsZUNvbHVtbkNhY2hlLmxlbmd0aC0xXX0pLGkuc29ydGFibGU9Qm9vbGVhbihpLmNvbC5lbmFibGVTb3J0aW5nKTt2YXIgcj1pLmZpbHRlcmFibGU7aS5maWx0ZXJhYmxlPUJvb2xlYW4oby5ncmlkLm9wdGlvbnMuZW5hYmxlRmlsdGVyaW5nJiZpLmNvbC5lbmFibGVGaWx0ZXJpbmcpLHIhPT1pLmZpbHRlcmFibGUmJih2b2lkIDAhPT1pLmNvbC51cGRhdGVGaWx0ZXJzJiZpLmNvbC51cGRhdGVGaWx0ZXJzKGkuZmlsdGVyYWJsZSksaS5maWx0ZXJhYmxlPyhpLmNvbC5maWx0ZXJzLmZvckVhY2goZnVuY3Rpb24oZSx0KXt1LnB1c2goaS4kd2F0Y2goImNvbC5maWx0ZXJzWyIrdCsiXS50ZXJtIixmdW5jdGlvbihlLHQpe2UhPT10JiYoby5ncmlkLmFwaS5jb3JlLnJhaXNlLmZpbHRlckNoYW5nZWQoKSxvLmdyaWQuYXBpLmNvcmUubm90aWZ5RGF0YUNoYW5nZShtLmRhdGFDaGFuZ2UuQ09MVU1OKSxvLmdyaWQucXVldWVHcmlkUmVmcmVzaCgpKX0pKX0pLGkuJG9uKCIkZGVzdHJveSIsZnVuY3Rpb24oKXt1LmZvckVhY2goZnVuY3Rpb24oZSl7ZSgpfSl9KSk6dS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UoKX0pKSxpLmNvbC5ncmlkLm9wdGlvbnMmJiExIT09aS5jb2wuZ3JpZC5vcHRpb25zLmVuYWJsZUNvbHVtbk1lbnVzJiZpLmNvbC5jb2xEZWYmJiExIT09aS5jb2wuY29sRGVmLmVuYWJsZUNvbHVtbk1lbnU/aS5jb2xNZW51PSEwOmkuY29sTWVudT0hMSxpLm9mZkFsbEV2ZW50cygpLChpLnNvcnRhYmxlfHxpLmNvbE1lbnUpJiYoaS5vbkRvd25FdmVudHMoKSxpLiRvbigiJGRlc3Ryb3kiLGZ1bmN0aW9uKCl7aS5vZmZBbGxFdmVudHMoKX0pKX07YygpO3ZhciBnPWkuZ3JpZC5yZWdpc3RlckRhdGFDaGFuZ2VDYWxsYmFjayhjLFttLmRhdGFDaGFuZ2UuQ09MVU1OXSk7aS4kb24oIiRkZXN0cm95IixnKSxpLmhhbmRsZUNsaWNrPWZ1bmN0aW9uKGUpe3ZhciB0PSExO2Uuc2hpZnRLZXkmJih0PSEwKSxvLmdyaWQuc29ydENvbHVtbihpLmNvbCx0KS50aGVuKGZ1bmN0aW9uKCl7by5jb2x1bW5NZW51U2NvcGUmJm8uY29sdW1uTWVudVNjb3BlLmhpZGVNZW51KCksby5ncmlkLnJlZnJlc2goKX0pLmNhdGNoKGFuZ3VsYXIubm9vcCl9LGkuaGVhZGVyQ2VsbEFycm93S2V5RG93bj1mdW5jdGlvbihlKXszMiE9PWUua2V5Q29kZSYmMTMhPT1lLmtleUNvZGV8fChlLnByZXZlbnREZWZhdWx0KCksaS50b2dnbGVNZW51KGUpKX0saS50b2dnbGVNZW51PWZ1bmN0aW9uKGUpe2Uuc3RvcFByb3BhZ2F0aW9uKCksby5jb2x1bW5NZW51U2NvcGUubWVudVNob3duJiZvLmNvbHVtbk1lbnVTY29wZS5jb2w9PT1pLmNvbD9vLmNvbHVtbk1lbnVTY29wZS5oaWRlTWVudSgpOm8uY29sdW1uTWVudVNjb3BlLnNob3dNZW51KGkuY29sLG4pfX19fX19XSl9KCksZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7YW5ndWxhci5tb2R1bGUoInVpLmdyaWQiKS5kaXJlY3RpdmUoInVpR3JpZEhlYWRlciIsWyIkdGVtcGxhdGVDYWNoZSIsIiRjb21waWxlIiwidWlHcmlkQ29uc3RhbnRzIiwiZ3JpZFV0aWwiLCIkdGltZW91dCIsIlNjcm9sbEV2ZW50IixmdW5jdGlvbihlLHUsdCxjLHIsZyl7cmV0dXJue3Jlc3RyaWN0OiJFQSIscmVwbGFjZTohMCxyZXF1aXJlOlsiXnVpR3JpZCIsIl51aUdyaWRSZW5kZXJDb250YWluZXIiXSxzY29wZTohMCxjb21waWxlOmZ1bmN0aW9uKGUsdCl7cmV0dXJue3ByZTpmdW5jdGlvbihuLG8sZSx0KXt2YXIgcixhPXRbMF0sbD10WzFdO2Z1bmN0aW9uIHMoKXtsLmhlYWRlcj1sLmNvbENvbnRhaW5lci5oZWFkZXI9bzt2YXIgZT1vWzBdLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoInVpLWdyaWQtaGVhZGVyLWNhbnZhcyIpOzA8ZS5sZW5ndGg/bC5oZWFkZXJDYW52YXM9bC5jb2xDb250YWluZXIuaGVhZGVyQ2FudmFzPWVbMF06bC5oZWFkZXJDYW52YXM9bnVsbH1mdW5jdGlvbiBkKGUpe2lmKCFhLmdyaWQuaXNTY3JvbGxpbmdIb3Jpem9udGFsbHkpe3ZhciB0PWMubm9ybWFsaXplU2Nyb2xsTGVmdChsLmhlYWRlclZpZXdwb3J0LGEuZ3JpZCkscj1sLmNvbENvbnRhaW5lci5zY3JvbGxIb3Jpem9udGFsKHQpLGk9bmV3IGcoYS5ncmlkLG51bGwsbC5jb2xDb250YWluZXIsZy5Tb3VyY2VzLlZpZXdQb3J0U2Nyb2xsKTtpLm5ld1Njcm9sbExlZnQ9dCwtMTxyJiYoaS54PXtwZXJjZW50YWdlOnJ9KSxhLmdyaWQuc2Nyb2xsQ29udGFpbmVycyhudWxsLGkpfX1uLmdyaWQ9YS5ncmlkLG4uY29sQ29udGFpbmVyPWwuY29sQ29udGFpbmVyLHMoKSxyPW4uZ3JpZC5vcHRpb25zLnNob3dIZWFkZXI/bi5ncmlkLm9wdGlvbnMuaGVhZGVyVGVtcGxhdGU/bi5ncmlkLm9wdGlvbnMuaGVhZGVyVGVtcGxhdGU6InVpLWdyaWQvdWktZ3JpZC1oZWFkZXIiOiJ1aS1ncmlkL3VpLWdyaWQtbm8taGVhZGVyIixjLmdldFRlbXBsYXRlKHIpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHQ9YW5ndWxhci5lbGVtZW50KGUpLHI9dSh0KShuKTtpZihvLnJlcGxhY2VXaXRoKHIpLG89cixzKCksbCl7dmFyIGk9b1swXS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJ1aS1ncmlkLWhlYWRlci12aWV3cG9ydCIpWzBdO2kmJihsLmhlYWRlclZpZXdwb3J0PWksYW5ndWxhci5lbGVtZW50KGkpLm9uKCJzY3JvbGwiLGQpLG4uJG9uKCIkZGVzdHJveSIsZnVuY3Rpb24oKXthbmd1bGFyLmVsZW1lbnQoaSkub2ZmKCJzY3JvbGwiLGQpfSkpfW4uZ3JpZC5xdWV1ZVJlZnJlc2goKX0pLmNhdGNoKGFuZ3VsYXIubm9vcCl9LHBvc3Q6ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG49aVswXSxvPWlbMV07bi5ncmlkO2MuZGlzYWJsZUFuaW1hdGlvbnModCk7dmFyIGE9KG8uaGVhZGVyPXQpWzBdLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoInVpLWdyaWQtaGVhZGVyLXZpZXdwb3J0IilbMF07YSYmKG8uaGVhZGVyVmlld3BvcnQ9YSksbiYmbi5ncmlkLnJlZ2lzdGVyU3R5bGVDb21wdXRhdGlvbih7cHJpb3JpdHk6MTUsZnVuYzpmdW5jdGlvbigpe3ZhciBlPW8uY29sQ29udGFpbmVyLnZpc2libGVDb2x1bW5DYWNoZSx0PSIiLHI9MDtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QrPWUuZ2V0Q29sQ2xhc3NEZWZpbml0aW9uKCkscis9ZS5kcmF3bldpZHRofSksby5jb2xDb250YWluZXIuY2FudmFzV2lkdGg9cix0fX0pfX19fX1dKX0oKSxhbmd1bGFyLm1vZHVsZSgidWkuZ3JpZCIpLnNlcnZpY2UoInVpR3JpZEdyaWRNZW51U2VydmljZSIsWyJncmlkVXRpbCIsImkxOG5TZXJ2aWNlIiwidWlHcmlkQ29uc3RhbnRzIixmdW5jdGlvbihuLGEsdCl7dmFyIGw9e2luaXRpYWxpemU6ZnVuY3Rpb24oZSx0KXsodC5ncmlkTWVudVNjb3BlPWUpLmdyaWQ9dCxlLnJlZ2lzdGVyZWRNZW51SXRlbXM9W10sZS4kb24oIiRkZXN0cm95IixmdW5jdGlvbigpe2UuZ3JpZCYmZS5ncmlkLmdyaWRNZW51U2NvcGUmJihlLmdyaWQuZ3JpZE1lbnVTY29wZT1udWxsKSxlLmdyaWQmJihlLmdyaWQ9bnVsbCksZS5yZWdpc3RlcmVkTWVudUl0ZW1zJiYoZS5yZWdpc3RlcmVkTWVudUl0ZW1zPW51bGwpfSksZS5yZWdpc3RlcmVkTWVudUl0ZW1zPVtdLHQuYXBpLnJlZ2lzdGVyTWV0aG9kKCJjb3JlIiwiYWRkVG9HcmlkTWVudSIsbC5hZGRUb0dyaWRNZW51KSx0LmFwaS5yZWdpc3Rlck1ldGhvZCgiY29yZSIsInJlbW92ZUZyb21HcmlkTWVudSIsbC5yZW1vdmVGcm9tR3JpZE1lbnUpfSxhZGRUb0dyaWRNZW51OmZ1bmN0aW9uKGUsdCl7YW5ndWxhci5pc0FycmF5KHQpP2UuZ3JpZE1lbnVTY29wZT8oZS5ncmlkTWVudVNjb3BlLnJlZ2lzdGVyZWRNZW51SXRlbXM9ZS5ncmlkTWVudVNjb3BlLnJlZ2lzdGVyZWRNZW51SXRlbXM/ZS5ncmlkTWVudVNjb3BlLnJlZ2lzdGVyZWRNZW51SXRlbXM6W10sZS5ncmlkTWVudVNjb3BlLnJlZ2lzdGVyZWRNZW51SXRlbXM9ZS5ncmlkTWVudVNjb3BlLnJlZ2lzdGVyZWRNZW51SXRlbXMuY29uY2F0KHQpKTpuLmxvZ0Vycm9yKCJBc2tlZCB0byBhZGRUb0dyaWRNZW51LCBidXQgZ3JpZE1lbnVTY29wZSBub3QgcHJlc2VudC4gIFRpbWluZyBpc3N1ZT8gIFBsZWFzZSBsb2cgaXNzdWUgd2l0aCB1aS1ncmlkIik6bi5sb2dFcnJvcigiYWRkVG9HcmlkTWVudTogbWVudUl0ZW1zIG11c3QgYmUgYW4gYXJyYXksIGFuZCBpcyBub3QsIG5vdCBhZGRpbmcgYW55IGl0ZW1zIil9LHJlbW92ZUZyb21HcmlkTWVudTpmdW5jdGlvbihlLHIpe3ZhciBpPS0xO2UmJmUuZ3JpZE1lbnVTY29wZSYmZS5ncmlkTWVudVNjb3BlLnJlZ2lzdGVyZWRNZW51SXRlbXMuZm9yRWFjaChmdW5jdGlvbihlLHQpe2UuaWQ9PT1yJiYoLTE8aT9uLmxvZ0Vycm9yKCJyZW1vdmVGcm9tR3JpZE1lbnU6IGZvdW5kIG11bHRpcGxlIGl0ZW1zIHdpdGggdGhlIHNhbWUgaWQsIHJlbW92aW5nIG9ubHkgdGhlIGxhc3QiKTppPXQpfSksLTE8aSYmZS5ncmlkTWVudVNjb3BlLnJlZ2lzdGVyZWRNZW51SXRlbXMuc3BsaWNlKGksMSl9LGdldE1lbnVJdGVtczpmdW5jdGlvbih0KXt2YXIgZT1bXTt0LmdyaWQub3B0aW9ucy5ncmlkTWVudUN1c3RvbUl0ZW1zJiYoYW5ndWxhci5pc0FycmF5KHQuZ3JpZC5vcHRpb25zLmdyaWRNZW51Q3VzdG9tSXRlbXMpP2U9ZS5jb25jYXQodC5ncmlkLm9wdGlvbnMuZ3JpZE1lbnVDdXN0b21JdGVtcyk6bi5sb2dFcnJvcigiZ3JpZE9wdGlvbnMuZ3JpZE1lbnVDdXN0b21JdGVtcyBtdXN0IGJlIGFuIGFycmF5LCBhbmQgaXMgbm90IikpO3ZhciByPVt7dGl0bGU6YS5nZXRTYWZlVGV4dCgiZ3JpZE1lbnUuY2xlYXJBbGxGaWx0ZXJzIiksYWN0aW9uOmZ1bmN0aW9uKGUpe3QuZ3JpZC5jbGVhckFsbEZpbHRlcnMoKX0sc2hvd246ZnVuY3Rpb24oKXtyZXR1cm4gdC5ncmlkLm9wdGlvbnMuZW5hYmxlRmlsdGVyaW5nfSxvcmRlcjoxMDB9XTtyZXR1cm4gZT0oZT1lLmNvbmNhdChyKSkuY29uY2F0KHQucmVnaXN0ZXJlZE1lbnVJdGVtcyksITEhPT10LmdyaWQub3B0aW9ucy5ncmlkTWVudVNob3dIaWRlQ29sdW1ucyYmKGU9ZS5jb25jYXQobC5zaG93SGlkZUNvbHVtbnModCkpKSxlLnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5vcmRlci10Lm9yZGVyfSksZX0sc2hvd0hpZGVDb2x1bW5zOmZ1bmN0aW9uKGkpe3ZhciBuPVtdO2lmKCFpLmdyaWQub3B0aW9ucy5jb2x1bW5EZWZzfHwwPT09aS5ncmlkLm9wdGlvbnMuY29sdW1uRGVmcy5sZW5ndGh8fDA9PT1pLmdyaWQuY29sdW1ucy5sZW5ndGgpcmV0dXJuIG47ZnVuY3Rpb24gbyhlKXtyZXR1cm4hMD09PWUudmlzaWJsZXx8dm9pZCAwPT09ZS52aXNpYmxlfXJldHVybiBuLnB1c2goe3RpdGxlOmEuZ2V0U2FmZVRleHQoImdyaWRNZW51LmNvbHVtbnMiKSxvcmRlcjozMDAsdGVtcGxhdGVVcmw6InVpLWdyaWQvdWktZ3JpZC1tZW51LWhlYWRlci1pdGVtIn0pLGkuZ3JpZC5vcHRpb25zLmdyaWRNZW51VGl0bGVGaWx0ZXI9aS5ncmlkLm9wdGlvbnMuZ3JpZE1lbnVUaXRsZUZpbHRlcj9pLmdyaWQub3B0aW9ucy5ncmlkTWVudVRpdGxlRmlsdGVyOmZ1bmN0aW9uKGUpe3JldHVybiBlfSxpLmdyaWQub3B0aW9ucy5jb2x1bW5EZWZzLmZvckVhY2goZnVuY3Rpb24oZSx0KXtpZighMSE9PWUuZW5hYmxlSGlkaW5nKXt2YXIgcj17aWNvbjpvKGUpPyJ1aS1ncmlkLWljb24tb2siOiJ1aS1ncmlkLWljb24tY2FuY2VsIixhY3Rpb246ZnVuY3Rpb24oZSl7ZS5zdG9wUHJvcGFnYXRpb24oKSxsLnRvZ2dsZUNvbHVtblZpc2liaWxpdHkodGhpcy5jb250ZXh0LmdyaWRDb2wpLGUudGFyZ2V0JiZlLnRhcmdldC5maXJzdENoaWxkJiYoZS50YXJnZXQuZmlyc3RDaGlsZC5jbGFzc05hbWU9byh0aGlzLmNvbnRleHQuZ3JpZENvbC5jb2xEZWYpPyJ1aS1ncmlkLWljb24tb2siOiJ1aS1ncmlkLWljb24tY2FuY2VsIil9LHNob3duOmZ1bmN0aW9uKCl7cmV0dXJuITEhPT10aGlzLmNvbnRleHQuZ3JpZENvbC5jb2xEZWYuZW5hYmxlSGlkaW5nfSxjb250ZXh0OntncmlkQ29sOmkuZ3JpZC5nZXRDb2x1bW4oZS5uYW1lfHxlLmZpZWxkKX0sbGVhdmVPcGVuOiEwLG9yZGVyOjMwMSt0fTtsLnNldE1lbnVJdGVtVGl0bGUocixlLGkuZ3JpZCksbi5wdXNoKHIpfX0pLG59LHNldE1lbnVJdGVtVGl0bGU6ZnVuY3Rpb24odCxlLHIpe3ZhciBpPXIub3B0aW9ucy5ncmlkTWVudVRpdGxlRmlsdGVyKGUuZGlzcGxheU5hbWV8fG4ucmVhZGFibGVDb2x1bW5OYW1lKGUubmFtZSl8fGUuZmllbGQpOyJzdHJpbmciPT10eXBlb2YgaT90LnRpdGxlPWk6aS50aGVuPyh0LnRpdGxlPSIiLGkudGhlbihmdW5jdGlvbihlKXt0LnRpdGxlPWV9LGZ1bmN0aW9uKGUpe3QudGl0bGU9ZX0pLmNhdGNoKGFuZ3VsYXIubm9vcCkpOihuLmxvZ0Vycm9yKCJFeHBlY3RlZCBncmlkTWVudVRpdGxlRmlsdGVyIHRvIHJldHVybiBhIHN0cmluZyBvciBhIHByb21pc2UsIGl0IGhhcyByZXR1cm5lZCBuZWl0aGVyLCBiYWQgY29uZmlnIiksdC50aXRsZT0iYmFkY29uZmlnIil9LHRvZ2dsZUNvbHVtblZpc2liaWxpdHk6ZnVuY3Rpb24oZSl7ZS5jb2xEZWYudmlzaWJsZT0hKCEwPT09ZS5jb2xEZWYudmlzaWJsZXx8dm9pZCAwPT09ZS5jb2xEZWYudmlzaWJsZSksZS5ncmlkLnJlZnJlc2goKSxlLmdyaWQuYXBpLmNvcmUubm90aWZ5RGF0YUNoYW5nZSh0LmRhdGFDaGFuZ2UuQ09MVU1OKSxlLmdyaWQuYXBpLmNvcmUucmFpc2UuY29sdW1uVmlzaWJpbGl0eUNoYW5nZWQoZSl9fTtyZXR1cm4gbH1dKS5kaXJlY3RpdmUoInVpR3JpZE1lbnVCdXR0b24iLFsiZ3JpZFV0aWwiLCJ1aUdyaWRDb25zdGFudHMiLCJ1aUdyaWRHcmlkTWVudVNlcnZpY2UiLCJpMThuU2VydmljZSIsZnVuY3Rpb24obyxlLGEsbCl7cmV0dXJue3ByaW9yaXR5OjAsc2NvcGU6ITAscmVxdWlyZTpbIl51aUdyaWQiXSx0ZW1wbGF0ZVVybDoidWktZ3JpZC91aS1ncmlkLW1lbnUtYnV0dG9uIixyZXBsYWNlOiEwLGxpbms6ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG49aVswXTtlLmkxOG49e2FyaWE6bC5nZXRTYWZlVGV4dCgiZ3JpZE1lbnUuYXJpYSIpfSxhLmluaXRpYWxpemUoZSxuLmdyaWQpLGUuc2hvd249ITEsZS50b2dnbGVNZW51PWZ1bmN0aW9uKCl7ZS5zaG93bj8oZS4kYnJvYWRjYXN0KCJoaWRlLW1lbnUiKSxlLnNob3duPSExKTooZS5tZW51SXRlbXM9YS5nZXRNZW51SXRlbXMoZSksZS4kYnJvYWRjYXN0KCJzaG93LW1lbnUiKSxlLnNob3duPSEwKX0sZS4kb24oIm1lbnUtaGlkZGVuIixmdW5jdGlvbigpe2Uuc2hvd249ITEsby5mb2N1cy5ieVNlbGVjdG9yKHQsIi51aS1ncmlkLWljb24tY29udGFpbmVyIil9KX19fV0pLGFuZ3VsYXIubW9kdWxlKCJ1aS5ncmlkIikuZGlyZWN0aXZlKCJ1aUdyaWRNZW51IixbIiRjb21waWxlIiwiJHRpbWVvdXQiLCIkd2luZG93IiwiJGRvY3VtZW50IiwiZ3JpZFV0aWwiLCJ1aUdyaWRDb25zdGFudHMiLCJpMThuU2VydmljZSIsZnVuY3Rpb24oZCx1LGMsZSxnLHAsZil7cmV0dXJue3ByaW9yaXR5OjAsc2NvcGU6e21lbnVJdGVtczoiPSIsYXV0b0hpZGU6Ij0/In0scmVxdWlyZToiP151aUdyaWQiLHRlbXBsYXRlVXJsOiJ1aS1ncmlkL3VpR3JpZE1lbnUiLHJlcGxhY2U6ITEsbGluazpmdW5jdGlvbihpLG8sZSxyKXtpZihpLmR5bmFtaWNTdHlsZXM9IiIsciYmci5ncmlkJiZyLmdyaWQub3B0aW9ucyYmci5ncmlkLm9wdGlvbnMuZ3JpZE1lbnVUZW1wbGF0ZSl7dmFyIHQ9ci5ncmlkLm9wdGlvbnMuZ3JpZE1lbnVUZW1wbGF0ZTtnLmdldFRlbXBsYXRlKHQpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHQ9YW5ndWxhci5lbGVtZW50KGUpLHI9ZCh0KShpKTtvLnJlcGxhY2VXaXRoKHIpfSkuY2F0Y2goYW5ndWxhci5ub29wKX12YXIgbj1mdW5jdGlvbihlKXt2YXIgdD1lLXIuZ3JpZC5oZWFkZXJIZWlnaHQtMjA7aS5keW5hbWljU3R5bGVzPVsiLmdyaWQiK3IuZ3JpZC5pZCsiIC51aS1ncmlkLW1lbnUtbWlkIHsiLCJtYXgtaGVpZ2h0OiAiK3QrInB4OyIsIn0iXS5qb2luKCIgIil9O3ImJihuKHIuZ3JpZC5ncmlkSGVpZ2h0KSxyLmdyaWQuYXBpLmNvcmUub24uZ3JpZERpbWVuc2lvbkNoYW5nZWQoaSxmdW5jdGlvbihlLHQscixpKXtuKHIpfSkpLGkuaTE4bj17Y2xvc2U6Zi5nZXRTYWZlVGV4dCgiY29sdW1uTWVudS5jbG9zZSIpfSxpLnNob3dNZW51PWZ1bmN0aW9uKGUsdCl7aS5zaG93bj9pLnNob3duTWlkfHwoaS5zaG93bk1pZD0hMCxpLiRlbWl0KCJtZW51LXNob3duIikpOihpLnNob3duPSEwLHUoZnVuY3Rpb24oKXtpLnNob3duTWlkPSEwLGkuJGVtaXQoIm1lbnUtc2hvd24iKX0pKTt2YXIgcj0iY2xpY2siO3QmJnQub3JpZ2luYWxFdmVudCYmdC5vcmlnaW5hbEV2ZW50LnR5cGUmJiJ0b3VjaHN0YXJ0Ij09PXQub3JpZ2luYWxFdmVudC50eXBlJiYocj10Lm9yaWdpbmFsRXZlbnQudHlwZSksYW5ndWxhci5lbGVtZW50KGRvY3VtZW50KS5vZmYoImNsaWNrIHRvdWNoc3RhcnQiLGEpLG8ub2ZmKCJrZXl1cCIsbCksby5vZmYoImtleWRvd24iLHMpLHUoZnVuY3Rpb24oKXthbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQpLm9uKHIsYSksby5vbigia2V5dXAiLGwpLG8ub24oImtleWRvd24iLHMpfSl9LGkuaGlkZU1lbnU9ZnVuY3Rpb24oZSl7aS5zaG93biYmKGkuc2hvd25NaWQ9ITEsdShmdW5jdGlvbigpe2kuc2hvd25NaWR8fChpLnNob3duPSExLGkuJGVtaXQoIm1lbnUtaGlkZGVuIikpfSw0MCkpLGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudCkub2ZmKCJjbGljayB0b3VjaHN0YXJ0IixhKSxvLm9mZigia2V5dXAiLGwpLG8ub2ZmKCJrZXlkb3duIixzKX0saS4kb24oImhpZGUtbWVudSIsZnVuY3Rpb24oZSx0KXtpLmhpZGVNZW51KGUsdCl9KSxpLiRvbigic2hvdy1tZW51IixmdW5jdGlvbihlLHQpe2kuc2hvd01lbnUoZSx0KX0pO3ZhciBhPWZ1bmN0aW9uKCl7aS5zaG93biYmaS4kYXBwbHkoZnVuY3Rpb24oKXtpLmhpZGVNZW51KCl9KX0sbD1mdW5jdGlvbihlKXsyNz09PWUua2V5Q29kZSYmaS5oaWRlTWVudSgpfSxzPWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKGUpe3JldHVybiBlLmZvY3VzKCksdC5wcmV2ZW50RGVmYXVsdCgpLCExfTtpZig5PT09dC5rZXlDb2RlKXt2YXIgcixpLG49b1swXS5xdWVyeVNlbGVjdG9yQWxsKCJidXR0b246bm90KC5uZy1oaWRlKSIpOzA8bi5sZW5ndGgmJihyPW5bMF0saT1uW24ubGVuZ3RoLTFdLHQudGFyZ2V0IT09aXx8dC5zaGlmdEtleT90LnRhcmdldD09PXImJnQuc2hpZnRLZXkmJmUoaSk6ZShyKSl9fTt2b2lkIDAhPT1pLmF1dG9IaWRlJiZ2b2lkIDAhPT1pLmF1dG9IaWRlfHwoaS5hdXRvSGlkZT0hMCksaS5hdXRvSGlkZSYmYW5ndWxhci5lbGVtZW50KGMpLm9uKCJyZXNpemUiLGEpLGkuJG9uKCIkZGVzdHJveSIsZnVuY3Rpb24oKXthbmd1bGFyLmVsZW1lbnQoYykub2ZmKCJyZXNpemUiLGEpLGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudCkub2ZmKCJjbGljayB0b3VjaHN0YXJ0IixhKSxvLm9mZigia2V5dXAiLGwpLG8ub2ZmKCJrZXlkb3duIixzKX0pLHImJmkuJG9uKCIkZGVzdHJveSIsci5ncmlkLmFwaS5jb3JlLm9uLnNjcm9sbEJlZ2luKGksYSkpLGkuJG9uKCIkZGVzdHJveSIsaS4kb24ocC5ldmVudHMuSVRFTV9EUkFHR0lORyxhKSl9fX1dKS5kaXJlY3RpdmUoInVpR3JpZE1lbnVJdGVtIixbImdyaWRVdGlsIiwiJGNvbXBpbGUiLCJpMThuU2VydmljZSIsZnVuY3Rpb24oYSxvLGkpe3JldHVybntwcmlvcml0eTowLHNjb3BlOntuYW1lOiI9IixhY3RpdmU6Ij0iLGFjdGlvbjoiPSIsaWNvbjoiPSIsc2hvd246Ij0iLGNvbnRleHQ6Ij0iLHRlbXBsYXRlVXJsOiI9IixsZWF2ZU9wZW46Ij0iLHNjcmVlblJlYWRlck9ubHk6Ij0ifSxyZXF1aXJlOlsiP151aUdyaWQiXSx0ZW1wbGF0ZVVybDoidWktZ3JpZC91aUdyaWRNZW51SXRlbSIscmVwbGFjZTohMSxjb21waWxlOmZ1bmN0aW9uKCl7cmV0dXJue3ByZTpmdW5jdGlvbihpLG4pe2kudGVtcGxhdGVVcmwmJmEuZ2V0VGVtcGxhdGUoaS50ZW1wbGF0ZVVybCkudGhlbihmdW5jdGlvbihlKXt2YXIgdD1hbmd1bGFyLmVsZW1lbnQoZSkscj1vKHQpKGkpO24ucmVwbGFjZVdpdGgocil9KS5jYXRjaChhbmd1bGFyLm5vb3ApfSxwb3N0OmZ1bmN0aW9uKG4sZSx0LHIpe3ZhciBvPXJbMF07dm9pZCAwIT09bi5zaG93biYmbnVsbCE9PW4uc2hvd258fChuLnNob3duPWZ1bmN0aW9uKCl7cmV0dXJuITB9KSxuLml0ZW1TaG93bj1mdW5jdGlvbigpe3ZhciBlPXt9O3JldHVybiBuLmNvbnRleHQmJihlLmNvbnRleHQ9bi5jb250ZXh0KSx2b2lkIDAhPT1vJiZvJiYoZS5ncmlkPW8uZ3JpZCksbi5zaG93bi5jYWxsKGUpfSxuLml0ZW1BY3Rpb249ZnVuY3Rpb24oZSx0KXtpZihlLnN0b3BQcm9wYWdhdGlvbigpLCJmdW5jdGlvbiI9PXR5cGVvZiBuLmFjdGlvbil7dmFyIHI9e307aWYobi5jb250ZXh0JiYoci5jb250ZXh0PW4uY29udGV4dCksdm9pZCAwIT09byYmbyYmKHIuZ3JpZD1vLmdyaWQpLG4uYWN0aW9uLmNhbGwocixlLHQpLG4ubGVhdmVPcGVuKXt2YXIgaT1lLnRhcmdldC5wYXJlbnRFbGVtZW50OyJJIj09PWFuZ3VsYXIuZWxlbWVudChlLnRhcmdldClbMF0ubm9kZU5hbWUmJihpPWkucGFyZW50RWxlbWVudCksYS5mb2N1cy5ieVNlbGVjdG9yKGksImJ1dHRvblt0eXBlPWJ1dHRvbl0iLCEwKX1lbHNlIG4uJGVtaXQoImhpZGUtbWVudSIpfX0sbi5sYWJlbD1mdW5jdGlvbigpe3ZhciBlPW4ubmFtZTtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2Ygbi5uYW1lJiYoZT1uLm5hbWUuY2FsbCgpKSxlfSxuLmkxOG49aS5nZXQoKX19fX19XSksZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7dmFyIHQ9YW5ndWxhci5tb2R1bGUoInVpLmdyaWQiKTthbmd1bGFyLmZvckVhY2goW3t0YWc6IlNyYyIsbWV0aG9kOiJhdHRyIn0se3RhZzoiVGV4dCIsbWV0aG9kOiJ0ZXh0In0se3RhZzoiSHJlZiIsbWV0aG9kOiJhdHRyIn0se3RhZzoiQ2xhc3MiLG1ldGhvZDoiYWRkQ2xhc3MifSx7dGFnOiJIdG1sIixtZXRob2Q6Imh0bWwifSx7dGFnOiJBbHQiLG1ldGhvZDoiYXR0ciJ9LHt0YWc6IlN0eWxlIixtZXRob2Q6ImNzcyJ9LHt0YWc6IlZhbHVlIixtZXRob2Q6ImF0dHIifSx7dGFnOiJJZCIsbWV0aG9kOiJhdHRyIn0se3RhZzoiSWQiLGRpcmVjdGl2ZU5hbWU6IklkR3JpZCIsbWV0aG9kOiJhdHRyIixhcHBlbmRHcmlkSWQ6ITB9LHt0YWc6IlRpdGxlIixtZXRob2Q6ImF0dHIifSx7dGFnOiJMYWJlbCIsbWV0aG9kOiJhdHRyIixhcmlhOiEwfSx7dGFnOiJMYWJlbGxlZGJ5IixtZXRob2Q6ImF0dHIiLGFyaWE6ITB9LHt0YWc6IkxhYmVsbGVkYnkiLGRpcmVjdGl2ZU5hbWU6IkxhYmVsbGVkYnlHcmlkIixhcHBlbmRHcmlkSWQ6ITAsbWV0aG9kOiJhdHRyIixhcmlhOiEwfSx7dGFnOiJEZXNjcmliZWRieSIsbWV0aG9kOiJhdHRyIixhcmlhOiEwfSx7dGFnOiJEZXNjcmliZWRieSIsZGlyZWN0aXZlTmFtZToiRGVzY3JpYmVkYnlHcmlkIixhcHBlbmRHcmlkSWQ6ITAsbWV0aG9kOiJhdHRyIixhcmlhOiEwfV0sZnVuY3Rpb24oZCl7dmFyIGU9InVpR3JpZE9uZUJpbmQiLHU9KGQuYXJpYT9lKyJBcmlhIjplKSsoZC5kaXJlY3RpdmVOYW1lP2QuZGlyZWN0aXZlTmFtZTpkLnRhZyk7dC5kaXJlY3RpdmUodSxbImdyaWRVdGlsIixmdW5jdGlvbihzKXtyZXR1cm57cmVzdHJpY3Q6IkEiLHJlcXVpcmU6WyI/dWlHcmlkIiwiP151aUdyaWQiXSxsaW5rOmZ1bmN0aW9uKG4sbyxlLGEpe3ZhciBsPW4uJHdhdGNoKGVbdV0sZnVuY3Rpb24oZSl7aWYoZSl7aWYoZC5hcHBlbmRHcmlkSWQpe3ZhciB0PW51bGw7YW5ndWxhci5mb3JFYWNoKGUuc3BsaXQoIiAiKSxmdW5jdGlvbihlKXt0PSh0P3QrIiAiOiIiKStmdW5jdGlvbihlKXt2YXIgdDtpZihuLmdyaWQpdD1uLmdyaWQ7ZWxzZSBpZihuLmNvbCYmbi5jb2wuZ3JpZCl0PW4uY29sLmdyaWQ7ZWxzZSBpZighYS5zb21lKGZ1bmN0aW9uKGUpe2lmKGUmJmUuZ3JpZClyZXR1cm4gdD1lLmdyaWQsITB9KSl0aHJvdyBzLmxvZ0Vycm9yKCJbIit1KyJdIEEgdmFsaWQgZ3JpZCBjb3VsZCBub3QgYmUgZm91bmQgdG8gYmluZCBpZC4gQXJlIHlvdSB1c2luZyB0aGlzIGRpcmVjdGl2ZSB3aXRoaW4gdGhlIGNvcnJlY3Qgc2NvcGU/IFRyeWluZyB0byBnZW5lcmF0ZSBpZDogW2dyaWRJRF0tIitlKSxuZXcgRXJyb3IoIk5vIHZhbGlkIGdyaWQgY291bGQgYmUgZm91bmQiKTt0JiYobmV3IFJlZ0V4cCh0LmlkLnRvU3RyaW5nKCkpLnRlc3QoZSl8fChlPXQuaWQudG9TdHJpbmcoKSsiLSIrZSkpO3JldHVybiBlfShlKX0pLGU9dH1zd2l0Y2goZC5tZXRob2Qpe2Nhc2UiYXR0ciI6ZC5hcmlhP29bZC5tZXRob2RdKCJhcmlhLSIrZC50YWcudG9Mb3dlckNhc2UoKSxlKTpvW2QubWV0aG9kXShkLnRhZy50b0xvd2VyQ2FzZSgpLGUpO2JyZWFrO2Nhc2UiYWRkQ2xhc3MiOmlmKGFuZ3VsYXIuaXNPYmplY3QoZSkmJiFhbmd1bGFyLmlzQXJyYXkoZSkpe3ZhciByPVtdLGk9ITE7aWYoYW5ndWxhci5mb3JFYWNoKGUsZnVuY3Rpb24oZSx0KXtudWxsIT1lJiYoaT0hMCxlJiZyLnB1c2godCkpfSksIWkpcmV0dXJuO2U9cn1pZighZSlyZXR1cm47by5hZGRDbGFzcyhhbmd1bGFyLmlzQXJyYXkoZSk/ZS5qb2luKCIgIik6ZSk7YnJlYWs7ZGVmYXVsdDpvW2QubWV0aG9kXShlKX1sKCl9fSwhMCl9fX1dKX0pfSgpLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3ZhciBlPWFuZ3VsYXIubW9kdWxlKCJ1aS5ncmlkIik7ZS5kaXJlY3RpdmUoInVpR3JpZFJlbmRlckNvbnRhaW5lciIsWyIkdGltZW91dCIsIiRkb2N1bWVudCIsInVpR3JpZENvbnN0YW50cyIsImdyaWRVdGlsIiwiU2Nyb2xsRXZlbnQiLGZ1bmN0aW9uKGUsdCxyLG0saCl7cmV0dXJue3JlcGxhY2U6ITAsdHJhbnNjbHVkZTohMCx0ZW1wbGF0ZVVybDoidWktZ3JpZC91aUdyaWRSZW5kZXJDb250YWluZXIiLHJlcXVpcmU6WyJedWlHcmlkIiwidWlHcmlkUmVuZGVyQ29udGFpbmVyIl0sc2NvcGU6e2NvbnRhaW5lcklkOiI9Iixyb3dDb250YWluZXJOYW1lOiI9Iixjb2xDb250YWluZXJOYW1lOiI9IixiaW5kU2Nyb2xsSG9yaXpvbnRhbDoiPSIsYmluZFNjcm9sbFZlcnRpY2FsOiI9IixlbmFibGVWZXJ0aWNhbFNjcm9sbGJhcjoiPSIsZW5hYmxlSG9yaXpvbnRhbFNjcm9sbGJhcjoiPSJ9LGNvbnRyb2xsZXI6InVpR3JpZFJlbmRlckNvbnRhaW5lciBhcyBSZW5kZXJDb250YWluZXIiLGNvbXBpbGU6ZnVuY3Rpb24oKXtyZXR1cm57cHJlOmZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuPWlbMF0sbz1pWzFdLGE9ZS5ncmlkPW4uZ3JpZDtpZighZS5yb3dDb250YWluZXJOYW1lKXRocm93IG5ldyBFcnJvcigiTm8gcm93IHJlbmRlciBjb250YWluZXIgbmFtZSBzcGVjaWZpZWQiKTtpZighZS5jb2xDb250YWluZXJOYW1lKXRocm93IG5ldyBFcnJvcigiTm8gY29sdW1uIHJlbmRlciBjb250YWluZXIgbmFtZSBzcGVjaWZpZWQiKTtpZighYS5yZW5kZXJDb250YWluZXJzW2Uucm93Q29udGFpbmVyTmFtZV0pdGhyb3cgbmV3IEVycm9yKCJSb3cgcmVuZGVyIGNvbnRhaW5lciAnIitlLnJvd0NvbnRhaW5lck5hbWUrIicgaXMgbm90IHJlZ2lzdGVyZWQuIik7aWYoIWEucmVuZGVyQ29udGFpbmVyc1tlLmNvbENvbnRhaW5lck5hbWVdKXRocm93IG5ldyBFcnJvcigiQ29sdW1uIHJlbmRlciBjb250YWluZXIgJyIrZS5jb2xDb250YWluZXJOYW1lKyInIGlzIG5vdCByZWdpc3RlcmVkLiIpO3ZhciBsPWUucm93Q29udGFpbmVyPWEucmVuZGVyQ29udGFpbmVyc1tlLnJvd0NvbnRhaW5lck5hbWVdLHM9ZS5jb2xDb250YWluZXI9YS5yZW5kZXJDb250YWluZXJzW2UuY29sQ29udGFpbmVyTmFtZV07by5jb250YWluZXJJZD1lLmNvbnRhaW5lcklkLG8ucm93Q29udGFpbmVyPWwsby5jb2xDb250YWluZXI9c30scG9zdDpmdW5jdGlvbihzLHQsZSxyKXt2YXIgZD1yWzBdLGE9clsxXSx1PWQuZ3JpZCxjPWEucm93Q29udGFpbmVyLGc9YS5jb2xDb250YWluZXIsbD1udWxsLHA9bnVsbCxmPXUucmVuZGVyQ29udGFpbmVyc1tzLmNvbnRhaW5lcklkXTt0LmFkZENsYXNzKCJ1aS1ncmlkLXJlbmRlci1jb250YWluZXItIitzLmNvbnRhaW5lcklkKSxtLm9uLm1vdXNld2hlZWwodCxmdW5jdGlvbihlKXt2YXIgdD1uZXcgaCh1LGMsZyxoLlNvdXJjZXMuUmVuZGVyQ29udGFpbmVyTW91c2VXaGVlbCk7aWYoMCE9PWUuZGVsdGFZKXt2YXIgcj0tMSplLmRlbHRhWSplLmRlbHRhRmFjdG9yO2w9YS52aWV3cG9ydFswXS5zY3JvbGxUb3AsdC52ZXJ0aWNhbFNjcm9sbExlbmd0aD1jLmdldFZlcnRpY2FsU2Nyb2xsTGVuZ3RoKCk7dmFyIGk9KGwrcikvdC52ZXJ0aWNhbFNjcm9sbExlbmd0aDsxPD1pJiZsPHQudmVydGljYWxTY3JvbGxMZW5ndGgmJihhLnZpZXdwb3J0WzBdLnNjcm9sbFRvcD10LnZlcnRpY2FsU2Nyb2xsTGVuZ3RoKSxpPDA/aT0wOjE8aSYmKGk9MSksdC55PXtwZXJjZW50YWdlOmkscGl4ZWxzOnJ9fWlmKDAhPT1lLmRlbHRhWCl7dmFyIG49ZS5kZWx0YVgqZS5kZWx0YUZhY3RvcjtwPW0ubm9ybWFsaXplU2Nyb2xsTGVmdChhLnZpZXdwb3J0LHUpLHQuaG9yaXpvbnRhbFNjcm9sbExlbmd0aD1nLmdldENhbnZhc1dpZHRoKCktZy5nZXRWaWV3cG9ydFdpZHRoKCk7dmFyIG89KHArbikvdC5ob3Jpem9udGFsU2Nyb2xsTGVuZ3RoO288MD9vPTA6MTxvJiYobz0xKSx0Lng9e3BlcmNlbnRhZ2U6byxwaXhlbHM6bn19MCE9PWUuZGVsdGFZJiYodC5hdFRvcChsKXx8dC5hdEJvdHRvbShsKSl8fDAhPT1lLmRlbHRhWCYmKHQuYXRMZWZ0KHApfHx0LmF0UmlnaHQocCkpfHwoZS5wcmV2ZW50RGVmYXVsdCgpLGUuc3RvcFByb3BhZ2F0aW9uKCksdC5maXJlVGhyb3R0bGVkU2Nyb2xsaW5nRXZlbnQoIiIsdCkpfSksdC5iaW5kKCIkZGVzdHJveSIsZnVuY3Rpb24oKXt0LnVuYmluZCgia2V5ZG93biIpLFsidG91Y2hzdGFydCIsInRvdWNobW92ZSIsInRvdWNoZW5kIiwia2V5ZG93biIsIndoZWVsIiwibW91c2V3aGVlbCIsIkRvbU1vdXNlU2Nyb2xsIiwiTW96TW91c2VQaXhlbFNjcm9sbCJdLmZvckVhY2goZnVuY3Rpb24oZSl7dC51bmJpbmQoZSl9KX0pLGQuZ3JpZC5yZWdpc3RlclN0eWxlQ29tcHV0YXRpb24oe3ByaW9yaXR5OjYsZnVuYzpmdW5jdGlvbigpe3ZhciBlLHQscj0iIixpPWcuY2FudmFzV2lkdGgsbj1nLmdldFZpZXdwb3J0V2lkdGgoKSxvPWMuZ2V0Q2FudmFzSGVpZ2h0KCksYT1jLmdldFZpZXdwb3J0SGVpZ2h0KCk7aWYoZy5uZWVkc0hTY3JvbGxiYXJQbGFjZWhvbGRlcigpJiYoYS09dS5zY3JvbGxiYXJIZWlnaHQpLGU9dD1nLmdldEhlYWRlclZpZXdwb3J0V2lkdGgoKSxyKz0iXG4gLmdyaWQiK2QuZ3JpZC5pZCsiIC51aS1ncmlkLXJlbmRlci1jb250YWluZXItIitzLmNvbnRhaW5lcklkKyIgLnVpLWdyaWQtY2FudmFzIHsgd2lkdGg6ICIraSsicHg7IGhlaWdodDogIitvKyJweDsgfSIscis9IlxuIC5ncmlkIitkLmdyaWQuaWQrIiAudWktZ3JpZC1yZW5kZXItY29udGFpbmVyLSIrcy5jb250YWluZXJJZCsiIC51aS1ncmlkLWhlYWRlci1jYW52YXMgeyB3aWR0aDogIisoaSt1LnNjcm9sbGJhcldpZHRoKSsicHg7IH0iLGYuZXhwbGljaXRIZWFkZXJDYW52YXNIZWlnaHQpe3ZhciBsPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5ncmlkIitkLmdyaWQuaWQrIiAudWktZ3JpZC1yZW5kZXItY29udGFpbmVyLWJvZHkgLnVpLWdyaWQtaGVhZGVyLWNhbnZhcyIpO2wmJihmLmV4cGxpY2l0SGVhZGVyQ2FudmFzSGVpZ2h0PWwub2Zmc2V0SGVpZ2h0KSxyKz0iXG4gLmdyaWQiK2QuZ3JpZC5pZCsiIC51aS1ncmlkLXJlbmRlci1jb250YWluZXItIitzLmNvbnRhaW5lcklkKyIgLnVpLWdyaWQtaGVhZGVyLWNhbnZhcyB7IGhlaWdodDogIitmLmV4cGxpY2l0SGVhZGVyQ2FudmFzSGVpZ2h0KyJweDsgfSJ9ZWxzZSByKz0iXG4gLmdyaWQiK2QuZ3JpZC5pZCsiIC51aS1ncmlkLXJlbmRlci1jb250YWluZXItIitzLmNvbnRhaW5lcklkKyIgLnVpLWdyaWQtaGVhZGVyLWNhbnZhcyB7IGhlaWdodDogaW5oZXJpdDsgfSI7cmV0dXJuIHIrPSJcbiAuZ3JpZCIrZC5ncmlkLmlkKyIgLnVpLWdyaWQtcmVuZGVyLWNvbnRhaW5lci0iK3MuY29udGFpbmVySWQrIiAudWktZ3JpZC12aWV3cG9ydCB7IHdpZHRoOiAiK24rInB4OyBoZWlnaHQ6ICIrYSsicHg7IH0iLHIrPSJcbiAuZ3JpZCIrZC5ncmlkLmlkKyIgLnVpLWdyaWQtcmVuZGVyLWNvbnRhaW5lci0iK3MuY29udGFpbmVySWQrIiAudWktZ3JpZC1oZWFkZXItdmlld3BvcnQgeyB3aWR0aDogIitlKyJweDsgfSIscis9IlxuIC5ncmlkIitkLmdyaWQuaWQrIiAudWktZ3JpZC1yZW5kZXItY29udGFpbmVyLSIrcy5jb250YWluZXJJZCsiIC51aS1ncmlkLWZvb3Rlci1jYW52YXMgeyB3aWR0aDogIisoaSt1LnNjcm9sbGJhcldpZHRoKSsicHg7IH0iLHIrPSJcbiAuZ3JpZCIrZC5ncmlkLmlkKyIgLnVpLWdyaWQtcmVuZGVyLWNvbnRhaW5lci0iK3MuY29udGFpbmVySWQrIiAudWktZ3JpZC1mb290ZXItdmlld3BvcnQgeyB3aWR0aDogIit0KyJweDsgfSJ9fSl9fX19fV0pLGUuY29udHJvbGxlcigidWlHcmlkUmVuZGVyQ29udGFpbmVyIixbIiRzY29wZSIsImdyaWRVdGlsIixmdW5jdGlvbihlLHQpe31dKX0oKSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0Ijthbmd1bGFyLm1vZHVsZSgidWkuZ3JpZCIpLmRpcmVjdGl2ZSgidWlHcmlkUm93IixbImdyaWRVdGlsIixmdW5jdGlvbihlKXtyZXR1cm57cmVwbGFjZTohMCxyZXF1aXJlOlsiXnVpR3JpZCIsIl51aUdyaWRSZW5kZXJDb250YWluZXIiXSxzY29wZTp7cm93OiI9dWlHcmlkUm93Iixyb3dSZW5kZXJJbmRleDoiPSJ9LGNvbXBpbGU6ZnVuY3Rpb24oKXtyZXR1cm57cHJlOmZ1bmN0aW9uKHQsaSxlLHIpe3ZhciBuLG8sYT1yWzBdLGw9clsxXTthLmdyaWQ7ZnVuY3Rpb24gcygpe3Qucm93LmdldFJvd1RlbXBsYXRlRm4udGhlbihmdW5jdGlvbihlKXt2YXIgcj10LiRuZXcoKTtlKHIsZnVuY3Rpb24oZSx0KXtuJiYobi5yZW1vdmUoKSxvLiRkZXN0cm95KCkpLGkuZW1wdHkoKS5hcHBlbmQoZSksbj1lLG89cn0pfSkuY2F0Y2goYW5ndWxhci5ub29wKX10LmdyaWQ9YS5ncmlkLHQuY29sQ29udGFpbmVyPWwuY29sQ29udGFpbmVyLHMoKSx0LiR3YXRjaCgicm93LmdldFJvd1RlbXBsYXRlRm4iLGZ1bmN0aW9uKGUsdCl7ZSE9PXQmJnMoKX0pfSxwb3N0OmZ1bmN0aW9uKGUsdCxyLGkpe319fX19XSl9KCksYW5ndWxhci5tb2R1bGUoInVpLmdyaWQiKS5kaXJlY3RpdmUoInVpR3JpZFN0eWxlIixbImdyaWRVdGlsIiwiJGludGVycG9sYXRlIixmdW5jdGlvbihlLG8pe3JldHVybntsaW5rOmZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuPW8odC50ZXh0KCksITApO24mJmUuJHdhdGNoKG4sZnVuY3Rpb24oZSl7dC50ZXh0KGUpfSl9fX1dKSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0Ijthbmd1bGFyLm1vZHVsZSgidWkuZ3JpZCIpLmRpcmVjdGl2ZSgidWlHcmlkVmlld3BvcnQiLFsiZ3JpZFV0aWwiLCJTY3JvbGxFdmVudCIsInVpR3JpZENvbnN0YW50cyIsIiRsb2ciLGZ1bmN0aW9uKGMsZyxlLHQpe3JldHVybntyZXBsYWNlOiEwLHNjb3BlOnt9LGNvbnRyb2xsZXJBczoiVmlld3BvcnQiLHRlbXBsYXRlVXJsOiJ1aS1ncmlkL3VpR3JpZFZpZXdwb3J0IixyZXF1aXJlOlsiXnVpR3JpZCIsIl51aUdyaWRSZW5kZXJDb250YWluZXIiXSxsaW5rOmZ1bmN0aW9uKGEsbCxlLHQpe3ZhciByPXRbMF0saT10WzFdLHM9KGEuY29udGFpbmVyQ3RybD1pKS5yb3dDb250YWluZXIsZD1pLmNvbENvbnRhaW5lcix1PXIuZ3JpZDthLmdyaWQ9ci5ncmlkLGEucm93Q29udGFpbmVyPWkucm93Q29udGFpbmVyLGEuY29sQ29udGFpbmVyPWkuY29sQ29udGFpbmVyLGkudmlld3BvcnQ9bCx1JiZ1Lm9wdGlvbnMmJnUub3B0aW9ucy5jdXN0b21TY3JvbGxlcj91Lm9wdGlvbnMuY3VzdG9tU2Nyb2xsZXIobCxuKTpsLm9uKCJzY3JvbGwiLG4pO2Z1bmN0aW9uIG4oZSl7dmFyIHQ9bFswXS5zY3JvbGxUb3Ascj1jLm5vcm1hbGl6ZVNjcm9sbExlZnQobCx1KSxpPXMuc2Nyb2xsVmVydGljYWwodCksbj1kLnNjcm9sbEhvcml6b250YWwociksbz1uZXcgZyh1LHMsZCxnLlNvdXJjZXMuVmlld1BvcnRTY3JvbGwpO28ubmV3U2Nyb2xsTGVmdD1yLG8ubmV3U2Nyb2xsVG9wPXQsLTE8biYmKG8ueD17cGVyY2VudGFnZTpufSksLTE8aSYmKG8ueT17cGVyY2VudGFnZTppfSksdS5zY3JvbGxDb250YWluZXJzKGEuJHBhcmVudC5jb250YWluZXJJZCxvKX1hLiRwYXJlbnQuYmluZFNjcm9sbFZlcnRpY2FsJiZ1LmFkZFZlcnRpY2FsU2Nyb2xsU3luYyhhLiRwYXJlbnQuY29udGFpbmVySWQsZnVuY3Rpb24oZSl7dmFyIHQ9KGkucHJldlNjcm9sbEFyZ3M9ZSkuZ2V0TmV3U2Nyb2xsVG9wKHMsaS52aWV3cG9ydCk7bFswXS5zY3JvbGxUb3A9dH0pLGEuJHBhcmVudC5iaW5kU2Nyb2xsSG9yaXpvbnRhbCYmKHUuYWRkSG9yaXpvbnRhbFNjcm9sbFN5bmMoYS4kcGFyZW50LmNvbnRhaW5lcklkLGZ1bmN0aW9uKGUpe3ZhciB0PShpLnByZXZTY3JvbGxBcmdzPWUpLmdldE5ld1Njcm9sbExlZnQoZCxpLnZpZXdwb3J0KTtsWzBdLnNjcm9sbExlZnQ9Yy5kZW5vcm1hbGl6ZVNjcm9sbExlZnQoaS52aWV3cG9ydCx0LHUpfSksdS5hZGRIb3Jpem9udGFsU2Nyb2xsU3luYyhhLiRwYXJlbnQuY29udGFpbmVySWQrImhlYWRlciIsZnVuY3Rpb24oZSl7dmFyIHQ9ZS5nZXROZXdTY3JvbGxMZWZ0KGQsaS52aWV3cG9ydCk7aS5oZWFkZXJWaWV3cG9ydCYmKGkuaGVhZGVyVmlld3BvcnQuc2Nyb2xsTGVmdD1jLmRlbm9ybWFsaXplU2Nyb2xsTGVmdChpLnZpZXdwb3J0LHQsdSkpfSksdS5hZGRIb3Jpem9udGFsU2Nyb2xsU3luYyhhLiRwYXJlbnQuY29udGFpbmVySWQrImZvb3RlciIsZnVuY3Rpb24oZSl7dmFyIHQ9ZS5nZXROZXdTY3JvbGxMZWZ0KGQsaS52aWV3cG9ydCk7aS5mb290ZXJWaWV3cG9ydCYmKGkuZm9vdGVyVmlld3BvcnQuc2Nyb2xsTGVmdD1jLmRlbm9ybWFsaXplU2Nyb2xsTGVmdChpLnZpZXdwb3J0LHQsdSkpfSkpLGEuJG9uKCIkZGVzdHJveSIsZnVuY3Rpb24oKXtsLm9mZigpfSl9LGNvbnRyb2xsZXI6WyIkc2NvcGUiLGZ1bmN0aW9uKG8pe3RoaXMucm93U3R5bGU9ZnVuY3Rpb24oZSl7dmFyIHQ9by5yb3dDb250YWluZXIscj1vLmNvbENvbnRhaW5lcixpPXt9O2lmKDAhPT10LmN1cnJlbnRUb3BSb3cpe3ZhciBuPSJ0cmFuc2xhdGVZKCIrdC5jdXJyZW50VG9wUm93KnQuZ3JpZC5vcHRpb25zLnJvd0hlaWdodCsicHgpIjtpLnRyYW5zZm9ybT1uLGlbIi13ZWJraXQtdHJhbnNmb3JtIl09bixpWyItbXMtdHJhbnNmb3JtIl09bn1yZXR1cm4gMCE9PXIuY3VycmVudEZpcnN0Q29sdW1uJiYoci5ncmlkLmlzUlRMKCk/aVsibWFyZ2luLXJpZ2h0Il09ci5jb2x1bW5PZmZzZXQrInB4IjppWyJtYXJnaW4tbGVmdCJdPXIuY29sdW1uT2Zmc2V0KyJweCIpLGl9fV19fV0pfSgpLGFuZ3VsYXIubW9kdWxlKCJ1aS5ncmlkIikuZGlyZWN0aXZlKCJ1aUdyaWRWaXNpYmxlIixmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlLHQscil7ZS4kd2F0Y2goci51aUdyaWRWaXNpYmxlLGZ1bmN0aW9uKGUpe3RbZT8icmVtb3ZlQ2xhc3MiOiJhZGRDbGFzcyJdKCJ1aS1ncmlkLWludmlzaWJsZSIpfSl9fSksZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZShnLHAsZil7cmV0dXJue3RlbXBsYXRlVXJsOiJ1aS1ncmlkL3VpLWdyaWQiLHNjb3BlOnt1aUdyaWQ6Ij0ifSxyZXBsYWNlOiEwLHRyYW5zY2x1ZGU6ITAsY29udHJvbGxlcjoidWlHcmlkQ29udHJvbGxlciIsY29tcGlsZTpmdW5jdGlvbigpe3JldHVybntwb3N0OmZ1bmN0aW9uKGwscyxlLHQpe3ZhciBkPXQuZ3JpZDt0LnNjcm9sbGJhcnM9W10sZC5lbGVtZW50PXM7dmFyIHIsaSxuPTEwMCxvPTIwLGE9MDtmdW5jdGlvbiB1KCl7ZC5ncmlkV2lkdGg9bC5ncmlkV2lkdGg9cC5lbGVtZW50V2lkdGgocyksZC5jYW52YXNXaWR0aD10LmdyaWQuZ3JpZFdpZHRoLGQuZ3JpZEhlaWdodD1sLmdyaWRIZWlnaHQ9cC5lbGVtZW50SGVpZ2h0KHMpLGQuZ3JpZEhlaWdodC1kLnNjcm9sbGJhckhlaWdodDw9ZC5vcHRpb25zLnJvd0hlaWdodCYmZC5vcHRpb25zLmVuYWJsZU1pbkhlaWdodENoZWNrJiZmdW5jdGlvbigpe3ZhciBlPWQub3B0aW9ucy5taW5Sb3dzVG9TaG93KmQub3B0aW9ucy5yb3dIZWlnaHQsdD1kLm9wdGlvbnMuc2hvd0hlYWRlcj9kLm9wdGlvbnMuaGVhZGVyUm93SGVpZ2h0OjAscj1kLmNhbGNGb290ZXJIZWlnaHQoKSxpPTA7ZC5vcHRpb25zLmVuYWJsZUhvcml6b250YWxTY3JvbGxiYXI9PT1mLnNjcm9sbGJhcnMuQUxXQVlTJiYoaT1wLmdldFNjcm9sbGJhcldpZHRoKCkpO3ZhciBuPTA7aWYoYW5ndWxhci5mb3JFYWNoKGQub3B0aW9ucy5jb2x1bW5EZWZzLGZ1bmN0aW9uKGUpe2UuaGFzT3duUHJvcGVydHkoImZpbHRlciIpP248MSYmKG49MSk6ZS5oYXNPd25Qcm9wZXJ0eSgiZmlsdGVycyIpJiZuPGUuZmlsdGVycy5sZW5ndGgmJihuPWUuZmlsdGVycy5sZW5ndGgpfSksZC5vcHRpb25zLmVuYWJsZUZpbHRlcmluZyYmIW4pe3ZhciBvPWQub3B0aW9ucy5jb2x1bW5EZWZzLmxlbmd0aCYmZC5vcHRpb25zLmNvbHVtbkRlZnMuZXZlcnkoZnVuY3Rpb24oZSl7cmV0dXJuITE9PT1lLmVuYWJsZUZpbHRlcmluZ30pO298fChuPTEpfXZhciBhPXQrZStyK2krbip0O3MuY3NzKCJoZWlnaHQiLGErInB4IiksZC5ncmlkSGVpZ2h0PWwuZ3JpZEhlaWdodD1wLmVsZW1lbnRIZWlnaHQocyl9KCksZC5yZWZyZXNoQ2FudmFzKCEwKX1mdW5jdGlvbiBjKCl7ZC5ncmlkV2lkdGg9bC5ncmlkV2lkdGg9cC5lbGVtZW50V2lkdGgocyksZC5ncmlkSGVpZ2h0PWwuZ3JpZEhlaWdodD1wLmVsZW1lbnRIZWlnaHQocyksZC5yZWZyZXNoQ2FudmFzKCEwKX1hbmd1bGFyLmVsZW1lbnQoZykub24oInJlc2l6ZSIsYykscy5vbigiJGRlc3Ryb3kiLGZ1bmN0aW9uKCl7YW5ndWxhci5lbGVtZW50KGcpLm9mZigicmVzaXplIixjKSxyKCksaSgpfSkscj1sLiR3YXRjaChmdW5jdGlvbigpe3JldHVybiBkLmhhc0xlZnRDb250YWluZXIoKX0sZnVuY3Rpb24oZSx0KXtlIT09dCYmZC5yZWZyZXNoQ2FudmFzKCEwKX0pLGk9bC4kd2F0Y2goZnVuY3Rpb24oKXtyZXR1cm4gZC5oYXNSaWdodENvbnRhaW5lcigpfSxmdW5jdGlvbihlLHQpe2UhPT10JiZkLnJlZnJlc2hDYW52YXMoITApfSksdSgpLGQucmVuZGVyaW5nQ29tcGxldGUoKSxmdW5jdGlvbiBlKCl7c1swXS5vZmZzZXRXaWR0aDw9MCYmYTxvPyhzZXRUaW1lb3V0KGUsbiksYSsrKTpsLiRhcHBseUFzeW5jKHUpfSgpfX19fX1hbmd1bGFyLm1vZHVsZSgidWkuZ3JpZCIpLmNvbnRyb2xsZXIoInVpR3JpZENvbnRyb2xsZXIiLFsiJHNjb3BlIiwiJGVsZW1lbnQiLCIkYXR0cnMiLCJncmlkVXRpbCIsIiRxIiwidWlHcmlkQ29uc3RhbnRzIiwiZ3JpZENsYXNzRmFjdG9yeSIsIiRwYXJzZSIsIiRjb21waWxlIixmdW5jdGlvbihpLGUsbix0LG8sYSxyLGwscyl7dmFyIGQsdT10aGlzLGM9W107ZnVuY3Rpb24gZyhlKXtyZXR1cm4gZT9lLmxlbmd0aDowfWZ1bmN0aW9uIHAoZSx0KXtlJiZlIT09dCYmKHUuZ3JpZC5vcHRpb25zLmNvbHVtbkRlZnM9aS51aUdyaWQuY29sdW1uRGVmcyx1LmdyaWQuY2FsbERhdGFDaGFuZ2VDYWxsYmFja3MoYS5kYXRhQ2hhbmdlLkNPTFVNTix7b3JkZXJCeUNvbHVtbkRlZnM6ITAscHJlQ29tcGlsZUNlbGxUZW1wbGF0ZXM6ITB9KSl9ZnVuY3Rpb24gZihlKXt2YXIgdD1bXTtpZih1LmdyaWQub3B0aW9ucy5mYXN0V2F0Y2gmJihlPWFuZ3VsYXIuaXNTdHJpbmcoaS51aUdyaWQuZGF0YSk/dS5ncmlkLmFwcFNjb3BlLiRldmFsKGkudWlHcmlkLmRhdGEpOmkudWlHcmlkLmRhdGEpLGQ9ZSl7dmFyIHI9dS5ncmlkLmNvbHVtbnMubGVuZ3RoPih1LmdyaWQucm93SGVhZGVyQ29sdW1ucz91LmdyaWQucm93SGVhZGVyQ29sdW1ucy5sZW5ndGg6MCk7IXImJiFuLnVpR3JpZENvbHVtbnMmJjA9PT11LmdyaWQub3B0aW9ucy5jb2x1bW5EZWZzLmxlbmd0aCYmMDxlLmxlbmd0aCYmdS5ncmlkLmJ1aWxkQ29sdW1uRGVmc0Zyb21EYXRhKGUpLCFyJiYoMDx1LmdyaWQub3B0aW9ucy5jb2x1bW5EZWZzLmxlbmd0aHx8MDxlLmxlbmd0aCkmJnQucHVzaCh1LmdyaWQuYnVpbGRDb2x1bW5zKCkudGhlbihmdW5jdGlvbigpe3UuZ3JpZC5wcmVDb21waWxlQ2VsbFRlbXBsYXRlcygpfSkuY2F0Y2goYW5ndWxhci5ub29wKSksby5hbGwodCkudGhlbihmdW5jdGlvbigpe3UuZ3JpZC5tb2RpZnlSb3dzKGQpLnRoZW4oZnVuY3Rpb24oKXt1LmdyaWQucmVkcmF3SW5QbGFjZSghMCksaS4kZXZhbEFzeW5jKGZ1bmN0aW9uKCl7dS5ncmlkLnJlZnJlc2hDYW52YXMoITApLHUuZ3JpZC5jYWxsRGF0YUNoYW5nZUNhbGxiYWNrcyhhLmRhdGFDaGFuZ2UuUk9XKX0pfSkuY2F0Y2goYW5ndWxhci5ub29wKX0pLmNhdGNoKGFuZ3VsYXIubm9vcCl9fXUuZ3JpZD1yLmNyZWF0ZUdyaWQoaS51aUdyaWQpLHUuZ3JpZC5hcHBTY29wZT11LmdyaWQuYXBwU2NvcGV8fGkuJHBhcmVudCxlLmFkZENsYXNzKCJncmlkIit1LmdyaWQuaWQpLHUuZ3JpZC5ydGw9InJ0bCI9PT10LmdldFN0eWxlcyhlWzBdKS5kaXJlY3Rpb24saS5ncmlkPXUuZ3JpZCxuLnVpR3JpZENvbHVtbnMmJmMucHVzaChuLiRvYnNlcnZlKCJ1aUdyaWRDb2x1bW5zIixmdW5jdGlvbihlKXt1LmdyaWQub3B0aW9ucy5jb2x1bW5EZWZzPWFuZ3VsYXIuaXNTdHJpbmcoZSk/YW5ndWxhci5mcm9tSnNvbihlKTplLHUuZ3JpZC5idWlsZENvbHVtbnMoKS50aGVuKGZ1bmN0aW9uKCl7dS5ncmlkLnByZUNvbXBpbGVDZWxsVGVtcGxhdGVzKCksdS5ncmlkLnJlZnJlc2hDYW52YXMoITApfSkuY2F0Y2goYW5ndWxhci5ub29wKX0pKSx1LmdyaWQub3B0aW9ucy5mYXN0V2F0Y2g/KHUudWlHcmlkPWkudWlHcmlkLGFuZ3VsYXIuaXNTdHJpbmcoaS51aUdyaWQuZGF0YSk/KGMucHVzaChpLiRwYXJlbnQuJHdhdGNoKGkudWlHcmlkLmRhdGEsZikpLGMucHVzaChpLiRwYXJlbnQuJHdhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIHUuZ3JpZC5hcHBTY29wZVtpLnVpR3JpZC5kYXRhXT91LmdyaWQuYXBwU2NvcGVbaS51aUdyaWQuZGF0YV0ubGVuZ3RoOnZvaWQgMH0sZikpKTooYy5wdXNoKGkuJHBhcmVudC4kd2F0Y2goZnVuY3Rpb24oKXtyZXR1cm4gaS51aUdyaWQuZGF0YX0sZikpLGMucHVzaChpLiRwYXJlbnQuJHdhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIGcoaS51aUdyaWQuZGF0YSl9LGZ1bmN0aW9uKCl7ZihpLnVpR3JpZC5kYXRhKX0pKSksYy5wdXNoKGkuJHBhcmVudC4kd2F0Y2goZnVuY3Rpb24oKXtyZXR1cm4gaS51aUdyaWQuY29sdW1uRGVmc30scCkpLGMucHVzaChpLiRwYXJlbnQuJHdhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIGcoaS51aUdyaWQuY29sdW1uRGVmcyl9LGZ1bmN0aW9uKCl7cChpLnVpR3JpZC5jb2x1bW5EZWZzKX0pKSk6KGFuZ3VsYXIuaXNTdHJpbmcoaS51aUdyaWQuZGF0YSk/Yy5wdXNoKGkuJHBhcmVudC4kd2F0Y2hDb2xsZWN0aW9uKGkudWlHcmlkLmRhdGEsZikpOmMucHVzaChpLiRwYXJlbnQuJHdhdGNoQ29sbGVjdGlvbihmdW5jdGlvbigpe3JldHVybiBpLnVpR3JpZC5kYXRhfSxmKSksYy5wdXNoKGkuJHBhcmVudC4kd2F0Y2hDb2xsZWN0aW9uKGZ1bmN0aW9uKCl7cmV0dXJuIGkudWlHcmlkLmNvbHVtbkRlZnN9LHApKSk7dmFyIG09aS4kd2F0Y2goZnVuY3Rpb24oKXtyZXR1cm4gdS5ncmlkLnN0eWxlQ29tcHV0YXRpb25zfSxmdW5jdGlvbigpe3UuZ3JpZC5yZWZyZXNoQ2FudmFzKCEwKX0pO2kuJG9uKCIkZGVzdHJveSIsZnVuY3Rpb24oKXtjLmZvckVhY2goZnVuY3Rpb24oZSl7ZSgpfSksbSgpfSksdS5maXJlRXZlbnQ9ZnVuY3Rpb24oZSx0KXt0PXR8fHt9LGFuZ3VsYXIuaXNVbmRlZmluZWQodC5ncmlkKSYmKHQuZ3JpZD11LmdyaWQpLGkuJGJyb2FkY2FzdChlLHQpfSx1LmlubmVyQ29tcGlsZT1mdW5jdGlvbihlKXtzKGUpKGkpfX1dKSxhbmd1bGFyLm1vZHVsZSgidWkuZ3JpZCIpLmRpcmVjdGl2ZSgidWlHcmlkIixlKSxlLiRpbmplY3Q9WyIkd2luZG93IiwiZ3JpZFV0aWwiLCJ1aUdyaWRDb25zdGFudHMiXX0oKSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0Ijthbmd1bGFyLm1vZHVsZSgidWkuZ3JpZCIpLmRpcmVjdGl2ZSgidWlHcmlkUGlubmVkQ29udGFpbmVyIixbImdyaWRVdGlsIixmdW5jdGlvbihlKXtyZXR1cm57cmVzdHJpY3Q6IkVBIixyZXBsYWNlOiEwLHRlbXBsYXRlOic8ZGl2IGNsYXNzPSJ1aS1ncmlkLXBpbm5lZC1jb250YWluZXIiPjxkaXYgdWktZ3JpZC1yZW5kZXItY29udGFpbmVyIGNvbnRhaW5lci1pZD0ic2lkZSIgcm93LWNvbnRhaW5lci1uYW1lPSJcJ2JvZHlcJyIgY29sLWNvbnRhaW5lci1uYW1lPSJzaWRlIiBiaW5kLXNjcm9sbC12ZXJ0aWNhbD0idHJ1ZSIgY2xhc3M9Int7IHNpZGUgfX0gdWktZ3JpZC1yZW5kZXItY29udGFpbmVyLXt7IHNpZGUgfX0iPjwvZGl2PjwvZGl2Picsc2NvcGU6e3NpZGU6Ij11aUdyaWRQaW5uZWRDb250YWluZXIifSxyZXF1aXJlOiJedWlHcmlkIixjb21waWxlOmZ1bmN0aW9uKCl7cmV0dXJue3Bvc3Q6ZnVuY3Rpb24obix0LGUscil7dmFyIG89ci5ncmlkLGk9MDtmdW5jdGlvbiBhKCl7aWYoImxlZnQiPT09bi5zaWRlfHwicmlnaHQiPT09bi5zaWRlKXtmb3IodmFyIGU9by5yZW5kZXJDb250YWluZXJzW24uc2lkZV0udmlzaWJsZUNvbHVtbkNhY2hlLHQ9MCxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBpPWVbcl07dCs9aS5kcmF3bldpZHRofHxpLndpZHRofHwwfXJldHVybiB0fX10LmFkZENsYXNzKCJ1aS1ncmlkLXBpbm5lZC1jb250YWluZXItIituLnNpZGUpLCJsZWZ0IiE9PW4uc2lkZSYmInJpZ2h0IiE9PW4uc2lkZXx8KG8ucmVuZGVyQ29udGFpbmVyc1tuLnNpZGVdLmdldFZpZXdwb3J0V2lkdGg9ZnVuY3Rpb24oKXt2YXIgdD0wO3RoaXMudmlzaWJsZUNvbHVtbkNhY2hlLmZvckVhY2goZnVuY3Rpb24oZSl7dCs9ZS5kcmF3bldpZHRofSk7dmFyIGU9dGhpcy5nZXRWaWV3cG9ydEFkanVzdG1lbnQoKTtyZXR1cm4gdCs9ZS53aWR0aH0pLG8ucmVuZGVyQ29udGFpbmVycy5ib2R5LnJlZ2lzdGVyVmlld3BvcnRBZGp1c3RlcihmdW5jdGlvbihlKXtyZXR1cm4gaT1hKCksZS53aWR0aC09aSxlLnNpZGU9bi5zaWRlLGV9KSxvLnJlZ2lzdGVyU3R5bGVDb21wdXRhdGlvbih7cHJpb3JpdHk6MTUsZnVuYzpmdW5jdGlvbigpe3ZhciBlPSIiO3JldHVybiJsZWZ0IiE9PW4uc2lkZSYmInJpZ2h0IiE9PW4uc2lkZXx8KGk9YSgpLHQuYXR0cigic3R5bGUiLG51bGwpLGUrPSIuZ3JpZCIrby5pZCsiIC51aS1ncmlkLXBpbm5lZC1jb250YWluZXItIituLnNpZGUrIiwgLmdyaWQiK28uaWQrIiAudWktZ3JpZC1waW5uZWQtY29udGFpbmVyLSIrbi5zaWRlKyIgLnVpLWdyaWQtcmVuZGVyLWNvbnRhaW5lci0iK24uc2lkZSsiIC51aS1ncmlkLXZpZXdwb3J0IHsgd2lkdGg6ICIraSsicHg7IH0gIiksZX19KX19fX19XSl9KCksYW5ndWxhci5tb2R1bGUoInVpLmdyaWQiKS5mYWN0b3J5KCJHcmlkIixbIiRxIiwiJGNvbXBpbGUiLCIkcGFyc2UiLCJncmlkVXRpbCIsInVpR3JpZENvbnN0YW50cyIsIkdyaWRPcHRpb25zIiwiR3JpZENvbHVtbiIsIkdyaWRSb3ciLCJHcmlkQXBpIiwicm93U29ydGVyIiwicm93U2VhcmNoZXIiLCJHcmlkUmVuZGVyQ29udGFpbmVyIiwiJHRpbWVvdXQiLCJTY3JvbGxFdmVudCIsZnVuY3Rpb24oUyxyLG8sbSxzLGQsdSxjLGcscCx0LGYsaSx4KXt2YXIgZT1mdW5jdGlvbihlKXt2YXIgcj10aGlzO2lmKHZvaWQgMD09PWV8fHZvaWQgMD09PWUuaWR8fCFlLmlkKXRocm93IG5ldyBFcnJvcigiTm8gSUQgcHJvdmlkZWQuIEFuIElEIG11c3QgYmUgZ2l2ZW4gd2hlbiBjcmVhdGluZyBhIGdyaWQuIik7aWYoIS9eW19hLXpBLVowLTktXSskLy50ZXN0KGUuaWQpKXRocm93IG5ldyBFcnJvcigiR3JpZCBpZCAnIitlLmlkKyciIGlzIGludmFsaWQuIEl0IG11c3QgZm9sbG93IENTUyBzZWxlY3RvciBzeW50YXggcnVsZXMuJyk7ZnVuY3Rpb24gdChlKXtyLmlzU2Nyb2xsaW5nVmVydGljYWxseT0hMSxyLmFwaS5jb3JlLnJhaXNlLnNjcm9sbEVuZChlKSxyLnNjcm9sbERpcmVjdGlvbj1zLnNjcm9sbERpcmVjdGlvbi5OT05FfXIuaWQ9ZS5pZCxkZWxldGUgZS5pZCxyLm9wdGlvbnM9ZC5pbml0aWFsaXplKGUpLHIuYXBwU2NvcGU9ci5vcHRpb25zLmFwcFNjb3BlUHJvdmlkZXIsci5oZWFkZXJIZWlnaHQ9ci5vcHRpb25zLmhlYWRlclJvd0hlaWdodCxyLmZvb3RlckhlaWdodD1yLmNhbGNGb290ZXJIZWlnaHQoKSxyLmNvbHVtbkZvb3RlckhlaWdodD1yLmNhbGNDb2x1bW5Gb290ZXJIZWlnaHQoKSxyLnJ0bD0hMSxyLmdyaWRIZWlnaHQ9MCxyLmdyaWRXaWR0aD0wLHIuY29sdW1uQnVpbGRlcnM9W10sci5yb3dCdWlsZGVycz1bXSxyLnJvd3NQcm9jZXNzb3JzPVtdLHIuY29sdW1uc1Byb2Nlc3NvcnM9W10sci5zdHlsZUNvbXB1dGF0aW9ucz1bXSxyLnZpZXdwb3J0QWRqdXN0ZXJzPVtdLHIucm93SGVhZGVyQ29sdW1ucz1bXSxyLmRhdGFDaGFuZ2VDYWxsYmFja3M9e30sci52ZXJ0aWNhbFNjcm9sbFN5bmNDYWxsQmFja0Zucz17fSxyLmhvcml6b250YWxTY3JvbGxTeW5jQ2FsbEJhY2tGbnM9e30sci5yZW5kZXJDb250YWluZXJzPXt9LHIucmVuZGVyQ29udGFpbmVycy5ib2R5PW5ldyBmKCJib2R5IixyKSxyLmNlbGxWYWx1ZUdldHRlckNhY2hlPXt9LHIuZ2V0Um93VGVtcGxhdGVGbj1udWxsLHIucm93cz1bXSxyLmNvbHVtbnM9W10sci5pc1Njcm9sbGluZ1ZlcnRpY2FsbHk9ITEsci5pc1Njcm9sbGluZ0hvcml6b250YWxseT0hMSxyLnNjcm9sbERpcmVjdGlvbj1zLnNjcm9sbERpcmVjdGlvbi5OT05FLHIuZGlzYWJsZVNjcm9sbGluZz0hMTt2YXIgaT1tLmRlYm91bmNlKHQsci5vcHRpb25zLnNjcm9sbERlYm91bmNlKSxuPW0uZGVib3VuY2UodCwwKTtmdW5jdGlvbiBvKGUpe3IuaXNTY3JvbGxpbmdIb3Jpem9udGFsbHk9ITEsci5hcGkuY29yZS5yYWlzZS5zY3JvbGxFbmQoZSksci5zY3JvbGxEaXJlY3Rpb249cy5zY3JvbGxEaXJlY3Rpb24uTk9ORX12YXIgYT1tLmRlYm91bmNlKG8sci5vcHRpb25zLnNjcm9sbERlYm91bmNlKSxsPW0uZGVib3VuY2UobywwKTtyLmZsYWdTY3JvbGxpbmdWZXJ0aWNhbGx5PWZ1bmN0aW9uKGUpe3IuaXNTY3JvbGxpbmdWZXJ0aWNhbGx5fHxyLmlzU2Nyb2xsaW5nSG9yaXpvbnRhbGx5fHxyLmFwaS5jb3JlLnJhaXNlLnNjcm9sbEJlZ2luKGUpLHIuaXNTY3JvbGxpbmdWZXJ0aWNhbGx5PSEwLDAhPT1yLm9wdGlvbnMuc2Nyb2xsRGVib3VuY2UmJmUud2l0aERlbGF5P2koZSk6bihlKX0sci5mbGFnU2Nyb2xsaW5nSG9yaXpvbnRhbGx5PWZ1bmN0aW9uKGUpe3IuaXNTY3JvbGxpbmdWZXJ0aWNhbGx5fHxyLmlzU2Nyb2xsaW5nSG9yaXpvbnRhbGx5fHxyLmFwaS5jb3JlLnJhaXNlLnNjcm9sbEJlZ2luKGUpLHIuaXNTY3JvbGxpbmdIb3Jpem9udGFsbHk9ITAsMCE9PXIub3B0aW9ucy5zY3JvbGxEZWJvdW5jZSYmZS53aXRoRGVsYXk/YShlKTpsKGUpfSxyLnNjcm9sbGJhckhlaWdodD0wLHIuc2Nyb2xsYmFyV2lkdGg9MCxyLm9wdGlvbnMuZW5hYmxlSG9yaXpvbnRhbFNjcm9sbGJhciE9PXMuc2Nyb2xsYmFycy5ORVZFUiYmKHIuc2Nyb2xsYmFySGVpZ2h0PW0uZ2V0U2Nyb2xsYmFyV2lkdGgoKSksci5vcHRpb25zLmVuYWJsZVZlcnRpY2FsU2Nyb2xsYmFyIT09cy5zY3JvbGxiYXJzLk5FVkVSJiYoci5zY3JvbGxiYXJXaWR0aD1tLmdldFNjcm9sbGJhcldpZHRoKCkpLHIuYXBpPW5ldyBnKHIpLHIuYXBpLnJlZ2lzdGVyTWV0aG9kKCJjb3JlIiwicmVmcmVzaCIsdGhpcy5yZWZyZXNoKSxyLmFwaS5yZWdpc3Rlck1ldGhvZCgiY29yZSIsInF1ZXVlR3JpZFJlZnJlc2giLHRoaXMucXVldWVHcmlkUmVmcmVzaCksci5hcGkucmVnaXN0ZXJNZXRob2QoImNvcmUiLCJyZWZyZXNoUm93cyIsdGhpcy5yZWZyZXNoUm93cyksci5hcGkucmVnaXN0ZXJNZXRob2QoImNvcmUiLCJxdWV1ZVJlZnJlc2giLHRoaXMucXVldWVSZWZyZXNoKSxyLmFwaS5yZWdpc3Rlck1ldGhvZCgiY29yZSIsImhhbmRsZVdpbmRvd1Jlc2l6ZSIsdGhpcy5oYW5kbGVXaW5kb3dSZXNpemUpLHIuYXBpLnJlZ2lzdGVyTWV0aG9kKCJjb3JlIiwiYWRkUm93SGVhZGVyQ29sdW1uIix0aGlzLmFkZFJvd0hlYWRlckNvbHVtbiksci5hcGkucmVnaXN0ZXJNZXRob2QoImNvcmUiLCJzY3JvbGxUb0lmTmVjZXNzYXJ5IixmdW5jdGlvbihlLHQpe3JldHVybiByLnNjcm9sbFRvSWZOZWNlc3NhcnkoZSx0KX0pLHIuYXBpLnJlZ2lzdGVyTWV0aG9kKCJjb3JlIiwic2Nyb2xsVG8iLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHIuc2Nyb2xsVG8oZSx0KX0pLHIuYXBpLnJlZ2lzdGVyTWV0aG9kKCJjb3JlIiwicmVnaXN0ZXJSb3dzUHJvY2Vzc29yIix0aGlzLnJlZ2lzdGVyUm93c1Byb2Nlc3Nvciksci5hcGkucmVnaXN0ZXJNZXRob2QoImNvcmUiLCJyZWdpc3RlckNvbHVtbnNQcm9jZXNzb3IiLHRoaXMucmVnaXN0ZXJDb2x1bW5zUHJvY2Vzc29yKSxyLmFwaS5yZWdpc3Rlck1ldGhvZCgiY29yZSIsInNvcnRIYW5kbGVOdWxscyIscC5oYW5kbGVOdWxscyksci5hcGkucmVnaXN0ZXJFdmVudCgiY29yZSIsInNvcnRDaGFuZ2VkIiksci5hcGkucmVnaXN0ZXJFdmVudCgiY29yZSIsImNvbHVtblZpc2liaWxpdHlDaGFuZ2VkIiksci5hcGkucmVnaXN0ZXJNZXRob2QoImNvcmUiLCJub3RpZnlEYXRhQ2hhbmdlIix0aGlzLm5vdGlmeURhdGFDaGFuZ2UpLHIuYXBpLnJlZ2lzdGVyTWV0aG9kKCJjb3JlIiwiY2xlYXJBbGxGaWx0ZXJzIix0aGlzLmNsZWFyQWxsRmlsdGVycyksci5yZWdpc3RlckRhdGFDaGFuZ2VDYWxsYmFjayhyLmNvbHVtblJlZnJlc2hDYWxsYmFjayxbcy5kYXRhQ2hhbmdlLkNPTFVNTl0pLHIucmVnaXN0ZXJEYXRhQ2hhbmdlQ2FsbGJhY2soci5wcm9jZXNzUm93c0NhbGxiYWNrLFtzLmRhdGFDaGFuZ2UuRURJVF0pLHIucmVnaXN0ZXJEYXRhQ2hhbmdlQ2FsbGJhY2soci51cGRhdGVGb290ZXJIZWlnaHRDYWxsYmFjayxbcy5kYXRhQ2hhbmdlLk9QVElPTlNdKSxyLnJlZ2lzdGVyU3R5bGVDb21wdXRhdGlvbih7cHJpb3JpdHk6MTAsZnVuYzpyLmdldEZvb3RlclN0eWxlc30pfTtlLnByb3RvdHlwZS5jYWxjRm9vdGVySGVpZ2h0PWZ1bmN0aW9uKCl7aWYoIXRoaXMuaGFzRm9vdGVyKCkpcmV0dXJuIDA7dmFyIGU9MDtyZXR1cm4gdGhpcy5vcHRpb25zLnNob3dHcmlkRm9vdGVyJiYoZSs9dGhpcy5vcHRpb25zLmdyaWRGb290ZXJIZWlnaHQpLGUrPXRoaXMuY2FsY0NvbHVtbkZvb3RlckhlaWdodCgpfSxlLnByb3RvdHlwZS5jYWxjQ29sdW1uRm9vdGVySGVpZ2h0PWZ1bmN0aW9uKCl7dmFyIGU9MDtyZXR1cm4gdGhpcy5vcHRpb25zLnNob3dDb2x1bW5Gb290ZXImJihlKz10aGlzLm9wdGlvbnMuY29sdW1uRm9vdGVySGVpZ2h0KSxlfSxlLnByb3RvdHlwZS5nZXRGb290ZXJTdHlsZXM9ZnVuY3Rpb24oKXt2YXIgZT0iLmdyaWQiK3RoaXMuaWQrIiAudWktZ3JpZC1mb290ZXItYWdncmVnYXRlcy1yb3cgeyBoZWlnaHQ6ICIrdGhpcy5vcHRpb25zLmNvbHVtbkZvb3RlckhlaWdodCsicHg7IH0iO3JldHVybiBlKz0iIC5ncmlkIit0aGlzLmlkKyIgLnVpLWdyaWQtZm9vdGVyLWluZm8geyBoZWlnaHQ6ICIrdGhpcy5vcHRpb25zLmdyaWRGb290ZXJIZWlnaHQrInB4OyB9In0sZS5wcm90b3R5cGUuaGFzRm9vdGVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9ucy5zaG93R3JpZEZvb3Rlcnx8dGhpcy5vcHRpb25zLnNob3dDb2x1bW5Gb290ZXJ9LGUucHJvdG90eXBlLmlzUlRMPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucnRsfSxlLnByb3RvdHlwZS5yZWdpc3RlckNvbHVtbkJ1aWxkZXI9ZnVuY3Rpb24oZSl7dGhpcy5jb2x1bW5CdWlsZGVycy5wdXNoKGUpfSxlLnByb3RvdHlwZS5idWlsZENvbHVtbkRlZnNGcm9tRGF0YT1mdW5jdGlvbihlKXt0aGlzLm9wdGlvbnMuY29sdW1uRGVmcz1tLmdldENvbHVtbnNGcm9tRGF0YShlLHRoaXMub3B0aW9ucy5leGNsdWRlUHJvcGVydGllcyl9LGUucHJvdG90eXBlLnJlZ2lzdGVyUm93QnVpbGRlcj1mdW5jdGlvbihlKXt0aGlzLnJvd0J1aWxkZXJzLnB1c2goZSl9LGUucHJvdG90eXBlLnJlZ2lzdGVyRGF0YUNoYW5nZUNhbGxiYWNrPWZ1bmN0aW9uKGUsdCxyKXt2YXIgaT1tLm5leHRVaWQoKTt0fHwodD1bcy5kYXRhQ2hhbmdlLkFMTF0pLEFycmF5LmlzQXJyYXkodCl8fG0ubG9nRXJyb3IoIkV4cGVjdGVkIHR5cGVzIHRvIGJlIGFuIGFycmF5IG9yIG51bGwgaW4gcmVnaXN0ZXJEYXRhQ2hhbmdlQ2FsbGJhY2ssIHZhbHVlIHBhc3NlZCB3YXM6ICIrdCksdGhpcy5kYXRhQ2hhbmdlQ2FsbGJhY2tzW2ldPXtjYWxsYmFjazplLHR5cGVzOnQsX3RoaXM6cn07dmFyIG49dGhpcztyZXR1cm4gZnVuY3Rpb24oKXtkZWxldGUgbi5kYXRhQ2hhbmdlQ2FsbGJhY2tzW2ldfX0sZS5wcm90b3R5cGUuY2FsbERhdGFDaGFuZ2VDYWxsYmFja3M9ZnVuY3Rpb24ocixpKXthbmd1bGFyLmZvckVhY2godGhpcy5kYXRhQ2hhbmdlQ2FsbGJhY2tzLGZ1bmN0aW9uKGUsdCl7LTE9PT1lLnR5cGVzLmluZGV4T2Yocy5kYXRhQ2hhbmdlLkFMTCkmJi0xPT09ZS50eXBlcy5pbmRleE9mKHIpJiZyIT09cy5kYXRhQ2hhbmdlLkFMTHx8KGUuX3RoaXM/ZS5jYWxsYmFjay5hcHBseShlLl90aGlzLHRoaXMsaSk6ZS5jYWxsYmFjayh0aGlzLGkpKX0sdGhpcyl9LGUucHJvdG90eXBlLm5vdGlmeURhdGFDaGFuZ2U9ZnVuY3Rpb24oZSl7dmFyIHQ9cy5kYXRhQ2hhbmdlO2U9PT10LkFMTHx8ZT09PXQuQ09MVU1OfHxlPT09dC5FRElUfHxlPT09dC5ST1d8fGU9PT10Lk9QVElPTlM/dGhpcy5jYWxsRGF0YUNoYW5nZUNhbGxiYWNrcyhlKTptLmxvZ0Vycm9yKCJOb3RpZmllZCBvZiBhIGRhdGEgY2hhbmdlLCBidXQgdGhlIHR5cGUgd2FzIG5vdCByZWNvZ25pc2VkLCBzbyBubyBhY3Rpb24gdGFrZW4sIHR5cGUgd2FzOiAiK2UpfSxlLnByb3RvdHlwZS5jb2x1bW5SZWZyZXNoQ2FsbGJhY2s9ZnVuY3Rpb24oZSx0KXtlLmJ1aWxkQ29sdW1ucyh0KSxlLnF1ZXVlR3JpZFJlZnJlc2goKX0sZS5wcm90b3R5cGUucHJvY2Vzc1Jvd3NDYWxsYmFjaz1mdW5jdGlvbihlKXtlLnF1ZXVlR3JpZFJlZnJlc2goKX0sZS5wcm90b3R5cGUudXBkYXRlRm9vdGVySGVpZ2h0Q2FsbGJhY2s9ZnVuY3Rpb24oZSl7ZS5mb290ZXJIZWlnaHQ9ZS5jYWxjRm9vdGVySGVpZ2h0KCksZS5jb2x1bW5Gb290ZXJIZWlnaHQ9ZS5jYWxjQ29sdW1uRm9vdGVySGVpZ2h0KCl9LGUucHJvdG90eXBlLmdldENvbHVtbj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmNvbHVtbnMuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLmNvbERlZi5uYW1lPT09dH0pO3JldHVybiAwPGUubGVuZ3RoP2VbMF06bnVsbH0sZS5wcm90b3R5cGUuZ2V0Q29sRGVmPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMub3B0aW9ucy5jb2x1bW5EZWZzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS5uYW1lPT09dH0pO3JldHVybiAwPGUubGVuZ3RoP2VbMF06bnVsbH0sZS5wcm90b3R5cGUuYXNzaWduVHlwZXM9ZnVuY3Rpb24oKXt2YXIgbj10aGlzO24ub3B0aW9ucy5jb2x1bW5EZWZzLmZvckVhY2goZnVuY3Rpb24oZSx0KXtpZighZS50eXBlKXt2YXIgcj1uZXcgdShlLHQsbiksaT0wPG4ucm93cy5sZW5ndGg/bi5yb3dzWzBdOm51bGw7ZS50eXBlPWk/bS5ndWVzc1R5cGUobi5nZXRDZWxsVmFsdWUoaSxyKSk6InN0cmluZyJ9fSl9LGUucHJvdG90eXBlLmlzUm93SGVhZGVyQ29sdW1uPWZ1bmN0aW9uKGUpe3JldHVybi0xIT09dGhpcy5yb3dIZWFkZXJDb2x1bW5zLmluZGV4T2YoZSl9LGUucHJvdG90eXBlLmFkZFJvd0hlYWRlckNvbHVtbj1mdW5jdGlvbihlLHQscil7dmFyIGk9dGhpczt2b2lkIDA9PT10JiYodD0wKTt2YXIgbj1uZXcgdShlLG0ubmV4dFVpZCgpLGkpO24uaXNSb3dIZWFkZXI9ITAsaS5pc1JUTCgpPyhpLmNyZWF0ZVJpZ2h0Q29udGFpbmVyKCksbi5yZW5kZXJDb250YWluZXI9InJpZ2h0Iik6KGkuY3JlYXRlTGVmdENvbnRhaW5lcigpLG4ucmVuZGVyQ29udGFpbmVyPSJsZWZ0IiksaS5jb2x1bW5CdWlsZGVyc1swXShlLG4saS5vcHRpb25zKS50aGVuKGZ1bmN0aW9uKCl7bi5lbmFibGVGaWx0ZXJpbmc9ITEsbi5lbmFibGVTb3J0aW5nPSExLG4uZW5hYmxlSGlkaW5nPSExLG4uaGVhZGVyUHJpb3JpdHk9dCxpLnJvd0hlYWRlckNvbHVtbnMucHVzaChuKSxpLnJvd0hlYWRlckNvbHVtbnM9aS5yb3dIZWFkZXJDb2x1bW5zLnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5oZWFkZXJQcmlvcml0eS10LmhlYWRlclByaW9yaXR5fSkscnx8aS5idWlsZENvbHVtbnMoKS50aGVuKGZ1bmN0aW9uKCl7aS5wcmVDb21waWxlQ2VsbFRlbXBsYXRlcygpLGkucXVldWVHcmlkUmVmcmVzaCgpfSkuY2F0Y2goYW5ndWxhci5ub29wKX0pLmNhdGNoKGFuZ3VsYXIubm9vcCl9LGUucHJvdG90eXBlLmdldE9ubHlEYXRhQ29sdW1ucz1mdW5jdGlvbigpe3ZhciB0PXRoaXMscj1bXTtyZXR1cm4gdC5jb2x1bW5zLmZvckVhY2goZnVuY3Rpb24oZSl7LTE9PT10LnJvd0hlYWRlckNvbHVtbnMuaW5kZXhPZihlKSYmci5wdXNoKGUpfSkscn0sZS5wcm90b3R5cGUuYnVpbGRDb2x1bW5zPWZ1bmN0aW9uKGUpe3ZhciB0PXtvcmRlckJ5Q29sdW1uRGVmczohMX07YW5ndWxhci5leHRlbmQodCxlKTt2YXIgcixpPXRoaXMsbj1bXSxvPWkucm93SGVhZGVyQ29sdW1ucy5sZW5ndGg7Zm9yKHI9MDtyPGkuY29sdW1ucy5sZW5ndGg7cisrKWkuZ2V0Q29sRGVmKGkuY29sdW1uc1tyXS5uYW1lKXx8KGkuY29sdW1ucy5zcGxpY2UociwxKSxyLS0pO2Zvcih2YXIgYT1pLnJvd0hlYWRlckNvbHVtbnMubGVuZ3RoLTE7MDw9YTthLS0paS5jb2x1bW5zLnVuc2hpZnQoaS5yb3dIZWFkZXJDb2x1bW5zW2FdKTtpZihpLm9wdGlvbnMuY29sdW1uRGVmcy5mb3JFYWNoKGZ1bmN0aW9uKHQsZSl7aS5wcmVwcm9jZXNzQ29sRGVmKHQpO3ZhciByPWkuZ2V0Q29sdW1uKHQubmFtZSk7cj9yLnVwZGF0ZUNvbHVtbkRlZih0LCExKToocj1uZXcgdSh0LG0ubmV4dFVpZCgpLGkpLGkuY29sdW1ucy5zcGxpY2UoZStvLDAscikpLGkuY29sdW1uQnVpbGRlcnMuZm9yRWFjaChmdW5jdGlvbihlKXtuLnB1c2goZS5jYWxsKGksdCxyLGkub3B0aW9ucykpfSl9KSx0Lm9yZGVyQnlDb2x1bW5EZWZzKXt2YXIgbD1pLmNvbHVtbnMuc2xpY2UoMCkscz1NYXRoLm1pbihpLm9wdGlvbnMuY29sdW1uRGVmcy5sZW5ndGgsaS5jb2x1bW5zLmxlbmd0aCk7Zm9yKHI9MDtyPHM7cisrKWkuY29sdW1uc1tyK29dLm5hbWUhPT1pLm9wdGlvbnMuY29sdW1uRGVmc1tyXS5uYW1lP2xbcitvXT1pLmdldENvbHVtbihpLm9wdGlvbnMuY29sdW1uRGVmc1tyXS5uYW1lKTpsW3Irb109aS5jb2x1bW5zW3Irb107aS5jb2x1bW5zLmxlbmd0aD0wLEFycmF5LnByb3RvdHlwZS5zcGxpY2UuYXBwbHkoaS5jb2x1bW5zLFswLDBdLmNvbmNhdChsKSl9cmV0dXJuIFMuYWxsKG4pLnRoZW4oZnVuY3Rpb24oKXswPGkucm93cy5sZW5ndGgmJmkuYXNzaWduVHlwZXMoKSx0LnByZUNvbXBpbGVDZWxsVGVtcGxhdGVzJiZpLnByZUNvbXBpbGVDZWxsVGVtcGxhdGVzKCl9KS5jYXRjaChhbmd1bGFyLm5vb3ApfSxlLnByb3RvdHlwZS5wcmVDb21waWxlQ2VsbFRlbXBsYXRlPWZ1bmN0aW9uKGUpe3ZhciB0PWUuY2VsbFRlbXBsYXRlLnJlcGxhY2Uocy5NT0RFTF9DT0xfRklFTEQsdGhpcy5nZXRRdWFsaWZpZWRDb2xGaWVsZChlKSk7dD10LnJlcGxhY2Uocy5DT0xfRklFTEQsImdyaWQuZ2V0Q2VsbFZhbHVlKHJvdywgY29sKSIpLGUuY29tcGlsZWRFbGVtZW50Rm49cih0KSxlLmNvbXBpbGVkRWxlbWVudEZuRGVmZXImJmUuY29tcGlsZWRFbGVtZW50Rm5EZWZlci5yZXNvbHZlKGUuY29tcGlsZWRFbGVtZW50Rm4pfSxlLnByb3RvdHlwZS5wcmVDb21waWxlQ2VsbFRlbXBsYXRlcz1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dC5jb2x1bW5zLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5jZWxsVGVtcGxhdGU/dC5wcmVDb21waWxlQ2VsbFRlbXBsYXRlKGUpOmUuY2VsbFRlbXBsYXRlUHJvbWlzZSYmZS5jZWxsVGVtcGxhdGVQcm9taXNlLnRoZW4oZnVuY3Rpb24oKXt0LnByZUNvbXBpbGVDZWxsVGVtcGxhdGUoZSl9KS5jYXRjaChhbmd1bGFyLm5vb3ApfSl9LGUucHJvdG90eXBlLmdldFF1YWxpZmllZENvbEZpZWxkPWZ1bmN0aW9uKGUpe3ZhciB0PSJyb3cuZW50aXR5IjtyZXR1cm4gZS5maWVsZD09PXMuRU5USVRZX0JJTkRJTkc/dDptLnByZUV2YWwodCsiLiIrZS5maWVsZCl9LGUucHJvdG90eXBlLmNyZWF0ZUxlZnRDb250YWluZXI9ZnVuY3Rpb24oKXt0aGlzLmhhc0xlZnRDb250YWluZXIoKXx8KHRoaXMucmVuZGVyQ29udGFpbmVycy5sZWZ0PW5ldyBmKCJsZWZ0Iix0aGlzLHtkaXNhYmxlQ29sdW1uT2Zmc2V0OiEwfSkpfSxlLnByb3RvdHlwZS5jcmVhdGVSaWdodENvbnRhaW5lcj1mdW5jdGlvbigpe3RoaXMuaGFzUmlnaHRDb250YWluZXIoKXx8KHRoaXMucmVuZGVyQ29udGFpbmVycy5yaWdodD1uZXcgZigicmlnaHQiLHRoaXMse2Rpc2FibGVDb2x1bW5PZmZzZXQ6ITB9KSl9LGUucHJvdG90eXBlLmhhc0xlZnRDb250YWluZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwIT09dGhpcy5yZW5kZXJDb250YWluZXJzLmxlZnR9LGUucHJvdG90eXBlLmhhc1JpZ2h0Q29udGFpbmVyPWZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMucmVuZGVyQ29udGFpbmVycy5yaWdodH0sZS5wcm90b3R5cGUucHJlcHJvY2Vzc0NvbERlZj1mdW5jdGlvbihlKXtpZighZS5maWVsZCYmIWUubmFtZSl0aHJvdyBuZXcgRXJyb3IoImNvbERlZi5uYW1lIG9yIGNvbERlZi5maWVsZCBwcm9wZXJ0eSBpcyByZXF1aXJlZCIpO2lmKHZvaWQgMD09PWUubmFtZSYmdm9pZCAwIT09ZS5maWVsZCl7Zm9yKHZhciB0PWUuZmllbGQscj0yO3RoaXMuZ2V0Q29sdW1uKHQpOyl0PWUuZmllbGQrci50b1N0cmluZygpLHIrKztlLm5hbWU9dH19LGUucHJvdG90eXBlLm5ld0luTj1mdW5jdGlvbihlLHQscixpKXtmb3IodmFyIG49W10sbz0wO288dC5sZW5ndGg7bysrKXtmb3IodmFyIGE9aT90W29dW2ldOnRbb10sbD0hMSxzPTA7czxlLmxlbmd0aDtzKyspe3ZhciBkPXI/ZVtzXVtyXTplW3NdO2lmKHRoaXMub3B0aW9ucy5yb3dFcXVhbGl0eShhLGQpKXtsPSEwO2JyZWFrfX1sfHxuLnB1c2goYSl9cmV0dXJuIG59LGUucHJvdG90eXBlLmdldFJvdz1mdW5jdGlvbih0LGUpe3ZhciByPXRoaXMsaT0oZT12b2lkIDA9PT1lP3Iucm93czplKS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIHIub3B0aW9ucy5yb3dFcXVhbGl0eShlLmVudGl0eSx0KX0pO3JldHVybiAwPGkubGVuZ3RoP2lbMF06bnVsbH0sZS5wcm90b3R5cGUubW9kaWZ5Um93cz1mdW5jdGlvbihlKXt2YXIgbj10aGlzLG89bi5yb3dzLnNsaWNlKDApLGE9bi5yb3dIYXNoTWFwfHxuLmNyZWF0ZVJvd0hhc2hNYXAoKSxsPSEwO24ucm93SGFzaE1hcD1uLmNyZWF0ZVJvd0hhc2hNYXAoKSxuLnJvd3MubGVuZ3RoPTAsZS5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7dmFyIHIsaTsoaT1uLm9wdGlvbnMuZW5hYmxlUm93SGFzaGluZz9hLmdldChlKTpuLmdldFJvdyhlLG8pKSYmKChyPWkpLmVudGl0eT1lKSxyfHwocj1uLnByb2Nlc3NSb3dCdWlsZGVycyhuZXcgYyhlLHQsbikpKSxuLnJvd3MucHVzaChyKSxuLnJvd0hhc2hNYXAucHV0KGUsciksci5pc1NlbGVjdGVkfHwobD0hMSl9KSxuLnNlbGVjdGlvbiYmbi5yb3dzLmxlbmd0aCYmKG4uc2VsZWN0aW9uLnNlbGVjdEFsbD1sKSxuLmFzc2lnblR5cGVzKCk7dmFyIHQ9Uy53aGVuKG4ucHJvY2Vzc1Jvd3NQcm9jZXNzb3JzKG4ucm93cykpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIG4uc2V0VmlzaWJsZVJvd3MoZSl9KS5jYXRjaChhbmd1bGFyLm5vb3ApLHI9Uy53aGVuKG4ucHJvY2Vzc0NvbHVtbnNQcm9jZXNzb3JzKG4uY29sdW1ucykpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIG4uc2V0VmlzaWJsZUNvbHVtbnMoZSl9KS5jYXRjaChhbmd1bGFyLm5vb3ApO3JldHVybiBTLmFsbChbdCxyXSl9LGUucHJvdG90eXBlLmFkZFJvd3M9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXRoaXMscj10LnJvd3MubGVuZ3RoLGk9MDtpPGUubGVuZ3RoO2krKyl7dmFyIG49dC5wcm9jZXNzUm93QnVpbGRlcnMobmV3IGMoZVtpXSxpK3IsdCkpO2lmKHQub3B0aW9ucy5lbmFibGVSb3dIYXNoaW5nKXt2YXIgbz10LnJvd0hhc2hNYXAuZ2V0KG4uZW50aXR5KTtvJiYoby5yb3c9bil9dC5yb3dzLnB1c2gobil9fSxlLnByb3RvdHlwZS5wcm9jZXNzUm93QnVpbGRlcnM9ZnVuY3Rpb24odCl7dmFyIHI9dGhpcztyZXR1cm4gci5yb3dCdWlsZGVycy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuY2FsbChyLHQsci5vcHRpb25zKX0pLHR9LGUucHJvdG90eXBlLnJlZ2lzdGVyU3R5bGVDb21wdXRhdGlvbj1mdW5jdGlvbihlKXt0aGlzLnN0eWxlQ29tcHV0YXRpb25zLnB1c2goZSl9LGUucHJvdG90eXBlLnJlZ2lzdGVyUm93c1Byb2Nlc3Nvcj1mdW5jdGlvbihlLHQpe2lmKCFhbmd1bGFyLmlzRnVuY3Rpb24oZSkpdGhyb3ciQXR0ZW1wdCB0byByZWdpc3RlciBub24tZnVuY3Rpb24gcm93cyBwcm9jZXNzb3I6ICIrZTt0aGlzLnJvd3NQcm9jZXNzb3JzLnB1c2goe3Byb2Nlc3NvcjplLHByaW9yaXR5OnR9KSx0aGlzLnJvd3NQcm9jZXNzb3JzLnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5wcmlvcml0eS10LnByaW9yaXR5fSl9LGUucHJvdG90eXBlLnJlbW92ZVJvd3NQcm9jZXNzb3I9ZnVuY3Rpb24ocil7dmFyIGk9LTE7dGhpcy5yb3dzUHJvY2Vzc29ycy5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7ZS5wcm9jZXNzb3I9PT1yJiYoaT10KX0pLC0xIT09aSYmdGhpcy5yb3dzUHJvY2Vzc29ycy5zcGxpY2UoaSwxKX0sZS5wcm90b3R5cGUucHJvY2Vzc1Jvd3NQcm9jZXNzb3JzPWZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsdD1lLnNsaWNlKDApO2lmKDA9PT1uLnJvd3NQcm9jZXNzb3JzLmxlbmd0aClyZXR1cm4gUy53aGVuKHQpO3ZhciBvPVMuZGVmZXIoKTtyZXR1cm4gZnVuY3Rpb24gdChyLGUpe3ZhciBpPW4ucm93c1Byb2Nlc3NvcnNbcl0ucHJvY2Vzc29yO3JldHVybiBTLndoZW4oaS5jYWxsKG4sZSxuLmNvbHVtbnMpKS50aGVuKGZ1bmN0aW9uKGUpe2lmKCFlKXRocm93IlByb2Nlc3NvciBhdCBpbmRleCAiK3IrIiBkaWQgbm90IHJldHVybiBhIHNldCBvZiByZW5kZXJhYmxlIHJvd3MiO2lmKCFhbmd1bGFyLmlzQXJyYXkoZSkpdGhyb3ciUHJvY2Vzc29yIGF0IGluZGV4ICIrcisiIGRpZCBub3QgcmV0dXJuIGFuIGFycmF5IjtpZigrK3I8PW4ucm93c1Byb2Nlc3NvcnMubGVuZ3RoLTEpcmV0dXJuIHQocixlKTtvLnJlc29sdmUoZSl9KS5jYXRjaChmdW5jdGlvbihlKXt0aHJvdyBlfSl9KDAsdCksby5wcm9taXNlfSxlLnByb3RvdHlwZS5zZXRWaXNpYmxlUm93cz1mdW5jdGlvbihlKXt2YXIgdD10aGlzO2Zvcih2YXIgciBpbiB0LnJlbmRlckNvbnRhaW5lcnMpe3ZhciBpPXQucmVuZGVyQ29udGFpbmVyc1tyXTtpLmNhbnZhc0hlaWdodFNob3VsZFVwZGF0ZT0hMCx2b2lkIDA9PT1pLnZpc2libGVSb3dDYWNoZT9pLnZpc2libGVSb3dDYWNoZT1bXTppLnZpc2libGVSb3dDYWNoZS5sZW5ndGg9MH1mb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIG89ZVtuXSxhPXZvaWQgMCE9PW8ucmVuZGVyQ29udGFpbmVyJiZvLnJlbmRlckNvbnRhaW5lcj9vLnJlbmRlckNvbnRhaW5lcjoiYm9keSI7by52aXNpYmxlJiZ0LnJlbmRlckNvbnRhaW5lcnNbYV0udmlzaWJsZVJvd0NhY2hlLnB1c2gobyl9dC5hcGkuY29yZS5yYWlzZS5yb3dzVmlzaWJsZUNoYW5nZWQodGhpcy5hcGkpLHQuYXBpLmNvcmUucmFpc2Uucm93c1JlbmRlcmVkKHRoaXMuYXBpKX0sZS5wcm90b3R5cGUucmVnaXN0ZXJDb2x1bW5zUHJvY2Vzc29yPWZ1bmN0aW9uKGUsdCl7aWYoIWFuZ3VsYXIuaXNGdW5jdGlvbihlKSl0aHJvdyJBdHRlbXB0IHRvIHJlZ2lzdGVyIG5vbi1mdW5jdGlvbiByb3dzIHByb2Nlc3NvcjogIitlO3RoaXMuY29sdW1uc1Byb2Nlc3NvcnMucHVzaCh7cHJvY2Vzc29yOmUscHJpb3JpdHk6dH0pLHRoaXMuY29sdW1uc1Byb2Nlc3NvcnMuc29ydChmdW5jdGlvbihlLHQpe3JldHVybiBlLnByaW9yaXR5LXQucHJpb3JpdHl9KX0sZS5wcm90b3R5cGUucmVtb3ZlQ29sdW1uc1Byb2Nlc3Nvcj1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmNvbHVtbnNQcm9jZXNzb3JzLmluZGV4T2YoZSk7dm9pZCAwIT09dCYmdm9pZCAwIT09dCYmdGhpcy5jb2x1bW5zUHJvY2Vzc29ycy5zcGxpY2UodCwxKX0sZS5wcm90b3R5cGUucHJvY2Vzc0NvbHVtbnNQcm9jZXNzb3JzPWZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsbz1lLnNsaWNlKDApO2lmKDA9PT1uLmNvbHVtbnNQcm9jZXNzb3JzLmxlbmd0aClyZXR1cm4gUy53aGVuKG8pO3ZhciBhPVMuZGVmZXIoKTtyZXR1cm4gZnVuY3Rpb24gdChyLGUpe3ZhciBpPW4uY29sdW1uc1Byb2Nlc3NvcnNbcl0ucHJvY2Vzc29yO3JldHVybiBTLndoZW4oaS5jYWxsKG4sZSxuLnJvd3MpKS50aGVuKGZ1bmN0aW9uKGUpe2lmKCFlKXRocm93IlByb2Nlc3NvciBhdCBpbmRleCAiK3IrIiBkaWQgbm90IHJldHVybiBhIHNldCBvZiByZW5kZXJhYmxlIHJvd3MiO2lmKCFhbmd1bGFyLmlzQXJyYXkoZSkpdGhyb3ciUHJvY2Vzc29yIGF0IGluZGV4ICIrcisiIGRpZCBub3QgcmV0dXJuIGFuIGFycmF5IjtpZigrK3I8PW4uY29sdW1uc1Byb2Nlc3NvcnMubGVuZ3RoLTEpcmV0dXJuIHQocixvKTthLnJlc29sdmUobyl9KS5jYXRjaChhbmd1bGFyLm5vb3ApfSgwLG8pLGEucHJvbWlzZX0sZS5wcm90b3R5cGUuc2V0VmlzaWJsZUNvbHVtbnM9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0IGluIHRoaXMucmVuZGVyQ29udGFpbmVycyl0aGlzLnJlbmRlckNvbnRhaW5lcnNbdF0udmlzaWJsZUNvbHVtbkNhY2hlLmxlbmd0aD0wO2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgaT1lW3JdO2kudmlzaWJsZSYmKHZvaWQgMCE9PWkucmVuZGVyQ29udGFpbmVyJiZpLnJlbmRlckNvbnRhaW5lcj90aGlzLnJlbmRlckNvbnRhaW5lcnNbaS5yZW5kZXJDb250YWluZXJdLnZpc2libGVDb2x1bW5DYWNoZS5wdXNoKGkpOnRoaXMucmVuZGVyQ29udGFpbmVycy5ib2R5LnZpc2libGVDb2x1bW5DYWNoZS5wdXNoKGkpKX19LGUucHJvdG90eXBlLmhhbmRsZVdpbmRvd1Jlc2l6ZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiB0LmdyaWRXaWR0aD1tLmVsZW1lbnRXaWR0aCh0LmVsZW1lbnQpLHQuZ3JpZEhlaWdodD1tLmVsZW1lbnRIZWlnaHQodC5lbGVtZW50KSx0LnF1ZXVlUmVmcmVzaCgpfSxlLnByb3RvdHlwZS5xdWV1ZVJlZnJlc2g9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBlLnJlZnJlc2hDYW5jZWxsZXImJmkuY2FuY2VsKGUucmVmcmVzaENhbmNlbGxlciksZS5yZWZyZXNoQ2FuY2VsbGVyPWkoZnVuY3Rpb24oKXtlLnJlZnJlc2hDYW52YXMoITApfSksZS5yZWZyZXNoQ2FuY2VsbGVyLnRoZW4oZnVuY3Rpb24oKXtlLnJlZnJlc2hDYW5jZWxsZXI9bnVsbH0pLmNhdGNoKGFuZ3VsYXIubm9vcCksZS5yZWZyZXNoQ2FuY2VsbGVyfSxlLnByb3RvdHlwZS5xdWV1ZUdyaWRSZWZyZXNoPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gZS5ncmlkUmVmcmVzaENhbmNlbGxlciYmaS5jYW5jZWwoZS5ncmlkUmVmcmVzaENhbmNlbGxlciksZS5ncmlkUmVmcmVzaENhbmNlbGxlcj1pKGZ1bmN0aW9uKCl7ZS5yZWZyZXNoKCEwKX0pLGUuZ3JpZFJlZnJlc2hDYW5jZWxsZXIudGhlbihmdW5jdGlvbigpe2UuZ3JpZFJlZnJlc2hDYW5jZWxsZXI9bnVsbH0pLmNhdGNoKGFuZ3VsYXIubm9vcCksZS5ncmlkUmVmcmVzaENhbmNlbGxlcn0sZS5wcm90b3R5cGUudXBkYXRlQ2FudmFzSGVpZ2h0PWZ1bmN0aW9uKCl7Zm9yKHZhciBlIGluIHRoaXMucmVuZGVyQ29udGFpbmVycyl0aGlzLnJlbmRlckNvbnRhaW5lcnMuaGFzT3duUHJvcGVydHkoZSkmJih0aGlzLnJlbmRlckNvbnRhaW5lcnNbZV0uY2FudmFzSGVpZ2h0U2hvdWxkVXBkYXRlPSEwKX0sZS5wcm90b3R5cGUuYnVpbGRTdHlsZXM9ZnVuY3Rpb24oKXt2YXIgcj10aGlzO3IuY3VzdG9tU3R5bGVzPSIiLHIuc3R5bGVDb21wdXRhdGlvbnMuc29ydChmdW5jdGlvbihlLHQpe3JldHVybiBudWxsPT09ZS5wcmlvcml0eT8xOm51bGw9PT10LnByaW9yaXR5Py0xOm51bGw9PT1lLnByaW9yaXR5JiZudWxsPT09dC5wcmlvcml0eT8wOmUucHJpb3JpdHktdC5wcmlvcml0eX0pLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9ZS5mdW5jLmNhbGwocik7YW5ndWxhci5pc1N0cmluZyh0KSYmKHIuY3VzdG9tU3R5bGVzKz0iXG4iK3QpfSl9LGUucHJvdG90eXBlLm1pbkNvbHVtbnNUb1JlbmRlcj1mdW5jdGlvbigpe3ZhciBuPXRoaXMsbz10aGlzLmdldFZpZXdwb3J0V2lkdGgoKSxhPTAsbD0wO3JldHVybiBuLmNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbihlLHQpe2lmKGw8bylsKz1lLmRyYXduV2lkdGgsYSsrO2Vsc2V7Zm9yKHZhciByPTAsaT10O3QtYTw9aTtpLS0pcis9bi5jb2x1bW5zW2ldLmRyYXduV2lkdGg7cjxvJiZhKyt9fSksYX0sZS5wcm90b3R5cGUuZ2V0Qm9keUhlaWdodD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFZpZXdwb3J0SGVpZ2h0KCl9LGUucHJvdG90eXBlLmdldFZpZXdwb3J0SGVpZ2h0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5ncmlkSGVpZ2h0LXRoaXMuaGVhZGVySGVpZ2h0LXRoaXMuZm9vdGVySGVpZ2h0O3JldHVybiBlKz10aGlzLmdldFZpZXdwb3J0QWRqdXN0bWVudCgpLmhlaWdodH0sZS5wcm90b3R5cGUuZ2V0Vmlld3BvcnRXaWR0aD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuZ3JpZFdpZHRoO3JldHVybiBlKz10aGlzLmdldFZpZXdwb3J0QWRqdXN0bWVudCgpLndpZHRofSxlLnByb3RvdHlwZS5nZXRIZWFkZXJWaWV3cG9ydFdpZHRoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0Vmlld3BvcnRXaWR0aCgpfSxlLnByb3RvdHlwZS5hZGRWZXJ0aWNhbFNjcm9sbFN5bmM9ZnVuY3Rpb24oZSx0KXt0aGlzLnZlcnRpY2FsU2Nyb2xsU3luY0NhbGxCYWNrRm5zW2VdPXR9LGUucHJvdG90eXBlLmFkZEhvcml6b250YWxTY3JvbGxTeW5jPWZ1bmN0aW9uKGUsdCl7dGhpcy5ob3Jpem9udGFsU2Nyb2xsU3luY0NhbGxCYWNrRm5zW2VdPXR9LGUucHJvdG90eXBlLnNjcm9sbENvbnRhaW5lcnM9ZnVuY3Rpb24oZSx0KXtpZih0Lnkpe3ZhciByPVsiYm9keSIsImxlZnQiLCJyaWdodCJdO3RoaXMuZmxhZ1Njcm9sbGluZ1ZlcnRpY2FsbHkodCksImJvZHkiPT09ZT9yPVsibGVmdCIsInJpZ2h0Il06ImxlZnQiPT09ZT9yPVsiYm9keSIsInJpZ2h0Il06InJpZ2h0Ij09PWUmJihyPVsiYm9keSIsImxlZnQiXSk7Zm9yKHZhciBpPTA7aTxyLmxlbmd0aDtpKyspe3ZhciBuPXJbaV07dGhpcy52ZXJ0aWNhbFNjcm9sbFN5bmNDYWxsQmFja0Zuc1tuXSYmdGhpcy52ZXJ0aWNhbFNjcm9sbFN5bmNDYWxsQmFja0Zuc1tuXSh0KX19aWYodC54KXt2YXIgbz1bImJvZHkiLCJib2R5aGVhZGVyIiwiYm9keWZvb3RlciJdO3RoaXMuZmxhZ1Njcm9sbGluZ0hvcml6b250YWxseSh0KSwiYm9keSI9PT1lJiYobz1bImJvZHloZWFkZXIiLCJib2R5Zm9vdGVyIl0pO2Zvcih2YXIgYT0wO2E8by5sZW5ndGg7YSsrKXt2YXIgbD1vW2FdO3RoaXMuaG9yaXpvbnRhbFNjcm9sbFN5bmNDYWxsQmFja0Zuc1tsXSYmdGhpcy5ob3Jpem9udGFsU2Nyb2xsU3luY0NhbGxCYWNrRm5zW2xdKHQpfX19LGUucHJvdG90eXBlLnJlZ2lzdGVyVmlld3BvcnRBZGp1c3Rlcj1mdW5jdGlvbihlKXt0aGlzLnZpZXdwb3J0QWRqdXN0ZXJzLnB1c2goZSl9LGUucHJvdG90eXBlLnJlbW92ZVZpZXdwb3J0QWRqdXN0ZXI9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy52aWV3cG9ydEFkanVzdGVycy5pbmRleE9mKGUpO3ZvaWQgMCE9PXQmJnZvaWQgMCE9PXQmJnRoaXMudmlld3BvcnRBZGp1c3RlcnMuc3BsaWNlKHQsMSl9LGUucHJvdG90eXBlLmdldFZpZXdwb3J0QWRqdXN0bWVudD1mdW5jdGlvbigpe3ZhciB0PXtoZWlnaHQ6MCx3aWR0aDowfTtyZXR1cm4gdGhpcy52aWV3cG9ydEFkanVzdGVycy5mb3JFYWNoKGZ1bmN0aW9uKGUpe3Q9ZS5jYWxsKHRoaXMsdCl9KSx0fSxlLnByb3RvdHlwZS5nZXRWaXNpYmxlUm93Q291bnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZW5kZXJDb250YWluZXJzLmJvZHkudmlzaWJsZVJvd0NhY2hlLmxlbmd0aH0sZS5wcm90b3R5cGUuZ2V0VmlzaWJsZVJvd3M9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZW5kZXJDb250YWluZXJzLmJvZHkudmlzaWJsZVJvd0NhY2hlfSxlLnByb3RvdHlwZS5nZXRWaXNpYmxlQ29sdW1uQ291bnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZW5kZXJDb250YWluZXJzLmJvZHkudmlzaWJsZUNvbHVtbkNhY2hlLmxlbmd0aH0sZS5wcm90b3R5cGUuc2VhcmNoUm93cz1mdW5jdGlvbihlKXtyZXR1cm4gdC5zZWFyY2godGhpcyxlLHRoaXMuY29sdW1ucyl9LGUucHJvdG90eXBlLnNvcnRCeUNvbHVtbj1mdW5jdGlvbihlKXtyZXR1cm4gcC5zb3J0KHRoaXMsZSx0aGlzLmNvbHVtbnMpfSxlLnByb3RvdHlwZS5nZXRDZWxsVmFsdWU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwIT09ZS5lbnRpdHlbIiQkIit0LnVpZF0/ZS5lbnRpdHlbIiQkIit0LnVpZF0ucmVuZGVyZWQ6dGhpcy5vcHRpb25zLmZsYXRFbnRpdHlBY2Nlc3MmJnZvaWQgMCE9PXQuZmllbGQ/ZS5lbnRpdHlbdC5maWVsZF06KHQuY2VsbFZhbHVlR2V0dGVyQ2FjaGV8fCh0LmNlbGxWYWx1ZUdldHRlckNhY2hlPW8oZS5nZXRFbnRpdHlRdWFsaWZpZWRDb2xGaWVsZCh0KSkpLHQuY2VsbFZhbHVlR2V0dGVyQ2FjaGUoZSkpfSxlLnByb3RvdHlwZS5nZXRDZWxsRGlzcGxheVZhbHVlPWZ1bmN0aW9uKGUsdCl7aWYoIXQuY2VsbERpc3BsYXlHZXR0ZXJDYWNoZSl7dmFyIHI9dC5jZWxsRmlsdGVyPyIgfCAiK3QuY2VsbEZpbHRlcjoiIjtpZih2b2lkIDAhPT1lLmVudGl0eVsiJCQiK3QudWlkXSl0LmNlbGxEaXNwbGF5R2V0dGVyQ2FjaGU9byhlLmVudGl0eVsiJCQiK3QudWlkXS5yZW5kZXJlZCtyKTtlbHNlIGlmKHRoaXMub3B0aW9ucy5mbGF0RW50aXR5QWNjZXNzJiZ2b2lkIDAhPT10LmZpZWxkKXt2YXIgaT10LmZpZWxkLnJlcGxhY2UoLygnKXwoXFwpL2csIlxcJCYiKTt0LmNlbGxEaXNwbGF5R2V0dGVyQ2FjaGU9bygiZW50aXR5WyciK2krIiddIityKX1lbHNlIHQuY2VsbERpc3BsYXlHZXR0ZXJDYWNoZT1vKGUuZ2V0RW50aXR5UXVhbGlmaWVkQ29sRmllbGQodCkrcil9dmFyIG49YW5ndWxhci5leHRlbmQoe30sZSx7Y29sOnR9KTtyZXR1cm4gdC5jZWxsRGlzcGxheUdldHRlckNhY2hlKG4pfSxlLnByb3RvdHlwZS5nZXROZXh0Q29sdW1uU29ydFByaW9yaXR5PWZ1bmN0aW9uKCl7dmFyIHQ9MDtyZXR1cm4gdGhpcy5jb2x1bW5zLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5zb3J0JiZ2b2lkIDAhPT1lLnNvcnQucHJpb3JpdHkmJmUuc29ydC5wcmlvcml0eT49dCYmKHQ9ZS5zb3J0LnByaW9yaXR5KzEpfSksdH0sZS5wcm90b3R5cGUucmVzZXRDb2x1bW5Tb3J0aW5nPWZ1bmN0aW9uKHQpe3RoaXMuY29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2U9PT10fHxlLnN1cHByZXNzUmVtb3ZlU29ydHx8KGUuc29ydD17fSl9KX0sZS5wcm90b3R5cGUuZ2V0Q29sdW1uU29ydGluZz1mdW5jdGlvbigpe3ZhciB0PVtdO3JldHVybiB0aGlzLmNvbHVtbnMuc2xpY2UoMCkuc29ydChwLnByaW9yaXR5U29ydCkuZm9yRWFjaChmdW5jdGlvbihlKXtlLnNvcnQmJnZvaWQgMCE9PWUuc29ydC5kaXJlY3Rpb24mJmUuc29ydC5kaXJlY3Rpb24mJihlLnNvcnQuZGlyZWN0aW9uPT09cy5BU0N8fGUuc29ydC5kaXJlY3Rpb249PT1zLkRFU0MpJiZ0LnB1c2goZSl9KSx0fSxlLnByb3RvdHlwZS5zb3J0Q29sdW1uPWZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzLG49bnVsbDtpZih2b2lkIDA9PT1lfHwhZSl0aHJvdyBuZXcgRXJyb3IoIk5vIGNvbHVtbiBwYXJhbWV0ZXIgcHJvdmlkZWQiKTtpZigiYm9vbGVhbiI9PXR5cGVvZiB0P3I9dDpuPXQscj92b2lkIDA9PT1lLnNvcnQucHJpb3JpdHkmJihlLnNvcnQucHJpb3JpdHk9aS5nZXROZXh0Q29sdW1uU29ydFByaW9yaXR5KCkpOihpLnJlc2V0Q29sdW1uU29ydGluZyhlKSxlLnNvcnQucHJpb3JpdHk9dm9pZCAwLGUuc29ydC5wcmlvcml0eT1pLmdldE5leHRDb2x1bW5Tb3J0UHJpb3JpdHkoKSksbillLnNvcnQuZGlyZWN0aW9uPW47ZWxzZXt2YXIgbz1lLnNvcnREaXJlY3Rpb25DeWNsZS5pbmRleE9mKGUuc29ydC5kaXJlY3Rpb24/ZS5zb3J0LmRpcmVjdGlvbjpudWxsKTtvPShvKzEpJWUuc29ydERpcmVjdGlvbkN5Y2xlLmxlbmd0aCxlLmNvbERlZiYmZS5zdXBwcmVzc1JlbW92ZVNvcnQmJiFlLnNvcnREaXJlY3Rpb25DeWNsZVtvXSYmKG89KG8rMSklZS5zb3J0RGlyZWN0aW9uQ3ljbGUubGVuZ3RoKSxlLnNvcnREaXJlY3Rpb25DeWNsZVtvXT9lLnNvcnQuZGlyZWN0aW9uPWUuc29ydERpcmVjdGlvbkN5Y2xlW29dOmEoZSxpKX1yZXR1cm4gaS5hcGkuY29yZS5yYWlzZS5zb3J0Q2hhbmdlZChpLGkuZ2V0Q29sdW1uU29ydGluZygpKSxTLndoZW4oZSl9O3ZhciBhPWZ1bmN0aW9uKHQsZSl7ZS5jb2x1bW5zLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5zb3J0JiZ2b2lkIDAhPT1lLnNvcnQucHJpb3JpdHkmJmUuc29ydC5wcmlvcml0eT50LnNvcnQucHJpb3JpdHkmJihlLnNvcnQucHJpb3JpdHktPTEpfSksdC5zb3J0PXt9fTtmdW5jdGlvbiBuKGUsdCl7dmFyIHI9ZS90O3JldHVybiByPD0xP3I6MX1mdW5jdGlvbiBFKGUsdCxyKXtpZihuKGUsdCkhPT1yKXJldHVybntwZXJjZW50YWdlOm4oZSx0KX19ZnVuY3Rpb24gQShlLHQscil7dmFyIGk9ZS90O2lmKChpPTE8aT8xOmkpIT09cilyZXR1cm57cGVyY2VudGFnZTppfX1mdW5jdGlvbiBsKCl7fXJldHVybiBlLnByb3RvdHlwZS5yZW5kZXJpbmdDb21wbGV0ZT1mdW5jdGlvbigpe2FuZ3VsYXIuaXNGdW5jdGlvbih0aGlzLm9wdGlvbnMub25SZWdpc3RlckFwaSkmJnRoaXMub3B0aW9ucy5vblJlZ2lzdGVyQXBpKHRoaXMuYXBpKSx0aGlzLmFwaS5jb3JlLnJhaXNlLnJlbmRlcmluZ0NvbXBsZXRlKHRoaXMuYXBpKX0sZS5wcm90b3R5cGUuY3JlYXRlUm93SGFzaE1hcD1mdW5jdGlvbigpe3ZhciBlPW5ldyBsO3JldHVybiBlLmdyaWQ9dGhpcyxlfSxlLnByb3RvdHlwZS5yZWZyZXNoPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj10LnByb2Nlc3NSb3dzUHJvY2Vzc29ycyh0LnJvd3MpLnRoZW4oZnVuY3Rpb24oZSl7dC5zZXRWaXNpYmxlUm93cyhlKX0pLmNhdGNoKGFuZ3VsYXIubm9vcCksaT10LnByb2Nlc3NDb2x1bW5zUHJvY2Vzc29ycyh0LmNvbHVtbnMpLnRoZW4oZnVuY3Rpb24oZSl7dC5zZXRWaXNpYmxlQ29sdW1ucyhlKX0pLmNhdGNoKGFuZ3VsYXIubm9vcCk7cmV0dXJuIFMuYWxsKFtyLGldKS50aGVuKGZ1bmN0aW9uKCl7dC5yZWZyZXNoQ2FudmFzKCEwKSx0LnJlZHJhd0luUGxhY2UoZSl9KS5jYXRjaChhbmd1bGFyLm5vb3ApfSxlLnByb3RvdHlwZS5yZWZyZXNoUm93cz1mdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJuIHQucHJvY2Vzc1Jvd3NQcm9jZXNzb3JzKHQucm93cykudGhlbihmdW5jdGlvbihlKXt0LnNldFZpc2libGVSb3dzKGUpLHQucmVkcmF3SW5QbGFjZSgpLHQucmVmcmVzaENhbnZhcyghMCl9KS5jYXRjaChhbmd1bGFyLm5vb3ApfSxlLnByb3RvdHlwZS5yZWZyZXNoQ2FudmFzPWZ1bmN0aW9uKGMpe3ZhciBnPXRoaXMscD1TLmRlZmVyKCksZj1bXTtmb3IodmFyIGUgaW4gZy5yZW5kZXJDb250YWluZXJzKWlmKGcucmVuZGVyQ29udGFpbmVycy5oYXNPd25Qcm9wZXJ0eShlKSl7dmFyIHQ9Zy5yZW5kZXJDb250YWluZXJzW2VdO2lmKG51bGw9PT10LmNhbnZhc1dpZHRofHxpc05hTih0LmNhbnZhc1dpZHRoKSljb250aW51ZTsodC5oZWFkZXJ8fHQuaGVhZGVyQ2FudmFzKSYmKHQuZXhwbGljaXRIZWFkZXJIZWlnaHQ9dC5leHBsaWNpdEhlYWRlckhlaWdodHx8bnVsbCx0LmV4cGxpY2l0SGVhZGVyQ2FudmFzSGVpZ2h0PXQuZXhwbGljaXRIZWFkZXJDYW52YXNIZWlnaHR8fG51bGwsZi5wdXNoKHQpKX1yZXR1cm4gYyYmZy5idWlsZFN0eWxlcygpLDA8Zi5sZW5ndGg/aShmdW5jdGlvbigpe3ZhciBlLHQscj0hMSxpPTAsbj0wLG89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZSE9PXQmJihyPSEwKSx0fTtmb3IoZT0wO2U8Zi5sZW5ndGg7ZSsrKWlmKG51bGwhPT0odD1mW2VdKS5jYW52YXNXaWR0aCYmIWlzTmFOKHQuY2FudmFzV2lkdGgpKXtpZih0LmhlYWRlcil7dmFyIGE9dC5oZWFkZXJIZWlnaHQ9byh0LmhlYWRlckhlaWdodCxtLm91dGVyRWxlbWVudEhlaWdodCh0LmhlYWRlcikpLGw9bS5nZXRCb3JkZXJTaXplKHQuaGVhZGVyLCJ0b3AiKSxzPW0uZ2V0Qm9yZGVyU2l6ZSh0LmhlYWRlciwiYm90dG9tIiksZD1wYXJzZUludChhLWwtcywxMCk7ZD1kPDA/MDpkLHQuaW5uZXJIZWFkZXJIZWlnaHQ9ZCwhdC5leHBsaWNpdEhlYWRlckhlaWdodCYmaTxkJiYoaT1kKX1pZih0LmhlYWRlckNhbnZhcyl7dmFyIHU9dC5oZWFkZXJDYW52YXNIZWlnaHQ9byh0LmhlYWRlckNhbnZhc0hlaWdodCxwYXJzZUludChtLm91dGVyRWxlbWVudEhlaWdodCh0LmhlYWRlckNhbnZhcyksMTApKTshdC5leHBsaWNpdEhlYWRlckNhbnZhc0hlaWdodCYmbjx1JiYobj11KX19Zm9yKGU9MDtlPGYubGVuZ3RoO2UrKyl0PWZbZV0sMDxpJiZ2b2lkIDAhPT10LmhlYWRlckhlaWdodCYmbnVsbCE9PXQuaGVhZGVySGVpZ2h0JiYodC5leHBsaWNpdEhlYWRlckhlaWdodHx8dC5oZWFkZXJIZWlnaHQ8aSkmJih0LmV4cGxpY2l0SGVhZGVySGVpZ2h0PW8odC5leHBsaWNpdEhlYWRlckhlaWdodCxpKSksMDxuJiZ2b2lkIDAhPT10LmhlYWRlckNhbnZhc0hlaWdodCYmbnVsbCE9PXQuaGVhZGVyQ2FudmFzSGVpZ2h0JiYodC5leHBsaWNpdEhlYWRlckNhbnZhc0hlaWdodHx8dC5oZWFkZXJDYW52YXNIZWlnaHQ8bikmJih0LmV4cGxpY2l0SGVhZGVyQ2FudmFzSGVpZ2h0PW8odC5leHBsaWNpdEhlYWRlckNhbnZhc0hlaWdodCxuKSk7YyYmciYmZy5idWlsZFN0eWxlcygpLHAucmVzb2x2ZSgpfSk6aShmdW5jdGlvbigpe3AucmVzb2x2ZSgpfSkscC5wcm9taXNlfSxlLnByb3RvdHlwZS5yZWRyYXdJblBsYWNlPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCBpbiB0aGlzLnJlbmRlckNvbnRhaW5lcnMpe3ZhciByPXRoaXMucmVuZGVyQ29udGFpbmVyc1t0XTtlPyhyLmFkanVzdFJvd3Moci5wcmV2U2Nyb2xsVG9wLG51bGwpLHIuYWRqdXN0Q29sdW1ucyhyLnByZXZTY3JvbGxMZWZ0LG51bGwpKTooci5hZGp1c3RSb3dzKG51bGwsci5wcmV2U2Nyb2xsdG9wUGVyY2VudGFnZSksci5hZGp1c3RDb2x1bW5zKG51bGwsci5wcmV2U2Nyb2xsbGVmdFBlcmNlbnRhZ2UpKX19LGUucHJvdG90eXBlLmhhc0xlZnRDb250YWluZXJDb2x1bW5zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzTGVmdENvbnRhaW5lcigpJiYwPHRoaXMucmVuZGVyQ29udGFpbmVycy5sZWZ0LnJlbmRlcmVkQ29sdW1ucy5sZW5ndGh9LGUucHJvdG90eXBlLmhhc1JpZ2h0Q29udGFpbmVyQ29sdW1ucz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc1JpZ2h0Q29udGFpbmVyKCkmJjA8dGhpcy5yZW5kZXJDb250YWluZXJzLnJpZ2h0LnJlbmRlcmVkQ29sdW1ucy5sZW5ndGh9LGUucHJvdG90eXBlLnNjcm9sbFRvSWZOZWNlc3Nhcnk9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLGk9bmV3IHgociwidWlHcmlkLnNjcm9sbFRvSWZOZWNlc3NhcnkiKSxuPXIucmVuZGVyQ29udGFpbmVycy5ib2R5LnZpc2libGVSb3dDYWNoZSxvPXIucmVuZGVyQ29udGFpbmVycy5ib2R5LnZpc2libGVDb2x1bW5DYWNoZSxhPXIucmVuZGVyQ29udGFpbmVycy5ib2R5LnByZXZTY3JvbGxUb3Arci5oZWFkZXJIZWlnaHQ7YT1hPDA/MDphO3ZhciBsPXIucmVuZGVyQ29udGFpbmVycy5ib2R5LnByZXZTY3JvbGxMZWZ0LHM9ci5yZW5kZXJDb250YWluZXJzLmJvZHkucHJldlNjcm9sbFRvcCtyLmdyaWRIZWlnaHQtci5yZW5kZXJDb250YWluZXJzLmJvZHkuaGVhZGVySGVpZ2h0LXIuZm9vdGVySGVpZ2h0LXIuc2Nyb2xsYmFySGVpZ2h0LGQ9ci5yZW5kZXJDb250YWluZXJzLmJvZHkucHJldlNjcm9sbExlZnQrTWF0aC5jZWlsKHIucmVuZGVyQ29udGFpbmVycy5ib2R5LmdldFZpZXdwb3J0V2lkdGgoKSk7aWYobnVsbCE9PWUpe3ZhciB1LGM9bi5pbmRleE9mKGUpLGc9ci5yZW5kZXJDb250YWluZXJzLmJvZHkuZ2V0Q2FudmFzSGVpZ2h0KCktci5yZW5kZXJDb250YWluZXJzLmJvZHkuZ2V0Vmlld3BvcnRIZWlnaHQoKSxwPWMqci5vcHRpb25zLnJvd0hlaWdodCtyLmhlYWRlckhlaWdodDsocD1wPDA/MDpwKTxNYXRoLmZsb29yKGEpPyh1PXIucmVuZGVyQ29udGFpbmVycy5ib2R5LnByZXZTY3JvbGxUb3AtKGEtcCksdCYmdC5jb2xEZWYmJnQuY29sRGVmLmVuYWJsZUNlbGxFZGl0T25Gb2N1cyYmKHU9dS1yLmZvb3RlckhlaWdodC1yLnNjcm9sbGJhckhlaWdodCksaS55PUUodSxnLHIucmVuZGVyQ29udGFpbmVycy5ib2R5LnByZXZTY3JvbGx0b3BQZXJjZW50YWdlKSk6cD5NYXRoLmNlaWwocykmJih1PXAtcytyLnJlbmRlckNvbnRhaW5lcnMuYm9keS5wcmV2U2Nyb2xsVG9wLGkueT1FKHUsZyxyLnJlbmRlckNvbnRhaW5lcnMuYm9keS5wcmV2U2Nyb2xsdG9wUGVyY2VudGFnZSkpfWlmKG51bGwhPT10KXtmb3IodmFyIGY9by5pbmRleE9mKHQpLG09ci5yZW5kZXJDb250YWluZXJzLmJvZHkuZ2V0Q2FudmFzV2lkdGgoKS1yLnJlbmRlckNvbnRhaW5lcnMuYm9keS5nZXRWaWV3cG9ydFdpZHRoKCksaD0wLHY9MDt2PGY7disrKWgrPW9bdl0uZHJhd25XaWR0aDt2YXIgQyx3PShoPWg8MD8wOmgpK3QuZHJhd25XaWR0aDt3PXc8MD8wOncsaDxsPyhDPXIucmVuZGVyQ29udGFpbmVycy5ib2R5LnByZXZTY3JvbGxMZWZ0LShsLWgpLGkueD1BKEMsbSxyLnJlbmRlckNvbnRhaW5lcnMuYm9keS5wcmV2U2Nyb2xsbGVmdFBlcmNlbnRhZ2UpKTpkPHcmJihDPXctZCtyLnJlbmRlckNvbnRhaW5lcnMuYm9keS5wcmV2U2Nyb2xsTGVmdCxpLng9QShDLG0sci5yZW5kZXJDb250YWluZXJzLmJvZHkucHJldlNjcm9sbGxlZnRQZXJjZW50YWdlKSl9dmFyIGI9Uy5kZWZlcigpO2lmKGkueXx8aS54KXtpLndpdGhEZWxheT0hMSxyLnNjcm9sbENvbnRhaW5lcnMoIiIsaSk7dmFyIHk9ci5hcGkuY29yZS5vbi5zY3JvbGxFbmQobnVsbCxmdW5jdGlvbigpe2IucmVzb2x2ZShpKSx5KCl9KX1lbHNlIGIucmVzb2x2ZSgpO3JldHVybiBiLnByb21pc2V9LGUucHJvdG90eXBlLnNjcm9sbFRvPWZ1bmN0aW9uKGUsdCl7dmFyIHI9bnVsbCxpPW51bGw7cmV0dXJuIG51bGwhPWUmJihyPXRoaXMuZ2V0Um93KGUpKSxudWxsIT10JiYoaT10aGlzLmdldENvbHVtbih0Lm5hbWU/dC5uYW1lOnQuZmllbGQpKSx0aGlzLnNjcm9sbFRvSWZOZWNlc3NhcnkocixpKX0sZS5wcm90b3R5cGUuY2xlYXJBbGxGaWx0ZXJzPWZ1bmN0aW9uKGUsdCxyKXtpZih2b2lkIDA9PT1lJiYoZT0hMCksdm9pZCAwPT09dCYmKHQ9ITEpLHZvaWQgMD09PXImJihyPSExKSx0aGlzLmNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbihlKXtlLmZpbHRlcnMuZm9yRWFjaChmdW5jdGlvbihlKXtlLnRlcm09dm9pZCAwLHQmJihlLmNvbmRpdGlvbj12b2lkIDApLHImJihlLmZsYWdzPXZvaWQgMCl9KX0pLGUpcmV0dXJuIHRoaXMucmVmcmVzaFJvd3MoKX0sbC5wcm90b3R5cGU9e3B1dDpmdW5jdGlvbihlLHQpe3RoaXNbdGhpcy5ncmlkLm9wdGlvbnMucm93SWRlbnRpdHkoZSldPXR9LGdldDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpc1t0aGlzLmdyaWQub3B0aW9ucy5yb3dJZGVudGl0eShlKV19LHJlbW92ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzW2U9dGhpcy5ncmlkLm9wdGlvbnMucm93SWRlbnRpdHkoZSldO3JldHVybiBkZWxldGUgdGhpc1tlXSx0fX0sZX1dKSxhbmd1bGFyLm1vZHVsZSgidWkuZ3JpZCIpLmZhY3RvcnkoIkdyaWRBcGkiLFsiJHEiLCIkcm9vdFNjb3BlIiwiZ3JpZFV0aWwiLCJ1aUdyaWRDb25zdGFudHMiLCJHcmlkUm93IiwidWlHcmlkR3JpZE1lbnVTZXJ2aWNlIixmdW5jdGlvbihlLHQsZCxyLGksbil7dmFyIG89ZnVuY3Rpb24oZSl7dGhpcy5ncmlkPWUsdGhpcy5saXN0ZW5lcnM9W10sdGhpcy5yZWdpc3RlckV2ZW50KCJjb3JlIiwicmVuZGVyaW5nQ29tcGxldGUiKSx0aGlzLnJlZ2lzdGVyRXZlbnQoImNvcmUiLCJmaWx0ZXJDaGFuZ2VkIiksdGhpcy5yZWdpc3Rlck1ldGhvZCgiY29yZSIsInNldFJvd0ludmlzaWJsZSIsaS5wcm90b3R5cGUuc2V0Um93SW52aXNpYmxlKSx0aGlzLnJlZ2lzdGVyTWV0aG9kKCJjb3JlIiwiY2xlYXJSb3dJbnZpc2libGUiLGkucHJvdG90eXBlLmNsZWFyUm93SW52aXNpYmxlKSx0aGlzLnJlZ2lzdGVyTWV0aG9kKCJjb3JlIiwiZ2V0VmlzaWJsZVJvd3MiLHRoaXMuZ3JpZC5nZXRWaXNpYmxlUm93cyksdGhpcy5yZWdpc3RlckV2ZW50KCJjb3JlIiwicm93c1Zpc2libGVDaGFuZ2VkIiksdGhpcy5yZWdpc3RlckV2ZW50KCJjb3JlIiwicm93c1JlbmRlcmVkIiksdGhpcy5yZWdpc3RlckV2ZW50KCJjb3JlIiwic2Nyb2xsQmVnaW4iKSx0aGlzLnJlZ2lzdGVyRXZlbnQoImNvcmUiLCJzY3JvbGxFbmQiKSx0aGlzLnJlZ2lzdGVyRXZlbnQoImNvcmUiLCJjYW52YXNIZWlnaHRDaGFuZ2VkIiksdGhpcy5yZWdpc3RlckV2ZW50KCJjb3JlIiwiZ3JpZERpbWVuc2lvbkNoYW5nZWQiKX07ZnVuY3Rpb24gdShlLHIsaSxuKXtyZXR1cm4gdC4kb24oZSxmdW5jdGlvbihlKXt2YXIgdD1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO3Quc3BsaWNlKDAsMSksci5hcHBseShufHxpLmFwaSx0KX0pfXJldHVybiBvLnByb3RvdHlwZS5zdXBwcmVzc0V2ZW50cz1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsaT1hbmd1bGFyLmlzQXJyYXkoZSk/ZTpbZV0sbj1yLmxpc3RlbmVycy5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIGkuc29tZShmdW5jdGlvbihlKXtyZXR1cm4gdC5oYW5kbGVyPT09ZX0pfSk7bi5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuZGVyZWcoKX0pLHQoKSxuLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5kZXJlZz11KGUuZXZlbnRJZCxlLmhhbmRsZXIsci5ncmlkLGUuX3RoaXMpfSl9LG8ucHJvdG90eXBlLnJlZ2lzdGVyRXZlbnQ9ZnVuY3Rpb24obyxhKXt2YXIgbD10aGlzO2xbb118fChsW29dPXt9KTt2YXIgZT1sW29dO2Uub258fChlLm9uPXt9LGUucmFpc2U9e30pO3ZhciBzPWwuZ3JpZC5pZCtvK2E7ZS5yYWlzZVthXT1mdW5jdGlvbigpe3QuJGVtaXQuYXBwbHkodCxbc10uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpKX0sZS5vblthXT1mdW5jdGlvbihlLHQscil7aWYobnVsbD09PWV8fHZvaWQgMCE9PWUuJG9uKXt2YXIgaT17aGFuZGxlcjp0LGRlcmVnOnUocyx0LGwuZ3JpZCxyKSxldmVudElkOnMsc2NvcGU6ZSxfdGhpczpyfTtsLmxpc3RlbmVycy5wdXNoKGkpO3ZhciBuPWZ1bmN0aW9uKCl7aS5kZXJlZygpO3ZhciBlPWwubGlzdGVuZXJzLmluZGV4T2YoaSk7bC5saXN0ZW5lcnMuc3BsaWNlKGUsMSl9O3JldHVybiBlJiZlLiRvbigiJGRlc3Ryb3kiLGZ1bmN0aW9uKCl7bigpfSksbn1kLmxvZ0Vycm9yKCJhc2tlZCB0byBsaXN0ZW4gb24gIitvKyIub24uIithKyIgYnV0IHNjb3BlIHdhc24ndCBwYXNzZWQgaW4gdGhlIGlucHV0IHBhcmFtZXRlcnMuICBJdCBpcyBsZWdpdGltYXRlIHRvIHBhc3MgbnVsbCwgYnV0IHlvdSd2ZSBwYXNzZWQgc29tZXRoaW5nIGVsc2UsIHNvIHlvdSBwcm9iYWJseSBmb3Jnb3QgdG8gcHJvdmlkZSBzY29wZSByYXRoZXIgdGhhbiBkaWQgaXQgZGVsaWJlcmF0ZWx5LCBub3QgcmVnaXN0ZXJpbmciKX19LG8ucHJvdG90eXBlLnJlZ2lzdGVyRXZlbnRzRnJvbU9iamVjdD1mdW5jdGlvbihlKXt2YXIgcj10aGlzLGk9W107YW5ndWxhci5mb3JFYWNoKGUsZnVuY3Rpb24oZSx0KXt2YXIgcj17bmFtZTp0LGV2ZW50czpbXX07YW5ndWxhci5mb3JFYWNoKGUsZnVuY3Rpb24oZSx0KXtyLmV2ZW50cy5wdXNoKHQpfSksaS5wdXNoKHIpfSksaS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QuZXZlbnRzLmZvckVhY2goZnVuY3Rpb24oZSl7ci5yZWdpc3RlckV2ZW50KHQubmFtZSxlKX0pfSl9LG8ucHJvdG90eXBlLnJlZ2lzdGVyTWV0aG9kPWZ1bmN0aW9uKGUsdCxyLGkpe3RoaXNbZV18fCh0aGlzW2VdPXt9KSx0aGlzW2VdW3RdPWQuY3JlYXRlQm91bmRlZFdyYXBwZXIoaXx8dGhpcy5ncmlkLHIpfSxvLnByb3RvdHlwZS5yZWdpc3Rlck1ldGhvZHNGcm9tT2JqZWN0PWZ1bmN0aW9uKGUscil7dmFyIGk9dGhpcyxuPVtdO2FuZ3VsYXIuZm9yRWFjaChlLGZ1bmN0aW9uKGUsdCl7dmFyIHI9e25hbWU6dCxtZXRob2RzOltdfTthbmd1bGFyLmZvckVhY2goZSxmdW5jdGlvbihlLHQpe3IubWV0aG9kcy5wdXNoKHtuYW1lOnQsZm46ZX0pfSksbi5wdXNoKHIpfSksbi5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QubWV0aG9kcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2kucmVnaXN0ZXJNZXRob2QodC5uYW1lLGUubmFtZSxlLmZuLHIpfSl9KX0sb31dKSxhbmd1bGFyLm1vZHVsZSgidWkuZ3JpZCIpLmZhY3RvcnkoIkdyaWRDb2x1bW4iLFsiZ3JpZFV0aWwiLCJ1aUdyaWRDb25zdGFudHMiLCJpMThuU2VydmljZSIsZnVuY3Rpb24oZCx1LGUpe2Z1bmN0aW9uIHQoZSx0LHIpe3ZhciBuPXRoaXM7bi5ncmlkPXIsbi51aWQ9dCxuLnVwZGF0ZUNvbHVtbkRlZihlLCEwKSxuLmFnZ3JlZ2F0aW9uVmFsdWU9dm9pZCAwLG4udXBkYXRlQWdncmVnYXRpb25WYWx1ZT1mdW5jdGlvbigpe2lmKG4uYWdncmVnYXRpb25UeXBlKXt2YXIgdD0wLGU9bi5ncmlkLmdldFZpc2libGVSb3dzKCkscj1mdW5jdGlvbigpe3ZhciBpPVtdO3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9bi5ncmlkLmdldENlbGxWYWx1ZShlLG4pLHI9TnVtYmVyKHQpO2lzTmFOKHIpfHxpLnB1c2gocil9KSxpfTthbmd1bGFyLmlzRnVuY3Rpb24obi5hZ2dyZWdhdGlvblR5cGUpP24uYWdncmVnYXRpb25WYWx1ZT1uLmFnZ3JlZ2F0aW9uVHlwZShlLG4pOm4uYWdncmVnYXRpb25UeXBlPT09dS5hZ2dyZWdhdGlvblR5cGVzLmNvdW50P24uYWdncmVnYXRpb25WYWx1ZT1uLmdyaWQuZ2V0VmlzaWJsZVJvd0NvdW50KCk6bi5hZ2dyZWdhdGlvblR5cGU9PT11LmFnZ3JlZ2F0aW9uVHlwZXMuc3VtPyhyKCkuZm9yRWFjaChmdW5jdGlvbihlKXt0Kz1lfSksbi5hZ2dyZWdhdGlvblZhbHVlPXQpOm4uYWdncmVnYXRpb25UeXBlPT09dS5hZ2dyZWdhdGlvblR5cGVzLmF2Zz8ocigpLmZvckVhY2goZnVuY3Rpb24oZSl7dCs9ZX0pLHQvPXIoKS5sZW5ndGgsbi5hZ2dyZWdhdGlvblZhbHVlPXQpOm4uYWdncmVnYXRpb25UeXBlPT09dS5hZ2dyZWdhdGlvblR5cGVzLm1pbj9uLmFnZ3JlZ2F0aW9uVmFsdWU9TWF0aC5taW4uYXBwbHkobnVsbCxyKCkpOm4uYWdncmVnYXRpb25UeXBlPT09dS5hZ2dyZWdhdGlvblR5cGVzLm1heD9uLmFnZ3JlZ2F0aW9uVmFsdWU9TWF0aC5tYXguYXBwbHkobnVsbCxyKCkpOm4uYWdncmVnYXRpb25WYWx1ZT0iwqAifWVsc2Ugbi5hZ2dyZWdhdGlvblZhbHVlPXZvaWQgMH0sdGhpcy5nZXRBZ2dyZWdhdGlvblZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIG4uYWdncmVnYXRpb25WYWx1ZX19cmV0dXJuIHQucHJvdG90eXBlLmhpZGVDb2x1bW49ZnVuY3Rpb24oKXt0aGlzLmNvbERlZi52aXNpYmxlPSExfSx0LnByb3RvdHlwZS5zZXRQcm9wZXJ0eU9yRGVmYXVsdD1mdW5jdGlvbihlLHQscil7dmFyIGk9dGhpczt2b2lkIDAhPT1lW3RdJiZlW3RdP2lbdF09ZVt0XTp2b2lkIDAhPT1pW3RdP2lbdF09aVt0XTppW3RdPXJ8fHt9fSx0LnByb3RvdHlwZS51cGRhdGVDb2x1bW5EZWY9ZnVuY3Rpb24oaSxlKXt2YXIgbj10aGlzO2lmKHZvaWQgMD09PShuLmNvbERlZj1pKS5uYW1lKXRocm93IG5ldyBFcnJvcigiY29sRGVmLm5hbWUgaXMgcmVxdWlyZWQgZm9yIGNvbHVtbiBhdCBpbmRleCAiK24uZ3JpZC5vcHRpb25zLmNvbHVtbkRlZnMuaW5kZXhPZihpKSk7aWYobi5kaXNwbGF5TmFtZT12b2lkIDA9PT1pLmRpc3BsYXlOYW1lP2QucmVhZGFibGVDb2x1bW5OYW1lKGkubmFtZSk6aS5kaXNwbGF5TmFtZSwhYW5ndWxhci5pc051bWJlcihuLndpZHRoKXx8IW4uaGFzQ3VzdG9tV2lkdGh8fGkuYWxsb3dDdXN0b21XaWR0aE92ZXJyaWRlKXt2YXIgdD1pLndpZHRoLHI9IkNhbm5vdCBwYXJzZSBjb2x1bW4gd2lkdGggJyIrdCsiJyBmb3IgY29sdW1uIG5hbWVkICciK2kubmFtZSsiJyI7aWYobi5oYXNDdXN0b21XaWR0aD0hMSxhbmd1bGFyLmlzU3RyaW5nKHQpfHxhbmd1bGFyLmlzTnVtYmVyKHQpKWlmKGFuZ3VsYXIuaXNTdHJpbmcodCkpaWYoZC5lbmRzV2l0aCh0LCIlIikpe3ZhciBvPXQucmVwbGFjZSgvJS9nLCIiKSxhPXBhcnNlSW50KG8sMTApO2lmKGlzTmFOKGEpKXRocm93IG5ldyBFcnJvcihyKTtuLndpZHRoPXR9ZWxzZSBpZih0Lm1hdGNoKC9eKFxkKykkLykpbi53aWR0aD1wYXJzZUludCh0Lm1hdGNoKC9eKFxkKykkLylbMV0sMTApO2Vsc2V7aWYoIXQubWF0Y2goL15cKiskLykpdGhyb3cgbmV3IEVycm9yKHIpO24ud2lkdGg9dH1lbHNlIG4ud2lkdGg9dDtlbHNlIG4ud2lkdGg9IioifWZ1bmN0aW9uIGwoZSl7cmV0dXJuIGFuZ3VsYXIuaXNTdHJpbmcoZSl8fGFuZ3VsYXIuaXNOdW1iZXIoZSl9WyJtaW5XaWR0aCIsIm1heFdpZHRoIl0uZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD1pW2VdLHI9IkNhbm5vdCBwYXJzZSBjb2x1bW4gIitlKyIgJyIrdCsiJyBmb3IgY29sdW1uIG5hbWVkICciK2kubmFtZSsiJyI7aWYoIm1pbldpZHRoIj09PWUmJiFsKHQpJiZhbmd1bGFyLmlzRGVmaW5lZChuLmdyaWQub3B0aW9ucy5taW5pbXVtQ29sdW1uU2l6ZSkmJih0PW4uZ3JpZC5vcHRpb25zLm1pbmltdW1Db2x1bW5TaXplKSxsKHQpKWlmKGFuZ3VsYXIuaXNTdHJpbmcodCkpe2lmKCF0Lm1hdGNoKC9eKFxkKykkLykpdGhyb3cgbmV3IEVycm9yKHIpO25bZV09cGFyc2VJbnQodC5tYXRjaCgvXihcZCspJC8pWzFdLDEwKX1lbHNlIG5bZV09dDtlbHNlIG5bZV09Im1pbldpZHRoIj09PWU/MzA6OWUzfSksbi5maWVsZD12b2lkIDA9PT1pLmZpZWxkP2kubmFtZTppLmZpZWxkLCJzdHJpbmciIT10eXBlb2Ygbi5maWVsZCYmZC5sb2dFcnJvcigiRmllbGQgaXMgbm90IGEgc3RyaW5nLCB0aGlzIGlzIGxpa2VseSB0byBicmVhayB0aGUgY29kZSwgRmllbGQgaXM6ICIrbi5maWVsZCksbi5uYW1lPWkubmFtZSxuLmRpc3BsYXlOYW1lPXZvaWQgMD09PWkuZGlzcGxheU5hbWU/ZC5yZWFkYWJsZUNvbHVtbk5hbWUoaS5uYW1lKTppLmRpc3BsYXlOYW1lLG4uYWdncmVnYXRpb25UeXBlPWFuZ3VsYXIuaXNEZWZpbmVkKGkuYWdncmVnYXRpb25UeXBlKT9pLmFnZ3JlZ2F0aW9uVHlwZTpudWxsLG4uZm9vdGVyQ2VsbFRlbXBsYXRlPWFuZ3VsYXIuaXNEZWZpbmVkKGkuZm9vdGVyQ2VsbFRlbXBsYXRlKT9pLmZvb3RlckNlbGxUZW1wbGF0ZTpudWxsLHZvaWQgMD09PWkuY2VsbFRvb2x0aXB8fCExPT09aS5jZWxsVG9vbHRpcD9uLmNlbGxUb29sdGlwPSExOiEwPT09aS5jZWxsVG9vbHRpcD9uLmNlbGxUb29sdGlwPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4uZ3JpZC5nZXRDZWxsVmFsdWUoZSx0KX06ImZ1bmN0aW9uIj09dHlwZW9mIGkuY2VsbFRvb2x0aXA/bi5jZWxsVG9vbHRpcD1pLmNlbGxUb29sdGlwOm4uY2VsbFRvb2x0aXA9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5jb2xEZWYuY2VsbFRvb2x0aXB9LHZvaWQgMD09PWkuaGVhZGVyVG9vbHRpcHx8ITE9PT1pLmhlYWRlclRvb2x0aXA/bi5oZWFkZXJUb29sdGlwPSExOiEwPT09aS5oZWFkZXJUb29sdGlwP24uaGVhZGVyVG9vbHRpcD1mdW5jdGlvbihlKXtyZXR1cm4gZS5kaXNwbGF5TmFtZX06ImZ1bmN0aW9uIj09dHlwZW9mIGkuaGVhZGVyVG9vbHRpcD9uLmhlYWRlclRvb2x0aXA9aS5oZWFkZXJUb29sdGlwOm4uaGVhZGVyVG9vbHRpcD1mdW5jdGlvbihlKXtyZXR1cm4gZS5jb2xEZWYuaGVhZGVyVG9vbHRpcH0sbi5mb290ZXJDZWxsQ2xhc3M9aS5mb290ZXJDZWxsQ2xhc3Msbi5jZWxsQ2xhc3M9aS5jZWxsQ2xhc3Msbi5oZWFkZXJDZWxsQ2xhc3M9aS5oZWFkZXJDZWxsQ2xhc3Msbi5jZWxsRmlsdGVyPWkuY2VsbEZpbHRlcj9pLmNlbGxGaWx0ZXI6IiIsbi5zb3J0Q2VsbEZpbHRlcmVkPSEhaS5zb3J0Q2VsbEZpbHRlcmVkLG4uZmlsdGVyQ2VsbEZpbHRlcmVkPSEhaS5maWx0ZXJDZWxsRmlsdGVyZWQsbi5oZWFkZXJDZWxsRmlsdGVyPWkuaGVhZGVyQ2VsbEZpbHRlcj9pLmhlYWRlckNlbGxGaWx0ZXI6IiIsbi5mb290ZXJDZWxsRmlsdGVyPWkuZm9vdGVyQ2VsbEZpbHRlcj9pLmZvb3RlckNlbGxGaWx0ZXI6IiIsbi52aXNpYmxlPWQuaXNOdWxsT3JVbmRlZmluZWQoaS52aXNpYmxlKXx8aS52aXNpYmxlLG4uaGVhZGVyQ2xhc3M9aS5oZWFkZXJDbGFzcyxuLmVuYWJsZVNvcnRpbmc9dm9pZCAwIT09aS5lbmFibGVTb3J0aW5nP2kuZW5hYmxlU29ydGluZzpuLmdyaWQub3B0aW9ucy5lbmFibGVTb3J0aW5nLG4uc29ydGluZ0FsZ29yaXRobT1pLnNvcnRpbmdBbGdvcml0aG0sbi5zb3J0RGlyZWN0aW9uQ3ljbGU9dm9pZCAwIT09aS5zb3J0RGlyZWN0aW9uQ3ljbGU/aS5zb3J0RGlyZWN0aW9uQ3ljbGU6W251bGwsdS5BU0MsdS5ERVNDXSx2b2lkIDA9PT1uLnN1cHByZXNzUmVtb3ZlU29ydCYmKG4uc3VwcHJlc3NSZW1vdmVTb3J0PXZvaWQgMCE9PWkuc3VwcHJlc3NSZW1vdmVTb3J0JiZpLnN1cHByZXNzUmVtb3ZlU29ydCksbi5lbmFibGVGaWx0ZXJpbmc9dm9pZCAwPT09aS5lbmFibGVGaWx0ZXJpbmd8fGkuZW5hYmxlRmlsdGVyaW5nLG4uc2V0UHJvcGVydHlPckRlZmF1bHQoaSwibWVudUl0ZW1zIixbXSksZSYmbi5zZXRQcm9wZXJ0eU9yRGVmYXVsdChpLCJzb3J0Iiksbi5zZXRQcm9wZXJ0eU9yRGVmYXVsdChpLCJkZWZhdWx0U29ydCIpO3ZhciBzPVtdO2kuZmlsdGVyP3MucHVzaChpLmZpbHRlcik6aS5maWx0ZXJzP3M9aS5maWx0ZXJzOnMucHVzaCh7fSksZT8obi5zZXRQcm9wZXJ0eU9yRGVmYXVsdChpLCJmaWx0ZXIiKSxuLnNldFByb3BlcnR5T3JEZWZhdWx0KGksImV4dHJhU3R5bGUiKSxuLnNldFByb3BlcnR5T3JEZWZhdWx0KGksImZpbHRlcnMiLHMpKTpuLmZpbHRlcnMubGVuZ3RoPT09cy5sZW5ndGgmJm4uZmlsdGVycy5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7dm9pZCAwIT09c1t0XS5wbGFjZWhvbGRlciYmKGUucGxhY2Vob2xkZXI9c1t0XS5wbGFjZWhvbGRlciksdm9pZCAwIT09c1t0XS5hcmlhTGFiZWwmJihlLmFyaWFMYWJlbD1zW3RdLmFyaWFMYWJlbCksdm9pZCAwIT09c1t0XS5mbGFncyYmKGUuZmxhZ3M9c1t0XS5mbGFncyksdm9pZCAwIT09c1t0XS50eXBlJiYoZS50eXBlPXNbdF0udHlwZSksdm9pZCAwIT09c1t0XS5zZWxlY3RPcHRpb25zJiYoZS5zZWxlY3RPcHRpb25zPXNbdF0uc2VsZWN0T3B0aW9ucyl9KX0sdC5wcm90b3R5cGUudW5zb3J0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5zb3J0LnByaW9yaXR5O3RoaXMuZ3JpZC5jb2x1bW5zLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5zb3J0JiZ2b2lkIDAhPT1lLnNvcnQucHJpb3JpdHkmJmUuc29ydC5wcmlvcml0eT50JiYoZS5zb3J0LnByaW9yaXR5LT0xKX0pLHRoaXMuc29ydD17fSx0aGlzLmdyaWQuYXBpLmNvcmUucmFpc2Uuc29ydENoYW5nZWQodGhpcy5ncmlkLHRoaXMuZ3JpZC5nZXRDb2x1bW5Tb3J0aW5nKCkpfSx0LnByb3RvdHlwZS5nZXRDb2xDbGFzcz1mdW5jdGlvbihlKXt2YXIgdD11LkNPTF9DTEFTU19QUkVGSVgrdGhpcy51aWQ7cmV0dXJuIGU/Ii4iK3Q6dH0sdC5wcm90b3R5cGUuaXNQaW5uZWRMZWZ0PWZ1bmN0aW9uKCl7cmV0dXJuImxlZnQiPT09dGhpcy5yZW5kZXJDb250YWluZXJ9LHQucHJvdG90eXBlLmlzUGlubmVkUmlnaHQ9ZnVuY3Rpb24oKXtyZXR1cm4icmlnaHQiPT09dGhpcy5yZW5kZXJDb250YWluZXJ9LHQucHJvdG90eXBlLmdldENvbENsYXNzRGVmaW5pdGlvbj1mdW5jdGlvbigpe3JldHVybiIgLmdyaWQiK3RoaXMuZ3JpZC5pZCsiICIrdGhpcy5nZXRDb2xDbGFzcyghMCkrIiB7IG1pbi13aWR0aDogIit0aGlzLmRyYXduV2lkdGgrInB4OyBtYXgtd2lkdGg6ICIrdGhpcy5kcmF3bldpZHRoKyJweDsgfSJ9LHQucHJvdG90eXBlLmdldFJlbmRlckNvbnRhaW5lcj1mdW5jdGlvbigpe3ZhciBlPXRoaXMucmVuZGVyQ29udGFpbmVyO3JldHVybiBudWxsIT09ZSYmIiIhPT1lJiZ2b2lkIDAhPT1lfHwoZT0iYm9keSIpLHRoaXMuZ3JpZC5yZW5kZXJDb250YWluZXJzW2VdfSx0LnByb3RvdHlwZS5zaG93Q29sdW1uPWZ1bmN0aW9uKCl7dGhpcy5jb2xEZWYudmlzaWJsZT0hMH0sdC5wcm90b3R5cGUuZ2V0QWdncmVnYXRpb25UZXh0PWZ1bmN0aW9uKCl7aWYodGhpcy5jb2xEZWYuYWdncmVnYXRpb25IaWRlTGFiZWwpcmV0dXJuIiI7aWYodGhpcy5jb2xEZWYuYWdncmVnYXRpb25MYWJlbClyZXR1cm4gdGhpcy5jb2xEZWYuYWdncmVnYXRpb25MYWJlbDtzd2l0Y2godGhpcy5jb2xEZWYuYWdncmVnYXRpb25UeXBlKXtjYXNlIHUuYWdncmVnYXRpb25UeXBlcy5jb3VudDpyZXR1cm4gZS5nZXRTYWZlVGV4dCgiYWdncmVnYXRpb24uY291bnQiKTtjYXNlIHUuYWdncmVnYXRpb25UeXBlcy5zdW06cmV0dXJuIGUuZ2V0U2FmZVRleHQoImFnZ3JlZ2F0aW9uLnN1bSIpO2Nhc2UgdS5hZ2dyZWdhdGlvblR5cGVzLmF2ZzpyZXR1cm4gZS5nZXRTYWZlVGV4dCgiYWdncmVnYXRpb24uYXZnIik7Y2FzZSB1LmFnZ3JlZ2F0aW9uVHlwZXMubWluOnJldHVybiBlLmdldFNhZmVUZXh0KCJhZ2dyZWdhdGlvbi5taW4iKTtjYXNlIHUuYWdncmVnYXRpb25UeXBlcy5tYXg6cmV0dXJuIGUuZ2V0U2FmZVRleHQoImFnZ3JlZ2F0aW9uLm1heCIpO2RlZmF1bHQ6cmV0dXJuIiJ9fSx0LnByb3RvdHlwZS5nZXRDZWxsVGVtcGxhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jZWxsVGVtcGxhdGVQcm9taXNlfSx0LnByb3RvdHlwZS5nZXRDb21waWxlZEVsZW1lbnRGbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbXBpbGVkRWxlbWVudEZuRGVmZXIucHJvbWlzZX0sdH1dKSxhbmd1bGFyLm1vZHVsZSgidWkuZ3JpZCIpLmZhY3RvcnkoIkdyaWRPcHRpb25zIixbImdyaWRVdGlsIiwidWlHcmlkQ29uc3RhbnRzIixmdW5jdGlvbih0LHIpe3JldHVybntpbml0aWFsaXplOmZ1bmN0aW9uKGUpe3JldHVybiBlLm9uUmVnaXN0ZXJBcGk9ZS5vblJlZ2lzdGVyQXBpfHxhbmd1bGFyLm5vb3AoKSxlLmRhdGE9ZS5kYXRhfHxbXSxlLmNvbHVtbkRlZnM9ZS5jb2x1bW5EZWZzfHxbXSxlLmV4Y2x1ZGVQcm9wZXJ0aWVzPWUuZXhjbHVkZVByb3BlcnRpZXN8fFsiJCRoYXNoS2V5Il0sZS5lbmFibGVSb3dIYXNoaW5nPSExIT09ZS5lbmFibGVSb3dIYXNoaW5nLGUucm93SWRlbnRpdHk9ZS5yb3dJZGVudGl0eXx8ZnVuY3Rpb24oZSl7cmV0dXJuIHQuaGFzaEtleShlKX0sZS5nZXRSb3dJZGVudGl0eT1lLmdldFJvd0lkZW50aXR5fHxmdW5jdGlvbihlKXtyZXR1cm4gZS4kJGhhc2hLZXl9LGUuZmxhdEVudGl0eUFjY2Vzcz0hMD09PWUuZmxhdEVudGl0eUFjY2VzcyxlLnNob3dIZWFkZXI9dm9pZCAwPT09ZS5zaG93SGVhZGVyfHxlLnNob3dIZWFkZXIsZS5zaG93SGVhZGVyP2UuaGVhZGVyUm93SGVpZ2h0PXZvaWQgMCE9PWUuaGVhZGVyUm93SGVpZ2h0P2UuaGVhZGVyUm93SGVpZ2h0OjMwOmUuaGVhZGVyUm93SGVpZ2h0PTAsInN0cmluZyI9PXR5cGVvZiBlLnJvd0hlaWdodD9lLnJvd0hlaWdodD1wYXJzZUludChlLnJvd0hlaWdodCl8fDMwOmUucm93SGVpZ2h0PWUucm93SGVpZ2h0fHwzMCxlLm1pblJvd3NUb1Nob3c9dm9pZCAwIT09ZS5taW5Sb3dzVG9TaG93P2UubWluUm93c1RvU2hvdzoxMCxlLnNob3dHcmlkRm9vdGVyPSEwPT09ZS5zaG93R3JpZEZvb3RlcixlLnNob3dDb2x1bW5Gb290ZXI9ITA9PT1lLnNob3dDb2x1bW5Gb290ZXIsZS5jb2x1bW5Gb290ZXJIZWlnaHQ9dm9pZCAwIT09ZS5jb2x1bW5Gb290ZXJIZWlnaHQ/ZS5jb2x1bW5Gb290ZXJIZWlnaHQ6MzAsZS5ncmlkRm9vdGVySGVpZ2h0PXZvaWQgMCE9PWUuZ3JpZEZvb3RlckhlaWdodD9lLmdyaWRGb290ZXJIZWlnaHQ6MzAsZS5jb2x1bW5XaWR0aD12b2lkIDAhPT1lLmNvbHVtbldpZHRoP2UuY29sdW1uV2lkdGg6NTAsZS5tYXhWaXNpYmxlQ29sdW1uQ291bnQ9dm9pZCAwIT09ZS5tYXhWaXNpYmxlQ29sdW1uQ291bnQ/ZS5tYXhWaXNpYmxlQ29sdW1uQ291bnQ6MjAwLGUudmlydHVhbGl6YXRpb25UaHJlc2hvbGQ9dm9pZCAwIT09ZS52aXJ0dWFsaXphdGlvblRocmVzaG9sZD9lLnZpcnR1YWxpemF0aW9uVGhyZXNob2xkOjIwLGUuY29sdW1uVmlydHVhbGl6YXRpb25UaHJlc2hvbGQ9dm9pZCAwIT09ZS5jb2x1bW5WaXJ0dWFsaXphdGlvblRocmVzaG9sZD9lLmNvbHVtblZpcnR1YWxpemF0aW9uVGhyZXNob2xkOjEwLGUuZXhjZXNzUm93cz12b2lkIDAhPT1lLmV4Y2Vzc1Jvd3M/ZS5leGNlc3NSb3dzOjQsZS5zY3JvbGxUaHJlc2hvbGQ9dm9pZCAwIT09ZS5zY3JvbGxUaHJlc2hvbGQ/ZS5zY3JvbGxUaHJlc2hvbGQ6NCxlLmV4Y2Vzc0NvbHVtbnM9dm9pZCAwIT09ZS5leGNlc3NDb2x1bW5zP2UuZXhjZXNzQ29sdW1uczo0LGUuaG9yaXpvbnRhbFNjcm9sbFRocmVzaG9sZD12b2lkIDAhPT1lLmhvcml6b250YWxTY3JvbGxUaHJlc2hvbGQ/ZS5ob3Jpem9udGFsU2Nyb2xsVGhyZXNob2xkOjIsZS5hZ2dyZWdhdGlvbkNhbGNUaHJvdHRsZT12b2lkIDAhPT1lLmFnZ3JlZ2F0aW9uQ2FsY1Rocm90dGxlP2UuYWdncmVnYXRpb25DYWxjVGhyb3R0bGU6NTAwLGUud2hlZWxTY3JvbGxUaHJvdHRsZT12b2lkIDAhPT1lLndoZWVsU2Nyb2xsVGhyb3R0bGU/ZS53aGVlbFNjcm9sbFRocm90dGxlOjcwLGUuc2Nyb2xsRGVib3VuY2U9dm9pZCAwIT09ZS5zY3JvbGxEZWJvdW5jZT9lLnNjcm9sbERlYm91bmNlOjMwMCxlLmVuYWJsZVNvcnRpbmc9ITEhPT1lLmVuYWJsZVNvcnRpbmcsZS5lbmFibGVGaWx0ZXJpbmc9ITA9PT1lLmVuYWJsZUZpbHRlcmluZyxlLmVuYWJsZUNvbHVtbk1lbnVzPSExIT09ZS5lbmFibGVDb2x1bW5NZW51cyxlLmVuYWJsZVZlcnRpY2FsU2Nyb2xsYmFyPXZvaWQgMCE9PWUuZW5hYmxlVmVydGljYWxTY3JvbGxiYXI/ZS5lbmFibGVWZXJ0aWNhbFNjcm9sbGJhcjpyLnNjcm9sbGJhcnMuQUxXQVlTLGUuZW5hYmxlSG9yaXpvbnRhbFNjcm9sbGJhcj12b2lkIDAhPT1lLmVuYWJsZUhvcml6b250YWxTY3JvbGxiYXI/ZS5lbmFibGVIb3Jpem9udGFsU2Nyb2xsYmFyOnIuc2Nyb2xsYmFycy5BTFdBWVMsZS5lbmFibGVNaW5IZWlnaHRDaGVjaz0hMSE9PWUuZW5hYmxlTWluSGVpZ2h0Q2hlY2ssZS5taW5pbXVtQ29sdW1uU2l6ZT12b2lkIDAhPT1lLm1pbmltdW1Db2x1bW5TaXplP2UubWluaW11bUNvbHVtblNpemU6MzAsZS5yb3dFcXVhbGl0eT1lLnJvd0VxdWFsaXR5fHxmdW5jdGlvbihlLHQpe3JldHVybiBlPT09dH0sZS5oZWFkZXJUZW1wbGF0ZT1lLmhlYWRlclRlbXBsYXRlfHxudWxsLGUuZm9vdGVyVGVtcGxhdGU9ZS5mb290ZXJUZW1wbGF0ZXx8InVpLWdyaWQvdWktZ3JpZC1mb290ZXIiLGUuZ3JpZEZvb3RlclRlbXBsYXRlPWUuZ3JpZEZvb3RlclRlbXBsYXRlfHwidWktZ3JpZC91aS1ncmlkLWdyaWQtZm9vdGVyIixlLnJvd1RlbXBsYXRlPWUucm93VGVtcGxhdGV8fCJ1aS1ncmlkL3VpLWdyaWQtcm93IixlLmdyaWRNZW51VGVtcGxhdGU9ZS5ncmlkTWVudVRlbXBsYXRlfHwidWktZ3JpZC91aUdyaWRNZW51IixlLmFwcFNjb3BlUHJvdmlkZXI9ZS5hcHBTY29wZVByb3ZpZGVyfHxudWxsLGV9fX1dKSxhbmd1bGFyLm1vZHVsZSgidWkuZ3JpZCIpLmZhY3RvcnkoIkdyaWRSZW5kZXJDb250YWluZXIiLFsiZ3JpZFV0aWwiLCJ1aUdyaWRDb25zdGFudHMiLGZ1bmN0aW9uKGIsbil7ZnVuY3Rpb24gZShlLHQscil7dmFyIGk9dGhpcztpLm5hbWU9ZSxpLmdyaWQ9dCxpLnZpc2libGVSb3dDYWNoZT1bXSxpLnZpc2libGVDb2x1bW5DYWNoZT1bXSxpLnJlbmRlcmVkUm93cz1bXSxpLnJlbmRlcmVkQ29sdW1ucz1bXSxpLnByZXZTY3JvbGxUb3A9MCxpLnByZXZTY3JvbGx0b3BQZXJjZW50YWdlPTAsaS5wcmV2Um93U2Nyb2xsSW5kZXg9MCxpLnByZXZTY3JvbGxMZWZ0PTAsaS5wcmV2U2Nyb2xsbGVmdFBlcmNlbnRhZ2U9MCxpLnByZXZDb2x1bW5TY3JvbGxJbmRleD0wLGkuY29sdW1uU3R5bGVzPSIiLGkudmlld3BvcnRBZGp1c3RlcnM9W10saS5oYXNIU2Nyb2xsYmFyPSExLGkuaGFzVlNjcm9sbGJhcj0hMSxpLmNhbnZhc0hlaWdodFNob3VsZFVwZGF0ZT0hMCxpLiQkY2FudmFzSGVpZ2h0PTAsciYmYW5ndWxhci5pc09iamVjdChyKSYmYW5ndWxhci5leHRlbmQoaSxyKSx0LnJlZ2lzdGVyU3R5bGVDb21wdXRhdGlvbih7cHJpb3JpdHk6NSxmdW5jOmZ1bmN0aW9uKCl7cmV0dXJuIGkudXBkYXRlQ29sdW1uV2lkdGhzKCksaS5jb2x1bW5TdHlsZXN9fSl9cmV0dXJuIGUucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy52aXNpYmxlQ29sdW1uQ2FjaGUubGVuZ3RoPTAsdGhpcy52aXNpYmxlUm93Q2FjaGUubGVuZ3RoPTAsdGhpcy5yZW5kZXJlZFJvd3MubGVuZ3RoPTAsdGhpcy5yZW5kZXJlZENvbHVtbnMubGVuZ3RoPTB9LGUucHJvdG90eXBlLmNvbnRhaW5zQ29sdW1uPWZ1bmN0aW9uKGUpe3JldHVybi0xIT09dGhpcy52aXNpYmxlQ29sdW1uQ2FjaGUuaW5kZXhPZihlKX0sZS5wcm90b3R5cGUubWluUm93c1RvUmVuZGVyPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPTAsdD0wLHI9dGhpcy5nZXRWaWV3cG9ydEhlaWdodCgpLGk9dGhpcy52aXNpYmxlUm93Q2FjaGUubGVuZ3RoLTE7dDxyJiYwPD1pO2ktLSl0Kz10aGlzLnZpc2libGVSb3dDYWNoZVtpXS5oZWlnaHQsZSsrO3JldHVybiBlfSxlLnByb3RvdHlwZS5taW5Db2x1bW5zVG9SZW5kZXI9ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5nZXRWaWV3cG9ydFdpZHRoKCksdD0wLHI9MCxpPTA7aTx0aGlzLnZpc2libGVDb2x1bW5DYWNoZS5sZW5ndGg7aSsrKXt2YXIgbj10aGlzLnZpc2libGVDb2x1bW5DYWNoZVtpXTtpZihyPGUpcis9bi5kcmF3bldpZHRoP24uZHJhd25XaWR0aDowLHQrKztlbHNle2Zvcih2YXIgbz0wLGE9aTtpLXQ8PWE7YS0tKW8rPXRoaXMudmlzaWJsZUNvbHVtbkNhY2hlW2FdLmRyYXduV2lkdGg/dGhpcy52aXNpYmxlQ29sdW1uQ2FjaGVbYV0uZHJhd25XaWR0aDowO288ZSYmdCsrfX1yZXR1cm4gdH0sZS5wcm90b3R5cGUuZ2V0VmlzaWJsZVJvd0NvdW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmlzaWJsZVJvd0NhY2hlLmxlbmd0aH0sZS5wcm90b3R5cGUucmVnaXN0ZXJWaWV3cG9ydEFkanVzdGVyPWZ1bmN0aW9uKGUpe3RoaXMudmlld3BvcnRBZGp1c3RlcnMucHVzaChlKX0sZS5wcm90b3R5cGUucmVtb3ZlVmlld3BvcnRBZGp1c3Rlcj1mdW5jdGlvbihlKXt2YXIgdD10aGlzLnZpZXdwb3J0QWRqdXN0ZXJzLmluZGV4T2YoZSk7LTE8dCYmdGhpcy52aWV3cG9ydEFkanVzdGVycy5zcGxpY2UodCwxKX0sZS5wcm90b3R5cGUuZ2V0Vmlld3BvcnRBZGp1c3RtZW50PWZ1bmN0aW9uKCl7dmFyIHQ9e2hlaWdodDowLHdpZHRoOjB9O3JldHVybiB0aGlzLnZpZXdwb3J0QWRqdXN0ZXJzLmZvckVhY2goZnVuY3Rpb24oZSl7dD1lLmNhbGwodGhpcyx0KX0pLHR9LGUucHJvdG90eXBlLmdldE1hcmdpbj1mdW5jdGlvbihyKXt2YXIgaT0wO3JldHVybiB0aGlzLnZpZXdwb3J0QWRqdXN0ZXJzLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jYWxsKHRoaXMse2hlaWdodDowLHdpZHRoOjB9KTt0LnNpZGUmJnQuc2lkZT09PXImJihpKz0tMSp0LndpZHRoKX0pLGl9LGUucHJvdG90eXBlLmdldFZpZXdwb3J0SGVpZ2h0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuaGVhZGVySGVpZ2h0P2UuaGVhZGVySGVpZ2h0OmUuZ3JpZC5oZWFkZXJIZWlnaHQscj1lLmdyaWQuZ3JpZEhlaWdodC10LWUuZ3JpZC5mb290ZXJIZWlnaHQ7cmV0dXJuIHIrPWUuZ2V0Vmlld3BvcnRBZGp1c3RtZW50KCkuaGVpZ2h0fSxlLnByb3RvdHlwZS5nZXRWaWV3cG9ydFdpZHRoPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5ncmlkLmdyaWRXaWR0aDtyZXR1cm4gZSs9dGhpcy5nZXRWaWV3cG9ydEFkanVzdG1lbnQoKS53aWR0aH0sZS5wcm90b3R5cGUuZ2V0SGVhZGVyVmlld3BvcnRXaWR0aD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFZpZXdwb3J0V2lkdGgoKX0sZS5wcm90b3R5cGUuZ2V0Q2FudmFzSGVpZ2h0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztpZighdC5jYW52YXNIZWlnaHRTaG91bGRVcGRhdGUpcmV0dXJuIHQuJCRjYW52YXNIZWlnaHQ7dmFyIGU9dC4kJGNhbnZhc0hlaWdodDtyZXR1cm4gdC4kJGNhbnZhc0hlaWdodD0wLHQudmlzaWJsZVJvd0NhY2hlLmZvckVhY2goZnVuY3Rpb24oZSl7dC4kJGNhbnZhc0hlaWdodCs9ZS5oZWlnaHR9KSx0LmNhbnZhc0hlaWdodFNob3VsZFVwZGF0ZT0hMSx0LmdyaWQuYXBpLmNvcmUucmFpc2UuY2FudmFzSGVpZ2h0Q2hhbmdlZChlLHQuJCRjYW52YXNIZWlnaHQpLHQuJCRjYW52YXNIZWlnaHR9LGUucHJvdG90eXBlLmdldFZlcnRpY2FsU2Nyb2xsTGVuZ3RoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0Q2FudmFzSGVpZ2h0KCktdGhpcy5nZXRWaWV3cG9ydEhlaWdodCgpK3RoaXMuZ3JpZC5zY3JvbGxiYXJIZWlnaHQhPT0wP3RoaXMuZ2V0Q2FudmFzSGVpZ2h0KCktdGhpcy5nZXRWaWV3cG9ydEhlaWdodCgpK3RoaXMuZ3JpZC5zY3JvbGxiYXJIZWlnaHQ6LTF9LGUucHJvdG90eXBlLmdldEhvcml6b250YWxTY3JvbGxMZW5ndGg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRDYW52YXNXaWR0aCgpLXRoaXMuZ2V0Vmlld3BvcnRXaWR0aCgpK3RoaXMuZ3JpZC5zY3JvbGxiYXJXaWR0aCE9PTA/dGhpcy5nZXRDYW52YXNXaWR0aCgpLXRoaXMuZ2V0Vmlld3BvcnRXaWR0aCgpK3RoaXMuZ3JpZC5zY3JvbGxiYXJXaWR0aDotMX0sZS5wcm90b3R5cGUuZ2V0Q2FudmFzV2lkdGg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jYW52YXNXaWR0aH0sZS5wcm90b3R5cGUuc2V0UmVuZGVyZWRSb3dzPWZ1bmN0aW9uKGUpe3RoaXMucmVuZGVyZWRSb3dzLmxlbmd0aD1lLmxlbmd0aDtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrKyl0aGlzLnJlbmRlcmVkUm93c1t0XT1lW3RdfSxlLnByb3RvdHlwZS5zZXRSZW5kZXJlZENvbHVtbnM9ZnVuY3Rpb24oZSl7dGhpcy5yZW5kZXJlZENvbHVtbnMubGVuZ3RoPWUubGVuZ3RoO2Zvcih2YXIgdD0wO3Q8ZS5sZW5ndGg7dCsrKXRoaXMucmVuZGVyZWRDb2x1bW5zW3RdPWVbdF07dGhpcy51cGRhdGVDb2x1bW5PZmZzZXQoKX0sZS5wcm90b3R5cGUudXBkYXRlQ29sdW1uT2Zmc2V0PWZ1bmN0aW9uKCl7Zm9yKHZhciBlPTAsdD0wO3Q8dGhpcy5jdXJyZW50Rmlyc3RDb2x1bW47dCsrKWUrPXRoaXMudmlzaWJsZUNvbHVtbkNhY2hlW3RdLmRyYXduV2lkdGg7dGhpcy5jb2x1bW5PZmZzZXQ9ZX0sZS5wcm90b3R5cGUuc2Nyb2xsVmVydGljYWw9ZnVuY3Rpb24oZSl7dmFyIHQ9LTE7aWYoZSE9PXRoaXMucHJldlNjcm9sbFRvcCl7dmFyIHI9ZS10aGlzLnByZXZTY3JvbGxUb3A7cmV0dXJuIDA8ciYmKHRoaXMuZ3JpZC5zY3JvbGxEaXJlY3Rpb249bi5zY3JvbGxEaXJlY3Rpb24uRE9XTikscjwwJiYodGhpcy5ncmlkLnNjcm9sbERpcmVjdGlvbj1uLnNjcm9sbERpcmVjdGlvbi5VUCksMTwodD1lL3RoaXMuZ2V0VmVydGljYWxTY3JvbGxMZW5ndGgoKSkmJih0PTEpLHQ8MCYmKHQ9MCksdGhpcy5hZGp1c3RTY3JvbGxWZXJ0aWNhbChlLHQpLHR9fSxlLnByb3RvdHlwZS5zY3JvbGxIb3Jpem9udGFsPWZ1bmN0aW9uKGUpe3ZhciB0PS0xO2lmKGUhPT10aGlzLnByZXZTY3JvbGxMZWZ0KXt2YXIgcj1lLXRoaXMucHJldlNjcm9sbExlZnQ7MDxyJiYodGhpcy5ncmlkLnNjcm9sbERpcmVjdGlvbj1uLnNjcm9sbERpcmVjdGlvbi5SSUdIVCkscjwwJiYodGhpcy5ncmlkLnNjcm9sbERpcmVjdGlvbj1uLnNjcm9sbERpcmVjdGlvbi5MRUZUKTt2YXIgaT10aGlzLmdldEhvcml6b250YWxTY3JvbGxMZW5ndGgoKTtyZXR1cm4gdD0wIT09aT9lL2k6MCx0aGlzLmFkanVzdFNjcm9sbEhvcml6b250YWwoZSx0KSx0fX0sZS5wcm90b3R5cGUuYWRqdXN0U2Nyb2xsVmVydGljYWw9ZnVuY3Rpb24oZSx0LHIpeyh0aGlzLnByZXZTY3JvbGxUb3AhPT1lfHxyKSYmKHZvaWQgMCE9PWUmJm51bGwhPWV8fChlPSh0aGlzLmdldENhbnZhc0hlaWdodCgpLXRoaXMuZ2V0Vmlld3BvcnRIZWlnaHQoKSkqdCksdGhpcy5hZGp1c3RSb3dzKGUsdCwhMSksdGhpcy5wcmV2U2Nyb2xsVG9wPWUsdGhpcy5wcmV2U2Nyb2xsdG9wUGVyY2VudGFnZT10LHRoaXMuZ3JpZC5xdWV1ZVJlZnJlc2goKSl9LGUucHJvdG90eXBlLmFkanVzdFNjcm9sbEhvcml6b250YWw9ZnVuY3Rpb24oZSx0LHIpeyh0aGlzLnByZXZTY3JvbGxMZWZ0IT09ZXx8cikmJih2b2lkIDAhPT1lJiZudWxsIT1lfHwoZT0odGhpcy5nZXRDYW52YXNXaWR0aCgpLXRoaXMuZ2V0Vmlld3BvcnRXaWR0aCgpKSp0KSx0aGlzLmFkanVzdENvbHVtbnMoZSx0KSx0aGlzLnByZXZTY3JvbGxMZWZ0PWUsdGhpcy5wcmV2U2Nyb2xsbGVmdFBlcmNlbnRhZ2U9dCx0aGlzLmdyaWQucXVldWVSZWZyZXNoKCkpfSxlLnByb3RvdHlwZS5hZGp1c3RSb3dzPWZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzLG49aS5taW5Sb3dzVG9SZW5kZXIoKSxvPWkudmlzaWJsZVJvd0NhY2hlLGE9by5sZW5ndGgtbjtudWxsPT10JiZlJiYodD1lL2kuZ2V0VmVydGljYWxTY3JvbGxMZW5ndGgoKSk7dmFyIGw9TWF0aC5jZWlsKE1hdGgubWluKGEsYSp0KSk7YTxsJiYobD1hKTt2YXIgcz1bXTtpZihvLmxlbmd0aD5pLmdyaWQub3B0aW9ucy52aXJ0dWFsaXphdGlvblRocmVzaG9sZCl7aWYobnVsbCE9ZSl7aWYoIWkuZ3JpZC5zdXBwcmVzc1BhcmVudFNjcm9sbERvd24mJmkucHJldlNjcm9sbFRvcDxlJiZsPGkucHJldlJvd1Njcm9sbEluZGV4K2kuZ3JpZC5vcHRpb25zLnNjcm9sbFRocmVzaG9sZCYmbDxhKXJldHVybjtpZighaS5ncmlkLnN1cHByZXNzUGFyZW50U2Nyb2xsVXAmJmkucHJldlNjcm9sbFRvcD5lJiZsPmkucHJldlJvd1Njcm9sbEluZGV4LWkuZ3JpZC5vcHRpb25zLnNjcm9sbFRocmVzaG9sZCYmbDxhKXJldHVybn1zPVtNYXRoLm1heCgwLGwtaS5ncmlkLm9wdGlvbnMuZXhjZXNzUm93cyksTWF0aC5taW4oby5sZW5ndGgsbCtuK2kuZ3JpZC5vcHRpb25zLmV4Y2Vzc1Jvd3MpXX1lbHNle3ZhciBkPWkudmlzaWJsZVJvd0NhY2hlLmxlbmd0aDtzPVswLE1hdGgubWF4KGQsbitpLmdyaWQub3B0aW9ucy5leGNlc3NSb3dzKV19aS51cGRhdGVWaWV3YWJsZVJvd1JhbmdlKHMpLGkucHJldlJvd1Njcm9sbEluZGV4PWx9LGUucHJvdG90eXBlLmFkanVzdENvbHVtbnM9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLGk9ci5taW5Db2x1bW5zVG9SZW5kZXIoKSxuPXIudmlzaWJsZUNvbHVtbkNhY2hlLG89bi5sZW5ndGgtaTtudWxsPT10JiZlJiYodD1lL3IuZ2V0SG9yaXpvbnRhbFNjcm9sbExlbmd0aCgpKTt2YXIgYT1NYXRoLmNlaWwoTWF0aC5taW4obyxvKnQpKTtvPGEmJihhPW8pO3ZhciBsPVtdO2lmKG4ubGVuZ3RoPnIuZ3JpZC5vcHRpb25zLmNvbHVtblZpcnR1YWxpemF0aW9uVGhyZXNob2xkJiZyLmdldENhbnZhc1dpZHRoKCk+ci5nZXRWaWV3cG9ydFdpZHRoKCkpbD1bTWF0aC5tYXgoMCxhLXIuZ3JpZC5vcHRpb25zLmV4Y2Vzc0NvbHVtbnMpLE1hdGgubWluKG4ubGVuZ3RoLGEraStyLmdyaWQub3B0aW9ucy5leGNlc3NDb2x1bW5zKV07ZWxzZXt2YXIgcz1yLnZpc2libGVDb2x1bW5DYWNoZS5sZW5ndGg7bD1bMCxNYXRoLm1heChzLGkrci5ncmlkLm9wdGlvbnMuZXhjZXNzQ29sdW1ucyldfXIudXBkYXRlVmlld2FibGVDb2x1bW5SYW5nZShsKSxyLnByZXZDb2x1bW5TY3JvbGxJbmRleD1hfSxlLnByb3RvdHlwZS51cGRhdGVWaWV3YWJsZVJvd1JhbmdlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMudmlzaWJsZVJvd0NhY2hlLnNsaWNlKGVbMF0sZVsxXSk7dGhpcy5jdXJyZW50VG9wUm93PWVbMF0sdGhpcy5zZXRSZW5kZXJlZFJvd3ModCl9LGUucHJvdG90eXBlLnVwZGF0ZVZpZXdhYmxlQ29sdW1uUmFuZ2U9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy52aXNpYmxlQ29sdW1uQ2FjaGUuc2xpY2UoZVswXSxlWzFdKTt0aGlzLmN1cnJlbnRGaXJzdENvbHVtbj1lWzBdLHRoaXMuc2V0UmVuZGVyZWRDb2x1bW5zKHQpfSxlLnByb3RvdHlwZS5oZWFkZXJDZWxsV3JhcHBlclN0eWxlPWZ1bmN0aW9uKCl7aWYoMCE9PXRoaXMuY3VycmVudEZpcnN0Q29sdW1uKXt2YXIgZT10aGlzLmNvbHVtbk9mZnNldDtyZXR1cm4gdGhpcy5ncmlkLmlzUlRMKCk/eyJtYXJnaW4tcmlnaHQiOmUrInB4In06eyJtYXJnaW4tbGVmdCI6ZSsicHgifX1yZXR1cm4gbnVsbH0sZS5wcm90b3R5cGUudXBkYXRlQ29sdW1uV2lkdGhzPWZ1bmN0aW9uKCl7dmFyIGk9dGhpcyxuPVtdLG89MCxhPTAsdD0iIixsPSExLHM9W10sZD1bXSx1PTAsYz1pLmdyaWQuZ2V0Vmlld3BvcnRXaWR0aCgpLWkuZ3JpZC5zY3JvbGxiYXJXaWR0aCxyPVtdO2FuZ3VsYXIuZm9yRWFjaChpLmdyaWQucmVuZGVyQ29udGFpbmVycyxmdW5jdGlvbihlKXtyPXIuY29uY2F0KGUudmlzaWJsZUNvbHVtbkNhY2hlKX0pLHIuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD0wO2lmKGUudmlzaWJsZSlpZihsJiYoYys9aS5ncmlkLnNjcm9sbGJhcldpZHRoKSwhbCYmZS5jb2xEZWYucGlubmVkUmlnaHQmJihsPSEwKSxhbmd1bGFyLmlzTnVtYmVyKGUud2lkdGgpKXQ9cGFyc2VJbnQoZS53aWR0aCwxMCksYSs9dCxlLmRyYXduV2lkdGg9dCxzLnB1c2goZSk7ZWxzZSBpZihiLmVuZHNXaXRoKGUud2lkdGgsIiUiKSl7dmFyIHI9cGFyc2VJbnQoZS53aWR0aC5yZXBsYWNlKC8lL2csIiIpLDEwKTsodD1wYXJzZUludChyLzEwMCpjKSk+ZS5tYXhXaWR0aCYmKHQ9ZS5tYXhXaWR0aCksdDxlLm1pbldpZHRoJiYodD1lLm1pbldpZHRoKSxhKz10LGUuZHJhd25XaWR0aD10LHUrPXIsZC5wdXNoKGUpfWVsc2UgYW5ndWxhci5pc1N0cmluZyhlLndpZHRoKSYmLTEhPT1lLndpZHRoLmluZGV4T2YoIioiKSYmKG8rPWUud2lkdGgubGVuZ3RoLG4ucHVzaChlKSl9KTt2YXIgZSxnPWMtYTtpZigwPG4ubGVuZ3RoKXt2YXIgcD1nL287bi5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PXBhcnNlSW50KGUud2lkdGgubGVuZ3RoKnAsMTApO3Q+ZS5tYXhXaWR0aCYmKHQ9ZS5tYXhXaWR0aCksdDxlLm1pbldpZHRoJiYodD1lLm1pbldpZHRoKSxhKz10LGUuZHJhd25XaWR0aD10fSl9aWYoMDxuLmxlbmd0aD9lPW46MDxkLmxlbmd0aCYmMD09PXMubGVuZ3RoJiYxMDA9PT11JiYoZT1kKSwhYW5ndWxhci5pc1VuZGVmaW5lZChlKSl7Zm9yKHZhciBmPWZ1bmN0aW9uKGUpe2UuZHJhd25XaWR0aDxlLm1heFdpZHRoJiYwPG0mJihlLmRyYXduV2lkdGgrKyxhKyssbS0tLGg9ITApfSxtPWMtYSxoPSEwOzA8bSYmaDspaD0hMSxlLmZvckVhY2goZik7dmFyIHY9ZnVuY3Rpb24oZSl7ZS5kcmF3bldpZHRoPmUubWluV2lkdGgmJjA8QyYmKGUuZHJhd25XaWR0aC0tLGEtLSxDLS0saD0hMCl9LEM9YS1jO2ZvcihoPSEwOzA8QyYmaDspaD0hMSxlLmZvckVhY2godil9dmFyIHc9MDtpLnZpc2libGVDb2x1bW5DYWNoZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UudmlzaWJsZSYmKHcrPWUuZHJhd25XaWR0aCl9KSxyLmZvckVhY2goZnVuY3Rpb24oZSl7dCs9ZS5nZXRDb2xDbGFzc0RlZmluaXRpb24oKX0pLGkuY2FudmFzV2lkdGg9dyx0aGlzLmNvbHVtblN0eWxlcz10fSxlLnByb3RvdHlwZS5uZWVkc0hTY3JvbGxiYXJQbGFjZWhvbGRlcj1mdW5jdGlvbigpe3ZhciBlO3JldHVybigibGVmdCI9PT10aGlzLm5hbWV8fCJyaWdodCI9PT10aGlzLm5hbWUmJiF0aGlzLmhhc0hTY3JvbGxiYXImJiF0aGlzLmdyaWQuZGlzYWJsZVNjcm9sbGluZykmJih0aGlzLmdyaWQub3B0aW9ucy5lbmFibGVIb3Jpem9udGFsU2Nyb2xsYmFyPT09bi5zY3JvbGxiYXJzLkFMV0FZU3x8KGU9dGhpcy5ncmlkLmVsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcigiLnVpLWdyaWQtcmVuZGVyLWNvbnRhaW5lci1ib2R5IC51aS1ncmlkLXZpZXdwb3J0IikpLnNjcm9sbFdpZHRoPmUub2Zmc2V0V2lkdGgpfSxlLnByb3RvdHlwZS5nZXRWaWV3cG9ydFN0eWxlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXt9LHI9e307cmV0dXJuIHJbbi5zY3JvbGxiYXJzLkFMV0FZU109InNjcm9sbCIscltuLnNjcm9sbGJhcnMuV0hFTl9ORUVERURdPSJhdXRvIixlLmhhc0hTY3JvbGxiYXI9ITEsZS5oYXNWU2Nyb2xsYmFyPSExLGUuZ3JpZC5kaXNhYmxlU2Nyb2xsaW5nPyh0WyJvdmVyZmxvdy14Il09ImhpZGRlbiIsdFsib3ZlcmZsb3cteSJdPSJoaWRkZW4iKTooImJvZHkiPT09ZS5uYW1lPyhlLmhhc0hTY3JvbGxiYXI9ZS5ncmlkLm9wdGlvbnMuZW5hYmxlSG9yaXpvbnRhbFNjcm9sbGJhciE9PW4uc2Nyb2xsYmFycy5ORVZFUixlLmdyaWQuaXNSVEwoKT9lLmdyaWQuaGFzTGVmdENvbnRhaW5lckNvbHVtbnMoKXx8KGUuaGFzVlNjcm9sbGJhcj1lLmdyaWQub3B0aW9ucy5lbmFibGVWZXJ0aWNhbFNjcm9sbGJhciE9PW4uc2Nyb2xsYmFycy5ORVZFUik6ZS5ncmlkLmhhc1JpZ2h0Q29udGFpbmVyQ29sdW1ucygpfHwoZS5oYXNWU2Nyb2xsYmFyPWUuZ3JpZC5vcHRpb25zLmVuYWJsZVZlcnRpY2FsU2Nyb2xsYmFyIT09bi5zY3JvbGxiYXJzLk5FVkVSKSk6ImxlZnQiPT09ZS5uYW1lP2UuaGFzVlNjcm9sbGJhcj0hIWUuZ3JpZC5pc1JUTCgpJiZlLmdyaWQub3B0aW9ucy5lbmFibGVWZXJ0aWNhbFNjcm9sbGJhciE9PW4uc2Nyb2xsYmFycy5ORVZFUjplLmhhc1ZTY3JvbGxiYXI9IWUuZ3JpZC5pc1JUTCgpJiZlLmdyaWQub3B0aW9ucy5lbmFibGVWZXJ0aWNhbFNjcm9sbGJhciE9PW4uc2Nyb2xsYmFycy5ORVZFUix0WyJvdmVyZmxvdy14Il09ZS5oYXNIU2Nyb2xsYmFyP3JbZS5ncmlkLm9wdGlvbnMuZW5hYmxlSG9yaXpvbnRhbFNjcm9sbGJhcl06ImhpZGRlbiIsdFsib3ZlcmZsb3cteSJdPWUuaGFzVlNjcm9sbGJhcj9yW2UuZ3JpZC5vcHRpb25zLmVuYWJsZVZlcnRpY2FsU2Nyb2xsYmFyXToiaGlkZGVuIiksdH0sZX1dKSxhbmd1bGFyLm1vZHVsZSgidWkuZ3JpZCIpLmZhY3RvcnkoIkdyaWRSb3ciLFsiZ3JpZFV0aWwiLCJ1aUdyaWRDb25zdGFudHMiLGZ1bmN0aW9uKGksdCl7ZnVuY3Rpb24gZShlLHQscil7dGhpcy5ncmlkPXIsdGhpcy5lbnRpdHk9ZSx0aGlzLnVpZD1pLm5leHRVaWQoKSx0aGlzLnZpc2libGU9ITAsdGhpcy5pc1NlbGVjdGVkPSExLHRoaXMuJCRoZWlnaHQ9ci5vcHRpb25zLnJvd0hlaWdodH1yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJoZWlnaHQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kJGhlaWdodH0sc2V0OmZ1bmN0aW9uKGUpe2UhPT10aGlzLiQkaGVpZ2h0JiYodGhpcy5ncmlkLnVwZGF0ZUNhbnZhc0hlaWdodCgpLHRoaXMuJCRoZWlnaHQ9ZSl9fSksZS5wcm90b3R5cGUuZ2V0UXVhbGlmaWVkQ29sRmllbGQ9ZnVuY3Rpb24oZSl7cmV0dXJuInJvdy4iK3RoaXMuZ2V0RW50aXR5UXVhbGlmaWVkQ29sRmllbGQoZSl9LGUucHJvdG90eXBlLmdldEVudGl0eVF1YWxpZmllZENvbEZpZWxkPWZ1bmN0aW9uKGUpe3JldHVybiBlLmZpZWxkPT09dC5FTlRJVFlfQklORElORz8iZW50aXR5IjppLnByZUV2YWwoImVudGl0eS4iK2UuZmllbGQpfSxlLnByb3RvdHlwZS5zZXRSb3dJbnZpc2libGU9ZnVuY3Rpb24oZSl7ZSYmZS5zZXRUaGlzUm93SW52aXNpYmxlJiZlLnNldFRoaXNSb3dJbnZpc2libGUoInVzZXIiKX0sZS5wcm90b3R5cGUuY2xlYXJSb3dJbnZpc2libGU9ZnVuY3Rpb24oZSl7ZSYmZS5jbGVhclRoaXNSb3dJbnZpc2libGUmJmUuY2xlYXJUaGlzUm93SW52aXNpYmxlKCJ1c2VyIil9LGUucHJvdG90eXBlLnNldFRoaXNSb3dJbnZpc2libGU9ZnVuY3Rpb24oZSx0KXt0aGlzLmludmlzaWJsZVJlYXNvbnx8KHRoaXMuaW52aXNpYmxlUmVhc29uPXt9KSx0aGlzLmludmlzaWJsZVJlYXNvbltlXT0hMCx0aGlzLmV2YWx1YXRlUm93VmlzaWJpbGl0eSh0KX0sZS5wcm90b3R5cGUuY2xlYXJUaGlzUm93SW52aXNpYmxlPWZ1bmN0aW9uKGUsdCl7dm9pZCAwIT09dGhpcy5pbnZpc2libGVSZWFzb24mJmRlbGV0ZSB0aGlzLmludmlzaWJsZVJlYXNvbltlXSx0aGlzLmV2YWx1YXRlUm93VmlzaWJpbGl0eSh0KX0sZS5wcm90b3R5cGUuZXZhbHVhdGVSb3dWaXNpYmlsaXR5PWZ1bmN0aW9uKGUpe3ZhciByPSEwO3ZvaWQgMCE9PXRoaXMuaW52aXNpYmxlUmVhc29uJiZhbmd1bGFyLmZvckVhY2godGhpcy5pbnZpc2libGVSZWFzb24sZnVuY3Rpb24oZSx0KXtlJiYocj0hMSl9KSx2b2lkIDAhPT10aGlzLnZpc2libGUmJnRoaXMudmlzaWJsZT09PXJ8fCh0aGlzLnZpc2libGU9cixlfHwodGhpcy5ncmlkLnF1ZXVlR3JpZFJlZnJlc2goKSx0aGlzLmdyaWQuYXBpLmNvcmUucmFpc2Uucm93c1Zpc2libGVDaGFuZ2VkKHRoaXMpKSl9LGV9XSksZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7YW5ndWxhci5tb2R1bGUoInVpLmdyaWQiKS5mYWN0b3J5KCJHcmlkUm93Q29sdW1uIixbIiRwYXJzZSIsIiRmaWx0ZXIiLGZ1bmN0aW9uKGUsdCl7dmFyIHI9ZnVuY3Rpb24gZSh0LHIpe2lmKCEodGhpcyBpbnN0YW5jZW9mIGUpKXRocm93IlVzaW5nIEdyaWRSb3dDb2x1bW4gYXMgYSBmdW5jdGlvbiBpbnNlYWQgb2YgYXMgYSBjb25zdHJ1Y3Rvci4gTXVzdCBiZSBjYWxsZWQgd2l0aCBgbmV3YCBrZXl3b3JkIjt0aGlzLnJvdz10LHRoaXMuY29sPXJ9O3JldHVybiByLnByb3RvdHlwZS5nZXRJbnRlcnNlY3Rpb25WYWx1ZVJhdz1mdW5jdGlvbigpe3JldHVybiBlKHRoaXMucm93LmdldEVudGl0eVF1YWxpZmllZENvbEZpZWxkKHRoaXMuY29sKSkodGhpcy5yb3cpfSxyfV0pfSgpLGFuZ3VsYXIubW9kdWxlKCJ1aS5ncmlkIikuZmFjdG9yeSgiU2Nyb2xsRXZlbnQiLFsiZ3JpZFV0aWwiLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGUoZSx0LHIsaSl7dmFyIG49dGhpcztpZighZSl0aHJvdyBuZXcgRXJyb3IoImdyaWQgYXJndW1lbnQgaXMgcmVxdWlyZWQiKTtuLmdyaWQ9ZSxuLnNvdXJjZT1pLG4ud2l0aERlbGF5PSEwLG4uc291cmNlUm93Q29udGFpbmVyPXQsbi5zb3VyY2VDb2xDb250YWluZXI9cixuLm5ld1Njcm9sbExlZnQ9bnVsbCxuLm5ld1Njcm9sbFRvcD1udWxsLG4ueD1udWxsLG4ueT1udWxsLG4udmVydGljYWxTY3JvbGxMZW5ndGg9LTk5OTk5OTksbi5ob3Jpem9udGFsU2Nyb2xsTGVuZ3RoPS05OTk5OTksbi5maXJlVGhyb3R0bGVkU2Nyb2xsaW5nRXZlbnQ9YS50aHJvdHRsZShmdW5jdGlvbihlKXtuLmdyaWQuc2Nyb2xsQ29udGFpbmVycyhlLG4pfSxuLmdyaWQub3B0aW9ucy53aGVlbFNjcm9sbFRocm90dGxlLHt0cmFpbGluZzohMH0pfXJldHVybiBlLnByb3RvdHlwZS5nZXROZXdTY3JvbGxMZWZ0PWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztpZighci5uZXdTY3JvbGxMZWZ0KXt2YXIgaSxuPWUuZ2V0Q2FudmFzV2lkdGgoKS1lLmdldFZpZXdwb3J0V2lkdGgoKSxvPWEubm9ybWFsaXplU2Nyb2xsTGVmdCh0LHIuZ3JpZCk7aWYodm9pZCAwIT09ci54LnBlcmNlbnRhZ2UmJnZvaWQgMCE9PXIueC5wZXJjZW50YWdlKWk9ci54LnBlcmNlbnRhZ2U7ZWxzZXtpZih2b2lkIDA9PT1yLngucGl4ZWxzfHx2b2lkIDA9PT1yLngucGl4ZWxzKXRocm93IG5ldyBFcnJvcigiTm8gcGVyY2VudGFnZSBvciBwaXhlbCB2YWx1ZSBwcm92aWRlZCBmb3Igc2Nyb2xsIGV2ZW50IFggYXhpcyIpO2k9ci54LnBlcmNlbnRhZ2U9KG8rci54LnBpeGVscykvbn1yZXR1cm4gTWF0aC5tYXgoMCxpKm4pfXJldHVybiByLm5ld1Njcm9sbExlZnR9LGUucHJvdG90eXBlLmdldE5ld1Njcm9sbFRvcD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7aWYoIXIubmV3U2Nyb2xsVG9wKXt2YXIgaSxuPWUuZ2V0VmVydGljYWxTY3JvbGxMZW5ndGgoKSxvPXRbMF0uc2Nyb2xsVG9wO2lmKHZvaWQgMCE9PXIueS5wZXJjZW50YWdlJiZ2b2lkIDAhPT1yLnkucGVyY2VudGFnZSlpPXIueS5wZXJjZW50YWdlO2Vsc2V7aWYodm9pZCAwPT09ci55LnBpeGVsc3x8dm9pZCAwPT09ci55LnBpeGVscyl0aHJvdyBuZXcgRXJyb3IoIk5vIHBlcmNlbnRhZ2Ugb3IgcGl4ZWwgdmFsdWUgcHJvdmlkZWQgZm9yIHNjcm9sbCBldmVudCBZIGF4aXMiKTtpPXIueS5wZXJjZW50YWdlPShvK3IueS5waXhlbHMpL259cmV0dXJuIE1hdGgubWF4KDAsaSpuKX1yZXR1cm4gci5uZXdTY3JvbGxUb3B9LGUucHJvdG90eXBlLmF0VG9wPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnkmJigwPT09dGhpcy55LnBlcmNlbnRhZ2V8fHRoaXMudmVydGljYWxTY3JvbGxMZW5ndGg8MCkmJjA9PT1lfSxlLnByb3RvdHlwZS5hdEJvdHRvbT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy55JiYoMT09PXRoaXMueS5wZXJjZW50YWdlfHwwPT09dGhpcy52ZXJ0aWNhbFNjcm9sbExlbmd0aCkmJjA8ZX0sZS5wcm90b3R5cGUuYXRMZWZ0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLngmJigwPT09dGhpcy54LnBlcmNlbnRhZ2V8fHRoaXMuaG9yaXpvbnRhbFNjcm9sbExlbmd0aDwwKSYmMD09PWV9LGUucHJvdG90eXBlLmF0UmlnaHQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMueCYmKDE9PT10aGlzLngucGVyY2VudGFnZXx8MD09PXRoaXMuaG9yaXpvbnRhbFNjcm9sbExlbmd0aCkmJjA8ZX0sZS5Tb3VyY2VzPXtWaWV3UG9ydFNjcm9sbDoiVmlld1BvcnRTY3JvbGwiLFJlbmRlckNvbnRhaW5lck1vdXNlV2hlZWw6IlJlbmRlckNvbnRhaW5lck1vdXNlV2hlZWwiLFJlbmRlckNvbnRhaW5lclRvdWNoTW92ZToiUmVuZGVyQ29udGFpbmVyVG91Y2hNb3ZlIixPdGhlcjo5OX0sZX1dKSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0Ijthbmd1bGFyLm1vZHVsZSgidWkuZ3JpZCIpLnNlcnZpY2UoImdyaWRDbGFzc0ZhY3RvcnkiLFsiZ3JpZFV0aWwiLCIkcSIsIiRjb21waWxlIiwiJHRlbXBsYXRlQ2FjaGUiLCJ1aUdyaWRDb25zdGFudHMiLCJHcmlkIiwiR3JpZENvbHVtbiIsIkdyaWRSb3ciLGZ1bmN0aW9uKGQsaSxuLGUsdSxvLHQscil7dmFyIGE9e2NyZWF0ZUdyaWQ6ZnVuY3Rpb24oZSl7KGU9dm9pZCAwIT09ZT9lOnt9KS5pZD1kLm5ld0lkKCk7dmFyIHQ9bmV3IG8oZSk7aWYodC5vcHRpb25zLnJvd1RlbXBsYXRlKXt2YXIgcj1pLmRlZmVyKCk7dC5nZXRSb3dUZW1wbGF0ZUZuPXIucHJvbWlzZSxkLmdldFRlbXBsYXRlKHQub3B0aW9ucy5yb3dUZW1wbGF0ZSkudGhlbihmdW5jdGlvbihlKXt2YXIgdD1uKGUpO3IucmVzb2x2ZSh0KX0sZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKCJDb3VsZG4ndCBmZXRjaC91c2Ugcm93IHRlbXBsYXRlICciK3Qub3B0aW9ucy5yb3dUZW1wbGF0ZSsiJyIpfSkuY2F0Y2goYW5ndWxhci5ub29wKX1yZXR1cm4gdC5yZWdpc3RlckNvbHVtbkJ1aWxkZXIoYS5kZWZhdWx0Q29sdW1uQnVpbGRlciksdC5yZWdpc3RlclJvd0J1aWxkZXIoYS5yb3dUZW1wbGF0ZUFzc2lnbmVyKSx0LnJlZ2lzdGVyUm93c1Byb2Nlc3NvcihmdW5jdGlvbihlKXtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuZXZhbHVhdGVSb3dWaXNpYmlsaXR5KCEwKX0pLGV9LDUwKSx0LnJlZ2lzdGVyQ29sdW1uc1Byb2Nlc3NvcihmdW5jdGlvbihlKXtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UudmlzaWJsZT0hYW5ndWxhci5pc0RlZmluZWQoZS5jb2xEZWYudmlzaWJsZSl8fGUuY29sRGVmLnZpc2libGV9KSxlfSw1MCksdC5yZWdpc3RlclJvd3NQcm9jZXNzb3IodC5zZWFyY2hSb3dzLDEwMCksdC5vcHRpb25zLmV4dGVybmFsU29ydCYmYW5ndWxhci5pc0Z1bmN0aW9uKHQub3B0aW9ucy5leHRlcm5hbFNvcnQpP3QucmVnaXN0ZXJSb3dzUHJvY2Vzc29yKHQub3B0aW9ucy5leHRlcm5hbFNvcnQsMjAwKTp0LnJlZ2lzdGVyUm93c1Byb2Nlc3Nvcih0LnNvcnRCeUNvbHVtbiwyMDApLHR9LGRlZmF1bHRDb2x1bW5CdWlsZGVyOmZ1bmN0aW9uKGEsbCxlKXt2YXIgcz1bXSx0PWZ1bmN0aW9uKHIsZSx0LGksbil7YVtyXT9sW2VdPWFbcl06bFtlXT10O3ZhciBvPWQuZ2V0VGVtcGxhdGUobFtlXSkudGhlbihmdW5jdGlvbihlKXthbmd1bGFyLmlzRnVuY3Rpb24oZSkmJihlPWUoKSk7dmFyIHQ9ImNlbGxUb29sdGlwIj09PW4/ImNvbC5jZWxsVG9vbHRpcChyb3csY29sKSI6ImNvbC5oZWFkZXJUb29sdGlwKGNvbCkiO24mJiExPT09bFtuXT9lPWUucmVwbGFjZSh1LlRPT0xUSVAsIiIpOm4mJmxbbl0mJihlPWUucmVwbGFjZSh1LlRPT0xUSVAsJ3RpdGxlPSJ7eycrdCsnIENVU1RPTV9GSUxURVJTIH19IicpKSxsW3JdPWk/ZS5yZXBsYWNlKHUuQ1VTVE9NX0ZJTFRFUlMsZnVuY3Rpb24oKXtyZXR1cm4gbFtpXT8ifCIrbFtpXToiIn0pOmV9LGZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcigiQ291bGRuJ3QgZmV0Y2gvdXNlIGNvbERlZi4iK3IrIiAnIithW3JdKyInIil9KS5jYXRjaChhbmd1bGFyLm5vb3ApO3JldHVybiBzLnB1c2gobyksb307cmV0dXJuIGwuY2VsbFRlbXBsYXRlUHJvbWlzZT10KCJjZWxsVGVtcGxhdGUiLCJwcm92aWRlZENlbGxUZW1wbGF0ZSIsInVpLWdyaWQvdWlHcmlkQ2VsbCIsImNlbGxGaWx0ZXIiLCJjZWxsVG9vbHRpcCIpLGwuaGVhZGVyQ2VsbFRlbXBsYXRlUHJvbWlzZT10KCJoZWFkZXJDZWxsVGVtcGxhdGUiLCJwcm92aWRlZEhlYWRlckNlbGxUZW1wbGF0ZSIsInVpLWdyaWQvdWlHcmlkSGVhZGVyQ2VsbCIsImhlYWRlckNlbGxGaWx0ZXIiLCJoZWFkZXJUb29sdGlwIiksbC5mb290ZXJDZWxsVGVtcGxhdGVQcm9taXNlPXQoImZvb3RlckNlbGxUZW1wbGF0ZSIsInByb3ZpZGVkRm9vdGVyQ2VsbFRlbXBsYXRlIiwidWktZ3JpZC91aUdyaWRGb290ZXJDZWxsIiwiZm9vdGVyQ2VsbEZpbHRlciIpLGwuZmlsdGVySGVhZGVyVGVtcGxhdGVQcm9taXNlPXQoImZpbHRlckhlYWRlclRlbXBsYXRlIiwicHJvdmlkZWRGaWx0ZXJIZWFkZXJUZW1wbGF0ZSIsInVpLWdyaWQvdWktZ3JpZC1maWx0ZXIiKSxsLmNvbXBpbGVkRWxlbWVudEZuRGVmZXI9aS5kZWZlcigpLGkuYWxsKHMpfSxyb3dUZW1wbGF0ZUFzc2lnbmVyOmZ1bmN0aW9uKHQpe2lmKHQucm93VGVtcGxhdGUpe3ZhciByPWkuZGVmZXIoKTt0LmdldFJvd1RlbXBsYXRlRm49ci5wcm9taXNlLGQuZ2V0VGVtcGxhdGUodC5yb3dUZW1wbGF0ZSkudGhlbihmdW5jdGlvbihlKXt2YXIgdD1uKGUpO3IucmVzb2x2ZSh0KX0sZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKCJDb3VsZG4ndCBmZXRjaC91c2Ugcm93IHRlbXBsYXRlICciK3Qucm93VGVtcGxhdGUrIiciKX0pfWVsc2UgdC5yb3dUZW1wbGF0ZT10aGlzLm9wdGlvbnMucm93VGVtcGxhdGUsdC5nZXRSb3dUZW1wbGF0ZUZuPXRoaXMuZ2V0Um93VGVtcGxhdGVGbjtyZXR1cm4gdC5nZXRSb3dUZW1wbGF0ZUZufX07cmV0dXJuIGF9XSl9KCksYW5ndWxhci5tb2R1bGUoInVpLmdyaWQiKS5zZXJ2aWNlKCJyb3dTZWFyY2hlciIsWyJncmlkVXRpbCIsInVpR3JpZENvbnN0YW50cyIsZnVuY3Rpb24oYyxzKXt2YXIgbj1zLmZpbHRlci5DT05UQUlOUyxnPXtnZXRUZXJtOmZ1bmN0aW9uKGUpe2lmKHZvaWQgMD09PWUudGVybSlyZXR1cm4gZS50ZXJtO3ZhciB0PWUudGVybTtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHQmJih0PXQudHJpbSgpKSx0fSxzdHJpcFRlcm06ZnVuY3Rpb24oZSl7dmFyIHQ9Zy5nZXRUZXJtKGUpO3JldHVybiJzdHJpbmciPT10eXBlb2YgdD90LnJlcGxhY2UoLyheXCp8XCokKS9nLCIiKS5yZXBsYWNlKC9bXC1cW1xdXC9ce1x9XChcKVwqXCtcP1wuXFxcXlwkXHxdL2csIlxcJCYiKTp0fSxndWVzc0NvbmRpdGlvbjpmdW5jdGlvbihlKXtpZih2b2lkIDA9PT1lLnRlcm18fCFlLnRlcm0pcmV0dXJuIG47dmFyIHQ9Zy5nZXRUZXJtKGUpO2lmKC9cKi8udGVzdCh0KSl7dmFyIHI9IiI7ZS5mbGFncyYmZS5mbGFncy5jYXNlU2Vuc2l0aXZlfHwocis9ImkiKTt2YXIgaT10LnJlcGxhY2UoLyhcXCk/XCovZyxmdW5jdGlvbihlLHQpe3JldHVybiB0P2U6IltcXHNcXFNdKj8ifSk7cmV0dXJuIG5ldyBSZWdFeHAoIl4iK2krIiQiLHIpfXJldHVybiBufSxzZXR1cEZpbHRlcnM6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLHI9ZS5sZW5ndGgsaT0wO2k8cjtpKyspe3ZhciBuPWVbaV07aWYobi5ub1Rlcm18fCFjLmlzTnVsbE9yVW5kZWZpbmVkKG4udGVybSkpe3ZhciBvPXt9LGE9IiI7bi5mbGFncyYmbi5mbGFncy5jYXNlU2Vuc2l0aXZlfHwoYSs9ImkiKSxjLmlzTnVsbE9yVW5kZWZpbmVkKG4udGVybSl8fChuLnJhd1Rlcm0/by50ZXJtPW4udGVybTpvLnRlcm09Zy5zdHJpcFRlcm0obikpLG8ubm9UZXJtPW4ubm9UZXJtLG4uY29uZGl0aW9uP28uY29uZGl0aW9uPW4uY29uZGl0aW9uOm8uY29uZGl0aW9uPWcuZ3Vlc3NDb25kaXRpb24obiksby5mbGFncz1hbmd1bGFyLmV4dGVuZCh7Y2FzZVNlbnNpdGl2ZTohMSxkYXRlOiExfSxuLmZsYWdzKSxvLmNvbmRpdGlvbj09PXMuZmlsdGVyLlNUQVJUU19XSVRIJiYoby5zdGFydHN3aXRoUkU9bmV3IFJlZ0V4cCgiXiIrby50ZXJtLGEpKSxvLmNvbmRpdGlvbj09PXMuZmlsdGVyLkVORFNfV0lUSCYmKG8uZW5kc3dpdGhSRT1uZXcgUmVnRXhwKG8udGVybSsiJCIsYSkpLG8uY29uZGl0aW9uPT09cy5maWx0ZXIuQ09OVEFJTlMmJihvLmNvbnRhaW5zUkU9bmV3IFJlZ0V4cChvLnRlcm0sYSkpLG8uY29uZGl0aW9uPT09cy5maWx0ZXIuRVhBQ1QmJihvLmV4YWN0UkU9bmV3IFJlZ0V4cCgiXiIrby50ZXJtKyIkIixhKSksdC5wdXNoKG8pfX1yZXR1cm4gdH0scnVuQ29sdW1uRmlsdGVyOmZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuLG89dHlwZW9mIGkuY29uZGl0aW9uLGE9aS50ZXJtO2lmKG49ci5maWx0ZXJDZWxsRmlsdGVyZWQ/ZS5nZXRDZWxsRGlzcGxheVZhbHVlKHQscik6ZS5nZXRDZWxsVmFsdWUodCxyKSxpLmNvbmRpdGlvbiBpbnN0YW5jZW9mIFJlZ0V4cClyZXR1cm4gaS5jb25kaXRpb24udGVzdChuKTtpZigiZnVuY3Rpb24iPT09bylyZXR1cm4gaS5jb25kaXRpb24oYSxuLHQscik7aWYoaS5zdGFydHN3aXRoUkUpcmV0dXJuIGkuc3RhcnRzd2l0aFJFLnRlc3Qobik7aWYoaS5lbmRzd2l0aFJFKXJldHVybiBpLmVuZHN3aXRoUkUudGVzdChuKTtpZihpLmNvbnRhaW5zUkUpcmV0dXJuIGkuY29udGFpbnNSRS50ZXN0KG4pO2lmKGkuZXhhY3RSRSlyZXR1cm4gaS5leGFjdFJFLnRlc3Qobik7aWYoaS5jb25kaXRpb249PT1zLmZpbHRlci5OT1RfRVFVQUwpcmV0dXJuIW5ldyBSZWdFeHAoIl4iK2ErIiQiKS5leGVjKG4pO2lmKCJudW1iZXIiPT10eXBlb2YgbiYmInN0cmluZyI9PXR5cGVvZiBhKXt2YXIgbD1wYXJzZUZsb2F0KGEucmVwbGFjZSgvXFxcLi8sIi4iKS5yZXBsYWNlKC9cXFwtLywiLSIpKTtpc05hTihsKXx8KGE9bCl9cmV0dXJuITA9PT1pLmZsYWdzLmRhdGUmJihuPW5ldyBEYXRlKG4pLGE9bmV3IERhdGUoYS5yZXBsYWNlKC9cXC9nLCIiKSkpLGkuY29uZGl0aW9uPT09cy5maWx0ZXIuR1JFQVRFUl9USEFOP2E8bjppLmNvbmRpdGlvbj09PXMuZmlsdGVyLkdSRUFURVJfVEhBTl9PUl9FUVVBTD9hPD1uOmkuY29uZGl0aW9uPT09cy5maWx0ZXIuTEVTU19USEFOP248YTppLmNvbmRpdGlvbiE9PXMuZmlsdGVyLkxFU1NfVEhBTl9PUl9FUVVBTHx8bjw9YX0sc2VhcmNoQ29sdW1uOmZ1bmN0aW9uKGUsdCxyLGkpe2lmKGUub3B0aW9ucy51c2VFeHRlcm5hbEZpbHRlcmluZylyZXR1cm4hMDtmb3IodmFyIG49aS5sZW5ndGgsbz0wO288bjtvKyspe3ZhciBhPWlbb107aWYoKCFjLmlzTnVsbE9yVW5kZWZpbmVkKGEudGVybSkmJiIiIT09YS50ZXJtfHxhLm5vVGVybSkmJiFnLnJ1bkNvbHVtbkZpbHRlcihlLHQscixhKSlyZXR1cm4hMX1yZXR1cm4hMH0sc2VhcmNoOmZ1bmN0aW9uKGUscyx0KXtpZihzKXtpZighZS5vcHRpb25zLmVuYWJsZUZpbHRlcmluZylyZXR1cm4gcztmb3IodmFyIHI9W10saT10Lmxlbmd0aCxuPWZ1bmN0aW9uKGUpe3ZhciB0PSExO3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24oZSl7KCFjLmlzTnVsbE9yVW5kZWZpbmVkKGUudGVybSkmJiIiIT09ZS50ZXJtfHxlLm5vVGVybSkmJih0PSEwKX0pLHR9LG89MDtvPGk7bysrKXt2YXIgYT10W29dO3ZvaWQgMCE9PWEuZmlsdGVycyYmbihhLmZpbHRlcnMpJiZyLnB1c2goe2NvbDphLGZpbHRlcnM6Zy5zZXR1cEZpbHRlcnMoYS5maWx0ZXJzKX0pfWlmKDA8ci5sZW5ndGgpe2Zvcih2YXIgbD1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcixpLG4sbyxhPXMubGVuZ3RoLGw9MDtsPGE7bCsrKXI9ZSxpPXNbbF0sbj10LmNvbCxvPXQuZmlsdGVycyxpLnZpc2libGUmJiFnLnNlYXJjaENvbHVtbihyLGksbixvKSYmKGkudmlzaWJsZT0hMSl9LGQ9ci5sZW5ndGgsdT0wO3U8ZDt1KyspbChlLHJbdV0pO2UuYXBpLmNvcmUucmFpc2Uucm93c1Zpc2libGVDaGFuZ2VkJiZlLmFwaS5jb3JlLnJhaXNlLnJvd3NWaXNpYmxlQ2hhbmdlZCgpfXJldHVybiBzfX19O3JldHVybiBnfV0pLGFuZ3VsYXIubW9kdWxlKCJ1aS5ncmlkIikuc2VydmljZSgicm93U29ydGVyIixbIiRwYXJzZSIsInVpR3JpZENvbnN0YW50cyIsZnVuY3Rpb24oZSxnKXt2YXIgdD0iKCIrZy5DVVJSRU5DWV9TWU1CT0xTLm1hcChmdW5jdGlvbihlKXtyZXR1cm4iXFwiK2V9KS5qb2luKCJ8IikrIik/IixwPShuZXcgUmVnRXhwKCJeWy0rXT8iK3QrIltcXGQsLl0rIit0KyIlPyQiKSx7Y29sU29ydEZuQ2FjaGU6e30sZ3Vlc3NTb3J0Rm46ZnVuY3Rpb24oZSl7c3dpdGNoKGUpe2Nhc2UibnVtYmVyIjpyZXR1cm4gcC5zb3J0TnVtYmVyO2Nhc2UibnVtYmVyU3RyIjpyZXR1cm4gcC5zb3J0TnVtYmVyU3RyO2Nhc2UiYm9vbGVhbiI6cmV0dXJuIHAuc29ydEJvb2w7Y2FzZSJzdHJpbmciOnJldHVybiBwLnNvcnRBbHBoYTtjYXNlImRhdGUiOnJldHVybiBwLnNvcnREYXRlO2Nhc2Uib2JqZWN0IjpyZXR1cm4gcC5iYXNpY1NvcnQ7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoIk5vIHNvcnRpbmcgZnVuY3Rpb24gZm91bmQgZm9yIHR5cGU6IitlKX19LGhhbmRsZU51bGxzOmZ1bmN0aW9uKGUsdCl7aWYoIWUmJjAhPT1lJiYhMSE9PWV8fCF0JiYwIT09dCYmITEhPT10KXtpZighZSYmMCE9PWUmJiExIT09ZSYmIXQmJjAhPT10JiYhMSE9PXQpcmV0dXJuIDA7aWYoIWUmJjAhPT1lJiYhMSE9PWUpcmV0dXJuIDE7aWYoIXQmJjAhPT10JiYhMSE9PXQpcmV0dXJuLTF9cmV0dXJuIG51bGx9LGJhc2ljU29ydDpmdW5jdGlvbihlLHQpe3ZhciByPXAuaGFuZGxlTnVsbHMoZSx0KTtyZXR1cm4gbnVsbCE9PXI/cjplPT09dD8wOmU8dD8tMToxfSxzb3J0TnVtYmVyOmZ1bmN0aW9uKGUsdCl7dmFyIHI9cC5oYW5kbGVOdWxscyhlLHQpO3JldHVybiBudWxsIT09cj9yOmUtdH0sc29ydE51bWJlclN0cjpmdW5jdGlvbihlLHQpe3ZhciByPXAuaGFuZGxlTnVsbHMoZSx0KTtpZihudWxsIT09cilyZXR1cm4gcjt2YXIgaSxuLG89ITEsYT0hMTtyZXR1cm4gaT1wYXJzZUZsb2F0KGUucmVwbGFjZSgvW14wLTkuLV0vZywiIikpLGlzTmFOKGkpJiYobz0hMCksbj1wYXJzZUZsb2F0KHQucmVwbGFjZSgvW14wLTkuLV0vZywiIikpLGlzTmFOKG4pJiYoYT0hMCksbyYmYT8wOm8/MTphPy0xOmktbn0sc29ydEFscGhhOmZ1bmN0aW9uKGUsdCl7dmFyIHI9cC5oYW5kbGVOdWxscyhlLHQpO2lmKG51bGwhPT1yKXJldHVybiByO3ZhciBpPWUudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpLG49dC50b1N0cmluZygpLnRvTG93ZXJDYXNlKCk7cmV0dXJuIGk9PT1uPzA6aS5sb2NhbGVDb21wYXJlKG4pfSxzb3J0RGF0ZTpmdW5jdGlvbihlLHQpe3ZhciByPXAuaGFuZGxlTnVsbHMoZSx0KTtpZihudWxsIT09cilyZXR1cm4gcjtlIGluc3RhbmNlb2YgRGF0ZXx8KGU9bmV3IERhdGUoZSkpLHQgaW5zdGFuY2VvZiBEYXRlfHwodD1uZXcgRGF0ZSh0KSk7dmFyIGk9ZS5nZXRUaW1lKCksbj10LmdldFRpbWUoKTtyZXR1cm4gaT09PW4/MDppPG4/LTE6MX0sc29ydEJvb2w6ZnVuY3Rpb24oZSx0KXt2YXIgcj1wLmhhbmRsZU51bGxzKGUsdCk7cmV0dXJuIG51bGwhPT1yP3I6ZSYmdD8wOmV8fHQ/ZT8xOi0xOjB9LGdldFNvcnRGbjpmdW5jdGlvbihlLHQscil7dmFyIGk7cmV0dXJuIHAuY29sU29ydEZuQ2FjaGVbdC5jb2xEZWYubmFtZV0/aT1wLmNvbFNvcnRGbkNhY2hlW3QuY29sRGVmLm5hbWVdOnZvaWQgMCE9PXQuc29ydGluZ0FsZ29yaXRobT8oaT10LnNvcnRpbmdBbGdvcml0aG0scC5jb2xTb3J0Rm5DYWNoZVt0LmNvbERlZi5uYW1lXT10LnNvcnRpbmdBbGdvcml0aG0pOnQuc29ydENlbGxGaWx0ZXJlZCYmdC5jZWxsRmlsdGVyPyhpPXAuc29ydEFscGhhLHAuY29sU29ydEZuQ2FjaGVbdC5jb2xEZWYubmFtZV09aSk6KGk9cC5ndWVzc1NvcnRGbih0LmNvbERlZi50eXBlKSk/cC5jb2xTb3J0Rm5DYWNoZVt0LmNvbERlZi5uYW1lXT1pOmk9cC5zb3J0QWxwaGEsaX0scHJpb3JpdHlTb3J0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHZvaWQgMCE9PWUuc29ydC5wcmlvcml0eSYmdm9pZCAwIT09dC5zb3J0LnByaW9yaXR5P2Uuc29ydC5wcmlvcml0eTx0LnNvcnQucHJpb3JpdHk/LTE6ZS5zb3J0LnByaW9yaXR5PT09dC5zb3J0LnByaW9yaXR5PzA6MTp2b2lkIDAhPT1lLnNvcnQucHJpb3JpdHk/LTE6dm9pZCAwIT09dC5zb3J0LnByaW9yaXR5PzE6MH0sc29ydDpmdW5jdGlvbihsLGUsdCl7aWYoZSl7aWYobC5vcHRpb25zLnVzZUV4dGVybmFsU29ydGluZylyZXR1cm4gZTt2YXIgcyxkLHU9W10scj1bXTtpZih0LmZvckVhY2goZnVuY3Rpb24oZSl7IWUuc29ydHx8ZS5zb3J0Lmlnbm9yZVNvcnR8fCFlLnNvcnQuZGlyZWN0aW9ufHxlLnNvcnQuZGlyZWN0aW9uIT09Zy5BU0MmJmUuc29ydC5kaXJlY3Rpb24hPT1nLkRFU0M/ZS5kZWZhdWx0U29ydCYmZS5kZWZhdWx0U29ydC5kaXJlY3Rpb24mJihlLmRlZmF1bHRTb3J0LmRpcmVjdGlvbj09PWcuQVNDfHxlLmRlZmF1bHRTb3J0LmRpcmVjdGlvbj09PWcuREVTQykmJnIucHVzaCh7Y29sOmUsc29ydDplLmRlZmF1bHRTb3J0fSk6dS5wdXNoKHtjb2w6ZSxzb3J0OmUuc29ydH0pfSksdT11LnNvcnQocC5wcmlvcml0eVNvcnQpLHI9ci5zb3J0KHAucHJpb3JpdHlTb3J0KSwwPT09KHU9dS5jb25jYXQocikpLmxlbmd0aClyZXR1cm4gZTtlLmZvckVhY2goZnVuY3Rpb24oZSx0KXtlLmVudGl0eS4kJHVpR3JpZEluZGV4PXR9KTt2YXIgYz1lLnNsaWNlKDApLGk9ZS5zb3J0KGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByLGk9MCxuPTA7MD09PWkmJm48dS5sZW5ndGg7KXt2YXIgbyxhO3M9dVtuXS5jb2wsZD11W25dLnNvcnQuZGlyZWN0aW9uLHI9cC5nZXRTb3J0Rm4obCxzLGMpLHMuc29ydENlbGxGaWx0ZXJlZD8obz1sLmdldENlbGxEaXNwbGF5VmFsdWUoZSxzKSxhPWwuZ2V0Q2VsbERpc3BsYXlWYWx1ZSh0LHMpKToobz1sLmdldENlbGxWYWx1ZShlLHMpLGE9bC5nZXRDZWxsVmFsdWUodCxzKSksaT1yKG8sYSxlLHQsZCxzKSxuKyt9cmV0dXJuIDA9PT1pP2UuZW50aXR5LiQkdWlHcmlkSW5kZXgtdC5lbnRpdHkuJCR1aUdyaWRJbmRleDpkPT09Zy5BU0M/aTowLWl9KTtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7ZGVsZXRlIGUuZW50aXR5LiQkdWlHcmlkSW5kZXh9KSxpfX19KTtyZXR1cm4gcH1dKSxmdW5jdGlvbigpe3ZhciBDLGU9YW5ndWxhci5tb2R1bGUoInVpLmdyaWQiKTtmdW5jdGlvbiB3KGUpe3ZhciB0PWU7cmV0dXJuIHZvaWQgMCE9PXQubGVuZ3RoJiZ0Lmxlbmd0aCYmKHQ9ZVswXSksdC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUodCxudWxsKX0iZnVuY3Rpb24iIT10eXBlb2YgRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQmJihDPWZ1bmN0aW9uKCl7dmFyIGk9QXJyYXkucHJvdG90eXBlLnNsaWNlO3JldHVybiBmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9aS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gci5sZW5ndGg/ZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD90LmFwcGx5KGUsci5jb25jYXQoaS5jYWxsKGFyZ3VtZW50cykpKTp0LmFwcGx5KGUscil9OmZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/dC5hcHBseShlLGFyZ3VtZW50cyk6dC5jYWxsKGUpfX19KTt2YXIgbD1uZXcgUmVnRXhwKCJeKCIrL1srLV0/KD86XGQqXC58KVxkKyg/OltlRV1bKy1dP1xkK3wpLy5zb3VyY2UrIikoPyFweClbYS16JV0rJCIsImkiKSxiPS9eKGJsb2NrfG5vbmV8dGFibGUoPyEtY1tlYV0pLispLyx5PXtwb3NpdGlvbjoiYWJzb2x1dGUiLHZpc2liaWxpdHk6ImhpZGRlbiIsZGlzcGxheToiYmxvY2sifTtmdW5jdGlvbiBTKGUsdCxyLGksbil7Zm9yKHZhciBvPXI9PT0oaT8iYm9yZGVyIjoiY29udGVudCIpPzQ6IndpZHRoIj09PXQ/MTowLGE9MCxsPVsiVG9wIiwiUmlnaHQiLCJCb3R0b20iLCJMZWZ0Il07bzw0O28rPTIpe3ZhciBzPWxbb107aWYoIm1hcmdpbiI9PT1yKXt2YXIgZD1wYXJzZUZsb2F0KG5bcitzXSk7aXNOYU4oZCl8fChhKz1kKX1pZihpKXtpZigiY29udGVudCI9PT1yKXt2YXIgdT1wYXJzZUZsb2F0KG5bInBhZGRpbmciK3NdKTtpc05hTih1KXx8KGEtPXUpfWlmKCJtYXJnaW4iIT09cil7dmFyIGM9cGFyc2VGbG9hdChuWyJib3JkZXIiK3MrIldpZHRoIl0pO2lzTmFOKGMpfHwoYS09Yyl9fWVsc2V7dmFyIGc9cGFyc2VGbG9hdChuWyJwYWRkaW5nIitzXSk7aWYoaXNOYU4oZyl8fChhKz1nKSwicGFkZGluZyIhPT1yKXt2YXIgcD1wYXJzZUZsb2F0KG5bImJvcmRlciIrcysiV2lkdGgiXSk7aXNOYU4ocCl8fChhKz1wKX19fXJldHVybiBhfWZ1bmN0aW9uIHgoZSx0LHIpe3ZhciBpLG49ITAsbz13KGUpLGE9ImJvcmRlci1ib3giPT09by5ib3hTaXppbmc7aWYoaTw9MHx8bnVsbD09aSl7aWYoKChpPW9bdF0pPDB8fG51bGw9PWkpJiYoaT1lLnN0eWxlW3RdKSxsLnRlc3QoaSkpcmV0dXJuIGk7bj1hJiYhMCxpPXBhcnNlRmxvYXQoaSl8fDB9cmV0dXJuIGkrUygwLHQscnx8KGE/ImJvcmRlciI6ImNvbnRlbnQiKSxuLG8pfXZhciBFPVsiMCIsIjAiLCIwIiwiMCJdLEE9InVpR3JpZC0iO2Uuc2VydmljZSgiZ3JpZFV0aWwiLFsiJGxvZyIsIiR3aW5kb3ciLCIkZG9jdW1lbnQiLCIkaHR0cCIsIiR0ZW1wbGF0ZUNhY2hlIiwiJHRpbWVvdXQiLCIkaW50ZXJ2YWwiLCIkaW5qZWN0b3IiLCIkcSIsIiRpbnRlcnBvbGF0ZSIsInVpR3JpZENvbnN0YW50cyIsZnVuY3Rpb24odCxuLHIsZSxpLHMsZCxvLGEsbCx1KXt2YXIgYyxnPXthdWdtZW50V2lkdGhPckhlaWdodDpTLGdldFN0eWxlczp3LGNyZWF0ZUJvdW5kZWRXcmFwcGVyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQuYXBwbHkoZSxhcmd1bWVudHMpfX0scmVhZGFibGVDb2x1bW5OYW1lOmZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lfHxudWxsPT1lP2U6KCJzdHJpbmciIT10eXBlb2YgZSYmKGU9U3RyaW5nKGUpKSxlLnJlcGxhY2UoL18rL2csIiAiKS5yZXBsYWNlKC9eW0EtWl0rJC8sZnVuY3Rpb24oZSl7cmV0dXJuIGUudG9Mb3dlckNhc2UoKX0pLnJlcGxhY2UoLyhbXHdcdTAwQzAtXHUwMTdGXSspL2csZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrZS5zbGljZSgxKX0pLnJlcGxhY2UoLyhcdys/KD89W0EtWl0pKS9nLCIkMSAiKSl9LGdldENvbHVtbnNGcm9tRGF0YTpmdW5jdGlvbihlLHIpe3ZhciBpPVtdO2lmKCFlfHx2b2lkIDA9PT1lWzBdfHx2b2lkIDA9PT1lWzBdKXJldHVybltdO2FuZ3VsYXIuaXNVbmRlZmluZWQocikmJihyPVtdKTt2YXIgdD1lWzBdO3JldHVybiBhbmd1bGFyLmZvckVhY2godCxmdW5jdGlvbihlLHQpey0xPT09ci5pbmRleE9mKHQpJiZpLnB1c2goe25hbWU6dH0pfSksaX0sbmV3SWQ6KGM9KG5ldyBEYXRlKS5nZXRUaW1lKCksZnVuY3Rpb24oKXtyZXR1cm4gYys9MX0pLGdldFRlbXBsYXRlOmZ1bmN0aW9uKHIpe2lmKGkuZ2V0KHIpKXJldHVybiBnLnBvc3RQcm9jZXNzVGVtcGxhdGUoaS5nZXQocikpO2lmKGFuZ3VsYXIuaXNGdW5jdGlvbihyLnRoZW4pKXJldHVybiByLnRoZW4oZy5wb3N0UHJvY2Vzc1RlbXBsYXRlKS5jYXRjaChhbmd1bGFyLm5vb3ApO3RyeXtpZigwPGFuZ3VsYXIuZWxlbWVudChyKS5sZW5ndGgpcmV0dXJuIGEud2hlbihyKS50aGVuKGcucG9zdFByb2Nlc3NUZW1wbGF0ZSkuY2F0Y2goYW5ndWxhci5ub29wKX1jYXRjaChlKXt9cmV0dXJuIGUoe21ldGhvZDoiR0VUIix1cmw6cn0pLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHQ9ZS5kYXRhLnRyaW0oKTtyZXR1cm4gaS5wdXQocix0KSx0fSxmdW5jdGlvbihlKXt0aHJvdyBuZXcgRXJyb3IoIkNvdWxkIG5vdCBnZXQgdGVtcGxhdGUgIityKyI6ICIrZSl9KS50aGVuKGcucG9zdFByb2Nlc3NUZW1wbGF0ZSkuY2F0Y2goYW5ndWxhci5ub29wKX0scG9zdFByb2Nlc3NUZW1wbGF0ZTpmdW5jdGlvbihlKXt2YXIgdD1sLnN0YXJ0U3ltYm9sKCkscj1sLmVuZFN5bWJvbCgpO3JldHVybiJ7eyI9PT10JiYifX0iPT09cnx8KGU9KGU9ZS5yZXBsYWNlKC9ce1x7L2csdCkpLnJlcGxhY2UoL1x9XH0vZyxyKSksYS53aGVuKGUpfSxndWVzc1R5cGU6ZnVuY3Rpb24oZSl7dmFyIHQ9dHlwZW9mIGU7c3dpdGNoKHQpe2Nhc2UibnVtYmVyIjpjYXNlImJvb2xlYW4iOmNhc2Uic3RyaW5nIjpyZXR1cm4gdDtkZWZhdWx0OnJldHVybiBhbmd1bGFyLmlzRGF0ZShlKT8iZGF0ZSI6Im9iamVjdCJ9fSxlbGVtZW50V2lkdGg6ZnVuY3Rpb24oZSl7fSxlbGVtZW50SGVpZ2h0OmZ1bmN0aW9uKGUpe30sZ2V0U2Nyb2xsYmFyV2lkdGg6ZnVuY3Rpb24oKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtlLnN0eWxlLnZpc2liaWxpdHk9ImhpZGRlbiIsZS5zdHlsZS53aWR0aD0iMTAwcHgiLGUuc3R5bGUubXNPdmVyZmxvd1N0eWxlPSJzY3JvbGxiYXIiLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZSk7dmFyIHQ9ZS5vZmZzZXRXaWR0aDtlLnN0eWxlLm92ZXJmbG93PSJzY3JvbGwiO3ZhciByPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3Iuc3R5bGUud2lkdGg9IjEwMCUiLGUuYXBwZW5kQ2hpbGQocik7dmFyIGk9ci5vZmZzZXRXaWR0aDtyZXR1cm4gZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGUpLHQtaX0sc3dhcDpmdW5jdGlvbihlLHQscixpKXt2YXIgbixvLGE9e307Zm9yKG8gaW4gdClhW29dPWUuc3R5bGVbb10sZS5zdHlsZVtvXT10W29dO2ZvcihvIGluIG49ci5hcHBseShlLGl8fFtdKSx0KWUuc3R5bGVbb109YVtvXTtyZXR1cm4gbn0sZmFrZUVsZW1lbnQ6ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG4sbyxhPWFuZ3VsYXIuZWxlbWVudChlKS5jbG9uZSgpWzBdO2ZvcihvIGluIHQpYS5zdHlsZVtvXT10W29dO3JldHVybiBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuYm9keSkuYXBwZW5kKGEpLG49ci5jYWxsKGEsYSksYW5ndWxhci5lbGVtZW50KGEpLnJlbW92ZSgpLG59LG5vcm1hbGl6ZVdoZWVsRXZlbnQ6ZnVuY3Rpb24oZSl7dmFyIHQscixpLG4sbyxhPWV8fHdpbmRvdy5ldmVudCxsPShbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSwwKSxzPTAsZD0wO3JldHVybiBhLm9yaWdpbmFsRXZlbnQmJihhPWEub3JpZ2luYWxFdmVudCksYS53aGVlbERlbHRhJiYobD1hLndoZWVsRGVsdGEpLGEuZGV0YWlsJiYobD0tMSphLmRldGFpbCksZD1sLHZvaWQgMCE9PWEuYXhpcyYmYS5heGlzPT09YS5IT1JJWk9OVEFMX0FYSVMmJihkPTAscz0tMSpsKSxhLmRlbHRhWSYmKGw9ZD0tMSphLmRlbHRhWSksYS5kZWx0YVgmJihsPS0xKihzPWEuZGVsdGFYKSksdm9pZCAwIT09YS53aGVlbERlbHRhWSYmKGQ9YS53aGVlbERlbHRhWSksdm9pZCAwIT09YS53aGVlbERlbHRhWCYmKHM9YS53aGVlbERlbHRhWCksaT1NYXRoLmFicyhsKSwoIXR8fGk8dCkmJih0PWkpLG49TWF0aC5tYXgoTWF0aC5hYnMoZCksTWF0aC5hYnMocykpLCghcnx8bjxyKSYmKHI9biksbz0wPGw/ImZsb29yIjoiY2VpbCIse2RlbHRhOmw9TWF0aFtvXShsL3QpLGRlbHRhWDpzPU1hdGhbb10ocy9yKSxkZWx0YVk6ZD1NYXRoW29dKGQvcil9fSxpc1RvdWNoRW5hYmxlZDpmdW5jdGlvbigpe3ZhciBlO3JldHVybigib250b3VjaHN0YXJ0ImluIG58fG4uRG9jdW1lbnRUb3VjaCYmciBpbnN0YW5jZW9mIERvY3VtZW50VG91Y2gpJiYoZT0hMCksZX0saXNOdWxsT3JVbmRlZmluZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWV9LGVuZHNXaXRoOmZ1bmN0aW9uKGUsdCl7cmV0dXJuISghZXx8IXR8fCJzdHJpbmciIT10eXBlb2YgZSkmJi0xIT09ZS5pbmRleE9mKHQsZS5sZW5ndGgtdC5sZW5ndGgpfSxhcnJheUNvbnRhaW5zT2JqZWN0V2l0aFByb3BlcnR5OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaT0hMTtyZXR1cm4gYW5ndWxhci5mb3JFYWNoKGUsZnVuY3Rpb24oZSl7ZVt0XT09PXImJihpPSEwKX0pLGl9LG51bWVyaWNBbmROdWxsU29ydDpmdW5jdGlvbihlLHQpe3JldHVybiBudWxsPT09ZT8xOm51bGw9PT10Py0xOm51bGw9PT1lJiZudWxsPT09dD8wOmUtdH0sZGlzYWJsZUFuaW1hdGlvbnM6ZnVuY3Rpb24oZSl7dmFyIHQ7dHJ5e3Q9by5nZXQoIiRhbmltYXRlIiksMTxhbmd1bGFyLnZlcnNpb24ubWFqb3J8fDE9PT1hbmd1bGFyLnZlcnNpb24ubWFqb3ImJjQ8PWFuZ3VsYXIudmVyc2lvbi5taW5vcj90LmVuYWJsZWQoZSwhMSk6dC5lbmFibGVkKCExLGUpfWNhdGNoKGUpe319LGVuYWJsZUFuaW1hdGlvbnM6ZnVuY3Rpb24oZSl7dmFyIHQ7dHJ5e3JldHVybiB0PW8uZ2V0KCIkYW5pbWF0ZSIpLDE8YW5ndWxhci52ZXJzaW9uLm1ham9yfHwxPT09YW5ndWxhci52ZXJzaW9uLm1ham9yJiY0PD1hbmd1bGFyLnZlcnNpb24ubWlub3I/dC5lbmFibGVkKGUsITApOnQuZW5hYmxlZCghMCxlKSx0fWNhdGNoKGUpe319LG5leHRVaWQ6ZnVuY3Rpb24oKXtmb3IodmFyIGUsdD1FLmxlbmd0aDt0Oyl7aWYoNTc9PT0oZT1FWy0tdF0uY2hhckNvZGVBdCgwKSkpcmV0dXJuIEVbdF09IkEiLEErRS5qb2luKCIiKTtpZig5MCE9PWUpcmV0dXJuIEVbdF09U3RyaW5nLmZyb21DaGFyQ29kZShlKzEpLEErRS5qb2luKCIiKTtFW3RdPSIwIn1yZXR1cm4gRS51bnNoaWZ0KCIwIiksQStFLmpvaW4oIiIpfSxoYXNoS2V5OmZ1bmN0aW9uKGUpe3ZhciB0LHI9dHlwZW9mIGU7cmV0dXJuIm9iamVjdCI9PT1yJiZudWxsIT09ZT8iZnVuY3Rpb24iPT10eXBlb2YodD1lLiQkaGFzaEtleSk/dD1lLiQkaGFzaEtleSgpOnZvaWQgMCE9PWUuJCRoYXNoS2V5JiZlLiQkaGFzaEtleT90PWUuJCRoYXNoS2V5OnZvaWQgMD09PXQmJih0PWUuJCRoYXNoS2V5PWcubmV4dFVpZCgpKTp0PWUscisiOiIrdH0scmVzZXRVaWRzOmZ1bmN0aW9uKCl7RT1bIjAiLCIwIiwiMCJdfSxsb2dFcnJvcjpmdW5jdGlvbihlKXt1LkxPR19FUlJPUl9NRVNTQUdFUyYmdC5lcnJvcihlKX0sbG9nV2FybjpmdW5jdGlvbihlKXt1LkxPR19XQVJOX01FU1NBR0VTJiZ0Lndhcm4oZSl9LGxvZ0RlYnVnOmZ1bmN0aW9uKCl7dS5MT0dfREVCVUdfTUVTU0FHRVMmJnQuZGVidWcuYXBwbHkodCxhcmd1bWVudHMpfX07Zy5mb2N1cz17cXVldWU6W10sYnlJZDpmdW5jdGlvbihyLGkpe3RoaXMuX3B1cmdlUXVldWUoKTt2YXIgZT1zKGZ1bmN0aW9uKCl7dmFyIGU9KGkmJmkuaWQ/aS5pZCsiLSI6IiIpK3IsdD1uLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGUpO3Q/dC5mb2N1cygpOmcubG9nV2FybigiW2ZvY3VzLmJ5SWRdIEVsZW1lbnQgaWQgIitlKyIgd2FzIG5vdCBmb3VuZC4iKX0sMCwhMSk7cmV0dXJuIHRoaXMucXVldWUucHVzaChlKSxlfSxieUVsZW1lbnQ6ZnVuY3Rpb24oZSl7aWYoIWFuZ3VsYXIuaXNFbGVtZW50KGUpKXJldHVybiBnLmxvZ1dhcm4oIlRyeWluZyB0byBmb2N1cyBvbiBhbiBlbGVtZW50IHRoYXQgaXNuJ3QgYW4gZWxlbWVudC4iKSxhLnJlamVjdCgibm90LWVsZW1lbnQiKTtlPWFuZ3VsYXIuZWxlbWVudChlKSx0aGlzLl9wdXJnZVF1ZXVlKCk7dmFyIHQ9cyhmdW5jdGlvbigpe2UmJmVbMF0uZm9jdXMoKX0sMCwhMSk7cmV0dXJuIHRoaXMucXVldWUucHVzaCh0KSx0fSxieVNlbGVjdG9yOmZ1bmN0aW9uKHQscixlKXt2YXIgaT10aGlzO2lmKCFhbmd1bGFyLmlzRWxlbWVudCh0KSl0aHJvdyBuZXcgRXJyb3IoIlRoZSBwYXJlbnQgZWxlbWVudCBpcyBub3QgYW4gZWxlbWVudC4iKTt0PWFuZ3VsYXIuZWxlbWVudCh0KTt2YXIgbj1mdW5jdGlvbigpe3ZhciBlPXRbMF0ucXVlcnlTZWxlY3RvcihyKTtyZXR1cm4gaS5ieUVsZW1lbnQoZSl9O2lmKHRoaXMuX3B1cmdlUXVldWUoKSxlKXt2YXIgbz1zKG4sMCwhMSk7cmV0dXJuIHRoaXMucXVldWUucHVzaChvKSxvfXJldHVybiBuKCl9LF9wdXJnZVF1ZXVlOmZ1bmN0aW9uKCl7dGhpcy5xdWV1ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3MuY2FuY2VsKGUpfSksdGhpcy5xdWV1ZT1bXX19LFsid2lkdGgiLCJoZWlnaHQiXS5mb3JFYWNoKGZ1bmN0aW9uKG4pe3ZhciByPW4uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrbi5zdWJzdHIoMSk7Z1siZWxlbWVudCIrcl09ZnVuY3Rpb24oZSx0KXt2YXIgcj1lO2lmKHImJnZvaWQgMCE9PXIubGVuZ3RoJiZyLmxlbmd0aCYmKHI9ZVswXSksciYmbnVsbCE9PXIpe3ZhciBpPXcocik7cmV0dXJuIDA9PT1yLm9mZnNldFdpZHRoJiZiLnRlc3QoaS5kaXNwbGF5KT9nLnN3YXAocix5LGZ1bmN0aW9uKCl7cmV0dXJuIHgocixuLHQpfSk6eChyLG4sdCl9cmV0dXJuIG51bGx9LGdbIm91dGVyRWxlbWVudCIrcl09ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT9nWyJlbGVtZW50IityXS5jYWxsKHRoaXMsZSx0PyJtYXJnaW4iOiJib3JkZXIiKTpudWxsfX0pLGcuY2xvc2VzdEVsbT1mdW5jdGlvbihlLHQpe3ZhciByLGk7Zm9yKHZvaWQgMCE9PWUubGVuZ3RoJiZlLmxlbmd0aCYmKGU9ZVswXSksWyJtYXRjaGVzIiwid2Via2l0TWF0Y2hlc1NlbGVjdG9yIiwibW96TWF0Y2hlc1NlbGVjdG9yIiwibXNNYXRjaGVzU2VsZWN0b3IiLCJvTWF0Y2hlc1NlbGVjdG9yIl0uc29tZShmdW5jdGlvbihlKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgZG9jdW1lbnQuYm9keVtlXSYmKHI9ZSwhMCl9KTtudWxsIT09ZTspe2lmKG51bGwhPT0oaT1lLnBhcmVudEVsZW1lbnQpJiZpW3JdKHQpKXJldHVybiBpO2U9aX1yZXR1cm4gbnVsbH0sZy50eXBlPWZ1bmN0aW9uKGUpe3JldHVybiBGdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlLmNvbnN0cnVjdG9yKS5tYXRjaCgvZnVuY3Rpb24gKC4qPylcKC8pWzFdfSxnLmdldEJvcmRlclNpemU9ZnVuY3Rpb24oZSx0KXt2b2lkIDAhPT1lLmxlbmd0aCYmZS5sZW5ndGgmJihlPWVbMF0pO3ZhciByPXcoZSk7dD10PyJib3JkZXIiK3QuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrdC5zbGljZSgxKToiYm9yZGVyIix0Kz0iV2lkdGgiO3ZhciBpPXBhcnNlSW50KHJbdF0sMTApO3JldHVybiBpc05hTihpKT8wOml9LGcuZGV0ZWN0QnJvd3Nlcj1mdW5jdGlvbigpe3ZhciBlPW4ubmF2aWdhdG9yLnVzZXJBZ2VudCx0PXtjaHJvbWU6L2Nocm9tZS9pLHNhZmFyaTovc2FmYXJpL2ksZmlyZWZveDovZmlyZWZveC9pLGllOi9pbnRlcm5ldCBleHBsb3Jlcnx0cmlkZW50XC8vaX07Zm9yKHZhciByIGluIHQpaWYodFtyXS50ZXN0KGUpKXJldHVybiByO3JldHVybiJ1bmtub3duIn0sZy5ydGxTY3JvbGxUeXBlPWZ1bmN0aW9uIGUoKXtpZihlLnR5cGUpcmV0dXJuIGUudHlwZTt2YXIgdD1hbmd1bGFyLmVsZW1lbnQoJzxkaXYgZGlyPSJydGwiIHN0eWxlPSJmb250LXNpemU6IDE0cHg7IHdpZHRoOiAxcHg7IGhlaWdodDogMXB4OyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogLTEwMDBweDsgb3ZlcmZsb3c6IHNjcm9sbCI+QTwvZGl2PicpWzBdLHI9InJldmVyc2UiO3JldHVybiBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHQpLDA8dC5zY3JvbGxMZWZ0P3I9ImRlZmF1bHQiOih0LnNjcm9sbExlZnQ9MSwwPT09dC5zY3JvbGxMZWZ0JiYocj0ibmVnYXRpdmUiKSksYW5ndWxhci5lbGVtZW50KHQpLnJlbW92ZSgpLGUudHlwZT1yfSxnLm5vcm1hbGl6ZVNjcm9sbExlZnQ9ZnVuY3Rpb24oZSx0KXt2b2lkIDAhPT1lLmxlbmd0aCYmZS5sZW5ndGgmJihlPWVbMF0pO3ZhciByPWUuc2Nyb2xsTGVmdDtpZih0LmlzUlRMKCkpc3dpdGNoKGcucnRsU2Nyb2xsVHlwZSgpKXtjYXNlImRlZmF1bHQiOnJldHVybiBlLnNjcm9sbFdpZHRoLXItZS5jbGllbnRXaWR0aDtjYXNlIm5lZ2F0aXZlIjpyZXR1cm4gTWF0aC5hYnMocik7Y2FzZSJyZXZlcnNlIjpyZXR1cm4gcn1yZXR1cm4gcn0sZy5kZW5vcm1hbGl6ZVNjcm9sbExlZnQ9ZnVuY3Rpb24oZSx0LHIpe2lmKHZvaWQgMCE9PWUubGVuZ3RoJiZlLmxlbmd0aCYmKGU9ZVswXSksci5pc1JUTCgpKXN3aXRjaChnLnJ0bFNjcm9sbFR5cGUoKSl7Y2FzZSJkZWZhdWx0IjpyZXR1cm4gZS5zY3JvbGxXaWR0aC1lLmNsaWVudFdpZHRoLXQ7Y2FzZSJuZWdhdGl2ZSI6cmV0dXJuLTEqdDtjYXNlInJldmVyc2UiOnJldHVybiB0fXJldHVybiB0fSxnLnByZUV2YWw9ZnVuY3Rpb24oZSl7dmFyIHQ9dS5CUkFDS0VUX1JFR0VYUC5leGVjKGUpO2lmKHQpcmV0dXJuKHRbMV0/Zy5wcmVFdmFsKHRbMV0pOnRbMV0pK3RbMl0rKHRbM10/Zy5wcmVFdmFsKHRbM10pOnRbM10pO3ZhciByPShlPWUucmVwbGFjZSh1LkFQT1NfUkVHRVhQLCJcXCciKSkuc3BsaXQodS5ET1RfUkVHRVhQKSxpPVtyLnNoaWZ0KCldO3JldHVybiBhbmd1bGFyLmZvckVhY2gocixmdW5jdGlvbihlKXtpLnB1c2goZS5yZXBsYWNlKHUuRlVOQ19SRUdFWFAsIiddJDEiKSl9KSxpLmpvaW4oIlsnIil9LGcuZGVib3VuY2U9ZnVuY3Rpb24odCxyLGkpe3ZhciBuLG8sYSxsO2Z1bmN0aW9uIGUoKXthPXRoaXMsbz1hcmd1bWVudHM7dmFyIGU9aSYmIW47cmV0dXJuIG4mJnMuY2FuY2VsKG4pLG49cyhmdW5jdGlvbigpe249bnVsbCxpfHwobD10LmFwcGx5KGEsbykpfSxyLCExKSxlJiYobD10LmFwcGx5KGEsbykpLGx9cmV0dXJuIGUuY2FuY2VsPWZ1bmN0aW9uKCl7cy5jYW5jZWwobiksbj1udWxsfSxlfSxnLnRocm90dGxlPWZ1bmN0aW9uKHQscixpKXtpPWl8fHt9O3ZhciBuLG8sYT0wLGw9bnVsbDtmdW5jdGlvbiBzKGUpe2E9K25ldyBEYXRlLHQuYXBwbHkobixvKSxkKGZ1bmN0aW9uKCl7bD1udWxsfSwwLDEsITEpfXJldHVybiBmdW5jdGlvbigpe2lmKG49dGhpcyxvPWFyZ3VtZW50cyxudWxsPT09bCl7dmFyIGU9K25ldyBEYXRlLWE7cjxlP3MoKTppLnRyYWlsaW5nJiYobD1kKHMsci1lLDEsITEpKX19fSxnLm9uPXt9LGcub2ZmPXt9LGcuX2V2ZW50cz17fSxnLmFkZE9mZj1mdW5jdGlvbihpKXtnLm9mZltpXT1mdW5jdGlvbihlLHQpe3ZhciByPWcuX2V2ZW50c1tpXS5pbmRleE9mKHQpOzA8ciYmZy5fZXZlbnRzW2ldLnJlbW92ZUF0KHIpfX07dmFyIHAsZixtPSJvbndoZWVsImluIGRvY3VtZW50fHw5PD1kb2N1bWVudC5kb2N1bWVudE1vZGU/WyJ3aGVlbCJdOlsibW91c2V3aGVlbCIsIkRvbU1vdXNlU2Nyb2xsIiwiTW96TW91c2VQaXhlbFNjcm9sbCJdO2Z1bmN0aW9uIGgoZSx0KXt2YXIgcixpPWFuZ3VsYXIuZWxlbWVudCh0aGlzKSxuPTAsbz0wLGE9MDtpZih0Lm9yaWdpbmFsRXZlbnQmJih0PXQub3JpZ2luYWxFdmVudCksImRldGFpbCJpbiB0JiYoYT0tMSp0LmRldGFpbCksIndoZWVsRGVsdGEiaW4gdCYmKGE9dC53aGVlbERlbHRhKSwid2hlZWxEZWx0YVkiaW4gdCYmKGE9dC53aGVlbERlbHRhWSksIndoZWVsRGVsdGFYImluIHQmJihvPS0xKnQud2hlZWxEZWx0YVgpLCJheGlzImluIHQmJnQuYXhpcz09PXQuSE9SSVpPTlRBTF9BWElTJiYobz0tMSphLGE9MCksbj0wPT09YT9vOmEsImRlbHRhWSJpbiB0JiYobj1hPS0xKnQuZGVsdGFZKSwiZGVsdGFYImluIHQmJihvPXQuZGVsdGFYLDA9PT1hJiYobj0tMSpvKSksMCE9PWF8fDAhPT1vKXtpZigxPT09dC5kZWx0YU1vZGUpe3ZhciBsPWkuZGF0YSgibW91c2V3aGVlbC1saW5lLWhlaWdodCIpO24qPWwsYSo9bCxvKj1sfWVsc2UgaWYoMj09PXQuZGVsdGFNb2RlKXt2YXIgcz1pLmRhdGEoIm1vdXNld2hlZWwtcGFnZS1oZWlnaHQiKTtuKj1zLGEqPXMsbyo9c312YXIgZDtyPU1hdGgubWF4KE1hdGguYWJzKGEpLE1hdGguYWJzKG8pKSwoIWZ8fHI8ZikmJihkPWY9ciwibW91c2V3aGVlbCI9PT10LnR5cGUmJmQlMTIwPT0wJiYoZi89NDApKSxuPU1hdGhbMTw9bj8iZmxvb3IiOiJjZWlsIl0obi9mKSxvPU1hdGhbMTw9bz8iZmxvb3IiOiJjZWlsIl0oby9mKSxhPU1hdGhbMTw9YT8iZmxvb3IiOiJjZWlsIl0oYS9mKTt2YXIgdT17b3JpZ2luYWxFdmVudDp0LGRlbHRhWDpvLGRlbHRhWTphLGRlbHRhRmFjdG9yOmYscHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt0LnByZXZlbnREZWZhdWx0KCl9LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3Quc3RvcFByb3BhZ2F0aW9uKCl9fTtwJiZjbGVhclRpbWVvdXQocCkscD1zZXRUaW1lb3V0KHYsMjAwKSxlLmNhbGwoaVswXSx1KX19ZnVuY3Rpb24gdigpe2Y9bnVsbH1yZXR1cm4gZy5vbi5tb3VzZXdoZWVsPWZ1bmN0aW9uKGUsdCl7aWYoZSYmdCl7dmFyIHIsaSxuPWFuZ3VsYXIuZWxlbWVudChlKTtuLmRhdGEoIm1vdXNld2hlZWwtbGluZS1oZWlnaHQiLChyPW4sKGk9KHI9YW5ndWxhci5lbGVtZW50KHIpWzBdKS5wYXJlbnRFbGVtZW50KXx8KGk9ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImJvZHkiKVswXSkscGFyc2VJbnQodyhpKS5mb250U2l6ZSl8fHBhcnNlSW50KHcocikuZm9udFNpemUpfHwxNikpLG4uZGF0YSgibW91c2V3aGVlbC1wYWdlLWhlaWdodCIsZy5lbGVtZW50SGVpZ2h0KG4pKSxuLmRhdGEoIm1vdXNld2hlZWwtY2FsbGJhY2tzIil8fG4uZGF0YSgibW91c2V3aGVlbC1jYWxsYmFja3MiLHt9KTt2YXIgbz1uLmRhdGEoIm1vdXNld2hlZWwtY2FsbGJhY2tzIik7b1t0XT0oRnVuY3Rpb24ucHJvdG90eXBlLmJpbmR8fEMpLmNhbGwoaCxuWzBdLHQpO2Zvcih2YXIgYT1tLmxlbmd0aDthOyluLm9uKG1bLS1hXSxvW3RdKTtuLm9uKCIkZGVzdHJveSIsZnVuY3Rpb24oKXtmb3IodmFyIGU9bS5sZW5ndGg7ZTspbi5vZmYobVstLWVdLG9bdF0pfSl9fSxnLm9mZi5tb3VzZXdoZWVsPWZ1bmN0aW9uKGUsdCl7dmFyIHI9YW5ndWxhci5lbGVtZW50KGUpLGk9ci5kYXRhKCJtb3VzZXdoZWVsLWNhbGxiYWNrcyIpLG49aVt0XTtpZihuKWZvcih2YXIgbz1tLmxlbmd0aDtvOylyLm9mZihtWy0tb10sbik7ZGVsZXRlIGlbdF0sMD09PU9iamVjdC5rZXlzKGkpLmxlbmd0aCYmKHIucmVtb3ZlRGF0YSgibW91c2V3aGVlbC1saW5lLWhlaWdodCIpLHIucmVtb3ZlRGF0YSgibW91c2V3aGVlbC1wYWdlLWhlaWdodCIpLHIucmVtb3ZlRGF0YSgibW91c2V3aGVlbC1jYWxsYmFja3MiKSl9LGd9XSksZS5maWx0ZXIoInB4IixmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gZS5tYXRjaCgvXltcZFwuXSskLyk/ZSsicHgiOmV9fSl9KCksYW5ndWxhci5tb2R1bGUoInVpLmdyaWQiKS5jb25maWcoWyIkcHJvdmlkZSIsZnVuY3Rpb24oZSl7ZS5kZWNvcmF0b3IoImkxOG5TZXJ2aWNlIixbIiRkZWxlZ2F0ZSIsZnVuY3Rpb24oZSl7cmV0dXJuIGUuYWRkKCJhciIse2hlYWRlckNlbGw6e2FyaWE6e2RlZmF1bHRGaWx0ZXJMYWJlbDoi2KfZhNiq2LXZgdmK2Ycg2KjYp9mE2LnZhdmI2K8iLHJlbW92ZUZpbHRlcjoi2YXYrdmIINin2YTYqti12YHZitmHIixjb2x1bW5NZW51QnV0dG9uTGFiZWw6ItmC2KfYodmF2Ycg2KfZhNin2LnZhdiv2YcifSxwcmlvcml0eToi2KPZiNmE2YjZitmHIDogIixmaWx0ZXJMYWJlbDoi2KrYtdmB2YrZhyDYqNin2YTYp9i52YXYr9mHIDoifSxhZ2dyZWdhdGU6e2xhYmVsOiLYp9mE2LnZhtin2LXYsSJ9LGdyb3VwUGFuZWw6e2Rlc2NyaXB0aW9uOiLYp9iz2K3YqCDYsdij2LMg2KfZhNi52YXZiNivINmH2YbYpyDZiNij2LPZgti32Ycg2YTYpdmG2LTYp9ihINmF2KzZhdmI2LnZhyJ9LHNlYXJjaDp7cGxhY2Vob2xkZXI6Itio2K3YqyAgLi4uIixzaG93aW5nSXRlbXM6Itin2YTYudmG2KfYtdixINin2YTYuNin2YfYsdmHIDoiLHNlbGVjdGVkSXRlbXM6Itin2YTYudmG2KfYtdixINin2YTZhdit2K/Yr9mHIDoiLHRvdGFsSXRlbXM6Iti52K/YryDYp9mE2LnZhtin2LXYsSA6IixzaXplOiLYrdis2YUg2KfZhNi12YHYrdmHIDoiLGZpcnN0OiLYp9mI2YQg2LXZgdit2YciLG5leHQ6Itin2YTYtdmB2K3ZhyDYp9mE2KrYp9mE2YrZhyIscHJldmlvdXM6Itin2YTYtdmB2K3ZhyDYp9mE2LXYp9io2YLZhyIsbGFzdDoi2KfZhNi12YHYrdmHINin2YTYp9iu2YrYsdmHIn0sbWVudTp7dGV4dDoi2KfYrtiq2YrYp9ixINin2YTYudmF2YjYryA6In0sc29ydDp7YXNjZW5kaW5nOiLYqtix2KrZitioINiq2LXYp9i52K/ZiSIsZGVzY2VuZGluZzoi2KrYsdiq2YrYqCDYqtmG2KfYstmE2YkiLG5vbmU6Iti52K/ZhSDYp9mE2KrYrdiv2YrYryIscmVtb3ZlOiLYrdiw2YEg2KfZhNiq2LHYqtmK2KgifSxjb2x1bW46e2hpZGU6Itil2K7Zgdin2KEg2LnZhdmI2K8ifSxhZ2dyZWdhdGlvbjp7Y291bnQ6Iti52K/YryDYp9mE2LXZgdmI2YE6ICIsc3VtOiLYrNmF2Lk6ICIsYXZnOiLYp9mE2YXYqtmI2LPYtyDYp9mE2K3Ys9in2KjZiTogIixtaW46Itin2YTYp9iv2YbZiTogIixtYXg6Itin2YTYp9mC2LXZiTogIn0scGlubmluZzp7cGluTGVmdDoi2KrYq9io2YrYqiDZhNmE2YrYs9in2LEiLHBpblJpZ2h0OiLYqtir2KjZitiqINmE2YTZitmF2YrZhiIsdW5waW46ItmB2YMg2KfZhNiq2KvYqNmK2KoifSxjb2x1bW5NZW51OntjbG9zZToi2LrZhNmCIn0sZ3JpZE1lbnU6e2FyaWE6e2J1dHRvbkxhYmVsOiLZgtin2KbZhdmHINin2YTYrNiv2YjZhCJ9LGNvbHVtbnM6Itin2YTYp9i52YXYr9mHOiIsaW1wb3J0ZXJUaXRsZToi2KXYr9iu2KfZhCDZhdmE2YEiLGV4cG9ydGVyQWxsQXNDc3Y6Itil2K7Ysdin2Kwg2YPZhCDYp9mE2KjZitin2YbYp9iqINmDKGNzdikiLGV4cG9ydGVyVmlzaWJsZUFzQ3N2OiLYpdiu2LHYp9isINmD2YQg2KfZhNio2YrYp9mG2KfYqiDYp9mE2YjYp9i22K3ZhyDZgyAoY3N2KSIsZXhwb3J0ZXJTZWxlY3RlZEFzQ3N2OiLYpdiu2LHYp9isINmD2YQg2KfZhNio2YrYp9mG2KfYqiDYp9mE2YXYrdiv2K/ZhyDZgyAoY3N2KSIsZXhwb3J0ZXJBbGxBc1BkZjoi2KXYrtix2KfYrCDZg9mEINin2YTYqNmK2KfZhtin2Kog2YMocGRmKSIsZXhwb3J0ZXJWaXNpYmxlQXNQZGY6Itil2K7Ysdin2Kwg2YPZhCDYp9mE2KjZitin2YbYp9iqINin2YTZiNin2LbYrdmHINmDIChwZGYpIixleHBvcnRlclNlbGVjdGVkQXNQZGY6Itil2K7Ysdin2Kwg2YPZhCDYp9mE2KjZitin2YbYp9iqINin2YTZhdit2K/Yr9mHINmDIChwZGYpIixjbGVhckFsbEZpbHRlcnM6ItmF2K3ZiCDZg9mEINin2YTYqtix2LTZititIn0saW1wb3J0ZXI6e25vSGVhZGVyczoi2KfYs9mF2KfYoSDZh9ik2YTYp9ihINin2YTYp9i52YXYr9mHINi62YrYsSDZiNin2LbYrdmH2Iwg2YfZhCDZitmI2KzYryDYsdij2LMg2YTZhNmF2YTZgdifIixub09iamVjdHM6Ik9iamVjdHMgd2VyZSBub3QgYWJsZSB0byBiZSBkZXJpdmVkLCB3YXMgdGhlcmUgZGF0YSBpbiB0aGUgZmlsZSBvdGhlciB0aGFuIGhlYWRlcnM/IixpbnZhbGlkQ3N2OiLYp9mE2YXZhNmBINi62YrYsSDZgtin2K/YsSDYudmE2Ykg2KfZhNin2KrZhdin2YUg2Iwg2YfZhCDYp9mEIChDU1YpINi12K3Zitit2J8iLGludmFsaWRKc29uOiLYp9mE2YXZhNmBINi62YrYsSDZgtin2K/YsSDYudmE2Ykg2KfZhNin2KrZhdin2YUg2Iwg2YfZhCDYp9mEIChKU09OKSDYtdit2YrYrdifIixqc29uTm90QXJyYXk6IkltcG9ydGVkIGpzb24gZmlsZSBtdXN0IGNvbnRhaW4gYW4gYXJyYXksIGFib3J0aW5nLiJ9LHBhZ2luYXRpb246e2FyaWE6e3BhZ2VUb0ZpcnN0OiLYp9mE2LXZgdit2Ycg2KfZhNin2YjZhNmJIixwYWdlQmFjazoi2KfZhNi12YHZhyDYp9mE2LPYp9io2YLZhyIscGFnZVNlbGVjdGVkOiLYp9mE2LXZgdit2Ycg2KfZhNmF2K3Yr9iv2YciLHBhZ2VGb3J3YXJkOiLYp9mE2LXZgdit2Ycg2KfZhNiq2KfZhNmK2YciLHBhZ2VUb0xhc3Q6Itin2YTYtdmB2K3ZhyDYp9mE2KfYrtmK2LHZhyJ9LHNpemVzOiLYudiv2K8g2KfZhNi52YbYp9i12LEg2YHZiSDYp9mE2LXZgdit2YciLHRvdGFsSXRlbXM6Iti52YbYp9i12LEiLHRocm91Z2g6Itil2YTZiSIsb2Y6ItmF2YYifSxncm91cGluZzp7Z3JvdXA6Itis2YXYuSIsdW5ncm91cDoi2YHZgyDYp9mE2KzZhdi5IixhZ2dyZWdhdGVfY291bnQ6Itis2YXZhNmHIDog2KfZhNi52K/YryIsYWdncmVnYXRlX3N1bToi2KzZhdmE2YcgOiDYp9mE2K3Yp9i12YQiLGFnZ3JlZ2F0ZV9tYXg6Itis2YXZhNmHIDog2KfZhNin2YLYtdmJIixhZ2dyZWdhdGVfbWluOiLYrNmF2YTZhyA6INin2YTYp9mC2YQiLGFnZ3JlZ2F0ZV9hdmc6Itis2YXZhNmHIDrYp9mE2YXYqtmI2LPYtyAiLGFnZ3JlZ2F0ZV9yZW1vdmU6Itis2YXZhNmHIDog2K3YsNmBIn0sdmFsaWRhdGU6e2Vycm9yOiLYrti32KMgOiIsbWluTGVuZ3RoOiLYp9mE2YLZitmF2Ycg2YTYp9io2K8g2KfZhiDZhNinINiq2YLZhCDYudmGIFRIUkVTSE9MRCDYrdix2YEuIixtYXhMZW5ndGg6Itin2YTZgtmK2YXZhyDZhNin2KjYryDYp9mGINmE2Kcg2KrYstmK2K8g2LnZhiBUSFJFU0hPTEQg2K3YsdmBLiIscmVxdWlyZWQ6ItmF2LfZhNmI2Kgg2YLZitmF2YcifX0pLGV9XSl9XSksYW5ndWxhci5tb2R1bGUoInVpLmdyaWQiKS5jb25maWcoWyIkcHJvdmlkZSIsZnVuY3Rpb24oZSl7ZS5kZWNvcmF0b3IoImkxOG5TZXJ2aWNlIixbIiRkZWxlZ2F0ZSIsZnVuY3Rpb24oZSl7cmV0dXJuIGUuYWRkKCJiZyIse2hlYWRlckNlbGw6e2FyaWE6e2RlZmF1bHRGaWx0ZXJMYWJlbDoi0KTQuNC70YLRgtGK0YAg0LfQsCDQutC+0LvQvtC90LDRgtCwIixyZW1vdmVGaWx0ZXI6ItCf0YDQtdC80LDRhdC90Lgg0YTQuNC70YLRitGAIixjb2x1bW5NZW51QnV0dG9uTGFiZWw6ItCc0LXQvdGOINC90LAg0LrQvtC70L7QvdCw0YLQsCJ9LHByaW9yaXR5OiLQn9GA0LjQvtGA0LjRgtC10YI6IixmaWx0ZXJMYWJlbDoi0KTQuNC70YLRitGAINC30LAg0LrQvtC70L7QvdCw0YLQsDogIn0sYWdncmVnYXRlOntsYWJlbDoi0L7QsdC10LrRgtC4In0sc2VhcmNoOntwbGFjZWhvbGRlcjoi0KLRitGA0YHQtdC90LUuLi4iLHNob3dpbmdJdGVtczoi0J/QvtC60LDQt9Cw0L3QuCDQvtCx0LXQutGC0Lg6IixzZWxlY3RlZEl0ZW1zOiLQuNC30LHRgNCw0L3QuCDQvtCx0LXQutGC0Lg6Iix0b3RhbEl0ZW1zOiLQntCx0YnQvjoiLHNpemU6ItCg0LDQt9C80LXRgCDQvdCwINGB0YLRgNCw0L3QuNGG0LDRgtCwOiIsZmlyc3Q6ItCf0YrRgNCy0LAg0YHRgtGA0LDQvdC40YbQsCIsbmV4dDoi0KHQu9C10LTQstCw0YnQsCDRgdGC0YDQsNC90LjRhtCwIixwcmV2aW91czoi0J/RgNC10LTQuNGI0L3QsCDRgdGC0YDQsNC90LjRhtCwIixsYXN0OiLQn9C+0YHQu9C10LTQvdCwINGB0YLRgNCw0L3QuNGG0LAifSxtZW51Ont0ZXh0OiLQmNC30LHQtdGA0Lgg0LrQvtC70L7QvdC4OiJ9LHNvcnQ6e2FzY2VuZGluZzoi0KHQvtGA0YLQuNGA0LDQvdC1INC/0L4g0LLRitC30YXQvtC00Y/RiSDRgNC10LQiLGRlc2NlbmRpbmc6ItCh0L7RgNGC0LjRgNCw0L3QtSDQv9C+INC90LjQt9GF0L7QtNGP0Ykg0YDQtdC0Iixub25lOiLQkdC10Lcg0YHQvtGA0YLQuNGA0LDQvdC1IixyZW1vdmU6ItCf0YDQtdC80LDRhdC90Lgg0YHQvtGA0YLQuNGA0LDQvdC10YLQviJ9LGNvbHVtbjp7aGlkZToi0KHQutGA0LjQuSDQutC+0LvQvtC90LDRgtCwIn0sYWdncmVnYXRpb246e2NvdW50OiLQntCx0YnQviDRgNC10LTQvtCy0LU6ICIsc3VtOiLQvtCx0YnQvjogIixhdmc6ItGB0YDQtdC00L3QvjogIixtaW46ItC90LDQuS3QvNCw0LvQutC+OiAiLG1heDoi0L3QsNC5LdC80L3QvtCz0L46ICJ9LHBpbm5pbmc6e3BpbkxlZnQ6ItCf0YDQuNC60YDQtdC/0Lgg0LLQu9GP0LLQviIscGluUmlnaHQ6ItCf0YDQuNC60YDQtdC/0Lgg0LLQtNGP0YHQvdC+Iix1bnBpbjoi0J/RgNC10LzQsNGF0LLQsNC90LUifSxjb2x1bW5NZW51OntjbG9zZToi0JfQsNGC0LLQvtGA0LgifSxncmlkTWVudTp7YXJpYTp7YnV0dG9uTGFiZWw6ItCc0LXQvdGOINC90LAg0YLQsNCx0LvQuNGG0LDRgtCwIn0sY29sdW1uczoi0JrQvtC70L7QvdC4OiIsaW1wb3J0ZXJUaXRsZToi0JjQvNC/0L7RgNGC0LjRgNCw0L3QtSDQvdCwINGE0LDQudC7IixleHBvcnRlckFsbEFzQ3N2OiLQldC60YHQv9C+0YDRgtC40YDQsNC90LUg0L3QsCDQtNCw0L3QvdC40YLQtSDQutCw0YLQviBjc3YiLGV4cG9ydGVyVmlzaWJsZUFzQ3N2OiLQldC60YHQv9C+0YDRgtC40YDQsNC90LUg0L3QsCDQstC40LTQuNC80LjRgtC1INC00LDQvdC90Lgg0LrQsNGC0L4gY3N2IixleHBvcnRlclNlbGVjdGVkQXNDc3Y6ItCV0LrRgdC/0L7RgNGC0LjRgNCw0L3QtSDQvdCwINC40LfQsdGA0LDQvdC40YLQtSDQtNCw0L3QvdC4INC60LDRgtC+IGNzdiIsZXhwb3J0ZXJBbGxBc1BkZjoi0JXQutGB0L/QvtGA0YLQuNGA0LDQvdC1INC90LAg0LTQsNC90L3QuNGC0LUg0LrQsNGC0L4gcGRmIixleHBvcnRlclZpc2libGVBc1BkZjoi0JXQutGB0L/QvtGA0YLQuNGA0LDQvdC1INC90LAg0LLQuNC00LjQvNC40YLQtSDQtNCw0L3QvdC4INC60LDRgtC+IHBkZiIsZXhwb3J0ZXJTZWxlY3RlZEFzUGRmOiLQldC60YHQv9C+0YDRgtC40YDQsNC90LUg0L3QsCDQuNC30LHRgNCw0L3QuNGC0LUg0LTQsNC90L3QuCDQutCw0YLQviBwZGYiLGNsZWFyQWxsRmlsdGVyczoi0J/RgNC10LzQsNGF0L3QuCDQstGB0LjRh9C60Lgg0YTQuNC70YLRgNC4In0saW1wb3J0ZXI6e25vSGVhZGVyczoi0JjQvNC10L3QsNGC0LAg0L3QsCDQutC+0LvQvtC90LjRgtC1INC90LUg0YPRgdC/0Y/RhdCwINC00LAg0LHRitC00LDRgiDQuNC30LLQu9C10YfQtdC90LgsINGE0LDQudC70YrRgiDQuNC80LAg0LvQuCDRhdC10LTRitGAPyIsbm9PYmplY3RzOiLQntCx0LXQutGC0LjRgtC1INC90LUg0YPRgdC/0Y/RhdCwINC00LAg0LHRitC00LDRgiDQuNC30LLQu9C10YfQtdC90LgsINGE0LDQudC70YrRgiDRgdGK0LTRitGA0LbQsCDQu9C4INC00LDQvdC90LgsINGA0LDQt9C70LjRh9C90Lgg0L7RgiDRhdC10LTRitGAPyIsaW52YWxpZENzdjoi0KTQsNC50LvRitGCINC90LUg0LzQvtC20LUg0LTQsCDQsdGK0LTQtSDQvtCx0YDQsNCx0L7RgtC10LEsINGD0LLQtdGA0LXRgtC1INGB0LUsINGH0LUg0LUg0LLQsNC70LjQtNC10L0gQ1NWINGE0LDQudC7IixpbnZhbGlkSnNvbjoi0KTQsNC50LvRitGCINC90LUg0LzQvtC20LUg0LTQsCDQsdGK0LTQtSDQvtCx0YDQsNCx0L7RgtC10LEsINGD0LLQtdGA0LXRgtC1INGB0LUsINGH0LUg0LUg0LLQsNC70LjQtNC10L0gSlNPTiDRhNCw0LnQuyIsanNvbk5vdEFycmF5OiLQmNC80L/QvtGA0YLQuNGA0LDQvdC40Y/RgiBKU09OINGE0LDQudC7INGC0YDRj9Cx0LLQsCDQtNCwINGB0YrQtNGK0YDQttCwINC80LDRgdC40LIsINC/0YDQtdC60YDQsNGC0Y/QstCw0L3QtS4ifSxwYWdpbmF0aW9uOnthcmlhOntwYWdlVG9GaXJzdDoi0JrRitC8INC/0YrRgNCy0LAg0YHRgtGA0LDQvdC40YbQsCIscGFnZUJhY2s6ItCh0YLRgNCw0L3QuNGG0LAg0L3QsNC30LDQtCIscGFnZVNlbGVjdGVkOiLQmNC30LHRgNCw0L3QsCDRgdGC0YDQsNC90LjRhtCwIixwYWdlRm9yd2FyZDoi0KHRgtGA0LDQvdC40YbQsCDQvdCw0L/RgNC10LQiLHBhZ2VUb0xhc3Q6ItCa0YrQvCDQv9C+0YHQu9C10LTQvdCwINGB0YLRgNCw0L3QuNGG0LAifSxzaXplczoi0L7QsdC10LrRgtCwINC90LAg0YHRgtGA0LDQvdC40YbQsCIsdG90YWxJdGVtczoi0L7QsdC10LrRgtCwIix0aHJvdWdoOiLQtNC+IixvZjoi0L7RgiJ9LGdyb3VwaW5nOntncm91cDoi0JPRgNGD0L/QuNGA0LDQvdC1Iix1bmdyb3VwOiLQn9GA0LXQvNCw0YXQstCw0L3QtSDQvdCwINCz0YDRg9C/0LjRgNCw0L3QtdGC0L4iLGFnZ3JlZ2F0ZV9jb3VudDoi0KHQsdC+0YA6INCR0YDQvtC5IixhZ2dyZWdhdGVfc3VtOiLQodCx0L7RgDog0KHRg9C80LAiLGFnZ3JlZ2F0ZV9tYXg6ItCh0LHQvtGAOiDQnNCw0LrRgdC40LzRg9C8IixhZ2dyZWdhdGVfbWluOiLQodCx0L7RgDog0JzQuNC90LjQvNGD0LwiLGFnZ3JlZ2F0ZV9hdmc6ItCh0LHQvtGAOiDQodGA0LXQtNC90L4iLGFnZ3JlZ2F0ZV9yZW1vdmU6ItCh0LHQvtGAOiDQn9GA0LXQvNCw0YXQstCw0L3QtSJ9LHZhbGlkYXRlOntlcnJvcjoi0JPRgNC10YjQutCwOiIsbWluTGVuZ3RoOiLQodGC0L7QudC90L7RgdGC0YLQsCDRgtGA0Y/QsdCy0LAg0LTQsCDRgdGK0LTRitGA0LbQsCDQv9C+0L3QtSBUSFJFU0hPTEQg0YHQuNC80LLQvtC70LAuIixtYXhMZW5ndGg6ItCh0YLQvtC50L3QvtGB0YLRgtCwINC90LUg0YLRgNGP0LHQstCwINC00LAg0YHRitC00YrRgNC20LAg0L/QvtCy0LXRh9C1INC+0YIgVEhSRVNIT0xEINGB0LjQvNCy0L7Qu9CwLiIscmVxdWlyZWQ6ItCd0LXQvtCx0YXQvtC00LjQvNCwINC1INGB0YLQvtC50L3QvtGB0YIuIn19KSxlfV0pfV0pLGFuZ3VsYXIubW9kdWxlKCJ1aS5ncmlkIikuY29uZmlnKFsiJHByb3ZpZGUiLGZ1bmN0aW9uKGUpe2UuZGVjb3JhdG9yKCJpMThuU2VydmljZSIsWyIkZGVsZWdhdGUiLGZ1bmN0aW9uKGUpe3ZhciB0PXthZ2dyZWdhdGU6e2xhYmVsOiJwb2xvxb5reSJ9LGdyb3VwUGFuZWw6e2Rlc2NyaXB0aW9uOiJQxZllc3XFiHRlIHrDoWhsYXbDrSB6ZGUgcHJvIHZ5dHZvxZllbsOtIHNrdXBpbnkgZGxlIHNsb3VwY2UuIn0sc2VhcmNoOntwbGFjZWhvbGRlcjoiSGxlZGF0Li4uIixzaG93aW5nSXRlbXM6IlpvYnJhenVqaSBwb2xvxb5reToiLHNlbGVjdGVkSXRlbXM6IlZ5YnJhbsOpIHBvbG/Fvmt5OiIsdG90YWxJdGVtczoiQ2Vsa2VtIHBvbG/FvmVrOiIsc2l6ZToiVmVsaWtvc3Qgc3RyYW55OiIsZmlyc3Q6IlBydm7DrSBzdHJhbmEiLG5leHQ6IkRhbMWhw60gc3RyYW5hIixwcmV2aW91czoiUMWZZWRjaG96w60gc3RyYW5hIixsYXN0OiJQb3NsZWRuw60gc3RyYW5hIn0sbWVudTp7dGV4dDoiVnliZXJ0ZSBzbG91cGVjOiJ9LHNvcnQ6e2FzY2VuZGluZzoiU2XFmWFkaXQgb2QgQS1aIixkZXNjZW5kaW5nOiJTZcWZYWRpdCBvZCBaLUEiLHJlbW92ZToiT2RlYnJhdCBzZcWZYXplbsOtIn0sY29sdW1uOntoaWRlOiJTY2hvdmF0IHNsb3VwZWMifSxhZ2dyZWdhdGlvbjp7Y291bnQ6ImNlbGtlbSDFmcOhZGvFrzogIixzdW06ImNlbGtlbTogIixhdmc6ImF2ZzogIixtaW46Im1pbi46ICIsbWF4OiJtYXguOiAifSxwaW5uaW5nOntwaW5MZWZ0OiJaYW1rbm91dCB2bGV2byIscGluUmlnaHQ6IlphbWtub3V0IHZwcmF2byIsdW5waW46Ik9kZW1rbm91dCJ9LGdyaWRNZW51Ontjb2x1bW5zOiJTbG91cGNlOiIsaW1wb3J0ZXJUaXRsZToiSW1wb3J0b3ZhdCBzb3Vib3IiLGV4cG9ydGVyQWxsQXNDc3Y6IkV4cG9ydG92YXQgdsWhZWNobmEgZGF0YSBkbyBjc3YiLGV4cG9ydGVyVmlzaWJsZUFzQ3N2OiJFeHBvcnRvdmF0IHZpZGl0ZWxuw6EgZGF0YSBkbyBjc3YiLGV4cG9ydGVyU2VsZWN0ZWRBc0NzdjoiRXhwb3J0b3ZhdCB2eWJyYW7DoSBkYXRhIGRvIGNzdiIsZXhwb3J0ZXJBbGxBc1BkZjoiRXhwb3J0b3ZhdCB2xaFlY2huYSBkYXRhIGRvIHBkZiIsZXhwb3J0ZXJWaXNpYmxlQXNQZGY6IkV4cG9ydG92YXQgdmlkaXRlbG7DoSBkYXRhIGRvIHBkZiIsZXhwb3J0ZXJTZWxlY3RlZEFzUGRmOiJFeHBvcnRvdmF0IHZ5YnJhbsOhIGRhdGEgZG8gcGRmIixleHBvcnRlckFsbEFzRXhjZWw6IkV4cG9ydG92YXQgdsWhZWNobmEgZGF0YSBkbyBleGNlbCIsZXhwb3J0ZXJWaXNpYmxlQXNFeGNlbDoiRXhwb3J0b3ZhdCB2aWRpdGVsbsOhIGRhdGEgZG8gZXhjZWwiLGV4cG9ydGVyU2VsZWN0ZWRBc0V4Y2VsOiJFeHBvcnRvdmF0IHZ5YnJhbsOhIGRhdGEgZG8gZXhjZWwiLGNsZWFyQWxsRmlsdGVyczoiT2RzdHJhbml0IHbFoWVjaG55IGZpbHRyeSJ9LGltcG9ydGVyOntub0hlYWRlcnM6Ik7DoXp2eSBzbG91cGPFryBzZSBuZXBvZGHFmWlsbyB6w61za2F0LCBvYnNhaHVqZSBzb3Vib3IgesOhaGxhdsOtPyIsbm9PYmplY3RzOiJEYXRhIHNlIG5lcG9kYcWZaWxvIHpwcmFjb3ZhdCwgb2JzYWh1amUgc291Ym9yIMWZw6Fka3kgbWltbyB6w6FobGF2w60/IixpbnZhbGlkQ3N2OiJTb3Vib3IgbmVsemUgenByYWNvdmF0LCBqZWRuw6Egc2UgbyBDU1Y/IixpbnZhbGlkSnNvbjoiU291Ym9yIG5lbHplIHpwcmFjb3ZhdCwgamUgdG8gSlNPTj8iLGpzb25Ob3RBcnJheToiU291Ym9yIG11c8OtIG9ic2Fob3ZhdCBqc29uLiBVa29uxI11amkuLiJ9LHBhZ2luYXRpb246e3NpemVzOiJwb2xvxb5layBuYSBzdHLDoW5rdSIsdG90YWxJdGVtczoicG9sb8W+ZWsifSxncm91cGluZzp7Z3JvdXA6IlNlc2t1cGl0Iix1bmdyb3VwOiJPZGVicmF0IHNlc2t1cGVuw60iLGFnZ3JlZ2F0ZV9jb3VudDoiQWdyZWdhY2U6IENvdW50IixhZ2dyZWdhdGVfc3VtOiJBZ3JlZ2FjZTogU3VtIixhZ2dyZWdhdGVfbWF4OiJBZ3JlZ2FjZTogTWF4IixhZ2dyZWdhdGVfbWluOiJBZ3JlZ2FjZTogTWluIixhZ2dyZWdhdGVfYXZnOiJBZ3JlZ2FjZTogQXZnIixhZ2dyZWdhdGVfcmVtb3ZlOiJBZ3JlZ2FjZTogT2RlYnJhdCJ9fTtyZXR1cm4gZS5hZGQoImNzIix0KSxlLmFkZCgiY3oiLHQpLGUuYWRkKCJjcy1jeiIsdCksZS5hZGQoImNzLUNaIix0KSxlfV0pfV0pLGFuZ3VsYXIubW9kdWxlKCJ1aS5ncmlkIikuY29uZmlnKFsiJHByb3ZpZGUiLGZ1bmN0aW9uKGUpe2UuZGVjb3JhdG9yKCJpMThuU2VydmljZSIsWyIkZGVsZWdhdGUiLGZ1bmN0aW9uKGUpe3JldHVybiBlLmFkZCgiZGEiLHthZ2dyZWdhdGU6e2xhYmVsOiJhcnRpa2xlciJ9LGdyb3VwUGFuZWw6e2Rlc2NyaXB0aW9uOiJHcnVww6lyIHLDpmtrZXIgdWRmcmEgZW4ga29sb25uZSB2ZWQgYXQgdHLDpmtrZSBkZW5zIG92ZXJza2lmdCBoZXJ0aWwuIn0sc2VhcmNoOntwbGFjZWhvbGRlcjoiU8O4Zy4uLiIsc2hvd2luZ0l0ZW1zOiJWaXN0ZSByw6Zra2VyOiIsc2VsZWN0ZWRJdGVtczoiVmFsZ3RlIHLDpmtrZXI6Iix0b3RhbEl0ZW1zOiJSw6Zra2VyIHRvdGFsdDoiLHNpemU6IlNpZGUgc3TDuHJyZWxzZToiLGZpcnN0OiJGw7hyc3RlIHNpZGUiLG5leHQ6Ik7DpnN0ZSBzaWRlIixwcmV2aW91czoiRm9ycmlnZSBzaWRlIixsYXN0OiJTaWRzdGUgc2lkZSJ9LG1lbnU6e3RleHQ6IlbDpmxnIGtvbG9ubmVyOiJ9LHNvcnQ6e2FzY2VuZGluZzoiU29ydGVyIHN0aWdlbmRlIixkZXNjZW5kaW5nOiJTb3J0ZXIgZmFsZGVuZGUiLG5vbmU6IlNvcnRlciBpbmdlbiIscmVtb3ZlOiJGamVybiBzb3J0ZXJpbmcifSxjb2x1bW46e2hpZGU6IlNranVsIGtvbG9ubmUifSxhZ2dyZWdhdGlvbjp7Y291bnQ6ImFudGFsIHLDpmtrZXI6ICIsc3VtOiJzdW06ICIsYXZnOiJnbnM6ICIsbWluOiJtaW46ICIsbWF4OiJtYXg6ICJ9LGdyaWRNZW51Ontjb2x1bW5zOiJLb2xvbm5lcjoiLGltcG9ydGVyVGl0bGU6IkltcG9ydGVyIGZpbCIsZXhwb3J0ZXJBbGxBc0NzdjoiRWtzcG9ydGVyIGFsbGUgZGF0YSBzb20gY3N2IixleHBvcnRlclZpc2libGVBc0NzdjoiRWtzcG9ydGVyIHN5bmxpZ2UgZGF0YSBzb20gY3N2IixleHBvcnRlclNlbGVjdGVkQXNDc3Y6IkVrc3BvcnRlciBtYXJrZXJlZGUgZGF0YSBzb20gY3N2IixleHBvcnRlckFsbEFzUGRmOiJFa3Nwb3J0ZXIgYWxsZSBkYXRhIHNvbSBwZGYiLGV4cG9ydGVyVmlzaWJsZUFzUGRmOiJFa3Nwb3J0ZXIgc3lubGlnZSBkYXRhIHNvbSBwZGYiLGV4cG9ydGVyU2VsZWN0ZWRBc1BkZjoiRWtzcG9ydGVyIG1hcmtlcmVkZSBkYXRhIHNvbSBwZGYiLGV4cG9ydGVyQWxsQXNFeGNlbDoiRWtzcG9ydGVyIGFsbGUgZGF0YSBzb20gZXhjZWwiLGV4cG9ydGVyVmlzaWJsZUFzRXhjZWw6IkVrc3BvcnRlciBzeW5saWdlIGRhdGEgc29tIGV4Y2VsIixleHBvcnRlclNlbGVjdGVkQXNFeGNlbDoiRWtzcG9ydGVyIG1hcmtlcmVkZSBkYXRhIHNvbSBleGNlbCIsY2xlYXJBbGxGaWx0ZXJzOiJDbGVhciBhbGwgZmlsdGVycyJ9LGltcG9ydGVyOntub0hlYWRlcnM6IkNvbHVtbiBuYW1lcyB3ZXJlIHVuYWJsZSB0byBiZSBkZXJpdmVkLCBkb2VzIHRoZSBmaWxlIGhhdmUgYSBoZWFkZXI/Iixub09iamVjdHM6Ik9iamVjdHMgd2VyZSBub3QgYWJsZSB0byBiZSBkZXJpdmVkLCB3YXMgdGhlcmUgZGF0YSBpbiB0aGUgZmlsZSBvdGhlciB0aGFuIGhlYWRlcnM/IixpbnZhbGlkQ3N2OiJGaWxlIHdhcyB1bmFibGUgdG8gYmUgcHJvY2Vzc2VkLCBpcyBpdCB2YWxpZCBDU1Y/IixpbnZhbGlkSnNvbjoiRmlsZSB3YXMgdW5hYmxlIHRvIGJlIHByb2Nlc3NlZCwgaXMgaXQgdmFsaWQgSnNvbj8iLGpzb25Ob3RBcnJheToiSW1wb3J0ZWQganNvbiBmaWxlIG11c3QgY29udGFpbiBhbiBhcnJheSwgYWJvcnRpbmcuIn0scGFnaW5hdGlvbjp7YXJpYTp7cGFnZVRvRmlyc3Q6IkfDpSB0aWwgZsO4cnN0ZSIscGFnZUJhY2s6IkfDpSB0aWxiYWdlIixwYWdlU2VsZWN0ZWQ6IlZhbGd0ZSBzaWRlIixwYWdlRm9yd2FyZDoiR8OlIGZyZW0iLHBhZ2VUb0xhc3Q6IkfDpSB0aWwgc2lkc3RlIn0sc2l6ZXM6ImdlbnN0YW5kZSBwZXIgc2lkZSIsdG90YWxJdGVtczoiZ2Vuc3RhbmRlIix0aHJvdWdoOiJnZW5uZW0iLG9mOiJhZiJ9fSksZX1dKX1dKSxhbmd1bGFyLm1vZHVsZSgidWkuZ3JpZCIpLmNvbmZpZyhbIiRwcm92aWRlIixmdW5jdGlvbihlKXtlLmRlY29yYXRvcigiaTE4blNlcnZpY2UiLFsiJGRlbGVnYXRlIixmdW5jdGlvbihlKXtyZXR1cm4gZS5hZGQoImRlIix7aGVhZGVyQ2VsbDp7YXJpYTp7ZGVmYXVsdEZpbHRlckxhYmVsOiJGaWx0ZXIgZsO8ciBTcGFsdGUiLHJlbW92ZUZpbHRlcjoiRmlsdGVyIGzDtnNjaGVuIixjb2x1bW5NZW51QnV0dG9uTGFiZWw6IlNwYWx0ZW5tZW7DvCIsY29sdW1uOiJTcGFsdGUifSxwcmlvcml0eToiUHJpb3JpdMOkdDoiLGZpbHRlckxhYmVsOiJGaWx0ZXIgZsO8ciBTcGFsdGU6ICJ9LGFnZ3JlZ2F0ZTp7bGFiZWw6IkVpbnRyYWcifSxncm91cFBhbmVsOntkZXNjcmlwdGlvbjoiWmllaGVuIFNpZSBlaW5lIFNwYWx0ZW7DvGJlcnNjaHJpZnQgaGllcmhpbiwgdW0gbmFjaCBkaWVzZXIgU3BhbHRlIHp1IGdydXBwaWVyZW4uIn0sc2VhcmNoOnthcmlhOntzZWxlY3RlZDoiWmVpbGUgbWFya2llcnQiLG5vdFNlbGVjdGVkOiJaZWlsZSBuaWNodCBtYXJraWVydCJ9LHBsYWNlaG9sZGVyOiJTdWNoZS4uLiIsc2hvd2luZ0l0ZW1zOiJaZWlnZSBFaW50csOkZ2U6IixzZWxlY3RlZEl0ZW1zOiJBdXNnZXfDpGhsdGUgRWludHLDpGdlOiIsdG90YWxJdGVtczoiRWludHLDpGdlIGdlc2FtdDoiLHNpemU6IkVpbnRyw6RnZSBwcm8gU2VpdGU6IixmaXJzdDoiRXJzdGUgU2VpdGUiLG5leHQ6Ik7DpGNoc3RlIFNlaXRlIixwcmV2aW91czoiVm9yaGVyaWdlIFNlaXRlIixsYXN0OiJMZXR6dGUgU2VpdGUifSxtZW51Ont0ZXh0OiJTcGFsdGVuIGF1c3fDpGhsZW46In0sc29ydDp7YXNjZW5kaW5nOiJhdWZzdGVpZ2VuZCBzb3J0aWVyZW4iLGRlc2NlbmRpbmc6ImFic3RlaWdlbmQgc29ydGllcmVuIixub25lOiJrZWluZSBTb3J0aWVydW5nIixyZW1vdmU6IlNvcnRpZXJ1bmcgenVyw7xja3NldHplbiJ9LGNvbHVtbjp7aGlkZToiU3BhbHRlIGF1c2JsZW5kZW4ifSxhZ2dyZWdhdGlvbjp7Y291bnQ6IlplaWxlbiBpbnNnZXNhbXQ6ICIsc3VtOiJnZXNhbXQ6ICIsYXZnOiJEdXJjaHNjaG5pdHQ6ICIsbWluOiJtaW46ICIsbWF4OiJtYXg6ICJ9LHBpbm5pbmc6e3BpbkxlZnQ6IkxpbmtzIGFuaGVmdGVuIixwaW5SaWdodDoiUmVjaHRzIGFuaGVmdGVuIix1bnBpbjoiTMO2c2VuIn0sY29sdW1uTWVudTp7Y2xvc2U6IlNjaGxpZcOfZW4ifSxncmlkTWVudTp7YXJpYTp7YnV0dG9uTGFiZWw6IlRhYmVsbGVubWVuw7wifSxjb2x1bW5zOiJTcGFsdGVuOiIsaW1wb3J0ZXJUaXRsZToiRGF0ZWkgaW1wb3J0aWVyZW4iLGV4cG9ydGVyQWxsQXNDc3Y6IkFsbGUgRGF0ZW4gYWxzIENTViBleHBvcnRpZXJlbiIsZXhwb3J0ZXJWaXNpYmxlQXNDc3Y6IlNpY2h0YmFyZSBEYXRlbiBhbHMgQ1NWIGV4cG9ydGllcmVuIixleHBvcnRlclNlbGVjdGVkQXNDc3Y6Ik1hcmtpZXJ0ZSBEYXRlbiBhbHMgQ1NWIGV4cG9ydGllcmVuIixleHBvcnRlckFsbEFzUGRmOiJBbGxlIERhdGVuIGFscyBQREYgZXhwb3J0aWVyZW4iLGV4cG9ydGVyVmlzaWJsZUFzUGRmOiJTaWNodGJhcmUgRGF0ZW4gYWxzIFBERiBleHBvcnRpZXJlbiIsZXhwb3J0ZXJTZWxlY3RlZEFzUGRmOiJNYXJraWVydGUgRGF0ZW4gYWxzIFBERiBleHBvcnRpZXJlbiIsZXhwb3J0ZXJBbGxBc0V4Y2VsOiJBbGxlIERhdGVuIGFscyBFeGNlbCBleHBvcnRpZXJlbiIsZXhwb3J0ZXJWaXNpYmxlQXNFeGNlbDoiU2ljaHRiYXJlIERhdGVuIGFscyBFeGNlbCBleHBvcnRpZXJlbiIsZXhwb3J0ZXJTZWxlY3RlZEFzRXhjZWw6Ik1hcmtpZXJ0ZSBEYXRlbiBhbHMgRXhjZWwgZXhwb3J0aWVyZW4iLGNsZWFyQWxsRmlsdGVyczoiQWxsZSBGaWx0ZXIgenVyw7xja3NldHplbiJ9LGltcG9ydGVyOntub0hlYWRlcnM6IkVzIGtvbm50ZW4ga2VpbmUgU3BhbHRlbm5hbWVuIGVybWl0dGVsdCB3ZXJkZW4uIFNpbmQgaW4gZGVyIERhdGVpIFNwYWx0ZW5kZWZpbml0aW9uZW4gZW50aGFsdGVuPyIsbm9PYmplY3RzOiJFcyBrb25udGVuIGtlaW5lIFplaWxlbmluZm9ybWF0aW9uZW4gZ2VsZXNlbiB3ZXJkZW4sIFNpbmQgaW4gZGVyIERhdGVpIGF1w59lciBkZW4gU3BhbHRlbmRlZmluaXRpb25lbiBhdWNoIERhdGVuIGVudGhhbHRlbj8iLGludmFsaWRDc3Y6IkRpZSBEYXRlaSBrb25udGUgbmljaHQgZWluZ2VsZXNlbiB3ZXJkZW4sIGlzdCBlcyBlaW5lIGfDvGx0aWdlIENTVi1EYXRlaT8iLGludmFsaWRKc29uOiJEaWUgRGF0ZWkga29ubnRlIG5pY2h0IGVpbmdlbGVzZW4gd2VyZGVuLiBFbnRow6RsdCBzaWUgZ8O8bHRpZ2VzIEpTT04/Iixqc29uTm90QXJyYXk6IkRpZSBpbXBvcnRpZXJ0ZSBKU09OLURhdGVpIG11w58gZWluIEFycmF5IGVudGhhbHRlbi4gQnJlY2hlIEltcG9ydCBhYi4ifSxwYWdpbmF0aW9uOnthcmlhOntwYWdlVG9GaXJzdDoiWnVtIEFuZmFuZyIscGFnZUJhY2s6IlNlaXRlIHp1csO8Y2siLHBhZ2VTZWxlY3RlZDoiQXVzZ2V3w6RobHRlIFNlaXRlIixwYWdlRm9yd2FyZDoiU2VpdGUgdm9yIixwYWdlVG9MYXN0OiJadW0gRW5kZSJ9LHNpemVzOiJFaW50csOkZ2UgcHJvIFNlaXRlIix0b3RhbEl0ZW1zOiJFaW50csOkZ2VuIix0aHJvdWdoOiJiaXMiLG9mOiJ2b24ifSxncm91cGluZzp7Z3JvdXA6IkdydXBwaWVyZW4iLHVuZ3JvdXA6IkdydXBwaWVydW5nIGF1ZmhlYmVuIixhZ2dyZWdhdGVfY291bnQ6IkFnZzogQW56YWhsIixhZ2dyZWdhdGVfc3VtOiJBZ2c6IFN1bW1lIixhZ2dyZWdhdGVfbWF4OiJBZ2c6IE1heGltdW0iLGFnZ3JlZ2F0ZV9taW46IkFnZzogTWluaW11bSIsYWdncmVnYXRlX2F2ZzoiQWdnOiBNaXR0ZWx3ZXJ0IixhZ2dyZWdhdGVfcmVtb3ZlOiJBZ2dyZWdhdGlvbiBlbnRmZXJuZW4ifX0pLGV9XSl9XSksYW5ndWxhci5tb2R1bGUoInVpLmdyaWQiKS5jb25maWcoWyIkcHJvdmlkZSIsZnVuY3Rpb24oZSl7ZS5kZWNvcmF0b3IoImkxOG5TZXJ2aWNlIixbIiRkZWxlZ2F0ZSIsZnVuY3Rpb24oZSl7cmV0dXJuIGUuYWRkKCJlbiIse2hlYWRlckNlbGw6e2FyaWE6e2RlZmF1bHRGaWx0ZXJMYWJlbDoiRmlsdGVyIGZvciBjb2x1bW4iLHJlbW92ZUZpbHRlcjoiUmVtb3ZlIEZpbHRlciIsY29sdW1uTWVudUJ1dHRvbkxhYmVsOiJDb2x1bW4gTWVudSIsY29sdW1uOiJDb2x1bW4ifSxwcmlvcml0eToiUHJpb3JpdHk6IixmaWx0ZXJMYWJlbDoiRmlsdGVyIGZvciBjb2x1bW46ICJ9LGFnZ3JlZ2F0ZTp7bGFiZWw6Iml0ZW1zIn0sZ3JvdXBQYW5lbDp7ZGVzY3JpcHRpb246IkRyYWcgYSBjb2x1bW4gaGVhZGVyIGhlcmUgYW5kIGRyb3AgaXQgdG8gZ3JvdXAgYnkgdGhhdCBjb2x1bW4uIn0sc2VhcmNoOnthcmlhOntzZWxlY3RlZDoiUm93IHNlbGVjdGVkIixub3RTZWxlY3RlZDoiUm93IG5vdCBzZWxlY3RlZCJ9LHBsYWNlaG9sZGVyOiJTZWFyY2guLi4iLHNob3dpbmdJdGVtczoiU2hvd2luZyBJdGVtczoiLHNlbGVjdGVkSXRlbXM6IlNlbGVjdGVkIEl0ZW1zOiIsdG90YWxJdGVtczoiVG90YWwgSXRlbXM6IixzaXplOiJQYWdlIFNpemU6IixmaXJzdDoiRmlyc3QgUGFnZSIsbmV4dDoiTmV4dCBQYWdlIixwcmV2aW91czoiUHJldmlvdXMgUGFnZSIsbGFzdDoiTGFzdCBQYWdlIn0sbWVudTp7dGV4dDoiQ2hvb3NlIENvbHVtbnM6In0sc29ydDp7YXNjZW5kaW5nOiJTb3J0IEFzY2VuZGluZyIsZGVzY2VuZGluZzoiU29ydCBEZXNjZW5kaW5nIixub25lOiJTb3J0IE5vbmUiLHJlbW92ZToiUmVtb3ZlIFNvcnQifSxjb2x1bW46e2hpZGU6IkhpZGUgQ29sdW1uIn0sYWdncmVnYXRpb246e2NvdW50OiJ0b3RhbCByb3dzOiAiLHN1bToidG90YWw6ICIsYXZnOiJhdmc6ICIsbWluOiJtaW46ICIsbWF4OiJtYXg6ICJ9LHBpbm5pbmc6e3BpbkxlZnQ6IlBpbiBMZWZ0IixwaW5SaWdodDoiUGluIFJpZ2h0Iix1bnBpbjoiVW5waW4ifSxjb2x1bW5NZW51OntjbG9zZToiQ2xvc2UifSxncmlkTWVudTp7YXJpYTp7YnV0dG9uTGFiZWw6IkdyaWQgTWVudSJ9LGNvbHVtbnM6IkNvbHVtbnM6IixpbXBvcnRlclRpdGxlOiJJbXBvcnQgZmlsZSIsZXhwb3J0ZXJBbGxBc0NzdjoiRXhwb3J0IGFsbCBkYXRhIGFzIGNzdiIsZXhwb3J0ZXJWaXNpYmxlQXNDc3Y6IkV4cG9ydCB2aXNpYmxlIGRhdGEgYXMgY3N2IixleHBvcnRlclNlbGVjdGVkQXNDc3Y6IkV4cG9ydCBzZWxlY3RlZCBkYXRhIGFzIGNzdiIsZXhwb3J0ZXJBbGxBc1BkZjoiRXhwb3J0IGFsbCBkYXRhIGFzIHBkZiIsZXhwb3J0ZXJWaXNpYmxlQXNQZGY6IkV4cG9ydCB2aXNpYmxlIGRhdGEgYXMgcGRmIixleHBvcnRlclNlbGVjdGVkQXNQZGY6IkV4cG9ydCBzZWxlY3RlZCBkYXRhIGFzIHBkZiIsZXhwb3J0ZXJBbGxBc0V4Y2VsOiJFeHBvcnQgYWxsIGRhdGEgYXMgZXhjZWwiLGV4cG9ydGVyVmlzaWJsZUFzRXhjZWw6IkV4cG9ydCB2aXNpYmxlIGRhdGEgYXMgZXhjZWwiLGV4cG9ydGVyU2VsZWN0ZWRBc0V4Y2VsOiJFeHBvcnQgc2VsZWN0ZWQgZGF0YSBhcyBleGNlbCIsY2xlYXJBbGxGaWx0ZXJzOiJDbGVhciBhbGwgZmlsdGVycyJ9LGltcG9ydGVyOntub0hlYWRlcnM6IkNvbHVtbiBuYW1lcyB3ZXJlIHVuYWJsZSB0byBiZSBkZXJpdmVkLCBkb2VzIHRoZSBmaWxlIGhhdmUgYSBoZWFkZXI/Iixub09iamVjdHM6Ik9iamVjdHMgd2VyZSBub3QgYWJsZSB0byBiZSBkZXJpdmVkLCB3YXMgdGhlcmUgZGF0YSBpbiB0aGUgZmlsZSBvdGhlciB0aGFuIGhlYWRlcnM/IixpbnZhbGlkQ3N2OiJGaWxlIHdhcyB1bmFibGUgdG8gYmUgcHJvY2Vzc2VkLCBpcyBpdCB2YWxpZCBDU1Y/IixpbnZhbGlkSnNvbjoiRmlsZSB3YXMgdW5hYmxlIHRvIGJlIHByb2Nlc3NlZCwgaXMgaXQgdmFsaWQgSnNvbj8iLGpzb25Ob3RBcnJheToiSW1wb3J0ZWQganNvbiBmaWxlIG11c3QgY29udGFpbiBhbiBhcnJheSwgYWJvcnRpbmcuIn0scGFnaW5hdGlvbjp7YXJpYTp7cGFnZVRvRmlyc3Q6IlBhZ2UgdG8gZmlyc3QiLHBhZ2VCYWNrOiJQYWdlIGJhY2siLHBhZ2VTZWxlY3RlZDoiU2VsZWN0ZWQgcGFnZSIscGFnZUZvcndhcmQ6IlBhZ2UgZm9yd2FyZCIscGFnZVRvTGFzdDoiUGFnZSB0byBsYXN0In0sc2l6ZXM6Iml0ZW1zIHBlciBwYWdlIix0b3RhbEl0ZW1zOiJpdGVtcyIsdGhyb3VnaDoidGhyb3VnaCIsb2Y6Im9mIn0sZ3JvdXBpbmc6e2dyb3VwOiJHcm91cCIsdW5ncm91cDoiVW5ncm91cCIsYWdncmVnYXRlX2NvdW50OiJBZ2c6IENvdW50IixhZ2dyZWdhdGVfc3VtOiJBZ2c6IFN1bSIsYWdncmVnYXRlX21heDoiQWdnOiBNYXgiLGFnZ3JlZ2F0ZV9taW46IkFnZzogTWluIixhZ2dyZWdhdGVfYXZnOiJBZ2c6IEF2ZyIsYWdncmVnYXRlX3JlbW92ZToiQWdnOiBSZW1vdmUifSx2YWxpZGF0ZTp7ZXJyb3I6IkVycm9yOiIsbWluTGVuZ3RoOiJWYWx1ZSBzaG91bGQgYmUgYXQgbGVhc3QgVEhSRVNIT0xEIGNoYXJhY3RlcnMgbG9uZy4iLG1heExlbmd0aDoiVmFsdWUgc2hvdWxkIGJlIGF0IG1vc3QgVEhSRVNIT0xEIGNoYXJhY3RlcnMgbG9uZy4iLHJlcXVpcmVkOiJBIHZhbHVlIGlzIG5lZWRlZC4ifX0pLGV9XSl9XSksYW5ndWxhci5tb2R1bGUoInVpLmdyaWQiKS5jb25maWcoWyIkcHJvdmlkZSIsZnVuY3Rpb24oZSl7ZS5kZWNvcmF0b3IoImkxOG5TZXJ2aWNlIixbIiRkZWxlZ2F0ZSIsZnVuY3Rpb24oZSl7cmV0dXJuIGUuYWRkKCJlcyIse2FnZ3JlZ2F0ZTp7bGFiZWw6IkFydMOtY3Vsb3MifSxncm91cFBhbmVsOntkZXNjcmlwdGlvbjoiQXJyYXN0cmUgdW4gZW5jYWJlemFkbyBkZSBjb2x1bW5hIGFxdcOtIHkgc3XDqWx0ZWxvIHBhcmEgYWdydXBhciBwb3IgZXNhIGNvbHVtbmEuIn0sc2VhcmNoOntwbGFjZWhvbGRlcjoiQnVzY2FyLi4uIixzaG93aW5nSXRlbXM6IkFydMOtY3Vsb3MgTW9zdHJhZG9zOiIsc2VsZWN0ZWRJdGVtczoiQXJ0w61jdWxvcyBTZWxlY2Npb25hZG9zOiIsdG90YWxJdGVtczoiQXJ0w61jdWxvcyBUb3RhbGVzOiIsc2l6ZToiVGFtYcOxbyBkZSBQw6FnaW5hOiIsZmlyc3Q6IlByaW1lcmEgUMOhZ2luYSIsbmV4dDoiUMOhZ2luYSBTaWd1aWVudGUiLHByZXZpb3VzOiJQw6FnaW5hIEFudGVyaW9yIixsYXN0OiLDmmx0aW1hIFDDoWdpbmEifSxtZW51Ont0ZXh0OiJFbGVnaXIgY29sdW1uYXM6In0sc29ydDp7YXNjZW5kaW5nOiJPcmRlbiBBc2NlbmRlbnRlIixkZXNjZW5kaW5nOiJPcmRlbiBEZXNjZW5kZW50ZSIscmVtb3ZlOiJTaW4gT3JkZW5hciJ9LGNvbHVtbjp7aGlkZToiT2N1bHRhciBsYSBjb2x1bW5hIn0sYWdncmVnYXRpb246e2NvdW50OiJmaWxhcyB0b3RhbGVzOiAiLHN1bToidG90YWw6ICIsYXZnOiJtZWRpYTogIixtaW46Im1pbjogIixtYXg6Im1heDogIn0scGlubmluZzp7cGluTGVmdDoiRmlqYXIgYSBsYSBJenF1aWVyZGEiLHBpblJpZ2h0OiJGaWphciBhIGxhIERlcmVjaGEiLHVucGluOiJRdWl0YXIgRmlqYWNpw7NuIn0sZ3JpZE1lbnU6e2NvbHVtbnM6IkNvbHVtbmFzOiIsaW1wb3J0ZXJUaXRsZToiSW1wb3J0YXIgYXJjaGl2byIsZXhwb3J0ZXJBbGxBc0NzdjoiRXhwb3J0YXIgdG9kbyBjb21vIGNzdiIsZXhwb3J0ZXJWaXNpYmxlQXNDc3Y6IkV4cG9ydGFyIHZpc3RhIGNvbW8gY3N2IixleHBvcnRlclNlbGVjdGVkQXNDc3Y6IkV4cG9ydGFyIHNlbGVjY2nDs24gY29tbyBjc3YiLGV4cG9ydGVyQWxsQXNQZGY6IkV4cG9ydGFyIHRvZG8gY29tbyBwZGYiLGV4cG9ydGVyVmlzaWJsZUFzUGRmOiJFeHBvcnRhciB2aXN0YSBjb21vIHBkZiIsZXhwb3J0ZXJTZWxlY3RlZEFzUGRmOiJFeHBvcnRhciBzZWxlY2Npw7NuIGNvbW8gcGRmIixleHBvcnRlckFsbEFzRXhjZWw6IkV4cG9ydGFyIHRvZG8gY29tbyBleGNlbCIsZXhwb3J0ZXJWaXNpYmxlQXNFeGNlbDoiRXhwb3J0YXIgdmlzdGEgY29tbyBleGNlbCIsZXhwb3J0ZXJTZWxlY3RlZEFzRXhjZWw6IkV4cG9ydGFyIHNlbGVjY2nDs24gY29tbyBleGNlbCIsY2xlYXJBbGxGaWx0ZXJzOiJMaW1waWFyIHRvZG9zIGxvcyBmaWx0cm9zIn0saW1wb3J0ZXI6e25vSGVhZGVyczoiTm8gZnVlIHBvc2libGUgZGVyaXZhciBsb3Mgbm9tYnJlcyBkZSBsYXMgY29sdW1uYXMsIMK/dGllbmUgZW5jYWJlemFkb3MgZWwgYXJjaGl2bz8iLG5vT2JqZWN0czoiTm8gZnVlIHBvc2libGUgb2J0ZW5lciByZWdpc3Ryb3MsIMK/Y29udGllbmUgZGF0b3MgZWwgYXJjaGl2bywgYXBhcnRlIGRlIGxvcyBlbmNhYmV6YWRvcz8iLGludmFsaWRDc3Y6Ik5vIGZ1ZSBwb3NpYmxlIHByb2Nlc2FyIGVsIGFyY2hpdm8sIMK/ZXMgdW4gQ1NWIHbDoWxpZG8/IixpbnZhbGlkSnNvbjoiTm8gZnVlIHBvc2libGUgcHJvY2VzYXIgZWwgYXJjaGl2bywgwr9lcyB1biBKc29uIHbDoWxpZG8/Iixqc29uTm90QXJyYXk6IkVsIGFyY2hpdm8ganNvbiBpbXBvcnRhZG8gZGViZSBjb250ZW5lciB1biBhcnJheSwgYWJvcnRhbmRvLiJ9LHBhZ2luYXRpb246e3NpemVzOiJyZWdpc3Ryb3MgcG9yIHDDoWdpbmEiLHRvdGFsSXRlbXM6InJlZ2lzdHJvcyIsb2Y6ImRlIn0sZ3JvdXBpbmc6e2dyb3VwOiJBZ3J1cGFyIix1bmdyb3VwOiJEZXNhZ3J1cGFyIixhZ2dyZWdhdGVfY291bnQ6IkFncjogQ29udCIsYWdncmVnYXRlX3N1bToiQWdyOiBTdW0iLGFnZ3JlZ2F0ZV9tYXg6IkFncjogTcOheCIsYWdncmVnYXRlX21pbjoiQWdyOiBNaW4iLGFnZ3JlZ2F0ZV9hdmc6IkFncjogUHJvbSIsYWdncmVnYXRlX3JlbW92ZToiQWdyOiBRdWl0YXIifX0pLGV9XSl9XSksYW5ndWxhci5tb2R1bGUoInVpLmdyaWQiKS5jb25maWcoWyIkcHJvdmlkZSIsZnVuY3Rpb24oZSl7ZS5kZWNvcmF0b3IoImkxOG5TZXJ2aWNlIixbIiRkZWxlZ2F0ZSIsZnVuY3Rpb24oZSl7cmV0dXJuIGUuYWRkKCJmYSIse2FnZ3JlZ2F0ZTp7bGFiZWw6ItmC2YTZhSJ9LGdyb3VwUGFuZWw6e2Rlc2NyaXB0aW9uOiLYudmG2YjYp9mGINuM2qkg2LPYqtmI2YYg2LHYpyDYqNqv24zYsSDZiCDYqNmHINqv2LHZiNmH24wg2KfYsiDYotmGINiz2KrZiNmGINix2YfYpyDaqdmGLiJ9LHNlYXJjaDp7cGxhY2Vob2xkZXI6Itis2LPYqtis2YguLi4iLHNob3dpbmdJdGVtczoi2YbZhdin24zYtCDYp9mC2YTYp9mFOiIsc2VsZWN0ZWRJdGVtczoi2YLZhNmF4oCM2YfYp9uMINin2YbYqtiu2KfYqCDYtNiv2Yc6Iix0b3RhbEl0ZW1zOiLZhdis2YXZiNi5INin2YLZhNin2YU6IixzaXplOiLYp9mG2K/Yp9iy2YfigIzbjCDYtdmB2K3ZhzoiLGZpcnN0OiLYp9mI2YTbjNmGINi12YHYrdmHIixuZXh0OiLYtdmB2K3Zh+KAjNuM4oCM2KjYudiv24wiLHByZXZpb3VzOiLYtdmB2K3Zh+KAjNuM4oCMINmC2KjZhNuMIixsYXN0OiLYotiu2LHbjNmGINi12YHYrdmHIn0sbWVudTp7dGV4dDoi2LPYqtmI2YbigIzZh9in24wg2KfZhtiq2K7Yp9io24w6In0sc29ydDp7YXNjZW5kaW5nOiLYqtix2KrbjNioINi12LnZiNiv24wiLGRlc2NlbmRpbmc6Itiq2LHYqtuM2Kgg2YbYstmI2YTbjCIscmVtb3ZlOiLYrdiw2YEg2YXYsdiq2Kgg2qnYsdiv2YYifSxjb2x1bW46e2hpZGU6Itm+2YbZh9in2YbigIzaqdix2K/ZhiDYs9iq2YjZhiJ9LGFnZ3JlZ2F0aW9uOntjb3VudDoi2KrYudiv2KfYrzogIixzdW06ItmF2KzZhdmI2Lk6ICIsYXZnOiLZhduM2KfZhtqv24zZhjogIixtaW46Itqp2YXYqtix24zZhjogIixtYXg6Itio24zYtNiq2LHbjNmGOiAifSxwaW5uaW5nOntwaW5MZWZ0OiLZvtuM2YYg2qnYsdiv2YYg2LPZhdiqINqG2b4iLHBpblJpZ2h0OiLZvtuM2YYg2qnYsdiv2YYg2LPZhdiqINix2KfYs9iqIix1bnBpbjoi2K3YsNmBINm+24zZhiJ9LGdyaWRNZW51Ontjb2x1bW5zOiLYs9iq2YjZhuKAjNmH2Kc6IixpbXBvcnRlclRpdGxlOiLZiNin2LHYryDaqdix2K/ZhiDZgdin24zZhCIsZXhwb3J0ZXJBbGxBc0Nzdjoi2K7YsdmI2KzbjCDYqtmF2KfZhSDYr9in2K/Zh+KAjNmH2Kcg2K/YsSDZgdin24zZhCBjc3YiLGV4cG9ydGVyVmlzaWJsZUFzQ3N2OiLYrtix2YjYrNuMINiv2KfYr9mH4oCM2YfYp9uMINmC2KfYqNmEINmF2LTYp9mH2K/ZhyDYr9ixINmB2KfbjNmEIGNzdiIsZXhwb3J0ZXJTZWxlY3RlZEFzQ3N2OiLYrtix2YjYrNuMINiv2KfYr9mH4oCM2YfYp9uMINin2YbYqtiu2KfYqOKAjNi02K/ZhyDYr9ixINmB2KfbjNmEIGNzdiIsZXhwb3J0ZXJBbGxBc1BkZjoi2K7YsdmI2KzbjCDYqtmF2KfZhSDYr9in2K/Zh+KAjNmH2Kcg2K/YsSDZgdin24zZhCBwZGYiLGV4cG9ydGVyVmlzaWJsZUFzUGRmOiLYrtix2YjYrNuMINiv2KfYr9mH4oCM2YfYp9uMINmC2KfYqNmEINmF2LTYp9mH2K/ZhyDYr9ixINmB2KfbjNmEIHBkZiIsZXhwb3J0ZXJTZWxlY3RlZEFzUGRmOiLYrtix2YjYrNuMINiv2KfYr9mH4oCM2YfYp9uMINin2YbYqtiu2KfYqOKAjNi02K/ZhyDYr9ixINmB2KfbjNmEIHBkZiIsY2xlYXJBbGxGaWx0ZXJzOiLZvtin2qkg2qnYsdiv2YYg2KrZhdin2YUg2YHbjNmE2KrYsSJ9LGltcG9ydGVyOntub0hlYWRlcnM6ItmG2KfZhSDYs9iq2YjZhiDZgtin2KjZhCDYp9iz2KrYrtix2KfYrCDZhtuM2LPYqi4g2KLbjNinINmB2KfbjNmEINi52YbZiNin2YYg2K/Yp9ix2K/YnyIsbm9PYmplY3RzOiLYp9i024zYpyDZgtin2KjZhCDYp9iz2KrYrtix2KfYrCDZhtuM2LPYqtmG2K8uINii24zYpyDYqNmHINis2LIg2LnZhtmI2KfZhuKAjNmH2Kcg2K/YsSDZgdin24zZhCDYr9in2K/ZhyDZiNis2YjYryDYr9in2LHYr9ifIixpbnZhbGlkQ3N2OiLZgdin24zZhCDZgtin2KjZhCDZvtix2K/Yp9iy2LQg2YbbjNiz2KouINii24zYpyDZgdix2YXYqiAgY3N2ICDZhdi52KrYqNixINin2LPYqtifIixpbnZhbGlkSnNvbjoi2YHYp9uM2YQg2YLYp9io2YQg2b7Ysdiv2KfYsti0INmG24zYs9iqLiDYotuM2Kcg2YHYsdmF2KoganNvbiAgINmF2LnYqtio2LEg2KfYs9iq2J8iLGpzb25Ob3RBcnJheToi2YHYp9uM2YQganNvbiDZiNin2LHYryDYtNiv2Ycg2KjYp9uM2K8g2K3Yp9mI24wg2KLYsdin24zZhyDYqNin2LTYry4g2LnZhdmE24zYp9iqINiz2KfZgti3INi02K8uIn0scGFnaW5hdGlvbjp7c2l6ZXM6Itin2YLZhNin2YUg2K/YsSDZh9ixINi12YHYrdmHIix0b3RhbEl0ZW1zOiLYp9mC2YTYp9mFIixvZjoi2KfYsiJ9LGdyb3VwaW5nOntncm91cDoi2q/YsdmI2YfigIzYqNmG2K/bjCIsdW5ncm91cDoi2K3YsNmBINqv2LHZiNmH4oCM2KjZhtiv24wiLGFnZ3JlZ2F0ZV9jb3VudDoiQWdnOiDYqti52K/Yp9ivIixhZ2dyZWdhdGVfc3VtOiJBZ2c6INis2YXYuSIsYWdncmVnYXRlX21heDoiQWdnOiDYqNuM2LTbjNmG2YciLGFnZ3JlZ2F0ZV9taW46IkFnZzog2qnZhduM2YbZhyIsYWdncmVnYXRlX2F2ZzoiQWdnOiDZhduM2KfZhtqv24zZhiIsYWdncmVnYXRlX3JlbW92ZToiQWdnOiDYrdiw2YEifX0pLGV9XSl9XSksYW5ndWxhci5tb2R1bGUoInVpLmdyaWQiKS5jb25maWcoWyIkcHJvdmlkZSIsZnVuY3Rpb24oZSl7ZS5kZWNvcmF0b3IoImkxOG5TZXJ2aWNlIixbIiRkZWxlZ2F0ZSIsZnVuY3Rpb24oZSl7cmV0dXJuIGUuYWRkKCJmaSIse2FnZ3JlZ2F0ZTp7bGFiZWw6InJpdml0In0sZ3JvdXBQYW5lbDp7ZGVzY3JpcHRpb246IlJhYWhhYSBqYSBwdWRvdGEgb3RzaWtrbyB0w6Row6RuIHJ5aG1pdHTDpMOka3Nlc2kgc2FyYWtrZWVuIG11a2Fhbi4ifSxzZWFyY2g6e3BsYWNlaG9sZGVyOiJIYWUuLi4iLHNob3dpbmdJdGVtczoiTsOkeXRldMOkw6RuIHJpdmVqw6Q6IixzZWxlY3RlZEl0ZW1zOiJWYWxpdHV0IHJpdml0OiIsdG90YWxJdGVtczoiUml2ZWrDpCB5aHQuOiIsc2l6ZToiTsOkeXTDpDoiLGZpcnN0OiJFbnNpbW3DpGluZW4gc2l2dSIsbmV4dDoiU2V1cmFhdmEgc2l2dSIscHJldmlvdXM6IkVkZWxsaW5lbiBzaXZ1IixsYXN0OiJWaWltZWluZW4gc2l2dSJ9LG1lbnU6e3RleHQ6IlZhbGl0c2Ugc2FyYWtrZWV0OiJ9LHNvcnQ6e2FzY2VuZGluZzoiSsOkcmplc3TDpCBub3VzZXZhIixkZXNjZW5kaW5nOiJKw6RyamVzdMOkIGxhc2tldmEiLHJlbW92ZToiUG9pc3RhIGrDpHJqZXN0eXMifSxjb2x1bW46e2hpZGU6IlBpaWxvdGEgc2FyYWtlIn0sYWdncmVnYXRpb246e2NvdW50OiJSaXZlasOkIHlodC46ICIsc3VtOiJTdW1tYTogIixhdmc6IksuYS46ICIsbWluOiJNaW46ICIsbWF4OiJNYXg6ICJ9LHBpbm5pbmc6e3BpbkxlZnQ6Ikx1a2l0c2UgdmFzZW1tYWxsZSIscGluUmlnaHQ6Ikx1a2l0c2Ugb2lrZWFsbGUiLHVucGluOiJQb2lzdGEgbHVraXR1cyJ9LGdyaWRNZW51Ontjb2x1bW5zOiJTYXJha2tlZXQ6IixpbXBvcnRlclRpdGxlOiJUdW8gdGllZG9zdG8iLGV4cG9ydGVyQWxsQXNDc3Y6IlZpZSB0aWVkb3QgY3N2LW11b2Rvc3NhIixleHBvcnRlclZpc2libGVBc0NzdjoiVmllIG7DpGt5dsOkIHRpZXRvIGNzdi1tdW9kb3NzYSIsZXhwb3J0ZXJTZWxlY3RlZEFzQ3N2OiJWaWUgdmFsaXR0dSB0aWV0byBjc3YtbXVvZG9zc2EiLGV4cG9ydGVyQWxsQXNQZGY6IlZpZSB0aWVkb3QgcGRmLW11b2Rvc3NhIixleHBvcnRlclZpc2libGVBc1BkZjoiVmllIG7DpGt5dsOkIHRpZXRvIHBkZi1tdW9kb3NzYSIsZXhwb3J0ZXJTZWxlY3RlZEFzUGRmOiJWaWUgdmFsaXR0dSB0aWV0byBwZGYtbXVvZG9zc2EiLGV4cG9ydGVyQWxsQXNFeGNlbDoiVmllIHRpZWRvdCBleGNlbC1tdW9kb3NzYSIsZXhwb3J0ZXJWaXNpYmxlQXNFeGNlbDoiVmllIG7DpGt5dsOkIHRpZXRvIGV4Y2VsLW11b2Rvc3NhIixleHBvcnRlclNlbGVjdGVkQXNFeGNlbDoiVmllIHZhbGl0dHUgdGlldG8gZXhjZWwtbXVvZG9zc2EiLGNsZWFyQWxsRmlsdGVyczoiUHVoZGlzdGEga2Fpa2tpIHN1b2RhdHRpbWV0In0saW1wb3J0ZXI6e25vSGVhZGVyczoiU2FyYWtrZWVuIG5pbWnDpCBlaSB2b2l0dSBww6TDpHRlbGzDpCwgb25rbyB0aWVkb3N0b3NzYSBvdHNpa2tvcml2acOkPyIsbm9PYmplY3RzOiJUaWV0b2phIGVpIHZvaXR1IGx1a2VhLCBvbmtvIHRpZWRvc3Rvc3NhIG11dXRhIGt1aW4gb3RzaWtrb3Q/IixpbnZhbGlkQ3N2OiJUaWVkb3N0b2EgZWkgdm9pdHUga8Okc2l0ZWxsw6QsIG9saWtvIHNlIENTVi1tdW9kb3NzYT8iLGludmFsaWRKc29uOiJUaWVkb3N0b2EgZWkgdm9pdHUga8Okc2l0ZWxsw6QsIG9saWtvIHNlIEpTT04tbXVvZG9zc2E/Iixqc29uTm90QXJyYXk6IlRpZWRvc3RvIGVpIHNpc8OkbHTDpG55dCB0YXVsdWtrb2EsIGxvcGV0ZXRhYW4uIn19KSxlfV0pfV0pLGFuZ3VsYXIubW9kdWxlKCJ1aS5ncmlkIikuY29uZmlnKFsiJHByb3ZpZGUiLGZ1bmN0aW9uKGUpe2UuZGVjb3JhdG9yKCJpMThuU2VydmljZSIsWyIkZGVsZWdhdGUiLGZ1bmN0aW9uKGUpe3JldHVybiBlLmFkZCgiZnIiLHtoZWFkZXJDZWxsOnthcmlhOntkZWZhdWx0RmlsdGVyTGFiZWw6IkZpbHRyZSBkZSBsYSBjb2xvbm5lIixyZW1vdmVGaWx0ZXI6IlN1cHByaW1lciBsZSBmaWx0cmUiLGNvbHVtbk1lbnVCdXR0b25MYWJlbDoiTWVudSBkZSBsYSBjb2xvbm5lIn0scHJpb3JpdHk6IlByaW9yaXTDqToiLGZpbHRlckxhYmVsOiJGaWx0cmUgZGUgbGEgY29sb25uZTogIn0sYWdncmVnYXRlOntsYWJlbDoiw6lsw6ltZW50cyJ9LGdyb3VwUGFuZWw6e2Rlc2NyaXB0aW9uOiJGYWl0ZXMgZ2xpc3NlciB1bmUgZW4tdMOqdGUgZGUgY29sb25uZSBpY2kgcG91ciBjcsOpZXIgdW4gZ3JvdXBlIGRlIGNvbG9ubmVzLiJ9LHNlYXJjaDp7cGxhY2Vob2xkZXI6IlJlY2hlcmNoZS4uLiIsc2hvd2luZ0l0ZW1zOiJBZmZpY2hhZ2UgZGVzIMOpbMOpbWVudHMgOiIsc2VsZWN0ZWRJdGVtczoiw4lsw6ltZW50cyBzw6lsZWN0aW9ubsOpcyA6Iix0b3RhbEl0ZW1zOiJOb21icmUgdG90YWwgZCfDqWzDqW1lbnRzOiIsc2l6ZToiVGFpbGxlIGRlIHBhZ2U6IixmaXJzdDoiUHJlbWnDqHJlIHBhZ2UiLG5leHQ6IlBhZ2UgU3VpdmFudGUiLHByZXZpb3VzOiJQYWdlIHByw6ljw6lkZW50ZSIsbGFzdDoiRGVybmnDqHJlIHBhZ2UifSxtZW51Ont0ZXh0OiJDaG9pc2lyIGRlcyBjb2xvbm5lcyA6In0sc29ydDp7YXNjZW5kaW5nOiJUcmllciBwYXIgb3JkcmUgY3JvaXNzYW50IixkZXNjZW5kaW5nOiJUcmllciBwYXIgb3JkcmUgZMOpY3JvaXNzYW50Iixub25lOiJBdWN1biB0cmkiLHJlbW92ZToiRW5sZXZlciBsZSB0cmkifSxjb2x1bW46e2hpZGU6IkNhY2hlciBsYSBjb2xvbm5lIn0sYWdncmVnYXRpb246e2NvdW50OiJsaWduZXMgdG90YWxlczogIixzdW06InRvdGFsOiAiLGF2ZzoibW95OiAiLG1pbjoibWluOiAiLG1heDoibWF4OiAifSxwaW5uaW5nOntwaW5MZWZ0OiLDiXBpbmdsZXIgw6AgZ2F1Y2hlIixwaW5SaWdodDoiw4lwaW5nbGVyIMOgIGRyb2l0ZSIsdW5waW46IkTDqXRhY2hlciJ9LGNvbHVtbk1lbnU6e2Nsb3NlOiJGZXJtZXIifSxncmlkTWVudTp7YXJpYTp7YnV0dG9uTGFiZWw6Ik1lbnUgZHUgdGFibGVhdSJ9LGNvbHVtbnM6IkNvbG9ubmVzOiIsaW1wb3J0ZXJUaXRsZToiSW1wb3J0ZXIgdW4gZmljaGllciIsZXhwb3J0ZXJBbGxBc0NzdjoiRXhwb3J0ZXIgdG91dGVzIGxlcyBkb25uw6llcyBlbiBDU1YiLGV4cG9ydGVyVmlzaWJsZUFzQ3N2OiJFeHBvcnRlciBsZXMgZG9ubsOpZXMgdmlzaWJsZXMgZW4gQ1NWIixleHBvcnRlclNlbGVjdGVkQXNDc3Y6IkV4cG9ydGVyIGxlcyBkb25uw6llcyBzw6lsZWN0aW9ubsOpZXMgZW4gQ1NWIixleHBvcnRlckFsbEFzUGRmOiJFeHBvcnRlciB0b3V0ZXMgbGVzIGRvbm7DqWVzIGVuIFBERiIsZXhwb3J0ZXJWaXNpYmxlQXNQZGY6IkV4cG9ydGVyIGxlcyBkb25uw6llcyB2aXNpYmxlcyBlbiBQREYiLGV4cG9ydGVyU2VsZWN0ZWRBc1BkZjoiRXhwb3J0ZXIgbGVzIGRvbm7DqWVzIHPDqWxlY3Rpb25uw6llcyBlbiBQREYiLGV4cG9ydGVyQWxsQXNFeGNlbDoiRXhwb3J0ZXIgdG91dGVzIGxlcyBkb25uw6llcyBlbiBFeGNlbCIsZXhwb3J0ZXJWaXNpYmxlQXNFeGNlbDoiRXhwb3J0ZXIgbGVzIGRvbm7DqWVzIHZpc2libGVzIGVuIEV4Y2VsIixleHBvcnRlclNlbGVjdGVkQXNFeGNlbDoiRXhwb3J0ZXIgbGVzIGRvbm7DqWVzIHPDqWxlY3Rpb25uw6llcyBlbiBFeGNlbCIsY2xlYXJBbGxGaWx0ZXJzOiJOZXR0b3lleiB0b3VzIGxlcyBmaWx0cmVzIn0saW1wb3J0ZXI6e25vSGVhZGVyczoiSW1wb3NzaWJsZSBkZSBkw6l0ZXJtaW5lciBsZSBub20gZGVzIGNvbG9ubmVzLCBsZSBmaWNoaWVyIHBvc3PDqGRlLXQtaWwgdW5lIGVuLXTDqnRlID8iLG5vT2JqZWN0czoiQXVjdW4gb2JqZXQgdHJvdXbDqSwgbGUgZmljaGllciBwb3Nzw6hkZS10LWlsIGRlcyBkb25uw6llcyBhdXRyZXMgcXVlIGwnZW4tdMOqdGUgPyIsaW52YWxpZENzdjoiTGUgZmljaGllciBuJ2EgcGFzIHB1IMOqdHJlIHRyYWl0w6ksIGxlIENTViBlc3QtaWwgdmFsaWRlID8iLGludmFsaWRKc29uOiJMZSBmaWNoaWVyIG4nYSBwYXMgcHUgw6p0cmUgdHJhaXTDqSwgbGUgSlNPTiBlc3QtaWwgdmFsaWRlID8iLGpzb25Ob3RBcnJheToiTGUgZmljaGllciBKU09OIGltcG9ydMOpIGRvaXQgY29udGVuaXIgdW4gdGFibGVhdSwgYWJhbmRvbi4ifSxwYWdpbmF0aW9uOnthcmlhOntwYWdlVG9GaXJzdDoiQWxsZXIgw6AgbGEgcHJlbWnDqHJlIHBhZ2UiLHBhZ2VCYWNrOiJQYWdlIHByw6ljw6lkZW50ZSIscGFnZVNlbGVjdGVkOiJQYWdlIHPDqWxlY3Rpb25uw6llIixwYWdlRm9yd2FyZDoiUGFnZSBzdWl2YW50ZSIscGFnZVRvTGFzdDoiQWxsZXIgw6AgbGEgZGVybmnDqHJlIHBhZ2UifSxzaXplczoiw6lsw6ltZW50cyBwYXIgcGFnZSIsdG90YWxJdGVtczoiw6lsw6ltZW50cyIsdGhyb3VnaDoiw6AiLG9mOiJzdXIifSxncm91cGluZzp7Z3JvdXA6Ikdyb3VwZXIiLHVuZ3JvdXA6IkTDqWdyb3VwZXIiLGFnZ3JlZ2F0ZV9jb3VudDoiQWdnOiBDb21wdGVyIixhZ2dyZWdhdGVfc3VtOiJBZ2c6IFNvbW1lIixhZ2dyZWdhdGVfbWF4OiJBZ2c6IE1heCIsYWdncmVnYXRlX21pbjoiQWdnOiBNaW4iLGFnZ3JlZ2F0ZV9hdmc6IkFnZzogTW95IixhZ2dyZWdhdGVfcmVtb3ZlOiJBZ2c6IFJldGlyZXIifSx2YWxpZGF0ZTp7ZXJyb3I6IkVycmV1cjoiLG1pbkxlbmd0aDoiTGEgdmFsZXVyIGRvaXQgw6p0cmUgc3Vww6lyaWV1cmUgb3Ugw6lnYWxlIMOgIFRIUkVTSE9MRCBjYXJhY3TDqHJlcy4iLG1heExlbmd0aDoiTGEgdmFsZXVyIGRvaXQgw6p0cmUgaW5mw6lyaWV1cmUgb3Ugw6lnYWxlIMOgIFRIUkVTSE9MRCBjYXJhY3TDqHJlcy4iLHJlcXVpcmVkOiJVbmUgdmFsZXVyIGVzdCBuw6ljw6lzc2FpcmUuIn19KSxlfV0pfV0pLGFuZ3VsYXIubW9kdWxlKCJ1aS5ncmlkIikuY29uZmlnKFsiJHByb3ZpZGUiLGZ1bmN0aW9uKGUpe2UuZGVjb3JhdG9yKCJpMThuU2VydmljZSIsWyIkZGVsZWdhdGUiLGZ1bmN0aW9uKGUpe3JldHVybiBlLmFkZCgiaGUiLHthZ2dyZWdhdGU6e2xhYmVsOiJpdGVtcyJ9LGdyb3VwUGFuZWw6e2Rlc2NyaXB0aW9uOiLXkteo15XXqCDXotee15XXk9eUINec15vXkNefINeV16nXl9eo16gg15HXm9eT15kg15zXp9eR16Ug16LXnteV15PXlCDXlteVLiJ9LHNlYXJjaDp7cGxhY2Vob2xkZXI6IteX16TXqS4uLiIsc2hvd2luZ0l0ZW1zOiLXntem15nXkjoiLHNlbGVjdGVkSXRlbXM6J9eh15Qi15sg16DXkdeX16jXlTonLHRvdGFsSXRlbXM6J9eh15Qi15sg16jXqdeV157XldeqOicsc2l6ZToi16rXldem15DXldeqINeR15PXozoiLGZpcnN0OiLXk9ejINeo15DXqdeV158iLG5leHQ6IteT16Mg15TXkdeQIixwcmV2aW91czoi15PXoyDXp9eV15PXnSIsbGFzdDoi15PXoyDXkNeX16jXldefIn0sbWVudTp7dGV4dDoi15HXl9eoINei157XldeT15XXqjoifSxzb3J0Onthc2NlbmRpbmc6Iteh15PXqCDXoteV15zXlCIsZGVzY2VuZGluZzoi16HXk9eoINeZ15XXqNeTIixyZW1vdmU6IteR15jXnCJ9LGNvbHVtbjp7aGlkZToi15jXldeoINeU16HXqteoIn0sYWdncmVnYXRpb246e2NvdW50OiJ0b3RhbCByb3dzOiAiLHN1bToidG90YWw6ICIsYXZnOiJhdmc6ICIsbWluOiJtaW46ICIsbWF4OiJtYXg6ICJ9LGdyaWRNZW51Ontjb2x1bW5zOiJDb2x1bW5zOiIsaW1wb3J0ZXJUaXRsZToiSW1wb3J0IGZpbGUiLGV4cG9ydGVyQWxsQXNDc3Y6IkV4cG9ydCBhbGwgZGF0YSBhcyBjc3YiLGV4cG9ydGVyVmlzaWJsZUFzQ3N2OiJFeHBvcnQgdmlzaWJsZSBkYXRhIGFzIGNzdiIsZXhwb3J0ZXJTZWxlY3RlZEFzQ3N2OiJFeHBvcnQgc2VsZWN0ZWQgZGF0YSBhcyBjc3YiLGV4cG9ydGVyQWxsQXNQZGY6IkV4cG9ydCBhbGwgZGF0YSBhcyBwZGYiLGV4cG9ydGVyVmlzaWJsZUFzUGRmOiJFeHBvcnQgdmlzaWJsZSBkYXRhIGFzIHBkZiIsZXhwb3J0ZXJTZWxlY3RlZEFzUGRmOiJFeHBvcnQgc2VsZWN0ZWQgZGF0YSBhcyBwZGYiLGV4cG9ydGVyQWxsQXNFeGNlbDoiRXhwb3J0IGFsbCBkYXRhIGFzIGV4Y2VsIixleHBvcnRlclZpc2libGVBc0V4Y2VsOiJFeHBvcnQgdmlzaWJsZSBkYXRhIGFzIGV4Y2VsIixleHBvcnRlclNlbGVjdGVkQXNFeGNlbDoiRXhwb3J0IHNlbGVjdGVkIGRhdGEgYXMgZXhjZWwiLGNsZWFyQWxsRmlsdGVyczoiQ2xlYW4gYWxsIGZpbHRlcnMifSxpbXBvcnRlcjp7bm9IZWFkZXJzOiJDb2x1bW4gbmFtZXMgd2VyZSB1bmFibGUgdG8gYmUgZGVyaXZlZCwgZG9lcyB0aGUgZmlsZSBoYXZlIGEgaGVhZGVyPyIsbm9PYmplY3RzOiJPYmplY3RzIHdlcmUgbm90IGFibGUgdG8gYmUgZGVyaXZlZCwgd2FzIHRoZXJlIGRhdGEgaW4gdGhlIGZpbGUgb3RoZXIgdGhhbiBoZWFkZXJzPyIsaW52YWxpZENzdjoiRmlsZSB3YXMgdW5hYmxlIHRvIGJlIHByb2Nlc3NlZCwgaXMgaXQgdmFsaWQgQ1NWPyIsaW52YWxpZEpzb246IkZpbGUgd2FzIHVuYWJsZSB0byBiZSBwcm9jZXNzZWQsIGlzIGl0IHZhbGlkIEpzb24/Iixqc29uTm90QXJyYXk6IkltcG9ydGVkIGpzb24gZmlsZSBtdXN0IGNvbnRhaW4gYW4gYXJyYXksIGFib3J0aW5nLiJ9fSksZX1dKX1dKSxhbmd1bGFyLm1vZHVsZSgidWkuZ3JpZCIpLmNvbmZpZyhbIiRwcm92aWRlIixmdW5jdGlvbihlKXtlLmRlY29yYXRvcigiaTE4blNlcnZpY2UiLFsiJGRlbGVnYXRlIixmdW5jdGlvbihlKXtyZXR1cm4gZS5hZGQoImh5Iix7YWdncmVnYXRlOntsYWJlbDoi1b/VvtW11aHVrNW21aXWgCJ9LGdyb3VwUGFuZWw6e2Rlc2NyaXB0aW9uOiLUuNW91b8g1b3VtdWh1bYg1a3VtNWi1aHVvtW41oDVpdWs1bjWgiDVsNWh1bTVodaAINaE1aHVt9Wl1oQg1ocg1aPWgdWl1oQg1b7VpdaA1bbVodWj1avWgNW2INWh1bXVvdW/1aXVstaJIn0sc2VhcmNoOntwbGFjZWhvbGRlcjoi1ZPVttW/1oDVuNaC1bQuLi4iLHNob3dpbmdJdGVtczoi1ZHVuNaC1oHVodWk1oDVvtWh1a4g1b/VvtW11aHVrNW21aXWgNWdIixzZWxlY3RlZEl0ZW1zOiLUuNW21b/WgNW+1aHVrjoiLHRvdGFsSXRlbXM6ItS41bbVpNWh1bTVpdW21ajVnSIsc2l6ZToi1Y/VuNWy1aXWgNWrINaE1aHVttWh1a/VqCDVp9W71bjWgtW01Z0iLGZpcnN0OiLUsdW81aHVu9Wr1bYg1afVuyIsbmV4dDoi1YDVodW71bjWgNWkINWn1bsiLHByZXZpb3VzOiLVhtWh1a3VuNaA1aQg1afVuyIsbGFzdDoi1Y7VpdaA1bvVq9W2INWn1bsifSxtZW51Ont0ZXh0OiLUuNW21b/WgNWl1awg1b3VtdW41oLVttWl1oDVqDoifSxzb3J0Onthc2NlbmRpbmc6ItSx1bPVtNWh1bYg1a/VodaA1aPVuNW+IixkZXNjZW5kaW5nOiLVhtW+1aHVptW01aHVtiDVr9Wh1oDVo9W41b4iLHJlbW92ZToi1YDVodW21aXVrCAifSxjb2x1bW46e2hpZGU6ItS51aHWhNaB1bbVpdWsINW91bXVuNaC1bbVqCJ9LGFnZ3JlZ2F0aW9uOntjb3VudDoi1ajVttWk1aHVtNWl1bbVqCDVv9W41bLVnSAiLHN1bToi1ajVttWk1aHVtNWl1bbVqNWdICIsYXZnOiLVtNWr1bvVq9W21Z0gIixtaW46ItW01avVttWdICIsbWF4OiLVtNWh1oTVvdWdICJ9LHBpbm5pbmc6e3BpbkxlZnQ6ItS/1brWgdW21aXVrCDVsdWh1a0g1a/VuNWy1bTVuNaC1bQiLHBpblJpZ2h0OiLUv9W61oHVttWl1awg1aHVuyDVr9W41bLVtNW41oLVtCIsdW5waW46ItSx1oDVsdWh1a/VpdWsIn0sZ3JpZE1lbnU6e2NvbHVtbnM6ItWN1bXVuNaC1bbVpdaAOiIsaW1wb3J0ZXJUaXRsZToi1YbVpdaA1bTVuNaC1a7VpdWsINaG1aHVtdWsIixleHBvcnRlckFsbEFzQ3N2OiLUsdaA1b/VodWw1aHVttWl1awg1aHVtNWi1bjVstW71aggQ1NWIixleHBvcnRlclZpc2libGVBc0Nzdjoi1LHWgNW/1aHVsNWh1bbVpdWsINWl1oDWh9Wh1oHVuNWyINW/1b7VtdWh1azVttWl1oDVqCBDU1YiLGV4cG9ydGVyU2VsZWN0ZWRBc0Nzdjoi1LHWgNW/1aHVsNWh1bbVpdWsINWo1bbVv9aA1b7VodWuINW/1b7VtdWh1azVttWl1oDVqCBDU1YiLGV4cG9ydGVyQWxsQXNQZGY6ItSx1oDVv9Wh1bDVodW21aXVrCBQREYiLGV4cG9ydGVyVmlzaWJsZUFzUGRmOiLUsdaA1b/VodWw1aHVttWl1awg1aXWgNaH1aHWgdW41bIg1b/VvtW11aHVrNW21aXWgNWoIFBERiIsZXhwb3J0ZXJTZWxlY3RlZEFzUGRmOiLUsdaA1b/VodWw1aHVttWl1awg1ajVttW/1oDVvtWh1a4g1b/VvtW11aHVrNW21aXWgNWoIFBERiIsZXhwb3J0ZXJBbGxBc0V4Y2VsOiLUsdaA1b/VodWw1aHVttWl1awgZXhjZWwiLGV4cG9ydGVyVmlzaWJsZUFzRXhjZWw6ItSx1oDVv9Wh1bDVodW21aXVrCDVpdaA1ofVodaB1bjVsiDVv9W+1bXVodWs1bbVpdaA1aggZXhjZWwiLGV4cG9ydGVyU2VsZWN0ZWRBc0V4Y2VsOiLUsdaA1b/VodWw1aHVttWl1awg1ajVttW/1oDVvtWh1a4g1b/VvtW11aHVrNW21aXWgNWoIGV4Y2VsIixjbGVhckFsbEZpbHRlcnM6ItWE1aHWhNaA1aXVrCDVotW41azVuNaAINaG1avVrNW/1oDVpdaA1agifSxpbXBvcnRlcjp7bm9IZWFkZXJzOiLVgNW21aHWgNWh1b7VuNaAINW51aXVstWh1b4g1bjWgNW41bfVpdWsINW91bXVodW2INW+1aXWgNW21aHVo9aA1aXWgNWo1okg1LHWgNWk1bXVuNWe1oQg1obVodW11azVqCDVuNaC1bbVqyDVvtWl1oDVttWh1aPWgNWl1oDWiSIsbm9PYmplY3RzOiLVgNW21aHWgNWh1b7VuNaAINW51aXVstWh1b4g1a/VodaA1aTVodWsINW/1b7VtdWh1azVttWl1oDVqNaJINSx1oDVpNW11bjVntaEINaG1aHVtdWs1bjWgtW0INWv1aHVtiDVv9W+1bXVodWs1bbVpdaA1okiLGludmFsaWRDc3Y6ItWA1bbVodaA1aHVvtW41oAg1bnVpdWy1aHVviDVtNW31aHVr9Wl1awg1obVodW11azVqNaJINSx1oDVpNW11bjVntaEINWh1bXVtiDVvtWh1b7VpdaAIENTViDVp9aJIixpbnZhbGlkSnNvbjoi1YDVttWh1oDVodW+1bjWgCDVudWl1bLVodW+INW01bfVodWv1aXVrCDWhtWh1bXVrNWo1okg1LHWgNWk1bXVuNWe1oQg1aHVtdW2INW+1aHVvtWl1oAgSnNvbiDVp9aJIixqc29uTm90QXJyYXk6ItWG1aXWgNW01bjWgtWu1b7VodWuIGpzb24g1obVodW11azVqCDVutWl1b/WhCDVpyDVutWh1oDVuNaC1bbVodWv1asg1abVodW21aPVvtWh1a4sINWv1aHVvdWl1oHVvtW41oLVtCDVp9aJIn19KSxlfV0pfV0pLGFuZ3VsYXIubW9kdWxlKCJ1aS5ncmlkIikuY29uZmlnKFsiJHByb3ZpZGUiLGZ1bmN0aW9uKGUpe2UuZGVjb3JhdG9yKCJpMThuU2VydmljZSIsWyIkZGVsZWdhdGUiLGZ1bmN0aW9uKGUpe3JldHVybiBlLmFkZCgiaXMiLHtoZWFkZXJDZWxsOnthcmlhOntkZWZhdWx0RmlsdGVyTGFiZWw6IlPDrWEgZnlyaXIgZMOhbGsiLHJlbW92ZUZpbHRlcjoiRmphcmzDpmdqYSBzw611Iixjb2x1bW5NZW51QnV0dG9uTGFiZWw6IkTDoWxrYXZhbG15bmQifSxwcmlvcml0eToiRm9yZ2FuZ3Nyw7bDsHVuOiIsZmlsdGVyTGFiZWw6IlPDrWEgZnlyaXIgZMOhbGthOiAifSxhZ2dyZWdhdGU6e2xhYmVsOiJobHV0aXIifSxncm91cFBhbmVsOntkZXNjcmlwdGlvbjoiRHJhZ8OwdSBkw6Fsa2hhdXMgaGluZ2HDsCB0aWwgYcOwIGZsb2trYSBzYW1hbiBlZnRpciDDvmVpbSBkw6Fsa2kuIn0sc2VhcmNoOntwbGFjZWhvbGRlcjoiTGVpdGEuLi4iLHNob3dpbmdJdGVtczoiU8O9bmkgaGx1dGk6IixzZWxlY3RlZEl0ZW1zOiJWYWxkaXIgaGx1dGlyOiIsdG90YWxJdGVtczoiSGx1dGlyIGFsbHM6IixzaXplOiJTdMOmcsOwIHPDrcOwdToiLGZpcnN0OiJGeXJzdGEgc8Otw7BhIixuZXh0OiJOw6ZzdGEgc8Otw7BhIixwcmV2aW91czoiRnlycmkgc8Otw7BhIixsYXN0OiJTw63DsGFzdGEgc8Otw7BhIn0sbWVudTp7dGV4dDoiVmVsZHUgZMOhbGthOiJ9LHNvcnQ6e2FzY2VuZGluZzoiUmHDsGEgaMOma2thbmRpIixkZXNjZW5kaW5nOiJSYcOwYSBsw6Zra2FuZGkiLG5vbmU6IkVuZ2luIHLDtsOwdW4iLHJlbW92ZToiRmphcmzDpmdqYSByw7bDsHVuIn0sY29sdW1uOntoaWRlOiJGZWxhIGTDoWxrIn0sYWdncmVnYXRpb246e2NvdW50OiJmasO2bGRpIHJhw7BhOiAiLHN1bToic3VtbWE6ICIsYXZnOiJtZcOwYWx0YWw6ICIsbWluOiJsw6FnbWFyazogIixtYXg6ImjDoW1hcms6ICJ9LHBpbm5pbmc6e3BpbkxlZnQ6IkZlc3RhIHRpbCB2aW5zdHJpIixwaW5SaWdodDoiRmVzdGEgdGlsIGjDpmdyaSIsdW5waW46Ikxvc2EifSxjb2x1bW5NZW51OntjbG9zZToiTG9rYSJ9LGdyaWRNZW51OnthcmlhOntidXR0b25MYWJlbDoiVMO2Zmx1IHZhbG15bmQifSxjb2x1bW5zOiJEw6Fsa2FyOiIsaW1wb3J0ZXJUaXRsZToiRmx5dGphIGlubiBza2phbCIsZXhwb3J0ZXJBbGxBc0NzdjoiRmx5dGphIMO6dCBnw7ZnbiBzZW0gY3N2IixleHBvcnRlclZpc2libGVBc0NzdjoiRmx5dGphIMO6dCBzw71uaWxlZyBnw7ZnbiBzZW0gY3N2IixleHBvcnRlclNlbGVjdGVkQXNDc3Y6IkZseXRqYSDDunQgdmFsaW4gZ8O2Z24gc2VtIGNzdiIsZXhwb3J0ZXJBbGxBc1BkZjoiRmx5dGphIMO6dCDDtmxsIGfDtmduIHNlbSBwZGYiLGV4cG9ydGVyVmlzaWJsZUFzUGRmOiJGbHl0amEgw7p0IHPDvW5pbGVnIGfDtmduIHNlbSBwZGYiLGV4cG9ydGVyU2VsZWN0ZWRBc1BkZjoiRmx5dGphIMO6dCB2YWxpbiBnw7ZnbiBzZW0gcGRmIixjbGVhckFsbEZpbHRlcnM6IkhyZWluc2EgYWxsYXIgc8OtdXIifSxpbXBvcnRlcjp7bm9IZWFkZXJzOiJFa2tpIGjDpmd0IGHDsCB2aW5uYSBkw6Fsa2Fuw7ZmbiDDunIgc2tqYWxpbnUsIGVyIHNramFsacOwIMO2cnVnZ2xlZ2EgbWXDsCBoYXVzPyIsbm9PYmplY3RzOiJFa2tpIGjDpmd0IGHDsCB2aW5uYSBobHV0aSDDunIgc2tqYWxpbnUsIHZvcnUgw7ZydWdnbGVnYSBnw7ZnbiDDrSBza2phbGludSDDtm5udXIgZW4gaGF1c2lubj8iLGludmFsaWRDc3Y6IlTDs2tzdCBla2tpIGHDsCB2aW5uYSBza2phbCwgZXIgw75hw7Agw7ZyZ2d1bGVnYSBnaWx0IENTVj8iLGludmFsaWRKc29uOiJUw7Nrc3QgZWtraSBhw7AgdmlubmEgc2tqYWwsIGVyIMO+YcOwIMO2cnVnZ2xlZ2EgZ2lsdCBKc29uPyIsanNvbk5vdEFycmF5OiJJbm5mbHV0dCBqc29uIHNramFsIHZlcsOwdXIgYcOwIGlubmloYWxkYSBmeWxraSwgaMOmdHRpIHZpw7AuIn0scGFnaW5hdGlvbjp7YXJpYTp7cGFnZVRvRmlyc3Q6IkZsZXR0YSBhw7AgZnlyc3R1IixwYWdlQmFjazoiRmxldHRhIHRpbCBiYWthIixwYWdlU2VsZWN0ZWQ6IlZhbGluIHPDrcOwYSIscGFnZUZvcndhcmQ6IkZsZXR0YSDDoWZyYW0iLHBhZ2VUb0xhc3Q6IkZsZXR0YSBhw7Agc8Otw7B1c3R1In0sc2l6ZXM6ImhsdXRpciDDoSBzw63DsHUiLHRvdGFsSXRlbXM6ImhsdXRpciIsdGhyb3VnaDoiZ2VnbnVtIixvZjoiYWYifSxncm91cGluZzp7Z3JvdXA6IkZsb2trYSIsdW5ncm91cDoiU3VuZHVybGnDsGEiLGFnZ3JlZ2F0ZV9jb3VudDoiRmrDtmxkaTogIixhZ2dyZWdhdGVfc3VtOiJTdW1tYTogIixhZ2dyZWdhdGVfbWF4OiJIw6FtYXJrOiAiLGFnZ3JlZ2F0ZV9taW46IkzDoWdtYXJrOiAiLGFnZ3JlZ2F0ZV9hdmc6Ik1lw7BhbHRhbDogIixhZ2dyZWdhdGVfcmVtb3ZlOiJGamFybMOmZ2phOiAifSx2YWxpZGF0ZTp7ZXJyb3I6IlZpbGxhOiIsbWluTGVuZ3RoOiJHaWxkaSDDpnR0aSBhw7AgdmVyYSBhLm0uay4gVEhSRVNIT0xEIHN0YWZhIGxhbmd0LiIsbWF4TGVuZ3RoOiJHaWxkaSDDpnR0aSBhw7AgdmVyYSDDrSBtZXN0YSBsYWdpIFRIUkVTSE9MRCBzdGFmYSBsYW5ndC4iLHJlcXVpcmVkOiLDnmFyZiBhw7AgaGFmYSBnaWxkaS4ifX0pLGV9XSl9XSksYW5ndWxhci5tb2R1bGUoInVpLmdyaWQiKS5jb25maWcoWyIkcHJvdmlkZSIsZnVuY3Rpb24oZSl7ZS5kZWNvcmF0b3IoImkxOG5TZXJ2aWNlIixbIiRkZWxlZ2F0ZSIsZnVuY3Rpb24oZSl7cmV0dXJuIGUuYWRkKCJpdCIse2FnZ3JlZ2F0ZTp7bGFiZWw6ImVsZW1lbnRpIn0sZ3JvdXBQYW5lbDp7ZGVzY3JpcHRpb246IlRyYXNjaW5hIHVuJ2ludGVzdGF6aW9uZSBhbGwnaW50ZXJubyBkZWwgZ3J1cHBvIGRlbGxhIGNvbG9ubmEuIn0sc2VhcmNoOntwbGFjZWhvbGRlcjoiUmljZXJjYS4uLiIsc2hvd2luZ0l0ZW1zOiJNb3N0cmE6IixzZWxlY3RlZEl0ZW1zOiJTZWxlemlvbmF0aToiLHRvdGFsSXRlbXM6IlRvdGFsaToiLHNpemU6IlRvdCBQYWdpbmU6IixmaXJzdDoiUHJpbWEiLG5leHQ6IlByb3NzaW1hIixwcmV2aW91czoiUHJlY2VkZW50ZSIsbGFzdDoiVWx0aW1hIn0sbWVudTp7dGV4dDoiU2NlZ2xpIGxlIGNvbG9ubmU6In0sc29ydDp7YXNjZW5kaW5nOiJBc2MuIixkZXNjZW5kaW5nOiJEZXNjLiIscmVtb3ZlOiJBbm51bGxhIG9yZGluYW1lbnRvIn0sY29sdW1uOntoaWRlOiJOYXNjb25kaSJ9LGFnZ3JlZ2F0aW9uOntjb3VudDoicmlnaGUgdG90YWxpOiAiLHN1bToidG90OiAiLGF2ZzoibWVkaWE6ICIsbWluOiJtaW5pbW86ICIsbWF4OiJtYXNzaW1vOiAifSxwaW5uaW5nOntwaW5MZWZ0OiJCbG9jY2EgYSBzeCIscGluUmlnaHQ6IkJsb2NjYSBhIGR4Iix1bnBpbjoiQmxvY2NhIGluIGFsdG8ifSxncmlkTWVudTp7Y29sdW1uczoiQ29sb25uZToiLGltcG9ydGVyVGl0bGU6IkltcG9ydGEiLGV4cG9ydGVyQWxsQXNDc3Y6IkVzcG9ydGEgdHV0dGkgaSBkYXRpIGluIENTViIsZXhwb3J0ZXJWaXNpYmxlQXNDc3Y6IkVzcG9ydGEgaSBkYXRpIHZpc2liaWxpIGluIENTViIsZXhwb3J0ZXJTZWxlY3RlZEFzQ3N2OiJFc3BvcnRhIGkgZGF0aSBzZWxlemlvbmF0aSBpbiBDU1YiLGV4cG9ydGVyQWxsQXNQZGY6IkVzcG9ydGEgdHV0dGkgaSBkYXRpIGluIFBERiIsZXhwb3J0ZXJWaXNpYmxlQXNQZGY6IkVzcG9ydGEgaSBkYXRpIHZpc2liaWxpIGluIFBERiIsZXhwb3J0ZXJTZWxlY3RlZEFzUGRmOiJFc3BvcnRhIGkgZGF0aSBzZWxlemlvbmF0aSBpbiBQREYiLGV4cG9ydGVyQWxsQXNFeGNlbDoiRXNwb3J0YSB0dXR0aSBpIGRhdGkgaW4gZXhjZWwiLGV4cG9ydGVyVmlzaWJsZUFzRXhjZWw6IkVzcG9ydGEgaSBkYXRpIHZpc2liaWxpIGluIGV4Y2VsIixleHBvcnRlclNlbGVjdGVkQXNFeGNlbDoiRXNwb3J0YSBpIGRhdGkgc2VsZXppb25hdGkgaW4gZXhjZWwiLGNsZWFyQWxsRmlsdGVyczoiUHVsaXJlIHR1dHRpIGkgZmlsdHJpIn0saW1wb3J0ZXI6e25vSGVhZGVyczoiSW1wb3NzaWJpbGUgcmVwZXJpcmUgaSBub21pIGRlbGxlIGNvbG9ubmUsIHNpY3VybyBjaGUgc2lhbm8gaW5kaWNhdGkgYWxsJ2ludGVybm8gZGVsIGZpbGU/Iixub09iamVjdHM6IkltcG9zc2liaWxlIHJlcGVyaXJlIGdsaSBvZ2dldHRpLCBzaWN1cm8gY2hlIHNpYW5vIGluZGljYXRpIGFsbCdpbnRlcm5vIGRlbCBmaWxlPyIsaW52YWxpZENzdjoiSW1wb3NzaWJpbGUgZWxhYm9yYXJlIGlsIGZpbGUsIHNpY3VybyBjaGUgc2lhIHVuIENTVj8iLGludmFsaWRKc29uOiJJbXBvc3NpYmlsZSBlbGFib3JhcmUgaWwgZmlsZSwgc2ljdXJvIGNoZSBzaWEgdW4gSlNPTiB2YWxpZG8/Iixqc29uTm90QXJyYXk6IkVycm9yZSEgSWwgZmlsZSBKU09OIGRhIGltcG9ydGFyZSBkZXZlIGNvbnRlbmVyZSB1biBhcnJheS4ifSxwYWdpbmF0aW9uOnthcmlhOntwYWdlVG9GaXJzdDoiUHJpbWEiLHBhZ2VCYWNrOiJJbmRpZXRybyIscGFnZVNlbGVjdGVkOiJQYWdpbmEgc2VsZXppb25hdGEiLHBhZ2VGb3J3YXJkOiJBdmFudGkiLHBhZ2VUb0xhc3Q6IlVsdGltYSJ9LHNpemVzOiJlbGVtZW50aSBwZXIgcGFnaW5hIix0b3RhbEl0ZW1zOiJlbGVtZW50aSIsdGhyb3VnaDoiYSIsb2Y6ImRpIn0sZ3JvdXBpbmc6e2dyb3VwOiJSYWdncnVwcGEiLHVuZ3JvdXA6IlNlcGFyYSIsYWdncmVnYXRlX2NvdW50OiJBZ2c6IE4uIEVsZW0uIixhZ2dyZWdhdGVfc3VtOiJBZ2c6IFNvbW1hIixhZ2dyZWdhdGVfbWF4OiJBZ2c6IE1hc3NpbW8iLGFnZ3JlZ2F0ZV9taW46IkFnZzogTWluaW1vIixhZ2dyZWdhdGVfYXZnOiJBZ2c6IE1lZGlhIixhZ2dyZWdhdGVfcmVtb3ZlOiJBZ2c6IFJpbXVvdmkifSx2YWxpZGF0ZTp7ZXJyb3I6IkVycm9yZToiLG1pbkxlbmd0aDoiTHVuZ2hlenphIG1pbmltYSBwYXJpIGEgVEhSRVNIT0xEIGNhcmF0dGVyaS4iLG1heExlbmd0aDoiTHVuZ2hlenphIG1hc3NpbWEgcGFyaSBhIFRIUkVTSE9MRCBjYXJhdHRlcmkuIixyZXF1aXJlZDoiTmVjZXNzYXJpbyBpbnNlcmlyZSB1biB2YWxvcmUuIn19KSxlfV0pfV0pLGFuZ3VsYXIubW9kdWxlKCJ1aS5ncmlkIikuY29uZmlnKFsiJHByb3ZpZGUiLGZ1bmN0aW9uKGUpe2UuZGVjb3JhdG9yKCJpMThuU2VydmljZSIsWyIkZGVsZWdhdGUiLGZ1bmN0aW9uKGUpe3JldHVybiBlLmFkZCgiamEiLHtoZWFkZXJDZWxsOnthcmlhOntkZWZhdWx0RmlsdGVyTGFiZWw6IuWIl+OBruODleOCo+ODq+OCv+ODvCIscmVtb3ZlRmlsdGVyOiLjg5XjgqPjg6vjgr/jg7zjga7op6PpmaQiLGNvbHVtbk1lbnVCdXR0b25MYWJlbDoi5YiX44Gu44Oh44OL44Ol44O8In0scHJpb3JpdHk6IuWEquWFiOW6pjoiLGZpbHRlckxhYmVsOiLliJfjg5XjgqPjg6vjgr/jg7w6ICJ9LGFnZ3JlZ2F0ZTp7bGFiZWw6IumgheebriJ9LGdyb3VwUGFuZWw6e2Rlc2NyaXB0aW9uOiLjgZPjgZPjgavliJfjg5jjg4Pjg4DjgpLjg4njg6njg4PjgrDjgqLjg7Pjg4njg4njg63jg4Pjg5fjgZfjgabjgIHjgZ3jga7liJfjgafjgrDjg6vjg7zjg5fljJbjgZfjgb7jgZnjgIIifSxzZWFyY2g6e3BsYWNlaG9sZGVyOiLmpJzntKIuLi4iLHNob3dpbmdJdGVtczoi6KGo56S65Lit44Gu6aCF55uuOiIsc2VsZWN0ZWRJdGVtczoi6YG45oqe44GX44Gf6aCF55uuOiIsdG90YWxJdGVtczoi6aCF55uu44Gu57eP5pWwOiIsc2l6ZToi44Oa44O844K444K144Kk44K6OiIsZmlyc3Q6IuacgOWIneOBruODmuODvOOCuCIsbmV4dDoi5qyh44Gu44Oa44O844K4IixwcmV2aW91czoi5YmN44Gu44Oa44O844K4IixsYXN0OiLliY3jga7jg5rjg7zjgrgifSxtZW51Ont0ZXh0OiLliJfjga7pgbjmip46In0sc29ydDp7YXNjZW5kaW5nOiLmmIfpoIbjgavkuKbjgbnmm7/jgYgiLGRlc2NlbmRpbmc6IumZjemghuOBq+S4puOBueabv+OBiCIsbm9uZToi5Lim44G55pu/44GI54Sh44GXIixyZW1vdmU6IuS4puOBueabv+OBiOOBruino+mZpCJ9LGNvbHVtbjp7aGlkZToi5YiX44Gu6Z2e6KGo56S6In0sYWdncmVnYXRpb246e2NvdW50OiLooYzmlbA6ICIsc3VtOiLlkIjoqIg6ICIsYXZnOiLlubPlnYc6ICIsbWluOiLmnIDlsI86ICIsbWF4OiLmnIDlpKc6ICJ9LHBpbm5pbmc6e3BpbkxlZnQ6IuW3puOBq+WbuuWumiIscGluUmlnaHQ6IuWPs+OBq+WbuuWumiIsdW5waW46IuWbuuWumuino+mZpCJ9LGNvbHVtbk1lbnU6e2Nsb3NlOiLplonjgZjjgosifSxncmlkTWVudTp7YXJpYTp7YnV0dG9uTGFiZWw6IuOCsOODquODg+ODieODoeODi+ODpeODvCJ9LGNvbHVtbnM6IuWIl+OBruihqOekui/pnZ7ooajnpLo6IixpbXBvcnRlclRpdGxlOiLjg5XjgqHjgqTjg6vjga7jgqTjg7Pjg53jg7zjg4giLGV4cG9ydGVyQWxsQXNDc3Y6IuOBmeOBueOBpuOBruODh+ODvOOCv+OCkkNTVuW9ouW8j+OBp+OCqOOCr+OCueODneODvOODiCIsZXhwb3J0ZXJWaXNpYmxlQXNDc3Y6IuihqOekuuS4reOBruODh+ODvOOCv+OCkkNTVuW9ouW8j+OBp+OCqOOCr+OCueODneODvOODiCIsZXhwb3J0ZXJTZWxlY3RlZEFzQ3N2OiLpgbjmip7jgZfjgZ/jg4fjg7zjgr/jgpJDU1blvaLlvI/jgafjgqjjgq/jgrnjg53jg7zjg4giLGV4cG9ydGVyQWxsQXNQZGY6IuOBmeOBueOBpuOBruODh+ODvOOCv+OCklBERuW9ouW8j+OBp+OCqOOCr+OCueODneODvOODiCIsZXhwb3J0ZXJWaXNpYmxlQXNQZGY6IuihqOekuuS4reOBruODh+ODvOOCv+OCklBERuW9ouW8j+OBp+OCqOOCr+OCueODneODvOODiCIsZXhwb3J0ZXJTZWxlY3RlZEFzUGRmOiLpgbjmip7jgZfjgZ/jg4fjg7zjgr/jgpJQREblvaLlvI/jgafjgqjjgq/jgrnjg53jg7zjg4giLGNsZWFyQWxsRmlsdGVyczoi44GZ44G544Gm44Gu44OV44Kj44Or44K/44KS44Kv44Oq44KiIn0saW1wb3J0ZXI6e25vSGVhZGVyczoi5YiX5ZCN44KS5Y+W5b6X44Gn44GN44G+44Gb44KT44CC44OV44Kh44Kk44Or44Gr44OY44OD44OA44GM5ZCr44G+44KM44Gm44GE44KL44GT44Go44KS56K66KqN44GX44Gm44GP44Gg44GV44GE44CCIixub09iamVjdHM6IuOCquODluOCuOOCp+OCr+ODiOOCkuWPluW+l+OBp+OBjeOBvuOBm+OCk+OAguODleOCoeOCpOODq+OBq+ODmOODg+ODgOS7peWkluOBruODh+ODvOOCv+OBjOWQq+OBvuOCjOOBpuOBhOOCi+OBk+OBqOOCkueiuuiqjeOBl+OBpuOBj+OBoOOBleOBhOOAgiIsaW52YWxpZENzdjoi44OV44Kh44Kk44Or44KS5Yem55CG44Gn44GN44G+44Gb44KT44CC44OV44Kh44Kk44Or44GM5pyJ5Yq544GqQ1NW5b2i5byP44Gn44GC44KL44GT44Go44KS56K66KqN44GX44Gm44GP44Gg44GV44GE44CCIixpbnZhbGlkSnNvbjoi44OV44Kh44Kk44Or44KS5Yem55CG44Gn44GN44G+44Gb44KT44CC44OV44Kh44Kk44Or44GM5pyJ5Yq544GqSlNPTuW9ouW8j+OBp+OBguOCi+OBk+OBqOOCkueiuuiqjeOBl+OBpuOBj+OBoOOBleOBhOOAgiIsanNvbk5vdEFycmF5OiLjgqTjg7Pjg53jg7zjg4jjgZfjgZ9KU09O44OV44Kh44Kk44Or44Gr44Gv6YWN5YiX44GM5ZCr44G+44KM44Gm44GE44KL5b+F6KaB44GM44GC44KK44G+44GZ44CC5Yem55CG44KS5Lit5q2i44GX44G+44GZ44CCIn0scGFnaW5hdGlvbjp7YXJpYTp7cGFnZVRvRmlyc3Q6IuacgOWIneOBruODmuODvOOCuCIscGFnZUJhY2s6IuWJjeOBruODmuODvOOCuCIscGFnZVNlbGVjdGVkOiLnj77lnKjjga7jg5rjg7zjgrgiLHBhZ2VGb3J3YXJkOiLmrKHjga7jg5rjg7zjgrgiLHBhZ2VUb0xhc3Q6IuacgOW+jOOBruODmuODvOOCuCJ9LHNpemVzOiLpoIXnm64v44Oa44O844K4Iix0b3RhbEl0ZW1zOiLpoIXnm64iLHRocm91Z2g6IuOBi+OCiSIsb2Y6Iumgheebri/lhagifSxncm91cGluZzp7Z3JvdXA6IuOCsOODq+ODvOODl+WMliIsdW5ncm91cDoi44Kw44Or44O844OX5YyW44Gu6Kej6ZmkIixhZ2dyZWdhdGVfY291bnQ6IumbhuioiOihqOekujog6KGM5pWwIixhZ2dyZWdhdGVfc3VtOiLpm4boqIjooajnpLo6IOWQiOioiCIsYWdncmVnYXRlX21heDoi6ZuG6KiI6KGo56S6OiDmnIDlpKciLGFnZ3JlZ2F0ZV9taW46IumbhuioiOihqOekujog5pyA5bCPIixhZ2dyZWdhdGVfYXZnOiLpm4boqIjooajnpLo6IOW5s+WdhyIsYWdncmVnYXRlX3JlbW92ZToi6ZuG6KiI6KGo56S6OiDop6PpmaQifSx2YWxpZGF0ZTp7ZXJyb3I6IkVycm9yOiIsbWluTGVuZ3RoOiJUSFJFU0hPTEQg5paH5a2X5Lul5LiK44Gn5YWl5Yqb44GX44Gm44GP44Gg44GV44GE44CCIixtYXhMZW5ndGg6IlRIUkVTSE9MRCDmloflrZfku6XkuIvjgaflhaXlipvjgZfjgabjgY/jgaDjgZXjgYTjgIIiLHJlcXVpcmVkOiLlgKTjgYzlv4XopoHjgafjgZnjgIIifX0pLGV9XSl9XSksYW5ndWxhci5tb2R1bGUoInVpLmdyaWQiKS5jb25maWcoWyIkcHJvdmlkZSIsZnVuY3Rpb24oZSl7ZS5kZWNvcmF0b3IoImkxOG5TZXJ2aWNlIixbIiRkZWxlZ2F0ZSIsZnVuY3Rpb24oZSl7cmV0dXJuIGUuYWRkKCJrbyIse2FnZ3JlZ2F0ZTp7bGFiZWw6IuyVhOydtO2FnCJ9LGdyb3VwUGFuZWw6e2Rlc2NyaXB0aW9uOiLsu6zrn7zsnLzroZwg6re466O57ZWR7ZWY6riwIOychO2VtOyEnOuKlCDsu6zrn7wg7Zek642U66W8IOuBjOyWtCDrlqjslrTrnKjroKQg7KO87IS47JqULiJ9LHNlYXJjaDp7cGxhY2Vob2xkZXI6IuqygOyDiS4uLiIsc2hvd2luZ0l0ZW1zOiLtla3rqqkg67O07Jes7KO86riwOiIsc2VsZWN0ZWRJdGVtczoi7ISg7YOdIO2VreuqqToiLHRvdGFsSXRlbXM6IuyghOyytCDtla3rqqk6IixzaXplOiLtjpjsnbTsp4Ag7YGs6riwOiIsZmlyc3Q6Iuyyq+uyiOynuCDtjpjsnbTsp4AiLG5leHQ6IuuLpOydjCDtjpjsnbTsp4AiLHByZXZpb3VzOiLsnbTsoIQg7Y6Y7J207KeAIixsYXN0OiLrp4jsp4Drp4kg7Y6Y7J207KeAIn0sbWVudTp7dGV4dDoi7Lus65+87J2EIOyEoO2Dne2VmOyEuOyalDoifSxzb3J0Onthc2NlbmRpbmc6IuyYpOumhOywqOyInCDsoJXroKwiLGRlc2NlbmRpbmc6IuuCtOumvOywqOyInCDsoJXroKwiLHJlbW92ZToi7IaM7YyFIOygnOqxsCJ9LGNvbHVtbjp7aGlkZToi7Lus65+8IOygnOqxsCJ9LGFnZ3JlZ2F0aW9uOntjb3VudDoi7KCE7LK0IOqwr+yImDogIixzdW06IuyghOyytDogIixhdmc6Iu2Pieq3oDogIixtaW46Iuy1nOyGjDogIixtYXg6Iuy1nOuMgDogIn0scGlubmluZzp7cGluTGVmdDoi7Jm87Kq9IO2VgCIscGluUmlnaHQ6IuyYpOuluOyqvSDtlYAiLHVucGluOiLtlYAg7KCc6rGwIn0sZ3JpZE1lbnU6e2NvbHVtbnM6Iuy7rOufvDoiLGltcG9ydGVyVGl0bGU6Iu2MjOydvCDqsIDsoLjsmKTquLAiLGV4cG9ydGVyQWxsQXNDc3Y6ImNzduuhnCDrqqjrk6Ag642w7J207YSwIOuCtOuztOuCtOq4sCIsZXhwb3J0ZXJWaXNpYmxlQXNDc3Y6ImNzduuhnCDrs7TsnbTripQg642w7J207YSwIOuCtOuztOuCtOq4sCIsZXhwb3J0ZXJTZWxlY3RlZEFzQ3N2OiJjc3broZwg7ISg7YOd65CcIOuNsOydtO2EsCDrgrTrs7TrgrTquLAiLGV4cG9ydGVyQWxsQXNQZGY6InBkZuuhnCDrqqjrk6Ag642w7J207YSwIOuCtOuztOuCtOq4sCIsZXhwb3J0ZXJWaXNpYmxlQXNQZGY6InBkZuuhnCDrs7TsnbTripQg642w7J207YSwIOuCtOuztOuCtOq4sCIsZXhwb3J0ZXJTZWxlY3RlZEFzUGRmOiJwZGbroZwg7ISg7YOdIOuNsOydtO2EsCDrgrTrs7TrgrTquLAiLGNsZWFyQWxsRmlsdGVyczoi66qo65OgIO2VhO2EsOulvCDssq3showifSxpbXBvcnRlcjp7bm9IZWFkZXJzOiLsu6zrn7zrqoXsnbQg7KeA7KCV65CY7Ja0IOyeiOyngCDslYrsirXri4jri6QuIO2MjOydvOyXkCDtl6TrjZTqsIAg66qF7Iuc65CY7Ja0IOyeiOuKlOyngCDtmZXsnbjtlbQg7KO87IS47JqULiIsbm9PYmplY3RzOiLrjbDsnbTthLDqsIAg7KeA7KCV65CY7Ja0IOyeiOyngCDslYrsirXri4jri6QuIOuNsOydtO2EsOqwgCDtjIzsnbzsl5Ag7J6I64qU7KeAIO2ZleyduO2VtCDso7zshLjsmpQuIixpbnZhbGlkQ3N2OiLtjIzsnbzsnYQg7LKY66as7ZWgIOyImCDsl4bsirXri4jri6QuIOyYrOuwlOuluCBjc3bsnbjsp4Ag7ZmV7J247ZW0IOyjvOyEuOyalC4iLGludmFsaWRKc29uOiLtjIzsnbzsnYQg7LKY66as7ZWgIOyImCDsl4bsirXri4jri6QuIOyYrOuwlOuluCBqc29u7J247KeAIO2ZleyduO2VtCDso7zshLjsmpQuIixqc29uTm90QXJyYXk6Impzb24g7YyM7J287J2AIOuwsOyXtOydhCDtj6ztlajtlbTslbwg7ZWp64uI64ukLiJ9LHBhZ2luYXRpb246e3NpemVzOiLtjpjsnbTsp4Dri7kg7ZWt66qpIix0b3RhbEl0ZW1zOiLsoITssrQg7ZWt66qpIn19KSxlfV0pfV0pLGFuZ3VsYXIubW9kdWxlKCJ1aS5ncmlkIikuY29uZmlnKFsiJHByb3ZpZGUiLGZ1bmN0aW9uKGUpe2UuZGVjb3JhdG9yKCJpMThuU2VydmljZSIsWyIkZGVsZWdhdGUiLGZ1bmN0aW9uKGUpe3JldHVybiBlLmFkZCgibmwiLHthZ2dyZWdhdGU6e2xhYmVsOiJpdGVtcyJ9LGdyb3VwUGFuZWw6e2Rlc2NyaXB0aW9uOiJTbGVlcCBoaWVyIGVlbiBrb2xvbW5hYW0gaGVlbiBvbSBvcCB0ZSBncm9lcGVyZW4uIn0sc2VhcmNoOntwbGFjZWhvbGRlcjoiWm9la2VuLi4uIixzaG93aW5nSXRlbXM6IkdldG9vbmRlIGl0ZW1zOiIsc2VsZWN0ZWRJdGVtczoiR2VzZWxlY3RlZXJkZSBpdGVtczoiLHRvdGFsSXRlbXM6IlRvdGFhbCBhYW50YWwgaXRlbXM6IixzaXplOiJJdGVtcyBwZXIgcGFnaW5hOiIsZmlyc3Q6IkVlcnN0ZSBwYWdpbmEiLG5leHQ6IlZvbGdlbmRlIHBhZ2luYSIscHJldmlvdXM6IlZvcmlnZSBwYWdpbmEiLGxhc3Q6IkxhYXRzdGUgcGFnaW5hIn0sbWVudTp7dGV4dDoiS2llcyBrb2xvbW1lbjoifSxzb3J0Onthc2NlbmRpbmc6IlNvcnRlZXIgb3Bsb3BlbmQiLGRlc2NlbmRpbmc6IlNvcnRlZXIgYWZsb3BlbmQiLHJlbW92ZToiVmVyd2lqZGVyIHNvcnRlcmluZyJ9LGNvbHVtbjp7aGlkZToiVmVyYmVyZyBrb2xvbSJ9LGFnZ3JlZ2F0aW9uOntjb3VudDoiQWFudGFsIHJpamVuOiAiLHN1bToiU29tOiAiLGF2ZzoiR2VtaWRkZWxkZTogIixtaW46Ik1pbjogIixtYXg6Ik1heDogIn0scGlubmluZzp7cGluTGVmdDoiWmV0IGxpbmtzIHZhc3QiLHBpblJpZ2h0OiJaZXQgcmVjaHRzIHZhc3QiLHVucGluOiJNYWFrIGxvcyJ9LGdyaWRNZW51Ontjb2x1bW5zOiJLb2xvbW1lbjoiLGltcG9ydGVyVGl0bGU6IkltcG9ydGVlciBiZXN0YW5kIixleHBvcnRlckFsbEFzQ3N2OiJFeHBvcnRlZXIgYWxsZSBkYXRhIGFscyBjc3YiLGV4cG9ydGVyVmlzaWJsZUFzQ3N2OiJFeHBvcnRlZXIgemljaHRiYXJlIGRhdGEgYWxzIGNzdiIsZXhwb3J0ZXJTZWxlY3RlZEFzQ3N2OiJFeHBvcnRlZXIgZ2VzZWxlY3RlZXJkZSBkYXRhIGFscyBjc3YiLGV4cG9ydGVyQWxsQXNQZGY6IkV4cG9ydGVlciBhbGxlIGRhdGEgYWxzIHBkZiIsZXhwb3J0ZXJWaXNpYmxlQXNQZGY6IkV4cG9ydGVlciB6aWNodGJhcmUgZGF0YSBhbHMgcGRmIixleHBvcnRlclNlbGVjdGVkQXNQZGY6IkV4cG9ydGVlciBnZXNlbGVjdGVlcmRlIGRhdGEgYWxzIHBkZiIsZXhwb3J0ZXJBbGxBc0V4Y2VsOiJFeHBvcnRlZXIgYWxsZSBkYXRhIGFscyBleGNlbCIsZXhwb3J0ZXJWaXNpYmxlQXNFeGNlbDoiRXhwb3J0ZWVyIHppY2h0YmFyZSBkYXRhIGFscyBleGNlbCIsZXhwb3J0ZXJTZWxlY3RlZEFzRXhjZWw6IkV4cG9ydGVlciBhbGxlIGRhdGEgYWxzIGV4Y2VsIixjbGVhckFsbEZpbHRlcnM6IlJlaW5pZyBhbGxlIGZpbHRlcnMifSxpbXBvcnRlcjp7bm9IZWFkZXJzOiJLb2xvbW5hbWVuIGt1bm5lbiBuaWV0IHdvcmRlbiBhZmdlbGVpZC4gSGVlZnQgaGV0IGJlc3RhbmQgZWVuIGhlYWRlcj8iLG5vT2JqZWN0czoiT2JqZWN0ZW4ga3VubmVuIG5pZXQgd29yZGVuIGFmZ2VsZWlkLiBCZXZhdCBoZXQgYmVzdGFuZCBkYXRhIG5hYXN0IGRlIGhlYWRlcnM/IixpbnZhbGlkQ3N2OiJIZXQgYmVzdGFuZCBrYW4gbmlldCB2ZXJ3ZXJrdCB3b3JkZW4uIElzIGhldCBlZW4gdmFsaWRlIGNzdiBiZXN0YW5kPyIsaW52YWxpZEpzb246IkhldCBiZXN0YW5kIGthbiBuaWV0IHZlcndlcmt0IHdvcmRlbi4gSXMgaGV0IHZhbGlkZSBqc29uPyIsanNvbk5vdEFycmF5OiJIZXQganNvbiBiZXN0YW5kIG1vZXQgZWVuIGFycmF5IGJldmF0dGVuLiBEZSBhY3RpZSB3b3JkdCBnZWFubnVsZWVyZC4ifSxwYWdpbmF0aW9uOntzaXplczoiaXRlbXMgcGVyIHBhZ2luYSIsdG90YWxJdGVtczoiaXRlbXMiLG9mOiJ2YW4gZGUifSxncm91cGluZzp7Z3JvdXA6Ikdyb2VwZWVyIix1bmdyb3VwOiJHcm9lcGVyaW5nIG9waGVmZmVuIixhZ2dyZWdhdGVfY291bnQ6IkFnZzogQWFudGFsIixhZ2dyZWdhdGVfc3VtOiJBZ2c6IFNvbSIsYWdncmVnYXRlX21heDoiQWdnOiBNYXgiLGFnZ3JlZ2F0ZV9taW46IkFnZzogTWluIixhZ2dyZWdhdGVfYXZnOiJBZ2c6IEdlbSIsYWdncmVnYXRlX3JlbW92ZToiQWdnOiBWZXJ3aWpkZXIifX0pLGV9XSl9XSksYW5ndWxhci5tb2R1bGUoInVpLmdyaWQiKS5jb25maWcoWyIkcHJvdmlkZSIsZnVuY3Rpb24oZSl7ZS5kZWNvcmF0b3IoImkxOG5TZXJ2aWNlIixbIiRkZWxlZ2F0ZSIsZnVuY3Rpb24oZSl7cmV0dXJuIGUuYWRkKCJubyIse2hlYWRlckNlbGw6e2FyaWE6e2RlZmF1bHRGaWx0ZXJMYWJlbDoiRmlsdGVyIGZvciBrb2xvbm5lIixyZW1vdmVGaWx0ZXI6IkZqZXJuIGZpbHRlciIsY29sdW1uTWVudUJ1dHRvbkxhYmVsOiJLb2xvbm5lbWVueSJ9LHByaW9yaXR5OiJQcmlvcml0ZXQ6IixmaWx0ZXJMYWJlbDoiRmlsdGVyIGZvciBrb2xvbm5lOiAifSxhZ2dyZWdhdGU6e2xhYmVsOiJlbGVtZW50ZXIifSxncm91cFBhbmVsOntkZXNjcmlwdGlvbjoiVHJla2sgZW4ga29sb25uZW92ZXJza3JpZnQgaGl0IG9nIHNsaXBwIGRlbiBmb3Igw6UgZ3J1cHBlcmUgZXR0ZXIgZGVuIGtvbG9ubmVuLiJ9LHNlYXJjaDp7cGxhY2Vob2xkZXI6IlPDuGsuLi4iLHNob3dpbmdJdGVtczoiVmlzdGUgZWxlbWVudGVyOiIsc2VsZWN0ZWRJdGVtczoiVmFsZ3RlIGVsZW1lbnRlcjoiLHRvdGFsSXRlbXM6IkFudGFsbCBlbGVtZW50ZXI6IixzaXplOiJTaWRlc3TDuHJyZWxzZToiLGZpcnN0OiJGw7hyc3RlIHNpZGUiLG5leHQ6Ik5lc3RlIHNpZGUiLHByZXZpb3VzOiJGb3JyaWdlIHNpZGUiLGxhc3Q6IlNpc3RlIHNpZGUifSxtZW51Ont0ZXh0OiJWZWxnIGtvbG9ubmVyOiJ9LHNvcnQ6e2FzY2VuZGluZzoiU29ydGVyZSBzdGlnZW5kZSIsZGVzY2VuZGluZzoiU29ydGVyZSBmYWxsZW5kZSIsbm9uZToiSW5nZW4gc29ydGVyaW5nIixyZW1vdmU6IkZqZXJuIHNvcnRlcmluZyJ9LGNvbHVtbjp7aGlkZToiU2tqdWwga29sb25uZSJ9LGFnZ3JlZ2F0aW9uOntjb3VudDoiYW50YWxsIHJhZGVyOiAiLHN1bToidG90YWw6ICIsYXZnOiJnamVubm9tc25pdHQ6ICIsbWluOiJtaW5pbXVtOiAiLG1heDoibWFrc2ltdW06ICJ9LHBpbm5pbmc6e3BpbkxlZnQ6IkZlc3QgdGlsIHZlbnN0cmUiLHBpblJpZ2h0OiJGZXN0IHRpbCBow7h5cmUiLHVucGluOiJMw7hzbmUifSxjb2x1bW5NZW51OntjbG9zZToiTHVrayJ9LGdyaWRNZW51OnthcmlhOntidXR0b25MYWJlbDoiR3JpZCBNZW51In0sY29sdW1uczoiS29sb25uZXI6IixpbXBvcnRlclRpdGxlOiJJbXBvcnRlciBmaWwiLGV4cG9ydGVyQWxsQXNDc3Y6IkVrc3BvcnRlciBhbGxlIGRhdGEgc29tIGNzdiIsZXhwb3J0ZXJWaXNpYmxlQXNDc3Y6IkVrc3BvcnRlciBzeW5saWdlIGRhdGEgc29tIGNzdiIsZXhwb3J0ZXJTZWxlY3RlZEFzQ3N2OiJFa3Nwb3J0ZXIgdXR2YWxndGUgZGF0YSBzb20gY3N2IixleHBvcnRlckFsbEFzUGRmOiJFa3Nwb3J0ZXIgYWxsZSBkYXRhIHNvbSBwZGYiLGV4cG9ydGVyVmlzaWJsZUFzUGRmOiJFa3Nwb3J0ZXIgc3lubGlnZSBkYXRhIHNvbSBwZGYiLGV4cG9ydGVyU2VsZWN0ZWRBc1BkZjoiRWtzcG9ydGVyIHV0dmFsZ3RlIGRhdGEgc29tIHBkZiIsZXhwb3J0ZXJBbGxBc0V4Y2VsOiJFa3Nwb3J0ZXIgYWxsZSBkYXRhIHNvbSBleGNlbCIsZXhwb3J0ZXJWaXNpYmxlQXNFeGNlbDoiRWtzcG9ydGVyIHN5bmxpZ2UgZGF0YSBzb20gZXhjZWwiLGV4cG9ydGVyU2VsZWN0ZWRBc0V4Y2VsOiJFa3Nwb3J0ZXIgdXR2YWxndGUgZGF0YSBzb20gZXhjZWwiLGNsZWFyQWxsRmlsdGVyczoiQ2xlYXIgYWxsIGZpbHRlcnMifSxpbXBvcnRlcjp7bm9IZWFkZXJzOiJLb2xvbm5lbmF2biBrdW5uZSBpa2tlIGF2bGVkZXMuIEhhciBmaWxlbiBlbiBvdmVyc2tyaWZ0PyIsbm9PYmplY3RzOiJPYmpla3RlciBrdW5uZSBpa2tlIGF2bGVkZXMuIEVyIGRlciBhbmRyZSBkYXRhIGkgZmlsZW4gZW5uIG92ZXJza3JpZnRlbj8iLGludmFsaWRDc3Y6IkZpbGVuIGt1bm5lIGlra2UgYmVoYW5kbGVzLiBFciBkZW4gZ3lsZGlnIENTVj8iLGludmFsaWRKc29uOiJGaWxlbiBrdW5uZSBpa2tlIGJlaGFuZGxlcy4gRXIgZGVuIGd5bGRpZyBKU09OPyIsanNvbk5vdEFycmF5OiJJbXBvcnRlcnQgSlNPTi1maWwgbcOlIGlubmVob2xkZSBlbiBsaXN0ZS4gQXZicnl0ZXIuIn0scGFnaW5hdGlvbjp7YXJpYTp7cGFnZVRvRmlyc3Q6IkfDpSB0aWwgZsO4cnN0ZSBzaWRlIixwYWdlQmFjazoiR8OlIHRpbCBmb3JyaWdlIHNpZGUiLHBhZ2VTZWxlY3RlZDoiVmFsZ3RlIHNpZGUiLHBhZ2VGb3J3YXJkOiJHw6UgdGlsIG5lc3RlIHNpZGUiLHBhZ2VUb0xhc3Q6IkfDpSB0aWwgc2lzdGUgc2lkZSJ9LHNpemVzOiJlbGVtZW50ZXIgcGVyIHNpZGUiLHRvdGFsSXRlbXM6ImVsZW1lbnRlciIsdGhyb3VnaDoidGlsIixvZjoiYXYifSxncm91cGluZzp7Z3JvdXA6IkdydXBwZXJlIix1bmdyb3VwOiJGamVybmUgZ3J1cHBlcmluZyIsYWdncmVnYXRlX2NvdW50OiJBZ3I6IEFudGFsbCIsYWdncmVnYXRlX3N1bToiQWdyOiBTdW0iLGFnZ3JlZ2F0ZV9tYXg6IkFncjogTWFrc2ltdW0iLGFnZ3JlZ2F0ZV9taW46IkFncjogTWluaW11bSIsYWdncmVnYXRlX2F2ZzoiQWdyOiBHamVubm9tc25pdHQiLGFnZ3JlZ2F0ZV9yZW1vdmU6IkFncjogRmplcm4ifX0pLGV9XSl9XSksYW5ndWxhci5tb2R1bGUoInVpLmdyaWQiKS5jb25maWcoWyIkcHJvdmlkZSIsZnVuY3Rpb24oZSl7ZS5kZWNvcmF0b3IoImkxOG5TZXJ2aWNlIixbIiRkZWxlZ2F0ZSIsZnVuY3Rpb24oZSl7cmV0dXJuIGUuYWRkKCJwbCIse2hlYWRlckNlbGw6e2FyaWE6e2RlZmF1bHRGaWx0ZXJMYWJlbDoiRmlsdHIgZGxhIGtvbHVtbnkiLHJlbW92ZUZpbHRlcjoiVXN1xYQgZmlsdHIiLGNvbHVtbk1lbnVCdXR0b25MYWJlbDoiT3BjamUga29sdW1ueSIsY29sdW1uOiJLb2x1bW5hIn0scHJpb3JpdHk6IlByaW9yeXRldDoiLGZpbHRlckxhYmVsOiJGaWx0ciBkbGEga29sdW1ueTogIn0sYWdncmVnYXRlOntsYWJlbDoicG96eWNqaSJ9LGdyb3VwUGFuZWw6e2Rlc2NyaXB0aW9uOiJQcnplY2nEhWduaWogbmFnxYLDs3dlayBrb2x1bW55IHR1dGFqLCBhYnkgcG9ncnVwb3dhxIcgd2VkxYJ1ZyBuaWVqLiJ9LHNlYXJjaDp7YXJpYTp7c2VsZWN0ZWQ6IldpZXJzeiB6YXpuYWN6b255Iixub3RTZWxlY3RlZDoiV2llcnN6IG5pZXphem5hY3pvbnkifSxwbGFjZWhvbGRlcjoiU3p1a2FqLi4uIixzaG93aW5nSXRlbXM6IldpZG9jem5lIHBvenljamU6IixzZWxlY3RlZEl0ZW1zOiJaYXpuYWN6b25lIHBvenljamU6Iix0b3RhbEl0ZW1zOiJXc3p5c3RraWNoIHBvenljamk6IixzaXplOiJSb3ptaWFyIHN0cm9ueToiLGZpcnN0OiJQaWVyd3N6YSBzdHJvbmEiLG5leHQ6Ik5hc3TEmXBuYSBzdHJvbmEiLHByZXZpb3VzOiJQb3ByemVkbmlhIHN0cm9uYSIsbGFzdDoiT3N0YXRuaWEgc3Ryb25hIn0sbWVudTp7dGV4dDoiV3liaWVyeiBrb2x1bW55OiJ9LHNvcnQ6e2FzY2VuZGluZzoiU29ydHVqIHJvc27EhWNvIixkZXNjZW5kaW5nOiJTb3J0dWogbWFsZWrEhWNvIixub25lOiJCcmFrIHNvcnRvd2FuaWEiLHJlbW92ZToiV3nFgsSFY3ogc29ydG93YW5pZSJ9LGNvbHVtbjp7aGlkZToiVWtyeWoga29sdW1uxJkifSxhZ2dyZWdhdGlvbjp7Y291bnQ6IlJhemVtIHBvenljamk6ICIsc3VtOiJSYXplbTogIixhdmc6IsWacmVkbmlhOiAiLG1pbjoiTWluOiAiLG1heDoiTWF4OiAifSxwaW5uaW5nOntwaW5MZWZ0OiJQcnp5cG5paiBkbyBsZXdlaiIscGluUmlnaHQ6IlByenlwbmlqIGRvIHByYXdlaiIsdW5waW46Ik9kZXBuaWoifSxjb2x1bW5NZW51OntjbG9zZToiWmFta25paiJ9LGdyaWRNZW51OnthcmlhOntidXR0b25MYWJlbDoiT3BjamUgdGFiZWxpIn0sY29sdW1uczoiS29sdW1ueToiLGltcG9ydGVyVGl0bGU6IkltcG9ydHVqIHBsaWsiLGV4cG9ydGVyQWxsQXNDc3Y6IkVrc3BvcnR1aiB3c3p5c3RraWUgZGFuZSBkbyBjc3YiLGV4cG9ydGVyVmlzaWJsZUFzQ3N2OiJFa3Nwb3J0dWogd2lkb2N6bmUgZGFuZSBkbyBjc3YiLGV4cG9ydGVyU2VsZWN0ZWRBc0NzdjoiRWtzcG9ydHVqIHphem5hY3pvbmUgZGFuZSBkbyBjc3YiLGV4cG9ydGVyQWxsQXNQZGY6IkVrc3BvcnR1aiB3c3p5c3RraWUgZGFuZSBkbyBwZGYiLGV4cG9ydGVyVmlzaWJsZUFzUGRmOiJFa3Nwb3J0dWogd2lkb2N6bmUgZGFuZSBkbyBwZGYiLGV4cG9ydGVyU2VsZWN0ZWRBc1BkZjoiRWtzcG9ydHVqIHphem5hY3pvbmUgZGFuZSBkbyBwZGYiLGV4cG9ydGVyQWxsQXNFeGNlbDoiRWtzcG9ydHVqIHdzenlzdGtpZSBkYW5lIGRvIGV4Y2VsIixleHBvcnRlclZpc2libGVBc0V4Y2VsOiJFa3Nwb3J0dWogd2lkb2N6bmUgZGFuZSBkbyBleGNlbCIsZXhwb3J0ZXJTZWxlY3RlZEFzRXhjZWw6IkVrc3BvcnR1aiB6YXpuYWN6b25lIGRhbmUgZG8gZXhjZWwiLGNsZWFyQWxsRmlsdGVyczoiV3ljennFm8SHIGZpbHRyeSJ9LGltcG9ydGVyOntub0hlYWRlcnM6Ik5pZSB1ZGHFgm8gc2nEmSB3Y3p5dGHEhyBuYXp3IGtvbHVtbi4gQ3p5IHBsaWsgcG9zaWFkYSBuYWfFgsOzd2VrPyIsbm9PYmplY3RzOiJOaWUgdWRhbG8gc2nEmSB3Y3p5dGHEhyBwb3p5Y2ppLiBDenkgcGxpayB6YXdpZXJhIGRhbmU/IixpbnZhbGlkQ3N2OiJOaWUgdWRhxYJvIHNpxJkgcHJ6ZXR3b3J6ecSHIHBsaWt1LiBDenkgdG8gcHJhd2lkxYJvd3kgcGxpayBDU1Y/IixpbnZhbGlkSnNvbjoiTmllIHVkYcWCbyBzacSZIHByemV0d29yennEhyBwbGlrdS4gQ3p5IHRvIHByYXdpZMWCb3d5IHBsaWsgSlNPTj8iLGpzb25Ob3RBcnJheToiSW1wb3J0b3dhbnkgcGxpayBKU09OIG11c2kgemF3aWVyYcSHIHRhYmxpY8SZLiBJbXBvcnRvd2FuaWUgcHJ6ZXJ3YW5lLiJ9LHBhZ2luYXRpb246e2FyaWE6e3BhZ2VUb0ZpcnN0OiJQaWVyd3N6YSBzdHJvbmEiLHBhZ2VCYWNrOiJQb3ByemVkbmlhIHN0cm9uYSIscGFnZVNlbGVjdGVkOiJXeWJyYW5hIHN0cm9uYSIscGFnZUZvcndhcmQ6Ik5hc3TEmXBuYSBzdHJvbmEiLHBhZ2VUb0xhc3Q6Ik9zdGF0bmlhIHN0cm9uYSJ9LHNpemVzOiJwb3p5Y2ppIG5hIHN0cm9uxJkiLHRvdGFsSXRlbXM6InBvenljamkiLHRocm91Z2g6ImRvIixvZjoieiJ9LGdyb3VwaW5nOntncm91cDoiR3J1cHVqIix1bmdyb3VwOiJSb3pncnVwdWoiLGFnZ3JlZ2F0ZV9jb3VudDoiWmJpb3Jjem86IFJhemVtIixhZ2dyZWdhdGVfc3VtOiJaYmlvcmN6bzogU3VtYSIsYWdncmVnYXRlX21heDoiWmJpb3Jjem86IE1heCIsYWdncmVnYXRlX21pbjoiWmJpb3Jjem86IE1pbiIsYWdncmVnYXRlX2F2ZzoiWmJpb3Jjem86IMWacmVkbmlhIixhZ2dyZWdhdGVfcmVtb3ZlOiJaYmlvcmN6bzogVXN1xYQifSx2YWxpZGF0ZTp7ZXJyb3I6IkLFgsSFZDoiLG1pbkxlbmd0aDoiV2FydG/Fm8SHIHBvd2lubmEgc2vFgmFkYcSHIHNpxJkgeiBjbyBuYWptbmllaiBUSFJFU0hPTEQgem5ha8Ozdy4iLG1heExlbmd0aDoiV2FydG/Fm8SHIHBvd2lubmEgc2vFgmFkYcSHIHNpxJkgeiBwcnp5bmFqbW5pZWogVEhSRVNIT0xEIHpuYWvDs3cuIixyZXF1aXJlZDoiV2FydG/Fm8SHIGplc3Qgd3ltYWdhbmEuIn19KSxlfV0pfV0pLGFuZ3VsYXIubW9kdWxlKCJ1aS5ncmlkIikuY29uZmlnKFsiJHByb3ZpZGUiLGZ1bmN0aW9uKGUpe2UuZGVjb3JhdG9yKCJpMThuU2VydmljZSIsWyIkZGVsZWdhdGUiLGZ1bmN0aW9uKGUpe3JldHVybiBlLmFkZCgicHQtYnIiLHtoZWFkZXJDZWxsOnthcmlhOntkZWZhdWx0RmlsdGVyTGFiZWw6IkZpbHRybyBwb3IgY29sdW5hIixyZW1vdmVGaWx0ZXI6IlJlbW92ZXIgZmlsdHJvIixjb2x1bW5NZW51QnV0dG9uTGFiZWw6Ik1lbnUgY29sdW5hIixjb2x1bW46IkNvbHVuYSJ9LHByaW9yaXR5OiJQcmlvcmlkYWRlOiIsZmlsdGVyTGFiZWw6IkZpbHRybyBwb3IgY29sdW5hOiAifSxhZ2dyZWdhdGU6e2xhYmVsOiJpdGVucyJ9LGdyb3VwUGFuZWw6e2Rlc2NyaXB0aW9uOiJBcnJhc3RlIGUgc29sdGUgdW1hIGNvbHVuYSBhcXVpIHBhcmEgYWdydXBhciBwb3IgZXNzYSBjb2x1bmEifSxzZWFyY2g6e2FyaWE6e3NlbGVjdGVkOiJMaW5oYSBzZWxlY2lvbmFkYSIsbm90U2VsZWN0ZWQ6IkxpbmhhIG7Do28gZXN0w6Egc2VsZWNpb25hZGEifSxwbGFjZWhvbGRlcjoiUHJvY3VyYXIuLi4iLHNob3dpbmdJdGVtczoiTW9zdHJhbmRvIG9zIEl0ZW5zOiIsc2VsZWN0ZWRJdGVtczoiSXRlbXMgU2VsZWNpb25hZG9zOiIsdG90YWxJdGVtczoiVG90YWwgZGUgSXRlbnM6IixzaXplOiJUYW1hbmhvIGRhIFDDoWdpbmE6IixmaXJzdDoiUHJpbWVpcmEgUMOhZ2luYSIsbmV4dDoiUHLDs3hpbWEgUMOhZ2luYSIscHJldmlvdXM6IlDDoWdpbmEgQW50ZXJpb3IiLGxhc3Q6IsOabHRpbWEgUMOhZ2luYSJ9LG1lbnU6e3RleHQ6IlNlbGVjaW9uZSBhcyBjb2x1bmFzOiJ9LHNvcnQ6e2FzY2VuZGluZzoiT3JkZW5hciBBc2NlbmRlbnRlIixkZXNjZW5kaW5nOiJPcmRlbmFyIERlc2NlbmRlbnRlIixub25lOiJOZW5odW1hIE9yZGVtIixyZW1vdmU6IlJlbW92ZXIgT3JkZW5hw6fDo28ifSxjb2x1bW46e2hpZGU6IkVzY29uZGVyIGNvbHVuYSJ9LGFnZ3JlZ2F0aW9uOntjb3VudDoidG90YWwgZGUgbGluaGFzOiAiLHN1bToidG90YWw6ICIsYXZnOiJtZWQ6ICIsbWluOiJtaW46ICIsbWF4OiJtYXg6ICJ9LHBpbm5pbmc6e3BpbkxlZnQ6IkZpeGFyIEVzcXVlcmRhIixwaW5SaWdodDoiRml4YXIgRGlyZWl0YSIsdW5waW46IkRlc3ByZW5kZXIifSxjb2x1bW5NZW51OntjbG9zZToiRmVjaGFyIn0sZ3JpZE1lbnU6e2FyaWE6e2J1dHRvbkxhYmVsOiJNZW51IEdyaWQifSxjb2x1bW5zOiJDb2x1bmFzOiIsaW1wb3J0ZXJUaXRsZToiSW1wb3J0YXIgYXJxdWl2byIsZXhwb3J0ZXJBbGxBc0NzdjoiRXhwb3J0YXIgdG9kb3Mgb3MgZGFkb3MgY29tbyBjc3YiLGV4cG9ydGVyVmlzaWJsZUFzQ3N2OiJFeHBvcnRhciBkYWRvcyB2aXPDrXZlaXMgY29tbyBjc3YiLGV4cG9ydGVyU2VsZWN0ZWRBc0NzdjoiRXhwb3J0YXIgZGFkb3Mgc2VsZWNpb25hZG9zIGNvbW8gY3N2IixleHBvcnRlckFsbEFzUGRmOiJFeHBvcnRhciB0b2RvcyBvcyBkYWRvcyBjb21vIHBkZiIsZXhwb3J0ZXJWaXNpYmxlQXNQZGY6IkV4cG9ydGFyIGRhZG9zIHZpc8OtdmVpcyBjb21vIHBkZiIsZXhwb3J0ZXJTZWxlY3RlZEFzUGRmOiJFeHBvcnRhciBkYWRvcyBzZWxlY2lvbmFkb3MgY29tbyBwZGYiLGV4cG9ydGVyQWxsQXNFeGNlbDoiRXhwb3J0YXIgdG9kb3Mgb3MgZGFkb3MgY29tbyBleGNlbCIsZXhwb3J0ZXJWaXNpYmxlQXNFeGNlbDoiRXhwb3J0YXIgZGFkb3Mgdmlzw612ZWlzIGNvbW8gZXhjZWwiLGV4cG9ydGVyU2VsZWN0ZWRBc0V4Y2VsOiJFeHBvcnRhciBkYWRvcyBzZWxlY2lvbmFkb3MgY29tbyBleGNlbCIsY2xlYXJBbGxGaWx0ZXJzOiJMaW1wYXIgdG9kb3Mgb3MgZmlsdHJvcyJ9LGltcG9ydGVyOntub0hlYWRlcnM6Ik5vbWVzIGRlIGNvbHVuYXMgbsOjbyBwdWRlcmFtIHNlciBkZXJpdmFkb3MuIE8gYXJxdWl2byB0ZW0gdW0gY2FiZcOnYWxobz8iLG5vT2JqZWN0czoiT2JqZXRvcyBuw6NvIHB1ZGVyYW0gc2VyIGRlcml2YWRvcy4gSGF2aWEgZGFkb3Mgbm8gYXJxdWl2bywgYWzDqW0gZG9zIGNhYmXDp2FsaG9zPyIsaW52YWxpZENzdjoiQXJxdWl2byBuw6NvIHBvZGUgc2VyIHByb2Nlc3NhZG8uIMOJIHVtIENTViB2w6FsaWRvPyIsaW52YWxpZEpzb246IkFycXVpdm8gbsOjbyBwb2RlIHNlciBwcm9jZXNzYWRvLiDDiSB1bSBKc29uIHbDoWxpZG8/Iixqc29uTm90QXJyYXk6IkFycXVpdm8ganNvbiBpbXBvcnRhZG8gdGVtIHF1ZSBjb250ZXIgdW0gYXJyYXkuIEFib3J0YW5kby4ifSxwYWdpbmF0aW9uOnthcmlhOntwYWdlVG9GaXJzdDoiUHJpbWVpcmEgcMOhZ2luYSIscGFnZUJhY2s6IlDDoWdpbmEgYW50ZXJpb3IiLHBhZ2VTZWxlY3RlZDoiUMOhZ2luYSBTZWxlY2lvbmFkYSIscGFnZUZvcndhcmQ6IlByb3hpbWEiLHBhZ2VUb0xhc3Q6IkFudGVyaW9yIn0sc2l6ZXM6Iml0ZW5zIHBvciBww6FnaW5hIix0b3RhbEl0ZW1zOiJpdGVucyIsdGhyb3VnaDoiYXRyYXbDqXMgZG9zIixvZjoiZGUifSxncm91cGluZzp7Z3JvdXA6IkFncnVwYXIiLHVuZ3JvdXA6IkRlc2FncnVwYXIiLGFnZ3JlZ2F0ZV9jb3VudDoiQWdyOiBDb250YXIiLGFnZ3JlZ2F0ZV9zdW06IkFncjogU29tYSIsYWdncmVnYXRlX21heDoiQWdyOiBNYXgiLGFnZ3JlZ2F0ZV9taW46IkFncjogTWluIixhZ2dyZWdhdGVfYXZnOiJBZ3I6IE1lZCIsYWdncmVnYXRlX3JlbW92ZToiQWdyOiBSZW1vdmVyIn0sdmFsaWRhdGU6e2Vycm9yOiJFcnJvOiIsbWluTGVuZ3RoOiJPIHZhbG9yIGRldmUgdGVyLCBubyBtaW5pbW8sIFRIUkVTSE9MRCBjYXJhY3RlcmVzLiIsbWF4TGVuZ3RoOiJPIHZhbG9yIGRldmUgdGVyLCBubyBtw6F4aW1vLCBUSFJFU0hPTEQgY2FyYWN0ZXJlcy4iLHJlcXVpcmVkOiJVbSB2YWxvciDDqSBuZWNlc3PDoXJpby4ifX0pLGV9XSl9XSksYW5ndWxhci5tb2R1bGUoInVpLmdyaWQiKS5jb25maWcoWyIkcHJvdmlkZSIsZnVuY3Rpb24oZSl7ZS5kZWNvcmF0b3IoImkxOG5TZXJ2aWNlIixbIiRkZWxlZ2F0ZSIsZnVuY3Rpb24oZSl7cmV0dXJuIGUuYWRkKCJwdCIse2hlYWRlckNlbGw6e2FyaWE6e2RlZmF1bHRGaWx0ZXJMYWJlbDoiRmlsdHJvIHBvciBjb2x1bmEiLHJlbW92ZUZpbHRlcjoiUmVtb3ZlciBmaWx0cm8iLGNvbHVtbk1lbnVCdXR0b25MYWJlbDoiTWVudSBjb2x1bmEiLGNvbHVtbjoiQ29sdW5hIn0scHJpb3JpdHk6IlByaW9yaWRhZGU6IixmaWx0ZXJMYWJlbDoiRmlsdHJvIHBvciBjb2x1bmE6ICJ9LGFnZ3JlZ2F0ZTp7bGFiZWw6Iml0ZW5zIn0sZ3JvdXBQYW5lbDp7ZGVzY3JpcHRpb246IkFycmFzdGUgZSBzb2x0ZSB1bWEgY29sdW5hIGFxdWkgcGFyYSBhZ3J1cGFyIHBvciBlc3NhIGNvbHVuYSJ9LHNlYXJjaDp7YXJpYTp7c2VsZWN0ZWQ6IkxpbmhhIHNlbGVjaW9uYWRhIixub3RTZWxlY3RlZDoiTGluaGEgbsOjbyBlc3TDoSBzZWxlY2lvbmFkYSJ9LHBsYWNlaG9sZGVyOiJQcm9jdXJhci4uLiIsc2hvd2luZ0l0ZW1zOiJNb3N0cmFuZG8gb3MgSXRlbnM6IixzZWxlY3RlZEl0ZW1zOiJJdGVucyBTZWxlY2lvbmFkb3M6Iix0b3RhbEl0ZW1zOiJUb3RhbCBkZSBJdGVuczoiLHNpemU6IlRhbWFuaG8gZGEgUMOhZ2luYToiLGZpcnN0OiJQcmltZWlyYSBQw6FnaW5hIixuZXh0OiJQcsOzeGltYSBQw6FnaW5hIixwcmV2aW91czoiUMOhZ2luYSBBbnRlcmlvciIsbGFzdDoiw5psdGltYSBQw6FnaW5hIn0sbWVudTp7dGV4dDoiU2VsZWNpb25lIGFzIGNvbHVuYXM6In0sc29ydDp7YXNjZW5kaW5nOiJPcmRlbmFyIEFzY2VuZGVudGUiLGRlc2NlbmRpbmc6Ik9yZGVuYXIgRGVzY2VuZGVudGUiLG5vbmU6Ik5lbmh1bWEgT3JkZW0iLHJlbW92ZToiUmVtb3ZlciBPcmRlbmHDp8OjbyJ9LGNvbHVtbjp7aGlkZToiRXNjb25kZXIgY29sdW5hIn0sYWdncmVnYXRpb246e2NvdW50OiJ0b3RhbCBkZSBsaW5oYXM6ICIsc3VtOiJ0b3RhbDogIixhdmc6Im1lZDogIixtaW46Im1pbjogIixtYXg6Im1heDogIn0scGlubmluZzp7cGluTGVmdDoiRml4YXIgRXNxdWVyZGEiLHBpblJpZ2h0OiJGaXhhciBEaXJlaXRhIix1bnBpbjoiRGVzcHJlbmRlciJ9LGNvbHVtbk1lbnU6e2Nsb3NlOiJGZWNoYXIifSxncmlkTWVudTp7YXJpYTp7YnV0dG9uTGFiZWw6Ik1lbnUgR3JpZCJ9LGNvbHVtbnM6IkNvbHVuYXM6IixpbXBvcnRlclRpdGxlOiJJbXBvcnRhciBmaWNoZWlybyIsZXhwb3J0ZXJBbGxBc0NzdjoiRXhwb3J0YXIgdG9kb3Mgb3MgZGFkb3MgY29tbyBjc3YiLGV4cG9ydGVyVmlzaWJsZUFzQ3N2OiJFeHBvcnRhciBkYWRvcyB2aXPDrXZlaXMgY29tbyBjc3YiLGV4cG9ydGVyU2VsZWN0ZWRBc0NzdjoiRXhwb3J0YXIgZGFkb3Mgc2VsZWNpb25hZG9zIGNvbW8gY3N2IixleHBvcnRlckFsbEFzUGRmOiJFeHBvcnRhciB0b2RvcyBvcyBkYWRvcyBjb21vIHBkZiIsZXhwb3J0ZXJWaXNpYmxlQXNQZGY6IkV4cG9ydGFyIGRhZG9zIHZpc8OtdmVpcyBjb21vIHBkZiIsZXhwb3J0ZXJTZWxlY3RlZEFzUGRmOiJFeHBvcnRhciBkYWRvcyBzZWxlY2lvbmFkb3MgY29tbyBwZGYiLGV4cG9ydGVyQWxsQXNFeGNlbDoiRXhwb3J0YXIgdG9kb3Mgb3MgZGFkb3MgY29tbyBleGNlbCIsZXhwb3J0ZXJWaXNpYmxlQXNFeGNlbDoiRXhwb3J0YXIgZGFkb3Mgdmlzw612ZWlzIGNvbW8gZXhjZWwiLGV4cG9ydGVyU2VsZWN0ZWRBc0V4Y2VsOiJFeHBvcnRhciBkYWRvcyBzZWxlY2lvbmFkb3MgY29tbyBleGNlbCIsY2xlYXJBbGxGaWx0ZXJzOiJMaW1wYXIgdG9kb3Mgb3MgZmlsdHJvcyJ9LGltcG9ydGVyOntub0hlYWRlcnM6Ik5vbWVzIGRlIGNvbHVuYXMgbsOjbyBwdWRlcmFtIHNlciBkZXJpdmFkb3MuIE8gZmljaGVpcm8gdGVtIHVtIGNhYmXDp2FsaG8/Iixub09iamVjdHM6Ik9iamV0b3MgbsOjbyBwdWRlcmFtIHNlciBkZXJpdmFkb3MuIEhhdmlhIGRhZG9zIG5vIGZpY2hlaXJvLCBhbMOpbSBkb3MgY2FiZcOnYWxob3M/IixpbnZhbGlkQ3N2OiJGaWNoZWlybyBuw6NvIHBvZGUgc2VyIHByb2Nlc3NhZG8uIMOJIHVtIENTViB2w6FsaWRvPyIsaW52YWxpZEpzb246IkZpY2hlaXJvIG7Do28gcG9kZSBzZXIgcHJvY2Vzc2Fkby4gw4kgdW0gSnNvbiB2w6FsaWRvPyIsanNvbk5vdEFycmF5OiJGaWNoZWlybyBqc29uIGltcG9ydGFkbyB0ZW0gcXVlIGNvbnRlciB1bSBhcnJheS4gSW50ZXJyb21wZW5kby4ifSxwYWdpbmF0aW9uOnthcmlhOntwYWdlVG9GaXJzdDoiUHJpbWVpcmEgcMOhZ2luYSIscGFnZUJhY2s6IlDDoWdpbmEgYW50ZXJpb3IiLHBhZ2VTZWxlY3RlZDoiUMOhZ2luYSBTZWxlY2lvbmFkYSIscGFnZUZvcndhcmQ6IlByw7N4aW1hIixwYWdlVG9MYXN0OiJBbnRlcmlvciJ9LHNpemVzOiJpdGVucyBwb3IgcMOhZ2luYSIsdG90YWxJdGVtczoiaXRlbnMiLHRocm91Z2g6ImEiLG9mOiJkZSJ9LGdyb3VwaW5nOntncm91cDoiQWdydXBhciIsdW5ncm91cDoiRGVzYWdydXBhciIsYWdncmVnYXRlX2NvdW50OiJBZ3I6IENvbnRhciIsYWdncmVnYXRlX3N1bToiQWdyOiBTb21hIixhZ2dyZWdhdGVfbWF4OiJBZ3I6IE1heCIsYWdncmVnYXRlX21pbjoiQWdyOiBNaW4iLGFnZ3JlZ2F0ZV9hdmc6IkFncjogTWVkIixhZ2dyZWdhdGVfcmVtb3ZlOiJBZ3I6IFJlbW92ZXIifSx2YWxpZGF0ZTp7ZXJyb3I6IkVycm86IixtaW5MZW5ndGg6Ik8gdmFsb3IgZGV2ZSB0ZXIsIG5vIG1pbmltbywgVEhSRVNIT0xEIGNhcmFjdGVyZXMuIixtYXhMZW5ndGg6Ik8gdmFsb3IgZGV2ZSB0ZXIsIG5vIG3DoXhpbW8sIFRIUkVTSE9MRCBjYXJhY3RlcmVzLiIscmVxdWlyZWQ6IlVtIHZhbG9yIMOpIG5lY2Vzc8OhcmlvLiJ9fSksZX1dKX1dKSxhbmd1bGFyLm1vZHVsZSgidWkuZ3JpZCIpLmNvbmZpZyhbIiRwcm92aWRlIixmdW5jdGlvbihlKXtlLmRlY29yYXRvcigiaTE4blNlcnZpY2UiLFsiJGRlbGVnYXRlIixmdW5jdGlvbihlKXtyZXR1cm4gZS5hZGQoInJvIix7aGVhZGVyQ2VsbDp7YXJpYTp7ZGVmYXVsdEZpbHRlckxhYmVsOiJGaWx0cnUgcGVudHJ1IGNvbG9hbmEiLHJlbW92ZUZpbHRlcjoiU3RlcmdlIGZpbHRydSIsY29sdW1uTWVudUJ1dHRvbkxhYmVsOiJDb2x1bW4gTWVudSJ9LHByaW9yaXR5OiJQcmlvcml0YXRlOiIsZmlsdGVyTGFiZWw6IkZpbHRydSBwZW50cnUgY29sb2FuYToifSxhZ2dyZWdhdGU6e2xhYmVsOiJFbGVtZW50ZSJ9LGdyb3VwUGFuZWw6e2Rlc2NyaXB0aW9uOiJUcmFnZSB1biBjYXAgZGUgY29sb2FuYSBhaWNpIHBlbnRydSBhIGdydXBhIGVsZW1lbnRlbGUgZHVwYSBjb2xvYW5hIHJlc3BlY3RpdmEifSxzZWFyY2g6e3BsYWNlaG9sZGVyOiJDYXV0YS4uLiIsc2hvd2luZ0l0ZW1zOiJBcmF0YSBlbGVtZW50ZWxlOiIsc2VsZWN0ZWRJdGVtczoiRWxlbWVudGVsZSBzZWxlY3RhdGU6Iix0b3RhbEl0ZW1zOiJUb3RhbCBlbGVtZW50ZToiLHNpemU6Ik1hcmltZSBwYWdpbmE6IixmaXJzdDoiUHJpbWEgcGFnaW5hIixuZXh0OiJQYWdpbmEgdXJtYXRvYXJlIixwcmV2aW91czoiUGFnaW5hIGFudGVyaW9hcmEiLGxhc3Q6IlVsdGltYSBwYWdpbmEifSxtZW51Ont0ZXh0OiJBbGVnZSBjb2xvYW5lOiJ9LHNvcnQ6e2FzY2VuZGluZzoiT3Jkb25lYXphIGNyZXNjYXRvciIsZGVzY2VuZGluZzoiT3Jkb25lYXphIGRlc2NyZXNjYXRvciIsbm9uZToiRmFyYSBvcmRvbmFyZSIscmVtb3ZlOiJTdGVyZ2Ugb3Jkb25hcmVhIn0sY29sdW1uOntoaWRlOiJBc2N1bmRlIGNvbG9hbmEifSxhZ2dyZWdhdGlvbjp7Y291bnQ6InRvdGFsIGxpbmlpOiAiLHN1bToidG90YWw6ICIsYXZnOiJtZWRpZTogIixtaW46Im1pbjogIixtYXg6Im1heDogIn0scGlubmluZzp7cGluTGVmdDoiUGluIGxhIHN0YW5nYSIscGluUmlnaHQ6IlBpbiBsYSBkcmVhcHRhIix1bnBpbjoiU3RlcmdlIHBpbnVsIn0sY29sdW1uTWVudTp7Y2xvc2U6IkluY2hpZGUifSxncmlkTWVudTp7YXJpYTp7YnV0dG9uTGFiZWw6IkdyaWQgTWVudSJ9LGNvbHVtbnM6IkNvbG9hbmU6IixpbXBvcnRlclRpdGxlOiJJbmNhcmNhIGZpc2llciIsZXhwb3J0ZXJBbGxBc0NzdjoiRXhwb3J0YSB0b2F0ZSBkYXRlbGUgY2EgY3N2IixleHBvcnRlclZpc2libGVBc0NzdjoiRXhwb3J0YSBkYXRlbGUgdml6aWJpbGUgY2EgY3N2IixleHBvcnRlclNlbGVjdGVkQXNDc3Y6IkV4cG9ydGEgZGF0ZWxlIHNlbGVjdGF0ZSBjYSBjc3YiLGV4cG9ydGVyQWxsQXNQZGY6IkV4cG9ydGEgdG9hdGUgZGF0ZWxlIGNhIHBkZiIsZXhwb3J0ZXJWaXNpYmxlQXNQZGY6IkV4cG9ydGEgZGF0ZWxlIHZpemliaWxlIGNhIHBkZiIsZXhwb3J0ZXJTZWxlY3RlZEFzUGRmOiJFeHBvcnRhIGRhdGVsZSBzZWxlY3RhdGUgY2EgY3N2IHBkZiIsY2xlYXJBbGxGaWx0ZXJzOiJTdGVyZ2UgdG9hdGUgZmlsdHJlbGUifSxpbXBvcnRlcjp7bm9IZWFkZXJzOiJOdW1lbGUgY29sb2FuZWxvciBudSBhIHB1dHV0IGZpIGluY2FyY2F0LCBhY2VzdCBmaXNpZXIgYXJlIHVuIGhlYWRlcj8iLG5vT2JqZWN0czoiRGF0ZWxlIG51IGF1IHB1dHV0IGZpIGluY2FyY2F0ZSwgZXhpc3RhIGRhdGUgaW4gZmlzaWVyIGluIGFmYXJhIG51bWVsb3IgZGUgY29sb2FuZT8iLGludmFsaWRDc3Y6IkZpc2llcnVsIG51IGEgcHV0dXQgZmkgcHJvY2VzYXQsIGF0aSBpbmNhcmNhdCB1biBDU1YgdmFsaWQgPyIsaW52YWxpZEpzb246IkZpc2llcnVsIG51IGEgcHV0dXQgZmkgcHJvY2VzYXQsIGF0aSBpbmNhcmNhdCB1biBKc29uIHZhbGlkPyIsanNvbk5vdEFycmF5OiJKc29uLXVsIGluY2FyY2F0IHRyZWJ1aWUgc2EgY29udGluYSB1biBhcnJheSwgaW5jaGlkZXJlLiJ9LHBhZ2luYXRpb246e2FyaWE6e3BhZ2VUb0ZpcnN0OiJQcmltYSBwYWdpbmEiLHBhZ2VCYWNrOiJPIHBhZ2luYSBpbmFwb2kiLHBhZ2VTZWxlY3RlZDoiUGFnaW5hIHNlbGVjdGF0YSIscGFnZUZvcndhcmQ6Ik8gcGFnaW5hIGluYWludGUiLHBhZ2VUb0xhc3Q6IlVsdGltYSBwYWdpbmEifSxzaXplczoiRWxlbWVudGUgcGVyIHBhZ2luYSIsdG90YWxJdGVtczoiZWxlbWVudGUiLHRocm91Z2g6InByaW4iLG9mOiJvZiJ9LGdyb3VwaW5nOntncm91cDoiR3J1cGVhemEiLHVuZ3JvdXA6Ik9wcmVzdGUgZ3J1cGFyZWEiLGFnZ3JlZ2F0ZV9jb3VudDoiQWdnOiBDb3VudCIsYWdncmVnYXRlX3N1bToiQWdnOiBTdW0iLGFnZ3JlZ2F0ZV9tYXg6IkFnZzogTWF4IixhZ2dyZWdhdGVfbWluOiJBZ2c6IE1pbiIsYWdncmVnYXRlX2F2ZzoiQWdnOiBBdmciLGFnZ3JlZ2F0ZV9yZW1vdmU6IkFnZzogUmVtb3ZlIn19KSxlfV0pfV0pLGFuZ3VsYXIubW9kdWxlKCJ1aS5ncmlkIikuY29uZmlnKFsiJHByb3ZpZGUiLGZ1bmN0aW9uKGUpe2UuZGVjb3JhdG9yKCJpMThuU2VydmljZSIsWyIkZGVsZWdhdGUiLGZ1bmN0aW9uKGUpe3JldHVybiBlLmFkZCgicnUiLHtoZWFkZXJDZWxsOnthcmlhOntkZWZhdWx0RmlsdGVyTGFiZWw6ItCk0LjQu9GM0YLRgCDRgdGC0L7Qu9Cx0YbQsCIscmVtb3ZlRmlsdGVyOiLQo9C00LDQu9C40YLRjCDRhNC40LvRjNGC0YAiLGNvbHVtbk1lbnVCdXR0b25MYWJlbDoi0JzQtdC90Y4g0YHRgtC+0LvQsdGG0LAifSxwcmlvcml0eToi0J/RgNC40L7RgNC40YLQtdGCOiIsZmlsdGVyTGFiZWw6ItCk0LjQu9GM0YLRgCDRgdGC0L7Qu9Cx0YbQsDogIn0sYWdncmVnYXRlOntsYWJlbDoi0Y3Qu9C10LzQtdC90YLRiyJ9LGdyb3VwUGFuZWw6e2Rlc2NyaXB0aW9uOiLQlNC70Y8g0LPRgNGD0L/Qv9C40YDQvtCy0LrQuCDQv9C+INGB0YLQvtC70LHRhtGDINC/0LXRgNC10YLQsNGJ0LjRgtC1INGB0Y7QtNCwINC10LPQviDQvdCw0LfQstCw0L3QuNC1LiJ9LHNlYXJjaDp7cGxhY2Vob2xkZXI6ItCf0L7QuNGB0LouLi4iLHNob3dpbmdJdGVtczoi0J/QvtC60LDQt9Cw0YLRjCDRjdC70LXQvNC10L3RgtGLOiIsc2VsZWN0ZWRJdGVtczoi0JLRi9Cx0YDQsNC90L3Ri9C1INGN0LvQtdC80LXQvdGC0Ys6Iix0b3RhbEl0ZW1zOiLQktGB0LXQs9C+INGN0LvQtdC80LXQvdGC0L7QsjoiLHNpemU6ItCg0LDQt9C80LXRgCDRgdGC0YDQsNC90LjRhtGLOiIsZmlyc3Q6ItCf0LXRgNCy0LDRjyDRgdGC0YDQsNC90LjRhtCwIixuZXh0OiLQodC70LXQtNGD0Y7RidCw0Y8g0YHRgtGA0LDQvdC40YbQsCIscHJldmlvdXM6ItCf0YDQtdC00YvQtNGD0YnQsNGPINGB0YLRgNCw0L3QuNGG0LAiLGxhc3Q6ItCf0L7RgdC70LXQtNC90Y/RjyDRgdGC0YDQsNC90LjRhtCwIn0sbWVudTp7dGV4dDoi0JLRi9Cx0YDQsNGC0Ywg0YHRgtC+0LvQsdGG0Ys6In0sc29ydDp7YXNjZW5kaW5nOiLQn9C+INCy0L7Qt9GA0LDRgdGC0LDQvdC40Y4iLGRlc2NlbmRpbmc6ItCf0L4g0YPQsdGL0LLQsNC90LjRjiIsbm9uZToi0JHQtdC3INGB0L7RgNGC0LjRgNC+0LLQutC4IixyZW1vdmU6ItCj0LHRgNCw0YLRjCDRgdC+0YDRgtC40YDQvtCy0LrRgyJ9LGNvbHVtbjp7aGlkZToi0KHQv9GA0Y/RgtCw0YLRjCDRgdGC0L7Qu9Cx0LXRhiJ9LGFnZ3JlZ2F0aW9uOntjb3VudDoi0LLRgdC10LPQviDRgdGC0YDQvtC6OiAiLHN1bToi0LjRgtC+0LPQvjogIixhdmc6ItGB0YDQtdC00L3QtdC1OiAiLG1pbjoi0LzQuNC9OiAiLG1heDoi0LzQsNC60YE6ICJ9LHBpbm5pbmc6e3BpbkxlZnQ6ItCX0LDQutGA0LXQv9C40YLRjCDRgdC70LXQstCwIixwaW5SaWdodDoi0JfQsNC60YDQtdC/0LjRgtGMINGB0L/RgNCw0LLQsCIsdW5waW46ItCe0YLQutGA0LXQv9C40YLRjCJ9LGNvbHVtbk1lbnU6e2Nsb3NlOiLQl9Cw0LrRgNGL0YLRjCJ9LGdyaWRNZW51OnthcmlhOntidXR0b25MYWJlbDoi0JzQtdC90Y4ifSxjb2x1bW5zOiLQodGC0L7Qu9Cx0YbRizoiLGltcG9ydGVyVGl0bGU6ItCY0LzQv9C+0YDRgtC40YDQvtCy0LDRgtGMINGE0LDQudC7IixleHBvcnRlckFsbEFzQ3N2OiLQrdC60YHQv9C+0YDRgtC40YDQvtCy0LDRgtGMINCy0YHRkSDQsiBDU1YiLGV4cG9ydGVyVmlzaWJsZUFzQ3N2OiLQrdC60YHQv9C+0YDRgtC40YDQvtCy0LDRgtGMINCy0LjQtNC40LzRi9C1INC00LDQvdC90YvQtSDQsiBDU1YiLGV4cG9ydGVyU2VsZWN0ZWRBc0Nzdjoi0K3QutGB0L/QvtGA0YLQuNGA0L7QstCw0YLRjCDQstGL0LHRgNCw0L3QvdGL0LUg0LTQsNC90L3Ri9C1INCyIENTViIsZXhwb3J0ZXJBbGxBc1BkZjoi0K3QutGB0L/QvtGA0YLQuNGA0L7QstCw0YLRjCDQstGB0ZEg0LIgUERGIixleHBvcnRlclZpc2libGVBc1BkZjoi0K3QutGB0L/QvtGA0YLQuNGA0L7QstCw0YLRjCDQstC40LTQuNC80YvQtSDQtNCw0L3QvdGL0LUg0LIgUERGIixleHBvcnRlclNlbGVjdGVkQXNQZGY6ItCt0LrRgdC/0L7RgNGC0LjRgNC+0LLQsNGC0Ywg0LLRi9Cx0YDQsNC90L3Ri9C1INC00LDQvdC90YvQtSDQsiBQREYiLGNsZWFyQWxsRmlsdGVyczoi0J7Rh9C40YHRgtC40YLQtSDQstGB0LUg0YTQuNC70YzRgtGA0YsifSxpbXBvcnRlcjp7bm9IZWFkZXJzOiLQndC1INGD0LTQsNC70L7RgdGMINC/0L7Qu9GD0YfQuNGC0Ywg0L3QsNC30LLQsNC90LjRjyDRgdGC0L7Qu9Cx0YbQvtCyLCDQtdGB0YLRjCDQu9C4INCyINGE0LDQudC70LUg0LfQsNCz0L7Qu9C+0LLQvtC6PyIsbm9PYmplY3RzOiLQndC1INGD0LTQsNC70L7RgdGMINC/0L7Qu9GD0YfQuNGC0Ywg0LTQsNC90L3Ri9C1LCDQtdGB0YLRjCDQu9C4INCyINGE0LDQudC70LUg0YHRgtGA0L7QutC4INC60YDQvtC80LUg0LfQsNCz0L7Qu9C+0LLQutCwPyIsaW52YWxpZENzdjoi0J3QtSDRg9C00LDQu9C+0YHRjCDQvtCx0YDQsNCx0L7RgtCw0YLRjCDRhNCw0LnQuywg0Y3RgtC+INC/0YDQsNCy0LjQu9GM0L3Ri9C5IENTVi3RhNCw0LnQuz8iLGludmFsaWRKc29uOiLQndC1INGD0LTQsNC70L7RgdGMINC+0LHRgNCw0LHQvtGC0LDRgtGMINGE0LDQudC7LCDRjdGC0L4g0L/RgNCw0LLQuNC70YzQvdGL0LkgSlNPTj8iLGpzb25Ob3RBcnJheToi0JjQvNC/0L7RgNGC0LjRgNGD0LXQvNGL0LkgSlNPTi3RhNCw0LnQuyDQtNC+0LvQttC10L0g0YHQvtC00LXRgNC20LDRgtGMINC80LDRgdGB0LjQsiwg0L7Qv9C10YDQsNGG0LjRjyDQvtGC0LzQtdC90LXQvdCwLiJ9LHBhZ2luYXRpb246e2FyaWE6e3BhZ2VUb0ZpcnN0OiLQn9C10YDQstCw0Y8g0YHRgtGA0LDQvdC40YbQsCIscGFnZUJhY2s6ItCf0YDQtdC00YvQtNGD0YnQsNGPINGB0YLRgNCw0L3QuNGG0LAiLHBhZ2VTZWxlY3RlZDoi0JLRi9Cx0YDQsNC90L3QsNGPINGB0YLRgNCw0L3QuNGG0LAiLHBhZ2VGb3J3YXJkOiLQodC70LXQtNGD0Y7RidCw0Y8g0YHRgtGA0LDQvdC40YbQsCIscGFnZVRvTGFzdDoi0J/QvtGB0LvQtdC00L3Rj9GPINGB0YLRgNCw0L3QuNGG0LAifSxzaXplczoi0YHRgtGA0L7QuiDQvdCwINGB0YLRgNCw0L3QuNGG0YMiLHRvdGFsSXRlbXM6ItGB0YLRgNC+0LoiLHRocm91Z2g6ItC/0L4iLG9mOiLQuNC3In0sZ3JvdXBpbmc6e2dyb3VwOiLQk9GA0YPQv9C/0LjRgNC+0LLQsNGC0YwiLHVuZ3JvdXA6ItCg0LDQt9Cz0YDRg9C/0L/QuNGA0L7QstCw0YLRjCIsYWdncmVnYXRlX2NvdW50OiLQk9GA0YPQv9C/0LjRgNC+0LLQsNGC0Yw6IENvdW50IixhZ2dyZWdhdGVfc3VtOiLQlNC70Y8g0LPRgNGD0L/Qv9GLOiDQodGD0LzQvNCwIixhZ2dyZWdhdGVfbWF4OiLQlNC70Y8g0LPRgNGD0L/Qv9GLOiDQnNCw0LrRgdC40LzRg9C8IixhZ2dyZWdhdGVfbWluOiLQlNC70Y8g0LPRgNGD0L/Qv9GLOiDQnNC40L3QuNC80YPQvCIsYWdncmVnYXRlX2F2Zzoi0JTQu9GPINCz0YDRg9C/0L/Rizog0KHRgNC10LTQvdC10LUiLGFnZ3JlZ2F0ZV9yZW1vdmU6ItCU0LvRjyDQs9GA0YPQv9C/0Ys6INCf0YPRgdGC0L4ifX0pLGV9XSl9XSksYW5ndWxhci5tb2R1bGUoInVpLmdyaWQiKS5jb25maWcoWyIkcHJvdmlkZSIsZnVuY3Rpb24oZSl7ZS5kZWNvcmF0b3IoImkxOG5TZXJ2aWNlIixbIiRkZWxlZ2F0ZSIsZnVuY3Rpb24oZSl7cmV0dXJuIGUuYWRkKCJzayIse2FnZ3JlZ2F0ZTp7bGFiZWw6Iml0ZW1zIn0sZ3JvdXBQYW5lbDp7ZGVzY3JpcHRpb246IlByZXRpYWhuaSBzZW0gbsOhem92IHN0xLpwY2EgcHJlIHpvc2t1cGVuaWUgcG9kxL5hIHRvaG8gc3TEunBjYS4ifSxzZWFyY2g6e3BsYWNlaG9sZGVyOiJIxL5hZGFqLi4uIixzaG93aW5nSXRlbXM6IlpvYnJhenVqZW0gcG9sb8W+a3k6IixzZWxlY3RlZEl0ZW1zOiJWeWJyYXTDqSBwb2xvxb5reToiLHRvdGFsSXRlbXM6IlBvxI1ldCBwb2xvxb5pZWs6IixzaXplOiJQb8SNZXQ6IixmaXJzdDoiUHJ2w6Egc3RyYW5hIixuZXh0OiLEjmFsxaFpYSBzdHJhbmEiLHByZXZpb3VzOiJQcmVkY2jDoWR6YWrDumNhIHN0cmFuYSIsbGFzdDoiUG9zbGVkbsOhIHN0cmFuYSJ9LG1lbnU6e3RleHQ6IlZ5YmVydGUgc3TEunBjZToifSxzb3J0Onthc2NlbmRpbmc6IlpvdHJpZWRpxaUgdnpvc3R1cG5lIixkZXNjZW5kaW5nOiJab3RyaWVkacWlIHpvc3R1cG5lIixyZW1vdmU6IlZ5bWF6YcWlIHRyaWVkZW5pZSJ9LGFnZ3JlZ2F0aW9uOntjb3VudDoidG90YWwgcm93czogIixzdW06InRvdGFsOiAiLGF2ZzoiYXZnOiAiLG1pbjoibWluOiAiLG1heDoibWF4OiAifSxncmlkTWVudTp7Y29sdW1uczoiQ29sdW1uczoiLGltcG9ydGVyVGl0bGU6IkltcG9ydCBmaWxlIixleHBvcnRlckFsbEFzQ3N2OiJFeHBvcnQgYWxsIGRhdGEgYXMgY3N2IixleHBvcnRlclZpc2libGVBc0NzdjoiRXhwb3J0IHZpc2libGUgZGF0YSBhcyBjc3YiLGV4cG9ydGVyU2VsZWN0ZWRBc0NzdjoiRXhwb3J0IHNlbGVjdGVkIGRhdGEgYXMgY3N2IixleHBvcnRlckFsbEFzUGRmOiJFeHBvcnQgYWxsIGRhdGEgYXMgcGRmIixleHBvcnRlclZpc2libGVBc1BkZjoiRXhwb3J0IHZpc2libGUgZGF0YSBhcyBwZGYiLGV4cG9ydGVyU2VsZWN0ZWRBc1BkZjoiRXhwb3J0IHNlbGVjdGVkIGRhdGEgYXMgcGRmIixleHBvcnRlckFsbEFzRXhjZWw6IkV4cG9ydCBhbGwgZGF0YSBhcyBleGNlbCIsZXhwb3J0ZXJWaXNpYmxlQXNFeGNlbDoiRXhwb3J0IHZpc2libGUgZGF0YSBhcyBleGNlbCIsZXhwb3J0ZXJTZWxlY3RlZEFzRXhjZWw6IkV4cG9ydCBzZWxlY3RlZCBkYXRhIGFzIGV4Y2VsIixjbGVhckFsbEZpbHRlcnM6IkNsZWFyIGFsbCBmaWx0ZXJzIn0saW1wb3J0ZXI6e25vSGVhZGVyczoiQ29sdW1uIG5hbWVzIHdlcmUgdW5hYmxlIHRvIGJlIGRlcml2ZWQsIGRvZXMgdGhlIGZpbGUgaGF2ZSBhIGhlYWRlcj8iLG5vT2JqZWN0czoiT2JqZWN0cyB3ZXJlIG5vdCBhYmxlIHRvIGJlIGRlcml2ZWQsIHdhcyB0aGVyZSBkYXRhIGluIHRoZSBmaWxlIG90aGVyIHRoYW4gaGVhZGVycz8iLGludmFsaWRDc3Y6IkZpbGUgd2FzIHVuYWJsZSB0byBiZSBwcm9jZXNzZWQsIGlzIGl0IHZhbGlkIENTVj8iLGludmFsaWRKc29uOiJGaWxlIHdhcyB1bmFibGUgdG8gYmUgcHJvY2Vzc2VkLCBpcyBpdCB2YWxpZCBKc29uPyIsanNvbk5vdEFycmF5OiJJbXBvcnRlZCBqc29uIGZpbGUgbXVzdCBjb250YWluIGFuIGFycmF5LCBhYm9ydGluZy4ifX0pLGV9XSl9XSksYW5ndWxhci5tb2R1bGUoInVpLmdyaWQiKS5jb25maWcoWyIkcHJvdmlkZSIsZnVuY3Rpb24oZSl7ZS5kZWNvcmF0b3IoImkxOG5TZXJ2aWNlIixbIiRkZWxlZ2F0ZSIsZnVuY3Rpb24oZSl7cmV0dXJuIGUuYWRkKCJzdiIse2FnZ3JlZ2F0ZTp7bGFiZWw6IkFydGlrbGFyIn0sZ3JvdXBQYW5lbDp7ZGVzY3JpcHRpb246IkRyYSBlbiBrb2x1bW5ydWJyaWsgaGl0IG9jaCBzbMOkcHAgZGVuIGbDtnIgYXR0IGdydXBwZXJhIGVmdGVyIGRlbiBrb2x1bW5lbi4ifSxzZWFyY2g6e3BsYWNlaG9sZGVyOiJTw7ZrLi4uIixzaG93aW5nSXRlbXM6IlZpc2FyIGFydGlrbGFyOiIsc2VsZWN0ZWRJdGVtczoiVmFsZGEgYXJ0aWtsYXI6Iix0b3RhbEl0ZW1zOiJBbnRhbCBhcnRpa2xhcjoiLHNpemU6IlNpZHN0b3JsZWs6IixmaXJzdDoiRsO2cnN0YSBzaWRhbiIsbmV4dDoiTsOkc3RhIHNpZGEiLHByZXZpb3VzOiJGw7ZyZWfDpWVuZGUgc2lkYSIsbGFzdDoiU2lzdGEgc2lkYW4ifSxtZW51Ont0ZXh0OiJWw6RsaiBrb2x1bW5lcjoifSxzb3J0Onthc2NlbmRpbmc6IlNvcnRlcmEgc3RpZ2FuZGUiLGRlc2NlbmRpbmc6IlNvcnRlcmEgZmFsbGFuZGUiLHJlbW92ZToiSW5ha3RpdmVyYSBzb3J0ZXJpbmcifSxjb2x1bW46e2hpZGU6IkfDtm0ga29sdW1uIn0sYWdncmVnYXRpb246e2NvdW50OiJBbnRhbCByYWRlcjogIixzdW06IlN1bW1hOiAiLGF2ZzoiR2Vub21zbml0dDogIixtaW46Ik1pbjogIixtYXg6Ik1heDogIn0scGlubmluZzp7cGluTGVmdDoiRsOkc3QgdsOkbnN0ZXIiLHBpblJpZ2h0OiJGw6RzdCBow7ZnZXIiLHVucGluOiJMw7ZzZ8O2ciJ9LGdyaWRNZW51Ontjb2x1bW5zOiJLb2x1bW5lcjoiLGltcG9ydGVyVGl0bGU6IkltcG9ydGVyYSBmaWwiLGV4cG9ydGVyQWxsQXNDc3Y6IkV4cG9ydGVyYSBhbGwgZGF0YSBzb20gQ1NWIixleHBvcnRlclZpc2libGVBc0NzdjoiRXhwb3J0ZXJhIHN5bmxpZyBkYXRhIHNvbSBDU1YiLGV4cG9ydGVyU2VsZWN0ZWRBc0NzdjoiRXhwb3J0ZXJhIG1hcmtlcmFkIGRhdGEgc29tIENTViIsZXhwb3J0ZXJBbGxBc1BkZjoiRXhwb3J0ZXJhIGFsbCBkYXRhIHNvbSBQREYiLGV4cG9ydGVyVmlzaWJsZUFzUGRmOiJFeHBvcnRlcmEgc3lubGlnIGRhdGEgc29tIFBERiIsZXhwb3J0ZXJTZWxlY3RlZEFzUGRmOiJFeHBvcnRlcmEgbWFya2VyYWQgZGF0YSBzb20gUERGIixjbGVhckFsbEZpbHRlcnM6IlJlbmfDtnIgYWxsYSBmaWx0ZXIifSxpbXBvcnRlcjp7bm9IZWFkZXJzOiJLb2x1bW5uYW1uIGt1bmRlIGludGUgaMOkcmxlZGFzLiBIYXIgZmlsZW4gZXR0IHNpZGh1dnVkPyIsbm9PYmplY3RzOiJPYmpla3Qga3VuZGUgaW50ZSBow6RybGVkYXMuIEhhciBmaWxlbiBkYXRhIHVuZGFudGFnZXQgc2lkaHV2dWQ/IixpbnZhbGlkQ3N2OiJGaWxlbiBrdW5kZSBpbnRlIGJlaGFuZGxhcywgw6RyIGRlbiBlbiBnaWx0aWcgQ1NWPyIsaW52YWxpZEpzb246IkZpbGVuIGt1bmRlIGludGUgYmVoYW5kbGFzLCDDpHIgZGVuIGVuIGdpbHRpZyBKU09OPyIsanNvbk5vdEFycmF5OiJJbXBvcnRlcmFkIEpTT04tZmlsIG3DpXN0ZSBpbm5laMOlbGxhIGV0dCBmw6RsdC4gSW1wb3J0IGF2YnJ1dGVuLiJ9LHBhZ2luYXRpb246e3NpemVzOiJBcnRpa2xhciBwZXIgc2lkYSIsdG90YWxJdGVtczoiQXJ0aWtsYXIifX0pLGV9XSl9XSksYW5ndWxhci5tb2R1bGUoInVpLmdyaWQiKS5jb25maWcoWyIkcHJvdmlkZSIsZnVuY3Rpb24oZSl7ZS5kZWNvcmF0b3IoImkxOG5TZXJ2aWNlIixbIiRkZWxlZ2F0ZSIsZnVuY3Rpb24oZSl7cmV0dXJuIGUuYWRkKCJ0YSIse2FnZ3JlZ2F0ZTp7bGFiZWw6IuCuieCusOCvgeCuquCvjeCuquCun+Cuv+CuleCus+CvjSJ9LGdyb3VwUGFuZWw6e2Rlc2NyaXB0aW9uOiLgrpLgrrDgr4Eg4K6q4K6k4K+N4K6k4K6/4K6v4K+IIOCuleCvgeCutOCvgeCuteCuvuCulSDgroXgrq7gr4jgrpXgr43grpUg4K6F4K6q4K+N4K6q4K6k4K+N4K6k4K6/4K6v4K6/4K6p4K+NIOCupOCusuCviOCuquCvjeCuquCviCDgrofgrpngr43grpXgr4cgIOCuh+CutOCvgeCupOCvjeCupOCvgSDgrrXgrrDgrrXgr4Hgrq7gr40gIn0sc2VhcmNoOntwbGFjZWhvbGRlcjoi4K6k4K+H4K6f4K6y4K+NIC4uLiIsc2hvd2luZ0l0ZW1zOiLgrongrrDgr4Hgrqrgr43grqrgrp/grr/grpXgrrPgr4gg4K6V4K6+4K6j4K+N4K6q4K6/4K6k4K+N4K6k4K6y4K+NOiIsc2VsZWN0ZWRJdGVtczoi4K6k4K+H4K6w4K+N4K6o4K+N4K6k4K+G4K6f4K+B4K6V4K+N4K6V4K6q4K+N4K6q4K6f4K+N4K6fICDgrongrrDgr4Hgrqrgr43grqrgrp/grr/grpXgrrPgr406Iix0b3RhbEl0ZW1zOiLgrq7gr4rgrqTgr43grqQg4K6J4K6w4K+B4K6q4K+N4K6q4K6f4K6/4K6V4K6z4K+NOiIsc2l6ZToi4K6q4K6V4K+N4K6VIOCuheCus+CuteCvgTogIixmaXJzdDoi4K6u4K+B4K6k4K6y4K+NIOCuquCuleCvjeCuleCuruCvjSIsbmV4dDoi4K6F4K6f4K+B4K6k4K+N4K6kIOCuquCuleCvjeCuleCuruCvjSIscHJldmlvdXM6IuCuruCvgeCuqOCvjeCupOCviOCuryDgrqrgrpXgr43grpXgrq7gr40gIixsYXN0OiLgrofgrrHgr4HgrqTgrr8g4K6q4K6V4K+N4K6V4K6u4K+NIn0sbWVudTp7dGV4dDoi4K6q4K6k4K+N4K6k4K6/4K6V4K6z4K+IIOCupOCvh+CusOCvjeCuqOCvjeCupOCvhuCun+CvgToifSxzb3J0Onthc2NlbmRpbmc6IuCuruCvh+CusuCuv+CusOCvgeCuqOCvjeCupOCvgSDgrpXgr4DgrrTgrr7grpUiLGRlc2NlbmRpbmc6IuCuleCvgOCutOCuv+CusOCvgeCuqOCvjeCupOCvgSDgrq7gr4fgrrLgrr7grpUiLHJlbW92ZToi4K614K6w4K6/4K6a4K+I4K6v4K+IIOCuqOCvgOCuleCvjeCuleCvgSJ9LGNvbHVtbjp7aGlkZToi4K6q4K6k4K+N4K6k4K6/4K6v4K+IIOCuruCuseCviOCupOCvjeCupOCvgSDgrrXgr4ggIn0sYWdncmVnYXRpb246e2NvdW50OiLgrq7gr4rgrqTgr43grqQg4K614K6w4K6/4K6V4K6z4K+NOiIsc3VtOiLgrq7gr4rgrqTgr43grqTgrq7gr406ICIsYXZnOiLgrprgrrDgrr7grprgrrDgrr86ICIsbWluOiLgrpXgr4HgrrHgr4jgrqjgr43grqTgrqrgrp/gr43grpo6ICIsbWF4OiLgroXgrqTgrr/grpXgrqrgrp/gr43grpo6ICJ9LHBpbm5pbmc6e3BpbkxlZnQ6IuCuh+Cun+CupOCvgeCuquCvgeCuseCuruCuvuCulSDgrqTgr4jgrpXgr43grpUgIixwaW5SaWdodDoi4K614K6y4K6k4K+B4K6q4K+B4K6x4K6u4K6+4K6VIOCupOCviOCuleCvjeCulSIsdW5waW46IuCuquCuv+CusOCuvyJ9LGdyaWRNZW51Ontjb2x1bW5zOiLgrqrgrqTgr43grqTgrr/grpXgrrPgr406IixpbXBvcnRlclRpdGxlOiLgrpXgr4vgrqrgr43grqrgr4EgOiDgrqrgrp/grr/grqTgr43grqTgrrLgr40iLGV4cG9ydGVyQWxsQXNDc3Y6IuCujuCusuCvjeCusuCuviDgrqTgrrDgrrXgr4HgrpXgrrPgr4jgrq/gr4Hgrq7gr40g4K6V4K+L4K6q4K+N4K6q4K6+4K6V4K+N4K6V4K+BOiBjc3YiLGV4cG9ydGVyVmlzaWJsZUFzQ3N2OiLgrofgrrDgr4HgrpXgr43grpXgr4Hgrq7gr40g4K6k4K6w4K614K+B4K6V4K6z4K+IIOCuleCvi+CuquCvjeCuquCuvuCuleCvjeCuleCvgTogY3N2IixleHBvcnRlclNlbGVjdGVkQXNDc3Y6IuCupOCvh+CusOCvjeCuqOCvjeCupOCvhuCun+CvgeCupOCvjeCupCDgrqTgrrDgrrXgr4HgrpXgrrPgr4gg4K6V4K+L4K6q4K+N4K6q4K6+4K6V4K+N4K6V4K+BOiBjc3YiLGV4cG9ydGVyQWxsQXNQZGY6IuCujuCusuCvjeCusuCuviDgrqTgrrDgrrXgr4HgrpXgrrPgr4jgrq/gr4Hgrq7gr40g4K6V4K+L4K6q4K+N4K6q4K6+4K6V4K+N4K6V4K+BOiBwZGYiLGV4cG9ydGVyVmlzaWJsZUFzUGRmOiLgrofgrrDgr4HgrpXgr43grpXgr4Hgrq7gr40g4K6k4K6w4K614K+B4K6V4K6z4K+IIOCuleCvi+CuquCvjeCuquCuvuCuleCvjeCuleCvgTogcGRmIixleHBvcnRlclNlbGVjdGVkQXNQZGY6IuCupOCvh+CusOCvjeCuqOCvjeCupOCvhuCun+CvgeCupOCvjeCupCDgrqTgrrDgrrXgr4HgrpXgrrPgr4gg4K6V4K+L4K6q4K+N4K6q4K6+4K6V4K+N4K6V4K+BOiBwZGYiLGNsZWFyQWxsRmlsdGVyczoiQ2xlYXIgYWxsIGZpbHRlcnMifSxpbXBvcnRlcjp7bm9IZWFkZXJzOiLgrqrgrqTgr43grqTgrr/grq/grr/grqngr40g4K6k4K6y4K+I4K6q4K+N4K6q4K+B4K6V4K6z4K+IIOCuquCvhuCusSDgrofgrq/grrLgrrXgrr/grrLgr43grrLgr4gsIOCuleCvi+CuquCvjeCuquCuv+CuseCvjeCuleCvgSDgrqTgrrLgr4jgrqrgr43grqrgr4Eg4K6J4K6z4K+N4K6z4K6k4K6+PyIsbm9PYmplY3RzOiLgrofgrrLgrpXgr43grpXgr4HgrpXgrrPgr4gg4K6J4K6w4K+B4K614K6+4K6V4K+N4K6VIOCuruCvgeCun+Cuv+Cur+CuteCuv+CusuCvjeCusuCviCwg4K6V4K+L4K6q4K+N4K6q4K6/4K6y4K+NIOCupOCusuCviOCuquCvjeCuquCvgeCuleCus+CviCDgrqTgrrXgrr/grrAg4K6k4K6w4K614K+BIOCuj+CupOCvh+CuqeCvgeCuruCvjSDgrongrrPgr43grrPgrqTgrr4/ICIsaW52YWxpZENzdjoi4K6a4K6w4K6/4K614K6wIOCuqOCun+CviOCuruCvgeCuseCviCDgrqrgrp/gr4HgrqTgr43grqQg4K6H4K6v4K6y4K614K6/4K6y4K+N4K6y4K+ILCDgrpXgr4vgrqrgr43grqrgr4Eg4K6a4K6w4K6/4K6k4K6+4K6p4K6+PyAtIGNzdiIsaW52YWxpZEpzb246IuCumuCusOCuv+CuteCusCDgrqjgrp/gr4jgrq7gr4HgrrHgr4gg4K6q4K6f4K+B4K6k4K+N4K6kIOCuh+Cur+CusuCuteCuv+CusuCvjeCusuCviCwg4K6V4K+L4K6q4K+N4K6q4K+BIOCumuCusOCuv+CupOCuvuCuqeCuvj8gLSBqc29uIixqc29uTm90QXJyYXk6IuCuquCun+Cuv+CupOCvjeCupCDgrpXgr4vgrqrgr43grqrgrr/grrLgr40g4K614K6w4K6/4K6a4K+I4K6V4K6z4K+NIOCuieCus+CvjeCus+CupOCvgSwg4K6o4K6f4K+I4K6u4K+B4K6x4K+IIOCusOCupOCvjeCupOCvgSDgrprgr4bgrq/gr40gOiBqc29uIn0scGFnaW5hdGlvbjp7c2l6ZXM6IuCuieCusOCvgeCuquCvjeCuquCun+Cuv+CuleCus+CvjSAvIOCuquCuleCvjeCuleCuruCvjSIsdG90YWxJdGVtczoi4K6J4K6w4K+B4K6q4K+N4K6q4K6f4K6/4K6V4K6z4K+NICJ9LGdyb3VwaW5nOntncm91cDoi4K6V4K+B4K604K+BIix1bmdyb3VwOiLgrqrgrr/grrDgrr8iLGFnZ3JlZ2F0ZV9jb3VudDoi4K6u4K6k4K6/4K6q4K+N4K6q4K+A4K6f4K+N4K6f4K+BIDog4K6O4K6j4K+N4K6j4K+BIixhZ2dyZWdhdGVfc3VtOiLgrq7grqTgrr/grqrgr43grqrgr4Dgrp/gr43grp/gr4EgOiDgrpXgr4Lgrp/gr43grp/grrLgr40iLGFnZ3JlZ2F0ZV9tYXg6IuCuruCupOCuv+CuquCvjeCuquCvgOCun+CvjeCun+CvgSA6IOCuheCupOCuv+CuleCuquCun+CvjeCumuCuruCvjSIsYWdncmVnYXRlX21pbjoi4K6u4K6k4K6/4K6q4K+N4K6q4K+A4K6f4K+N4K6f4K+BIDog4K6V4K+B4K6x4K+I4K6o4K+N4K6k4K6q4K6f4K+N4K6a4K6u4K+NIixhZ2dyZWdhdGVfYXZnOiLgrq7grqTgrr/grqrgr43grqrgr4Dgrp/gr43grp/gr4EgOiDgrprgrrDgrr7grprgrrDgrr8iLGFnZ3JlZ2F0ZV9yZW1vdmU6IuCuruCupOCuv+CuquCvjeCuquCvgOCun+CvjeCun+CvgSA6IOCuqOCvgOCuleCvjeCuleCvgSJ9fSksZX1dKX1dKSxhbmd1bGFyLm1vZHVsZSgidWkuZ3JpZCIpLmNvbmZpZyhbIiRwcm92aWRlIixmdW5jdGlvbihlKXtlLmRlY29yYXRvcigiaTE4blNlcnZpY2UiLFsiJGRlbGVnYXRlIixmdW5jdGlvbihlKXtyZXR1cm4gZS5hZGQoInRyIix7aGVhZGVyQ2VsbDp7YXJpYTp7ZGVmYXVsdEZpbHRlckxhYmVsOiJTw7x0dW4gacOnaW4gZmlsdHJlIixyZW1vdmVGaWx0ZXI6IkZpbHRyZXlpIEthbGTEsXIiLGNvbHVtbk1lbnVCdXR0b25MYWJlbDoiU8O8dHVuIE1lbsO8c8O8In0scHJpb3JpdHk6IsOWbmNlbGlrOiIsZmlsdGVyTGFiZWw6IlPDvHR1biBpw6dpbiBmaWx0cmU6ICJ9LGFnZ3JlZ2F0ZTp7bGFiZWw6ImthecSxdGxhciJ9LGdyb3VwUGFuZWw6e2Rlc2NyaXB0aW9uOiJTw7x0dW5hIGfDtnJlIGdydXBsYW1hayBpw6dpbiBzw7x0dW4gYmHFn2zEscSfxLFuxLEgYnVyYXlhIHPDvHLDvGtsZXlpbiB2ZSBixLFyYWvEsW4uIn0sc2VhcmNoOntwbGFjZWhvbGRlcjoiQXJhbWEuLi4iLHNob3dpbmdJdGVtczoiR8O2c3RlcmlsZW4gS2F5xLF0OiIsc2VsZWN0ZWRJdGVtczoiU2XDp2lsaSBLYXnEsXQ6Iix0b3RhbEl0ZW1zOiJUb3BsYW0gS2F5xLF0OiIsc2l6ZToiU2F5ZmEgQm95dXR1OiIsZmlyc3Q6IsSwbGsgU2F5ZmEiLG5leHQ6IlNvbnJha2kgU2F5ZmEiLHByZXZpb3VzOiLDlm5jZWtpIFNheWZhIixsYXN0OiJTb24gU2F5ZmEifSxtZW51Ont0ZXh0OiJTw7x0dW5sYXLEsSBTZcOnOiJ9LHNvcnQ6e2FzY2VuZGluZzoiQXJ0YW4gU8SxcmFkYSBTxLFyYWxhIixkZXNjZW5kaW5nOiJBemFsYW4gU8SxcmFkYSBTxLFyYWxhIixub25lOiJTxLFyYWxhbWEgWWFwbWEiLHJlbW92ZToiU8SxcmFsYW1hecSxIEthbGTEsXIifSxjb2x1bW46e2hpZGU6IlPDvHR1bnUgR2l6bGUifSxhZ2dyZWdhdGlvbjp7Y291bnQ6InRvcGxhbSBzYXTEsXI6ICIsc3VtOiJ0b3BsYW06ICIsYXZnOiJvcnQ6ICIsbWluOiJtaW46ICIsbWF4OiJtYWtzOiAifSxwaW5uaW5nOntwaW5MZWZ0OiJTb2xhIFNhYml0bGUiLHBpblJpZ2h0OiJTYcSfYSBTYWJpdGxlIix1bnBpbjoiU2FiaXRsZW1leWkgS2FsZMSxciJ9LGNvbHVtbk1lbnU6e2Nsb3NlOiJLYXBhdCJ9LGdyaWRNZW51OnthcmlhOntidXR0b25MYWJlbDoiVGFibG8gTWVuw7wifSxjb2x1bW5zOiJTw7x0dW5sYXI6IixpbXBvcnRlclRpdGxlOiJEb3N5YSBpw6dlcmkgYWt0YXIiLGV4cG9ydGVyQWxsQXNDc3Y6IkLDvHTDvG4gdmVyaXlpIENTViBvbGFyYWsgZMSxxZ9hcsSxIGFrdGFyIixleHBvcnRlclZpc2libGVBc0NzdjoiR8O2csO8bmVuIHZlcml5aSBDU1Ygb2xhcmFrIGTEscWfYXLEsSBha3RhciIsZXhwb3J0ZXJTZWxlY3RlZEFzQ3N2OiJTZcOnaWxpIHZlcml5aSBDU1Ygb2xhcmFrIGTEscWfYXLEsSBha3RhciIsZXhwb3J0ZXJBbGxBc1BkZjoiQsO8dMO8biB2ZXJpeWkgUERGIG9sYXJhayBkxLHFn2FyxLEgYWt0YXIiLGV4cG9ydGVyVmlzaWJsZUFzUGRmOiJHw7Zyw7xuZW4gdmVyaXlpIFBERiBvbGFyYWsgZMSxxZ9hcsSxIGFrdGFyIixleHBvcnRlclNlbGVjdGVkQXNQZGY6IlNlw6dpbGkgdmVyaXlpIFBERiBvbGFyYWsgZMSxxZ9hcsSxIGFrdGFyIixjbGVhckFsbEZpbHRlcnM6IkLDvHTDvG4gZmlsdHJlbGVyaSBrYWxkxLFyIn0saW1wb3J0ZXI6e25vSGVhZGVyczoiU8O8dHVuIGlzaW1sZXJpIMO8cmV0aWxlbWl5b3IsIGRvc3lhbsSxbiBiaXIgYmHFn2zEscSfxLEgdmFyIG3EsT8iLG5vT2JqZWN0czoiTmVzbmVsZXIgw7xyZXRpbGVtaXlvciwgZG9zeWFkYSBiYcWfbMSxa3RhbiBiYcWfa2EgYmlyIHZlcmkgdmFyIG3EsT8iLGludmFsaWRDc3Y6IkRvc3lhIGnFn2xlbmVtZWRpLCBnZcOnZXJsaSBiaXIgQ1NWIGRvc3lhc8SxIG3EsT8iLGludmFsaWRKc29uOiJEb3N5YSBpxZ9sZW5lbWVkaSwgZ2XDp2VybGkgYmlyIEpzb24gZG9zeWFzxLEgbcSxPyIsanNvbk5vdEFycmF5OiJBbMSxbmFuIEpzb24gZG9zeWFzxLFuZGEgYmlyIGRpemkgYnVsdW5tYWzEsWTEsXIsIGnFn2xlbSBpcHRhbCBlZGlsaXlvci4ifSxwYWdpbmF0aW9uOnthcmlhOntwYWdlVG9GaXJzdDoixLBsayBzYXlmYXlhIixwYWdlQmFjazoiR2VyaSBnaXQiLHBhZ2VTZWxlY3RlZDoiU2XDp2lsaSBzYXlmYSIscGFnZUZvcndhcmQ6IsSwbGVyaSBnaXQiLHBhZ2VUb0xhc3Q6IlNvbmEgZ2l0In0sc2l6ZXM6IlNheWZhZGFraSBuZXNuZSBzYXnEsXPEsSIsdG90YWxJdGVtczoia2F5xLF0bGFyIix0aHJvdWdoOiIiLG9mOiIifSxncm91cGluZzp7Z3JvdXA6IkdydXBsYSIsdW5ncm91cDoiR3J1cGxhbWEiLGFnZ3JlZ2F0ZV9jb3VudDoiWWVrdW46IFNhecSxIixhZ2dyZWdhdGVfc3VtOiJZZWt1bjogVG9wbGFtIixhZ2dyZWdhdGVfbWF4OiJZZWt1bjogTWFrcyIsYWdncmVnYXRlX21pbjoiWWVrdW46IE1pbiIsYWdncmVnYXRlX2F2ZzoiWWVrdW46IE9ydCIsYWdncmVnYXRlX3JlbW92ZToiWWVrdW46IFNpbCJ9fSksZX1dKX1dKSxhbmd1bGFyLm1vZHVsZSgidWkuZ3JpZCIpLmNvbmZpZyhbIiRwcm92aWRlIixmdW5jdGlvbihlKXtlLmRlY29yYXRvcigiaTE4blNlcnZpY2UiLFsiJGRlbGVnYXRlIixmdW5jdGlvbihlKXtyZXR1cm4gZS5hZGQoInVhIix7aGVhZGVyQ2VsbDp7YXJpYTp7ZGVmYXVsdEZpbHRlckxhYmVsOiLQpNGW0LvRjNGC0YAg0YHRgtC+0LLQv9GH0LjQutCwIixyZW1vdmVGaWx0ZXI6ItCS0LjQtNCw0LvQuNGC0Lgg0YTRltC70YzRgtGAIixjb2x1bW5NZW51QnV0dG9uTGFiZWw6ItCc0LXQvdGOINGB0YLQstC/0YfQuNC60LAifSxwcmlvcml0eToi0J/RgNGW0L7RgNC40YLQtdGCOiIsZmlsdGVyTGFiZWw6ItCk0ZbQu9GM0YLRgCDRgdGC0L7QstC/0YfQuNC60LA6ICJ9LGFnZ3JlZ2F0ZTp7bGFiZWw6ItC10LvQtdC80LXQvdGC0LgifSxncm91cFBhbmVsOntkZXNjcmlwdGlvbjoi0JTQu9GPINCz0YDRg9C/0YPQstCw0L3QvdGPINC30LAg0YHRgtC+0LLQv9GH0LjQutC+0Lwg0L/QtdGA0LXRgtGP0LPQvdGW0YLRjCDRgdGO0LTQuCDQudC+0LPQviDQvdCw0LfQstGDLiJ9LHNlYXJjaDp7cGxhY2Vob2xkZXI6ItCf0L7RiNGD0LouLi4iLHNob3dpbmdJdGVtczoi0J/QvtC60LDQt9Cw0YLQuCDQtdC70LXQvNC10L3RgtC4OiIsc2VsZWN0ZWRJdGVtczoi0J7QsdGA0LDQvdGWINC10LvQtdC80LXQvdGC0Lg6Iix0b3RhbEl0ZW1zOiLQo9GB0YzQvtCz0L4g0LXQu9C10LzQtdC90YLRltCyOiIsc2l6ZToi0KDQvtC30LzRltGAINGB0YLQvtGA0ZbQvdC60Lg6IixmaXJzdDoi0J/QtdGA0YjQsCDRgdGC0L7RgNGW0L3QutCwIixuZXh0OiLQndCw0YHRgtGD0L/QvdCwINGB0YLQvtGA0ZbQvdC60LAiLHByZXZpb3VzOiLQn9C+0L/QtdGA0LXQtNC90Y8g0YHRgtC+0YDRltC90LrQsCIsbGFzdDoi0J7RgdGC0LDQvdC90Y8g0YHRgtC+0YDRltC90LrQsCJ9LG1lbnU6e3RleHQ6ItCe0LHRgNCw0YLQuCDRgdGC0LLQv9GH0LjQutC4OiJ9LHNvcnQ6e2FzY2VuZGluZzoi0JfQsCDQt9GA0L7RgdGC0LDQvdC90Y/QvCIsZGVzY2VuZGluZzoi0JfQsCDRgdC/0LDQtNCw0L3QvdGP0LwiLG5vbmU6ItCR0LXQtyDRgdC+0YDRgtGD0LLQsNC90L3RjyIscmVtb3ZlOiLQn9GA0LjQsdGA0LDRgtC4INGB0L7RgNGC0YPQstCw0L3QvdGPIn0sY29sdW1uOntoaWRlOiLQn9GA0LjRhdC+0LLQsNGC0Lgg0YHRgtC+0LLQv9GH0LjQuiJ9LGFnZ3JlZ2F0aW9uOntjb3VudDoi0YPRgdGM0L7Qs9C+INGA0Y/QtNC60ZbQsjogIixzdW06ItGW0YLQvtCz0L46ICIsYXZnOiLRgdC10YDQtdC00L3RlDogIixtaW46ItC80ZbQvTogIixtYXg6ItC80LDQutGBOiAifSxwaW5uaW5nOntwaW5MZWZ0OiLQl9Cw0LrRgNGW0L/QuNGC0Lgg0LvRltCy0L7RgNGD0YciLHBpblJpZ2h0OiLQl9Cw0LrRgNGW0L/QuNGC0Lgg0L/RgNCw0LLQvtGA0YPRhyIsdW5waW46ItCS0ZbQtNC60YDRltC/0LjRgtC4In0sY29sdW1uTWVudTp7Y2xvc2U6ItCX0LDQutGA0LjRgtC4In0sZ3JpZE1lbnU6e2FyaWE6e2J1dHRvbkxhYmVsOiLQnNC10L3RjiJ9LGNvbHVtbnM6ItCh0YLQvtCy0L/Rh9C40LrQuDoiLGltcG9ydGVyVGl0bGU6ItCG0LzQv9C+0YDRgtGD0LLQsNGC0Lgg0YTQsNC50LsiLGV4cG9ydGVyQWxsQXNDc3Y6ItCV0LrRgdC/0L7RgNGC0YPQstCw0YLQuCDQstGB0LUg0LIgQ1NWIixleHBvcnRlclZpc2libGVBc0Nzdjoi0JXQutGB0L/QvtGA0YLRg9Cy0LDRgtC4INCy0LjQtNC40LzRliDQtNCw0L3RliDQsiBDU1YiLGV4cG9ydGVyU2VsZWN0ZWRBc0Nzdjoi0JXQutGB0L/QvtGA0YLRg9Cy0LDRgtC4INC+0LHRgNCw0L3RliDQtNCw0L3RliDQsiBDU1YiLGV4cG9ydGVyQWxsQXNQZGY6ItCV0LrRgdC/0L7RgNGC0YPQstCw0YLQuCDQstGB0LUg0LIgUERGIixleHBvcnRlclZpc2libGVBc1BkZjoi0JXQutGB0L/QvtGA0YLRg9Cy0LDRgtC4INCy0LjQtNC40LzRliDQtNCw0L3RliDQsiBQREYiLGV4cG9ydGVyU2VsZWN0ZWRBc1BkZjoi0JXQutGB0L/QvtGA0YLRg9Cy0LDRgtC4INC+0LHRgNCw0L3RliDQtNCw0L3RliDQsiBQREYiLGNsZWFyQWxsRmlsdGVyczoi0J7Rh9C40YHRgtC40YLQuCDQstGB0ZYg0YTRltC70YzRgtGA0LgifSxpbXBvcnRlcjp7bm9IZWFkZXJzOiLQndC1INCy0LTQsNC70L7RgdGPINC+0YLRgNC40LzQsNGC0Lgg0L3QsNC30LLQuCDRgdGC0L7QstC/0YfQuNC60ZbQsiwg0YfQuCDRlCDQsiDRhNCw0LnQu9GWINC30LDQs9C+0LvQvtCy0L7Quj8iLG5vT2JqZWN0czoi0J3QtSDQstC00LDQu9C+0YHRjyDQvtGC0YDQuNC80LDRgtC4INC00LDQvdGWLCDRh9C4INGUINCyINGE0LDQudC70ZYg0YDRj9C00LrQuCDQvtC60YDRltC8INC30LDQs9C+0LvQvtCy0LrQsD8iLGludmFsaWRDc3Y6ItCd0LUg0LLQtNCw0LvQvtGB0Y8g0L7QsdGA0L7QsdC40YLQuCDRhNCw0LnQuywg0YfQuCDRhtC1INC60L7RgNC10LrRgtC90LjQuSBDU1Yt0YTQsNC50Ls/IixpbnZhbGlkSnNvbjoi0J3QtSDQstC00LDQu9C+0YHRjyDQvtCx0YDQvtCx0LjRgtC4INGE0LDQudC7LCDRh9C4INGG0LUg0LrQvtGA0LXQutGC0L3QuNC5IEpTT04/Iixqc29uTm90QXJyYXk6IkpTT04t0YTQsNC50Lsg0YnQviDRltC80L/QvtGA0YLRg9GU0YLRjNGB0Y8g0L/QvtCy0LjQvdC10L0g0LzRltGB0YLQuNGC0Lgg0LzQsNGB0LjQsiwg0L7Qv9C10YDQsNGG0ZbRjiDRgdC60LDRgdC+0LLQsNC90L4uIn0scGFnaW5hdGlvbjp7YXJpYTp7cGFnZVRvRmlyc3Q6ItCf0LXRgNGI0LAg0YHRgtC+0YDRltC90LrQsCIscGFnZUJhY2s6ItCf0L7Qv9C10YDQtdC00L3RjyDRgdGC0L7RgNGW0L3QutCwIixwYWdlU2VsZWN0ZWQ6ItCe0LHRgNCw0L3QsCDRgdGC0L7RgNGW0L3QutCwIixwYWdlRm9yd2FyZDoi0J3QsNGB0YLRg9C/0L3QsCDRgdGC0L7RgNGW0L3QutCwIixwYWdlVG9MYXN0OiLQntGB0YLQsNC90L3RjyDRgdGC0L7RgNGW0L3QutCwIn0sc2l6ZXM6ItGA0Y/QtNC60ZbQsiDQvdCwINGB0YLQvtGA0ZbQvdC60YMiLHRvdGFsSXRlbXM6ItGA0Y/QtNC60ZbQsiIsdGhyb3VnaDoi0L/QviIsb2Y6ItC3In0sZ3JvdXBpbmc6e2dyb3VwOiLQk9GA0YPQv9GD0LLQsNGC0LgiLHVuZ3JvdXA6ItCg0L7Qt9Cz0YDRg9C/0YPQstCw0YLQuCIsYWdncmVnYXRlX2NvdW50OiLQk9GA0YPQv9GD0LLQsNGC0Lg6INCa0ZbQu9GM0LrRltGB0YLRjCIsYWdncmVnYXRlX3N1bToi0JTQu9GPINCz0YDRg9C/0Lg6INCh0YPQvNCwIixhZ2dyZWdhdGVfbWF4OiLQlNC70Y8g0LPRgNGD0L/QuDog0JzQsNC60YHQuNC80YPQvCIsYWdncmVnYXRlX21pbjoi0JTQu9GPINCz0YDRg9C/0Lg6INCc0ZbQvdGW0LzRg9C8IixhZ2dyZWdhdGVfYXZnOiLQlNC70Y8g0LPRgNGD0L/QuDog0KHQtdGA0LTQvdGUIixhZ2dyZWdhdGVfcmVtb3ZlOiLQlNC70Y8g0LPRgNGD0L/QuDog0J/Rg9GB0YLQviJ9fSksZX1dKX1dKSxmdW5jdGlvbigpe3ZhciBmPVsidWlUIiwidWlUcmFuc2xhdGUiXSx0PWFuZ3VsYXIubW9kdWxlKCJ1aS5ncmlkLmkxOG4iKTt0LmNvbnN0YW50KCJpMThuQ29uc3RhbnRzIix7TUlTU0lORzoiW01JU1NJTkddIixVUERBVEVfRVZFTlQ6IiR1aUkxOG4iLExPQ0FMRV9ESVJFQ1RJVkVfQUxJQVM6InVpSTE4biIsREVGQVVMVF9MQU5HOiJlbiJ9KSx0LnNlcnZpY2UoImkxOG5TZXJ2aWNlIixbIiRsb2ciLCJpMThuQ29uc3RhbnRzIiwiJHJvb3RTY29wZSIsZnVuY3Rpb24oZSxsLHQpe3ZhciBzPXtfbGFuZ3M6e30sY3VycmVudDpudWxsLGdldDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbGFuZ3NbZS50b0xvd2VyQ2FzZSgpXX0sYWRkOmZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS50b0xvd2VyQ2FzZSgpO3RoaXMuX2xhbmdzW3JdfHwodGhpcy5fbGFuZ3Nbcl09e30pLGFuZ3VsYXIubWVyZ2UodGhpcy5fbGFuZ3Nbcl0sdCl9LGdldEFsbExhbmdzOmZ1bmN0aW9uKCl7dmFyIGU9W107aWYoIXRoaXMuX2xhbmdzKXJldHVybiBlO2Zvcih2YXIgdCBpbiB0aGlzLl9sYW5ncyllLnB1c2godCk7cmV0dXJuIGV9LHNldEN1cnJlbnQ6ZnVuY3Rpb24oZSl7dGhpcy5jdXJyZW50PWUudG9Mb3dlckNhc2UoKX0sZ2V0Q3VycmVudExhbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jdXJyZW50fX0sZD17YWRkOmZ1bmN0aW9uKGUsdCl7Im9iamVjdCI9PXR5cGVvZiBlP2FuZ3VsYXIuZm9yRWFjaChlLGZ1bmN0aW9uKGUpe2UmJnMuYWRkKGUsdCl9KTpzLmFkZChlLHQpfSxnZXRBbGxMYW5nczpmdW5jdGlvbigpe3JldHVybiBzLmdldEFsbExhbmdzKCl9LGdldDpmdW5jdGlvbihlKXt2YXIgdD1lfHxkLmdldEN1cnJlbnRMYW5nKCk7cmV0dXJuIHMuZ2V0KHQpfSxnZXRTYWZlVGV4dDpmdW5jdGlvbihlLHQpe3ZhciByPXR8fGQuZ2V0Q3VycmVudExhbmcoKSxpPXMuZ2V0KHIpO2lmKCFpKXJldHVybiBsLk1JU1NJTkc7Zm9yKHZhciBuPWUuc3BsaXQoIi4iKSxvPWksYT0wO2E8bi5sZW5ndGg7KythKXtpZih2b2lkIDA9PT1vW25bYV1dfHxudWxsPT09b1tuW2FdXSlyZXR1cm4gbC5NSVNTSU5HO289b1tuW2FdXX1yZXR1cm4gb30sc2V0Q3VycmVudExhbmc6ZnVuY3Rpb24oZSl7ZSYmKHMuc2V0Q3VycmVudChlKSx0LiRicm9hZGNhc3QobC5VUERBVEVfRVZFTlQpKX0sZ2V0Q3VycmVudExhbmc6ZnVuY3Rpb24oKXt2YXIgZT1zLmdldEN1cnJlbnRMYW5nKCk7cmV0dXJuIGV8fChlPWwuREVGQVVMVF9MQU5HLHMuc2V0Q3VycmVudChlKSksZX19O3JldHVybiBkfV0pO3QuZGlyZWN0aXZlKCJ1aUkxOG4iLFsiaTE4blNlcnZpY2UiLCJpMThuQ29uc3RhbnRzIixmdW5jdGlvbihvLGEpe3JldHVybntjb21waWxlOmZ1bmN0aW9uKCl7cmV0dXJue3ByZTpmdW5jdGlvbihlLHQscil7dmFyIGk9YS5MT0NBTEVfRElSRUNUSVZFX0FMSUFTLG49ZS4kZXZhbChyW2ldKTtuP2UuJHdhdGNoKHJbaV0sZnVuY3Rpb24oKXtvLnNldEN1cnJlbnRMYW5nKG4pfSk6ci4kJG9ic2VydmVycyYmci4kb2JzZXJ2ZShpLGZ1bmN0aW9uKCl7by5zZXRDdXJyZW50TGFuZyhyW2ldfHxhLkRFRkFVTFRfTEFORyl9KX19fX19XSk7dmFyIHI9ZnVuY3Rpb24oYyxnLHApe3JldHVybntyZXN0cmljdDoiRUEiLGNvbXBpbGU6ZnVuY3Rpb24oKXtyZXR1cm57cHJlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPWZbMF0sbz1mWzFdLGE9cltuXXx8cltvXXx8dC5odG1sKCksbD1wLk1JU1NJTkcrYTtpZihyLiQkb2JzZXJ2ZXJzKXt2YXIgcz1yW25dP246bztpPXIuJG9ic2VydmUocyxmdW5jdGlvbihlKXtlJiZ0Lmh0bWwoYyhlKShnLmdldEN1cnJlbnRMYW5nKCkpfHxsKX0pfXZhciBkPWMoYSksdT1lLiRvbihwLlVQREFURV9FVkVOVCxmdW5jdGlvbihlKXtpP2kocltuXXx8cltvXSk6dC5odG1sKGQoZy5nZXQoKSl8fGwpfSk7ZS4kb24oIiRkZXN0cm95Iix1KSx0Lmh0bWwoZChnLmdldCgpKXx8bCl9fX19fTthbmd1bGFyLmZvckVhY2goZixmdW5jdGlvbihlKXt0LmRpcmVjdGl2ZShlLFsiJHBhcnNlIiwiaTE4blNlcnZpY2UiLCJpMThuQ29uc3RhbnRzIixyXSl9KTt2YXIgaT1mdW5jdGlvbih0LHIsaSl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiB0KGUpKHIuZ2V0KCkpfHxpLk1JU1NJTkcrZX19O2FuZ3VsYXIuZm9yRWFjaChbInQiLCJ1aVRyYW5zbGF0ZSJdLGZ1bmN0aW9uKGUpe3QuZmlsdGVyKGUsWyIkcGFyc2UiLCJpMThuU2VydmljZSIsImkxOG5Db25zdGFudHMiLGldKX0pfSgpLGFuZ3VsYXIubW9kdWxlKCJ1aS5ncmlkIikuY29uZmlnKFsiJHByb3ZpZGUiLGZ1bmN0aW9uKGUpe2UuZGVjb3JhdG9yKCJpMThuU2VydmljZSIsWyIkZGVsZWdhdGUiLGZ1bmN0aW9uKGUpe3JldHVybiBlLmFkZCgiemgtY24iLHtoZWFkZXJDZWxsOnthcmlhOntkZWZhdWx0RmlsdGVyTGFiZWw6IuWIl+i/h+a7pOWZqCIscmVtb3ZlRmlsdGVyOiLnp7vpmaTov4fmu6TlmagiLGNvbHVtbk1lbnVCdXR0b25MYWJlbDoi5YiX6I+c5Y2VIn0scHJpb3JpdHk6IuS8mOWFiOe6pzoiLGZpbHRlckxhYmVsOiLliJfov4fmu6Tlmag6ICJ9LGFnZ3JlZ2F0ZTp7bGFiZWw6IuihjCJ9LGdyb3VwUGFuZWw6e2Rlc2NyaXB0aW9uOiLmi5bmm7PooajlpLTliLDmraTlpITov5vooYzliIbnu4QifSxzZWFyY2g6e3BsYWNlaG9sZGVyOiLmn6Xmib4iLHNob3dpbmdJdGVtczoi5bey5pi+56S66KGM5pWw77yaIixzZWxlY3RlZEl0ZW1zOiLlt7LpgInmi6nooYzmlbDvvJoiLHRvdGFsSXRlbXM6IuaAu+ihjOaVsO+8miIsc2l6ZToi5q+P6aG15pi+56S66KGM5pWw77yaIixmaXJzdDoi6aaW6aG1IixuZXh0OiLkuIvkuIDpobUiLHByZXZpb3VzOiLkuIrkuIDpobUiLGxhc3Q6Iuacq+mhtSJ9LG1lbnU6e3RleHQ6IumAieaLqeWIl++8miJ9LHNvcnQ6e2FzY2VuZGluZzoi5Y2H5bqPIixkZXNjZW5kaW5nOiLpmY3luo8iLG5vbmU6IuaXoOW6jyIscmVtb3ZlOiLlj5bmtojmjpLluo8ifSxjb2x1bW46e2hpZGU6IumakOiXj+WIlyJ9LGFnZ3JlZ2F0aW9uOntjb3VudDoi6K6h5pWw77yaIixzdW06IuaxguWSjO+8miIsYXZnOiLlnYflgLzvvJoiLG1pbjoi5pyA5bCP5YC877yaIixtYXg6IuacgOWkp+WAvO+8miJ9LHBpbm5pbmc6e3BpbkxlZnQ6IuW3puS+p+WbuuWumiIscGluUmlnaHQ6IuWPs+S+p+WbuuWumiIsdW5waW46IuWPlua2iOWbuuWumiJ9LGNvbHVtbk1lbnU6e2Nsb3NlOiLlhbPpl60ifSxncmlkTWVudTp7YXJpYTp7YnV0dG9uTGFiZWw6IuihqOagvOiPnOWNlSJ9LGNvbHVtbnM6IuWIl++8miIsaW1wb3J0ZXJUaXRsZToi5a+85YWl5paH5Lu2IixleHBvcnRlckFsbEFzQ3N2OiLlr7zlh7rlhajpg6jmlbDmja7liLBDU1YiLGV4cG9ydGVyVmlzaWJsZUFzQ3N2OiLlr7zlh7rlj6/op4HmlbDmja7liLBDU1YiLGV4cG9ydGVyU2VsZWN0ZWRBc0Nzdjoi5a+85Ye65bey6YCJ5pWw5o2u5YiwQ1NWIixleHBvcnRlckFsbEFzUGRmOiLlr7zlh7rlhajpg6jmlbDmja7liLBQREYiLGV4cG9ydGVyVmlzaWJsZUFzUGRmOiLlr7zlh7rlj6/op4HmlbDmja7liLBQREYiLGV4cG9ydGVyU2VsZWN0ZWRBc1BkZjoi5a+85Ye65bey6YCJ5pWw5o2u5YiwUERGIixjbGVhckFsbEZpbHRlcnM6Iua4hemZpOaJgOaciei/h+a7pOWZqCJ9LGltcG9ydGVyOntub0hlYWRlcnM6IuaXoOazleiOt+WPluWIl+WQje+8jOehruWumuaWh+S7tuWMheWQq+ihqOWktO+8nyIsbm9PYmplY3RzOiLml6Dms5Xojrflj5bmlbDmja7vvIznoa7lrprmlofku7bljIXlkKvmlbDmja7vvJ8iLGludmFsaWRDc3Y6IuaXoOazleWkhOeQhuaWh+S7tu+8jOehruWumuaYr+WQiOazleeahENTVuaWh+S7tu+8nyIsaW52YWxpZEpzb246IuaXoOazleWkhOeQhuaWh+S7tu+8jOehruWumuaYr+WQiOazleeahEpTT07mlofku7bvvJ8iLGpzb25Ob3RBcnJheToi5a+85YWl55qE5paH5Lu25LiN5pivSlNPTuaVsOe7hO+8gSJ9LHBhZ2luYXRpb246e2FyaWE6e3BhZ2VUb0ZpcnN0OiLnrKzkuIDpobUiLHBhZ2VCYWNrOiLkuIrkuIDpobUiLHBhZ2VTZWxlY3RlZDoi5b2T5YmN6aG1IixwYWdlRm9yd2FyZDoi5LiL5LiA6aG1IixwYWdlVG9MYXN0OiLmnIDlkI7kuIDpobUifSxzaXplczoi6KGM5q+P6aG1Iix0b3RhbEl0ZW1zOiLooYwiLHRocm91Z2g6IuiHsyIsb2Y6IuWFsSJ9LGdyb3VwaW5nOntncm91cDoi5YiG57uEIix1bmdyb3VwOiLlj5bmtojliIbnu4QiLGFnZ3JlZ2F0ZV9jb3VudDoi5ZCI6K6hOiDorqHmlbAiLGFnZ3JlZ2F0ZV9zdW06IuWQiOiuoTog5rGC5ZKMIixhZ2dyZWdhdGVfbWF4OiLlkIjorqE6IOacgOWkpyIsYWdncmVnYXRlX21pbjoi5ZCI6K6hOiDmnIDlsI8iLGFnZ3JlZ2F0ZV9hdmc6IuWQiOiuoTog5bmz5Z2HIixhZ2dyZWdhdGVfcmVtb3ZlOiLlkIjorqE6IOenu+mZpCJ9fSksZX1dKX1dKSxhbmd1bGFyLm1vZHVsZSgidWkuZ3JpZCIpLmNvbmZpZyhbIiRwcm92aWRlIixmdW5jdGlvbihlKXtlLmRlY29yYXRvcigiaTE4blNlcnZpY2UiLFsiJGRlbGVnYXRlIixmdW5jdGlvbihlKXtyZXR1cm4gZS5hZGQoInpoLXR3Iix7YWdncmVnYXRlOntsYWJlbDoi6KGMIn0sZ3JvdXBQYW5lbDp7ZGVzY3JpcHRpb246IuaLluabs+ihqOmgreWIsOatpOiZlemAsuihjOWIhue1hCJ9LHNlYXJjaDp7cGxhY2Vob2xkZXI6IuafpeaJviIsc2hvd2luZ0l0ZW1zOiLlt7Lpoa/npLrooYzmlbjvvJoiLHNlbGVjdGVkSXRlbXM6IuW3sumBuOaTh+ihjOaVuO+8miIsdG90YWxJdGVtczoi57i96KGM5pW477yaIixzaXplOiLmr4/poIHpoa/npLrooYzmlbjvvJoiLGZpcnN0OiLpppbpoIEiLG5leHQ6IuS4i+WjuemggSIscHJldmlvdXM6IuS4iuWjuemggSIsbGFzdDoi5pyr6aCBIn0sbWVudTp7dGV4dDoi6YG45pOH5YiX77yaIn0sc29ydDp7YXNjZW5kaW5nOiLljYfluo8iLGRlc2NlbmRpbmc6IumZjeW6jyIscmVtb3ZlOiLlj5bmtojmjpLluo8ifSxjb2x1bW46e2hpZGU6IumaseiXj+WIlyJ9LGFnZ3JlZ2F0aW9uOntjb3VudDoi6KiI5pW477yaIixzdW06IuaxguWSjO+8miIsYXZnOiLlnYflgLzvvJoiLG1pbjoi5pyA5bCP5YC877yaIixtYXg6IuacgOWkp+WAvO+8miJ9LHBpbm5pbmc6e3BpbkxlZnQ6IuW3puWBtOWbuuWumiIscGluUmlnaHQ6IuWPs+WBtOWbuuWumiIsdW5waW46IuWPlua2iOWbuuWumiJ9LGdyaWRNZW51Ontjb2x1bW5zOiLliJfvvJoiLGltcG9ydGVyVGl0bGU6IuWwjuWFpeaWh+S7tiIsZXhwb3J0ZXJBbGxBc0Nzdjoi5bCO5Ye65YWo6YOo5pW45pOa5YiwQ1NWIixleHBvcnRlclZpc2libGVBc0Nzdjoi5bCO5Ye65Y+v6KaL5pW45pOa5YiwQ1NWIixleHBvcnRlclNlbGVjdGVkQXNDc3Y6IuWwjuWHuuW3sumBuOaVuOaTmuWIsENTViIsZXhwb3J0ZXJBbGxBc1BkZjoi5bCO5Ye65YWo6YOo5pW45pOa5YiwUERGIixleHBvcnRlclZpc2libGVBc1BkZjoi5bCO5Ye65Y+v6KaL5pW45pOa5YiwUERGIixleHBvcnRlclNlbGVjdGVkQXNQZGY6IuWwjuWHuuW3sumBuOaVuOaTmuWIsFBERiIsY2xlYXJBbGxGaWx0ZXJzOiLmuIXpmaTmiYDmnInov4fmu6TlmagifSxpbXBvcnRlcjp7bm9IZWFkZXJzOiLnhKHms5XnjbLlj5bliJflkI3vvIznorrlrprmlofku7bljIXlkKvooajpoK3vvJ8iLG5vT2JqZWN0czoi54Sh5rOV542y5Y+W5pW45pOa77yM56K65a6a5paH5Lu25YyF5ZCr5pW45pOa77yfIixpbnZhbGlkQ3N2OiLnhKHms5XomZXnkIbmlofku7bvvIznorrlrprmmK/lkIjms5XnmoRDU1bmlofku7bvvJ8iLGludmFsaWRKc29uOiLnhKHms5XomZXnkIbmlofku7bvvIznorrlrprmmK/lkIjms5XnmoRKU09O5paH5Lu277yfIixqc29uTm90QXJyYXk6IuWwjuWFpeeahOaWh+S7tuS4jeaYr0pTT07mlbjntYTvvIEifSxwYWdpbmF0aW9uOntzaXplczoi6KGM5q+P6aCBIix0b3RhbEl0ZW1zOiLooYwifX0pLGV9XSl9XSksZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7YW5ndWxhci5tb2R1bGUoInVpLmdyaWQuYXV0b1Jlc2l6ZSIsWyJ1aS5ncmlkIl0pLmRpcmVjdGl2ZSgidWlHcmlkQXV0b1Jlc2l6ZSIsWyJncmlkVXRpbCIsZnVuY3Rpb24oZCl7cmV0dXJue3JlcXVpcmU6InVpR3JpZCIsc2NvcGU6ITEsbGluazpmdW5jdGlvbihlLHQscixpKXt2YXIgbixvLGE9ZC50aHJvdHRsZShmdW5jdGlvbigpe249ZC5lbGVtZW50V2lkdGgodCl9LDIwMCksbD1kLnRocm90dGxlKGZ1bmN0aW9uKCl7bz1kLmVsZW1lbnRIZWlnaHQodCl9LDIwMCkscz1kLnRocm90dGxlKGZ1bmN0aW9uKGUsdCl7aS5ncmlkLmdyaWRXaWR0aD1lLGkuZ3JpZC5ncmlkSGVpZ2h0PXQsaS5ncmlkLnJlZnJlc2goKX0sMzAwKTtlLiR3YXRjaEdyb3VwKFtmdW5jdGlvbigpe3JldHVybiBhKCksbn0sZnVuY3Rpb24oKXtyZXR1cm4gbCgpLG99XSxmdW5jdGlvbihlLHQscil7YW5ndWxhci5lcXVhbHMoZSx0KXx8cyhlWzBdLGVbMV0pfSl9fX1dKX0oKSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT1hbmd1bGFyLm1vZHVsZSgidWkuZ3JpZC5jZWxsTmF2IixbInVpLmdyaWQiXSk7ZS5jb25zdGFudCgidWlHcmlkQ2VsbE5hdkNvbnN0YW50cyIse0ZFQVRVUkVfTkFNRToiZ3JpZENlbGxOYXYiLENFTExfTkFWX0VWRU5UOiJjZWxsTmF2IixkaXJlY3Rpb246e0xFRlQ6MCxSSUdIVDoxLFVQOjIsRE9XTjozLFBHX1VQOjQsUEdfRE9XTjo1fSxFVkVOVF9UWVBFOntLRVlET1dOOjAsQ0xJQ0s6MSxDTEVBUjoyfX0pLGUuZmFjdG9yeSgidWlHcmlkQ2VsbE5hdkZhY3RvcnkiLFsiZ3JpZFV0aWwiLCJ1aUdyaWRDb25zdGFudHMiLCJ1aUdyaWRDZWxsTmF2Q29uc3RhbnRzIiwiR3JpZFJvd0NvbHVtbiIsIiRxIixmdW5jdGlvbihlLHQsaSxsLHIpe3ZhciBuPWZ1bmN0aW9uKGUsdCxyLGkpe3RoaXMucm93cz1lLnZpc2libGVSb3dDYWNoZSx0aGlzLmNvbHVtbnM9dC52aXNpYmxlQ29sdW1uQ2FjaGUsdGhpcy5sZWZ0Q29sdW1ucz1yP3IudmlzaWJsZUNvbHVtbkNhY2hlOltdLHRoaXMucmlnaHRDb2x1bW5zPWk/aS52aXNpYmxlQ29sdW1uQ2FjaGU6W10sdGhpcy5ib2R5Q29udGFpbmVyPWV9O3JldHVybiBuLnByb3RvdHlwZS5nZXRGb2N1c2FibGVDb2xzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVmdENvbHVtbnMuY29uY2F0KHRoaXMuY29sdW1ucyx0aGlzLnJpZ2h0Q29sdW1ucykuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLmNvbERlZi5hbGxvd0NlbGxGb2N1c30pfSxuLnByb3RvdHlwZS5nZXRGb2N1c2FibGVSb3dzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucm93cy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuITEhPT1lLmFsbG93Q2VsbEZvY3VzfSl9LG4ucHJvdG90eXBlLmdldE5leHRSb3dDb2w9ZnVuY3Rpb24oZSx0LHIpe3N3aXRjaChlKXtjYXNlIGkuZGlyZWN0aW9uLkxFRlQ6cmV0dXJuIHRoaXMuZ2V0Um93Q29sTGVmdCh0LHIpO2Nhc2UgaS5kaXJlY3Rpb24uUklHSFQ6cmV0dXJuIHRoaXMuZ2V0Um93Q29sUmlnaHQodCxyKTtjYXNlIGkuZGlyZWN0aW9uLlVQOnJldHVybiB0aGlzLmdldFJvd0NvbFVwKHQscik7Y2FzZSBpLmRpcmVjdGlvbi5ET1dOOnJldHVybiB0aGlzLmdldFJvd0NvbERvd24odCxyKTtjYXNlIGkuZGlyZWN0aW9uLlBHX1VQOnJldHVybiB0aGlzLmdldFJvd0NvbFBhZ2VVcCh0LHIpO2Nhc2UgaS5kaXJlY3Rpb24uUEdfRE9XTjpyZXR1cm4gdGhpcy5nZXRSb3dDb2xQYWdlRG93bih0LHIpfX0sbi5wcm90b3R5cGUuaW5pdGlhbGl6ZVNlbGVjdGlvbj1mdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0Rm9jdXNhYmxlQ29scygpLHQ9dGhpcy5nZXRGb2N1c2FibGVSb3dzKCk7aWYoMD09PWUubGVuZ3RofHwwPT09dC5sZW5ndGgpcmV0dXJuIG51bGw7cmV0dXJuIG5ldyBsKHRbMF0sZVswXSl9LG4ucHJvdG90eXBlLmdldFJvd0NvbExlZnQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmdldEZvY3VzYWJsZUNvbHMoKSxpPXRoaXMuZ2V0Rm9jdXNhYmxlUm93cygpLG49ci5pbmRleE9mKHQpLG89aS5pbmRleE9mKGUpOy0xPT09biYmKG49MSk7dmFyIGE9MD09PW4/ci5sZW5ndGgtMTpuLTE7cmV0dXJuIG5ldyBsKG48PWE/MD09PW8/ZTppW28tMV06ZSxyW2FdKX0sbi5wcm90b3R5cGUuZ2V0Um93Q29sUmlnaHQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmdldEZvY3VzYWJsZUNvbHMoKSxpPXRoaXMuZ2V0Rm9jdXNhYmxlUm93cygpLG49ci5pbmRleE9mKHQpLG89aS5pbmRleE9mKGUpOy0xPT09biYmKG49MCk7dmFyIGE9bj09PXIubGVuZ3RoLTE/MDpuKzE7cmV0dXJuIGE8PW4/bz09PWkubGVuZ3RoLTE/bmV3IGwoZSxyW2FdKTpuZXcgbChpW28rMV0sclthXSk6bmV3IGwoZSxyW2FdKX0sbi5wcm90b3R5cGUuZ2V0Um93Q29sRG93bj1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuZ2V0Rm9jdXNhYmxlQ29scygpLGk9dGhpcy5nZXRGb2N1c2FibGVSb3dzKCksbj1yLmluZGV4T2YodCksbz1pLmluZGV4T2YoZSk7cmV0dXJuLTE9PT1uJiYobj0wKSxvPT09aS5sZW5ndGgtMT9uZXcgbChlLHJbbl0pOm5ldyBsKGlbbysxXSxyW25dKX0sbi5wcm90b3R5cGUuZ2V0Um93Q29sUGFnZURvd249ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmdldEZvY3VzYWJsZUNvbHMoKSxpPXRoaXMuZ2V0Rm9jdXNhYmxlUm93cygpLG49ci5pbmRleE9mKHQpLG89aS5pbmRleE9mKGUpOy0xPT09biYmKG49MCk7dmFyIGE9dGhpcy5ib2R5Q29udGFpbmVyLm1pblJvd3NUb1JlbmRlcigpO3JldHVybiBvPj1pLmxlbmd0aC1hP25ldyBsKGlbaS5sZW5ndGgtMV0scltuXSk6bmV3IGwoaVtvK2FdLHJbbl0pfSxuLnByb3RvdHlwZS5nZXRSb3dDb2xVcD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuZ2V0Rm9jdXNhYmxlQ29scygpLGk9dGhpcy5nZXRGb2N1c2FibGVSb3dzKCksbj1yLmluZGV4T2YodCksbz1pLmluZGV4T2YoZSk7cmV0dXJuLTE9PT1uJiYobj0wKSxuZXcgbCgwPT09bz9lOmlbby0xXSxyW25dKX0sbi5wcm90b3R5cGUuZ2V0Um93Q29sUGFnZVVwPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5nZXRGb2N1c2FibGVDb2xzKCksaT10aGlzLmdldEZvY3VzYWJsZVJvd3MoKSxuPXIuaW5kZXhPZih0KSxvPWkuaW5kZXhPZihlKTstMT09PW4mJihuPTApO3ZhciBhPXRoaXMuYm9keUNvbnRhaW5lci5taW5Sb3dzVG9SZW5kZXIoKTtyZXR1cm4gbmV3IGwoby1hPDA/aVswXTppW28tYV0scltuXSl9LG59XSksZS5zZXJ2aWNlKCJ1aUdyaWRDZWxsTmF2U2VydmljZSIsWyJncmlkVXRpbCIsInVpR3JpZENvbnN0YW50cyIsInVpR3JpZENlbGxOYXZDb25zdGFudHMiLCIkcSIsInVpR3JpZENlbGxOYXZGYWN0b3J5IiwiR3JpZFJvd0NvbHVtbiIsIlNjcm9sbEV2ZW50IixmdW5jdGlvbihlLHQscixpLG4sbyxhKXt2YXIgbD17aW5pdGlhbGl6ZUdyaWQ6ZnVuY3Rpb24oaSl7aS5yZWdpc3RlckNvbHVtbkJ1aWxkZXIobC5jZWxsTmF2Q29sdW1uQnVpbGRlciksaS5jZWxsTmF2PXt9LGkuY2VsbE5hdi5sYXN0Um93Q29sPW51bGwsaS5jZWxsTmF2LmZvY3VzZWRDZWxscz1bXSxsLmRlZmF1bHRHcmlkT3B0aW9ucyhpLm9wdGlvbnMpO3ZhciBlPXtldmVudHM6e2NlbGxOYXY6e25hdmlnYXRlOmZ1bmN0aW9uKGUsdCl7fSx2aWV3UG9ydEtleURvd246ZnVuY3Rpb24oZSx0KXt9LHZpZXdQb3J0S2V5UHJlc3M6ZnVuY3Rpb24oZSx0KXt9fX0sbWV0aG9kczp7Y2VsbE5hdjp7c2Nyb2xsVG9Gb2N1czpmdW5jdGlvbihlLHQpe3JldHVybiBsLnNjcm9sbFRvRm9jdXMoaSxlLHQpfSxnZXRGb2N1c2VkQ2VsbDpmdW5jdGlvbigpe3JldHVybiBpLmNlbGxOYXYubGFzdFJvd0NvbH0sZ2V0Q3VycmVudFNlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiBpLmNlbGxOYXYuZm9jdXNlZENlbGxzfSxyb3dDb2xTZWxlY3RJbmRleDpmdW5jdGlvbihlKXtmb3IodmFyIHQ9LTEscj0wO3I8aS5jZWxsTmF2LmZvY3VzZWRDZWxscy5sZW5ndGg7cisrKWlmKGkuY2VsbE5hdi5mb2N1c2VkQ2VsbHNbcl0uY29sLnVpZD09PWUuY29sLnVpZCYmaS5jZWxsTmF2LmZvY3VzZWRDZWxsc1tyXS5yb3cudWlkPT09ZS5yb3cudWlkKXt0PXI7YnJlYWt9cmV0dXJuIHR9fX19O2kuYXBpLnJlZ2lzdGVyRXZlbnRzRnJvbU9iamVjdChlLmV2ZW50cyksaS5hcGkucmVnaXN0ZXJNZXRob2RzRnJvbU9iamVjdChlLm1ldGhvZHMpfSxkZWZhdWx0R3JpZE9wdGlvbnM6ZnVuY3Rpb24oZSl7ZS5tb2RpZmllcktleXNUb011bHRpU2VsZWN0Q2VsbHM9ITA9PT1lLm1vZGlmaWVyS2V5c1RvTXVsdGlTZWxlY3RDZWxscyxlLmtleURvd25PdmVycmlkZXM9ZS5rZXlEb3duT3ZlcnJpZGVzfHxbXX0sZGVjb3JhdGVSZW5kZXJDb250YWluZXJzOmZ1bmN0aW9uKGUpe3ZhciB0PWUuaGFzUmlnaHRDb250YWluZXIoKT9lLnJlbmRlckNvbnRhaW5lcnMucmlnaHQ6bnVsbCxyPWUuaGFzTGVmdENvbnRhaW5lcigpP2UucmVuZGVyQ29udGFpbmVycy5sZWZ0Om51bGw7bnVsbCE9PXImJihlLnJlbmRlckNvbnRhaW5lcnMubGVmdC5jZWxsTmF2PW5ldyBuKGUucmVuZGVyQ29udGFpbmVycy5ib2R5LHIsdCxlLnJlbmRlckNvbnRhaW5lcnMuYm9keSkpLG51bGwhPT10JiYoZS5yZW5kZXJDb250YWluZXJzLnJpZ2h0LmNlbGxOYXY9bmV3IG4oZS5yZW5kZXJDb250YWluZXJzLmJvZHksdCxlLnJlbmRlckNvbnRhaW5lcnMuYm9keSxyKSksZS5yZW5kZXJDb250YWluZXJzLmJvZHkuY2VsbE5hdj1uZXcgbihlLnJlbmRlckNvbnRhaW5lcnMuYm9keSxlLnJlbmRlckNvbnRhaW5lcnMuYm9keSxyLHQpfSxnZXREaXJlY3Rpb246ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09PXQua2V5bWFwLkxFRlR8fGUua2V5Q29kZT09PXQua2V5bWFwLlRBQiYmZS5zaGlmdEtleT9yLmRpcmVjdGlvbi5MRUZUOmUua2V5Q29kZT09PXQua2V5bWFwLlJJR0hUfHxlLmtleUNvZGU9PT10LmtleW1hcC5UQUI/ci5kaXJlY3Rpb24uUklHSFQ6ZS5rZXlDb2RlPT09dC5rZXltYXAuVVB8fGUua2V5Q29kZT09PXQua2V5bWFwLkVOVEVSJiZlLnNoaWZ0S2V5P3IuZGlyZWN0aW9uLlVQOmUua2V5Q29kZT09PXQua2V5bWFwLlBHX1VQP3IuZGlyZWN0aW9uLlBHX1VQOmUua2V5Q29kZT09PXQua2V5bWFwLkRPV058fGUua2V5Q29kZT09PXQua2V5bWFwLkVOVEVSJiYhZS5jdHJsS2V5JiYhZS5hbHRLZXk/ci5kaXJlY3Rpb24uRE9XTjplLmtleUNvZGU9PT10LmtleW1hcC5QR19ET1dOP3IuZGlyZWN0aW9uLlBHX0RPV046bnVsbH0sY2VsbE5hdkNvbHVtbkJ1aWxkZXI6ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlLmFsbG93Q2VsbEZvY3VzPXZvaWQgMD09PWUuYWxsb3dDZWxsRm9jdXN8fGUuYWxsb3dDZWxsRm9jdXMsaS5hbGwoW10pfSxzY3JvbGxUb0ZvY3VzOmZ1bmN0aW9uKHQsZSxyKXt2YXIgaT1udWxsLG49bnVsbDtyZXR1cm4gbnVsbCE9ZSYmKGk9dC5nZXRSb3coZSkpLG51bGwhPXImJihuPXQuZ2V0Q29sdW1uKHIubmFtZT9yLm5hbWU6ci5maWVsZCkpLHQuYXBpLmNvcmUuc2Nyb2xsVG9JZk5lY2Vzc2FyeShpLG4pLnRoZW4oZnVuY3Rpb24oKXt2YXIgZT17cm93OmksY29sOm59O251bGwhPT1pJiZudWxsIT09biYmdC5jZWxsTmF2LmJyb2FkY2FzdENlbGxOYXYoZSxudWxsLG51bGwpfSl9LGdldExlZnRXaWR0aDpmdW5jdGlvbihlLHQpe3ZhciByPTA7aWYoIXQpcmV0dXJuIHI7dmFyIGk9ZS5yZW5kZXJDb250YWluZXJzLmJvZHkudmlzaWJsZUNvbHVtbkNhY2hlLmluZGV4T2YodCk7ZS5yZW5kZXJDb250YWluZXJzLmJvZHkudmlzaWJsZUNvbHVtbkNhY2hlLmZvckVhY2goZnVuY3Rpb24oZSx0KXt0PGkmJihyKz1lLmRyYXduV2lkdGgpfSk7dmFyIG49MD09PWk/MDooaSsxKS9lLnJlbmRlckNvbnRhaW5lcnMuYm9keS52aXNpYmxlQ29sdW1uQ2FjaGUubGVuZ3RoO3JldHVybiByKz10LmRyYXduV2lkdGgqbn19O3JldHVybiBsfV0pLGUuZGlyZWN0aXZlKCJ1aUdyaWRDZWxsbmF2IixbImdyaWRVdGlsIiwidWlHcmlkQ2VsbE5hdlNlcnZpY2UiLCJ1aUdyaWRDZWxsTmF2Q29uc3RhbnRzIiwidWlHcmlkQ29uc3RhbnRzIiwiR3JpZFJvd0NvbHVtbiIsIiR0aW1lb3V0IiwiJGNvbXBpbGUiLCJpMThuU2VydmljZSIsZnVuY3Rpb24oZSxkLHUsYyxnLHQsYSxmKXtyZXR1cm57cmVwbGFjZTohMCxwcmlvcml0eTotMTUwLHJlcXVpcmU6Il51aUdyaWQiLHNjb3BlOiExLGNvbnRyb2xsZXI6ZnVuY3Rpb24oKXt9LGNvbXBpbGU6ZnVuY3Rpb24oKXtyZXR1cm57cHJlOmZ1bmN0aW9uKGUsdCxyLGwpe3ZhciBpPWUscz1sLmdyaWQ7ZC5pbml0aWFsaXplR3JpZChzKSxsLmNlbGxOYXY9e30sbC5jZWxsTmF2Lm1ha2VSb3dDb2w9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBnfHwoZT1uZXcgZyhlLnJvdyxlLmNvbCkpLGV9LGwuY2VsbE5hdi5nZXRBY3RpdmVDZWxsPWZ1bmN0aW9uKCl7dmFyIGU9dFswXS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJ1aS1ncmlkLWNlbGwtZm9jdXMiKTtpZigwPGUubGVuZ3RoKXJldHVybiBlWzBdfSxsLmNlbGxOYXYuYnJvYWRjYXN0Q2VsbE5hdj1zLmNlbGxOYXYuYnJvYWRjYXN0Q2VsbE5hdj1mdW5jdGlvbihlLHQscil7dD0hKHZvaWQgMD09PXR8fCF0KSxlPWwuY2VsbE5hdi5tYWtlUm93Q29sKGUpLGwuY2VsbE5hdi5icm9hZGNhc3RGb2N1cyhlLHQsciksaS4kYnJvYWRjYXN0KHUuQ0VMTF9OQVZfRVZFTlQsZSx0LHIpfSxsLmNlbGxOYXYuY2xlYXJGb2N1cz1zLmNlbGxOYXYuY2xlYXJGb2N1cz1mdW5jdGlvbigpe3MuY2VsbE5hdi5mb2N1c2VkQ2VsbHM9W10saS4kYnJvYWRjYXN0KHUuQ0VMTF9OQVZfRVZFTlQpfSxsLmNlbGxOYXYuYnJvYWRjYXN0Rm9jdXM9ZnVuY3Rpb24oZSx0LHIpe3Q9ISh2b2lkIDA9PT10fHwhdCk7dmFyIGk9KGU9bC5jZWxsTmF2Lm1ha2VSb3dDb2woZSkpLnJvdyxuPWUuY29sLG89bC5ncmlkLmFwaS5jZWxsTmF2LnJvd0NvbFNlbGVjdEluZGV4KGUpO2lmKG51bGw9PT1zLmNlbGxOYXYubGFzdFJvd0NvbHx8LTE9PT1vfHxzLmNlbGxOYXYubGFzdFJvd0NvbC5jb2w9PT1uJiZzLmNlbGxOYXYubGFzdFJvd0NvbC5yb3c9PT1pKXt2YXIgYT1uZXcgZyhpLG4pOyhudWxsPT09cy5jZWxsTmF2Lmxhc3RSb3dDb2x8fHMuY2VsbE5hdi5sYXN0Um93Q29sLnJvdyE9PWEucm93fHxzLmNlbGxOYXYubGFzdFJvd0NvbC5jb2whPT1hLmNvbHx8cy5vcHRpb25zLmVuYWJsZUNlbGxFZGl0T25Gb2N1cykmJihzLmFwaS5jZWxsTmF2LnJhaXNlLm5hdmlnYXRlKGEscy5jZWxsTmF2Lmxhc3RSb3dDb2wscikscy5jZWxsTmF2Lmxhc3RSb3dDb2w9YSksbC5ncmlkLm9wdGlvbnMubW9kaWZpZXJLZXlzVG9NdWx0aVNlbGVjdENlbGxzJiZ0P3MuY2VsbE5hdi5mb2N1c2VkQ2VsbHMucHVzaChlKTpzLmNlbGxOYXYuZm9jdXNlZENlbGxzPVtlXX1lbHNlIHMub3B0aW9ucy5tb2RpZmllcktleXNUb011bHRpU2VsZWN0Q2VsbHMmJnQmJjA8PW8mJnMuY2VsbE5hdi5mb2N1c2VkQ2VsbHMuc3BsaWNlKG8sMSl9LGwuY2VsbE5hdi5oYW5kbGVLZXlEb3duPWZ1bmN0aW9uKGUpe3ZhciB0PWQuZ2V0RGlyZWN0aW9uKGUpO2lmKG51bGw9PT10KXJldHVybiBudWxsO3ZhciByPSJib2R5IjtlLnVpR3JpZFRhcmdldFJlbmRlckNvbnRhaW5lcklkJiYocj1lLnVpR3JpZFRhcmdldFJlbmRlckNvbnRhaW5lcklkKTt2YXIgaT1sLmdyaWQuYXBpLmNlbGxOYXYuZ2V0Rm9jdXNlZENlbGwoKTtpZihpKXt2YXIgbj1sLmdyaWQucmVuZGVyQ29udGFpbmVyc1tyXS5jZWxsTmF2LmdldE5leHRSb3dDb2wodCxpLnJvdyxpLmNvbCksbz1sLmdyaWQucmVuZGVyQ29udGFpbmVyc1tyXS5jZWxsTmF2LmdldEZvY3VzYWJsZUNvbHMoKSxhPWwuZ3JpZC5hcGkuY2VsbE5hdi5yb3dDb2xTZWxlY3RJbmRleChuKTtyZXR1cm4gdD09PXUuZGlyZWN0aW9uLkxFRlQmJm4uY29sPT09b1tvLmxlbmd0aC0xXSYmbi5yb3c9PT1pLnJvdyYmZS5rZXlDb2RlPT09Yy5rZXltYXAuVEFCJiZlLnNoaWZ0S2V5PyhzLmNlbGxOYXYuZm9jdXNlZENlbGxzLnNwbGljZShhLDEpLGwuY2VsbE5hdi5jbGVhckZvY3VzKCksITApOnQhPT11LmRpcmVjdGlvbi5SSUdIVHx8bi5jb2whPT1vWzBdfHxuLnJvdyE9PWkucm93fHxlLmtleUNvZGUhPT1jLmtleW1hcC5UQUJ8fGUuc2hpZnRLZXk/KHMuc2Nyb2xsVG9JZk5lY2Vzc2FyeShuLnJvdyxuLmNvbCkudGhlbihmdW5jdGlvbigpe2wuY2VsbE5hdi5icm9hZGNhc3RDZWxsTmF2KG4sbnVsbCxlKX0pLGUuc3RvcFByb3BhZ2F0aW9uKCksZS5wcmV2ZW50RGVmYXVsdCgpLCExKToocy5jZWxsTmF2LmZvY3VzZWRDZWxscy5zcGxpY2UoYSwxKSxsLmNlbGxOYXYuY2xlYXJGb2N1cygpLCEwKX19fSxwb3N0OmZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuLGcscD1pLmdyaWQsbz0hMDt0cnl7YW5ndWxhci5tb2R1bGUoIm5nQXJpYSIpfWNhdGNoKGUpe289ITF9byYmKG49JzxkaXYgaWQ9IicrcC5pZCsnLWFyaWEtc3BlYWthYmxlIiBjbGFzcz0idWktZ3JpZC1hMTF5LWFyaWFzY3JlZW5yZWFkZXItc3BlYWthYmxlIHVpLWdyaWQtb2Zmc2NyZWVuIiBhcmlhLWxpdmU9ImFzc2VydGl2ZSIgcm9sZT0iYWxlcnQiIGFyaWEtYXRvbWljPSJ0cnVlIiBhcmlhLWhpZGRlbj0iZmFsc2UiIGFyaWEtcmVsZXZhbnQ9ImFkZGl0aW9ucyIgPiZuYnNwOzwvZGl2PicsZz1hKG4pKGUpLHQucHJlcGVuZChnKSxlLiRvbih1LkNFTExfTkFWX0VWRU5ULGZ1bmN0aW9uKGUsdCxyLGkpe2lmKCFpfHwiZm9jdXMiIT09aS50eXBlKXtmb3IodmFyIG4sbyxhPVtdLGw9cC5hcGkuY2VsbE5hdi5nZXRDdXJyZW50U2VsZWN0aW9uKCkscz0wO3M8bC5sZW5ndGg7cysrKXt2YXIgZD0oInNlbGVjdGlvblJvd0hlYWRlckNvbCI9PT0obz1sW3NdKS5jb2wuZmllbGQ/by5yb3cuaXNTZWxlY3RlZD9mLmdldFNhZmVUZXh0KCJzZWFyY2guYXJpYS5zZWxlY3RlZCIpOmYuZ2V0U2FmZVRleHQoInNlYXJjaC5hcmlhLm5vdFNlbGVjdGVkIik6cC5nZXRDZWxsRGlzcGxheVZhbHVlKG8ucm93LG8uY29sKSkrKG49bFtzXS5jb2wsIiwgIitmLmdldFNhZmVUZXh0KCJoZWFkZXJDZWxsLmFyaWEuY29sdW1uIikrIiAiK24uZGlzcGxheU5hbWUpO2EucHVzaChkKX12YXIgdSxjPWEudG9TdHJpbmcoKTsodT1jKSE9PWcudGV4dCgpLnRyaW0oKSYmKGdbMF0uc3R5bGUuY2xpcD0icmVjdCgwcHgsMHB4LDBweCwwcHgpIixnWzBdLmlubmVySFRNTD0iIixnWzBdLnN0eWxlLnZpc2liaWxpdHk9ImhpZGRlbiIsZ1swXS5zdHlsZS52aXNpYmlsaXR5PSJ2aXNpYmxlIiwiIiE9PXUmJihnWzBdLnN0eWxlLmNsaXA9ImF1dG8iLGdbMF0uYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodSsiICIpKSxnWzBdLnN0eWxlLnZpc2liaWxpdHk9ImhpZGRlbiIsZ1swXS5zdHlsZS52aXNpYmlsaXR5PSJ2aXNpYmxlIikpfX0pKX19fX19XSksZS5kaXJlY3RpdmUoInVpR3JpZFJlbmRlckNvbnRhaW5lciIsWyIkdGltZW91dCIsIiRkb2N1bWVudCIsImdyaWRVdGlsIiwidWlHcmlkQ29uc3RhbnRzIiwidWlHcmlkQ2VsbE5hdlNlcnZpY2UiLCIkY29tcGlsZSIsInVpR3JpZENlbGxOYXZDb25zdGFudHMiLGZ1bmN0aW9uKGMsZSxnLHQscCxmLG0pe3JldHVybntyZXBsYWNlOiEwLHByaW9yaXR5Oi05OTk5OSxyZXF1aXJlOlsiXnVpR3JpZCIsInVpR3JpZFJlbmRlckNvbnRhaW5lciIsIj9edWlHcmlkQ2VsbG5hdiJdLHNjb3BlOiExLGNvbXBpbGU6ZnVuY3Rpb24oKXtyZXR1cm57cG9zdDpmdW5jdGlvbihlLHQscixpKXt2YXIgbj1pWzBdLG89aVsxXSxhPWlbMl07aWYobi5ncmlkLmFwaS5jZWxsTmF2KXt2YXIgbD1vLmNvbnRhaW5lcklkLHM9bi5ncmlkO2lmKHAuZGVjb3JhdGVSZW5kZXJDb250YWluZXJzKHMpLCJib2R5Ij09PWwpe24uZ3JpZC5vcHRpb25zLm1vZGlmaWVyS2V5c1RvTXVsdGlTZWxlY3RDZWxscz90LmF0dHIoImFyaWEtbXVsdGlzZWxlY3RhYmxlIiwhMCk6dC5hdHRyKCJhcmlhLW11bHRpc2VsZWN0YWJsZSIsITEpO3ZhciBkPWYoJzxkaXYgY2xhc3M9InVpLWdyaWQtZm9jdXNlciIgcm9sZT0icmVnaW9uIiBhcmlhLWxpdmU9ImFzc2VydGl2ZSIgYXJpYS1hdG9taWM9ImZhbHNlIiB0YWJpbmRleD0iMCIgYXJpYS1jb250cm9scz0iJytzLmlkKyItYXJpYS1zcGVha2FibGUgIitzLmlkKyctZ3JpZC1jb250YWluZXIiIGFyaWEtb3ducz0iJytzLmlkKyctZ3JpZC1jb250YWluZXIiPjwvZGl2PicpKGUpO3QuYXBwZW5kKGQpLGQub24oImZvY3VzIixmdW5jdGlvbihlKXtlLnVpR3JpZFRhcmdldFJlbmRlckNvbnRhaW5lcklkPWw7dmFyIHQ9bi5ncmlkLmFwaS5jZWxsTmF2LmdldEZvY3VzZWRDZWxsKCk7bnVsbD09PXQmJih0PW4uZ3JpZC5yZW5kZXJDb250YWluZXJzW2xdLmNlbGxOYXYuZ2V0TmV4dFJvd0NvbChtLmRpcmVjdGlvbi5ET1dOLG51bGwsbnVsbCkpLnJvdyYmdC5jb2wmJm4uY2VsbE5hdi5icm9hZGNhc3RDZWxsTmF2KHQpfSksYS5zZXRBcmlhQWN0aXZlZGVzY2VuZGFudD1mdW5jdGlvbihlKXt0LmF0dHIoImFyaWEtYWN0aXZlZGVzY2VuZGFudCIsZSl9LGEucmVtb3ZlQXJpYUFjdGl2ZWRlc2NlbmRhbnQ9ZnVuY3Rpb24oZSl7dC5hdHRyKCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnQiKT09PWUmJnQuYXR0cigiYXJpYS1hY3RpdmVkZXNjZW5kYW50IiwiIil9LG4uZm9jdXM9ZnVuY3Rpb24oKXtnLmZvY3VzLmJ5RWxlbWVudChkWzBdKX07dmFyIHU9bnVsbDtkLm9uKCJrZXlkb3duIixmdW5jdGlvbihyKXtyLnVpR3JpZFRhcmdldFJlbmRlckNvbnRhaW5lcklkPWw7dmFyIGU9bi5ncmlkLmFwaS5jZWxsTmF2LmdldEZvY3VzZWRDZWxsKCk7bnVsbD09PShuLmdyaWQub3B0aW9ucy5rZXlEb3duT3ZlcnJpZGVzLnNvbWUoZnVuY3Rpb24odCl7cmV0dXJuIE9iamVjdC5rZXlzKHQpLmV2ZXJ5KGZ1bmN0aW9uKGUpe3JldHVybiB0W2VdPT09cltlXX0pfSk/bnVsbDpuLmNlbGxOYXYuaGFuZGxlS2V5RG93bihyKSkmJihuLmdyaWQuYXBpLmNlbGxOYXYucmFpc2Uudmlld1BvcnRLZXlEb3duKHIsZSxuLmNlbGxOYXYuaGFuZGxlS2V5RG93biksdT1lKX0pLGQub24oImtleXByZXNzIixmdW5jdGlvbihlKXt1JiYoYyhmdW5jdGlvbigpe24uZ3JpZC5hcGkuY2VsbE5hdi5yYWlzZS52aWV3UG9ydEtleVByZXNzKGUsdSl9LDQpLHU9bnVsbCl9KSxlLiRvbigiJGRlc3Ryb3kiLGZ1bmN0aW9uKCl7ZC5vZmYoKX0pfX19fX19fV0pLGUuZGlyZWN0aXZlKCJ1aUdyaWRWaWV3cG9ydCIsWyIkdGltZW91dCIsIiRkb2N1bWVudCIsImdyaWRVdGlsIiwidWlHcmlkQ29uc3RhbnRzIiwidWlHcmlkQ2VsbE5hdlNlcnZpY2UiLCJ1aUdyaWRDZWxsTmF2Q29uc3RhbnRzIiwiJGxvZyIsIiRjb21waWxlIixmdW5jdGlvbihlLHQscixpLG4sbyxhLGwpe3JldHVybntyZXBsYWNlOiEwLHByaW9yaXR5Oi05OTk5OSxyZXF1aXJlOlsiXnVpR3JpZCIsIl51aUdyaWRSZW5kZXJDb250YWluZXIiLCI/XnVpR3JpZENlbGxuYXYiXSxzY29wZTohMSxjb21waWxlOmZ1bmN0aW9uKCl7cmV0dXJue3ByZTpmdW5jdGlvbihlLHQscixpKXt9LHBvc3Q6ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG49aVswXSxvPWlbMV07aWYobi5ncmlkLmFwaS5jZWxsTmF2JiYiYm9keSI9PT1vLmNvbnRhaW5lcklkKXt2YXIgYT1uLmdyaWQ7YS5hcGkuY29yZS5vbi5zY3JvbGxCZWdpbihlLGZ1bmN0aW9uKGUpe3ZhciB0PW4uZ3JpZC5hcGkuY2VsbE5hdi5nZXRGb2N1c2VkQ2VsbCgpO251bGwhPT10JiZvLmNvbENvbnRhaW5lci5jb250YWluc0NvbHVtbih0LmNvbCkmJm4uY2VsbE5hdi5jbGVhckZvY3VzKCl9KSxhLmFwaS5jb3JlLm9uLnNjcm9sbEVuZChlLGZ1bmN0aW9uKGUpe3ZhciB0PW4uZ3JpZC5hcGkuY2VsbE5hdi5nZXRGb2N1c2VkQ2VsbCgpO251bGwhPT10JiZvLmNvbENvbnRhaW5lci5jb250YWluc0NvbHVtbih0LmNvbCkmJm4uY2VsbE5hdi5icm9hZGNhc3RDZWxsTmF2KHQpfSksYS5hcGkuY2VsbE5hdi5vbi5uYXZpZ2F0ZShlLGZ1bmN0aW9uKCl7bi5mb2N1cygpfSl9fX19fX1dKSxlLmRpcmVjdGl2ZSgidWlHcmlkQ2VsbCIsWyIkdGltZW91dCIsIiRkb2N1bWVudCIsInVpR3JpZENlbGxOYXZTZXJ2aWNlIiwiZ3JpZFV0aWwiLCJ1aUdyaWRDZWxsTmF2Q29uc3RhbnRzIiwidWlHcmlkQ29uc3RhbnRzIiwiR3JpZFJvd0NvbHVtbiIsZnVuY3Rpb24oZSx0LHIsaSxjLGcscCl7cmV0dXJue3ByaW9yaXR5Oi0xNTAscmVzdHJpY3Q6IkEiLHJlcXVpcmU6WyJedWlHcmlkIiwiP151aUdyaWRDZWxsbmF2Il0sc2NvcGU6ITEsbGluazpmdW5jdGlvbihyLHQsZSxpKXt2YXIgbj1pWzBdLG89aVsxXTtpZihuLmdyaWQuYXBpLmNlbGxOYXYmJnIuY29sLmNvbERlZi5hbGxvd0NlbGxGb2N1cyl7dmFyIGE9bi5ncmlkO3IuZm9jdXNlZD0hMSx0LmF0dHIoInRhYmluZGV4IiwtMSksdC5maW5kKCJkaXYiKS5vbigiY2xpY2siLGZ1bmN0aW9uKGUpe24uY2VsbE5hdi5icm9hZGNhc3RDZWxsTmF2KG5ldyBwKHIucm93LHIuY29sKSxlLmN0cmxLZXl8fGUubWV0YUtleSxlKSxlLnN0b3BQcm9wYWdhdGlvbigpLHIuJGFwcGx5KCl9KSx0Lm9uKCJtb3VzZWRvd24iLHMpLG4uZ3JpZC5hcGkuZWRpdCYmKG4uZ3JpZC5hcGkuZWRpdC5vbi5iZWdpbkNlbGxFZGl0KHIsZnVuY3Rpb24oKXt0Lm9mZigibW91c2Vkb3duIixzKX0pLG4uZ3JpZC5hcGkuZWRpdC5vbi5hZnRlckNlbGxFZGl0KHIsZnVuY3Rpb24oKXt0Lm9uKCJtb3VzZWRvd24iLHMpfSksbi5ncmlkLmFwaS5lZGl0Lm9uLmNhbmNlbENlbGxFZGl0KHIsZnVuY3Rpb24oKXt0Lm9uKCJtb3VzZWRvd24iLHMpfSkpLGQoKSx0Lm9uKCJmb2N1cyIsZnVuY3Rpb24oZSl7bi5jZWxsTmF2LmJyb2FkY2FzdENlbGxOYXYobmV3IHAoci5yb3csci5jb2wpLCExLGUpLGUuc3RvcFByb3BhZ2F0aW9uKCksci4kYXBwbHkoKX0pLHIuJG9uKGMuQ0VMTF9OQVZfRVZFTlQsZCk7dmFyIGw9bi5ncmlkLnJlZ2lzdGVyRGF0YUNoYW5nZUNhbGxiYWNrKGZ1bmN0aW9uKGUpe3UoKSxyLiRhcHBseUFzeW5jKGQpfSxbZy5kYXRhQ2hhbmdlLlJPV10pO3IuJG9uKCIkZGVzdHJveSIsZnVuY3Rpb24oKXtsKCksdC5maW5kKCJkaXYiKS5vZmYoKSx0Lm9mZigpfSl9ZnVuY3Rpb24gcyhlKXtlLnByZXZlbnREZWZhdWx0KCl9ZnVuY3Rpb24gZCgpe2EuY2VsbE5hdi5mb2N1c2VkQ2VsbHMuc29tZShmdW5jdGlvbihlLHQpe3JldHVybiBlLnJvdz09PXIucm93JiZlLmNvbD09PXIuY29sfSk/ZnVuY3Rpb24oKXtpZighci5mb2N1c2VkKXt2YXIgZT10LmZpbmQoImRpdiIpO2UuYWRkQ2xhc3MoInVpLWdyaWQtY2VsbC1mb2N1cyIpLHQuYXR0cigiYXJpYS1zZWxlY3RlZCIsITApLG8uc2V0QXJpYUFjdGl2ZWRlc2NlbmRhbnQodC5hdHRyKCJpZCIpKSxyLmZvY3VzZWQ9ITB9fSgpOnUoKX1mdW5jdGlvbiB1KCl7ci5mb2N1c2VkJiYodC5maW5kKCJkaXYiKS5yZW1vdmVDbGFzcygidWktZ3JpZC1jZWxsLWZvY3VzIiksdC5hdHRyKCJhcmlhLXNlbGVjdGVkIiwhMSksby5yZW1vdmVBcmlhQWN0aXZlZGVzY2VuZGFudCh0LmF0dHIoImlkIikpLHIuZm9jdXNlZD0hMSl9fX19XSl9KCksZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7dmFyIGU9YW5ndWxhci5tb2R1bGUoInVpLmdyaWQuZWRpdCIsWyJ1aS5ncmlkIl0pO2UuY29uc3RhbnQoInVpR3JpZEVkaXRDb25zdGFudHMiLHtFRElUQUJMRV9DRUxMX1RFTVBMQVRFOi9FRElUQUJMRV9DRUxMX1RFTVBMQVRFL2csRURJVEFCTEVfQ0VMTF9ESVJFQ1RJVkU6L2VkaXRhYmxlX2NlbGxfZGlyZWN0aXZlL2csZXZlbnRzOntCRUdJTl9DRUxMX0VESVQ6InVpR3JpZEV2ZW50QmVnaW5DZWxsRWRpdCIsRU5EX0NFTExfRURJVDoidWlHcmlkRXZlbnRFbmRDZWxsRWRpdCIsQ0FOQ0VMX0NFTExfRURJVDoidWlHcmlkRXZlbnRDYW5jZWxDZWxsRWRpdCJ9fSksZS5zZXJ2aWNlKCJ1aUdyaWRFZGl0U2VydmljZSIsWyIkcSIsInVpR3JpZENvbnN0YW50cyIsImdyaWRVdGlsIixmdW5jdGlvbihuLHQsbyl7dmFyIHI9e2luaXRpYWxpemVHcmlkOmZ1bmN0aW9uKGUpe3IuZGVmYXVsdEdyaWRPcHRpb25zKGUub3B0aW9ucyksZS5yZWdpc3RlckNvbHVtbkJ1aWxkZXIoci5lZGl0Q29sdW1uQnVpbGRlciksZS5lZGl0PXt9O2UuYXBpLnJlZ2lzdGVyRXZlbnRzRnJvbU9iamVjdCh7ZWRpdDp7YWZ0ZXJDZWxsRWRpdDpmdW5jdGlvbihlLHQscixpKXt9LGJlZ2luQ2VsbEVkaXQ6ZnVuY3Rpb24oZSx0LHIpe30sY2FuY2VsQ2VsbEVkaXQ6ZnVuY3Rpb24oZSx0KXt9fX0pfSxkZWZhdWx0R3JpZE9wdGlvbnM6ZnVuY3Rpb24oZSl7ZS5jZWxsRWRpdGFibGVDb25kaXRpb249dm9pZCAwPT09ZS5jZWxsRWRpdGFibGVDb25kaXRpb258fGUuY2VsbEVkaXRhYmxlQ29uZGl0aW9uLGUuZW5hYmxlQ2VsbEVkaXRPbkZvY3VzPXZvaWQgMCE9PWUuZW5hYmxlQ2VsbEVkaXRPbkZvY3VzJiZlLmVuYWJsZUNlbGxFZGl0T25Gb2N1c30sZWRpdENvbHVtbkJ1aWxkZXI6ZnVuY3Rpb24odCxyLGUpe3ZhciBpPVtdO3JldHVybiB0LmVuYWJsZUNlbGxFZGl0PXZvaWQgMD09PXQuZW5hYmxlQ2VsbEVkaXQ/dm9pZCAwPT09ZS5lbmFibGVDZWxsRWRpdD8ib2JqZWN0IiE9PXQudHlwZTplLmVuYWJsZUNlbGxFZGl0OnQuZW5hYmxlQ2VsbEVkaXQsdC5jZWxsRWRpdGFibGVDb25kaXRpb249dm9pZCAwPT09dC5jZWxsRWRpdGFibGVDb25kaXRpb24/ZS5jZWxsRWRpdGFibGVDb25kaXRpb246dC5jZWxsRWRpdGFibGVDb25kaXRpb24sdC5lbmFibGVDZWxsRWRpdCYmKHQuZWRpdGFibGVDZWxsVGVtcGxhdGU9dC5lZGl0YWJsZUNlbGxUZW1wbGF0ZXx8ZS5lZGl0YWJsZUNlbGxUZW1wbGF0ZXx8InVpLWdyaWQvY2VsbEVkaXRvciIsaS5wdXNoKG8uZ2V0VGVtcGxhdGUodC5lZGl0YWJsZUNlbGxUZW1wbGF0ZSkudGhlbihmdW5jdGlvbihlKXtyLmVkaXRhYmxlQ2VsbFRlbXBsYXRlPWV9LGZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcigiQ291bGRuJ3QgZmV0Y2gvdXNlIGNvbERlZi5lZGl0YWJsZUNlbGxUZW1wbGF0ZSAnIit0LmVkaXRhYmxlQ2VsbFRlbXBsYXRlKyInIil9KSkpLHQuZW5hYmxlQ2VsbEVkaXRPbkZvY3VzPXZvaWQgMD09PXQuZW5hYmxlQ2VsbEVkaXRPbkZvY3VzP2UuZW5hYmxlQ2VsbEVkaXRPbkZvY3VzOnQuZW5hYmxlQ2VsbEVkaXRPbkZvY3VzLG4uYWxsKGkpfSxpc1N0YXJ0RWRpdEtleTpmdW5jdGlvbihlKXtyZXR1cm4hKGUubWV0YUtleXx8ZS5rZXlDb2RlPT09dC5rZXltYXAuRVNDfHxlLmtleUNvZGU9PT10LmtleW1hcC5TSElGVHx8ZS5rZXlDb2RlPT09dC5rZXltYXAuQ1RSTHx8ZS5rZXlDb2RlPT09dC5rZXltYXAuQUxUfHxlLmtleUNvZGU9PT10LmtleW1hcC5XSU58fGUua2V5Q29kZT09PXQua2V5bWFwLkNBUFNMT0NLfHxlLmtleUNvZGU9PT10LmtleW1hcC5MRUZUfHxlLmtleUNvZGU9PT10LmtleW1hcC5UQUImJmUuc2hpZnRLZXl8fGUua2V5Q29kZT09PXQua2V5bWFwLlJJR0hUfHxlLmtleUNvZGU9PT10LmtleW1hcC5UQUJ8fGUua2V5Q29kZT09PXQua2V5bWFwLlVQfHxlLmtleUNvZGU9PT10LmtleW1hcC5FTlRFUiYmZS5zaGlmdEtleXx8ZS5rZXlDb2RlPT09dC5rZXltYXAuRE9XTnx8ZS5rZXlDb2RlPT09dC5rZXltYXAuRU5URVIpfX07cmV0dXJuIHJ9XSksZS5kaXJlY3RpdmUoInVpR3JpZEVkaXQiLFsiZ3JpZFV0aWwiLCJ1aUdyaWRFZGl0U2VydmljZSIsZnVuY3Rpb24oZSxuKXtyZXR1cm57cmVwbGFjZTohMCxwcmlvcml0eTowLHJlcXVpcmU6Il51aUdyaWQiLHNjb3BlOiExLGNvbXBpbGU6ZnVuY3Rpb24oKXtyZXR1cm57cHJlOmZ1bmN0aW9uKGUsdCxyLGkpe24uaW5pdGlhbGl6ZUdyaWQoaS5ncmlkKX0scG9zdDpmdW5jdGlvbihlLHQscixpKXt9fX19fV0pLGUuZGlyZWN0aXZlKCJ1aUdyaWRWaWV3cG9ydCIsWyJ1aUdyaWRFZGl0Q29uc3RhbnRzIixmdW5jdGlvbihvKXtyZXR1cm57cmVwbGFjZTohMCxwcmlvcml0eTotOTk5OTgscmVxdWlyZTpbIl51aUdyaWQiLCJedWlHcmlkUmVuZGVyQ29udGFpbmVyIl0sc2NvcGU6ITEsY29tcGlsZTpmdW5jdGlvbigpe3JldHVybntwb3N0OmZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuPWlbMF07bi5ncmlkLmFwaS5lZGl0JiZuLmdyaWQuYXBpLmNlbGxOYXYmJigiYm9keSI9PT1pWzFdLmNvbnRhaW5lcklkJiYoZS4kb24oby5ldmVudHMuQ0FOQ0VMX0NFTExfRURJVCxmdW5jdGlvbigpe24uZm9jdXMoKX0pLGUuJG9uKG8uZXZlbnRzLkVORF9DRUxMX0VESVQsZnVuY3Rpb24oKXtuLmZvY3VzKCl9KSkpfX19fX1dKSxlLmRpcmVjdGl2ZSgidWlHcmlkQ2VsbCIsWyIkY29tcGlsZSIsIiRpbmplY3RvciIsIiR0aW1lb3V0IiwidWlHcmlkQ29uc3RhbnRzIiwidWlHcmlkRWRpdENvbnN0YW50cyIsImdyaWRVdGlsIiwiJHBhcnNlIiwidWlHcmlkRWRpdFNlcnZpY2UiLCIkcm9vdFNjb3BlIiwiJHEiLGZ1bmN0aW9uKFMsZSx4LEUsQSxSLFQsZyxGLFApe3ZhciBEPTUwMDtpZihlLmhhcygidWlHcmlkQ2VsbE5hdlNlcnZpY2UiKSllLmdldCgidWlHcmlkQ2VsbE5hdlNlcnZpY2UiKTtyZXR1cm57cHJpb3JpdHk6LTEwMCxyZXN0cmljdDoiQSIsc2NvcGU6ITEscmVxdWlyZToiP151aUdyaWQiLGxpbms6ZnVuY3Rpb24ocCxmLGUsaSl7dmFyIG0saCx2LHQsQyx3PSExO2lmKHAuY29sLmNvbERlZi5lbmFibGVDZWxsRWRpdCl7dmFyIHI9ZnVuY3Rpb24oKXt9LG49ZnVuY3Rpb24oKXt9LG89ZnVuY3Rpb24oKXtwLmNvbC5jb2xEZWYuZW5hYmxlQ2VsbEVkaXQmJiExIT09cC5yb3cuZW5hYmxlQ2VsbEVkaXQ/cC5iZWdpbkVkaXRFdmVudHNXaXJlZHx8bCgpOnAuYmVnaW5FZGl0RXZlbnRzV2lyZWQmJmIoKX07bygpO3ZhciBhPXAuJHdhdGNoKCJyb3ciLGZ1bmN0aW9uKGUsdCl7ZSE9PXQmJm8oKX0pO3AuJG9uKCIkZGVzdHJveSIsZnVuY3Rpb24oKXthKCksZi5vZmYoKX0pfWZ1bmN0aW9uIGwoKXtmLm9uKCJkYmxjbGljayIsYyksZi5vbigidG91Y2hzdGFydCIscyksaSYmaS5ncmlkLmFwaS5jZWxsTmF2JiYobj1pLmdyaWQuYXBpLmNlbGxOYXYub24udmlld1BvcnRLZXlEb3duKHAsZnVuY3Rpb24oZSx0KXtudWxsIT09dCYmKHQucm93IT09cC5yb3d8fHQuY29sIT09cC5jb2x8fHAuY29sLmNvbERlZi5lbmFibGVDZWxsRWRpdE9uRm9jdXN8fHUoZSkpfSkscj1pLmdyaWQuYXBpLmNlbGxOYXYub24ubmF2aWdhdGUocCxmdW5jdGlvbihlLHQscil7cC5jb2wuY29sRGVmLmVuYWJsZUNlbGxFZGl0T25Gb2N1cyYmKGUucm93IT09cC5yb3d8fGUuY29sIT09cC5jb2x8fG51bGwhPT1yJiYoIXJ8fCJjbGljayIhPT1yLnR5cGUmJiJrZXlkb3duIiE9PXIudHlwZSl8fHgoZnVuY3Rpb24oKXtjKHIpfSkpfSkpLHAuYmVnaW5FZGl0RXZlbnRzV2lyZWQ9ITB9ZnVuY3Rpb24gcyhlKXt2b2lkIDAhPT1lLm9yaWdpbmFsRXZlbnQmJnZvaWQgMCE9PWUub3JpZ2luYWxFdmVudCYmKGU9ZS5vcmlnaW5hbEV2ZW50KSxmLm9uKCJ0b3VjaGVuZCIsZCksKHQ9eChmdW5jdGlvbigpe30sRCkpLnRoZW4oZnVuY3Rpb24oKXtzZXRUaW1lb3V0KGMsMCksZi5vZmYoInRvdWNoZW5kIixkKX0pfWZ1bmN0aW9uIGQoZSl7eC5jYW5jZWwodCksZi5vZmYoInRvdWNoZW5kIixkKX1mdW5jdGlvbiBiKCl7Zi5vZmYoImRibGNsaWNrIixjKSxmLm9mZigia2V5ZG93biIsdSksZi5vZmYoInRvdWNoc3RhcnQiLHMpLHIoKSxuKCkscC5iZWdpbkVkaXRFdmVudHNXaXJlZD0hMX1mdW5jdGlvbiB1KGUpe2cuaXNTdGFydEVkaXRLZXkoZSkmJmMoZSl9ZnVuY3Rpb24gYyhlKXtwLmdyaWQuYXBpLmNvcmUuc2Nyb2xsVG9JZk5lY2Vzc2FyeShwLnJvdyxwLmNvbCkudGhlbihmdW5jdGlvbigpeyFmdW5jdGlvbihlKXtpZih3KXJldHVybjtpZih0PXAuY29sLHI9cC5yb3csaT1lLHIuaXNTYXZpbmd8fChhbmd1bGFyLmlzRnVuY3Rpb24odC5jb2xEZWYuY2VsbEVkaXRhYmxlQ29uZGl0aW9uKT8hdC5jb2xEZWYuY2VsbEVkaXRhYmxlQ29uZGl0aW9uKHAsaSk6IXQuY29sRGVmLmNlbGxFZGl0YWJsZUNvbmRpdGlvbikpcmV0dXJuO3ZhciB0LHIsaTt2YXIgbj1wLnJvdy5nZXRRdWFsaWZpZWRDb2xGaWVsZChwLmNvbCk7cC5jb2wuY29sRGVmLmVkaXRNb2RlbEZpZWxkJiYobj1SLnByZUV2YWwoInJvdy5lbnRpdHkuIitwLmNvbC5jb2xEZWYuZWRpdE1vZGVsRmllbGQpKTt2PVQobiksaD12KHApLG09KG09KG09cC5jb2wuZWRpdGFibGVDZWxsVGVtcGxhdGUpLnJlcGxhY2UoRS5NT0RFTF9DT0xfRklFTEQsbikpLnJlcGxhY2UoRS5DT0xfRklFTEQsImdyaWQuZ2V0Q2VsbFZhbHVlKHJvdywgY29sKSIpO3ZhciBvPXAuY29sLmNvbERlZi5lZGl0RHJvcGRvd25GaWx0ZXI/InwiK3AuY29sLmNvbERlZi5lZGl0RHJvcGRvd25GaWx0ZXI6IiI7bT1tLnJlcGxhY2UoRS5DVVNUT01fRklMVEVSUyxvKTt2YXIgYT0idGV4dCI7c3dpdGNoKHAuY29sLmNvbERlZi50eXBlKXtjYXNlImJvb2xlYW4iOmE9ImNoZWNrYm94IjticmVhaztjYXNlIm51bWJlciI6YT0ibnVtYmVyIjticmVhaztjYXNlImRhdGUiOmE9ImRhdGUifW09bS5yZXBsYWNlKCJJTlBVVF9UWVBFIixhKTt2YXIgbD1wLmNvbC5jb2xEZWYuZWRpdERyb3Bkb3duT3B0aW9uc0Z1bmN0aW9uO2lmKGwpUC53aGVuKGwocC5yb3cuZW50aXR5LHAuY29sLmNvbERlZikpLnRoZW4oZnVuY3Rpb24oZSl7cC5lZGl0RHJvcGRvd25PcHRpb25zQXJyYXk9ZX0pO2Vsc2V7dmFyIHM9cC5jb2wuY29sRGVmLmVkaXREcm9wZG93blJvd0VudGl0eU9wdGlvbnNBcnJheVBhdGg7cC5lZGl0RHJvcGRvd25PcHRpb25zQXJyYXk9cz9mdW5jdGlvbihlLHQpe3ZhciByPSh0PSh0PXQucmVwbGFjZSgvXFsoXHcrKVxdL2csIi4kMSIpKS5yZXBsYWNlKC9eXC4vLCIiKSkuc3BsaXQoIi4iKTtmb3IoO3IubGVuZ3RoOyl7dmFyIGk9ci5zaGlmdCgpO2lmKCEoaSBpbiBlKSlyZXR1cm47ZT1lW2ldfXJldHVybiBlfShwLnJvdy5lbnRpdHkscyk6cC5jb2wuY29sRGVmLmVkaXREcm9wZG93bk9wdGlvbnNBcnJheX1wLmVkaXREcm9wZG93bklkTGFiZWw9cC5jb2wuY29sRGVmLmVkaXREcm9wZG93bklkTGFiZWw/cC5jb2wuY29sRGVmLmVkaXREcm9wZG93bklkTGFiZWw6ImlkIixwLmVkaXREcm9wZG93blZhbHVlTGFiZWw9cC5jb2wuY29sRGVmLmVkaXREcm9wZG93blZhbHVlTGFiZWw/cC5jb2wuY29sRGVmLmVkaXREcm9wZG93blZhbHVlTGFiZWw6InZhbHVlIjt2YXIgZD1mdW5jdGlvbigpe3c9ITAsYigpO3ZhciBlPWFuZ3VsYXIuZWxlbWVudChtKTtmLmFwcGVuZChlKSxDPXAuJG5ldygpLFMoZSkoQyk7dmFyIHQ9YW5ndWxhci5lbGVtZW50KGYuY2hpbGRyZW4oKVswXSk7dC5hZGRDbGFzcygidWktZ3JpZC1jZWxsLWNvbnRlbnRzLWhpZGRlbiIpfTtGLiQkcGhhc2U/ZCgpOnAuJGFwcGx5KGQpO3ZhciB1PXAuY29sLmdyaWQuYXBpLmNvcmUub24uc2Nyb2xsQmVnaW4ocCxmdW5jdGlvbigpe3AuZ3JpZC5kaXNhYmxlU2Nyb2xsaW5nfHwoeSgpLHAuZ3JpZC5hcGkuZWRpdC5yYWlzZS5hZnRlckNlbGxFZGl0KHAucm93LmVudGl0eSxwLmNvbC5jb2xEZWYsdihwKSxoKSx1KCksYygpLGcoKSl9KSxjPXAuJG9uKEEuZXZlbnRzLkVORF9DRUxMX0VESVQsZnVuY3Rpb24oKXt5KCkscC5ncmlkLmFwaS5lZGl0LnJhaXNlLmFmdGVyQ2VsbEVkaXQocC5yb3cuZW50aXR5LHAuY29sLmNvbERlZix2KHApLGgpLGMoKSx1KCksZygpfSksZz1wLiRvbihBLmV2ZW50cy5DQU5DRUxfQ0VMTF9FRElULGZ1bmN0aW9uKCl7IWZ1bmN0aW9uKCl7aWYocC5ncmlkLmRpc2FibGVTY3JvbGxpbmc9ITEsIXcpcmV0dXJuO3YuYXNzaWduKHAsaCkscC4kYXBwbHkoKSxwLmdyaWQuYXBpLmVkaXQucmFpc2UuY2FuY2VsQ2VsbEVkaXQocC5yb3cuZW50aXR5LHAuY29sLmNvbERlZikseSgpfSgpLGcoKSx1KCksYygpfSk7cC4kYnJvYWRjYXN0KEEuZXZlbnRzLkJFR0lOX0NFTExfRURJVCxlKSx4KGZ1bmN0aW9uKCl7cC5ncmlkLmFwaS5lZGl0LnJhaXNlLmJlZ2luQ2VsbEVkaXQocC5yb3cuZW50aXR5LHAuY29sLmNvbERlZixlKX0pfShlKX0pfWZ1bmN0aW9uIHkoKXtpZihwLmdyaWQuZGlzYWJsZVNjcm9sbGluZz0hMSx3KXtpJiZpLmdyaWQuYXBpLmNlbGxOYXYmJmkuZm9jdXMoKTt2YXIgZT1hbmd1bGFyLmVsZW1lbnQoZi5jaGlsZHJlbigpWzBdKTtDLiRkZXN0cm95KCk7Zm9yKHZhciB0PWYuY2hpbGRyZW4oKSxyPTE7cjx0Lmxlbmd0aDtyKyspYW5ndWxhci5lbGVtZW50KHRbcl0pLnJlbW92ZSgpO2UucmVtb3ZlQ2xhc3MoInVpLWdyaWQtY2VsbC1jb250ZW50cy1oaWRkZW4iKSx3PSExLGwoKSxwLmdyaWQuYXBpLmNvcmUubm90aWZ5RGF0YUNoYW5nZShFLmRhdGFDaGFuZ2UuRURJVCl9fX19fV0pLGUuZGlyZWN0aXZlKCJ1aUdyaWRFZGl0b3IiLFsiZ3JpZFV0aWwiLCJ1aUdyaWRDb25zdGFudHMiLCJ1aUdyaWRFZGl0Q29uc3RhbnRzIiwiJHRpbWVvdXQiLCJ1aUdyaWRFZGl0U2VydmljZSIsZnVuY3Rpb24oZSxsLHMsZCx1KXtyZXR1cm57c2NvcGU6ITAscmVxdWlyZTpbIj9edWlHcmlkIiwiP151aUdyaWRSZW5kZXJDb250YWluZXIiLCJuZ01vZGVsIl0sY29tcGlsZTpmdW5jdGlvbigpe3JldHVybntwcmU6ZnVuY3Rpb24oZSx0LHIpe30scG9zdDpmdW5jdGlvbihyLG4sZSx0KXt2YXIgbyxpLGE7dFswXSYmKG89dFswXSksdFsxXSYmKGk9dFsxXSksdFsyXSYmKGE9dFsyXSksci4kb24ocy5ldmVudHMuQkVHSU5fQ0VMTF9FRElULGZ1bmN0aW9uKGUsdCl7aWYoZChmdW5jdGlvbigpe2lmKG5bMF0uZm9jdXMoKSwhblswXS5zZWxlY3R8fCFyLmNvbC5jb2xEZWYuZW5hYmxlQ2VsbEVkaXRPbkZvY3VzJiZvJiZvLmdyaWQuYXBpLmNlbGxOYXYpdHJ5e25bMF0uc2V0U2VsZWN0aW9uUmFuZ2UoblswXS52YWx1ZS5sZW5ndGgsblswXS52YWx1ZS5sZW5ndGgpfWNhdGNoKGUpe31lbHNlIG5bMF0uc2VsZWN0KCl9KSxvJiZvLmdyaWQuYXBpLmNlbGxOYXYpdmFyIGk9by5ncmlkLmFwaS5jZWxsTmF2Lm9uLnZpZXdQb3J0S2V5UHJlc3MocixmdW5jdGlvbihlLHQpe2lmKHUuaXNTdGFydEVkaXRLZXkoZSkpe3ZhciByPSJudW1iZXIiPT10eXBlb2YgZS53aGljaD9lLndoaWNoOmUua2V5Q29kZTswPHImJihhLiRzZXRWaWV3VmFsdWUoU3RyaW5nLmZyb21DaGFyQ29kZShyKSxlKSxhLiRyZW5kZXIoKSl9aSgpfSk7bi5vbigibW91c2Vkb3duIixmdW5jdGlvbihlKXsiY2hlY2tib3giPT09blswXS50eXBlJiYobi5vZmYoImJsdXIiLHIuc3RvcEVkaXQpLGQoZnVuY3Rpb24oKXtuWzBdLmZvY3VzKCksbi5vbigiYmx1ciIsci5zdG9wRWRpdCl9KSl9KSxuLm9uKCJibHVyIixyLnN0b3BFZGl0KX0pLHIuZGVlcEVkaXQ9ITEsci5zdG9wRWRpdD1mdW5jdGlvbihlKXtyLmlucHV0Rm9ybSYmIXIuaW5wdXRGb3JtLiR2YWxpZD8oZS5zdG9wUHJvcGFnYXRpb24oKSxyLiRlbWl0KHMuZXZlbnRzLkNBTkNFTF9DRUxMX0VESVQpKTpyLiRlbWl0KHMuZXZlbnRzLkVORF9DRUxMX0VESVQpLHIuZGVlcEVkaXQ9ITF9LG4ub24oImNsaWNrIixmdW5jdGlvbihlKXsiY2hlY2tib3giIT09blswXS50eXBlJiYoci5kZWVwRWRpdD0hMCxyLiRhcHBseUFzeW5jKGZ1bmN0aW9uKCl7ci5ncmlkLmRpc2FibGVTY3JvbGxpbmc9ITB9KSl9KSxuLm9uKCJrZXlkb3duIixmdW5jdGlvbihlKXtzd2l0Y2goZS5rZXlDb2RlKXtjYXNlIGwua2V5bWFwLkVTQzplLnN0b3BQcm9wYWdhdGlvbigpLHIuJGVtaXQocy5ldmVudHMuQ0FOQ0VMX0NFTExfRURJVCl9aWYoIXIuZGVlcEVkaXR8fGUua2V5Q29kZSE9PWwua2V5bWFwLkxFRlQmJmUua2V5Q29kZSE9PWwua2V5bWFwLlJJR0hUJiZlLmtleUNvZGUhPT1sLmtleW1hcC5VUCYmZS5rZXlDb2RlIT09bC5rZXltYXAuRE9XTilpZihvJiZvLmdyaWQuYXBpLmNlbGxOYXYpZS51aUdyaWRUYXJnZXRSZW5kZXJDb250YWluZXJJZD1pLmNvbnRhaW5lcklkLG51bGwhPT1vLmNlbGxOYXYuaGFuZGxlS2V5RG93bihlKSYmci5zdG9wRWRpdChlKTtlbHNlIHN3aXRjaChlLmtleUNvZGUpe2Nhc2UgbC5rZXltYXAuRU5URVI6Y2FzZSBsLmtleW1hcC5UQUI6ZS5zdG9wUHJvcGFnYXRpb24oKSxlLnByZXZlbnREZWZhdWx0KCksci5zdG9wRWRpdChlKX1lbHNlIGUuc3RvcFByb3BhZ2F0aW9uKCk7cmV0dXJuITB9KSxyLiRvbigiJGRlc3Ryb3kiLGZ1bmN0aW9uKCl7bi5vZmYoKX0pfX19fX1dKSxlLmRpcmVjdGl2ZSgidWlHcmlkRWRpdG9yIixbIiRmaWx0ZXIiLGZ1bmN0aW9uKG4pe3JldHVybntwcmlvcml0eTotMTAwLHJlcXVpcmU6Ij9uZ01vZGVsIixsaW5rOmZ1bmN0aW9uKGUsdCxyLGkpezI9PT1hbmd1bGFyLnZlcnNpb24ubWlub3ImJnIudHlwZSYmImRhdGUiPT09ci50eXBlJiZpJiYoaS4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKGUpe3JldHVybiBpLiRzZXRWYWxpZGl0eShudWxsLCFlfHwhaXNOYU4oZS5nZXRUaW1lKCkpKSxuKCJkYXRlIikoZSwieXl5eS1NTS1kZCIpfSksaS4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKGUpe2lmKGUmJjA8ZS5sZW5ndGgpe3ZhciB0PWZ1bmN0aW9uKGUpe2lmKHZvaWQgMD09PWV8fCIiPT09ZSlyZXR1cm4gbnVsbDt2YXIgdD1lLnNwbGl0KCItIik7aWYoMyE9PXQubGVuZ3RoKXJldHVybiBudWxsO3ZhciByPXBhcnNlSW50KHRbMF0sMTApLGk9cGFyc2VJbnQodFsxXSwxMCksbj1wYXJzZUludCh0WzJdLDEwKTtyZXR1cm4gaTwxfHxyPDF8fG48MT9udWxsOm5ldyBEYXRlKHIsaS0xLG4pfShlKTtyZXR1cm4gaS4kc2V0VmFsaWRpdHkobnVsbCx0JiYhaXNOYU4odC5nZXRUaW1lKCkpKSx0fXJldHVybiBpLiRzZXRWYWxpZGl0eShudWxsLCEwKSxudWxsfSkpfX19XSksZS5kaXJlY3RpdmUoInVpR3JpZEVkaXREcm9wZG93biIsWyJ1aUdyaWRDb25zdGFudHMiLCJ1aUdyaWRFZGl0Q29uc3RhbnRzIiwiJHRpbWVvdXQiLGZ1bmN0aW9uKGEsbCxzKXtyZXR1cm57cmVxdWlyZTpbIj9edWlHcmlkIiwiP151aUdyaWRSZW5kZXJDb250YWluZXIiXSxzY29wZTohMCxjb21waWxlOmZ1bmN0aW9uKCl7cmV0dXJue3ByZTpmdW5jdGlvbihlLHQscil7fSxwb3N0OmZ1bmN0aW9uKHQsZSxyLGkpe3ZhciBuPWlbMF0sbz1pWzFdO3QuJG9uKGwuZXZlbnRzLkJFR0lOX0NFTExfRURJVCxmdW5jdGlvbigpe3MoZnVuY3Rpb24oKXtlWzBdLmZvY3VzKCl9KSxlWzBdLnN0eWxlLndpZHRoPWVbMF0ucGFyZW50RWxlbWVudC5vZmZzZXRXaWR0aC0xKyJweCIsZS5vbigiYmx1ciIsZnVuY3Rpb24oZSl7dC5zdG9wRWRpdChlKX0pfSksdC5zdG9wRWRpdD1mdW5jdGlvbihlKXt0LiRlbWl0KGwuZXZlbnRzLkVORF9DRUxMX0VESVQpfSxlLm9uKCJrZXlkb3duIixmdW5jdGlvbihlKXtzd2l0Y2goZS5rZXlDb2RlKXtjYXNlIGEua2V5bWFwLkVTQzplLnN0b3BQcm9wYWdhdGlvbigpLHQuJGVtaXQobC5ldmVudHMuQ0FOQ0VMX0NFTExfRURJVCl9aWYobiYmbi5ncmlkLmFwaS5jZWxsTmF2KWUudWlHcmlkVGFyZ2V0UmVuZGVyQ29udGFpbmVySWQ9by5jb250YWluZXJJZCxudWxsIT09bi5jZWxsTmF2LmhhbmRsZUtleURvd24oZSkmJnQuc3RvcEVkaXQoZSk7ZWxzZSBzd2l0Y2goZS5rZXlDb2RlKXtjYXNlIGEua2V5bWFwLkVOVEVSOmNhc2UgYS5rZXltYXAuVEFCOmUuc3RvcFByb3BhZ2F0aW9uKCksZS5wcmV2ZW50RGVmYXVsdCgpLHQuc3RvcEVkaXQoZSl9cmV0dXJuITB9KSx0LiRvbigiJGRlc3Ryb3kiLGZ1bmN0aW9uKCl7ZS5vZmYoKX0pfX19fX1dKSxlLmRpcmVjdGl2ZSgidWlHcmlkRWRpdEZpbGVDaG9vc2VyIixbImdyaWRVdGlsIiwidWlHcmlkQ29uc3RhbnRzIiwidWlHcmlkRWRpdENvbnN0YW50cyIsZnVuY3Rpb24obyxlLGEpe3JldHVybntzY29wZTohMCxyZXF1aXJlOlsiP151aUdyaWQiLCI/XnVpR3JpZFJlbmRlckNvbnRhaW5lciJdLGNvbXBpbGU6ZnVuY3Rpb24oKXtyZXR1cm57cHJlOmZ1bmN0aW9uKGUsdCxyKXt9LHBvc3Q6ZnVuY3Rpb24oaSxuKXtuWzBdLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsZnVuY3Rpb24gZSh0KXt2YXIgcj10LnNyY0VsZW1lbnR8fHQudGFyZ2V0O3ImJnIuZmlsZXMmJjA8ci5maWxlcy5sZW5ndGg/KCJmdW5jdGlvbiI9PXR5cGVvZiBpLmNvbC5jb2xEZWYuZWRpdEZpbGVDaG9vc2VyQ2FsbGJhY2s/aS5jb2wuY29sRGVmLmVkaXRGaWxlQ2hvb3NlckNhbGxiYWNrKGkucm93LGkuY29sLHIuZmlsZXMpOm8ubG9nRXJyb3IoIllvdSBuZWVkIHRvIHNldCBjb2xEZWYuZWRpdEZpbGVDaG9vc2VyQ2FsbGJhY2sgdG8gdXNlIHRoZSBmaWxlIGNob29zZXIiKSxyLmZvcm0ucmVzZXQoKSxpLiRlbWl0KGEuZXZlbnRzLkVORF9DRUxMX0VESVQpKTppLiRlbWl0KGEuZXZlbnRzLkNBTkNFTF9DRUxMX0VESVQpLG5bMF0ucmVtb3ZlRXZlbnRMaXN0ZW5lcigiY2hhbmdlIixlLCExKX0sITEpLGkuJG9uKGEuZXZlbnRzLkJFR0lOX0NFTExfRURJVCxmdW5jdGlvbigpe25bMF0uZm9jdXMoKSxuWzBdLnNlbGVjdCgpLG4ub24oImJsdXIiLGZ1bmN0aW9uKCl7aS4kZW1pdChhLmV2ZW50cy5FTkRfQ0VMTF9FRElUKSxuLm9mZigpfSl9KX19fX19XSl9KCksZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7dmFyIGU9YW5ndWxhci5tb2R1bGUoInVpLmdyaWQuZW1wdHlCYXNlTGF5ZXIiLFsidWkuZ3JpZCJdKTtlLnNlcnZpY2UoInVpR3JpZEJhc2VMYXllclNlcnZpY2UiLFsiZ3JpZFV0aWwiLCIkY29tcGlsZSIsZnVuY3Rpb24oZSx0KXtyZXR1cm57aW5pdGlhbGl6ZUdyaWQ6ZnVuY3Rpb24oZSx0KXshKGUuYmFzZUxheWVyPXtlbXB0eVJvd3M6W119KSE9PWUub3B0aW9ucy5lbmFibGVFbXB0eUdyaWRCYXNlTGF5ZXImJihlLm9wdGlvbnMuZW5hYmxlRW1wdHlHcmlkQmFzZUxheWVyPSF0KX0sc2V0TnVtYmVyT2ZFbXB0eVJvd3M6ZnVuY3Rpb24oZSx0KXt2YXIgcj10Lm9wdGlvbnMucm93SGVpZ2h0LGk9TWF0aC5jZWlsKGUvcik7aWYoMDxpKXt0LmJhc2VMYXllci5lbXB0eVJvd3M9W107Zm9yKHZhciBuPTA7bjxpO24rKyl0LmJhc2VMYXllci5lbXB0eVJvd3MucHVzaCh7fSl9fX19XSksZS5kaXJlY3RpdmUoInVpR3JpZEVtcHR5QmFzZUxheWVyIixbImdyaWRVdGlsIiwidWlHcmlkQmFzZUxheWVyU2VydmljZSIsIiRwYXJzZSIsZnVuY3Rpb24oZSxhLG8pe3JldHVybntyZXF1aXJlOiJedWlHcmlkIixzY29wZTohMSxjb21waWxlOmZ1bmN0aW9uKGUsdCl7cmV0dXJue3ByZTpmdW5jdGlvbihlLHQscixpKXt2YXIgbj0hMT09PW8oci51aUdyaWRFbXB0eUJhc2VMYXllcikoZSk7YS5pbml0aWFsaXplR3JpZChpLmdyaWQsbil9LHBvc3Q6ZnVuY3Rpb24oZSx0LHIsaSl7aWYoaS5ncmlkLm9wdGlvbnMuZW5hYmxlRW1wdHlHcmlkQmFzZUxheWVyKXt2YXIgbj1pLmdyaWQucmVuZGVyQ29udGFpbmVycy5ib2R5LG89bi5nZXRWaWV3cG9ydEhlaWdodCgpO2kuZ3JpZC5yZWdpc3RlclN0eWxlQ29tcHV0YXRpb24oe2Z1bmM6ZnVuY3Rpb24oKXt2YXIgZSx0O3JldHVybihlPW4uZ2V0Vmlld3BvcnRIZWlnaHQoKSkhPT1vJiYobz1lLDEpJiZhLnNldE51bWJlck9mRW1wdHlSb3dzKG8saS5ncmlkKSx0PW8sIi5ncmlkIitpLmdyaWQuaWQrIiAudWktZ3JpZC1yZW5kZXItY29udGFpbmVyIC51aS1ncmlkLWVtcHR5LWJhc2UtbGF5ZXItY29udGFpbmVyLnVpLWdyaWQtY2FudmFzIHsgaGVpZ2h0OiAiK3QrInB4OyB9In19KX19fX19fV0pLGUuZGlyZWN0aXZlKCJ1aUdyaWRWaWV3cG9ydCIsWyIkY29tcGlsZSIsImdyaWRVdGlsIiwiJHRlbXBsYXRlQ2FjaGUiLGZ1bmN0aW9uKGUsdCxpKXtyZXR1cm57cHJpb3JpdHk6LTIwMCxzY29wZTohMSxjb21waWxlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9aS5nZXQoInVpLWdyaWQvZW1wdHlCYXNlTGF5ZXJDb250YWluZXIiKTtyZXR1cm4gZS5wcmVwZW5kKHIpLHtwcmU6ZnVuY3Rpb24oZSx0LHIsaSl7fSxwb3N0OmZ1bmN0aW9uKGUsdCxyLGkpe319fX19XSl9KCksZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7dmFyIGU9YW5ndWxhci5tb2R1bGUoInVpLmdyaWQuZXhwYW5kYWJsZSIsWyJ1aS5ncmlkIl0pO2Uuc2VydmljZSgidWlHcmlkRXhwYW5kYWJsZVNlcnZpY2UiLFsiZ3JpZFV0aWwiLCIkY29tcGlsZSIsZnVuY3Rpb24odCxlKXt2YXIgaT17aW5pdGlhbGl6ZUdyaWQ6ZnVuY3Rpb24ocil7ci5leHBhbmRhYmxlPXt9LHIuZXhwYW5kYWJsZS5leHBhbmRlZEFsbD0hMSxyLm9wdGlvbnMuZW5hYmxlRXhwYW5kYWJsZT0hMSE9PXIub3B0aW9ucy5lbmFibGVFeHBhbmRhYmxlLHIub3B0aW9ucy5zaG93RXhwYW5kQWxsQnV0dG9uPSExIT09ci5vcHRpb25zLnNob3dFeHBhbmRBbGxCdXR0b24sci5vcHRpb25zLmV4cGFuZGFibGVSb3dIZWlnaHQ9ci5vcHRpb25zLmV4cGFuZGFibGVSb3dIZWlnaHR8fDE1MCxyLm9wdGlvbnMuZXhwYW5kYWJsZVJvd0hlYWRlcldpZHRoPXIub3B0aW9ucy5leHBhbmRhYmxlUm93SGVhZGVyV2lkdGh8fDQwLHIub3B0aW9ucy5lbmFibGVFeHBhbmRhYmxlJiYhci5vcHRpb25zLmV4cGFuZGFibGVSb3dUZW1wbGF0ZSYmKHQubG9nRXJyb3IoIllvdSBoYXZlIG5vdCBzZXQgdGhlIGV4cGFuZGFibGVSb3dUZW1wbGF0ZSwgZGlzYWJsaW5nIGV4cGFuZGFibGUgbW9kdWxlIiksci5vcHRpb25zLmVuYWJsZUV4cGFuZGFibGU9ITEpO3ZhciBlPXtldmVudHM6e2V4cGFuZGFibGU6e3Jvd0V4cGFuZGVkQmVmb3JlU3RhdGVDaGFuZ2VkOmZ1bmN0aW9uKGUsdCl7fSxyb3dFeHBhbmRlZFN0YXRlQ2hhbmdlZDpmdW5jdGlvbihlLHQpe319fSxtZXRob2RzOntleHBhbmRhYmxlOnt0b2dnbGVSb3dFeHBhbnNpb246ZnVuY3Rpb24oZSl7dmFyIHQ9ci5nZXRSb3coZSk7bnVsbCE9PXQmJmkudG9nZ2xlUm93RXhwYW5zaW9uKHIsdCl9LGV4cGFuZEFsbFJvd3M6ZnVuY3Rpb24oKXtpLmV4cGFuZEFsbFJvd3Mocil9LGNvbGxhcHNlQWxsUm93czpmdW5jdGlvbigpe2kuY29sbGFwc2VBbGxSb3dzKHIpfSx0b2dnbGVBbGxSb3dzOmZ1bmN0aW9uKCl7aS50b2dnbGVBbGxSb3dzKHIpfSxleHBhbmRSb3c6ZnVuY3Rpb24oZSl7dmFyIHQ9ci5nZXRSb3coZSk7bnVsbD09PXR8fHQuaXNFeHBhbmRlZHx8aS50b2dnbGVSb3dFeHBhbnNpb24ocix0KX0sY29sbGFwc2VSb3c6ZnVuY3Rpb24oZSl7dmFyIHQ9ci5nZXRSb3coZSk7bnVsbCE9PXQmJnQuaXNFeHBhbmRlZCYmaS50b2dnbGVSb3dFeHBhbnNpb24ocix0KX0sZ2V0RXhwYW5kZWRSb3dzOmZ1bmN0aW9uKCl7cmV0dXJuIGkuZ2V0RXhwYW5kZWRSb3dzKHIpLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5lbnRpdHl9KX19fX07ci5hcGkucmVnaXN0ZXJFdmVudHNGcm9tT2JqZWN0KGUuZXZlbnRzKSxyLmFwaS5yZWdpc3Rlck1ldGhvZHNGcm9tT2JqZWN0KGUubWV0aG9kcyl9LHRvZ2dsZVJvd0V4cGFuc2lvbjpmdW5jdGlvbihlLHQpe2UuYXBpLmV4cGFuZGFibGUucmFpc2Uucm93RXhwYW5kZWRCZWZvcmVTdGF0ZUNoYW5nZWQodCksdC5pc0V4cGFuZGVkPSF0LmlzRXhwYW5kZWQsYW5ndWxhci5pc1VuZGVmaW5lZCh0LmV4cGFuZGVkUm93SGVpZ2h0KSYmKHQuZXhwYW5kZWRSb3dIZWlnaHQ9ZS5vcHRpb25zLmV4cGFuZGFibGVSb3dIZWlnaHQpLHQuaXNFeHBhbmRlZD8odC5oZWlnaHQ9dC5ncmlkLm9wdGlvbnMucm93SGVpZ2h0K3QuZXhwYW5kZWRSb3dIZWlnaHQsZS5leHBhbmRhYmxlLmV4cGFuZGVkQWxsPWkuZ2V0RXhwYW5kZWRSb3dzKGUpLmxlbmd0aD09PWUucm93cy5sZW5ndGgpOih0LmhlaWdodD10LmdyaWQub3B0aW9ucy5yb3dIZWlnaHQsZS5leHBhbmRhYmxlLmV4cGFuZGVkQWxsPSExKSxlLmFwaS5leHBhbmRhYmxlLnJhaXNlLnJvd0V4cGFuZGVkU3RhdGVDaGFuZ2VkKHQpfSxleHBhbmRBbGxSb3dzOmZ1bmN0aW9uKHQpe3QucmVuZGVyQ29udGFpbmVycy5ib2R5LnZpc2libGVSb3dDYWNoZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuaXNFeHBhbmRlZHx8ZS5lbnRpdHkuc3ViR3JpZE9wdGlvbnMmJmUuZW50aXR5LnN1YkdyaWRPcHRpb25zLmRpc2FibGVSb3dFeHBhbmRhYmxlfHxpLnRvZ2dsZVJvd0V4cGFuc2lvbih0LGUpfSksdC5leHBhbmRhYmxlLmV4cGFuZGVkQWxsPSEwLHQucXVldWVHcmlkUmVmcmVzaCgpfSxjb2xsYXBzZUFsbFJvd3M6ZnVuY3Rpb24odCl7dC5yZW5kZXJDb250YWluZXJzLmJvZHkudmlzaWJsZVJvd0NhY2hlLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5pc0V4cGFuZGVkJiZpLnRvZ2dsZVJvd0V4cGFuc2lvbih0LGUpfSksdC5leHBhbmRhYmxlLmV4cGFuZGVkQWxsPSExLHQucXVldWVHcmlkUmVmcmVzaCgpfSx0b2dnbGVBbGxSb3dzOmZ1bmN0aW9uKGUpe2UuZXhwYW5kYWJsZS5leHBhbmRlZEFsbD9pLmNvbGxhcHNlQWxsUm93cyhlKTppLmV4cGFuZEFsbFJvd3MoZSl9LGdldEV4cGFuZGVkUm93czpmdW5jdGlvbihlKXtyZXR1cm4gZS5yb3dzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS5pc0V4cGFuZGVkfSl9fTtyZXR1cm4gaX1dKSxlLmRpcmVjdGl2ZSgidWlHcmlkRXhwYW5kYWJsZSIsWyJ1aUdyaWRFeHBhbmRhYmxlU2VydmljZSIsIiR0ZW1wbGF0ZUNhY2hlIixmdW5jdGlvbihvLGEpe3JldHVybntyZXBsYWNlOiEwLHByaW9yaXR5OjAscmVxdWlyZToiXnVpR3JpZCIsc2NvcGU6ITEsY29tcGlsZTpmdW5jdGlvbigpe3JldHVybntwcmU6ZnVuY3Rpb24oZSx0LHIsaSl7aWYoby5pbml0aWFsaXplR3JpZChpLmdyaWQpLGkuZ3JpZC5vcHRpb25zLmVuYWJsZUV4cGFuZGFibGUmJiExIT09aS5ncmlkLm9wdGlvbnMuZW5hYmxlRXhwYW5kYWJsZVJvd0hlYWRlcil7dmFyIG49e25hbWU6ImV4cGFuZGFibGVCdXR0b25zIixkaXNwbGF5TmFtZToiIixleHBvcnRlclN1cHByZXNzRXhwb3J0OiEwLGVuYWJsZUNvbHVtblJlc2l6aW5nOiExLGVuYWJsZUNvbHVtbk1lbnU6ITEsd2lkdGg6aS5ncmlkLm9wdGlvbnMuZXhwYW5kYWJsZVJvd0hlYWRlcldpZHRofHw0MH07bi5jZWxsVGVtcGxhdGU9YS5nZXQoInVpLWdyaWQvZXhwYW5kYWJsZVJvd0hlYWRlciIpLG4uaGVhZGVyQ2VsbFRlbXBsYXRlPWEuZ2V0KCJ1aS1ncmlkL2V4cGFuZGFibGVUb3BSb3dIZWFkZXIiKSxpLmdyaWQuYWRkUm93SGVhZGVyQ29sdW1uKG4sLTkwKX19LHBvc3Q6ZnVuY3Rpb24oZSx0LHIsaSl7fX19fX1dKSxlLmRpcmVjdGl2ZSgidWlHcmlkIixbInVpR3JpZEV4cGFuZGFibGVTZXJ2aWNlIiwiJHRlbXBsYXRlQ2FjaGUiLGZ1bmN0aW9uKGUsdCl7cmV0dXJue3JlcGxhY2U6ITAscHJpb3JpdHk6NTk5LHJlcXVpcmU6Il51aUdyaWQiLHNjb3BlOiExLGNvbXBpbGU6ZnVuY3Rpb24oKXtyZXR1cm57cHJlOmZ1bmN0aW9uKGUsdCxyLGkpe2kuZ3JpZC5hcGkuY29yZS5vbi5yZW5kZXJpbmdDb21wbGV0ZShlLGZ1bmN0aW9uKCl7ZS5yb3cmJmUucm93LmdyaWQmJmUucm93LmdyaWQub3B0aW9ucyYmZS5yb3cuZ3JpZC5vcHRpb25zLmVuYWJsZUV4cGFuZGFibGUmJihpLmdyaWQucGFyZW50Um93PWUucm93KX0pfSxwb3N0OmZ1bmN0aW9uKGUsdCxyLGkpe319fX19XSksZS5kaXJlY3RpdmUoInVpR3JpZEV4cGFuZGFibGVSb3ciLFsidWlHcmlkRXhwYW5kYWJsZVNlcnZpY2UiLCIkdGltZW91dCIsIiRjb21waWxlIiwidWlHcmlkQ29uc3RhbnRzIiwiZ3JpZFV0aWwiLCIkaW50ZXJ2YWwiLCIkbG9nIixmdW5jdGlvbihlLHQsYSxyLGksbixvKXtyZXR1cm57cmVwbGFjZTohMSxwcmlvcml0eTowLHNjb3BlOiExLGNvbXBpbGU6ZnVuY3Rpb24oKXtyZXR1cm57cHJlOmZ1bmN0aW9uKG4sbyxlLHQpe2kuZ2V0VGVtcGxhdGUobi5ncmlkLm9wdGlvbnMuZXhwYW5kYWJsZVJvd1RlbXBsYXRlKS50aGVuKGZ1bmN0aW9uKGUpe2lmKG4uZ3JpZC5vcHRpb25zLmV4cGFuZGFibGVSb3dTY29wZSl7dmFyIHQ9bi5ncmlkLm9wdGlvbnMuZXhwYW5kYWJsZVJvd1Njb3BlO2Zvcih2YXIgciBpbiB0KXQuaGFzT3duUHJvcGVydHkocikmJihuW3JdPXRbcl0pfXZhciBpPWFuZ3VsYXIuZWxlbWVudChlKTtvLmFwcGVuZChpKSxpPWEoaSkobiksbi5yb3cuZXhwYW5kZWRSZW5kZXJlZD0hMH0pfSxwb3N0OmZ1bmN0aW9uKGUsdCxyLGkpe2UuJG9uKCIkZGVzdHJveSIsZnVuY3Rpb24oKXtlLnJvdy5leHBhbmRlZFJlbmRlcmVkPSExfSl9fX19fV0pLGUuZGlyZWN0aXZlKCJ1aUdyaWRSb3ciLFsiJGNvbXBpbGUiLCJncmlkVXRpbCIsIiR0ZW1wbGF0ZUNhY2hlIixmdW5jdGlvbihlLHQscil7cmV0dXJue3ByaW9yaXR5Oi0yMDAsc2NvcGU6ITEsY29tcGlsZTpmdW5jdGlvbihlLHQpe3JldHVybntwcmU6ZnVuY3Rpb24oZSx0LHIsaSl7ZS5ncmlkLm9wdGlvbnMuZW5hYmxlRXhwYW5kYWJsZSYmKGUuZXhwYW5kYWJsZVJvdz17fSxlLmV4cGFuZGFibGVSb3cuc2hvdWxkUmVuZGVyRXhwYW5kPWZ1bmN0aW9uKCl7cmV0dXJuImJvZHkiPT09ZS5jb2xDb250YWluZXIubmFtZSYmITEhPT1lLmdyaWQub3B0aW9ucy5lbmFibGVFeHBhbmRhYmxlJiZlLnJvdy5pc0V4cGFuZGVkJiYoIWUuZ3JpZC5pc1Njcm9sbGluZ1ZlcnRpY2FsbHl8fGUucm93LmV4cGFuZGVkUmVuZGVyZWQpfSxlLmV4cGFuZGFibGVSb3cuc2hvdWxkUmVuZGVyRmlsbGVyPWZ1bmN0aW9uKCl7cmV0dXJuIGUucm93LmlzRXhwYW5kZWQmJigiYm9keSIhPT1lLmNvbENvbnRhaW5lci5uYW1lfHxlLmdyaWQuaXNTY3JvbGxpbmdWZXJ0aWNhbGx5JiYhZS5yb3cuZXhwYW5kZWRSZW5kZXJlZCl9KX0scG9zdDpmdW5jdGlvbihlLHQscixpKXt9fX19fV0pLGUuZGlyZWN0aXZlKCJ1aUdyaWRWaWV3cG9ydCIsWyIkY29tcGlsZSIsImdyaWRVdGlsIiwiJHRlbXBsYXRlQ2FjaGUiLGZ1bmN0aW9uKGUsdCxvKXtyZXR1cm57cHJpb3JpdHk6LTIwMCxzY29wZTohMSxjb21waWxlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9YW5ndWxhci5lbGVtZW50KGUuY2hpbGRyZW4oKS5jaGlsZHJlbigpWzBdKSxpPW8uZ2V0KCJ1aS1ncmlkL2V4cGFuZGFibGVTY3JvbGxGaWxsZXIiKSxuPW8uZ2V0KCJ1aS1ncmlkL2V4cGFuZGFibGVSb3ciKTtyZXR1cm4gci5hcHBlbmQobiksci5hcHBlbmQoaSkse3ByZTpmdW5jdGlvbihlLHQscixpKXt9LHBvc3Q6ZnVuY3Rpb24oZSx0LHIsaSl7fX19fX1dKX0oKSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT1hbmd1bGFyLm1vZHVsZSgidWkuZ3JpZC5leHBvcnRlciIsWyJ1aS5ncmlkIl0pO2UuY29uc3RhbnQoInVpR3JpZEV4cG9ydGVyQ29uc3RhbnRzIix7ZmVhdHVyZU5hbWU6ImV4cG9ydGVyIixyb3dIZWFkZXJDb2xOYW1lOiJ0cmVlQmFzZVJvd0hlYWRlckNvbCIsc2VsZWN0aW9uUm93SGVhZGVyQ29sTmFtZToic2VsZWN0aW9uUm93SGVhZGVyQ29sIixBTEw6ImFsbCIsVklTSUJMRToidmlzaWJsZSIsU0VMRUNURUQ6InNlbGVjdGVkIixDU1ZfQ09OVEVOVDoiQ1NWX0NPTlRFTlQiLEJVVFRPTl9MQUJFTDoiQlVUVE9OX0xBQkVMIixGSUxFX05BTUU6IkZJTEVfTkFNRSJ9KSxlLnNlcnZpY2UoInVpR3JpZEV4cG9ydGVyU2VydmljZSIsWyIkZmlsdGVyIiwiJHEiLCJ1aUdyaWRFeHBvcnRlckNvbnN0YW50cyIsImdyaWRVdGlsIiwiJGNvbXBpbGUiLCIkaW50ZXJ2YWwiLCJpMThuU2VydmljZSIsZnVuY3Rpb24obCxuLHAsdSxlLHQscil7dmFyIGk9e2RlbGF5OjEwMCxpbml0aWFsaXplR3JpZDpmdW5jdGlvbihyKXtyLmV4cG9ydGVyPXt9LHRoaXMuZGVmYXVsdEdyaWRPcHRpb25zKHIub3B0aW9ucyk7dmFyIGU9e2V2ZW50czp7ZXhwb3J0ZXI6e319LG1ldGhvZHM6e2V4cG9ydGVyOntjc3ZFeHBvcnQ6ZnVuY3Rpb24oZSx0KXtpLmNzdkV4cG9ydChyLGUsdCl9LHBkZkV4cG9ydDpmdW5jdGlvbihlLHQpe2kucGRmRXhwb3J0KHIsZSx0KX0sZXhjZWxFeHBvcnQ6ZnVuY3Rpb24oZSx0KXtpLmV4Y2VsRXhwb3J0KHIsZSx0KX19fX07ci5hcGkucmVnaXN0ZXJFdmVudHNGcm9tT2JqZWN0KGUuZXZlbnRzKSxyLmFwaS5yZWdpc3Rlck1ldGhvZHNGcm9tT2JqZWN0KGUubWV0aG9kcyksci5hcGkuY29yZS5hZGRUb0dyaWRNZW51P2kuYWRkVG9NZW51KHIpOnQoZnVuY3Rpb24oKXtyLmFwaS5jb3JlLmFkZFRvR3JpZE1lbnUmJmkuYWRkVG9NZW51KHIpfSx0aGlzLmRlbGF5LDEpfSxkZWZhdWx0R3JpZE9wdGlvbnM6ZnVuY3Rpb24oZSl7ZS5leHBvcnRlclN1cHByZXNzTWVudT0hMD09PWUuZXhwb3J0ZXJTdXBwcmVzc01lbnUsZS5leHBvcnRlck1lbnVMYWJlbD1lLmV4cG9ydGVyTWVudUxhYmVsP2UuZXhwb3J0ZXJNZW51TGFiZWw6IkV4cG9ydCIsZS5leHBvcnRlclN1cHByZXNzQ29sdW1ucz1lLmV4cG9ydGVyU3VwcHJlc3NDb2x1bW5zP2UuZXhwb3J0ZXJTdXBwcmVzc0NvbHVtbnM6W10sZS5leHBvcnRlckNzdkNvbHVtblNlcGFyYXRvcj1lLmV4cG9ydGVyQ3N2Q29sdW1uU2VwYXJhdG9yP2UuZXhwb3J0ZXJDc3ZDb2x1bW5TZXBhcmF0b3I6IiwiLGUuZXhwb3J0ZXJDc3ZGaWxlbmFtZT1lLmV4cG9ydGVyQ3N2RmlsZW5hbWU/ZS5leHBvcnRlckNzdkZpbGVuYW1lOiJkb3dubG9hZC5jc3YiLGUuZXhwb3J0ZXJQZGZGaWxlbmFtZT1lLmV4cG9ydGVyUGRmRmlsZW5hbWU/ZS5leHBvcnRlclBkZkZpbGVuYW1lOiJkb3dubG9hZC5wZGYiLGUuZXhwb3J0ZXJFeGNlbEZpbGVuYW1lPWUuZXhwb3J0ZXJFeGNlbEZpbGVuYW1lP2UuZXhwb3J0ZXJFeGNlbEZpbGVuYW1lOiJkb3dubG9hZC54bHN4IixlLmV4cG9ydGVyRXhjZWxTaGVldE5hbWU9ZS5leHBvcnRlckV4Y2VsU2hlZXROYW1lP2UuZXhwb3J0ZXJFeGNlbFNoZWV0TmFtZToiU2hlZXQxIixlLmV4cG9ydGVyT2xkZXJFeGNlbENvbXBhdGliaWxpdHk9ITA9PT1lLmV4cG9ydGVyT2xkZXJFeGNlbENvbXBhdGliaWxpdHksZS5leHBvcnRlcklzRXhjZWxDb21wYXRpYmxlPSEwPT09ZS5leHBvcnRlcklzRXhjZWxDb21wYXRpYmxlLGUuZXhwb3J0ZXJNZW51SXRlbU9yZGVyPWUuZXhwb3J0ZXJNZW51SXRlbU9yZGVyP2UuZXhwb3J0ZXJNZW51SXRlbU9yZGVyOjIwMCxlLmV4cG9ydGVyUGRmRGVmYXVsdFN0eWxlPWUuZXhwb3J0ZXJQZGZEZWZhdWx0U3R5bGU/ZS5leHBvcnRlclBkZkRlZmF1bHRTdHlsZTp7Zm9udFNpemU6MTF9LGUuZXhwb3J0ZXJQZGZUYWJsZVN0eWxlPWUuZXhwb3J0ZXJQZGZUYWJsZVN0eWxlP2UuZXhwb3J0ZXJQZGZUYWJsZVN0eWxlOnttYXJnaW46WzAsNSwwLDE1XX0sZS5leHBvcnRlclBkZlRhYmxlSGVhZGVyU3R5bGU9ZS5leHBvcnRlclBkZlRhYmxlSGVhZGVyU3R5bGU/ZS5leHBvcnRlclBkZlRhYmxlSGVhZGVyU3R5bGU6e2JvbGQ6ITAsZm9udFNpemU6MTIsY29sb3I6ImJsYWNrIn0sZS5leHBvcnRlclBkZkhlYWRlcj1lLmV4cG9ydGVyUGRmSGVhZGVyP2UuZXhwb3J0ZXJQZGZIZWFkZXI6bnVsbCxlLmV4cG9ydGVyUGRmRm9vdGVyPWUuZXhwb3J0ZXJQZGZGb290ZXI/ZS5leHBvcnRlclBkZkZvb3RlcjpudWxsLGUuZXhwb3J0ZXJQZGZPcmllbnRhdGlvbj1lLmV4cG9ydGVyUGRmT3JpZW50YXRpb24/ZS5leHBvcnRlclBkZk9yaWVudGF0aW9uOiJsYW5kc2NhcGUiLGUuZXhwb3J0ZXJQZGZQYWdlU2l6ZT1lLmV4cG9ydGVyUGRmUGFnZVNpemU/ZS5leHBvcnRlclBkZlBhZ2VTaXplOiJBNCIsZS5leHBvcnRlclBkZk1heEdyaWRXaWR0aD1lLmV4cG9ydGVyUGRmTWF4R3JpZFdpZHRoP2UuZXhwb3J0ZXJQZGZNYXhHcmlkV2lkdGg6NzIwLGUuZXhwb3J0ZXJNZW51QWxsRGF0YT12b2lkIDA9PT1lLmV4cG9ydGVyTWVudUFsbERhdGF8fGUuZXhwb3J0ZXJNZW51QWxsRGF0YSxlLmV4cG9ydGVyTWVudVZpc2libGVEYXRhPXZvaWQgMD09PWUuZXhwb3J0ZXJNZW51VmlzaWJsZURhdGF8fGUuZXhwb3J0ZXJNZW51VmlzaWJsZURhdGEsZS5leHBvcnRlck1lbnVTZWxlY3RlZERhdGE9dm9pZCAwPT09ZS5leHBvcnRlck1lbnVTZWxlY3RlZERhdGF8fGUuZXhwb3J0ZXJNZW51U2VsZWN0ZWREYXRhLGUuZXhwb3J0ZXJNZW51Q3N2PXZvaWQgMD09PWUuZXhwb3J0ZXJNZW51Q3N2fHxlLmV4cG9ydGVyTWVudUNzdixlLmV4cG9ydGVyTWVudVBkZj12b2lkIDA9PT1lLmV4cG9ydGVyTWVudVBkZnx8ZS5leHBvcnRlck1lbnVQZGYsZS5leHBvcnRlck1lbnVFeGNlbD12b2lkIDA9PT1lLmV4cG9ydGVyTWVudUV4Y2VsfHxlLmV4cG9ydGVyTWVudUV4Y2VsLGUuZXhwb3J0ZXJQZGZDdXN0b21Gb3JtYXR0ZXI9ZS5leHBvcnRlclBkZkN1c3RvbUZvcm1hdHRlciYmImZ1bmN0aW9uIj09dHlwZW9mIGUuZXhwb3J0ZXJQZGZDdXN0b21Gb3JtYXR0ZXI/ZS5leHBvcnRlclBkZkN1c3RvbUZvcm1hdHRlcjpmdW5jdGlvbihlKXtyZXR1cm4gZX0sZS5leHBvcnRlckhlYWRlckZpbHRlclVzZU5hbWU9ITA9PT1lLmV4cG9ydGVySGVhZGVyRmlsdGVyVXNlTmFtZSxlLmV4cG9ydGVyRmllbGRDYWxsYmFjaz1lLmV4cG9ydGVyRmllbGRDYWxsYmFjaz9lLmV4cG9ydGVyRmllbGRDYWxsYmFjazpvLGUuZXhwb3J0ZXJGaWVsZEZvcm1hdENhbGxiYWNrPWUuZXhwb3J0ZXJGaWVsZEZvcm1hdENhbGxiYWNrP2UuZXhwb3J0ZXJGaWVsZEZvcm1hdENhbGxiYWNrOmZ1bmN0aW9uKGUsdCxyLGkpe3JldHVybiBudWxsfSxlLmV4cG9ydGVyRXhjZWxDdXN0b21Gb3JtYXR0ZXJzPWUuZXhwb3J0ZXJFeGNlbEN1c3RvbUZvcm1hdHRlcnM/ZS5leHBvcnRlckV4Y2VsQ3VzdG9tRm9ybWF0dGVyczpmdW5jdGlvbihlLHQscil7cmV0dXJuIG51bGx9LGUuZXhwb3J0ZXJFeGNlbEhlYWRlcj1lLmV4cG9ydGVyRXhjZWxIZWFkZXI/ZS5leHBvcnRlckV4Y2VsSGVhZGVyOmZ1bmN0aW9uKGUsdCxyLGkpe3JldHVybiBudWxsfSxlLmV4cG9ydGVyQ29sdW1uU2NhbGVGYWN0b3I9ZS5leHBvcnRlckNvbHVtblNjYWxlRmFjdG9yP2UuZXhwb3J0ZXJDb2x1bW5TY2FsZUZhY3RvcjozLjUsZS5leHBvcnRlckZpZWxkQXBwbHlGaWx0ZXJzPSEwPT09ZS5leHBvcnRlckZpZWxkQXBwbHlGaWx0ZXJzLGUuZXhwb3J0ZXJBbGxEYXRhRm49ZS5leHBvcnRlckFsbERhdGFGbj9lLmV4cG9ydGVyQWxsRGF0YUZuOm51bGwsbnVsbD09PWUuZXhwb3J0ZXJBbGxEYXRhRm4mJmUuZXhwb3J0ZXJBbGxEYXRhUHJvbWlzZSYmKGUuZXhwb3J0ZXJBbGxEYXRhRm49ZS5leHBvcnRlckFsbERhdGFQcm9taXNlKX0sYWRkVG9NZW51OmZ1bmN0aW9uKHQpe3QuYXBpLmNvcmUuYWRkVG9HcmlkTWVudSh0LFt7dGl0bGU6ci5nZXRTYWZlVGV4dCgiZ3JpZE1lbnUuZXhwb3J0ZXJBbGxBc0NzdiIpLGFjdGlvbjpmdW5jdGlvbihlKXt0LmFwaS5leHBvcnRlci5jc3ZFeHBvcnQocC5BTEwscC5BTEwpfSxzaG93bjpmdW5jdGlvbigpe3JldHVybiB0Lm9wdGlvbnMuZXhwb3J0ZXJNZW51Q3N2JiZ0Lm9wdGlvbnMuZXhwb3J0ZXJNZW51QWxsRGF0YX0sb3JkZXI6dC5vcHRpb25zLmV4cG9ydGVyTWVudUl0ZW1PcmRlcn0se3RpdGxlOnIuZ2V0U2FmZVRleHQoImdyaWRNZW51LmV4cG9ydGVyVmlzaWJsZUFzQ3N2IiksYWN0aW9uOmZ1bmN0aW9uKGUpe3QuYXBpLmV4cG9ydGVyLmNzdkV4cG9ydChwLlZJU0lCTEUscC5WSVNJQkxFKX0sc2hvd246ZnVuY3Rpb24oKXtyZXR1cm4gdC5vcHRpb25zLmV4cG9ydGVyTWVudUNzdiYmdC5vcHRpb25zLmV4cG9ydGVyTWVudVZpc2libGVEYXRhfSxvcmRlcjp0Lm9wdGlvbnMuZXhwb3J0ZXJNZW51SXRlbU9yZGVyKzF9LHt0aXRsZTpyLmdldFNhZmVUZXh0KCJncmlkTWVudS5leHBvcnRlclNlbGVjdGVkQXNDc3YiKSxhY3Rpb246ZnVuY3Rpb24oZSl7dC5hcGkuZXhwb3J0ZXIuY3N2RXhwb3J0KHAuU0VMRUNURUQscC5WSVNJQkxFKX0sc2hvd246ZnVuY3Rpb24oKXtyZXR1cm4gdC5vcHRpb25zLmV4cG9ydGVyTWVudUNzdiYmdC5vcHRpb25zLmV4cG9ydGVyTWVudVNlbGVjdGVkRGF0YSYmdC5hcGkuc2VsZWN0aW9uJiYwPHQuYXBpLnNlbGVjdGlvbi5nZXRTZWxlY3RlZFJvd3MoKS5sZW5ndGh9LG9yZGVyOnQub3B0aW9ucy5leHBvcnRlck1lbnVJdGVtT3JkZXIrMn0se3RpdGxlOnIuZ2V0U2FmZVRleHQoImdyaWRNZW51LmV4cG9ydGVyQWxsQXNQZGYiKSxhY3Rpb246ZnVuY3Rpb24oZSl7dC5hcGkuZXhwb3J0ZXIucGRmRXhwb3J0KHAuQUxMLHAuQUxMKX0sc2hvd246ZnVuY3Rpb24oKXtyZXR1cm4gdC5vcHRpb25zLmV4cG9ydGVyTWVudVBkZiYmdC5vcHRpb25zLmV4cG9ydGVyTWVudUFsbERhdGF9LG9yZGVyOnQub3B0aW9ucy5leHBvcnRlck1lbnVJdGVtT3JkZXIrM30se3RpdGxlOnIuZ2V0U2FmZVRleHQoImdyaWRNZW51LmV4cG9ydGVyVmlzaWJsZUFzUGRmIiksYWN0aW9uOmZ1bmN0aW9uKGUpe3QuYXBpLmV4cG9ydGVyLnBkZkV4cG9ydChwLlZJU0lCTEUscC5WSVNJQkxFKX0sc2hvd246ZnVuY3Rpb24oKXtyZXR1cm4gdC5vcHRpb25zLmV4cG9ydGVyTWVudVBkZiYmdC5vcHRpb25zLmV4cG9ydGVyTWVudVZpc2libGVEYXRhfSxvcmRlcjp0Lm9wdGlvbnMuZXhwb3J0ZXJNZW51SXRlbU9yZGVyKzR9LHt0aXRsZTpyLmdldFNhZmVUZXh0KCJncmlkTWVudS5leHBvcnRlclNlbGVjdGVkQXNQZGYiKSxhY3Rpb246ZnVuY3Rpb24oZSl7dC5hcGkuZXhwb3J0ZXIucGRmRXhwb3J0KHAuU0VMRUNURUQscC5WSVNJQkxFKX0sc2hvd246ZnVuY3Rpb24oKXtyZXR1cm4gdC5vcHRpb25zLmV4cG9ydGVyTWVudVBkZiYmdC5vcHRpb25zLmV4cG9ydGVyTWVudVNlbGVjdGVkRGF0YSYmdC5hcGkuc2VsZWN0aW9uJiYwPHQuYXBpLnNlbGVjdGlvbi5nZXRTZWxlY3RlZFJvd3MoKS5sZW5ndGh9LG9yZGVyOnQub3B0aW9ucy5leHBvcnRlck1lbnVJdGVtT3JkZXIrNX0se3RpdGxlOnIuZ2V0U2FmZVRleHQoImdyaWRNZW51LmV4cG9ydGVyQWxsQXNFeGNlbCIpLGFjdGlvbjpmdW5jdGlvbihlKXt0LmFwaS5leHBvcnRlci5leGNlbEV4cG9ydChwLkFMTCxwLkFMTCl9LHNob3duOmZ1bmN0aW9uKCl7cmV0dXJuIHQub3B0aW9ucy5leHBvcnRlck1lbnVFeGNlbCYmdC5vcHRpb25zLmV4cG9ydGVyTWVudUFsbERhdGF9LG9yZGVyOnQub3B0aW9ucy5leHBvcnRlck1lbnVJdGVtT3JkZXIrNn0se3RpdGxlOnIuZ2V0U2FmZVRleHQoImdyaWRNZW51LmV4cG9ydGVyVmlzaWJsZUFzRXhjZWwiKSxhY3Rpb246ZnVuY3Rpb24oZSl7dC5hcGkuZXhwb3J0ZXIuZXhjZWxFeHBvcnQocC5WSVNJQkxFLHAuVklTSUJMRSl9LHNob3duOmZ1bmN0aW9uKCl7cmV0dXJuIHQub3B0aW9ucy5leHBvcnRlck1lbnVFeGNlbCYmdC5vcHRpb25zLmV4cG9ydGVyTWVudVZpc2libGVEYXRhfSxvcmRlcjp0Lm9wdGlvbnMuZXhwb3J0ZXJNZW51SXRlbU9yZGVyKzd9LHt0aXRsZTpyLmdldFNhZmVUZXh0KCJncmlkTWVudS5leHBvcnRlclNlbGVjdGVkQXNFeGNlbCIpLGFjdGlvbjpmdW5jdGlvbihlKXt0LmFwaS5leHBvcnRlci5leGNlbEV4cG9ydChwLlNFTEVDVEVELHAuVklTSUJMRSl9LHNob3duOmZ1bmN0aW9uKCl7cmV0dXJuIHQub3B0aW9ucy5leHBvcnRlck1lbnVFeGNlbCYmdC5vcHRpb25zLmV4cG9ydGVyTWVudVNlbGVjdGVkRGF0YSYmdC5hcGkuc2VsZWN0aW9uJiYwPHQuYXBpLnNlbGVjdGlvbi5nZXRTZWxlY3RlZFJvd3MoKS5sZW5ndGh9LG9yZGVyOnQub3B0aW9ucy5leHBvcnRlck1lbnVJdGVtT3JkZXIrOH1dKX0sY3N2RXhwb3J0OmZ1bmN0aW9uKGksbixvKXt2YXIgYT10aGlzO3RoaXMubG9hZEFsbERhdGFJZk5lZWRlZChpLG4sbykudGhlbihmdW5jdGlvbigpe3ZhciBlPWkub3B0aW9ucy5zaG93SGVhZGVyP2EuZ2V0Q29sdW1uSGVhZGVycyhpLG8pOltdLHQ9YS5nZXREYXRhKGksbixvKSxyPWEuZm9ybWF0QXNDc3YoZSx0LGkub3B0aW9ucy5leHBvcnRlckNzdkNvbHVtblNlcGFyYXRvcik7YS5kb3dubG9hZEZpbGUoaS5vcHRpb25zLmV4cG9ydGVyQ3N2RmlsZW5hbWUscixpLm9wdGlvbnMuZXhwb3J0ZXJDc3ZDb2x1bW5TZXBhcmF0b3IsaS5vcHRpb25zLmV4cG9ydGVyT2xkZXJFeGNlbENvbXBhdGliaWxpdHksaS5vcHRpb25zLmV4cG9ydGVySXNFeGNlbENvbXBhdGlibGUpfSl9LGxvYWRBbGxEYXRhSWZOZWVkZWQ6ZnVuY3Rpb24odCxlLHIpe2lmKGU9PT1wLkFMTCYmdC5yb3dzLmxlbmd0aCE9PXQub3B0aW9ucy50b3RhbEl0ZW1zJiZ0Lm9wdGlvbnMuZXhwb3J0ZXJBbGxEYXRhRm4pcmV0dXJuIHQub3B0aW9ucy5leHBvcnRlckFsbERhdGFGbigpLnRoZW4oZnVuY3Rpb24oZSl7dC5tb2RpZnlSb3dzKGUpfSk7dmFyIGk9bi5kZWZlcigpO3JldHVybiBpLnJlc29sdmUoKSxpLnByb21pc2V9LGdldENvbHVtbkhlYWRlcnM6ZnVuY3Rpb24ocixlKXt2YXIgdCxpPVtdO2lmKGU9PT1wLkFMTCl0PXIuY29sdW1ucztlbHNle3ZhciBuPXIucmVuZGVyQ29udGFpbmVycy5sZWZ0P3IucmVuZGVyQ29udGFpbmVycy5sZWZ0LnZpc2libGVDb2x1bW5DYWNoZS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUudmlzaWJsZX0pOltdLG89ci5yZW5kZXJDb250YWluZXJzLmJvZHk/ci5yZW5kZXJDb250YWluZXJzLmJvZHkudmlzaWJsZUNvbHVtbkNhY2hlLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS52aXNpYmxlfSk6W10sYT1yLnJlbmRlckNvbnRhaW5lcnMucmlnaHQ/ci5yZW5kZXJDb250YWluZXJzLnJpZ2h0LnZpc2libGVDb2x1bW5DYWNoZS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUudmlzaWJsZX0pOltdO3Q9bi5jb25jYXQobyxhKX1yZXR1cm4gdC5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKCEwIT09ZS5jb2xEZWYuZXhwb3J0ZXJTdXBwcmVzc0V4cG9ydCYmIiQkaGFzaEtleSIhPT1lLmZpZWxkJiYtMT09PXIub3B0aW9ucy5leHBvcnRlclN1cHByZXNzQ29sdW1ucy5pbmRleE9mKGUubmFtZSkpe3ZhciB0PXtuYW1lOmUuZmllbGQsZGlzcGxheU5hbWU6ZnVuY3Rpb24oZSx0KXtpZihlLm9wdGlvbnMuZXhwb3J0ZXJIZWFkZXJGaWx0ZXIpcmV0dXJuIGUub3B0aW9ucy5leHBvcnRlckhlYWRlckZpbHRlclVzZU5hbWU/ZS5vcHRpb25zLmV4cG9ydGVySGVhZGVyRmlsdGVyKHQubmFtZSk6ZS5vcHRpb25zLmV4cG9ydGVySGVhZGVyRmlsdGVyKHQuZGlzcGxheU5hbWUpO3JldHVybiB0LmhlYWRlckNlbGxGaWx0ZXI/bCh0LmhlYWRlckNlbGxGaWx0ZXIpKHQuZGlzcGxheU5hbWUpOnQuZGlzcGxheU5hbWV9KHIsZSksd2lkdGg6ZS5kcmF3bldpZHRoP2UuZHJhd25XaWR0aDplLndpZHRoLGFsaWduOmUuY29sRGVmLmFsaWduP2UuY29sRGVmLmFsaWduOiJudW1iZXIiPT09ZS5jb2xEZWYudHlwZT8icmlnaHQiOiJsZWZ0In07aS5wdXNoKHQpfX0pLGl9LGdldFJvd3NGcm9tTm9kZTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0wO3I8ZS5jaGlsZHJlbi5sZW5ndGg7cisrKWlmKGUuY2hpbGRyZW5bcl0uY2hpbGRyZW4mJjA9PT1lLmNoaWxkcmVuW3JdLmNoaWxkcmVuLmxlbmd0aCl0LnB1c2goZS5jaGlsZHJlbltyXSk7ZWxzZXt2YXIgaT10aGlzLmdldFJvd3NGcm9tTm9kZShlLmNoaWxkcmVuW3JdKTt0PXQuY29uY2F0KGkpfXJldHVybiB0fSxnZXREYXRhU29ydGVkOmZ1bmN0aW9uKGUsdCxyLGkpe2lmKCFlLnRyZWVCYXNlfHwwPT09ZS50cmVlQmFzZS5udW1iZXJMZXZlbHMpcmV0dXJuIGUucm93cztmb3IodmFyIG49W10sbz0wO288ZS50cmVlQmFzZS50cmVlLmxlbmd0aDtvKyspZm9yKHZhciBhPXRoaXMuZ2V0Um93c0Zyb21Ob2RlKGUudHJlZUJhc2UudHJlZVtvXSksbD0wO2w8YS5sZW5ndGg7bCsrKW4ucHVzaChhW2xdLnJvdyk7cmV0dXJuIG59LGdldERhdGE6ZnVuY3Rpb24obCxlLHMsZCl7dmFyIHQscixpPVtdO3N3aXRjaChlKXtjYXNlIHAuQUxMOnQ9dGhpcy5nZXREYXRhU29ydGVkKGwsZSxzLGQpO2JyZWFrO2Nhc2UgcC5WSVNJQkxFOnQ9bC5nZXRWaXNpYmxlUm93cygpO2JyZWFrO2Nhc2UgcC5TRUxFQ1RFRDpsLmFwaS5zZWxlY3Rpb24/dD1sLmFwaS5zZWxlY3Rpb24uZ2V0U2VsZWN0ZWRHcmlkUm93cygpOnUubG9nRXJyb3IoInNlbGVjdGlvbiBmZWF0dXJlIG11c3QgYmUgZW5hYmxlZCB0byBhbGxvdyBzZWxlY3RlZCByb3dzIHRvIGJlIGV4cG9ydGVkIil9aWYocz09PXAuQUxMKXI9bC5jb2x1bW5zO2Vsc2V7dmFyIG49bC5yZW5kZXJDb250YWluZXJzLmxlZnQ/bC5yZW5kZXJDb250YWluZXJzLmxlZnQudmlzaWJsZUNvbHVtbkNhY2hlLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS52aXNpYmxlfSk6W10sbz1sLnJlbmRlckNvbnRhaW5lcnMuYm9keT9sLnJlbmRlckNvbnRhaW5lcnMuYm9keS52aXNpYmxlQ29sdW1uQ2FjaGUuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLnZpc2libGV9KTpbXSxhPWwucmVuZGVyQ29udGFpbmVycy5yaWdodD9sLnJlbmRlckNvbnRhaW5lcnMucmlnaHQudmlzaWJsZUNvbHVtbkNhY2hlLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS52aXNpYmxlfSk6W107cj1uLmNvbmNhdChvLGEpfXJldHVybiB0LmZvckVhY2goZnVuY3Rpb24obyxlKXtpZighMSE9PW8uZXhwb3J0ZXJFbmFibGVFeHBvcnRpbmcpe3ZhciBhPVtdO3IuZm9yRWFjaChmdW5jdGlvbihlLHQpe2lmKChlLnZpc2libGV8fHM9PT1wLkFMTCkmJiEwIT09ZS5jb2xEZWYuZXhwb3J0ZXJTdXBwcmVzc0V4cG9ydCYmIiQkaGFzaEtleSIhPT1lLmZpZWxkJiYtMT09PWwub3B0aW9ucy5leHBvcnRlclN1cHByZXNzQ29sdW1ucy5pbmRleE9mKGUubmFtZSkpe3ZhciByPWQ/bC5nZXRDZWxsRGlzcGxheVZhbHVlKG8sZSk6bC5nZXRDZWxsVmFsdWUobyxlKSxpPXt2YWx1ZTpsLm9wdGlvbnMuZXhwb3J0ZXJGaWVsZENhbGxiYWNrKGwsbyxlLHIpfSxuPWwub3B0aW9ucy5leHBvcnRlckZpZWxkRm9ybWF0Q2FsbGJhY2sobCxvLGUscik7biYmT2JqZWN0LmFzc2lnbihpLG4pLGUuY29sRGVmLmV4cG9ydGVyUGRmQWxpZ24mJihpLmFsaWdubWVudD1lLmNvbERlZi5leHBvcnRlclBkZkFsaWduKSxhLnB1c2goaSl9fSksaS5wdXNoKGEpfX0pLGl9LGZvcm1hdEFzQ3N2OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaT1lLm1hcChmdW5jdGlvbihlKXtyZXR1cm57dmFsdWU6ZS5kaXNwbGF5TmFtZX19KSxuPTA8aS5sZW5ndGg/dGhpcy5mb3JtYXRSb3dBc0Nzdih0aGlzLHIpKGkpKyJcbiI6IiI7cmV0dXJuIG4rPXQubWFwKHRoaXMuZm9ybWF0Um93QXNDc3YodGhpcyxyKSkuam9pbigiXG4iKX0sZm9ybWF0Um93QXNDc3Y6ZnVuY3Rpb24odCxyKXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGUubWFwKHQuZm9ybWF0RmllbGRBc0Nzdikuam9pbihyKX19LGZvcm1hdEZpZWxkQXNDc3Y6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWUudmFsdWU/IiI6Im51bWJlciI9PXR5cGVvZiBlLnZhbHVlP2UudmFsdWU6ImJvb2xlYW4iPT10eXBlb2YgZS52YWx1ZT9lLnZhbHVlPyJUUlVFIjoiRkFMU0UiOiJzdHJpbmciPT10eXBlb2YgZS52YWx1ZT8nIicrZS52YWx1ZS5yZXBsYWNlKC8iL2csJyIiJykrJyInOkpTT04uc3RyaW5naWZ5KGUudmFsdWUpfSxpc0lFOmZ1bmN0aW9uKCl7dmFyIGU9ITE7cmV0dXJuLTEhPT1uYXZpZ2F0b3IudXNlckFnZW50LnNlYXJjaCgvKD86RWRnZXxNU0lFfFRyaWRlbnRcLy4qOyBydjopLykmJihlPSEwKSxlfSxkb3dubG9hZEZpbGU6ZnVuY3Rpb24oZSx0LHIsaSxuKXt2YXIgbyxhPWRvY3VtZW50LGw9YS5jcmVhdGVFbGVtZW50KCJhIikscz0iYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtO2NoYXJzZXQ9dXRmLTgiLGQ9dGhpcy5pc0lFKCk7aWYobiYmKHQ9InNlcD0iK3IrIlxyXG4iK3QpLG5hdmlnYXRvci5tc1NhdmVCbG9iKXJldHVybiBuYXZpZ2F0b3IubXNTYXZlT3JPcGVuQmxvYihuZXcgQmxvYihbaT8iXHVmZWZmIjoiIix0XSx7dHlwZTpzfSksZSk7aWYoZCl7dmFyIHU9YS5jcmVhdGVFbGVtZW50KCJpZnJhbWUiKTtyZXR1cm4gZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh1KSx1LmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQub3BlbigidGV4dC9odG1sIiwicmVwbGFjZSIpLHUuY29udGVudFdpbmRvdy5kb2N1bWVudC53cml0ZSh0KSx1LmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQuY2xvc2UoKSx1LmNvbnRlbnRXaW5kb3cuZm9jdXMoKSx1LmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQuZXhlY0NvbW1hbmQoIlNhdmVBcyIsITAsZSksZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh1KSwhMH1pZigiZG93bmxvYWQiaW4gbCl7dmFyIGM9bmV3IEJsb2IoW2k/Ilx1ZmVmZiI6IiIsdF0se3R5cGU6c30pO289VVJMLmNyZWF0ZU9iamVjdFVSTChjKSxsLnNldEF0dHJpYnV0ZSgiZG93bmxvYWQiLGUpfWVsc2Ugbz0iZGF0YToiK3MrIiwiK2VuY29kZVVSSUNvbXBvbmVudCh0KSxsLnNldEF0dHJpYnV0ZSgidGFyZ2V0IiwiX2JsYW5rIik7bC5ocmVmPW8sbC5zZXRBdHRyaWJ1dGUoInN0eWxlIiwiZGlzcGxheTpub25lOyIpLGEuYm9keS5hcHBlbmRDaGlsZChsKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWYobC5jbGljaylsLmNsaWNrKCk7ZWxzZSBpZihkb2N1bWVudC5jcmVhdGVFdmVudCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIk1vdXNlRXZlbnRzIik7ZS5pbml0RXZlbnQoImNsaWNrIiwhMCwhMCksbC5kaXNwYXRjaEV2ZW50KGUpfWEuYm9keS5yZW1vdmVDaGlsZChsKX0sdGhpcy5kZWxheSl9LHBkZkV4cG9ydDpmdW5jdGlvbihpLG4sbyl7dmFyIGE9dGhpczt0aGlzLmxvYWRBbGxEYXRhSWZOZWVkZWQoaSxuLG8pLnRoZW4oZnVuY3Rpb24oKXt2YXIgZT1hLmdldENvbHVtbkhlYWRlcnMoaSxvKSx0PWEuZ2V0RGF0YShpLG4sbykscj1hLnByZXBhcmVBc1BkZihpLGUsdCk7YS5pc0lFKCl8fC0xIT09bmF2aWdhdG9yLmFwcFZlcnNpb24uaW5kZXhPZigiRWRnZSIpP2EuZG93bmxvYWRQREYoaS5vcHRpb25zLmV4cG9ydGVyUGRmRmlsZW5hbWUscik6cGRmTWFrZS5jcmVhdGVQZGYocikub3BlbigpfSl9LGRvd25sb2FkUERGOmZ1bmN0aW9uKHIsZSl7dmFyIGksbixvPWRvY3VtZW50O28uY3JlYXRlRWxlbWVudCgiYSIpO2k9dGhpcy5pc0lFKCkscGRmTWFrZS5jcmVhdGVQZGYoZSkuZ2V0QnVmZmVyKGZ1bmN0aW9uKGUpe2lmKG49bmV3IEJsb2IoW2VdKSxuYXZpZ2F0b3IubXNTYXZlQmxvYilyZXR1cm4gbmF2aWdhdG9yLm1zU2F2ZUJsb2IobixyKTtpZihpKXt2YXIgdD1vLmNyZWF0ZUVsZW1lbnQoImlmcmFtZSIpO3JldHVybiBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHQpLHQuY29udGVudFdpbmRvdy5kb2N1bWVudC5vcGVuKCJ0ZXh0L2h0bWwiLCJyZXBsYWNlIiksdC5jb250ZW50V2luZG93LmRvY3VtZW50LndyaXRlKG4pLHQuY29udGVudFdpbmRvdy5kb2N1bWVudC5jbG9zZSgpLHQuY29udGVudFdpbmRvdy5mb2N1cygpLHQuY29udGVudFdpbmRvdy5kb2N1bWVudC5leGVjQ29tbWFuZCgiU2F2ZUFzIiwhMCxyKSxkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHQpLCEwfX0pfSxwcmVwYXJlQXNQZGY6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXMuY2FsY3VsYXRlUGRmSGVhZGVyV2lkdGhzKGUsdCksbj10Lm1hcChmdW5jdGlvbihlKXtyZXR1cm57dGV4dDplLmRpc3BsYXlOYW1lLHN0eWxlOiJ0YWJsZUhlYWRlciJ9fSksbz1yLm1hcCh0aGlzLmZvcm1hdFJvd0FzUGRmKHRoaXMpKSxhPVtuXS5jb25jYXQobyksbD17cGFnZU9yaWVudGF0aW9uOmUub3B0aW9ucy5leHBvcnRlclBkZk9yaWVudGF0aW9uLHBhZ2VTaXplOmUub3B0aW9ucy5leHBvcnRlclBkZlBhZ2VTaXplLGNvbnRlbnQ6W3tzdHlsZToidGFibGVTdHlsZSIsdGFibGU6e2hlYWRlclJvd3M6MSx3aWR0aHM6aSxib2R5OmF9fV0sc3R5bGVzOnt0YWJsZVN0eWxlOmUub3B0aW9ucy5leHBvcnRlclBkZlRhYmxlU3R5bGUsdGFibGVIZWFkZXI6ZS5vcHRpb25zLmV4cG9ydGVyUGRmVGFibGVIZWFkZXJTdHlsZX0sZGVmYXVsdFN0eWxlOmUub3B0aW9ucy5leHBvcnRlclBkZkRlZmF1bHRTdHlsZX07cmV0dXJuIGUub3B0aW9ucy5leHBvcnRlclBkZkxheW91dCYmKGwubGF5b3V0PWUub3B0aW9ucy5leHBvcnRlclBkZkxheW91dCksZS5vcHRpb25zLmV4cG9ydGVyUGRmSGVhZGVyJiYobC5oZWFkZXI9ZS5vcHRpb25zLmV4cG9ydGVyUGRmSGVhZGVyKSxlLm9wdGlvbnMuZXhwb3J0ZXJQZGZGb290ZXImJihsLmZvb3Rlcj1lLm9wdGlvbnMuZXhwb3J0ZXJQZGZGb290ZXIpLGUub3B0aW9ucy5leHBvcnRlclBkZkN1c3RvbUZvcm1hdHRlciYmKGw9ZS5vcHRpb25zLmV4cG9ydGVyUGRmQ3VzdG9tRm9ybWF0dGVyKGwpKSxsfSxjYWxjdWxhdGVQZGZIZWFkZXJXaWR0aHM6ZnVuY3Rpb24odCxlKXt2YXIgcj0wO2UuZm9yRWFjaChmdW5jdGlvbihlKXsibnVtYmVyIj09dHlwZW9mIGUud2lkdGgmJihyKz1lLndpZHRoKX0pO3ZhciBpPTA7ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKCIqIj09PWUud2lkdGgmJihpKz0xMDApLCJzdHJpbmciPT10eXBlb2YgZS53aWR0aCYmZS53aWR0aC5tYXRjaCgvKFxkKSolLykpe3ZhciB0PXBhcnNlSW50KGUud2lkdGgubWF0Y2goLyhcZCkqJS8pWzBdKTtlLndpZHRoPXIqdC8xMDAsaSs9ZS53aWR0aH19KTt2YXIgbj1yK2k7cmV0dXJuIGUubWFwKGZ1bmN0aW9uKGUpe3JldHVybiIqIj09PWUud2lkdGg/ZS53aWR0aDplLndpZHRoKnQub3B0aW9ucy5leHBvcnRlclBkZk1heEdyaWRXaWR0aC9ufSl9LGZvcm1hdFJvd0FzUGRmOmZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gZS5tYXAodC5mb3JtYXRGaWVsZEFzUGRmU3RyaW5nKX19LGZvcm1hdEZpZWxkQXNQZGZTdHJpbmc6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIHQ9bnVsbD09ZS52YWx1ZT8iIjoibnVtYmVyIj09dHlwZW9mIGUudmFsdWU/ZS52YWx1ZS50b1N0cmluZygpOiJib29sZWFuIj09dHlwZW9mIGUudmFsdWU/ZS52YWx1ZT8iVFJVRSI6IkZBTFNFIjoic3RyaW5nIj09dHlwZW9mIGUudmFsdWU/ZS52YWx1ZS5yZXBsYWNlKC8iL2csJyIiJyk6ZS52YWx1ZSBpbnN0YW5jZW9mIERhdGU/SlNPTi5zdHJpbmdpZnkoZS52YWx1ZSkucmVwbGFjZSgvXiIvLCIiKS5yZXBsYWNlKC8iJC8sIiIpOiJvYmplY3QiPT10eXBlb2YgZS52YWx1ZT9lLnZhbHVlOkpTT04uc3RyaW5naWZ5KGUudmFsdWUpLnJlcGxhY2UoL14iLywiIikucmVwbGFjZSgvIiQvLCIiKSxlLmFsaWdubWVudCYmInN0cmluZyI9PXR5cGVvZiBlLmFsaWdubWVudCYmKHQ9e3RleHQ6dCxhbGlnbm1lbnQ6ZS5hbGlnbm1lbnR9KSx0fSxmb3JtYXRBc0V4Y2VsOmZ1bmN0aW9uKGUsdCxyLGksbil7Zm9yKHZhciBvPWUubWFwKGZ1bmN0aW9uKGUpe3JldHVybnt2YWx1ZTplLmRpc3BsYXlOYW1lfX0pLGE9W10sbD1bXSxzPTA7czxvLmxlbmd0aDtzKyspe3ZhciBkPSJoZWFkZXIiO3N3aXRjaChlW3NdLmFsaWduKXtjYXNlImNlbnRlciI6ZD0iaGVhZGVyQ2VudGVyIjticmVhaztjYXNlInJpZ2h0IjpkPSJoZWFkZXJSaWdodCJ9dmFyIHU9bi5zdHlsZXMmJm4uc3R5bGVzW2RdP3tzdHlsZTpuLnN0eWxlc1tkXS5pZH06bnVsbDtsLnB1c2goe3ZhbHVlOm9bc10udmFsdWUsbWV0YWRhdGE6dX0pfWEucHVzaChsKTtmb3IodmFyIGM9dC5tYXAodGhpcy5mb3JtYXRSb3dBc0V4Y2VsKHRoaXMscixpKSksZz0wO2c8Yy5sZW5ndGg7ZysrKWEucHVzaChjW2ddKTtyZXR1cm4gYX0sZm9ybWF0Um93QXNFeGNlbDpmdW5jdGlvbihuLG8sYSl7cmV0dXJuIGZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBpPW4uZm9ybWF0RmllbGRBc0V4Y2VsKGVbcl0sbyxhKTt0LnB1c2goe3ZhbHVlOmksbWV0YWRhdGE6ZVtyXS5tZXRhZGF0YX0pfXJldHVybiB0fX0sZm9ybWF0RmllbGRBc0V4Y2VsOmZ1bmN0aW9uKGUsdCxyLGkpe3JldHVybiBudWxsPT1lLnZhbHVlPyIiOiJudW1iZXIiPT10eXBlb2YgZS52YWx1ZT9lLnZhbHVlOiJib29sZWFuIj09dHlwZW9mIGUudmFsdWU/ZS52YWx1ZT8iVFJVRSI6IkZBTFNFIjoic3RyaW5nIj09dHlwZW9mIGUudmFsdWU/ZS52YWx1ZS5yZXBsYWNlKC8iL2csJyIiJyk6SlNPTi5zdHJpbmdpZnkoZS52YWx1ZSl9LHByZXBhcmVBc0V4Y2VsOmZ1bmN0aW9uKGUsdCxyKXt2YXIgaT17c3R5bGVzOnt9fTtpZihlLm9wdGlvbnMuZXhwb3J0ZXJFeGNlbEN1c3RvbUZvcm1hdHRlcnMmJihpPWUub3B0aW9ucy5leHBvcnRlckV4Y2VsQ3VzdG9tRm9ybWF0dGVycyhlLHQsaSkpLGUub3B0aW9ucy5leHBvcnRlckV4Y2VsSGVhZGVyKWlmKGFuZ3VsYXIuaXNGdW5jdGlvbihlLm9wdGlvbnMuZXhwb3J0ZXJFeGNlbEhlYWRlcikpZS5vcHRpb25zLmV4cG9ydGVyRXhjZWxIZWFkZXIoZSx0LHIsaSk7ZWxzZXt2YXIgbj1lLm9wdGlvbnMuZXhwb3J0ZXJFeGNlbEhlYWRlci50ZXh0LG89ZS5vcHRpb25zLmV4cG9ydGVyRXhjZWxIZWFkZXIuc3R5bGU7ci5kYXRhLnB1c2goW3t2YWx1ZTpuLG1ldGFkYXRhOntzdHlsZTppLnN0eWxlc1tvXS5pZH19XSl9cmV0dXJuIGl9LGV4Y2VsRXhwb3J0OmZ1bmN0aW9uKGQsdSxjKXt2YXIgZz10aGlzO3RoaXMubG9hZEFsbERhdGFJZk5lZWRlZChkLHUsYykudGhlbihmdW5jdGlvbigpe3ZhciBlPWQub3B0aW9ucy5zaG93SGVhZGVyP2cuZ2V0Q29sdW1uSGVhZGVycyhkLGMpOltdLHQ9bmV3IEV4Y2VsQnVpbGRlci5Xb3JrYm9vayxyPWQub3B0aW9ucy5leHBvcnRlckV4Y2VsU2hlZXROYW1lP2Qub3B0aW9ucy5leHBvcnRlckV4Y2VsU2hlZXROYW1lOiJTaGVldDEiLGk9bmV3IEV4Y2VsQnVpbGRlci5Xb3Jrc2hlZXQoe25hbWU6cn0pO3QuYWRkV29ya3NoZWV0KGkpO2Zvcih2YXIgbj1nLnByZXBhcmVBc0V4Y2VsKGQsdCxpKSxvPVtdLGE9ZC50cmVlQmFzZT9kLnRyZWVCYXNlLm51bWJlckxldmVsczpkLmVuYWJsZVJvd1NlbGVjdGlvbj8xOjA7YTxkLmNvbHVtbnMubGVuZ3RoO2ErKylkLmNvbHVtbnNbYV0uZmllbGQhPT1wLnJvd0hlYWRlckNvbE5hbWUmJmQuY29sdW1uc1thXS5maWVsZCE9PXAuc2VsZWN0aW9uUm93SGVhZGVyQ29sTmFtZSYmby5wdXNoKHt3aWR0aDpkLmNvbHVtbnNbYV0uZHJhd25XaWR0aC9kLm9wdGlvbnMuZXhwb3J0ZXJDb2x1bW5TY2FsZUZhY3Rvcn0pO2kuc2V0Q29sdW1ucyhvKTt2YXIgbD1nLmdldERhdGEoZCx1LGMsZC5vcHRpb25zLmV4cG9ydGVyRmllbGRBcHBseUZpbHRlcnMpLHM9Zy5mb3JtYXRBc0V4Y2VsKGUsbCx0LGksbik7aS5zZXREYXRhKGkuZGF0YS5jb25jYXQocykpLEV4Y2VsQnVpbGRlci5CdWlsZGVyLmNyZWF0ZUZpbGUodCx7dHlwZToiYmxvYiJ9KS50aGVuKGZ1bmN0aW9uKGUpe2cuZG93bmxvYWRGaWxlKGQub3B0aW9ucy5leHBvcnRlckV4Y2VsRmlsZW5hbWUsZSxkLm9wdGlvbnMuZXhwb3J0ZXJDc3ZDb2x1bW5TZXBhcmF0b3IsZC5vcHRpb25zLmV4cG9ydGVyT2xkZXJFeGNlbENvbXBhdGliaWxpdHkpfSl9KX19O2Z1bmN0aW9uIG8oZSx0LHIsaSl7cmV0dXJuIHIuY2VsbEZpbHRlcj9sKHIuY2VsbEZpbHRlci5zcGxpdCgiOiIpWzBdLnRyaW0oKSkoaSk6aX1yZXR1cm4gaX1dKSxlLmRpcmVjdGl2ZSgidWlHcmlkRXhwb3J0ZXIiLFsidWlHcmlkRXhwb3J0ZXJDb25zdGFudHMiLCJ1aUdyaWRFeHBvcnRlclNlcnZpY2UiLCJncmlkVXRpbCIsIiRjb21waWxlIixmdW5jdGlvbihlLG4sdCxyKXtyZXR1cm57cmVwbGFjZTohMCxwcmlvcml0eTowLHJlcXVpcmU6Il51aUdyaWQiLHNjb3BlOiExLGxpbms6ZnVuY3Rpb24oZSx0LHIsaSl7bi5pbml0aWFsaXplR3JpZChpLmdyaWQpLGkuZ3JpZC5leHBvcnRlci4kc2NvcGU9ZX19fV0pfSgpLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3ZhciBlPWFuZ3VsYXIubW9kdWxlKCJ1aS5ncmlkLmdyb3VwaW5nIixbInVpLmdyaWQiLCJ1aS5ncmlkLnRyZWVCYXNlIl0pO2UuY29uc3RhbnQoInVpR3JpZEdyb3VwaW5nQ29uc3RhbnRzIix7ZmVhdHVyZU5hbWU6Imdyb3VwaW5nIixyb3dIZWFkZXJDb2xOYW1lOiJ0cmVlQmFzZVJvd0hlYWRlckNvbCIsRVhQQU5ERUQ6ImV4cGFuZGVkIixDT0xMQVBTRUQ6ImNvbGxhcHNlZCIsYWdncmVnYXRpb246e0NPVU5UOiJjb3VudCIsU1VNOiJzdW0iLE1BWDoibWF4IixNSU46Im1pbiIsQVZHOiJhdmcifX0pLGUuc2VydmljZSgidWlHcmlkR3JvdXBpbmdTZXJ2aWNlIixbIiRxIiwidWlHcmlkR3JvdXBpbmdDb25zdGFudHMiLCJncmlkVXRpbCIsInJvd1NvcnRlciIsIkdyaWRSb3ciLCJncmlkQ2xhc3NGYWN0b3J5IiwiaTE4blNlcnZpY2UiLCJ1aUdyaWRDb25zdGFudHMiLCJ1aUdyaWRUcmVlQmFzZVNlcnZpY2UiLGZ1bmN0aW9uKGUsbCxzLGQsZyxwLHUsaSxjKXt2YXIgZj17aW5pdGlhbGl6ZUdyaWQ6ZnVuY3Rpb24obixlKXtjLmluaXRpYWxpemVHcmlkKG4sZSksbi5ncm91cGluZz17fSxuLmdyb3VwaW5nLmdyb3VwSGVhZGVyQ2FjaGU9e30sZi5kZWZhdWx0R3JpZE9wdGlvbnMobi5vcHRpb25zKSxuLnJlZ2lzdGVyUm93c1Byb2Nlc3NvcihmLmdyb3VwUm93cyw0MDApLG4ucmVnaXN0ZXJDb2x1bW5CdWlsZGVyKGYuZ3JvdXBpbmdDb2x1bW5CdWlsZGVyKSxuLnJlZ2lzdGVyQ29sdW1uc1Byb2Nlc3NvcihmLmdyb3VwaW5nQ29sdW1uUHJvY2Vzc29yLDQwMCk7dmFyIHQ9e2V2ZW50czp7Z3JvdXBpbmc6e2FnZ3JlZ2F0aW9uQ2hhbmdlZDp7fSxncm91cGluZ0NoYW5nZWQ6e319fSxtZXRob2RzOntncm91cGluZzp7Z2V0R3JvdXBpbmc6ZnVuY3Rpb24oZSl7dmFyIHQ9Zi5nZXRHcm91cGluZyhuKTtyZXR1cm4gdC5ncm91cGluZy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuY29sTmFtZT1lLmNvbC5uYW1lLGRlbGV0ZSBlLmNvbH0pLHQuYWdncmVnYXRpb25zLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5jb2xOYW1lPWUuY29sLm5hbWUsZGVsZXRlIGUuY29sfSksdC5hZ2dyZWdhdGlvbnM9dC5hZ2dyZWdhdGlvbnMuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiFlLmFnZ3JlZ2F0aW9uLnNvdXJjZXx8Imdyb3VwaW5nIiE9PWUuYWdncmVnYXRpb24uc291cmNlfSksZSYmKHQucm93RXhwYW5kZWRTdGF0ZXM9Zi5nZXRSb3dFeHBhbmRlZFN0YXRlcyhuLmdyb3VwaW5nLmdyb3VwaW5nSGVhZGVyQ2FjaGUpKSx0fSxzZXRHcm91cGluZzpmdW5jdGlvbihlKXtmLnNldEdyb3VwaW5nKG4sZSl9LGdyb3VwQ29sdW1uOmZ1bmN0aW9uKGUpe3ZhciB0PW4uZ2V0Q29sdW1uKGUpO2YuZ3JvdXBDb2x1bW4obix0KX0sdW5ncm91cENvbHVtbjpmdW5jdGlvbihlKXt2YXIgdD1uLmdldENvbHVtbihlKTtmLnVuZ3JvdXBDb2x1bW4obix0KX0sY2xlYXJHcm91cGluZzpmdW5jdGlvbigpe2YuY2xlYXJHcm91cGluZyhuKX0sYWdncmVnYXRlQ29sdW1uOmZ1bmN0aW9uKGUsdCxyKXt2YXIgaT1uLmdldENvbHVtbihlKTtmLmFnZ3JlZ2F0ZUNvbHVtbihuLGksdCxyKX19fX07bi5hcGkucmVnaXN0ZXJFdmVudHNGcm9tT2JqZWN0KHQuZXZlbnRzKSxuLmFwaS5yZWdpc3Rlck1ldGhvZHNGcm9tT2JqZWN0KHQubWV0aG9kcyksbi5hcGkuY29yZS5vbi5zb3J0Q2hhbmdlZChlLGYudGlkeVByaW9yaXRpZXMpfSxkZWZhdWx0R3JpZE9wdGlvbnM6ZnVuY3Rpb24oZSl7ZS5lbmFibGVHcm91cGluZz0hMSE9PWUuZW5hYmxlR3JvdXBpbmcsZS5ncm91cGluZ1Nob3dDb3VudHM9ITEhPT1lLmdyb3VwaW5nU2hvd0NvdW50cyxlLmdyb3VwaW5nTnVsbExhYmVsPXZvaWQgMD09PWUuZ3JvdXBpbmdOdWxsTGFiZWw/Ik51bGwiOmUuZ3JvdXBpbmdOdWxsTGFiZWwsZS5lbmFibGVHcm91cEhlYWRlclNlbGVjdGlvbj0hMD09PWUuZW5hYmxlR3JvdXBIZWFkZXJTZWxlY3Rpb259LGdyb3VwaW5nQ29sdW1uQnVpbGRlcjpmdW5jdGlvbihlLGksdCl7aWYoITEhPT1lLmVuYWJsZUdyb3VwaW5nKXt2b2lkIDA9PT1pLmdyb3VwaW5nJiZ2b2lkIDAhPT1lLmdyb3VwaW5nPyhpLmdyb3VwaW5nPWFuZ3VsYXIuY29weShlLmdyb3VwaW5nKSx2b2lkIDAhPT1pLmdyb3VwaW5nLmdyb3VwUHJpb3JpdHkmJi0xPGkuZ3JvdXBpbmcuZ3JvdXBQcmlvcml0eSYmKGkudHJlZUFnZ3JlZ2F0aW9uRm49Yy5uYXRpdmVBZ2dyZWdhdGlvbnMoKVtsLmFnZ3JlZ2F0aW9uLkNPVU5UXS5hZ2dyZWdhdGlvbkZuLGkudHJlZUFnZ3JlZ2F0aW9uRmluYWxpemVyRm49Zi5ncm91cGVkRmluYWxpemVyRm4pKTp2b2lkIDA9PT1pLmdyb3VwaW5nJiYoaS5ncm91cGluZz17fSksdm9pZCAwIT09aS5ncm91cGluZyYmdm9pZCAwIT09aS5ncm91cGluZy5ncm91cFByaW9yaXR5JiYwPD1pLmdyb3VwaW5nLmdyb3VwUHJpb3JpdHkmJihpLnN1cHByZXNzUmVtb3ZlU29ydD0hMCk7dmFyIHI9e25hbWU6InVpLmdyaWQuZ3JvdXBpbmcuZ3JvdXAiLHRpdGxlOnUuZ2V0KCkuZ3JvdXBpbmcuZ3JvdXAsaWNvbjoidWktZ3JpZC1pY29uLWluZGVudC1yaWdodCIsc2hvd246ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwPT09dGhpcy5jb250ZXh0LmNvbC5ncm91cGluZ3x8dm9pZCAwPT09dGhpcy5jb250ZXh0LmNvbC5ncm91cGluZy5ncm91cFByaW9yaXR5fHx0aGlzLmNvbnRleHQuY29sLmdyb3VwaW5nLmdyb3VwUHJpb3JpdHk8MH0sYWN0aW9uOmZ1bmN0aW9uKCl7Zi5ncm91cENvbHVtbih0aGlzLmNvbnRleHQuY29sLmdyaWQsdGhpcy5jb250ZXh0LmNvbCl9fSxuPXtuYW1lOiJ1aS5ncmlkLmdyb3VwaW5nLnVuZ3JvdXAiLHRpdGxlOnUuZ2V0KCkuZ3JvdXBpbmcudW5ncm91cCxpY29uOiJ1aS1ncmlkLWljb24taW5kZW50LWxlZnQiLHNob3duOmZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMuY29udGV4dC5jb2wuZ3JvdXBpbmcmJnZvaWQgMCE9PXRoaXMuY29udGV4dC5jb2wuZ3JvdXBpbmcuZ3JvdXBQcmlvcml0eSYmMDw9dGhpcy5jb250ZXh0LmNvbC5ncm91cGluZy5ncm91cFByaW9yaXR5fSxhY3Rpb246ZnVuY3Rpb24oKXtmLnVuZ3JvdXBDb2x1bW4odGhpcy5jb250ZXh0LmNvbC5ncmlkLHRoaXMuY29udGV4dC5jb2wpfX0sbz17bmFtZToidWkuZ3JpZC5ncm91cGluZy5hZ2dyZWdhdGVSZW1vdmUiLHRpdGxlOnUuZ2V0KCkuZ3JvdXBpbmcuYWdncmVnYXRlX3JlbW92ZSxzaG93bjpmdW5jdGlvbigpe3JldHVybiB2b2lkIDAhPT10aGlzLmNvbnRleHQuY29sLnRyZWVBZ2dyZWdhdGlvbkZufSxhY3Rpb246ZnVuY3Rpb24oKXtmLmFnZ3JlZ2F0ZUNvbHVtbih0aGlzLmNvbnRleHQuY29sLmdyaWQsdGhpcy5jb250ZXh0LmNvbCxudWxsKX19LGE9ZnVuY3Rpb24oZSx0KXt0PXR8fHUuZ2V0KCkuZ3JvdXBpbmdbImFnZ3JlZ2F0ZV8iK2VdfHxlO3ZhciByPXtuYW1lOiJ1aS5ncmlkLmdyb3VwaW5nLmFnZ3JlZ2F0ZSIrZSx0aXRsZTp0LHNob3duOmZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMD09PXRoaXMuY29udGV4dC5jb2wudHJlZUFnZ3JlZ2F0aW9ufHx2b2lkIDA9PT10aGlzLmNvbnRleHQuY29sLnRyZWVBZ2dyZWdhdGlvbi50eXBlfHx0aGlzLmNvbnRleHQuY29sLnRyZWVBZ2dyZWdhdGlvbi50eXBlIT09ZX0sYWN0aW9uOmZ1bmN0aW9uKCl7Zi5hZ2dyZWdhdGVDb2x1bW4odGhpcy5jb250ZXh0LmNvbC5ncmlkLHRoaXMuY29udGV4dC5jb2wsZSl9fTtzLmFycmF5Q29udGFpbnNPYmplY3RXaXRoUHJvcGVydHkoaS5tZW51SXRlbXMsIm5hbWUiLCJ1aS5ncmlkLmdyb3VwaW5nLmFnZ3JlZ2F0ZSIrZSl8fGkubWVudUl0ZW1zLnB1c2gocil9OyExIT09aS5jb2xEZWYuZ3JvdXBpbmdTaG93R3JvdXBpbmdNZW51JiYocy5hcnJheUNvbnRhaW5zT2JqZWN0V2l0aFByb3BlcnR5KGkubWVudUl0ZW1zLCJuYW1lIiwidWkuZ3JpZC5ncm91cGluZy5ncm91cCIpfHxpLm1lbnVJdGVtcy5wdXNoKHIpLHMuYXJyYXlDb250YWluc09iamVjdFdpdGhQcm9wZXJ0eShpLm1lbnVJdGVtcywibmFtZSIsInVpLmdyaWQuZ3JvdXBpbmcudW5ncm91cCIpfHxpLm1lbnVJdGVtcy5wdXNoKG4pKSwhMSE9PWkuY29sRGVmLmdyb3VwaW5nU2hvd0FnZ3JlZ2F0aW9uTWVudSYmKGFuZ3VsYXIuZm9yRWFjaChjLm5hdGl2ZUFnZ3JlZ2F0aW9ucygpLGZ1bmN0aW9uKGUsdCl7YSh0KX0pLGFuZ3VsYXIuZm9yRWFjaCh0LnRyZWVDdXN0b21BZ2dyZWdhdGlvbnMsZnVuY3Rpb24oZSx0KXthKHQsZS5tZW51VGl0bGUpfSkscy5hcnJheUNvbnRhaW5zT2JqZWN0V2l0aFByb3BlcnR5KGkubWVudUl0ZW1zLCJuYW1lIiwidWkuZ3JpZC5ncm91cGluZy5hZ2dyZWdhdGVSZW1vdmUiKXx8aS5tZW51SXRlbXMucHVzaChvKSl9fSxncm91cGluZ0NvbHVtblByb2Nlc3NvcjpmdW5jdGlvbihlLHQpe3JldHVybiBlPWYubW92ZUdyb3VwQ29sdW1ucyh0aGlzLGUsdCl9LGdyb3VwZWRGaW5hbGl6ZXJGbjpmdW5jdGlvbihlKXt2b2lkIDAhPT1lLmdyb3VwVmFsPyhlLnJlbmRlcmVkPWUuZ3JvdXBWYWwsdGhpcy5ncmlkLm9wdGlvbnMuZ3JvdXBpbmdTaG93Q291bnRzJiYiZGF0ZSIhPT10aGlzLmNvbERlZi50eXBlJiYib2JqZWN0IiE9PXRoaXMuY29sRGVmLnR5cGUmJihlLnJlbmRlcmVkKz0iICgiK2UudmFsdWUrIikiKSk6ZS5yZW5kZXJlZD1udWxsfSxtb3ZlR3JvdXBDb2x1bW5zOmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4hMT09PWUub3B0aW9ucy5tb3ZlR3JvdXBDb2x1bW5zfHwodC5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7ZS5ncm91cGluZ1Bvc2l0aW9uPXR9KSx0LnNvcnQoZnVuY3Rpb24oZSx0KXt2YXIgcixpO3JldHVybiByPWUuaXNSb3dIZWFkZXI/ZS5oZWFkZXJQcmlvcml0eTp2b2lkIDA9PT1lLmdyb3VwaW5nfHx2b2lkIDA9PT1lLmdyb3VwaW5nLmdyb3VwUHJpb3JpdHl8fGUuZ3JvdXBpbmcuZ3JvdXBQcmlvcml0eTwwP251bGw6ZS5ncm91cGluZy5ncm91cFByaW9yaXR5LGk9dC5pc1Jvd0hlYWRlcj90LmhlYWRlclByaW9yaXR5OnZvaWQgMD09PXQuZ3JvdXBpbmd8fHZvaWQgMD09PXQuZ3JvdXBpbmcuZ3JvdXBQcmlvcml0eXx8dC5ncm91cGluZy5ncm91cFByaW9yaXR5PDA/bnVsbDp0Lmdyb3VwaW5nLmdyb3VwUHJpb3JpdHksbnVsbCE9PXImJm51bGw9PT1pPy0xOm51bGwhPT1pJiZudWxsPT09cj8xOm51bGwhPT1yJiZudWxsIT09aT9yLWk6ZS5ncm91cGluZ1Bvc2l0aW9uLXQuZ3JvdXBpbmdQb3NpdGlvbn0pLHQuZm9yRWFjaChmdW5jdGlvbihlLHQpe2RlbGV0ZSBlLmdyb3VwaW5nUG9zaXRpb259KSksdH0sZ3JvdXBDb2x1bW46ZnVuY3Rpb24oZSx0KXt2b2lkIDA9PT10Lmdyb3VwaW5nJiYodC5ncm91cGluZz17fSk7dmFyIHI9Zi5nZXRHcm91cGluZyhlKTt0Lmdyb3VwaW5nLmdyb3VwUHJpb3JpdHk9ci5ncm91cGluZy5sZW5ndGgsdC5wcmV2aW91c1NvcnQ9YW5ndWxhci5jb3B5KHQuc29ydCksdC5zb3J0P3ZvaWQgMCE9PXQuc29ydC5kaXJlY3Rpb24mJm51bGwhPT10LnNvcnQuZGlyZWN0aW9ufHwodC5zb3J0LmRpcmVjdGlvbj1pLkFTQyk6dC5zb3J0PXtkaXJlY3Rpb246aS5BU0N9LHQudHJlZUFnZ3JlZ2F0aW9uPXt0eXBlOmwuYWdncmVnYXRpb24uQ09VTlQsc291cmNlOiJncm91cGluZyJ9LHQudHJlZUFnZ3JlZ2F0aW9uRm49Yy5uYXRpdmVBZ2dyZWdhdGlvbnMoKVtsLmFnZ3JlZ2F0aW9uLkNPVU5UXS5hZ2dyZWdhdGlvbkZuLHQudHJlZUFnZ3JlZ2F0aW9uRmluYWxpemVyRm49Zi5ncm91cGVkRmluYWxpemVyRm4sZS5hcGkuZ3JvdXBpbmcucmFpc2UuZ3JvdXBpbmdDaGFuZ2VkKHQpLGUuYXBpLmNvcmUucmFpc2Uuc29ydENoYW5nZWQoZSxlLmdldENvbHVtblNvcnRpbmcoKSksZS5xdWV1ZUdyaWRSZWZyZXNoKCl9LHVuZ3JvdXBDb2x1bW46ZnVuY3Rpb24oZSx0KXt2b2lkIDAhPT10Lmdyb3VwaW5nJiYoZGVsZXRlIHQuZ3JvdXBpbmcuZ3JvdXBQcmlvcml0eSxkZWxldGUgdC50cmVlQWdncmVnYXRpb24sZGVsZXRlIHQuY3VzdG9tVHJlZUFnZ3JlZ2F0aW9uRmluYWxpemVyLHQucHJldmlvdXNTb3J0JiYodC5zb3J0PXQucHJldmlvdXNTb3J0LGRlbGV0ZSB0LnByZXZpb3VzU29ydCksZi50aWR5UHJpb3JpdGllcyhlKSxlLmFwaS5ncm91cGluZy5yYWlzZS5ncm91cGluZ0NoYW5nZWQodCksZS5hcGkuY29yZS5yYWlzZS5zb3J0Q2hhbmdlZChlLGUuZ2V0Q29sdW1uU29ydGluZygpKSxlLnF1ZXVlR3JpZFJlZnJlc2goKSl9LGFnZ3JlZ2F0ZUNvbHVtbjpmdW5jdGlvbihlLHQscil7dm9pZCAwIT09dC5ncm91cGluZyYmdm9pZCAwIT09dC5ncm91cGluZy5ncm91cFByaW9yaXR5JiYwPD10Lmdyb3VwaW5nLmdyb3VwUHJpb3JpdHkmJmYudW5ncm91cENvbHVtbihlLHQpO3ZhciBpPXt9O3ZvaWQgMCE9PWUub3B0aW9ucy50cmVlQ3VzdG9tQWdncmVnYXRpb25zW3JdP2k9ZS5vcHRpb25zLnRyZWVDdXN0b21BZ2dyZWdhdGlvbnNbcl06dm9pZCAwIT09Yy5uYXRpdmVBZ2dyZWdhdGlvbnMoKVtyXSYmKGk9Yy5uYXRpdmVBZ2dyZWdhdGlvbnMoKVtyXSksdC50cmVlQWdncmVnYXRpb249e3R5cGU6cixsYWJlbDp1LmdldCgpLmFnZ3JlZ2F0aW9uW2kubGFiZWxdfHxpLmxhYmVsfSx0LnRyZWVBZ2dyZWdhdGlvbkZuPWkuYWdncmVnYXRpb25Gbix0LnRyZWVBZ2dyZWdhdGlvbkZpbmFsaXplckZuPWkuZmluYWxpemVyRm4sZS5hcGkuZ3JvdXBpbmcucmFpc2UuYWdncmVnYXRpb25DaGFuZ2VkKHQpLGUucXVldWVHcmlkUmVmcmVzaCgpfSxzZXRHcm91cGluZzpmdW5jdGlvbihyLGUpe3ZvaWQgMCE9PWUmJihmLmNsZWFyR3JvdXBpbmcociksZS5ncm91cGluZyYmZS5ncm91cGluZy5sZW5ndGgmJjA8ZS5ncm91cGluZy5sZW5ndGgmJmUuZ3JvdXBpbmcuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD1yLmdldENvbHVtbihlLmNvbE5hbWUpO3QmJmYuZ3JvdXBDb2x1bW4ocix0KX0pLGUuYWdncmVnYXRpb25zJiZlLmFnZ3JlZ2F0aW9ucy5sZW5ndGgmJmUuYWdncmVnYXRpb25zLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9ci5nZXRDb2x1bW4oZS5jb2xOYW1lKTt0JiZmLmFnZ3JlZ2F0ZUNvbHVtbihyLHQsZS5hZ2dyZWdhdGlvbi50eXBlKX0pLGUucm93RXhwYW5kZWRTdGF0ZXMmJmYuYXBwbHlSb3dFeHBhbmRlZFN0YXRlcyhyLmdyb3VwaW5nLmdyb3VwaW5nSGVhZGVyQ2FjaGUsZS5yb3dFeHBhbmRlZFN0YXRlcykpfSxjbGVhckdyb3VwaW5nOmZ1bmN0aW9uKHQpe3ZhciBlPWYuZ2V0R3JvdXBpbmcodCk7MDxlLmdyb3VwaW5nLmxlbmd0aCYmZS5ncm91cGluZy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuY29sfHwoZS5jb2w9dC5nZXRDb2x1bW4oZS5jb2xOYW1lKSksZi51bmdyb3VwQ29sdW1uKHQsZS5jb2wpfSksMDxlLmFnZ3JlZ2F0aW9ucy5sZW5ndGgmJmUuYWdncmVnYXRpb25zLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5jb2x8fChlLmNvbD10LmdldENvbHVtbihlLmNvbE5hbWUpKSxmLmFnZ3JlZ2F0ZUNvbHVtbih0LGUuY29sLG51bGwpfSl9LHRpZHlQcmlvcml0aWVzOmZ1bmN0aW9uKGUpe3ZvaWQgMCE9PWUmJnZvaWQgMD09PWUuZ3JpZHx8dm9pZCAwPT09dGhpcy5ncmlkfHwoZT10aGlzLmdyaWQpO3ZhciByPVtdLGk9W107ZS5jb2x1bW5zLmZvckVhY2goZnVuY3Rpb24oZSx0KXt2b2lkIDAhPT1lLmdyb3VwaW5nJiZ2b2lkIDAhPT1lLmdyb3VwaW5nLmdyb3VwUHJpb3JpdHkmJjA8PWUuZ3JvdXBpbmcuZ3JvdXBQcmlvcml0eT9yLnB1c2goZSk6dm9pZCAwIT09ZS5zb3J0JiZ2b2lkIDAhPT1lLnNvcnQucHJpb3JpdHkmJjA8PWUuc29ydC5wcmlvcml0eSYmaS5wdXNoKGUpfSksci5zb3J0KGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuZ3JvdXBpbmcuZ3JvdXBQcmlvcml0eS10Lmdyb3VwaW5nLmdyb3VwUHJpb3JpdHl9KSxyLmZvckVhY2goZnVuY3Rpb24oZSx0KXtlLmdyb3VwaW5nLmdyb3VwUHJpb3JpdHk9dCxlLnN1cHByZXNzUmVtb3ZlU29ydD0hMCx2b2lkIDA9PT1lLnNvcnQmJihlLnNvcnQ9e30pLGUuc29ydC5wcmlvcml0eT10fSk7dmFyIG49ci5sZW5ndGg7aS5zb3J0KGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuc29ydC5wcmlvcml0eS10LnNvcnQucHJpb3JpdHl9KSxpLmZvckVhY2goZnVuY3Rpb24oZSx0KXtlLnNvcnQucHJpb3JpdHk9bixlLnN1cHByZXNzUmVtb3ZlU29ydD1lLmNvbERlZi5zdXBwcmVzc1JlbW92ZVNvcnQsbisrfSl9LGdyb3VwUm93czpmdW5jdGlvbihpKXtpZigwPT09aS5sZW5ndGgpcmV0dXJuIGk7dmFyIG49dGhpcztuLmdyb3VwaW5nLm9sZEdyb3VwaW5nSGVhZGVyQ2FjaGU9bi5ncm91cGluZy5ncm91cGluZ0hlYWRlckNhY2hlfHx7fSxuLmdyb3VwaW5nLmdyb3VwaW5nSGVhZGVyQ2FjaGU9e307Zm9yKHZhciBvPWYuaW5pdGlhbGlzZVByb2Nlc3NpbmdTdGF0ZShuKSxlPWZ1bmN0aW9uKGUsdCl7dmFyIHI9bi5nZXRDZWxsVmFsdWUobCxlLmNvbCk7ZS5pbml0aWFsaXNlZCYmMD09PWQuZ2V0U29ydEZuKG4sZS5jb2wsaSkocixlLmN1cnJlbnRWYWx1ZSl8fChmLmluc2VydEdyb3VwSGVhZGVyKG4saSxhLG8sdCksYSsrKX0sYT0wO2E8aS5sZW5ndGg7YSsrKXt2YXIgbD1pW2FdO2wudmlzaWJsZSYmby5mb3JFYWNoKGUpfXJldHVybiBkZWxldGUgbi5ncm91cGluZy5vbGRHcm91cGluZ0hlYWRlckNhY2hlLGl9LGluaXRpYWxpc2VQcm9jZXNzaW5nU3RhdGU6ZnVuY3Rpb24oZSl7dmFyIHI9W107cmV0dXJuIGYuZ2V0R3JvdXBpbmcoZSkuZ3JvdXBpbmcuZm9yRWFjaChmdW5jdGlvbihlLHQpe3IucHVzaCh7ZmllbGROYW1lOmUuZmllbGQsY29sOmUuY29sLGluaXRpYWxpc2VkOiExLGN1cnJlbnRWYWx1ZTpudWxsLGN1cnJlbnRSb3c6bnVsbH0pfSkscn0sZ2V0R3JvdXBpbmc6ZnVuY3Rpb24oZSl7dmFyIHI9W10saT1bXTtyZXR1cm4gZS5jb2x1bW5zLmZvckVhY2goZnVuY3Rpb24oZSx0KXtlLmdyb3VwaW5nJiZ2b2lkIDAhPT1lLmdyb3VwaW5nLmdyb3VwUHJpb3JpdHkmJjA8PWUuZ3JvdXBpbmcuZ3JvdXBQcmlvcml0eSYmci5wdXNoKHtmaWVsZDplLmZpZWxkLGNvbDplLGdyb3VwUHJpb3JpdHk6ZS5ncm91cGluZy5ncm91cFByaW9yaXR5LGdyb3VwaW5nOmUuZ3JvdXBpbmd9KSxlLnRyZWVBZ2dyZWdhdGlvbiYmZS50cmVlQWdncmVnYXRpb24udHlwZSYmaS5wdXNoKHtmaWVsZDplLmZpZWxkLGNvbDplLGFnZ3JlZ2F0aW9uOmUudHJlZUFnZ3JlZ2F0aW9ufSl9KSxyLnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5ncm91cFByaW9yaXR5LXQuZ3JvdXBQcmlvcml0eX0pLHIuZm9yRWFjaChmdW5jdGlvbihlLHQpe2UuZ3JvdXBpbmcuZ3JvdXBQcmlvcml0eT10LGUuZ3JvdXBQcmlvcml0eT10LGRlbGV0ZSBlLmdyb3VwaW5nfSkse2dyb3VwaW5nOnIsYWdncmVnYXRpb25zOml9fSxpbnNlcnRHcm91cEhlYWRlcjpmdW5jdGlvbihlLHQscixpLG4pe2lbbl0uZmllbGROYW1lO3ZhciBvPWlbbl0uY29sLGE9ZS5nZXRDZWxsVmFsdWUodFtyXSxvKSxsPWE7bnVsbD09YSYmKGw9ZS5vcHRpb25zLmdyb3VwaW5nTnVsbExhYmVsKTtmb3IodmFyIHMsZD1mdW5jdGlvbihlKXtyZXR1cm4gYW5ndWxhci5pc09iamVjdChlKT9KU09OLnN0cmluZ2lmeShlKTplfSx1PWUuZ3JvdXBpbmcub2xkR3JvdXBpbmdIZWFkZXJDYWNoZSxjPTA7YzxuO2MrKyl1JiZ1W2QoaVtjXS5jdXJyZW50VmFsdWUpXSYmKHU9dVtkKGlbY10uY3VycmVudFZhbHVlKV0uY2hpbGRyZW4pO2Zvcih1JiZ1W2QoYSldPyhzPXVbZChhKV0ucm93KS5lbnRpdHk9e306KHM9bmV3IGcoe30sbnVsbCxlKSxwLnJvd1RlbXBsYXRlQXNzaWduZXIuY2FsbChlLHMpKSxzLmVudGl0eVsiJCQiK2lbbl0uY29sLnVpZF09e2dyb3VwVmFsOmx9LHMudHJlZUxldmVsPW4scy5ncm91cEhlYWRlcj0hMCxzLmludGVybmFsUm93PSEwLHMuZW5hYmxlQ2VsbEVkaXQ9ITEscy5lbmFibGVTZWxlY3Rpb249ZS5vcHRpb25zLmVuYWJsZUdyb3VwSGVhZGVyU2VsZWN0aW9uLGlbbl0uaW5pdGlhbGlzZWQ9ITAsaVtuXS5jdXJyZW50VmFsdWU9YSxpW25dLmN1cnJlbnRSb3c9cyxmLmZpbmFsaXNlUHJvY2Vzc2luZ1N0YXRlKGksbisxKSx0LnNwbGljZShyLDAscyksdT1lLmdyb3VwaW5nLmdyb3VwaW5nSGVhZGVyQ2FjaGUsYz0wO2M8bjtjKyspdT11W2QoaVtjXS5jdXJyZW50VmFsdWUpXS5jaGlsZHJlbjt1W2QoYSldPXtyb3c6cyxjaGlsZHJlbjp7fX19LGZpbmFsaXNlUHJvY2Vzc2luZ1N0YXRlOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPXQ7cjxlLmxlbmd0aDtyKyspZVtyXS5pbml0aWFsaXNlZD0hMSxlW3JdLmN1cnJlbnRSb3c9bnVsbCxlW3JdLmN1cnJlbnRWYWx1ZT1udWxsfSxnZXRSb3dFeHBhbmRlZFN0YXRlczpmdW5jdGlvbihlKXtpZih2b2lkIDA9PT1lKXJldHVybnt9O3ZhciByPXt9O3JldHVybiBhbmd1bGFyLmZvckVhY2goZSxmdW5jdGlvbihlLHQpe3JbdF09e3N0YXRlOmUucm93LnRyZWVOb2RlLnN0YXRlfSxlLmNoaWxkcmVuP3JbdF0uY2hpbGRyZW49Zi5nZXRSb3dFeHBhbmRlZFN0YXRlcyhlLmNoaWxkcmVuKTpyW3RdLmNoaWxkcmVuPXt9fSkscn0sYXBwbHlSb3dFeHBhbmRlZFN0YXRlczpmdW5jdGlvbihyLGUpe3ZvaWQgMCE9PWUmJmFuZ3VsYXIuZm9yRWFjaChlLGZ1bmN0aW9uKGUsdCl7clt0XSYmKHJbdF0ucm93LnRyZWVOb2RlLnN0YXRlPWUuc3RhdGUsZS5jaGlsZHJlbiYmclt0XS5jaGlsZHJlbiYmZi5hcHBseVJvd0V4cGFuZGVkU3RhdGVzKHJbdF0uY2hpbGRyZW4sZS5jaGlsZHJlbikpfSl9fTtyZXR1cm4gZn1dKSxlLmRpcmVjdGl2ZSgidWlHcmlkR3JvdXBpbmciLFsidWlHcmlkR3JvdXBpbmdDb25zdGFudHMiLCJ1aUdyaWRHcm91cGluZ1NlcnZpY2UiLGZ1bmN0aW9uKGUsbil7cmV0dXJue3JlcGxhY2U6ITAscHJpb3JpdHk6MCxyZXF1aXJlOiJedWlHcmlkIixzY29wZTohMSxjb21waWxlOmZ1bmN0aW9uKCl7cmV0dXJue3ByZTpmdW5jdGlvbihlLHQscixpKXshMSE9PWkuZ3JpZC5vcHRpb25zLmVuYWJsZUdyb3VwaW5nJiZuLmluaXRpYWxpemVHcmlkKGkuZ3JpZCxlKX0scG9zdDpmdW5jdGlvbihlLHQscixpKXt9fX19fV0pfSgpLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3ZhciBlPWFuZ3VsYXIubW9kdWxlKCJ1aS5ncmlkLmltcG9ydGVyIixbInVpLmdyaWQiXSk7ZS5jb25zdGFudCgidWlHcmlkSW1wb3J0ZXJDb25zdGFudHMiLHtmZWF0dXJlTmFtZToiaW1wb3J0ZXIifSksZS5zZXJ2aWNlKCJ1aUdyaWRJbXBvcnRlclNlcnZpY2UiLFsiJHEiLCJ1aUdyaWRDb25zdGFudHMiLCJ1aUdyaWRJbXBvcnRlckNvbnN0YW50cyIsImdyaWRVdGlsIiwiJGNvbXBpbGUiLCIkaW50ZXJ2YWwiLCJpMThuU2VydmljZSIsIiR3aW5kb3ciLGZ1bmN0aW9uKGUsbix0LG8scixpLGEsbCl7dmFyIHM9e2luaXRpYWxpemVHcmlkOmZ1bmN0aW9uKGUsdCl7dC5pbXBvcnRlcj17JHNjb3BlOmV9LHRoaXMuZGVmYXVsdEdyaWRPcHRpb25zKHQub3B0aW9ucyk7dmFyIHI9e2V2ZW50czp7aW1wb3J0ZXI6e319LG1ldGhvZHM6e2ltcG9ydGVyOntpbXBvcnRGaWxlOmZ1bmN0aW9uKGUpe3MuaW1wb3J0VGhpc0ZpbGUodCxlKX19fX07dC5hcGkucmVnaXN0ZXJFdmVudHNGcm9tT2JqZWN0KHIuZXZlbnRzKSx0LmFwaS5yZWdpc3Rlck1ldGhvZHNGcm9tT2JqZWN0KHIubWV0aG9kcyksdC5vcHRpb25zLmVuYWJsZUltcG9ydGVyJiZ0Lm9wdGlvbnMuaW1wb3J0ZXJTaG93TWVudSYmKHQuYXBpLmNvcmUuYWRkVG9HcmlkTWVudT9zLmFkZFRvTWVudSh0KTppKGZ1bmN0aW9uKCl7dC5hcGkuY29yZS5hZGRUb0dyaWRNZW51JiZzLmFkZFRvTWVudSh0KX0sMTAwLDEpKX0sZGVmYXVsdEdyaWRPcHRpb25zOmZ1bmN0aW9uKGUpe2UuZW5hYmxlSW1wb3J0ZXJ8fHZvaWQgMD09PWUuZW5hYmxlSW1wb3J0ZXI/bC5oYXNPd25Qcm9wZXJ0eSgiRmlsZSIpJiZsLmhhc093blByb3BlcnR5KCJGaWxlUmVhZGVyIikmJmwuaGFzT3duUHJvcGVydHkoIkZpbGVMaXN0IikmJmwuaGFzT3duUHJvcGVydHkoIkJsb2IiKT9lLmVuYWJsZUltcG9ydGVyPSEwOihvLmxvZ0Vycm9yKCJUaGUgRmlsZSBBUElzIGFyZSBub3QgZnVsbHkgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlciwgZ3JpZCBpbXBvcnRlciBjYW5ub3QgYmUgdXNlZC4iKSxlLmVuYWJsZUltcG9ydGVyPSExKTplLmVuYWJsZUltcG9ydGVyPSExLGUuaW1wb3J0ZXJQcm9jZXNzSGVhZGVycz1lLmltcG9ydGVyUHJvY2Vzc0hlYWRlcnN8fHMucHJvY2Vzc0hlYWRlcnMsZS5pbXBvcnRlckhlYWRlckZpbHRlcj1lLmltcG9ydGVySGVhZGVyRmlsdGVyfHxmdW5jdGlvbihlKXtyZXR1cm4gZX0sZS5pbXBvcnRlckVycm9yQ2FsbGJhY2smJiJmdW5jdGlvbiI9PXR5cGVvZiBlLmltcG9ydGVyRXJyb3JDYWxsYmFja3x8ZGVsZXRlIGUuaW1wb3J0ZXJFcnJvckNhbGxiYWNrLCEwIT09ZS5lbmFibGVJbXBvcnRlcnx8ZS5pbXBvcnRlckRhdGFBZGRDYWxsYmFja3x8KG8ubG9nRXJyb3IoIllvdSBoYXZlIG5vdCBzZXQgYW4gaW1wb3J0ZXJEYXRhQWRkQ2FsbGJhY2ssIGltcG9ydGVyIGlzIGRpc2FibGVkIiksZS5lbmFibGVJbXBvcnRlcj0hMSksZS5pbXBvcnRlclNob3dNZW51PSExIT09ZS5pbXBvcnRlclNob3dNZW51LGUuaW1wb3J0ZXJPYmplY3RDYWxsYmFjaz1lLmltcG9ydGVyT2JqZWN0Q2FsbGJhY2t8fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR9fSxhZGRUb01lbnU6ZnVuY3Rpb24odCl7dC5hcGkuY29yZS5hZGRUb0dyaWRNZW51KHQsW3t0aXRsZTphLmdldFNhZmVUZXh0KCJncmlkTWVudS5pbXBvcnRlclRpdGxlIiksb3JkZXI6MTUwfSx7dGVtcGxhdGVVcmw6InVpLWdyaWQvaW1wb3J0ZXJNZW51SXRlbUNvbnRhaW5lciIsYWN0aW9uOmZ1bmN0aW9uKGUpe3RoaXMuZ3JpZC5hcGkuaW1wb3J0ZXIuaW1wb3J0QUZpbGUodCl9LG9yZGVyOjE1MX1dKX0saW1wb3J0VGhpc0ZpbGU6ZnVuY3Rpb24oZSx0KXtpZih0KXt2YXIgcj1uZXcgRmlsZVJlYWRlcjtzd2l0Y2godC50eXBlKXtjYXNlImFwcGxpY2F0aW9uL2pzb24iOnIub25sb2FkPXMuaW1wb3J0SnNvbkNsb3N1cmUoZSk7YnJlYWs7ZGVmYXVsdDpyLm9ubG9hZD1zLmltcG9ydENzdkNsb3N1cmUoZSl9ci5yZWFkQXNUZXh0KHQpfWVsc2Ugby5sb2dFcnJvcigiTm8gZmlsZSBvYmplY3QgcHJvdmlkZWQgdG8gaW1wb3J0VGhpc0ZpbGUsIHNob3VsZCBiZSBpbXBvc3NpYmxlLCBhYm9ydGluZyIpfSxpbXBvcnRKc29uQ2xvc3VyZTpmdW5jdGlvbihuKXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHIsaT1bXSx0PXMucGFyc2VKc29uKG4sZSk7bnVsbCE9PXQmJih0LmZvckVhY2goZnVuY3Rpb24oZSx0KXtyPXMubmV3T2JqZWN0KG4pLGFuZ3VsYXIuZXh0ZW5kKHIsZSkscj1uLm9wdGlvbnMuaW1wb3J0ZXJPYmplY3RDYWxsYmFjayhuLHIpLGkucHVzaChyKX0pLHMuYWRkT2JqZWN0cyhuLGkpKX19LHBhcnNlSnNvbjpmdW5jdGlvbih0LHIpe3ZhciBlO3RyeXtlPUpTT04ucGFyc2Uoci50YXJnZXQucmVzdWx0KX1jYXRjaChlKXtyZXR1cm4gdm9pZCBzLmFsZXJ0RXJyb3IodCwiaW1wb3J0ZXIuaW52YWxpZEpzb24iLCJGaWxlIGNvdWxkIG5vdCBiZSBwcm9jZXNzZWQsIGlzIGl0IHZhbGlkIGpzb24/IENvbnRlbnQgd2FzOiAiLHIudGFyZ2V0LnJlc3VsdCl9cmV0dXJuIEFycmF5LmlzQXJyYXkoZSk/ZToocy5hbGVydEVycm9yKHQsImltcG9ydGVyLmpzb25Ob3RhcnJheSIsIkltcG9ydCBmYWlsZWQsIGZpbGUgaXMgbm90IGFuIGFycmF5LCBmaWxlIHdhczogIixyLnRhcmdldC5yZXN1bHQpLFtdKX0saW1wb3J0Q3N2Q2xvc3VyZTpmdW5jdGlvbihpKXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHQ9cy5wYXJzZUNzdihlKTtpZighdHx8dC5sZW5ndGg8MSlzLmFsZXJ0RXJyb3IoaSwiaW1wb3J0ZXIuaW52YWxpZENzdiIsIkZpbGUgY291bGQgbm90IGJlIHByb2Nlc3NlZCwgaXMgaXQgdmFsaWQgY3N2PyBDb250ZW50IHdhczogIixlLnRhcmdldC5yZXN1bHQpO2Vsc2V7dmFyIHI9cy5jcmVhdGVDc3ZPYmplY3RzKGksdCk7ciYmMCE9PXIubGVuZ3RoP3MuYWRkT2JqZWN0cyhpLHIpOnMuYWxlcnRFcnJvcihpLCJpbXBvcnRlci5ub09iamVjdHMiLCJPYmplY3RzIHdlcmUgbm90IGFibGUgdG8gYmUgZGVyaXZlZCwgY29udGVudCB3YXM6ICIsZS50YXJnZXQucmVzdWx0KX19fSxwYXJzZUNzdjpmdW5jdGlvbihlKXt2YXIgdD1lLnRhcmdldC5yZXN1bHQ7cmV0dXJuIENTVi5wYXJzZSh0KX0sY3JlYXRlQ3N2T2JqZWN0czpmdW5jdGlvbihyLGUpe3ZhciBpPXIub3B0aW9ucy5pbXBvcnRlclByb2Nlc3NIZWFkZXJzKHIsZS5zaGlmdCgpKTtpZighaXx8MD09PWkubGVuZ3RoKXJldHVybiBzLmFsZXJ0RXJyb3IociwiaW1wb3J0ZXIubm9IZWFkZXJzIiwiQ29sdW1uIG5hbWVzIGNvdWxkIG5vdCBiZSBkZXJpdmVkLCBjb250ZW50IHdhczogIixlKSxbXTt2YXIgbixvPVtdO3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24oZSx0KXtuPXMubmV3T2JqZWN0KHIpLG51bGwhPT1lJiZlLmZvckVhY2goZnVuY3Rpb24oZSx0KXtudWxsIT09aVt0XSYmKG5baVt0XV09ZSl9KSxuPXIub3B0aW9ucy5pbXBvcnRlck9iamVjdENhbGxiYWNrKHIsbiksby5wdXNoKG4pfSksb30scHJvY2Vzc0hlYWRlcnM6ZnVuY3Rpb24oZSx0KXt2YXIgcj1bXTtpZihlLm9wdGlvbnMuY29sdW1uRGVmcyYmMCE9PWUub3B0aW9ucy5jb2x1bW5EZWZzLmxlbmd0aCl7dmFyIGk9cy5mbGF0dGVuQ29sdW1uRGVmcyhlLGUub3B0aW9ucy5jb2x1bW5EZWZzKTtyZXR1cm4gdC5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7aVtlXT9yLnB1c2goaVtlXSk6aVtlLnRvTG93ZXJDYXNlKCldP3IucHVzaChpW2UudG9Mb3dlckNhc2UoKV0pOnIucHVzaChudWxsKX0pLHJ9cmV0dXJuIHQuZm9yRWFjaChmdW5jdGlvbihlLHQpe3IucHVzaChlLnJlcGxhY2UoL1teMC05YS16QS1aXC1fXS9nLCJfIikpfSkscn0sZmxhdHRlbkNvbHVtbkRlZnM6ZnVuY3Rpb24ocixlKXt2YXIgaT17fTtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7ZS5uYW1lJiYoaVtlLm5hbWVdPWUuZmllbGR8fGUubmFtZSxpW2UubmFtZS50b0xvd2VyQ2FzZSgpXT1lLmZpZWxkfHxlLm5hbWUpLGUuZmllbGQmJihpW2UuZmllbGRdPWUuZmllbGR8fGUubmFtZSxpW2UuZmllbGQudG9Mb3dlckNhc2UoKV09ZS5maWVsZHx8ZS5uYW1lKSxlLmRpc3BsYXlOYW1lJiYoaVtlLmRpc3BsYXlOYW1lXT1lLmZpZWxkfHxlLm5hbWUsaVtlLmRpc3BsYXlOYW1lLnRvTG93ZXJDYXNlKCldPWUuZmllbGR8fGUubmFtZSksZS5kaXNwbGF5TmFtZSYmci5vcHRpb25zLmltcG9ydGVySGVhZGVyRmlsdGVyJiYoaVtyLm9wdGlvbnMuaW1wb3J0ZXJIZWFkZXJGaWx0ZXIoZS5kaXNwbGF5TmFtZSldPWUuZmllbGR8fGUubmFtZSxpW3Iub3B0aW9ucy5pbXBvcnRlckhlYWRlckZpbHRlcihlLmRpc3BsYXlOYW1lKS50b0xvd2VyQ2FzZSgpXT1lLmZpZWxkfHxlLm5hbWUpfSksaX0sYWRkT2JqZWN0czpmdW5jdGlvbihlLHQscil7aWYoZS5hcGkucm93RWRpdCl7dmFyIGk9ZS5yZWdpc3RlckRhdGFDaGFuZ2VDYWxsYmFjayhmdW5jdGlvbigpe2UuYXBpLnJvd0VkaXQuc2V0Um93c0RpcnR5KHQpLGkoKX0sW24uZGF0YUNoYW5nZS5ST1ddKTtlLmltcG9ydGVyLiRzY29wZS4kb24oIiRkZXN0cm95IixpKX1lLmltcG9ydGVyLiRzY29wZS4kYXBwbHkoZS5vcHRpb25zLmltcG9ydGVyRGF0YUFkZENhbGxiYWNrKGUsdCkpfSxuZXdPYmplY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9PWUub3B0aW9ucyYmdm9pZCAwIT09ZS5vcHRpb25zLmltcG9ydGVyTmV3T2JqZWN0P25ldyBlLm9wdGlvbnMuaW1wb3J0ZXJOZXdPYmplY3Q6e319LGFsZXJ0RXJyb3I6ZnVuY3Rpb24oZSx0LHIsaSl7ZS5vcHRpb25zLmltcG9ydGVyRXJyb3JDYWxsYmFjaz9lLm9wdGlvbnMuaW1wb3J0ZXJFcnJvckNhbGxiYWNrKGUsdCxyLGkpOihsLmFsZXJ0KGEuZ2V0U2FmZVRleHQodCkpLG8ubG9nRXJyb3IocitpKSl9fTtyZXR1cm4gc31dKSxlLmRpcmVjdGl2ZSgidWlHcmlkSW1wb3J0ZXIiLFsidWlHcmlkSW1wb3J0ZXJDb25zdGFudHMiLCJ1aUdyaWRJbXBvcnRlclNlcnZpY2UiLCJncmlkVXRpbCIsIiRjb21waWxlIixmdW5jdGlvbihlLG4sdCxyKXtyZXR1cm57cmVwbGFjZTohMCxwcmlvcml0eTowLHJlcXVpcmU6Il51aUdyaWQiLHNjb3BlOiExLGxpbms6ZnVuY3Rpb24oZSx0LHIsaSl7bi5pbml0aWFsaXplR3JpZChlLGkuZ3JpZCl9fX1dKSxlLmRpcmVjdGl2ZSgidWlHcmlkSW1wb3J0ZXJNZW51SXRlbSIsWyJ1aUdyaWRJbXBvcnRlckNvbnN0YW50cyIsInVpR3JpZEltcG9ydGVyU2VydmljZSIsImdyaWRVdGlsIiwiJGNvbXBpbGUiLGZ1bmN0aW9uKGUsYSxsLHQpe3JldHVybntyZXBsYWNlOiEwLHByaW9yaXR5OjAscmVxdWlyZToiP151aUdyaWQiLHNjb3BlOiExLHRlbXBsYXRlVXJsOiJ1aS1ncmlkL2ltcG9ydGVyTWVudUl0ZW0iLGxpbms6ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG47dmFyIG89dFswXS5xdWVyeVNlbGVjdG9yQWxsKCIudWktZ3JpZC1pbXBvcnRlci1maWxlLWNob29zZXIiKTsxIT09by5sZW5ndGg/bC5sb2dFcnJvcigiRm91bmQgPiAxIG9yIDwgMSBmaWxlIGNob29zZXJzIHdpdGhpbiB0aGUgbWVudSBpdGVtLCBlcnJvciwgY2Fubm90IGNvbnRpbnVlIik6b1swXS5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLGZ1bmN0aW9uKGUpe3ZhciB0PWUuc3JjRWxlbWVudHx8ZS50YXJnZXQ7aWYodCYmdC5maWxlcyYmMT09PXQuZmlsZXMubGVuZ3RoKXt2YXIgcj10LmZpbGVzWzBdO3ZvaWQgMCE9PWkmJmk/KG49aS5ncmlkLGEuaW1wb3J0VGhpc0ZpbGUobixyKSx0LmZvcm0ucmVzZXQoKSk6bC5sb2dFcnJvcigiQ291bGQgbm90IGltcG9ydCBmaWxlIGJlY2F1c2UgVUkgR3JpZCB3YXMgbm90IGZvdW5kLiIpfX0sITEpfX19XSl9KCksZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7dmFyIGU9YW5ndWxhci5tb2R1bGUoInVpLmdyaWQuaW5maW5pdGVTY3JvbGwiLFsidWkuZ3JpZCJdKTtlLnNlcnZpY2UoInVpR3JpZEluZmluaXRlU2Nyb2xsU2VydmljZSIsWyJncmlkVXRpbCIsIiRjb21waWxlIiwiJHJvb3RTY29wZSIsInVpR3JpZENvbnN0YW50cyIsIlNjcm9sbEV2ZW50IiwiJHEiLGZ1bmN0aW9uKGUsdCxsLHMsYSxyKXt2YXIgZD17aW5pdGlhbGl6ZUdyaWQ6ZnVuY3Rpb24ocixlKXtpZihkLmRlZmF1bHRHcmlkT3B0aW9ucyhyLm9wdGlvbnMpLHIub3B0aW9ucy5lbmFibGVJbmZpbml0ZVNjcm9sbCl7ci5pbmZpbml0ZVNjcm9sbD17ZGF0YUxvYWRpbmc6ITF9LGQuc2V0U2Nyb2xsRGlyZWN0aW9ucyhyLHIub3B0aW9ucy5pbmZpbml0ZVNjcm9sbFVwLHIub3B0aW9ucy5pbmZpbml0ZVNjcm9sbERvd24pLHIuYXBpLmNvcmUub24uc2Nyb2xsRW5kKGUsZC5oYW5kbGVTY3JvbGwpO3ZhciB0PXtldmVudHM6e2luZmluaXRlU2Nyb2xsOntuZWVkTG9hZE1vcmVEYXRhOmZ1bmN0aW9uKGUsdCl7fSxuZWVkTG9hZE1vcmVEYXRhVG9wOmZ1bmN0aW9uKGUsdCl7fX19LG1ldGhvZHM6e2luZmluaXRlU2Nyb2xsOntkYXRhTG9hZGVkOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGQuc2V0U2Nyb2xsRGlyZWN0aW9ucyhyLGUsdCksZC5hZGp1c3RTY3JvbGwocikudGhlbihmdW5jdGlvbigpe3IuaW5maW5pdGVTY3JvbGwuZGF0YUxvYWRpbmc9ITF9KX0scmVzZXRTY3JvbGw6ZnVuY3Rpb24oZSx0KXtkLnNldFNjcm9sbERpcmVjdGlvbnMocixlLHQpLGQuYWRqdXN0SW5maW5pdGVTY3JvbGxQb3NpdGlvbihyLDApfSxzYXZlU2Nyb2xsUGVyY2VudGFnZTpmdW5jdGlvbigpe3IuaW5maW5pdGVTY3JvbGwucHJldlNjcm9sbFRvcD1yLnJlbmRlckNvbnRhaW5lcnMuYm9keS5wcmV2U2Nyb2xsVG9wLHIuaW5maW5pdGVTY3JvbGwucHJldmlvdXNWaXNpYmxlUm93cz1yLmdldFZpc2libGVSb3dDb3VudCgpfSxkYXRhUmVtb3ZlZFRvcDpmdW5jdGlvbihlLHQpe2QuZGF0YVJlbW92ZWRUb3AocixlLHQpfSxkYXRhUmVtb3ZlZEJvdHRvbTpmdW5jdGlvbihlLHQpe2QuZGF0YVJlbW92ZWRCb3R0b20ocixlLHQpfSxzZXRTY3JvbGxEaXJlY3Rpb25zOmZ1bmN0aW9uKGUsdCl7ZC5zZXRTY3JvbGxEaXJlY3Rpb25zKHIsZSx0KX19fX07ci5hcGkucmVnaXN0ZXJFdmVudHNGcm9tT2JqZWN0KHQuZXZlbnRzKSxyLmFwaS5yZWdpc3Rlck1ldGhvZHNGcm9tT2JqZWN0KHQubWV0aG9kcyl9fSxkZWZhdWx0R3JpZE9wdGlvbnM6ZnVuY3Rpb24oZSl7ZS5lbmFibGVJbmZpbml0ZVNjcm9sbD0hMSE9PWUuZW5hYmxlSW5maW5pdGVTY3JvbGwsZS5pbmZpbml0ZVNjcm9sbFJvd3NGcm9tRW5kPWUuaW5maW5pdGVTY3JvbGxSb3dzRnJvbUVuZHx8MjAsZS5pbmZpbml0ZVNjcm9sbFVwPSEwPT09ZS5pbmZpbml0ZVNjcm9sbFVwLGUuaW5maW5pdGVTY3JvbGxEb3duPSExIT09ZS5pbmZpbml0ZVNjcm9sbERvd259LHNldFNjcm9sbERpcmVjdGlvbnM6ZnVuY3Rpb24oZSx0LHIpe2UuaW5maW5pdGVTY3JvbGwuc2Nyb2xsVXA9ITA9PT10LGUuc3VwcHJlc3NQYXJlbnRTY3JvbGxVcD0hMD09PXQsZS5pbmZpbml0ZVNjcm9sbC5zY3JvbGxEb3duPSExIT09cixlLnN1cHByZXNzUGFyZW50U2Nyb2xsRG93bj0hMSE9PXJ9LGhhbmRsZVNjcm9sbDpmdW5jdGlvbihlKXtpZighKGUuZ3JpZC5pbmZpbml0ZVNjcm9sbCYmZS5ncmlkLmluZmluaXRlU2Nyb2xsLmRhdGFMb2FkaW5nfHwidWkuZ3JpZC5hZGp1c3RJbmZpbml0ZVNjcm9sbFBvc2l0aW9uIj09PWUuc291cmNlKSYmZS55KWlmKDA9PT1lLnkucGVyY2VudGFnZSllLmdyaWQuc2Nyb2xsRGlyZWN0aW9uPXMuc2Nyb2xsRGlyZWN0aW9uLlVQLGQubG9hZERhdGEoZS5ncmlkKTtlbHNlIGlmKDE9PT1lLnkucGVyY2VudGFnZSllLmdyaWQuc2Nyb2xsRGlyZWN0aW9uPXMuc2Nyb2xsRGlyZWN0aW9uLkRPV04sZC5sb2FkRGF0YShlLmdyaWQpO2Vsc2V7dmFyIHQ9ZS5ncmlkLm9wdGlvbnMuaW5maW5pdGVTY3JvbGxSb3dzRnJvbUVuZC9lLmdyaWQucmVuZGVyQ29udGFpbmVycy5ib2R5LnZpc2libGVSb3dDYWNoZS5sZW5ndGg7ZS5ncmlkLnNjcm9sbERpcmVjdGlvbj09PXMuc2Nyb2xsRGlyZWN0aW9uLlVQP2UueS5wZXJjZW50YWdlPD10JiZkLmxvYWREYXRhKGUuZ3JpZCk6ZS5ncmlkLnNjcm9sbERpcmVjdGlvbj09PXMuc2Nyb2xsRGlyZWN0aW9uLkRPV04mJjEtZS55LnBlcmNlbnRhZ2U8PXQmJmQubG9hZERhdGEoZS5ncmlkKX19LGxvYWREYXRhOmZ1bmN0aW9uKGUpe2UuaW5maW5pdGVTY3JvbGwucHJldmlvdXNWaXNpYmxlUm93cz1lLnJlbmRlckNvbnRhaW5lcnMuYm9keS52aXNpYmxlUm93Q2FjaGUubGVuZ3RoLGUuaW5maW5pdGVTY3JvbGwuZGlyZWN0aW9uPWUuc2Nyb2xsRGlyZWN0aW9uLGRlbGV0ZSBlLmluZmluaXRlU2Nyb2xsLnByZXZTY3JvbGxUb3AsZS5zY3JvbGxEaXJlY3Rpb249PT1zLnNjcm9sbERpcmVjdGlvbi5VUCYmZS5pbmZpbml0ZVNjcm9sbC5zY3JvbGxVcD8oZS5pbmZpbml0ZVNjcm9sbC5kYXRhTG9hZGluZz0hMCxlLmFwaS5pbmZpbml0ZVNjcm9sbC5yYWlzZS5uZWVkTG9hZE1vcmVEYXRhVG9wKCkpOmUuc2Nyb2xsRGlyZWN0aW9uPT09cy5zY3JvbGxEaXJlY3Rpb24uRE9XTiYmZS5pbmZpbml0ZVNjcm9sbC5zY3JvbGxEb3duJiYoZS5pbmZpbml0ZVNjcm9sbC5kYXRhTG9hZGluZz0hMCxlLmFwaS5pbmZpbml0ZVNjcm9sbC5yYWlzZS5uZWVkTG9hZE1vcmVEYXRhKCkpfSxhZGp1c3RTY3JvbGw6ZnVuY3Rpb24obyl7dmFyIGE9ci5kZWZlcigpO3JldHVybiBsLiRhcHBseUFzeW5jKGZ1bmN0aW9uKCl7dmFyIGUsdCxyLGk7ZT1vLmdldFZpZXdwb3J0SGVpZ2h0KCkrby5oZWFkZXJIZWlnaHQtby5yZW5kZXJDb250YWluZXJzLmJvZHkuaGVhZGVySGVpZ2h0LW8uc2Nyb2xsYmFySGVpZ2h0LHQ9by5vcHRpb25zLnJvd0hlaWdodCx2b2lkIDA9PT1vLmluZmluaXRlU2Nyb2xsLmRpcmVjdGlvbiYmZC5hZGp1c3RJbmZpbml0ZVNjcm9sbFBvc2l0aW9uKG8sMCk7dmFyIG49dCoocj1vLmdldFZpc2libGVSb3dDb3VudCgpKTtvLmluZmluaXRlU2Nyb2xsLnNjcm9sbERvd24mJm48ZSYmby5hcGkuaW5maW5pdGVTY3JvbGwucmFpc2UubmVlZExvYWRNb3JlRGF0YSgpLG8uaW5maW5pdGVTY3JvbGwuZGlyZWN0aW9uPT09cy5zY3JvbGxEaXJlY3Rpb24uVVAmJihpPShvLmluZmluaXRlU2Nyb2xsLnByZXZTY3JvbGxUb3B8fDApKyhyLW8uaW5maW5pdGVTY3JvbGwucHJldmlvdXNWaXNpYmxlUm93cykqdCxkLmFkanVzdEluZmluaXRlU2Nyb2xsUG9zaXRpb24obyxpKSxsLiRhcHBseUFzeW5jKGZ1bmN0aW9uKCl7YS5yZXNvbHZlKCl9KSksby5pbmZpbml0ZVNjcm9sbC5kaXJlY3Rpb249PT1zLnNjcm9sbERpcmVjdGlvbi5ET1dOJiYoaT1vLmluZmluaXRlU2Nyb2xsLnByZXZTY3JvbGxUb3B8fG8uaW5maW5pdGVTY3JvbGwucHJldmlvdXNWaXNpYmxlUm93cyp0LWUsZC5hZGp1c3RJbmZpbml0ZVNjcm9sbFBvc2l0aW9uKG8saSksbC4kYXBwbHlBc3luYyhmdW5jdGlvbigpe2EucmVzb2x2ZSgpfSkpfSwwKSxhLnByb21pc2V9LGFkanVzdEluZmluaXRlU2Nyb2xsUG9zaXRpb246ZnVuY3Rpb24oZSx0KXt2YXIgcj1uZXcgYShlLG51bGwsbnVsbCwidWkuZ3JpZC5hZGp1c3RJbmZpbml0ZVNjcm9sbFBvc2l0aW9uIiksaT1lLmdldFZpc2libGVSb3dDb3VudCgpLG49ZS5nZXRWaWV3cG9ydEhlaWdodCgpK2UuaGVhZGVySGVpZ2h0LWUucmVuZGVyQ29udGFpbmVycy5ib2R5LmhlYWRlckhlaWdodC1lLnNjcm9sbGJhckhlaWdodCxvPWkqZS5vcHRpb25zLnJvd0hlaWdodC1uOzA9PT10JiZlLmluZmluaXRlU2Nyb2xsLnNjcm9sbFVwP3IueT17cGVyY2VudGFnZToxL299OnIueT17cGVyY2VudGFnZTp0L299LGUuc2Nyb2xsQ29udGFpbmVycygiIixyKX0sZGF0YVJlbW92ZWRUb3A6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG4sbyxhO2Quc2V0U2Nyb2xsRGlyZWN0aW9ucyhlLHQsciksaT1lLnJlbmRlckNvbnRhaW5lcnMuYm9keS52aXNpYmxlUm93Q2FjaGUubGVuZ3RoLG49ZS5pbmZpbml0ZVNjcm9sbC5wcmV2U2Nyb2xsVG9wLGE9ZS5vcHRpb25zLnJvd0hlaWdodCxvPW4tKGUuaW5maW5pdGVTY3JvbGwucHJldmlvdXNWaXNpYmxlUm93cy1pKSphLGQuYWRqdXN0SW5maW5pdGVTY3JvbGxQb3NpdGlvbihlLG8pfSxkYXRhUmVtb3ZlZEJvdHRvbTpmdW5jdGlvbihlLHQscil7dmFyIGk7ZC5zZXRTY3JvbGxEaXJlY3Rpb25zKGUsdCxyKSxpPWUuaW5maW5pdGVTY3JvbGwucHJldlNjcm9sbFRvcCxkLmFkanVzdEluZmluaXRlU2Nyb2xsUG9zaXRpb24oZSxpKX19O3JldHVybiBkfV0pLGUuZGlyZWN0aXZlKCJ1aUdyaWRJbmZpbml0ZVNjcm9sbCIsWyJ1aUdyaWRJbmZpbml0ZVNjcm9sbFNlcnZpY2UiLGZ1bmN0aW9uKG4pe3JldHVybntwcmlvcml0eTotMjAwLHNjb3BlOiExLHJlcXVpcmU6Il51aUdyaWQiLGNvbXBpbGU6ZnVuY3Rpb24oZSx0LHIpe3JldHVybntwcmU6ZnVuY3Rpb24oZSx0LHIsaSl7bi5pbml0aWFsaXplR3JpZChpLmdyaWQsZSl9LHBvc3Q6ZnVuY3Rpb24oZSx0LHIpe319fX19XSl9KCksZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7dmFyIGU9YW5ndWxhci5tb2R1bGUoInVpLmdyaWQubW92ZUNvbHVtbnMiLFsidWkuZ3JpZCJdKTtlLnNlcnZpY2UoInVpR3JpZE1vdmVDb2x1bW5TZXJ2aWNlIixbIiRxIiwiJHJvb3RTY29wZSIsIiRsb2ciLCJTY3JvbGxFdmVudCIsInVpR3JpZENvbnN0YW50cyIsImdyaWRVdGlsIixmdW5jdGlvbihpLGQsZSx0LHUscyl7dmFyIGM9e2luaXRpYWxpemVHcmlkOmZ1bmN0aW9uKGUpe3RoaXMucmVnaXN0ZXJQdWJsaWNBcGkoZSksdGhpcy5kZWZhdWx0R3JpZE9wdGlvbnMoZS5vcHRpb25zKSxlLm1vdmVDb2x1bW5zPXtvcmRlckNhY2hlOltdfSxlLnJlZ2lzdGVyQ29sdW1uQnVpbGRlcih0aGlzLm1vdmFibGVDb2x1bW5CdWlsZGVyKSxlLnJlZ2lzdGVyRGF0YUNoYW5nZUNhbGxiYWNrKHRoaXMudmVyaWZ5Q29sdW1uT3JkZXIsW3UuZGF0YUNoYW5nZS5DT0xVTU5dKX0scmVnaXN0ZXJQdWJsaWNBcGk6ZnVuY3Rpb24oYSl7dmFyIGw9dGhpcyxlPXtldmVudHM6e2NvbE1vdmFibGU6e2NvbHVtblBvc2l0aW9uQ2hhbmdlZDpmdW5jdGlvbihlLHQscil7fX19LG1ldGhvZHM6e2NvbE1vdmFibGU6e21vdmVDb2x1bW46ZnVuY3Rpb24oZSx0KXt2YXIgaT1hLmNvbHVtbnM7aWYoYW5ndWxhci5pc051bWJlcihlKSYmYW5ndWxhci5pc051bWJlcih0KSl7Zm9yKHZhciByPTAsbj0wO248aS5sZW5ndGg7bisrKShhbmd1bGFyLmlzRGVmaW5lZChpW25dLmNvbERlZi52aXNpYmxlKSYmITE9PT1pW25dLmNvbERlZi52aXNpYmxlfHwhMD09PWlbbl0uaXNSb3dIZWFkZXIpJiZyKys7aWYoZT49aS5sZW5ndGgtcnx8dD49aS5sZW5ndGgtcilzLmxvZ0Vycm9yKCJNb3ZlQ29sdW1uOiBJbnZhbGlkIHZhbHVlcyBmb3Igb3JpZ2luYWxQb3NpdGlvbiwgZmluYWxQb3NpdGlvbiIpO2Vsc2V7dmFyIG89ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUscj0wO3I8PXQ7cisrKWFuZ3VsYXIuaXNEZWZpbmVkKGlbcl0pJiYoYW5ndWxhci5pc0RlZmluZWQoaVtyXS5jb2xEZWYudmlzaWJsZSkmJiExPT09aVtyXS5jb2xEZWYudmlzaWJsZXx8ITA9PT1pW3JdLmlzUm93SGVhZGVyKSYmdCsrO3JldHVybiB0fTtsLnJlZHJhd0NvbHVtbkF0UG9zaXRpb24oYSxvKGUpLG8odCkpfX1lbHNlIHMubG9nRXJyb3IoIk1vdmVDb2x1bW46IFBsZWFzZSBwcm92aWRlIHZhbGlkIHZhbHVlcyBmb3Igb3JpZ2luYWxQb3NpdGlvbiBhbmQgZmluYWxQb3NpdGlvbiIpfX19fTthLmFwaS5yZWdpc3RlckV2ZW50c0Zyb21PYmplY3QoZS5ldmVudHMpLGEuYXBpLnJlZ2lzdGVyTWV0aG9kc0Zyb21PYmplY3QoZS5tZXRob2RzKX0sZGVmYXVsdEdyaWRPcHRpb25zOmZ1bmN0aW9uKGUpe2UuZW5hYmxlQ29sdW1uTW92aW5nPSExIT09ZS5lbmFibGVDb2x1bW5Nb3Zpbmd9LG1vdmFibGVDb2x1bW5CdWlsZGVyOmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZS5lbmFibGVDb2x1bW5Nb3Zpbmc9dm9pZCAwPT09ZS5lbmFibGVDb2x1bW5Nb3Zpbmc/ci5lbmFibGVDb2x1bW5Nb3Zpbmc6ZS5lbmFibGVDb2x1bW5Nb3ZpbmcsaS5hbGwoW10pfSx1cGRhdGVDb2x1bW5DYWNoZTpmdW5jdGlvbihlKXtlLm1vdmVDb2x1bW5zLm9yZGVyQ2FjaGU9ZS5nZXRPbmx5RGF0YUNvbHVtbnMoKX0sdmVyaWZ5Q29sdW1uT3JkZXI6ZnVuY3Rpb24oaSl7dmFyIG4sbz1pLnJvd0hlYWRlckNvbHVtbnMubGVuZ3RoO2FuZ3VsYXIuZm9yRWFjaChpLm1vdmVDb2x1bW5zLm9yZGVyQ2FjaGUsZnVuY3Rpb24oZSx0KXtpZigtMSE9PShuPWkuY29sdW1ucy5pbmRleE9mKGUpKSYmbi1vIT09dCl7dmFyIHI9aS5jb2x1bW5zLnNwbGljZShuLDEpWzBdO2kuY29sdW1ucy5zcGxpY2UodCtvLDAscil9fSl9LHJlZHJhd0NvbHVtbkF0UG9zaXRpb246ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPWUuY29sdW1ucztpZih0IT09cil7Zm9yKHZhciBuPXQ8cj90KzE6dC0xLG89TWF0aC5taW4obixyKTtvPD1NYXRoLm1heChuLHIpJiYhaVtvXS52aXNpYmxlO28rKyk7aWYoIShvPk1hdGgubWF4KG4scikpKXt2YXIgYT1pW3RdO2lmKGEuY29sRGVmLmVuYWJsZUNvbHVtbk1vdmluZyl7aWYocjx0KWZvcih2YXIgbD10O3I8bDtsLS0paVtsXT1pW2wtMV07ZWxzZSBpZih0PHIpZm9yKHZhciBzPXQ7czxyO3MrKylpW3NdPWlbcysxXTtpW3JdPWEsYy51cGRhdGVDb2x1bW5DYWNoZShlKSxlLnF1ZXVlR3JpZFJlZnJlc2goKSxkLiRhcHBseUFzeW5jKGZ1bmN0aW9uKCl7ZS5hcGkuY29yZS5ub3RpZnlEYXRhQ2hhbmdlKHUuZGF0YUNoYW5nZS5DT0xVTU4pLGUuYXBpLmNvbE1vdmFibGUucmFpc2UuY29sdW1uUG9zaXRpb25DaGFuZ2VkKGEuY29sRGVmLHQscil9KX19fX19O3JldHVybiBjfV0pLGUuZGlyZWN0aXZlKCJ1aUdyaWRNb3ZlQ29sdW1ucyIsWyJ1aUdyaWRNb3ZlQ29sdW1uU2VydmljZSIsZnVuY3Rpb24obil7cmV0dXJue3JlcGxhY2U6ITAscHJpb3JpdHk6MCxyZXF1aXJlOiJedWlHcmlkIixzY29wZTohMSxjb21waWxlOmZ1bmN0aW9uKCl7cmV0dXJue3ByZTpmdW5jdGlvbihlLHQscixpKXtuLmluaXRpYWxpemVHcmlkKGkuZ3JpZCl9LHBvc3Q6ZnVuY3Rpb24oZSx0LHIsaSl7fX19fX1dKSxlLmRpcmVjdGl2ZSgidWlHcmlkSGVhZGVyQ2VsbCIsWyIkcSIsImdyaWRVdGlsIiwidWlHcmlkTW92ZUNvbHVtblNlcnZpY2UiLCIkZG9jdW1lbnQiLCIkbG9nIiwidWlHcmlkQ29uc3RhbnRzIiwiU2Nyb2xsRXZlbnQiLGZ1bmN0aW9uKGUsdCxiLHkscixpLFMpe3JldHVybntwcmlvcml0eTotMTAscmVxdWlyZToiXnVpR3JpZCIsY29tcGlsZTpmdW5jdGlvbigpe3JldHVybntwb3N0OmZ1bmN0aW9uKHUsaSxlLGMpe2lmKHUuY29sLmNvbERlZi5lbmFibGVDb2x1bW5Nb3Zpbmcpe3ZhciBnLG4scCxmLG0saCx0PWFuZ3VsYXIuZWxlbWVudChpWzBdLnF1ZXJ5U2VsZWN0b3JBbGwoIi51aS1ncmlkLWNlbGwtY29udGVudHMiKSksZD0hMSx2PSExLHI9ZnVuY3Rpb24oZSl7Zz11LmdyaWQuZWxlbWVudFswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0LHUuZ3JpZC5oYXNMZWZ0Q29udGFpbmVyKCkmJihnKz11LmdyaWQucmVuZGVyQ29udGFpbmVycy5sZWZ0LmhlYWRlclswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCksbj1lLnBhZ2VYfHwoZS5vcmlnaW5hbEV2ZW50P2Uub3JpZ2luYWxFdmVudC5wYWdlWDowKSxwPTAsZj1nK3UuZ3JpZC5nZXRWaWV3cG9ydFdpZHRoKCksIm1vdXNlZG93biI9PT1lLnR5cGU/KHkub24oIm1vdXNlbW92ZSIsbykseS5vbigibW91c2V1cCIsYSkpOiJ0b3VjaHN0YXJ0Ij09PWUudHlwZSYmKHkub24oInRvdWNobW92ZSIsbykseS5vbigidG91Y2hlbmQiLGEpKX0sbz1mdW5jdGlvbihlKXt2YXIgdD1lLnBhZ2VYfHwoZS5vcmlnaW5hbEV2ZW50P2Uub3JpZ2luYWxFdmVudC5wYWdlWDowKSxyPXQtbjswIT09ciYmKGRvY3VtZW50Lm9uc2VsZWN0c3RhcnQ9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sdj0hMCxkP2QmJihzKHIpLG49dCk6bCgpKX0sYT1mdW5jdGlvbihlKXtpZihkb2N1bWVudC5vbnNlbGVjdHN0YXJ0PW51bGwsbSYmKG0ucmVtb3ZlKCksZD0hMSksdygpLEMoKSx2KXtmb3IodmFyIHQscj11LmdyaWQuY29sdW1ucyxpPTAsbj0wO248ci5sZW5ndGgmJnJbbl0uY29sRGVmLm5hbWUhPT11LmNvbC5jb2xEZWYubmFtZTtuKyspaSsrO2lmKHA8MCl7dmFyIG8sYT0wO2lmKHUuZ3JpZC5pc1JUTCgpKXtmb3Iobz1pKzE7bzxyLmxlbmd0aDtvKyspaWYoKGFuZ3VsYXIuaXNVbmRlZmluZWQocltvXS5jb2xEZWYudmlzaWJsZSl8fCEwPT09cltvXS5jb2xEZWYudmlzaWJsZSkmJihhKz1yW29dLmRyYXduV2lkdGh8fHJbb10ud2lkdGh8fHJbb10uY29sRGVmLndpZHRoKT5NYXRoLmFicyhwKSl7Yi5yZWRyYXdDb2x1bW5BdFBvc2l0aW9uKHUuZ3JpZCxpLG8tMSk7YnJlYWt9fWVsc2UgZm9yKG89aS0xOzA8PW87by0tKWlmKChhbmd1bGFyLmlzVW5kZWZpbmVkKHJbb10uY29sRGVmLnZpc2libGUpfHwhMD09PXJbb10uY29sRGVmLnZpc2libGUpJiYoYSs9cltvXS5kcmF3bldpZHRofHxyW29dLndpZHRofHxyW29dLmNvbERlZi53aWR0aCk+TWF0aC5hYnMocCkpe2IucmVkcmF3Q29sdW1uQXRQb3NpdGlvbih1LmdyaWQsaSxvKzEpO2JyZWFrfWE8TWF0aC5hYnMocCkmJih0PTAsdS5ncmlkLmlzUlRMKCkmJih0PXIubGVuZ3RoLTEpLGIucmVkcmF3Q29sdW1uQXRQb3NpdGlvbih1LmdyaWQsaSx0KSl9ZWxzZSBpZigwPHApe3ZhciBsLHM9MDtpZih1LmdyaWQuaXNSVEwoKSl7Zm9yKGw9aS0xOzA8bDtsLS0paWYoKGFuZ3VsYXIuaXNVbmRlZmluZWQocltsXS5jb2xEZWYudmlzaWJsZSl8fCEwPT09cltsXS5jb2xEZWYudmlzaWJsZSkmJihzKz1yW2xdLmRyYXduV2lkdGh8fHJbbF0ud2lkdGh8fHJbbF0uY29sRGVmLndpZHRoLHA8cykpe2IucmVkcmF3Q29sdW1uQXRQb3NpdGlvbih1LmdyaWQsaSxsKTticmVha319ZWxzZSBmb3IobD1pKzE7bDxyLmxlbmd0aDtsKyspaWYoKGFuZ3VsYXIuaXNVbmRlZmluZWQocltsXS5jb2xEZWYudmlzaWJsZSl8fCEwPT09cltsXS5jb2xEZWYudmlzaWJsZSkmJihzKz1yW2xdLmRyYXduV2lkdGh8fHJbbF0ud2lkdGh8fHJbbF0uY29sRGVmLndpZHRoLHA8cykpe2IucmVkcmF3Q29sdW1uQXRQb3NpdGlvbih1LmdyaWQsaSxsLTEpO2JyZWFrfXM8cCYmKHQ9ci5sZW5ndGgtMSx1LmdyaWQuaXNSVEwoKSYmKHQ9MCksYi5yZWRyYXdDb2x1bW5BdFBvc2l0aW9uKHUuZ3JpZCxpLHQpKX19fSxDPWZ1bmN0aW9uKCl7dC5vbigidG91Y2hzdGFydCIsciksdC5vbigibW91c2Vkb3duIixyKX0sdz1mdW5jdGlvbigpe3Qub2ZmKCJ0b3VjaHN0YXJ0IixyKSx0Lm9mZigibW91c2Vkb3duIixyKSx5Lm9mZigibW91c2Vtb3ZlIixvKSx5Lm9mZigidG91Y2htb3ZlIixvKSx5Lm9mZigibW91c2V1cCIsYSkseS5vZmYoInRvdWNoZW5kIixhKX07QygpO3ZhciBsPWZ1bmN0aW9uKCl7ZD0hMCxtPWkuY2xvbmUoKSxpLnBhcmVudCgpLmFwcGVuZChtKSxtLmFkZENsYXNzKCJtb3ZpbmdDb2x1bW4iKTt2YXIgZT17fTtlLmxlZnQ9aVswXS5vZmZzZXRMZWZ0KyJweCI7dmFyIHQ9dS5ncmlkLmVsZW1lbnRbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkucmlnaHQscj1pWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnJpZ2h0O3Q8ciYmKGg9dS5jb2wuZHJhd25XaWR0aCsodC1yKSxlLndpZHRoPWgrInB4IiksbS5jc3MoZSl9LHM9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXUuZ3JpZC5jb2x1bW5zLHI9MCxpPTA7aTx0Lmxlbmd0aDtpKyspKGFuZ3VsYXIuaXNVbmRlZmluZWQodFtpXS5jb2xEZWYudmlzaWJsZSl8fCEwPT09dFtpXS5jb2xEZWYudmlzaWJsZSkmJihyKz10W2ldLmRyYXduV2lkdGh8fHRbaV0ud2lkdGh8fHRbaV0uY29sRGVmLndpZHRoKTt2YXIgbixvPW1bMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdC0xLGE9bVswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5yaWdodDtpZihuPShuPW8tZytlKTxmP246ZiwoZzw9b3x8MDxlKSYmKGE8PWZ8fGU8MCkpbS5jc3Moe3Zpc2liaWxpdHk6InZpc2libGUiLGxlZnQ6bVswXS5vZmZzZXRMZWZ0KyhuPGY/ZTpmLW8pKyJweCJ9KTtlbHNlIGlmKHI+TWF0aC5jZWlsKGMuZ3JpZC5ncmlkV2lkdGgpKXtlKj04O3ZhciBsPW5ldyBTKHUuY29sLmdyaWQsbnVsbCxudWxsLCJ1aUdyaWRIZWFkZXJDZWxsLm1vdmVFbGVtZW50Iik7bC54PXtwaXhlbHM6ZX0sbC5ncmlkLnNjcm9sbENvbnRhaW5lcnMoIiIsbCl9Zm9yKHZhciBzPTAsZD0wO2Q8dC5sZW5ndGg7ZCsrKWlmKGFuZ3VsYXIuaXNVbmRlZmluZWQodFtkXS5jb2xEZWYudmlzaWJsZSl8fCEwPT09dFtkXS5jb2xEZWYudmlzaWJsZSl7aWYodFtkXS5jb2xEZWYubmFtZT09PXUuY29sLmNvbERlZi5uYW1lKWJyZWFrO3MrPXRbZF0uZHJhd25XaWR0aHx8dFtkXS53aWR0aHx8dFtkXS5jb2xEZWYud2lkdGh9dm9pZCAwPT09dS5uZXdTY3JvbGxMZWZ0P3ArPWU6cD11Lm5ld1Njcm9sbExlZnQrbi1zLGg8dS5jb2wuZHJhd25XaWR0aCYmKGgrPU1hdGguYWJzKGUpLG0uY3NzKHt3aWR0aDpoKyJweCJ9KSl9O3UuJG9uKCIkZGVzdHJveSIsdyl9fX19fX1dKX0oKSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT1hbmd1bGFyLm1vZHVsZSgidWkuZ3JpZC5wYWdpbmF0aW9uIixbIm5nIiwidWkuZ3JpZCJdKTtlLnNlcnZpY2UoInVpR3JpZFBhZ2luYXRpb25TZXJ2aWNlIixbImdyaWRVdGlsIixmdW5jdGlvbih0KXt2YXIgZT17aW5pdGlhbGl6ZUdyaWQ6ZnVuY3Rpb24obyl7ZS5kZWZhdWx0R3JpZE9wdGlvbnMoby5vcHRpb25zKTt2YXIgYT17ZXZlbnRzOntwYWdpbmF0aW9uOntwYWdpbmF0aW9uQ2hhbmdlZDpmdW5jdGlvbihlLHQpe319fSxtZXRob2RzOntwYWdpbmF0aW9uOntnZXRQYWdlOmZ1bmN0aW9uKCl7cmV0dXJuIG8ub3B0aW9ucy5lbmFibGVQYWdpbmF0aW9uP28ub3B0aW9ucy5wYWdpbmF0aW9uQ3VycmVudFBhZ2U6bnVsbH0sZ2V0Rmlyc3RSb3dJbmRleDpmdW5jdGlvbigpe3JldHVybiBvLm9wdGlvbnMudXNlQ3VzdG9tUGFnaW5hdGlvbj9vLm9wdGlvbnMucGFnaW5hdGlvblBhZ2VTaXplcy5yZWR1Y2UoZnVuY3Rpb24oZSx0LHIpe3JldHVybiByPG8ub3B0aW9ucy5wYWdpbmF0aW9uQ3VycmVudFBhZ2UtMT9lK3Q6ZX0sMCk6KG8ub3B0aW9ucy5wYWdpbmF0aW9uQ3VycmVudFBhZ2UtMSkqby5vcHRpb25zLnBhZ2luYXRpb25QYWdlU2l6ZX0sZ2V0TGFzdFJvd0luZGV4OmZ1bmN0aW9uKCl7cmV0dXJuIG8ub3B0aW9ucy51c2VDdXN0b21QYWdpbmF0aW9uP2EubWV0aG9kcy5wYWdpbmF0aW9uLmdldEZpcnN0Um93SW5kZXgoKStvLm9wdGlvbnMucGFnaW5hdGlvblBhZ2VTaXplc1tvLm9wdGlvbnMucGFnaW5hdGlvbkN1cnJlbnRQYWdlLTFdLTE6TWF0aC5taW4oby5vcHRpb25zLnBhZ2luYXRpb25DdXJyZW50UGFnZSpvLm9wdGlvbnMucGFnaW5hdGlvblBhZ2VTaXplLG8ub3B0aW9ucy50b3RhbEl0ZW1zKS0xfSxnZXRUb3RhbFBhZ2VzOmZ1bmN0aW9uKCl7cmV0dXJuIG8ub3B0aW9ucy5lbmFibGVQYWdpbmF0aW9uP28ub3B0aW9ucy51c2VDdXN0b21QYWdpbmF0aW9uP28ub3B0aW9ucy5wYWdpbmF0aW9uUGFnZVNpemVzLmxlbmd0aDowPT09by5vcHRpb25zLnRvdGFsSXRlbXM/MTpNYXRoLmNlaWwoby5vcHRpb25zLnRvdGFsSXRlbXMvby5vcHRpb25zLnBhZ2luYXRpb25QYWdlU2l6ZSk6bnVsbH0sbmV4dFBhZ2U6ZnVuY3Rpb24oKXtvLm9wdGlvbnMuZW5hYmxlUGFnaW5hdGlvbiYmKDA8by5vcHRpb25zLnRvdGFsSXRlbXM/by5vcHRpb25zLnBhZ2luYXRpb25DdXJyZW50UGFnZT1NYXRoLm1pbihvLm9wdGlvbnMucGFnaW5hdGlvbkN1cnJlbnRQYWdlKzEsYS5tZXRob2RzLnBhZ2luYXRpb24uZ2V0VG90YWxQYWdlcygpKTpvLm9wdGlvbnMucGFnaW5hdGlvbkN1cnJlbnRQYWdlKyspfSxwcmV2aW91c1BhZ2U6ZnVuY3Rpb24oKXtvLm9wdGlvbnMuZW5hYmxlUGFnaW5hdGlvbiYmKG8ub3B0aW9ucy5wYWdpbmF0aW9uQ3VycmVudFBhZ2U9TWF0aC5tYXgoby5vcHRpb25zLnBhZ2luYXRpb25DdXJyZW50UGFnZS0xLDEpKX0sc2VlazpmdW5jdGlvbihlKXtpZihvLm9wdGlvbnMuZW5hYmxlUGFnaW5hdGlvbil7aWYoIWFuZ3VsYXIuaXNOdW1iZXIoZSl8fGU8MSl0aHJvdyJJbnZhbGlkIHBhZ2UgbnVtYmVyOiAiK2U7by5vcHRpb25zLnBhZ2luYXRpb25DdXJyZW50UGFnZT1NYXRoLm1pbihlLGEubWV0aG9kcy5wYWdpbmF0aW9uLmdldFRvdGFsUGFnZXMoKSl9fX19fTtvLmFwaS5yZWdpc3RlckV2ZW50c0Zyb21PYmplY3QoYS5ldmVudHMpLG8uYXBpLnJlZ2lzdGVyTWV0aG9kc0Zyb21PYmplY3QoYS5tZXRob2RzKTtvLnJlZ2lzdGVyUm93c1Byb2Nlc3NvcihmdW5jdGlvbihlKXtpZihvLm9wdGlvbnMudXNlRXh0ZXJuYWxQYWdpbmF0aW9ufHwhby5vcHRpb25zLmVuYWJsZVBhZ2luYXRpb24pcmV0dXJuIGU7dmFyIHQ9cGFyc2VJbnQoby5vcHRpb25zLnBhZ2luYXRpb25QYWdlU2l6ZSwxMCkscj0ocGFyc2VJbnQoby5vcHRpb25zLnBhZ2luYXRpb25DdXJyZW50UGFnZSwxMCksZS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUudmlzaWJsZX0pKTtvLm9wdGlvbnMudG90YWxJdGVtcz1yLmxlbmd0aDt2YXIgaT1hLm1ldGhvZHMucGFnaW5hdGlvbi5nZXRGaXJzdFJvd0luZGV4KCksbj1hLm1ldGhvZHMucGFnaW5hdGlvbi5nZXRMYXN0Um93SW5kZXgoKTtyZXR1cm4gaT5yLmxlbmd0aCYmKGk9KChvLm9wdGlvbnMucGFnaW5hdGlvbkN1cnJlbnRQYWdlPTEpLTEpKnQpLHIuc2xpY2UoaSxuKzEpfSw5MDApfSxkZWZhdWx0R3JpZE9wdGlvbnM6ZnVuY3Rpb24oZSl7ZS5lbmFibGVQYWdpbmF0aW9uPSExIT09ZS5lbmFibGVQYWdpbmF0aW9uLGUuZW5hYmxlUGFnaW5hdGlvbkNvbnRyb2xzPSExIT09ZS5lbmFibGVQYWdpbmF0aW9uQ29udHJvbHMsZS51c2VFeHRlcm5hbFBhZ2luYXRpb249ITA9PT1lLnVzZUV4dGVybmFsUGFnaW5hdGlvbixlLnVzZUN1c3RvbVBhZ2luYXRpb249ITA9PT1lLnVzZUN1c3RvbVBhZ2luYXRpb24sdC5pc051bGxPclVuZGVmaW5lZChlLnRvdGFsSXRlbXMpJiYoZS50b3RhbEl0ZW1zPTApLHQuaXNOdWxsT3JVbmRlZmluZWQoZS5wYWdpbmF0aW9uUGFnZVNpemVzKSYmKGUucGFnaW5hdGlvblBhZ2VTaXplcz1bMjUwLDUwMCwxZTNdKSx0LmlzTnVsbE9yVW5kZWZpbmVkKGUucGFnaW5hdGlvblBhZ2VTaXplKSYmKDA8ZS5wYWdpbmF0aW9uUGFnZVNpemVzLmxlbmd0aD9lLnBhZ2luYXRpb25QYWdlU2l6ZT1lLnBhZ2luYXRpb25QYWdlU2l6ZXNbMF06ZS5wYWdpbmF0aW9uUGFnZVNpemU9MCksdC5pc051bGxPclVuZGVmaW5lZChlLnBhZ2luYXRpb25DdXJyZW50UGFnZSkmJihlLnBhZ2luYXRpb25DdXJyZW50UGFnZT0xKSx0LmlzTnVsbE9yVW5kZWZpbmVkKGUucGFnaW5hdGlvblRlbXBsYXRlKSYmKGUucGFnaW5hdGlvblRlbXBsYXRlPSJ1aS1ncmlkL3BhZ2luYXRpb24iKX0sb25QYWdpbmF0aW9uQ2hhbmdlZDpmdW5jdGlvbihlLHQscil7ZS5hcGkucGFnaW5hdGlvbi5yYWlzZS5wYWdpbmF0aW9uQ2hhbmdlZCh0LHIpLGUub3B0aW9ucy51c2VFeHRlcm5hbFBhZ2luYXRpb258fGUucXVldWVHcmlkUmVmcmVzaCgpfX07cmV0dXJuIGV9XSksZS5kaXJlY3RpdmUoInVpR3JpZFBhZ2luYXRpb24iLFsiZ3JpZFV0aWwiLCJ1aUdyaWRQYWdpbmF0aW9uU2VydmljZSIsZnVuY3Rpb24obixvKXtyZXR1cm57cHJpb3JpdHk6LTIwMCxzY29wZTohMSxyZXF1aXJlOiJ1aUdyaWQiLGxpbms6e3ByZTpmdW5jdGlvbihlLHIsdCxpKXtvLmluaXRpYWxpemVHcmlkKGkuZ3JpZCksbi5nZXRUZW1wbGF0ZShpLmdyaWQub3B0aW9ucy5wYWdpbmF0aW9uVGVtcGxhdGUpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHQ9YW5ndWxhci5lbGVtZW50KGUpO3IuYXBwZW5kKHQpLGkuaW5uZXJDb21waWxlKHQpfSl9fX19XSksZS5kaXJlY3RpdmUoInVpR3JpZFBhZ2VyIixbInVpR3JpZFBhZ2luYXRpb25TZXJ2aWNlIiwidWlHcmlkQ29uc3RhbnRzIiwiZ3JpZFV0aWwiLCJpMThuU2VydmljZSIsImkxOG5Db25zdGFudHMiLGZ1bmN0aW9uKGQsdSxjLGcscCl7cmV0dXJue3ByaW9yaXR5Oi0yMDAsc2NvcGU6ITAscmVxdWlyZToiXnVpR3JpZCIsbGluazpmdW5jdGlvbihyLHQsZSxpKXtyLmFyaWE9Zy5nZXRTYWZlVGV4dCgicGFnaW5hdGlvbi5hcmlhIik7dmFyIG49ZnVuY3Rpb24oKXtyLnBhZ2luYXRpb25BcGk9aS5ncmlkLmFwaS5wYWdpbmF0aW9uLHIuc2l6ZXNMYWJlbD1nLmdldFNhZmVUZXh0KCJwYWdpbmF0aW9uLnNpemVzIiksci50b3RhbEl0ZW1zTGFiZWw9Zy5nZXRTYWZlVGV4dCgicGFnaW5hdGlvbi50b3RhbEl0ZW1zIiksci5wYWdpbmF0aW9uT2Y9Zy5nZXRTYWZlVGV4dCgicGFnaW5hdGlvbi5vZiIpLHIucGFnaW5hdGlvblRocm91Z2g9Zy5nZXRTYWZlVGV4dCgicGFnaW5hdGlvbi50aHJvdWdoIil9O24oKSxyLiRvbihwLlVQREFURV9FVkVOVCxuKTt2YXIgbz1pLmdyaWQub3B0aW9ucztpLmdyaWQucmVuZGVyQ29udGFpbmVycy5ib2R5LnJlZ2lzdGVyVmlld3BvcnRBZGp1c3RlcihmdW5jdGlvbihlKXtyZXR1cm4gby5lbmFibGVQYWdpbmF0aW9uQ29udHJvbHMmJihlLmhlaWdodD1lLmhlaWdodC1jLmVsZW1lbnRIZWlnaHQodCwicGFkZGluZyIpKSxlfSk7dmFyIGE9aS5ncmlkLnJlZ2lzdGVyRGF0YUNoYW5nZUNhbGxiYWNrKGZ1bmN0aW9uKGUpe2Uub3B0aW9ucy51c2VFeHRlcm5hbFBhZ2luYXRpb258fChlLm9wdGlvbnMudG90YWxJdGVtcz1lLnJvd3MubGVuZ3RoKX0sW3UuZGF0YUNoYW5nZS5ST1ddKTtyLiRvbigiJGRlc3Ryb3kiLGEpO3ZhciBsPXIuJHdhdGNoKCJncmlkLm9wdGlvbnMucGFnaW5hdGlvbkN1cnJlbnRQYWdlICsgZ3JpZC5vcHRpb25zLnBhZ2luYXRpb25QYWdlU2l6ZSIsZnVuY3Rpb24oZSx0KXtlIT09dCYmdm9pZCAwIT09dCYmKCFhbmd1bGFyLmlzTnVtYmVyKG8ucGFnaW5hdGlvbkN1cnJlbnRQYWdlKXx8by5wYWdpbmF0aW9uQ3VycmVudFBhZ2U8MT9vLnBhZ2luYXRpb25DdXJyZW50UGFnZT0xOjA8by50b3RhbEl0ZW1zJiZvLnBhZ2luYXRpb25DdXJyZW50UGFnZT5yLnBhZ2luYXRpb25BcGkuZ2V0VG90YWxQYWdlcygpP28ucGFnaW5hdGlvbkN1cnJlbnRQYWdlPXIucGFnaW5hdGlvbkFwaS5nZXRUb3RhbFBhZ2VzKCk6ZC5vblBhZ2luYXRpb25DaGFuZ2VkKHIuZ3JpZCxvLnBhZ2luYXRpb25DdXJyZW50UGFnZSxvLnBhZ2luYXRpb25QYWdlU2l6ZSkpfSk7ci4kb24oIiRkZXN0cm95IixmdW5jdGlvbigpe2woKX0pLHIuY2FudFBhZ2VGb3J3YXJkPWZ1bmN0aW9uKCl7cmV0dXJuIHIucGFnaW5hdGlvbkFwaS5nZXRUb3RhbFBhZ2VzKCk/ci5jYW50UGFnZVRvTGFzdCgpOm8uZGF0YS5sZW5ndGg8MX0sci5jYW50UGFnZVRvTGFzdD1mdW5jdGlvbigpe3ZhciBlPXIucGFnaW5hdGlvbkFwaS5nZXRUb3RhbFBhZ2VzKCk7cmV0dXJuIWV8fG8ucGFnaW5hdGlvbkN1cnJlbnRQYWdlPj1lfSxyLmNhbnRQYWdlQmFja3dhcmQ9ZnVuY3Rpb24oKXtyZXR1cm4gby5wYWdpbmF0aW9uQ3VycmVudFBhZ2U8PTF9O3ZhciBzPWZ1bmN0aW9uKGUpe2UmJmMuZm9jdXMuYnlTZWxlY3Rvcih0LCIudWktZ3JpZC1wYWdlci1jb250cm9sLWlucHV0Iil9O3IucGFnZUZpcnN0UGFnZUNsaWNrPWZ1bmN0aW9uKCl7ci5wYWdpbmF0aW9uQXBpLnNlZWsoMSkscyhyLmNhbnRQYWdlQmFja3dhcmQoKSl9LHIucGFnZVByZXZpb3VzUGFnZUNsaWNrPWZ1bmN0aW9uKCl7ci5wYWdpbmF0aW9uQXBpLnByZXZpb3VzUGFnZSgpLHMoci5jYW50UGFnZUJhY2t3YXJkKCkpfSxyLnBhZ2VOZXh0UGFnZUNsaWNrPWZ1bmN0aW9uKCl7ci5wYWdpbmF0aW9uQXBpLm5leHRQYWdlKCkscyhyLmNhbnRQYWdlRm9yd2FyZCgpKX0sci5wYWdlTGFzdFBhZ2VDbGljaz1mdW5jdGlvbigpe3IucGFnaW5hdGlvbkFwaS5zZWVrKHIucGFnaW5hdGlvbkFwaS5nZXRUb3RhbFBhZ2VzKCkpLHMoci5jYW50UGFnZVRvTGFzdCgpKX19fX1dKX0oKSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT1hbmd1bGFyLm1vZHVsZSgidWkuZ3JpZC5waW5uaW5nIixbInVpLmdyaWQiXSk7ZS5jb25zdGFudCgidWlHcmlkUGlubmluZ0NvbnN0YW50cyIse2NvbnRhaW5lcjp7TEVGVDoibGVmdCIsUklHSFQ6InJpZ2h0IixOT05FOiIifX0pLGUuc2VydmljZSgidWlHcmlkUGlubmluZ1NlcnZpY2UiLFsiZ3JpZFV0aWwiLCJHcmlkUmVuZGVyQ29udGFpbmVyIiwiaTE4blNlcnZpY2UiLCJ1aUdyaWRQaW5uaW5nQ29uc3RhbnRzIixmdW5jdGlvbihhLGUsbCxzKXt2YXIgZD17aW5pdGlhbGl6ZUdyaWQ6ZnVuY3Rpb24ocil7ZC5kZWZhdWx0R3JpZE9wdGlvbnMoci5vcHRpb25zKSxyLnJlZ2lzdGVyQ29sdW1uQnVpbGRlcihkLnBpbm5pbmdDb2x1bW5CdWlsZGVyKTt2YXIgZT17ZXZlbnRzOntwaW5uaW5nOntjb2x1bW5QaW5uZWQ6ZnVuY3Rpb24oZSx0KXt9fX0sbWV0aG9kczp7cGlubmluZzp7cGluQ29sdW1uOmZ1bmN0aW9uKGUsdCl7ZC5waW5Db2x1bW4ocixlLHQpfX19fTtyLmFwaS5yZWdpc3RlckV2ZW50c0Zyb21PYmplY3QoZS5ldmVudHMpLHIuYXBpLnJlZ2lzdGVyTWV0aG9kc0Zyb21PYmplY3QoZS5tZXRob2RzKX0sZGVmYXVsdEdyaWRPcHRpb25zOmZ1bmN0aW9uKGUpe2UuZW5hYmxlUGlubmluZz0hMSE9PWUuZW5hYmxlUGlubmluZyxlLmhpZGVQaW5MZWZ0PWUuZW5hYmxlUGlubmluZyYmZS5oaWRlUGluTGVmdCxlLmhpZGVQaW5SaWdodD1lLmVuYWJsZVBpbm5pbmcmJmUuaGlkZVBpblJpZ2h0fSxwaW5uaW5nQ29sdW1uQnVpbGRlcjpmdW5jdGlvbihlLHQscil7aWYoZS5lbmFibGVQaW5uaW5nPXZvaWQgMD09PWUuZW5hYmxlUGlubmluZz9yLmVuYWJsZVBpbm5pbmc6ZS5lbmFibGVQaW5uaW5nLGUuaGlkZVBpbkxlZnQ9dm9pZCAwPT09ZS5oaWRlUGluTGVmdD9yLmhpZGVQaW5MZWZ0OmUuaGlkZVBpbkxlZnQsZS5oaWRlUGluUmlnaHQ9dm9pZCAwPT09ZS5oaWRlUGluUmlnaHQ/ci5oaWRlUGluUmlnaHQ6ZS5oaWRlUGluUmlnaHQsZS5waW5uZWRMZWZ0Pyh0LnJlbmRlckNvbnRhaW5lcj0ibGVmdCIsdC5ncmlkLmNyZWF0ZUxlZnRDb250YWluZXIoKSk6ZS5waW5uZWRSaWdodCYmKHQucmVuZGVyQ29udGFpbmVyPSJyaWdodCIsdC5ncmlkLmNyZWF0ZVJpZ2h0Q29udGFpbmVyKCkpLGUuZW5hYmxlUGlubmluZyl7dmFyIGk9e25hbWU6InVpLmdyaWQucGlubmluZy5waW5MZWZ0Iix0aXRsZTpsLmdldCgpLnBpbm5pbmcucGluTGVmdCxpY29uOiJ1aS1ncmlkLWljb24tbGVmdC1vcGVuIixzaG93bjpmdW5jdGlvbigpe3JldHVybiB2b2lkIDA9PT10aGlzLmNvbnRleHQuY29sLnJlbmRlckNvbnRhaW5lcnx8IXRoaXMuY29udGV4dC5jb2wucmVuZGVyQ29udGFpbmVyfHwibGVmdCIhPT10aGlzLmNvbnRleHQuY29sLnJlbmRlckNvbnRhaW5lcn0sYWN0aW9uOmZ1bmN0aW9uKCl7ZC5waW5Db2x1bW4odGhpcy5jb250ZXh0LmNvbC5ncmlkLHRoaXMuY29udGV4dC5jb2wscy5jb250YWluZXIuTEVGVCl9fSxuPXtuYW1lOiJ1aS5ncmlkLnBpbm5pbmcucGluUmlnaHQiLHRpdGxlOmwuZ2V0KCkucGlubmluZy5waW5SaWdodCxpY29uOiJ1aS1ncmlkLWljb24tcmlnaHQtb3BlbiIsc2hvd246ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwPT09dGhpcy5jb250ZXh0LmNvbC5yZW5kZXJDb250YWluZXJ8fCF0aGlzLmNvbnRleHQuY29sLnJlbmRlckNvbnRhaW5lcnx8InJpZ2h0IiE9PXRoaXMuY29udGV4dC5jb2wucmVuZGVyQ29udGFpbmVyfSxhY3Rpb246ZnVuY3Rpb24oKXtkLnBpbkNvbHVtbih0aGlzLmNvbnRleHQuY29sLmdyaWQsdGhpcy5jb250ZXh0LmNvbCxzLmNvbnRhaW5lci5SSUdIVCl9fSxvPXtuYW1lOiJ1aS5ncmlkLnBpbm5pbmcudW5waW4iLHRpdGxlOmwuZ2V0KCkucGlubmluZy51bnBpbixpY29uOiJ1aS1ncmlkLWljb24tY2FuY2VsIixzaG93bjpmdW5jdGlvbigpe3JldHVybiB2b2lkIDAhPT10aGlzLmNvbnRleHQuY29sLnJlbmRlckNvbnRhaW5lciYmbnVsbCE9PXRoaXMuY29udGV4dC5jb2wucmVuZGVyQ29udGFpbmVyJiYiYm9keSIhPT10aGlzLmNvbnRleHQuY29sLnJlbmRlckNvbnRhaW5lcn0sYWN0aW9uOmZ1bmN0aW9uKCl7ZC5waW5Db2x1bW4odGhpcy5jb250ZXh0LmNvbC5ncmlkLHRoaXMuY29udGV4dC5jb2wscy5jb250YWluZXIuTk9ORSl9fTtlLmhpZGVQaW5MZWZ0fHxhLmFycmF5Q29udGFpbnNPYmplY3RXaXRoUHJvcGVydHkodC5tZW51SXRlbXMsIm5hbWUiLCJ1aS5ncmlkLnBpbm5pbmcucGluTGVmdCIpfHx0Lm1lbnVJdGVtcy5wdXNoKGkpLGUuaGlkZVBpblJpZ2h0fHxhLmFycmF5Q29udGFpbnNPYmplY3RXaXRoUHJvcGVydHkodC5tZW51SXRlbXMsIm5hbWUiLCJ1aS5ncmlkLnBpbm5pbmcucGluUmlnaHQiKXx8dC5tZW51SXRlbXMucHVzaChuKSxhLmFycmF5Q29udGFpbnNPYmplY3RXaXRoUHJvcGVydHkodC5tZW51SXRlbXMsIm5hbWUiLCJ1aS5ncmlkLnBpbm5pbmcudW5waW4iKXx8dC5tZW51SXRlbXMucHVzaChvKX19LHBpbkNvbHVtbjpmdW5jdGlvbihlLHQscil7cj09PXMuY29udGFpbmVyLk5PTkU/KHQucmVuZGVyQ29udGFpbmVyPW51bGwsdC5jb2xEZWYucGlubmVkTGVmdD10LmNvbERlZi5waW5uZWRSaWdodD0hMSk6KHQucmVuZGVyQ29udGFpbmVyPXIpPT09cy5jb250YWluZXIuTEVGVD9lLmNyZWF0ZUxlZnRDb250YWluZXIoKTpyPT09cy5jb250YWluZXIuUklHSFQmJmUuY3JlYXRlUmlnaHRDb250YWluZXIoKSxlLnJlZnJlc2goKS50aGVuKGZ1bmN0aW9uKCl7ZS5hcGkucGlubmluZy5yYWlzZS5jb2x1bW5QaW5uZWQodC5jb2xEZWYscil9KX19O3JldHVybiBkfV0pLGUuZGlyZWN0aXZlKCJ1aUdyaWRQaW5uaW5nIixbImdyaWRVdGlsIiwidWlHcmlkUGlubmluZ1NlcnZpY2UiLGZ1bmN0aW9uKGUsbil7cmV0dXJue3JlcXVpcmU6InVpR3JpZCIsc2NvcGU6ITEsY29tcGlsZTpmdW5jdGlvbigpe3JldHVybntwcmU6ZnVuY3Rpb24oZSx0LHIsaSl7bi5pbml0aWFsaXplR3JpZChpLmdyaWQpfSxwb3N0OmZ1bmN0aW9uKGUsdCxyLGkpe319fX19XSl9KCksZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7dmFyIGU9YW5ndWxhci5tb2R1bGUoInVpLmdyaWQucmVzaXplQ29sdW1ucyIsWyJ1aS5ncmlkIl0pO2Uuc2VydmljZSgidWlHcmlkUmVzaXplQ29sdW1uc1NlcnZpY2UiLFsiZ3JpZFV0aWwiLCIkcSIsIiRyb290U2NvcGUiLGZ1bmN0aW9uKGksbixvKXtyZXR1cm57ZGVmYXVsdEdyaWRPcHRpb25zOmZ1bmN0aW9uKGUpe2UuZW5hYmxlQ29sdW1uUmVzaXppbmc9ITEhPT1lLmVuYWJsZUNvbHVtblJlc2l6aW5nLCExPT09ZS5lbmFibGVDb2x1bW5SZXNpemUmJihlLmVuYWJsZUNvbHVtblJlc2l6aW5nPSExKX0sY29sUmVzaXplckNvbHVtbkJ1aWxkZXI6ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlLmVuYWJsZUNvbHVtblJlc2l6aW5nPXZvaWQgMD09PWUuZW5hYmxlQ29sdW1uUmVzaXppbmc/ci5lbmFibGVDb2x1bW5SZXNpemluZzplLmVuYWJsZUNvbHVtblJlc2l6aW5nLCExPT09ZS5lbmFibGVDb2x1bW5SZXNpemUmJihlLmVuYWJsZUNvbHVtblJlc2l6aW5nPSExKSxuLmFsbChbXSl9LHJlZ2lzdGVyUHVibGljQXBpOmZ1bmN0aW9uKGUpe2UuYXBpLnJlZ2lzdGVyRXZlbnRzRnJvbU9iamVjdCh7Y29sUmVzaXphYmxlOntjb2x1bW5TaXplQ2hhbmdlZDpmdW5jdGlvbihlLHQpe319fSl9LGZpcmVDb2x1bW5TaXplQ2hhbmdlZDpmdW5jdGlvbihlLHQscil7by4kYXBwbHlBc3luYyhmdW5jdGlvbigpe2UuYXBpLmNvbFJlc2l6YWJsZT9lLmFwaS5jb2xSZXNpemFibGUucmFpc2UuY29sdW1uU2l6ZUNoYW5nZWQodCxyKTppLmxvZ0Vycm9yKCJUaGUgcmVzaXplYWJsZSBhcGkgaXMgbm90IHJlZ2lzdGVyZWQsIHRoaXMgbWF5IGluZGljYXRlIHRoYXQgeW91J3ZlIGluY2x1ZGVkIHRoZSBtb2R1bGUgYnV0IG5vdCBhZGRlZCB0aGUgJ3VpLWdyaWQtcmVzaXplLWNvbHVtbnMnIGRpcmVjdGl2ZSB0byB5b3VyIGdyaWQgZGVmaW5pdGlvbi4gIENhbm5vdCByYWlzZSBhbnkgZXZlbnRzLiIpfSl9LGZpbmRUYXJnZXRDb2w6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPWUuZ2V0UmVuZGVyQ29udGFpbmVyKCk7aWYoImxlZnQiPT09dCl7dmFyIG49aS52aXNpYmxlQ29sdW1uQ2FjaGUuaW5kZXhPZihlKTtyZXR1cm4gaS52aXNpYmxlQ29sdW1uQ2FjaGVbbi0xKnJdfXJldHVybiBlfX19XSksZS5kaXJlY3RpdmUoInVpR3JpZFJlc2l6ZUNvbHVtbnMiLFsiZ3JpZFV0aWwiLCJ1aUdyaWRSZXNpemVDb2x1bW5zU2VydmljZSIsZnVuY3Rpb24oZSxuKXtyZXR1cm57cmVwbGFjZTohMCxwcmlvcml0eTowLHJlcXVpcmU6Il51aUdyaWQiLHNjb3BlOiExLGNvbXBpbGU6ZnVuY3Rpb24oKXtyZXR1cm57cHJlOmZ1bmN0aW9uKGUsdCxyLGkpe24uZGVmYXVsdEdyaWRPcHRpb25zKGkuZ3JpZC5vcHRpb25zKSxpLmdyaWQucmVnaXN0ZXJDb2x1bW5CdWlsZGVyKG4uY29sUmVzaXplckNvbHVtbkJ1aWxkZXIpLG4ucmVnaXN0ZXJQdWJsaWNBcGkoaS5ncmlkKX0scG9zdDpmdW5jdGlvbihlLHQscixpKXt9fX19fV0pLGUuZGlyZWN0aXZlKCJ1aUdyaWRIZWFkZXJDZWxsIixbImdyaWRVdGlsIiwiJHRlbXBsYXRlQ2FjaGUiLCIkY29tcGlsZSIsIiRxIiwidWlHcmlkUmVzaXplQ29sdW1uc1NlcnZpY2UiLCJ1aUdyaWRDb25zdGFudHMiLGZ1bmN0aW9uKGUsbyx1LHQsYyxnKXtyZXR1cm57cHJpb3JpdHk6LTEwLHJlcXVpcmU6Il51aUdyaWQiLGNvbXBpbGU6ZnVuY3Rpb24oKXtyZXR1cm57cG9zdDpmdW5jdGlvbihhLGwsZSx0KXt2YXIgcj10LmdyaWQ7aWYoci5vcHRpb25zLmVuYWJsZUNvbHVtblJlc2l6aW5nKXt2YXIgcz1vLmdldCgidWktZ3JpZC9jb2x1bW5SZXNpemVyIiksZD0xO3IuaXNSVEwoKSYmKGEucG9zaXRpb249ImxlZnQiLGQ9LTEpO3ZhciBpPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPWxbMF0uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgidWktZ3JpZC1jb2x1bW4tcmVzaXplciIpLHQ9MDt0PGUubGVuZ3RoO3QrKylhbmd1bGFyLmVsZW1lbnQoZVt0XSkucmVtb3ZlKCk7dmFyIHI9Yy5maW5kVGFyZ2V0Q29sKGEuY29sLCJsZWZ0IixkKSxpPWEuY29sLmdldFJlbmRlckNvbnRhaW5lcigpO2lmKHImJjAhPT1pLnZpc2libGVDb2x1bW5DYWNoZS5pbmRleE9mKGEuY29sKSYmITEhPT1yLmNvbERlZi5lbmFibGVDb2x1bW5SZXNpemluZyl7dmFyIG49YW5ndWxhci5lbGVtZW50KHMpLmNsb25lKCk7bi5hdHRyKCJwb3NpdGlvbiIsImxlZnQiKSxsLnByZXBlbmQobiksdShuKShhKX1pZighMSE9PWEuY29sLmNvbERlZi5lbmFibGVDb2x1bW5SZXNpemluZyl7dmFyIG89YW5ndWxhci5lbGVtZW50KHMpLmNsb25lKCk7by5hdHRyKCJwb3NpdGlvbiIsInJpZ2h0IiksbC5hcHBlbmQobyksdShvKShhKX19O2koKTt2YXIgbj1yLnJlZ2lzdGVyRGF0YUNoYW5nZUNhbGxiYWNrKGZ1bmN0aW9uKCl7YS4kYXBwbHlBc3luYyhpKX0sW2cuZGF0YUNoYW5nZS5DT0xVTU5dKTthLiRvbigiJGRlc3Ryb3kiLG4pfX19fX19XSksZS5kaXJlY3RpdmUoInVpR3JpZENvbHVtblJlc2l6ZXIiLFsiJGRvY3VtZW50IiwiZ3JpZFV0aWwiLCJ1aUdyaWRDb25zdGFudHMiLCJ1aUdyaWRSZXNpemVDb2x1bW5zU2VydmljZSIsZnVuY3Rpb24oaCx2LEMsdyl7dmFyIGI9YW5ndWxhci5lbGVtZW50KCc8ZGl2IGNsYXNzPSJ1aS1ncmlkLXJlc2l6ZS1vdmVybGF5Ij48L2Rpdj4nKTtyZXR1cm57cHJpb3JpdHk6MCxzY29wZTp7Y29sOiI9Iixwb3NpdGlvbjoiQCIscmVuZGVySW5kZXg6Ij0ifSxyZXF1aXJlOiI/XnVpR3JpZCIsbGluazpmdW5jdGlvbihsLHMsZSxkKXt2YXIgbz0wLGE9MCx1PTAsYz0xO2Z1bmN0aW9uIGcoZSl7ZC5ncmlkLnJlZnJlc2hDYW52YXMoITApLnRoZW4oZnVuY3Rpb24oKXtkLmdyaWQucXVldWVHcmlkUmVmcmVzaCgpfSl9ZnVuY3Rpb24gcChlLHQpe3ZhciByPXQ7cmV0dXJuIGUubWluV2lkdGgmJnI8ZS5taW5XaWR0aD9yPWUubWluV2lkdGg6ZS5tYXhXaWR0aCYmcj5lLm1heFdpZHRoJiYocj1lLm1heFdpZHRoKSxyfWZ1bmN0aW9uIHIoZSx0KXtlLm9yaWdpbmFsRXZlbnQmJihlPWUub3JpZ2luYWxFdmVudCksZS5wcmV2ZW50RGVmYXVsdCgpLChhPShlLnRhcmdldFRvdWNoZXM/ZS50YXJnZXRUb3VjaGVzWzBdOmUpLmNsaWVudFgtdSk8MD9hPTA6YT5kLmdyaWQuZ3JpZFdpZHRoJiYoYT1kLmdyaWQuZ3JpZFdpZHRoKTt2YXIgcj13LmZpbmRUYXJnZXRDb2wobC5jb2wsbC5wb3NpdGlvbixjKTtpZighMSE9PXIuY29sRGVmLmVuYWJsZUNvbHVtblJlc2l6aW5nKXtkLmdyaWQuZWxlbWVudC5oYXNDbGFzcygiY29sdW1uLXJlc2l6aW5nIil8fGQuZ3JpZC5lbGVtZW50LmFkZENsYXNzKCJjb2x1bW4tcmVzaXppbmciKTt2YXIgaT1hLW8sbj1wYXJzZUludChyLmRyYXduV2lkdGgraSpjLDEwKTthKz0ocChyLG4pLW4pKmMsYi5jc3Moe2xlZnQ6YSsicHgifSksZC5maXJlRXZlbnQoQy5ldmVudHMuSVRFTV9EUkFHR0lORyl9fWZ1bmN0aW9uIGkoZSx0KXtlLm9yaWdpbmFsRXZlbnQmJihlPWUub3JpZ2luYWxFdmVudCksZS5wcmV2ZW50RGVmYXVsdCgpLGQuZ3JpZC5lbGVtZW50LnJlbW92ZUNsYXNzKCJjb2x1bW4tcmVzaXppbmciKSxiLnJlbW92ZSgpO3ZhciByPShhPShlLmNoYW5nZWRUb3VjaGVzP2UuY2hhbmdlZFRvdWNoZXNbMF06ZSkuY2xpZW50WC11KS1vO2lmKDA9PT1yKXJldHVybiBtKCksdm9pZCBmKCk7dmFyIGk9dy5maW5kVGFyZ2V0Q29sKGwuY29sLGwucG9zaXRpb24sYyk7aWYoITEhPT1pLmNvbERlZi5lbmFibGVDb2x1bW5SZXNpemluZyl7dmFyIG49cGFyc2VJbnQoaS5kcmF3bldpZHRoK3IqYywxMCk7aS53aWR0aD1wKGksbiksaS5oYXNDdXN0b21XaWR0aD0hMCxnKCksdy5maXJlQ29sdW1uU2l6ZUNoYW5nZWQoZC5ncmlkLGkuY29sRGVmLHIpLG0oKSxmKCl9fWQuZ3JpZC5pc1JUTCgpJiYobC5wb3NpdGlvbj0ibGVmdCIsYz0tMSksImxlZnQiPT09bC5wb3NpdGlvbj9zLmFkZENsYXNzKCJsZWZ0Iik6InJpZ2h0Ij09PWwucG9zaXRpb24mJnMuYWRkQ2xhc3MoInJpZ2h0Iik7dmFyIG49ZnVuY3Rpb24oZSx0KXtlLm9yaWdpbmFsRXZlbnQmJihlPWUub3JpZ2luYWxFdmVudCksZS5zdG9wUHJvcGFnYXRpb24oKSx1PWQuZ3JpZC5lbGVtZW50WzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQsbz0oZS50YXJnZXRUb3VjaGVzP2UudGFyZ2V0VG91Y2hlc1swXTplKS5jbGllbnRYLXUsZC5ncmlkLmVsZW1lbnQuYXBwZW5kKGIpLGIuY3NzKHtsZWZ0Om99KSwidG91Y2hzdGFydCI9PT1lLnR5cGU/KGgub24oInRvdWNoZW5kIixpKSxoLm9uKCJ0b3VjaG1vdmUiLHIpLHMub2ZmKCJtb3VzZWRvd24iLG4pKTooaC5vbigibW91c2V1cCIsaSksaC5vbigibW91c2Vtb3ZlIixyKSxzLm9mZigidG91Y2hzdGFydCIsbikpfSxmPWZ1bmN0aW9uKCl7cy5vbigibW91c2Vkb3duIixuKSxzLm9uKCJ0b3VjaHN0YXJ0IixuKX0sbT1mdW5jdGlvbigpe2gub2ZmKCJtb3VzZXVwIixpKSxoLm9mZigidG91Y2hlbmQiLGkpLGgub2ZmKCJtb3VzZW1vdmUiLHIpLGgub2ZmKCJ0b3VjaG1vdmUiLHIpLHMub2ZmKCJtb3VzZWRvd24iLG4pLHMub2ZmKCJ0b3VjaHN0YXJ0IixuKX07ZigpO3ZhciB0PWZ1bmN0aW9uKGUsdCl7ZS5zdG9wUHJvcGFnYXRpb24oKTt2YXIgcj13LmZpbmRUYXJnZXRDb2wobC5jb2wsbC5wb3NpdGlvbixjKTtpZighMSE9PXIuY29sRGVmLmVuYWJsZUNvbHVtblJlc2l6aW5nKXt2YXIgaSxuPTAsbz12LmNsb3Nlc3RFbG0ocywiLnVpLWdyaWQtcmVuZGVyLWNvbnRhaW5lciIpLnF1ZXJ5U2VsZWN0b3JBbGwoIi4iK0MuQ09MX0NMQVNTX1BSRUZJWCtyLnVpZCsiIC51aS1ncmlkLWNlbGwtY29udGVudHMiKTtBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKG8sZnVuY3Rpb24oZSl7dmFyIGk7YW5ndWxhci5lbGVtZW50KGUpLnBhcmVudCgpLmhhc0NsYXNzKCJ1aS1ncmlkLWhlYWRlci1jZWxsIikmJihpPWFuZ3VsYXIuZWxlbWVudChlKS5wYXJlbnQoKVswXS5xdWVyeVNlbGVjdG9yQWxsKCIudWktZ3JpZC1jb2x1bW4tbWVudS1idXR0b24iKSksdi5mYWtlRWxlbWVudChlLHt9LGZ1bmN0aW9uKGUpe3ZhciB0PWFuZ3VsYXIuZWxlbWVudChlKTt0LmF0dHIoInN0eWxlIiwiZmxvYXQ6IGxlZnQiKTt2YXIgcj12LmVsZW1lbnRXaWR0aCh0KTtpJiYocis9di5lbGVtZW50V2lkdGgoaSkpO248ciYmKG49cil9KX0pO3ZhciBhPXAocixuKTtpPWEtci5kcmF3bldpZHRoLHIud2lkdGg9YSxyLmhhc0N1c3RvbVdpZHRoPSEwLGcoKSx3LmZpcmVDb2x1bW5TaXplQ2hhbmdlZChkLmdyaWQsci5jb2xEZWYsaSl9fTtzLm9uKCJkYmxjbGljayIsdCkscy5vbigiJGRlc3Ryb3kiLGZ1bmN0aW9uKCl7cy5vZmYoImRibGNsaWNrIix0KSxtKCl9KX19fV0pfSgpLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3ZhciBlPWFuZ3VsYXIubW9kdWxlKCJ1aS5ncmlkLnJvd0VkaXQiLFsidWkuZ3JpZCIsInVpLmdyaWQuZWRpdCIsInVpLmdyaWQuY2VsbE5hdiJdKTtlLmNvbnN0YW50KCJ1aUdyaWRSb3dFZGl0Q29uc3RhbnRzIix7fSksZS5zZXJ2aWNlKCJ1aUdyaWRSb3dFZGl0U2VydmljZSIsWyIkaW50ZXJ2YWwiLCIkcSIsInVpR3JpZENvbnN0YW50cyIsInVpR3JpZFJvd0VkaXRDb25zdGFudHMiLCJncmlkVXRpbCIsZnVuY3Rpb24oaSxlLHQscixhKXt2YXIgbD17aW5pdGlhbGl6ZUdyaWQ6ZnVuY3Rpb24odCxyKXtyLnJvd0VkaXQ9e307dmFyIGU9e2V2ZW50czp7cm93RWRpdDp7c2F2ZVJvdzpmdW5jdGlvbihlKXt9fX0sbWV0aG9kczp7cm93RWRpdDp7c2V0U2F2ZVByb21pc2U6ZnVuY3Rpb24oZSx0KXtsLnNldFNhdmVQcm9taXNlKHIsZSx0KX0sZ2V0RGlydHlSb3dzOmZ1bmN0aW9uKCl7cmV0dXJuIHIucm93RWRpdC5kaXJ0eVJvd3M/ci5yb3dFZGl0LmRpcnR5Um93czpbXX0sZ2V0RXJyb3JSb3dzOmZ1bmN0aW9uKCl7cmV0dXJuIHIucm93RWRpdC5lcnJvclJvd3M/ci5yb3dFZGl0LmVycm9yUm93czpbXX0sZmx1c2hEaXJ0eVJvd3M6ZnVuY3Rpb24oKXtyZXR1cm4gbC5mbHVzaERpcnR5Um93cyhyKX0sc2V0Um93c0RpcnR5OmZ1bmN0aW9uKGUpe2wuc2V0Um93c0RpcnR5KHIsZSl9LHNldFJvd3NDbGVhbjpmdW5jdGlvbihlKXtsLnNldFJvd3NDbGVhbihyLGUpfX19fTtyLmFwaS5yZWdpc3RlckV2ZW50c0Zyb21PYmplY3QoZS5ldmVudHMpLHIuYXBpLnJlZ2lzdGVyTWV0aG9kc0Zyb21PYmplY3QoZS5tZXRob2RzKSxyLmFwaS5jb3JlLm9uLnJlbmRlcmluZ0NvbXBsZXRlKHQsZnVuY3Rpb24oZSl7ci5hcGkuZWRpdC5vbi5hZnRlckNlbGxFZGl0KHQsbC5lbmRFZGl0Q2VsbCksci5hcGkuZWRpdC5vbi5iZWdpbkNlbGxFZGl0KHQsbC5iZWdpbkVkaXRDZWxsKSxyLmFwaS5lZGl0Lm9uLmNhbmNlbENlbGxFZGl0KHQsbC5jYW5jZWxFZGl0Q2VsbCksci5hcGkuY2VsbE5hdiYmci5hcGkuY2VsbE5hdi5vbi5uYXZpZ2F0ZSh0LGwubmF2aWdhdGUpfSl9LGRlZmF1bHRHcmlkT3B0aW9uczpmdW5jdGlvbihlKXt9LHNhdmVSb3c6ZnVuY3Rpb24odCxyKXt2YXIgaT10aGlzO3JldHVybiBmdW5jdGlvbigpe2lmKHIuaXNTYXZpbmc9ITAsci5yb3dFZGl0U2F2ZVByb21pc2UpcmV0dXJuIHIucm93RWRpdFNhdmVQcm9taXNlO3ZhciBlPXQuYXBpLnJvd0VkaXQucmFpc2Uuc2F2ZVJvdyhyLmVudGl0eSk7cmV0dXJuIHIucm93RWRpdFNhdmVQcm9taXNlP3Iucm93RWRpdFNhdmVQcm9taXNlLnRoZW4oaS5wcm9jZXNzU3VjY2Vzc1Byb21pc2UodCxyKSxpLnByb2Nlc3NFcnJvclByb21pc2UodCxyKSk6YS5sb2dFcnJvcigiQSBwcm9taXNlIHdhcyBub3QgcmV0dXJuZWQgd2hlbiBzYXZlUm93IGV2ZW50IHdhcyByYWlzZWQsIGVpdGhlciBub2JvZHkgaXMgbGlzdGVuaW5nIHRvIGV2ZW50LCBvciBldmVudCBoYW5kbGVyIGRpZCBub3QgcmV0dXJuIGEgcHJvbWlzZSIpLGV9fSxzZXRTYXZlUHJvbWlzZTpmdW5jdGlvbihlLHQscil7ZS5nZXRSb3codCkucm93RWRpdFNhdmVQcm9taXNlPXJ9LHByb2Nlc3NTdWNjZXNzUHJvbWlzZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKCl7ZGVsZXRlIHQuaXNTYXZpbmcsZGVsZXRlIHQuaXNEaXJ0eSxkZWxldGUgdC5pc0Vycm9yLGRlbGV0ZSB0LnJvd0VkaXRTYXZlVGltZXIsZGVsZXRlIHQucm93RWRpdFNhdmVQcm9taXNlLHIucmVtb3ZlUm93KGUucm93RWRpdC5lcnJvclJvd3MsdCksci5yZW1vdmVSb3coZS5yb3dFZGl0LmRpcnR5Um93cyx0KX19LHByb2Nlc3NFcnJvclByb21pc2U6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24oKXtkZWxldGUgdC5pc1NhdmluZyxkZWxldGUgdC5yb3dFZGl0U2F2ZVRpbWVyLGRlbGV0ZSB0LnJvd0VkaXRTYXZlUHJvbWlzZSx0LmlzRXJyb3I9ITAsZS5yb3dFZGl0LmVycm9yUm93c3x8KGUucm93RWRpdC5lcnJvclJvd3M9W10pLGwuaXNSb3dQcmVzZW50KGUucm93RWRpdC5lcnJvclJvd3MsdCl8fGUucm93RWRpdC5lcnJvclJvd3MucHVzaCh0KX19LHJlbW92ZVJvdzpmdW5jdGlvbihyLGkpe251bGwhPXImJnIuZm9yRWFjaChmdW5jdGlvbihlLHQpe2UudWlkPT09aS51aWQmJnIuc3BsaWNlKHQsMSl9KX0saXNSb3dQcmVzZW50OmZ1bmN0aW9uKGUscil7dmFyIGk9ITE7cmV0dXJuIGUuZm9yRWFjaChmdW5jdGlvbihlLHQpe2UudWlkPT09ci51aWQmJihpPSEwKX0pLGl9LGZsdXNoRGlydHlSb3dzOmZ1bmN0aW9uKHQpe3ZhciByPVtdO3JldHVybiB0LmFwaS5yb3dFZGl0LmdldERpcnR5Um93cygpLmZvckVhY2goZnVuY3Rpb24oZSl7bC5jYW5jZWxUaW1lcih0LGUpLGwuc2F2ZVJvdyh0LGUpKCksci5wdXNoKGUucm93RWRpdFNhdmVQcm9taXNlKX0pLGUuYWxsKHIpfSxlbmRFZGl0Q2VsbDpmdW5jdGlvbihlLHQscixpKXt2YXIgbj10aGlzLmdyaWQsbz1uLmdldFJvdyhlKTtvPyhyIT09aXx8by5pc0RpcnR5KSYmKG4ucm93RWRpdC5kaXJ0eVJvd3N8fChuLnJvd0VkaXQuZGlydHlSb3dzPVtdKSxvLmlzRGlydHl8fChvLmlzRGlydHk9ITAsbi5yb3dFZGl0LmRpcnR5Um93cy5wdXNoKG8pKSxkZWxldGUgby5pc0Vycm9yLGwuY29uc2lkZXJTZXRUaW1lcihuLG8pKTphLmxvZ0Vycm9yKCJVbmFibGUgdG8gZmluZCByb3dFbnRpdHkgaW4gZ3JpZCBkYXRhLCBkaXJ0eSBmbGFnIGNhbm5vdCBiZSBzZXQiKX0sYmVnaW5FZGl0Q2VsbDpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuZ3JpZCxpPXIuZ2V0Um93KGUpO2k/bC5jYW5jZWxUaW1lcihyLGkpOmEubG9nRXJyb3IoIlVuYWJsZSB0byBmaW5kIHJvd0VudGl0eSBpbiBncmlkIGRhdGEsIHRpbWVyIGNhbm5vdCBiZSBjYW5jZWxsZWQiKX0sY2FuY2VsRWRpdENlbGw6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmdyaWQsaT1yLmdldFJvdyhlKTtpP2wuY29uc2lkZXJTZXRUaW1lcihyLGkpOmEubG9nRXJyb3IoIlVuYWJsZSB0byBmaW5kIHJvd0VudGl0eSBpbiBncmlkIGRhdGEsIHRpbWVyIGNhbm5vdCBiZSBzZXQiKX0sbmF2aWdhdGU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmdyaWQ7ZS5yb3cucm93RWRpdFNhdmVUaW1lciYmbC5jYW5jZWxUaW1lcihyLGUucm93KSx0JiZ0LnJvdyYmdC5yb3chPT1lLnJvdyYmbC5jb25zaWRlclNldFRpbWVyKHIsdC5yb3cpfSxjb25zaWRlclNldFRpbWVyOmZ1bmN0aW9uKGUsdCl7aWYobC5jYW5jZWxUaW1lcihlLHQpLHQuaXNEaXJ0eSYmIXQuaXNTYXZpbmcmJi0xIT09ZS5vcHRpb25zLnJvd0VkaXRXYWl0SW50ZXJ2YWwpe3ZhciByPWUub3B0aW9ucy5yb3dFZGl0V2FpdEludGVydmFsP2Uub3B0aW9ucy5yb3dFZGl0V2FpdEludGVydmFsOjJlMzt0LnJvd0VkaXRTYXZlVGltZXI9aShsLnNhdmVSb3coZSx0KSxyLDEpfX0sY2FuY2VsVGltZXI6ZnVuY3Rpb24oZSx0KXt0LnJvd0VkaXRTYXZlVGltZXImJiF0LmlzU2F2aW5nJiYoaS5jYW5jZWwodC5yb3dFZGl0U2F2ZVRpbWVyKSxkZWxldGUgdC5yb3dFZGl0U2F2ZVRpbWVyKX0sc2V0Um93c0RpcnR5OmZ1bmN0aW9uKHIsZSl7dmFyIGk7ZS5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7KGk9ci5nZXRSb3coZSkpPyhyLnJvd0VkaXQuZGlydHlSb3dzfHwoci5yb3dFZGl0LmRpcnR5Um93cz1bXSksaS5pc0RpcnR5fHwoaS5pc0RpcnR5PSEwLHIucm93RWRpdC5kaXJ0eVJvd3MucHVzaChpKSksZGVsZXRlIGkuaXNFcnJvcixsLmNvbnNpZGVyU2V0VGltZXIocixpKSk6YS5sb2dFcnJvcigicmVxdWVzdGVkIHJvdyBub3QgZm91bmQgaW4gcm93RWRpdC5zZXRSb3dzRGlydHksIHJvdyB3YXM6ICIrZSl9KX0sc2V0Um93c0NsZWFuOmZ1bmN0aW9uKHIsZSl7dmFyIGk7ZS5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7KGk9ci5nZXRSb3coZSkpPyhkZWxldGUgaS5pc0RpcnR5LGwucmVtb3ZlUm93KHIucm93RWRpdC5kaXJ0eVJvd3MsaSksbC5jYW5jZWxUaW1lcihyLGkpLGRlbGV0ZSBpLmlzRXJyb3IsbC5yZW1vdmVSb3coci5yb3dFZGl0LmVycm9yUm93cyxpKSk6YS5sb2dFcnJvcigicmVxdWVzdGVkIHJvdyBub3QgZm91bmQgaW4gcm93RWRpdC5zZXRSb3dzQ2xlYW4sIHJvdyB3YXM6ICIrZSl9KX19O3JldHVybiBsfV0pLGUuZGlyZWN0aXZlKCJ1aUdyaWRSb3dFZGl0IixbImdyaWRVdGlsIiwidWlHcmlkUm93RWRpdFNlcnZpY2UiLCJ1aUdyaWRFZGl0Q29uc3RhbnRzIixmdW5jdGlvbihlLG4sdCl7cmV0dXJue3JlcGxhY2U6ITAscHJpb3JpdHk6MCxyZXF1aXJlOiJedWlHcmlkIixzY29wZTohMSxjb21waWxlOmZ1bmN0aW9uKCl7cmV0dXJue3ByZTpmdW5jdGlvbihlLHQscixpKXtuLmluaXRpYWxpemVHcmlkKGUsaS5ncmlkKX0scG9zdDpmdW5jdGlvbihlLHQscixpKXt9fX19fV0pLGUuZGlyZWN0aXZlKCJ1aUdyaWRWaWV3cG9ydCIsWyIkY29tcGlsZSIsInVpR3JpZENvbnN0YW50cyIsImdyaWRVdGlsIiwiJHBhcnNlIixmdW5jdGlvbihlLHQscixpKXtyZXR1cm57cHJpb3JpdHk6LTIwMCxzY29wZTohMSxjb21waWxlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9YW5ndWxhci5lbGVtZW50KGUuY2hpbGRyZW4oKS5jaGlsZHJlbigpWzBdKSxpPXIuYXR0cigibmctY2xhc3MiKSxuPSIiO3JldHVybiBuPWk/aS5zbGljZSgwLC0xKSsiLCAndWktZ3JpZC1yb3ctZGlydHknOiByb3cuaXNEaXJ0eSwgJ3VpLWdyaWQtcm93LXNhdmluZyc6IHJvdy5pc1NhdmluZywgJ3VpLWdyaWQtcm93LWVycm9yJzogcm93LmlzRXJyb3J9Ijoieyd1aS1ncmlkLXJvdy1kaXJ0eSc6IHJvdy5pc0RpcnR5LCAndWktZ3JpZC1yb3ctc2F2aW5nJzogcm93LmlzU2F2aW5nLCAndWktZ3JpZC1yb3ctZXJyb3InOiByb3cuaXNFcnJvcn0iLHIuYXR0cigibmctY2xhc3MiLG4pLHtwcmU6ZnVuY3Rpb24oZSx0LHIsaSl7fSxwb3N0OmZ1bmN0aW9uKGUsdCxyLGkpe319fX19XSl9KCksZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7dmFyIGU9YW5ndWxhci5tb2R1bGUoInVpLmdyaWQuc2F2ZVN0YXRlIixbInVpLmdyaWQiLCJ1aS5ncmlkLnNlbGVjdGlvbiIsInVpLmdyaWQuY2VsbE5hdiIsInVpLmdyaWQuZ3JvdXBpbmciLCJ1aS5ncmlkLnBpbm5pbmciLCJ1aS5ncmlkLnRyZWVWaWV3Il0pO2UuY29uc3RhbnQoInVpR3JpZFNhdmVTdGF0ZUNvbnN0YW50cyIse2ZlYXR1cmVOYW1lOiJzYXZlU3RhdGUifSksZS5zZXJ2aWNlKCJ1aUdyaWRTYXZlU3RhdGVTZXJ2aWNlIixbIiRxIiwidWlHcmlkU2F2ZVN0YXRlQ29uc3RhbnRzIiwiZ3JpZFV0aWwiLCIkY29tcGlsZSIsIiRpbnRlcnZhbCIsInVpR3JpZENvbnN0YW50cyIsZnVuY3Rpb24oZSx0LHIsaSxuLG8pe3ZhciBsPXtpbml0aWFsaXplR3JpZDpmdW5jdGlvbihyKXtyLnNhdmVTdGF0ZT17fSx0aGlzLmRlZmF1bHRHcmlkT3B0aW9ucyhyLm9wdGlvbnMpO3ZhciBlPXtldmVudHM6e3NhdmVTdGF0ZTp7fX0sbWV0aG9kczp7c2F2ZVN0YXRlOntzYXZlOmZ1bmN0aW9uKCl7cmV0dXJuIGwuc2F2ZShyKX0scmVzdG9yZTpmdW5jdGlvbihlLHQpe3JldHVybiBsLnJlc3RvcmUocixlLHQpfX19fTtyLmFwaS5yZWdpc3RlckV2ZW50c0Zyb21PYmplY3QoZS5ldmVudHMpLHIuYXBpLnJlZ2lzdGVyTWV0aG9kc0Zyb21PYmplY3QoZS5tZXRob2RzKX0sZGVmYXVsdEdyaWRPcHRpb25zOmZ1bmN0aW9uKGUpe2Uuc2F2ZVdpZHRocz0hMSE9PWUuc2F2ZVdpZHRocyxlLnNhdmVPcmRlcj0hMSE9PWUuc2F2ZU9yZGVyLGUuc2F2ZVNjcm9sbD0hMD09PWUuc2F2ZVNjcm9sbCxlLnNhdmVGb2N1cz0hMCE9PWUuc2F2ZVNjcm9sbCYmITEhPT1lLnNhdmVGb2N1cyxlLnNhdmVWaXNpYmxlPSExIT09ZS5zYXZlVmlzaWJsZSxlLnNhdmVTb3J0PSExIT09ZS5zYXZlU29ydCxlLnNhdmVGaWx0ZXI9ITEhPT1lLnNhdmVGaWx0ZXIsZS5zYXZlU2VsZWN0aW9uPSExIT09ZS5zYXZlU2VsZWN0aW9uLGUuc2F2ZUdyb3VwaW5nPSExIT09ZS5zYXZlR3JvdXBpbmcsZS5zYXZlR3JvdXBpbmdFeHBhbmRlZFN0YXRlcz0hMD09PWUuc2F2ZUdyb3VwaW5nRXhwYW5kZWRTdGF0ZXMsZS5zYXZlUGlubmluZz0hMSE9PWUuc2F2ZVBpbm5pbmcsZS5zYXZlVHJlZVZpZXc9ITEhPT1lLnNhdmVUcmVlVmlld30sc2F2ZTpmdW5jdGlvbihlKXt2YXIgdD17fTtyZXR1cm4gdC5jb2x1bW5zPWwuc2F2ZUNvbHVtbnMoZSksdC5zY3JvbGxGb2N1cz1sLnNhdmVTY3JvbGxGb2N1cyhlKSx0LnNlbGVjdGlvbj1sLnNhdmVTZWxlY3Rpb24oZSksdC5ncm91cGluZz1sLnNhdmVHcm91cGluZyhlKSx0LnRyZWVWaWV3PWwuc2F2ZVRyZWVWaWV3KGUpLHQucGFnaW5hdGlvbj1sLnNhdmVQYWdpbmF0aW9uKGUpLHR9LHJlc3RvcmU6ZnVuY3Rpb24oZSx0LHIpe3JldHVybiByLmNvbHVtbnMmJmwucmVzdG9yZUNvbHVtbnMoZSxyLmNvbHVtbnMpLHIuc2Nyb2xsRm9jdXMmJmwucmVzdG9yZVNjcm9sbEZvY3VzKGUsdCxyLnNjcm9sbEZvY3VzKSxyLnNlbGVjdGlvbiYmbC5yZXN0b3JlU2VsZWN0aW9uKGUsci5zZWxlY3Rpb24pLHIuZ3JvdXBpbmcmJmwucmVzdG9yZUdyb3VwaW5nKGUsci5ncm91cGluZyksci50cmVlVmlldyYmbC5yZXN0b3JlVHJlZVZpZXcoZSxyLnRyZWVWaWV3KSxyLnBhZ2luYXRpb24mJmwucmVzdG9yZVBhZ2luYXRpb24oZSxyLnBhZ2luYXRpb24pLGUucmVmcmVzaCgpfSxzYXZlQ29sdW1uczpmdW5jdGlvbihyKXt2YXIgaT1bXTtyZXR1cm4gci5nZXRPbmx5RGF0YUNvbHVtbnMoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PXt9O3QubmFtZT1lLm5hbWUsci5vcHRpb25zLnNhdmVWaXNpYmxlJiYodC52aXNpYmxlPWUudmlzaWJsZSksci5vcHRpb25zLnNhdmVXaWR0aHMmJih0LndpZHRoPWUud2lkdGgpLHIub3B0aW9ucy5zYXZlU29ydCYmKHQuc29ydD1hbmd1bGFyLmNvcHkoZS5zb3J0KSksci5vcHRpb25zLnNhdmVGaWx0ZXImJih0LmZpbHRlcnM9W10sZS5maWx0ZXJzLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHI9e307YW5ndWxhci5mb3JFYWNoKGUsZnVuY3Rpb24oZSx0KXsiY29uZGl0aW9uIiE9PXQmJiIkJGhhc2hLZXkiIT09dCYmInBsYWNlaG9sZGVyIiE9PXQmJihyW3RdPWUpfSksdC5maWx0ZXJzLnB1c2gocil9KSksci5hcGkucGlubmluZyYmci5vcHRpb25zLnNhdmVQaW5uaW5nJiYodC5waW5uZWQ9ZS5yZW5kZXJDb250YWluZXI/ZS5yZW5kZXJDb250YWluZXI6IiIpLGkucHVzaCh0KX0pLGl9LHNhdmVTY3JvbGxGb2N1czpmdW5jdGlvbihlKXtpZighZS5hcGkuY2VsbE5hdilyZXR1cm57fTt2YXIgdD17fTtpZihlLm9wdGlvbnMuc2F2ZUZvY3VzKXt0LmZvY3VzPSEwO3ZhciByPWUuYXBpLmNlbGxOYXYuZ2V0Rm9jdXNlZENlbGwoKTtudWxsIT09ciYmKG51bGwhPT1yLmNvbCYmKHQuY29sTmFtZT1yLmNvbC5jb2xEZWYubmFtZSksbnVsbCE9PXIucm93JiYodC5yb3dWYWw9bC5nZXRSb3dWYWwoZSxyLnJvdykpKX1yZXR1cm4oZS5vcHRpb25zLnNhdmVTY3JvbGx8fGUub3B0aW9ucy5zYXZlRm9jdXMmJiF0LmNvbE5hbWUmJiF0LnJvd1ZhbCkmJih0LmZvY3VzPSExLGUucmVuZGVyQ29udGFpbmVycy5ib2R5LnByZXZSb3dTY3JvbGxJbmRleCYmKHQucm93VmFsPWwuZ2V0Um93VmFsKGUsZS5yZW5kZXJDb250YWluZXJzLmJvZHkudmlzaWJsZVJvd0NhY2hlW2UucmVuZGVyQ29udGFpbmVycy5ib2R5LnByZXZSb3dTY3JvbGxJbmRleF0pKSxlLnJlbmRlckNvbnRhaW5lcnMuYm9keS5wcmV2Q29sU2Nyb2xsSW5kZXgmJih0LmNvbE5hbWU9ZS5yZW5kZXJDb250YWluZXJzLmJvZHkudmlzaWJsZUNvbHVtbkNhY2hlW2UucmVuZGVyQ29udGFpbmVycy5ib2R5LnByZXZDb2xTY3JvbGxJbmRleF0ubmFtZSkpLHR9LHNhdmVTZWxlY3Rpb246ZnVuY3Rpb24odCl7cmV0dXJuIHQuYXBpLnNlbGVjdGlvbiYmdC5vcHRpb25zLnNhdmVTZWxlY3Rpb24/dC5hcGkuc2VsZWN0aW9uLmdldFNlbGVjdGVkR3JpZFJvd3MoKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGwuZ2V0Um93VmFsKHQsZSl9KTpbXX0sc2F2ZUdyb3VwaW5nOmZ1bmN0aW9uKGUpe3JldHVybiBlLmFwaS5ncm91cGluZyYmZS5vcHRpb25zLnNhdmVHcm91cGluZz9lLmFwaS5ncm91cGluZy5nZXRHcm91cGluZyhlLm9wdGlvbnMuc2F2ZUdyb3VwaW5nRXhwYW5kZWRTdGF0ZXMpOnt9fSxzYXZlUGFnaW5hdGlvbjpmdW5jdGlvbihlKXtyZXR1cm4gZS5hcGkucGFnaW5hdGlvbiYmZS5vcHRpb25zLnBhZ2luYXRpb25QYWdlU2l6ZT97cGFnaW5hdGlvbkN1cnJlbnRQYWdlOmUub3B0aW9ucy5wYWdpbmF0aW9uQ3VycmVudFBhZ2UscGFnaW5hdGlvblBhZ2VTaXplOmUub3B0aW9ucy5wYWdpbmF0aW9uUGFnZVNpemV9Ont9fSxzYXZlVHJlZVZpZXc6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuYXBpLnRyZWVWaWV3JiZlLm9wdGlvbnMuc2F2ZVRyZWVWaWV3P2UuYXBpLnRyZWVWaWV3LmdldFRyZWVWaWV3KCk6e319LGdldFJvd1ZhbDpmdW5jdGlvbihlLHQpe2lmKCF0KXJldHVybiBudWxsO3ZhciByPXt9O3JldHVybiBlLm9wdGlvbnMuc2F2ZVJvd0lkZW50aXR5PyhyLmlkZW50aXR5PSEwLHIucm93PWUub3B0aW9ucy5zYXZlUm93SWRlbnRpdHkodC5lbnRpdHkpKTooci5pZGVudGl0eT0hMSxyLnJvdz1lLnJlbmRlckNvbnRhaW5lcnMuYm9keS52aXNpYmxlUm93Q2FjaGUuaW5kZXhPZih0KSkscn0scmVzdG9yZUNvbHVtbnM6ZnVuY3Rpb24obyxlKXt2YXIgYT0hMTtlLmZvckVhY2goZnVuY3Rpb24oZSx0KXt2YXIgcj1vLmdldENvbHVtbihlLm5hbWUpO2lmKHImJiFvLmlzUm93SGVhZGVyQ29sdW1uKHIpKXshby5vcHRpb25zLnNhdmVWaXNpYmxlfHxyLnZpc2libGU9PT1lLnZpc2libGUmJnIuY29sRGVmLnZpc2libGU9PT1lLnZpc2libGV8fChyLnZpc2libGU9ZS52aXNpYmxlLHIuY29sRGVmLnZpc2libGU9ZS52aXNpYmxlLG8uYXBpLmNvcmUucmFpc2UuY29sdW1uVmlzaWJpbGl0eUNoYW5nZWQocikpLG8ub3B0aW9ucy5zYXZlV2lkdGhzJiZyLndpZHRoIT09ZS53aWR0aCYmKHIud2lkdGg9ZS53aWR0aCxyLmhhc0N1c3RvbVdpZHRoPSEwKSwhby5vcHRpb25zLnNhdmVTb3J0fHxhbmd1bGFyLmVxdWFscyhyLnNvcnQsZS5zb3J0KXx8dm9pZCAwPT09ci5zb3J0JiZhbmd1bGFyLmlzRW1wdHkoZS5zb3J0KXx8KHIuc29ydD1hbmd1bGFyLmNvcHkoZS5zb3J0KSxhPSEwKSxvLm9wdGlvbnMuc2F2ZUZpbHRlciYmIWFuZ3VsYXIuZXF1YWxzKHIuZmlsdGVycyxlLmZpbHRlcnMpJiYoZS5maWx0ZXJzLmZvckVhY2goZnVuY3Rpb24oZSx0KXthbmd1bGFyLmV4dGVuZChyLmZpbHRlcnNbdF0sZSksdm9pZCAwIT09ZS50ZXJtJiZudWxsIT09ZS50ZXJtfHxkZWxldGUgci5maWx0ZXJzW3RdLnRlcm19KSxvLmFwaS5jb3JlLnJhaXNlLmZpbHRlckNoYW5nZWQoKSksby5hcGkucGlubmluZyYmby5vcHRpb25zLnNhdmVQaW5uaW5nJiZyLnJlbmRlckNvbnRhaW5lciE9PWUucGlubmVkJiZvLmFwaS5waW5uaW5nLnBpbkNvbHVtbihyLGUucGlubmVkKTt2YXIgaT1vLmdldE9ubHlEYXRhQ29sdW1ucygpLmluZGV4T2Yocik7aWYoLTEhPT1pJiZvLm9wdGlvbnMuc2F2ZU9yZGVyJiZpIT09dCl7dmFyIG49by5jb2x1bW5zLnNwbGljZShpK28ucm93SGVhZGVyQ29sdW1ucy5sZW5ndGgsMSlbMF07by5jb2x1bW5zLnNwbGljZSh0K28ucm93SGVhZGVyQ29sdW1ucy5sZW5ndGgsMCxuKX19fSksYSYmby5hcGkuY29yZS5yYWlzZS5zb3J0Q2hhbmdlZChvLG8uZ2V0Q29sdW1uU29ydGluZygpKX0scmVzdG9yZVNjcm9sbEZvY3VzOmZ1bmN0aW9uKGUsdCxyKXtpZihlLmFwaS5jZWxsTmF2KXt2YXIgaSxuO2lmKHIuY29sTmFtZSl7dmFyIG89ZS5vcHRpb25zLmNvbHVtbkRlZnMuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLm5hbWU9PT1yLmNvbE5hbWV9KTswPG8ubGVuZ3RoJiYoaT1vWzBdKX1yLnJvd1ZhbCYmci5yb3dWYWwucm93JiYobj1yLnJvd1ZhbC5pZGVudGl0eT9sLmZpbmRSb3dCeUlkZW50aXR5KGUsci5yb3dWYWwpOmUucmVuZGVyQ29udGFpbmVycy5ib2R5LnZpc2libGVSb3dDYWNoZVtyLnJvd1ZhbC5yb3ddKTt2YXIgYT1uJiZuLmVudGl0eT9uLmVudGl0eTpudWxsOyhpfHxhKSYmKHIuZm9jdXM/ZS5hcGkuY2VsbE5hdi5zY3JvbGxUb0ZvY3VzKGEsaSk6ZS5zY3JvbGxUbyhhLGkpKX19LHJlc3RvcmVTZWxlY3Rpb246ZnVuY3Rpb24ocixlKXtyLmFwaS5zZWxlY3Rpb24mJihyLmFwaS5zZWxlY3Rpb24uY2xlYXJTZWxlY3RlZFJvd3MoKSxlLmZvckVhY2goZnVuY3Rpb24oZSl7aWYoZS5pZGVudGl0eSl7dmFyIHQ9bC5maW5kUm93QnlJZGVudGl0eShyLGUpO3QmJnIuYXBpLnNlbGVjdGlvbi5zZWxlY3RSb3codC5lbnRpdHkpfWVsc2Ugci5hcGkuc2VsZWN0aW9uLnNlbGVjdFJvd0J5VmlzaWJsZUluZGV4KGUucm93KX0pKX0scmVzdG9yZUdyb3VwaW5nOmZ1bmN0aW9uKGUsdCl7ZS5hcGkuZ3JvdXBpbmcmJm51bGwhPXQmJiFhbmd1bGFyLmVxdWFscyh0LHt9KSYmZS5hcGkuZ3JvdXBpbmcuc2V0R3JvdXBpbmcodCl9LHJlc3RvcmVUcmVlVmlldzpmdW5jdGlvbihlLHQpe2UuYXBpLnRyZWVWaWV3JiZudWxsIT10JiYhYW5ndWxhci5lcXVhbHModCx7fSkmJmUuYXBpLnRyZWVWaWV3LnNldFRyZWVWaWV3KHQpfSxyZXN0b3JlUGFnaW5hdGlvbjpmdW5jdGlvbihlLHQpe2UuYXBpLnBhZ2luYXRpb24mJmUub3B0aW9ucy5wYWdpbmF0aW9uUGFnZVNpemUmJihlLm9wdGlvbnMucGFnaW5hdGlvbkN1cnJlbnRQYWdlPXQucGFnaW5hdGlvbkN1cnJlbnRQYWdlLGUub3B0aW9ucy5wYWdpbmF0aW9uUGFnZVNpemU9dC5wYWdpbmF0aW9uUGFnZVNpemUpfSxmaW5kUm93QnlJZGVudGl0eTpmdW5jdGlvbih0LHIpe2lmKCF0Lm9wdGlvbnMuc2F2ZVJvd0lkZW50aXR5KXJldHVybiBudWxsO3ZhciBlPXQucm93cy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIHQub3B0aW9ucy5zYXZlUm93SWRlbnRpdHkoZS5lbnRpdHkpPT09ci5yb3d9KTtyZXR1cm4gMDxlLmxlbmd0aD9lWzBdOm51bGx9fTtyZXR1cm4gbH1dKSxlLmRpcmVjdGl2ZSgidWlHcmlkU2F2ZVN0YXRlIixbInVpR3JpZFNhdmVTdGF0ZUNvbnN0YW50cyIsInVpR3JpZFNhdmVTdGF0ZVNlcnZpY2UiLCJncmlkVXRpbCIsIiRjb21waWxlIixmdW5jdGlvbihlLG4sdCxyKXtyZXR1cm57cmVwbGFjZTohMCxwcmlvcml0eTowLHJlcXVpcmU6Il51aUdyaWQiLHNjb3BlOiExLGxpbms6ZnVuY3Rpb24oZSx0LHIsaSl7bi5pbml0aWFsaXplR3JpZChpLmdyaWQpfX19XSl9KCksZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7dmFyIGU9YW5ndWxhci5tb2R1bGUoInVpLmdyaWQuc2VsZWN0aW9uIixbInVpLmdyaWQiXSk7ZS5jb25zdGFudCgidWlHcmlkU2VsZWN0aW9uQ29uc3RhbnRzIix7ZmVhdHVyZU5hbWU6InNlbGVjdGlvbiIsc2VsZWN0aW9uUm93SGVhZGVyQ29sTmFtZToic2VsZWN0aW9uUm93SGVhZGVyQ29sIn0pLGFuZ3VsYXIubW9kdWxlKCJ1aS5ncmlkIikuY29uZmlnKFsiJHByb3ZpZGUiLGZ1bmN0aW9uKGUpe2UuZGVjb3JhdG9yKCJHcmlkUm93IixbIiRkZWxlZ2F0ZSIsZnVuY3Rpb24oZSl7cmV0dXJuIGUucHJvdG90eXBlLnNldFNlbGVjdGVkPWZ1bmN0aW9uKGUpe2UhPT10aGlzLmlzU2VsZWN0ZWQmJih0aGlzLmlzU2VsZWN0ZWQ9ZSx0aGlzLmdyaWQuc2VsZWN0aW9uLnNlbGVjdGVkQ291bnQrPWU/MTotMSl9LGV9XSl9XSksZS5zZXJ2aWNlKCJ1aUdyaWRTZWxlY3Rpb25TZXJ2aWNlIixbIiRxIiwiJHRlbXBsYXRlQ2FjaGUiLCJ1aUdyaWRTZWxlY3Rpb25Db25zdGFudHMiLCJncmlkVXRpbCIsZnVuY3Rpb24oZSx0LHIsaSl7dmFyIHU9e2luaXRpYWxpemVHcmlkOmZ1bmN0aW9uKGkpe2kuc2VsZWN0aW9uPXt9LGkuc2VsZWN0aW9uLmxhc3RTZWxlY3RlZFJvdz1udWxsLGkuc2VsZWN0aW9uLnNlbGVjdEFsbD0hMSxpLnNlbGVjdGlvbi5zZWxlY3RlZENvdW50PTAsdS5kZWZhdWx0R3JpZE9wdGlvbnMoaS5vcHRpb25zKTt2YXIgZT17ZXZlbnRzOntzZWxlY3Rpb246e3Jvd1NlbGVjdGlvbkNoYW5nZWQ6ZnVuY3Rpb24oZSx0LHIpe30scm93U2VsZWN0aW9uQ2hhbmdlZEJhdGNoOmZ1bmN0aW9uKGUsdCxyKXt9fX0sbWV0aG9kczp7c2VsZWN0aW9uOnt0b2dnbGVSb3dTZWxlY3Rpb246ZnVuY3Rpb24oZSx0KXt2YXIgcj1pLmdldFJvdyhlKTtudWxsIT09ciYmdS50b2dnbGVSb3dTZWxlY3Rpb24oaSxyLHQsaS5vcHRpb25zLm11bHRpU2VsZWN0LGkub3B0aW9ucy5ub1Vuc2VsZWN0KX0sc2VsZWN0Um93OmZ1bmN0aW9uKGUsdCl7dmFyIHI9aS5nZXRSb3coZSk7bnVsbD09PXJ8fHIuaXNTZWxlY3RlZHx8dS50b2dnbGVSb3dTZWxlY3Rpb24oaSxyLHQsaS5vcHRpb25zLm11bHRpU2VsZWN0LGkub3B0aW9ucy5ub1Vuc2VsZWN0KX0sc2VsZWN0Um93QnlWaXNpYmxlSW5kZXg6ZnVuY3Rpb24oZSx0KXt2YXIgcj1pLnJlbmRlckNvbnRhaW5lcnMuYm9keS52aXNpYmxlUm93Q2FjaGVbZV07bnVsbD09cnx8ci5pc1NlbGVjdGVkfHx1LnRvZ2dsZVJvd1NlbGVjdGlvbihpLHIsdCxpLm9wdGlvbnMubXVsdGlTZWxlY3QsaS5vcHRpb25zLm5vVW5zZWxlY3QpfSx1blNlbGVjdFJvdzpmdW5jdGlvbihlLHQpe3ZhciByPWkuZ2V0Um93KGUpO251bGwhPT1yJiZyLmlzU2VsZWN0ZWQmJnUudG9nZ2xlUm93U2VsZWN0aW9uKGkscix0LGkub3B0aW9ucy5tdWx0aVNlbGVjdCxpLm9wdGlvbnMubm9VbnNlbGVjdCl9LHVuU2VsZWN0Um93QnlWaXNpYmxlSW5kZXg6ZnVuY3Rpb24oZSx0KXt2YXIgcj1pLnJlbmRlckNvbnRhaW5lcnMuYm9keS52aXNpYmxlUm93Q2FjaGVbZV07bnVsbCE9ciYmci5pc1NlbGVjdGVkJiZ1LnRvZ2dsZVJvd1NlbGVjdGlvbihpLHIsdCxpLm9wdGlvbnMubXVsdGlTZWxlY3QsaS5vcHRpb25zLm5vVW5zZWxlY3QpfSxzZWxlY3RBbGxSb3dzOmZ1bmN0aW9uKHQpe2lmKCExIT09aS5vcHRpb25zLm11bHRpU2VsZWN0KXt2YXIgcj1bXTtpLnJvd3MuZm9yRWFjaChmdW5jdGlvbihlKXtlLmlzU2VsZWN0ZWR8fCExPT09ZS5lbmFibGVTZWxlY3Rpb258fCExPT09aS5vcHRpb25zLmlzUm93U2VsZWN0YWJsZShlKXx8KGUuc2V0U2VsZWN0ZWQoITApLHUuZGVjaWRlUmFpc2VTZWxlY3Rpb25FdmVudChpLGUscix0KSl9KSxpLnNlbGVjdGlvbi5zZWxlY3RBbGw9ITAsdS5kZWNpZGVSYWlzZVNlbGVjdGlvbkJhdGNoRXZlbnQoaSxyLHQpfX0sc2VsZWN0QWxsVmlzaWJsZVJvd3M6ZnVuY3Rpb24odCl7aWYoITEhPT1pLm9wdGlvbnMubXVsdGlTZWxlY3Qpe3ZhciByPVtdO2kucm93cy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UudmlzaWJsZT9lLmlzU2VsZWN0ZWR8fCExPT09ZS5lbmFibGVTZWxlY3Rpb258fCExPT09aS5vcHRpb25zLmlzUm93U2VsZWN0YWJsZShlKXx8KGUuc2V0U2VsZWN0ZWQoITApLHUuZGVjaWRlUmFpc2VTZWxlY3Rpb25FdmVudChpLGUscix0KSk6ZS5pc1NlbGVjdGVkJiYoZS5zZXRTZWxlY3RlZCghMSksdS5kZWNpZGVSYWlzZVNlbGVjdGlvbkV2ZW50KGksZSxyLHQpKX0pLGkuc2VsZWN0aW9uLnNlbGVjdEFsbD0hMCx1LmRlY2lkZVJhaXNlU2VsZWN0aW9uQmF0Y2hFdmVudChpLHIsdCl9fSxjbGVhclNlbGVjdGVkUm93czpmdW5jdGlvbihlKXt1LmNsZWFyU2VsZWN0ZWRSb3dzKGksZSl9LGdldFNlbGVjdGVkUm93czpmdW5jdGlvbigpe3JldHVybiB1LmdldFNlbGVjdGVkUm93cyhpKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuZW50aXR5fSkuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLmhhc093blByb3BlcnR5KCIkJGhhc2hLZXkiKXx8IWFuZ3VsYXIuaXNPYmplY3QoZSl9KX0sZ2V0U2VsZWN0ZWRHcmlkUm93czpmdW5jdGlvbigpe3JldHVybiB1LmdldFNlbGVjdGVkUm93cyhpKX0sZ2V0U2VsZWN0ZWRDb3VudDpmdW5jdGlvbigpe3JldHVybiBpLnNlbGVjdGlvbi5zZWxlY3RlZENvdW50fSxzZXRNdWx0aVNlbGVjdDpmdW5jdGlvbihlKXtpLm9wdGlvbnMubXVsdGlTZWxlY3Q9ZX0sc2V0TW9kaWZpZXJLZXlzVG9NdWx0aVNlbGVjdDpmdW5jdGlvbihlKXtpLm9wdGlvbnMubW9kaWZpZXJLZXlzVG9NdWx0aVNlbGVjdD1lfSxnZXRTZWxlY3RBbGxTdGF0ZTpmdW5jdGlvbigpe3JldHVybiBpLnNlbGVjdGlvbi5zZWxlY3RBbGx9fX19O2kuYXBpLnJlZ2lzdGVyRXZlbnRzRnJvbU9iamVjdChlLmV2ZW50cyksaS5hcGkucmVnaXN0ZXJNZXRob2RzRnJvbU9iamVjdChlLm1ldGhvZHMpfSxkZWZhdWx0R3JpZE9wdGlvbnM6ZnVuY3Rpb24oZSl7ZS5lbmFibGVSb3dTZWxlY3Rpb249ITEhPT1lLmVuYWJsZVJvd1NlbGVjdGlvbixlLm11bHRpU2VsZWN0PSExIT09ZS5tdWx0aVNlbGVjdCxlLm5vVW5zZWxlY3Q9ITA9PT1lLm5vVW5zZWxlY3QsZS5tb2RpZmllcktleXNUb011bHRpU2VsZWN0PSEwPT09ZS5tb2RpZmllcktleXNUb011bHRpU2VsZWN0LGUuZW5hYmxlUm93SGVhZGVyU2VsZWN0aW9uPSExIT09ZS5lbmFibGVSb3dIZWFkZXJTZWxlY3Rpb24sdm9pZCAwPT09ZS5lbmFibGVGdWxsUm93U2VsZWN0aW9uJiYoZS5lbmFibGVGdWxsUm93U2VsZWN0aW9uPSFlLmVuYWJsZVJvd0hlYWRlclNlbGVjdGlvbiksZS5lbmFibGVTZWxlY3RBbGw9ITEhPT1lLmVuYWJsZVNlbGVjdEFsbCxlLmVuYWJsZVNlbGVjdGlvbkJhdGNoRXZlbnQ9ITEhPT1lLmVuYWJsZVNlbGVjdGlvbkJhdGNoRXZlbnQsZS5zZWxlY3Rpb25Sb3dIZWFkZXJXaWR0aD1hbmd1bGFyLmlzRGVmaW5lZChlLnNlbGVjdGlvblJvd0hlYWRlcldpZHRoKT9lLnNlbGVjdGlvblJvd0hlYWRlcldpZHRoOjMwLGUuZW5hYmxlRm9vdGVyVG90YWxTZWxlY3RlZD0hMSE9PWUuZW5hYmxlRm9vdGVyVG90YWxTZWxlY3RlZCxlLmlzUm93U2VsZWN0YWJsZT1hbmd1bGFyLmlzRGVmaW5lZChlLmlzUm93U2VsZWN0YWJsZSk/ZS5pc1Jvd1NlbGVjdGFibGU6YW5ndWxhci5ub29wfSx0b2dnbGVSb3dTZWxlY3Rpb246ZnVuY3Rpb24oZSx0LHIsaSxuKXt2YXIgbyxhPXQuaXNTZWxlY3RlZDshMSE9PXQuZW5hYmxlU2VsZWN0aW9uJiYoaXx8YT8haSYmYSYmMTwobz11LmdldFNlbGVjdGVkUm93cyhlKSkubGVuZ3RoJiYoYT0hMSx1LmNsZWFyU2VsZWN0ZWRSb3dzKGUscikpOnUuY2xlYXJTZWxlY3RlZFJvd3MoZSxyKSxhJiZufHwodC5zZXRTZWxlY3RlZCghYSksITA9PT10LmlzU2VsZWN0ZWQmJihlLnNlbGVjdGlvbi5sYXN0U2VsZWN0ZWRSb3c9dCksbz11LmdldFNlbGVjdGVkUm93cyhlKSxlLnNlbGVjdGlvbi5zZWxlY3RBbGw9ZS5yb3dzLmxlbmd0aD09PW8ubGVuZ3RoLGUuYXBpLnNlbGVjdGlvbi5yYWlzZS5yb3dTZWxlY3Rpb25DaGFuZ2VkKHQscikpKX0sc2hpZnRTZWxlY3Q6ZnVuY3Rpb24oZSx0LHIsaSl7aWYoaSl7dmFyIG49MDx1LmdldFNlbGVjdGVkUm93cyhlKS5sZW5ndGg/ZS5yZW5kZXJDb250YWluZXJzLmJvZHkudmlzaWJsZVJvd0NhY2hlLmluZGV4T2YoZS5zZWxlY3Rpb24ubGFzdFNlbGVjdGVkUm93KTowLG89ZS5yZW5kZXJDb250YWluZXJzLmJvZHkudmlzaWJsZVJvd0NhY2hlLmluZGV4T2YodCk7aWYobzxuKXt2YXIgYT1uO249byxvPWF9Zm9yKHZhciBsPVtdLHM9bjtzPD1vO3MrKyl7dmFyIGQ9ZS5yZW5kZXJDb250YWluZXJzLmJvZHkudmlzaWJsZVJvd0NhY2hlW3NdO2QmJihkLmlzU2VsZWN0ZWR8fCExPT09ZC5lbmFibGVTZWxlY3Rpb258fChkLnNldFNlbGVjdGVkKCEwKSxlLnNlbGVjdGlvbi5sYXN0U2VsZWN0ZWRSb3c9ZCx1LmRlY2lkZVJhaXNlU2VsZWN0aW9uRXZlbnQoZSxkLGwscikpKX11LmRlY2lkZVJhaXNlU2VsZWN0aW9uQmF0Y2hFdmVudChlLGwscil9fSxnZXRTZWxlY3RlZFJvd3M6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucm93cy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaXNTZWxlY3RlZH0pfSxjbGVhclNlbGVjdGVkUm93czpmdW5jdGlvbih0LHIpe3ZhciBpPVtdO3UuZ2V0U2VsZWN0ZWRSb3dzKHQpLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5pc1NlbGVjdGVkJiYoZS5zZXRTZWxlY3RlZCghMSksdS5kZWNpZGVSYWlzZVNlbGVjdGlvbkV2ZW50KHQsZSxpLHIpKX0pLHQuc2VsZWN0aW9uLnNlbGVjdEFsbD0hMSx0LnNlbGVjdGlvbi5zZWxlY3RlZENvdW50PTAsdS5kZWNpZGVSYWlzZVNlbGVjdGlvbkJhdGNoRXZlbnQodCxpLHIpfSxkZWNpZGVSYWlzZVNlbGVjdGlvbkV2ZW50OmZ1bmN0aW9uKGUsdCxyLGkpe2Uub3B0aW9ucy5lbmFibGVTZWxlY3Rpb25CYXRjaEV2ZW50P3IucHVzaCh0KTplLmFwaS5zZWxlY3Rpb24ucmFpc2Uucm93U2VsZWN0aW9uQ2hhbmdlZCh0LGkpfSxkZWNpZGVSYWlzZVNlbGVjdGlvbkJhdGNoRXZlbnQ6ZnVuY3Rpb24oZSx0LHIpezA8dC5sZW5ndGgmJmUuYXBpLnNlbGVjdGlvbi5yYWlzZS5yb3dTZWxlY3Rpb25DaGFuZ2VkQmF0Y2godCxyKX19O3JldHVybiB1fV0pLGUuZGlyZWN0aXZlKCJ1aUdyaWRTZWxlY3Rpb24iLFsidWlHcmlkU2VsZWN0aW9uQ29uc3RhbnRzIiwidWlHcmlkU2VsZWN0aW9uU2VydmljZSIsIiR0ZW1wbGF0ZUNhY2hlIiwidWlHcmlkQ29uc3RhbnRzIixmdW5jdGlvbihkLHUsZSxjKXtyZXR1cm57cmVwbGFjZTohMCxwcmlvcml0eTowLHJlcXVpcmU6Il51aUdyaWQiLHNjb3BlOiExLGNvbXBpbGU6ZnVuY3Rpb24oKXtyZXR1cm57cHJlOmZ1bmN0aW9uKGUsdCxyLGkpe2lmKHUuaW5pdGlhbGl6ZUdyaWQoaS5ncmlkKSxpLmdyaWQub3B0aW9ucy5lbmFibGVSb3dIZWFkZXJTZWxlY3Rpb24pe3ZhciBuPXtuYW1lOmQuc2VsZWN0aW9uUm93SGVhZGVyQ29sTmFtZSxkaXNwbGF5TmFtZToiIix3aWR0aDppLmdyaWQub3B0aW9ucy5zZWxlY3Rpb25Sb3dIZWFkZXJXaWR0aCxtaW5XaWR0aDoxMCxjZWxsVGVtcGxhdGU6InVpLWdyaWQvc2VsZWN0aW9uUm93SGVhZGVyIixoZWFkZXJDZWxsVGVtcGxhdGU6InVpLWdyaWQvc2VsZWN0aW9uSGVhZGVyQ2VsbCIsZW5hYmxlQ29sdW1uUmVzaXppbmc6ITEsZW5hYmxlQ29sdW1uTWVudTohMSxleHBvcnRlclN1cHByZXNzRXhwb3J0OiEwLGFsbG93Q2VsbEZvY3VzOiEwfTtpLmdyaWQuYWRkUm93SGVhZGVyQ29sdW1uKG4sMCl9dmFyIG89ITEsYT1mdW5jdGlvbihlKXtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuZW5hYmxlU2VsZWN0aW9uPWkuZ3JpZC5vcHRpb25zLmlzUm93U2VsZWN0YWJsZShlKX0pLGV9LGw9ZnVuY3Rpb24oKXtpLmdyaWQub3B0aW9ucy5pc1Jvd1NlbGVjdGFibGUhPT1hbmd1bGFyLm5vb3AmJiEwIT09byYmKGkuZ3JpZC5yZWdpc3RlclJvd3NQcm9jZXNzb3IoYSw1MDApLG89ITApfTtsKCk7dmFyIHM9aS5ncmlkLnJlZ2lzdGVyRGF0YUNoYW5nZUNhbGxiYWNrKGwsW2MuZGF0YUNoYW5nZS5PUFRJT05TXSk7ZS4kb24oIiRkZXN0cm95IixzKX0scG9zdDpmdW5jdGlvbihlLHQscixpKXt9fX19fV0pLGUuZGlyZWN0aXZlKCJ1aUdyaWRTZWxlY3Rpb25Sb3dIZWFkZXJCdXR0b25zIixbIiR0ZW1wbGF0ZUNhY2hlIiwidWlHcmlkU2VsZWN0aW9uU2VydmljZSIsImdyaWRVdGlsIixmdW5jdGlvbihlLGEsbCl7cmV0dXJue3JlcGxhY2U6ITAscmVzdHJpY3Q6IkUiLHRlbXBsYXRlOmUuZ2V0KCJ1aS1ncmlkL3NlbGVjdGlvblJvd0hlYWRlckJ1dHRvbnMiKSxzY29wZTohMCxyZXF1aXJlOiJedWlHcmlkIixsaW5rOmZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuPWkuZ3JpZDtmdW5jdGlvbiBvKGUsdCl7aWYodC5zdG9wUHJvcGFnYXRpb24oKSx0LnNoaWZ0S2V5KWEuc2hpZnRTZWxlY3QobixlLHQsbi5vcHRpb25zLm11bHRpU2VsZWN0KTtlbHNlIGlmKHQuY3RybEtleXx8dC5tZXRhS2V5KWEudG9nZ2xlUm93U2VsZWN0aW9uKG4sZSx0LG4ub3B0aW9ucy5tdWx0aVNlbGVjdCxuLm9wdGlvbnMubm9VbnNlbGVjdCk7ZWxzZSBpZihlLmdyb3VwSGVhZGVyKXthLnRvZ2dsZVJvd1NlbGVjdGlvbihuLGUsdCxuLm9wdGlvbnMubXVsdGlTZWxlY3Qsbi5vcHRpb25zLm5vVW5zZWxlY3QpO2Zvcih2YXIgcj0wO3I8ZS50cmVlTm9kZS5jaGlsZHJlbi5sZW5ndGg7cisrKWEudG9nZ2xlUm93U2VsZWN0aW9uKG4sZS50cmVlTm9kZS5jaGlsZHJlbltyXS5yb3csdCxuLm9wdGlvbnMubXVsdGlTZWxlY3Qsbi5vcHRpb25zLm5vVW5zZWxlY3QpfWVsc2UgYS50b2dnbGVSb3dTZWxlY3Rpb24obixlLHQsbi5vcHRpb25zLm11bHRpU2VsZWN0JiYhbi5vcHRpb25zLm1vZGlmaWVyS2V5c1RvTXVsdGlTZWxlY3Qsbi5vcHRpb25zLm5vVW5zZWxlY3QpfWUuc2VsZWN0QnV0dG9uQ2xpY2s9byxlLnNlbGVjdEJ1dHRvbktleURvd249ZnVuY3Rpb24oZSx0KXszMj09PXQua2V5Q29kZSYmKHQucHJldmVudERlZmF1bHQoKSxvKGUsdCkpfSwiaWUiPT09bC5kZXRlY3RCcm93c2VyKCkmJnQub24oIm1vdXNlZG93biIsZnVuY3Rpb24oZSl7KGUuY3RybEtleXx8ZS5zaGlmdEtleSkmJihlLnRhcmdldC5vbnNlbGVjdHN0YXJ0PWZ1bmN0aW9uKCl7cmV0dXJuITF9LHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS50YXJnZXQub25zZWxlY3RzdGFydD1udWxsfSwwKSl9KSxlLiRvbigiJGRlc3Ryb3kiLGZ1bmN0aW9uKCl7dC5vZmYoKX0pfX19XSksZS5kaXJlY3RpdmUoInVpR3JpZFNlbGVjdGlvblNlbGVjdEFsbEJ1dHRvbnMiLFsiJHRlbXBsYXRlQ2FjaGUiLCJ1aUdyaWRTZWxlY3Rpb25TZXJ2aWNlIixmdW5jdGlvbihlLG8pe3JldHVybntyZXBsYWNlOiEwLHJlc3RyaWN0OiJFIix0ZW1wbGF0ZTplLmdldCgidWktZ3JpZC9zZWxlY3Rpb25TZWxlY3RBbGxCdXR0b25zIiksc2NvcGU6ITEsbGluazpmdW5jdGlvbih0LGUscixpKXt2YXIgbj10LmNvbC5ncmlkO3QuaGVhZGVyQnV0dG9uS2V5RG93bj1mdW5jdGlvbihlKXszMiE9PWUua2V5Q29kZSYmMTMhPT1lLmtleUNvZGV8fChlLnByZXZlbnREZWZhdWx0KCksdC5oZWFkZXJCdXR0b25DbGljayhlKSl9LHQuaGVhZGVyQnV0dG9uQ2xpY2s9ZnVuY3Rpb24oZSl7bi5zZWxlY3Rpb24uc2VsZWN0QWxsPyhvLmNsZWFyU2VsZWN0ZWRSb3dzKG4sZSksbi5vcHRpb25zLm5vVW5zZWxlY3QmJm4uYXBpLnNlbGVjdGlvbi5zZWxlY3RSb3dCeVZpc2libGVJbmRleCgwLGUpLG4uc2VsZWN0aW9uLnNlbGVjdEFsbD0hMSk6bi5vcHRpb25zLm11bHRpU2VsZWN0JiYobi5hcGkuc2VsZWN0aW9uLnNlbGVjdEFsbFZpc2libGVSb3dzKGUpLG4uc2VsZWN0aW9uLnNlbGVjdEFsbD0hMCl9fX19XSksZS5kaXJlY3RpdmUoInVpR3JpZFZpZXdwb3J0IixbIiRjb21waWxlIiwidWlHcmlkQ29uc3RhbnRzIiwidWlHcmlkU2VsZWN0aW9uQ29uc3RhbnRzIiwiZ3JpZFV0aWwiLCIkcGFyc2UiLCJ1aUdyaWRTZWxlY3Rpb25TZXJ2aWNlIixmdW5jdGlvbihlLHQscixpLG4sbyl7cmV0dXJue3ByaW9yaXR5Oi0yMDAsc2NvcGU6ITEsY29tcGlsZTpmdW5jdGlvbihlLHQpe3ZhciByPWFuZ3VsYXIuZWxlbWVudChlWzBdLnF1ZXJ5U2VsZWN0b3IoIi51aS1ncmlkLWNhbnZhczpub3QoLnVpLWdyaWQtZW1wdHktYmFzZS1sYXllci1jb250YWluZXIpIikuY2hpbGRyZW5bMF0pLGk9ci5hdHRyKCJuZy1jbGFzcyIpLG49IiI7cmV0dXJuIG49aT9pLnNsaWNlKDAsLTEpKyIsJ3VpLWdyaWQtcm93LXNlbGVjdGVkJzogcm93LmlzU2VsZWN0ZWR9Ijoieyd1aS1ncmlkLXJvdy1zZWxlY3RlZCc6IHJvdy5pc1NlbGVjdGVkfSIsci5hdHRyKCJuZy1jbGFzcyIsbikse3ByZTpmdW5jdGlvbihlLHQscixpKXt9LHBvc3Q6ZnVuY3Rpb24oZSx0LHIsaSl7fX19fX1dKSxlLmRpcmVjdGl2ZSgidWlHcmlkQ2VsbCIsWyIkY29tcGlsZSIsInVpR3JpZENvbnN0YW50cyIsInVpR3JpZFNlbGVjdGlvbkNvbnN0YW50cyIsImdyaWRVdGlsIiwiJHBhcnNlIiwidWlHcmlkU2VsZWN0aW9uU2VydmljZSIsIiR0aW1lb3V0IixmdW5jdGlvbihlLHUsdCxyLGksYyxnKXtyZXR1cm57cHJpb3JpdHk6LTIwMCxyZXN0cmljdDoiQSIscmVxdWlyZToiP151aUdyaWQiLHNjb3BlOiExLGxpbms6ZnVuY3Rpb24ocix0LGUsaSl7dmFyIG49MDtpLmdyaWQuYXBpLmNlbGxOYXYmJmkuZ3JpZC5hcGkuY2VsbE5hdi5vbi52aWV3UG9ydEtleURvd24ocixmdW5jdGlvbihlLHQpe251bGwhPT10JiZ0LnJvdz09PXIucm93JiZ0LmNvbD09PXIuY29sJiYzMj09PWUua2V5Q29kZSYmInNlbGVjdGlvblJvd0hlYWRlckNvbCI9PT1yLmNvbC5jb2xEZWYubmFtZSYmKGUucHJldmVudERlZmF1bHQoKSxjLnRvZ2dsZVJvd1NlbGVjdGlvbihyLmdyaWQsci5yb3csZSxyLmdyaWQub3B0aW9ucy5tdWx0aVNlbGVjdCYmIXIuZ3JpZC5vcHRpb25zLm1vZGlmaWVyS2V5c1RvTXVsdGlTZWxlY3Qsci5ncmlkLm9wdGlvbnMubm9VbnNlbGVjdCksci4kYXBwbHkoKSl9KTt2YXIgbz1mdW5jdGlvbihlKXsidWktZ3JpZC1pY29uLW1pbnVzLXNxdWFyZWQiIT09ZS50YXJnZXQuY2xhc3NOYW1lJiYidWktZ3JpZC1pY29uLXBsdXMtc3F1YXJlZCIhPT1lLnRhcmdldC5jbGFzc05hbWUmJih0Lm9mZigidG91Y2hlbmQiLGwpLGUuc2hpZnRLZXk/Yy5zaGlmdFNlbGVjdChyLmdyaWQsci5yb3csZSxyLmdyaWQub3B0aW9ucy5tdWx0aVNlbGVjdCk6ZS5jdHJsS2V5fHxlLm1ldGFLZXk/Yy50b2dnbGVSb3dTZWxlY3Rpb24oci5ncmlkLHIucm93LGUsci5ncmlkLm9wdGlvbnMubXVsdGlTZWxlY3Qsci5ncmlkLm9wdGlvbnMubm9VbnNlbGVjdCk6Yy50b2dnbGVSb3dTZWxlY3Rpb24oci5ncmlkLHIucm93LGUsci5ncmlkLm9wdGlvbnMubXVsdGlTZWxlY3QmJiFyLmdyaWQub3B0aW9ucy5tb2RpZmllcktleXNUb011bHRpU2VsZWN0LHIuZ3JpZC5vcHRpb25zLm5vVW5zZWxlY3QpLHIuJGFwcGx5KCksZyhmdW5jdGlvbigpe3Qub24oInRvdWNoZW5kIixsKX0sMzAwKSl9LGE9ZnVuY3Rpb24oZSl7bj0obmV3IERhdGUpLmdldFRpbWUoKSx0Lm9mZigiY2xpY2siLG8pfSxsPWZ1bmN0aW9uKGUpeyhuZXcgRGF0ZSkuZ2V0VGltZSgpLW48MzAwJiZvKGUpLGcoZnVuY3Rpb24oKXt0Lm9uKCJjbGljayIsbyl9LDMwMCl9O2Z1bmN0aW9uIHMoKXtyLmdyaWQub3B0aW9ucy5lbmFibGVSb3dTZWxlY3Rpb24mJnIuZ3JpZC5vcHRpb25zLmVuYWJsZUZ1bGxSb3dTZWxlY3Rpb24mJiJzZWxlY3Rpb25Sb3dIZWFkZXJDb2wiIT09ci5jb2wuY29sRGVmLm5hbWUmJih0LmFkZENsYXNzKCJ1aS1ncmlkLWRpc2FibGUtc2VsZWN0aW9uIiksdC5vbigidG91Y2hzdGFydCIsYSksdC5vbigidG91Y2hlbmQiLGwpLHQub24oImNsaWNrIixvKSxyLnJlZ2lzdGVyZWQ9ITApfXMoKTt2YXIgZD1yLmdyaWQucmVnaXN0ZXJEYXRhQ2hhbmdlQ2FsbGJhY2soZnVuY3Rpb24oKXtyLmdyaWQub3B0aW9ucy5lbmFibGVSb3dTZWxlY3Rpb24mJnIuZ3JpZC5vcHRpb25zLmVuYWJsZUZ1bGxSb3dTZWxlY3Rpb24mJiFyLnJlZ2lzdGVyZWQ/cygpOnIuZ3JpZC5vcHRpb25zLmVuYWJsZVJvd1NlbGVjdGlvbiYmci5ncmlkLm9wdGlvbnMuZW5hYmxlRnVsbFJvd1NlbGVjdGlvbnx8IXIucmVnaXN0ZXJlZHx8ci5yZWdpc3RlcmVkJiYodC5yZW1vdmVDbGFzcygidWktZ3JpZC1kaXNhYmxlLXNlbGVjdGlvbiIpLHQub2ZmKCJ0b3VjaHN0YXJ0IixhKSx0Lm9mZigidG91Y2hlbmQiLGwpLHQub2ZmKCJjbGljayIsbyksci5yZWdpc3RlcmVkPSExKX0sW3UuZGF0YUNoYW5nZS5PUFRJT05TXSk7dC5vbigiJGRlc3Ryb3kiLGQpfX19XSksZS5kaXJlY3RpdmUoInVpR3JpZEdyaWRGb290ZXIiLFsiJGNvbXBpbGUiLCJ1aUdyaWRDb25zdGFudHMiLCJncmlkVXRpbCIsZnVuY3Rpb24obyxlLHIpe3JldHVybntyZXN0cmljdDoiRUEiLHJlcGxhY2U6ITAscHJpb3JpdHk6LTFlMyxyZXF1aXJlOiJedWlHcmlkIixzY29wZTohMCxjb21waWxlOmZ1bmN0aW9uKGUsdCl7cmV0dXJue3ByZTpmdW5jdGlvbihpLG4sZSx0KXt0LmdyaWQub3B0aW9ucy5zaG93R3JpZEZvb3RlciYmci5nZXRUZW1wbGF0ZSgidWktZ3JpZC9ncmlkRm9vdGVyU2VsZWN0ZWRJdGVtcyIpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHQ9YW5ndWxhci5lbGVtZW50KGUpLHI9byh0KShpKTthbmd1bGFyLmVsZW1lbnQoblswXS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJ1aS1ncmlkLWdyaWQtZm9vdGVyIilbMF0pLmFwcGVuZChyKX0pfSxwb3N0OmZ1bmN0aW9uKGUsdCxyLGkpe319fX19XSl9KCksZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7dmFyIGU9YW5ndWxhci5tb2R1bGUoInVpLmdyaWQudHJlZUJhc2UiLFsidWkuZ3JpZCJdKTtlLmNvbnN0YW50KCJ1aUdyaWRUcmVlQmFzZUNvbnN0YW50cyIse2ZlYXR1cmVOYW1lOiJ0cmVlQmFzZSIscm93SGVhZGVyQ29sTmFtZToidHJlZUJhc2VSb3dIZWFkZXJDb2wiLEVYUEFOREVEOiJleHBhbmRlZCIsQ09MTEFQU0VEOiJjb2xsYXBzZWQiLGFnZ3JlZ2F0aW9uOntDT1VOVDoiY291bnQiLFNVTToic3VtIixNQVg6Im1heCIsTUlOOiJtaW4iLEFWRzoiYXZnIn19KSxlLnNlcnZpY2UoInVpR3JpZFRyZWVCYXNlU2VydmljZSIsWyIkcSIsInVpR3JpZFRyZWVCYXNlQ29uc3RhbnRzIiwiZ3JpZFV0aWwiLCJHcmlkUm93IiwiZ3JpZENsYXNzRmFjdG9yeSIsImkxOG5TZXJ2aWNlIiwidWlHcmlkQ29uc3RhbnRzIiwicm93U29ydGVyIixmdW5jdGlvbihlLGEsdCxyLGksbixvLGwpe3ZhciBzPXtpbml0aWFsaXplR3JpZDpmdW5jdGlvbihyLGUpe3IudHJlZUJhc2U9e30sci50cmVlQmFzZS5udW1iZXJMZXZlbHM9MCxyLnRyZWVCYXNlLmV4cGFuZEFsbD0hMSxyLnRyZWVCYXNlLnRyZWU9W10scy5kZWZhdWx0R3JpZE9wdGlvbnMoci5vcHRpb25zKSxyLnJlZ2lzdGVyUm93c1Byb2Nlc3NvcihzLnRyZWVSb3dzLDQxMCksci5yZWdpc3RlckNvbHVtbkJ1aWxkZXIocy50cmVlQmFzZUNvbHVtbkJ1aWxkZXIpLHMuY3JlYXRlUm93SGVhZGVyKHIpO3ZhciB0PXtldmVudHM6e3RyZWVCYXNlOntyb3dFeHBhbmRlZDp7fSxyb3dDb2xsYXBzZWQ6e319fSxtZXRob2RzOnt0cmVlQmFzZTp7ZXhwYW5kQWxsUm93czpmdW5jdGlvbigpe3MuZXhwYW5kQWxsUm93cyhyKX0sY29sbGFwc2VBbGxSb3dzOmZ1bmN0aW9uKCl7cy5jb2xsYXBzZUFsbFJvd3Mocil9LHRvZ2dsZVJvd1RyZWVTdGF0ZTpmdW5jdGlvbihlKXtzLnRvZ2dsZVJvd1RyZWVTdGF0ZShyLGUpfSxleHBhbmRSb3c6ZnVuY3Rpb24oZSx0KXtzLmV4cGFuZFJvdyhyLGUsdCl9LGV4cGFuZFJvd0NoaWxkcmVuOmZ1bmN0aW9uKGUpe3MuZXhwYW5kUm93Q2hpbGRyZW4ocixlKX0sY29sbGFwc2VSb3c6ZnVuY3Rpb24oZSl7cy5jb2xsYXBzZVJvdyhyLGUpfSxjb2xsYXBzZVJvd0NoaWxkcmVuOmZ1bmN0aW9uKGUpe3MuY29sbGFwc2VSb3dDaGlsZHJlbihyLGUpfSxnZXRUcmVlRXhwYW5kZWRTdGF0ZTpmdW5jdGlvbigpe3JldHVybntleHBhbmRlZFN0YXRlOnMuZ2V0VHJlZVN0YXRlKHIpfX0sc2V0VHJlZVN0YXRlOmZ1bmN0aW9uKGUpe3Muc2V0VHJlZVN0YXRlKHIsZSl9LGdldFJvd0NoaWxkcmVuOmZ1bmN0aW9uKGUpe3JldHVybiBlLnRyZWVOb2RlLmNoaWxkcmVuLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5yb3d9KX19fX07ci5hcGkucmVnaXN0ZXJFdmVudHNGcm9tT2JqZWN0KHQuZXZlbnRzKSxyLmFwaS5yZWdpc3Rlck1ldGhvZHNGcm9tT2JqZWN0KHQubWV0aG9kcyl9LGRlZmF1bHRHcmlkT3B0aW9uczpmdW5jdGlvbihlKXtlLnRyZWVSb3dIZWFkZXJCYXNlV2lkdGg9ZS50cmVlUm93SGVhZGVyQmFzZVdpZHRofHwzMCxlLnRyZWVJbmRlbnQ9bnVsbCE9ZS50cmVlSW5kZW50P2UudHJlZUluZGVudDoxMCxlLnNob3dUcmVlUm93SGVhZGVyPSExIT09ZS5zaG93VHJlZVJvd0hlYWRlcixlLnNob3dUcmVlRXhwYW5kTm9DaGlsZHJlbj0hMSE9PWUuc2hvd1RyZWVFeHBhbmROb0NoaWxkcmVuLGUudHJlZVJvd0hlYWRlckFsd2F5c1Zpc2libGU9ITEhPT1lLnRyZWVSb3dIZWFkZXJBbHdheXNWaXNpYmxlLGUudHJlZUN1c3RvbUFnZ3JlZ2F0aW9ucz1lLnRyZWVDdXN0b21BZ2dyZWdhdGlvbnN8fHt9LGUuZW5hYmxlRXhwYW5kQWxsPSExIT09ZS5lbmFibGVFeHBhbmRBbGx9LHRyZWVCYXNlQ29sdW1uQnVpbGRlcjpmdW5jdGlvbihlLHQscil7dm9pZCAwIT09ZS5jdXN0b21UcmVlQWdncmVnYXRpb25GbiYmKHQudHJlZUFnZ3JlZ2F0aW9uRm49ZS5jdXN0b21UcmVlQWdncmVnYXRpb25Gbiksdm9pZCAwIT09ZS50cmVlQWdncmVnYXRpb25UeXBlJiYodC50cmVlQWdncmVnYXRpb249e3R5cGU6ZS50cmVlQWdncmVnYXRpb25UeXBlfSx2b2lkIDAhPT1yLnRyZWVDdXN0b21BZ2dyZWdhdGlvbnNbZS50cmVlQWdncmVnYXRpb25UeXBlXT8odC50cmVlQWdncmVnYXRpb25Gbj1yLnRyZWVDdXN0b21BZ2dyZWdhdGlvbnNbZS50cmVlQWdncmVnYXRpb25UeXBlXS5hZ2dyZWdhdGlvbkZuLHQudHJlZUFnZ3JlZ2F0aW9uRmluYWxpemVyRm49ci50cmVlQ3VzdG9tQWdncmVnYXRpb25zW2UudHJlZUFnZ3JlZ2F0aW9uVHlwZV0uZmluYWxpemVyRm4sdC50cmVlQWdncmVnYXRpb24ubGFiZWw9ci50cmVlQ3VzdG9tQWdncmVnYXRpb25zW2UudHJlZUFnZ3JlZ2F0aW9uVHlwZV0ubGFiZWwpOnZvaWQgMCE9PXMubmF0aXZlQWdncmVnYXRpb25zKClbZS50cmVlQWdncmVnYXRpb25UeXBlXSYmKHQudHJlZUFnZ3JlZ2F0aW9uRm49cy5uYXRpdmVBZ2dyZWdhdGlvbnMoKVtlLnRyZWVBZ2dyZWdhdGlvblR5cGVdLmFnZ3JlZ2F0aW9uRm4sdC50cmVlQWdncmVnYXRpb24ubGFiZWw9cy5uYXRpdmVBZ2dyZWdhdGlvbnMoKVtlLnRyZWVBZ2dyZWdhdGlvblR5cGVdLmxhYmVsKSksdm9pZCAwIT09ZS50cmVlQWdncmVnYXRpb25MYWJlbCYmKHZvaWQgMD09PXQudHJlZUFnZ3JlZ2F0aW9uJiYodC50cmVlQWdncmVnYXRpb249e30pLHQudHJlZUFnZ3JlZ2F0aW9uLmxhYmVsPWUudHJlZUFnZ3JlZ2F0aW9uTGFiZWwpLHQudHJlZUFnZ3JlZ2F0aW9uVXBkYXRlRW50aXR5PSExIT09ZS50cmVlQWdncmVnYXRpb25VcGRhdGVFbnRpdHksdm9pZCAwPT09dC5jdXN0b21UcmVlQWdncmVnYXRpb25GaW5hbGl6ZXJGbiYmKHQuY3VzdG9tVHJlZUFnZ3JlZ2F0aW9uRmluYWxpemVyRm49ZS5jdXN0b21UcmVlQWdncmVnYXRpb25GaW5hbGl6ZXJGbil9LGNyZWF0ZVJvd0hlYWRlcjpmdW5jdGlvbihlKXt2YXIgdD17bmFtZTphLnJvd0hlYWRlckNvbE5hbWUsZGlzcGxheU5hbWU6IiIsd2lkdGg6ZS5vcHRpb25zLnRyZWVSb3dIZWFkZXJCYXNlV2lkdGgsbWluV2lkdGg6MTAsY2VsbFRlbXBsYXRlOiJ1aS1ncmlkL3RyZWVCYXNlUm93SGVhZGVyIixoZWFkZXJDZWxsVGVtcGxhdGU6InVpLWdyaWQvdHJlZUJhc2VIZWFkZXJDZWxsIixlbmFibGVDb2x1bW5SZXNpemluZzohMSxlbmFibGVDb2x1bW5NZW51OiExLGV4cG9ydGVyU3VwcHJlc3NFeHBvcnQ6ITAsYWxsb3dDZWxsRm9jdXM6ITB9O3QudmlzaWJsZT1lLm9wdGlvbnMudHJlZVJvd0hlYWRlckFsd2F5c1Zpc2libGUsZS5hZGRSb3dIZWFkZXJDb2x1bW4odCwtMTAwKX0sZXhwYW5kQWxsUm93czpmdW5jdGlvbih0KXt0LnRyZWVCYXNlLnRyZWUuZm9yRWFjaChmdW5jdGlvbihlKXtzLnNldEFsbE5vZGVzKHQsZSxhLkVYUEFOREVEKX0pLHQudHJlZUJhc2UuZXhwYW5kQWxsPSEwLHQucXVldWVHcmlkUmVmcmVzaCgpfSxjb2xsYXBzZUFsbFJvd3M6ZnVuY3Rpb24odCl7dC50cmVlQmFzZS50cmVlLmZvckVhY2goZnVuY3Rpb24oZSl7cy5zZXRBbGxOb2Rlcyh0LGUsYS5DT0xMQVBTRUQpfSksdC50cmVlQmFzZS5leHBhbmRBbGw9ITEsdC5xdWV1ZUdyaWRSZWZyZXNoKCl9LHNldEFsbE5vZGVzOmZ1bmN0aW9uKHQsZSxyKXt2b2lkIDAhPT1lLnN0YXRlJiZlLnN0YXRlIT09ciYmKChlLnN0YXRlPXIpPT09YS5FWFBBTkRFRD90LmFwaS50cmVlQmFzZS5yYWlzZS5yb3dFeHBhbmRlZChlLnJvdyk6dC5hcGkudHJlZUJhc2UucmFpc2Uucm93Q29sbGFwc2VkKGUucm93KSksZS5jaGlsZHJlbiYmZS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGUpe3Muc2V0QWxsTm9kZXModCxlLHIpfSl9LHRvZ2dsZVJvd1RyZWVTdGF0ZTpmdW5jdGlvbihlLHQpe3ZvaWQgMD09PXQudHJlZUxldmVsfHxudWxsPT09dC50cmVlTGV2ZWx8fHQudHJlZUxldmVsPDB8fCh0LnRyZWVOb2RlLnN0YXRlPT09YS5FWFBBTkRFRD9zLmNvbGxhcHNlUm93KGUsdCk6cy5leHBhbmRSb3coZSx0LCExKSxlLnF1ZXVlR3JpZFJlZnJlc2goKSl9LGV4cGFuZFJvdzpmdW5jdGlvbihlLHQscil7aWYocil7Zm9yKHZhciBpPVtdO3QmJnZvaWQgMCE9PXQudHJlZUxldmVsJiZudWxsIT09dC50cmVlTGV2ZWwmJjA8PXQudHJlZUxldmVsJiZ0LnRyZWVOb2RlLnN0YXRlIT09YS5FWFBBTkRFRDspaS5wdXNoKHQpLHQ9dC50cmVlTm9kZS5wYXJlbnRSb3c7aWYoMDxpLmxlbmd0aCl7Zm9yKHQ9aS5wb3AoKTt0Oyl0LnRyZWVOb2RlLnN0YXRlPWEuRVhQQU5ERUQsZS5hcGkudHJlZUJhc2UucmFpc2Uucm93RXhwYW5kZWQodCksdD1pLnBvcCgpO2UudHJlZUJhc2UuZXhwYW5kQWxsPXMuYWxsRXhwYW5kZWQoZS50cmVlQmFzZS50cmVlKSxlLnF1ZXVlR3JpZFJlZnJlc2goKX19ZWxzZXtpZih2b2lkIDA9PT10LnRyZWVMZXZlbHx8bnVsbD09PXQudHJlZUxldmVsfHx0LnRyZWVMZXZlbDwwKXJldHVybjt0LnRyZWVOb2RlLnN0YXRlIT09YS5FWFBBTkRFRCYmKHQudHJlZU5vZGUuc3RhdGU9YS5FWFBBTkRFRCxlLmFwaS50cmVlQmFzZS5yYWlzZS5yb3dFeHBhbmRlZCh0KSxlLnRyZWVCYXNlLmV4cGFuZEFsbD1zLmFsbEV4cGFuZGVkKGUudHJlZUJhc2UudHJlZSksZS5xdWV1ZUdyaWRSZWZyZXNoKCkpfX0sZXhwYW5kUm93Q2hpbGRyZW46ZnVuY3Rpb24oZSx0KXt2b2lkIDA9PT10LnRyZWVMZXZlbHx8bnVsbD09PXQudHJlZUxldmVsfHx0LnRyZWVMZXZlbDwwfHwocy5zZXRBbGxOb2RlcyhlLHQudHJlZU5vZGUsYS5FWFBBTkRFRCksZS50cmVlQmFzZS5leHBhbmRBbGw9cy5hbGxFeHBhbmRlZChlLnRyZWVCYXNlLnRyZWUpLGUucXVldWVHcmlkUmVmcmVzaCgpKX0sY29sbGFwc2VSb3c6ZnVuY3Rpb24oZSx0KXt2b2lkIDA9PT10LnRyZWVMZXZlbHx8bnVsbD09PXQudHJlZUxldmVsfHx0LnRyZWVMZXZlbDwwfHx0LnRyZWVOb2RlLnN0YXRlIT09YS5DT0xMQVBTRUQmJih0LnRyZWVOb2RlLnN0YXRlPWEuQ09MTEFQU0VELGUudHJlZUJhc2UuZXhwYW5kQWxsPSExLGUuYXBpLnRyZWVCYXNlLnJhaXNlLnJvd0NvbGxhcHNlZCh0KSxlLnF1ZXVlR3JpZFJlZnJlc2goKSl9LGNvbGxhcHNlUm93Q2hpbGRyZW46ZnVuY3Rpb24oZSx0KXt2b2lkIDA9PT10LnRyZWVMZXZlbHx8bnVsbD09PXQudHJlZUxldmVsfHx0LnRyZWVMZXZlbDwwfHwocy5zZXRBbGxOb2RlcyhlLHQudHJlZU5vZGUsYS5DT0xMQVBTRUQpLGUudHJlZUJhc2UuZXhwYW5kQWxsPSExLGUucXVldWVHcmlkUmVmcmVzaCgpKX0sYWxsRXhwYW5kZWQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ITA7cmV0dXJuIGUuZm9yRWFjaChmdW5jdGlvbihlKXtzLmFsbEV4cGFuZGVkSW50ZXJuYWwoZSl8fCh0PSExKX0pLHR9LGFsbEV4cGFuZGVkSW50ZXJuYWw6ZnVuY3Rpb24oZSl7aWYoZS5jaGlsZHJlbiYmMDxlLmNoaWxkcmVuLmxlbmd0aCl7aWYoZS5zdGF0ZT09PWEuQ09MTEFQU0VEKXJldHVybiExO3ZhciB0PSEwO3JldHVybiBlLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24oZSl7cy5hbGxFeHBhbmRlZEludGVybmFsKGUpfHwodD0hMSl9KSx0fXJldHVybiEwfSx0cmVlUm93czpmdW5jdGlvbihlKXtyZXR1cm4gMD09PWUubGVuZ3RoPyhzLnVwZGF0ZVJvd0hlYWRlcldpZHRoKHRoaXMpLGUpOih0aGlzLnRyZWVCYXNlLnRyZWU9cy5jcmVhdGVUcmVlKHRoaXMsZSkscy51cGRhdGVSb3dIZWFkZXJXaWR0aCh0aGlzKSxzLnNvcnRUcmVlKHRoaXMpLHMuZml4RmlsdGVyKHRoaXMpLHMucmVuZGVyVHJlZSh0aGlzLnRyZWVCYXNlLnRyZWUpKX0sdXBkYXRlUm93SGVhZGVyV2lkdGg6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5nZXRDb2x1bW4oYS5yb3dIZWFkZXJDb2xOYW1lKSxyPWUub3B0aW9ucy50cmVlUm93SGVhZGVyQmFzZVdpZHRoK2Uub3B0aW9ucy50cmVlSW5kZW50Kk1hdGgubWF4KGUudHJlZUJhc2UubnVtYmVyTGV2ZWxzLTEsMCk7dCYmciE9PXQud2lkdGgmJih0LndpZHRoPXIsZS5xdWV1ZVJlZnJlc2goKSk7dmFyIGk9ITA7ITE9PT1lLm9wdGlvbnMuc2hvd1RyZWVSb3dIZWFkZXImJihpPSExKSwhMT09PWUub3B0aW9ucy50cmVlUm93SGVhZGVyQWx3YXlzVmlzaWJsZSYmZS50cmVlQmFzZS5udW1iZXJMZXZlbHM8PTAmJihpPSExKSx0JiZ0LnZpc2libGUhPT1pJiYodC52aXNpYmxlPWksdC5jb2xEZWYudmlzaWJsZT1pLGUucXVldWVHcmlkUmVmcmVzaCgpKX0scmVuZGVyVHJlZTpmdW5jdGlvbihlKXt2YXIgdD1bXTtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2Uucm93LnZpc2libGUmJnQucHVzaChlLnJvdyksZS5zdGF0ZT09PWEuRVhQQU5ERUQmJmUuY2hpbGRyZW4mJjA8ZS5jaGlsZHJlbi5sZW5ndGgmJih0PXQuY29uY2F0KHMucmVuZGVyVHJlZShlLmNoaWxkcmVuKSkpfSksdH0sY3JlYXRlVHJlZTpmdW5jdGlvbihyLGUpe3ZhciBpPS0xLG49W107ci50cmVlQmFzZS50cmVlPVtdLHIudHJlZUJhc2UubnVtYmVyTGV2ZWxzPTA7dmFyIG89cy5nZXRBZ2dyZWdhdGlvbnMocik7Zm9yKGUuZm9yRWFjaChmdW5jdGlvbihlKXtpZih2b2lkIDAhPT1lLmVudGl0eS4kJHRyZWVMZXZlbCYmZS50cmVlTGV2ZWwhPT1lLmVudGl0eS4kJHRyZWVMZXZlbCYmKGUudHJlZUxldmVsPWUuZW50aXR5LiQkdHJlZUxldmVsKSxlLnRyZWVMZXZlbDw9aSl7Zm9yKDtlLnRyZWVMZXZlbDw9aTspe3ZhciB0PW4ucG9wKCk7cy5maW5hbGlzZUFnZ3JlZ2F0aW9ucyh0KSxpLS19MDxuLmxlbmd0aD9zLnNldEN1cnJlbnRTdGF0ZShuKTphLkVYUEFOREVEfSh2b2lkIDA9PT1lLnRyZWVMZXZlbHx8bnVsbD09PWUudHJlZUxldmVsfHxlLnRyZWVMZXZlbDwwKSYmZS52aXNpYmxlJiZzLmFnZ3JlZ2F0ZShyLGUsbikscy5hZGRPclVzZU5vZGUocixlLG4sbyksdm9pZCAwIT09ZS50cmVlTGV2ZWwmJm51bGwhPT1lLnRyZWVMZXZlbCYmMDw9ZS50cmVlTGV2ZWwmJihuLnB1c2goZSksaSsrLHMuc2V0Q3VycmVudFN0YXRlKG4pKSxyLnRyZWVCYXNlLm51bWJlckxldmVsczxlLnRyZWVMZXZlbCsxJiYoci50cmVlQmFzZS5udW1iZXJMZXZlbHM9ZS50cmVlTGV2ZWwrMSl9KTswPG4ubGVuZ3RoOyl7dmFyIHQ9bi5wb3AoKTtzLmZpbmFsaXNlQWdncmVnYXRpb25zKHQpfXJldHVybiByLnRyZWVCYXNlLnRyZWV9LGFkZE9yVXNlTm9kZTpmdW5jdGlvbihlLHQscixpKXt2YXIgbj1bXTtpLmZvckVhY2goZnVuY3Rpb24oZSl7bi5wdXNoKHMuYnVpbGRBZ2dyZWdhdGlvbk9iamVjdChlLmNvbCkpfSk7dmFyIG89e3N0YXRlOmEuQ09MTEFQU0VELHJvdzp0LHBhcmVudFJvdzpudWxsLGFnZ3JlZ2F0aW9uczpuLGNoaWxkcmVuOltdfTt0LnRyZWVOb2RlJiYoby5zdGF0ZT10LnRyZWVOb2RlLnN0YXRlKSwwPHIubGVuZ3RoJiYoby5wYXJlbnRSb3c9cltyLmxlbmd0aC0xXSksdC50cmVlTm9kZT1vLDA9PT1yLmxlbmd0aD9lLnRyZWVCYXNlLnRyZWUucHVzaChvKTpyW3IubGVuZ3RoLTFdLnRyZWVOb2RlLmNoaWxkcmVuLnB1c2gobyl9LHNldEN1cnJlbnRTdGF0ZTpmdW5jdGlvbihlKXt2YXIgdD1hLkVYUEFOREVEO3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24oZSl7ZS50cmVlTm9kZS5zdGF0ZT09PWEuQ09MTEFQU0VEJiYodD1hLkNPTExBUFNFRCl9KSx0fSxzb3J0VHJlZTpmdW5jdGlvbihlKXtlLmNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbihlKXtlLnNvcnQmJmUuc29ydC5pZ25vcmVTb3J0JiZkZWxldGUgZS5zb3J0Lmlnbm9yZVNvcnR9KSxlLnRyZWVCYXNlLnRyZWU9cy5zb3J0SW50ZXJuYWwoZSxlLnRyZWVCYXNlLnRyZWUpfSxzb3J0SW50ZXJuYWw6ZnVuY3Rpb24odCxlKXt2YXIgcj1lLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5yb3d9KSxpPShyPWwuc29ydCh0LHIsdC5jb2x1bW5zKSkubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLnRyZWVOb2RlfSk7cmV0dXJuIGkuZm9yRWFjaChmdW5jdGlvbihlKXtlLnN0YXRlPT09YS5FWFBBTkRFRCYmZS5jaGlsZHJlbiYmMDxlLmNoaWxkcmVuLmxlbmd0aCYmKGUuY2hpbGRyZW49cy5zb3J0SW50ZXJuYWwodCxlLmNoaWxkcmVuKSl9KSxpfSxmaXhGaWx0ZXI6ZnVuY3Rpb24oZSl7dmFyIHQ7ZS50cmVlQmFzZS50cmVlLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5jaGlsZHJlbiYmMDxlLmNoaWxkcmVuLmxlbmd0aCYmKHQ9ZS5yb3cudmlzaWJsZSxzLmZpeEZpbHRlckludGVybmFsKGUuY2hpbGRyZW4sdCkpfSl9LGZpeEZpbHRlckludGVybmFsOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuZm9yRWFjaChmdW5jdGlvbihlKXtlLnJvdy52aXNpYmxlJiYhdCYmKHMuc2V0UGFyZW50c1Zpc2libGUoZSksdD0hMCksZS5jaGlsZHJlbiYmMDxlLmNoaWxkcmVuLmxlbmd0aCYmcy5maXhGaWx0ZXJJbnRlcm5hbChlLmNoaWxkcmVuLHQmJmUucm93LnZpc2libGUpJiYodD0hMCl9KSx0fSxzZXRQYXJlbnRzVmlzaWJsZTpmdW5jdGlvbihlKXtmb3IoO2UucGFyZW50Um93OyllLnBhcmVudFJvdy52aXNpYmxlPSEwLGU9ZS5wYXJlbnRSb3cudHJlZU5vZGV9LGJ1aWxkQWdncmVnYXRpb25PYmplY3Q6ZnVuY3Rpb24oZSl7dmFyIHQ9e2NvbDplfTtyZXR1cm4gZS50cmVlQWdncmVnYXRpb24mJmUudHJlZUFnZ3JlZ2F0aW9uLnR5cGUmJih0LnR5cGU9ZS50cmVlQWdncmVnYXRpb24udHlwZSksZS50cmVlQWdncmVnYXRpb24mJmUudHJlZUFnZ3JlZ2F0aW9uLmxhYmVsJiYodC5sYWJlbD1lLnRyZWVBZ2dyZWdhdGlvbi5sYWJlbCksdH0sZ2V0QWdncmVnYXRpb25zOmZ1bmN0aW9uKHQpe3ZhciByPVtdO3JldHVybiB0LmNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbihlKXt2b2lkIDAhPT1lLnRyZWVBZ2dyZWdhdGlvbkZuJiYoci5wdXNoKHMuYnVpbGRBZ2dyZWdhdGlvbk9iamVjdChlKSksdC5vcHRpb25zLnNob3dDb2x1bW5Gb290ZXImJnZvaWQgMD09PWUuY29sRGVmLmFnZ3JlZ2F0aW9uVHlwZSYmZS50cmVlQWdncmVnYXRpb24mJihlLnRyZWVGb290ZXJBZ2dyZWdhdGlvbj1zLmJ1aWxkQWdncmVnYXRpb25PYmplY3QoZSksZS5hZ2dyZWdhdGlvblR5cGU9cy50cmVlRm9vdGVyQWdncmVnYXRpb25UeXBlKSl9KSxyfSxhZ2dyZWdhdGU6ZnVuY3Rpb24obixvLGUpezA9PT1lLmxlbmd0aCYmby50cmVlTm9kZSYmby50cmVlTm9kZS5hZ2dyZWdhdGlvbnMmJm8udHJlZU5vZGUuYWdncmVnYXRpb25zLmZvckVhY2goZnVuY3Rpb24oZSl7aWYodm9pZCAwIT09ZS5jb2wudHJlZUZvb3RlckFnZ3JlZ2F0aW9uKXt2YXIgdD1uLmdldENlbGxWYWx1ZShvLGUuY29sKSxyPU51bWJlcih0KTtlLmNvbC50cmVlQWdncmVnYXRpb25GbihlLmNvbC50cmVlRm9vdGVyQWdncmVnYXRpb24sdCxyLG8pfX0pLGUuZm9yRWFjaChmdW5jdGlvbihlLGkpe2UudHJlZU5vZGUuYWdncmVnYXRpb25zJiZlLnRyZWVOb2RlLmFnZ3JlZ2F0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PW4uZ2V0Q2VsbFZhbHVlKG8sZS5jb2wpLHI9TnVtYmVyKHQpO2UuY29sLnRyZWVBZ2dyZWdhdGlvbkZuKGUsdCxyLG8pLDA9PT1pJiZ2b2lkIDAhPT1lLmNvbC50cmVlRm9vdGVyQWdncmVnYXRpb24mJmUuY29sLnRyZWVBZ2dyZWdhdGlvbkZuKGUuY29sLnRyZWVGb290ZXJBZ2dyZWdhdGlvbix0LHIsbyl9KX0pfSxuYXRpdmVBZ2dyZWdhdGlvbnM6ZnVuY3Rpb24oKXtyZXR1cm57Y291bnQ6e2xhYmVsOm4uZ2V0KCkuYWdncmVnYXRpb24uY291bnQsbWVudVRpdGxlOm4uZ2V0KCkuZ3JvdXBpbmcuYWdncmVnYXRlX2NvdW50LGFnZ3JlZ2F0aW9uRm46ZnVuY3Rpb24oZSx0LHIpe3ZvaWQgMD09PWUudmFsdWU/ZS52YWx1ZT0xOmUudmFsdWUrK319LHN1bTp7bGFiZWw6bi5nZXQoKS5hZ2dyZWdhdGlvbi5zdW0sbWVudVRpdGxlOm4uZ2V0KCkuZ3JvdXBpbmcuYWdncmVnYXRlX3N1bSxhZ2dyZWdhdGlvbkZuOmZ1bmN0aW9uKGUsdCxyKXtpc05hTihyKXx8KHZvaWQgMD09PWUudmFsdWU/ZS52YWx1ZT1yOmUudmFsdWUrPXIpfX0sbWluOntsYWJlbDpuLmdldCgpLmFnZ3JlZ2F0aW9uLm1pbixtZW51VGl0bGU6bi5nZXQoKS5ncm91cGluZy5hZ2dyZWdhdGVfbWluLGFnZ3JlZ2F0aW9uRm46ZnVuY3Rpb24oZSx0LHIpe3ZvaWQgMD09PWUudmFsdWU/ZS52YWx1ZT10Om51bGwhPXQmJih0PGUudmFsdWV8fG51bGw9PT1lLnZhbHVlKSYmKGUudmFsdWU9dCl9fSxtYXg6e2xhYmVsOm4uZ2V0KCkuYWdncmVnYXRpb24ubWF4LG1lbnVUaXRsZTpuLmdldCgpLmdyb3VwaW5nLmFnZ3JlZ2F0ZV9tYXgsYWdncmVnYXRpb25GbjpmdW5jdGlvbihlLHQscil7dm9pZCAwPT09ZS52YWx1ZT9lLnZhbHVlPXQ6bnVsbCE9dCYmKHQ+ZS52YWx1ZXx8bnVsbD09PWUudmFsdWUpJiYoZS52YWx1ZT10KX19LGF2Zzp7bGFiZWw6bi5nZXQoKS5hZ2dyZWdhdGlvbi5hdmcsbWVudVRpdGxlOm4uZ2V0KCkuZ3JvdXBpbmcuYWdncmVnYXRlX2F2ZyxhZ2dyZWdhdGlvbkZuOmZ1bmN0aW9uKGUsdCxyKXt2b2lkIDA9PT1lLmNvdW50P2UuY291bnQ9MTplLmNvdW50KyssaXNOYU4ocil8fCh2b2lkIDA9PT1lLnZhbHVlfHx2b2lkIDA9PT1lLnN1bT8oZS52YWx1ZT1yLGUuc3VtPXIpOihlLnN1bSs9cixlLnZhbHVlPWUuc3VtL2UuY291bnQpKX19fX0sZmluYWxpc2VBZ2dyZWdhdGlvbjpmdW5jdGlvbihlLHQpe3QuY29sLnRyZWVBZ2dyZWdhdGlvblVwZGF0ZUVudGl0eSYmdm9pZCAwIT09ZSYmdm9pZCAwIT09ZS5lbnRpdHlbIiQkIit0LmNvbC51aWRdJiZhbmd1bGFyLmV4dGVuZCh0LGUuZW50aXR5WyIkJCIrdC5jb2wudWlkXSksImZ1bmN0aW9uIj09dHlwZW9mIHQuY29sLnRyZWVBZ2dyZWdhdGlvbkZpbmFsaXplckZuJiZ0LmNvbC50cmVlQWdncmVnYXRpb25GaW5hbGl6ZXJGbih0KSwiZnVuY3Rpb24iPT10eXBlb2YgdC5jb2wuY3VzdG9tVHJlZUFnZ3JlZ2F0aW9uRmluYWxpemVyRm4mJnQuY29sLmN1c3RvbVRyZWVBZ2dyZWdhdGlvbkZpbmFsaXplckZuKHQpLHZvaWQgMD09PXQucmVuZGVyZWQmJih0LnJlbmRlcmVkPXQubGFiZWw/dC5sYWJlbCt0LnZhbHVlOnQudmFsdWUpfSxmaW5hbGlzZUFnZ3JlZ2F0aW9uczpmdW5jdGlvbihlKXtudWxsIT1lJiZ2b2lkIDAhPT1lLnRyZWVOb2RlLmFnZ3JlZ2F0aW9ucyYmZS50cmVlTm9kZS5hZ2dyZWdhdGlvbnMuZm9yRWFjaChmdW5jdGlvbihyKXtpZihzLmZpbmFsaXNlQWdncmVnYXRpb24oZSxyKSxyLmNvbC50cmVlQWdncmVnYXRpb25VcGRhdGVFbnRpdHkpe3ZhciBpPXt9O2FuZ3VsYXIuZm9yRWFjaChyLGZ1bmN0aW9uKGUsdCl7ci5oYXNPd25Qcm9wZXJ0eSh0KSYmImNvbCIhPT10JiYoaVt0XT1lKX0pLGUuZW50aXR5WyIkJCIrci5jb2wudWlkXT1pfX0pfSx0cmVlRm9vdGVyQWdncmVnYXRpb25UeXBlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHMuZmluYWxpc2VBZ2dyZWdhdGlvbih2b2lkIDAsdC50cmVlRm9vdGVyQWdncmVnYXRpb24pLHZvaWQgMD09PXQudHJlZUZvb3RlckFnZ3JlZ2F0aW9uLnZhbHVlfHxudWxsPT09dC50cmVlRm9vdGVyQWdncmVnYXRpb24ucmVuZGVyZWQ/IiI6dC50cmVlRm9vdGVyQWdncmVnYXRpb24ucmVuZGVyZWR9fTtyZXR1cm4gc31dKSxlLmRpcmVjdGl2ZSgidWlHcmlkVHJlZUJhc2VSb3dIZWFkZXJCdXR0b25zIixbIiR0ZW1wbGF0ZUNhY2hlIiwidWlHcmlkVHJlZUJhc2VTZXJ2aWNlIixmdW5jdGlvbihlLG8pe3JldHVybntyZXBsYWNlOiEwLHJlc3RyaWN0OiJFIix0ZW1wbGF0ZTplLmdldCgidWktZ3JpZC90cmVlQmFzZVJvd0hlYWRlckJ1dHRvbnMiKSxzY29wZTohMCxyZXF1aXJlOiJedWlHcmlkIixsaW5rOmZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuPWkuZ3JpZDtlLnRyZWVCdXR0b25DbGFzcz1mdW5jdGlvbihlKXtpZihuLm9wdGlvbnMuc2hvd1RyZWVFeHBhbmROb0NoaWxkcmVuJiYtMTxlLnRyZWVMZXZlbHx8ZS50cmVlTm9kZS5jaGlsZHJlbiYmMDxlLnRyZWVOb2RlLmNoaWxkcmVuLmxlbmd0aCl7aWYoImV4cGFuZGVkIj09PWUudHJlZU5vZGUuc3RhdGUpcmV0dXJuInVpLWdyaWQtaWNvbi1taW51cy1zcXVhcmVkIjtpZigiY29sbGFwc2VkIj09PWUudHJlZU5vZGUuc3RhdGUpcmV0dXJuInVpLWdyaWQtaWNvbi1wbHVzLXNxdWFyZWQifX0sZS50cmVlQnV0dG9uQ2xpY2s9ZnVuY3Rpb24oZSx0KXt0LnN0b3BQcm9wYWdhdGlvbigpLG8udG9nZ2xlUm93VHJlZVN0YXRlKG4sZSx0KX19fX1dKSxlLmRpcmVjdGl2ZSgidWlHcmlkVHJlZUJhc2VFeHBhbmRBbGxCdXR0b25zIixbIiR0ZW1wbGF0ZUNhY2hlIiwidWlHcmlkVHJlZUJhc2VTZXJ2aWNlIixmdW5jdGlvbihlLG8pe3JldHVybntyZXBsYWNlOiEwLHJlc3RyaWN0OiJFIix0ZW1wbGF0ZTplLmdldCgidWktZ3JpZC90cmVlQmFzZUV4cGFuZEFsbEJ1dHRvbnMiKSxzY29wZTohMSxsaW5rOmZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuPWUuY29sLmdyaWQ7ZS5oZWFkZXJCdXR0b25DbGFzcz1mdW5jdGlvbigpe3JldHVybiAwPG4udHJlZUJhc2UubnVtYmVyTGV2ZWxzJiZuLnRyZWVCYXNlLmV4cGFuZEFsbD8idWktZ3JpZC1pY29uLW1pbnVzLXNxdWFyZWQiOjA8bi50cmVlQmFzZS5udW1iZXJMZXZlbHMmJiFuLnRyZWVCYXNlLmV4cGFuZEFsbD8idWktZ3JpZC1pY29uLXBsdXMtc3F1YXJlZCI6dm9pZCAwfSxlLmhlYWRlckJ1dHRvbkNsaWNrPWZ1bmN0aW9uKGUsdCl7bi50cmVlQmFzZS5leHBhbmRBbGw/by5jb2xsYXBzZUFsbFJvd3Mobix0KTpvLmV4cGFuZEFsbFJvd3Mobix0KX19fX1dKSxlLmRpcmVjdGl2ZSgidWlHcmlkVmlld3BvcnQiLFsiJGNvbXBpbGUiLCJ1aUdyaWRDb25zdGFudHMiLCJncmlkVXRpbCIsIiRwYXJzZSIsZnVuY3Rpb24oZSx0LHIsaSl7cmV0dXJue3ByaW9yaXR5Oi0yMDAsc2NvcGU6ITEsY29tcGlsZTpmdW5jdGlvbihlLHQpe3ZhciByPWFuZ3VsYXIuZWxlbWVudChlLmNoaWxkcmVuKCkuY2hpbGRyZW4oKVswXSksaT1yLmF0dHIoIm5nLWNsYXNzIiksbj0iIjtyZXR1cm4gbj1pP2kuc2xpY2UoMCwtMSkrIiwndWktZ3JpZC10cmVlLWhlYWRlci1yb3cnOiByb3cudHJlZUxldmVsID4gLTF9Ijoieyd1aS1ncmlkLXRyZWUtaGVhZGVyLXJvdyc6IHJvdy50cmVlTGV2ZWwgPiAtMX0iLHIuYXR0cigibmctY2xhc3MiLG4pLHtwcmU6ZnVuY3Rpb24oZSx0LHIsaSl7fSxwb3N0OmZ1bmN0aW9uKGUsdCxyLGkpe319fX19XSl9KCksZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7dmFyIGU9YW5ndWxhci5tb2R1bGUoInVpLmdyaWQudHJlZVZpZXciLFsidWkuZ3JpZCIsInVpLmdyaWQudHJlZUJhc2UiXSk7ZS5jb25zdGFudCgidWlHcmlkVHJlZVZpZXdDb25zdGFudHMiLHtmZWF0dXJlTmFtZToidHJlZVZpZXciLHJvd0hlYWRlckNvbE5hbWU6InRyZWVCYXNlUm93SGVhZGVyQ29sIixFWFBBTkRFRDoiZXhwYW5kZWQiLENPTExBUFNFRDoiY29sbGFwc2VkIixhZ2dyZWdhdGlvbjp7Q09VTlQ6ImNvdW50IixTVU06InN1bSIsTUFYOiJtYXgiLE1JTjoibWluIixBVkc6ImF2ZyJ9fSksZS5zZXJ2aWNlKCJ1aUdyaWRUcmVlVmlld1NlcnZpY2UiLFsiJHEiLCJ1aUdyaWRUcmVlVmlld0NvbnN0YW50cyIsInVpR3JpZFRyZWVCYXNlQ29uc3RhbnRzIiwidWlHcmlkVHJlZUJhc2VTZXJ2aWNlIiwiZ3JpZFV0aWwiLCJHcmlkUm93IiwiZ3JpZENsYXNzRmFjdG9yeSIsImkxOG5TZXJ2aWNlIiwidWlHcmlkQ29uc3RhbnRzIixmdW5jdGlvbihlLHQscixuLGksbyxhLGwscyl7dmFyIGQ9e2luaXRpYWxpemVHcmlkOmZ1bmN0aW9uKGUsdCl7bi5pbml0aWFsaXplR3JpZChlLHQpLGUudHJlZVZpZXc9e30sZS5yZWdpc3RlclJvd3NQcm9jZXNzb3IoZC5hZGp1c3RTb3J0aW5nLDYwKTt2YXIgcj17dHJlZVZpZXc6e319LGk9e3RyZWVWaWV3Ont9fTtlLmFwaS5yZWdpc3RlckV2ZW50c0Zyb21PYmplY3QociksZS5hcGkucmVnaXN0ZXJNZXRob2RzRnJvbU9iamVjdChpKX0sZGVmYXVsdEdyaWRPcHRpb25zOmZ1bmN0aW9uKGUpe2UuZW5hYmxlVHJlZVZpZXc9ITEhPT1lLmVuYWJsZVRyZWVWaWV3fSxhZGp1c3RTb3J0aW5nOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbihlKXtlLnNvcnQmJihlLnNvcnQuaWdub3JlU29ydD0hMCl9KSxlfX07cmV0dXJuIGR9XSksZS5kaXJlY3RpdmUoInVpR3JpZFRyZWVWaWV3IixbInVpR3JpZFRyZWVWaWV3Q29uc3RhbnRzIiwidWlHcmlkVHJlZVZpZXdTZXJ2aWNlIiwiJHRlbXBsYXRlQ2FjaGUiLGZ1bmN0aW9uKGUsbix0KXtyZXR1cm57cmVwbGFjZTohMCxwcmlvcml0eTowLHJlcXVpcmU6Il51aUdyaWQiLHNjb3BlOiExLGNvbXBpbGU6ZnVuY3Rpb24oKXtyZXR1cm57cHJlOmZ1bmN0aW9uKGUsdCxyLGkpeyExIT09aS5ncmlkLm9wdGlvbnMuZW5hYmxlVHJlZVZpZXcmJm4uaW5pdGlhbGl6ZUdyaWQoaS5ncmlkLGUpfSxwb3N0OmZ1bmN0aW9uKGUsdCxyLGkpe319fX19XSl9KCksZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7dmFyIGU9YW5ndWxhci5tb2R1bGUoInVpLmdyaWQudmFsaWRhdGUiLFsidWkuZ3JpZCJdKTtlLnNlcnZpY2UoInVpR3JpZFZhbGlkYXRlU2VydmljZSIsWyIkc2NlIiwiJHEiLCIkaHR0cCIsImkxOG5TZXJ2aWNlIiwidWlHcmlkQ29uc3RhbnRzIixmdW5jdGlvbihuLHUsZSxvLHQpe3ZhciBjPXt2YWxpZGF0b3JGYWN0b3JpZXM6e30sc2V0RXh0ZXJuYWxGYWN0b3J5RnVuY3Rpb246ZnVuY3Rpb24oZSl7Yy5leHRlcm5hbEZhY3RvcnlGdW5jdGlvbj1lfSxjbGVhckV4dGVybmFsRmFjdG9yeTpmdW5jdGlvbigpe2RlbGV0ZSBjLmV4dGVybmFsRmFjdG9yeUZ1bmN0aW9ufSxnZXRWYWxpZGF0b3JGcm9tRXh0ZXJuYWxGYWN0b3J5OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGMuZXh0ZXJuYWxGYWN0b3J5RnVuY3Rpb24oZSx0KS52YWxpZGF0b3JGYWN0b3J5KHQpfSxnZXRNZXNzYWdlRnJvbUV4dGVybmFsRmFjdG9yeTpmdW5jdGlvbihlLHQpe3JldHVybiBjLmV4dGVybmFsRmFjdG9yeUZ1bmN0aW9uKGUsdCkubWVzc2FnZUZ1bmN0aW9uKHQpfSxzZXRWYWxpZGF0b3I6ZnVuY3Rpb24oZSx0LHIpe2MudmFsaWRhdG9yRmFjdG9yaWVzW2VdPXt2YWxpZGF0b3JGYWN0b3J5OnQsbWVzc2FnZUZ1bmN0aW9uOnJ9fSxnZXRWYWxpZGF0b3I6ZnVuY3Rpb24oZSx0KXtpZihjLmV4dGVybmFsRmFjdG9yeUZ1bmN0aW9uKXt2YXIgcj1jLmdldFZhbGlkYXRvckZyb21FeHRlcm5hbEZhY3RvcnkoZSx0KTtpZihyKXJldHVybiByfWlmKCFjLnZhbGlkYXRvckZhY3Rvcmllc1tlXSl0aHJvdyJJbnZhbGlkIHZhbGlkYXRvciBuYW1lOiAiK2U7cmV0dXJuIGMudmFsaWRhdG9yRmFjdG9yaWVzW2VdLnZhbGlkYXRvckZhY3RvcnkodCl9LGdldE1lc3NhZ2U6ZnVuY3Rpb24oZSx0KXtpZihjLmV4dGVybmFsRmFjdG9yeUZ1bmN0aW9uKXt2YXIgcj1jLmdldE1lc3NhZ2VGcm9tRXh0ZXJuYWxGYWN0b3J5KGUsdCk7aWYocilyZXR1cm4gcn1yZXR1cm4gYy52YWxpZGF0b3JGYWN0b3JpZXNbZV0ubWVzc2FnZUZ1bmN0aW9uKHQpfSxpc0ludmFsaWQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZVsiJCRpbnZhbGlkIit0Lm5hbWVdfSxzZXRJbnZhbGlkOmZ1bmN0aW9uKGUsdCl7ZVsiJCRpbnZhbGlkIit0Lm5hbWVdPSEwfSxzZXRWYWxpZDpmdW5jdGlvbihlLHQpe2RlbGV0ZSBlWyIkJGludmFsaWQiK3QubmFtZV19LHNldEVycm9yOmZ1bmN0aW9uKGUsdCxyKXtlWyIkJGVycm9ycyIrdC5uYW1lXXx8KGVbIiQkZXJyb3JzIit0Lm5hbWVdPXt9KSxlWyIkJGVycm9ycyIrdC5uYW1lXVtyXT0hMH0sY2xlYXJFcnJvcjpmdW5jdGlvbihlLHQscil7ZVsiJCRlcnJvcnMiK3QubmFtZV0mJnIgaW4gZVsiJCRlcnJvcnMiK3QubmFtZV0mJmRlbGV0ZSBlWyIkJGVycm9ycyIrdC5uYW1lXVtyXX0sZ2V0RXJyb3JNZXNzYWdlczpmdW5jdGlvbihlLHQpe3ZhciByPVtdO3JldHVybiBlWyIkJGVycm9ycyIrdC5uYW1lXSYmMCE9PU9iamVjdC5rZXlzKGVbIiQkZXJyb3JzIit0Lm5hbWVdKS5sZW5ndGgmJk9iamVjdC5rZXlzKGVbIiQkZXJyb3JzIit0Lm5hbWVdKS5zb3J0KCkuZm9yRWFjaChmdW5jdGlvbihlKXtyLnB1c2goYy5nZXRNZXNzYWdlKGUsdC52YWxpZGF0b3JzW2VdKSl9KSxyfSxnZXRGb3JtYXR0ZWRFcnJvcnM6ZnVuY3Rpb24oZSx0KXt2YXIgcj0iIixpPWMuZ2V0RXJyb3JNZXNzYWdlcyhlLHQpO2lmKGkubGVuZ3RoKXJldHVybiBpLmZvckVhY2goZnVuY3Rpb24oZSl7cis9ZSsiPGJyLz4ifSksbi50cnVzdEFzSHRtbCgiPHA+PGI+IitvLmdldFNhZmVUZXh0KCJ2YWxpZGF0ZS5lcnJvciIpKyI8L2I+PC9wPiIrcil9LGdldFRpdGxlRm9ybWF0dGVkRXJyb3JzOmZ1bmN0aW9uKGUsdCl7dmFyIHI9IiIsaT1jLmdldEVycm9yTWVzc2FnZXMoZSx0KTtpZihpLmxlbmd0aClyZXR1cm4gaS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3IrPWUrIlxuIn0pLG4udHJ1c3RBc0h0bWwoby5nZXRTYWZlVGV4dCgidmFsaWRhdGUuZXJyb3IiKSsiXG4iK3IpfSxydW5WYWxpZGF0b3JzOmZ1bmN0aW9uKGUsdCxuLG8sYSl7aWYobiE9PW8pe2lmKHZvaWQgMD09PXQubmFtZXx8IXQubmFtZSl0aHJvdyBuZXcgRXJyb3IoImNvbERlZi5uYW1lIGlzIHJlcXVpcmVkIHRvIHBlcmZvcm0gdmFsaWRhdGlvbiIpO2Muc2V0VmFsaWQoZSx0KTt2YXIgcj1mdW5jdGlvbih0LHIsaSl7cmV0dXJuIGZ1bmN0aW9uKGUpe2V8fChjLnNldEludmFsaWQodCxyKSxjLnNldEVycm9yKHQscixpKSxhJiZhLmFwaS52YWxpZGF0ZS5yYWlzZS52YWxpZGF0aW9uRmFpbGVkKHQscixuLG8pKX19LGk9W107Zm9yKHZhciBsIGluIHQudmFsaWRhdG9ycyl7Yy5jbGVhckVycm9yKGUsdCxsKTt2YXIgcz1jLmdldFZhbGlkYXRvcihsLHQudmFsaWRhdG9yc1tsXSksZD11LndoZW4ocyhvLG4sZSx0KSkudGhlbihyKGUsdCxsKSk7aS5wdXNoKGQpfXJldHVybiB1LmFsbChpKX19LGNyZWF0ZURlZmF1bHRWYWxpZGF0b3JzOmZ1bmN0aW9uKCl7Yy5zZXRWYWxpZGF0b3IoIm1pbkxlbmd0aCIsZnVuY3Rpb24obil7cmV0dXJuIGZ1bmN0aW9uKGUsdCxyLGkpe3JldHVybiBudWxsPT10fHwiIj09PXR8fHQubGVuZ3RoPj1ufX0sZnVuY3Rpb24oZSl7cmV0dXJuIG8uZ2V0U2FmZVRleHQoInZhbGlkYXRlLm1pbkxlbmd0aCIpLnJlcGxhY2UoIlRIUkVTSE9MRCIsZSl9KSxjLnNldFZhbGlkYXRvcigibWF4TGVuZ3RoIixmdW5jdGlvbihuKXtyZXR1cm4gZnVuY3Rpb24oZSx0LHIsaSl7cmV0dXJuIG51bGw9PXR8fCIiPT09dHx8dC5sZW5ndGg8PW59fSxmdW5jdGlvbihlKXtyZXR1cm4gby5nZXRTYWZlVGV4dCgidmFsaWRhdGUubWF4TGVuZ3RoIikucmVwbGFjZSgiVEhSRVNIT0xEIixlKX0pLGMuc2V0VmFsaWRhdG9yKCJyZXF1aXJlZCIsZnVuY3Rpb24obil7cmV0dXJuIGZ1bmN0aW9uKGUsdCxyLGkpe3JldHVybiFufHwhKG51bGw9PXR8fCIiPT09dCl9fSxmdW5jdGlvbihlKXtyZXR1cm4gby5nZXRTYWZlVGV4dCgidmFsaWRhdGUucmVxdWlyZWQiKX0pfSxpbml0aWFsaXplR3JpZDpmdW5jdGlvbihlLG4pe24udmFsaWRhdGU9e2lzSW52YWxpZDpjLmlzSW52YWxpZCxnZXRGb3JtYXR0ZWRFcnJvcnM6Yy5nZXRGb3JtYXR0ZWRFcnJvcnMsZ2V0VGl0bGVGb3JtYXR0ZWRFcnJvcnM6Yy5nZXRUaXRsZUZvcm1hdHRlZEVycm9ycyxydW5WYWxpZGF0b3JzOmMucnVuVmFsaWRhdG9yc307dmFyIHQ9e2V2ZW50czp7dmFsaWRhdGU6e3ZhbGlkYXRpb25GYWlsZWQ6ZnVuY3Rpb24oZSx0LHIsaSl7fX19LG1ldGhvZHM6e3ZhbGlkYXRlOntpc0ludmFsaWQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbi52YWxpZGF0ZS5pc0ludmFsaWQoZSx0KX0sZ2V0RXJyb3JNZXNzYWdlczpmdW5jdGlvbihlLHQpe3JldHVybiBuLnZhbGlkYXRlLmdldEVycm9yTWVzc2FnZXMoZSx0KX0sZ2V0Rm9ybWF0dGVkRXJyb3JzOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4udmFsaWRhdGUuZ2V0Rm9ybWF0dGVkRXJyb3JzKGUsdCl9LGdldFRpdGxlRm9ybWF0dGVkRXJyb3JzOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4udmFsaWRhdGUuZ2V0VGl0bGVGb3JtYXR0ZWRFcnJvcnMoZSx0KX19fX07bi5hcGkucmVnaXN0ZXJFdmVudHNGcm9tT2JqZWN0KHQuZXZlbnRzKSxuLmFwaS5yZWdpc3Rlck1ldGhvZHNGcm9tT2JqZWN0KHQubWV0aG9kcyksbi5lZGl0JiZuLmFwaS5lZGl0Lm9uLmFmdGVyQ2VsbEVkaXQoZSxmdW5jdGlvbihlLHQscixpKXtuLnZhbGlkYXRlLnJ1blZhbGlkYXRvcnMoZSx0LHIsaSxuKX0pLGMuY3JlYXRlRGVmYXVsdFZhbGlkYXRvcnMoKX19O3JldHVybiBjfV0pLGUuZGlyZWN0aXZlKCJ1aUdyaWRWYWxpZGF0ZSIsWyJncmlkVXRpbCIsInVpR3JpZFZhbGlkYXRlU2VydmljZSIsZnVuY3Rpb24oZSxuKXtyZXR1cm57cHJpb3JpdHk6MCxyZXBsYWNlOiEwLHJlcXVpcmU6Il51aUdyaWQiLHNjb3BlOiExLGNvbXBpbGU6ZnVuY3Rpb24oKXtyZXR1cm57cHJlOmZ1bmN0aW9uKGUsdCxyLGkpe24uaW5pdGlhbGl6ZUdyaWQoZSxpLmdyaWQpfSxwb3N0OmZ1bmN0aW9uKGUsdCxyLGkpe319fX19XSl9KCksYW5ndWxhci5tb2R1bGUoInVpLmdyaWQiKS5ydW4oWyIkdGVtcGxhdGVDYWNoZSIsZnVuY3Rpb24oZSl7InVzZSBzdHJpY3QiO2UucHV0KCJ1aS1ncmlkL3VpLWdyaWQtZmlsdGVyIiwnPGRpdiBjbGFzcz0idWktZ3JpZC1maWx0ZXItY29udGFpbmVyIiBuZy1zdHlsZT0iY29sLmV4dHJhU3R5bGUiIG5nLXJlcGVhdD0iY29sRmlsdGVyIGluIGNvbC5maWx0ZXJzIiBuZy1jbGFzcz0ie1wndWktZ3JpZC1maWx0ZXItY2FuY2VsLWJ1dHRvbi1oaWRkZW5cJyA6IGNvbEZpbHRlci5kaXNhYmxlQ2FuY2VsRmlsdGVyQnV0dG9uID09PSB0cnVlIH0iPjxkaXYgbmctaWY9ImNvbEZpbHRlci50eXBlICE9PSBcJ3NlbGVjdFwnIj48aW5wdXQgdHlwZT0idGV4dCIgY2xhc3M9InVpLWdyaWQtZmlsdGVyLWlucHV0IHVpLWdyaWQtZmlsdGVyLWlucHV0LXt7JGluZGV4fX0iIG5nLW1vZGVsPSJjb2xGaWx0ZXIudGVybSIgbmctYXR0ci1wbGFjZWhvbGRlcj0ie3tjb2xGaWx0ZXIucGxhY2Vob2xkZXIgfHwgXCdcJ319IiBhcmlhLWxhYmVsPSJ7e2NvbEZpbHRlci5hcmlhTGFiZWwgfHwgYXJpYS5kZWZhdWx0RmlsdGVyTGFiZWx9fSI+PGRpdiByb2xlPSJidXR0b24iIGNsYXNzPSJ1aS1ncmlkLWZpbHRlci1idXR0b24iIG5nLWNsaWNrPSJyZW1vdmVGaWx0ZXIoY29sRmlsdGVyLCAkaW5kZXgpIiBuZy1pZj0iIWNvbEZpbHRlci5kaXNhYmxlQ2FuY2VsRmlsdGVyQnV0dG9uIiBuZy1kaXNhYmxlZD0iY29sRmlsdGVyLnRlcm0gPT09IHVuZGVmaW5lZCB8fCBjb2xGaWx0ZXIudGVybSA9PT0gbnVsbCB8fCBjb2xGaWx0ZXIudGVybSA9PT0gXCdcJyIgbmctc2hvdz0iY29sRmlsdGVyLnRlcm0gIT09IHVuZGVmaW5lZCAmJiBjb2xGaWx0ZXIudGVybSAhPT0gbnVsbCAmJiBjb2xGaWx0ZXIudGVybSAhPT0gXCdcJyI+PGkgY2xhc3M9InVpLWdyaWQtaWNvbi1jYW5jZWwiIHVpLWdyaWQtb25lLWJpbmQtYXJpYS1sYWJlbD0iYXJpYS5yZW1vdmVGaWx0ZXIiPiZuYnNwOzwvaT48L2Rpdj48L2Rpdj48ZGl2IG5nLWlmPSJjb2xGaWx0ZXIudHlwZSA9PT0gXCdzZWxlY3RcJyI+PHNlbGVjdCBjbGFzcz0idWktZ3JpZC1maWx0ZXItc2VsZWN0IHVpLWdyaWQtZmlsdGVyLWlucHV0LXt7JGluZGV4fX0iIG5nLW1vZGVsPSJjb2xGaWx0ZXIudGVybSIgbmctc2hvdz0iY29sRmlsdGVyLnNlbGVjdE9wdGlvbnMubGVuZ3RoID4gMCIgbmctYXR0ci1wbGFjZWhvbGRlcj0ie3tjb2xGaWx0ZXIucGxhY2Vob2xkZXIgfHwgYXJpYS5kZWZhdWx0RmlsdGVyTGFiZWx9fSIgYXJpYS1sYWJlbD0ie3tjb2xGaWx0ZXIuYXJpYUxhYmVsIHx8IFwnXCd9fSIgbmctb3B0aW9ucz0ib3B0aW9uLnZhbHVlIGFzIG9wdGlvbi5sYWJlbCBmb3Igb3B0aW9uIGluIGNvbEZpbHRlci5zZWxlY3RPcHRpb25zIj48b3B0aW9uIHZhbHVlPSIiPjwvb3B0aW9uPjwvc2VsZWN0PjxkaXYgcm9sZT0iYnV0dG9uIiBjbGFzcz0idWktZ3JpZC1maWx0ZXItYnV0dG9uLXNlbGVjdCIgbmctY2xpY2s9InJlbW92ZUZpbHRlcihjb2xGaWx0ZXIsICRpbmRleCkiIG5nLWlmPSIhY29sRmlsdGVyLmRpc2FibGVDYW5jZWxGaWx0ZXJCdXR0b24iIG5nLWRpc2FibGVkPSJjb2xGaWx0ZXIudGVybSA9PT0gdW5kZWZpbmVkIHx8IGNvbEZpbHRlci50ZXJtID09PSBudWxsIHx8IGNvbEZpbHRlci50ZXJtID09PSBcJ1wnIiBuZy1zaG93PSJjb2xGaWx0ZXIudGVybSAhPT0gdW5kZWZpbmVkICYmIGNvbEZpbHRlci50ZXJtICE9IG51bGwiPjxpIGNsYXNzPSJ1aS1ncmlkLWljb24tY2FuY2VsIiB1aS1ncmlkLW9uZS1iaW5kLWFyaWEtbGFiZWw9ImFyaWEucmVtb3ZlRmlsdGVyIj4mbmJzcDs8L2k+PC9kaXY+PC9kaXY+PC9kaXY+JyksZS5wdXQoInVpLWdyaWQvdWktZ3JpZC1mb290ZXIiLCc8ZGl2IGNsYXNzPSJ1aS1ncmlkLWZvb3Rlci1wYW5lbCB1aS1ncmlkLWZvb3Rlci1hZ2dyZWdhdGVzLXJvdyI+XHgzYyEtLSB0Zm9vdGVyIC0tXHgzZTxkaXYgY2xhc3M9InVpLWdyaWQtZm9vdGVyIHVpLWdyaWQtZm9vdGVyLXZpZXdwb3J0Ij48ZGl2IGNsYXNzPSJ1aS1ncmlkLWZvb3Rlci1jYW52YXMiPjxkaXYgY2xhc3M9InVpLWdyaWQtZm9vdGVyLWNlbGwtd3JhcHBlciIgbmctc3R5bGU9ImNvbENvbnRhaW5lci5oZWFkZXJDZWxsV3JhcHBlclN0eWxlKCkiPjxkaXYgcm9sZT0icm93IiBjbGFzcz0idWktZ3JpZC1mb290ZXItY2VsbC1yb3ciPjxkaXYgdWktZ3JpZC1mb290ZXItY2VsbCByb2xlPSJncmlkY2VsbCIgbmctcmVwZWF0PSJjb2wgaW4gY29sQ29udGFpbmVyLnJlbmRlcmVkQ29sdW1ucyB0cmFjayBieSBjb2wudWlkIiBjb2w9ImNvbCIgcmVuZGVyLWluZGV4PSIkaW5kZXgiIGNsYXNzPSJ1aS1ncmlkLWZvb3Rlci1jZWxsIHVpLWdyaWQtY2xlYXJmaXgiPjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PicpLGUucHV0KCJ1aS1ncmlkL3VpLWdyaWQtZ3JpZC1mb290ZXIiLCc8ZGl2IGNsYXNzPSJ1aS1ncmlkLWZvb3Rlci1pbmZvIHVpLWdyaWQtZ3JpZC1mb290ZXIiPjxzcGFuPnt7XCdzZWFyY2gudG90YWxJdGVtc1wnIHwgdH19IHt7Z3JpZC5yb3dzLmxlbmd0aH19PC9zcGFuPiA8c3BhbiBuZy1pZj0iZ3JpZC5yZW5kZXJDb250YWluZXJzLmJvZHkudmlzaWJsZVJvd0NhY2hlLmxlbmd0aCAhPT0gZ3JpZC5yb3dzLmxlbmd0aCIgY2xhc3M9Im5nTGFiZWwiPih7eyJzZWFyY2guc2hvd2luZ0l0ZW1zIiB8IHR9fSB7e2dyaWQucmVuZGVyQ29udGFpbmVycy5ib2R5LnZpc2libGVSb3dDYWNoZS5sZW5ndGh9fSk8L3NwYW4+PC9kaXY+JyksZS5wdXQoInVpLWdyaWQvdWktZ3JpZC1oZWFkZXIiLCc8ZGl2IHJvbGU9InJvd2dyb3VwIiBjbGFzcz0idWktZ3JpZC1oZWFkZXIiPlx4M2MhLS0gdGhlYWRlciAtLVx4M2U8ZGl2IGNsYXNzPSJ1aS1ncmlkLXRvcC1wYW5lbCI+PGRpdiBjbGFzcz0idWktZ3JpZC1oZWFkZXItdmlld3BvcnQiPjxkaXYgY2xhc3M9InVpLWdyaWQtaGVhZGVyLWNhbnZhcyI+PGRpdiBjbGFzcz0idWktZ3JpZC1oZWFkZXItY2VsbC13cmFwcGVyIiBuZy1zdHlsZT0iY29sQ29udGFpbmVyLmhlYWRlckNlbGxXcmFwcGVyU3R5bGUoKSI+PGRpdiByb2xlPSJyb3ciIGNsYXNzPSJ1aS1ncmlkLWhlYWRlci1jZWxsLXJvdyI+PGRpdiBjbGFzcz0idWktZ3JpZC1oZWFkZXItY2VsbCB1aS1ncmlkLWNsZWFyZml4IiBuZy1yZXBlYXQ9ImNvbCBpbiBjb2xDb250YWluZXIucmVuZGVyZWRDb2x1bW5zIHRyYWNrIGJ5IGNvbC51aWQiIHVpLWdyaWQtaGVhZGVyLWNlbGwgY29sPSJjb2wiIHJlbmRlci1pbmRleD0iJGluZGV4Ij48L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj4nKSxlLnB1dCgidWktZ3JpZC91aS1ncmlkLW1lbnUtYnV0dG9uIiwnPGRpdiBjbGFzcz0idWktZ3JpZC1tZW51LWJ1dHRvbiI+PGRpdiByb2xlPSJidXR0b24iIHVpLWdyaWQtb25lLWJpbmQtaWQtZ3JpZD0iXCdncmlkLW1lbnVcJyIgY2xhc3M9InVpLWdyaWQtaWNvbi1jb250YWluZXIiIG5nLWNsaWNrPSJ0b2dnbGVNZW51KCkiIGFyaWEtaGFzcG9wdXA9InRydWUiPjxpIGNsYXNzPSJ1aS1ncmlkLWljb24tbWVudSIgdWktZ3JpZC1vbmUtYmluZC1hcmlhLWxhYmVsPSJpMThuLmFyaWEuYnV0dG9uTGFiZWwiPiZuYnNwOzwvaT48L2Rpdj48ZGl2IHVpLWdyaWQtbWVudSBtZW51LWl0ZW1zPSJtZW51SXRlbXMiPjwvZGl2PjwvZGl2PicpLGUucHV0KCJ1aS1ncmlkL3VpLWdyaWQtbWVudS1oZWFkZXItaXRlbSIsJzxsaSByb2xlPSJtZW51aXRlbSI+PGRpdiBjbGFzcz0idWktZ3JpZC1tZW51LWl0ZW0iIHJvbGU9ImhlYWRpbmciIGFyaWEtbGV2ZWw9IjIiIG5nLXNob3c9Iml0ZW1TaG93bigpIj48aSBhcmlhLWhpZGRlbj0idHJ1ZSI+Jm5ic3A7IDwvaT48c3BhbiBuZy1iaW5kPSJsYWJlbCgpIj48L3NwYW4+PC9kaXY+PC9saT4nKSxlLnB1dCgidWktZ3JpZC91aS1ncmlkLW5vLWhlYWRlciIsJzxkaXYgY2xhc3M9InVpLWdyaWQtdG9wLXBhbmVsIj48L2Rpdj4nKSxlLnB1dCgidWktZ3JpZC91aS1ncmlkLXJvdyIsIjxkaXYgbmctcmVwZWF0PVwiKGNvbFJlbmRlckluZGV4LCBjb2wpIGluIGNvbENvbnRhaW5lci5yZW5kZXJlZENvbHVtbnMgdHJhY2sgYnkgY29sLnVpZFwiIHVpLWdyaWQtb25lLWJpbmQtaWQtZ3JpZD1cInJvd1JlbmRlckluZGV4ICsgJy0nICsgY29sLnVpZCArICctY2VsbCdcIiBjbGFzcz1cInVpLWdyaWQtY2VsbFwiIG5nLWNsYXNzPVwieyAndWktZ3JpZC1yb3ctaGVhZGVyLWNlbGwnOiBjb2wuaXNSb3dIZWFkZXIgfVwiIHJvbGU9XCJ7e2NvbC5pc1Jvd0hlYWRlciA/ICdyb3doZWFkZXInIDogJ2dyaWRjZWxsJ319XCIgdWktZ3JpZC1jZWxsPjwvZGl2PiIpLGUucHV0KCJ1aS1ncmlkL3VpLWdyaWQiLCc8ZGl2IHVpLWkxOG49ImVuIiBjbGFzcz0idWktZ3JpZCI+XHgzYyEtLSBUT0RPIChjMGJyYSk6IGFkZCAic2NvcGVkIiBhdHRyIGhlcmUsIGV2ZW50dWFsbHk/IC0tXHgzZTxzdHlsZSB1aS1ncmlkLXN0eWxlPi5ncmlke3sgZ3JpZC5pZCB9fSB7XG4gICAgICAvKiBTdHlsZXMgZm9yIHRoZSBncmlkICovXG4gICAgfVxuXG4gICAgLmdyaWR7eyBncmlkLmlkIH19IC51aS1ncmlkLXJvdywgLmdyaWR7eyBncmlkLmlkIH19IC51aS1ncmlkLWNlbGwsIC5ncmlke3sgZ3JpZC5pZCB9fSAudWktZ3JpZC1jZWxsIC51aS1ncmlkLXZlcnRpY2FsLWJhciB7XG4gICAgICBoZWlnaHQ6IHt7IGdyaWQub3B0aW9ucy5yb3dIZWlnaHQgfX1weDtcbiAgICB9XG5cbiAgICAuZ3JpZHt7IGdyaWQuaWQgfX0gLnVpLWdyaWQtcm93Omxhc3QtY2hpbGQgLnVpLWdyaWQtY2VsbCB7XG4gICAgICBib3JkZXItYm90dG9tLXdpZHRoOiB7eyAoKChncmlkLmdldFZpc2libGVSb3dDb3VudCgpICogZ3JpZC5vcHRpb25zLnJvd0hlaWdodCkgPCBncmlkLmdldFZpZXdwb3J0SGVpZ2h0KCkpICYmIFwnMVwnKSB8fCBcJzBcJyB9fXB4O1xuICAgIH1cblxuICAgIHt7IGdyaWQudmVydGljYWxTY3JvbGxiYXJTdHlsZXMgfX1cbiAgICB7eyBncmlkLmhvcml6b250YWxTY3JvbGxiYXJTdHlsZXMgfX1cblxuICAgIC8qXG4gICAgLnVpLWdyaWRbZGlyPXJ0bF0gLnVpLWdyaWQtdmlld3BvcnQge1xuICAgICAgcGFkZGluZy1sZWZ0OiB7eyBncmlkLnZlcnRpY2FsU2Nyb2xsYmFyV2lkdGggfX1weDtcbiAgICB9XG4gICAgKi9cblxuICAgIHt7IGdyaWQuY3VzdG9tU3R5bGVzIH19PC9zdHlsZT48ZGl2IGNsYXNzPSJ1aS1ncmlkLWNvbnRlbnRzLXdyYXBwZXIiIHJvbGU9ImdyaWQiPjxkaXYgdWktZ3JpZC1tZW51LWJ1dHRvbiBuZy1pZj0iZ3JpZC5vcHRpb25zLmVuYWJsZUdyaWRNZW51Ij48L2Rpdj48ZGl2IG5nLWlmPSJncmlkLmhhc0xlZnRDb250YWluZXIoKSIgc3R5bGU9IndpZHRoOiAwIiB1aS1ncmlkLXBpbm5lZC1jb250YWluZXI9IlwnbGVmdFwnIj48L2Rpdj48ZGl2IHVpLWdyaWQtcmVuZGVyLWNvbnRhaW5lciBjb250YWluZXItaWQ9IlwnYm9keVwnIiBjb2wtY29udGFpbmVyLW5hbWU9IlwnYm9keVwnIiByb3ctY29udGFpbmVyLW5hbWU9IlwnYm9keVwnIiBiaW5kLXNjcm9sbC1ob3Jpem9udGFsPSJ0cnVlIiBiaW5kLXNjcm9sbC12ZXJ0aWNhbD0idHJ1ZSIgZW5hYmxlLWhvcml6b250YWwtc2Nyb2xsYmFyPSJncmlkLm9wdGlvbnMuZW5hYmxlSG9yaXpvbnRhbFNjcm9sbGJhciIgZW5hYmxlLXZlcnRpY2FsLXNjcm9sbGJhcj0iZ3JpZC5vcHRpb25zLmVuYWJsZVZlcnRpY2FsU2Nyb2xsYmFyIj48L2Rpdj48ZGl2IG5nLWlmPSJncmlkLmhhc1JpZ2h0Q29udGFpbmVyKCkiIHN0eWxlPSJ3aWR0aDogMCIgdWktZ3JpZC1waW5uZWQtY29udGFpbmVyPSJcJ3JpZ2h0XCciPjwvZGl2PjxkaXYgdWktZ3JpZC1ncmlkLWZvb3RlciBuZy1pZj0iZ3JpZC5vcHRpb25zLnNob3dHcmlkRm9vdGVyIj48L2Rpdj48ZGl2IHVpLWdyaWQtY29sdW1uLW1lbnUgbmctaWY9ImdyaWQub3B0aW9ucy5lbmFibGVDb2x1bW5NZW51cyI+PC9kaXY+PGRpdiBuZy10cmFuc2NsdWRlPjwvZGl2PjwvZGl2PjwvZGl2PicpLGUucHV0KCJ1aS1ncmlkL3VpR3JpZENlbGwiLCc8ZGl2IGNsYXNzPSJ1aS1ncmlkLWNlbGwtY29udGVudHMiIHRpdGxlPSJUT09MVElQIj57e0NPTF9GSUVMRCBDVVNUT01fRklMVEVSU319PC9kaXY+JyksZS5wdXQoInVpLWdyaWQvdWlHcmlkQ29sdW1uTWVudSIsJzxkaXYgY2xhc3M9InVpLWdyaWQtY29sdW1uLW1lbnUiPjxkaXYgdWktZ3JpZC1tZW51IG1lbnUtaXRlbXM9Im1lbnVJdGVtcyI+XHgzYyEtLSA8ZGl2IGNsYXNzPSJ1aS1ncmlkLWNvbHVtbi1tZW51Ij5cbiAgICA8ZGl2IGNsYXNzPSJpbm5lciIgbmctc2hvdz0ibWVudVNob3duIj5cbiAgICAgIDx1bD5cbiAgICAgICAgPGRpdiBuZy1zaG93PSJncmlkLm9wdGlvbnMuZW5hYmxlU29ydGluZyI+XG4gICAgICAgICAgPGxpIG5nLWNsaWNrPSJzb3J0Q29sdW1uKCRldmVudCwgYXNjKSIgbmctY2xhc3M9InsgXCdzZWxlY3RlZFwnIDogY29sLnNvcnQuZGlyZWN0aW9uID09IGFzYyB9Ij48aSBjbGFzcz0idWktZ3JpZC1pY29uLXNvcnQtYWx0LXVwIj48L2k+IFNvcnQgQXNjZW5kaW5nPC9saT5cbiAgICAgICAgICA8bGkgbmctY2xpY2s9InNvcnRDb2x1bW4oJGV2ZW50LCBkZXNjKSIgbmctY2xhc3M9InsgXCdzZWxlY3RlZFwnIDogY29sLnNvcnQuZGlyZWN0aW9uID09IGRlc2MgfSI+PGkgY2xhc3M9InVpLWdyaWQtaWNvbi1zb3J0LWFsdC1kb3duIj48L2k+IFNvcnQgRGVzY2VuZGluZzwvbGk+XG4gICAgICAgICAgPGxpIG5nLXNob3c9ImNvbC5zb3J0LmRpcmVjdGlvbiIgbmctY2xpY2s9InVuc29ydENvbHVtbigpIj48aSBjbGFzcz0idWktZ3JpZC1pY29uLWNhbmNlbCI+PC9pPiBSZW1vdmUgU29ydDwvbGk+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC91bD5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+IC0tXHgzZTwvZGl2PjwvZGl2PicpLGUucHV0KCJ1aS1ncmlkL3VpR3JpZEZvb3RlckNlbGwiLCc8ZGl2IGNsYXNzPSJ1aS1ncmlkLWNlbGwtY29udGVudHMiIGNvbC1pbmRleD0icmVuZGVySW5kZXgiPjxkaXY+e3sgY29sLmdldEFnZ3JlZ2F0aW9uVGV4dCgpICsgKCBjb2wuZ2V0QWdncmVnYXRpb25WYWx1ZSgpIENVU1RPTV9GSUxURVJTICkgfX08L2Rpdj48L2Rpdj4nKSxlLnB1dCgidWktZ3JpZC91aUdyaWRIZWFkZXJDZWxsIiwnPGRpdiByb2xlPSJjb2x1bW5oZWFkZXIiIG5nLWNsYXNzPSJ7IFwnc29ydGFibGVcJzogc29ydGFibGUsIFwndWktZ3JpZC1oZWFkZXItY2VsbC1sYXN0LWNvbFwnOiBpc0xhc3RDb2wgfSIgdWktZ3JpZC1vbmUtYmluZC1hcmlhLWxhYmVsbGVkYnktZ3JpZD0iY29sLnVpZCArIFwnLWhlYWRlci10ZXh0IFwnICsgY29sLnVpZCArIFwnLXNvcnRkaXItdGV4dFwnIiBhcmlhLXNvcnQ9Int7Y29sLnNvcnQuZGlyZWN0aW9uID09IGFzYyA/IFwnYXNjZW5kaW5nXCcgOiAoIGNvbC5zb3J0LmRpcmVjdGlvbiA9PSBkZXNjID8gXCdkZXNjZW5kaW5nXCcgOiAoIWNvbC5zb3J0LmRpcmVjdGlvbiA/IFwnbm9uZVwnIDogXCdvdGhlclwnKSl9fSI+PGRpdiByb2xlPSJidXR0b24iIHRhYmluZGV4PSIwIiBuZy1rZXlkb3duPSJoYW5kbGVLZXlEb3duKCRldmVudCkiIGNsYXNzPSJ1aS1ncmlkLWNlbGwtY29udGVudHMgdWktZ3JpZC1oZWFkZXItY2VsbC1wcmltYXJ5LWZvY3VzIiBjb2wtaW5kZXg9InJlbmRlckluZGV4IiB0aXRsZT0iVE9PTFRJUCI+PHNwYW4gY2xhc3M9InVpLWdyaWQtaGVhZGVyLWNlbGwtbGFiZWwiIHVpLWdyaWQtb25lLWJpbmQtaWQtZ3JpZD0iY29sLnVpZCArIFwnLWhlYWRlci10ZXh0XCciPnt7IGNvbC5kaXNwbGF5TmFtZSBDVVNUT01fRklMVEVSUyB9fSA8L3NwYW4+PHNwYW4gdWktZ3JpZC1vbmUtYmluZC1pZC1ncmlkPSJjb2wudWlkICsgXCctc29ydGRpci10ZXh0XCciIHVpLWdyaWQtdmlzaWJsZT0iY29sLnNvcnQuZGlyZWN0aW9uIiBhcmlhLWxhYmVsPSJ7e2dldFNvcnREaXJlY3Rpb25BcmlhTGFiZWwoKX19Ij48aSBuZy1jbGFzcz0ieyBcJ3VpLWdyaWQtaWNvbi11cC1kaXJcJzogY29sLnNvcnQuZGlyZWN0aW9uID09IGFzYywgXCd1aS1ncmlkLWljb24tZG93bi1kaXJcJzogY29sLnNvcnQuZGlyZWN0aW9uID09IGRlc2MsIFwndWktZ3JpZC1pY29uLWJsYW5rXCc6ICFjb2wuc29ydC5kaXJlY3Rpb24gfSIgdGl0bGU9Int7aXNTb3J0UHJpb3JpdHlWaXNpYmxlKCkgPyBpMThuLmhlYWRlckNlbGwucHJpb3JpdHkgKyBcJyBcJyArICggY29sLnNvcnQucHJpb3JpdHkgKyAxICkgIDogbnVsbH19IiBhcmlhLWhpZGRlbj0idHJ1ZSI+PC9pPiA8c3ViIHVpLWdyaWQtdmlzaWJsZT0iaXNTb3J0UHJpb3JpdHlWaXNpYmxlKCkiIGNsYXNzPSJ1aS1ncmlkLXNvcnQtcHJpb3JpdHktbnVtYmVyIj57e2NvbC5zb3J0LnByaW9yaXR5ICsgMX19PC9zdWI+PC9zcGFuPjwvZGl2PjxkaXYgcm9sZT0iYnV0dG9uIiB0YWJpbmRleD0iMCIgdWktZ3JpZC1vbmUtYmluZC1pZC1ncmlkPSJjb2wudWlkICsgXCctbWVudS1idXR0b25cJyIgY2xhc3M9InVpLWdyaWQtY29sdW1uLW1lbnUtYnV0dG9uIiBuZy1pZj0iZ3JpZC5vcHRpb25zLmVuYWJsZUNvbHVtbk1lbnVzICYmICFjb2wuaXNSb3dIZWFkZXIgICYmIGNvbC5jb2xEZWYuZW5hYmxlQ29sdW1uTWVudSAhPT0gZmFsc2UiIG5nLWNsaWNrPSJ0b2dnbGVNZW51KCRldmVudCkiIG5nLWtleWRvd249ImhlYWRlckNlbGxBcnJvd0tleURvd24oJGV2ZW50KSIgdWktZ3JpZC1vbmUtYmluZC1hcmlhLWxhYmVsPSJpMThuLmhlYWRlckNlbGwuYXJpYS5jb2x1bW5NZW51QnV0dG9uTGFiZWwiIGFyaWEtaGFzcG9wdXA9InRydWUiPjxpIGNsYXNzPSJ1aS1ncmlkLWljb24tYW5nbGUtZG93biIgYXJpYS1oaWRkZW49InRydWUiPiZuYnNwOzwvaT48L2Rpdj48ZGl2IHVpLWdyaWQtZmlsdGVyPjwvZGl2PjwvZGl2PicpLGUucHV0KCJ1aS1ncmlkL3VpR3JpZE1lbnUiLCc8ZGl2IGNsYXNzPSJ1aS1ncmlkLW1lbnUiIG5nLXNob3c9InNob3duIj48c3R5bGUgdWktZ3JpZC1zdHlsZT57e2R5bmFtaWNTdHlsZXN9fTwvc3R5bGU+PGRpdiBjbGFzcz0idWktZ3JpZC1tZW51LW1pZCIgbmctc2hvdz0ic2hvd25NaWQiPjxkaXYgY2xhc3M9InVpLWdyaWQtbWVudS1pbm5lciIgbmctaWY9InNob3duIj48dWwgcm9sZT0ibWVudSIgY2xhc3M9InVpLWdyaWQtbWVudS1pdGVtcyI+PGxpIG5nLXJlcGVhdD0iaXRlbSBpbiBtZW51SXRlbXMiIHJvbGU9Im1lbnVpdGVtIiB1aS1ncmlkLW1lbnUtaXRlbSB1aS1ncmlkLW9uZS1iaW5kLWlkPSJcJ21lbnVpdGVtLVwnKyRpbmRleCIgYWN0aW9uPSJpdGVtLmFjdGlvbiIgbmFtZT0iaXRlbS50aXRsZSIgYWN0aXZlPSJpdGVtLmFjdGl2ZSIgaWNvbj0iaXRlbS5pY29uIiBzaG93bj0iaXRlbS5zaG93biIgY29udGV4dD0iaXRlbS5jb250ZXh0IiB0ZW1wbGF0ZS11cmw9Iml0ZW0udGVtcGxhdGVVcmwiIGxlYXZlLW9wZW49Iml0ZW0ubGVhdmVPcGVuIiBzY3JlZW4tcmVhZGVyLW9ubHk9Iml0ZW0uc2NyZWVuUmVhZGVyT25seSI+PC9saT48L3VsPjwvZGl2PjwvZGl2PjwvZGl2PicpLGUucHV0KCJ1aS1ncmlkL3VpR3JpZE1lbnVJdGVtIiwnPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJ1aS1ncmlkLW1lbnUtaXRlbSIgbmctY2xpY2s9Iml0ZW1BY3Rpb24oJGV2ZW50LCB0aXRsZSkiIG5nLXNob3c9Iml0ZW1TaG93bigpIiBuZy1jbGFzcz0ieyBcJ3VpLWdyaWQtbWVudS1pdGVtLWFjdGl2ZVwnOiBhY3RpdmUoKSwgXCd1aS1ncmlkLXNyLW9ubHlcJzogKCFmb2N1cyAmJiBzY3JlZW5SZWFkZXJPbmx5KSB9IiBhcmlhLXByZXNzZWQ9Int7YWN0aXZlKCl9fSIgdGFiaW5kZXg9IjAiIG5nLWZvY3VzPSJmb2N1cz10cnVlIiBuZy1ibHVyPSJmb2N1cz1mYWxzZSI+PGkgbmctY2xhc3M9Imljb24iIGFyaWEtaGlkZGVuPSJ0cnVlIj4mbmJzcDsgPC9pPnt7IGxhYmVsKCkgfX08L2J1dHRvbj4nKSxlLnB1dCgidWktZ3JpZC91aUdyaWRSZW5kZXJDb250YWluZXIiLCI8ZGl2IHJvbGU9XCJwcmVzZW50YXRpb25cIiB1aS1ncmlkLW9uZS1iaW5kLWlkLWdyaWQ9XCJjb250YWluZXJJZCArICctZ3JpZC1jb250YWluZXInXCIgY2xhc3M9XCJ1aS1ncmlkLXJlbmRlci1jb250YWluZXJcIiBuZy1zdHlsZT1cInsgJ21hcmdpbi1sZWZ0JzogY29sQ29udGFpbmVyLmdldE1hcmdpbignbGVmdCcpICsgJ3B4JywgJ21hcmdpbi1yaWdodCc6IGNvbENvbnRhaW5lci5nZXRNYXJnaW4oJ3JpZ2h0JykgKyAncHgnIH1cIj5ceDNjIS0tIEFsbCBvZiB0aGVzZSBkb20gZWxlbWVudHMgYXJlIHJlcGxhY2VkIGluIHBsYWNlIC0tXHgzZTxkaXYgdWktZ3JpZC1oZWFkZXI+PC9kaXY+PGRpdiB1aS1ncmlkLXZpZXdwb3J0PjwvZGl2PjxkaXYgbmctaWY9XCJjb2xDb250YWluZXIubmVlZHNIU2Nyb2xsYmFyUGxhY2Vob2xkZXIoKVwiIGNsYXNzPVwidWktZ3JpZC1zY3JvbGxiYXItcGxhY2Vob2xkZXJcIiBuZy1zdHlsZT1cIntoZWlnaHQ6Y29sQ29udGFpbmVyLmdyaWQuc2Nyb2xsYmFySGVpZ2h0ICsgJ3B4J31cIj48L2Rpdj48dWktZ3JpZC1mb290ZXIgbmctaWY9XCJncmlkLm9wdGlvbnMuc2hvd0NvbHVtbkZvb3RlclwiPjwvdWktZ3JpZC1mb290ZXI+PC9kaXY+IiksZS5wdXQoInVpLWdyaWQvdWlHcmlkVmlld3BvcnQiLCc8ZGl2IHJvbGU9InJvd2dyb3VwIiBjbGFzcz0idWktZ3JpZC12aWV3cG9ydCIgbmctc3R5bGU9ImNvbENvbnRhaW5lci5nZXRWaWV3cG9ydFN0eWxlKCkiPlx4M2MhLS0gdGJvZHkgLS1ceDNlPGRpdiBjbGFzcz0idWktZ3JpZC1jYW52YXMiPjxkaXYgbmctcmVwZWF0PSIocm93UmVuZGVySW5kZXgsIHJvdykgaW4gcm93Q29udGFpbmVyLnJlbmRlcmVkUm93cyB0cmFjayBieSAkaW5kZXgiIGNsYXNzPSJ1aS1ncmlkLXJvdyIgbmctc3R5bGU9IlZpZXdwb3J0LnJvd1N0eWxlKHJvd1JlbmRlckluZGV4KSI+PGRpdiByb2xlPSJyb3ciIHVpLWdyaWQtcm93PSJyb3ciIHJvdy1yZW5kZXItaW5kZXg9InJvd1JlbmRlckluZGV4Ij48L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj4nKSxlLnB1dCgidWktZ3JpZC9jZWxsRWRpdG9yIiwnPGRpdj48Zm9ybSBuYW1lPSJpbnB1dEZvcm0iPjxpbnB1dCB0eXBlPSJJTlBVVF9UWVBFIiBuZy1jbGFzcz0iXCdjb2x0XCcgKyBjb2wudWlkIiB1aS1ncmlkLWVkaXRvciBuZy1tb2RlbD0iTU9ERUxfQ09MX0ZJRUxEIj48L2Zvcm0+PC9kaXY+JyksZS5wdXQoInVpLWdyaWQvZHJvcGRvd25FZGl0b3IiLCc8ZGl2Pjxmb3JtIG5hbWU9ImlucHV0Rm9ybSI+PHNlbGVjdCBuZy1jbGFzcz0iXCdjb2x0XCcgKyBjb2wudWlkIiB1aS1ncmlkLWVkaXQtZHJvcGRvd24gbmctbW9kZWw9Ik1PREVMX0NPTF9GSUVMRCIgbmctb3B0aW9ucz0iZmllbGRbZWRpdERyb3Bkb3duSWRMYWJlbF0gYXMgZmllbGRbZWRpdERyb3Bkb3duVmFsdWVMYWJlbF0gQ1VTVE9NX0ZJTFRFUlMgZm9yIGZpZWxkIGluIGVkaXREcm9wZG93bk9wdGlvbnNBcnJheSI+PC9zZWxlY3Q+PC9mb3JtPjwvZGl2PicpLGUucHV0KCJ1aS1ncmlkL2ZpbGVDaG9vc2VyRWRpdG9yIiwnPGRpdj48Zm9ybSBuYW1lPSJpbnB1dEZvcm0iPjxpbnB1dCBuZy1jbGFzcz0iXCdjb2x0XCcgKyBjb2wudWlkIiB1aS1ncmlkLWVkaXQtZmlsZS1jaG9vc2VyIHR5cGU9ImZpbGUiIGlkPSJmaWxlcyIgbmFtZT0iZmlsZXNbXSIgbmctbW9kZWw9Ik1PREVMX0NPTF9GSUVMRCI+PC9mb3JtPjwvZGl2PicpLGUucHV0KCJ1aS1ncmlkL2VtcHR5QmFzZUxheWVyQ29udGFpbmVyIiwnPGRpdiBjbGFzcz0idWktZ3JpZC1lbXB0eS1iYXNlLWxheWVyLWNvbnRhaW5lciB1aS1ncmlkLWNhbnZhcyI+PGRpdiBjbGFzcz0idWktZ3JpZC1yb3ciIG5nLXJlcGVhdD0iKHJvd1JlbmRlckluZGV4LCByb3cpIGluIGdyaWQuYmFzZUxheWVyLmVtcHR5Um93cyB0cmFjayBieSAkaW5kZXgiIG5nLXN0eWxlPSJWaWV3cG9ydC5yb3dTdHlsZShyb3dSZW5kZXJJbmRleCkiPjxkaXY+PGRpdj48ZGl2IG5nLXJlcGVhdD0iKGNvbFJlbmRlckluZGV4LCBjb2wpIGluIGNvbENvbnRhaW5lci5yZW5kZXJlZENvbHVtbnMgdHJhY2sgYnkgY29sLmNvbERlZi5uYW1lIiBjbGFzcz0idWktZ3JpZC1jZWxsIHt7IGNvbC5nZXRDb2xDbGFzcyhmYWxzZSkgfX0iPjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PicpLGUucHV0KCJ1aS1ncmlkL2V4cGFuZGFibGVSb3ciLCc8ZGl2IHVpLWdyaWQtZXhwYW5kYWJsZS1yb3cgbmctaWY9ImV4cGFuZGFibGVSb3cuc2hvdWxkUmVuZGVyRXhwYW5kKCkiIGNsYXNzPSJleHBhbmRhYmxlUm93IiBzdHlsZT0iZmxvYXQ6bGVmdDsgbWFyZ2luLXRvcDogMXB4OyBtYXJnaW4tYm90dG9tOiAxcHgiIG5nLXN0eWxlPSJ7d2lkdGg6IChncmlkLnJlbmRlckNvbnRhaW5lcnMuYm9keS5nZXRDYW52YXNXaWR0aCgpKSArIFwncHhcJywgaGVpZ2h0OiByb3cuZXhwYW5kZWRSb3dIZWlnaHQgKyBcJ3B4XCd9Ij48L2Rpdj4nKSxlLnB1dCgidWktZ3JpZC9leHBhbmRhYmxlUm93SGVhZGVyIiwnPGRpdiBjbGFzcz0idWktZ3JpZC1yb3ctaGVhZGVyLWNlbGwgdWktZ3JpZC1leHBhbmRhYmxlLWJ1dHRvbnMtY2VsbCI+PGRpdiBjbGFzcz0idWktZ3JpZC1jZWxsLWNvbnRlbnRzIj48aSBuZy1pZj0iIShyb3cuZ3JvdXBIZWFkZXI9PXRydWUgfHwgcm93LmVudGl0eS5zdWJHcmlkT3B0aW9ucy5kaXNhYmxlUm93RXhwYW5kYWJsZSkiIG5nLWNsYXNzPSJ7IFwndWktZ3JpZC1pY29uLXBsdXMtc3F1YXJlZFwnIDogIXJvdy5pc0V4cGFuZGVkLCBcJ3VpLWdyaWQtaWNvbi1taW51cy1zcXVhcmVkXCcgOiByb3cuaXNFeHBhbmRlZCB9IiBuZy1jbGljaz0iZ3JpZC5hcGkuZXhwYW5kYWJsZS50b2dnbGVSb3dFeHBhbnNpb24ocm93LmVudGl0eSkiPjwvaT48L2Rpdj48L2Rpdj4nKSxlLnB1dCgidWktZ3JpZC9leHBhbmRhYmxlU2Nyb2xsRmlsbGVyIiwiPGRpdiBuZy1pZj1cImV4cGFuZGFibGVSb3cuc2hvdWxkUmVuZGVyRmlsbGVyKClcIiBuZy1jbGFzcz1cIntzY3JvbGxGaWxsZXI6dHJ1ZSwgc2Nyb2xsRmlsbGVyQ2xhc3M6KGNvbENvbnRhaW5lci5uYW1lID09PSAnYm9keScpfVwiIG5nLXN0eWxlPVwieyB3aWR0aDogKGdyaWQuZ2V0Vmlld3BvcnRXaWR0aCgpKSArICdweCcsIGhlaWdodDogcm93LmV4cGFuZGVkUm93SGVpZ2h0ICsgMiArICdweCcsICdtYXJnaW4tbGVmdCc6IGdyaWQub3B0aW9ucy5yb3dIZWFkZXIucm93SGVhZGVyV2lkdGggKyAncHgnIH1cIj48aSBjbGFzcz1cInVpLWdyaWQtaWNvbi1zcGluNSB1aS1ncmlkLWFuaW1hdGUtc3BpblwiIG5nLXN0eWxlPVwieydtYXJnaW4tdG9wJzogKCByb3cuZXhwYW5kZWRSb3dIZWlnaHQvMiAtIDUpICsgJ3B4JywgJ21hcmdpbi1sZWZ0JyA6ICgoZ3JpZC5nZXRWaWV3cG9ydFdpZHRoKCkgLSBncmlkLm9wdGlvbnMucm93SGVhZGVyLnJvd0hlYWRlcldpZHRoKS8yIC0gNSkgKyAncHgnfVwiPjwvaT48L2Rpdj4iKSxlLnB1dCgidWktZ3JpZC9leHBhbmRhYmxlVG9wUm93SGVhZGVyIiwnPGRpdiBjbGFzcz0idWktZ3JpZC1yb3ctaGVhZGVyLWNlbGwgdWktZ3JpZC1leHBhbmRhYmxlLWJ1dHRvbnMtY2VsbCI+PGRpdiBjbGFzcz0idWktZ3JpZC1jZWxsLWNvbnRlbnRzIj48c3BhbiBjbGFzcz0idWktZ3JpZC1jZWxsLWVtcHR5IiBuZy1pZj0iIWdyaWQub3B0aW9ucy5zaG93RXhwYW5kQWxsQnV0dG9uIj48L3NwYW4+IDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0idWktZ3JpZC1pY29uLWJ1dHRvbiIgbmctaWY9ImdyaWQub3B0aW9ucy5zaG93RXhwYW5kQWxsQnV0dG9uIiBuZy1jbGFzcz0ieyBcJ3VpLWdyaWQtaWNvbi1wbHVzLXNxdWFyZWRcJyA6ICFncmlkLmV4cGFuZGFibGUuZXhwYW5kZWRBbGwsIFwndWktZ3JpZC1pY29uLW1pbnVzLXNxdWFyZWRcJyA6IGdyaWQuZXhwYW5kYWJsZS5leHBhbmRlZEFsbCB9IiBuZy1jbGljaz0iZ3JpZC5hcGkuZXhwYW5kYWJsZS50b2dnbGVBbGxSb3dzKCkiPjwvYnV0dG9uPjwvZGl2PjwvZGl2PicpLGUucHV0KCJ1aS1ncmlkL2NzdkxpbmsiLCc8c3BhbiBjbGFzcz0idWktZ3JpZC1leHBvcnRlci1jc3YtbGluay1zcGFuIj48YSBocmVmPSJkYXRhOnRleHQvY3N2O2NoYXJzZXQ9VVRGLTgsQ1NWX0NPTlRFTlQiIGRvd25sb2FkPSJGSUxFX05BTUUiPkxJTktfTEFCRUw8L2E+PC9zcGFuPicpLGUucHV0KCJ1aS1ncmlkL2ltcG9ydGVyTWVudUl0ZW0iLCc8bGkgY2xhc3M9InVpLWdyaWQtbWVudS1pdGVtIj48Zm9ybT48aW5wdXQgY2xhc3M9InVpLWdyaWQtaW1wb3J0ZXItZmlsZS1jaG9vc2VyIiB0eXBlPSJmaWxlIiBpZD0iZmlsZXMiIG5hbWU9ImZpbGVzW10iPjwvZm9ybT48L2xpPicpLGUucHV0KCJ1aS1ncmlkL2ltcG9ydGVyTWVudUl0ZW1Db250YWluZXIiLCI8ZGl2IHVpLWdyaWQtaW1wb3J0ZXItbWVudS1pdGVtPjwvZGl2PiIpLGUucHV0KCJ1aS1ncmlkL3BhZ2luYXRpb24iLCc8ZGl2IGNsYXNzPSJ1aS1ncmlkLXBhZ2VyLXBhbmVsIiB1aS1ncmlkLXBhZ2VyIG5nLXNob3c9ImdyaWQub3B0aW9ucy5lbmFibGVQYWdpbmF0aW9uQ29udHJvbHMiPjxkaXYgcm9sZT0ibmF2aWdhdGlvbiIgY2xhc3M9InVpLWdyaWQtcGFnZXItY29udGFpbmVyIj48ZGl2IGNsYXNzPSJ1aS1ncmlkLXBhZ2VyLWNvbnRyb2wiPjxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0idWktZ3JpZC1wYWdlci1maXJzdCIgdWktZ3JpZC1vbmUtYmluZC10aXRsZT0iYXJpYS5wYWdlVG9GaXJzdCIgdWktZ3JpZC1vbmUtYmluZC1hcmlhLWxhYmVsPSJhcmlhLnBhZ2VUb0ZpcnN0IiBuZy1jbGljaz0icGFnZUZpcnN0UGFnZUNsaWNrKCkiIG5nLWRpc2FibGVkPSJjYW50UGFnZUJhY2t3YXJkKCkiPjxkaXYgbmctY2xhc3M9ImdyaWQuaXNSVEwoKSA/IFwnbGFzdC10cmlhbmdsZVwnIDogXCdmaXJzdC10cmlhbmdsZVwnIj48ZGl2IG5nLWNsYXNzPSJncmlkLmlzUlRMKCkgPyBcJ2xhc3QtYmFyLXJ0bFwnIDogXCdmaXJzdC1iYXJcJyI+PC9kaXY+PC9kaXY+PC9idXR0b24+IDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0idWktZ3JpZC1wYWdlci1wcmV2aW91cyIgdWktZ3JpZC1vbmUtYmluZC10aXRsZT0iYXJpYS5wYWdlQmFjayIgdWktZ3JpZC1vbmUtYmluZC1hcmlhLWxhYmVsPSJhcmlhLnBhZ2VCYWNrIiBuZy1jbGljaz0icGFnZVByZXZpb3VzUGFnZUNsaWNrKCkiIG5nLWRpc2FibGVkPSJjYW50UGFnZUJhY2t3YXJkKCkiPjxkaXYgbmctY2xhc3M9ImdyaWQuaXNSVEwoKSA/IFwnbGFzdC10cmlhbmdsZSBwcmV2LXRyaWFuZ2xlXCcgOiBcJ2ZpcnN0LXRyaWFuZ2xlIHByZXYtdHJpYW5nbGVcJyI+PC9kaXY+PC9idXR0b24+IDxpbnB1dCB0eXBlPSJudW1iZXIiIHVpLWdyaWQtb25lLWJpbmQtdGl0bGU9ImFyaWEucGFnZVNlbGVjdGVkIiB1aS1ncmlkLW9uZS1iaW5kLWFyaWEtbGFiZWw9ImFyaWEucGFnZVNlbGVjdGVkIiBjbGFzcz0idWktZ3JpZC1wYWdlci1jb250cm9sLWlucHV0IiBuZy1tb2RlbD0iZ3JpZC5vcHRpb25zLnBhZ2luYXRpb25DdXJyZW50UGFnZSIgbWluPSIxIiBtYXg9Int7IHBhZ2luYXRpb25BcGkuZ2V0VG90YWxQYWdlcygpIH19IiBzdGVwPSIxIiByZXF1aXJlZD4gPHNwYW4gY2xhc3M9InVpLWdyaWQtcGFnZXItbWF4LXBhZ2VzLW51bWJlciIgbmctc2hvdz0icGFnaW5hdGlvbkFwaS5nZXRUb3RhbFBhZ2VzKCkgPiAwIj48YWJiciB1aS1ncmlkLW9uZS1iaW5kLXRpdGxlPSJwYWdpbmF0aW9uT2YiPi8gPC9hYmJyPnt7IHBhZ2luYXRpb25BcGkuZ2V0VG90YWxQYWdlcygpIH19IDwvc3Bhbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9InVpLWdyaWQtcGFnZXItbmV4dCIgdWktZ3JpZC1vbmUtYmluZC10aXRsZT0iYXJpYS5wYWdlRm9yd2FyZCIgdWktZ3JpZC1vbmUtYmluZC1hcmlhLWxhYmVsPSJhcmlhLnBhZ2VGb3J3YXJkIiBuZy1jbGljaz0icGFnZU5leHRQYWdlQ2xpY2soKSIgbmctZGlzYWJsZWQ9ImNhbnRQYWdlRm9yd2FyZCgpIj48ZGl2IG5nLWNsYXNzPSJncmlkLmlzUlRMKCkgPyBcJ2ZpcnN0LXRyaWFuZ2xlIG5leHQtdHJpYW5nbGVcJyA6IFwnbGFzdC10cmlhbmdsZSBuZXh0LXRyaWFuZ2xlXCciPjwvZGl2PjwvYnV0dG9uPiA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9InVpLWdyaWQtcGFnZXItbGFzdCIgdWktZ3JpZC1vbmUtYmluZC10aXRsZT0iYXJpYS5wYWdlVG9MYXN0IiB1aS1ncmlkLW9uZS1iaW5kLWFyaWEtbGFiZWw9ImFyaWEucGFnZVRvTGFzdCIgbmctY2xpY2s9InBhZ2VMYXN0UGFnZUNsaWNrKCkiIG5nLWRpc2FibGVkPSJjYW50UGFnZVRvTGFzdCgpIj48ZGl2IG5nLWNsYXNzPSJncmlkLmlzUlRMKCkgPyBcJ2ZpcnN0LXRyaWFuZ2xlXCcgOiBcJ2xhc3QtdHJpYW5nbGVcJyI+PGRpdiBuZy1jbGFzcz0iZ3JpZC5pc1JUTCgpID8gXCdmaXJzdC1iYXItcnRsXCcgOiBcJ2xhc3QtYmFyXCciPjwvZGl2PjwvZGl2PjwvYnV0dG9uPjwvZGl2PjxkaXYgY2xhc3M9InVpLWdyaWQtcGFnZXItcm93LWNvdW50LXBpY2tlciIgbmctaWY9ImdyaWQub3B0aW9ucy5wYWdpbmF0aW9uUGFnZVNpemVzLmxlbmd0aCA+IDEgJiYgIWdyaWQub3B0aW9ucy51c2VDdXN0b21QYWdpbmF0aW9uIj48c2VsZWN0IHVpLWdyaWQtb25lLWJpbmQtYXJpYS1sYWJlbGxlZGJ5LWdyaWQ9IlwnaXRlbXMtcGVyLXBhZ2UtbGFiZWxcJyIgbmctbW9kZWw9ImdyaWQub3B0aW9ucy5wYWdpbmF0aW9uUGFnZVNpemUiIG5nLW9wdGlvbnM9Im8gYXMgbyBmb3IgbyBpbiBncmlkLm9wdGlvbnMucGFnaW5hdGlvblBhZ2VTaXplcyI+PC9zZWxlY3Q+PHNwYW4gdWktZ3JpZC1vbmUtYmluZC1pZC1ncmlkPSJcJ2l0ZW1zLXBlci1wYWdlLWxhYmVsXCciIGNsYXNzPSJ1aS1ncmlkLXBhZ2VyLXJvdy1jb3VudC1sYWJlbCI+Jm5ic3A7e3tzaXplc0xhYmVsfX08L3NwYW4+PC9kaXY+PHNwYW4gbmctaWY9ImdyaWQub3B0aW9ucy5wYWdpbmF0aW9uUGFnZVNpemVzLmxlbmd0aCA8PSAxIiBjbGFzcz0idWktZ3JpZC1wYWdlci1yb3ctY291bnQtbGFiZWwiPnt7Z3JpZC5vcHRpb25zLnBhZ2luYXRpb25QYWdlU2l6ZX19Jm5ic3A7e3tzaXplc0xhYmVsfX08L3NwYW4+PC9kaXY+PGRpdiBjbGFzcz0idWktZ3JpZC1wYWdlci1jb3VudC1jb250YWluZXIiPjxkaXYgY2xhc3M9InVpLWdyaWQtcGFnZXItY291bnQiPjxzcGFuIG5nLXNob3c9ImdyaWQub3B0aW9ucy50b3RhbEl0ZW1zID4gMCI+e3sgMSArIHBhZ2luYXRpb25BcGkuZ2V0Rmlyc3RSb3dJbmRleCgpIH19IDxhYmJyIHVpLWdyaWQtb25lLWJpbmQtdGl0bGU9InBhZ2luYXRpb25UaHJvdWdoIj4tIDwvYWJicj57eyAxICsgcGFnaW5hdGlvbkFwaS5nZXRMYXN0Um93SW5kZXgoKSB9fSB7e3BhZ2luYXRpb25PZn19IHt7Z3JpZC5vcHRpb25zLnRvdGFsSXRlbXN9fSB7e3RvdGFsSXRlbXNMYWJlbH19PC9zcGFuPjwvZGl2PjwvZGl2PjwvZGl2PicpLGUucHV0KCJ1aS1ncmlkL2NvbHVtblJlc2l6ZXIiLCc8ZGl2IHVpLWdyaWQtY29sdW1uLXJlc2l6ZXIgbmctaWY9ImdyaWQub3B0aW9ucy5lbmFibGVDb2x1bW5SZXNpemluZyIgY2xhc3M9InVpLWdyaWQtY29sdW1uLXJlc2l6ZXIiIGNvbD0iY29sIiBwb3NpdGlvbj0icmlnaHQiIHJlbmRlci1pbmRleD0icmVuZGVySW5kZXgiIHVuc2VsZWN0YWJsZT0ib24iPjwvZGl2PicpLGUucHV0KCJ1aS1ncmlkL2dyaWRGb290ZXJTZWxlY3RlZEl0ZW1zIiwnPHNwYW4gbmctaWY9ImdyaWQuc2VsZWN0aW9uLnNlbGVjdGVkQ291bnQgIT09IDAgJiYgZ3JpZC5vcHRpb25zLmVuYWJsZUZvb3RlclRvdGFsU2VsZWN0ZWQiPih7eyJzZWFyY2guc2VsZWN0ZWRJdGVtcyIgfCB0fX0ge3tncmlkLnNlbGVjdGlvbi5zZWxlY3RlZENvdW50fX0pPC9zcGFuPicpLGUucHV0KCJ1aS1ncmlkL3NlbGVjdGlvbkhlYWRlckNlbGwiLCc8ZGl2Plx4M2MhLS0gPGRpdiBjbGFzcz0idWktZ3JpZC12ZXJ0aWNhbC1iYXIiPiZuYnNwOzwvZGl2PiAtLVx4M2U8ZGl2IGNsYXNzPSJ1aS1ncmlkLWNlbGwtY29udGVudHMiIGNvbC1pbmRleD0icmVuZGVySW5kZXgiPjx1aS1ncmlkLXNlbGVjdGlvbi1zZWxlY3QtYWxsLWJ1dHRvbnMgbmctaWY9ImdyaWQub3B0aW9ucy5lbmFibGVTZWxlY3RBbGwiIHJvbGU9ImNoZWNrYm94IiBuZy1tb2RlbD0iZ3JpZC5zZWxlY3Rpb24uc2VsZWN0QWxsIj48L3VpLWdyaWQtc2VsZWN0aW9uLXNlbGVjdC1hbGwtYnV0dG9ucz48L2Rpdj48L2Rpdj4nKSxlLnB1dCgidWktZ3JpZC9zZWxlY3Rpb25Sb3dIZWFkZXIiLCc8ZGl2IGNsYXNzPSJ1aS1ncmlkLWNlbGwtY29udGVudHMgdWktZ3JpZC1kaXNhYmxlLXNlbGVjdGlvbiI+PHVpLWdyaWQtc2VsZWN0aW9uLXJvdy1oZWFkZXItYnV0dG9ucz48L3VpLWdyaWQtc2VsZWN0aW9uLXJvdy1oZWFkZXItYnV0dG9ucz48L2Rpdj4nKSxlLnB1dCgidWktZ3JpZC9zZWxlY3Rpb25Sb3dIZWFkZXJCdXR0b25zIiwnPGRpdiBjbGFzcz0idWktZ3JpZC1zZWxlY3Rpb24tcm93LWhlYWRlci1idXR0b25zIHVpLWdyaWQtaWNvbi1vayIgbmctY2xhc3M9IntcJ3VpLWdyaWQtcm93LXNlbGVjdGVkXCc6IHJvdy5pc1NlbGVjdGVkfSIgbmctY2xpY2s9InNlbGVjdEJ1dHRvbkNsaWNrKHJvdywgJGV2ZW50KSIgbmcta2V5ZG93bj0ic2VsZWN0QnV0dG9uS2V5RG93bihyb3csICRldmVudCkiIHJvbGU9ImNoZWNrYm94IiBuZy1tb2RlbD0icm93LmlzU2VsZWN0ZWQiPiZuYnNwOzwvZGl2PicpLGUucHV0KCJ1aS1ncmlkL3NlbGVjdGlvblNlbGVjdEFsbEJ1dHRvbnMiLCc8ZGl2IHJvbGU9ImJ1dHRvbiIgY2xhc3M9InVpLWdyaWQtc2VsZWN0aW9uLXJvdy1oZWFkZXItYnV0dG9ucyB1aS1ncmlkLWljb24tb2siIG5nLWNsYXNzPSJ7XCd1aS1ncmlkLWFsbC1zZWxlY3RlZFwnOiBncmlkLnNlbGVjdGlvbi5zZWxlY3RBbGx9IiBuZy1jbGljaz0iaGVhZGVyQnV0dG9uQ2xpY2soJGV2ZW50KSIgbmcta2V5ZG93bj0iaGVhZGVyQnV0dG9uS2V5RG93bigkZXZlbnQpIj48L2Rpdj4nKSxlLnB1dCgidWktZ3JpZC90cmVlQmFzZUV4cGFuZEFsbEJ1dHRvbnMiLCc8ZGl2IGNsYXNzPSJ1aS1ncmlkLXRyZWUtYmFzZS1yb3ctaGVhZGVyLWJ1dHRvbnMiIG5nLWNsYXNzPSJoZWFkZXJCdXR0b25DbGFzcygpIiBuZy1jbGljaz0iaGVhZGVyQnV0dG9uQ2xpY2soJGV2ZW50KSI+PC9kaXY+JyksZS5wdXQoInVpLWdyaWQvdHJlZUJhc2VIZWFkZXJDZWxsIiwnPGRpdj48ZGl2IGNsYXNzPSJ1aS1ncmlkLWNlbGwtY29udGVudHMiIGNvbC1pbmRleD0icmVuZGVySW5kZXgiPjx1aS1ncmlkLXRyZWUtYmFzZS1leHBhbmQtYWxsLWJ1dHRvbnMgbmctaWY9ImdyaWQub3B0aW9ucy5lbmFibGVFeHBhbmRBbGwiPjwvdWktZ3JpZC10cmVlLWJhc2UtZXhwYW5kLWFsbC1idXR0b25zPjwvZGl2PjwvZGl2PicpLGUucHV0KCJ1aS1ncmlkL3RyZWVCYXNlUm93SGVhZGVyIiwnPGRpdiBjbGFzcz0idWktZ3JpZC1jZWxsLWNvbnRlbnRzIj48dWktZ3JpZC10cmVlLWJhc2Utcm93LWhlYWRlci1idXR0b25zPjwvdWktZ3JpZC10cmVlLWJhc2Utcm93LWhlYWRlci1idXR0b25zPjwvZGl2PicpLGUucHV0KCJ1aS1ncmlkL3RyZWVCYXNlUm93SGVhZGVyQnV0dG9ucyIsJzxkaXYgY2xhc3M9InVpLWdyaWQtdHJlZS1iYXNlLXJvdy1oZWFkZXItYnV0dG9ucyIgbmctY2xhc3M9IntcJ3VpLWdyaWQtdHJlZS1iYXNlLWhlYWRlclwnOiByb3cudHJlZUxldmVsID4gLTEgfSIgbmctY2xpY2s9InRyZWVCdXR0b25DbGljayhyb3csICRldmVudCkiPjxpIG5nLWNsYXNzPSJ0cmVlQnV0dG9uQ2xhc3Mocm93KSIgbmctc3R5bGU9IntcJ3BhZGRpbmctbGVmdFwnOiBncmlkLm9wdGlvbnMudHJlZUluZGVudCAqIHJvdy50cmVlTGV2ZWwgKyBcJ3B4XCd9Ij48L2k+ICZuYnNwOzwvZGl2PicpLGUucHV0KCJ1aS1ncmlkL2NlbGxUaXRsZVZhbGlkYXRvciIsJzxkaXYgY2xhc3M9InVpLWdyaWQtY2VsbC1jb250ZW50cyIgbmctY2xhc3M9IntpbnZhbGlkOmdyaWQudmFsaWRhdGUuaXNJbnZhbGlkKHJvdy5lbnRpdHksY29sLmNvbERlZil9IiB0aXRsZT0ie3tncmlkLnZhbGlkYXRlLmdldFRpdGxlRm9ybWF0dGVkRXJyb3JzKHJvdy5lbnRpdHksY29sLmNvbERlZil9fSI+e3tDT0xfRklFTEQgQ1VTVE9NX0ZJTFRFUlN9fTwvZGl2PicpLGUucHV0KCJ1aS1ncmlkL2NlbGxUb29sdGlwVmFsaWRhdG9yIiwnPGRpdiBjbGFzcz0idWktZ3JpZC1jZWxsLWNvbnRlbnRzIiBuZy1jbGFzcz0ie2ludmFsaWQ6Z3JpZC52YWxpZGF0ZS5pc0ludmFsaWQocm93LmVudGl0eSxjb2wuY29sRGVmKX0iIHRvb2x0aXAtaHRtbC11bnNhZmU9Int7Z3JpZC52YWxpZGF0ZS5nZXRGb3JtYXR0ZWRFcnJvcnMocm93LmVudGl0eSxjb2wuY29sRGVmKX19IiB0b29sdGlwLWVuYWJsZT0iZ3JpZC52YWxpZGF0ZS5pc0ludmFsaWQocm93LmVudGl0eSxjb2wuY29sRGVmKSIgdG9vbHRpcC1hcHBlbmQtdG8tYm9keT0idHJ1ZSIgdG9vbHRpcC1wbGFjZW1lbnQ9InRvcCIgdGl0bGU9IlRPT0xUSVAiPnt7Q09MX0ZJRUxEIENVU1RPTV9GSUxURVJTfX08L2Rpdj4nKX1dKTsKZnVuY3Rpb24gTWV0cmlrYVByb3RvdHlwZSgpe3ZhciBlPXRoaXM7ZS5maXJlRXZlbnQ9ZnVuY3Rpb24oZSl7Y29uc29sZS53YXJuKCJbIitlKyJdIFlvdSBzaG91bGQgcHJvdmlkZSBjb3VudGVyIGlkIHRvIHVzZSBZYW5kZXggbWV0cmlrYSBldmVudHMiKX0sZS5oaXQ9ZnVuY3Rpb24oZSxuKXtjb25zb2xlLndhcm4oIlsiK2UrIl0gWW91IHNob3VsZCBwcm92aWRlIGNvdW50ZXIgaWQgdG8gdXNlIFlhbmRleCBtZXRyaWthIGV2ZW50cyIpfX1mdW5jdGlvbiBNZXRyaWthKCl7ZnVuY3Rpb24gZSgpe2lmKCFjb3VudGVyQ29uZmlnLmlkKXJldHVybiB2b2lkIGNvbnNvbGUud2FybigiWW91IHNob3VsZCBwcm92aWRlIGNvdW50ZXIgaWQgdG8gdXNlIFlhbmRleCBtZXRyaWthIGNvdW50ZXIiKTt2YXIgZT0ieWFuZGV4X21ldHJpa2FfY2FsbGJhY2tzIjt3aW5kb3dbZV09d2luZG93W2VdfHxbXSx3aW5kb3dbZV0ucHVzaChmdW5jdGlvbigpe3RyeXt3aW5kb3dbby5jb3VudGVyTmFtZV09bmV3IFlhLk1ldHJpa2EoY291bnRlckNvbmZpZyl9Y2F0Y2goZSl7fX0pO3ZhciBuPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJzY3JpcHQiKVswXSx0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpLHI9ZnVuY3Rpb24oKXtuLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHQsbil9O3JldHVybiB0LnR5cGU9InRleHQvamF2YXNjcmlwdCIsdC5hc3luYz0hMCx0LnNyYz0iaHR0cHM6Ly9tYy55YW5kZXgucnUvbWV0cmlrYS93YXRjaC5qcyIsIltvYmplY3QgT3BlcmFdIj09d2luZG93Lm9wZXJhP2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLHIsITEpOnIoKSxlfWZ1bmN0aW9uIG4oZSl7d2luZG93W28uY291bnRlck5hbWVdJiZ3aW5kb3dbby5jb3VudGVyTmFtZV0ucmVhY2hHb2FsP3dpbmRvd1tvLmNvdW50ZXJOYW1lXS5yZWFjaEdvYWwoZSk6Y29uc29sZS53YXJuKCJFdmVudCB3aXRoIHR5cGUgWyIrZSsiXSBjYW4ndCBiZSBmaXJlZCBiZWNhdXNlIGNvdW50ZXIgaXMgc3RpbGwgbG9hZGluZyIpfWZ1bmN0aW9uIHQoZSxuKXt3aW5kb3dbby5jb3VudGVyTmFtZV0mJndpbmRvd1tvLmNvdW50ZXJOYW1lXS5yZWFjaEdvYWw/d2luZG93W28uY291bnRlck5hbWVdLmhpdChlLG4pOmNvbnNvbGUud2FybigiSGl0IGZvciBwYWdlIFsiK2UrIl0gY2FuJ3QgYmUgZmlyZWQgYmVjYXVzZSBjb3VudGVyIGlzIHN0aWxsIGxvYWRpbmciKX12YXIgbz10aGlzO28uY291bnRlck5hbWU9InlhQ291bnRlciIrY291bnRlckNvbmZpZy5pZCxvLiRpbnNlcnRNZXRyaWthPWUsY291bnRlckNvbmZpZy5pZCYmKG8uZmlyZUV2ZW50PW4sby5oaXQ9dCl9ZnVuY3Rpb24gTWV0cmlrYVByb3ZpZGVyKCl7cmV0dXJue2NvbmZpZ3VyZUNvdW50ZXI6ZnVuY3Rpb24oZSl7YW5ndWxhci5leHRlbmQoY291bnRlckNvbmZpZyxlKX0sJGdldDpmdW5jdGlvbigpe3JldHVybiBuZXcgTWV0cmlrYX19fXZhciBjb3VudGVyQ29uZmlnPXtjbGlja21hcDohMCx0cmFja0xpbmtzOiEwLGFjY3VyYXRlVHJhY2tCb3VuY2U6ITAsd2Vidmlzb3I6ITEsdHJhY2tIYXNoOiEwLHV0OiJub2luZGV4In07TWV0cmlrYS5wcm90b3R5cGU9TWV0cmlrYVByb3RvdHlwZTt2YXIgbW9kdWxlPWFuZ3VsYXIubW9kdWxlKCJ5YW5kZXgtbWV0cmlrYSIsW10pO21vZHVsZS5wcm92aWRlcigiJG1ldHJpa2EiLE1ldHJpa2FQcm92aWRlciksbW9kdWxlLnJ1bihbIiRtZXRyaWthIixmdW5jdGlvbihlKXtlLiRpbnNlcnRNZXRyaWthKCl9XSk7CiFmdW5jdGlvbih0LGUpeyJvYmplY3QiPT10eXBlb2YgZXhwb3J0cyYmIm9iamVjdCI9PXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9ZShyZXF1aXJlKCJhbmd1bGFyIikpOiJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFsiYW5ndWxhciJdLGUpOiJvYmplY3QiPT10eXBlb2YgZXhwb3J0cz9leHBvcnRzWyJuZy10YWJsZSJdPWUocmVxdWlyZSgiYW5ndWxhciIpKTp0WyJuZy10YWJsZSJdPWUodC5hbmd1bGFyKX0odGhpcyxmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShyKXtpZihuW3JdKXJldHVybiBuW3JdLmV4cG9ydHM7dmFyIGk9bltyXT17aTpyLGw6ITEsZXhwb3J0czp7fX07cmV0dXJuIHRbcl0uY2FsbChpLmV4cG9ydHMsaSxpLmV4cG9ydHMsZSksaS5sPSEwLGkuZXhwb3J0c312YXIgbj17fTtyZXR1cm4gZS5tPXQsZS5jPW4sZS5pPWZ1bmN0aW9uKHQpe3JldHVybiB0fSxlLmQ9ZnVuY3Rpb24odCxuLHIpe2Uubyh0LG4pfHxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLHtjb25maWd1cmFibGU6ITEsZW51bWVyYWJsZTohMCxnZXQ6cn0pfSxlLm49ZnVuY3Rpb24odCl7dmFyIG49dCYmdC5fX2VzTW9kdWxlP2Z1bmN0aW9uKCl7cmV0dXJuIHQuZGVmYXVsdH06ZnVuY3Rpb24oKXtyZXR1cm4gdH07cmV0dXJuIGUuZChuLCJhIixuKSxufSxlLm89ZnVuY3Rpb24odCxlKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsZSl9LGUucD0iIixlKGUucz00NCl9KFtmdW5jdGlvbihlLG4pe2UuZXhwb3J0cz10fSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciByPW4oMCksaT0obi5uKHIpLG4oMykpLGE9big4KSxzPW4oMzIpLG89bigxMSksbD1uKDEwKSx1PW4oOSk7bi5kKGUsImQiLGZ1bmN0aW9uKCl7cmV0dXJuIHUuYX0pLG4uZChlLCJjIixmdW5jdGlvbigpe3JldHVybiBvLmF9KSxuLmQoZSwiYSIsZnVuY3Rpb24oKXtyZXR1cm4gbC5hfSksbi5kKGUsImUiLGZ1bmN0aW9uKCl7cmV0dXJuIGwuYn0pLG4uZChlLCJmIixmdW5jdGlvbigpe3JldHVybiBpLmF9KSxuLmQoZSwiZyIsZnVuY3Rpb24oKXtyZXR1cm4gaS5ifSk7dmFyIGM9big2KTtuLmQoZSwiaCIsZnVuY3Rpb24oKXtyZXR1cm4gYy5hfSk7dmFyIHA9bigzMSk7bi5kKGUsImkiLGZ1bmN0aW9uKCl7cmV0dXJuIHAuYX0pLG4uZChlLCJiIixmdW5jdGlvbigpe3JldHVybiBmfSk7dmFyIGY9ci5tb2R1bGUoIm5nVGFibGUtY29yZSIsW10pLnByb3ZpZGVyKCJuZ1RhYmxlRGVmYXVsdEdldERhdGEiLGkuYikuZmFjdG9yeSgibmdUYWJsZURlZmF1bHRHZXRHcm91cHMiLGEuYikudmFsdWUoIm5nVGFibGVEZWZhdWx0cyIscy5hKS5zZXJ2aWNlKCJuZ1RhYmxlRXZlbnRzQ2hhbm5lbCIsdS5hKS5ydW4oby5hLmluaXQpLnJ1bihsLmEuaW5pdCk7Zi52YWx1ZSgiTmdUYWJsZVBhcmFtcyIsbC5hKX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgcj1uKDApLGk9KG4ubihyKSxuKDE0KSksYT1uKDE1KSxzPW4oMTYpLG89bigxNyksbD1uKDE4KSx1PW4oNSksYz1uKDE5KSxwPW4oMjApLGY9bigyMSksaD1uKDIyKSxnPW4oMjMpLGQ9bigyNCksbT1uKDI1KSx2PW4oMjYpLCQ9bigzNiksYj0obi5uKCQpLG4oMzgpKSx5PShuLm4oYiksbigzNykpLHc9KG4ubih5KSxuKDM5KSksVD0obi5uKHcpLG4oNDIpKSxDPShuLm4oVCksbig0MSkpO24ubihDKTtuLmQoZSwiYiIsZnVuY3Rpb24oKXtyZXR1cm4gby5hfSksbi5kKGUsImMiLGZ1bmN0aW9uKCl7cmV0dXJuIHUuYn0pLG4uZChlLCJkIixmdW5jdGlvbigpe3JldHVybiB1LmF9KSxuLmQoZSwiZSIsZnVuY3Rpb24oKXtyZXR1cm4gdS5jfSksbi5kKGUsImEiLGZ1bmN0aW9uKCl7cmV0dXJuIER9KTt2YXIgRD1yLm1vZHVsZSgibmdUYWJsZS1icm93c2VyIixbXSkuZGlyZWN0aXZlKCJuZ1RhYmxlIixpLmEpLnNlcnZpY2UoIm5nVGFibGVDb2x1bW4iLGEuYSkuZGlyZWN0aXZlKCJuZ1RhYmxlQ29sdW1uc0JpbmRpbmciLHMuYSkuY29udHJvbGxlcigibmdUYWJsZUNvbnRyb2xsZXIiLG8uYSkuZGlyZWN0aXZlKCJuZ1RhYmxlRHluYW1pYyIsbC5hKS5wcm92aWRlcigibmdUYWJsZUZpbHRlckNvbmZpZyIsdS5hKS5kaXJlY3RpdmUoIm5nVGFibGVGaWx0ZXJSb3ciLGMuYSkuY29udHJvbGxlcigibmdUYWJsZUZpbHRlclJvd0NvbnRyb2xsZXIiLHAuYSkuZGlyZWN0aXZlKCJuZ1RhYmxlR3JvdXBSb3ciLGYuYSkuY29udHJvbGxlcigibmdUYWJsZUdyb3VwUm93Q29udHJvbGxlciIsaC5hKS5kaXJlY3RpdmUoIm5nVGFibGVQYWdpbmF0aW9uIixnLmEpLmRpcmVjdGl2ZSgibmdUYWJsZVNlbGVjdEZpbHRlckRzIixkLmEpLmRpcmVjdGl2ZSgibmdUYWJsZVNvcnRlclJvdyIsbS5hKS5jb250cm9sbGVyKCJuZ1RhYmxlU29ydGVyUm93Q29udHJvbGxlciIsdi5hKX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgcj1uKDI3KTtuLmQoZSwiYSIsZnVuY3Rpb24oKXtyZXR1cm4gci5hfSk7dmFyIGk9bigyOCk7bi5kKGUsImIiLGZ1bmN0aW9uKCl7cmV0dXJuIGkuYX0pfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciByPW4oMzMpO24uZChlLCJiIixmdW5jdGlvbigpe3JldHVybiByLmF9KTt2YXIgaT1uKDM0KTtuLmQoZSwiYSIsZnVuY3Rpb24oKXtyZXR1cm4gaS5hfSl9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIHI9bigwKSxpPShuLm4ociksbig0KSk7bi5kKGUsImIiLGZ1bmN0aW9uKCl7cmV0dXJuIGF9KSxuLmQoZSwiYSIsZnVuY3Rpb24oKXtyZXR1cm4gc30pLG4uZChlLCJjIixmdW5jdGlvbigpe3JldHVybiBvfSk7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dGhpcy5kZWZhdWx0QmFzZVVybD0ibmctdGFibGUvZmlsdGVycy8iLHRoaXMuZGVmYXVsdEV4dD0iLmh0bWwiLHRoaXMuYWxpYXNVcmxzPXt9fXJldHVybiB0fSgpLHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3ZhciBlPXRoaXM7dGhpcy4kZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHQuaW5zdGFudGlhdGUobyx7Y29uZmlnOnIuY29weShlLmNvbmZpZyl9KX0sdGhpcy4kZ2V0LiRpbmplY3Q9W10sdGhpcy5yZXNldENvbmZpZ3MoKX1yZXR1cm4gdC5wcm90b3R5cGUucmVzZXRDb25maWdzPWZ1bmN0aW9uKCl7dGhpcy5jb25maWc9bmV3IGF9LHQucHJvdG90eXBlLnNldENvbmZpZz1mdW5jdGlvbih0KXt0aGlzLmNvbmZpZz1uLmkoaS5iKShyLmNvcHkodGhpcy5jb25maWcpLHQpfSx0fSgpO3MuJGluamVjdD1bIiRpbmplY3RvciJdO3ZhciBvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLmNvbmZpZz10fXJldHVybiB0LnByb3RvdHlwZS5nZXRVcmxGb3JBbGlhcz1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmNvbmZpZy5hbGlhc1VybHNbdF18fHRoaXMuY29uZmlnLmRlZmF1bHRCYXNlVXJsK3QrdGhpcy5jb25maWcuZGVmYXVsdEV4dH0sdC5wcm90b3R5cGUuZ2V0VGVtcGxhdGVVcmw9ZnVuY3Rpb24odCxlKXt2YXIgbjtyZXR1cm4gbj0ic3RyaW5nIiE9dHlwZW9mIHQ/dC5pZDp0LG4uaW5kZXhPZigiLyIpIT09LTE/bjp0aGlzLmdldFVybEZvckFsaWFzKG4sZSl9LHR9KCk7by4kaW5qZWN0PVsiY29uZmlnIl19LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIHI9bigyOSk7bi5kKGUsImEiLGZ1bmN0aW9uKCl7cmV0dXJuIHIuYX0pfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO24uZChlLCJhIixmdW5jdGlvbigpe3JldHVybiByfSk7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dGhpcy5kZWZhdWx0U29ydD0iYXNjIix0aGlzLmlzRXhwYW5kZWQ9ITB9cmV0dXJuIHR9KCl9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIHI9big3KTtuLmQoZSwiYSIsZnVuY3Rpb24oKXtyZXR1cm4gci5hfSk7dmFyIGk9bigzMCk7bi5kKGUsImIiLGZ1bmN0aW9uKCl7cmV0dXJuIGkuYX0pfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciByPW4oMCk7bi5uKHIpO24uZChlLCJhIixmdW5jdGlvbigpe3JldHVybiBpfSk7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMuJHJvb3RTY29wZT10O3ZhciBlPXRoaXM7ZT10aGlzLmFkZFRhYmxlUGFyYW1zRXZlbnQoImFmdGVyQ3JlYXRlZCIsZSksZT10aGlzLmFkZFRhYmxlUGFyYW1zRXZlbnQoImFmdGVyUmVsb2FkRGF0YSIsZSksZT10aGlzLmFkZFRhYmxlUGFyYW1zRXZlbnQoImRhdGFzZXRDaGFuZ2VkIixlKSxlPXRoaXMuYWRkVGFibGVQYXJhbXNFdmVudCgicGFnZXNDaGFuZ2VkIixlKSxlPXRoaXMuYWRkVGFibGVQYXJhbXNFdmVudCgiYWZ0ZXJEYXRhRmlsdGVyZWQiLGUpLGU9dGhpcy5hZGRUYWJsZVBhcmFtc0V2ZW50KCJhZnRlckRhdGFTb3J0ZWQiLGUpfXJldHVybiB0LnByb3RvdHlwZS5hZGRUYWJsZVBhcmFtc0V2ZW50PWZ1bmN0aW9uKHQsZSl7dmFyIG49dC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0LnN1YnN0cmluZygxKSxpPShhPXt9LGFbIm9uIituXT10aGlzLmNyZWF0ZUV2ZW50U3Vic2NyaXB0aW9uRm4odCksYVsicHVibGlzaCIrbl09dGhpcy5jcmVhdGVQdWJsaXNoRXZlbnRGbih0KSxhKTtyZXR1cm4gci5leHRlbmQoZSxpKTt2YXIgYX0sdC5wcm90b3R5cGUuY3JlYXRlUHVibGlzaEV2ZW50Rm49ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztyZXR1cm4gZnVuY3Rpb24oKXtmb3IodmFyIG49W10scj0wO3I8YXJndW1lbnRzLmxlbmd0aDtyKyspbltyXT1hcmd1bWVudHNbcl07KGk9ZS4kcm9vdFNjb3BlKS4kYnJvYWRjYXN0LmFwcGx5KGksWyJuZ1RhYmxlOiIrdF0uY29uY2F0KG4pKTt2YXIgaX19LHQucHJvdG90eXBlLmNyZWF0ZUV2ZW50U3Vic2NyaXB0aW9uRm49ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0KXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9ZnVuY3Rpb24oKXtyZXR1cm4hMH0pLG4odCk/dDpmdW5jdGlvbihlKXtyZXR1cm4gZT09PXR9fWZ1bmN0aW9uIG4odCl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHR9ZnVuY3Rpb24gcih0KXtyZXR1cm4gdCYmImZ1bmN0aW9uIj09dHlwZW9mIHQuJG5ld312YXIgaT10aGlzO3JldHVybiBmdW5jdGlvbihuLGEscyl7dmFyIG8sbD1pLiRyb290U2NvcGU7cmV0dXJuIHIoYSk/KGw9YSxvPWUocykpOm89ZShhKSxsLiRvbigibmdUYWJsZToiK3QsZnVuY3Rpb24odCxlKXtmb3IodmFyIHI9W10saT0yO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspcltpLTJdPWFyZ3VtZW50c1tpXTtpZighZS5pc051bGxJbnN0YW5jZSl7dmFyIGE9W2VdLmNvbmNhdChyKTtvLmFwcGx5KHRoaXMsYSkmJm4uYXBwbHkodGhpcyxhKX19KX19LHR9KCk7aS4kaW5qZWN0PVsiJHJvb3RTY29wZSJdfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCl7cmV0dXJuIWlzTmFOKHBhcnNlRmxvYXQodCkpJiZpc0Zpbml0ZSh0KX12YXIgaT1uKDApLGE9KG4ubihpKSxuKDEyKSkscz1uKDQpLG89bigxMSk7bi5kKGUsImIiLGZ1bmN0aW9uKCl7cmV0dXJuIGx9KSxuLmQoZSwiYSIsZnVuY3Rpb24oKXtyZXR1cm4gdX0pO3ZhciBsPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3RoaXMucGFnZT0xLHRoaXMuY291bnQ9MTAsdGhpcy5maWx0ZXI9e30sdGhpcy5zb3J0aW5nPXt9LHRoaXMuZ3JvdXA9e319cmV0dXJuIHR9KCksdT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXt2b2lkIDA9PT10JiYodD17fSksdm9pZCAwPT09ZSYmKGU9e30pO3ZhciByPXRoaXM7dGhpcy5kYXRhPVtdLHRoaXMuZGVmYXVsdFNldHRpbmdzPW8uYS5jcmVhdGVXaXRoT3ZlcnJpZGVzKCksdGhpcy5pc0NvbW1pdHRlZERhdGFzZXQ9ITEsdGhpcy5pbml0aWFsRXZlbnRzPVtdLHRoaXMuX3BhcmFtcz1uZXcgbCx0aGlzLl9zZXR0aW5ncz10aGlzLmRlZmF1bHRTZXR0aW5ncywiYm9vbGVhbiI9PXR5cGVvZiB0JiYodGhpcy5pc051bGxJbnN0YW5jZT0hMCksdGhpcy5yZWxvYWRQYWdlcz1mdW5jdGlvbigpe3ZhciB0O3JldHVybiBmdW5jdGlvbigpe3ZhciBlPXQsbj1yLmdlbmVyYXRlUGFnZXNBcnJheShyLnBhZ2UoKSxyLnRvdGFsKCksci5jb3VudCgpKTtpLmVxdWFscyhlLG4pfHwodD1uLHIubmdUYWJsZUV2ZW50c0NoYW5uZWwucHVibGlzaFBhZ2VzQ2hhbmdlZChyLG4sZSkpfX0oKSxuLmkocy5iKSh0aGlzLl9wYXJhbXMsdGhpcy5uZ1RhYmxlRGVmYXVsdHMucGFyYW1zKSx0aGlzLnNldHRpbmdzKGUpLHRoaXMucGFyYW1ldGVycyh0LCEwKSx0aGlzLm5nVGFibGVFdmVudHNDaGFubmVsLnB1Ymxpc2hBZnRlckNyZWF0ZWQodGhpcyksaS5mb3JFYWNoKHRoaXMuaW5pdGlhbEV2ZW50cyxmdW5jdGlvbih0KXt0KCl9KSx0aGlzLmluaXRpYWxFdmVudHM9bnVsbH1yZXR1cm4gdC5wcm90b3R5cGUuY291bnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMCE9PXQ/dGhpcy5wYXJhbWV0ZXJzKHtjb3VudDp0LHBhZ2U6MX0pOnRoaXMuX3BhcmFtcy5jb3VudH0sdC5wcm90b3R5cGUuZmlsdGVyPWZ1bmN0aW9uKHQpe2lmKG51bGwhPXQmJiJvYmplY3QiPT10eXBlb2YgdClyZXR1cm4gdGhpcy5wYXJhbWV0ZXJzKHtmaWx0ZXI6dCxwYWdlOjF9KTtpZih0PT09ITApe2Zvcih2YXIgZT1PYmplY3Qua2V5cyh0aGlzLl9wYXJhbXMuZmlsdGVyKSxuPXt9LHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIGk9dGhpcy5fcGFyYW1zLmZpbHRlcltlW3JdXTtudWxsIT1pJiYiIiE9PWkmJihuW2Vbcl1dPWkpfXJldHVybiBufXJldHVybiB0aGlzLl9wYXJhbXMuZmlsdGVyfSx0LnByb3RvdHlwZS5nZW5lcmF0ZVBhZ2VzQXJyYXk9ZnVuY3Rpb24odCxlLG4scil7YXJndW1lbnRzLmxlbmd0aHx8KHQ9dGhpcy5wYWdlKCksZT10aGlzLnRvdGFsKCksbj10aGlzLmNvdW50KCkpO3ZhciBpLGEscyxvO3I9ciYmcjw2PzY6cjt2YXIgbD1bXTtpZihvPU1hdGguY2VpbChlL24pLG8+MSl7bC5wdXNoKHt0eXBlOiJwcmV2IixudW1iZXI6TWF0aC5tYXgoMSx0LTEpLGFjdGl2ZTp0PjF9KSxsLnB1c2goe3R5cGU6ImZpcnN0IixudW1iZXI6MSxhY3RpdmU6dD4xLGN1cnJlbnQ6MT09PXR9KSxhPU1hdGgucm91bmQoKHRoaXMuX3NldHRpbmdzLnBhZ2luYXRpb25NYXhCbG9ja3MtdGhpcy5fc2V0dGluZ3MucGFnaW5hdGlvbk1pbkJsb2NrcykvMikscz1NYXRoLm1heCgyLHQtYSksaT1NYXRoLm1pbihvLTEsdCsyKmEtKHQtcykpLHM9TWF0aC5tYXgoMixzLSgyKmEtKGktcykpKTtmb3IodmFyIHU9czt1PD1pOyl1PT09cyYmMiE9PXV8fHU9PT1pJiZ1IT09by0xP2wucHVzaCh7dHlwZToibW9yZSIsYWN0aXZlOiExfSk6bC5wdXNoKHt0eXBlOiJwYWdlIixudW1iZXI6dSxhY3RpdmU6dCE9PXUsY3VycmVudDp0PT09dX0pLHUrKztsLnB1c2goe3R5cGU6Imxhc3QiLG51bWJlcjpvLGFjdGl2ZTp0IT09byxjdXJyZW50OnQ9PT1vfSksbC5wdXNoKHt0eXBlOiJuZXh0IixudW1iZXI6TWF0aC5taW4obyx0KzEpLGFjdGl2ZTp0PG99KX1yZXR1cm4gbH0sdC5wcm90b3R5cGUuZ3JvdXA9ZnVuY3Rpb24odCxlKXtpZih2b2lkIDA9PT10KXJldHVybiB0aGlzLl9wYXJhbXMuZ3JvdXA7dmFyIHI9e3BhZ2U6MX07cmV0dXJuIG4uaShhLmEpKHQpJiZ2b2lkIDAhPT1lPyh0LnNvcnREaXJlY3Rpb249ZSxyLmdyb3VwPXQpOiJzdHJpbmciPT10eXBlb2YgdCYmdm9pZCAwIT09ZT9yLmdyb3VwPShpPXt9LGlbdF09ZSxpKTpyLmdyb3VwPXQsdGhpcy5wYXJhbWV0ZXJzKHIpLHRoaXM7dmFyIGl9LHQucHJvdG90eXBlLmhhc0Vycm9yU3RhdGU9ZnVuY3Rpb24oKXtyZXR1cm4hKCF0aGlzLmVyclBhcmFtc01lbWVudG98fCFpLmVxdWFscyh0aGlzLmVyclBhcmFtc01lbWVudG8sdGhpcy5jcmVhdGVDb21wYXJhYmxlUGFyYW1zKCkpKX0sdC5wcm90b3R5cGUuaGFzRmlsdGVyPWZ1bmN0aW9uKCl7cmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuZmlsdGVyKCEwKSkubGVuZ3RoPjB9LHQucHJvdG90eXBlLmhhc0ZpbHRlckNoYW5nZXM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnByZXZQYXJhbXNNZW1lbnRvJiZ0aGlzLnByZXZQYXJhbXNNZW1lbnRvLnBhcmFtcy5maWx0ZXI7cmV0dXJuIWkuZXF1YWxzKHRoaXMuX3BhcmFtcy5maWx0ZXIsdCl8fHRoaXMuaGFzR2xvYmFsU2VhcmNoRmllbGRDaGFuZ2VzKCl9LHQucHJvdG90eXBlLmhhc0dyb3VwPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG51bGw9PXQ/bi5pKGEuYSkodGhpcy5fcGFyYW1zLmdyb3VwKXx8T2JqZWN0LmtleXModGhpcy5fcGFyYW1zLmdyb3VwKS5sZW5ndGg+MDpuLmkoYS5hKSh0KT9udWxsPT1lP3RoaXMuX3BhcmFtcy5ncm91cD09PXQ6dGhpcy5fcGFyYW1zLmdyb3VwPT09dCYmdC5zb3J0RGlyZWN0aW9uPT09ZTpudWxsPT1lP09iamVjdC5rZXlzKHRoaXMuX3BhcmFtcy5ncm91cCkuaW5kZXhPZih0KSE9PS0xOnRoaXMuX3BhcmFtcy5ncm91cFt0XT09PWV9LHQucHJvdG90eXBlLmlzRGF0YVJlbG9hZFJlcXVpcmVkPWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaXNDb21taXR0ZWREYXRhc2V0fHwhaS5lcXVhbHModGhpcy5jcmVhdGVDb21wYXJhYmxlUGFyYW1zKCksdGhpcy5wcmV2UGFyYW1zTWVtZW50byl8fHRoaXMuaGFzR2xvYmFsU2VhcmNoRmllbGRDaGFuZ2VzKCl9LHQucHJvdG90eXBlLmlzU29ydEJ5PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMCE9PWU/dm9pZCAwIT09dGhpcy5fcGFyYW1zLnNvcnRpbmdbdF0mJnRoaXMuX3BhcmFtcy5zb3J0aW5nW3RdPT1lOnZvaWQgMCE9PXRoaXMuX3BhcmFtcy5zb3J0aW5nW3RdfSx0LnByb3RvdHlwZS5vcmRlckJ5PWZ1bmN0aW9uKCl7cmV0dXJuIG4uaShhLmIpKHRoaXMuX3BhcmFtcy5zb3J0aW5nKX0sdC5wcm90b3R5cGUucGFnZT1mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwIT09dD90aGlzLnBhcmFtZXRlcnMoe3BhZ2U6dH0pOnRoaXMuX3BhcmFtcy5wYWdlfSx0LnByb3RvdHlwZS5wYXJhbWV0ZXJzPWZ1bmN0aW9uKHQsZSl7aWYodm9pZCAwPT09dClyZXR1cm4gdGhpcy5fcGFyYW1zO2U9ZXx8ITE7Zm9yKHZhciBuIGluIHQpe3ZhciBhPXRbbl07aWYoZSYmbi5pbmRleE9mKCJbIik+PTApe2Zvcih2YXIgcz1uLnNwbGl0KC9cWyguKilcXS8pLnJldmVyc2UoKSxvPSIiLGw9MCx1PXMubGVuZ3RoO2w8dTtsKyspe3ZhciBjPXNbbF07aWYoIiIhPT1jKXt2YXIgcD1hO2E9e30sYVtvPWNdPXIocCk/cGFyc2VGbG9hdChwKTpwfX0ic29ydGluZyI9PT1vJiYodGhpcy5fcGFyYW1zW29dPXt9KSx0aGlzLl9wYXJhbXNbb109aS5leHRlbmQodGhpcy5fcGFyYW1zW29dfHx7fSxhW29dKX1lbHNlIHZvaWQgMD09PXRbbl18fCgiZ3JvdXAiPT09bj90aGlzLl9wYXJhbXNbbl09dGhpcy5wYXJzZUdyb3VwKHRbbl0pOnRoaXMuX3BhcmFtc1tuXT1yKHRbbl0pP3BhcnNlRmxvYXQodFtuXSk6dFtuXSl9cmV0dXJuIHRoaXMubG9nKCJuZ1RhYmxlOiBzZXQgcGFyYW1ldGVycyIsdGhpcy5fcGFyYW1zKSx0aGlzfSx0LnByb3RvdHlwZS5yZWxvYWQ9ZnVuY3Rpb24oKXt2YXIgdCxlPXRoaXM7aWYodGhpcy5fc2V0dGluZ3MuJGxvYWRpbmc9ITAsdGhpcy5wcmV2UGFyYW1zTWVtZW50bz1pLmNvcHkodGhpcy5jcmVhdGVDb21wYXJhYmxlUGFyYW1zKCkpLHRoaXMuaXNDb21taXR0ZWREYXRhc2V0PSEwLHRoaXMuaGFzR3JvdXAoKSl0PXRoaXMucnVuSW50ZXJjZXB0b3JQaXBlbGluZSh0aGlzLiRxLndoZW4odGhpcy5fc2V0dGluZ3MuZ2V0R3JvdXBzKHRoaXMpKSk7ZWxzZXt2YXIgbj10aGlzLl9zZXR0aW5ncy5nZXREYXRhO3Q9dGhpcy5ydW5JbnRlcmNlcHRvclBpcGVsaW5lKHRoaXMuJHEud2hlbihuKHRoaXMpKSl9dGhpcy5sb2coIm5nVGFibGU6IHJlbG9hZCBkYXRhIik7dmFyIHI9dGhpcy5kYXRhO3JldHVybiB0LnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGUuX3NldHRpbmdzLiRsb2FkaW5nPSExLGUuZXJyUGFyYW1zTWVtZW50bz1udWxsLGUuZGF0YT10LGUubmdUYWJsZUV2ZW50c0NoYW5uZWwucHVibGlzaEFmdGVyUmVsb2FkRGF0YShlLHQsciksZS5yZWxvYWRQYWdlcygpLHR9KS5jYXRjaChmdW5jdGlvbih0KXtyZXR1cm4gZS5lcnJQYXJhbXNNZW1lbnRvPWUucHJldlBhcmFtc01lbWVudG8sZS4kcS5yZWplY3QodCl9KX0sdC5wcm90b3R5cGUuc2V0dGluZ3M9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZih2b2lkIDA9PT10KXJldHVybiB0aGlzLl9zZXR0aW5nczt2YXIgbj1vLmEubWVyZ2UodGhpcy5fc2V0dGluZ3MsdCkscj10aGlzLl9zZXR0aW5ncy5kYXRhc2V0O3RoaXMuX3NldHRpbmdzPW47dmFyIGk9dC5oYXNPd25Qcm9wZXJ0eSgiZGF0YXNldCIpJiZ0LmRhdGFzZXQhPXI7aWYoaSl7dGhpcy5pc0NvbW1pdHRlZERhdGFzZXQmJnRoaXMucGFnZSgxKSx0aGlzLmlzQ29tbWl0dGVkRGF0YXNldD0hMTt2YXIgYT1mdW5jdGlvbigpe2UubmdUYWJsZUV2ZW50c0NoYW5uZWwucHVibGlzaERhdGFzZXRDaGFuZ2VkKGUsdC5kYXRhc2V0LHIpfTt0aGlzLmluaXRpYWxFdmVudHM/dGhpcy5pbml0aWFsRXZlbnRzLnB1c2goYSk6YSgpfXJldHVybiB0aGlzLmxvZygibmdUYWJsZTogc2V0IHNldHRpbmdzIix0aGlzLl9zZXR0aW5ncyksdGhpc30sdC5wcm90b3R5cGUuc29ydGluZz1mdW5jdGlvbih0LGUpe3JldHVybiJzdHJpbmciPT10eXBlb2YgdD8odGhpcy5wYXJhbWV0ZXJzKHtzb3J0aW5nOihuPXt9LG5bdF09ZXx8dGhpcy5zZXR0aW5ncygpLmRlZmF1bHRTb3J0LG4pfSksdGhpcyk6dm9pZCAwIT09dD90aGlzLnBhcmFtZXRlcnMoe3NvcnRpbmc6dH0pOnRoaXMuX3BhcmFtcy5zb3J0aW5nO3ZhciBufSx0LnByb3RvdHlwZS50b3RhbD1mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwIT09dD90aGlzLnNldHRpbmdzKHt0b3RhbDp0fSk6dGhpcy5fc2V0dGluZ3MudG90YWx9LHQucHJvdG90eXBlLnVybD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQsZSl7bihhKT9hLnB1c2goZSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KHQpKTphW2VdPWVuY29kZVVSSUNvbXBvbmVudCh0KX1mdW5jdGlvbiBuKGUpe3JldHVybiB0fWZ1bmN0aW9uIHIodCxlKXtyZXR1cm4iZ3JvdXAiPT09ZXx8dm9pZCAwIT09dHlwZW9mIHQmJiIiIT09dH12b2lkIDA9PT10JiYodD0hMSk7dmFyIGE9dD9bXTp7fTtmb3IodmFyIHMgaW4gdGhpcy5fcGFyYW1zKWlmKHRoaXMuX3BhcmFtcy5oYXNPd25Qcm9wZXJ0eShzKSl7dmFyIG89dGhpcy5fcGFyYW1zW3NdLGw9ZW5jb2RlVVJJQ29tcG9uZW50KHMpO2lmKCJvYmplY3QiPT10eXBlb2Ygbyl7Zm9yKHZhciB1IGluIG8paWYocihvW3VdLHMpKXt2YXIgYz1sKyJbIitlbmNvZGVVUklDb21wb25lbnQodSkrIl0iO2Uob1t1XSxjKX19ZWxzZSFpLmlzRnVuY3Rpb24obykmJnIobyxzKSYmZShvLGwpfXJldHVybiBhfSx0LnByb3RvdHlwZS5jcmVhdGVDb21wYXJhYmxlUGFyYW1zPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fcGFyYW1zLmdyb3VwO3JldHVybntwYXJhbXM6dGhpcy5fcGFyYW1zLGdyb3VwU29ydERpcmVjdGlvbjpuLmkoYS5hKSh0KT90LnNvcnREaXJlY3Rpb246dm9pZCAwfX0sdC5wcm90b3R5cGUuaGFzR2xvYmFsU2VhcmNoRmllbGRDaGFuZ2VzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fcGFyYW1zLmZpbHRlciYmdGhpcy5fcGFyYW1zLmZpbHRlci4kLGU9dGhpcy5wcmV2UGFyYW1zTWVtZW50byYmdGhpcy5wcmV2UGFyYW1zTWVtZW50by5wYXJhbXMuZmlsdGVyJiZ0aGlzLnByZXZQYXJhbXNNZW1lbnRvLnBhcmFtcy5maWx0ZXIuJDtyZXR1cm4haS5lcXVhbHModCxlKX0sdC5wcm90b3R5cGUubG9nPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXRbZV09YXJndW1lbnRzW2VdO3RoaXMuX3NldHRpbmdzLmRlYnVnTW9kZSYmdGhpcy4kbG9nLmRlYnVnJiYobj10aGlzLiRsb2cpLmRlYnVnLmFwcGx5KG4sdCk7dmFyIG59LHQucHJvdG90eXBlLnBhcnNlR3JvdXA9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fc2V0dGluZ3MuZ3JvdXBPcHRpb25zLmRlZmF1bHRTb3J0O2lmKHQpe2lmKG4uaShhLmEpKHQpKXJldHVybiBudWxsPT10LnNvcnREaXJlY3Rpb24mJih0LnNvcnREaXJlY3Rpb249ZSksdDtpZigib2JqZWN0Ij09dHlwZW9mIHQpe2Zvcih2YXIgciBpbiB0KW51bGw9PXRbcl0mJih0W3JdPWUpO3JldHVybiB0fXJldHVybiBpPXt9LGlbdF09ZSxpfXJldHVybiB0O3ZhciBpfSx0LnByb3RvdHlwZS5ydW5JbnRlcmNlcHRvclBpcGVsaW5lPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7cmV0dXJuIHRoaXMuX3NldHRpbmdzLmludGVyY2VwdG9ycy5yZWR1Y2UoZnVuY3Rpb24odCxuKXt2YXIgcj1uLnJlc3BvbnNlJiZuLnJlc3BvbnNlLmJpbmQobil8fGUuJHEud2hlbixpPW4ucmVzcG9uc2VFcnJvciYmbi5yZXNwb25zZUVycm9yLmJpbmQobil8fGUuJHEucmVqZWN0O3JldHVybiB0LnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHIodCxlKX0sZnVuY3Rpb24odCl7cmV0dXJuIGkodCxlKX0pfSx0KX0sdC5pbml0PWZ1bmN0aW9uKGUsbixyLGEpe2kuZXh0ZW5kKHQucHJvdG90eXBlLHskcTplLCRsb2c6bixuZ1RhYmxlRGVmYXVsdHM6cixuZ1RhYmxlRXZlbnRzQ2hhbm5lbDphfSl9LHR9KCk7dS5pbml0LiRpbmplY3Q9WyIkcSIsIiRsb2ciLCJuZ1RhYmxlRGVmYXVsdHMiLCJuZ1RhYmxlRXZlbnRzQ2hhbm5lbCJdfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciByPW4oMCksaT0obi5uKHIpLG4oNCkpLGE9bigzKSxzPW4oNiksbz1uKDgpO24uZChlLCJhIixmdW5jdGlvbigpe3JldHVybiBsfSk7dmFyIGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dGhpcy4kbG9hZGluZz0hMSx0aGlzLmNvdW50cz1bMTAsMjUsNTAsMTAwXSx0aGlzLmRhdGFzZXQ9dm9pZCAwLHRoaXMuZGF0YU9wdGlvbnM9bmV3IGEuYSx0aGlzLmRlYnVnTW9kZT0hMSx0aGlzLnRvdGFsPTAsdGhpcy5kZWZhdWx0U29ydD0iZGVzYyIsdGhpcy5maWx0ZXJPcHRpb25zPW5ldyBzLmEsdGhpcy5nZXREYXRhPXQuZGVmYXVsdEdldERhdGEsdGhpcy5nZXRHcm91cHM9dC5kZWZhdWx0R2V0R3JvdXBzLHRoaXMuZ3JvdXBPcHRpb25zPW5ldyBvLmEsdGhpcy5pbnRlcmNlcHRvcnM9bmV3IEFycmF5LHRoaXMucGFnaW5hdGlvbk1heEJsb2Nrcz0xMSx0aGlzLnBhZ2luYXRpb25NaW5CbG9ja3M9NSx0aGlzLnNvcnRpbmdJbmRpY2F0b3I9InNwYW4iLG4uaShpLmEpKHQpfXJldHVybiB0LmNyZWF0ZVdpdGhPdmVycmlkZXM9ZnVuY3Rpb24oKXtyZXR1cm4gbi5pKGkuYSkodCksdC5tZXJnZSh0Lmluc3RhbmNlLHQubmdUYWJsZURlZmF1bHRzLnNldHRpbmdzfHx7fSl9LHQubWVyZ2U9ZnVuY3Rpb24oZSxhKXtuLmkoaS5hKSh0KTt2YXIgcz1bImRhdGFzZXQiXSxvPW4uaShpLmIpKHIuY29weShlKSxhLGZ1bmN0aW9uKHQpe3JldHVybiBzLmluZGV4T2YodCkhPT0tMX0sZnVuY3Rpb24odCxlLG4pe2lmKCJkYXRhc2V0Ij09PW4pcmV0dXJuIGV9KTtyZXR1cm4gYS5kYXRhc2V0JiYoby50b3RhbD1hLmRhdGFzZXQubGVuZ3RoLHQub3B0aW1pemVGaWx0ZXJEZWxheShvKSksb30sdC5vcHRpbWl6ZUZpbHRlckRlbGF5PWZ1bmN0aW9uKGUpe2UuZmlsdGVyT3B0aW9ucy5maWx0ZXJEZWxheT09PXQuaW5zdGFuY2UuZmlsdGVyT3B0aW9ucy5maWx0ZXJEZWxheSYmZS50b3RhbDw9ZS5maWx0ZXJPcHRpb25zLmZpbHRlckRlbGF5VGhyZXNob2xkJiZlLmdldERhdGE9PT10Lmluc3RhbmNlLmdldERhdGEmJihlLmZpbHRlck9wdGlvbnMuZmlsdGVyRGVsYXk9MCl9LHQuaW5pdD1mdW5jdGlvbihlLG4scil7dC5kZWZhdWx0R2V0RGF0YT1mdW5jdGlvbih0KXtyZXR1cm4gZSh0LnNldHRpbmdzKCkuZGF0YXNldCx0KX0sdC5kZWZhdWx0R2V0R3JvdXBzPW4sdC5uZ1RhYmxlRGVmYXVsdHM9cix0LmlzSW5pdGlhbGl6ZWQ9ITAsdC5pbnN0YW5jZT1uZXcgdH0sdH0oKTtsLmlzSW5pdGlhbGl6ZWQ9ITEsbC5pbml0LiRpbmplY3Q9WyJuZ1RhYmxlRGVmYXVsdEdldERhdGEiLCJuZ1RhYmxlRGVmYXVsdEdldEdyb3VwcyIsIm5nVGFibGVEZWZhdWx0cyJdfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCl7dmFyIGU9W107Zm9yKHZhciBuIGluIHQpZS5wdXNoKCgiYXNjIj09PXRbbl0/IisiOiItIikrbik7cmV0dXJuIGV9ZnVuY3Rpb24gaSh0KXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgdH1lLmI9cixlLmE9aX0sLGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcih0LGUpe3JldHVybntyZXN0cmljdDoiQSIscHJpb3JpdHk6MTAwMSxzY29wZTohMCxjb250cm9sbGVyOiJuZ1RhYmxlQ29udHJvbGxlciIsY29tcGlsZTpmdW5jdGlvbih0KXt2YXIgbixyLGE9W10scz0wLG89W107aWYoaS5mb3JFYWNoKHQuZmluZCgidHIiKSxmdW5jdGlvbih0KXtvLnB1c2goaS5lbGVtZW50KHQpKX0pLG49by5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIXQuaGFzQ2xhc3MoIm5nLXRhYmxlLWdyb3VwIil9KVswXSxyPW8uZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiB0Lmhhc0NsYXNzKCJuZy10YWJsZS1ncm91cCIpfSlbMF0sbilyZXR1cm4gaS5mb3JFYWNoKG4uZmluZCgidGQiKSxmdW5jdGlvbih0KXt2YXIgbj1pLmVsZW1lbnQodCk7aWYoIW4uYXR0cigiaWdub3JlLWNlbGwiKXx8InRydWUiIT09bi5hdHRyKCJpZ25vcmUtY2VsbCIpKXt2YXIgbz1mdW5jdGlvbih0KXtyZXR1cm4gbi5hdHRyKCJ4LWRhdGEtIit0KXx8bi5hdHRyKCJkYXRhLSIrdCl8fG4uYXR0cih0KX0sbD1mdW5jdGlvbih0LGUpe24uYXR0cigieC1kYXRhLSIrdCk/bi5hdHRyKCJ4LWRhdGEtIit0LGUpOm4uYXR0cigiZGF0YSIrdCk/bi5hdHRyKCJkYXRhIit0LGUpOm4uYXR0cih0LGUpfSx1PWZ1bmN0aW9uKHQpe3ZhciBuPW8odCk7aWYobil7dmFyIHIsaT1mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwIT09cj9yOmUobikodCl9O3JldHVybiBpLmFzc2lnbj1mdW5jdGlvbih0LGkpe3ZhciBhPWUobik7YS5hc3NpZ24/YS5hc3NpZ24odC4kcGFyZW50LGkpOnI9aX0saX19LGM9bygidGl0bGUtYWx0Iil8fG8oInRpdGxlIik7YyYmbi5hdHRyKCJkYXRhLXRpdGxlLXRleHQiLCJ7eyIrYysifX0iKSxhLnB1c2goe2lkOnMrKyx0aXRsZTp1KCJ0aXRsZSIpLHRpdGxlQWx0OnUoInRpdGxlLWFsdCIpLGhlYWRlclRpdGxlOnUoImhlYWRlci10aXRsZSIpLHNvcnRhYmxlOnUoInNvcnRhYmxlIiksY2xhc3M6dSgiaGVhZGVyLWNsYXNzIiksZmlsdGVyOnUoImZpbHRlciIpLGdyb3VwYWJsZTp1KCJncm91cGFibGUiKSxoZWFkZXJUZW1wbGF0ZVVSTDp1KCJoZWFkZXIiKSxmaWx0ZXJEYXRhOnUoImZpbHRlci1kYXRhIiksc2hvdzpuLmF0dHIoIm5nLWlmIik/dSgibmctaWYiKTp2b2lkIDB9KSwocnx8bi5hdHRyKCJuZy1pZiIpKSYmbCgibmctaWYiLCIkY29sdW1uc1siKyhhLmxlbmd0aC0xKSsiXS5zaG93KHRoaXMpIil9fSksZnVuY3Rpb24odCxlLG4scil7dmFyIGk9dC4kY29sdW1ucz1yLmJ1aWxkQ29sdW1ucyhhKTtyLnNldHVwQmluZGluZ3NUb0ludGVybmFsU2NvcGUobi5uZ1RhYmxlKSxyLmxvYWRGaWx0ZXJEYXRhKGkpLHIuY29tcGlsZURpcmVjdGl2ZVRlbXBsYXRlcygpfX19fXZhciBpPW4oMCk7bi5uKGkpO2UuYT1yLHIuJGluamVjdD1bIiRxIiwiJHBhcnNlIl19LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcih0KXtyZXR1cm4gbnVsbCE9dCYmaS5pc0Z1bmN0aW9uKHQuJG5ldyl9dmFyIGk9bigwKTtuLm4oaSk7bi5kKGUsImEiLGZ1bmN0aW9uKCl7cmV0dXJuIGF9KTt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHQucHJvdG90eXBlLmJ1aWxkQ29sdW1uPWZ1bmN0aW9uKHQsZSxuKXt2YXIgYT1PYmplY3QuY3JlYXRlKHQpLHM9dGhpcy5jcmVhdGVEZWZhdWx0cygpLG89ZnVuY3Rpb24obyl7aWYodm9pZCAwPT09YVtvXSYmKGFbb109c1tvXSksIWkuaXNGdW5jdGlvbihhW29dKSl7dmFyIGw9ZnVuY3Rpb24gZSgpe3JldHVybiAxIT09YXJndW1lbnRzLmxlbmd0aHx8cihhcmd1bWVudHNbMF0pP3Rbb106dm9pZCBlLmFzc2lnbihudWxsLGFyZ3VtZW50c1swXSl9O2wuYXNzaWduPWZ1bmN0aW9uKGUsbil7dFtvXT1ufSxhW29dPWx9dmFyIHU9YVtvXTtpZihhW29dPWZ1bmN0aW9uKCl7aWYoMSE9PWFyZ3VtZW50cy5sZW5ndGh8fHIoYXJndW1lbnRzWzBdKSl7dmFyIHM9YXJndW1lbnRzWzBdfHxlLG89T2JqZWN0LmNyZWF0ZShzKTtyZXR1cm4gaS5leHRlbmQobyx7JGNvbHVtbjphLCRjb2x1bW5zOm59KSx1LmNhbGwodCxvKX11LmFzc2lnbihlLGFyZ3VtZW50c1swXSl9LHUuYXNzaWduKWFbb10uYXNzaWduPXUuYXNzaWduO2Vsc2V7dmFyIGMscD1hW29dLGw9ZnVuY3Rpb24gdCgpe3JldHVybiAxIT09YXJndW1lbnRzLmxlbmd0aHx8cihhcmd1bWVudHNbMF0pP3ZvaWQgMCE9Yz9jOnAuYXBwbHkoYSxhcmd1bWVudHMpOnZvaWQgdC5hc3NpZ24obnVsbCxhcmd1bWVudHNbMF0pfTtsLmFzc2lnbj1mdW5jdGlvbih0LGUpe2M9ZX0sYVtvXT1sfX07Zm9yKHZhciBsIGluIHMpbyhsKTtyZXR1cm4gYX0sdC5wcm90b3R5cGUuY3JlYXRlRGVmYXVsdHM9ZnVuY3Rpb24oKXtyZXR1cm57Y2xhc3M6dGhpcy5jcmVhdGVHZXR0ZXJTZXR0ZXIoIiIpLGZpbHRlcjp0aGlzLmNyZWF0ZUdldHRlclNldHRlcighMSksZ3JvdXBhYmxlOnRoaXMuY3JlYXRlR2V0dGVyU2V0dGVyKCExKSxmaWx0ZXJEYXRhOmkubm9vcCxoZWFkZXJUZW1wbGF0ZVVSTDp0aGlzLmNyZWF0ZUdldHRlclNldHRlcighMSksaGVhZGVyVGl0bGU6dGhpcy5jcmVhdGVHZXR0ZXJTZXR0ZXIoIiIpLHNvcnRhYmxlOnRoaXMuY3JlYXRlR2V0dGVyU2V0dGVyKCExKSxzaG93OnRoaXMuY3JlYXRlR2V0dGVyU2V0dGVyKCEwKSx0aXRsZTp0aGlzLmNyZWF0ZUdldHRlclNldHRlcigiIiksdGl0bGVBbHQ6dGhpcy5jcmVhdGVHZXR0ZXJTZXR0ZXIoIiIpfX0sdC5wcm90b3R5cGUuY3JlYXRlR2V0dGVyU2V0dGVyPWZ1bmN0aW9uKHQpe3ZhciBlPXQsbj1mdW5jdGlvbiB0KCl7cmV0dXJuIDEhPT1hcmd1bWVudHMubGVuZ3RofHxyKGFyZ3VtZW50c1swXSk/ZTp2b2lkIHQuYXNzaWduKG51bGwsYXJndW1lbnRzWzBdKX07cmV0dXJuIG4uYXNzaWduPWZ1bmN0aW9uKHQsbil7ZT1ufSxufSx0fSgpO2EuJGluamVjdD1bXX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQpe2Z1bmN0aW9uIGUoZSxuLHIpe3ZhciBpPXQoci5uZ1RhYmxlQ29sdW1uc0JpbmRpbmcpLmFzc2lnbjtpJiZlLiR3YXRjaCgiJGNvbHVtbnMiLGZ1bmN0aW9uKHQpe3ZhciBuPSh0fHxbXSkuc2xpY2UoMCk7aShlLG4pfSl9dmFyIG49e3Jlc3RyaWN0OiJBIixsaW5rOmV9O3JldHVybiBufWUuYT1yLHIuJGluamVjdD1bIiRwYXJzZSJdfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciByPW4oMCksaT0obi5uKHIpLG4oMSkpO24uZChlLCJhIixmdW5jdGlvbigpe3JldHVybiBhfSk7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxuLHIsYSxzLG8sbCx1KXt0aGlzLiRzY29wZT10LHRoaXMuJHBhcnNlPW4sdGhpcy4kY29tcGlsZT1yLHRoaXMuJGF0dHJzPWEsdGhpcy4kZWxlbWVudD1zLHRoaXMuJGRvY3VtZW50PW8sdGhpcy5uZ1RhYmxlQ29sdW1uPWwsdGhpcy5uZ1RhYmxlRXZlbnRzQ2hhbm5lbD11O3QuJGZpbHRlclJvdz17ZGlzYWJsZWQ6ITF9LHQuJGxvYWRpbmc9ITEsdC5oYXNPd25Qcm9wZXJ0eSgicGFyYW1zIil8fCh0LnBhcmFtcz1uZXcgaS5hKCEwKSksdGhpcy5kZWxheUZpbHRlcj1mdW5jdGlvbigpe3ZhciB0O3JldHVybiBmdW5jdGlvbihuLHIpe2UuY2FuY2VsKHQpLHQ9ZShuLHIpfX0oKSx0aGlzLiRzY29wZS4kd2F0Y2goInBhcmFtcyIsZnVuY3Rpb24odCxlKXt0IT09ZSYmdCYmdC5yZWxvYWQoKX0sITEpLHRoaXMuc3Vic2NyaWJlVG9UYWJsZUV2ZW50cygpfXJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsImhhc1Zpc2libGVGaWx0ZXJDb2x1bW4iLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3JldHVybiEhdGhpcy4kc2NvcGUuJGNvbHVtbnMmJnRoaXMuc29tZSh0aGlzLiRzY29wZS4kY29sdW1ucyxmdW5jdGlvbihlKXtyZXR1cm4gZS5zaG93KHQuJHNjb3BlKSYmISFlLmZpbHRlcih0LiRzY29wZSl9KX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5vbkRhdGFSZWxvYWRTdGF0dXNDaGFuZ2U9ZnVuY3Rpb24odCl7aWYodCYmIXRoaXMuJHNjb3BlLnBhcmFtcy5oYXNFcnJvclN0YXRlKCkpe3ZhciBlPXRoaXMuJHNjb3BlLnBhcmFtcyxuPWUuc2V0dGluZ3MoKS5maWx0ZXJPcHRpb25zO2lmKGUuaGFzRmlsdGVyQ2hhbmdlcygpKXt2YXIgcj1mdW5jdGlvbigpe2UucGFnZSgxKSxlLnJlbG9hZCgpfTtuLmZpbHRlckRlbGF5P3RoaXMuZGVsYXlGaWx0ZXIocixuLmZpbHRlckRlbGF5KTpyKCl9ZWxzZSBlLnJlbG9hZCgpfX0sdC5wcm90b3R5cGUuY29tcGlsZURpcmVjdGl2ZVRlbXBsYXRlcz1mdW5jdGlvbigpe2lmKCF0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKCJuZy10YWJsZSIpKXt0aGlzLiRzY29wZS50ZW1wbGF0ZXM9e2hlYWRlcjp0aGlzLiRhdHRycy50ZW1wbGF0ZUhlYWRlcj90aGlzLiRhdHRycy50ZW1wbGF0ZUhlYWRlcjoibmctdGFibGUvaGVhZGVyLmh0bWwiLHBhZ2luYXRpb246dGhpcy4kYXR0cnMudGVtcGxhdGVQYWdpbmF0aW9uP3RoaXMuJGF0dHJzLnRlbXBsYXRlUGFnaW5hdGlvbjoibmctdGFibGUvcGFnZXIuaHRtbCJ9LHRoaXMuJGVsZW1lbnQuYWRkQ2xhc3MoIm5nLXRhYmxlIik7dmFyIHQ9dm9pZCAwLGU9ITE7ci5mb3JFYWNoKHRoaXMuJGVsZW1lbnQuY2hpbGRyZW4oKSxmdW5jdGlvbih0KXsiVEhFQUQiPT09dC50YWdOYW1lJiYoZT0hMCl9KSxlfHwodD1yLmVsZW1lbnQoJzx0aGVhZCBuZy1pbmNsdWRlPSJ0ZW1wbGF0ZXMuaGVhZGVyIj48L3RoZWFkPicsdGhpcy4kZG9jdW1lbnQpLHRoaXMuJGVsZW1lbnQucHJlcGVuZCh0KSk7dmFyIG49ci5lbGVtZW50KCc8ZGl2IG5nLXRhYmxlLXBhZ2luYXRpb249InBhcmFtcyIgdGVtcGxhdGUtdXJsPSJ0ZW1wbGF0ZXMucGFnaW5hdGlvbiI+PC9kaXY+Jyx0aGlzLiRkb2N1bWVudCk7dGhpcy4kZWxlbWVudC5hZnRlcihuKSx0JiZ0aGlzLiRjb21waWxlKHQpKHRoaXMuJHNjb3BlKSx0aGlzLiRjb21waWxlKG4pKHRoaXMuJHNjb3BlKX19LHQucHJvdG90eXBlLmxvYWRGaWx0ZXJEYXRhPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCl7cmV0dXJuIHQmJiJvYmplY3QiPT10eXBlb2YgdCYmImZ1bmN0aW9uIj09dHlwZW9mIHQudGhlbn12YXIgbj10aGlzO3IuZm9yRWFjaCh0LGZ1bmN0aW9uKHQpe3ZhciBpPXQuZmlsdGVyRGF0YShuLiRzY29wZSk7cmV0dXJuIGk/ZShpKT8oZGVsZXRlIHQuZmlsdGVyRGF0YSxpLnRoZW4oZnVuY3Rpb24oZSl7ci5pc0FycmF5KGUpfHxyLmlzRnVuY3Rpb24oZSl8fHIuaXNPYmplY3QoZSl8fChlPVtdKSx0LmRhdGE9ZX0pKTp0LmRhdGE9aTp2b2lkIGRlbGV0ZSB0LmZpbHRlckRhdGF9KX0sdC5wcm90b3R5cGUuYnVpbGRDb2x1bW5zPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj1bXTtyZXR1cm4odHx8W10pLmZvckVhY2goZnVuY3Rpb24odCl7bi5wdXNoKGUubmdUYWJsZUNvbHVtbi5idWlsZENvbHVtbih0LGUuJHNjb3BlLG4pKX0pLG59LHQucHJvdG90eXBlLnBhcnNlTmdUYWJsZUR5bmFtaWNFeHByPWZ1bmN0aW9uKHQpe2lmKCF0fHx0LmluZGV4T2YoIiB3aXRoICIpPi0xKXt2YXIgZT10LnNwbGl0KC9ccyt3aXRoXHMrLyk7cmV0dXJue3RhYmxlUGFyYW1zOmVbMF0sY29sdW1uczplWzFdfX10aHJvdyBuZXcgRXJyb3IoIlBhcnNlIGVycm9yIChleHBlY3RlZCBleGFtcGxlOiBuZy10YWJsZS1keW5hbWljPSd0YWJsZVBhcmFtcyB3aXRoIGNvbHMnKSIpfSx0LnByb3RvdHlwZS5zZXR1cEJpbmRpbmdzVG9JbnRlcm5hbFNjb3BlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy4kc2NvcGUuJHdhdGNoKHQsZnVuY3Rpb24odCl7dm9pZCAwIT09dCYmKGUuJHNjb3BlLnBhcmFtcz10KX0sITEpLHRoaXMuc2V0dXBGaWx0ZXJSb3dCaW5kaW5nc1RvSW50ZXJuYWxTY29wZSgpLHRoaXMuc2V0dXBHcm91cFJvd0JpbmRpbmdzVG9JbnRlcm5hbFNjb3BlKCl9LHQucHJvdG90eXBlLnNldHVwRmlsdGVyUm93QmluZGluZ3NUb0ludGVybmFsU2NvcGU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuJGF0dHJzLnNob3dGaWx0ZXI/dGhpcy4kc2NvcGUuJHBhcmVudC4kd2F0Y2godGhpcy4kYXR0cnMuc2hvd0ZpbHRlcixmdW5jdGlvbihlKXt0LiRzY29wZS5zaG93X2ZpbHRlcj1lfSk6dGhpcy4kc2NvcGUuJHdhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIHQuaGFzVmlzaWJsZUZpbHRlckNvbHVtbn0sZnVuY3Rpb24oZSl7dC4kc2NvcGUuc2hvd19maWx0ZXI9ZX0pLHRoaXMuJGF0dHJzLmRpc2FibGVGaWx0ZXImJnRoaXMuJHNjb3BlLiRwYXJlbnQuJHdhdGNoKHRoaXMuJGF0dHJzLmRpc2FibGVGaWx0ZXIsZnVuY3Rpb24oZSl7dC4kc2NvcGUuJGZpbHRlclJvdy5kaXNhYmxlZD1lfSl9LHQucHJvdG90eXBlLnNldHVwR3JvdXBSb3dCaW5kaW5nc1RvSW50ZXJuYWxTY29wZT1mdW5jdGlvbigpe3ZhciB0PXRoaXM7aWYodGhpcy4kc2NvcGUuJGdyb3VwUm93PXtzaG93OiExfSx0aGlzLiRhdHRycy5zaG93R3JvdXApe3ZhciBlPXRoaXMuJHBhcnNlKHRoaXMuJGF0dHJzLnNob3dHcm91cCk7dGhpcy4kc2NvcGUuJHBhcmVudC4kd2F0Y2goZSxmdW5jdGlvbihlKXt0LiRzY29wZS4kZ3JvdXBSb3cuc2hvdz1lfSksZS5hc3NpZ24mJnRoaXMuJHNjb3BlLiR3YXRjaCgiJGdyb3VwUm93LnNob3ciLGZ1bmN0aW9uKG4pe2UuYXNzaWduKHQuJHNjb3BlLiRwYXJlbnQsbil9KX1lbHNlIHRoaXMuJHNjb3BlLiR3YXRjaCgicGFyYW1zLmhhc0dyb3VwKCkiLGZ1bmN0aW9uKGUpe3QuJHNjb3BlLiRncm91cFJvdy5zaG93PWV9KX0sdC5wcm90b3R5cGUuZ2V0VmlzaWJsZUNvbHVtbnM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3JldHVybih0aGlzLiRzY29wZS4kY29sdW1uc3x8W10pLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS5zaG93KHQuJHNjb3BlKX0pfSx0LnByb3RvdHlwZS5zdWJzY3JpYmVUb1RhYmxlRXZlbnRzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLiRzY29wZS4kd2F0Y2goInBhcmFtcy5pc0RhdGFSZWxvYWRSZXF1aXJlZCgpIixmdW5jdGlvbihlKXt0Lm9uRGF0YVJlbG9hZFN0YXR1c0NoYW5nZShlKX0pLHRoaXMubmdUYWJsZUV2ZW50c0NoYW5uZWwub25BZnRlclJlbG9hZERhdGEoZnVuY3Rpb24oZSxuKXt2YXIgcj10LmdldFZpc2libGVDb2x1bW5zKCk7ZS5oYXNHcm91cCgpPyh0LiRzY29wZS4kZ3JvdXBzPW58fFtdLHQuJHNjb3BlLiRncm91cHMudmlzaWJsZUNvbHVtbkNvdW50PXIubGVuZ3RoKToodC4kc2NvcGUuJGRhdGE9bnx8W10sdC4kc2NvcGUuJGRhdGEudmlzaWJsZUNvbHVtbkNvdW50PXIubGVuZ3RoKX0sdGhpcy4kc2NvcGUsZnVuY3Rpb24oZSl7cmV0dXJuIHQuJHNjb3BlLnBhcmFtcz09PWV9KSx0aGlzLm5nVGFibGVFdmVudHNDaGFubmVsLm9uUGFnZXNDaGFuZ2VkKGZ1bmN0aW9uKGUsbil7dC4kc2NvcGUucGFnZXM9bn0sdGhpcy4kc2NvcGUsZnVuY3Rpb24oZSl7cmV0dXJuIHQuJHNjb3BlLnBhcmFtcz09PWV9KX0sdC5wcm90b3R5cGUuc29tZT1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0hMSxyPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBpPXRbcl07aWYoZShpKSl7bj0hMDticmVha319cmV0dXJuIG59LHR9KCk7YS4kaW5qZWN0PVsiJHNjb3BlIiwiJHRpbWVvdXQiLCIkcGFyc2UiLCIkY29tcGlsZSIsIiRhdHRycyIsIiRlbGVtZW50IiwiJGRvY3VtZW50IiwibmdUYWJsZUNvbHVtbiIsIm5nVGFibGVFdmVudHNDaGFubmVsIl19LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcih0KXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodCl9ZnVuY3Rpb24gaSgpe3JldHVybntyZXN0cmljdDoiQSIscHJpb3JpdHk6MTAwMSxzY29wZTohMCxjb250cm9sbGVyOiJuZ1RhYmxlQ29udHJvbGxlciIsY29tcGlsZTpmdW5jdGlvbih0KXt2YXIgZT1yKHRbMF0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRyIikpLG49ZS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIWEuZWxlbWVudCh0KS5oYXNDbGFzcygibmctdGFibGUtZ3JvdXAiKX0pWzBdO2lmKG4pcmV0dXJuIHIobi5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGQiKSkuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgZT1hLmVsZW1lbnQodCksbj1mdW5jdGlvbih0KXtyZXR1cm4gZS5hdHRyKCJ4LWRhdGEtIit0KXx8ZS5hdHRyKCJkYXRhLSIrdCl8fGUuYXR0cih0KX0scj1uKCJ0aXRsZSIpO3J8fGUuYXR0cigiZGF0YS10aXRsZS10ZXh0Iiwie3skY29sdW1uc1skaW5kZXhdLnRpdGxlQWx0KHRoaXMpIHx8ICRjb2x1bW5zWyRpbmRleF0udGl0bGUodGhpcyl9fSIpO3ZhciBpPWUuYXR0cigibmctaWYiKTtpfHxlLmF0dHIoIm5nLWlmIiwiJGNvbHVtbnNbJGluZGV4XS5zaG93KHRoaXMpIil9KSxmdW5jdGlvbih0LGUsbixyKXt2YXIgaT1yLnBhcnNlTmdUYWJsZUR5bmFtaWNFeHByKG4ubmdUYWJsZUR5bmFtaWMpO3Iuc2V0dXBCaW5kaW5nc1RvSW50ZXJuYWxTY29wZShpLnRhYmxlUGFyYW1zKSxyLmNvbXBpbGVEaXJlY3RpdmVUZW1wbGF0ZXMoKSx0LiR3YXRjaENvbGxlY3Rpb24oaS5jb2x1bW5zLGZ1bmN0aW9uKGUpe3QuJGNvbHVtbnM9ci5idWlsZENvbHVtbnMoZSksci5sb2FkRmlsdGVyRGF0YSh0LiRjb2x1bW5zKX0pfX19fXZhciBhPW4oMCk7bi5uKGEpO2UuYT1pLGkuJGluamVjdD1bXX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKCl7dmFyIHQ9e3Jlc3RyaWN0OiJFIixyZXBsYWNlOiEwLHRlbXBsYXRlVXJsOmksc2NvcGU6ITAsY29udHJvbGxlcjoibmdUYWJsZUZpbHRlclJvd0NvbnRyb2xsZXIiLGNvbnRyb2xsZXJBczoiJGN0cmwifTtyZXR1cm4gdH1lLmE9cjt2YXIgaT1uKDM1KTtyLiRpbmplY3Q9W119LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7bi5kKGUsImEiLGZ1bmN0aW9uKCl7cmV0dXJuIHJ9KTt2YXIgcj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXt0aGlzLmNvbmZpZz1lLHQuZ2V0RmlsdGVyUGxhY2Vob2xkZXJWYWx1ZT10aGlzLmdldEZpbHRlclBsYWNlaG9sZGVyVmFsdWUuYmluZCh0aGlzKX1yZXR1cm4gdC5wcm90b3R5cGUuZ2V0RmlsdGVyQ2VsbENzcz1mdW5jdGlvbih0LGUpe2lmKCJob3Jpem9udGFsIiE9PWUpcmV0dXJuInMxMiI7dmFyIG49T2JqZWN0LmtleXModCkubGVuZ3RoLHI9cGFyc2VJbnQoKDEyL24pLnRvU3RyaW5nKCksMTApO3JldHVybiJzIityfSx0LnByb3RvdHlwZS5nZXRGaWx0ZXJQbGFjZWhvbGRlclZhbHVlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0PyIiOnQucGxhY2Vob2xkZXJ9LHR9KCk7ci4kaW5qZWN0PVsiJHNjb3BlIiwibmdUYWJsZUZpbHRlckNvbmZpZyJdfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIoKXt2YXIgdD17cmVzdHJpY3Q6IkUiLHJlcGxhY2U6ITAsdGVtcGxhdGVVcmw6aSxzY29wZTohMCxjb250cm9sbGVyOiJuZ1RhYmxlR3JvdXBSb3dDb250cm9sbGVyIixjb250cm9sbGVyQXM6IiRjdHJsIn07cmV0dXJuIHR9ZS5hPXI7dmFyIGk9big0MCk7ci4kaW5qZWN0PVtdfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO24uZChlLCJhIixmdW5jdGlvbigpe3JldHVybiByfSk7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3ZhciBlPXRoaXM7dGhpcy4kc2NvcGU9dCx0aGlzLmdyb3VwRm5zPVtdLHQuJHdhdGNoKCJwYXJhbXMuZ3JvdXAoKSIsZnVuY3Rpb24odCl7ZS5zZXRHcm91cCh0KX0sITApfXJldHVybiB0LnByb3RvdHlwZS5nZXRHcm91cGFibGVzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPXRoaXMuJHNjb3BlLiRjb2x1bW5zLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4hIWUuZ3JvdXBhYmxlKHQuJHNjb3BlKX0pO3JldHVybiB0aGlzLmdyb3VwRm5zLmNvbmNhdChlKX0sdC5wcm90b3R5cGUuZ2V0R3JvdXBUaXRsZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5pc0dyb3VwaW5nRnVuYyh0KT90LnRpdGxlOnQudGl0bGUodGhpcy4kc2NvcGUpfSx0LnByb3RvdHlwZS5nZXRWaXNpYmxlQ29sdW1ucz1mdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJuIHRoaXMuJHNjb3BlLiRjb2x1bW5zLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS5zaG93KHQuJHNjb3BlKX0pfSx0LnByb3RvdHlwZS5ncm91cEJ5PWZ1bmN0aW9uKHQpe3RoaXMuaXNTZWxlY3RlZEdyb3VwKHQpP3RoaXMuY2hhbmdlU29ydERpcmVjdGlvbigpOnRoaXMuaXNHcm91cGluZ0Z1bmModCk/dGhpcy4kc2NvcGUucGFyYW1zLmdyb3VwKHQpOnRoaXMuJHNjb3BlLnBhcmFtcy5ncm91cCh0Lmdyb3VwYWJsZSh0aGlzLiRzY29wZSkpfSx0LnByb3RvdHlwZS5pc1NlbGVjdGVkR3JvdXA9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaXNHcm91cGluZ0Z1bmModCk/dD09PXRoaXMuJHNjb3BlLiRzZWxHcm91cDp0Lmdyb3VwYWJsZSh0aGlzLiRzY29wZSk9PT10aGlzLiRzY29wZS4kc2VsR3JvdXB9LHQucHJvdG90eXBlLnRvZ2dsZURldGFpbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRzY29wZS5wYXJhbXMuc2V0dGluZ3MoKS5ncm91cE9wdGlvbnMuaXNFeHBhbmRlZD0hdGhpcy4kc2NvcGUucGFyYW1zLnNldHRpbmdzKCkuZ3JvdXBPcHRpb25zLmlzRXhwYW5kZWQsdGhpcy4kc2NvcGUucGFyYW1zLnJlbG9hZCgpfSx0LnByb3RvdHlwZS5jaGFuZ2VTb3J0RGlyZWN0aW9uPWZ1bmN0aW9uKCl7dmFyIHQ7dD10aGlzLiRzY29wZS5wYXJhbXMuaGFzR3JvdXAodGhpcy4kc2NvcGUuJHNlbEdyb3VwLCJhc2MiKT8iZGVzYyI6dGhpcy4kc2NvcGUucGFyYW1zLmhhc0dyb3VwKHRoaXMuJHNjb3BlLiRzZWxHcm91cCwiZGVzYyIpPyIiOiJhc2MiLHRoaXMuJHNjb3BlLnBhcmFtcy5ncm91cCh0aGlzLiRzY29wZS4kc2VsR3JvdXAsdCl9LHQucHJvdG90eXBlLmZpbmRHcm91cENvbHVtbj1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3JldHVybiB0aGlzLiRzY29wZS4kY29sdW1ucy5maWx0ZXIoZnVuY3Rpb24obil7cmV0dXJuIG4uZ3JvdXBhYmxlKGUuJHNjb3BlKT09PXR9KVswXX0sdC5wcm90b3R5cGUuaXNHcm91cGluZ0Z1bmM9ZnVuY3Rpb24odCl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHR9LHQucHJvdG90eXBlLnNldEdyb3VwPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZmluZEdyb3VwQ29sdW1uKHRoaXMuJHNjb3BlLiRzZWxHcm91cCk7aWYoZSYmZS5zaG93LmFzc2lnbiYmZS5zaG93LmFzc2lnbih0aGlzLiRzY29wZSwhMCksdGhpcy5pc0dyb3VwaW5nRnVuYyh0KSl0aGlzLmdyb3VwRm5zPVt0XSx0aGlzLiRzY29wZS4kc2VsR3JvdXA9dCx0aGlzLiRzY29wZS4kc2VsR3JvdXBUaXRsZT10LnRpdGxlfHwiIjtlbHNle3ZhciBuPU9iamVjdC5rZXlzKHR8fHt9KVswXSxyPXRoaXMuZmluZEdyb3VwQ29sdW1uKG4pO3ImJih0aGlzLiRzY29wZS4kc2VsR3JvdXBUaXRsZT1yLnRpdGxlKHRoaXMuJHNjb3BlKSx0aGlzLiRzY29wZS4kc2VsR3JvdXA9bixyLnNob3cuYXNzaWduJiZyLnNob3cuYXNzaWduKHRoaXMuJHNjb3BlLCExKSl9fSx0fSgpO3IuJGluamVjdD1bIiRzY29wZSJdfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCxlLG4pe3JldHVybntyZXN0cmljdDoiQSIsc2NvcGU6e3BhcmFtczoiPW5nVGFibGVQYWdpbmF0aW9uIix0ZW1wbGF0ZVVybDoiPSJ9LHJlcGxhY2U6ITEsbGluazpmdW5jdGlvbihyLGEpe24ub25BZnRlclJlbG9hZERhdGEoZnVuY3Rpb24odCl7ci5wYWdlcz10LmdlbmVyYXRlUGFnZXNBcnJheSgpfSxyLGZ1bmN0aW9uKHQpe3JldHVybiB0PT09ci5wYXJhbXN9KSxyLiR3YXRjaCgidGVtcGxhdGVVcmwiLGZ1bmN0aW9uKG4pe2lmKHZvaWQgMCE9PW4pe3ZhciBzPWkuZWxlbWVudCgnPGRpdiBuZy1pbmNsdWRlPSJ0ZW1wbGF0ZVVybCI+PC9kaXY+JyxlKTthLmFwcGVuZChzKSx0KHMpKHIpfX0pfX19dmFyIGk9bigwKTtuLm4oaSk7ZS5hPXIsci4kaW5qZWN0PVsiJGNvbXBpbGUiLCIkZG9jdW1lbnQiLCJuZ1RhYmxlRXZlbnRzQ2hhbm5lbCJdfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIoKXt2YXIgdD17cmVzdHJpY3Q6IkEiLGNvbnRyb2xsZXI6aX07cmV0dXJuIHR9bi5kKGUsImEiLGZ1bmN0aW9uKCl7cmV0dXJuIHJ9KSxyLiRpbmplY3Q9W107dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxuLHIpe3ZhciBpPXRoaXM7dGhpcy4kc2NvcGU9dCx0aGlzLiRhdHRycz1uLHRoaXMuJHE9cix0aGlzLiRjb2x1bW49ZShuLm5nVGFibGVTZWxlY3RGaWx0ZXJEcykodCksdC4kd2F0Y2goZnVuY3Rpb24oKXtyZXR1cm4gaS4kY29sdW1uJiZpLiRjb2x1bW4uZGF0YX0sZnVuY3Rpb24oKXtpLmJpbmREYXRhU291cmNlKCl9KX1yZXR1cm4gdC5wcm90b3R5cGUuYmluZERhdGFTb3VyY2U9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuZ2V0U2VsZWN0TGlzdERhdGEodGhpcy4kY29sdW1uKS50aGVuKGZ1bmN0aW9uKGUpe2UmJiF0Lmhhc0VtcHR5T3B0aW9uKGUpJiZlLnVuc2hpZnQoe2lkOiIiLHRpdGxlOiIifSksZT1lfHxbXSx0LiRzY29wZS4kc2VsZWN0RGF0YT1lfSl9LHQucHJvdG90eXBlLmhhc0VtcHR5T3B0aW9uPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0hMSxuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciByPXRbbl07aWYociYmIiI9PT1yLmlkKXtlPSEwO2JyZWFrfX1yZXR1cm4gZX0sdC5wcm90b3R5cGUuZ2V0U2VsZWN0TGlzdERhdGE9ZnVuY3Rpb24odCl7dmFyIGUsbj10LmRhdGE7cmV0dXJuIGU9ImZ1bmN0aW9uIj09dHlwZW9mIG4/bigpOm4sdGhpcy4kcS53aGVuKGUpfSx0fSgpO2kuJGluamVjdD1bIiRzY29wZSIsIiRwYXJzZSIsIiRhdHRycyIsIiRxIl19LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcigpe3ZhciB0PXtyZXN0cmljdDoiRSIscmVwbGFjZTohMCx0ZW1wbGF0ZVVybDppLHNjb3BlOiEwLGNvbnRyb2xsZXI6Im5nVGFibGVTb3J0ZXJSb3dDb250cm9sbGVyIixjb250cm9sbGVyQXM6IiRjdHJsIn07cmV0dXJuIHR9ZS5hPXI7dmFyIGk9big0Myk7ci4kaW5qZWN0PVtdfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO24uZChlLCJhIixmdW5jdGlvbigpe3JldHVybiByfSk7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMuJHNjb3BlPXR9cmV0dXJuIHQucHJvdG90eXBlLnNvcnRCeT1mdW5jdGlvbih0LGUpe3ZhciBuPXQuc29ydGFibGUmJnQuc29ydGFibGUoKTtpZihuJiYic3RyaW5nIj09dHlwZW9mIG4pe3ZhciByPXRoaXMuJHNjb3BlLnBhcmFtcy5zZXR0aW5ncygpLmRlZmF1bHRTb3J0LGk9ImFzYyI9PT1yPyJkZXNjIjoiYXNjIixhPXRoaXMuJHNjb3BlLnBhcmFtcy5zb3J0aW5nKCkmJnRoaXMuJHNjb3BlLnBhcmFtcy5zb3J0aW5nKClbbl0mJnRoaXMuJHNjb3BlLnBhcmFtcy5zb3J0aW5nKClbbl09PT1yLHM9ZS5jdHJsS2V5fHxlLm1ldGFLZXk/dGhpcy4kc2NvcGUucGFyYW1zLnNvcnRpbmcoKTp7fTtzW25dPWE/aTpyLHRoaXMuJHNjb3BlLnBhcmFtcy5wYXJhbWV0ZXJzKHtzb3J0aW5nOnN9KX19LHR9KCk7ci4kaW5qZWN0PVsiJHNjb3BlIl19LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7bi5kKGUsImEiLGZ1bmN0aW9uKCl7cmV0dXJuIHJ9KTt2YXIgcj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt0aGlzLmFwcGx5RmlsdGVyPSEwLHRoaXMuYXBwbHlQYWdpbmc9ITAsdGhpcy5hcHBseVNvcnQ9ITB9cmV0dXJuIHR9KCl9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIHI9bigwKTtuLm4ocik7bi5kKGUsImEiLGZ1bmN0aW9uKCl7cmV0dXJuIGl9KTt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtmdW5jdGlvbiB0KHQsbil7ZnVuY3Rpb24gaShuKXt2YXIgaT1uLnNldHRpbmdzKCkuZmlsdGVyT3B0aW9ucztyZXR1cm4gci5pc0Z1bmN0aW9uKGkuZmlsdGVyRm4pP2kuZmlsdGVyRm46dChpLmZpbHRlckZpbHRlck5hbWV8fGUuZmlsdGVyRmlsdGVyTmFtZSl9ZnVuY3Rpb24gYShuKXtyZXR1cm4gdChlLnNvcnRpbmdGaWx0ZXJOYW1lKX1mdW5jdGlvbiBzKHQsZSl7aWYoIWUuaGFzRmlsdGVyKCkpcmV0dXJuIHQ7dmFyIG49ZS5maWx0ZXIoITApLHI9T2JqZWN0LmtleXMobiksYT1yLnJlZHVjZShmdW5jdGlvbih0LGUpe3JldHVybiB0PWModCxuW2VdLGUpfSx7fSkscz1pKGUpO3JldHVybiBzLmNhbGwoZSx0LGEsZS5zZXR0aW5ncygpLmZpbHRlck9wdGlvbnMuZmlsdGVyQ29tcGFyYXRvcil9ZnVuY3Rpb24gbyh0LGUpe3ZhciBuPXQuc2xpY2UoKGUucGFnZSgpLTEpKmUuY291bnQoKSxlLnBhZ2UoKSplLmNvdW50KCkpO3JldHVybiBlLnRvdGFsKHQubGVuZ3RoKSxufWZ1bmN0aW9uIGwodCxlKXt2YXIgbj1lLm9yZGVyQnkoKSxyPWEoZSk7cmV0dXJuIG4ubGVuZ3RoP3IodCxuKTp0fWZ1bmN0aW9uIHUodCxlKXtpZihudWxsPT10KXJldHVybltdO3ZhciByPWUuc2V0dGluZ3MoKS5kYXRhT3B0aW9ucyxpPXIuYXBwbHlGaWx0ZXI/cyh0LGUpOnQ7bi5wdWJsaXNoQWZ0ZXJEYXRhRmlsdGVyZWQoZSxpKTt2YXIgYT1yLmFwcGx5U29ydD9sKGksZSk6aTtyZXR1cm4gbi5wdWJsaXNoQWZ0ZXJEYXRhU29ydGVkKGUsYSksci5hcHBseVBhZ2luZz9vKGEsZSk6YX1mdW5jdGlvbiBjKHQsZSxuKXt2YXIgcj1uLnNwbGl0KCIuIiksaT10LGE9cltyLmxlbmd0aC0xXSxzPWksbz1yLnNsaWNlKDAsci5sZW5ndGgtMSk7cmV0dXJuIG8uZm9yRWFjaChmdW5jdGlvbih0KXtzLmhhc093blByb3BlcnR5KHQpfHwoc1t0XT17fSkscz1zW3RdfSksc1thXT1lLGl9cmV0dXJuIHUuYXBwbHlQYWdpbmc9byx1LmdldEZpbHRlckZuPWksdS5nZXRPcmRlckJ5Rm49YSx1fXRoaXMuZmlsdGVyRmlsdGVyTmFtZT0iZmlsdGVyIix0aGlzLnNvcnRpbmdGaWx0ZXJOYW1lPSJvcmRlckJ5Ijt2YXIgZT10aGlzO3RoaXMuJGdldD10LHQuJGluamVjdD1bIiRmaWx0ZXIiLCJuZ1RhYmxlRXZlbnRzQ2hhbm5lbCJdfXJldHVybiB0fSgpfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO24uZChlLCJhIixmdW5jdGlvbigpe3JldHVybiByfSk7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dGhpcy5maWx0ZXJDb21wYXJhdG9yPXZvaWQgMCx0aGlzLmZpbHRlckRlbGF5PTUwMCx0aGlzLmZpbHRlckRlbGF5VGhyZXNob2xkPTFlNCx0aGlzLmZpbHRlckZpbHRlck5hbWU9dm9pZCAwLHRoaXMuZmlsdGVyRm49dm9pZCAwLHRoaXMuZmlsdGVyTGF5b3V0PSJzdGFjayJ9cmV0dXJuIHR9KCl9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcih0LGUpe2Z1bmN0aW9uIHIocil7dmFyIG8sbCx1PXIuZ3JvdXAoKTtpZihuLmkocy5hKSh1KSlvPXUsbD11LnNvcnREaXJlY3Rpb247ZWxzZXt2YXIgYz1PYmplY3Qua2V5cyh1KVswXTtsPXVbY10sbz1mdW5jdGlvbih0KXtyZXR1cm4gaSh0LGMpfX12YXIgcD1yLnNldHRpbmdzKCksZj1wLmRhdGFPcHRpb25zO3AuZGF0YU9wdGlvbnM9YS5leHRlbmQoe30sZix7YXBwbHlQYWdpbmc6ITF9KTt2YXIgaD1wLmdldERhdGEsZz10LndoZW4oaChyKSk7cmV0dXJuIGcudGhlbihmdW5jdGlvbih0KXt2YXIgaT17fTthLmZvckVhY2godCxmdW5jdGlvbih0KXt2YXIgZT1vKHQpO2lbZV09aVtlXXx8e2RhdGE6W10sJGhpZGVSb3dzOiFwLmdyb3VwT3B0aW9ucy5pc0V4cGFuZGVkLHZhbHVlOmV9LGlbZV0uZGF0YS5wdXNoKHQpfSk7dmFyIHU9W107Zm9yKHZhciBjIGluIGkpdS5wdXNoKGlbY10pO2lmKGwpe3ZhciBmPWUuZ2V0T3JkZXJCeUZuKCksaD1uLmkocy5iKSh7dmFsdWU6bH0pO3U9Zih1LGgpfXJldHVybiBlLmFwcGx5UGFnaW5nKHUscil9KS5maW5hbGx5KGZ1bmN0aW9uKCl7cC5kYXRhT3B0aW9ucz1mfSl9cmV0dXJuIHJ9ZnVuY3Rpb24gaSh0LGUpe3ZhciBuO2lmKG49InN0cmluZyI9PXR5cGVvZiBlP2Uuc3BsaXQoIi4iKTplLHZvaWQgMCE9PXQpe2lmKDA9PT1uLmxlbmd0aClyZXR1cm4gdDtpZihudWxsIT09dClyZXR1cm4gaSh0W25bMF1dLG4uc2xpY2UoMSkpfX12YXIgYT1uKDApLHM9KG4ubihhKSxuKDEyKSk7ZS5hPXIsci4kaW5qZWN0PVsiJHEiLCJuZ1RhYmxlRGVmYXVsdEdldERhdGEiXX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgcj1uKDcpO24uZChlLCJhIixmdW5jdGlvbigpe3JldHVybiByLmF9KX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtuLmQoZSwiYSIsZnVuY3Rpb24oKXtyZXR1cm4gcn0pO3ZhciByPXtwYXJhbXM6e30sc2V0dGluZ3M6e319fSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCxlLG4sYSl7dm9pZCAwPT09biYmKG49ZnVuY3Rpb24oKXtyZXR1cm4hMX0pLHZvaWQgMD09PWEmJihhPWZ1bmN0aW9uKCl7fSk7Zm9yKHZhciBzPU9iamVjdC5rZXlzKGUpLG89MCxsPXM7bzxsLmxlbmd0aDtvKyspe3ZhciB1PWxbb10sYz1lW3VdO2lmKHZvaWQgMCE9PWMpe3ZhciBwPXRbdV0sZj1hKHAsYyx1KTt2b2lkIDAhPT1mP3RbdV09ZjppLmlzQXJyYXkoYyk/dFt1XT1jLnNsaWNlKCk6aS5pc09iamVjdChjKT90W3VdPXIocCxjKTp0W3VdPWN9ZWxzZSBuKHUsdCkmJih0W3VdPWMpfXJldHVybiB0fXZhciBpPW4oMCk7bi5uKGkpO2UuYT1yfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCl7aWYoIXQuaXNJbml0aWFsaXplZCl0aHJvdyBuZXcgRXJyb3IoIkNsYXNzIHVzZWQgYmVmb3JlIGluaXRpYWxpemVkLiBIaW50OiBpdCBpcyBvbmx5IHNhZmUgdG8gdXNlIHRoaXMgY2xhc3MgYWZ0ZXIgYWxsIHJ1biBibG9ja3MgKG5nIDEpIC8gYXBwIGluaXRpYWxpemVycyAobmcgMikgaGF2ZSBleGVjdXRlZC4iKX1lLmE9cn0sZnVuY3Rpb24odCxlLG4pe3ZhciByPSJuZy10YWJsZS9maWx0ZXJSb3cuaHRtbCIsaT0nPHRyIG5nLXNob3c9c2hvd19maWx0ZXIgY2xhc3M9bmctdGFibGUtZmlsdGVycz4gPHRoIGRhdGEtdGl0bGUtdGV4dD0ie3skY29sdW1uLnRpdGxlQWx0KHRoaXMpIHx8ICRjb2x1bW4udGl0bGUodGhpcyl9fSIgbmctcmVwZWF0PSIkY29sdW1uIGluICRjb2x1bW5zIiBuZy1pZj0kY29sdW1uLnNob3codGhpcykgY2xhc3M9ImZpbHRlciB7eyRjb2x1bW4uY2xhc3ModGhpcyl9fSIgbmctY2xhc3M9InBhcmFtcy5zZXR0aW5ncygpLmZpbHRlck9wdGlvbnMuZmlsdGVyTGF5b3V0ID09PSBcJ2hvcml6b250YWxcJyA/IFwnZmlsdGVyLWhvcml6b250YWxcJyA6IFwnXCciPiA8ZGl2IG5nLXJlcGVhdD0iKG5hbWUsIGZpbHRlcikgaW4gJGNvbHVtbi5maWx0ZXIodGhpcykiIG5nLWluY2x1ZGU9JGN0cmwuY29uZmlnLmdldFRlbXBsYXRlVXJsKGZpbHRlcikgY2xhc3M9ZmlsdGVyLWNlbGwgbmctY2xhc3M9IlskY3RybC5nZXRGaWx0ZXJDZWxsQ3NzKCRjb2x1bW4uZmlsdGVyKHRoaXMpLCBwYXJhbXMuc2V0dGluZ3MoKS5maWx0ZXJPcHRpb25zLmZpbHRlckxheW91dCksICRsYXN0ID8gXCdsYXN0XCcgOiBcJ1wnXSI+IDwvZGl2PiA8L3RoPiA8L3RyPiAnLGE9bigwKTthLm1vZHVsZSgibmciKS5ydW4oWyIkdGVtcGxhdGVDYWNoZSIsZnVuY3Rpb24odCl7dC5wdXQocixpKX1dKSx0LmV4cG9ydHM9cn0sZnVuY3Rpb24odCxlLG4pe3ZhciByPSJuZy10YWJsZS9maWx0ZXJzL251bWJlci5odG1sIixpPSc8aW5wdXQgdHlwZT1udW1iZXIgbmFtZT17e25hbWV9fSBuZy1kaXNhYmxlZD0kZmlsdGVyUm93LmRpc2FibGVkIG5nLW1vZGVsPXBhcmFtcy5maWx0ZXIoKVtuYW1lXSBjbGFzcz0iaW5wdXQtZmlsdGVyIGZvcm0tY29udHJvbCIgcGxhY2Vob2xkZXI9Int7Z2V0RmlsdGVyUGxhY2Vob2xkZXJWYWx1ZShmaWx0ZXIsIG5hbWUpfX0iLz4gJyxhPW4oMCk7YS5tb2R1bGUoIm5nIikucnVuKFsiJHRlbXBsYXRlQ2FjaGUiLGZ1bmN0aW9uKHQpe3QucHV0KHIsaSl9XSksdC5leHBvcnRzPXJ9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj0ibmctdGFibGUvZmlsdGVycy9zZWxlY3QtbXVsdGlwbGUuaHRtbCIsaT0nPHNlbGVjdCBuZy1vcHRpb25zPSJkYXRhLmlkIGFzIGRhdGEudGl0bGUgZm9yIGRhdGEgaW4gJGNvbHVtbi5kYXRhIiBuZy1kaXNhYmxlZD0kZmlsdGVyUm93LmRpc2FibGVkIG11bHRpcGxlPW11bHRpcGxlIG5nLW11bHRpcGxlPXRydWUgbmctbW9kZWw9cGFyYW1zLmZpbHRlcigpW25hbWVdIGNsYXNzPSJmaWx0ZXIgZmlsdGVyLXNlbGVjdC1tdWx0aXBsZSBmb3JtLWNvbnRyb2wiIG5hbWU9e3tuYW1lfX0+IDwvc2VsZWN0PiAnLGE9bigwKTsKYS5tb2R1bGUoIm5nIikucnVuKFsiJHRlbXBsYXRlQ2FjaGUiLGZ1bmN0aW9uKHQpe3QucHV0KHIsaSl9XSksdC5leHBvcnRzPXJ9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj0ibmctdGFibGUvZmlsdGVycy9zZWxlY3QuaHRtbCIsaT0nPHNlbGVjdCBuZy1vcHRpb25zPSJkYXRhLmlkIGFzIGRhdGEudGl0bGUgZm9yIGRhdGEgaW4gJHNlbGVjdERhdGEiIG5nLXRhYmxlLXNlbGVjdC1maWx0ZXItZHM9JGNvbHVtbiBuZy1kaXNhYmxlZD0kZmlsdGVyUm93LmRpc2FibGVkIG5nLW1vZGVsPXBhcmFtcy5maWx0ZXIoKVtuYW1lXSBjbGFzcz0iZmlsdGVyIGZpbHRlci1zZWxlY3QgZm9ybS1jb250cm9sIiBuYW1lPXt7bmFtZX19PiA8b3B0aW9uIHN0eWxlPWRpc3BsYXk6bm9uZSB2YWx1ZT0iIj48L29wdGlvbj4gPC9zZWxlY3Q+ICcsYT1uKDApO2EubW9kdWxlKCJuZyIpLnJ1bihbIiR0ZW1wbGF0ZUNhY2hlIixmdW5jdGlvbih0KXt0LnB1dChyLGkpfV0pLHQuZXhwb3J0cz1yfSxmdW5jdGlvbih0LGUsbil7dmFyIHI9Im5nLXRhYmxlL2ZpbHRlcnMvdGV4dC5odG1sIixpPSc8aW5wdXQgdHlwZT10ZXh0IG5hbWU9e3tuYW1lfX0gbmctZGlzYWJsZWQ9JGZpbHRlclJvdy5kaXNhYmxlZCBuZy1tb2RlbD1wYXJhbXMuZmlsdGVyKClbbmFtZV0gY2xhc3M9ImlucHV0LWZpbHRlciBmb3JtLWNvbnRyb2wiIHBsYWNlaG9sZGVyPSJ7e2dldEZpbHRlclBsYWNlaG9sZGVyVmFsdWUoZmlsdGVyLCBuYW1lKX19Ii8+ICcsYT1uKDApO2EubW9kdWxlKCJuZyIpLnJ1bihbIiR0ZW1wbGF0ZUNhY2hlIixmdW5jdGlvbih0KXt0LnB1dChyLGkpfV0pLHQuZXhwb3J0cz1yfSxmdW5jdGlvbih0LGUsbil7dmFyIHI9Im5nLXRhYmxlL2dyb3VwUm93Lmh0bWwiLGk9Jzx0ciBuZy1pZj1wYXJhbXMuaGFzR3JvdXAoKSBuZy1zaG93PSRncm91cFJvdy5zaG93IGNsYXNzPW5nLXRhYmxlLWdyb3VwLWhlYWRlcj4gPHRoIGNvbHNwYW49e3skY3RybC5nZXRWaXNpYmxlQ29sdW1ucygpLmxlbmd0aH19IGNsYXNzPXNvcnRhYmxlIG5nLWNsYXNzPSJ7XG4gICAgICAgICAgICAgICAgICAgIFwnc29ydC1hc2NcJzogcGFyYW1zLmhhc0dyb3VwKCRzZWxHcm91cCwgXCdhc2NcJyksXG4gICAgICAgICAgICAgICAgICAgIFwnc29ydC1kZXNjXCc6cGFyYW1zLmhhc0dyb3VwKCRzZWxHcm91cCwgXCdkZXNjXCcpXG4gICAgICAgICAgICAgICAgICB9Ij4gPGEgaHJlZj0iIiBuZy1jbGljaz0iaXNTZWxlY3Rvck9wZW4gPSAhaXNTZWxlY3Rvck9wZW4iIGNsYXNzPW5nLXRhYmxlLWdyb3VwLXNlbGVjdG9yPiA8c3Ryb25nIGNsYXNzPXNvcnQtaW5kaWNhdG9yPnt7JHNlbEdyb3VwVGl0bGV9fTwvc3Ryb25nPiA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRlZmF1bHQgYnRuLXhzIG5nLXRhYmxlLWdyb3VwLWNsb3NlIiBuZy1jbGljaz0iJGdyb3VwUm93LnNob3cgPSBmYWxzZTsgJGV2ZW50LnByZXZlbnREZWZhdWx0KCk7ICRldmVudC5zdG9wUHJvcGFnYXRpb24oKTsiPiA8c3BhbiBjbGFzcz0iZ2x5cGhpY29uIGdseXBoaWNvbi1yZW1vdmUiPjwvc3Bhbj4gPC9idXR0b24+IDxidXR0b24gY2xhc3M9ImJ0biBidG4tZGVmYXVsdCBidG4teHMgbmctdGFibGUtZ3JvdXAtdG9nZ2xlIiBuZy1jbGljaz0iJGN0cmwudG9nZ2xlRGV0YWlsKCk7ICRldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7Ij4gPHNwYW4gY2xhc3M9Z2x5cGhpY29uIG5nLWNsYXNzPSJ7XG4gICAgICAgICAgICAgICAgICAgIFwnZ2x5cGhpY29uLXJlc2l6ZS1zbWFsbFwnOiBwYXJhbXMuc2V0dGluZ3MoKS5ncm91cE9wdGlvbnMuaXNFeHBhbmRlZCxcbiAgICAgICAgICAgICAgICAgICAgXCdnbHlwaGljb24tcmVzaXplLWZ1bGxcJzogIXBhcmFtcy5zZXR0aW5ncygpLmdyb3VwT3B0aW9ucy5pc0V4cGFuZGVkXG4gICAgICAgICAgICAgICAgfSI+PC9zcGFuPiA8L2J1dHRvbj4gPC9hPiA8ZGl2IGNsYXNzPWxpc3QtZ3JvdXAgbmctaWY9aXNTZWxlY3Rvck9wZW4+IDxhIGhyZWY9IiIgY2xhc3M9bGlzdC1ncm91cC1pdGVtIG5nLXJlcGVhdD0iZ3JvdXAgaW4gJGN0cmwuZ2V0R3JvdXBhYmxlcygpIiBuZy1jbGljaz0kY3RybC5ncm91cEJ5KGdyb3VwKT4gPHN0cm9uZz57eyAkY3RybC5nZXRHcm91cFRpdGxlKGdyb3VwKX19PC9zdHJvbmc+IDxzdHJvbmcgbmctY2xhc3M9IiRjdHJsLmlzU2VsZWN0ZWRHcm91cChncm91cCkgJiYgXCdzb3J0LWluZGljYXRvclwnIj48L3N0cm9uZz4gPC9hPiA8L2Rpdj4gPC90aD4gPC90cj4gJyxhPW4oMCk7YS5tb2R1bGUoIm5nIikucnVuKFsiJHRlbXBsYXRlQ2FjaGUiLGZ1bmN0aW9uKHQpe3QucHV0KHIsaSl9XSksdC5leHBvcnRzPXJ9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj0ibmctdGFibGUvaGVhZGVyLmh0bWwiLGk9IjxuZy10YWJsZS1ncm91cC1yb3c+PC9uZy10YWJsZS1ncm91cC1yb3c+IDxuZy10YWJsZS1zb3J0ZXItcm93PjwvbmctdGFibGUtc29ydGVyLXJvdz4gPG5nLXRhYmxlLWZpbHRlci1yb3c+PC9uZy10YWJsZS1maWx0ZXItcm93PiAiLGE9bigwKTthLm1vZHVsZSgibmciKS5ydW4oWyIkdGVtcGxhdGVDYWNoZSIsZnVuY3Rpb24odCl7dC5wdXQocixpKX1dKSx0LmV4cG9ydHM9cn0sZnVuY3Rpb24odCxlLG4pe3ZhciByPSJuZy10YWJsZS9wYWdlci5odG1sIixpPSc8ZGl2IGNsYXNzPSJuZy1jbG9hayBuZy10YWJsZS1wYWdlciIgbmctaWY9cGFyYW1zLmRhdGEubGVuZ3RoPiA8ZGl2IG5nLWlmPXBhcmFtcy5zZXR0aW5ncygpLmNvdW50cy5sZW5ndGggY2xhc3M9Im5nLXRhYmxlLWNvdW50cyBidG4tZ3JvdXAgcHVsbC1yaWdodCI+IDxidXR0b24gbmctcmVwZWF0PSJjb3VudCBpbiBwYXJhbXMuc2V0dGluZ3MoKS5jb3VudHMiIHR5cGU9YnV0dG9uIG5nLWNsYXNzPSJ7XCdhY3RpdmVcJzpwYXJhbXMuY291bnQoKSA9PSBjb3VudH0iIG5nLWNsaWNrPXBhcmFtcy5jb3VudChjb3VudCkgY2xhc3M9ImJ0biBidG4tZGVmYXVsdCI+IDxzcGFuIG5nLWJpbmQ9Y291bnQ+PC9zcGFuPiA8L2J1dHRvbj4gPC9kaXY+IDx1bCBuZy1pZj1wYWdlcy5sZW5ndGggY2xhc3M9InBhZ2luYXRpb24gbmctdGFibGUtcGFnaW5hdGlvbiI+IDxsaSBjbGFzcz1wYWdlLWl0ZW0gbmctY2xhc3M9IntcJ2Rpc2FibGVkXCc6ICFwYWdlLmFjdGl2ZSAmJiAhcGFnZS5jdXJyZW50LCBcJ2FjdGl2ZVwnOiBwYWdlLmN1cnJlbnR9IiBuZy1yZXBlYXQ9InBhZ2UgaW4gcGFnZXMiIG5nLXN3aXRjaD1wYWdlLnR5cGU+IDxhIGNsYXNzPXBhZ2UtbGluayBuZy1zd2l0Y2gtd2hlbj1wcmV2IG5nLWNsaWNrPXBhcmFtcy5wYWdlKHBhZ2UubnVtYmVyKSBocmVmPSIiPiZsYXF1bzs8L2E+IDxhIGNsYXNzPXBhZ2UtbGluayBuZy1zd2l0Y2gtd2hlbj1maXJzdCBuZy1jbGljaz1wYXJhbXMucGFnZShwYWdlLm51bWJlcikgaHJlZj0iIj48c3BhbiBuZy1iaW5kPXBhZ2UubnVtYmVyPjwvc3Bhbj48L2E+IDxhIGNsYXNzPXBhZ2UtbGluayBuZy1zd2l0Y2gtd2hlbj1wYWdlIG5nLWNsaWNrPXBhcmFtcy5wYWdlKHBhZ2UubnVtYmVyKSBocmVmPSIiPjxzcGFuIG5nLWJpbmQ9cGFnZS5udW1iZXI+PC9zcGFuPjwvYT4gPGEgY2xhc3M9cGFnZS1saW5rIG5nLXN3aXRjaC13aGVuPW1vcmUgbmctY2xpY2s9cGFyYW1zLnBhZ2UocGFnZS5udW1iZXIpIGhyZWY9IiI+JiM4MjMwOzwvYT4gPGEgY2xhc3M9cGFnZS1saW5rIG5nLXN3aXRjaC13aGVuPWxhc3QgbmctY2xpY2s9cGFyYW1zLnBhZ2UocGFnZS5udW1iZXIpIGhyZWY9IiI+PHNwYW4gbmctYmluZD1wYWdlLm51bWJlcj48L3NwYW4+PC9hPiA8YSBjbGFzcz1wYWdlLWxpbmsgbmctc3dpdGNoLXdoZW49bmV4dCBuZy1jbGljaz1wYXJhbXMucGFnZShwYWdlLm51bWJlcikgaHJlZj0iIj4mcmFxdW87PC9hPiA8L2xpPiA8L3VsPiA8L2Rpdj4gJyxhPW4oMCk7YS5tb2R1bGUoIm5nIikucnVuKFsiJHRlbXBsYXRlQ2FjaGUiLGZ1bmN0aW9uKHQpe3QucHV0KHIsaSl9XSksdC5leHBvcnRzPXJ9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj0ibmctdGFibGUvc29ydGVyUm93Lmh0bWwiLGk9Ijx0ciBjbGFzcz1uZy10YWJsZS1zb3J0LWhlYWRlcj4gPHRoIHRpdGxlPXt7JGNvbHVtbi5oZWFkZXJUaXRsZSh0aGlzKX19IG5nLXJlcGVhdD1cIiRjb2x1bW4gaW4gJGNvbHVtbnNcIiBuZy1jbGFzcz1cIntcbiAgICAgICAgICAgICAgICAgICAgJ3NvcnRhYmxlJzogJGNvbHVtbi5zb3J0YWJsZSh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgJ3NvcnQtYXNjJzogcGFyYW1zLnNvcnRpbmcoKVskY29sdW1uLnNvcnRhYmxlKHRoaXMpXT09J2FzYycsXG4gICAgICAgICAgICAgICAgICAgICdzb3J0LWRlc2MnOiBwYXJhbXMuc29ydGluZygpWyRjb2x1bW4uc29ydGFibGUodGhpcyldPT0nZGVzYydcbiAgICAgICAgICAgICAgICAgIH1cIiBuZy1jbGljaz1cIiRjdHJsLnNvcnRCeSgkY29sdW1uLCAkZXZlbnQpXCIgbmctaWY9JGNvbHVtbi5zaG93KHRoaXMpIG5nLWluaXQ9XCJ0ZW1wbGF0ZSA9ICRjb2x1bW4uaGVhZGVyVGVtcGxhdGVVUkwodGhpcylcIiBjbGFzcz1cImhlYWRlciB7eyRjb2x1bW4uY2xhc3ModGhpcyl9fVwiPiA8ZGl2IG5nLWlmPSF0ZW1wbGF0ZSBjbGFzcz1uZy10YWJsZS1oZWFkZXIgbmctY2xhc3M9XCJ7J3NvcnQtaW5kaWNhdG9yJzogcGFyYW1zLnNldHRpbmdzKCkuc29ydGluZ0luZGljYXRvciA9PSAnZGl2J31cIj4gPHNwYW4gbmctYmluZD0kY29sdW1uLnRpdGxlKHRoaXMpIG5nLWNsYXNzPVwieydzb3J0LWluZGljYXRvcic6IHBhcmFtcy5zZXR0aW5ncygpLnNvcnRpbmdJbmRpY2F0b3IgPT0gJ3NwYW4nfVwiPjwvc3Bhbj4gPC9kaXY+IDxkaXYgbmctaWY9dGVtcGxhdGUgbmctaW5jbHVkZT10ZW1wbGF0ZT48L2Rpdj4gPC90aD4gPC90cj4gIixhPW4oMCk7YS5tb2R1bGUoIm5nIikucnVuKFsiJHRlbXBsYXRlQ2FjaGUiLGZ1bmN0aW9uKHQpe3QucHV0KHIsaSl9XSksdC5leHBvcnRzPXJ9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIHI9bigwKSxpPShuLm4ociksbigxKSksYT1uKDIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSxuLmQoZSwibmdUYWJsZUNvcmVNb2R1bGUiLGZ1bmN0aW9uKCl7cmV0dXJuIGkuYn0pLG4uZChlLCJTZXR0aW5ncyIsZnVuY3Rpb24oKXtyZXR1cm4gaS5jfSksbi5kKGUsIk5nVGFibGVFdmVudHNDaGFubmVsIixmdW5jdGlvbigpe3JldHVybiBpLmR9KSxuLmQoZSwiUGFyYW1WYWx1ZXMiLGZ1bmN0aW9uKCl7cmV0dXJuIGkuZX0pLG4uZChlLCJOZ1RhYmxlUGFyYW1zIixmdW5jdGlvbigpe3JldHVybiBpLmF9KSxuLmQoZSwiRGF0YVNldHRpbmdzIixmdW5jdGlvbigpe3JldHVybiBpLmZ9KSxuLmQoZSwiTmdUYWJsZURlZmF1bHRHZXREYXRhUHJvdmlkZXIiLGZ1bmN0aW9uKCl7cmV0dXJuIGkuZ30pLG4uZChlLCJGaWx0ZXJTZXR0aW5ncyIsZnVuY3Rpb24oKXtyZXR1cm4gaS5ofSksbi5kKGUsIkdyb3VwU2V0dGluZ3MiLGZ1bmN0aW9uKCl7cmV0dXJuIGkuaX0pLG4uZChlLCJOZ1RhYmxlQ29udHJvbGxlciIsZnVuY3Rpb24oKXtyZXR1cm4gYS5ifSksbi5kKGUsIm5nVGFibGVCcm93c2VyTW9kdWxlIixmdW5jdGlvbigpe3JldHVybiBhLmF9KSxuLmQoZSwiRmlsdGVyQ29uZmlnVmFsdWVzIixmdW5jdGlvbigpe3JldHVybiBhLmN9KSxuLmQoZSwiTmdUYWJsZUZpbHRlckNvbmZpZ1Byb3ZpZGVyIixmdW5jdGlvbigpe3JldHVybiBhLmR9KSxuLmQoZSwiTmdUYWJsZUZpbHRlckNvbmZpZyIsZnVuY3Rpb24oKXtyZXR1cm4gYS5lfSksbi5kKGUsIm5nVGFibGVNb2R1bGUiLGZ1bmN0aW9uKCl7cmV0dXJuIHN9KTt2YXIgcz1yLm1vZHVsZSgibmdUYWJsZSIsW2kuYi5uYW1lLGEuYS5uYW1lXSl9XSl9KTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9bmctdGFibGUubWluLmpzLm1hcAovKiEKICogUXVpbGwgRWRpdG9yIHYxLjMuNAogKiBodHRwczovL3F1aWxsanMuY29tLwogKiBDb3B5cmlnaHQgKGMpIDIwMTQsIEphc29uIENoZW4KICogQ29weXJpZ2h0IChjKSAyMDEzLCBzYWxlc2ZvcmNlLmNvbQogKi8KIWZ1bmN0aW9uKHQsZSl7Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYib2JqZWN0Ij09dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz1lKCk6ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW10sZSk6Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHMuUXVpbGw9ZSgpOnQuUXVpbGw9ZSgpfSh0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUocil7aWYobltyXSlyZXR1cm4gbltyXS5leHBvcnRzO3ZhciBvPW5bcl09e2k6cixsOiExLGV4cG9ydHM6e319O3JldHVybiB0W3JdLmNhbGwoby5leHBvcnRzLG8sby5leHBvcnRzLGUpLG8ubD0hMCxvLmV4cG9ydHN9dmFyIG49e307cmV0dXJuIGUubT10LGUuYz1uLGUuZD1mdW5jdGlvbih0LG4scil7ZS5vKHQsbil8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4se2NvbmZpZ3VyYWJsZTohMSxlbnVtZXJhYmxlOiEwLGdldDpyfSl9LGUubj1mdW5jdGlvbih0KXt2YXIgbj10JiZ0Ll9fZXNNb2R1bGU/ZnVuY3Rpb24oKXtyZXR1cm4gdC5kZWZhdWx0fTpmdW5jdGlvbigpe3JldHVybiB0fTtyZXR1cm4gZS5kKG4sImEiLG4pLG59LGUubz1mdW5jdGlvbih0LGUpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxlKX0sZS5wPSIiLGUoZS5zPTQ1KX0oW2Z1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciByPW4oMTcpLG89bigxOCksaT1uKDE5KSxsPW4oNDgpLGE9big0OSkscz1uKDUwKSx1PW4oNTEpLGM9big1MiksZj1uKDExKSxoPW4oMjkpLHA9bigzMCksZD1uKDI4KSx5PW4oMSksdj17U2NvcGU6eS5TY29wZSxjcmVhdGU6eS5jcmVhdGUsZmluZDp5LmZpbmQscXVlcnk6eS5xdWVyeSxyZWdpc3Rlcjp5LnJlZ2lzdGVyLENvbnRhaW5lcjpyLmRlZmF1bHQsRm9ybWF0Om8uZGVmYXVsdCxMZWFmOmkuZGVmYXVsdCxFbWJlZDp1LmRlZmF1bHQsU2Nyb2xsOmwuZGVmYXVsdCxCbG9jazpzLmRlZmF1bHQsSW5saW5lOmEuZGVmYXVsdCxUZXh0OmMuZGVmYXVsdCxBdHRyaWJ1dG9yOntBdHRyaWJ1dGU6Zi5kZWZhdWx0LENsYXNzOmguZGVmYXVsdCxTdHlsZTpwLmRlZmF1bHQsU3RvcmU6ZC5kZWZhdWx0fX07ZS5kZWZhdWx0PXZ9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcih0LGUpe3ZhciBuPWkodCk7aWYobnVsbD09bil0aHJvdyBuZXcgcygiVW5hYmxlIHRvIGNyZWF0ZSAiK3QrIiBibG90Iik7dmFyIHI9bjtyZXR1cm4gbmV3IHIodCBpbnN0YW5jZW9mIE5vZGV8fHQubm9kZVR5cGU9PT1Ob2RlLlRFWFRfTk9ERT90OnIuY3JlYXRlKGUpLGUpfWZ1bmN0aW9uIG8odCxuKXtyZXR1cm4gdm9pZCAwPT09biYmKG49ITEpLG51bGw9PXQ/bnVsbDpudWxsIT10W2UuREFUQV9LRVldP3RbZS5EQVRBX0tFWV0uYmxvdDpuP28odC5wYXJlbnROb2RlLG4pOm51bGx9ZnVuY3Rpb24gaSh0LGUpe3ZvaWQgMD09PWUmJihlPXAuQU5ZKTt2YXIgbjtpZigic3RyaW5nIj09dHlwZW9mIHQpbj1oW3RdfHx1W3RdO2Vsc2UgaWYodCBpbnN0YW5jZW9mIFRleHR8fHQubm9kZVR5cGU9PT1Ob2RlLlRFWFRfTk9ERSluPWgudGV4dDtlbHNlIGlmKCJudW1iZXIiPT10eXBlb2YgdCl0JnAuTEVWRUwmcC5CTE9DSz9uPWguYmxvY2s6dCZwLkxFVkVMJnAuSU5MSU5FJiYobj1oLmlubGluZSk7ZWxzZSBpZih0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpe3ZhciByPSh0LmdldEF0dHJpYnV0ZSgiY2xhc3MiKXx8IiIpLnNwbGl0KC9ccysvKTtmb3IodmFyIG8gaW4gcilpZihuPWNbcltvXV0pYnJlYWs7bj1ufHxmW3QudGFnTmFtZV19cmV0dXJuIG51bGw9PW4/bnVsbDplJnAuTEVWRUwmbi5zY29wZSYmZSZwLlRZUEUmbi5zY29wZT9uOm51bGx9ZnVuY3Rpb24gbCgpe2Zvcih2YXIgdD1bXSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl0W2VdPWFyZ3VtZW50c1tlXTtpZih0Lmxlbmd0aD4xKXJldHVybiB0Lm1hcChmdW5jdGlvbih0KXtyZXR1cm4gbCh0KX0pO3ZhciBuPXRbMF07aWYoInN0cmluZyIhPXR5cGVvZiBuLmJsb3ROYW1lJiYic3RyaW5nIiE9dHlwZW9mIG4uYXR0ck5hbWUpdGhyb3cgbmV3IHMoIkludmFsaWQgZGVmaW5pdGlvbiIpO2lmKCJhYnN0cmFjdCI9PT1uLmJsb3ROYW1lKXRocm93IG5ldyBzKCJDYW5ub3QgcmVnaXN0ZXIgYWJzdHJhY3QgY2xhc3MiKTtpZihoW24uYmxvdE5hbWV8fG4uYXR0ck5hbWVdPW4sInN0cmluZyI9PXR5cGVvZiBuLmtleU5hbWUpdVtuLmtleU5hbWVdPW47ZWxzZSBpZihudWxsIT1uLmNsYXNzTmFtZSYmKGNbbi5jbGFzc05hbWVdPW4pLG51bGwhPW4udGFnTmFtZSl7QXJyYXkuaXNBcnJheShuLnRhZ05hbWUpP24udGFnTmFtZT1uLnRhZ05hbWUubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRvVXBwZXJDYXNlKCl9KTpuLnRhZ05hbWU9bi50YWdOYW1lLnRvVXBwZXJDYXNlKCk7dmFyIHI9QXJyYXkuaXNBcnJheShuLnRhZ05hbWUpP24udGFnTmFtZTpbbi50YWdOYW1lXTtyLmZvckVhY2goZnVuY3Rpb24odCl7bnVsbCE9Zlt0XSYmbnVsbCE9bi5jbGFzc05hbWV8fChmW3RdPW4pfSl9cmV0dXJuIG59dmFyIGE9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIHQ9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShuKSYmKHRbbl09ZVtuXSl9O3JldHVybiBmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLG4pLGUucHJvdG90eXBlPW51bGw9PT1uP09iamVjdC5jcmVhdGUobik6KHIucHJvdG90eXBlPW4ucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBzPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIG49dGhpcztyZXR1cm4gZT0iW1BhcmNobWVudF0gIitlLG49dC5jYWxsKHRoaXMsZSl8fHRoaXMsbi5tZXNzYWdlPWUsbi5uYW1lPW4uY29uc3RydWN0b3IubmFtZSxufXJldHVybiBhKGUsdCksZX0oRXJyb3IpO2UuUGFyY2htZW50RXJyb3I9czt2YXIgdT17fSxjPXt9LGY9e30saD17fTtlLkRBVEFfS0VZPSJfX2Jsb3QiO3ZhciBwOyFmdW5jdGlvbih0KXt0W3QuVFlQRT0zXT0iVFlQRSIsdFt0LkxFVkVMPTEyXT0iTEVWRUwiLHRbdC5BVFRSSUJVVEU9MTNdPSJBVFRSSUJVVEUiLHRbdC5CTE9UPTE0XT0iQkxPVCIsdFt0LklOTElORT03XT0iSU5MSU5FIix0W3QuQkxPQ0s9MTFdPSJCTE9DSyIsdFt0LkJMT0NLX0JMT1Q9MTBdPSJCTE9DS19CTE9UIix0W3QuSU5MSU5FX0JMT1Q9Nl09IklOTElORV9CTE9UIix0W3QuQkxPQ0tfQVRUUklCVVRFPTldPSJCTE9DS19BVFRSSUJVVEUiLHRbdC5JTkxJTkVfQVRUUklCVVRFPTVdPSJJTkxJTkVfQVRUUklCVVRFIix0W3QuQU5ZPTE1XT0iQU5ZIn0ocD1lLlNjb3BlfHwoZS5TY29wZT17fSkpLGUuY3JlYXRlPXIsZS5maW5kPW8sZS5xdWVyeT1pLGUucmVnaXN0ZXI9bH0sZnVuY3Rpb24odCxlKXsidXNlIHN0cmljdCI7dmFyIG49T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxyPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsbz1mdW5jdGlvbih0KXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgQXJyYXkuaXNBcnJheT9BcnJheS5pc0FycmF5KHQpOiJbb2JqZWN0IEFycmF5XSI9PT1yLmNhbGwodCl9LGk9ZnVuY3Rpb24odCl7aWYoIXR8fCJbb2JqZWN0IE9iamVjdF0iIT09ci5jYWxsKHQpKXJldHVybiExO3ZhciBlPW4uY2FsbCh0LCJjb25zdHJ1Y3RvciIpLG89dC5jb25zdHJ1Y3RvciYmdC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUmJm4uY2FsbCh0LmNvbnN0cnVjdG9yLnByb3RvdHlwZSwiaXNQcm90b3R5cGVPZiIpO2lmKHQuY29uc3RydWN0b3ImJiFlJiYhbylyZXR1cm4hMTt2YXIgaTtmb3IoaSBpbiB0KTtyZXR1cm4gdm9pZCAwPT09aXx8bi5jYWxsKHQsaSl9O3QuZXhwb3J0cz1mdW5jdGlvbiB0KCl7dmFyIGUsbixyLGwsYSxzLHU9YXJndW1lbnRzWzBdLGM9MSxmPWFyZ3VtZW50cy5sZW5ndGgsaD0hMTtmb3IoImJvb2xlYW4iPT10eXBlb2YgdSYmKGg9dSx1PWFyZ3VtZW50c1sxXXx8e30sYz0yKSwobnVsbD09dXx8Im9iamVjdCIhPXR5cGVvZiB1JiYiZnVuY3Rpb24iIT10eXBlb2YgdSkmJih1PXt9KTtjPGY7KytjKWlmKG51bGwhPShlPWFyZ3VtZW50c1tjXSkpZm9yKG4gaW4gZSlyPXVbbl0sbD1lW25dLHUhPT1sJiYoaCYmbCYmKGkobCl8fChhPW8obCkpKT8oYT8oYT0hMSxzPXImJm8ocik/cjpbXSk6cz1yJiZpKHIpP3I6e30sdVtuXT10KGgscyxsKSk6dm9pZCAwIT09bCYmKHVbbl09bCkpO3JldHVybiB1fX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiBvKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gaSh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWV8fCJvYmplY3QiIT10eXBlb2YgZSYmImZ1bmN0aW9uIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIGwodCxlKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfWZ1bmN0aW9uIGEodCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O3JldHVybiBudWxsPT10P2U6KCJmdW5jdGlvbiI9PXR5cGVvZiB0LmZvcm1hdHMmJihlPSgwLGYuZGVmYXVsdCkoZSx0LmZvcm1hdHMoKSkpLG51bGw9PXQucGFyZW50fHwic2Nyb2xsIj09dC5wYXJlbnQuYmxvdE5hbWV8fHQucGFyZW50LnN0YXRpY3Muc2NvcGUhPT10LnN0YXRpY3Muc2NvcGU/ZTphKHQucGFyZW50LGUpKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksZS5kZWZhdWx0PWUuQmxvY2tFbWJlZD1lLmJ1YmJsZUZvcm1hdHM9dm9pZCAwO3ZhciBzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgcj1lW25dO3IuZW51bWVyYWJsZT1yLmVudW1lcmFibGV8fCExLHIuY29uZmlndXJhYmxlPSEwLCJ2YWx1ZSJpbiByJiYoci53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsci5rZXkscil9fXJldHVybiBmdW5jdGlvbihlLG4scil7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksciYmdChlLHIpLGV9fSgpLHU9ZnVuY3Rpb24gdChlLG4scil7bnVsbD09PWUmJihlPUZ1bmN0aW9uLnByb3RvdHlwZSk7dmFyIG89T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLG4pO2lmKHZvaWQgMD09PW8pe3ZhciBpPU9iamVjdC5nZXRQcm90b3R5cGVPZihlKTtyZXR1cm4gbnVsbD09PWk/dm9pZCAwOnQoaSxuLHIpfWlmKCJ2YWx1ZSJpbiBvKXJldHVybiBvLnZhbHVlO3ZhciBsPW8uZ2V0O2lmKHZvaWQgMCE9PWwpcmV0dXJuIGwuY2FsbChyKX0sYz1uKDIpLGY9cihjKSxoPW4oNCkscD1yKGgpLGQ9bigwKSx5PXIoZCksdj1uKDE0KSxiPXIodiksZz1uKDUpLG09cihnKSxfPW4oOCksTz1yKF8pLHc9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBvKHRoaXMsZSksaSh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBsKGUsdCkscyhlLFt7a2V5OiJhdHRhY2giLHZhbHVlOmZ1bmN0aW9uKCl7dShlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksImF0dGFjaCIsdGhpcykuY2FsbCh0aGlzKSx0aGlzLmF0dHJpYnV0ZXM9bmV3IHkuZGVmYXVsdC5BdHRyaWJ1dG9yLlN0b3JlKHRoaXMuZG9tTm9kZSl9fSx7a2V5OiJkZWx0YSIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHAuZGVmYXVsdCkuaW5zZXJ0KHRoaXMudmFsdWUoKSwoMCxmLmRlZmF1bHQpKHRoaXMuZm9ybWF0cygpLHRoaXMuYXR0cmlidXRlcy52YWx1ZXMoKSkpfX0se2tleToiZm9ybWF0Iix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXkuZGVmYXVsdC5xdWVyeSh0LHkuZGVmYXVsdC5TY29wZS5CTE9DS19BVFRSSUJVVEUpO251bGwhPW4mJnRoaXMuYXR0cmlidXRlcy5hdHRyaWJ1dGUobixlKX19LHtrZXk6ImZvcm1hdEF0Iix2YWx1ZTpmdW5jdGlvbih0LGUsbixyKXt0aGlzLmZvcm1hdChuLHIpfX0se2tleToiaW5zZXJ0QXQiLHZhbHVlOmZ1bmN0aW9uKHQsbixyKXtpZigic3RyaW5nIj09dHlwZW9mIG4mJm4uZW5kc1dpdGgoIlxuIikpe3ZhciBvPXkuZGVmYXVsdC5jcmVhdGUoeC5ibG90TmFtZSk7dGhpcy5wYXJlbnQuaW5zZXJ0QmVmb3JlKG8sMD09PXQ/dGhpczp0aGlzLm5leHQpLG8uaW5zZXJ0QXQoMCxuLnNsaWNlKDAsLTEpKX1lbHNlIHUoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLCJpbnNlcnRBdCIsdGhpcykuY2FsbCh0aGlzLHQsbixyKX19XSksZX0oeS5kZWZhdWx0LkVtYmVkKTt3LnNjb3BlPXkuZGVmYXVsdC5TY29wZS5CTE9DS19CTE9UO3ZhciB4PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCl7byh0aGlzLGUpO3ZhciBuPWkodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHQpKTtyZXR1cm4gbi5jYWNoZT17fSxufXJldHVybiBsKGUsdCkscyhlLFt7a2V5OiJkZWx0YSIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09dGhpcy5jYWNoZS5kZWx0YSYmKHRoaXMuY2FjaGUuZGVsdGE9dGhpcy5kZXNjZW5kYW50cyh5LmRlZmF1bHQuTGVhZikucmVkdWNlKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIDA9PT1lLmxlbmd0aCgpP3Q6dC5pbnNlcnQoZS52YWx1ZSgpLGEoZSkpfSxuZXcgcC5kZWZhdWx0KS5pbnNlcnQoIlxuIixhKHRoaXMpKSksdGhpcy5jYWNoZS5kZWx0YX19LHtrZXk6ImRlbGV0ZUF0Iix2YWx1ZTpmdW5jdGlvbih0LG4pe3UoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLCJkZWxldGVBdCIsdGhpcykuY2FsbCh0aGlzLHQsbiksdGhpcy5jYWNoZT17fX19LHtrZXk6ImZvcm1hdEF0Iix2YWx1ZTpmdW5jdGlvbih0LG4scixvKXtuPD0wfHwoeS5kZWZhdWx0LnF1ZXJ5KHIseS5kZWZhdWx0LlNjb3BlLkJMT0NLKT90K249PT10aGlzLmxlbmd0aCgpJiZ0aGlzLmZvcm1hdChyLG8pOnUoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLCJmb3JtYXRBdCIsdGhpcykuY2FsbCh0aGlzLHQsTWF0aC5taW4obix0aGlzLmxlbmd0aCgpLXQtMSkscixvKSx0aGlzLmNhY2hlPXt9KX19LHtrZXk6Imluc2VydEF0Iix2YWx1ZTpmdW5jdGlvbih0LG4scil7aWYobnVsbCE9cilyZXR1cm4gdShlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksImluc2VydEF0Iix0aGlzKS5jYWxsKHRoaXMsdCxuLHIpO2lmKDAhPT1uLmxlbmd0aCl7dmFyIG89bi5zcGxpdCgiXG4iKSxpPW8uc2hpZnQoKTtpLmxlbmd0aD4wJiYodDx0aGlzLmxlbmd0aCgpLTF8fG51bGw9PXRoaXMuY2hpbGRyZW4udGFpbD91KGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSwiaW5zZXJ0QXQiLHRoaXMpLmNhbGwodGhpcyxNYXRoLm1pbih0LHRoaXMubGVuZ3RoKCktMSksaSk6dGhpcy5jaGlsZHJlbi50YWlsLmluc2VydEF0KHRoaXMuY2hpbGRyZW4udGFpbC5sZW5ndGgoKSxpKSx0aGlzLmNhY2hlPXt9KTt2YXIgbD10aGlzO28ucmVkdWNlKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIGw9bC5zcGxpdCh0LCEwKSxsLmluc2VydEF0KDAsZSksZS5sZW5ndGh9LHQraS5sZW5ndGgpfX19LHtrZXk6Imluc2VydEJlZm9yZSIsdmFsdWU6ZnVuY3Rpb24odCxuKXt2YXIgcj10aGlzLmNoaWxkcmVuLmhlYWQ7dShlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksImluc2VydEJlZm9yZSIsdGhpcykuY2FsbCh0aGlzLHQsbiksciBpbnN0YW5jZW9mIGIuZGVmYXVsdCYmci5yZW1vdmUoKSx0aGlzLmNhY2hlPXt9fX0se2tleToibGVuZ3RoIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBudWxsPT10aGlzLmNhY2hlLmxlbmd0aCYmKHRoaXMuY2FjaGUubGVuZ3RoPXUoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLCJsZW5ndGgiLHRoaXMpLmNhbGwodGhpcykrMSksdGhpcy5jYWNoZS5sZW5ndGh9fSx7a2V5OiJtb3ZlQ2hpbGRyZW4iLHZhbHVlOmZ1bmN0aW9uKHQsbil7dShlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksIm1vdmVDaGlsZHJlbiIsdGhpcykuY2FsbCh0aGlzLHQsbiksdGhpcy5jYWNoZT17fX19LHtrZXk6Im9wdGltaXplIix2YWx1ZTpmdW5jdGlvbih0KXt1KGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSwib3B0aW1pemUiLHRoaXMpLmNhbGwodGhpcyx0KSx0aGlzLmNhY2hlPXt9fX0se2tleToicGF0aCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHUoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLCJwYXRoIix0aGlzKS5jYWxsKHRoaXMsdCwhMCl9fSx7a2V5OiJyZW1vdmVDaGlsZCIsdmFsdWU6ZnVuY3Rpb24odCl7dShlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksInJlbW92ZUNoaWxkIix0aGlzKS5jYWxsKHRoaXMsdCksdGhpcy5jYWNoZT17fX19LHtrZXk6InNwbGl0Iix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSYmYXJndW1lbnRzWzFdO2lmKG4mJigwPT09dHx8dD49dGhpcy5sZW5ndGgoKS0xKSl7dmFyIHI9dGhpcy5jbG9uZSgpO3JldHVybiAwPT09dD8odGhpcy5wYXJlbnQuaW5zZXJ0QmVmb3JlKHIsdGhpcyksdGhpcyk6KHRoaXMucGFyZW50Lmluc2VydEJlZm9yZShyLHRoaXMubmV4dCkscil9dmFyIG89dShlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksInNwbGl0Iix0aGlzKS5jYWxsKHRoaXMsdCxuKTtyZXR1cm4gdGhpcy5jYWNoZT17fSxvfX1dKSxlfSh5LmRlZmF1bHQuQmxvY2spO3guYmxvdE5hbWU9ImJsb2NrIix4LnRhZ05hbWU9IlAiLHguZGVmYXVsdENoaWxkPSJicmVhayIseC5hbGxvd2VkQ2hpbGRyZW49W20uZGVmYXVsdCx5LmRlZmF1bHQuRW1iZWQsTy5kZWZhdWx0XSxlLmJ1YmJsZUZvcm1hdHM9YSxlLkJsb2NrRW1iZWQ9dyxlLmRlZmF1bHQ9eH0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oNTQpLG89bigxMiksaT1uKDIpLGw9bigyMCksYT1TdHJpbmcuZnJvbUNoYXJDb2RlKDApLHM9ZnVuY3Rpb24odCl7QXJyYXkuaXNBcnJheSh0KT90aGlzLm9wcz10Om51bGwhPXQmJkFycmF5LmlzQXJyYXkodC5vcHMpP3RoaXMub3BzPXQub3BzOnRoaXMub3BzPVtdfTtzLnByb3RvdHlwZS5pbnNlcnQ9ZnVuY3Rpb24odCxlKXt2YXIgbj17fTtyZXR1cm4gMD09PXQubGVuZ3RoP3RoaXM6KG4uaW5zZXJ0PXQsbnVsbCE9ZSYmIm9iamVjdCI9PXR5cGVvZiBlJiZPYmplY3Qua2V5cyhlKS5sZW5ndGg+MCYmKG4uYXR0cmlidXRlcz1lKSx0aGlzLnB1c2gobikpfSxzLnByb3RvdHlwZS5kZWxldGU9ZnVuY3Rpb24odCl7cmV0dXJuIHQ8PTA/dGhpczp0aGlzLnB1c2goe2RlbGV0ZTp0fSl9LHMucHJvdG90eXBlLnJldGFpbj1mdW5jdGlvbih0LGUpe2lmKHQ8PTApcmV0dXJuIHRoaXM7dmFyIG49e3JldGFpbjp0fTtyZXR1cm4gbnVsbCE9ZSYmIm9iamVjdCI9PXR5cGVvZiBlJiZPYmplY3Qua2V5cyhlKS5sZW5ndGg+MCYmKG4uYXR0cmlidXRlcz1lKSx0aGlzLnB1c2gobil9LHMucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5vcHMubGVuZ3RoLG49dGhpcy5vcHNbZS0xXTtpZih0PWkoITAse30sdCksIm9iamVjdCI9PXR5cGVvZiBuKXtpZigibnVtYmVyIj09dHlwZW9mIHQuZGVsZXRlJiYibnVtYmVyIj09dHlwZW9mIG4uZGVsZXRlKXJldHVybiB0aGlzLm9wc1tlLTFdPXtkZWxldGU6bi5kZWxldGUrdC5kZWxldGV9LHRoaXM7aWYoIm51bWJlciI9PXR5cGVvZiBuLmRlbGV0ZSYmbnVsbCE9dC5pbnNlcnQmJihlLT0xLCJvYmplY3QiIT10eXBlb2Yobj10aGlzLm9wc1tlLTFdKSkpcmV0dXJuIHRoaXMub3BzLnVuc2hpZnQodCksdGhpcztpZihvKHQuYXR0cmlidXRlcyxuLmF0dHJpYnV0ZXMpKXtpZigic3RyaW5nIj09dHlwZW9mIHQuaW5zZXJ0JiYic3RyaW5nIj09dHlwZW9mIG4uaW5zZXJ0KXJldHVybiB0aGlzLm9wc1tlLTFdPXtpbnNlcnQ6bi5pbnNlcnQrdC5pbnNlcnR9LCJvYmplY3QiPT10eXBlb2YgdC5hdHRyaWJ1dGVzJiYodGhpcy5vcHNbZS0xXS5hdHRyaWJ1dGVzPXQuYXR0cmlidXRlcyksdGhpcztpZigibnVtYmVyIj09dHlwZW9mIHQucmV0YWluJiYibnVtYmVyIj09dHlwZW9mIG4ucmV0YWluKXJldHVybiB0aGlzLm9wc1tlLTFdPXtyZXRhaW46bi5yZXRhaW4rdC5yZXRhaW59LCJvYmplY3QiPT10eXBlb2YgdC5hdHRyaWJ1dGVzJiYodGhpcy5vcHNbZS0xXS5hdHRyaWJ1dGVzPXQuYXR0cmlidXRlcyksdGhpc319cmV0dXJuIGU9PT10aGlzLm9wcy5sZW5ndGg/dGhpcy5vcHMucHVzaCh0KTp0aGlzLm9wcy5zcGxpY2UoZSwwLHQpLHRoaXN9LHMucHJvdG90eXBlLmNob3A9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wc1t0aGlzLm9wcy5sZW5ndGgtMV07cmV0dXJuIHQmJnQucmV0YWluJiYhdC5hdHRyaWJ1dGVzJiZ0aGlzLm9wcy5wb3AoKSx0aGlzfSxzLnByb3RvdHlwZS5maWx0ZXI9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMub3BzLmZpbHRlcih0KX0scy5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbih0KXt0aGlzLm9wcy5mb3JFYWNoKHQpfSxzLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMub3BzLm1hcCh0KX0scy5wcm90b3R5cGUucGFydGl0aW9uPWZ1bmN0aW9uKHQpe3ZhciBlPVtdLG49W107cmV0dXJuIHRoaXMuZm9yRWFjaChmdW5jdGlvbihyKXsodChyKT9lOm4pLnB1c2gocil9KSxbZSxuXX0scy5wcm90b3R5cGUucmVkdWNlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMub3BzLnJlZHVjZSh0LGUpfSxzLnByb3RvdHlwZS5jaGFuZ2VMZW5ndGg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZWR1Y2UoZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5pbnNlcnQ/dCtsLmxlbmd0aChlKTplLmRlbGV0ZT90LWUuZGVsZXRlOnR9LDApfSxzLnByb3RvdHlwZS5sZW5ndGg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZWR1Y2UoZnVuY3Rpb24odCxlKXtyZXR1cm4gdCtsLmxlbmd0aChlKX0sMCl9LHMucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKHQsZSl7dD10fHwwLCJudW1iZXIiIT10eXBlb2YgZSYmKGU9MS8wKTtmb3IodmFyIG49W10scj1sLml0ZXJhdG9yKHRoaXMub3BzKSxvPTA7bzxlJiZyLmhhc05leHQoKTspe3ZhciBpO288dD9pPXIubmV4dCh0LW8pOihpPXIubmV4dChlLW8pLG4ucHVzaChpKSksbys9bC5sZW5ndGgoaSl9cmV0dXJuIG5ldyBzKG4pfSxzLnByb3RvdHlwZS5jb21wb3NlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1sLml0ZXJhdG9yKHRoaXMub3BzKSxuPWwuaXRlcmF0b3IodC5vcHMpLHI9bmV3IHM7ZS5oYXNOZXh0KCl8fG4uaGFzTmV4dCgpOylpZigiaW5zZXJ0Ij09PW4ucGVla1R5cGUoKSlyLnB1c2gobi5uZXh0KCkpO2Vsc2UgaWYoImRlbGV0ZSI9PT1lLnBlZWtUeXBlKCkpci5wdXNoKGUubmV4dCgpKTtlbHNle3ZhciBvPU1hdGgubWluKGUucGVla0xlbmd0aCgpLG4ucGVla0xlbmd0aCgpKSxpPWUubmV4dChvKSxhPW4ubmV4dChvKTtpZigibnVtYmVyIj09dHlwZW9mIGEucmV0YWluKXt2YXIgdT17fTsibnVtYmVyIj09dHlwZW9mIGkucmV0YWluP3UucmV0YWluPW86dS5pbnNlcnQ9aS5pbnNlcnQ7dmFyIGM9bC5hdHRyaWJ1dGVzLmNvbXBvc2UoaS5hdHRyaWJ1dGVzLGEuYXR0cmlidXRlcywibnVtYmVyIj09dHlwZW9mIGkucmV0YWluKTtjJiYodS5hdHRyaWJ1dGVzPWMpLHIucHVzaCh1KX1lbHNlIm51bWJlciI9PXR5cGVvZiBhLmRlbGV0ZSYmIm51bWJlciI9PXR5cGVvZiBpLnJldGFpbiYmci5wdXNoKGEpfXJldHVybiByLmNob3AoKX0scy5wcm90b3R5cGUuY29uY2F0PWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBzKHRoaXMub3BzLnNsaWNlKCkpO3JldHVybiB0Lm9wcy5sZW5ndGg+MCYmKGUucHVzaCh0Lm9wc1swXSksZS5vcHM9ZS5vcHMuY29uY2F0KHQub3BzLnNsaWNlKDEpKSksZX0scy5wcm90b3R5cGUuZGlmZj1mdW5jdGlvbih0LGUpe2lmKHRoaXMub3BzPT09dC5vcHMpcmV0dXJuIG5ldyBzO3ZhciBuPVt0aGlzLHRdLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5tYXAoZnVuY3Rpb24obil7aWYobnVsbCE9bi5pbnNlcnQpcmV0dXJuInN0cmluZyI9PXR5cGVvZiBuLmluc2VydD9uLmluc2VydDphO3ZhciByPWU9PT10PyJvbiI6IndpdGgiO3Rocm93IG5ldyBFcnJvcigiZGlmZigpIGNhbGxlZCAiK3IrIiBub24tZG9jdW1lbnQiKX0pLmpvaW4oIiIpfSksaT1uZXcgcyx1PXIoblswXSxuWzFdLGUpLGM9bC5pdGVyYXRvcih0aGlzLm9wcyksZj1sLml0ZXJhdG9yKHQub3BzKTtyZXR1cm4gdS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10WzFdLmxlbmd0aDtlPjA7KXt2YXIgbj0wO3N3aXRjaCh0WzBdKXtjYXNlIHIuSU5TRVJUOm49TWF0aC5taW4oZi5wZWVrTGVuZ3RoKCksZSksaS5wdXNoKGYubmV4dChuKSk7YnJlYWs7Y2FzZSByLkRFTEVURTpuPU1hdGgubWluKGUsYy5wZWVrTGVuZ3RoKCkpLGMubmV4dChuKSxpLmRlbGV0ZShuKTticmVhaztjYXNlIHIuRVFVQUw6bj1NYXRoLm1pbihjLnBlZWtMZW5ndGgoKSxmLnBlZWtMZW5ndGgoKSxlKTt2YXIgYT1jLm5leHQobikscz1mLm5leHQobik7byhhLmluc2VydCxzLmluc2VydCk/aS5yZXRhaW4obixsLmF0dHJpYnV0ZXMuZGlmZihhLmF0dHJpYnV0ZXMscy5hdHRyaWJ1dGVzKSk6aS5wdXNoKHMpLmRlbGV0ZShuKX1lLT1ufX0pLGkuY2hvcCgpfSxzLnByb3RvdHlwZS5lYWNoTGluZT1mdW5jdGlvbih0LGUpe2U9ZXx8IlxuIjtmb3IodmFyIG49bC5pdGVyYXRvcih0aGlzLm9wcykscj1uZXcgcyxvPTA7bi5oYXNOZXh0KCk7KXtpZigiaW5zZXJ0IiE9PW4ucGVla1R5cGUoKSlyZXR1cm47dmFyIGk9bi5wZWVrKCksYT1sLmxlbmd0aChpKS1uLnBlZWtMZW5ndGgoKSx1PSJzdHJpbmciPT10eXBlb2YgaS5pbnNlcnQ/aS5pbnNlcnQuaW5kZXhPZihlLGEpLWE6LTE7aWYodTwwKXIucHVzaChuLm5leHQoKSk7ZWxzZSBpZih1PjApci5wdXNoKG4ubmV4dCh1KSk7ZWxzZXtpZighMT09PXQocixuLm5leHQoMSkuYXR0cmlidXRlc3x8e30sbykpcmV0dXJuO28rPTEscj1uZXcgc319ci5sZW5ndGgoKT4wJiZ0KHIse30sbyl9LHMucHJvdG90eXBlLnRyYW5zZm9ybT1mdW5jdGlvbih0LGUpe2lmKGU9ISFlLCJudW1iZXIiPT10eXBlb2YgdClyZXR1cm4gdGhpcy50cmFuc2Zvcm1Qb3NpdGlvbih0LGUpO2Zvcih2YXIgbj1sLml0ZXJhdG9yKHRoaXMub3BzKSxyPWwuaXRlcmF0b3IodC5vcHMpLG89bmV3IHM7bi5oYXNOZXh0KCl8fHIuaGFzTmV4dCgpOylpZigiaW5zZXJ0IiE9PW4ucGVla1R5cGUoKXx8IWUmJiJpbnNlcnQiPT09ci5wZWVrVHlwZSgpKWlmKCJpbnNlcnQiPT09ci5wZWVrVHlwZSgpKW8ucHVzaChyLm5leHQoKSk7ZWxzZXt2YXIgaT1NYXRoLm1pbihuLnBlZWtMZW5ndGgoKSxyLnBlZWtMZW5ndGgoKSksYT1uLm5leHQoaSksdT1yLm5leHQoaSk7aWYoYS5kZWxldGUpY29udGludWU7dS5kZWxldGU/by5wdXNoKHUpOm8ucmV0YWluKGksbC5hdHRyaWJ1dGVzLnRyYW5zZm9ybShhLmF0dHJpYnV0ZXMsdS5hdHRyaWJ1dGVzLGUpKX1lbHNlIG8ucmV0YWluKGwubGVuZ3RoKG4ubmV4dCgpKSk7cmV0dXJuIG8uY2hvcCgpfSxzLnByb3RvdHlwZS50cmFuc2Zvcm1Qb3NpdGlvbj1mdW5jdGlvbih0LGUpe2U9ISFlO2Zvcih2YXIgbj1sLml0ZXJhdG9yKHRoaXMub3BzKSxyPTA7bi5oYXNOZXh0KCkmJnI8PXQ7KXt2YXIgbz1uLnBlZWtMZW5ndGgoKSxpPW4ucGVla1R5cGUoKTtuLm5leHQoKSwiZGVsZXRlIiE9PWk/KCJpbnNlcnQiPT09aSYmKHI8dHx8IWUpJiYodCs9bykscis9byk6dC09TWF0aC5taW4obyx0LXIpfXJldHVybiB0fSx0LmV4cG9ydHM9c30sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiBvKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gaSh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWV8fCJvYmplY3QiIT10eXBlb2YgZSYmImZ1bmN0aW9uIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIGwodCxlKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIHI9ZVtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIua2V5LHIpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLHIpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLHImJnQoZSxyKSxlfX0oKSxzPWZ1bmN0aW9uIHQoZSxuLHIpe251bGw9PT1lJiYoZT1GdW5jdGlvbi5wcm90b3R5cGUpO3ZhciBvPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxuKTtpZih2b2lkIDA9PT1vKXt2YXIgaT1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7cmV0dXJuIG51bGw9PT1pP3ZvaWQgMDp0KGksbixyKX1pZigidmFsdWUiaW4gbylyZXR1cm4gby52YWx1ZTt2YXIgbD1vLmdldDtpZih2b2lkIDAhPT1sKXJldHVybiBsLmNhbGwocil9LHU9big4KSxjPXIodSksZj1uKDApLGg9cihmKSxwPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbyh0aGlzLGUpLGkodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gbChlLHQpLGEoZSxbe2tleToiZm9ybWF0QXQiLHZhbHVlOmZ1bmN0aW9uKHQsbixyLG8pe2lmKGUuY29tcGFyZSh0aGlzLnN0YXRpY3MuYmxvdE5hbWUscik8MCYmaC5kZWZhdWx0LnF1ZXJ5KHIsaC5kZWZhdWx0LlNjb3BlLkJMT1QpKXt2YXIgaT10aGlzLmlzb2xhdGUodCxuKTtvJiZpLndyYXAocixvKX1lbHNlIHMoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLCJmb3JtYXRBdCIsdGhpcykuY2FsbCh0aGlzLHQsbixyLG8pfX0se2tleToib3B0aW1pemUiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKHMoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLCJvcHRpbWl6ZSIsdGhpcykuY2FsbCh0aGlzLHQpLHRoaXMucGFyZW50IGluc3RhbmNlb2YgZSYmZS5jb21wYXJlKHRoaXMuc3RhdGljcy5ibG90TmFtZSx0aGlzLnBhcmVudC5zdGF0aWNzLmJsb3ROYW1lKT4wKXt2YXIgbj10aGlzLnBhcmVudC5pc29sYXRlKHRoaXMub2Zmc2V0KCksdGhpcy5sZW5ndGgoKSk7dGhpcy5tb3ZlQ2hpbGRyZW4obiksbi53cmFwKHRoaXMpfX19XSxbe2tleToiY29tcGFyZSIsdmFsdWU6ZnVuY3Rpb24odCxuKXt2YXIgcj1lLm9yZGVyLmluZGV4T2YodCksbz1lLm9yZGVyLmluZGV4T2Yobik7cmV0dXJuIHI+PTB8fG8+PTA/ci1vOnQ9PT1uPzA6dDxuPy0xOjF9fV0pLGV9KGguZGVmYXVsdC5JbmxpbmUpO3AuYWxsb3dlZENoaWxkcmVuPVtwLGguZGVmYXVsdC5FbWJlZCxjLmRlZmF1bHRdLHAub3JkZXI9WyJjdXJzb3IiLCJpbmxpbmUiLCJ1bmRlcmxpbmUiLCJzdHJpa2UiLCJpdGFsaWMiLCJib2xkIiwic2NyaXB0IiwibGluayIsImNvZGUiXSxlLmRlZmF1bHQ9cH0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiBvKHQsZSxuKXtyZXR1cm4gZSBpbiB0P09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUse3ZhbHVlOm4sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KTp0W2VdPW4sdH1mdW5jdGlvbiBpKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gbCh0LGUpe2lmKGU9KDAsTi5kZWZhdWx0KSghMCx7Y29udGFpbmVyOnQsbW9kdWxlczp7Y2xpcGJvYXJkOiEwLGtleWJvYXJkOiEwLGhpc3Rvcnk6ITB9fSxlKSxlLnRoZW1lJiZlLnRoZW1lIT09Uy5ERUZBVUxUUy50aGVtZSl7aWYoZS50aGVtZT1TLmltcG9ydCgidGhlbWVzLyIrZS50aGVtZSksbnVsbD09ZS50aGVtZSl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgdGhlbWUgIitlLnRoZW1lKyIuIERpZCB5b3UgcmVnaXN0ZXIgaXQ/Iil9ZWxzZSBlLnRoZW1lPVQuZGVmYXVsdDt2YXIgbj0oMCxOLmRlZmF1bHQpKCEwLHt9LGUudGhlbWUuREVGQVVMVFMpO1tuLGVdLmZvckVhY2goZnVuY3Rpb24odCl7dC5tb2R1bGVzPXQubW9kdWxlc3x8e30sT2JqZWN0LmtleXModC5tb2R1bGVzKS5mb3JFYWNoKGZ1bmN0aW9uKGUpeyEwPT09dC5tb2R1bGVzW2VdJiYodC5tb2R1bGVzW2VdPXt9KX0pfSk7dmFyIHI9T2JqZWN0LmtleXMobi5tb2R1bGVzKS5jb25jYXQoT2JqZWN0LmtleXMoZS5tb2R1bGVzKSksbz1yLnJlZHVjZShmdW5jdGlvbih0LGUpe3ZhciBuPVMuaW1wb3J0KCJtb2R1bGVzLyIrZSk7cmV0dXJuIG51bGw9PW4/UC5lcnJvcigiQ2Fubm90IGxvYWQgIitlKyIgbW9kdWxlLiBBcmUgeW91IHN1cmUgeW91IHJlZ2lzdGVyZWQgaXQ/Iik6dFtlXT1uLkRFRkFVTFRTfHx7fSx0fSx7fSk7cmV0dXJuIG51bGwhPWUubW9kdWxlcyYmZS5tb2R1bGVzLnRvb2xiYXImJmUubW9kdWxlcy50b29sYmFyLmNvbnN0cnVjdG9yIT09T2JqZWN0JiYoZS5tb2R1bGVzLnRvb2xiYXI9e2NvbnRhaW5lcjplLm1vZHVsZXMudG9vbGJhcn0pLGU9KDAsTi5kZWZhdWx0KSghMCx7fSxTLkRFRkFVTFRTLHttb2R1bGVzOm99LG4sZSksWyJib3VuZHMiLCJjb250YWluZXIiLCJzY3JvbGxpbmdDb250YWluZXIiXS5mb3JFYWNoKGZ1bmN0aW9uKHQpeyJzdHJpbmciPT10eXBlb2YgZVt0XSYmKGVbdF09ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlW3RdKSl9KSxlLm1vZHVsZXM9T2JqZWN0LmtleXMoZS5tb2R1bGVzKS5yZWR1Y2UoZnVuY3Rpb24odCxuKXtyZXR1cm4gZS5tb2R1bGVzW25dJiYodFtuXT1lLm1vZHVsZXNbbl0pLHR9LHt9KSxlfWZ1bmN0aW9uIGEodCxlLG4scil7aWYodGhpcy5vcHRpb25zLnN0cmljdCYmIXRoaXMuaXNFbmFibGVkKCkmJmU9PT1nLmRlZmF1bHQuc291cmNlcy5VU0VSKXJldHVybiBuZXcgZC5kZWZhdWx0O3ZhciBvPW51bGw9PW4/bnVsbDp0aGlzLmdldFNlbGVjdGlvbigpLGk9dGhpcy5lZGl0b3IuZGVsdGEsbD10KCk7aWYobnVsbCE9byYmKCEwPT09biYmKG49by5pbmRleCksbnVsbD09cj9vPXUobyxsLGUpOjAhPT1yJiYobz11KG8sbixyLGUpKSx0aGlzLnNldFNlbGVjdGlvbihvLGcuZGVmYXVsdC5zb3VyY2VzLlNJTEVOVCkpLGwubGVuZ3RoKCk+MCl7dmFyIGEscz1bZy5kZWZhdWx0LmV2ZW50cy5URVhUX0NIQU5HRSxsLGksZV07aWYoKGE9dGhpcy5lbWl0dGVyKS5lbWl0LmFwcGx5KGEsW2cuZGVmYXVsdC5ldmVudHMuRURJVE9SX0NIQU5HRV0uY29uY2F0KHMpKSxlIT09Zy5kZWZhdWx0LnNvdXJjZXMuU0lMRU5UKXt2YXIgYzsoYz10aGlzLmVtaXR0ZXIpLmVtaXQuYXBwbHkoYyxzKX19cmV0dXJuIGx9ZnVuY3Rpb24gcyh0LGUsbixyLG8pe3ZhciBpPXt9O3JldHVybiJudW1iZXIiPT10eXBlb2YgdC5pbmRleCYmIm51bWJlciI9PXR5cGVvZiB0Lmxlbmd0aD8ibnVtYmVyIiE9dHlwZW9mIGU/KG89cixyPW4sbj1lLGU9dC5sZW5ndGgsdD10LmluZGV4KTooZT10Lmxlbmd0aCx0PXQuaW5kZXgpOiJudW1iZXIiIT10eXBlb2YgZSYmKG89cixyPW4sbj1lLGU9MCksIm9iamVjdCI9PT0odm9pZCAwPT09bj8idW5kZWZpbmVkIjpjKG4pKT8oaT1uLG89cik6InN0cmluZyI9PXR5cGVvZiBuJiYobnVsbCE9cj9pW25dPXI6bz1uKSxvPW98fGcuZGVmYXVsdC5zb3VyY2VzLkFQSSxbdCxlLGksb119ZnVuY3Rpb24gdSh0LGUsbixyKXtpZihudWxsPT10KXJldHVybiBudWxsO3ZhciBvPXZvaWQgMCxpPXZvaWQgMDtpZihlIGluc3RhbmNlb2YgZC5kZWZhdWx0KXt2YXIgbD1bdC5pbmRleCx0LmluZGV4K3QubGVuZ3RoXS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIGUudHJhbnNmb3JtUG9zaXRpb24odCxyIT09Zy5kZWZhdWx0LnNvdXJjZXMuVVNFUil9KSxhPWYobCwyKTtvPWFbMF0saT1hWzFdfWVsc2V7dmFyIHM9W3QuaW5kZXgsdC5pbmRleCt0Lmxlbmd0aF0ubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0PGV8fHQ9PT1lJiZyPT09Zy5kZWZhdWx0LnNvdXJjZXMuVVNFUj90Om4+PTA/dCtuOk1hdGgubWF4KGUsdCtuKX0pLHU9ZihzLDIpO289dVswXSxpPXVbMV19cmV0dXJuIG5ldyB4LlJhbmdlKG8saS1vKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksZS5kZWZhdWx0PWUub3ZlcmxvYWQ9ZS5leHBhbmRDb25maWc9dm9pZCAwO3ZhciBjPSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJiJzeW1ib2wiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKHQpe3JldHVybiB0eXBlb2YgdH06ZnVuY3Rpb24odCl7cmV0dXJuIHQmJiJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJnQuY29uc3RydWN0b3I9PT1TeW1ib2wmJnQhPT1TeW1ib2wucHJvdG90eXBlPyJzeW1ib2wiOnR5cGVvZiB0fSxmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3ZhciBuPVtdLHI9ITAsbz0hMSxpPXZvaWQgMDt0cnl7Zm9yKHZhciBsLGE9dFtTeW1ib2wuaXRlcmF0b3JdKCk7IShyPShsPWEubmV4dCgpKS5kb25lKSYmKG4ucHVzaChsLnZhbHVlKSwhZXx8bi5sZW5ndGghPT1lKTtyPSEwKTt9Y2F0Y2godCl7bz0hMCxpPXR9ZmluYWxseXt0cnl7IXImJmEucmV0dXJuJiZhLnJldHVybigpfWZpbmFsbHl7aWYobyl0aHJvdyBpfX1yZXR1cm4gbn1yZXR1cm4gZnVuY3Rpb24oZSxuKXtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiBlO2lmKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoZSkpcmV0dXJuIHQoZSxuKTt0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIil9fSgpLGg9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciByPWVbbl07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsInZhbHVlImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLmtleSxyKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxyJiZ0KGUsciksZX19KCk7big1Myk7dmFyIHA9big0KSxkPXIocCkseT1uKDU3KSx2PXIoeSksYj1uKDkpLGc9cihiKSxtPW4oNyksXz1yKG0pLE89bigwKSx3PXIoTykseD1uKDIyKSxrPXIoeCksRT1uKDIpLE49cihFKSxqPW4oMTApLEE9cihqKSxxPW4oMzIpLFQ9cihxKSxQPSgwLEEuZGVmYXVsdCkoInF1aWxsIiksUz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7dmFyIG49dGhpcyxyPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fTtpZihpKHRoaXMsdCksdGhpcy5vcHRpb25zPWwoZSxyKSx0aGlzLmNvbnRhaW5lcj10aGlzLm9wdGlvbnMuY29udGFpbmVyLG51bGw9PXRoaXMuY29udGFpbmVyKXJldHVybiBQLmVycm9yKCJJbnZhbGlkIFF1aWxsIGNvbnRhaW5lciIsZSk7dGhpcy5vcHRpb25zLmRlYnVnJiZ0LmRlYnVnKHRoaXMub3B0aW9ucy5kZWJ1Zyk7dmFyIG89dGhpcy5jb250YWluZXIuaW5uZXJIVE1MLnRyaW0oKTt0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCJxbC1jb250YWluZXIiKSx0aGlzLmNvbnRhaW5lci5pbm5lckhUTUw9IiIsdGhpcy5jb250YWluZXIuX19xdWlsbD10aGlzLHRoaXMucm9vdD10aGlzLmFkZENvbnRhaW5lcigicWwtZWRpdG9yIiksdGhpcy5yb290LmNsYXNzTGlzdC5hZGQoInFsLWJsYW5rIiksdGhpcy5yb290LnNldEF0dHJpYnV0ZSgiZGF0YS1ncmFtbSIsITEpLHRoaXMuc2Nyb2xsaW5nQ29udGFpbmVyPXRoaXMub3B0aW9ucy5zY3JvbGxpbmdDb250YWluZXJ8fHRoaXMucm9vdCx0aGlzLmVtaXR0ZXI9bmV3IGcuZGVmYXVsdCx0aGlzLnNjcm9sbD13LmRlZmF1bHQuY3JlYXRlKHRoaXMucm9vdCx7ZW1pdHRlcjp0aGlzLmVtaXR0ZXIsd2hpdGVsaXN0OnRoaXMub3B0aW9ucy5mb3JtYXRzfSksdGhpcy5lZGl0b3I9bmV3IHYuZGVmYXVsdCh0aGlzLnNjcm9sbCksdGhpcy5zZWxlY3Rpb249bmV3IGsuZGVmYXVsdCh0aGlzLnNjcm9sbCx0aGlzLmVtaXR0ZXIpLHRoaXMudGhlbWU9bmV3IHRoaXMub3B0aW9ucy50aGVtZSh0aGlzLHRoaXMub3B0aW9ucyksdGhpcy5rZXlib2FyZD10aGlzLnRoZW1lLmFkZE1vZHVsZSgia2V5Ym9hcmQiKSx0aGlzLmNsaXBib2FyZD10aGlzLnRoZW1lLmFkZE1vZHVsZSgiY2xpcGJvYXJkIiksdGhpcy5oaXN0b3J5PXRoaXMudGhlbWUuYWRkTW9kdWxlKCJoaXN0b3J5IiksdGhpcy50aGVtZS5pbml0KCksdGhpcy5lbWl0dGVyLm9uKGcuZGVmYXVsdC5ldmVudHMuRURJVE9SX0NIQU5HRSxmdW5jdGlvbih0KXt0PT09Zy5kZWZhdWx0LmV2ZW50cy5URVhUX0NIQU5HRSYmbi5yb290LmNsYXNzTGlzdC50b2dnbGUoInFsLWJsYW5rIixuLmVkaXRvci5pc0JsYW5rKCkpfSksdGhpcy5lbWl0dGVyLm9uKGcuZGVmYXVsdC5ldmVudHMuU0NST0xMX1VQREFURSxmdW5jdGlvbih0LGUpe3ZhciByPW4uc2VsZWN0aW9uLmxhc3RSYW5nZSxvPXImJjA9PT1yLmxlbmd0aD9yLmluZGV4OnZvaWQgMDthLmNhbGwobixmdW5jdGlvbigpe3JldHVybiBuLmVkaXRvci51cGRhdGUobnVsbCxlLG8pfSx0KX0pO3ZhciBzPXRoaXMuY2xpcGJvYXJkLmNvbnZlcnQoIjxkaXYgY2xhc3M9J3FsLWVkaXRvcicgc3R5bGU9XCJ3aGl0ZS1zcGFjZTogbm9ybWFsO1wiPiIrbysiPHA+PGJyPjwvcD48L2Rpdj4iKTt0aGlzLnNldENvbnRlbnRzKHMpLHRoaXMuaGlzdG9yeS5jbGVhcigpLHRoaXMub3B0aW9ucy5wbGFjZWhvbGRlciYmdGhpcy5yb290LnNldEF0dHJpYnV0ZSgiZGF0YS1wbGFjZWhvbGRlciIsdGhpcy5vcHRpb25zLnBsYWNlaG9sZGVyKSx0aGlzLm9wdGlvbnMucmVhZE9ubHkmJnRoaXMuZGlzYWJsZSgpfXJldHVybiBoKHQsbnVsbCxbe2tleToiZGVidWciLHZhbHVlOmZ1bmN0aW9uKHQpeyEwPT09dCYmKHQ9ImxvZyIpLEEuZGVmYXVsdC5sZXZlbCh0KX19LHtrZXk6ImZpbmQiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0Ll9fcXVpbGx8fHcuZGVmYXVsdC5maW5kKHQpfX0se2tleToiaW1wb3J0Iix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dGhpcy5pbXBvcnRzW3RdJiZQLmVycm9yKCJDYW5ub3QgaW1wb3J0ICIrdCsiLiBBcmUgeW91IHN1cmUgaXQgd2FzIHJlZ2lzdGVyZWQ/IiksdGhpcy5pbXBvcnRzW3RdfX0se2tleToicmVnaXN0ZXIiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcyxyPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdJiZhcmd1bWVudHNbMl07aWYoInN0cmluZyIhPXR5cGVvZiB0KXt2YXIgbz10LmF0dHJOYW1lfHx0LmJsb3ROYW1lOyJzdHJpbmciPT10eXBlb2Ygbz90aGlzLnJlZ2lzdGVyKCJmb3JtYXRzLyIrbyx0LGUpOk9iamVjdC5rZXlzKHQpLmZvckVhY2goZnVuY3Rpb24ocil7bi5yZWdpc3RlcihyLHRbcl0sZSl9KX1lbHNlIG51bGw9PXRoaXMuaW1wb3J0c1t0XXx8cnx8UC53YXJuKCJPdmVyd3JpdGluZyAiK3QrIiB3aXRoIixlKSx0aGlzLmltcG9ydHNbdF09ZSwodC5zdGFydHNXaXRoKCJibG90cy8iKXx8dC5zdGFydHNXaXRoKCJmb3JtYXRzLyIpKSYmImFic3RyYWN0IiE9PWUuYmxvdE5hbWU/dy5kZWZhdWx0LnJlZ2lzdGVyKGUpOnQuc3RhcnRzV2l0aCgibW9kdWxlcyIpJiYiZnVuY3Rpb24iPT10eXBlb2YgZS5yZWdpc3RlciYmZS5yZWdpc3RlcigpfX1dKSxoKHQsW3trZXk6ImFkZENvbnRhaW5lciIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOm51bGw7aWYoInN0cmluZyI9PXR5cGVvZiB0KXt2YXIgbj10O3Q9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksdC5jbGFzc0xpc3QuYWRkKG4pfXJldHVybiB0aGlzLmNvbnRhaW5lci5pbnNlcnRCZWZvcmUodCxlKSx0fX0se2tleToiYmx1ciIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnNlbGVjdGlvbi5zZXRSYW5nZShudWxsKX19LHtrZXk6ImRlbGV0ZVRleHQiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzLG89cyh0LGUsbiksaT1mKG8sNCk7cmV0dXJuIHQ9aVswXSxlPWlbMV0sbj1pWzNdLGEuY2FsbCh0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIHIuZWRpdG9yLmRlbGV0ZVRleHQodCxlKX0sbix0LC0xKmUpfX0se2tleToiZGlzYWJsZSIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmVuYWJsZSghMSl9fSx7a2V5OiJlbmFibGUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9IShhcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXSl8fGFyZ3VtZW50c1swXTt0aGlzLnNjcm9sbC5lbmFibGUodCksdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZSgicWwtZGlzYWJsZWQiLCF0KX19LHtrZXk6ImZvY3VzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuc2Nyb2xsaW5nQ29udGFpbmVyLnNjcm9sbFRvcDt0aGlzLnNlbGVjdGlvbi5mb2N1cygpLHRoaXMuc2Nyb2xsaW5nQ29udGFpbmVyLnNjcm9sbFRvcD10LHRoaXMuc2Nyb2xsSW50b1ZpZXcoKX19LHtrZXk6ImZvcm1hdCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLHI9YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOmcuZGVmYXVsdC5zb3VyY2VzLkFQSTtyZXR1cm4gYS5jYWxsKHRoaXMsZnVuY3Rpb24oKXt2YXIgcj1uLmdldFNlbGVjdGlvbighMCksaT1uZXcgZC5kZWZhdWx0O2lmKG51bGw9PXIpcmV0dXJuIGk7aWYody5kZWZhdWx0LnF1ZXJ5KHQsdy5kZWZhdWx0LlNjb3BlLkJMT0NLKSlpPW4uZWRpdG9yLmZvcm1hdExpbmUoci5pbmRleCxyLmxlbmd0aCxvKHt9LHQsZSkpO2Vsc2V7aWYoMD09PXIubGVuZ3RoKXJldHVybiBuLnNlbGVjdGlvbi5mb3JtYXQodCxlKSxpO2k9bi5lZGl0b3IuZm9ybWF0VGV4dChyLmluZGV4LHIubGVuZ3RoLG8oe30sdCxlKSl9cmV0dXJuIG4uc2V0U2VsZWN0aW9uKHIsZy5kZWZhdWx0LnNvdXJjZXMuU0lMRU5UKSxpfSxyKX19LHtrZXk6ImZvcm1hdExpbmUiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuLHIsbyl7dmFyIGk9dGhpcyxsPXZvaWQgMCx1PXModCxlLG4scixvKSxjPWYodSw0KTtyZXR1cm4gdD1jWzBdLGU9Y1sxXSxsPWNbMl0sbz1jWzNdLGEuY2FsbCh0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIGkuZWRpdG9yLmZvcm1hdExpbmUodCxlLGwpfSxvLHQsMCl9fSx7a2V5OiJmb3JtYXRUZXh0Iix2YWx1ZTpmdW5jdGlvbih0LGUsbixyLG8pe3ZhciBpPXRoaXMsbD12b2lkIDAsdT1zKHQsZSxuLHIsbyksYz1mKHUsNCk7cmV0dXJuIHQ9Y1swXSxlPWNbMV0sbD1jWzJdLG89Y1szXSxhLmNhbGwodGhpcyxmdW5jdGlvbigpe3JldHVybiBpLmVkaXRvci5mb3JtYXRUZXh0KHQsZSxsKX0sbyx0LDApfX0se2tleToiZ2V0Qm91bmRzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06MCxuPXZvaWQgMDtuPSJudW1iZXIiPT10eXBlb2YgdD90aGlzLnNlbGVjdGlvbi5nZXRCb3VuZHModCxlKTp0aGlzLnNlbGVjdGlvbi5nZXRCb3VuZHModC5pbmRleCx0Lmxlbmd0aCk7dmFyIHI9dGhpcy5jb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7cmV0dXJue2JvdHRvbTpuLmJvdHRvbS1yLnRvcCxoZWlnaHQ6bi5oZWlnaHQsbGVmdDpuLmxlZnQtci5sZWZ0LHJpZ2h0Om4ucmlnaHQtci5sZWZ0LHRvcDpuLnRvcC1yLnRvcCx3aWR0aDpuLndpZHRofX19LHtrZXk6ImdldENvbnRlbnRzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTowLGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnRoaXMuZ2V0TGVuZ3RoKCktdCxuPXModCxlKSxyPWYobiwyKTtyZXR1cm4gdD1yWzBdLGU9clsxXSx0aGlzLmVkaXRvci5nZXRDb250ZW50cyh0LGUpfX0se2tleToiZ2V0Rm9ybWF0Iix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp0aGlzLmdldFNlbGVjdGlvbighMCksZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06MDtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIHQ/dGhpcy5lZGl0b3IuZ2V0Rm9ybWF0KHQsZSk6dGhpcy5lZGl0b3IuZ2V0Rm9ybWF0KHQuaW5kZXgsdC5sZW5ndGgpfX0se2tleToiZ2V0SW5kZXgiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0Lm9mZnNldCh0aGlzLnNjcm9sbCl9fSx7a2V5OiJnZXRMZW5ndGgiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2Nyb2xsLmxlbmd0aCgpfX0se2tleToiZ2V0TGVhZiIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2Nyb2xsLmxlYWYodCl9fSx7a2V5OiJnZXRMaW5lIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zY3JvbGwubGluZSh0KX19LHtrZXk6ImdldExpbmVzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTowLGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOk51bWJlci5NQVhfVkFMVUU7cmV0dXJuIm51bWJlciIhPXR5cGVvZiB0P3RoaXMuc2Nyb2xsLmxpbmVzKHQuaW5kZXgsdC5sZW5ndGgpOnRoaXMuc2Nyb2xsLmxpbmVzKHQsZSl9fSx7a2V5OiJnZXRNb2R1bGUiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnRoZW1lLm1vZHVsZXNbdF19fSx7a2V5OiJnZXRTZWxlY3Rpb24iLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdJiZhcmd1bWVudHNbMF0mJnRoaXMuZm9jdXMoKSx0aGlzLnVwZGF0ZSgpLHRoaXMuc2VsZWN0aW9uLmdldFJhbmdlKClbMF19fSx7a2V5OiJnZXRUZXh0Iix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTowLGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnRoaXMuZ2V0TGVuZ3RoKCktdCxuPXModCxlKSxyPWYobiwyKTtyZXR1cm4gdD1yWzBdLGU9clsxXSx0aGlzLmVkaXRvci5nZXRUZXh0KHQsZSl9fSx7a2V5OiJoYXNGb2N1cyIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZWxlY3Rpb24uaGFzRm9jdXMoKX19LHtrZXk6Imluc2VydEVtYmVkIix2YWx1ZTpmdW5jdGlvbihlLG4scil7dmFyIG89dGhpcyxpPWFyZ3VtZW50cy5sZW5ndGg+MyYmdm9pZCAwIT09YXJndW1lbnRzWzNdP2FyZ3VtZW50c1szXTp0LnNvdXJjZXMuQVBJO3JldHVybiBhLmNhbGwodGhpcyxmdW5jdGlvbigpe3JldHVybiBvLmVkaXRvci5pbnNlcnRFbWJlZChlLG4scil9LGksZSl9fSx7a2V5OiJpbnNlcnRUZXh0Iix2YWx1ZTpmdW5jdGlvbih0LGUsbixyLG8pe3ZhciBpPXRoaXMsbD12b2lkIDAsdT1zKHQsMCxuLHIsbyksYz1mKHUsNCk7cmV0dXJuIHQ9Y1swXSxsPWNbMl0sbz1jWzNdLGEuY2FsbCh0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIGkuZWRpdG9yLmluc2VydFRleHQodCxlLGwpfSxvLHQsZS5sZW5ndGgpfX0se2tleToiaXNFbmFibGVkIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiF0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoInFsLWRpc2FibGVkIil9fSx7a2V5OiJvZmYiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW1pdHRlci5vZmYuYXBwbHkodGhpcy5lbWl0dGVyLGFyZ3VtZW50cyl9fSx7a2V5OiJvbiIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbWl0dGVyLm9uLmFwcGx5KHRoaXMuZW1pdHRlcixhcmd1bWVudHMpfX0se2tleToib25jZSIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbWl0dGVyLm9uY2UuYXBwbHkodGhpcy5lbWl0dGVyLGFyZ3VtZW50cyl9fSx7a2V5OiJwYXN0ZUhUTUwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt0aGlzLmNsaXBib2FyZC5kYW5nZXJvdXNseVBhc3RlSFRNTCh0LGUsbil9fSx7a2V5OiJyZW1vdmVGb3JtYXQiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzLG89cyh0LGUsbiksaT1mKG8sNCk7cmV0dXJuIHQ9aVswXSxlPWlbMV0sbj1pWzNdLGEuY2FsbCh0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIHIuZWRpdG9yLnJlbW92ZUZvcm1hdCh0LGUpfSxuLHQpfX0se2tleToic2Nyb2xsSW50b1ZpZXciLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5zZWxlY3Rpb24uc2Nyb2xsSW50b1ZpZXcodGhpcy5zY3JvbGxpbmdDb250YWluZXIpfX0se2tleToic2V0Q29udGVudHMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06Zy5kZWZhdWx0LnNvdXJjZXMuQVBJO3JldHVybiBhLmNhbGwodGhpcyxmdW5jdGlvbigpe3Q9bmV3IGQuZGVmYXVsdCh0KTt2YXIgbj1lLmdldExlbmd0aCgpLHI9ZS5lZGl0b3IuZGVsZXRlVGV4dCgwLG4pLG89ZS5lZGl0b3IuYXBwbHlEZWx0YSh0KSxpPW8ub3BzW28ub3BzLmxlbmd0aC0xXTtyZXR1cm4gbnVsbCE9aSYmInN0cmluZyI9PXR5cGVvZiBpLmluc2VydCYmIlxuIj09PWkuaW5zZXJ0W2kuaW5zZXJ0Lmxlbmd0aC0xXSYmKGUuZWRpdG9yLmRlbGV0ZVRleHQoZS5nZXRMZW5ndGgoKS0xLDEpLG8uZGVsZXRlKDEpKSxyLmNvbXBvc2Uobyl9LG4pfX0se2tleToic2V0U2VsZWN0aW9uIix2YWx1ZTpmdW5jdGlvbihlLG4scil7aWYobnVsbD09ZSl0aGlzLnNlbGVjdGlvbi5zZXRSYW5nZShudWxsLG58fHQuc291cmNlcy5BUEkpO2Vsc2V7dmFyIG89cyhlLG4sciksaT1mKG8sNCk7ZT1pWzBdLG49aVsxXSxyPWlbM10sdGhpcy5zZWxlY3Rpb24uc2V0UmFuZ2UobmV3IHguUmFuZ2UoZSxuKSxyKSxyIT09Zy5kZWZhdWx0LnNvdXJjZXMuU0lMRU5UJiZ0aGlzLnNlbGVjdGlvbi5zY3JvbGxJbnRvVmlldyh0aGlzLnNjcm9sbGluZ0NvbnRhaW5lcil9fX0se2tleToic2V0VGV4dCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOmcuZGVmYXVsdC5zb3VyY2VzLkFQSSxuPShuZXcgZC5kZWZhdWx0KS5pbnNlcnQodCk7cmV0dXJuIHRoaXMuc2V0Q29udGVudHMobixlKX19LHtrZXk6InVwZGF0ZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06Zy5kZWZhdWx0LnNvdXJjZXMuVVNFUixlPXRoaXMuc2Nyb2xsLnVwZGF0ZSh0KTtyZXR1cm4gdGhpcy5zZWxlY3Rpb24udXBkYXRlKHQpLGV9fSx7a2V5OiJ1cGRhdGVDb250ZW50cyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpnLmRlZmF1bHQuc291cmNlcy5BUEk7cmV0dXJuIGEuY2FsbCh0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIHQ9bmV3IGQuZGVmYXVsdCh0KSxlLmVkaXRvci5hcHBseURlbHRhKHQsbil9LG4sITApfX1dKSx0fSgpO1MuREVGQVVMVFM9e2JvdW5kczpudWxsLGZvcm1hdHM6bnVsbCxtb2R1bGVzOnt9LHBsYWNlaG9sZGVyOiIiLHJlYWRPbmx5OiExLHNjcm9sbGluZ0NvbnRhaW5lcjpudWxsLHN0cmljdDohMCx0aGVtZToiZGVmYXVsdCJ9LFMuZXZlbnRzPWcuZGVmYXVsdC5ldmVudHMsUy5zb3VyY2VzPWcuZGVmYXVsdC5zb3VyY2VzLFMudmVyc2lvbj0iMS4zLjQiLFMuaW1wb3J0cz17ZGVsdGE6ZC5kZWZhdWx0LHBhcmNobWVudDp3LmRlZmF1bHQsImNvcmUvbW9kdWxlIjpfLmRlZmF1bHQsImNvcmUvdGhlbWUiOlQuZGVmYXVsdH0sZS5leHBhbmRDb25maWc9bCxlLm92ZXJsb2FkPXMsZS5kZWZhdWx0PVN9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1mdW5jdGlvbiB0KGUpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fTtyKHRoaXMsdCksdGhpcy5xdWlsbD1lLHRoaXMub3B0aW9ucz1ufTtvLkRFRkFVTFRTPXt9LGUuZGVmYXVsdD1vfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1mdW5jdGlvbiBvKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTtyZXR1cm4hZXx8Im9iamVjdCIhPXR5cGVvZiBlJiYiZnVuY3Rpb24iIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gaSh0LGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBsPW4oMCksYT1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19KGwpLHM9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiByKHRoaXMsZSksbyh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBpKGUsdCksZX0oYS5kZWZhdWx0LlRleHQpO2UuZGVmYXVsdD1zfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIG8odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1mdW5jdGlvbiBpKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTtyZXR1cm4hZXx8Im9iamVjdCIhPXR5cGVvZiBlJiYiZnVuY3Rpb24iIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gbCh0LGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgcj1lW25dO3IuZW51bWVyYWJsZT1yLmVudW1lcmFibGV8fCExLHIuY29uZmlndXJhYmxlPSEwLCJ2YWx1ZSJpbiByJiYoci53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsci5rZXkscil9fXJldHVybiBmdW5jdGlvbihlLG4scil7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksciYmdChlLHIpLGV9fSgpLHM9ZnVuY3Rpb24gdChlLG4scil7bnVsbD09PWUmJihlPUZ1bmN0aW9uLnByb3RvdHlwZSk7dmFyIG89T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLG4pO2lmKHZvaWQgMD09PW8pe3ZhciBpPU9iamVjdC5nZXRQcm90b3R5cGVPZihlKTtyZXR1cm4gbnVsbD09PWk/dm9pZCAwOnQoaSxuLHIpfWlmKCJ2YWx1ZSJpbiBvKXJldHVybiBvLnZhbHVlO3ZhciBsPW8uZ2V0O2lmKHZvaWQgMCE9PWwpcmV0dXJuIGwuY2FsbChyKX0sdT1uKDU4KSxjPXIodSksZj1uKDEwKSxoPXIoZikscD0oMCxoLmRlZmF1bHQpKCJxdWlsbDpldmVudHMiKTtbInNlbGVjdGlvbmNoYW5nZSIsIm1vdXNlZG93biIsIm1vdXNldXAiLCJjbGljayJdLmZvckVhY2goZnVuY3Rpb24odCl7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih0LGZ1bmN0aW9uKCl7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsZT1BcnJheSh0KSxuPTA7bjx0O24rKyllW25dPWFyZ3VtZW50c1tuXTtbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5xbC1jb250YWluZXIiKSkuZm9yRWFjaChmdW5jdGlvbih0KXtpZih0Ll9fcXVpbGwmJnQuX19xdWlsbC5lbWl0dGVyKXt2YXIgbjsobj10Ll9fcXVpbGwuZW1pdHRlcikuaGFuZGxlRE9NLmFwcGx5KG4sZSl9fSl9KX0pO3ZhciBkPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtvKHRoaXMsZSk7dmFyIHQ9aSh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5saXN0ZW5lcnM9e30sdC5vbigiZXJyb3IiLHAuZXJyb3IpLHR9cmV0dXJuIGwoZSx0KSxhKGUsW3trZXk6ImVtaXQiLHZhbHVlOmZ1bmN0aW9uKCl7cC5sb2cuYXBwbHkocCxhcmd1bWVudHMpLHMoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLCJlbWl0Iix0aGlzKS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSx7a2V5OiJoYW5kbGVET00iLHZhbHVlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1hcmd1bWVudHMubGVuZ3RoLG49QXJyYXkoZT4xP2UtMTowKSxyPTE7cjxlO3IrKyluW3ItMV09YXJndW1lbnRzW3JdOyh0aGlzLmxpc3RlbmVyc1t0LnR5cGVdfHxbXSkuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgcj1lLm5vZGUsbz1lLmhhbmRsZXI7KHQudGFyZ2V0PT09cnx8ci5jb250YWlucyh0LnRhcmdldCkpJiZvLmFwcGx5KHZvaWQgMCxbdF0uY29uY2F0KG4pKX0pfX0se2tleToibGlzdGVuRE9NIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7dGhpcy5saXN0ZW5lcnNbdF18fCh0aGlzLmxpc3RlbmVyc1t0XT1bXSksdGhpcy5saXN0ZW5lcnNbdF0ucHVzaCh7bm9kZTplLGhhbmRsZXI6bn0pfX1dKSxlfShjLmRlZmF1bHQpO2QuZXZlbnRzPXtFRElUT1JfQ0hBTkdFOiJlZGl0b3ItY2hhbmdlIixTQ1JPTExfQkVGT1JFX1VQREFURToic2Nyb2xsLWJlZm9yZS11cGRhdGUiLFNDUk9MTF9PUFRJTUlaRToic2Nyb2xsLW9wdGltaXplIixTQ1JPTExfVVBEQVRFOiJzY3JvbGwtdXBkYXRlIixTRUxFQ1RJT05fQ0hBTkdFOiJzZWxlY3Rpb24tY2hhbmdlIixURVhUX0NIQU5HRToidGV4dC1jaGFuZ2UifSxkLnNvdXJjZXM9e0FQSToiYXBpIixTSUxFTlQ6InNpbGVudCIsVVNFUjoidXNlciJ9LGUuZGVmYXVsdD1kfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCl7aWYoaS5pbmRleE9mKHQpPD1pLmluZGV4T2YobCkpe2Zvcih2YXIgZSxuPWFyZ3VtZW50cy5sZW5ndGgscj1BcnJheShuPjE/bi0xOjApLG89MTtvPG47bysrKXJbby0xXT1hcmd1bWVudHNbb107KGU9Y29uc29sZSlbdF0uYXBwbHkoZSxyKX19ZnVuY3Rpb24gbyh0KXtyZXR1cm4gaS5yZWR1Y2UoZnVuY3Rpb24oZSxuKXtyZXR1cm4gZVtuXT1yLmJpbmQoY29uc29sZSxuLHQpLGV9LHt9KX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGk9WyJlcnJvciIsIndhcm4iLCJsb2ciLCJpbmZvIl0sbD0id2FybiI7ci5sZXZlbD1vLmxldmVsPWZ1bmN0aW9uKHQpe2w9dH0sZS5kZWZhdWx0PW99LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciByPW4oMSksbz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLG4pe3ZvaWQgMD09PW4mJihuPXt9KSx0aGlzLmF0dHJOYW1lPXQsdGhpcy5rZXlOYW1lPWU7dmFyIG89ci5TY29wZS5UWVBFJnIuU2NvcGUuQVRUUklCVVRFO251bGwhPW4uc2NvcGU/dGhpcy5zY29wZT1uLnNjb3BlJnIuU2NvcGUuTEVWRUx8bzp0aGlzLnNjb3BlPXIuU2NvcGUuQVRUUklCVVRFLG51bGwhPW4ud2hpdGVsaXN0JiYodGhpcy53aGl0ZWxpc3Q9bi53aGl0ZWxpc3QpfXJldHVybiB0LmtleXM9ZnVuY3Rpb24odCl7cmV0dXJuW10ubWFwLmNhbGwodC5hdHRyaWJ1dGVzLGZ1bmN0aW9uKHQpe3JldHVybiB0Lm5hbWV9KX0sdC5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKHQsZSl7cmV0dXJuISF0aGlzLmNhbkFkZCh0LGUpJiYodC5zZXRBdHRyaWJ1dGUodGhpcy5rZXlOYW1lLGUpLCEwKX0sdC5wcm90b3R5cGUuY2FuQWRkPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG51bGwhPXIucXVlcnkodCxyLlNjb3BlLkJMT1QmKHRoaXMuc2NvcGV8ci5TY29wZS5UWVBFKSkmJihudWxsPT10aGlzLndoaXRlbGlzdHx8dGhpcy53aGl0ZWxpc3QuaW5kZXhPZihlKT4tMSl9LHQucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbih0KXt0LnJlbW92ZUF0dHJpYnV0ZSh0aGlzLmtleU5hbWUpfSx0LnByb3RvdHlwZS52YWx1ZT1mdW5jdGlvbih0KXt2YXIgZT10LmdldEF0dHJpYnV0ZSh0aGlzLmtleU5hbWUpO3JldHVybiB0aGlzLmNhbkFkZCh0LGUpP2U6IiJ9LHR9KCk7ZS5kZWZhdWx0PW99LGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiByKHQpe3JldHVybiBudWxsPT09dHx8dm9pZCAwPT09dH1mdW5jdGlvbiBvKHQpe3JldHVybiEoIXR8fCJvYmplY3QiIT10eXBlb2YgdHx8Im51bWJlciIhPXR5cGVvZiB0Lmxlbmd0aCkmJigiZnVuY3Rpb24iPT10eXBlb2YgdC5jb3B5JiYiZnVuY3Rpb24iPT10eXBlb2YgdC5zbGljZSYmISh0Lmxlbmd0aD4wJiYibnVtYmVyIiE9dHlwZW9mIHRbMF0pKX1mdW5jdGlvbiBpKHQsZSxuKXt2YXIgaSxjO2lmKHIodCl8fHIoZSkpcmV0dXJuITE7aWYodC5wcm90b3R5cGUhPT1lLnByb3RvdHlwZSlyZXR1cm4hMTtpZihzKHQpKXJldHVybiEhcyhlKSYmKHQ9bC5jYWxsKHQpLGU9bC5jYWxsKGUpLHUodCxlLG4pKTtpZihvKHQpKXtpZighbyhlKSlyZXR1cm4hMTtpZih0Lmxlbmd0aCE9PWUubGVuZ3RoKXJldHVybiExO2ZvcihpPTA7aTx0Lmxlbmd0aDtpKyspaWYodFtpXSE9PWVbaV0pcmV0dXJuITE7cmV0dXJuITB9dHJ5e3ZhciBmPWEodCksaD1hKGUpfWNhdGNoKHQpe3JldHVybiExfWlmKGYubGVuZ3RoIT1oLmxlbmd0aClyZXR1cm4hMTtmb3IoZi5zb3J0KCksaC5zb3J0KCksaT1mLmxlbmd0aC0xO2k+PTA7aS0tKWlmKGZbaV0hPWhbaV0pcmV0dXJuITE7Zm9yKGk9Zi5sZW5ndGgtMTtpPj0wO2ktLSlpZihjPWZbaV0sIXUodFtjXSxlW2NdLG4pKXJldHVybiExO3JldHVybiB0eXBlb2YgdD09dHlwZW9mIGV9dmFyIGw9QXJyYXkucHJvdG90eXBlLnNsaWNlLGE9big1NSkscz1uKDU2KSx1PXQuZXhwb3J0cz1mdW5jdGlvbih0LGUsbil7cmV0dXJuIG58fChuPXt9KSx0PT09ZXx8KHQgaW5zdGFuY2VvZiBEYXRlJiZlIGluc3RhbmNlb2YgRGF0ZT90LmdldFRpbWUoKT09PWUuZ2V0VGltZSgpOiF0fHwhZXx8Im9iamVjdCIhPXR5cGVvZiB0JiYib2JqZWN0IiE9dHlwZW9mIGU/bi5zdHJpY3Q/dD09PWU6dD09ZTppKHQsZSxuKSl9fSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIG8odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1mdW5jdGlvbiBpKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTtyZXR1cm4hZXx8Im9iamVjdCIhPXR5cGVvZiBlJiYiZnVuY3Rpb24iIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gbCh0LGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLGUuZGVmYXVsdD1lLkNvZGU9dm9pZCAwO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3ZhciBuPVtdLHI9ITAsbz0hMSxpPXZvaWQgMDt0cnl7Zm9yKHZhciBsLGE9dFtTeW1ib2wuaXRlcmF0b3JdKCk7IShyPShsPWEubmV4dCgpKS5kb25lKSYmKG4ucHVzaChsLnZhbHVlKSwhZXx8bi5sZW5ndGghPT1lKTtyPSEwKTt9Y2F0Y2godCl7bz0hMCxpPXR9ZmluYWxseXt0cnl7IXImJmEucmV0dXJuJiZhLnJldHVybigpfWZpbmFsbHl7aWYobyl0aHJvdyBpfX1yZXR1cm4gbn1yZXR1cm4gZnVuY3Rpb24oZSxuKXtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiBlO2lmKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoZSkpcmV0dXJuIHQoZSxuKTt0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIil9fSgpLHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciByPWVbbl07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsInZhbHVlImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLmtleSxyKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxyJiZ0KGUsciksZX19KCksdT1mdW5jdGlvbiB0KGUsbixyKXtudWxsPT09ZSYmKGU9RnVuY3Rpb24ucHJvdG90eXBlKTt2YXIgbz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsbik7aWYodm9pZCAwPT09byl7dmFyIGk9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO3JldHVybiBudWxsPT09aT92b2lkIDA6dChpLG4scil9aWYoInZhbHVlImluIG8pcmV0dXJuIG8udmFsdWU7dmFyIGw9by5nZXQ7aWYodm9pZCAwIT09bClyZXR1cm4gbC5jYWxsKHIpfSxjPW4oNCksZj1yKGMpLGg9bigwKSxwPXIoaCksZD1uKDMpLHk9cihkKSx2PW4oNSksYj1yKHYpLGc9big4KSxtPXIoZyksXz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG8odGhpcyxlKSxpKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGwoZSx0KSxlfShiLmRlZmF1bHQpO18uYmxvdE5hbWU9ImNvZGUiLF8udGFnTmFtZT0iQ09ERSI7dmFyIE89ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBvKHRoaXMsZSksaSh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBsKGUsdCkscyhlLFt7a2V5OiJkZWx0YSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9dGhpcy5kb21Ob2RlLnRleHRDb250ZW50O3JldHVybiBlLmVuZHNXaXRoKCJcbiIpJiYoZT1lLnNsaWNlKDAsLTEpKSxlLnNwbGl0KCJcbiIpLnJlZHVjZShmdW5jdGlvbihlLG4pe3JldHVybiBlLmluc2VydChuKS5pbnNlcnQoIlxuIix0LmZvcm1hdHMoKSl9LG5ldyBmLmRlZmF1bHQpfX0se2tleToiZm9ybWF0Iix2YWx1ZTpmdW5jdGlvbih0LG4pe2lmKHQhPT10aGlzLnN0YXRpY3MuYmxvdE5hbWV8fCFuKXt2YXIgcj10aGlzLmRlc2NlbmRhbnQobS5kZWZhdWx0LHRoaXMubGVuZ3RoKCktMSksbz1hKHIsMSksaT1vWzBdO251bGwhPWkmJmkuZGVsZXRlQXQoaS5sZW5ndGgoKS0xLDEpLHUoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLCJmb3JtYXQiLHRoaXMpLmNhbGwodGhpcyx0LG4pfX19LHtrZXk6ImZvcm1hdEF0Iix2YWx1ZTpmdW5jdGlvbih0LG4scixvKXtpZigwIT09biYmbnVsbCE9cC5kZWZhdWx0LnF1ZXJ5KHIscC5kZWZhdWx0LlNjb3BlLkJMT0NLKSYmKHIhPT10aGlzLnN0YXRpY3MuYmxvdE5hbWV8fG8hPT10aGlzLnN0YXRpY3MuZm9ybWF0cyh0aGlzLmRvbU5vZGUpKSl7dmFyIGk9dGhpcy5uZXdsaW5lSW5kZXgodCk7aWYoIShpPDB8fGk+PXQrbikpe3ZhciBsPXRoaXMubmV3bGluZUluZGV4KHQsITApKzEsYT1pLWwrMSxzPXRoaXMuaXNvbGF0ZShsLGEpLHU9cy5uZXh0O3MuZm9ybWF0KHIsbyksdSBpbnN0YW5jZW9mIGUmJnUuZm9ybWF0QXQoMCx0LWwrbi1hLHIsbyl9fX19LHtrZXk6Imluc2VydEF0Iix2YWx1ZTpmdW5jdGlvbih0LGUsbil7aWYobnVsbD09bil7dmFyIHI9dGhpcy5kZXNjZW5kYW50KG0uZGVmYXVsdCx0KSxvPWEociwyKSxpPW9bMF0sbD1vWzFdO2kuaW5zZXJ0QXQobCxlKX19fSx7a2V5OiJsZW5ndGgiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5kb21Ob2RlLnRleHRDb250ZW50Lmxlbmd0aDtyZXR1cm4gdGhpcy5kb21Ob2RlLnRleHRDb250ZW50LmVuZHNXaXRoKCJcbiIpP3Q6dCsxfX0se2tleToibmV3bGluZUluZGV4Iix2YWx1ZTpmdW5jdGlvbih0KXtpZihhcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSYmYXJndW1lbnRzWzFdKXJldHVybiB0aGlzLmRvbU5vZGUudGV4dENvbnRlbnQuc2xpY2UoMCx0KS5sYXN0SW5kZXhPZigiXG4iKTt2YXIgZT10aGlzLmRvbU5vZGUudGV4dENvbnRlbnQuc2xpY2UodCkuaW5kZXhPZigiXG4iKTtyZXR1cm4gZT4tMT90K2U6LTF9fSx7a2V5OiJvcHRpbWl6ZSIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5kb21Ob2RlLnRleHRDb250ZW50LmVuZHNXaXRoKCJcbiIpfHx0aGlzLmFwcGVuZENoaWxkKHAuZGVmYXVsdC5jcmVhdGUoInRleHQiLCJcbiIpKSx1KGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSwib3B0aW1pemUiLHRoaXMpLmNhbGwodGhpcyx0KTt2YXIgbj10aGlzLm5leHQ7bnVsbCE9biYmbi5wcmV2PT09dGhpcyYmbi5zdGF0aWNzLmJsb3ROYW1lPT09dGhpcy5zdGF0aWNzLmJsb3ROYW1lJiZ0aGlzLnN0YXRpY3MuZm9ybWF0cyh0aGlzLmRvbU5vZGUpPT09bi5zdGF0aWNzLmZvcm1hdHMobi5kb21Ob2RlKSYmKG4ub3B0aW1pemUodCksbi5tb3ZlQ2hpbGRyZW4odGhpcyksbi5yZW1vdmUoKSl9fSx7a2V5OiJyZXBsYWNlIix2YWx1ZTpmdW5jdGlvbih0KXt1KGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSwicmVwbGFjZSIsdGhpcykuY2FsbCh0aGlzLHQpLFtdLnNsaWNlLmNhbGwodGhpcy5kb21Ob2RlLnF1ZXJ5U2VsZWN0b3JBbGwoIioiKSkuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgZT1wLmRlZmF1bHQuZmluZCh0KTtudWxsPT1lP3QucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0KTplIGluc3RhbmNlb2YgcC5kZWZhdWx0LkVtYmVkP2UucmVtb3ZlKCk6ZS51bndyYXAoKX0pfX1dLFt7a2V5OiJjcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBuPXUoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSwiY3JlYXRlIix0aGlzKS5jYWxsKHRoaXMsdCk7cmV0dXJuIG4uc2V0QXR0cmlidXRlKCJzcGVsbGNoZWNrIiwhMSksbn19LHtrZXk6ImZvcm1hdHMiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuITB9fV0pLGV9KHkuZGVmYXVsdCk7Ty5ibG90TmFtZT0iY29kZS1ibG9jayIsTy50YWdOYW1lPSJQUkUiLE8uVEFCPSIgICIsZS5Db2RlPV8sZS5kZWZhdWx0PU99LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIG8odCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiFlfHwib2JqZWN0IiE9dHlwZW9mIGUmJiJmdW5jdGlvbiIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBpKHQsZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciByPWVbbl07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsInZhbHVlImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLmtleSxyKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxyJiZ0KGUsciksZX19KCksYT1mdW5jdGlvbiB0KGUsbixyKXtudWxsPT09ZSYmKGU9RnVuY3Rpb24ucHJvdG90eXBlKTt2YXIgbz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsbik7aWYodm9pZCAwPT09byl7dmFyIGk9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO3JldHVybiBudWxsPT09aT92b2lkIDA6dChpLG4scil9aWYoInZhbHVlImluIG8pcmV0dXJuIG8udmFsdWU7dmFyIGw9by5nZXQ7aWYodm9pZCAwIT09bClyZXR1cm4gbC5jYWxsKHIpfSxzPW4oMCksdT1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19KHMpLGM9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiByKHRoaXMsZSksbyh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBpKGUsdCksbChlLFt7a2V5OiJpbnNlcnRJbnRvIix2YWx1ZTpmdW5jdGlvbih0LG4pezA9PT10LmNoaWxkcmVuLmxlbmd0aD9hKGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSwiaW5zZXJ0SW50byIsdGhpcykuY2FsbCh0aGlzLHQsbik6dGhpcy5yZW1vdmUoKX19LHtrZXk6Imxlbmd0aCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gMH19LHtrZXk6InZhbHVlIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiIifX1dLFt7a2V5OiJ2YWx1ZSIsdmFsdWU6ZnVuY3Rpb24oKXt9fV0pLGV9KHUuZGVmYXVsdC5FbWJlZCk7Yy5ibG90TmFtZT0iYnJlYWsiLGMudGFnTmFtZT0iQlIiLGUuZGVmYXVsdD1jfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1mdW5jdGlvbiBvKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTtyZXR1cm4hZXx8Im9iamVjdCIhPXR5cGVvZiBlJiYiZnVuY3Rpb24iIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gaSh0LGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9ZnVuY3Rpb24gbCh0LGUpe3ZhciBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTtuLmhyZWY9dDt2YXIgcj1uLmhyZWYuc2xpY2UoMCxuLmhyZWYuaW5kZXhPZigiOiIpKTtyZXR1cm4gZS5pbmRleE9mKHIpPi0xfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSxlLnNhbml0aXplPWUuZGVmYXVsdD12b2lkIDA7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciByPWVbbl07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsInZhbHVlImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLmtleSxyKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxyJiZ0KGUsciksZX19KCkscz1mdW5jdGlvbiB0KGUsbixyKXtudWxsPT09ZSYmKGU9RnVuY3Rpb24ucHJvdG90eXBlKTt2YXIgbz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsbik7aWYodm9pZCAwPT09byl7dmFyIGk9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO3JldHVybiBudWxsPT09aT92b2lkIDA6dChpLG4scil9aWYoInZhbHVlImluIG8pcmV0dXJuIG8udmFsdWU7dmFyIGw9by5nZXQ7aWYodm9pZCAwIT09bClyZXR1cm4gbC5jYWxsKHIpfSx1PW4oNSksYz1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19KHUpLGY9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiByKHRoaXMsZSksbyh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBpKGUsdCksYShlLFt7a2V5OiJmb3JtYXQiLHZhbHVlOmZ1bmN0aW9uKHQsbil7aWYodCE9PXRoaXMuc3RhdGljcy5ibG90TmFtZXx8IW4pcmV0dXJuIHMoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLCJmb3JtYXQiLHRoaXMpLmNhbGwodGhpcyx0LG4pO249dGhpcy5jb25zdHJ1Y3Rvci5zYW5pdGl6ZShuKSx0aGlzLmRvbU5vZGUuc2V0QXR0cmlidXRlKCJocmVmIixuKX19XSxbe2tleToiY3JlYXRlIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgbj1zKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSksImNyZWF0ZSIsdGhpcykuY2FsbCh0aGlzLHQpO3JldHVybiB0PXRoaXMuc2FuaXRpemUodCksbi5zZXRBdHRyaWJ1dGUoImhyZWYiLHQpLG4uc2V0QXR0cmlidXRlKCJ0YXJnZXQiLCJfYmxhbmsiKSxufX0se2tleToiZm9ybWF0cyIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHQuZ2V0QXR0cmlidXRlKCJocmVmIil9fSx7a2V5OiJzYW5pdGl6ZSIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGwodCx0aGlzLlBST1RPQ09MX1dISVRFTElTVCk/dDp0aGlzLlNBTklUSVpFRF9VUkx9fV0pLGV9KGMuZGVmYXVsdCk7Zi5ibG90TmFtZT0ibGluayIsZi50YWdOYW1lPSJBIixmLlNBTklUSVpFRF9VUkw9ImFib3V0OmJsYW5rIixmLlBST1RPQ09MX1dISVRFTElTVD1bImh0dHAiLCJodHRwcyIsIm1haWx0byIsInRlbCJdLGUuZGVmYXVsdD1mLGUuc2FuaXRpemU9bH0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJiJzeW1ib2wiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKHQpe3JldHVybiB0eXBlb2YgdH06ZnVuY3Rpb24odCl7cmV0dXJuIHQmJiJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJnQuY29uc3RydWN0b3I9PT1TeW1ib2wmJnQhPT1TeW1ib2wucHJvdG90eXBlPyJzeW1ib2wiOnR5cGVvZiB0fSxpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgcj1lW25dO3IuZW51bWVyYWJsZT1yLmVudW1lcmFibGV8fCExLHIuY29uZmlndXJhYmxlPSEwLCJ2YWx1ZSJpbiByJiYoci53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsci5rZXkscil9fXJldHVybiBmdW5jdGlvbihlLG4scil7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksciYmdChlLHIpLGV9fSgpLGw9bigxMDYpLGE9ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fShsKSxzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXt2YXIgbj10aGlzO3IodGhpcyx0KSx0aGlzLnNlbGVjdD1lLHRoaXMuY29udGFpbmVyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKSx0aGlzLmJ1aWxkUGlja2VyKCksdGhpcy5zZWxlY3Quc3R5bGUuZGlzcGxheT0ibm9uZSIsdGhpcy5zZWxlY3QucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5jb250YWluZXIsdGhpcy5zZWxlY3QpLHRoaXMubGFiZWwuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vkb3duIixmdW5jdGlvbigpe24uY29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoInFsLWV4cGFuZGVkIil9KSx0aGlzLnNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLHRoaXMudXBkYXRlLmJpbmQodGhpcykpfXJldHVybiBpKHQsW3trZXk6ImJ1aWxkSXRlbSIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTtyZXR1cm4gbi5jbGFzc0xpc3QuYWRkKCJxbC1waWNrZXItaXRlbSIpLHQuaGFzQXR0cmlidXRlKCJ2YWx1ZSIpJiZuLnNldEF0dHJpYnV0ZSgiZGF0YS12YWx1ZSIsdC5nZXRBdHRyaWJ1dGUoInZhbHVlIikpLHQudGV4dENvbnRlbnQmJm4uc2V0QXR0cmlidXRlKCJkYXRhLWxhYmVsIix0LnRleHRDb250ZW50KSxuLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIixmdW5jdGlvbigpe2Uuc2VsZWN0SXRlbShuLCEwKX0pLG59fSx7a2V5OiJidWlsZExhYmVsIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTtyZXR1cm4gdC5jbGFzc0xpc3QuYWRkKCJxbC1waWNrZXItbGFiZWwiKSx0LmlubmVySFRNTD1hLmRlZmF1bHQsdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodCksdH19LHtrZXk6ImJ1aWxkT3B0aW9ucyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpO2UuY2xhc3NMaXN0LmFkZCgicWwtcGlja2VyLW9wdGlvbnMiKSxbXS5zbGljZS5jYWxsKHRoaXMuc2VsZWN0Lm9wdGlvbnMpLmZvckVhY2goZnVuY3Rpb24obil7dmFyIHI9dC5idWlsZEl0ZW0obik7ZS5hcHBlbmRDaGlsZChyKSwhMD09PW4uc2VsZWN0ZWQmJnQuc2VsZWN0SXRlbShyKX0pLHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKGUpfX0se2tleToiYnVpbGRQaWNrZXIiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztbXS5zbGljZS5jYWxsKHRoaXMuc2VsZWN0LmF0dHJpYnV0ZXMpLmZvckVhY2goZnVuY3Rpb24oZSl7dC5jb250YWluZXIuc2V0QXR0cmlidXRlKGUubmFtZSxlLnZhbHVlKX0pLHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoInFsLXBpY2tlciIpLHRoaXMubGFiZWw9dGhpcy5idWlsZExhYmVsKCksdGhpcy5idWlsZE9wdGlvbnMoKX19LHtrZXk6ImNsb3NlIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoInFsLWV4cGFuZGVkIil9fSx7a2V5OiJzZWxlY3RJdGVtIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSYmYXJndW1lbnRzWzFdLG49dGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcigiLnFsLXNlbGVjdGVkIik7aWYodCE9PW4mJihudWxsIT1uJiZuLmNsYXNzTGlzdC5yZW1vdmUoInFsLXNlbGVjdGVkIiksbnVsbCE9dCYmKHQuY2xhc3NMaXN0LmFkZCgicWwtc2VsZWN0ZWQiKSx0aGlzLnNlbGVjdC5zZWxlY3RlZEluZGV4PVtdLmluZGV4T2YuY2FsbCh0LnBhcmVudE5vZGUuY2hpbGRyZW4sdCksdC5oYXNBdHRyaWJ1dGUoImRhdGEtdmFsdWUiKT90aGlzLmxhYmVsLnNldEF0dHJpYnV0ZSgiZGF0YS12YWx1ZSIsdC5nZXRBdHRyaWJ1dGUoImRhdGEtdmFsdWUiKSk6dGhpcy5sYWJlbC5yZW1vdmVBdHRyaWJ1dGUoImRhdGEtdmFsdWUiKSx0Lmhhc0F0dHJpYnV0ZSgiZGF0YS1sYWJlbCIpP3RoaXMubGFiZWwuc2V0QXR0cmlidXRlKCJkYXRhLWxhYmVsIix0LmdldEF0dHJpYnV0ZSgiZGF0YS1sYWJlbCIpKTp0aGlzLmxhYmVsLnJlbW92ZUF0dHJpYnV0ZSgiZGF0YS1sYWJlbCIpLGUpKSl7aWYoImZ1bmN0aW9uIj09dHlwZW9mIEV2ZW50KXRoaXMuc2VsZWN0LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCJjaGFuZ2UiKSk7ZWxzZSBpZigib2JqZWN0Ij09PSgidW5kZWZpbmVkIj09dHlwZW9mIEV2ZW50PyJ1bmRlZmluZWQiOm8oRXZlbnQpKSl7dmFyIHI9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkV2ZW50Iik7ci5pbml0RXZlbnQoImNoYW5nZSIsITAsITApLHRoaXMuc2VsZWN0LmRpc3BhdGNoRXZlbnQocil9dGhpcy5jbG9zZSgpfX19LHtrZXk6InVwZGF0ZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD12b2lkIDA7aWYodGhpcy5zZWxlY3Quc2VsZWN0ZWRJbmRleD4tMSl7dmFyIGU9dGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcigiLnFsLXBpY2tlci1vcHRpb25zIikuY2hpbGRyZW5bdGhpcy5zZWxlY3Quc2VsZWN0ZWRJbmRleF07dD10aGlzLnNlbGVjdC5vcHRpb25zW3RoaXMuc2VsZWN0LnNlbGVjdGVkSW5kZXhdLHRoaXMuc2VsZWN0SXRlbShlKX1lbHNlIHRoaXMuc2VsZWN0SXRlbShudWxsKTt2YXIgbj1udWxsIT10JiZ0IT09dGhpcy5zZWxlY3QucXVlcnlTZWxlY3Rvcigib3B0aW9uW3NlbGVjdGVkXSIpO3RoaXMubGFiZWwuY2xhc3NMaXN0LnRvZ2dsZSgicWwtYWN0aXZlIixuKX19XSksdH0oKTtlLmRlZmF1bHQ9c30sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQpe3ZhciBlPWEuZmluZCh0KTtpZihudWxsPT1lKXRyeXtlPWEuY3JlYXRlKHQpfWNhdGNoKG4pe2U9YS5jcmVhdGUoYS5TY29wZS5JTkxJTkUpLFtdLnNsaWNlLmNhbGwodC5jaGlsZE5vZGVzKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2UuZG9tTm9kZS5hcHBlbmRDaGlsZCh0KX0pLHQucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoZS5kb21Ob2RlLHQpLGUuYXR0YWNoKCl9cmV0dXJuIGV9dmFyIG89dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIHQ9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShuKSYmKHRbbl09ZVtuXSl9O3JldHVybiBmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLG4pLGUucHJvdG90eXBlPW51bGw9PT1uP09iamVjdC5jcmVhdGUobik6KHIucHJvdG90eXBlPW4ucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBpPW4oNDcpLGw9bigyNyksYT1uKDEpLHM9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIG8oZSx0KSxlLnByb3RvdHlwZS5hcHBlbmRDaGlsZD1mdW5jdGlvbih0KXt0aGlzLmluc2VydEJlZm9yZSh0KX0sZS5wcm90b3R5cGUuYXR0YWNoPWZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0LnByb3RvdHlwZS5hdHRhY2guY2FsbCh0aGlzKSx0aGlzLmNoaWxkcmVuPW5ldyBpLmRlZmF1bHQsW10uc2xpY2UuY2FsbCh0aGlzLmRvbU5vZGUuY2hpbGROb2RlcykucmV2ZXJzZSgpLmZvckVhY2goZnVuY3Rpb24odCl7dHJ5e3ZhciBuPXIodCk7ZS5pbnNlcnRCZWZvcmUobixlLmNoaWxkcmVuLmhlYWQpfWNhdGNoKHQpe2lmKHQgaW5zdGFuY2VvZiBhLlBhcmNobWVudEVycm9yKXJldHVybjt0aHJvdyB0fX0pfSxlLnByb3RvdHlwZS5kZWxldGVBdD1mdW5jdGlvbih0LGUpe2lmKDA9PT10JiZlPT09dGhpcy5sZW5ndGgoKSlyZXR1cm4gdGhpcy5yZW1vdmUoKTt0aGlzLmNoaWxkcmVuLmZvckVhY2hBdCh0LGUsZnVuY3Rpb24odCxlLG4pe3QuZGVsZXRlQXQoZSxuKX0pfSxlLnByb3RvdHlwZS5kZXNjZW5kYW50PWZ1bmN0aW9uKHQsbil7dmFyIHI9dGhpcy5jaGlsZHJlbi5maW5kKG4pLG89clswXSxpPXJbMV07cmV0dXJuIG51bGw9PXQuYmxvdE5hbWUmJnQobyl8fG51bGwhPXQuYmxvdE5hbWUmJm8gaW5zdGFuY2VvZiB0P1tvLGldOm8gaW5zdGFuY2VvZiBlP28uZGVzY2VuZGFudCh0LGkpOltudWxsLC0xXX0sZS5wcm90b3R5cGUuZGVzY2VuZGFudHM9ZnVuY3Rpb24odCxuLHIpe3ZvaWQgMD09PW4mJihuPTApLHZvaWQgMD09PXImJihyPU51bWJlci5NQVhfVkFMVUUpO3ZhciBvPVtdLGk9cjtyZXR1cm4gdGhpcy5jaGlsZHJlbi5mb3JFYWNoQXQobixyLGZ1bmN0aW9uKG4scixsKXsobnVsbD09dC5ibG90TmFtZSYmdChuKXx8bnVsbCE9dC5ibG90TmFtZSYmbiBpbnN0YW5jZW9mIHQpJiZvLnB1c2gobiksbiBpbnN0YW5jZW9mIGUmJihvPW8uY29uY2F0KG4uZGVzY2VuZGFudHModCxyLGkpKSksaS09bH0pLG99LGUucHJvdG90eXBlLmRldGFjaD1mdW5jdGlvbigpe3RoaXMuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbih0KXt0LmRldGFjaCgpfSksdC5wcm90b3R5cGUuZGV0YWNoLmNhbGwodGhpcyl9LGUucHJvdG90eXBlLmZvcm1hdEF0PWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMuY2hpbGRyZW4uZm9yRWFjaEF0KHQsZSxmdW5jdGlvbih0LGUsbyl7dC5mb3JtYXRBdChlLG8sbixyKX0pfSxlLnByb3RvdHlwZS5pbnNlcnRBdD1mdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpcy5jaGlsZHJlbi5maW5kKHQpLG89clswXSxpPXJbMV07aWYobylvLmluc2VydEF0KGksZSxuKTtlbHNle3ZhciBsPW51bGw9PW4/YS5jcmVhdGUoInRleHQiLGUpOmEuY3JlYXRlKGUsbik7dGhpcy5hcHBlbmRDaGlsZChsKX19LGUucHJvdG90eXBlLmluc2VydEJlZm9yZT1mdW5jdGlvbih0LGUpe2lmKG51bGwhPXRoaXMuc3RhdGljcy5hbGxvd2VkQ2hpbGRyZW4mJiF0aGlzLnN0YXRpY3MuYWxsb3dlZENoaWxkcmVuLnNvbWUoZnVuY3Rpb24oZSl7cmV0dXJuIHQgaW5zdGFuY2VvZiBlfSkpdGhyb3cgbmV3IGEuUGFyY2htZW50RXJyb3IoIkNhbm5vdCBpbnNlcnQgIit0LnN0YXRpY3MuYmxvdE5hbWUrIiBpbnRvICIrdGhpcy5zdGF0aWNzLmJsb3ROYW1lKTt0Lmluc2VydEludG8odGhpcyxlKX0sZS5wcm90b3R5cGUubGVuZ3RoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2hpbGRyZW4ucmVkdWNlKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQrZS5sZW5ndGgoKX0sMCl9LGUucHJvdG90eXBlLm1vdmVDaGlsZHJlbj1mdW5jdGlvbih0LGUpe3RoaXMuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbihuKXt0Lmluc2VydEJlZm9yZShuLGUpfSl9LGUucHJvdG90eXBlLm9wdGltaXplPWZ1bmN0aW9uKGUpe2lmKHQucHJvdG90eXBlLm9wdGltaXplLmNhbGwodGhpcyxlKSwwPT09dGhpcy5jaGlsZHJlbi5sZW5ndGgpaWYobnVsbCE9dGhpcy5zdGF0aWNzLmRlZmF1bHRDaGlsZCl7dmFyIG49YS5jcmVhdGUodGhpcy5zdGF0aWNzLmRlZmF1bHRDaGlsZCk7dGhpcy5hcHBlbmRDaGlsZChuKSxuLm9wdGltaXplKGUpfWVsc2UgdGhpcy5yZW1vdmUoKX0sZS5wcm90b3R5cGUucGF0aD1mdW5jdGlvbih0LG4pe3ZvaWQgMD09PW4mJihuPSExKTt2YXIgcj10aGlzLmNoaWxkcmVuLmZpbmQodCxuKSxvPXJbMF0saT1yWzFdLGw9W1t0aGlzLHRdXTtyZXR1cm4gbyBpbnN0YW5jZW9mIGU/bC5jb25jYXQoby5wYXRoKGksbikpOihudWxsIT1vJiZsLnB1c2goW28saV0pLGwpfSxlLnByb3RvdHlwZS5yZW1vdmVDaGlsZD1mdW5jdGlvbih0KXt0aGlzLmNoaWxkcmVuLnJlbW92ZSh0KX0sZS5wcm90b3R5cGUucmVwbGFjZT1mdW5jdGlvbihuKXtuIGluc3RhbmNlb2YgZSYmbi5tb3ZlQ2hpbGRyZW4odGhpcyksdC5wcm90b3R5cGUucmVwbGFjZS5jYWxsKHRoaXMsbil9LGUucHJvdG90eXBlLnNwbGl0PWZ1bmN0aW9uKHQsZSl7aWYodm9pZCAwPT09ZSYmKGU9ITEpLCFlKXtpZigwPT09dClyZXR1cm4gdGhpcztpZih0PT09dGhpcy5sZW5ndGgoKSlyZXR1cm4gdGhpcy5uZXh0fXZhciBuPXRoaXMuY2xvbmUoKTtyZXR1cm4gdGhpcy5wYXJlbnQuaW5zZXJ0QmVmb3JlKG4sdGhpcy5uZXh0KSx0aGlzLmNoaWxkcmVuLmZvckVhY2hBdCh0LHRoaXMubGVuZ3RoKCksZnVuY3Rpb24odCxyLG8pe3Q9dC5zcGxpdChyLGUpLG4uYXBwZW5kQ2hpbGQodCl9KSxufSxlLnByb3RvdHlwZS51bndyYXA9ZnVuY3Rpb24oKXt0aGlzLm1vdmVDaGlsZHJlbih0aGlzLnBhcmVudCx0aGlzLm5leHQpLHRoaXMucmVtb3ZlKCl9LGUucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMsbz1bXSxpPVtdO3QuZm9yRWFjaChmdW5jdGlvbih0KXt0LnRhcmdldD09PW4uZG9tTm9kZSYmImNoaWxkTGlzdCI9PT10LnR5cGUmJihvLnB1c2guYXBwbHkobyx0LmFkZGVkTm9kZXMpLGkucHVzaC5hcHBseShpLHQucmVtb3ZlZE5vZGVzKSl9KSxpLmZvckVhY2goZnVuY3Rpb24odCl7aWYoIShudWxsIT10LnBhcmVudE5vZGUmJiJJRlJBTUUiIT09dC50YWdOYW1lJiZkb2N1bWVudC5ib2R5LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHQpJk5vZGUuRE9DVU1FTlRfUE9TSVRJT05fQ09OVEFJTkVEX0JZKSl7dmFyIGU9YS5maW5kKHQpO251bGwhPWUmJihudWxsIT1lLmRvbU5vZGUucGFyZW50Tm9kZSYmZS5kb21Ob2RlLnBhcmVudE5vZGUhPT1uLmRvbU5vZGV8fGUuZGV0YWNoKCkpfX0pLG8uZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiB0LnBhcmVudE5vZGU9PW4uZG9tTm9kZX0pLnNvcnQoZnVuY3Rpb24odCxlKXtyZXR1cm4gdD09PWU/MDp0LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGUpJk5vZGUuRE9DVU1FTlRfUE9TSVRJT05fRk9MTE9XSU5HPzE6LTF9KS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBlPW51bGw7bnVsbCE9dC5uZXh0U2libGluZyYmKGU9YS5maW5kKHQubmV4dFNpYmxpbmcpKTt2YXIgbz1yKHQpO28ubmV4dD09ZSYmbnVsbCE9by5uZXh0fHwobnVsbCE9by5wYXJlbnQmJm8ucGFyZW50LnJlbW92ZUNoaWxkKG4pLG4uaW5zZXJ0QmVmb3JlKG8sZSkpfSl9LGV9KGwuZGVmYXVsdCk7ZS5kZWZhdWx0PXN9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIHI9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIHQ9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShuKSYmKHRbbl09ZVtuXSl9O3JldHVybiBmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLG4pLGUucHJvdG90eXBlPW51bGw9PT1uP09iamVjdC5jcmVhdGUobik6KHIucHJvdG90eXBlPW4ucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPW4oMTEpLGk9bigyOCksbD1uKDE3KSxhPW4oMSkscz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gcihlLHQpLGUuZm9ybWF0cz1mdW5jdGlvbih0KXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHRoaXMudGFnTmFtZXx8KEFycmF5LmlzQXJyYXkodGhpcy50YWdOYW1lKT90LnRhZ05hbWUudG9Mb3dlckNhc2UoKTp2b2lkIDApfSxlLnByb3RvdHlwZS5hdHRhY2g9ZnVuY3Rpb24oKXt0LnByb3RvdHlwZS5hdHRhY2guY2FsbCh0aGlzKSx0aGlzLmF0dHJpYnV0ZXM9bmV3IGkuZGVmYXVsdCh0aGlzLmRvbU5vZGUpfSxlLnByb3RvdHlwZS5mb3JtYXQ9ZnVuY3Rpb24odCxlKXt2YXIgbj1hLnF1ZXJ5KHQpO24gaW5zdGFuY2VvZiBvLmRlZmF1bHQ/dGhpcy5hdHRyaWJ1dGVzLmF0dHJpYnV0ZShuLGUpOmUmJihudWxsPT1ufHx0PT09dGhpcy5zdGF0aWNzLmJsb3ROYW1lJiZ0aGlzLmZvcm1hdHMoKVt0XT09PWV8fHRoaXMucmVwbGFjZVdpdGgodCxlKSl9LGUucHJvdG90eXBlLmZvcm1hdHM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmF0dHJpYnV0ZXMudmFsdWVzKCksZT10aGlzLnN0YXRpY3MuZm9ybWF0cyh0aGlzLmRvbU5vZGUpO3JldHVybiBudWxsIT1lJiYodFt0aGlzLnN0YXRpY3MuYmxvdE5hbWVdPWUpLHR9LGUucHJvdG90eXBlLnJlcGxhY2VXaXRoPWZ1bmN0aW9uKGUsbil7dmFyIHI9dC5wcm90b3R5cGUucmVwbGFjZVdpdGguY2FsbCh0aGlzLGUsbik7cmV0dXJuIHRoaXMuYXR0cmlidXRlcy5jb3B5KHIpLHJ9LGUucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbihlLG4pe3ZhciByPXRoaXM7dC5wcm90b3R5cGUudXBkYXRlLmNhbGwodGhpcyxlLG4pLGUuc29tZShmdW5jdGlvbih0KXtyZXR1cm4gdC50YXJnZXQ9PT1yLmRvbU5vZGUmJiJhdHRyaWJ1dGVzIj09PXQudHlwZX0pJiZ0aGlzLmF0dHJpYnV0ZXMuYnVpbGQoKX0sZS5wcm90b3R5cGUud3JhcD1mdW5jdGlvbihuLHIpe3ZhciBvPXQucHJvdG90eXBlLndyYXAuY2FsbCh0aGlzLG4scik7cmV0dXJuIG8gaW5zdGFuY2VvZiBlJiZvLnN0YXRpY3Muc2NvcGU9PT10aGlzLnN0YXRpY3Muc2NvcGUmJnRoaXMuYXR0cmlidXRlcy5tb3ZlKG8pLG99LGV9KGwuZGVmYXVsdCk7ZS5kZWZhdWx0PXN9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIHI9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIHQ9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShuKSYmKHRbbl09ZVtuXSl9O3JldHVybiBmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLG4pLGUucHJvdG90eXBlPW51bGw9PT1uP09iamVjdC5jcmVhdGUobik6KHIucHJvdG90eXBlPW4ucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPW4oMjcpLGk9bigxKSxsPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiByKGUsdCksZS52YWx1ZT1mdW5jdGlvbih0KXtyZXR1cm4hMH0sZS5wcm90b3R5cGUuaW5kZXg9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5kb21Ob2RlPT09dHx8dGhpcy5kb21Ob2RlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHQpJk5vZGUuRE9DVU1FTlRfUE9TSVRJT05fQ09OVEFJTkVEX0JZP01hdGgubWluKGUsMSk6LTF9LGUucHJvdG90eXBlLnBvc2l0aW9uPWZ1bmN0aW9uKHQsZSl7dmFyIG49W10uaW5kZXhPZi5jYWxsKHRoaXMucGFyZW50LmRvbU5vZGUuY2hpbGROb2Rlcyx0aGlzLmRvbU5vZGUpO3JldHVybiB0PjAmJihuKz0xKSxbdGhpcy5wYXJlbnQuZG9tTm9kZSxuXX0sZS5wcm90b3R5cGUudmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4gdD17fSx0W3RoaXMuc3RhdGljcy5ibG90TmFtZV09dGhpcy5zdGF0aWNzLnZhbHVlKHRoaXMuZG9tTm9kZSl8fCEwLHQ7dmFyIHR9LGUuc2NvcGU9aS5TY29wZS5JTkxJTkVfQkxPVCxlfShvLmRlZmF1bHQpO2UuZGVmYXVsdD1sfSxmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gcih0KXt0aGlzLm9wcz10LHRoaXMuaW5kZXg9MCx0aGlzLm9mZnNldD0wfXZhciBvPW4oMTIpLGk9bigyKSxsPXthdHRyaWJ1dGVzOntjb21wb3NlOmZ1bmN0aW9uKHQsZSxuKXsib2JqZWN0IiE9dHlwZW9mIHQmJih0PXt9KSwib2JqZWN0IiE9dHlwZW9mIGUmJihlPXt9KTt2YXIgcj1pKCEwLHt9LGUpO258fChyPU9iamVjdC5rZXlzKHIpLnJlZHVjZShmdW5jdGlvbih0LGUpe3JldHVybiBudWxsIT1yW2VdJiYodFtlXT1yW2VdKSx0fSx7fSkpO2Zvcih2YXIgbyBpbiB0KXZvaWQgMCE9PXRbb10mJnZvaWQgMD09PWVbb10mJihyW29dPXRbb10pO3JldHVybiBPYmplY3Qua2V5cyhyKS5sZW5ndGg+MD9yOnZvaWQgMH0sZGlmZjpmdW5jdGlvbih0LGUpeyJvYmplY3QiIT10eXBlb2YgdCYmKHQ9e30pLCJvYmplY3QiIT10eXBlb2YgZSYmKGU9e30pO3ZhciBuPU9iamVjdC5rZXlzKHQpLmNvbmNhdChPYmplY3Qua2V5cyhlKSkucmVkdWNlKGZ1bmN0aW9uKG4scil7cmV0dXJuIG8odFtyXSxlW3JdKXx8KG5bcl09dm9pZCAwPT09ZVtyXT9udWxsOmVbcl0pLG59LHt9KTtyZXR1cm4gT2JqZWN0LmtleXMobikubGVuZ3RoPjA/bjp2b2lkIDB9LHRyYW5zZm9ybTpmdW5jdGlvbih0LGUsbil7aWYoIm9iamVjdCIhPXR5cGVvZiB0KXJldHVybiBlO2lmKCJvYmplY3QiPT10eXBlb2YgZSl7aWYoIW4pcmV0dXJuIGU7dmFyIHI9T2JqZWN0LmtleXMoZSkucmVkdWNlKGZ1bmN0aW9uKG4scil7cmV0dXJuIHZvaWQgMD09PXRbcl0mJihuW3JdPWVbcl0pLG59LHt9KTtyZXR1cm4gT2JqZWN0LmtleXMocikubGVuZ3RoPjA/cjp2b2lkIDB9fX0saXRlcmF0b3I6ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyByKHQpfSxsZW5ndGg6ZnVuY3Rpb24odCl7cmV0dXJuIm51bWJlciI9PXR5cGVvZiB0LmRlbGV0ZT90LmRlbGV0ZToibnVtYmVyIj09dHlwZW9mIHQucmV0YWluP3QucmV0YWluOiJzdHJpbmciPT10eXBlb2YgdC5pbnNlcnQ/dC5pbnNlcnQubGVuZ3RoOjF9fTtyLnByb3RvdHlwZS5oYXNOZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGVla0xlbmd0aCgpPDEvMH0sci5wcm90b3R5cGUubmV4dD1mdW5jdGlvbih0KXt0fHwodD0xLzApO3ZhciBlPXRoaXMub3BzW3RoaXMuaW5kZXhdO2lmKGUpe3ZhciBuPXRoaXMub2Zmc2V0LHI9bC5sZW5ndGgoZSk7aWYodD49ci1uPyh0PXItbix0aGlzLmluZGV4Kz0xLHRoaXMub2Zmc2V0PTApOnRoaXMub2Zmc2V0Kz10LCJudW1iZXIiPT10eXBlb2YgZS5kZWxldGUpcmV0dXJue2RlbGV0ZTp0fTt2YXIgbz17fTtyZXR1cm4gZS5hdHRyaWJ1dGVzJiYoby5hdHRyaWJ1dGVzPWUuYXR0cmlidXRlcyksIm51bWJlciI9PXR5cGVvZiBlLnJldGFpbj9vLnJldGFpbj10OiJzdHJpbmciPT10eXBlb2YgZS5pbnNlcnQ/by5pbnNlcnQ9ZS5pbnNlcnQuc3Vic3RyKG4sdCk6by5pbnNlcnQ9ZS5pbnNlcnQsb31yZXR1cm57cmV0YWluOjEvMH19LHIucHJvdG90eXBlLnBlZWs9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHNbdGhpcy5pbmRleF19LHIucHJvdG90eXBlLnBlZWtMZW5ndGg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHNbdGhpcy5pbmRleF0/bC5sZW5ndGgodGhpcy5vcHNbdGhpcy5pbmRleF0pLXRoaXMub2Zmc2V0OjEvMH0sci5wcm90b3R5cGUucGVla1R5cGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHNbdGhpcy5pbmRleF0/Im51bWJlciI9PXR5cGVvZiB0aGlzLm9wc1t0aGlzLmluZGV4XS5kZWxldGU/ImRlbGV0ZSI6Im51bWJlciI9PXR5cGVvZiB0aGlzLm9wc1t0aGlzLmluZGV4XS5yZXRhaW4/InJldGFpbiI6Imluc2VydCI6InJldGFpbiJ9LHQuZXhwb3J0cz1sfSxmdW5jdGlvbih0LGUpe3ZhciBuPWZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHQodCxlKXtyZXR1cm4gbnVsbCE9ZSYmdCBpbnN0YW5jZW9mIGV9ZnVuY3Rpb24gZShuLHIsbyxpLGMpe2Z1bmN0aW9uIGYobixvKXtpZihudWxsPT09bilyZXR1cm4gbnVsbDtpZigwPT09bylyZXR1cm4gbjt2YXIgeSx2O2lmKCJvYmplY3QiIT10eXBlb2YgbilyZXR1cm4gbjtpZih0KG4sYSkpeT1uZXcgYTtlbHNlIGlmKHQobixzKSl5PW5ldyBzO2Vsc2UgaWYodChuLHUpKXk9bmV3IHUoZnVuY3Rpb24odCxlKXtuLnRoZW4oZnVuY3Rpb24oZSl7dChmKGUsby0xKSl9LGZ1bmN0aW9uKHQpe2UoZih0LG8tMSkpfSl9KTtlbHNlIGlmKGUuX19pc0FycmF5KG4pKXk9W107ZWxzZSBpZihlLl9faXNSZWdFeHAobikpeT1uZXcgUmVnRXhwKG4uc291cmNlLGwobikpLG4ubGFzdEluZGV4JiYoeS5sYXN0SW5kZXg9bi5sYXN0SW5kZXgpO2Vsc2UgaWYoZS5fX2lzRGF0ZShuKSl5PW5ldyBEYXRlKG4uZ2V0VGltZSgpKTtlbHNle2lmKGQmJkJ1ZmZlci5pc0J1ZmZlcihuKSlyZXR1cm4geT1uZXcgQnVmZmVyKG4ubGVuZ3RoKSxuLmNvcHkoeSkseTt0KG4sRXJyb3IpP3k9T2JqZWN0LmNyZWF0ZShuKTp2b2lkIDA9PT1pPyh2PU9iamVjdC5nZXRQcm90b3R5cGVPZihuKSx5PU9iamVjdC5jcmVhdGUodikpOih5PU9iamVjdC5jcmVhdGUoaSksdj1pKX1pZihyKXt2YXIgYj1oLmluZGV4T2Yobik7aWYoLTEhPWIpcmV0dXJuIHBbYl07aC5wdXNoKG4pLHAucHVzaCh5KX10KG4sYSkmJm4uZm9yRWFjaChmdW5jdGlvbih0LGUpe3ZhciBuPWYoZSxvLTEpLHI9Zih0LG8tMSk7eS5zZXQobixyKX0pLHQobixzKSYmbi5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBlPWYodCxvLTEpO3kuYWRkKGUpfSk7Zm9yKHZhciBnIGluIG4pe3ZhciBtO3YmJihtPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodixnKSksbSYmbnVsbD09bS5zZXR8fCh5W2ddPWYobltnXSxvLTEpKX1pZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKWZvcih2YXIgXz1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG4pLGc9MDtnPF8ubGVuZ3RoO2crKyl7dmFyIE89X1tnXSx3PU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobixPKTsoIXd8fHcuZW51bWVyYWJsZXx8YykmJih5W09dPWYobltPXSxvLTEpLHcuZW51bWVyYWJsZXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KHksTyx7ZW51bWVyYWJsZTohMX0pKX1pZihjKWZvcih2YXIgeD1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhuKSxnPTA7Zzx4Lmxlbmd0aDtnKyspe3ZhciBrPXhbZ10sdz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG4sayk7dyYmdy5lbnVtZXJhYmxlfHwoeVtrXT1mKG5ba10sby0xKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoeSxrLHtlbnVtZXJhYmxlOiExfSkpfXJldHVybiB5fSJvYmplY3QiPT10eXBlb2YgciYmKG89ci5kZXB0aCxpPXIucHJvdG90eXBlLGM9ci5pbmNsdWRlTm9uRW51bWVyYWJsZSxyPXIuY2lyY3VsYXIpO3ZhciBoPVtdLHA9W10sZD0idW5kZWZpbmVkIiE9dHlwZW9mIEJ1ZmZlcjtyZXR1cm4gdm9pZCAwPT09ciYmKHI9ITApLHZvaWQgMD09PW8mJihvPTEvMCksZihuLG8pfWZ1bmN0aW9uIG4odCl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KX1mdW5jdGlvbiByKHQpe3JldHVybiJvYmplY3QiPT10eXBlb2YgdCYmIltvYmplY3QgRGF0ZV0iPT09bih0KX1mdW5jdGlvbiBvKHQpe3JldHVybiJvYmplY3QiPT10eXBlb2YgdCYmIltvYmplY3QgQXJyYXldIj09PW4odCl9ZnVuY3Rpb24gaSh0KXtyZXR1cm4ib2JqZWN0Ij09dHlwZW9mIHQmJiJbb2JqZWN0IFJlZ0V4cF0iPT09bih0KX1mdW5jdGlvbiBsKHQpe3ZhciBlPSIiO3JldHVybiB0Lmdsb2JhbCYmKGUrPSJnIiksdC5pZ25vcmVDYXNlJiYoZSs9ImkiKSx0Lm11bHRpbGluZSYmKGUrPSJtIiksZX12YXIgYTt0cnl7YT1NYXB9Y2F0Y2godCl7YT1mdW5jdGlvbigpe319dmFyIHM7dHJ5e3M9U2V0fWNhdGNoKHQpe3M9ZnVuY3Rpb24oKXt9fXZhciB1O3RyeXt1PVByb21pc2V9Y2F0Y2godCl7dT1mdW5jdGlvbigpe319cmV0dXJuIGUuY2xvbmVQcm90b3R5cGU9ZnVuY3Rpb24odCl7aWYobnVsbD09PXQpcmV0dXJuIG51bGw7dmFyIGU9ZnVuY3Rpb24oKXt9O3JldHVybiBlLnByb3RvdHlwZT10LG5ldyBlfSxlLl9fb2JqVG9TdHI9bixlLl9faXNEYXRlPXIsZS5fX2lzQXJyYXk9byxlLl9faXNSZWdFeHA9aSxlLl9fZ2V0UmVnRXhwRmxhZ3M9bCxlfSgpOyJvYmplY3QiPT10eXBlb2YgdCYmdC5leHBvcnRzJiYodC5leHBvcnRzPW4pfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIG8odCl7aWYoQXJyYXkuaXNBcnJheSh0KSl7Zm9yKHZhciBlPTAsbj1BcnJheSh0Lmxlbmd0aCk7ZTx0Lmxlbmd0aDtlKyspbltlXT10W2VdO3JldHVybiBufXJldHVybiBBcnJheS5mcm9tKHQpfWZ1bmN0aW9uIGkodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1mdW5jdGlvbiBsKHQsZSl7dHJ5e2UucGFyZW50Tm9kZX1jYXRjaCh0KXtyZXR1cm4hMX1yZXR1cm4gZSBpbnN0YW5jZW9mIFRleHQmJihlPWUucGFyZW50Tm9kZSksdC5jb250YWlucyhlKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksZS5kZWZhdWx0PWUuUmFuZ2U9dm9pZCAwO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3ZhciBuPVtdLHI9ITAsbz0hMSxpPXZvaWQgMDt0cnl7Zm9yKHZhciBsLGE9dFtTeW1ib2wuaXRlcmF0b3JdKCk7IShyPShsPWEubmV4dCgpKS5kb25lKSYmKG4ucHVzaChsLnZhbHVlKSwhZXx8bi5sZW5ndGghPT1lKTtyPSEwKTt9Y2F0Y2godCl7bz0hMCxpPXR9ZmluYWxseXt0cnl7IXImJmEucmV0dXJuJiZhLnJldHVybigpfWZpbmFsbHl7aWYobyl0aHJvdyBpfX1yZXR1cm4gbn1yZXR1cm4gZnVuY3Rpb24oZSxuKXtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiBlO2lmKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoZSkpcmV0dXJuIHQoZSxuKTt0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIil9fSgpLHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciByPWVbbl07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsInZhbHVlImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLmtleSxyKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxyJiZ0KGUsciksZX19KCksdT1uKDApLGM9cih1KSxmPW4oMjEpLGg9cihmKSxwPW4oMTIpLGQ9cihwKSx5PW4oOSksdj1yKHkpLGI9bigxMCksZz1yKGIpLG09KDAsZy5kZWZhdWx0KSgicXVpbGw6c2VsZWN0aW9uIiksXz1mdW5jdGlvbiB0KGUpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTowO2kodGhpcyx0KSx0aGlzLmluZGV4PWUsdGhpcy5sZW5ndGg9bn0sTz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSxuKXt2YXIgcj10aGlzO2kodGhpcyx0KSx0aGlzLmVtaXR0ZXI9bix0aGlzLnNjcm9sbD1lLHRoaXMuY29tcG9zaW5nPSExLHRoaXMubW91c2VEb3duPSExLHRoaXMucm9vdD10aGlzLnNjcm9sbC5kb21Ob2RlLHRoaXMuY3Vyc29yPWMuZGVmYXVsdC5jcmVhdGUoImN1cnNvciIsdGhpcyksdGhpcy5sYXN0UmFuZ2U9dGhpcy5zYXZlZFJhbmdlPW5ldyBfKDAsMCksdGhpcy5oYW5kbGVDb21wb3NpdGlvbigpLHRoaXMuaGFuZGxlRHJhZ2dpbmcoKSx0aGlzLmVtaXR0ZXIubGlzdGVuRE9NKCJzZWxlY3Rpb25jaGFuZ2UiLGRvY3VtZW50LGZ1bmN0aW9uKCl7ci5tb3VzZURvd258fHNldFRpbWVvdXQoci51cGRhdGUuYmluZChyLHYuZGVmYXVsdC5zb3VyY2VzLlVTRVIpLDEpfSksdGhpcy5lbWl0dGVyLm9uKHYuZGVmYXVsdC5ldmVudHMuRURJVE9SX0NIQU5HRSxmdW5jdGlvbih0LGUpe3Q9PT12LmRlZmF1bHQuZXZlbnRzLlRFWFRfQ0hBTkdFJiZlLmxlbmd0aCgpPjAmJnIudXBkYXRlKHYuZGVmYXVsdC5zb3VyY2VzLlNJTEVOVCl9KSx0aGlzLmVtaXR0ZXIub24odi5kZWZhdWx0LmV2ZW50cy5TQ1JPTExfQkVGT1JFX1VQREFURSxmdW5jdGlvbigpe2lmKHIuaGFzRm9jdXMoKSl7dmFyIHQ9ci5nZXROYXRpdmVSYW5nZSgpO251bGwhPXQmJnQuc3RhcnQubm9kZSE9PXIuY3Vyc29yLnRleHROb2RlJiZyLmVtaXR0ZXIub25jZSh2LmRlZmF1bHQuZXZlbnRzLlNDUk9MTF9VUERBVEUsZnVuY3Rpb24oKXt0cnl7ci5zZXROYXRpdmVSYW5nZSh0LnN0YXJ0Lm5vZGUsdC5zdGFydC5vZmZzZXQsdC5lbmQubm9kZSx0LmVuZC5vZmZzZXQpfWNhdGNoKHQpe319KX19KSx0aGlzLmVtaXR0ZXIub24odi5kZWZhdWx0LmV2ZW50cy5TQ1JPTExfT1BUSU1JWkUsZnVuY3Rpb24odCxlKXtpZihlLnJhbmdlKXt2YXIgbj1lLnJhbmdlLG89bi5zdGFydE5vZGUsaT1uLnN0YXJ0T2Zmc2V0LGw9bi5lbmROb2RlLGE9bi5lbmRPZmZzZXQ7ci5zZXROYXRpdmVSYW5nZShvLGksbCxhKX19KSx0aGlzLnVwZGF0ZSh2LmRlZmF1bHQuc291cmNlcy5TSUxFTlQpfXJldHVybiBzKHQsW3trZXk6ImhhbmRsZUNvbXBvc2l0aW9uIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5yb290LmFkZEV2ZW50TGlzdGVuZXIoImNvbXBvc2l0aW9uc3RhcnQiLGZ1bmN0aW9uKCl7dC5jb21wb3Npbmc9ITB9KSx0aGlzLnJvb3QuYWRkRXZlbnRMaXN0ZW5lcigiY29tcG9zaXRpb25lbmQiLGZ1bmN0aW9uKCl7aWYodC5jb21wb3Npbmc9ITEsdC5jdXJzb3IucGFyZW50KXt2YXIgZT10LmN1cnNvci5yZXN0b3JlKCk7aWYoIWUpcmV0dXJuO3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0LnNldE5hdGl2ZVJhbmdlKGUuc3RhcnROb2RlLGUuc3RhcnRPZmZzZXQsZS5lbmROb2RlLGUuZW5kT2Zmc2V0KX0sMSl9fSl9fSx7a2V5OiJoYW5kbGVEcmFnZ2luZyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuZW1pdHRlci5saXN0ZW5ET00oIm1vdXNlZG93biIsZG9jdW1lbnQuYm9keSxmdW5jdGlvbigpe3QubW91c2VEb3duPSEwfSksdGhpcy5lbWl0dGVyLmxpc3RlbkRPTSgibW91c2V1cCIsZG9jdW1lbnQuYm9keSxmdW5jdGlvbigpe3QubW91c2VEb3duPSExLHQudXBkYXRlKHYuZGVmYXVsdC5zb3VyY2VzLlVTRVIpfSl9fSx7a2V5OiJmb2N1cyIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmhhc0ZvY3VzKCl8fCh0aGlzLnJvb3QuZm9jdXMoKSx0aGlzLnNldFJhbmdlKHRoaXMuc2F2ZWRSYW5nZSkpfX0se2tleToiZm9ybWF0Iix2YWx1ZTpmdW5jdGlvbih0LGUpe2lmKG51bGw9PXRoaXMuc2Nyb2xsLndoaXRlbGlzdHx8dGhpcy5zY3JvbGwud2hpdGVsaXN0W3RdKXt0aGlzLnNjcm9sbC51cGRhdGUoKTt2YXIgbj10aGlzLmdldE5hdGl2ZVJhbmdlKCk7aWYobnVsbCE9biYmbi5uYXRpdmUuY29sbGFwc2VkJiYhYy5kZWZhdWx0LnF1ZXJ5KHQsYy5kZWZhdWx0LlNjb3BlLkJMT0NLKSl7aWYobi5zdGFydC5ub2RlIT09dGhpcy5jdXJzb3IudGV4dE5vZGUpe3ZhciByPWMuZGVmYXVsdC5maW5kKG4uc3RhcnQubm9kZSwhMSk7aWYobnVsbD09cilyZXR1cm47aWYociBpbnN0YW5jZW9mIGMuZGVmYXVsdC5MZWFmKXt2YXIgbz1yLnNwbGl0KG4uc3RhcnQub2Zmc2V0KTtyLnBhcmVudC5pbnNlcnRCZWZvcmUodGhpcy5jdXJzb3Isbyl9ZWxzZSByLmluc2VydEJlZm9yZSh0aGlzLmN1cnNvcixuLnN0YXJ0Lm5vZGUpO3RoaXMuY3Vyc29yLmF0dGFjaCgpfXRoaXMuY3Vyc29yLmZvcm1hdCh0LGUpLHRoaXMuc2Nyb2xsLm9wdGltaXplKCksdGhpcy5zZXROYXRpdmVSYW5nZSh0aGlzLmN1cnNvci50ZXh0Tm9kZSx0aGlzLmN1cnNvci50ZXh0Tm9kZS5kYXRhLmxlbmd0aCksdGhpcy51cGRhdGUoKX19fX0se2tleToiZ2V0Qm91bmRzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06MCxuPXRoaXMuc2Nyb2xsLmxlbmd0aCgpO3Q9TWF0aC5taW4odCxuLTEpLGU9TWF0aC5taW4odCtlLG4tMSktdDt2YXIgcj12b2lkIDAsbz10aGlzLnNjcm9sbC5sZWFmKHQpLGk9YShvLDIpLGw9aVswXSxzPWlbMV07aWYobnVsbD09bClyZXR1cm4gbnVsbDt2YXIgdT1sLnBvc2l0aW9uKHMsITApLGM9YSh1LDIpO3I9Y1swXSxzPWNbMV07dmFyIGY9ZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtpZihlPjApe2Yuc2V0U3RhcnQocixzKTt2YXIgaD10aGlzLnNjcm9sbC5sZWFmKHQrZSkscD1hKGgsMik7aWYobD1wWzBdLHM9cFsxXSxudWxsPT1sKXJldHVybiBudWxsO3ZhciBkPWwucG9zaXRpb24ocywhMCkseT1hKGQsMik7cmV0dXJuIHI9eVswXSxzPXlbMV0sZi5zZXRFbmQocixzKSxmLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpfXZhciB2PSJsZWZ0IixiPXZvaWQgMDtyZXR1cm4gciBpbnN0YW5jZW9mIFRleHQ/KHM8ci5kYXRhLmxlbmd0aD8oZi5zZXRTdGFydChyLHMpLGYuc2V0RW5kKHIscysxKSk6KGYuc2V0U3RhcnQocixzLTEpLGYuc2V0RW5kKHIscyksdj0icmlnaHQiKSxiPWYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpOihiPWwuZG9tTm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxzPjAmJih2PSJyaWdodCIpKSx7Ym90dG9tOmIudG9wK2IuaGVpZ2h0LGhlaWdodDpiLmhlaWdodCxsZWZ0OmJbdl0scmlnaHQ6Ylt2XSx0b3A6Yi50b3Asd2lkdGg6MH19fSx7a2V5OiJnZXROYXRpdmVSYW5nZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1kb2N1bWVudC5nZXRTZWxlY3Rpb24oKTtpZihudWxsPT10fHx0LnJhbmdlQ291bnQ8PTApcmV0dXJuIG51bGw7dmFyIGU9dC5nZXRSYW5nZUF0KDApO2lmKG51bGw9PWUpcmV0dXJuIG51bGw7dmFyIG49dGhpcy5ub3JtYWxpemVOYXRpdmUoZSk7cmV0dXJuIG0uaW5mbygiZ2V0TmF0aXZlUmFuZ2UiLG4pLG59fSx7a2V5OiJnZXRSYW5nZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldE5hdGl2ZVJhbmdlKCk7cmV0dXJuIG51bGw9PXQ/W251bGwsbnVsbF06W3RoaXMubm9ybWFsaXplZFRvUmFuZ2UodCksdF19fSx7a2V5OiJoYXNGb2N1cyIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gZG9jdW1lbnQuYWN0aXZlRWxlbWVudD09PXRoaXMucm9vdH19LHtrZXk6Im5vcm1hbGl6ZWRUb1JhbmdlIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLG49W1t0LnN0YXJ0Lm5vZGUsdC5zdGFydC5vZmZzZXRdXTt0Lm5hdGl2ZS5jb2xsYXBzZWR8fG4ucHVzaChbdC5lbmQubm9kZSx0LmVuZC5vZmZzZXRdKTt2YXIgcj1uLm1hcChmdW5jdGlvbih0KXt2YXIgbj1hKHQsMikscj1uWzBdLG89blsxXSxpPWMuZGVmYXVsdC5maW5kKHIsITApLGw9aS5vZmZzZXQoZS5zY3JvbGwpO3JldHVybiAwPT09bz9sOmkgaW5zdGFuY2VvZiBjLmRlZmF1bHQuQ29udGFpbmVyP2wraS5sZW5ndGgoKTpsK2kuaW5kZXgocixvKX0pLGk9TWF0aC5taW4oTWF0aC5tYXguYXBwbHkoTWF0aCxvKHIpKSx0aGlzLnNjcm9sbC5sZW5ndGgoKS0xKSxsPU1hdGgubWluLmFwcGx5KE1hdGgsW2ldLmNvbmNhdChvKHIpKSk7cmV0dXJuIG5ldyBfKGwsaS1sKX19LHtrZXk6Im5vcm1hbGl6ZU5hdGl2ZSIsdmFsdWU6ZnVuY3Rpb24odCl7aWYoIWwodGhpcy5yb290LHQuc3RhcnRDb250YWluZXIpfHwhdC5jb2xsYXBzZWQmJiFsKHRoaXMucm9vdCx0LmVuZENvbnRhaW5lcikpcmV0dXJuIG51bGw7dmFyIGU9e3N0YXJ0Ontub2RlOnQuc3RhcnRDb250YWluZXIsb2Zmc2V0OnQuc3RhcnRPZmZzZXR9LGVuZDp7bm9kZTp0LmVuZENvbnRhaW5lcixvZmZzZXQ6dC5lbmRPZmZzZXR9LG5hdGl2ZTp0fTtyZXR1cm5bZS5zdGFydCxlLmVuZF0uZm9yRWFjaChmdW5jdGlvbih0KXtmb3IodmFyIGU9dC5ub2RlLG49dC5vZmZzZXQ7IShlIGluc3RhbmNlb2YgVGV4dCkmJmUuY2hpbGROb2Rlcy5sZW5ndGg+MDspaWYoZS5jaGlsZE5vZGVzLmxlbmd0aD5uKWU9ZS5jaGlsZE5vZGVzW25dLG49MDtlbHNle2lmKGUuY2hpbGROb2Rlcy5sZW5ndGghPT1uKWJyZWFrO2U9ZS5sYXN0Q2hpbGQsbj1lIGluc3RhbmNlb2YgVGV4dD9lLmRhdGEubGVuZ3RoOmUuY2hpbGROb2Rlcy5sZW5ndGgrMX10Lm5vZGU9ZSx0Lm9mZnNldD1ufSksZX19LHtrZXk6InJhbmdlVG9OYXRpdmUiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj10LmNvbGxhcHNlZD9bdC5pbmRleF06W3QuaW5kZXgsdC5pbmRleCt0Lmxlbmd0aF0scj1bXSxvPXRoaXMuc2Nyb2xsLmxlbmd0aCgpO3JldHVybiBuLmZvckVhY2goZnVuY3Rpb24odCxuKXt0PU1hdGgubWluKG8tMSx0KTt2YXIgaT12b2lkIDAsbD1lLnNjcm9sbC5sZWFmKHQpLHM9YShsLDIpLHU9c1swXSxjPXNbMV0sZj11LnBvc2l0aW9uKGMsMCE9PW4pLGg9YShmLDIpO2k9aFswXSxjPWhbMV0sci5wdXNoKGksYyl9KSxyLmxlbmd0aDwyJiYocj1yLmNvbmNhdChyKSkscn19LHtrZXk6InNjcm9sbEludG9WaWV3Iix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmxhc3RSYW5nZTtpZihudWxsIT1lKXt2YXIgbj10aGlzLmdldEJvdW5kcyhlLmluZGV4LGUubGVuZ3RoKTtpZihudWxsIT1uKXt2YXIgcj10aGlzLnNjcm9sbC5sZW5ndGgoKS0xLG89dGhpcy5zY3JvbGwubGluZShNYXRoLm1pbihlLmluZGV4LHIpKSxpPWEobywxKSxsPWlbMF0scz1sO2lmKGUubGVuZ3RoPjApe3ZhciB1PXRoaXMuc2Nyb2xsLmxpbmUoTWF0aC5taW4oZS5pbmRleCtlLmxlbmd0aCxyKSk7cz1hKHUsMSlbMF19aWYobnVsbCE9bCYmbnVsbCE9cyl7dmFyIGM9dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtuLnRvcDxjLnRvcD90LnNjcm9sbFRvcC09Yy50b3Atbi50b3A6bi5ib3R0b20+Yy5ib3R0b20mJih0LnNjcm9sbFRvcCs9bi5ib3R0b20tYy5ib3R0b20pfX19fX0se2tleToic2V0TmF0aXZlUmFuZ2UiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOnQscj1hcmd1bWVudHMubGVuZ3RoPjMmJnZvaWQgMCE9PWFyZ3VtZW50c1szXT9hcmd1bWVudHNbM106ZSxvPWFyZ3VtZW50cy5sZW5ndGg+NCYmdm9pZCAwIT09YXJndW1lbnRzWzRdJiZhcmd1bWVudHNbNF07aWYobS5pbmZvKCJzZXROYXRpdmVSYW5nZSIsdCxlLG4sciksbnVsbD09dHx8bnVsbCE9dGhpcy5yb290LnBhcmVudE5vZGUmJm51bGwhPXQucGFyZW50Tm9kZSYmbnVsbCE9bi5wYXJlbnROb2RlKXt2YXIgaT1kb2N1bWVudC5nZXRTZWxlY3Rpb24oKTtpZihudWxsIT1pKWlmKG51bGwhPXQpe3RoaXMuaGFzRm9jdXMoKXx8dGhpcy5yb290LmZvY3VzKCk7dmFyIGw9KHRoaXMuZ2V0TmF0aXZlUmFuZ2UoKXx8e30pLm5hdGl2ZTtpZihudWxsPT1sfHxvfHx0IT09bC5zdGFydENvbnRhaW5lcnx8ZSE9PWwuc3RhcnRPZmZzZXR8fG4hPT1sLmVuZENvbnRhaW5lcnx8ciE9PWwuZW5kT2Zmc2V0KXsiQlIiPT10LnRhZ05hbWUmJihlPVtdLmluZGV4T2YuY2FsbCh0LnBhcmVudE5vZGUuY2hpbGROb2Rlcyx0KSx0PXQucGFyZW50Tm9kZSksIkJSIj09bi50YWdOYW1lJiYocj1bXS5pbmRleE9mLmNhbGwobi5wYXJlbnROb2RlLmNoaWxkTm9kZXMsbiksbj1uLnBhcmVudE5vZGUpO3ZhciBhPWRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7YS5zZXRTdGFydCh0LGUpLGEuc2V0RW5kKG4sciksaS5yZW1vdmVBbGxSYW5nZXMoKSxpLmFkZFJhbmdlKGEpfX1lbHNlIGkucmVtb3ZlQWxsUmFuZ2VzKCksdGhpcy5yb290LmJsdXIoKSxkb2N1bWVudC5ib2R5LmZvY3VzKCl9fX0se2tleToic2V0UmFuZ2UiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdJiZhcmd1bWVudHNbMV0sbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06di5kZWZhdWx0LnNvdXJjZXMuQVBJO2lmKCJzdHJpbmciPT10eXBlb2YgZSYmKG49ZSxlPSExKSxtLmluZm8oInNldFJhbmdlIix0KSxudWxsIT10KXt2YXIgcj10aGlzLnJhbmdlVG9OYXRpdmUodCk7dGhpcy5zZXROYXRpdmVSYW5nZS5hcHBseSh0aGlzLG8ocikuY29uY2F0KFtlXSkpfWVsc2UgdGhpcy5zZXROYXRpdmVSYW5nZShudWxsKTt0aGlzLnVwZGF0ZShuKX19LHtrZXk6InVwZGF0ZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06di5kZWZhdWx0LnNvdXJjZXMuVVNFUixlPXRoaXMubGFzdFJhbmdlLG49dGhpcy5nZXRSYW5nZSgpLHI9YShuLDIpLG89clswXSxpPXJbMV07aWYodGhpcy5sYXN0UmFuZ2U9byxudWxsIT10aGlzLmxhc3RSYW5nZSYmKHRoaXMuc2F2ZWRSYW5nZT10aGlzLmxhc3RSYW5nZSksISgwLGQuZGVmYXVsdCkoZSx0aGlzLmxhc3RSYW5nZSkpe3ZhciBsOyF0aGlzLmNvbXBvc2luZyYmbnVsbCE9aSYmaS5uYXRpdmUuY29sbGFwc2VkJiZpLnN0YXJ0Lm5vZGUhPT10aGlzLmN1cnNvci50ZXh0Tm9kZSYmdGhpcy5jdXJzb3IucmVzdG9yZSgpO3ZhciBzPVt2LmRlZmF1bHQuZXZlbnRzLlNFTEVDVElPTl9DSEFOR0UsKDAsaC5kZWZhdWx0KSh0aGlzLmxhc3RSYW5nZSksKDAsaC5kZWZhdWx0KShlKSx0XTtpZigobD10aGlzLmVtaXR0ZXIpLmVtaXQuYXBwbHkobCxbdi5kZWZhdWx0LmV2ZW50cy5FRElUT1JfQ0hBTkdFXS5jb25jYXQocykpLHQhPT12LmRlZmF1bHQuc291cmNlcy5TSUxFTlQpe3ZhciB1Oyh1PXRoaXMuZW1pdHRlcikuZW1pdC5hcHBseSh1LHMpfX19fV0pLHR9KCk7ZS5SYW5nZT1fLGUuZGVmYXVsdD1PfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIG8odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1mdW5jdGlvbiBpKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTtyZXR1cm4hZXx8Im9iamVjdCIhPXR5cGVvZiBlJiYiZnVuY3Rpb24iIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gbCh0LGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBhPW4oMCkscz1yKGEpLHU9bigzKSxjPXIodSksZj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG8odGhpcyxlKSxpKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGwoZSx0KSxlfShzLmRlZmF1bHQuQ29udGFpbmVyKTtmLmFsbG93ZWRDaGlsZHJlbj1bYy5kZWZhdWx0LHUuQmxvY2tFbWJlZCxmXSxlLmRlZmF1bHQ9Zn0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiBvKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gaSh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWV8fCJvYmplY3QiIT10eXBlb2YgZSYmImZ1bmN0aW9uIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIGwodCxlKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIHI9ZVtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIua2V5LHIpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLHIpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLHImJnQoZSxyKSxlfX0oKSxzPWZ1bmN0aW9uIHQoZSxuLHIpe251bGw9PT1lJiYoZT1GdW5jdGlvbi5wcm90b3R5cGUpO3ZhciBvPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxuKTtpZih2b2lkIDA9PT1vKXt2YXIgaT1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7cmV0dXJuIG51bGw9PT1pP3ZvaWQgMDp0KGksbixyKX1pZigidmFsdWUiaW4gbylyZXR1cm4gby52YWx1ZTt2YXIgbD1vLmdldDtpZih2b2lkIDAhPT1sKXJldHVybiBsLmNhbGwocil9LHU9bigwKSxjPXIodSksZj1uKDgpLGg9cihmKSxwPSJcdWZlZmYiLGQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSk7dmFyIG49aSh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMsdCkpO3JldHVybiBuLmNvbnRlbnROb2RlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKSxuLmNvbnRlbnROb2RlLnNldEF0dHJpYnV0ZSgiY29udGVudGVkaXRhYmxlIiwhMSksW10uc2xpY2UuY2FsbChuLmRvbU5vZGUuY2hpbGROb2RlcykuZm9yRWFjaChmdW5jdGlvbih0KXtuLmNvbnRlbnROb2RlLmFwcGVuZENoaWxkKHQpfSksbi5sZWZ0R3VhcmQ9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUocCksbi5yaWdodEd1YXJkPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHApLG4uZG9tTm9kZS5hcHBlbmRDaGlsZChuLmxlZnRHdWFyZCksbi5kb21Ob2RlLmFwcGVuZENoaWxkKG4uY29udGVudE5vZGUpLG4uZG9tTm9kZS5hcHBlbmRDaGlsZChuLnJpZ2h0R3VhcmQpLG59cmV0dXJuIGwoZSx0KSxhKGUsW3trZXk6ImluZGV4Iix2YWx1ZTpmdW5jdGlvbih0LG4pe3JldHVybiB0PT09dGhpcy5sZWZ0R3VhcmQ/MDp0PT09dGhpcy5yaWdodEd1YXJkPzE6cyhlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksImluZGV4Iix0aGlzKS5jYWxsKHRoaXMsdCxuKX19LHtrZXk6InJlc3RvcmUiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXZvaWQgMCxuPXZvaWQgMCxyPXQuZGF0YS5zcGxpdChwKS5qb2luKCIiKTtpZih0PT09dGhpcy5sZWZ0R3VhcmQpaWYodGhpcy5wcmV2IGluc3RhbmNlb2YgaC5kZWZhdWx0KXt2YXIgbz10aGlzLnByZXYubGVuZ3RoKCk7dGhpcy5wcmV2Lmluc2VydEF0KG8sciksZT17c3RhcnROb2RlOnRoaXMucHJldi5kb21Ob2RlLHN0YXJ0T2Zmc2V0Om8rci5sZW5ndGh9fWVsc2Ugbj1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShyKSx0aGlzLnBhcmVudC5pbnNlcnRCZWZvcmUoYy5kZWZhdWx0LmNyZWF0ZShuKSx0aGlzKSxlPXtzdGFydE5vZGU6bixzdGFydE9mZnNldDpyLmxlbmd0aH07ZWxzZSB0PT09dGhpcy5yaWdodEd1YXJkJiYodGhpcy5uZXh0IGluc3RhbmNlb2YgaC5kZWZhdWx0Pyh0aGlzLm5leHQuaW5zZXJ0QXQoMCxyKSxlPXtzdGFydE5vZGU6dGhpcy5uZXh0LmRvbU5vZGUsc3RhcnRPZmZzZXQ6ci5sZW5ndGh9KToobj1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShyKSx0aGlzLnBhcmVudC5pbnNlcnRCZWZvcmUoYy5kZWZhdWx0LmNyZWF0ZShuKSx0aGlzLm5leHQpLGU9e3N0YXJ0Tm9kZTpuLHN0YXJ0T2Zmc2V0OnIubGVuZ3RofSkpO3JldHVybiB0LmRhdGE9cCxlfX0se2tleToidXBkYXRlIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7dC5mb3JFYWNoKGZ1bmN0aW9uKHQpe2lmKCJjaGFyYWN0ZXJEYXRhIj09PXQudHlwZSYmKHQudGFyZ2V0PT09bi5sZWZ0R3VhcmR8fHQudGFyZ2V0PT09bi5yaWdodEd1YXJkKSl7dmFyIHI9bi5yZXN0b3JlKHQudGFyZ2V0KTtyJiYoZS5yYW5nZT1yKX19KX19XSksZX0oYy5kZWZhdWx0LkVtYmVkKTtlLmRlZmF1bHQ9ZH0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gbyh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWV8fCJvYmplY3QiIT10eXBlb2YgZSYmImZ1bmN0aW9uIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIGkodCxlKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSxlLkNvbG9yU3R5bGU9ZS5Db2xvckNsYXNzPWUuQ29sb3JBdHRyaWJ1dG9yPXZvaWQgMDt2YXIgbD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIHI9ZVtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIua2V5LHIpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLHIpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLHImJnQoZSxyKSxlfX0oKSxhPWZ1bmN0aW9uIHQoZSxuLHIpe251bGw9PT1lJiYoZT1GdW5jdGlvbi5wcm90b3R5cGUpO3ZhciBvPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxuKTtpZih2b2lkIDA9PT1vKXt2YXIgaT1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7cmV0dXJuIG51bGw9PT1pP3ZvaWQgMDp0KGksbixyKX1pZigidmFsdWUiaW4gbylyZXR1cm4gby52YWx1ZTt2YXIgbD1vLmdldDtpZih2b2lkIDAhPT1sKXJldHVybiBsLmNhbGwocil9LHM9bigwKSx1PWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX0ocyksYz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHIodGhpcyxlKSxvKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGkoZSx0KSxsKGUsW3trZXk6InZhbHVlIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgbj1hKGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSwidmFsdWUiLHRoaXMpLmNhbGwodGhpcyx0KTtyZXR1cm4gbi5zdGFydHNXaXRoKCJyZ2IoIik/KG49bi5yZXBsYWNlKC9eW15cZF0rLywiIikucmVwbGFjZSgvW15cZF0rJC8sIiIpLCIjIituLnNwbGl0KCIsIikubWFwKGZ1bmN0aW9uKHQpe3JldHVybigiMDAiK3BhcnNlSW50KHQpLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpfSkuam9pbigiIikpOm59fV0pLGV9KHUuZGVmYXVsdC5BdHRyaWJ1dG9yLlN0eWxlKSxmPW5ldyB1LmRlZmF1bHQuQXR0cmlidXRvci5DbGFzcygiY29sb3IiLCJxbC1jb2xvciIse3Njb3BlOnUuZGVmYXVsdC5TY29wZS5JTkxJTkV9KSxoPW5ldyBjKCJjb2xvciIsImNvbG9yIix7c2NvcGU6dS5kZWZhdWx0LlNjb3BlLklOTElORX0pO2UuQ29sb3JBdHRyaWJ1dG9yPWMsZS5Db2xvckNsYXNzPWYsZS5Db2xvclN0eWxlPWh9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dC5leHBvcnRzPXthbGlnbjp7IiI6big3NSksY2VudGVyOm4oNzYpLHJpZ2h0Om4oNzcpLGp1c3RpZnk6big3OCl9LGJhY2tncm91bmQ6big3OSksYmxvY2txdW90ZTpuKDgwKSxib2xkOm4oODEpLGNsZWFuOm4oODIpLGNvZGU6big0MCksImNvZGUtYmxvY2siOm4oNDApLGNvbG9yOm4oODMpLGRpcmVjdGlvbjp7IiI6big4NCkscnRsOm4oODUpfSxmbG9hdDp7Y2VudGVyOm4oODYpLGZ1bGw6big4NyksbGVmdDpuKDg4KSxyaWdodDpuKDg5KX0sZm9ybXVsYTpuKDkwKSxoZWFkZXI6ezE6big5MSksMjpuKDkyKX0saXRhbGljOm4oOTMpLGltYWdlOm4oOTQpLGluZGVudDp7IisxIjpuKDk1KSwiLTEiOm4oOTYpfSxsaW5rOm4oOTcpLGxpc3Q6e29yZGVyZWQ6big5OCksYnVsbGV0Om4oOTkpLGNoZWNrOm4oMTAwKX0sc2NyaXB0OntzdWI6bigxMDEpLHN1cGVyOm4oMTAyKX0sc3RyaWtlOm4oMTAzKSx1bmRlcmxpbmU6bigxMDQpLHZpZGVvOm4oMTA1KX19LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciByPW4oMSksbz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy5kb21Ob2RlPXQsdGhpcy5hdHRhY2goKX1yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJzdGF0aWNzIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3J9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksdC5jcmVhdGU9ZnVuY3Rpb24odCl7aWYobnVsbD09dGhpcy50YWdOYW1lKXRocm93IG5ldyByLlBhcmNobWVudEVycm9yKCJCbG90IGRlZmluaXRpb24gbWlzc2luZyB0YWdOYW1lIik7dmFyIGU7cmV0dXJuIEFycmF5LmlzQXJyYXkodGhpcy50YWdOYW1lKT8oInN0cmluZyI9PXR5cGVvZiB0JiYodD10LnRvVXBwZXJDYXNlKCkscGFyc2VJbnQodCkudG9TdHJpbmcoKT09PXQmJih0PXBhcnNlSW50KHQpKSksZT0ibnVtYmVyIj09dHlwZW9mIHQ/ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0aGlzLnRhZ05hbWVbdC0xXSk6dGhpcy50YWdOYW1lLmluZGV4T2YodCk+LTE/ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0KTpkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRoaXMudGFnTmFtZVswXSkpOmU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0aGlzLnRhZ05hbWUpLHRoaXMuY2xhc3NOYW1lJiZlLmNsYXNzTGlzdC5hZGQodGhpcy5jbGFzc05hbWUpLGV9LHQucHJvdG90eXBlLmF0dGFjaD1mdW5jdGlvbigpe3RoaXMuZG9tTm9kZVtyLkRBVEFfS0VZXT17YmxvdDp0aGlzfX0sdC5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmRvbU5vZGUuY2xvbmVOb2RlKCExKTtyZXR1cm4gci5jcmVhdGUodCl9LHQucHJvdG90eXBlLmRldGFjaD1mdW5jdGlvbigpe251bGwhPXRoaXMucGFyZW50JiZ0aGlzLnBhcmVudC5yZW1vdmVDaGlsZCh0aGlzKSxkZWxldGUgdGhpcy5kb21Ob2RlW3IuREFUQV9LRVldfSx0LnByb3RvdHlwZS5kZWxldGVBdD1mdW5jdGlvbih0LGUpe3RoaXMuaXNvbGF0ZSh0LGUpLnJlbW92ZSgpfSx0LnByb3RvdHlwZS5mb3JtYXRBdD1mdW5jdGlvbih0LGUsbixvKXt2YXIgaT10aGlzLmlzb2xhdGUodCxlKTtpZihudWxsIT1yLnF1ZXJ5KG4sci5TY29wZS5CTE9UKSYmbylpLndyYXAobixvKTtlbHNlIGlmKG51bGwhPXIucXVlcnkobixyLlNjb3BlLkFUVFJJQlVURSkpe3ZhciBsPXIuY3JlYXRlKHRoaXMuc3RhdGljcy5zY29wZSk7aS53cmFwKGwpLGwuZm9ybWF0KG4sbyl9fSx0LnByb3RvdHlwZS5pbnNlcnRBdD1mdW5jdGlvbih0LGUsbil7dmFyIG89bnVsbD09bj9yLmNyZWF0ZSgidGV4dCIsZSk6ci5jcmVhdGUoZSxuKSxpPXRoaXMuc3BsaXQodCk7dGhpcy5wYXJlbnQuaW5zZXJ0QmVmb3JlKG8saSl9LHQucHJvdG90eXBlLmluc2VydEludG89ZnVuY3Rpb24odCxlKXtpZihudWxsIT10aGlzLnBhcmVudCYmdGhpcy5wYXJlbnQuY2hpbGRyZW4ucmVtb3ZlKHRoaXMpLHQuY2hpbGRyZW4uaW5zZXJ0QmVmb3JlKHRoaXMsZSksbnVsbCE9ZSl2YXIgbj1lLmRvbU5vZGU7bnVsbCE9dGhpcy5uZXh0JiZ0aGlzLmRvbU5vZGUubmV4dFNpYmxpbmc9PW58fHQuZG9tTm9kZS5pbnNlcnRCZWZvcmUodGhpcy5kb21Ob2RlLHZvaWQgMCE9PW4/bjpudWxsKSx0aGlzLnBhcmVudD10LHRoaXMuc2Nyb2xsPXQuc2Nyb2xsfSx0LnByb3RvdHlwZS5pc29sYXRlPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5zcGxpdCh0KTtyZXR1cm4gbi5zcGxpdChlKSxufSx0LnByb3RvdHlwZS5sZW5ndGg9ZnVuY3Rpb24oKXtyZXR1cm4gMX0sdC5wcm90b3R5cGUub2Zmc2V0PWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10JiYodD10aGlzLnBhcmVudCksbnVsbD09dGhpcy5wYXJlbnR8fHRoaXM9PXQ/MDp0aGlzLnBhcmVudC5jaGlsZHJlbi5vZmZzZXQodGhpcykrdGhpcy5wYXJlbnQub2Zmc2V0KHQpfSx0LnByb3RvdHlwZS5vcHRpbWl6ZT1mdW5jdGlvbih0KXtudWxsIT10aGlzLmRvbU5vZGVbci5EQVRBX0tFWV0mJmRlbGV0ZSB0aGlzLmRvbU5vZGVbci5EQVRBX0tFWV0ubXV0YXRpb25zfSx0LnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oKXtudWxsIT10aGlzLmRvbU5vZGUucGFyZW50Tm9kZSYmdGhpcy5kb21Ob2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5kb21Ob2RlKSx0aGlzLmRldGFjaCgpfSx0LnByb3RvdHlwZS5yZXBsYWNlPWZ1bmN0aW9uKHQpe251bGwhPXQucGFyZW50JiYodC5wYXJlbnQuaW5zZXJ0QmVmb3JlKHRoaXMsdC5uZXh0KSx0LnJlbW92ZSgpKX0sdC5wcm90b3R5cGUucmVwbGFjZVdpdGg9ZnVuY3Rpb24odCxlKXt2YXIgbj0ic3RyaW5nIj09dHlwZW9mIHQ/ci5jcmVhdGUodCxlKTp0O3JldHVybiBuLnJlcGxhY2UodGhpcyksbn0sdC5wcm90b3R5cGUuc3BsaXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gMD09PXQ/dGhpczp0aGlzLm5leHR9LHQucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0LGUpe30sdC5wcm90b3R5cGUud3JhcD1mdW5jdGlvbih0LGUpe3ZhciBuPSJzdHJpbmciPT10eXBlb2YgdD9yLmNyZWF0ZSh0LGUpOnQ7cmV0dXJuIG51bGwhPXRoaXMucGFyZW50JiZ0aGlzLnBhcmVudC5pbnNlcnRCZWZvcmUobix0aGlzLm5leHQpLG4uYXBwZW5kQ2hpbGQodGhpcyksbn0sdC5ibG90TmFtZT0iYWJzdHJhY3QiLHR9KCk7ZS5kZWZhdWx0PW99LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciByPW4oMTEpLG89bigyOSksaT1uKDMwKSxsPW4oMSksYT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy5hdHRyaWJ1dGVzPXt9LHRoaXMuZG9tTm9kZT10LHRoaXMuYnVpbGQoKX1yZXR1cm4gdC5wcm90b3R5cGUuYXR0cmlidXRlPWZ1bmN0aW9uKHQsZSl7ZT90LmFkZCh0aGlzLmRvbU5vZGUsZSkmJihudWxsIT10LnZhbHVlKHRoaXMuZG9tTm9kZSk/dGhpcy5hdHRyaWJ1dGVzW3QuYXR0ck5hbWVdPXQ6ZGVsZXRlIHRoaXMuYXR0cmlidXRlc1t0LmF0dHJOYW1lXSk6KHQucmVtb3ZlKHRoaXMuZG9tTm9kZSksZGVsZXRlIHRoaXMuYXR0cmlidXRlc1t0LmF0dHJOYW1lXSl9LHQucHJvdG90eXBlLmJ1aWxkPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLmF0dHJpYnV0ZXM9e307dmFyIGU9ci5kZWZhdWx0LmtleXModGhpcy5kb21Ob2RlKSxuPW8uZGVmYXVsdC5rZXlzKHRoaXMuZG9tTm9kZSksYT1pLmRlZmF1bHQua2V5cyh0aGlzLmRvbU5vZGUpO2UuY29uY2F0KG4pLmNvbmNhdChhKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciBuPWwucXVlcnkoZSxsLlNjb3BlLkFUVFJJQlVURSk7biBpbnN0YW5jZW9mIHIuZGVmYXVsdCYmKHQuYXR0cmlidXRlc1tuLmF0dHJOYW1lXT1uKX0pfSx0LnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7T2JqZWN0LmtleXModGhpcy5hdHRyaWJ1dGVzKS5mb3JFYWNoKGZ1bmN0aW9uKG4pe3ZhciByPWUuYXR0cmlidXRlc1tuXS52YWx1ZShlLmRvbU5vZGUpO3QuZm9ybWF0KG4scil9KX0sdC5wcm90b3R5cGUubW92ZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMuY29weSh0KSxPYmplY3Qua2V5cyh0aGlzLmF0dHJpYnV0ZXMpLmZvckVhY2goZnVuY3Rpb24odCl7ZS5hdHRyaWJ1dGVzW3RdLnJlbW92ZShlLmRvbU5vZGUpfSksdGhpcy5hdHRyaWJ1dGVzPXt9fSx0LnByb3RvdHlwZS52YWx1ZXM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3JldHVybiBPYmplY3Qua2V5cyh0aGlzLmF0dHJpYnV0ZXMpLnJlZHVjZShmdW5jdGlvbihlLG4pe3JldHVybiBlW25dPXQuYXR0cmlidXRlc1tuXS52YWx1ZSh0LmRvbU5vZGUpLGV9LHt9KX0sdH0oKTtlLmRlZmF1bHQ9YX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQsZSl7cmV0dXJuKHQuZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIikuc3BsaXQoL1xzKy8pLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gMD09PXQuaW5kZXhPZihlKyItIil9KX12YXIgbz10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgdD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIG4gaW4gZSllLmhhc093blByb3BlcnR5KG4pJiYodFtuXT1lW25dKX07cmV0dXJuIGZ1bmN0aW9uKGUsbil7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX10KGUsbiksZS5wcm90b3R5cGU9bnVsbD09PW4/T2JqZWN0LmNyZWF0ZShuKTooci5wcm90b3R5cGU9bi5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGk9bigxMSksbD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gbyhlLHQpLGUua2V5cz1mdW5jdGlvbih0KXtyZXR1cm4odC5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fCIiKS5zcGxpdCgvXHMrLykubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LnNwbGl0KCItIikuc2xpY2UoMCwtMSkuam9pbigiLSIpfSl9LGUucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0LGUpe3JldHVybiEhdGhpcy5jYW5BZGQodCxlKSYmKHRoaXMucmVtb3ZlKHQpLHQuY2xhc3NMaXN0LmFkZCh0aGlzLmtleU5hbWUrIi0iK2UpLCEwKX0sZS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKHQpe3IodCx0aGlzLmtleU5hbWUpLmZvckVhY2goZnVuY3Rpb24oZSl7dC5jbGFzc0xpc3QucmVtb3ZlKGUpfSksMD09PXQuY2xhc3NMaXN0Lmxlbmd0aCYmdC5yZW1vdmVBdHRyaWJ1dGUoImNsYXNzIil9LGUucHJvdG90eXBlLnZhbHVlPWZ1bmN0aW9uKHQpe3ZhciBlPXIodCx0aGlzLmtleU5hbWUpWzBdfHwiIixuPWUuc2xpY2UodGhpcy5rZXlOYW1lLmxlbmd0aCsxKTtyZXR1cm4gdGhpcy5jYW5BZGQodCxuKT9uOiIifSxlfShpLmRlZmF1bHQpO2UuZGVmYXVsdD1sfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCl7dmFyIGU9dC5zcGxpdCgiLSIpLG49ZS5zbGljZSgxKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHRbMF0udG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpfSkuam9pbigiIik7cmV0dXJuIGVbMF0rbn12YXIgbz10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgdD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIG4gaW4gZSllLmhhc093blByb3BlcnR5KG4pJiYodFtuXT1lW25dKX07cmV0dXJuIGZ1bmN0aW9uKGUsbil7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX10KGUsbiksZS5wcm90b3R5cGU9bnVsbD09PW4/T2JqZWN0LmNyZWF0ZShuKTooci5wcm90b3R5cGU9bi5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGk9bigxMSksbD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gbyhlLHQpLGUua2V5cz1mdW5jdGlvbih0KXtyZXR1cm4odC5nZXRBdHRyaWJ1dGUoInN0eWxlIil8fCIiKS5zcGxpdCgiOyIpLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5zcGxpdCgiOiIpWzBdLnRyaW0oKX0pfSxlLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4hIXRoaXMuY2FuQWRkKHQsZSkmJih0LnN0eWxlW3IodGhpcy5rZXlOYW1lKV09ZSwhMCl9LGUucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbih0KXt0LnN0eWxlW3IodGhpcy5rZXlOYW1lKV09IiIsdC5nZXRBdHRyaWJ1dGUoInN0eWxlIil8fHQucmVtb3ZlQXR0cmlidXRlKCJzdHlsZSIpfSxlLnByb3RvdHlwZS52YWx1ZT1mdW5jdGlvbih0KXt2YXIgZT10LnN0eWxlW3IodGhpcy5rZXlOYW1lKV07cmV0dXJuIHRoaXMuY2FuQWRkKHQsZSk/ZToiIn0sZX0oaS5kZWZhdWx0KTtlLmRlZmF1bHQ9bH0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiBvKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gaSh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWV8fCJvYmplY3QiIT10eXBlb2YgZSYmImZ1bmN0aW9uIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIGwodCxlKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXt2YXIgbj1bXSxyPSEwLG89ITEsaT12b2lkIDA7dHJ5e2Zvcih2YXIgbCxhPXRbU3ltYm9sLml0ZXJhdG9yXSgpOyEocj0obD1hLm5leHQoKSkuZG9uZSkmJihuLnB1c2gobC52YWx1ZSksIWV8fG4ubGVuZ3RoIT09ZSk7cj0hMCk7fWNhdGNoKHQpe289ITAsaT10fWZpbmFsbHl7dHJ5eyFyJiZhLnJldHVybiYmYS5yZXR1cm4oKX1maW5hbGx5e2lmKG8pdGhyb3cgaX19cmV0dXJuIG59cmV0dXJuIGZ1bmN0aW9uKGUsbil7aWYoQXJyYXkuaXNBcnJheShlKSlyZXR1cm4gZTtpZihTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGUpKXJldHVybiB0KGUsbik7dGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpfX0oKSxzPWZ1bmN0aW9uIHQoZSxuLHIpe251bGw9PT1lJiYoZT1GdW5jdGlvbi5wcm90b3R5cGUpO3ZhciBvPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxuKTtpZih2b2lkIDA9PT1vKXt2YXIgaT1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7cmV0dXJuIG51bGw9PT1pP3ZvaWQgMDp0KGksbixyKX1pZigidmFsdWUiaW4gbylyZXR1cm4gby52YWx1ZTt2YXIgbD1vLmdldDtpZih2b2lkIDAhPT1sKXJldHVybiBsLmNhbGwocil9LHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciByPWVbbl07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsInZhbHVlImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLmtleSxyKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxyJiZ0KGUsciksZX19KCksYz1uKDApLGY9cihjKSxoPW4oOCkscD1yKGgpLGQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0LG4pe28odGhpcyxlKTt2YXIgcj1pKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx0KSk7cmV0dXJuIHIuc2VsZWN0aW9uPW4sci50ZXh0Tm9kZT1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShlLkNPTlRFTlRTKSxyLmRvbU5vZGUuYXBwZW5kQ2hpbGQoci50ZXh0Tm9kZSksci5fbGVuZ3RoPTAscn1yZXR1cm4gbChlLHQpLHUoZSxudWxsLFt7a2V5OiJ2YWx1ZSIsdmFsdWU6ZnVuY3Rpb24oKXt9fV0pLHUoZSxbe2tleToiZGV0YWNoIix2YWx1ZTpmdW5jdGlvbigpe251bGwhPXRoaXMucGFyZW50JiZ0aGlzLnBhcmVudC5yZW1vdmVDaGlsZCh0aGlzKX19LHtrZXk6ImZvcm1hdCIsdmFsdWU6ZnVuY3Rpb24odCxuKXtpZigwIT09dGhpcy5fbGVuZ3RoKXJldHVybiBzKGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSwiZm9ybWF0Iix0aGlzKS5jYWxsKHRoaXMsdCxuKTtmb3IodmFyIHI9dGhpcyxvPTA7bnVsbCE9ciYmci5zdGF0aWNzLnNjb3BlIT09Zi5kZWZhdWx0LlNjb3BlLkJMT0NLX0JMT1Q7KW8rPXIub2Zmc2V0KHIucGFyZW50KSxyPXIucGFyZW50O251bGwhPXImJih0aGlzLl9sZW5ndGg9ZS5DT05URU5UUy5sZW5ndGgsci5vcHRpbWl6ZSgpLHIuZm9ybWF0QXQobyxlLkNPTlRFTlRTLmxlbmd0aCx0LG4pLHRoaXMuX2xlbmd0aD0wKX19LHtrZXk6ImluZGV4Iix2YWx1ZTpmdW5jdGlvbih0LG4pe3JldHVybiB0PT09dGhpcy50ZXh0Tm9kZT8wOnMoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLCJpbmRleCIsdGhpcykuY2FsbCh0aGlzLHQsbil9fSx7a2V5OiJsZW5ndGgiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xlbmd0aH19LHtrZXk6InBvc2l0aW9uIix2YWx1ZTpmdW5jdGlvbigpe3JldHVyblt0aGlzLnRleHROb2RlLHRoaXMudGV4dE5vZGUuZGF0YS5sZW5ndGhdfX0se2tleToicmVtb3ZlIix2YWx1ZTpmdW5jdGlvbigpe3MoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLCJyZW1vdmUiLHRoaXMpLmNhbGwodGhpcyksdGhpcy5wYXJlbnQ9bnVsbH19LHtrZXk6InJlc3RvcmUiLHZhbHVlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuc2VsZWN0aW9uLmNvbXBvc2luZyYmbnVsbCE9dGhpcy5wYXJlbnQpe3ZhciB0PXRoaXMudGV4dE5vZGUsbj10aGlzLnNlbGVjdGlvbi5nZXROYXRpdmVSYW5nZSgpLHI9dm9pZCAwLG89dm9pZCAwLGk9dm9pZCAwO2lmKG51bGwhPW4mJm4uc3RhcnQubm9kZT09PXQmJm4uZW5kLm5vZGU9PT10KXt2YXIgbD1bdCxuLnN0YXJ0Lm9mZnNldCxuLmVuZC5vZmZzZXRdO3I9bFswXSxvPWxbMV0saT1sWzJdfWZvcig7bnVsbCE9dGhpcy5kb21Ob2RlLmxhc3RDaGlsZCYmdGhpcy5kb21Ob2RlLmxhc3RDaGlsZCE9PXRoaXMudGV4dE5vZGU7KXRoaXMuZG9tTm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLmRvbU5vZGUubGFzdENoaWxkLHRoaXMuZG9tTm9kZSk7aWYodGhpcy50ZXh0Tm9kZS5kYXRhIT09ZS5DT05URU5UUyl7dmFyIHM9dGhpcy50ZXh0Tm9kZS5kYXRhLnNwbGl0KGUuQ09OVEVOVFMpLmpvaW4oIiIpO3RoaXMubmV4dCBpbnN0YW5jZW9mIHAuZGVmYXVsdD8ocj10aGlzLm5leHQuZG9tTm9kZSx0aGlzLm5leHQuaW5zZXJ0QXQoMCxzKSx0aGlzLnRleHROb2RlLmRhdGE9ZS5DT05URU5UUyk6KHRoaXMudGV4dE5vZGUuZGF0YT1zLHRoaXMucGFyZW50Lmluc2VydEJlZm9yZShmLmRlZmF1bHQuY3JlYXRlKHRoaXMudGV4dE5vZGUpLHRoaXMpLHRoaXMudGV4dE5vZGU9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoZS5DT05URU5UUyksdGhpcy5kb21Ob2RlLmFwcGVuZENoaWxkKHRoaXMudGV4dE5vZGUpKX1pZih0aGlzLnJlbW92ZSgpLG51bGwhPW8pe3ZhciB1PVtvLGldLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5tYXgoMCxNYXRoLm1pbihyLmRhdGEubGVuZ3RoLHQtMSkpfSksYz1hKHUsMik7cmV0dXJuIG89Y1swXSxpPWNbMV0se3N0YXJ0Tm9kZTpyLHN0YXJ0T2Zmc2V0Om8sZW5kTm9kZTpyLGVuZE9mZnNldDppfX19fX0se2tleToidXBkYXRlIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7aWYodC5zb21lKGZ1bmN0aW9uKHQpe3JldHVybiJjaGFyYWN0ZXJEYXRhIj09PXQudHlwZSYmdC50YXJnZXQ9PT1uLnRleHROb2RlfSkpe3ZhciByPXRoaXMucmVzdG9yZSgpO3ImJihlLnJhbmdlPXIpfX19LHtrZXk6InZhbHVlIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiIifX1dKSxlfShmLmRlZmF1bHQuRW1iZWQpO2QuYmxvdE5hbWU9ImN1cnNvciIsZC5jbGFzc05hbWU9InFsLWN1cnNvciIsZC50YWdOYW1lPSJzcGFuIixkLkNPTlRFTlRTPSJcdWZlZmYiLGUuZGVmYXVsdD1kfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciByPWVbbl07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsInZhbHVlImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLmtleSxyKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxyJiZ0KGUsciksZX19KCksaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSxuKXtyKHRoaXMsdCksdGhpcy5xdWlsbD1lLHRoaXMub3B0aW9ucz1uLHRoaXMubW9kdWxlcz17fX1yZXR1cm4gbyh0LFt7a2V5OiJpbml0Iix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7T2JqZWN0LmtleXModGhpcy5vcHRpb25zLm1vZHVsZXMpLmZvckVhY2goZnVuY3Rpb24oZSl7bnVsbD09dC5tb2R1bGVzW2VdJiZ0LmFkZE1vZHVsZShlKX0pfX0se2tleToiYWRkTW9kdWxlIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLnF1aWxsLmNvbnN0cnVjdG9yLmltcG9ydCgibW9kdWxlcy8iK3QpO3JldHVybiB0aGlzLm1vZHVsZXNbdF09bmV3IGUodGhpcy5xdWlsbCx0aGlzLm9wdGlvbnMubW9kdWxlc1t0XXx8e30pLHRoaXMubW9kdWxlc1t0XX19XSksdH0oKTtpLkRFRkFVTFRTPXttb2R1bGVzOnt9fSxpLnRoZW1lcz17ZGVmYXVsdDppfSxlLmRlZmF1bHQ9aX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksZS5BbGlnblN0eWxlPWUuQWxpZ25DbGFzcz1lLkFsaWduQXR0cmlidXRlPXZvaWQgMDt2YXIgcj1uKDApLG89ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fShyKSxpPXtzY29wZTpvLmRlZmF1bHQuU2NvcGUuQkxPQ0ssd2hpdGVsaXN0OlsicmlnaHQiLCJjZW50ZXIiLCJqdXN0aWZ5Il19LGw9bmV3IG8uZGVmYXVsdC5BdHRyaWJ1dG9yLkF0dHJpYnV0ZSgiYWxpZ24iLCJhbGlnbiIsaSksYT1uZXcgby5kZWZhdWx0LkF0dHJpYnV0b3IuQ2xhc3MoImFsaWduIiwicWwtYWxpZ24iLGkpLHM9bmV3IG8uZGVmYXVsdC5BdHRyaWJ1dG9yLlN0eWxlKCJhbGlnbiIsInRleHQtYWxpZ24iLGkpO2UuQWxpZ25BdHRyaWJ1dGU9bCxlLkFsaWduQ2xhc3M9YSxlLkFsaWduU3R5bGU9c30sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksZS5CYWNrZ3JvdW5kU3R5bGU9ZS5CYWNrZ3JvdW5kQ2xhc3M9dm9pZCAwO3ZhciByPW4oMCksbz1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19KHIpLGk9bigyNSksbD1uZXcgby5kZWZhdWx0LkF0dHJpYnV0b3IuQ2xhc3MoImJhY2tncm91bmQiLCJxbC1iZyIse3Njb3BlOm8uZGVmYXVsdC5TY29wZS5JTkxJTkV9KSxhPW5ldyBpLkNvbG9yQXR0cmlidXRvcigiYmFja2dyb3VuZCIsImJhY2tncm91bmQtY29sb3IiLHtzY29wZTpvLmRlZmF1bHQuU2NvcGUuSU5MSU5FfSk7ZS5CYWNrZ3JvdW5kQ2xhc3M9bCxlLkJhY2tncm91bmRTdHlsZT1hfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSxlLkRpcmVjdGlvblN0eWxlPWUuRGlyZWN0aW9uQ2xhc3M9ZS5EaXJlY3Rpb25BdHRyaWJ1dGU9dm9pZCAwO3ZhciByPW4oMCksbz1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19KHIpLGk9e3Njb3BlOm8uZGVmYXVsdC5TY29wZS5CTE9DSyx3aGl0ZWxpc3Q6WyJydGwiXX0sbD1uZXcgby5kZWZhdWx0LkF0dHJpYnV0b3IuQXR0cmlidXRlKCJkaXJlY3Rpb24iLCJkaXIiLGkpLGE9bmV3IG8uZGVmYXVsdC5BdHRyaWJ1dG9yLkNsYXNzKCJkaXJlY3Rpb24iLCJxbC1kaXJlY3Rpb24iLGkpLHM9bmV3IG8uZGVmYXVsdC5BdHRyaWJ1dG9yLlN0eWxlKCJkaXJlY3Rpb24iLCJkaXJlY3Rpb24iLGkpO2UuRGlyZWN0aW9uQXR0cmlidXRlPWwsZS5EaXJlY3Rpb25DbGFzcz1hLGUuRGlyZWN0aW9uU3R5bGU9c30sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gbyh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWV8fCJvYmplY3QiIT10eXBlb2YgZSYmImZ1bmN0aW9uIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIGkodCxlKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSxlLkZvbnRDbGFzcz1lLkZvbnRTdHlsZT12b2lkIDA7dmFyIGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciByPWVbbl07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsInZhbHVlImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLmtleSxyKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxyJiZ0KGUsciksZX19KCksYT1mdW5jdGlvbiB0KGUsbixyKXtudWxsPT09ZSYmKGU9RnVuY3Rpb24ucHJvdG90eXBlKTt2YXIgbz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsbik7aWYodm9pZCAwPT09byl7dmFyIGk9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO3JldHVybiBudWxsPT09aT92b2lkIDA6dChpLG4scil9aWYoInZhbHVlImluIG8pcmV0dXJuIG8udmFsdWU7dmFyIGw9by5nZXQ7aWYodm9pZCAwIT09bClyZXR1cm4gbC5jYWxsKHIpfSxzPW4oMCksdT1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19KHMpLGM9e3Njb3BlOnUuZGVmYXVsdC5TY29wZS5JTkxJTkUsd2hpdGVsaXN0Olsic2VyaWYiLCJtb25vc3BhY2UiXX0sZj1uZXcgdS5kZWZhdWx0LkF0dHJpYnV0b3IuQ2xhc3MoImZvbnQiLCJxbC1mb250IixjKSxoPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gcih0aGlzLGUpLG8odGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gaShlLHQpLGwoZSxbe2tleToidmFsdWUiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBhKGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSwidmFsdWUiLHRoaXMpLmNhbGwodGhpcyx0KS5yZXBsYWNlKC9bIiddL2csIiIpfX1dKSxlfSh1LmRlZmF1bHQuQXR0cmlidXRvci5TdHlsZSkscD1uZXcgaCgiZm9udCIsImZvbnQtZmFtaWx5IixjKTtlLkZvbnRTdHlsZT1wLGUuRm9udENsYXNzPWZ9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLGUuU2l6ZVN0eWxlPWUuU2l6ZUNsYXNzPXZvaWQgMDt2YXIgcj1uKDApLG89ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fShyKSxpPW5ldyBvLmRlZmF1bHQuQXR0cmlidXRvci5DbGFzcygic2l6ZSIsInFsLXNpemUiLHtzY29wZTpvLmRlZmF1bHQuU2NvcGUuSU5MSU5FLHdoaXRlbGlzdDpbInNtYWxsIiwibGFyZ2UiLCJodWdlIl19KSxsPW5ldyBvLmRlZmF1bHQuQXR0cmlidXRvci5TdHlsZSgic2l6ZSIsImZvbnQtc2l6ZSIse3Njb3BlOm8uZGVmYXVsdC5TY29wZS5JTkxJTkUsd2hpdGVsaXN0OlsiMTBweCIsIjE4cHgiLCIzMnB4Il19KTtlLlNpemVDbGFzcz1pLGUuU2l6ZVN0eWxlPWx9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gbyh0LGUsbil7cmV0dXJuIGUgaW4gdD9PYmplY3QuZGVmaW5lUHJvcGVydHkodCxlLHt2YWx1ZTpuLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSk6dFtlXT1uLHR9ZnVuY3Rpb24gaSh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIGwodCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiFlfHwib2JqZWN0IiE9dHlwZW9mIGUmJiJmdW5jdGlvbiIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBhKHQsZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1mdW5jdGlvbiBzKHQsZSl7dmFyIG4scj10PT09Ri5rZXlzLkxFRlQ/InByZWZpeCI6InN1ZmZpeCI7cmV0dXJuIG49e2tleTp0LHNoaWZ0S2V5OmV9LG8obixyLC9eJC8pLG8obiwiaGFuZGxlciIsZnVuY3Rpb24obil7dmFyIHI9bi5pbmRleDt0PT09Ri5rZXlzLlJJR0hUJiYocis9bi5sZW5ndGgrMSk7dmFyIG89dGhpcy5xdWlsbC5nZXRMZWFmKHIpO3JldHVybiEoYihvLDEpWzBdaW5zdGFuY2VvZiBTLmRlZmF1bHQpfHwodD09PUYua2V5cy5MRUZUP2U/dGhpcy5xdWlsbC5zZXRTZWxlY3Rpb24obi5pbmRleC0xLG4ubGVuZ3RoKzEsTC5kZWZhdWx0LnNvdXJjZXMuVVNFUik6dGhpcy5xdWlsbC5zZXRTZWxlY3Rpb24obi5pbmRleC0xLEwuZGVmYXVsdC5zb3VyY2VzLlVTRVIpOmU/dGhpcy5xdWlsbC5zZXRTZWxlY3Rpb24obi5pbmRleCxuLmxlbmd0aCsxLEwuZGVmYXVsdC5zb3VyY2VzLlVTRVIpOnRoaXMucXVpbGwuc2V0U2VsZWN0aW9uKG4uaW5kZXgrbi5sZW5ndGgrMSxMLmRlZmF1bHQuc291cmNlcy5VU0VSKSwhMSl9KSxufWZ1bmN0aW9uIHUodCxlKXtpZighKDA9PT10LmluZGV4fHx0aGlzLnF1aWxsLmdldExlbmd0aCgpPD0xKSl7dmFyIG49dGhpcy5xdWlsbC5nZXRMaW5lKHQuaW5kZXgpLHI9YihuLDEpLG89clswXSxpPXt9O2lmKDA9PT1lLm9mZnNldCl7dmFyIGw9dGhpcy5xdWlsbC5nZXRMaW5lKHQuaW5kZXgtMSksYT1iKGwsMSkscz1hWzBdO2lmKG51bGwhPXMmJnMubGVuZ3RoKCk+MSl7dmFyIHU9by5mb3JtYXRzKCksYz10aGlzLnF1aWxsLmdldEZvcm1hdCh0LmluZGV4LTEsMSk7aT1BLmRlZmF1bHQuYXR0cmlidXRlcy5kaWZmKHUsYyl8fHt9fX12YXIgZj0vW1x1RDgwMC1cdURCRkZdW1x1REMwMC1cdURGRkZdJC8udGVzdChlLnByZWZpeCk/MjoxO3RoaXMucXVpbGwuZGVsZXRlVGV4dCh0LmluZGV4LWYsZixMLmRlZmF1bHQuc291cmNlcy5VU0VSKSxPYmplY3Qua2V5cyhpKS5sZW5ndGg+MCYmdGhpcy5xdWlsbC5mb3JtYXRMaW5lKHQuaW5kZXgtZixmLGksTC5kZWZhdWx0LnNvdXJjZXMuVVNFUiksdGhpcy5xdWlsbC5mb2N1cygpfX1mdW5jdGlvbiBjKHQsZSl7dmFyIG49L15bXHVEODAwLVx1REJGRl1bXHVEQzAwLVx1REZGRl0vLnRlc3QoZS5zdWZmaXgpPzI6MTtpZighKHQuaW5kZXg+PXRoaXMucXVpbGwuZ2V0TGVuZ3RoKCktbikpe3ZhciByPXt9LG89MCxpPXRoaXMucXVpbGwuZ2V0TGluZSh0LmluZGV4KSxsPWIoaSwxKSxhPWxbMF07aWYoZS5vZmZzZXQ+PWEubGVuZ3RoKCktMSl7dmFyIHM9dGhpcy5xdWlsbC5nZXRMaW5lKHQuaW5kZXgrMSksdT1iKHMsMSksYz11WzBdO2lmKGMpe3ZhciBmPWEuZm9ybWF0cygpLGg9dGhpcy5xdWlsbC5nZXRGb3JtYXQodC5pbmRleCwxKTtyPUEuZGVmYXVsdC5hdHRyaWJ1dGVzLmRpZmYoZixoKXx8e30sbz1jLmxlbmd0aCgpfX10aGlzLnF1aWxsLmRlbGV0ZVRleHQodC5pbmRleCxuLEwuZGVmYXVsdC5zb3VyY2VzLlVTRVIpLE9iamVjdC5rZXlzKHIpLmxlbmd0aD4wJiZ0aGlzLnF1aWxsLmZvcm1hdExpbmUodC5pbmRleCtvLTEsbixyLEwuZGVmYXVsdC5zb3VyY2VzLlVTRVIpfX1mdW5jdGlvbiBmKHQpe3ZhciBlPXRoaXMucXVpbGwuZ2V0TGluZXModCksbj17fTtpZihlLmxlbmd0aD4xKXt2YXIgcj1lWzBdLmZvcm1hdHMoKSxvPWVbZS5sZW5ndGgtMV0uZm9ybWF0cygpO249QS5kZWZhdWx0LmF0dHJpYnV0ZXMuZGlmZihvLHIpfHx7fX10aGlzLnF1aWxsLmRlbGV0ZVRleHQodCxMLmRlZmF1bHQuc291cmNlcy5VU0VSKSxPYmplY3Qua2V5cyhuKS5sZW5ndGg+MCYmdGhpcy5xdWlsbC5mb3JtYXRMaW5lKHQuaW5kZXgsMSxuLEwuZGVmYXVsdC5zb3VyY2VzLlVTRVIpLHRoaXMucXVpbGwuc2V0U2VsZWN0aW9uKHQuaW5kZXgsTC5kZWZhdWx0LnNvdXJjZXMuU0lMRU5UKSx0aGlzLnF1aWxsLmZvY3VzKCl9ZnVuY3Rpb24gaCh0LGUpe3ZhciBuPXRoaXM7dC5sZW5ndGg+MCYmdGhpcy5xdWlsbC5zY3JvbGwuZGVsZXRlQXQodC5pbmRleCx0Lmxlbmd0aCk7dmFyIHI9T2JqZWN0LmtleXMoZS5mb3JtYXQpLnJlZHVjZShmdW5jdGlvbih0LG4pe3JldHVybiBULmRlZmF1bHQucXVlcnkobixULmRlZmF1bHQuU2NvcGUuQkxPQ0spJiYhQXJyYXkuaXNBcnJheShlLmZvcm1hdFtuXSkmJih0W25dPWUuZm9ybWF0W25dKSx0fSx7fSk7dGhpcy5xdWlsbC5pbnNlcnRUZXh0KHQuaW5kZXgsIlxuIixyLEwuZGVmYXVsdC5zb3VyY2VzLlVTRVIpLHRoaXMucXVpbGwuc2V0U2VsZWN0aW9uKHQuaW5kZXgrMSxMLmRlZmF1bHQuc291cmNlcy5TSUxFTlQpLHRoaXMucXVpbGwuZm9jdXMoKSxPYmplY3Qua2V5cyhlLmZvcm1hdCkuZm9yRWFjaChmdW5jdGlvbih0KXtudWxsPT1yW3RdJiYoQXJyYXkuaXNBcnJheShlLmZvcm1hdFt0XSl8fCJsaW5rIiE9PXQmJm4ucXVpbGwuZm9ybWF0KHQsZS5mb3JtYXRbdF0sTC5kZWZhdWx0LnNvdXJjZXMuVVNFUikpfSl9ZnVuY3Rpb24gcCh0KXtyZXR1cm57a2V5OkYua2V5cy5UQUIsc2hpZnRLZXk6IXQsZm9ybWF0OnsiY29kZS1ibG9jayI6ITB9LGhhbmRsZXI6ZnVuY3Rpb24oZSl7dmFyIG49VC5kZWZhdWx0LnF1ZXJ5KCJjb2RlLWJsb2NrIikscj1lLmluZGV4LG89ZS5sZW5ndGgsaT10aGlzLnF1aWxsLnNjcm9sbC5kZXNjZW5kYW50KG4sciksbD1iKGksMiksYT1sWzBdLHM9bFsxXTtpZihudWxsIT1hKXt2YXIgdT10aGlzLnF1aWxsLmdldEluZGV4KGEpLGM9YS5uZXdsaW5lSW5kZXgocywhMCkrMSxmPWEubmV3bGluZUluZGV4KHUrcytvKSxoPWEuZG9tTm9kZS50ZXh0Q29udGVudC5zbGljZShjLGYpLnNwbGl0KCJcbiIpO3M9MCxoLmZvckVhY2goZnVuY3Rpb24oZSxpKXt0PyhhLmluc2VydEF0KGMrcyxuLlRBQikscys9bi5UQUIubGVuZ3RoLDA9PT1pP3IrPW4uVEFCLmxlbmd0aDpvKz1uLlRBQi5sZW5ndGgpOmUuc3RhcnRzV2l0aChuLlRBQikmJihhLmRlbGV0ZUF0KGMrcyxuLlRBQi5sZW5ndGgpLHMtPW4uVEFCLmxlbmd0aCwwPT09aT9yLT1uLlRBQi5sZW5ndGg6by09bi5UQUIubGVuZ3RoKSxzKz1lLmxlbmd0aCsxfSksdGhpcy5xdWlsbC51cGRhdGUoTC5kZWZhdWx0LnNvdXJjZXMuVVNFUiksdGhpcy5xdWlsbC5zZXRTZWxlY3Rpb24ocixvLEwuZGVmYXVsdC5zb3VyY2VzLlNJTEVOVCl9fX19ZnVuY3Rpb24gZCh0KXtyZXR1cm57a2V5OnRbMF0udG9VcHBlckNhc2UoKSxzaG9ydEtleTohMCxoYW5kbGVyOmZ1bmN0aW9uKGUsbil7dGhpcy5xdWlsbC5mb3JtYXQodCwhbi5mb3JtYXRbdF0sTC5kZWZhdWx0LnNvdXJjZXMuVVNFUil9fX1mdW5jdGlvbiB5KHQpe2lmKCJzdHJpbmciPT10eXBlb2YgdHx8Im51bWJlciI9PXR5cGVvZiB0KXJldHVybiB5KHtrZXk6dH0pO2lmKCJvYmplY3QiPT09KHZvaWQgMD09PXQ/InVuZGVmaW5lZCI6dih0KSkmJih0PSgwLF8uZGVmYXVsdCkodCwhMSkpLCJzdHJpbmciPT10eXBlb2YgdC5rZXkpaWYobnVsbCE9Ri5rZXlzW3Qua2V5LnRvVXBwZXJDYXNlKCldKXQua2V5PUYua2V5c1t0LmtleS50b1VwcGVyQ2FzZSgpXTtlbHNle2lmKDEhPT10LmtleS5sZW5ndGgpcmV0dXJuIG51bGw7dC5rZXk9dC5rZXkudG9VcHBlckNhc2UoKS5jaGFyQ29kZUF0KDApfXJldHVybiB0LnNob3J0S2V5JiYodFtVXT10LnNob3J0S2V5LGRlbGV0ZSB0LnNob3J0S2V5KSx0fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSxlLlNIT1JUS0VZPWUuZGVmYXVsdD12b2lkIDA7dmFyIHY9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmInN5bWJvbCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmdCE9PVN5bWJvbC5wcm90b3R5cGU/InN5bWJvbCI6dHlwZW9mIHR9LGI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7dmFyIG49W10scj0hMCxvPSExLGk9dm9pZCAwO3RyeXtmb3IodmFyIGwsYT10W1N5bWJvbC5pdGVyYXRvcl0oKTshKHI9KGw9YS5uZXh0KCkpLmRvbmUpJiYobi5wdXNoKGwudmFsdWUpLCFlfHxuLmxlbmd0aCE9PWUpO3I9ITApO31jYXRjaCh0KXtvPSEwLGk9dH1maW5hbGx5e3RyeXshciYmYS5yZXR1cm4mJmEucmV0dXJuKCl9ZmluYWxseXtpZihvKXRocm93IGl9fXJldHVybiBufXJldHVybiBmdW5jdGlvbihlLG4pe2lmKEFycmF5LmlzQXJyYXkoZSkpcmV0dXJuIGU7aWYoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChlKSlyZXR1cm4gdChlLG4pO3Rocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UiKX19KCksZz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIHI9ZVtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIua2V5LHIpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLHIpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLHImJnQoZSxyKSxlfX0oKSxtPW4oMjEpLF89cihtKSxPPW4oMTIpLHc9cihPKSx4PW4oMiksaz1yKHgpLEU9big0KSxOPXIoRSksaj1uKDIwKSxBPXIoaikscT1uKDApLFQ9cihxKSxQPW4oMjQpLFM9cihQKSxDPW4oNiksTD1yKEMpLE09bigxMCksUj1yKE0pLEk9big3KSxCPXIoSSksRD0oMCxSLmRlZmF1bHQpKCJxdWlsbDprZXlib2FyZCIpLFU9L01hYy9pLnRlc3QobmF2aWdhdG9yLnBsYXRmb3JtKT8ibWV0YUtleSI6ImN0cmxLZXkiLEY9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0LG4pe2kodGhpcyxlKTt2YXIgcj1sKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx0LG4pKTtyZXR1cm4gci5iaW5kaW5ncz17fSxPYmplY3Qua2V5cyhyLm9wdGlvbnMuYmluZGluZ3MpLmZvckVhY2goZnVuY3Rpb24oZSl7KCJsaXN0IGF1dG9maWxsIiE9PWV8fG51bGw9PXQuc2Nyb2xsLndoaXRlbGlzdHx8dC5zY3JvbGwud2hpdGVsaXN0Lmxpc3QpJiZyLm9wdGlvbnMuYmluZGluZ3NbZV0mJnIuYWRkQmluZGluZyhyLm9wdGlvbnMuYmluZGluZ3NbZV0pfSksci5hZGRCaW5kaW5nKHtrZXk6ZS5rZXlzLkVOVEVSLHNoaWZ0S2V5Om51bGx9LGgpLHIuYWRkQmluZGluZyh7a2V5OmUua2V5cy5FTlRFUixtZXRhS2V5Om51bGwsY3RybEtleTpudWxsLGFsdEtleTpudWxsfSxmdW5jdGlvbigpe30pLC9GaXJlZm94L2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KT8oci5hZGRCaW5kaW5nKHtrZXk6ZS5rZXlzLkJBQ0tTUEFDRX0se2NvbGxhcHNlZDohMH0sdSksci5hZGRCaW5kaW5nKHtrZXk6ZS5rZXlzLkRFTEVURX0se2NvbGxhcHNlZDohMH0sYykpOihyLmFkZEJpbmRpbmcoe2tleTplLmtleXMuQkFDS1NQQUNFfSx7Y29sbGFwc2VkOiEwLHByZWZpeDovXi4/JC99LHUpLHIuYWRkQmluZGluZyh7a2V5OmUua2V5cy5ERUxFVEV9LHtjb2xsYXBzZWQ6ITAsc3VmZml4Oi9eLj8kL30sYykpLHIuYWRkQmluZGluZyh7a2V5OmUua2V5cy5CQUNLU1BBQ0V9LHtjb2xsYXBzZWQ6ITF9LGYpLHIuYWRkQmluZGluZyh7a2V5OmUua2V5cy5ERUxFVEV9LHtjb2xsYXBzZWQ6ITF9LGYpLHIuYWRkQmluZGluZyh7a2V5OmUua2V5cy5CQUNLU1BBQ0UsYWx0S2V5Om51bGwsY3RybEtleTpudWxsLG1ldGFLZXk6bnVsbCxzaGlmdEtleTpudWxsfSx7Y29sbGFwc2VkOiEwLG9mZnNldDowfSx1KSxyLmxpc3RlbigpLHJ9cmV0dXJuIGEoZSx0KSxnKGUsbnVsbCxbe2tleToibWF0Y2giLHZhbHVlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGU9eShlKSwhWyJhbHRLZXkiLCJjdHJsS2V5IiwibWV0YUtleSIsInNoaWZ0S2V5Il0uc29tZShmdW5jdGlvbihuKXtyZXR1cm4hIWVbbl0hPT10W25dJiZudWxsIT09ZVtuXX0pJiZlLmtleT09PSh0LndoaWNofHx0LmtleUNvZGUpfX1dKSxnKGUsW3trZXk6ImFkZEJpbmRpbmciLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fSxuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTp7fSxyPXkodCk7aWYobnVsbD09cnx8bnVsbD09ci5rZXkpcmV0dXJuIEQud2FybigiQXR0ZW1wdGVkIHRvIGFkZCBpbnZhbGlkIGtleWJvYXJkIGJpbmRpbmciLHIpOyJmdW5jdGlvbiI9PXR5cGVvZiBlJiYoZT17aGFuZGxlcjplfSksImZ1bmN0aW9uIj09dHlwZW9mIG4mJihuPXtoYW5kbGVyOm59KSxyPSgwLGsuZGVmYXVsdCkocixlLG4pLHRoaXMuYmluZGluZ3Nbci5rZXldPXRoaXMuYmluZGluZ3Nbci5rZXldfHxbXSx0aGlzLmJpbmRpbmdzW3Iua2V5XS5wdXNoKHIpfX0se2tleToibGlzdGVuIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5xdWlsbC5yb290LmFkZEV2ZW50TGlzdGVuZXIoImtleWRvd24iLGZ1bmN0aW9uKG4pe2lmKCFuLmRlZmF1bHRQcmV2ZW50ZWQpe3ZhciByPW4ud2hpY2h8fG4ua2V5Q29kZSxvPSh0LmJpbmRpbmdzW3JdfHxbXSkuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiBlLm1hdGNoKG4sdCl9KTtpZigwIT09by5sZW5ndGgpe3ZhciBpPXQucXVpbGwuZ2V0U2VsZWN0aW9uKCk7aWYobnVsbCE9aSYmdC5xdWlsbC5oYXNGb2N1cygpKXt2YXIgbD10LnF1aWxsLmdldExpbmUoaS5pbmRleCksYT1iKGwsMikscz1hWzBdLHU9YVsxXSxjPXQucXVpbGwuZ2V0TGVhZihpLmluZGV4KSxmPWIoYywyKSxoPWZbMF0scD1mWzFdLGQ9MD09PWkubGVuZ3RoP1toLHBdOnQucXVpbGwuZ2V0TGVhZihpLmluZGV4K2kubGVuZ3RoKSx5PWIoZCwyKSxnPXlbMF0sbT15WzFdLF89aCBpbnN0YW5jZW9mIFQuZGVmYXVsdC5UZXh0P2gudmFsdWUoKS5zbGljZSgwLHApOiIiLE89ZyBpbnN0YW5jZW9mIFQuZGVmYXVsdC5UZXh0P2cudmFsdWUoKS5zbGljZShtKToiIix4PXtjb2xsYXBzZWQ6MD09PWkubGVuZ3RoLGVtcHR5OjA9PT1pLmxlbmd0aCYmcy5sZW5ndGgoKTw9MSxmb3JtYXQ6dC5xdWlsbC5nZXRGb3JtYXQoaSksb2Zmc2V0OnUscHJlZml4Ol8sc3VmZml4Ok99O28uc29tZShmdW5jdGlvbihlKXtpZihudWxsIT1lLmNvbGxhcHNlZCYmZS5jb2xsYXBzZWQhPT14LmNvbGxhcHNlZClyZXR1cm4hMTtpZihudWxsIT1lLmVtcHR5JiZlLmVtcHR5IT09eC5lbXB0eSlyZXR1cm4hMTtpZihudWxsIT1lLm9mZnNldCYmZS5vZmZzZXQhPT14Lm9mZnNldClyZXR1cm4hMTtpZihBcnJheS5pc0FycmF5KGUuZm9ybWF0KSl7aWYoZS5mb3JtYXQuZXZlcnkoZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXguZm9ybWF0W3RdfSkpcmV0dXJuITF9ZWxzZSBpZigib2JqZWN0Ij09PXYoZS5mb3JtYXQpJiYhT2JqZWN0LmtleXMoZS5mb3JtYXQpLmV2ZXJ5KGZ1bmN0aW9uKHQpe3JldHVybiEwPT09ZS5mb3JtYXRbdF0/bnVsbCE9eC5mb3JtYXRbdF06ITE9PT1lLmZvcm1hdFt0XT9udWxsPT14LmZvcm1hdFt0XTooMCx3LmRlZmF1bHQpKGUuZm9ybWF0W3RdLHguZm9ybWF0W3RdKX0pKXJldHVybiExO3JldHVybiEobnVsbCE9ZS5wcmVmaXgmJiFlLnByZWZpeC50ZXN0KHgucHJlZml4KSkmJighKG51bGwhPWUuc3VmZml4JiYhZS5zdWZmaXgudGVzdCh4LnN1ZmZpeCkpJiYhMCE9PWUuaGFuZGxlci5jYWxsKHQsaSx4KSl9KSYmbi5wcmV2ZW50RGVmYXVsdCgpfX19fSl9fV0pLGV9KEIuZGVmYXVsdCk7Ri5rZXlzPXtCQUNLU1BBQ0U6OCxUQUI6OSxFTlRFUjoxMyxFU0NBUEU6MjcsTEVGVDozNyxVUDozOCxSSUdIVDozOSxET1dOOjQwLERFTEVURTo0Nn0sRi5ERUZBVUxUUz17YmluZGluZ3M6e2JvbGQ6ZCgiYm9sZCIpLGl0YWxpYzpkKCJpdGFsaWMiKSx1bmRlcmxpbmU6ZCgidW5kZXJsaW5lIiksaW5kZW50OntrZXk6Ri5rZXlzLlRBQixmb3JtYXQ6WyJibG9ja3F1b3RlIiwiaW5kZW50IiwibGlzdCJdLGhhbmRsZXI6ZnVuY3Rpb24odCxlKXtpZihlLmNvbGxhcHNlZCYmMCE9PWUub2Zmc2V0KXJldHVybiEwO3RoaXMucXVpbGwuZm9ybWF0KCJpbmRlbnQiLCIrMSIsTC5kZWZhdWx0LnNvdXJjZXMuVVNFUil9fSxvdXRkZW50OntrZXk6Ri5rZXlzLlRBQixzaGlmdEtleTohMCxmb3JtYXQ6WyJibG9ja3F1b3RlIiwiaW5kZW50IiwibGlzdCJdLGhhbmRsZXI6ZnVuY3Rpb24odCxlKXtpZihlLmNvbGxhcHNlZCYmMCE9PWUub2Zmc2V0KXJldHVybiEwO3RoaXMucXVpbGwuZm9ybWF0KCJpbmRlbnQiLCItMSIsTC5kZWZhdWx0LnNvdXJjZXMuVVNFUil9fSwib3V0ZGVudCBiYWNrc3BhY2UiOntrZXk6Ri5rZXlzLkJBQ0tTUEFDRSxjb2xsYXBzZWQ6ITAsc2hpZnRLZXk6bnVsbCxtZXRhS2V5Om51bGwsY3RybEtleTpudWxsLGFsdEtleTpudWxsLGZvcm1hdDpbImluZGVudCIsImxpc3QiXSxvZmZzZXQ6MCxoYW5kbGVyOmZ1bmN0aW9uKHQsZSl7bnVsbCE9ZS5mb3JtYXQuaW5kZW50P3RoaXMucXVpbGwuZm9ybWF0KCJpbmRlbnQiLCItMSIsTC5kZWZhdWx0LnNvdXJjZXMuVVNFUik6bnVsbCE9ZS5mb3JtYXQubGlzdCYmdGhpcy5xdWlsbC5mb3JtYXQoImxpc3QiLCExLEwuZGVmYXVsdC5zb3VyY2VzLlVTRVIpfX0sImluZGVudCBjb2RlLWJsb2NrIjpwKCEwKSwib3V0ZGVudCBjb2RlLWJsb2NrIjpwKCExKSwicmVtb3ZlIHRhYiI6e2tleTpGLmtleXMuVEFCLHNoaWZ0S2V5OiEwLGNvbGxhcHNlZDohMCxwcmVmaXg6L1x0JC8saGFuZGxlcjpmdW5jdGlvbih0KXt0aGlzLnF1aWxsLmRlbGV0ZVRleHQodC5pbmRleC0xLDEsTC5kZWZhdWx0LnNvdXJjZXMuVVNFUil9fSx0YWI6e2tleTpGLmtleXMuVEFCLGhhbmRsZXI6ZnVuY3Rpb24odCl7dGhpcy5xdWlsbC5oaXN0b3J5LmN1dG9mZigpO3ZhciBlPShuZXcgTi5kZWZhdWx0KS5yZXRhaW4odC5pbmRleCkuZGVsZXRlKHQubGVuZ3RoKS5pbnNlcnQoIlx0Iik7dGhpcy5xdWlsbC51cGRhdGVDb250ZW50cyhlLEwuZGVmYXVsdC5zb3VyY2VzLlVTRVIpLHRoaXMucXVpbGwuaGlzdG9yeS5jdXRvZmYoKSx0aGlzLnF1aWxsLnNldFNlbGVjdGlvbih0LmluZGV4KzEsTC5kZWZhdWx0LnNvdXJjZXMuU0lMRU5UKX19LCJsaXN0IGVtcHR5IGVudGVyIjp7a2V5OkYua2V5cy5FTlRFUixjb2xsYXBzZWQ6ITAsZm9ybWF0OlsibGlzdCJdLGVtcHR5OiEwLGhhbmRsZXI6ZnVuY3Rpb24odCxlKXt0aGlzLnF1aWxsLmZvcm1hdCgibGlzdCIsITEsTC5kZWZhdWx0LnNvdXJjZXMuVVNFUiksZS5mb3JtYXQuaW5kZW50JiZ0aGlzLnF1aWxsLmZvcm1hdCgiaW5kZW50IiwhMSxMLmRlZmF1bHQuc291cmNlcy5VU0VSKX19LCJjaGVja2xpc3QgZW50ZXIiOntrZXk6Ri5rZXlzLkVOVEVSLGNvbGxhcHNlZDohMCxmb3JtYXQ6e2xpc3Q6ImNoZWNrZWQifSxoYW5kbGVyOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucXVpbGwuZ2V0TGluZSh0LmluZGV4KSxuPWIoZSwyKSxyPW5bMF0sbz1uWzFdLGk9KG5ldyBOLmRlZmF1bHQpLnJldGFpbih0LmluZGV4KS5pbnNlcnQoIlxuIix7bGlzdDoiY2hlY2tlZCJ9KS5yZXRhaW4oci5sZW5ndGgoKS1vLTEpLnJldGFpbigxLHtsaXN0OiJ1bmNoZWNrZWQifSk7dGhpcy5xdWlsbC51cGRhdGVDb250ZW50cyhpLEwuZGVmYXVsdC5zb3VyY2VzLlVTRVIpLHRoaXMucXVpbGwuc2V0U2VsZWN0aW9uKHQuaW5kZXgrMSxMLmRlZmF1bHQuc291cmNlcy5TSUxFTlQpLHRoaXMucXVpbGwuc2Nyb2xsSW50b1ZpZXcoKX19LCJoZWFkZXIgZW50ZXIiOntrZXk6Ri5rZXlzLkVOVEVSLGNvbGxhcHNlZDohMCxmb3JtYXQ6WyJoZWFkZXIiXSxzdWZmaXg6L14kLyxoYW5kbGVyOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5xdWlsbC5nZXRMaW5lKHQuaW5kZXgpLHI9YihuLDIpLG89clswXSxpPXJbMV0sbD0obmV3IE4uZGVmYXVsdCkucmV0YWluKHQuaW5kZXgpLmluc2VydCgiXG4iLGUuZm9ybWF0KS5yZXRhaW4oby5sZW5ndGgoKS1pLTEpLnJldGFpbigxLHtoZWFkZXI6bnVsbH0pO3RoaXMucXVpbGwudXBkYXRlQ29udGVudHMobCxMLmRlZmF1bHQuc291cmNlcy5VU0VSKSx0aGlzLnF1aWxsLnNldFNlbGVjdGlvbih0LmluZGV4KzEsTC5kZWZhdWx0LnNvdXJjZXMuU0lMRU5UKSx0aGlzLnF1aWxsLnNjcm9sbEludG9WaWV3KCl9fSwibGlzdCBhdXRvZmlsbCI6e2tleToiICIsY29sbGFwc2VkOiEwLGZvcm1hdDp7bGlzdDohMX0scHJlZml4Oi9eXHMqPyhcZCtcLnwtfFxbID9cXXxcW3hcXSkkLyxoYW5kbGVyOmZ1bmN0aW9uKHQsZSl7dmFyIG49ZS5wcmVmaXgubGVuZ3RoLHI9dGhpcy5xdWlsbC5nZXRMaW5lKHQuaW5kZXgpLG89YihyLDIpLGk9b1swXSxsPW9bMV07aWYobD5uKXJldHVybiEwO3ZhciBhPXZvaWQgMDtzd2l0Y2goZS5wcmVmaXgudHJpbSgpKXtjYXNlIltdIjpjYXNlIlsgXSI6YT0idW5jaGVja2VkIjticmVhaztjYXNlIlt4XSI6YT0iY2hlY2tlZCI7YnJlYWs7Y2FzZSItIjphPSJidWxsZXQiO2JyZWFrO2RlZmF1bHQ6YT0ib3JkZXJlZCJ9dGhpcy5xdWlsbC5pbnNlcnRUZXh0KHQuaW5kZXgsIiAiLEwuZGVmYXVsdC5zb3VyY2VzLlVTRVIpLHRoaXMucXVpbGwuaGlzdG9yeS5jdXRvZmYoKTt2YXIgcz0obmV3IE4uZGVmYXVsdCkucmV0YWluKHQuaW5kZXgtbCkuZGVsZXRlKG4rMSkucmV0YWluKGkubGVuZ3RoKCktMi1sKS5yZXRhaW4oMSx7bGlzdDphfSk7dGhpcy5xdWlsbC51cGRhdGVDb250ZW50cyhzLEwuZGVmYXVsdC5zb3VyY2VzLlVTRVIpLHRoaXMucXVpbGwuaGlzdG9yeS5jdXRvZmYoKSx0aGlzLnF1aWxsLnNldFNlbGVjdGlvbih0LmluZGV4LW4sTC5kZWZhdWx0LnNvdXJjZXMuU0lMRU5UKX19LCJjb2RlIGV4aXQiOntrZXk6Ri5rZXlzLkVOVEVSLGNvbGxhcHNlZDohMCxmb3JtYXQ6WyJjb2RlLWJsb2NrIl0scHJlZml4Oi9cblxuJC8sc3VmZml4Oi9eXHMrJC8saGFuZGxlcjpmdW5jdGlvbih0KXt2YXIgZT10aGlzLnF1aWxsLmdldExpbmUodC5pbmRleCksbj1iKGUsMikscj1uWzBdLG89blsxXSxpPShuZXcgTi5kZWZhdWx0KS5yZXRhaW4odC5pbmRleCtyLmxlbmd0aCgpLW8tMikucmV0YWluKDEseyJjb2RlLWJsb2NrIjpudWxsfSkuZGVsZXRlKDEpO3RoaXMucXVpbGwudXBkYXRlQ29udGVudHMoaSxMLmRlZmF1bHQuc291cmNlcy5VU0VSKX19LCJlbWJlZCBsZWZ0IjpzKEYua2V5cy5MRUZULCExKSwiZW1iZWQgbGVmdCBzaGlmdCI6cyhGLmtleXMuTEVGVCwhMCksImVtYmVkIHJpZ2h0IjpzKEYua2V5cy5SSUdIVCwhMSksImVtYmVkIHJpZ2h0IHNoaWZ0IjpzKEYua2V5cy5SSUdIVCwhMCl9fSxlLmRlZmF1bHQ9RixlLlNIT1JUS0VZPVV9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIG8odCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiFlfHwib2JqZWN0IiE9dHlwZW9mIGUmJiJmdW5jdGlvbiIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBpKHQsZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciByPWVbbl07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsInZhbHVlImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLmtleSxyKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxyJiZ0KGUsciksZX19KCksYT1mdW5jdGlvbiB0KGUsbixyKXtudWxsPT09ZSYmKGU9RnVuY3Rpb24ucHJvdG90eXBlKTt2YXIgbz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsbik7aWYodm9pZCAwPT09byl7dmFyIGk9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO3JldHVybiBudWxsPT09aT92b2lkIDA6dChpLG4scil9aWYoInZhbHVlImluIG8pcmV0dXJuIG8udmFsdWU7dmFyIGw9by5nZXQ7aWYodm9pZCAwIT09bClyZXR1cm4gbC5jYWxsKHIpfSxzPW4oNSksdT1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19KHMpLGM9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiByKHRoaXMsZSksbyh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBpKGUsdCksbChlLFt7a2V5OiJvcHRpbWl6ZSIsdmFsdWU6ZnVuY3Rpb24odCl7YShlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksIm9wdGltaXplIix0aGlzKS5jYWxsKHRoaXMsdCksdGhpcy5kb21Ob2RlLnRhZ05hbWUhPT10aGlzLnN0YXRpY3MudGFnTmFtZVswXSYmdGhpcy5yZXBsYWNlV2l0aCh0aGlzLnN0YXRpY3MuYmxvdE5hbWUpfX1dLFt7a2V5OiJjcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIGEoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSwiY3JlYXRlIix0aGlzKS5jYWxsKHRoaXMpfX0se2tleToiZm9ybWF0cyIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4hMH19XSksZX0odS5kZWZhdWx0KTtjLmJsb3ROYW1lPSJib2xkIixjLnRhZ05hbWU9WyJTVFJPTkciLCJCIl0sZS5kZWZhdWx0PWN9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPSc8c3ZnIHZpZXdib3g9IjAgMCAxOCAxOCI+IDxwb2x5bGluZSBjbGFzcz0icWwtZXZlbiBxbC1zdHJva2UiIHBvaW50cz0iNSA3IDMgOSA1IDExIj48L3BvbHlsaW5lPiA8cG9seWxpbmUgY2xhc3M9InFsLWV2ZW4gcWwtc3Ryb2tlIiBwb2ludHM9IjEzIDcgMTUgOSAxMyAxMSI+PC9wb2x5bGluZT4gPGxpbmUgY2xhc3M9cWwtc3Ryb2tlIHgxPTEwIHgyPTggeTE9NSB5Mj0xMz48L2xpbmU+IDwvc3ZnPid9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIG8odCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiFlfHwib2JqZWN0IiE9dHlwZW9mIGUmJiJmdW5jdGlvbiIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBpKHQsZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciByPWVbbl07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsInZhbHVlImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLmtleSxyKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxyJiZ0KGUsciksZX19KCksYT1mdW5jdGlvbiB0KGUsbixyKXtudWxsPT09ZSYmKGU9RnVuY3Rpb24ucHJvdG90eXBlKTt2YXIgbz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsbik7aWYodm9pZCAwPT09byl7dmFyIGk9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO3JldHVybiBudWxsPT09aT92b2lkIDA6dChpLG4scil9aWYoInZhbHVlImluIG8pcmV0dXJuIG8udmFsdWU7dmFyIGw9by5nZXQ7aWYodm9pZCAwIT09bClyZXR1cm4gbC5jYWxsKHIpfSxzPW4oMTYpLHU9ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fShzKSxjPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCxuKXtyKHRoaXMsZSk7dmFyIGk9byh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMsdCkpO3JldHVybiBpLmxhYmVsLmlubmVySFRNTD1uLGkuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoInFsLWNvbG9yLXBpY2tlciIpLFtdLnNsaWNlLmNhbGwoaS5jb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgiLnFsLXBpY2tlci1pdGVtIiksMCw3KS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QuY2xhc3NMaXN0LmFkZCgicWwtcHJpbWFyeSIpfSksaX1yZXR1cm4gaShlLHQpLGwoZSxbe2tleToiYnVpbGRJdGVtIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgbj1hKGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSwiYnVpbGRJdGVtIix0aGlzKS5jYWxsKHRoaXMsdCk7cmV0dXJuIG4uc3R5bGUuYmFja2dyb3VuZENvbG9yPXQuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpfHwiIixufX0se2tleToic2VsZWN0SXRlbSIsdmFsdWU6ZnVuY3Rpb24odCxuKXthKGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSwic2VsZWN0SXRlbSIsdGhpcykuY2FsbCh0aGlzLHQsbik7dmFyIHI9dGhpcy5sYWJlbC5xdWVyeVNlbGVjdG9yKCIucWwtY29sb3ItbGFiZWwiKSxvPXQ/dC5nZXRBdHRyaWJ1dGUoImRhdGEtdmFsdWUiKXx8IiI6IiI7ciYmKCJsaW5lIj09PXIudGFnTmFtZT9yLnN0eWxlLnN0cm9rZT1vOnIuc3R5bGUuZmlsbD1vKX19XSksZX0odS5kZWZhdWx0KTtlLmRlZmF1bHQ9Y30sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gbyh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWV8fCJvYmplY3QiIT10eXBlb2YgZSYmImZ1bmN0aW9uIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIGkodCxlKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIHI9ZVtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIua2V5LHIpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLHIpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLHImJnQoZSxyKSxlfX0oKSxhPWZ1bmN0aW9uIHQoZSxuLHIpe251bGw9PT1lJiYoZT1GdW5jdGlvbi5wcm90b3R5cGUpO3ZhciBvPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxuKTtpZih2b2lkIDA9PT1vKXt2YXIgaT1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7cmV0dXJuIG51bGw9PT1pP3ZvaWQgMDp0KGksbixyKX1pZigidmFsdWUiaW4gbylyZXR1cm4gby52YWx1ZTt2YXIgbD1vLmdldDtpZih2b2lkIDAhPT1sKXJldHVybiBsLmNhbGwocil9LHM9bigxNiksdT1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19KHMpLGM9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0LG4pe3IodGhpcyxlKTt2YXIgaT1vKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx0KSk7cmV0dXJuIGkuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoInFsLWljb24tcGlja2VyIiksW10uZm9yRWFjaC5jYWxsKGkuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoIi5xbC1waWNrZXItaXRlbSIpLGZ1bmN0aW9uKHQpe3QuaW5uZXJIVE1MPW5bdC5nZXRBdHRyaWJ1dGUoImRhdGEtdmFsdWUiKXx8IiJdfSksaS5kZWZhdWx0SXRlbT1pLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCIucWwtc2VsZWN0ZWQiKSxpLnNlbGVjdEl0ZW0oaS5kZWZhdWx0SXRlbSksaX1yZXR1cm4gaShlLHQpLGwoZSxbe2tleToic2VsZWN0SXRlbSIsdmFsdWU6ZnVuY3Rpb24odCxuKXthKGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSwic2VsZWN0SXRlbSIsdGhpcykuY2FsbCh0aGlzLHQsbiksdD10fHx0aGlzLmRlZmF1bHRJdGVtLHRoaXMubGFiZWwuaW5uZXJIVE1MPXQuaW5uZXJIVE1MfX1dKSxlfSh1LmRlZmF1bHQpO2UuZGVmYXVsdD1jfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciByPWVbbl07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsInZhbHVlImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLmtleSxyKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxyJiZ0KGUsciksZX19KCksaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSxuKXt2YXIgbz10aGlzO3IodGhpcyx0KSx0aGlzLnF1aWxsPWUsdGhpcy5ib3VuZHNDb250YWluZXI9bnx8ZG9jdW1lbnQuYm9keSx0aGlzLnJvb3Q9ZS5hZGRDb250YWluZXIoInFsLXRvb2x0aXAiKSx0aGlzLnJvb3QuaW5uZXJIVE1MPXRoaXMuY29uc3RydWN0b3IuVEVNUExBVEUsdGhpcy5xdWlsbC5yb290PT09dGhpcy5xdWlsbC5zY3JvbGxpbmdDb250YWluZXImJnRoaXMucXVpbGwucm9vdC5hZGRFdmVudExpc3RlbmVyKCJzY3JvbGwiLGZ1bmN0aW9uKCl7by5yb290LnN0eWxlLm1hcmdpblRvcD0tMSpvLnF1aWxsLnJvb3Quc2Nyb2xsVG9wKyJweCJ9KSx0aGlzLmhpZGUoKX1yZXR1cm4gbyh0LFt7a2V5OiJoaWRlIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMucm9vdC5jbGFzc0xpc3QuYWRkKCJxbC1oaWRkZW4iKX19LHtrZXk6InBvc2l0aW9uIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LmxlZnQrdC53aWR0aC8yLXRoaXMucm9vdC5vZmZzZXRXaWR0aC8yLG49dC5ib3R0b20rdGhpcy5xdWlsbC5yb290LnNjcm9sbFRvcDt0aGlzLnJvb3Quc3R5bGUubGVmdD1lKyJweCIsdGhpcy5yb290LnN0eWxlLnRvcD1uKyJweCIsdGhpcy5yb290LmNsYXNzTGlzdC5yZW1vdmUoInFsLWZsaXAiKTt2YXIgcj10aGlzLmJvdW5kc0NvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxvPXRoaXMucm9vdC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxpPTA7aWYoby5yaWdodD5yLnJpZ2h0JiYoaT1yLnJpZ2h0LW8ucmlnaHQsdGhpcy5yb290LnN0eWxlLmxlZnQ9ZStpKyJweCIpLG8ubGVmdDxyLmxlZnQmJihpPXIubGVmdC1vLmxlZnQsdGhpcy5yb290LnN0eWxlLmxlZnQ9ZStpKyJweCIpLG8uYm90dG9tPnIuYm90dG9tKXt2YXIgbD1vLmJvdHRvbS1vLnRvcCxhPXQuYm90dG9tLXQudG9wK2w7dGhpcy5yb290LnN0eWxlLnRvcD1uLWErInB4Iix0aGlzLnJvb3QuY2xhc3NMaXN0LmFkZCgicWwtZmxpcCIpfXJldHVybiBpfX0se2tleToic2hvdyIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnJvb3QuY2xhc3NMaXN0LnJlbW92ZSgicWwtZWRpdGluZyIpLHRoaXMucm9vdC5jbGFzc0xpc3QucmVtb3ZlKCJxbC1oaWRkZW4iKX19XSksdH0oKTtlLmRlZmF1bHQ9aX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiBvKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gaSh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWV8fCJvYmplY3QiIT10eXBlb2YgZSYmImZ1bmN0aW9uIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIGwodCxlKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfWZ1bmN0aW9uIGEodCl7dmFyIGU9dC5tYXRjaCgvXig/OihodHRwcz8pOlwvXC8pPyg/Oig/Ond3d3xtKVwuKT95b3V0dWJlXC5jb21cL3dhdGNoLip2PShbYS16QS1aMC05Xy1dKykvKXx8dC5tYXRjaCgvXig/OihodHRwcz8pOlwvXC8pPyg/Oig/Ond3d3xtKVwuKT95b3V0dVwuYmVcLyhbYS16QS1aMC05Xy1dKykvKTtyZXR1cm4gZT8oZVsxXXx8Imh0dHBzIikrIjovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC8iK2VbMl0rIj9zaG93aW5mbz0wIjooZT10Lm1hdGNoKC9eKD86KGh0dHBzPyk6XC9cLyk/KD86d3d3XC4pP3ZpbWVvXC5jb21cLyhcZCspLykpPyhlWzFdfHwiaHR0cHMiKSsiOi8vcGxheWVyLnZpbWVvLmNvbS92aWRlby8iK2VbMl0rIi8iOnR9ZnVuY3Rpb24gcyh0LGUpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdJiZhcmd1bWVudHNbMl07ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciByPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpO2U9PT1uP3Iuc2V0QXR0cmlidXRlKCJzZWxlY3RlZCIsInNlbGVjdGVkIik6ci5zZXRBdHRyaWJ1dGUoInZhbHVlIixlKSx0LmFwcGVuZENoaWxkKHIpfSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLGUuZGVmYXVsdD1lLkJhc2VUb29sdGlwPXZvaWQgMDt2YXIgdT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIHI9ZVtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIua2V5LHIpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLHIpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLHImJnQoZSxyKSxlfX0oKSxjPWZ1bmN0aW9uIHQoZSxuLHIpe251bGw9PT1lJiYoZT1GdW5jdGlvbi5wcm90b3R5cGUpO3ZhciBvPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxuKTtpZih2b2lkIDA9PT1vKXt2YXIgaT1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7cmV0dXJuIG51bGw9PT1pP3ZvaWQgMDp0KGksbixyKX1pZigidmFsdWUiaW4gbylyZXR1cm4gby52YWx1ZTt2YXIgbD1vLmdldDtpZih2b2lkIDAhPT1sKXJldHVybiBsLmNhbGwocil9LGY9bigyKSxoPXIoZikscD1uKDQpLGQ9cihwKSx5PW4oOSksdj1yKHkpLGI9bigzOCksZz1yKGIpLG09bigzMiksXz1yKG0pLE89big0MSksdz1yKE8pLHg9big0Miksaz1yKHgpLEU9bigxNiksTj1yKEUpLGo9big0MyksQT1yKGopLHE9WyExLCJjZW50ZXIiLCJyaWdodCIsImp1c3RpZnkiXSxUPVsiIzAwMDAwMCIsIiNlNjAwMDAiLCIjZmY5OTAwIiwiI2ZmZmYwMCIsIiMwMDhhMDAiLCIjMDA2NmNjIiwiIzk5MzNmZiIsIiNmZmZmZmYiLCIjZmFjY2NjIiwiI2ZmZWJjYyIsIiNmZmZmY2MiLCIjY2NlOGNjIiwiI2NjZTBmNSIsIiNlYmQ2ZmYiLCIjYmJiYmJiIiwiI2YwNjY2NiIsIiNmZmMyNjYiLCIjZmZmZjY2IiwiIzY2Yjk2NiIsIiM2NmEzZTAiLCIjYzI4NWZmIiwiIzg4ODg4OCIsIiNhMTAwMDAiLCIjYjI2YjAwIiwiI2IyYjIwMCIsIiMwMDYxMDAiLCIjMDA0N2IyIiwiIzZiMjRiMiIsIiM0NDQ0NDQiLCIjNWMwMDAwIiwiIzY2M2QwMCIsIiM2NjY2MDAiLCIjMDAzNzAwIiwiIzAwMjk2NiIsIiMzZDE0NjYiXSxQPVshMSwic2VyaWYiLCJtb25vc3BhY2UiXSxTPVsiMSIsIjIiLCIzIiwhMV0sQz1bInNtYWxsIiwhMSwibGFyZ2UiLCJodWdlIl0sTD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQsbil7byh0aGlzLGUpO3ZhciByPWkodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHQsbikpLGw9ZnVuY3Rpb24gZShuKXtpZighZG9jdW1lbnQuYm9keS5jb250YWlucyh0LnJvb3QpKXJldHVybiBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoImNsaWNrIixlKTtudWxsPT1yLnRvb2x0aXB8fHIudG9vbHRpcC5yb290LmNvbnRhaW5zKG4udGFyZ2V0KXx8ZG9jdW1lbnQuYWN0aXZlRWxlbWVudD09PXIudG9vbHRpcC50ZXh0Ym94fHxyLnF1aWxsLmhhc0ZvY3VzKCl8fHIudG9vbHRpcC5oaWRlKCksbnVsbCE9ci5waWNrZXJzJiZyLnBpY2tlcnMuZm9yRWFjaChmdW5jdGlvbih0KXt0LmNvbnRhaW5lci5jb250YWlucyhuLnRhcmdldCl8fHQuY2xvc2UoKX0pfTtyZXR1cm4gdC5lbWl0dGVyLmxpc3RlbkRPTSgiY2xpY2siLGRvY3VtZW50LmJvZHksbCkscn1yZXR1cm4gbChlLHQpLHUoZSxbe2tleToiYWRkTW9kdWxlIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgbj1jKGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSwiYWRkTW9kdWxlIix0aGlzKS5jYWxsKHRoaXMsdCk7cmV0dXJuInRvb2xiYXIiPT09dCYmdGhpcy5leHRlbmRUb29sYmFyKG4pLG59fSx7a2V5OiJidWlsZEJ1dHRvbnMiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dC5mb3JFYWNoKGZ1bmN0aW9uKHQpeyh0LmdldEF0dHJpYnV0ZSgiY2xhc3MiKXx8IiIpLnNwbGl0KC9ccysvKS5mb3JFYWNoKGZ1bmN0aW9uKG4pe2lmKG4uc3RhcnRzV2l0aCgicWwtIikmJihuPW4uc2xpY2UoInFsLSIubGVuZ3RoKSxudWxsIT1lW25dKSlpZigiZGlyZWN0aW9uIj09PW4pdC5pbm5lckhUTUw9ZVtuXVsiIl0rZVtuXS5ydGw7ZWxzZSBpZigic3RyaW5nIj09dHlwZW9mIGVbbl0pdC5pbm5lckhUTUw9ZVtuXTtlbHNle3ZhciByPXQudmFsdWV8fCIiO251bGwhPXImJmVbbl1bcl0mJih0LmlubmVySFRNTD1lW25dW3JdKX19KX0pfX0se2tleToiYnVpbGRQaWNrZXJzIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7dGhpcy5waWNrZXJzPXQubWFwKGZ1bmN0aW9uKHQpe2lmKHQuY2xhc3NMaXN0LmNvbnRhaW5zKCJxbC1hbGlnbiIpKXJldHVybiBudWxsPT10LnF1ZXJ5U2VsZWN0b3IoIm9wdGlvbiIpJiZzKHQscSksbmV3IGsuZGVmYXVsdCh0LGUuYWxpZ24pO2lmKHQuY2xhc3NMaXN0LmNvbnRhaW5zKCJxbC1iYWNrZ3JvdW5kIil8fHQuY2xhc3NMaXN0LmNvbnRhaW5zKCJxbC1jb2xvciIpKXt2YXIgbj10LmNsYXNzTGlzdC5jb250YWlucygicWwtYmFja2dyb3VuZCIpPyJiYWNrZ3JvdW5kIjoiY29sb3IiO3JldHVybiBudWxsPT10LnF1ZXJ5U2VsZWN0b3IoIm9wdGlvbiIpJiZzKHQsVCwiYmFja2dyb3VuZCI9PT1uPyIjZmZmZmZmIjoiIzAwMDAwMCIpLG5ldyB3LmRlZmF1bHQodCxlW25dKX1yZXR1cm4gbnVsbD09dC5xdWVyeVNlbGVjdG9yKCJvcHRpb24iKSYmKHQuY2xhc3NMaXN0LmNvbnRhaW5zKCJxbC1mb250Iik/cyh0LFApOnQuY2xhc3NMaXN0LmNvbnRhaW5zKCJxbC1oZWFkZXIiKT9zKHQsUyk6dC5jbGFzc0xpc3QuY29udGFpbnMoInFsLXNpemUiKSYmcyh0LEMpKSxuZXcgTi5kZWZhdWx0KHQpfSk7dmFyIHI9ZnVuY3Rpb24oKXtuLnBpY2tlcnMuZm9yRWFjaChmdW5jdGlvbih0KXt0LnVwZGF0ZSgpfSl9O3RoaXMucXVpbGwub24odi5kZWZhdWx0LmV2ZW50cy5FRElUT1JfQ0hBTkdFLHIpfX1dKSxlfShfLmRlZmF1bHQpO0wuREVGQVVMVFM9KDAsaC5kZWZhdWx0KSghMCx7fSxfLmRlZmF1bHQuREVGQVVMVFMse21vZHVsZXM6e3Rvb2xiYXI6e2hhbmRsZXJzOntmb3JtdWxhOmZ1bmN0aW9uKCl7dGhpcy5xdWlsbC50aGVtZS50b29sdGlwLmVkaXQoImZvcm11bGEiKX0saW1hZ2U6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9dGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcigiaW5wdXQucWwtaW1hZ2VbdHlwZT1maWxlXSIpO251bGw9PWUmJihlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0IiksZS5zZXRBdHRyaWJ1dGUoInR5cGUiLCJmaWxlIiksZS5zZXRBdHRyaWJ1dGUoImFjY2VwdCIsImltYWdlL3BuZywgaW1hZ2UvZ2lmLCBpbWFnZS9qcGVnLCBpbWFnZS9ibXAsIGltYWdlL3gtaWNvbiIpLGUuY2xhc3NMaXN0LmFkZCgicWwtaW1hZ2UiKSxlLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsZnVuY3Rpb24oKXtpZihudWxsIT1lLmZpbGVzJiZudWxsIT1lLmZpbGVzWzBdKXt2YXIgbj1uZXcgRmlsZVJlYWRlcjtuLm9ubG9hZD1mdW5jdGlvbihuKXt2YXIgcj10LnF1aWxsLmdldFNlbGVjdGlvbighMCk7dC5xdWlsbC51cGRhdGVDb250ZW50cygobmV3IGQuZGVmYXVsdCkucmV0YWluKHIuaW5kZXgpLmRlbGV0ZShyLmxlbmd0aCkuaW5zZXJ0KHtpbWFnZTpuLnRhcmdldC5yZXN1bHR9KSx2LmRlZmF1bHQuc291cmNlcy5VU0VSKSx0LnF1aWxsLnNldFNlbGVjdGlvbihyLmluZGV4KzEsdi5kZWZhdWx0LnNvdXJjZXMuU0lMRU5UKSxlLnZhbHVlPSIifSxuLnJlYWRBc0RhdGFVUkwoZS5maWxlc1swXSl9fSksdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQoZSkpLGUuY2xpY2soKX0sdmlkZW86ZnVuY3Rpb24oKXt0aGlzLnF1aWxsLnRoZW1lLnRvb2x0aXAuZWRpdCgidmlkZW8iKX19fX19KTt2YXIgTT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQsbil7byh0aGlzLGUpO3ZhciByPWkodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHQsbikpO3JldHVybiByLnRleHRib3g9ci5yb290LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9InRleHQiXScpLHIubGlzdGVuKCkscn1yZXR1cm4gbChlLHQpLHUoZSxbe2tleToibGlzdGVuIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy50ZXh0Ym94LmFkZEV2ZW50TGlzdGVuZXIoImtleWRvd24iLGZ1bmN0aW9uKGUpe2cuZGVmYXVsdC5tYXRjaChlLCJlbnRlciIpPyh0LnNhdmUoKSxlLnByZXZlbnREZWZhdWx0KCkpOmcuZGVmYXVsdC5tYXRjaChlLCJlc2NhcGUiKSYmKHQuY2FuY2VsKCksZS5wcmV2ZW50RGVmYXVsdCgpKX0pfX0se2tleToiY2FuY2VsIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuaGlkZSgpfX0se2tleToiZWRpdCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06ImxpbmsiLGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOm51bGw7dGhpcy5yb290LmNsYXNzTGlzdC5yZW1vdmUoInFsLWhpZGRlbiIpLHRoaXMucm9vdC5jbGFzc0xpc3QuYWRkKCJxbC1lZGl0aW5nIiksbnVsbCE9ZT90aGlzLnRleHRib3gudmFsdWU9ZTp0IT09dGhpcy5yb290LmdldEF0dHJpYnV0ZSgiZGF0YS1tb2RlIikmJih0aGlzLnRleHRib3gudmFsdWU9IiIpLHRoaXMucG9zaXRpb24odGhpcy5xdWlsbC5nZXRCb3VuZHModGhpcy5xdWlsbC5zZWxlY3Rpb24uc2F2ZWRSYW5nZSkpLHRoaXMudGV4dGJveC5zZWxlY3QoKSx0aGlzLnRleHRib3guc2V0QXR0cmlidXRlKCJwbGFjZWhvbGRlciIsdGhpcy50ZXh0Ym94LmdldEF0dHJpYnV0ZSgiZGF0YS0iK3QpfHwiIiksdGhpcy5yb290LnNldEF0dHJpYnV0ZSgiZGF0YS1tb2RlIix0KX19LHtrZXk6InJlc3RvcmVGb2N1cyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnF1aWxsLnNjcm9sbGluZ0NvbnRhaW5lci5zY3JvbGxUb3A7dGhpcy5xdWlsbC5mb2N1cygpLHRoaXMucXVpbGwuc2Nyb2xsaW5nQ29udGFpbmVyLnNjcm9sbFRvcD10fX0se2tleToic2F2ZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnRleHRib3gudmFsdWU7c3dpdGNoKHRoaXMucm9vdC5nZXRBdHRyaWJ1dGUoImRhdGEtbW9kZSIpKXtjYXNlImxpbmsiOnZhciBlPXRoaXMucXVpbGwucm9vdC5zY3JvbGxUb3A7dGhpcy5saW5rUmFuZ2U/KHRoaXMucXVpbGwuZm9ybWF0VGV4dCh0aGlzLmxpbmtSYW5nZSwibGluayIsdCx2LmRlZmF1bHQuc291cmNlcy5VU0VSKSxkZWxldGUgdGhpcy5saW5rUmFuZ2UpOih0aGlzLnJlc3RvcmVGb2N1cygpLHRoaXMucXVpbGwuZm9ybWF0KCJsaW5rIix0LHYuZGVmYXVsdC5zb3VyY2VzLlVTRVIpKSx0aGlzLnF1aWxsLnJvb3Quc2Nyb2xsVG9wPWU7YnJlYWs7Y2FzZSJ2aWRlbyI6dD1hKHQpO2Nhc2UiZm9ybXVsYSI6aWYoIXQpYnJlYWs7dmFyIG49dGhpcy5xdWlsbC5nZXRTZWxlY3Rpb24oITApO2lmKG51bGwhPW4pe3ZhciByPW4uaW5kZXgrbi5sZW5ndGg7dGhpcy5xdWlsbC5pbnNlcnRFbWJlZChyLHRoaXMucm9vdC5nZXRBdHRyaWJ1dGUoImRhdGEtbW9kZSIpLHQsdi5kZWZhdWx0LnNvdXJjZXMuVVNFUiksImZvcm11bGEiPT09dGhpcy5yb290LmdldEF0dHJpYnV0ZSgiZGF0YS1tb2RlIikmJnRoaXMucXVpbGwuaW5zZXJ0VGV4dChyKzEsIiAiLHYuZGVmYXVsdC5zb3VyY2VzLlVTRVIpLHRoaXMucXVpbGwuc2V0U2VsZWN0aW9uKHIrMix2LmRlZmF1bHQuc291cmNlcy5VU0VSKX19dGhpcy50ZXh0Ym94LnZhbHVlPSIiLHRoaXMuaGlkZSgpfX1dKSxlfShBLmRlZmF1bHQpO2UuQmFzZVRvb2x0aXA9TSxlLmRlZmF1bHQ9TH0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89big0NiksaT1yKG8pLGw9bigzMyksYT1uKDM1KSxzPW4oNjIpLHU9big2MyksYz1yKHUpLGY9big2NCksaD1yKGYpLHA9big2NSksZD1yKHApLHk9bigzNCksdj1uKDI1KSxiPW4oMzYpLGc9bigzNyksbT1uKDM5KSxfPXIobSksTz1uKDY2KSx3PXIoTykseD1uKDE1KSxrPXIoeCksRT1uKDY3KSxOPXIoRSksaj1uKDY4KSxBPXIoaikscT1uKDY5KSxUPXIocSksUD1uKDcwKSxTPXIoUCksQz1uKDcxKSxMPXIoQyksTT1uKDEzKSxSPXIoTSksST1uKDcyKSxCPXIoSSksRD1uKDczKSxVPXIoRCksRj1uKDc0KSxIPXIoRiksSz1uKDI2KSx6PXIoSyksWj1uKDE2KSxWPXIoWiksVz1uKDQxKSxHPXIoVyksWT1uKDQyKSxYPXIoWSksJD1uKDQzKSxRPXIoJCksSj1uKDEwNyksdHQ9cihKKSxldD1uKDEwOCksbnQ9cihldCk7aS5kZWZhdWx0LnJlZ2lzdGVyKHsiYXR0cmlidXRvcnMvYXR0cmlidXRlL2RpcmVjdGlvbiI6YS5EaXJlY3Rpb25BdHRyaWJ1dGUsImF0dHJpYnV0b3JzL2NsYXNzL2FsaWduIjpsLkFsaWduQ2xhc3MsImF0dHJpYnV0b3JzL2NsYXNzL2JhY2tncm91bmQiOnkuQmFja2dyb3VuZENsYXNzLCJhdHRyaWJ1dG9ycy9jbGFzcy9jb2xvciI6di5Db2xvckNsYXNzLCJhdHRyaWJ1dG9ycy9jbGFzcy9kaXJlY3Rpb24iOmEuRGlyZWN0aW9uQ2xhc3MsImF0dHJpYnV0b3JzL2NsYXNzL2ZvbnQiOmIuRm9udENsYXNzLCJhdHRyaWJ1dG9ycy9jbGFzcy9zaXplIjpnLlNpemVDbGFzcywiYXR0cmlidXRvcnMvc3R5bGUvYWxpZ24iOmwuQWxpZ25TdHlsZSwiYXR0cmlidXRvcnMvc3R5bGUvYmFja2dyb3VuZCI6eS5CYWNrZ3JvdW5kU3R5bGUsImF0dHJpYnV0b3JzL3N0eWxlL2NvbG9yIjp2LkNvbG9yU3R5bGUsImF0dHJpYnV0b3JzL3N0eWxlL2RpcmVjdGlvbiI6YS5EaXJlY3Rpb25TdHlsZSwiYXR0cmlidXRvcnMvc3R5bGUvZm9udCI6Yi5Gb250U3R5bGUsImF0dHJpYnV0b3JzL3N0eWxlL3NpemUiOmcuU2l6ZVN0eWxlfSwhMCksaS5kZWZhdWx0LnJlZ2lzdGVyKHsiZm9ybWF0cy9hbGlnbiI6bC5BbGlnbkNsYXNzLCJmb3JtYXRzL2RpcmVjdGlvbiI6YS5EaXJlY3Rpb25DbGFzcywiZm9ybWF0cy9pbmRlbnQiOnMuSW5kZW50Q2xhc3MsImZvcm1hdHMvYmFja2dyb3VuZCI6eS5CYWNrZ3JvdW5kU3R5bGUsImZvcm1hdHMvY29sb3IiOnYuQ29sb3JTdHlsZSwiZm9ybWF0cy9mb250IjpiLkZvbnRDbGFzcywiZm9ybWF0cy9zaXplIjpnLlNpemVDbGFzcywiZm9ybWF0cy9ibG9ja3F1b3RlIjpjLmRlZmF1bHQsImZvcm1hdHMvY29kZS1ibG9jayI6Ui5kZWZhdWx0LCJmb3JtYXRzL2hlYWRlciI6aC5kZWZhdWx0LCJmb3JtYXRzL2xpc3QiOmQuZGVmYXVsdCwiZm9ybWF0cy9ib2xkIjpfLmRlZmF1bHQsImZvcm1hdHMvY29kZSI6TS5Db2RlLCJmb3JtYXRzL2l0YWxpYyI6dy5kZWZhdWx0LCJmb3JtYXRzL2xpbmsiOmsuZGVmYXVsdCwiZm9ybWF0cy9zY3JpcHQiOk4uZGVmYXVsdCwiZm9ybWF0cy9zdHJpa2UiOkEuZGVmYXVsdCwiZm9ybWF0cy91bmRlcmxpbmUiOlQuZGVmYXVsdCwiZm9ybWF0cy9pbWFnZSI6Uy5kZWZhdWx0LCJmb3JtYXRzL3ZpZGVvIjpMLmRlZmF1bHQsImZvcm1hdHMvbGlzdC9pdGVtIjpwLkxpc3RJdGVtLCJtb2R1bGVzL2Zvcm11bGEiOkIuZGVmYXVsdCwibW9kdWxlcy9zeW50YXgiOlUuZGVmYXVsdCwibW9kdWxlcy90b29sYmFyIjpILmRlZmF1bHQsInRoZW1lcy9idWJibGUiOnR0LmRlZmF1bHQsInRoZW1lcy9zbm93IjpudC5kZWZhdWx0LCJ1aS9pY29ucyI6ei5kZWZhdWx0LCJ1aS9waWNrZXIiOlYuZGVmYXVsdCwidWkvaWNvbi1waWNrZXIiOlguZGVmYXVsdCwidWkvY29sb3ItcGlja2VyIjpHLmRlZmF1bHQsInVpL3Rvb2x0aXAiOlEuZGVmYXVsdH0sITApLGUuZGVmYXVsdD1pLmRlZmF1bHR9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPW4oMCksaT1yKG8pLGw9big2KSxhPXIobCkscz1uKDMpLHU9cihzKSxjPW4oMTQpLGY9cihjKSxoPW4oMjMpLHA9cihoKSxkPW4oMzEpLHk9cihkKSx2PW4oMjQpLGI9cih2KSxnPW4oNSksbT1yKGcpLF89big1OSksTz1yKF8pLHc9big4KSx4PXIodyksaz1uKDYwKSxFPXIoayksTj1uKDYxKSxqPXIoTiksQT1uKDM4KSxxPXIoQSk7YS5kZWZhdWx0LnJlZ2lzdGVyKHsiYmxvdHMvYmxvY2siOnUuZGVmYXVsdCwiYmxvdHMvYmxvY2svZW1iZWQiOnMuQmxvY2tFbWJlZCwiYmxvdHMvYnJlYWsiOmYuZGVmYXVsdCwiYmxvdHMvY29udGFpbmVyIjpwLmRlZmF1bHQsImJsb3RzL2N1cnNvciI6eS5kZWZhdWx0LCJibG90cy9lbWJlZCI6Yi5kZWZhdWx0LCJibG90cy9pbmxpbmUiOm0uZGVmYXVsdCwiYmxvdHMvc2Nyb2xsIjpPLmRlZmF1bHQsImJsb3RzL3RleHQiOnguZGVmYXVsdCwibW9kdWxlcy9jbGlwYm9hcmQiOkUuZGVmYXVsdCwibW9kdWxlcy9oaXN0b3J5IjpqLmRlZmF1bHQsIm1vZHVsZXMva2V5Ym9hcmQiOnEuZGVmYXVsdH0pLGkuZGVmYXVsdC5yZWdpc3Rlcih1LmRlZmF1bHQsZi5kZWZhdWx0LHkuZGVmYXVsdCxtLmRlZmF1bHQsTy5kZWZhdWx0LHguZGVmYXVsdCksZS5kZWZhdWx0PWEuZGVmYXVsdH0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dGhpcy5oZWFkPXRoaXMudGFpbD12b2lkIDAsdGhpcy5sZW5ndGg9MH1yZXR1cm4gdC5wcm90b3R5cGUuYXBwZW5kPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXRbZV09YXJndW1lbnRzW2VdO3RoaXMuaW5zZXJ0QmVmb3JlKHRbMF0sdm9pZCAwKSx0Lmxlbmd0aD4xJiZ0aGlzLmFwcGVuZC5hcHBseSh0aGlzLHQuc2xpY2UoMSkpfSx0LnByb3RvdHlwZS5jb250YWlucz1mdW5jdGlvbih0KXtmb3IodmFyIGUsbj10aGlzLml0ZXJhdG9yKCk7ZT1uKCk7KWlmKGU9PT10KXJldHVybiEwO3JldHVybiExfSx0LnByb3RvdHlwZS5pbnNlcnRCZWZvcmU9ZnVuY3Rpb24odCxlKXt0Lm5leHQ9ZSxudWxsIT1lPyh0LnByZXY9ZS5wcmV2LG51bGwhPWUucHJldiYmKGUucHJldi5uZXh0PXQpLGUucHJldj10LGU9PT10aGlzLmhlYWQmJih0aGlzLmhlYWQ9dCkpOm51bGwhPXRoaXMudGFpbD8odGhpcy50YWlsLm5leHQ9dCx0LnByZXY9dGhpcy50YWlsLHRoaXMudGFpbD10KToodC5wcmV2PXZvaWQgMCx0aGlzLmhlYWQ9dGhpcy50YWlsPXQpLHRoaXMubGVuZ3RoKz0xfSx0LnByb3RvdHlwZS5vZmZzZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsbj10aGlzLmhlYWQ7bnVsbCE9bjspe2lmKG49PT10KXJldHVybiBlO2UrPW4ubGVuZ3RoKCksbj1uLm5leHR9cmV0dXJuLTF9LHQucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbih0KXt0aGlzLmNvbnRhaW5zKHQpJiYobnVsbCE9dC5wcmV2JiYodC5wcmV2Lm5leHQ9dC5uZXh0KSxudWxsIT10Lm5leHQmJih0Lm5leHQucHJldj10LnByZXYpLHQ9PT10aGlzLmhlYWQmJih0aGlzLmhlYWQ9dC5uZXh0KSx0PT09dGhpcy50YWlsJiYodGhpcy50YWlsPXQucHJldiksdGhpcy5sZW5ndGgtPTEpfSx0LnByb3RvdHlwZS5pdGVyYXRvcj1mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9dGhpcy5oZWFkKSxmdW5jdGlvbigpe3ZhciBlPXQ7cmV0dXJuIG51bGwhPXQmJih0PXQubmV4dCksZX19LHQucHJvdG90eXBlLmZpbmQ9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT0hMSk7Zm9yKHZhciBuLHI9dGhpcy5pdGVyYXRvcigpO249cigpOyl7dmFyIG89bi5sZW5ndGgoKTtpZih0PG98fGUmJnQ9PT1vJiYobnVsbD09bi5uZXh0fHwwIT09bi5uZXh0Lmxlbmd0aCgpKSlyZXR1cm5bbix0XTt0LT1vfXJldHVybltudWxsLDBdfSx0LnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxuPXRoaXMuaXRlcmF0b3IoKTtlPW4oKTspdChlKX0sdC5wcm90b3R5cGUuZm9yRWFjaEF0PWZ1bmN0aW9uKHQsZSxuKXtpZighKGU8PTApKWZvcih2YXIgcixvPXRoaXMuZmluZCh0KSxpPW9bMF0sbD1vWzFdLGE9dC1sLHM9dGhpcy5pdGVyYXRvcihpKTsocj1zKCkpJiZhPHQrZTspe3ZhciB1PXIubGVuZ3RoKCk7dD5hP24ocix0LWEsTWF0aC5taW4oZSxhK3UtdCkpOm4ociwwLE1hdGgubWluKHUsdCtlLWEpKSxhKz11fX0sdC5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnJlZHVjZShmdW5jdGlvbihlLG4pe3JldHVybiBlLnB1c2godChuKSksZX0sW10pfSx0LnByb3RvdHlwZS5yZWR1Y2U9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG4scj10aGlzLml0ZXJhdG9yKCk7bj1yKCk7KWU9dChlLG4pO3JldHVybiBlfSx0fSgpO2UuZGVmYXVsdD1yfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciByPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciB0PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgbiBpbiBlKWUuaGFzT3duUHJvcGVydHkobikmJih0W25dPWVbbl0pfTtyZXR1cm4gZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfXQoZSxuKSxlLnByb3RvdHlwZT1udWxsPT09bj9PYmplY3QuY3JlYXRlKG4pOihyLnByb3RvdHlwZT1uLnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1uKDE3KSxpPW4oMSksbD17YXR0cmlidXRlczohMCxjaGFyYWN0ZXJEYXRhOiEwLGNoYXJhY3RlckRhdGFPbGRWYWx1ZTohMCxjaGlsZExpc3Q6ITAsc3VidHJlZTohMH0sYT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBuPXQuY2FsbCh0aGlzLGUpfHx0aGlzO3JldHVybiBuLnBhcmVudD1udWxsLG4ub2JzZXJ2ZXI9bmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24odCl7bi51cGRhdGUodCl9KSxuLm9ic2VydmVyLm9ic2VydmUobi5kb21Ob2RlLGwpLG4uc2Nyb2xsPW4sbn1yZXR1cm4gcihlLHQpLGUucHJvdG90eXBlLmRldGFjaD1mdW5jdGlvbigpe3QucHJvdG90eXBlLmRldGFjaC5jYWxsKHRoaXMpLHRoaXMub2JzZXJ2ZXIuZGlzY29ubmVjdCgpfSxlLnByb3RvdHlwZS5kZWxldGVBdD1mdW5jdGlvbihlLG4pe3RoaXMudXBkYXRlKCksMD09PWUmJm49PT10aGlzLmxlbmd0aCgpP3RoaXMuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbih0KXt0LnJlbW92ZSgpfSk6dC5wcm90b3R5cGUuZGVsZXRlQXQuY2FsbCh0aGlzLGUsbil9LGUucHJvdG90eXBlLmZvcm1hdEF0PWZ1bmN0aW9uKGUsbixyLG8pe3RoaXMudXBkYXRlKCksdC5wcm90b3R5cGUuZm9ybWF0QXQuY2FsbCh0aGlzLGUsbixyLG8pfSxlLnByb3RvdHlwZS5pbnNlcnRBdD1mdW5jdGlvbihlLG4scil7dGhpcy51cGRhdGUoKSx0LnByb3RvdHlwZS5pbnNlcnRBdC5jYWxsKHRoaXMsZSxuLHIpfSxlLnByb3RvdHlwZS5vcHRpbWl6ZT1mdW5jdGlvbihlLG4pe3ZhciByPXRoaXM7dm9pZCAwPT09ZSYmKGU9W10pLHZvaWQgMD09PW4mJihuPXt9KSx0LnByb3RvdHlwZS5vcHRpbWl6ZS5jYWxsKHRoaXMsbik7Zm9yKHZhciBsPVtdLnNsaWNlLmNhbGwodGhpcy5vYnNlcnZlci50YWtlUmVjb3JkcygpKTtsLmxlbmd0aD4wOyllLnB1c2gobC5wb3AoKSk7Zm9yKHZhciBhPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9ITApLG51bGwhPXQmJnQhPT1yJiZudWxsIT10LmRvbU5vZGUucGFyZW50Tm9kZSYmKG51bGw9PXQuZG9tTm9kZVtpLkRBVEFfS0VZXS5tdXRhdGlvbnMmJih0LmRvbU5vZGVbaS5EQVRBX0tFWV0ubXV0YXRpb25zPVtdKSxlJiZhKHQucGFyZW50KSl9LHM9ZnVuY3Rpb24odCl7bnVsbCE9dC5kb21Ob2RlW2kuREFUQV9LRVldJiZudWxsIT10LmRvbU5vZGVbaS5EQVRBX0tFWV0ubXV0YXRpb25zJiYodCBpbnN0YW5jZW9mIG8uZGVmYXVsdCYmdC5jaGlsZHJlbi5mb3JFYWNoKHMpLHQub3B0aW1pemUobikpfSx1PWUsYz0wO3UubGVuZ3RoPjA7Yys9MSl7aWYoYz49MTAwKXRocm93IG5ldyBFcnJvcigiW1BhcmNobWVudF0gTWF4aW11bSBvcHRpbWl6ZSBpdGVyYXRpb25zIHJlYWNoZWQiKTtmb3IodS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBlPWkuZmluZCh0LnRhcmdldCwhMCk7bnVsbCE9ZSYmKGUuZG9tTm9kZT09PXQudGFyZ2V0JiYoImNoaWxkTGlzdCI9PT10LnR5cGU/KGEoaS5maW5kKHQucHJldmlvdXNTaWJsaW5nLCExKSksW10uZm9yRWFjaC5jYWxsKHQuYWRkZWROb2RlcyxmdW5jdGlvbih0KXt2YXIgZT1pLmZpbmQodCwhMSk7YShlLCExKSxlIGluc3RhbmNlb2Ygby5kZWZhdWx0JiZlLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24odCl7YSh0LCExKX0pfSkpOiJhdHRyaWJ1dGVzIj09PXQudHlwZSYmYShlLnByZXYpKSxhKGUpKX0pLHRoaXMuY2hpbGRyZW4uZm9yRWFjaChzKSx1PVtdLnNsaWNlLmNhbGwodGhpcy5vYnNlcnZlci50YWtlUmVjb3JkcygpKSxsPXUuc2xpY2UoKTtsLmxlbmd0aD4wOyllLnB1c2gobC5wb3AoKSl9fSxlLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oZSxuKXt2YXIgcj10aGlzO3ZvaWQgMD09PW4mJihuPXt9KSxlPWV8fHRoaXMub2JzZXJ2ZXIudGFrZVJlY29yZHMoKSxlLm1hcChmdW5jdGlvbih0KXt2YXIgZT1pLmZpbmQodC50YXJnZXQsITApO2lmKG51bGwhPWUpcmV0dXJuIG51bGw9PWUuZG9tTm9kZVtpLkRBVEFfS0VZXS5tdXRhdGlvbnM/KGUuZG9tTm9kZVtpLkRBVEFfS0VZXS5tdXRhdGlvbnM9W3RdLGUpOihlLmRvbU5vZGVbaS5EQVRBX0tFWV0ubXV0YXRpb25zLnB1c2godCksbnVsbCl9KS5mb3JFYWNoKGZ1bmN0aW9uKHQpe251bGwhPXQmJnQhPT1yJiZudWxsIT10LmRvbU5vZGVbaS5EQVRBX0tFWV0mJnQudXBkYXRlKHQuZG9tTm9kZVtpLkRBVEFfS0VZXS5tdXRhdGlvbnN8fFtdLG4pfSksbnVsbCE9dGhpcy5kb21Ob2RlW2kuREFUQV9LRVldLm11dGF0aW9ucyYmdC5wcm90b3R5cGUudXBkYXRlLmNhbGwodGhpcyx0aGlzLmRvbU5vZGVbaS5EQVRBX0tFWV0ubXV0YXRpb25zLG4pLHRoaXMub3B0aW1pemUoZSxuKX0sZS5ibG90TmFtZT0ic2Nyb2xsIixlLmRlZmF1bHRDaGlsZD0iYmxvY2siLGUuc2NvcGU9aS5TY29wZS5CTE9DS19CTE9ULGUudGFnTmFtZT0iRElWIixlfShvLmRlZmF1bHQpO2UuZGVmYXVsdD1hfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCxlKXtpZihPYmplY3Qua2V5cyh0KS5sZW5ndGghPT1PYmplY3Qua2V5cyhlKS5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBuIGluIHQpaWYodFtuXSE9PWVbbl0pcmV0dXJuITE7cmV0dXJuITB9dmFyIG89dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIHQ9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShuKSYmKHRbbl09ZVtuXSl9O3JldHVybiBmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLG4pLGUucHJvdG90eXBlPW51bGw9PT1uP09iamVjdC5jcmVhdGUobik6KHIucHJvdG90eXBlPW4ucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBpPW4oMTgpLGw9bigxKSxhPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiBvKGUsdCksZS5mb3JtYXRzPWZ1bmN0aW9uKG4pe2lmKG4udGFnTmFtZSE9PWUudGFnTmFtZSlyZXR1cm4gdC5mb3JtYXRzLmNhbGwodGhpcyxuKX0sZS5wcm90b3R5cGUuZm9ybWF0PWZ1bmN0aW9uKG4scil7dmFyIG89dGhpcztuIT09dGhpcy5zdGF0aWNzLmJsb3ROYW1lfHxyP3QucHJvdG90eXBlLmZvcm1hdC5jYWxsKHRoaXMsbixyKToodGhpcy5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QgaW5zdGFuY2VvZiBpLmRlZmF1bHR8fCh0PXQud3JhcChlLmJsb3ROYW1lLCEwKSksby5hdHRyaWJ1dGVzLmNvcHkodCl9KSx0aGlzLnVud3JhcCgpKX0sZS5wcm90b3R5cGUuZm9ybWF0QXQ9ZnVuY3Rpb24oZSxuLHIsbyl7aWYobnVsbCE9dGhpcy5mb3JtYXRzKClbcl18fGwucXVlcnkocixsLlNjb3BlLkFUVFJJQlVURSkpe3RoaXMuaXNvbGF0ZShlLG4pLmZvcm1hdChyLG8pfWVsc2UgdC5wcm90b3R5cGUuZm9ybWF0QXQuY2FsbCh0aGlzLGUsbixyLG8pfSxlLnByb3RvdHlwZS5vcHRpbWl6ZT1mdW5jdGlvbihuKXt0LnByb3RvdHlwZS5vcHRpbWl6ZS5jYWxsKHRoaXMsbik7dmFyIG89dGhpcy5mb3JtYXRzKCk7aWYoMD09PU9iamVjdC5rZXlzKG8pLmxlbmd0aClyZXR1cm4gdGhpcy51bndyYXAoKTt2YXIgaT10aGlzLm5leHQ7aSBpbnN0YW5jZW9mIGUmJmkucHJldj09PXRoaXMmJnIobyxpLmZvcm1hdHMoKSkmJihpLm1vdmVDaGlsZHJlbih0aGlzKSxpLnJlbW92ZSgpKX0sZS5ibG90TmFtZT0iaW5saW5lIixlLnNjb3BlPWwuU2NvcGUuSU5MSU5FX0JMT1QsZS50YWdOYW1lPSJTUEFOIixlfShpLmRlZmF1bHQpO2UuZGVmYXVsdD1hfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciByPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciB0PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgbiBpbiBlKWUuaGFzT3duUHJvcGVydHkobikmJih0W25dPWVbbl0pfTtyZXR1cm4gZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfXQoZSxuKSxlLnByb3RvdHlwZT1udWxsPT09bj9PYmplY3QuY3JlYXRlKG4pOihyLnByb3RvdHlwZT1uLnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1uKDE4KSxpPW4oMSksbD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gcihlLHQpLGUuZm9ybWF0cz1mdW5jdGlvbihuKXt2YXIgcj1pLnF1ZXJ5KGUuYmxvdE5hbWUpLnRhZ05hbWU7aWYobi50YWdOYW1lIT09cilyZXR1cm4gdC5mb3JtYXRzLmNhbGwodGhpcyxuKX0sZS5wcm90b3R5cGUuZm9ybWF0PWZ1bmN0aW9uKG4scil7bnVsbCE9aS5xdWVyeShuLGkuU2NvcGUuQkxPQ0spJiYobiE9PXRoaXMuc3RhdGljcy5ibG90TmFtZXx8cj90LnByb3RvdHlwZS5mb3JtYXQuY2FsbCh0aGlzLG4scik6dGhpcy5yZXBsYWNlV2l0aChlLmJsb3ROYW1lKSl9LGUucHJvdG90eXBlLmZvcm1hdEF0PWZ1bmN0aW9uKGUsbixyLG8pe251bGwhPWkucXVlcnkocixpLlNjb3BlLkJMT0NLKT90aGlzLmZvcm1hdChyLG8pOnQucHJvdG90eXBlLmZvcm1hdEF0LmNhbGwodGhpcyxlLG4scixvKX0sZS5wcm90b3R5cGUuaW5zZXJ0QXQ9ZnVuY3Rpb24oZSxuLHIpe2lmKG51bGw9PXJ8fG51bGwhPWkucXVlcnkobixpLlNjb3BlLklOTElORSkpdC5wcm90b3R5cGUuaW5zZXJ0QXQuY2FsbCh0aGlzLGUsbixyKTtlbHNle3ZhciBvPXRoaXMuc3BsaXQoZSksbD1pLmNyZWF0ZShuLHIpO28ucGFyZW50Lmluc2VydEJlZm9yZShsLG8pfX0sZS5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKGUsbil7bmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvVHJpZGVudC8pP3RoaXMuYXR0YWNoKCk6dC5wcm90b3R5cGUudXBkYXRlLmNhbGwodGhpcyxlLG4pfSxlLmJsb3ROYW1lPSJibG9jayIsZS5zY29wZT1pLlNjb3BlLkJMT0NLX0JMT1QsZS50YWdOYW1lPSJQIixlfShvLmRlZmF1bHQpO2UuZGVmYXVsdD1sfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciByPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciB0PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgbiBpbiBlKWUuaGFzT3duUHJvcGVydHkobikmJih0W25dPWVbbl0pfTtyZXR1cm4gZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfXQoZSxuKSxlLnByb3RvdHlwZT1udWxsPT09bj9PYmplY3QuY3JlYXRlKG4pOihyLnByb3RvdHlwZT1uLnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1uKDE5KSxpPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiByKGUsdCksZS5mb3JtYXRzPWZ1bmN0aW9uKHQpe30sZS5wcm90b3R5cGUuZm9ybWF0PWZ1bmN0aW9uKGUsbil7dC5wcm90b3R5cGUuZm9ybWF0QXQuY2FsbCh0aGlzLDAsdGhpcy5sZW5ndGgoKSxlLG4pfSxlLnByb3RvdHlwZS5mb3JtYXRBdD1mdW5jdGlvbihlLG4scixvKXswPT09ZSYmbj09PXRoaXMubGVuZ3RoKCk/dGhpcy5mb3JtYXQocixvKTp0LnByb3RvdHlwZS5mb3JtYXRBdC5jYWxsKHRoaXMsZSxuLHIsbyl9LGUucHJvdG90eXBlLmZvcm1hdHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGF0aWNzLmZvcm1hdHModGhpcy5kb21Ob2RlKX0sZX0oby5kZWZhdWx0KTtlLmRlZmF1bHQ9aX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgcj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgdD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIG4gaW4gZSllLmhhc093blByb3BlcnR5KG4pJiYodFtuXT1lW25dKX07cmV0dXJuIGZ1bmN0aW9uKGUsbil7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX10KGUsbiksZS5wcm90b3R5cGU9bnVsbD09PW4/T2JqZWN0LmNyZWF0ZShuKTooci5wcm90b3R5cGU9bi5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89bigxOSksaT1uKDEpLGw9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt2YXIgbj10LmNhbGwodGhpcyxlKXx8dGhpcztyZXR1cm4gbi50ZXh0PW4uc3RhdGljcy52YWx1ZShuLmRvbU5vZGUpLG59cmV0dXJuIHIoZSx0KSxlLmNyZWF0ZT1mdW5jdGlvbih0KXtyZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodCl9LGUudmFsdWU9ZnVuY3Rpb24odCl7dmFyIGU9dC5kYXRhO3JldHVybiBlLm5vcm1hbGl6ZSYmKGU9ZS5ub3JtYWxpemUoKSksZX0sZS5wcm90b3R5cGUuZGVsZXRlQXQ9ZnVuY3Rpb24odCxlKXt0aGlzLmRvbU5vZGUuZGF0YT10aGlzLnRleHQ9dGhpcy50ZXh0LnNsaWNlKDAsdCkrdGhpcy50ZXh0LnNsaWNlKHQrZSl9LGUucHJvdG90eXBlLmluZGV4PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuZG9tTm9kZT09PXQ/ZTotMX0sZS5wcm90b3R5cGUuaW5zZXJ0QXQ9ZnVuY3Rpb24oZSxuLHIpe251bGw9PXI/KHRoaXMudGV4dD10aGlzLnRleHQuc2xpY2UoMCxlKStuK3RoaXMudGV4dC5zbGljZShlKSx0aGlzLmRvbU5vZGUuZGF0YT10aGlzLnRleHQpOnQucHJvdG90eXBlLmluc2VydEF0LmNhbGwodGhpcyxlLG4scil9LGUucHJvdG90eXBlLmxlbmd0aD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHQubGVuZ3RofSxlLnByb3RvdHlwZS5vcHRpbWl6ZT1mdW5jdGlvbihuKXt0LnByb3RvdHlwZS5vcHRpbWl6ZS5jYWxsKHRoaXMsbiksdGhpcy50ZXh0PXRoaXMuc3RhdGljcy52YWx1ZSh0aGlzLmRvbU5vZGUpLDA9PT10aGlzLnRleHQubGVuZ3RoP3RoaXMucmVtb3ZlKCk6dGhpcy5uZXh0IGluc3RhbmNlb2YgZSYmdGhpcy5uZXh0LnByZXY9PT10aGlzJiYodGhpcy5pbnNlcnRBdCh0aGlzLmxlbmd0aCgpLHRoaXMubmV4dC52YWx1ZSgpKSx0aGlzLm5leHQucmVtb3ZlKCkpfSxlLnByb3RvdHlwZS5wb3NpdGlvbj1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0hMSksW3RoaXMuZG9tTm9kZSx0XX0sZS5wcm90b3R5cGUuc3BsaXQ9ZnVuY3Rpb24odCxlKXtpZih2b2lkIDA9PT1lJiYoZT0hMSksIWUpe2lmKDA9PT10KXJldHVybiB0aGlzO2lmKHQ9PT10aGlzLmxlbmd0aCgpKXJldHVybiB0aGlzLm5leHR9dmFyIG49aS5jcmVhdGUodGhpcy5kb21Ob2RlLnNwbGl0VGV4dCh0KSk7cmV0dXJuIHRoaXMucGFyZW50Lmluc2VydEJlZm9yZShuLHRoaXMubmV4dCksdGhpcy50ZXh0PXRoaXMuc3RhdGljcy52YWx1ZSh0aGlzLmRvbU5vZGUpLG59LGUucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7dC5zb21lKGZ1bmN0aW9uKHQpe3JldHVybiJjaGFyYWN0ZXJEYXRhIj09PXQudHlwZSYmdC50YXJnZXQ9PT1uLmRvbU5vZGV9KSYmKHRoaXMudGV4dD10aGlzLnN0YXRpY3MudmFsdWUodGhpcy5kb21Ob2RlKSl9LGUucHJvdG90eXBlLnZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dH0sZS5ibG90TmFtZT0idGV4dCIsZS5zY29wZT1pLlNjb3BlLklOTElORV9CTE9ULGV9KG8uZGVmYXVsdCk7ZS5kZWZhdWx0PWx9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7aWYoci5jbGFzc0xpc3QudG9nZ2xlKCJ0ZXN0LWNsYXNzIiwhMSksci5jbGFzc0xpc3QuY29udGFpbnMoInRlc3QtY2xhc3MiKSl7dmFyIG89RE9NVG9rZW5MaXN0LnByb3RvdHlwZS50b2dnbGU7RE9NVG9rZW5MaXN0LnByb3RvdHlwZS50b2dnbGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD4xJiYhdGhpcy5jb250YWlucyh0KT09IWU/ZTpvLmNhbGwodGhpcyx0KX19U3RyaW5nLnByb3RvdHlwZS5zdGFydHNXaXRofHwoU3RyaW5nLnByb3RvdHlwZS5zdGFydHNXaXRoPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGU9ZXx8MCx0aGlzLnN1YnN0cihlLHQubGVuZ3RoKT09PXR9KSxTdHJpbmcucHJvdG90eXBlLmVuZHNXaXRofHwoU3RyaW5nLnByb3RvdHlwZS5lbmRzV2l0aD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMudG9TdHJpbmcoKTsoIm51bWJlciIhPXR5cGVvZiBlfHwhaXNGaW5pdGUoZSl8fE1hdGguZmxvb3IoZSkhPT1lfHxlPm4ubGVuZ3RoKSYmKGU9bi5sZW5ndGgpLGUtPXQubGVuZ3RoO3ZhciByPW4uaW5kZXhPZih0LGUpO3JldHVybi0xIT09ciYmcj09PWV9KSxBcnJheS5wcm90b3R5cGUuZmluZHx8T2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5LnByb3RvdHlwZSwiZmluZCIse3ZhbHVlOmZ1bmN0aW9uKHQpe2lmKG51bGw9PT10aGlzKXRocm93IG5ldyBUeXBlRXJyb3IoIkFycmF5LnByb3RvdHlwZS5maW5kIGNhbGxlZCBvbiBudWxsIG9yIHVuZGVmaW5lZCIpO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoInByZWRpY2F0ZSBtdXN0IGJlIGEgZnVuY3Rpb24iKTtmb3IodmFyIGUsbj1PYmplY3QodGhpcykscj1uLmxlbmd0aD4+PjAsbz1hcmd1bWVudHNbMV0saT0wO2k8cjtpKyspaWYoZT1uW2ldLHQuY2FsbChvLGUsaSxuKSlyZXR1cm4gZX19KSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixmdW5jdGlvbigpe2RvY3VtZW50LmV4ZWNDb21tYW5kKCJlbmFibGVPYmplY3RSZXNpemluZyIsITEsITEpLGRvY3VtZW50LmV4ZWNDb21tYW5kKCJhdXRvVXJsRGV0ZWN0IiwhMSwhMSl9KX0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKHQsZSxuKXtpZih0PT1lKXJldHVybiB0P1tbdix0XV06W107KG48MHx8dC5sZW5ndGg8bikmJihuPW51bGwpO3ZhciBvPWwodCxlKSxpPXQuc3Vic3RyaW5nKDAsbyk7dD10LnN1YnN0cmluZyhvKSxlPWUuc3Vic3RyaW5nKG8pLG89YSh0LGUpO3ZhciBzPXQuc3Vic3RyaW5nKHQubGVuZ3RoLW8pO3Q9dC5zdWJzdHJpbmcoMCx0Lmxlbmd0aC1vKSxlPWUuc3Vic3RyaW5nKDAsZS5sZW5ndGgtbyk7dmFyIGM9cih0LGUpO3JldHVybiBpJiZjLnVuc2hpZnQoW3YsaV0pLHMmJmMucHVzaChbdixzXSksdShjKSxudWxsIT1uJiYoYz1mKGMsbikpLGM9aChjKX1mdW5jdGlvbiByKHQsZSl7dmFyIHI7aWYoIXQpcmV0dXJuW1t5LGVdXTtpZighZSlyZXR1cm5bW2QsdF1dO3ZhciBpPXQubGVuZ3RoPmUubGVuZ3RoP3Q6ZSxsPXQubGVuZ3RoPmUubGVuZ3RoP2U6dCxhPWkuaW5kZXhPZihsKTtpZigtMSE9YSlyZXR1cm4gcj1bW3ksaS5zdWJzdHJpbmcoMCxhKV0sW3YsbF0sW3ksaS5zdWJzdHJpbmcoYStsLmxlbmd0aCldXSx0Lmxlbmd0aD5lLmxlbmd0aCYmKHJbMF1bMF09clsyXVswXT1kKSxyO2lmKDE9PWwubGVuZ3RoKXJldHVybltbZCx0XSxbeSxlXV07dmFyIHU9cyh0LGUpO2lmKHUpe3ZhciBjPXVbMF0sZj11WzFdLGg9dVsyXSxwPXVbM10sYj11WzRdLGc9bihjLGgpLG09bihmLHApO3JldHVybiBnLmNvbmNhdChbW3YsYl1dLG0pfXJldHVybiBvKHQsZSl9ZnVuY3Rpb24gbyh0LGUpe2Zvcih2YXIgbj10Lmxlbmd0aCxyPWUubGVuZ3RoLG89TWF0aC5jZWlsKChuK3IpLzIpLGw9byxhPTIqbyxzPW5ldyBBcnJheShhKSx1PW5ldyBBcnJheShhKSxjPTA7YzxhO2MrKylzW2NdPS0xLHVbY109LTE7c1tsKzFdPTAsdVtsKzFdPTA7Zm9yKHZhciBmPW4tcixoPWYlMiE9MCxwPTAsdj0wLGI9MCxnPTAsbT0wO208bzttKyspe2Zvcih2YXIgXz0tbStwO188PW0tdjtfKz0yKXt2YXIgTyx3PWwrXztPPV89PS1tfHxfIT1tJiZzW3ctMV08c1t3KzFdP3NbdysxXTpzW3ctMV0rMTtmb3IodmFyIHg9Ty1fO088biYmeDxyJiZ0LmNoYXJBdChPKT09ZS5jaGFyQXQoeCk7KU8rKyx4Kys7aWYoc1t3XT1PLE8+bil2Kz0yO2Vsc2UgaWYoeD5yKXArPTI7ZWxzZSBpZihoKXt2YXIgaz1sK2YtXztpZihrPj0wJiZrPGEmJi0xIT11W2tdKXt2YXIgRT1uLXVba107aWYoTz49RSlyZXR1cm4gaSh0LGUsTyx4KX19fWZvcih2YXIgTj0tbStiO048PW0tZztOKz0yKXt2YXIgRSxrPWwrTjtFPU49PS1tfHxOIT1tJiZ1W2stMV08dVtrKzFdP3VbaysxXTp1W2stMV0rMTtmb3IodmFyIGo9RS1OO0U8biYmajxyJiZ0LmNoYXJBdChuLUUtMSk9PWUuY2hhckF0KHItai0xKTspRSsrLGorKztpZih1W2tdPUUsRT5uKWcrPTI7ZWxzZSBpZihqPnIpYis9MjtlbHNlIGlmKCFoKXt2YXIgdz1sK2YtTjtpZih3Pj0wJiZ3PGEmJi0xIT1zW3ddKXt2YXIgTz1zW3ddLHg9bCtPLXc7aWYoRT1uLUUsTz49RSlyZXR1cm4gaSh0LGUsTyx4KX19fX1yZXR1cm5bW2QsdF0sW3ksZV1dfWZ1bmN0aW9uIGkodCxlLHIsbyl7dmFyIGk9dC5zdWJzdHJpbmcoMCxyKSxsPWUuc3Vic3RyaW5nKDAsbyksYT10LnN1YnN0cmluZyhyKSxzPWUuc3Vic3RyaW5nKG8pLHU9bihpLGwpLGM9bihhLHMpO3JldHVybiB1LmNvbmNhdChjKX1mdW5jdGlvbiBsKHQsZSl7aWYoIXR8fCFlfHx0LmNoYXJBdCgwKSE9ZS5jaGFyQXQoMCkpcmV0dXJuIDA7Zm9yKHZhciBuPTAscj1NYXRoLm1pbih0Lmxlbmd0aCxlLmxlbmd0aCksbz1yLGk9MDtuPG87KXQuc3Vic3RyaW5nKGksbyk9PWUuc3Vic3RyaW5nKGksbyk/KG49byxpPW4pOnI9byxvPU1hdGguZmxvb3IoKHItbikvMituKTtyZXR1cm4gb31mdW5jdGlvbiBhKHQsZSl7aWYoIXR8fCFlfHx0LmNoYXJBdCh0Lmxlbmd0aC0xKSE9ZS5jaGFyQXQoZS5sZW5ndGgtMSkpcmV0dXJuIDA7Zm9yKHZhciBuPTAscj1NYXRoLm1pbih0Lmxlbmd0aCxlLmxlbmd0aCksbz1yLGk9MDtuPG87KXQuc3Vic3RyaW5nKHQubGVuZ3RoLW8sdC5sZW5ndGgtaSk9PWUuc3Vic3RyaW5nKGUubGVuZ3RoLW8sZS5sZW5ndGgtaSk/KG49byxpPW4pOnI9byxvPU1hdGguZmxvb3IoKHItbikvMituKTtyZXR1cm4gb31mdW5jdGlvbiBzKHQsZSl7ZnVuY3Rpb24gbih0LGUsbil7Zm9yKHZhciByLG8saSxzLHU9dC5zdWJzdHJpbmcobixuK01hdGguZmxvb3IodC5sZW5ndGgvNCkpLGM9LTEsZj0iIjstMSE9KGM9ZS5pbmRleE9mKHUsYysxKSk7KXt2YXIgaD1sKHQuc3Vic3RyaW5nKG4pLGUuc3Vic3RyaW5nKGMpKSxwPWEodC5zdWJzdHJpbmcoMCxuKSxlLnN1YnN0cmluZygwLGMpKTtmLmxlbmd0aDxwK2gmJihmPWUuc3Vic3RyaW5nKGMtcCxjKStlLnN1YnN0cmluZyhjLGMraCkscj10LnN1YnN0cmluZygwLG4tcCksbz10LnN1YnN0cmluZyhuK2gpLGk9ZS5zdWJzdHJpbmcoMCxjLXApLHM9ZS5zdWJzdHJpbmcoYytoKSl9cmV0dXJuIDIqZi5sZW5ndGg+PXQubGVuZ3RoP1tyLG8saSxzLGZdOm51bGx9dmFyIHI9dC5sZW5ndGg+ZS5sZW5ndGg/dDplLG89dC5sZW5ndGg+ZS5sZW5ndGg/ZTp0O2lmKHIubGVuZ3RoPDR8fDIqby5sZW5ndGg8ci5sZW5ndGgpcmV0dXJuIG51bGw7dmFyIGkscz1uKHIsbyxNYXRoLmNlaWwoci5sZW5ndGgvNCkpLHU9bihyLG8sTWF0aC5jZWlsKHIubGVuZ3RoLzIpKTtpZighcyYmIXUpcmV0dXJuIG51bGw7aT11P3MmJnNbNF0ubGVuZ3RoPnVbNF0ubGVuZ3RoP3M6dTpzO3ZhciBjLGYsaCxwO3JldHVybiB0Lmxlbmd0aD5lLmxlbmd0aD8oYz1pWzBdLGY9aVsxXSxoPWlbMl0scD1pWzNdKTooaD1pWzBdLHA9aVsxXSxjPWlbMl0sZj1pWzNdKSxbYyxmLGgscCxpWzRdXX1mdW5jdGlvbiB1KHQpe3QucHVzaChbdiwiIl0pO2Zvcih2YXIgZSxuPTAscj0wLG89MCxpPSIiLHM9IiI7bjx0Lmxlbmd0aDspc3dpdGNoKHRbbl1bMF0pe2Nhc2UgeTpvKysscys9dFtuXVsxXSxuKys7YnJlYWs7Y2FzZSBkOnIrKyxpKz10W25dWzFdLG4rKzticmVhaztjYXNlIHY6citvPjE/KDAhPT1yJiYwIT09byYmKGU9bChzLGkpLDAhPT1lJiYobi1yLW8+MCYmdFtuLXItby0xXVswXT09dj90W24tci1vLTFdWzFdKz1zLnN1YnN0cmluZygwLGUpOih0LnNwbGljZSgwLDAsW3Yscy5zdWJzdHJpbmcoMCxlKV0pLG4rKykscz1zLnN1YnN0cmluZyhlKSxpPWkuc3Vic3RyaW5nKGUpKSwwIT09KGU9YShzLGkpKSYmKHRbbl1bMV09cy5zdWJzdHJpbmcocy5sZW5ndGgtZSkrdFtuXVsxXSxzPXMuc3Vic3RyaW5nKDAscy5sZW5ndGgtZSksaT1pLnN1YnN0cmluZygwLGkubGVuZ3RoLWUpKSksMD09PXI/dC5zcGxpY2Uobi1vLHIrbyxbeSxzXSk6MD09PW8/dC5zcGxpY2Uobi1yLHIrbyxbZCxpXSk6dC5zcGxpY2Uobi1yLW8scitvLFtkLGldLFt5LHNdKSxuPW4tci1vKyhyPzE6MCkrKG8/MTowKSsxKTowIT09biYmdFtuLTFdWzBdPT12Pyh0W24tMV1bMV0rPXRbbl1bMV0sdC5zcGxpY2UobiwxKSk6bisrLG89MCxyPTAsaT0iIixzPSIifSIiPT09dFt0Lmxlbmd0aC0xXVsxXSYmdC5wb3AoKTt2YXIgYz0hMTtmb3Iobj0xO248dC5sZW5ndGgtMTspdFtuLTFdWzBdPT12JiZ0W24rMV1bMF09PXYmJih0W25dWzFdLnN1YnN0cmluZyh0W25dWzFdLmxlbmd0aC10W24tMV1bMV0ubGVuZ3RoKT09dFtuLTFdWzFdPyh0W25dWzFdPXRbbi0xXVsxXSt0W25dWzFdLnN1YnN0cmluZygwLHRbbl1bMV0ubGVuZ3RoLXRbbi0xXVsxXS5sZW5ndGgpLHRbbisxXVsxXT10W24tMV1bMV0rdFtuKzFdWzFdLHQuc3BsaWNlKG4tMSwxKSxjPSEwKTp0W25dWzFdLnN1YnN0cmluZygwLHRbbisxXVsxXS5sZW5ndGgpPT10W24rMV1bMV0mJih0W24tMV1bMV0rPXRbbisxXVsxXSx0W25dWzFdPXRbbl1bMV0uc3Vic3RyaW5nKHRbbisxXVsxXS5sZW5ndGgpK3RbbisxXVsxXSx0LnNwbGljZShuKzEsMSksYz0hMCkpLG4rKztjJiZ1KHQpfWZ1bmN0aW9uIGModCxlKXtpZigwPT09ZSlyZXR1cm5bdix0XTtmb3IodmFyIG49MCxyPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBvPXRbcl07aWYob1swXT09PWR8fG9bMF09PT12KXt2YXIgaT1uK29bMV0ubGVuZ3RoO2lmKGU9PT1pKXJldHVybltyKzEsdF07aWYoZTxpKXt0PXQuc2xpY2UoKTt2YXIgbD1lLW4sYT1bb1swXSxvWzFdLnNsaWNlKDAsbCldLHM9W29bMF0sb1sxXS5zbGljZShsKV07cmV0dXJuIHQuc3BsaWNlKHIsMSxhLHMpLFtyKzEsdF19bj1pfX10aHJvdyBuZXcgRXJyb3IoImN1cnNvcl9wb3MgaXMgb3V0IG9mIGJvdW5kcyEiKX1mdW5jdGlvbiBmKHQsZSl7dmFyIG49Yyh0LGUpLHI9blsxXSxvPW5bMF0saT1yW29dLGw9cltvKzFdO2lmKG51bGw9PWkpcmV0dXJuIHQ7aWYoaVswXSE9PXYpcmV0dXJuIHQ7aWYobnVsbCE9bCYmaVsxXStsWzFdPT09bFsxXStpWzFdKXJldHVybiByLnNwbGljZShvLDIsbCxpKSxwKHIsbywyKTtpZihudWxsIT1sJiYwPT09bFsxXS5pbmRleE9mKGlbMV0pKXtyLnNwbGljZShvLDIsW2xbMF0saVsxXV0sWzAsaVsxXV0pO3ZhciBhPWxbMV0uc2xpY2UoaVsxXS5sZW5ndGgpO3JldHVybiBhLmxlbmd0aD4wJiZyLnNwbGljZShvKzIsMCxbbFswXSxhXSkscChyLG8sMyl9cmV0dXJuIHR9ZnVuY3Rpb24gaCh0KXtmb3IodmFyIGU9ITEsbj1mdW5jdGlvbih0KXtyZXR1cm4gdC5jaGFyQ29kZUF0KDApPj01NjMyMCYmdC5jaGFyQ29kZUF0KDApPD01NzM0M30scj0yO3I8dC5sZW5ndGg7cis9MSl0W3ItMl1bMF09PT12JiZmdW5jdGlvbih0KXtyZXR1cm4gdC5jaGFyQ29kZUF0KHQubGVuZ3RoLTEpPj01NTI5NiYmdC5jaGFyQ29kZUF0KHQubGVuZ3RoLTEpPD01NjMxOX0odFtyLTJdWzFdKSYmdFtyLTFdWzBdPT09ZCYmbih0W3ItMV1bMV0pJiZ0W3JdWzBdPT09eSYmbih0W3JdWzFdKSYmKGU9ITAsdFtyLTFdWzFdPXRbci0yXVsxXS5zbGljZSgtMSkrdFtyLTFdWzFdLHRbcl1bMV09dFtyLTJdWzFdLnNsaWNlKC0xKSt0W3JdWzFdLHRbci0yXVsxXT10W3ItMl1bMV0uc2xpY2UoMCwtMSkpO2lmKCFlKXJldHVybiB0O2Zvcih2YXIgbz1bXSxyPTA7cjx0Lmxlbmd0aDtyKz0xKXRbcl1bMV0ubGVuZ3RoPjAmJm8ucHVzaCh0W3JdKTtyZXR1cm4gb31mdW5jdGlvbiBwKHQsZSxuKXtmb3IodmFyIHI9ZStuLTE7cj49MCYmcj49ZS0xO3ItLSlpZihyKzE8dC5sZW5ndGgpe3ZhciBvPXRbcl0saT10W3IrMV07b1swXT09PWlbMV0mJnQuc3BsaWNlKHIsMixbb1swXSxvWzFdK2lbMV1dKX1yZXR1cm4gdH12YXIgZD0tMSx5PTEsdj0wLGI9bjtiLklOU0VSVD15LGIuREVMRVRFPWQsYi5FUVVBTD12LHQuZXhwb3J0cz1ifSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4odCl7dmFyIGU9W107Zm9yKHZhciBuIGluIHQpZS5wdXNoKG4pO3JldHVybiBlfWU9dC5leHBvcnRzPSJmdW5jdGlvbiI9PXR5cGVvZiBPYmplY3Qua2V5cz9PYmplY3Qua2V5czpuLGUuc2hpbT1ufSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4odCl7cmV0dXJuIltvYmplY3QgQXJndW1lbnRzXSI9PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KX1mdW5jdGlvbiByKHQpe3JldHVybiB0JiYib2JqZWN0Ij09dHlwZW9mIHQmJiJudW1iZXIiPT10eXBlb2YgdC5sZW5ndGgmJk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LCJjYWxsZWUiKSYmIU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbCh0LCJjYWxsZWUiKXx8ITF9dmFyIG89IltvYmplY3QgQXJndW1lbnRzXSI9PWZ1bmN0aW9uKCl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcmd1bWVudHMpfSgpO2U9dC5leHBvcnRzPW8/bjpyLGUuc3VwcG9ydGVkPW4sZS51bnN1cHBvcnRlZD1yfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIG8odCxlLG4pe3JldHVybiBlIGluIHQ/T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSx7dmFsdWU6bixlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pOnRbZV09bix0fWZ1bmN0aW9uIGkodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1mdW5jdGlvbiBsKHQsZSl7cmV0dXJuIE9iamVjdC5rZXlzKGUpLnJlZHVjZShmdW5jdGlvbihuLHIpe3JldHVybiBudWxsPT10W3JdP246KGVbcl09PT10W3JdP25bcl09ZVtyXTpBcnJheS5pc0FycmF5KGVbcl0pP2Vbcl0uaW5kZXhPZih0W3JdKTwwJiYobltyXT1lW3JdLmNvbmNhdChbdFtyXV0pKTpuW3JdPVtlW3JdLHRbcl1dLG4pfSx7fSl9ZnVuY3Rpb24gYSh0KXtyZXR1cm4gdC5yZWR1Y2UoZnVuY3Rpb24odCxlKXtpZigxPT09ZS5pbnNlcnQpe3ZhciBuPSgwLE4uZGVmYXVsdCkoZS5hdHRyaWJ1dGVzKTtyZXR1cm4gZGVsZXRlIG4uaW1hZ2UsdC5pbnNlcnQoe2ltYWdlOmUuYXR0cmlidXRlcy5pbWFnZX0sbil9aWYobnVsbD09ZS5hdHRyaWJ1dGVzfHwhMCE9PWUuYXR0cmlidXRlcy5saXN0JiYhMCE9PWUuYXR0cmlidXRlcy5idWxsZXR8fChlPSgwLE4uZGVmYXVsdCkoZSksZS5hdHRyaWJ1dGVzLmxpc3Q/ZS5hdHRyaWJ1dGVzLmxpc3Q9Im9yZGVyZWQiOihlLmF0dHJpYnV0ZXMubGlzdD0iYnVsbGV0IixkZWxldGUgZS5hdHRyaWJ1dGVzLmJ1bGxldCkpLCJzdHJpbmciPT10eXBlb2YgZS5pbnNlcnQpe3ZhciByPWUuaW5zZXJ0LnJlcGxhY2UoL1xyXG4vZywiXG4iKS5yZXBsYWNlKC9cci9nLCJcbiIpO3JldHVybiB0Lmluc2VydChyLGUuYXR0cmlidXRlcyl9cmV0dXJuIHQucHVzaChlKX0sbmV3IGguZGVmYXVsdCl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBzPSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJiJzeW1ib2wiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKHQpe3JldHVybiB0eXBlb2YgdH06ZnVuY3Rpb24odCl7cmV0dXJuIHQmJiJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJnQuY29uc3RydWN0b3I9PT1TeW1ib2wmJnQhPT1TeW1ib2wucHJvdG90eXBlPyJzeW1ib2wiOnR5cGVvZiB0fSx1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3ZhciBuPVtdLHI9ITAsbz0hMSxpPXZvaWQgMDt0cnl7Zm9yKHZhciBsLGE9dFtTeW1ib2wuaXRlcmF0b3JdKCk7IShyPShsPWEubmV4dCgpKS5kb25lKSYmKG4ucHVzaChsLnZhbHVlKSwhZXx8bi5sZW5ndGghPT1lKTtyPSEwKTt9Y2F0Y2godCl7bz0hMCxpPXR9ZmluYWxseXt0cnl7IXImJmEucmV0dXJuJiZhLnJldHVybigpfWZpbmFsbHl7aWYobyl0aHJvdyBpfX1yZXR1cm4gbn1yZXR1cm4gZnVuY3Rpb24oZSxuKXtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiBlO2lmKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoZSkpcmV0dXJuIHQoZSxuKTt0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIil9fSgpLGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciByPWVbbl07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsInZhbHVlImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLmtleSxyKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxyJiZ0KGUsciksZX19KCksZj1uKDQpLGg9cihmKSxwPW4oMjApLGQ9cihwKSx5PW4oMCksdj1yKHkpLGI9bigxMyksZz1yKGIpLG09bigzMSksXz1yKG0pLE89bigzKSx3PXIoTykseD1uKDE0KSxrPXIoeCksRT1uKDIxKSxOPXIoRSksaj1uKDEyKSxBPXIoaikscT1uKDIpLFQ9cihxKSxQPS9eWyAtfl0qJC8sUz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7aSh0aGlzLHQpLHRoaXMuc2Nyb2xsPWUsdGhpcy5kZWx0YT10aGlzLmdldERlbHRhKCl9cmV0dXJuIGModCxbe2tleToiYXBwbHlEZWx0YSIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPSExO3RoaXMuc2Nyb2xsLnVwZGF0ZSgpO3ZhciByPXRoaXMuc2Nyb2xsLmxlbmd0aCgpO3JldHVybiB0aGlzLnNjcm9sbC5iYXRjaFN0YXJ0KCksdD1hKHQpLHQucmVkdWNlKGZ1bmN0aW9uKHQsbyl7dmFyIGk9by5yZXRhaW58fG8uZGVsZXRlfHxvLmluc2VydC5sZW5ndGh8fDEsbD1vLmF0dHJpYnV0ZXN8fHt9O2lmKG51bGwhPW8uaW5zZXJ0KXtpZigic3RyaW5nIj09dHlwZW9mIG8uaW5zZXJ0KXt2YXIgYT1vLmluc2VydDthLmVuZHNXaXRoKCJcbiIpJiZuJiYobj0hMSxhPWEuc2xpY2UoMCwtMSkpLHQ+PXImJiFhLmVuZHNXaXRoKCJcbiIpJiYobj0hMCksZS5zY3JvbGwuaW5zZXJ0QXQodCxhKTt2YXIgYz1lLnNjcm9sbC5saW5lKHQpLGY9dShjLDIpLGg9ZlswXSxwPWZbMV0seT0oMCxULmRlZmF1bHQpKHt9LCgwLE8uYnViYmxlRm9ybWF0cykoaCkpO2lmKGggaW5zdGFuY2VvZiB3LmRlZmF1bHQpe3ZhciBiPWguZGVzY2VuZGFudCh2LmRlZmF1bHQuTGVhZixwKSxnPXUoYiwxKSxtPWdbMF07eT0oMCxULmRlZmF1bHQpKHksKDAsTy5idWJibGVGb3JtYXRzKShtKSl9bD1kLmRlZmF1bHQuYXR0cmlidXRlcy5kaWZmKHksbCl8fHt9fWVsc2UgaWYoIm9iamVjdCI9PT1zKG8uaW5zZXJ0KSl7dmFyIF89T2JqZWN0LmtleXMoby5pbnNlcnQpWzBdO2lmKG51bGw9PV8pcmV0dXJuIHQ7ZS5zY3JvbGwuaW5zZXJ0QXQodCxfLG8uaW5zZXJ0W19dKX1yKz1pfXJldHVybiBPYmplY3Qua2V5cyhsKS5mb3JFYWNoKGZ1bmN0aW9uKG4pe2Uuc2Nyb2xsLmZvcm1hdEF0KHQsaSxuLGxbbl0pfSksdCtpfSwwKSx0LnJlZHVjZShmdW5jdGlvbih0LG4pe3JldHVybiJudW1iZXIiPT10eXBlb2Ygbi5kZWxldGU/KGUuc2Nyb2xsLmRlbGV0ZUF0KHQsbi5kZWxldGUpLHQpOnQrKG4ucmV0YWlufHxuLmluc2VydC5sZW5ndGh8fDEpfSwwKSx0aGlzLnNjcm9sbC5iYXRjaEVuZCgpLHRoaXMudXBkYXRlKHQpfX0se2tleToiZGVsZXRlVGV4dCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5zY3JvbGwuZGVsZXRlQXQodCxlKSx0aGlzLnVwZGF0ZSgobmV3IGguZGVmYXVsdCkucmV0YWluKHQpLmRlbGV0ZShlKSl9fSx7a2V5OiJmb3JtYXRMaW5lIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMscj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06e307cmV0dXJuIHRoaXMuc2Nyb2xsLnVwZGF0ZSgpLE9iamVjdC5rZXlzKHIpLmZvckVhY2goZnVuY3Rpb24obyl7aWYobnVsbD09bi5zY3JvbGwud2hpdGVsaXN0fHxuLnNjcm9sbC53aGl0ZWxpc3Rbb10pe3ZhciBpPW4uc2Nyb2xsLmxpbmVzKHQsTWF0aC5tYXgoZSwxKSksbD1lO2kuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgaT1lLmxlbmd0aCgpO2lmKGUgaW5zdGFuY2VvZiBnLmRlZmF1bHQpe3ZhciBhPXQtZS5vZmZzZXQobi5zY3JvbGwpLHM9ZS5uZXdsaW5lSW5kZXgoYStsKS1hKzE7ZS5mb3JtYXRBdChhLHMsbyxyW29dKX1lbHNlIGUuZm9ybWF0KG8scltvXSk7bC09aX0pfX0pLHRoaXMuc2Nyb2xsLm9wdGltaXplKCksdGhpcy51cGRhdGUoKG5ldyBoLmRlZmF1bHQpLnJldGFpbih0KS5yZXRhaW4oZSwoMCxOLmRlZmF1bHQpKHIpKSl9fSx7a2V5OiJmb3JtYXRUZXh0Iix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMscj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06e307cmV0dXJuIE9iamVjdC5rZXlzKHIpLmZvckVhY2goZnVuY3Rpb24obyl7bi5zY3JvbGwuZm9ybWF0QXQodCxlLG8scltvXSl9KSx0aGlzLnVwZGF0ZSgobmV3IGguZGVmYXVsdCkucmV0YWluKHQpLnJldGFpbihlLCgwLE4uZGVmYXVsdCkocikpKX19LHtrZXk6ImdldENvbnRlbnRzIix2YWx1ZTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmRlbHRhLnNsaWNlKHQsdCtlKX19LHtrZXk6ImdldERlbHRhIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNjcm9sbC5saW5lcygpLnJlZHVjZShmdW5jdGlvbih0LGUpe3JldHVybiB0LmNvbmNhdChlLmRlbHRhKCkpfSxuZXcgaC5kZWZhdWx0KX19LHtrZXk6ImdldEZvcm1hdCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOjAsbj1bXSxyPVtdOzA9PT1lP3RoaXMuc2Nyb2xsLnBhdGgodCkuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgZT11KHQsMSksbz1lWzBdO28gaW5zdGFuY2VvZiB3LmRlZmF1bHQ/bi5wdXNoKG8pOm8gaW5zdGFuY2VvZiB2LmRlZmF1bHQuTGVhZiYmci5wdXNoKG8pfSk6KG49dGhpcy5zY3JvbGwubGluZXModCxlKSxyPXRoaXMuc2Nyb2xsLmRlc2NlbmRhbnRzKHYuZGVmYXVsdC5MZWFmLHQsZSkpO3ZhciBvPVtuLHJdLm1hcChmdW5jdGlvbih0KXtpZigwPT09dC5sZW5ndGgpcmV0dXJue307Zm9yKHZhciBlPSgwLE8uYnViYmxlRm9ybWF0cykodC5zaGlmdCgpKTtPYmplY3Qua2V5cyhlKS5sZW5ndGg+MDspe3ZhciBuPXQuc2hpZnQoKTtpZihudWxsPT1uKXJldHVybiBlO2U9bCgoMCxPLmJ1YmJsZUZvcm1hdHMpKG4pLGUpfXJldHVybiBlfSk7cmV0dXJuIFQuZGVmYXVsdC5hcHBseShULmRlZmF1bHQsbyl9fSx7a2V5OiJnZXRUZXh0Iix2YWx1ZTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmdldENvbnRlbnRzKHQsZSkuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiJzdHJpbmciPT10eXBlb2YgdC5pbnNlcnR9KS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHQuaW5zZXJ0fSkuam9pbigiIil9fSx7a2V5OiJpbnNlcnRFbWJlZCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzLnNjcm9sbC5pbnNlcnRBdCh0LGUsbiksdGhpcy51cGRhdGUoKG5ldyBoLmRlZmF1bHQpLnJldGFpbih0KS5pbnNlcnQobyh7fSxlLG4pKSl9fSx7a2V5OiJpbnNlcnRUZXh0Iix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMscj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06e307cmV0dXJuIGU9ZS5yZXBsYWNlKC9cclxuL2csIlxuIikucmVwbGFjZSgvXHIvZywiXG4iKSx0aGlzLnNjcm9sbC5pbnNlcnRBdCh0LGUpLE9iamVjdC5rZXlzKHIpLmZvckVhY2goZnVuY3Rpb24obyl7bi5zY3JvbGwuZm9ybWF0QXQodCxlLmxlbmd0aCxvLHJbb10pfSksdGhpcy51cGRhdGUoKG5ldyBoLmRlZmF1bHQpLnJldGFpbih0KS5pbnNlcnQoZSwoMCxOLmRlZmF1bHQpKHIpKSl9fSx7a2V5OiJpc0JsYW5rIix2YWx1ZTpmdW5jdGlvbigpe2lmKDA9PXRoaXMuc2Nyb2xsLmNoaWxkcmVuLmxlbmd0aClyZXR1cm4hMDtpZih0aGlzLnNjcm9sbC5jaGlsZHJlbi5sZW5ndGg+MSlyZXR1cm4hMTt2YXIgdD10aGlzLnNjcm9sbC5jaGlsZHJlbi5oZWFkO3JldHVybiB0LnN0YXRpY3MuYmxvdE5hbWU9PT13LmRlZmF1bHQuYmxvdE5hbWUmJighKHQuY2hpbGRyZW4ubGVuZ3RoPjEpJiZ0LmNoaWxkcmVuLmhlYWQgaW5zdGFuY2VvZiBrLmRlZmF1bHQpfX0se2tleToicmVtb3ZlRm9ybWF0Iix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuZ2V0VGV4dCh0LGUpLHI9dGhpcy5zY3JvbGwubGluZSh0K2UpLG89dShyLDIpLGk9b1swXSxsPW9bMV0sYT0wLHM9bmV3IGguZGVmYXVsdDtudWxsIT1pJiYoYT1pIGluc3RhbmNlb2YgZy5kZWZhdWx0P2kubmV3bGluZUluZGV4KGwpLWwrMTppLmxlbmd0aCgpLWwscz1pLmRlbHRhKCkuc2xpY2UobCxsK2EtMSkuaW5zZXJ0KCJcbiIpKTt2YXIgYz10aGlzLmdldENvbnRlbnRzKHQsZSthKSxmPWMuZGlmZigobmV3IGguZGVmYXVsdCkuaW5zZXJ0KG4pLmNvbmNhdChzKSkscD0obmV3IGguZGVmYXVsdCkucmV0YWluKHQpLmNvbmNhdChmKTtyZXR1cm4gdGhpcy5hcHBseURlbHRhKHApfX0se2tleToidXBkYXRlIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06W10sbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06dm9pZCAwLHI9dGhpcy5kZWx0YTtpZigxPT09ZS5sZW5ndGgmJiJjaGFyYWN0ZXJEYXRhIj09PWVbMF0udHlwZSYmZVswXS50YXJnZXQuZGF0YS5tYXRjaChQKSYmdi5kZWZhdWx0LmZpbmQoZVswXS50YXJnZXQpKXt2YXIgbz12LmRlZmF1bHQuZmluZChlWzBdLnRhcmdldCksaT0oMCxPLmJ1YmJsZUZvcm1hdHMpKG8pLGw9by5vZmZzZXQodGhpcy5zY3JvbGwpLGE9ZVswXS5vbGRWYWx1ZS5yZXBsYWNlKF8uZGVmYXVsdC5DT05URU5UUywiIikscz0obmV3IGguZGVmYXVsdCkuaW5zZXJ0KGEpLHU9KG5ldyBoLmRlZmF1bHQpLmluc2VydChvLnZhbHVlKCkpO3Q9KG5ldyBoLmRlZmF1bHQpLnJldGFpbihsKS5jb25jYXQocy5kaWZmKHUsbikpLnJlZHVjZShmdW5jdGlvbih0LGUpe3JldHVybiBlLmluc2VydD90Lmluc2VydChlLmluc2VydCxpKTp0LnB1c2goZSl9LG5ldyBoLmRlZmF1bHQpLHRoaXMuZGVsdGE9ci5jb21wb3NlKHQpfWVsc2UgdGhpcy5kZWx0YT10aGlzLmdldERlbHRhKCksdCYmKDAsQS5kZWZhdWx0KShyLmNvbXBvc2UodCksdGhpcy5kZWx0YSl8fCh0PXIuZGlmZih0aGlzLmRlbHRhLG4pKTtyZXR1cm4gdH19XSksdH0oKTtlLmRlZmF1bHQ9U30sZnVuY3Rpb24odCxlKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbigpe31mdW5jdGlvbiByKHQsZSxuKXt0aGlzLmZuPXQsdGhpcy5jb250ZXh0PWUsdGhpcy5vbmNlPW58fCExfWZ1bmN0aW9uIG8oKXt0aGlzLl9ldmVudHM9bmV3IG4sdGhpcy5fZXZlbnRzQ291bnQ9MH12YXIgaT1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LGw9In4iO09iamVjdC5jcmVhdGUmJihuLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG51bGwpLChuZXcgbikuX19wcm90b19ffHwobD0hMSkpLG8ucHJvdG90eXBlLmV2ZW50TmFtZXM9ZnVuY3Rpb24oKXt2YXIgdCxlLG49W107aWYoMD09PXRoaXMuX2V2ZW50c0NvdW50KXJldHVybiBuO2ZvcihlIGluIHQ9dGhpcy5fZXZlbnRzKWkuY2FsbCh0LGUpJiZuLnB1c2gobD9lLnNsaWNlKDEpOmUpO3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzP24uY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHModCkpOm59LG8ucHJvdG90eXBlLmxpc3RlbmVycz1mdW5jdGlvbih0LGUpe3ZhciBuPWw/bCt0OnQscj10aGlzLl9ldmVudHNbbl07aWYoZSlyZXR1cm4hIXI7aWYoIXIpcmV0dXJuW107aWYoci5mbilyZXR1cm5bci5mbl07Zm9yKHZhciBvPTAsaT1yLmxlbmd0aCxhPW5ldyBBcnJheShpKTtvPGk7bysrKWFbb109cltvXS5mbjtyZXR1cm4gYX0sby5wcm90b3R5cGUuZW1pdD1mdW5jdGlvbih0LGUsbixyLG8saSl7dmFyIGE9bD9sK3Q6dDtpZighdGhpcy5fZXZlbnRzW2FdKXJldHVybiExO3ZhciBzLHUsYz10aGlzLl9ldmVudHNbYV0sZj1hcmd1bWVudHMubGVuZ3RoO2lmKGMuZm4pe3N3aXRjaChjLm9uY2UmJnRoaXMucmVtb3ZlTGlzdGVuZXIodCxjLmZuLHZvaWQgMCwhMCksZil7Y2FzZSAxOnJldHVybiBjLmZuLmNhbGwoYy5jb250ZXh0KSwhMDtjYXNlIDI6cmV0dXJuIGMuZm4uY2FsbChjLmNvbnRleHQsZSksITA7Y2FzZSAzOnJldHVybiBjLmZuLmNhbGwoYy5jb250ZXh0LGUsbiksITA7Y2FzZSA0OnJldHVybiBjLmZuLmNhbGwoYy5jb250ZXh0LGUsbixyKSwhMDtjYXNlIDU6cmV0dXJuIGMuZm4uY2FsbChjLmNvbnRleHQsZSxuLHIsbyksITA7Y2FzZSA2OnJldHVybiBjLmZuLmNhbGwoYy5jb250ZXh0LGUsbixyLG8saSksITB9Zm9yKHU9MSxzPW5ldyBBcnJheShmLTEpO3U8Zjt1Kyspc1t1LTFdPWFyZ3VtZW50c1t1XTtjLmZuLmFwcGx5KGMuY29udGV4dCxzKX1lbHNle3ZhciBoLHA9Yy5sZW5ndGg7Zm9yKHU9MDt1PHA7dSsrKXN3aXRjaChjW3VdLm9uY2UmJnRoaXMucmVtb3ZlTGlzdGVuZXIodCxjW3VdLmZuLHZvaWQgMCwhMCksZil7Y2FzZSAxOmNbdV0uZm4uY2FsbChjW3VdLmNvbnRleHQpO2JyZWFrO2Nhc2UgMjpjW3VdLmZuLmNhbGwoY1t1XS5jb250ZXh0LGUpO2JyZWFrO2Nhc2UgMzpjW3VdLmZuLmNhbGwoY1t1XS5jb250ZXh0LGUsbik7YnJlYWs7Y2FzZSA0OmNbdV0uZm4uY2FsbChjW3VdLmNvbnRleHQsZSxuLHIpO2JyZWFrO2RlZmF1bHQ6aWYoIXMpZm9yKGg9MSxzPW5ldyBBcnJheShmLTEpO2g8ZjtoKyspc1toLTFdPWFyZ3VtZW50c1toXTtjW3VdLmZuLmFwcGx5KGNbdV0uY29udGV4dCxzKX19cmV0dXJuITB9LG8ucHJvdG90eXBlLm9uPWZ1bmN0aW9uKHQsZSxuKXt2YXIgbz1uZXcgcihlLG58fHRoaXMpLGk9bD9sK3Q6dDtyZXR1cm4gdGhpcy5fZXZlbnRzW2ldP3RoaXMuX2V2ZW50c1tpXS5mbj90aGlzLl9ldmVudHNbaV09W3RoaXMuX2V2ZW50c1tpXSxvXTp0aGlzLl9ldmVudHNbaV0ucHVzaChvKToodGhpcy5fZXZlbnRzW2ldPW8sdGhpcy5fZXZlbnRzQ291bnQrKyksdGhpc30sby5wcm90b3R5cGUub25jZT1mdW5jdGlvbih0LGUsbil7dmFyIG89bmV3IHIoZSxufHx0aGlzLCEwKSxpPWw/bCt0OnQ7cmV0dXJuIHRoaXMuX2V2ZW50c1tpXT90aGlzLl9ldmVudHNbaV0uZm4/dGhpcy5fZXZlbnRzW2ldPVt0aGlzLl9ldmVudHNbaV0sb106dGhpcy5fZXZlbnRzW2ldLnB1c2gobyk6KHRoaXMuX2V2ZW50c1tpXT1vLHRoaXMuX2V2ZW50c0NvdW50KyspLHRoaXN9LG8ucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyPWZ1bmN0aW9uKHQsZSxyLG8pe3ZhciBpPWw/bCt0OnQ7aWYoIXRoaXMuX2V2ZW50c1tpXSlyZXR1cm4gdGhpcztpZighZSlyZXR1cm4gMD09LS10aGlzLl9ldmVudHNDb3VudD90aGlzLl9ldmVudHM9bmV3IG46ZGVsZXRlIHRoaXMuX2V2ZW50c1tpXSx0aGlzO3ZhciBhPXRoaXMuX2V2ZW50c1tpXTtpZihhLmZuKWEuZm4hPT1lfHxvJiYhYS5vbmNlfHxyJiZhLmNvbnRleHQhPT1yfHwoMD09LS10aGlzLl9ldmVudHNDb3VudD90aGlzLl9ldmVudHM9bmV3IG46ZGVsZXRlIHRoaXMuX2V2ZW50c1tpXSk7ZWxzZXtmb3IodmFyIHM9MCx1PVtdLGM9YS5sZW5ndGg7czxjO3MrKykoYVtzXS5mbiE9PWV8fG8mJiFhW3NdLm9uY2V8fHImJmFbc10uY29udGV4dCE9PXIpJiZ1LnB1c2goYVtzXSk7dS5sZW5ndGg/dGhpcy5fZXZlbnRzW2ldPTE9PT11Lmxlbmd0aD91WzBdOnU6MD09LS10aGlzLl9ldmVudHNDb3VudD90aGlzLl9ldmVudHM9bmV3IG46ZGVsZXRlIHRoaXMuX2V2ZW50c1tpXX1yZXR1cm4gdGhpc30sby5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzPWZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybiB0PyhlPWw/bCt0OnQsdGhpcy5fZXZlbnRzW2VdJiYoMD09LS10aGlzLl9ldmVudHNDb3VudD90aGlzLl9ldmVudHM9bmV3IG46ZGVsZXRlIHRoaXMuX2V2ZW50c1tlXSkpOih0aGlzLl9ldmVudHM9bmV3IG4sdGhpcy5fZXZlbnRzQ291bnQ9MCksdGhpc30sby5wcm90b3R5cGUub2ZmPW8ucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyLG8ucHJvdG90eXBlLmFkZExpc3RlbmVyPW8ucHJvdG90eXBlLm9uLG8ucHJvdG90eXBlLnNldE1heExpc3RlbmVycz1mdW5jdGlvbigpe3JldHVybiB0aGlzfSxvLnByZWZpeGVkPWwsby5FdmVudEVtaXR0ZXI9byx2b2lkIDAhPT10JiYodC5leHBvcnRzPW8pfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIG8odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1mdW5jdGlvbiBpKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTtyZXR1cm4hZXx8Im9iamVjdCIhPXR5cGVvZiBlJiYiZnVuY3Rpb24iIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gbCh0LGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9ZnVuY3Rpb24gYSh0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIHYuZGVmYXVsdHx8dCBpbnN0YW5jZW9mIHkuQmxvY2tFbWJlZH1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7dmFyIG49W10scj0hMCxvPSExLGk9dm9pZCAwO3RyeXtmb3IodmFyIGwsYT10W1N5bWJvbC5pdGVyYXRvcl0oKTshKHI9KGw9YS5uZXh0KCkpLmRvbmUpJiYobi5wdXNoKGwudmFsdWUpLCFlfHxuLmxlbmd0aCE9PWUpO3I9ITApO31jYXRjaCh0KXtvPSEwLGk9dH1maW5hbGx5e3RyeXshciYmYS5yZXR1cm4mJmEucmV0dXJuKCl9ZmluYWxseXtpZihvKXRocm93IGl9fXJldHVybiBufXJldHVybiBmdW5jdGlvbihlLG4pe2lmKEFycmF5LmlzQXJyYXkoZSkpcmV0dXJuIGU7aWYoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChlKSlyZXR1cm4gdChlLG4pO3Rocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UiKX19KCksdT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIHI9ZVtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIua2V5LHIpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLHIpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLHImJnQoZSxyKSxlfX0oKSxjPWZ1bmN0aW9uIHQoZSxuLHIpe251bGw9PT1lJiYoZT1GdW5jdGlvbi5wcm90b3R5cGUpO3ZhciBvPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxuKTtpZih2b2lkIDA9PT1vKXt2YXIgaT1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7cmV0dXJuIG51bGw9PT1pP3ZvaWQgMDp0KGksbixyKX1pZigidmFsdWUiaW4gbylyZXR1cm4gby52YWx1ZTt2YXIgbD1vLmdldDtpZih2b2lkIDAhPT1sKXJldHVybiBsLmNhbGwocil9LGY9bigwKSxoPXIoZikscD1uKDkpLGQ9cihwKSx5PW4oMyksdj1yKHkpLGI9bigxNCksZz1yKGIpLG09bigxMyksXz1yKG0pLE89bigyMyksdz1yKE8pLHg9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0LG4pe28odGhpcyxlKTt2YXIgcj1pKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx0KSk7cmV0dXJuIHIuZW1pdHRlcj1uLmVtaXR0ZXIsQXJyYXkuaXNBcnJheShuLndoaXRlbGlzdCkmJihyLndoaXRlbGlzdD1uLndoaXRlbGlzdC5yZWR1Y2UoZnVuY3Rpb24odCxlKXtyZXR1cm4gdFtlXT0hMCx0fSx7fSkpLHIuZG9tTm9kZS5hZGRFdmVudExpc3RlbmVyKCJET01Ob2RlSW5zZXJ0ZWQiLGZ1bmN0aW9uKCl7fSksci5vcHRpbWl6ZSgpLHIuZW5hYmxlKCkscn1yZXR1cm4gbChlLHQpLHUoZSxbe2tleToiYmF0Y2hTdGFydCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmJhdGNoPSEwfX0se2tleToiYmF0Y2hFbmQiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5iYXRjaD0hMSx0aGlzLm9wdGltaXplKCl9fSx7a2V5OiJkZWxldGVBdCIsdmFsdWU6ZnVuY3Rpb24odCxuKXt2YXIgcj10aGlzLmxpbmUodCksbz1zKHIsMiksaT1vWzBdLGw9b1sxXSxhPXRoaXMubGluZSh0K24pLHU9cyhhLDEpLGY9dVswXTtpZihjKGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSwiZGVsZXRlQXQiLHRoaXMpLmNhbGwodGhpcyx0LG4pLG51bGwhPWYmJmkhPT1mJiZsPjApe2lmKGkgaW5zdGFuY2VvZiB5LkJsb2NrRW1iZWR8fGYgaW5zdGFuY2VvZiB5LkJsb2NrRW1iZWQpcmV0dXJuIHZvaWQgdGhpcy5vcHRpbWl6ZSgpO2lmKGkgaW5zdGFuY2VvZiBfLmRlZmF1bHQpe3ZhciBoPWkubmV3bGluZUluZGV4KGkubGVuZ3RoKCksITApO2lmKGg+LTEmJihpPWkuc3BsaXQoaCsxKSk9PT1mKXJldHVybiB2b2lkIHRoaXMub3B0aW1pemUoKX1lbHNlIGlmKGYgaW5zdGFuY2VvZiBfLmRlZmF1bHQpe3ZhciBwPWYubmV3bGluZUluZGV4KDApO3A+LTEmJmYuc3BsaXQocCsxKX12YXIgZD1mLmNoaWxkcmVuLmhlYWQgaW5zdGFuY2VvZiBnLmRlZmF1bHQ/bnVsbDpmLmNoaWxkcmVuLmhlYWQ7aS5tb3ZlQ2hpbGRyZW4oZixkKSxpLnJlbW92ZSgpfXRoaXMub3B0aW1pemUoKX19LHtrZXk6ImVuYWJsZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD0hKGFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdKXx8YXJndW1lbnRzWzBdO3RoaXMuZG9tTm9kZS5zZXRBdHRyaWJ1dGUoImNvbnRlbnRlZGl0YWJsZSIsdCl9fSx7a2V5OiJmb3JtYXRBdCIsdmFsdWU6ZnVuY3Rpb24odCxuLHIsbyl7KG51bGw9PXRoaXMud2hpdGVsaXN0fHx0aGlzLndoaXRlbGlzdFtyXSkmJihjKGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSwiZm9ybWF0QXQiLHRoaXMpLmNhbGwodGhpcyx0LG4scixvKSx0aGlzLm9wdGltaXplKCkpfX0se2tleToiaW5zZXJ0QXQiLHZhbHVlOmZ1bmN0aW9uKHQsbixyKXtpZihudWxsPT1yfHxudWxsPT10aGlzLndoaXRlbGlzdHx8dGhpcy53aGl0ZWxpc3Rbbl0pe2lmKHQ+PXRoaXMubGVuZ3RoKCkpaWYobnVsbD09cnx8bnVsbD09aC5kZWZhdWx0LnF1ZXJ5KG4saC5kZWZhdWx0LlNjb3BlLkJMT0NLKSl7dmFyIG89aC5kZWZhdWx0LmNyZWF0ZSh0aGlzLnN0YXRpY3MuZGVmYXVsdENoaWxkKTt0aGlzLmFwcGVuZENoaWxkKG8pLG51bGw9PXImJm4uZW5kc1dpdGgoIlxuIikmJihuPW4uc2xpY2UoMCwtMSkpLG8uaW5zZXJ0QXQoMCxuLHIpfWVsc2V7dmFyIGk9aC5kZWZhdWx0LmNyZWF0ZShuLHIpO3RoaXMuYXBwZW5kQ2hpbGQoaSl9ZWxzZSBjKGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSwiaW5zZXJ0QXQiLHRoaXMpLmNhbGwodGhpcyx0LG4scik7dGhpcy5vcHRpbWl6ZSgpfX19LHtrZXk6Imluc2VydEJlZm9yZSIsdmFsdWU6ZnVuY3Rpb24odCxuKXtpZih0LnN0YXRpY3Muc2NvcGU9PT1oLmRlZmF1bHQuU2NvcGUuSU5MSU5FX0JMT1Qpe3ZhciByPWguZGVmYXVsdC5jcmVhdGUodGhpcy5zdGF0aWNzLmRlZmF1bHRDaGlsZCk7ci5hcHBlbmRDaGlsZCh0KSx0PXJ9YyhlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksImluc2VydEJlZm9yZSIsdGhpcykuY2FsbCh0aGlzLHQsbil9fSx7a2V5OiJsZWFmIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wYXRoKHQpLnBvcCgpfHxbbnVsbCwtMV19fSx7a2V5OiJsaW5lIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdD09PXRoaXMubGVuZ3RoKCk/dGhpcy5saW5lKHQtMSk6dGhpcy5kZXNjZW5kYW50KGEsdCl9fSx7a2V5OiJsaW5lcyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06MCxlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpOdW1iZXIuTUFYX1ZBTFVFO3JldHVybiBmdW5jdGlvbiB0KGUsbixyKXt2YXIgbz1bXSxpPXI7cmV0dXJuIGUuY2hpbGRyZW4uZm9yRWFjaEF0KG4scixmdW5jdGlvbihlLG4scil7YShlKT9vLnB1c2goZSk6ZSBpbnN0YW5jZW9mIGguZGVmYXVsdC5Db250YWluZXImJihvPW8uY29uY2F0KHQoZSxuLGkpKSksaS09cn0pLG99KHRoaXMsdCxlKX19LHtrZXk6Im9wdGltaXplIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpbXSxuPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fTshMCE9PXRoaXMuYmF0Y2gmJihjKGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSwib3B0aW1pemUiLHRoaXMpLmNhbGwodGhpcyx0LG4pLHQubGVuZ3RoPjAmJnRoaXMuZW1pdHRlci5lbWl0KGQuZGVmYXVsdC5ldmVudHMuU0NST0xMX09QVElNSVpFLHQsbikpfX0se2tleToicGF0aCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGMoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLCJwYXRoIix0aGlzKS5jYWxsKHRoaXMsdCkuc2xpY2UoMSl9fSx7a2V5OiJ1cGRhdGUiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKCEwIT09dGhpcy5iYXRjaCl7dmFyIG49ZC5kZWZhdWx0LnNvdXJjZXMuVVNFUjsic3RyaW5nIj09dHlwZW9mIHQmJihuPXQpLEFycmF5LmlzQXJyYXkodCl8fCh0PXRoaXMub2JzZXJ2ZXIudGFrZVJlY29yZHMoKSksdC5sZW5ndGg+MCYmdGhpcy5lbWl0dGVyLmVtaXQoZC5kZWZhdWx0LmV2ZW50cy5TQ1JPTExfQkVGT1JFX1VQREFURSxuLHQpLGMoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLCJ1cGRhdGUiLHRoaXMpLmNhbGwodGhpcyx0LmNvbmNhdChbXSkpLHQubGVuZ3RoPjAmJnRoaXMuZW1pdHRlci5lbWl0KGQuZGVmYXVsdC5ldmVudHMuU0NST0xMX1VQREFURSxuLHQpfX19XSksZX0oaC5kZWZhdWx0LlNjcm9sbCk7eC5ibG90TmFtZT0ic2Nyb2xsIix4LmNsYXNzTmFtZT0icWwtZWRpdG9yIix4LnRhZ05hbWU9IkRJViIseC5kZWZhdWx0Q2hpbGQ9ImJsb2NrIix4LmFsbG93ZWRDaGlsZHJlbj1bdi5kZWZhdWx0LHkuQmxvY2tFbWJlZCx3LmRlZmF1bHRdLGUuZGVmYXVsdD14fSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIG8odCxlLG4pe3JldHVybiBlIGluIHQ/T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSx7dmFsdWU6bixlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pOnRbZV09bix0fWZ1bmN0aW9uIGkodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1mdW5jdGlvbiBsKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTtyZXR1cm4hZXx8Im9iamVjdCIhPXR5cGVvZiBlJiYiZnVuY3Rpb24iIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gYSh0LGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9ZnVuY3Rpb24gcyh0LGUsbil7cmV0dXJuIm9iamVjdCI9PT0odm9pZCAwPT09ZT8idW5kZWZpbmVkIjp4KGUpKT9PYmplY3Qua2V5cyhlKS5yZWR1Y2UoZnVuY3Rpb24odCxuKXtyZXR1cm4gcyh0LG4sZVtuXSl9LHQpOnQucmVkdWNlKGZ1bmN0aW9uKHQscil7cmV0dXJuIHIuYXR0cmlidXRlcyYmci5hdHRyaWJ1dGVzW2VdP3QucHVzaChyKTp0Lmluc2VydChyLmluc2VydCwoMCxqLmRlZmF1bHQpKHt9LG8oe30sZSxuKSxyLmF0dHJpYnV0ZXMpKX0sbmV3IHEuZGVmYXVsdCl9ZnVuY3Rpb24gdSh0KXtpZih0Lm5vZGVUeXBlIT09Tm9kZS5FTEVNRU5UX05PREUpcmV0dXJue307cmV0dXJuIHRbIl9fcWwtY29tcHV0ZWQtc3R5bGUiXXx8KHRbIl9fcWwtY29tcHV0ZWQtc3R5bGUiXT13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0KSl9ZnVuY3Rpb24gYyh0LGUpe2Zvcih2YXIgbj0iIixyPXQub3BzLmxlbmd0aC0xO3I+PTAmJm4ubGVuZ3RoPGUubGVuZ3RoOy0tcil7dmFyIG89dC5vcHNbcl07aWYoInN0cmluZyIhPXR5cGVvZiBvLmluc2VydClicmVhaztuPW8uaW5zZXJ0K259cmV0dXJuIG4uc2xpY2UoLTEqZS5sZW5ndGgpPT09ZX1mdW5jdGlvbiBmKHQpe3JldHVybiAwIT09dC5jaGlsZE5vZGVzLmxlbmd0aCYmWyJibG9jayIsImxpc3QtaXRlbSJdLmluZGV4T2YodSh0KS5kaXNwbGF5KT4tMX1mdW5jdGlvbiBoKHQsZSxuKXtyZXR1cm4gdC5ub2RlVHlwZT09PXQuVEVYVF9OT0RFP24ucmVkdWNlKGZ1bmN0aW9uKGUsbil7cmV0dXJuIG4odCxlKX0sbmV3IHEuZGVmYXVsdCk6dC5ub2RlVHlwZT09PXQuRUxFTUVOVF9OT0RFP1tdLnJlZHVjZS5jYWxsKHQuY2hpbGROb2Rlc3x8W10sZnVuY3Rpb24ocixvKXt2YXIgaT1oKG8sZSxuKTtyZXR1cm4gby5ub2RlVHlwZT09PXQuRUxFTUVOVF9OT0RFJiYoaT1lLnJlZHVjZShmdW5jdGlvbih0LGUpe3JldHVybiBlKG8sdCl9LGkpLGk9KG9bV118fFtdKS5yZWR1Y2UoZnVuY3Rpb24odCxlKXtyZXR1cm4gZShvLHQpfSxpKSksci5jb25jYXQoaSl9LG5ldyBxLmRlZmF1bHQpOm5ldyBxLmRlZmF1bHR9ZnVuY3Rpb24gcCh0LGUsbil7cmV0dXJuIHMobix0LCEwKX1mdW5jdGlvbiBkKHQsZSl7dmFyIG49UC5kZWZhdWx0LkF0dHJpYnV0b3IuQXR0cmlidXRlLmtleXModCkscj1QLmRlZmF1bHQuQXR0cmlidXRvci5DbGFzcy5rZXlzKHQpLG89UC5kZWZhdWx0LkF0dHJpYnV0b3IuU3R5bGUua2V5cyh0KSxpPXt9O3JldHVybiBuLmNvbmNhdChyKS5jb25jYXQobykuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgbj1QLmRlZmF1bHQucXVlcnkoZSxQLmRlZmF1bHQuU2NvcGUuQVRUUklCVVRFKTtudWxsIT1uJiYoaVtuLmF0dHJOYW1lXT1uLnZhbHVlKHQpLGlbbi5hdHRyTmFtZV0pfHwobj1ZW2VdLG51bGwhPW4mJm4uYXR0ck5hbWU9PT1lJiYoaVtuLmF0dHJOYW1lXT1uLnZhbHVlKHQpfHx2b2lkIDApLG51bGwhPShuPVhbZV0pJiZuLmF0dHJOYW1lPT09ZSYmKG49WFtlXSxpW24uYXR0ck5hbWVdPW4udmFsdWUodCl8fHZvaWQgMCkpfSksT2JqZWN0LmtleXMoaSkubGVuZ3RoPjAmJihlPXMoZSxpKSksZX1mdW5jdGlvbiB5KHQsZSl7dmFyIG49UC5kZWZhdWx0LnF1ZXJ5KHQpO2lmKG51bGw9PW4pcmV0dXJuIGU7aWYobi5wcm90b3R5cGUgaW5zdGFuY2VvZiBQLmRlZmF1bHQuRW1iZWQpe3ZhciByPXt9LG89bi52YWx1ZSh0KTtudWxsIT1vJiYocltuLmJsb3ROYW1lXT1vLGU9KG5ldyBxLmRlZmF1bHQpLmluc2VydChyLG4uZm9ybWF0cyh0KSkpfWVsc2UiZnVuY3Rpb24iPT10eXBlb2Ygbi5mb3JtYXRzJiYoZT1zKGUsbi5ibG90TmFtZSxuLmZvcm1hdHModCkpKTtyZXR1cm4gZX1mdW5jdGlvbiB2KHQsZSl7cmV0dXJuIGMoZSwiXG4iKXx8ZS5pbnNlcnQoIlxuIiksZX1mdW5jdGlvbiBiKCl7cmV0dXJuIG5ldyBxLmRlZmF1bHR9ZnVuY3Rpb24gZyh0LGUpe3ZhciBuPVAuZGVmYXVsdC5xdWVyeSh0KTtpZihudWxsPT1ufHwibGlzdC1pdGVtIiE9PW4uYmxvdE5hbWV8fCFjKGUsIlxuIikpcmV0dXJuIGU7Zm9yKHZhciByPS0xLG89dC5wYXJlbnROb2RlOyFvLmNsYXNzTGlzdC5jb250YWlucygicWwtY2xpcGJvYXJkIik7KSJsaXN0Ij09PShQLmRlZmF1bHQucXVlcnkobyl8fHt9KS5ibG90TmFtZSYmKHIrPTEpLG89by5wYXJlbnROb2RlO3JldHVybiByPD0wP2U6ZS5jb21wb3NlKChuZXcgcS5kZWZhdWx0KS5yZXRhaW4oZS5sZW5ndGgoKS0xKS5yZXRhaW4oMSx7aW5kZW50OnJ9KSl9ZnVuY3Rpb24gbSh0LGUpe3JldHVybiBjKGUsIlxuIil8fChmKHQpfHxlLmxlbmd0aCgpPjAmJnQubmV4dFNpYmxpbmcmJmYodC5uZXh0U2libGluZykpJiZlLmluc2VydCgiXG4iKSxlfWZ1bmN0aW9uIF8odCxlKXtpZihmKHQpJiZudWxsIT10Lm5leHRFbGVtZW50U2libGluZyYmIWMoZSwiXG5cbiIpKXt2YXIgbj10Lm9mZnNldEhlaWdodCtwYXJzZUZsb2F0KHUodCkubWFyZ2luVG9wKStwYXJzZUZsb2F0KHUodCkubWFyZ2luQm90dG9tKTt0Lm5leHRFbGVtZW50U2libGluZy5vZmZzZXRUb3A+dC5vZmZzZXRUb3ArMS41Km4mJmUuaW5zZXJ0KCJcbiIpfXJldHVybiBlfWZ1bmN0aW9uIE8odCxlKXt2YXIgbj17fSxyPXQuc3R5bGV8fHt9O3JldHVybiByLmZvbnRTdHlsZSYmIml0YWxpYyI9PT11KHQpLmZvbnRTdHlsZSYmKG4uaXRhbGljPSEwKSxyLmZvbnRXZWlnaHQmJih1KHQpLmZvbnRXZWlnaHQuc3RhcnRzV2l0aCgiYm9sZCIpfHxwYXJzZUludCh1KHQpLmZvbnRXZWlnaHQpPj03MDApJiYobi5ib2xkPSEwKSxPYmplY3Qua2V5cyhuKS5sZW5ndGg+MCYmKGU9cyhlLG4pKSxwYXJzZUZsb2F0KHIudGV4dEluZGVudHx8MCk+MCYmKGU9KG5ldyBxLmRlZmF1bHQpLmluc2VydCgiXHQiKS5jb25jYXQoZSkpLGV9ZnVuY3Rpb24gdyh0LGUpe3ZhciBuPXQuZGF0YTtpZigiTzpQIj09PXQucGFyZW50Tm9kZS50YWdOYW1lKXJldHVybiBlLmluc2VydChuLnRyaW0oKSk7aWYoMD09PW4udHJpbSgpLmxlbmd0aCYmdC5wYXJlbnROb2RlLmNsYXNzTGlzdC5jb250YWlucygicWwtY2xpcGJvYXJkIikpcmV0dXJuIGU7aWYoIXUodC5wYXJlbnROb2RlKS53aGl0ZVNwYWNlLnN0YXJ0c1dpdGgoInByZSIpKXt2YXIgcj1mdW5jdGlvbih0LGUpe3JldHVybiBlPWUucmVwbGFjZSgvW15cdTAwYTBdL2csIiIpLGUubGVuZ3RoPDEmJnQ/IiAiOmV9O249bi5yZXBsYWNlKC9cclxuL2csIiAiKS5yZXBsYWNlKC9cbi9nLCIgIiksbj1uLnJlcGxhY2UoL1xzXHMrL2csci5iaW5kKHIsITApKSwobnVsbD09dC5wcmV2aW91c1NpYmxpbmcmJmYodC5wYXJlbnROb2RlKXx8bnVsbCE9dC5wcmV2aW91c1NpYmxpbmcmJmYodC5wcmV2aW91c1NpYmxpbmcpKSYmKG49bi5yZXBsYWNlKC9eXHMrLyxyLmJpbmQociwhMSkpKSwobnVsbD09dC5uZXh0U2libGluZyYmZih0LnBhcmVudE5vZGUpfHxudWxsIT10Lm5leHRTaWJsaW5nJiZmKHQubmV4dFNpYmxpbmcpKSYmKG49bi5yZXBsYWNlKC9ccyskLyxyLmJpbmQociwhMSkpKX1yZXR1cm4gZS5pbnNlcnQobil9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLGUubWF0Y2hUZXh0PWUubWF0Y2hTcGFjaW5nPWUubWF0Y2hOZXdsaW5lPWUubWF0Y2hCbG90PWUubWF0Y2hBdHRyaWJ1dG9yPWUuZGVmYXVsdD12b2lkIDA7dmFyIHg9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmInN5bWJvbCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmdCE9PVN5bWJvbC5wcm90b3R5cGU/InN5bWJvbCI6dHlwZW9mIHR9LGs9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7dmFyIG49W10scj0hMCxvPSExLGk9dm9pZCAwO3RyeXtmb3IodmFyIGwsYT10W1N5bWJvbC5pdGVyYXRvcl0oKTshKHI9KGw9YS5uZXh0KCkpLmRvbmUpJiYobi5wdXNoKGwudmFsdWUpLCFlfHxuLmxlbmd0aCE9PWUpO3I9ITApO31jYXRjaCh0KXtvPSEwLGk9dH1maW5hbGx5e3RyeXshciYmYS5yZXR1cm4mJmEucmV0dXJuKCl9ZmluYWxseXtpZihvKXRocm93IGl9fXJldHVybiBufXJldHVybiBmdW5jdGlvbihlLG4pe2lmKEFycmF5LmlzQXJyYXkoZSkpcmV0dXJuIGU7aWYoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChlKSlyZXR1cm4gdChlLG4pO3Rocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UiKX19KCksRT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIHI9ZVtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIua2V5LHIpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLHIpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLHImJnQoZSxyKSxlfX0oKSxOPW4oMiksaj1yKE4pLEE9big0KSxxPXIoQSksVD1uKDApLFA9cihUKSxTPW4oNiksQz1yKFMpLEw9bigxMCksTT1yKEwpLFI9big3KSxJPXIoUiksQj1uKDMzKSxEPW4oMzQpLFU9bigxMyksRj1yKFUpLEg9bigyNSksSz1uKDM1KSx6PW4oMzYpLFo9bigzNyksVj0oMCxNLmRlZmF1bHQpKCJxdWlsbDpjbGlwYm9hcmQiKSxXPSJfX3FsLW1hdGNoZXIiLEc9W1tOb2RlLlRFWFRfTk9ERSx3XSxbTm9kZS5URVhUX05PREUsbV0sWyJiciIsdl0sW05vZGUuRUxFTUVOVF9OT0RFLG1dLFtOb2RlLkVMRU1FTlRfTk9ERSx5XSxbTm9kZS5FTEVNRU5UX05PREUsX10sW05vZGUuRUxFTUVOVF9OT0RFLGRdLFtOb2RlLkVMRU1FTlRfTk9ERSxPXSxbImxpIixnXSxbImIiLHAuYmluZChwLCJib2xkIildLFsiaSIscC5iaW5kKHAsIml0YWxpYyIpXSxbInN0eWxlIixiXV0sWT1bQi5BbGlnbkF0dHJpYnV0ZSxLLkRpcmVjdGlvbkF0dHJpYnV0ZV0ucmVkdWNlKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRbZS5rZXlOYW1lXT1lLHR9LHt9KSxYPVtCLkFsaWduU3R5bGUsRC5CYWNrZ3JvdW5kU3R5bGUsSC5Db2xvclN0eWxlLEsuRGlyZWN0aW9uU3R5bGUsei5Gb250U3R5bGUsWi5TaXplU3R5bGVdLnJlZHVjZShmdW5jdGlvbih0LGUpe3JldHVybiB0W2Uua2V5TmFtZV09ZSx0fSx7fSksJD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQsbil7aSh0aGlzLGUpO3ZhciByPWwodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHQsbikpO3JldHVybiByLnF1aWxsLnJvb3QuYWRkRXZlbnRMaXN0ZW5lcigicGFzdGUiLHIub25QYXN0ZS5iaW5kKHIpKSxyLmNvbnRhaW5lcj1yLnF1aWxsLmFkZENvbnRhaW5lcigicWwtY2xpcGJvYXJkIiksci5jb250YWluZXIuc2V0QXR0cmlidXRlKCJjb250ZW50ZWRpdGFibGUiLCEwKSxyLmNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoInRhYmluZGV4IiwtMSksci5tYXRjaGVycz1bXSxHLmNvbmNhdChyLm9wdGlvbnMubWF0Y2hlcnMpLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIGU9ayh0LDIpLG89ZVswXSxpPWVbMV07KG4ubWF0Y2hWaXN1YWx8fGkhPT1fKSYmci5hZGRNYXRjaGVyKG8saSl9KSxyfXJldHVybiBhKGUsdCksRShlLFt7a2V5OiJhZGRNYXRjaGVyIix2YWx1ZTpmdW5jdGlvbih0LGUpe3RoaXMubWF0Y2hlcnMucHVzaChbdCxlXSl9fSx7a2V5OiJjb252ZXJ0Iix2YWx1ZTpmdW5jdGlvbih0KXtpZigic3RyaW5nIj09dHlwZW9mIHQpcmV0dXJuIHRoaXMuY29udGFpbmVyLmlubmVySFRNTD10LnJlcGxhY2UoL1w+XHI/XG4gK1w8L2csIj48IiksdGhpcy5jb252ZXJ0KCk7dmFyIGU9dGhpcy5xdWlsbC5nZXRGb3JtYXQodGhpcy5xdWlsbC5zZWxlY3Rpb24uc2F2ZWRSYW5nZS5pbmRleCk7aWYoZVtGLmRlZmF1bHQuYmxvdE5hbWVdKXt2YXIgbj10aGlzLmNvbnRhaW5lci5pbm5lclRleHQ7cmV0dXJuIHRoaXMuY29udGFpbmVyLmlubmVySFRNTD0iIiwobmV3IHEuZGVmYXVsdCkuaW5zZXJ0KG4sbyh7fSxGLmRlZmF1bHQuYmxvdE5hbWUsZVtGLmRlZmF1bHQuYmxvdE5hbWVdKSl9dmFyIHI9dGhpcy5wcmVwYXJlTWF0Y2hpbmcoKSxpPWsociwyKSxsPWlbMF0sYT1pWzFdLHM9aCh0aGlzLmNvbnRhaW5lcixsLGEpO3JldHVybiBjKHMsIlxuIikmJm51bGw9PXMub3BzW3Mub3BzLmxlbmd0aC0xXS5hdHRyaWJ1dGVzJiYocz1zLmNvbXBvc2UoKG5ldyBxLmRlZmF1bHQpLnJldGFpbihzLmxlbmd0aCgpLTEpLmRlbGV0ZSgxKSkpLFYubG9nKCJjb252ZXJ0Iix0aGlzLmNvbnRhaW5lci5pbm5lckhUTUwscyksdGhpcy5jb250YWluZXIuaW5uZXJIVE1MPSIiLHN9fSx7a2V5OiJkYW5nZXJvdXNseVBhc3RlSFRNTCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06Qy5kZWZhdWx0LnNvdXJjZXMuQVBJO2lmKCJzdHJpbmciPT10eXBlb2YgdClyZXR1cm4gdGhpcy5xdWlsbC5zZXRDb250ZW50cyh0aGlzLmNvbnZlcnQodCksZSk7dmFyIHI9dGhpcy5jb252ZXJ0KGUpO3JldHVybiB0aGlzLnF1aWxsLnVwZGF0ZUNvbnRlbnRzKChuZXcgcS5kZWZhdWx0KS5yZXRhaW4odCkuY29uY2F0KHIpLG4pfX0se2tleToib25QYXN0ZSIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZighdC5kZWZhdWx0UHJldmVudGVkJiZ0aGlzLnF1aWxsLmlzRW5hYmxlZCgpKXt2YXIgbj10aGlzLnF1aWxsLmdldFNlbGVjdGlvbigpLHI9KG5ldyBxLmRlZmF1bHQpLnJldGFpbihuLmluZGV4KSxvPXRoaXMucXVpbGwuc2Nyb2xsaW5nQ29udGFpbmVyLnNjcm9sbFRvcDt0aGlzLmNvbnRhaW5lci5mb2N1cygpLHRoaXMucXVpbGwuc2VsZWN0aW9uLnVwZGF0ZShDLmRlZmF1bHQuc291cmNlcy5TSUxFTlQpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtyPXIuY29uY2F0KGUuY29udmVydCgpKS5kZWxldGUobi5sZW5ndGgpLGUucXVpbGwudXBkYXRlQ29udGVudHMocixDLmRlZmF1bHQuc291cmNlcy5VU0VSKSxlLnF1aWxsLnNldFNlbGVjdGlvbihyLmxlbmd0aCgpLW4ubGVuZ3RoLEMuZGVmYXVsdC5zb3VyY2VzLlNJTEVOVCksZS5xdWlsbC5zY3JvbGxpbmdDb250YWluZXIuc2Nyb2xsVG9wPW8sZS5xdWlsbC5mb2N1cygpfSwxKX19fSx7a2V5OiJwcmVwYXJlTWF0Y2hpbmciLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPVtdLG49W107cmV0dXJuIHRoaXMubWF0Y2hlcnMuZm9yRWFjaChmdW5jdGlvbihyKXt2YXIgbz1rKHIsMiksaT1vWzBdLGw9b1sxXTtzd2l0Y2goaSl7Y2FzZSBOb2RlLlRFWFRfTk9ERTpuLnB1c2gobCk7YnJlYWs7Y2FzZSBOb2RlLkVMRU1FTlRfTk9ERTplLnB1c2gobCk7YnJlYWs7ZGVmYXVsdDpbXS5mb3JFYWNoLmNhbGwodC5jb250YWluZXIucXVlcnlTZWxlY3RvckFsbChpKSxmdW5jdGlvbih0KXt0W1ddPXRbV118fFtdLHRbV10ucHVzaChsKX0pfX0pLFtlLG5dfX1dKSxlfShJLmRlZmF1bHQpOyQuREVGQVVMVFM9e21hdGNoZXJzOltdLG1hdGNoVmlzdWFsOiEwfSxlLmRlZmF1bHQ9JCxlLm1hdGNoQXR0cmlidXRvcj1kLGUubWF0Y2hCbG90PXksZS5tYXRjaE5ld2xpbmU9bSxlLm1hdGNoU3BhY2luZz1fLGUubWF0Y2hUZXh0PXd9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gbyh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIGkodCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiFlfHwib2JqZWN0IiE9dHlwZW9mIGUmJiJmdW5jdGlvbiIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBsKHQsZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1mdW5jdGlvbiBhKHQpe3ZhciBlPXQub3BzW3Qub3BzLmxlbmd0aC0xXTtyZXR1cm4gbnVsbCE9ZSYmKG51bGwhPWUuaW5zZXJ0PyJzdHJpbmciPT10eXBlb2YgZS5pbnNlcnQmJmUuaW5zZXJ0LmVuZHNXaXRoKCJcbiIpOm51bGwhPWUuYXR0cmlidXRlcyYmT2JqZWN0LmtleXMoZS5hdHRyaWJ1dGVzKS5zb21lKGZ1bmN0aW9uKHQpe3JldHVybiBudWxsIT1mLmRlZmF1bHQucXVlcnkodCxmLmRlZmF1bHQuU2NvcGUuQkxPQ0spfSkpfWZ1bmN0aW9uIHModCl7dmFyIGU9dC5yZWR1Y2UoZnVuY3Rpb24odCxlKXtyZXR1cm4gdCs9ZS5kZWxldGV8fDB9LDApLG49dC5sZW5ndGgoKS1lO3JldHVybiBhKHQpJiYobi09MSksbn1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksZS5nZXRMYXN0Q2hhbmdlSW5kZXg9ZS5kZWZhdWx0PXZvaWQgMDt2YXIgdT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIHI9ZVtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIua2V5LHIpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLHIpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLHImJnQoZSxyKSxlfX0oKSxjPW4oMCksZj1yKGMpLGg9big2KSxwPXIoaCksZD1uKDcpLHk9cihkKSx2PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCxuKXtvKHRoaXMsZSk7dmFyIHI9aSh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMsdCxuKSk7cmV0dXJuIHIubGFzdFJlY29yZGVkPTAsci5pZ25vcmVDaGFuZ2U9ITEsci5jbGVhcigpLHIucXVpbGwub24ocC5kZWZhdWx0LmV2ZW50cy5FRElUT1JfQ0hBTkdFLGZ1bmN0aW9uKHQsZSxuLG8pe3QhPT1wLmRlZmF1bHQuZXZlbnRzLlRFWFRfQ0hBTkdFfHxyLmlnbm9yZUNoYW5nZXx8KHIub3B0aW9ucy51c2VyT25seSYmbyE9PXAuZGVmYXVsdC5zb3VyY2VzLlVTRVI/ci50cmFuc2Zvcm0oZSk6ci5yZWNvcmQoZSxuKSl9KSxyLnF1aWxsLmtleWJvYXJkLmFkZEJpbmRpbmcoe2tleToiWiIsc2hvcnRLZXk6ITB9LHIudW5kby5iaW5kKHIpKSxyLnF1aWxsLmtleWJvYXJkLmFkZEJpbmRpbmcoe2tleToiWiIsc2hvcnRLZXk6ITAsc2hpZnRLZXk6ITB9LHIucmVkby5iaW5kKHIpKSwvV2luL2kudGVzdChuYXZpZ2F0b3IucGxhdGZvcm0pJiZyLnF1aWxsLmtleWJvYXJkLmFkZEJpbmRpbmcoe2tleToiWSIsc2hvcnRLZXk6ITB9LHIucmVkby5iaW5kKHIpKSxyfXJldHVybiBsKGUsdCksdShlLFt7a2V5OiJjaGFuZ2UiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7aWYoMCE9PXRoaXMuc3RhY2tbdF0ubGVuZ3RoKXt2YXIgbj10aGlzLnN0YWNrW3RdLnBvcCgpO3RoaXMubGFzdFJlY29yZGVkPTAsdGhpcy5pZ25vcmVDaGFuZ2U9ITAsdGhpcy5xdWlsbC51cGRhdGVDb250ZW50cyhuW3RdLHAuZGVmYXVsdC5zb3VyY2VzLlVTRVIpLHRoaXMuaWdub3JlQ2hhbmdlPSExO3ZhciByPXMoblt0XSk7dGhpcy5xdWlsbC5zZXRTZWxlY3Rpb24ociksdGhpcy5zdGFja1tlXS5wdXNoKG4pfX19LHtrZXk6ImNsZWFyIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuc3RhY2s9e3VuZG86W10scmVkbzpbXX19fSx7a2V5OiJjdXRvZmYiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5sYXN0UmVjb3JkZWQ9MH19LHtrZXk6InJlY29yZCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtpZigwIT09dC5vcHMubGVuZ3RoKXt0aGlzLnN0YWNrLnJlZG89W107dmFyIG49dGhpcy5xdWlsbC5nZXRDb250ZW50cygpLmRpZmYoZSkscj1EYXRlLm5vdygpO2lmKHRoaXMubGFzdFJlY29yZGVkK3RoaXMub3B0aW9ucy5kZWxheT5yJiZ0aGlzLnN0YWNrLnVuZG8ubGVuZ3RoPjApe3ZhciBvPXRoaXMuc3RhY2sudW5kby5wb3AoKTtuPW4uY29tcG9zZShvLnVuZG8pLHQ9by5yZWRvLmNvbXBvc2UodCl9ZWxzZSB0aGlzLmxhc3RSZWNvcmRlZD1yO3RoaXMuc3RhY2sudW5kby5wdXNoKHtyZWRvOnQsdW5kbzpufSksdGhpcy5zdGFjay51bmRvLmxlbmd0aD50aGlzLm9wdGlvbnMubWF4U3RhY2smJnRoaXMuc3RhY2sudW5kby5zaGlmdCgpfX19LHtrZXk6InJlZG8iLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5jaGFuZ2UoInJlZG8iLCJ1bmRvIil9fSx7a2V5OiJ0cmFuc2Zvcm0iLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuc3RhY2sudW5kby5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UudW5kbz10LnRyYW5zZm9ybShlLnVuZG8sITApLGUucmVkbz10LnRyYW5zZm9ybShlLnJlZG8sITApfSksdGhpcy5zdGFjay5yZWRvLmZvckVhY2goZnVuY3Rpb24oZSl7ZS51bmRvPXQudHJhbnNmb3JtKGUudW5kbywhMCksZS5yZWRvPXQudHJhbnNmb3JtKGUucmVkbywhMCl9KX19LHtrZXk6InVuZG8iLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5jaGFuZ2UoInVuZG8iLCJyZWRvIil9fV0pLGV9KHkuZGVmYXVsdCk7di5ERUZBVUxUUz17ZGVsYXk6MWUzLG1heFN0YWNrOjEwMCx1c2VyT25seTohMX0sZS5kZWZhdWx0PXYsZS5nZXRMYXN0Q2hhbmdlSW5kZXg9c30sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gbyh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWV8fCJvYmplY3QiIT10eXBlb2YgZSYmImZ1bmN0aW9uIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIGkodCxlKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSxlLkluZGVudENsYXNzPXZvaWQgMDt2YXIgbD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIHI9ZVtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIua2V5LHIpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLHIpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLHImJnQoZSxyKSxlfX0oKSxhPWZ1bmN0aW9uIHQoZSxuLHIpe251bGw9PT1lJiYoZT1GdW5jdGlvbi5wcm90b3R5cGUpO3ZhciBvPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxuKTtpZih2b2lkIDA9PT1vKXt2YXIgaT1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7cmV0dXJuIG51bGw9PT1pP3ZvaWQgMDp0KGksbixyKX1pZigidmFsdWUiaW4gbylyZXR1cm4gby52YWx1ZTt2YXIgbD1vLmdldDtpZih2b2lkIDAhPT1sKXJldHVybiBsLmNhbGwocil9LHM9bigwKSx1PWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX0ocyksYz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHIodGhpcyxlKSxvKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGkoZSx0KSxsKGUsW3trZXk6ImFkZCIsdmFsdWU6ZnVuY3Rpb24odCxuKXtpZigiKzEiPT09bnx8Ii0xIj09PW4pe3ZhciByPXRoaXMudmFsdWUodCl8fDA7bj0iKzEiPT09bj9yKzE6ci0xfXJldHVybiAwPT09bj8odGhpcy5yZW1vdmUodCksITApOmEoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLCJhZGQiLHRoaXMpLmNhbGwodGhpcyx0LG4pfX0se2tleToiY2FuQWRkIix2YWx1ZTpmdW5jdGlvbih0LG4pe3JldHVybiBhKGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSwiY2FuQWRkIix0aGlzKS5jYWxsKHRoaXMsdCxuKXx8YShlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksImNhbkFkZCIsdGhpcykuY2FsbCh0aGlzLHQscGFyc2VJbnQobikpfX0se2tleToidmFsdWUiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBwYXJzZUludChhKGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSwidmFsdWUiLHRoaXMpLmNhbGwodGhpcyx0KSl8fHZvaWQgMH19XSksZX0odS5kZWZhdWx0LkF0dHJpYnV0b3IuQ2xhc3MpLGY9bmV3IGMoImluZGVudCIsInFsLWluZGVudCIse3Njb3BlOnUuZGVmYXVsdC5TY29wZS5CTE9DSyx3aGl0ZWxpc3Q6WzEsMiwzLDQsNSw2LDcsOF19KTtlLkluZGVudENsYXNzPWZ9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIG8odCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiFlfHwib2JqZWN0IiE9dHlwZW9mIGUmJiJmdW5jdGlvbiIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBpKHQsZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGw9bigzKSxhPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX0obCkscz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHIodGhpcyxlKSxvKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGkoZSx0KSxlfShhLmRlZmF1bHQpO3MuYmxvdE5hbWU9ImJsb2NrcXVvdGUiLHMudGFnTmFtZT0iYmxvY2txdW90ZSIsZS5kZWZhdWx0PXN9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIG8odCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiFlfHwib2JqZWN0IiE9dHlwZW9mIGUmJiJmdW5jdGlvbiIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBpKHQsZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciByPWVbbl07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsInZhbHVlImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLmtleSxyKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxyJiZ0KGUsciksZX19KCksYT1uKDMpLHM9ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fShhKSx1PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gcih0aGlzLGUpLG8odGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gaShlLHQpLGwoZSxudWxsLFt7a2V5OiJmb3JtYXRzIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50YWdOYW1lLmluZGV4T2YodC50YWdOYW1lKSsxfX1dKSxlfShzLmRlZmF1bHQpO3UuYmxvdE5hbWU9ImhlYWRlciIsdS50YWdOYW1lPVsiSDEiLCJIMiIsIkgzIiwiSDQiLCJINSIsIkg2Il0sZS5kZWZhdWx0PXV9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gbyh0LGUsbil7cmV0dXJuIGUgaW4gdD9PYmplY3QuZGVmaW5lUHJvcGVydHkodCxlLHt2YWx1ZTpuLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSk6dFtlXT1uLHR9ZnVuY3Rpb24gaSh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIGwodCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiFlfHwib2JqZWN0IiE9dHlwZW9mIGUmJiJmdW5jdGlvbiIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBhKHQsZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksZS5kZWZhdWx0PWUuTGlzdEl0ZW09dm9pZCAwO3ZhciBzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgcj1lW25dO3IuZW51bWVyYWJsZT1yLmVudW1lcmFibGV8fCExLHIuY29uZmlndXJhYmxlPSEwLCJ2YWx1ZSJpbiByJiYoci53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsci5rZXkscil9fXJldHVybiBmdW5jdGlvbihlLG4scil7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksciYmdChlLHIpLGV9fSgpLHU9ZnVuY3Rpb24gdChlLG4scil7bnVsbD09PWUmJihlPUZ1bmN0aW9uLnByb3RvdHlwZSk7dmFyIG89T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLG4pO2lmKHZvaWQgMD09PW8pe3ZhciBpPU9iamVjdC5nZXRQcm90b3R5cGVPZihlKTtyZXR1cm4gbnVsbD09PWk/dm9pZCAwOnQoaSxuLHIpfWlmKCJ2YWx1ZSJpbiBvKXJldHVybiBvLnZhbHVlO3ZhciBsPW8uZ2V0O2lmKHZvaWQgMCE9PWwpcmV0dXJuIGwuY2FsbChyKX0sYz1uKDApLGY9cihjKSxoPW4oMykscD1yKGgpLGQ9bigyMykseT1yKGQpLHY9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBpKHRoaXMsZSksbCh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBhKGUsdCkscyhlLFt7a2V5OiJmb3JtYXQiLHZhbHVlOmZ1bmN0aW9uKHQsbil7dCE9PWIuYmxvdE5hbWV8fG4/dShlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksImZvcm1hdCIsdGhpcykuY2FsbCh0aGlzLHQsbik6dGhpcy5yZXBsYWNlV2l0aChmLmRlZmF1bHQuY3JlYXRlKHRoaXMuc3RhdGljcy5zY29wZSkpfX0se2tleToicmVtb3ZlIix2YWx1ZTpmdW5jdGlvbigpe251bGw9PXRoaXMucHJldiYmbnVsbD09dGhpcy5uZXh0P3RoaXMucGFyZW50LnJlbW92ZSgpOnUoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLCJyZW1vdmUiLHRoaXMpLmNhbGwodGhpcyl9fSx7a2V5OiJyZXBsYWNlV2l0aCIsdmFsdWU6ZnVuY3Rpb24odCxuKXtyZXR1cm4gdGhpcy5wYXJlbnQuaXNvbGF0ZSh0aGlzLm9mZnNldCh0aGlzLnBhcmVudCksdGhpcy5sZW5ndGgoKSksdD09PXRoaXMucGFyZW50LnN0YXRpY3MuYmxvdE5hbWU/KHRoaXMucGFyZW50LnJlcGxhY2VXaXRoKHQsbiksdGhpcyk6KHRoaXMucGFyZW50LnVud3JhcCgpLHUoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLCJyZXBsYWNlV2l0aCIsdGhpcykuY2FsbCh0aGlzLHQsbikpfX1dLFt7a2V5OiJmb3JtYXRzIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdC50YWdOYW1lPT09dGhpcy50YWdOYW1lP3ZvaWQgMDp1KGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSksImZvcm1hdHMiLHRoaXMpLmNhbGwodGhpcyx0KX19XSksZX0ocC5kZWZhdWx0KTt2LmJsb3ROYW1lPSJsaXN0LWl0ZW0iLHYudGFnTmFtZT0iTEkiO3ZhciBiPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCl7aSh0aGlzLGUpO3ZhciBuPWwodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHQpKSxyPWZ1bmN0aW9uKGUpe2lmKGUudGFyZ2V0LnBhcmVudE5vZGU9PT10KXt2YXIgcj1uLnN0YXRpY3MuZm9ybWF0cyh0KSxvPWYuZGVmYXVsdC5maW5kKGUudGFyZ2V0KTsiY2hlY2tlZCI9PT1yP28uZm9ybWF0KCJsaXN0IiwidW5jaGVja2VkIik6InVuY2hlY2tlZCI9PT1yJiZvLmZvcm1hdCgibGlzdCIsImNoZWNrZWQiKX19O3JldHVybiB0LmFkZEV2ZW50TGlzdGVuZXIoInRvdWNoc3RhcnQiLHIpLHQuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vkb3duIixyKSxufXJldHVybiBhKGUsdCkscyhlLG51bGwsW3trZXk6ImNyZWF0ZSIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIG49Im9yZGVyZWQiPT09dD8iT0wiOiJVTCIscj11KGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSksImNyZWF0ZSIsdGhpcykuY2FsbCh0aGlzLG4pO3JldHVybiJjaGVja2VkIiE9PXQmJiJ1bmNoZWNrZWQiIT09dHx8ci5zZXRBdHRyaWJ1dGUoImRhdGEtY2hlY2tlZCIsImNoZWNrZWQiPT09dCkscn19LHtrZXk6ImZvcm1hdHMiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiJPTCI9PT10LnRhZ05hbWU/Im9yZGVyZWQiOiJVTCI9PT10LnRhZ05hbWU/dC5oYXNBdHRyaWJ1dGUoImRhdGEtY2hlY2tlZCIpPyJ0cnVlIj09PXQuZ2V0QXR0cmlidXRlKCJkYXRhLWNoZWNrZWQiKT8iY2hlY2tlZCI6InVuY2hlY2tlZCI6ImJ1bGxldCI6dm9pZCAwfX1dKSxzKGUsW3trZXk6ImZvcm1hdCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0aGlzLmNoaWxkcmVuLmxlbmd0aD4wJiZ0aGlzLmNoaWxkcmVuLnRhaWwuZm9ybWF0KHQsZSl9fSx7a2V5OiJmb3JtYXRzIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBvKHt9LHRoaXMuc3RhdGljcy5ibG90TmFtZSx0aGlzLnN0YXRpY3MuZm9ybWF0cyh0aGlzLmRvbU5vZGUpKX19LHtrZXk6Imluc2VydEJlZm9yZSIsdmFsdWU6ZnVuY3Rpb24odCxuKXtpZih0IGluc3RhbmNlb2Ygdil1KGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSwiaW5zZXJ0QmVmb3JlIix0aGlzKS5jYWxsKHRoaXMsdCxuKTtlbHNle3ZhciByPW51bGw9PW4/dGhpcy5sZW5ndGgoKTpuLm9mZnNldCh0aGlzKSxvPXRoaXMuc3BsaXQocik7by5wYXJlbnQuaW5zZXJ0QmVmb3JlKHQsbyl9fX0se2tleToib3B0aW1pemUiLHZhbHVlOmZ1bmN0aW9uKHQpe3UoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLCJvcHRpbWl6ZSIsdGhpcykuY2FsbCh0aGlzLHQpO3ZhciBuPXRoaXMubmV4dDtudWxsIT1uJiZuLnByZXY9PT10aGlzJiZuLnN0YXRpY3MuYmxvdE5hbWU9PT10aGlzLnN0YXRpY3MuYmxvdE5hbWUmJm4uZG9tTm9kZS50YWdOYW1lPT09dGhpcy5kb21Ob2RlLnRhZ05hbWUmJm4uZG9tTm9kZS5nZXRBdHRyaWJ1dGUoImRhdGEtY2hlY2tlZCIpPT09dGhpcy5kb21Ob2RlLmdldEF0dHJpYnV0ZSgiZGF0YS1jaGVja2VkIikmJihuLm1vdmVDaGlsZHJlbih0aGlzKSxuLnJlbW92ZSgpKX19LHtrZXk6InJlcGxhY2UiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKHQuc3RhdGljcy5ibG90TmFtZSE9PXRoaXMuc3RhdGljcy5ibG90TmFtZSl7dmFyIG49Zi5kZWZhdWx0LmNyZWF0ZSh0aGlzLnN0YXRpY3MuZGVmYXVsdENoaWxkKTt0Lm1vdmVDaGlsZHJlbihuKSx0aGlzLmFwcGVuZENoaWxkKG4pfXUoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLCJyZXBsYWNlIix0aGlzKS5jYWxsKHRoaXMsdCl9fV0pLGV9KHkuZGVmYXVsdCk7Yi5ibG90TmFtZT0ibGlzdCIsYi5zY29wZT1mLmRlZmF1bHQuU2NvcGUuQkxPQ0tfQkxPVCxiLnRhZ05hbWU9WyJPTCIsIlVMIl0sYi5kZWZhdWx0Q2hpbGQ9Imxpc3QtaXRlbSIsYi5hbGxvd2VkQ2hpbGRyZW49W3ZdLGUuTGlzdEl0ZW09dixlLmRlZmF1bHQ9Yn0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gbyh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWV8fCJvYmplY3QiIT10eXBlb2YgZSYmImZ1bmN0aW9uIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIGkodCxlKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbD1uKDM5KSxhPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX0obCkscz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHIodGhpcyxlKSxvKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGkoZSx0KSxlfShhLmRlZmF1bHQpO3MuYmxvdE5hbWU9Iml0YWxpYyIscy50YWdOYW1lPVsiRU0iLCJJIl0sZS5kZWZhdWx0PXN9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIG8odCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiFlfHwib2JqZWN0IiE9dHlwZW9mIGUmJiJmdW5jdGlvbiIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBpKHQsZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciByPWVbbl07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsInZhbHVlImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLmtleSxyKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxyJiZ0KGUsciksZX19KCksYT1mdW5jdGlvbiB0KGUsbixyKXtudWxsPT09ZSYmKGU9RnVuY3Rpb24ucHJvdG90eXBlKTt2YXIgbz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsbik7aWYodm9pZCAwPT09byl7dmFyIGk9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO3JldHVybiBudWxsPT09aT92b2lkIDA6dChpLG4scil9aWYoInZhbHVlImluIG8pcmV0dXJuIG8udmFsdWU7dmFyIGw9by5nZXQ7aWYodm9pZCAwIT09bClyZXR1cm4gbC5jYWxsKHIpfSxzPW4oNSksdT1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19KHMpLGM9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiByKHRoaXMsZSksbyh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBpKGUsdCksbChlLG51bGwsW3trZXk6ImNyZWF0ZSIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuInN1cGVyIj09PXQ/ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3VwIik6InN1YiI9PT10P2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN1YiIpOmEoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSwiY3JlYXRlIix0aGlzKS5jYWxsKHRoaXMsdCl9fSx7a2V5OiJmb3JtYXRzIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4iU1VCIj09PXQudGFnTmFtZT8ic3ViIjoiU1VQIj09PXQudGFnTmFtZT8ic3VwZXIiOnZvaWQgMH19XSksZX0odS5kZWZhdWx0KTtjLmJsb3ROYW1lPSJzY3JpcHQiLGMudGFnTmFtZT1bIlNVQiIsIlNVUCJdLGUuZGVmYXVsdD1jfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1mdW5jdGlvbiBvKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTtyZXR1cm4hZXx8Im9iamVjdCIhPXR5cGVvZiBlJiYiZnVuY3Rpb24iIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gaSh0LGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBsPW4oNSksYT1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19KGwpLHM9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiByKHRoaXMsZSksbyh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBpKGUsdCksZX0oYS5kZWZhdWx0KTtzLmJsb3ROYW1lPSJzdHJpa2UiLHMudGFnTmFtZT0iUyIsZS5kZWZhdWx0PXN9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIG8odCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiFlfHwib2JqZWN0IiE9dHlwZW9mIGUmJiJmdW5jdGlvbiIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBpKHQsZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGw9big1KSxhPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX0obCkscz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHIodGhpcyxlKSxvKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGkoZSx0KSxlfShhLmRlZmF1bHQpO3MuYmxvdE5hbWU9InVuZGVybGluZSIscy50YWdOYW1lPSJVIixlLmRlZmF1bHQ9c30sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gbyh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWV8fCJvYmplY3QiIT10eXBlb2YgZSYmImZ1bmN0aW9uIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIGkodCxlKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIHI9ZVtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIua2V5LHIpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLHIpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLHImJnQoZSxyKSxlfX0oKSxhPWZ1bmN0aW9uIHQoZSxuLHIpe251bGw9PT1lJiYoZT1GdW5jdGlvbi5wcm90b3R5cGUpO3ZhciBvPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxuKTtpZih2b2lkIDA9PT1vKXt2YXIgaT1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7cmV0dXJuIG51bGw9PT1pP3ZvaWQgMDp0KGksbixyKX1pZigidmFsdWUiaW4gbylyZXR1cm4gby52YWx1ZTt2YXIgbD1vLmdldDtpZih2b2lkIDAhPT1sKXJldHVybiBsLmNhbGwocil9LHM9bigwKSx1PWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX0ocyksYz1uKDE1KSxmPVsiYWx0IiwiaGVpZ2h0Iiwid2lkdGgiXSxoPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gcih0aGlzLGUpLG8odGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gaShlLHQpLGwoZSxbe2tleToiZm9ybWF0Iix2YWx1ZTpmdW5jdGlvbih0LG4pe2YuaW5kZXhPZih0KT4tMT9uP3RoaXMuZG9tTm9kZS5zZXRBdHRyaWJ1dGUodCxuKTp0aGlzLmRvbU5vZGUucmVtb3ZlQXR0cmlidXRlKHQpOmEoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLCJmb3JtYXQiLHRoaXMpLmNhbGwodGhpcyx0LG4pfX1dLFt7a2V5OiJjcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBuPWEoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSwiY3JlYXRlIix0aGlzKS5jYWxsKHRoaXMsdCk7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0JiZuLnNldEF0dHJpYnV0ZSgic3JjIix0aGlzLnNhbml0aXplKHQpKSxufX0se2tleToiZm9ybWF0cyIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGYucmVkdWNlKGZ1bmN0aW9uKGUsbil7cmV0dXJuIHQuaGFzQXR0cmlidXRlKG4pJiYoZVtuXT10LmdldEF0dHJpYnV0ZShuKSksZX0se30pfX0se2tleToibWF0Y2giLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybi9cLihqcGU/Z3xnaWZ8cG5nKSQvLnRlc3QodCl8fC9eZGF0YTppbWFnZVwvLis7YmFzZTY0Ly50ZXN0KHQpfX0se2tleToic2FuaXRpemUiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybigwLGMuc2FuaXRpemUpKHQsWyJodHRwIiwiaHR0cHMiLCJkYXRhIl0pP3Q6Ii8vOjAifX0se2tleToidmFsdWUiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0LmdldEF0dHJpYnV0ZSgic3JjIil9fV0pLGV9KHUuZGVmYXVsdC5FbWJlZCk7aC5ibG90TmFtZT0iaW1hZ2UiLGgudGFnTmFtZT0iSU1HIixlLmRlZmF1bHQ9aH0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gbyh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWV8fCJvYmplY3QiIT10eXBlb2YgZSYmImZ1bmN0aW9uIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIGkodCxlKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIHI9ZVtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIua2V5LHIpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLHIpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLHImJnQoZSxyKSxlfX0oKSxhPWZ1bmN0aW9uIHQoZSxuLHIpe251bGw9PT1lJiYoZT1GdW5jdGlvbi5wcm90b3R5cGUpO3ZhciBvPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxuKTtpZih2b2lkIDA9PT1vKXt2YXIgaT1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7cmV0dXJuIG51bGw9PT1pP3ZvaWQgMDp0KGksbixyKX1pZigidmFsdWUiaW4gbylyZXR1cm4gby52YWx1ZTt2YXIgbD1vLmdldDtpZih2b2lkIDAhPT1sKXJldHVybiBsLmNhbGwocil9LHM9bigzKSx1PW4oMTUpLGM9ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fSh1KSxmPVsiaGVpZ2h0Iiwid2lkdGgiXSxoPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gcih0aGlzLGUpLG8odGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gaShlLHQpLGwoZSxbe2tleToiZm9ybWF0Iix2YWx1ZTpmdW5jdGlvbih0LG4pe2YuaW5kZXhPZih0KT4tMT9uP3RoaXMuZG9tTm9kZS5zZXRBdHRyaWJ1dGUodCxuKTp0aGlzLmRvbU5vZGUucmVtb3ZlQXR0cmlidXRlKHQpOmEoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLCJmb3JtYXQiLHRoaXMpLmNhbGwodGhpcyx0LG4pfX1dLFt7a2V5OiJjcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBuPWEoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSwiY3JlYXRlIix0aGlzKS5jYWxsKHRoaXMsdCk7cmV0dXJuIG4uc2V0QXR0cmlidXRlKCJmcmFtZWJvcmRlciIsIjAiKSxuLnNldEF0dHJpYnV0ZSgiYWxsb3dmdWxsc2NyZWVuIiwhMCksbi5zZXRBdHRyaWJ1dGUoInNyYyIsdGhpcy5zYW5pdGl6ZSh0KSksbn19LHtrZXk6ImZvcm1hdHMiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBmLnJlZHVjZShmdW5jdGlvbihlLG4pe3JldHVybiB0Lmhhc0F0dHJpYnV0ZShuKSYmKGVbbl09dC5nZXRBdHRyaWJ1dGUobikpLGV9LHt9KX19LHtrZXk6InNhbml0aXplIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gYy5kZWZhdWx0LnNhbml0aXplKHQpfX0se2tleToidmFsdWUiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0LmdldEF0dHJpYnV0ZSgic3JjIil9fV0pLGV9KHMuQmxvY2tFbWJlZCk7aC5ibG90TmFtZT0idmlkZW8iLGguY2xhc3NOYW1lPSJxbC12aWRlbyIsaC50YWdOYW1lPSJJRlJBTUUiLGUuZGVmYXVsdD1ofSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIG8odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1mdW5jdGlvbiBpKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTtyZXR1cm4hZXx8Im9iamVjdCIhPXR5cGVvZiBlJiYiZnVuY3Rpb24iIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gbCh0LGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLGUuZGVmYXVsdD1lLkZvcm11bGFCbG90PXZvaWQgMDt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIHI9ZVtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIua2V5LHIpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLHIpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLHImJnQoZSxyKSxlfX0oKSxzPWZ1bmN0aW9uIHQoZSxuLHIpe251bGw9PT1lJiYoZT1GdW5jdGlvbi5wcm90b3R5cGUpO3ZhciBvPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxuKTtpZih2b2lkIDA9PT1vKXt2YXIgaT1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7cmV0dXJuIG51bGw9PT1pP3ZvaWQgMDp0KGksbixyKX1pZigidmFsdWUiaW4gbylyZXR1cm4gby52YWx1ZTt2YXIgbD1vLmdldDtpZih2b2lkIDAhPT1sKXJldHVybiBsLmNhbGwocil9LHU9bigyNCksYz1yKHUpLGY9big2KSxoPXIoZikscD1uKDcpLGQ9cihwKSx5PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbyh0aGlzLGUpLGkodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gbChlLHQpLGEoZSxudWxsLFt7a2V5OiJjcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBuPXMoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSwiY3JlYXRlIix0aGlzKS5jYWxsKHRoaXMsdCk7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0JiYod2luZG93LmthdGV4LnJlbmRlcih0LG4se3Rocm93T25FcnJvcjohMSxlcnJvckNvbG9yOiIjZjAwIn0pLG4uc2V0QXR0cmlidXRlKCJkYXRhLXZhbHVlIix0KSksbn19LHtrZXk6InZhbHVlIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdC5nZXRBdHRyaWJ1dGUoImRhdGEtdmFsdWUiKX19XSksZX0oYy5kZWZhdWx0KTt5LmJsb3ROYW1lPSJmb3JtdWxhIix5LmNsYXNzTmFtZT0icWwtZm9ybXVsYSIseS50YWdOYW1lPSJTUEFOIjt2YXIgdj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7byh0aGlzLGUpO3ZhciB0PWkodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7aWYobnVsbD09d2luZG93LmthdGV4KXRocm93IG5ldyBFcnJvcigiRm9ybXVsYSBtb2R1bGUgcmVxdWlyZXMgS2FUZVguIik7cmV0dXJuIHR9cmV0dXJuIGwoZSx0KSxhKGUsbnVsbCxbe2tleToicmVnaXN0ZXIiLHZhbHVlOmZ1bmN0aW9uKCl7aC5kZWZhdWx0LnJlZ2lzdGVyKHksITApfX1dKSxlfShkLmRlZmF1bHQpO2UuRm9ybXVsYUJsb3Q9eSxlLmRlZmF1bHQ9dn0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiBvKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gaSh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWV8fCJvYmplY3QiIT10eXBlb2YgZSYmImZ1bmN0aW9uIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIGwodCxlKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSxlLmRlZmF1bHQ9ZS5Db2RlVG9rZW49ZS5Db2RlQmxvY2s9dm9pZCAwO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgcj1lW25dO3IuZW51bWVyYWJsZT1yLmVudW1lcmFibGV8fCExLHIuY29uZmlndXJhYmxlPSEwLCJ2YWx1ZSJpbiByJiYoci53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsci5rZXkscil9fXJldHVybiBmdW5jdGlvbihlLG4scil7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksciYmdChlLHIpLGV9fSgpLHM9ZnVuY3Rpb24gdChlLG4scil7bnVsbD09PWUmJihlPUZ1bmN0aW9uLnByb3RvdHlwZSk7dmFyIG89T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLG4pO2lmKHZvaWQgMD09PW8pe3ZhciBpPU9iamVjdC5nZXRQcm90b3R5cGVPZihlKTtyZXR1cm4gbnVsbD09PWk/dm9pZCAwOnQoaSxuLHIpfWlmKCJ2YWx1ZSJpbiBvKXJldHVybiBvLnZhbHVlO3ZhciBsPW8uZ2V0O2lmKHZvaWQgMCE9PWwpcmV0dXJuIGwuY2FsbChyKX0sdT1uKDApLGM9cih1KSxmPW4oNiksaD1yKGYpLHA9big3KSxkPXIocCkseT1uKDEzKSx2PXIoeSksYj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG8odGhpcyxlKSxpKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGwoZSx0KSxhKGUsW3trZXk6InJlcGxhY2VXaXRoIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLmRvbU5vZGUudGV4dENvbnRlbnQ9dGhpcy5kb21Ob2RlLnRleHRDb250ZW50LHRoaXMuYXR0YWNoKCkscyhlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksInJlcGxhY2VXaXRoIix0aGlzKS5jYWxsKHRoaXMsdCl9fSx7a2V5OiJoaWdobGlnaHQiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZG9tTm9kZS50ZXh0Q29udGVudDt0aGlzLmNhY2hlZFRleHQhPT1lJiYoKGUudHJpbSgpLmxlbmd0aD4wfHxudWxsPT10aGlzLmNhY2hlZFRleHQpJiYodGhpcy5kb21Ob2RlLmlubmVySFRNTD10KGUpLHRoaXMuZG9tTm9kZS5ub3JtYWxpemUoKSx0aGlzLmF0dGFjaCgpKSx0aGlzLmNhY2hlZFRleHQ9ZSl9fV0pLGV9KHYuZGVmYXVsdCk7Yi5jbGFzc05hbWU9InFsLXN5bnRheCI7dmFyIGc9bmV3IGMuZGVmYXVsdC5BdHRyaWJ1dG9yLkNsYXNzKCJ0b2tlbiIsImhsanMiLHtzY29wZTpjLmRlZmF1bHQuU2NvcGUuSU5MSU5FfSksbT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQsbil7byh0aGlzLGUpO3ZhciByPWkodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHQsbikpO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiByLm9wdGlvbnMuaGlnaGxpZ2h0KXRocm93IG5ldyBFcnJvcigiU3ludGF4IG1vZHVsZSByZXF1aXJlcyBoaWdobGlnaHQuanMuIFBsZWFzZSBpbmNsdWRlIHRoZSBsaWJyYXJ5IG9uIHRoZSBwYWdlIGJlZm9yZSBRdWlsbC4iKTt2YXIgbD1udWxsO3JldHVybiByLnF1aWxsLm9uKGguZGVmYXVsdC5ldmVudHMuU0NST0xMX09QVElNSVpFLGZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KGwpLGw9c2V0VGltZW91dChmdW5jdGlvbigpe3IuaGlnaGxpZ2h0KCksbD1udWxsfSxyLm9wdGlvbnMuaW50ZXJ2YWwpfSksci5oaWdobGlnaHQoKSxyfXJldHVybiBsKGUsdCksYShlLG51bGwsW3trZXk6InJlZ2lzdGVyIix2YWx1ZTpmdW5jdGlvbigpe2guZGVmYXVsdC5yZWdpc3RlcihnLCEwKSxoLmRlZmF1bHQucmVnaXN0ZXIoYiwhMCl9fV0pLGEoZSxbe2tleToiaGlnaGxpZ2h0Iix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7aWYoIXRoaXMucXVpbGwuc2VsZWN0aW9uLmNvbXBvc2luZyl7dGhpcy5xdWlsbC51cGRhdGUoaC5kZWZhdWx0LnNvdXJjZXMuVVNFUik7dmFyIGU9dGhpcy5xdWlsbC5nZXRTZWxlY3Rpb24oKTt0aGlzLnF1aWxsLnNjcm9sbC5kZXNjZW5kYW50cyhiKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuaGlnaGxpZ2h0KHQub3B0aW9ucy5oaWdobGlnaHQpfSksdGhpcy5xdWlsbC51cGRhdGUoaC5kZWZhdWx0LnNvdXJjZXMuU0lMRU5UKSxudWxsIT1lJiZ0aGlzLnF1aWxsLnNldFNlbGVjdGlvbihlLGguZGVmYXVsdC5zb3VyY2VzLlNJTEVOVCl9fX1dKSxlfShkLmRlZmF1bHQpO20uREVGQVVMVFM9e2hpZ2hsaWdodDpmdW5jdGlvbigpe3JldHVybiBudWxsPT13aW5kb3cuaGxqcz9udWxsOmZ1bmN0aW9uKHQpe3JldHVybiB3aW5kb3cuaGxqcy5oaWdobGlnaHRBdXRvKHQpLnZhbHVlfX0oKSxpbnRlcnZhbDoxZTN9LGUuQ29kZUJsb2NrPWIsZS5Db2RlVG9rZW49ZyxlLmRlZmF1bHQ9bX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiBvKHQsZSxuKXtyZXR1cm4gZSBpbiB0P09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUse3ZhbHVlOm4sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KTp0W2VdPW4sdH1mdW5jdGlvbiBpKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gbCh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWV8fCJvYmplY3QiIT10eXBlb2YgZSYmImZ1bmN0aW9uIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIGEodCxlKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfWZ1bmN0aW9uIHModCxlLG4pe3ZhciByPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIpO3Iuc2V0QXR0cmlidXRlKCJ0eXBlIiwiYnV0dG9uIiksci5jbGFzc0xpc3QuYWRkKCJxbC0iK2UpLG51bGwhPW4mJihyLnZhbHVlPW4pLHQuYXBwZW5kQ2hpbGQocil9ZnVuY3Rpb24gdSh0LGUpe0FycmF5LmlzQXJyYXkoZVswXSl8fChlPVtlXSksZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTtuLmNsYXNzTGlzdC5hZGQoInFsLWZvcm1hdHMiKSxlLmZvckVhY2goZnVuY3Rpb24odCl7aWYoInN0cmluZyI9PXR5cGVvZiB0KXMobix0KTtlbHNle3ZhciBlPU9iamVjdC5rZXlzKHQpWzBdLHI9dFtlXTtBcnJheS5pc0FycmF5KHIpP2MobixlLHIpOnMobixlLHIpfX0pLHQuYXBwZW5kQ2hpbGQobil9KX1mdW5jdGlvbiBjKHQsZSxuKXt2YXIgcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzZWxlY3QiKTtyLmNsYXNzTGlzdC5hZGQoInFsLSIrZSksbi5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOyExIT09dD9lLnNldEF0dHJpYnV0ZSgidmFsdWUiLHQpOmUuc2V0QXR0cmlidXRlKCJzZWxlY3RlZCIsInNlbGVjdGVkIiksci5hcHBlbmRDaGlsZChlKX0pLHQuYXBwZW5kQ2hpbGQocil9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLGUuYWRkQ29udHJvbHM9ZS5kZWZhdWx0PXZvaWQgMDt2YXIgZj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXt2YXIgbj1bXSxyPSEwLG89ITEsaT12b2lkIDA7dHJ5e2Zvcih2YXIgbCxhPXRbU3ltYm9sLml0ZXJhdG9yXSgpOyEocj0obD1hLm5leHQoKSkuZG9uZSkmJihuLnB1c2gobC52YWx1ZSksIWV8fG4ubGVuZ3RoIT09ZSk7cj0hMCk7fWNhdGNoKHQpe289ITAsaT10fWZpbmFsbHl7dHJ5eyFyJiZhLnJldHVybiYmYS5yZXR1cm4oKX1maW5hbGx5e2lmKG8pdGhyb3cgaX19cmV0dXJuIG59cmV0dXJuIGZ1bmN0aW9uKGUsbil7aWYoQXJyYXkuaXNBcnJheShlKSlyZXR1cm4gZTtpZihTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGUpKXJldHVybiB0KGUsbik7dGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpfX0oKSxoPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgcj1lW25dO3IuZW51bWVyYWJsZT1yLmVudW1lcmFibGV8fCExLHIuY29uZmlndXJhYmxlPSEwLCJ2YWx1ZSJpbiByJiYoci53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsci5rZXkscil9fXJldHVybiBmdW5jdGlvbihlLG4scil7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksciYmdChlLHIpLGV9fSgpLHA9big0KSxkPXIocCkseT1uKDApLHY9cih5KSxiPW4oNiksZz1yKGIpLG09bigxMCksXz1yKG0pLE89big3KSx3PXIoTykseD0oMCxfLmRlZmF1bHQpKCJxdWlsbDp0b29sYmFyIiksaz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQsbil7aSh0aGlzLGUpO3ZhciByPWwodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHQsbikpO2lmKEFycmF5LmlzQXJyYXkoci5vcHRpb25zLmNvbnRhaW5lcikpe3ZhciBvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3UobyxyLm9wdGlvbnMuY29udGFpbmVyKSx0LmNvbnRhaW5lci5wYXJlbnROb2RlLmluc2VydEJlZm9yZShvLHQuY29udGFpbmVyKSxyLmNvbnRhaW5lcj1vfWVsc2Uic3RyaW5nIj09dHlwZW9mIHIub3B0aW9ucy5jb250YWluZXI/ci5jb250YWluZXI9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihyLm9wdGlvbnMuY29udGFpbmVyKTpyLmNvbnRhaW5lcj1yLm9wdGlvbnMuY29udGFpbmVyO2lmKCEoci5jb250YWluZXIgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpe3ZhciBhO3JldHVybiBhPXguZXJyb3IoIkNvbnRhaW5lciByZXF1aXJlZCBmb3IgdG9vbGJhciIsci5vcHRpb25zKSxsKHIsYSl9cmV0dXJuIHIuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoInFsLXRvb2xiYXIiKSxyLmNvbnRyb2xzPVtdLHIuaGFuZGxlcnM9e30sT2JqZWN0LmtleXMoci5vcHRpb25zLmhhbmRsZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3IuYWRkSGFuZGxlcih0LHIub3B0aW9ucy5oYW5kbGVyc1t0XSl9KSxbXS5mb3JFYWNoLmNhbGwoci5jb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgiYnV0dG9uLCBzZWxlY3QiKSxmdW5jdGlvbih0KXtyLmF0dGFjaCh0KX0pLHIucXVpbGwub24oZy5kZWZhdWx0LmV2ZW50cy5FRElUT1JfQ0hBTkdFLGZ1bmN0aW9uKHQsZSl7dD09PWcuZGVmYXVsdC5ldmVudHMuU0VMRUNUSU9OX0NIQU5HRSYmci51cGRhdGUoZSl9KSxyLnF1aWxsLm9uKGcuZGVmYXVsdC5ldmVudHMuU0NST0xMX09QVElNSVpFLGZ1bmN0aW9uKCl7dmFyIHQ9ci5xdWlsbC5zZWxlY3Rpb24uZ2V0UmFuZ2UoKSxlPWYodCwxKSxuPWVbMF07ci51cGRhdGUobil9KSxyfXJldHVybiBhKGUsdCksaChlLFt7a2V5OiJhZGRIYW5kbGVyIix2YWx1ZTpmdW5jdGlvbih0LGUpe3RoaXMuaGFuZGxlcnNbdF09ZX19LHtrZXk6ImF0dGFjaCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPVtdLmZpbmQuY2FsbCh0LmNsYXNzTGlzdCxmdW5jdGlvbih0KXtyZXR1cm4gMD09PXQuaW5kZXhPZigicWwtIil9KTtpZihuKXtpZihuPW4uc2xpY2UoInFsLSIubGVuZ3RoKSwiQlVUVE9OIj09PXQudGFnTmFtZSYmdC5zZXRBdHRyaWJ1dGUoInR5cGUiLCJidXR0b24iKSxudWxsPT10aGlzLmhhbmRsZXJzW25dKXtpZihudWxsIT10aGlzLnF1aWxsLnNjcm9sbC53aGl0ZWxpc3QmJm51bGw9PXRoaXMucXVpbGwuc2Nyb2xsLndoaXRlbGlzdFtuXSlyZXR1cm4gdm9pZCB4Lndhcm4oImlnbm9yaW5nIGF0dGFjaGluZyB0byBkaXNhYmxlZCBmb3JtYXQiLG4sdCk7aWYobnVsbD09di5kZWZhdWx0LnF1ZXJ5KG4pKXJldHVybiB2b2lkIHgud2FybigiaWdub3JpbmcgYXR0YWNoaW5nIHRvIG5vbmV4aXN0ZW50IGZvcm1hdCIsbix0KX12YXIgcj0iU0VMRUNUIj09PXQudGFnTmFtZT8iY2hhbmdlIjoiY2xpY2siO3QuYWRkRXZlbnRMaXN0ZW5lcihyLGZ1bmN0aW9uKHIpe3ZhciBpPXZvaWQgMDtpZigiU0VMRUNUIj09PXQudGFnTmFtZSl7aWYodC5zZWxlY3RlZEluZGV4PDApcmV0dXJuO3ZhciBsPXQub3B0aW9uc1t0LnNlbGVjdGVkSW5kZXhdO2k9IWwuaGFzQXR0cmlidXRlKCJzZWxlY3RlZCIpJiYobC52YWx1ZXx8ITEpfWVsc2UgaT0hdC5jbGFzc0xpc3QuY29udGFpbnMoInFsLWFjdGl2ZSIpJiYodC52YWx1ZXx8IXQuaGFzQXR0cmlidXRlKCJ2YWx1ZSIpKSxyLnByZXZlbnREZWZhdWx0KCk7ZS5xdWlsbC5mb2N1cygpO3ZhciBhPWUucXVpbGwuc2VsZWN0aW9uLmdldFJhbmdlKCkscz1mKGEsMSksdT1zWzBdO2lmKG51bGwhPWUuaGFuZGxlcnNbbl0pZS5oYW5kbGVyc1tuXS5jYWxsKGUsaSk7ZWxzZSBpZih2LmRlZmF1bHQucXVlcnkobikucHJvdG90eXBlIGluc3RhbmNlb2Ygdi5kZWZhdWx0LkVtYmVkKXtpZighKGk9cHJvbXB0KCJFbnRlciAiK24pKSlyZXR1cm47ZS5xdWlsbC51cGRhdGVDb250ZW50cygobmV3IGQuZGVmYXVsdCkucmV0YWluKHUuaW5kZXgpLmRlbGV0ZSh1Lmxlbmd0aCkuaW5zZXJ0KG8oe30sbixpKSksZy5kZWZhdWx0LnNvdXJjZXMuVVNFUil9ZWxzZSBlLnF1aWxsLmZvcm1hdChuLGksZy5kZWZhdWx0LnNvdXJjZXMuVVNFUik7ZS51cGRhdGUodSl9KSx0aGlzLmNvbnRyb2xzLnB1c2goW24sdF0pfX19LHtrZXk6InVwZGF0ZSIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9bnVsbD09dD97fTp0aGlzLnF1aWxsLmdldEZvcm1hdCh0KTt0aGlzLmNvbnRyb2xzLmZvckVhY2goZnVuY3Rpb24obil7dmFyIHI9ZihuLDIpLG89clswXSxpPXJbMV07aWYoIlNFTEVDVCI9PT1pLnRhZ05hbWUpe3ZhciBsPXZvaWQgMDtpZihudWxsPT10KWw9bnVsbDtlbHNlIGlmKG51bGw9PWVbb10pbD1pLnF1ZXJ5U2VsZWN0b3IoIm9wdGlvbltzZWxlY3RlZF0iKTtlbHNlIGlmKCFBcnJheS5pc0FycmF5KGVbb10pKXt2YXIgYT1lW29dOyJzdHJpbmciPT10eXBlb2YgYSYmKGE9YS5yZXBsYWNlKC9cIi9nLCdcXCInKSksbD1pLnF1ZXJ5U2VsZWN0b3IoJ29wdGlvblt2YWx1ZT0iJythKyciXScpfW51bGw9PWw/KGkudmFsdWU9IiIsaS5zZWxlY3RlZEluZGV4PS0xKTpsLnNlbGVjdGVkPSEwfWVsc2UgaWYobnVsbD09dClpLmNsYXNzTGlzdC5yZW1vdmUoInFsLWFjdGl2ZSIpO2Vsc2UgaWYoaS5oYXNBdHRyaWJ1dGUoInZhbHVlIikpe3ZhciBzPWVbb109PT1pLmdldEF0dHJpYnV0ZSgidmFsdWUiKXx8bnVsbCE9ZVtvXSYmZVtvXS50b1N0cmluZygpPT09aS5nZXRBdHRyaWJ1dGUoInZhbHVlIil8fG51bGw9PWVbb10mJiFpLmdldEF0dHJpYnV0ZSgidmFsdWUiKTtpLmNsYXNzTGlzdC50b2dnbGUoInFsLWFjdGl2ZSIscyl9ZWxzZSBpLmNsYXNzTGlzdC50b2dnbGUoInFsLWFjdGl2ZSIsbnVsbCE9ZVtvXSl9KX19XSksZX0ody5kZWZhdWx0KTtrLkRFRkFVTFRTPXt9LGsuREVGQVVMVFM9e2NvbnRhaW5lcjpudWxsLGhhbmRsZXJzOntjbGVhbjpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT10aGlzLnF1aWxsLmdldFNlbGVjdGlvbigpO2lmKG51bGwhPWUpaWYoMD09ZS5sZW5ndGgpe3ZhciBuPXRoaXMucXVpbGwuZ2V0Rm9ybWF0KCk7T2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbihlKXtudWxsIT12LmRlZmF1bHQucXVlcnkoZSx2LmRlZmF1bHQuU2NvcGUuSU5MSU5FKSYmdC5xdWlsbC5mb3JtYXQoZSwhMSl9KX1lbHNlIHRoaXMucXVpbGwucmVtb3ZlRm9ybWF0KGUsZy5kZWZhdWx0LnNvdXJjZXMuVVNFUil9LGRpcmVjdGlvbjpmdW5jdGlvbih0KXt2YXIgZT10aGlzLnF1aWxsLmdldEZvcm1hdCgpLmFsaWduOyJydGwiPT09dCYmbnVsbD09ZT90aGlzLnF1aWxsLmZvcm1hdCgiYWxpZ24iLCJyaWdodCIsZy5kZWZhdWx0LnNvdXJjZXMuVVNFUik6dHx8InJpZ2h0IiE9PWV8fHRoaXMucXVpbGwuZm9ybWF0KCJhbGlnbiIsITEsZy5kZWZhdWx0LnNvdXJjZXMuVVNFUiksdGhpcy5xdWlsbC5mb3JtYXQoImRpcmVjdGlvbiIsdCxnLmRlZmF1bHQuc291cmNlcy5VU0VSKX0saW5kZW50OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucXVpbGwuZ2V0U2VsZWN0aW9uKCksbj10aGlzLnF1aWxsLmdldEZvcm1hdChlKSxyPXBhcnNlSW50KG4uaW5kZW50fHwwKTtpZigiKzEiPT09dHx8Ii0xIj09PXQpe3ZhciBvPSIrMSI9PT10PzE6LTE7InJ0bCI9PT1uLmRpcmVjdGlvbiYmKG8qPS0xKSx0aGlzLnF1aWxsLmZvcm1hdCgiaW5kZW50IixyK28sZy5kZWZhdWx0LnNvdXJjZXMuVVNFUil9fSxsaW5rOmZ1bmN0aW9uKHQpeyEwPT09dCYmKHQ9cHJvbXB0KCJFbnRlciBsaW5rIFVSTDoiKSksdGhpcy5xdWlsbC5mb3JtYXQoImxpbmsiLHQsZy5kZWZhdWx0LnNvdXJjZXMuVVNFUil9LGxpc3Q6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5xdWlsbC5nZXRTZWxlY3Rpb24oKSxuPXRoaXMucXVpbGwuZ2V0Rm9ybWF0KGUpOyJjaGVjayI9PT10PyJjaGVja2VkIj09PW4ubGlzdHx8InVuY2hlY2tlZCI9PT1uLmxpc3Q/dGhpcy5xdWlsbC5mb3JtYXQoImxpc3QiLCExLGcuZGVmYXVsdC5zb3VyY2VzLlVTRVIpOnRoaXMucXVpbGwuZm9ybWF0KCJsaXN0IiwidW5jaGVja2VkIixnLmRlZmF1bHQuc291cmNlcy5VU0VSKTp0aGlzLnF1aWxsLmZvcm1hdCgibGlzdCIsdCxnLmRlZmF1bHQuc291cmNlcy5VU0VSKX19fSxlLmRlZmF1bHQ9ayxlLmFkZENvbnRyb2xzPXV9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPSc8c3ZnIHZpZXdib3g9IjAgMCAxOCAxOCI+IDxsaW5lIGNsYXNzPXFsLXN0cm9rZSB4MT0zIHgyPTE1IHkxPTkgeTI9OT48L2xpbmU+IDxsaW5lIGNsYXNzPXFsLXN0cm9rZSB4MT0zIHgyPTEzIHkxPTE0IHkyPTE0PjwvbGluZT4gPGxpbmUgY2xhc3M9cWwtc3Ryb2tlIHgxPTMgeDI9OSB5MT00IHkyPTQ+PC9saW5lPiA8L3N2Zz4nfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz0nPHN2ZyB2aWV3Ym94PSIwIDAgMTggMTgiPiA8bGluZSBjbGFzcz1xbC1zdHJva2UgeDE9MTUgeDI9MyB5MT05IHkyPTk+PC9saW5lPiA8bGluZSBjbGFzcz1xbC1zdHJva2UgeDE9MTQgeDI9NCB5MT0xNCB5Mj0xND48L2xpbmU+IDxsaW5lIGNsYXNzPXFsLXN0cm9rZSB4MT0xMiB4Mj02IHkxPTQgeTI9ND48L2xpbmU+IDwvc3ZnPid9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPSc8c3ZnIHZpZXdib3g9IjAgMCAxOCAxOCI+IDxsaW5lIGNsYXNzPXFsLXN0cm9rZSB4MT0xNSB4Mj0zIHkxPTkgeTI9OT48L2xpbmU+IDxsaW5lIGNsYXNzPXFsLXN0cm9rZSB4MT0xNSB4Mj01IHkxPTE0IHkyPTE0PjwvbGluZT4gPGxpbmUgY2xhc3M9cWwtc3Ryb2tlIHgxPTE1IHgyPTkgeTE9NCB5Mj00PjwvbGluZT4gPC9zdmc+J30sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9Jzxzdmcgdmlld2JveD0iMCAwIDE4IDE4Ij4gPGxpbmUgY2xhc3M9cWwtc3Ryb2tlIHgxPTE1IHgyPTMgeTE9OSB5Mj05PjwvbGluZT4gPGxpbmUgY2xhc3M9cWwtc3Ryb2tlIHgxPTE1IHgyPTMgeTE9MTQgeTI9MTQ+PC9saW5lPiA8bGluZSBjbGFzcz1xbC1zdHJva2UgeDE9MTUgeDI9MyB5MT00IHkyPTQ+PC9saW5lPiA8L3N2Zz4nfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz0nPHN2ZyB2aWV3Ym94PSIwIDAgMTggMTgiPiA8ZyBjbGFzcz0icWwtZmlsbCBxbC1jb2xvci1sYWJlbCI+IDxwb2x5Z29uIHBvaW50cz0iNiA2Ljg2OCA2IDYgNSA2IDUgNyA1Ljk0MiA3IDYgNi44NjgiPjwvcG9seWdvbj4gPHJlY3QgaGVpZ2h0PTEgd2lkdGg9MSB4PTQgeT00PjwvcmVjdD4gPHBvbHlnb24gcG9pbnRzPSI2LjgxNyA1IDYgNSA2IDYgNi4zOCA2IDYuODE3IDUiPjwvcG9seWdvbj4gPHJlY3QgaGVpZ2h0PTEgd2lkdGg9MSB4PTIgeT02PjwvcmVjdD4gPHJlY3QgaGVpZ2h0PTEgd2lkdGg9MSB4PTMgeT01PjwvcmVjdD4gPHJlY3QgaGVpZ2h0PTEgd2lkdGg9MSB4PTQgeT03PjwvcmVjdD4gPHBvbHlnb24gcG9pbnRzPSI0IDExLjQzOSA0IDExIDMgMTEgMyAxMiAzLjc1NSAxMiA0IDExLjQzOSI+PC9wb2x5Z29uPiA8cmVjdCBoZWlnaHQ9MSB3aWR0aD0xIHg9MiB5PTEyPjwvcmVjdD4gPHJlY3QgaGVpZ2h0PTEgd2lkdGg9MSB4PTIgeT05PjwvcmVjdD4gPHJlY3QgaGVpZ2h0PTEgd2lkdGg9MSB4PTIgeT0xNT48L3JlY3Q+IDxwb2x5Z29uIHBvaW50cz0iNC42MyAxMCA0IDEwIDQgMTEgNC4xOTIgMTEgNC42MyAxMCI+PC9wb2x5Z29uPiA8cmVjdCBoZWlnaHQ9MSB3aWR0aD0xIHg9MyB5PTg+PC9yZWN0PiA8cGF0aCBkPU0xMC44MzIsNC4yTDExLDQuNTgyVjRIMTAuNzA4QTEuOTQ4LDEuOTQ4LDAsMCwxLDEwLjgzMiw0LjJaPjwvcGF0aD4gPHBhdGggZD1NNyw0LjU4Mkw3LjE2OCw0LjJBMS45MjksMS45MjksMCwwLDEsNy4yOTIsNEg3VjQuNTgyWj48L3BhdGg+IDxwYXRoIGQ9TTgsMTNINy42ODNsLTAuMzUxLjhhMS45MzMsMS45MzMsMCwwLDEtLjEyNC4ySDhWMTNaPjwvcGF0aD4gPHJlY3QgaGVpZ2h0PTEgd2lkdGg9MSB4PTEyIHk9Mj48L3JlY3Q+IDxyZWN0IGhlaWdodD0xIHdpZHRoPTEgeD0xMSB5PTM+PC9yZWN0PiA8cGF0aCBkPU05LDNIOFYzLjI4MkExLjk4NSwxLjk4NSwwLDAsMSw5LDNaPjwvcGF0aD4gPHJlY3QgaGVpZ2h0PTEgd2lkdGg9MSB4PTIgeT0zPjwvcmVjdD4gPHJlY3QgaGVpZ2h0PTEgd2lkdGg9MSB4PTYgeT0yPjwvcmVjdD4gPHJlY3QgaGVpZ2h0PTEgd2lkdGg9MSB4PTMgeT0yPjwvcmVjdD4gPHJlY3QgaGVpZ2h0PTEgd2lkdGg9MSB4PTUgeT0zPjwvcmVjdD4gPHJlY3QgaGVpZ2h0PTEgd2lkdGg9MSB4PTkgeT0yPjwvcmVjdD4gPHJlY3QgaGVpZ2h0PTEgd2lkdGg9MSB4PTE1IHk9MTQ+PC9yZWN0PiA8cG9seWdvbiBwb2ludHM9IjEzLjQ0NyAxMC4xNzQgMTMuNDY5IDEwLjIyNSAxMy40NzIgMTAuMjMyIDEzLjgwOCAxMSAxNCAxMSAxNCAxMCAxMy4zNyAxMCAxMy40NDcgMTAuMTc0Ij48L3BvbHlnb24+IDxyZWN0IGhlaWdodD0xIHdpZHRoPTEgeD0xMyB5PTc+PC9yZWN0PiA8cmVjdCBoZWlnaHQ9MSB3aWR0aD0xIHg9MTUgeT01PjwvcmVjdD4gPHJlY3QgaGVpZ2h0PTEgd2lkdGg9MSB4PTE0IHk9Nj48L3JlY3Q+IDxyZWN0IGhlaWdodD0xIHdpZHRoPTEgeD0xNSB5PTg+PC9yZWN0PiA8cmVjdCBoZWlnaHQ9MSB3aWR0aD0xIHg9MTQgeT05PjwvcmVjdD4gPHBhdGggZD1NMy43NzUsMTRIM3YxSDRWMTQuMzE0QTEuOTcsMS45NywwLDAsMSwzLjc3NSwxNFo+PC9wYXRoPiA8cmVjdCBoZWlnaHQ9MSB3aWR0aD0xIHg9MTQgeT0zPjwvcmVjdD4gPHBvbHlnb24gcG9pbnRzPSIxMiA2Ljg2OCAxMiA2IDExLjYyIDYgMTIgNi44NjgiPjwvcG9seWdvbj4gPHJlY3QgaGVpZ2h0PTEgd2lkdGg9MSB4PTE1IHk9Mj48L3JlY3Q+IDxyZWN0IGhlaWdodD0xIHdpZHRoPTEgeD0xMiB5PTU+PC9yZWN0PiA8cmVjdCBoZWlnaHQ9MSB3aWR0aD0xIHg9MTMgeT00PjwvcmVjdD4gPHBvbHlnb24gcG9pbnRzPSIxMi45MzMgOSAxMyA5IDEzIDggMTIuNDk1IDggMTIuOTMzIDkiPjwvcG9seWdvbj4gPHJlY3QgaGVpZ2h0PTEgd2lkdGg9MSB4PTkgeT0xND48L3JlY3Q+IDxyZWN0IGhlaWdodD0xIHdpZHRoPTEgeD04IHk9MTU+PC9yZWN0PiA8cGF0aCBkPU02LDE0LjkyNlYxNUg3VjE0LjMxNkExLjk5MywxLjk5MywwLDAsMSw2LDE0LjkyNlo+PC9wYXRoPiA8cmVjdCBoZWlnaHQ9MSB3aWR0aD0xIHg9NSB5PTE1PjwvcmVjdD4gPHBhdGggZD1NMTAuNjY4LDEzLjhMMTAuMzE3LDEzSDEwdjFoMC43OTJBMS45NDcsMS45NDcsMCwwLDEsMTAuNjY4LDEzLjhaPjwvcGF0aD4gPHJlY3QgaGVpZ2h0PTEgd2lkdGg9MSB4PTExIHk9MTU+PC9yZWN0PiA8cGF0aCBkPU0xNC4zMzIsMTIuMmExLjk5LDEuOTksMCwwLDEsLjE2Ni44SDE1VjEySDE0LjI0NVo+PC9wYXRoPiA8cmVjdCBoZWlnaHQ9MSB3aWR0aD0xIHg9MTQgeT0xNT48L3JlY3Q+IDxyZWN0IGhlaWdodD0xIHdpZHRoPTEgeD0xNSB5PTExPjwvcmVjdD4gPC9nPiA8cG9seWxpbmUgY2xhc3M9cWwtc3Ryb2tlIHBvaW50cz0iNS41IDEzIDkgNSAxMi41IDEzIj48L3BvbHlsaW5lPiA8bGluZSBjbGFzcz1xbC1zdHJva2UgeDE9MTEuNjMgeDI9Ni4zOCB5MT0xMSB5Mj0xMT48L2xpbmU+IDwvc3ZnPid9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPSc8c3ZnIHZpZXdib3g9IjAgMCAxOCAxOCI+IDxyZWN0IGNsYXNzPSJxbC1maWxsIHFsLXN0cm9rZSIgaGVpZ2h0PTMgd2lkdGg9MyB4PTQgeT01PjwvcmVjdD4gPHJlY3QgY2xhc3M9InFsLWZpbGwgcWwtc3Ryb2tlIiBoZWlnaHQ9MyB3aWR0aD0zIHg9MTEgeT01PjwvcmVjdD4gPHBhdGggY2xhc3M9InFsLWV2ZW4gcWwtZmlsbCBxbC1zdHJva2UiIGQ9TTcsOGMwLDQuMDMxLTMsNS0zLDU+PC9wYXRoPiA8cGF0aCBjbGFzcz0icWwtZXZlbiBxbC1maWxsIHFsLXN0cm9rZSIgZD1NMTQsOGMwLDQuMDMxLTMsNS0zLDU+PC9wYXRoPiA8L3N2Zz4nfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz0nPHN2ZyB2aWV3Ym94PSIwIDAgMTggMTgiPiA8cGF0aCBjbGFzcz1xbC1zdHJva2UgZD1NNSw0SDkuNUEyLjUsMi41LDAsMCwxLDEyLDYuNXYwQTIuNSwyLjUsMCwwLDEsOS41LDlINUEwLDAsMCwwLDEsNSw5VjRBMCwwLDAsMCwxLDUsNFo+PC9wYXRoPiA8cGF0aCBjbGFzcz1xbC1zdHJva2UgZD1NNSw5aDUuNUEyLjUsMi41LDAsMCwxLDEzLDExLjV2MEEyLjUsMi41LDAsMCwxLDEwLjUsMTRINWEwLDAsMCwwLDEsMCwwVjlBMCwwLDAsMCwxLDUsOVo+PC9wYXRoPiA8L3N2Zz4nfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz0nPHN2ZyBjbGFzcz0iIiB2aWV3Ym94PSIwIDAgMTggMTgiPiA8bGluZSBjbGFzcz1xbC1zdHJva2UgeDE9NSB4Mj0xMyB5MT0zIHkyPTM+PC9saW5lPiA8bGluZSBjbGFzcz1xbC1zdHJva2UgeDE9NiB4Mj05LjM1IHkxPTEyIHkyPTM+PC9saW5lPiA8bGluZSBjbGFzcz1xbC1zdHJva2UgeDE9MTEgeDI9MTUgeTE9MTEgeTI9MTU+PC9saW5lPiA8bGluZSBjbGFzcz1xbC1zdHJva2UgeDE9MTUgeDI9MTEgeTE9MTEgeTI9MTU+PC9saW5lPiA8cmVjdCBjbGFzcz1xbC1maWxsIGhlaWdodD0xIHJ4PTAuNSByeT0wLjUgd2lkdGg9NyB4PTIgeT0xND48L3JlY3Q+IDwvc3ZnPid9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPSc8c3ZnIHZpZXdib3g9IjAgMCAxOCAxOCI+IDxsaW5lIGNsYXNzPSJxbC1jb2xvci1sYWJlbCBxbC1zdHJva2UgcWwtdHJhbnNwYXJlbnQiIHgxPTMgeDI9MTUgeTE9MTUgeTI9MTU+PC9saW5lPiA8cG9seWxpbmUgY2xhc3M9cWwtc3Ryb2tlIHBvaW50cz0iNS41IDExIDkgMyAxMi41IDExIj48L3BvbHlsaW5lPiA8bGluZSBjbGFzcz1xbC1zdHJva2UgeDE9MTEuNjMgeDI9Ni4zOCB5MT05IHkyPTk+PC9saW5lPiA8L3N2Zz4nfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz0nPHN2ZyB2aWV3Ym94PSIwIDAgMTggMTgiPiA8cG9seWdvbiBjbGFzcz0icWwtc3Ryb2tlIHFsLWZpbGwiIHBvaW50cz0iMyAxMSA1IDkgMyA3IDMgMTEiPjwvcG9seWdvbj4gPGxpbmUgY2xhc3M9InFsLXN0cm9rZSBxbC1maWxsIiB4MT0xNSB4Mj0xMSB5MT00IHkyPTQ+PC9saW5lPiA8cGF0aCBjbGFzcz1xbC1maWxsIGQ9TTExLDNhMywzLDAsMCwwLDAsNmgxVjNIMTFaPjwvcGF0aD4gPHJlY3QgY2xhc3M9cWwtZmlsbCBoZWlnaHQ9MTEgd2lkdGg9MSB4PTExIHk9ND48L3JlY3Q+IDxyZWN0IGNsYXNzPXFsLWZpbGwgaGVpZ2h0PTExIHdpZHRoPTEgeD0xMyB5PTQ+PC9yZWN0PiA8L3N2Zz4nfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz0nPHN2ZyB2aWV3Ym94PSIwIDAgMTggMTgiPiA8cG9seWdvbiBjbGFzcz0icWwtc3Ryb2tlIHFsLWZpbGwiIHBvaW50cz0iMTUgMTIgMTMgMTAgMTUgOCAxNSAxMiI+PC9wb2x5Z29uPiA8bGluZSBjbGFzcz0icWwtc3Ryb2tlIHFsLWZpbGwiIHgxPTkgeDI9NSB5MT00IHkyPTQ+PC9saW5lPiA8cGF0aCBjbGFzcz1xbC1maWxsIGQ9TTUsM0EzLDMsMCwwLDAsNSw5SDZWM0g1Wj48L3BhdGg+IDxyZWN0IGNsYXNzPXFsLWZpbGwgaGVpZ2h0PTExIHdpZHRoPTEgeD01IHk9ND48L3JlY3Q+IDxyZWN0IGNsYXNzPXFsLWZpbGwgaGVpZ2h0PTExIHdpZHRoPTEgeD03IHk9ND48L3JlY3Q+IDwvc3ZnPid9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPSc8c3ZnIHZpZXdib3g9IjAgMCAxOCAxOCI+IDxwYXRoIGNsYXNzPXFsLWZpbGwgZD1NMTQsMTZINGExLDEsMCwwLDEsMC0ySDE0QTEsMSwwLDAsMSwxNCwxNlogLz4gPHBhdGggY2xhc3M9cWwtZmlsbCBkPU0xNCw0SDRBMSwxLDAsMCwxLDQsMkgxNEExLDEsMCwwLDEsMTQsNFogLz4gPHJlY3QgY2xhc3M9cWwtZmlsbCB4PTMgeT02IHdpZHRoPTEyIGhlaWdodD02IHJ4PTEgcnk9MSAvPiA8L3N2Zz4nfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz0nPHN2ZyB2aWV3Ym94PSIwIDAgMTggMTgiPiA8cGF0aCBjbGFzcz1xbC1maWxsIGQ9TTEzLDE2SDVhMSwxLDAsMCwxLDAtMmg4QTEsMSwwLDAsMSwxMywxNlogLz4gPHBhdGggY2xhc3M9cWwtZmlsbCBkPU0xMyw0SDVBMSwxLDAsMCwxLDUsMmg4QTEsMSwwLDAsMSwxMyw0WiAvPiA8cmVjdCBjbGFzcz1xbC1maWxsIHg9MiB5PTYgd2lkdGg9MTQgaGVpZ2h0PTYgcng9MSByeT0xIC8+IDwvc3ZnPid9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPSc8c3ZnIHZpZXdib3g9IjAgMCAxOCAxOCI+IDxwYXRoIGNsYXNzPXFsLWZpbGwgZD1NMTUsOEgxM2ExLDEsMCwwLDEsMC0yaDJBMSwxLDAsMCwxLDE1LDhaIC8+IDxwYXRoIGNsYXNzPXFsLWZpbGwgZD1NMTUsMTJIMTNhMSwxLDAsMCwxLDAtMmgyQTEsMSwwLDAsMSwxNSwxMlogLz4gPHBhdGggY2xhc3M9cWwtZmlsbCBkPU0xNSwxNkg1YTEsMSwwLDAsMSwwLTJIMTVBMSwxLDAsMCwxLDE1LDE2WiAvPiA8cGF0aCBjbGFzcz1xbC1maWxsIGQ9TTE1LDRINUExLDEsMCwwLDEsNSwySDE1QTEsMSwwLDAsMSwxNSw0WiAvPiA8cmVjdCBjbGFzcz1xbC1maWxsIHg9MiB5PTYgd2lkdGg9OCBoZWlnaHQ9NiByeD0xIHJ5PTEgLz4gPC9zdmc+J30sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9Jzxzdmcgdmlld2JveD0iMCAwIDE4IDE4Ij4gPHBhdGggY2xhc3M9cWwtZmlsbCBkPU01LDhIM0ExLDEsMCwwLDEsMyw2SDVBMSwxLDAsMCwxLDUsOFogLz4gPHBhdGggY2xhc3M9cWwtZmlsbCBkPU01LDEySDNhMSwxLDAsMCwxLDAtMkg1QTEsMSwwLDAsMSw1LDEyWiAvPiA8cGF0aCBjbGFzcz1xbC1maWxsIGQ9TTEzLDE2SDNhMSwxLDAsMCwxLDAtMkgxM0ExLDEsMCwwLDEsMTMsMTZaIC8+IDxwYXRoIGNsYXNzPXFsLWZpbGwgZD1NMTMsNEgzQTEsMSwwLDAsMSwzLDJIMTNBMSwxLDAsMCwxLDEzLDRaIC8+IDxyZWN0IGNsYXNzPXFsLWZpbGwgeD04IHk9NiB3aWR0aD04IGhlaWdodD02IHJ4PTEgcnk9MSB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNCAxOCkgcm90YXRlKC0xODApIi8+IDwvc3ZnPid9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPSc8c3ZnIHZpZXdib3g9IjAgMCAxOCAxOCI+IDxwYXRoIGNsYXNzPXFsLWZpbGwgZD1NMTEuNzU5LDIuNDgyYTIuNTYxLDIuNTYxLDAsMCwwLTMuNTMuNjA3QTcuNjU2LDcuNjU2LDAsMCwwLDYuOCw2LjJDNi4xMDksOS4xODgsNS4yNzUsMTQuNjc3LDQuMTUsMTQuOTI3YTEuNTQ1LDEuNTQ1LDAsMCwwLTEuMy0uOTMzQTAuOTIyLDAuOTIyLDAsMCwwLDIsMTUuMDM2UzEuOTU0LDE2LDQuMTE5LDE2czMuMDkxLTIuNjkxLDMuNy01LjU1M2MwLjE3Ny0uODI2LjM2LTEuNzI2LDAuNTU0LTIuNkw4Ljc3NSw2LjJjMC4zODEtMS40MjEuODA3LTIuNTIxLDEuMzA2LTIuNjc2YTEuMDE0LDEuMDE0LDAsMCwwLDEuMDIuNTZBMC45NjYsMC45NjYsMCwwLDAsMTEuNzU5LDIuNDgyWj48L3BhdGg+IDxyZWN0IGNsYXNzPXFsLWZpbGwgaGVpZ2h0PTEuNiByeD0wLjggcnk9MC44IHdpZHRoPTUgeD01LjE1IHk9Ni4yPjwvcmVjdD4gPHBhdGggY2xhc3M9cWwtZmlsbCBkPU0xMy42NjMsMTIuMDI3YTEuNjYyLDEuNjYyLDAsMCwxLC4yNjYtMC4yNzZxMC4xOTMsMC4wNjkuNDU2LDAuMTM4YTIuMSwyLjEsMCwwLDAsLjUzNS4wNjksMS4wNzUsMS4wNzUsMCwwLDAsLjc2Ny0wLjMsMS4wNDQsMS4wNDQsMCwwLDAsLjMxNC0wLjgsMC44NCwwLjg0LDAsMCwwLS4yMzgtMC42MTksMC44LDAuOCwwLDAsMC0uNTk0LTAuMjM5LDEuMTU0LDEuMTU0LDAsMCwwLS43ODEuMyw0LjYwNyw0LjYwNywwLDAsMC0uNzgxLDFxLTAuMDkxLjE1LS4yMTgsMC4zNDZsLTAuMjQ2LjM4Yy0wLjA2OC0uMjg4LTAuMTM3LTAuNTgyLTAuMjEyLTAuODg1LTAuNDU5LTEuODQ3LTIuNDk0LS45ODQtMi45NDEtMC44LTAuNDgyLjItLjM1MywwLjY0Ny0wLjA5NCwwLjUyOWEwLjg2OSwwLjg2OSwwLDAsMSwxLjI4MS41ODVjMC4yMTcsMC43NTEuMzc3LDEuNDM2LDAuNTI3LDIuMDM4YTUuNjg4LDUuNjg4LDAsMCwxLS4zNjIuNDY3LDIuNjksMi42OSwwLDAsMS0uMjY0LjI3MXEtMC4yMjEtLjA4LTAuNDcxLTAuMTQ3YTIuMDI5LDIuMDI5LDAsMCwwLS41MjItMC4wNjYsMS4wNzksMS4wNzksMCwwLDAtLjc2OC4zQTEuMDU4LDEuMDU4LDAsMCwwLDksMTUuMTMxYTAuODIsMC44MiwwLDAsMCwuODMyLjg1MiwxLjEzNCwxLjEzNCwwLDAsMCwuNzg3LTAuMyw1LjExLDUuMTEsMCwwLDAsLjc3Ni0wLjk5M3EwLjE0MS0uMjE5LjIxNS0wLjM0YzAuMDQ2LS4wNzYuMTIyLTAuMTk0LDAuMjIzLTAuMzQ2YTIuNzg2LDIuNzg2LDAsMCwwLC45MTgsMS43MjYsMi41ODIsMi41ODIsMCwwLDAsMi4zNzYtLjE4NWMwLjMxNy0uMTgxLjIxMi0wLjU2NSwwLTAuNDk0QTAuODA3LDAuODA3LDAsMCwxLDE0LjE3NiwxNWE1LjE1OSw1LjE1OSwwLDAsMS0uOTEzLTIuNDQ2bDAsMFExMy40ODcsMTIuMjQsMTMuNjYzLDEyLjAyN1o+PC9wYXRoPiA8L3N2Zz4nfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz0nPHN2ZyB2aWV3Qm94PSIwIDAgMTggMTgiPiA8cGF0aCBjbGFzcz1xbC1maWxsIGQ9TTEwLDRWMTRhMSwxLDAsMCwxLTIsMFYxMEgzdjRhMSwxLDAsMCwxLTIsMFY0QTEsMSwwLDAsMSwzLDRWOEg4VjRhMSwxLDAsMCwxLDIsMFptNi4wNjc4Nyw5LjIwOUgxNC45ODk3NVY3LjU5ODYzYS41NDA4NS41NDA4NSwwLDAsMC0uNjA1LS42MDU0N2gtLjYyNzQ0YTEuMDExMTksMS4wMTExOSwwLDAsMC0uNzQ4LjI5Njg4TDExLjY0NSw4LjU2NjQxYS41NDM1LjU0MzUsMCwwLDAtLjAyMi44NTg0bC4yODYxMy4zMDc2MmEuNTM4NjEuNTM4NjEsMCwwLDAsLjg0NzE3LjAzMzJsLjA5OTEyLS4wODc4OWExLjIxMzcsMS4yMTM3LDAsMCwwLC4yNDE3LS4zNTI1NGguMDIyNDZzLS4wMTEyMy4zMDg1OS0uMDExMjMuNjA1NDdWMTMuMjA5SDEyLjA0MWEuNTQwODUuNTQwODUsMCwwLDAtLjYwNS42MDU0N3YuNDM5NDVhLjU0MDg1LjU0MDg1LDAsMCwwLC42MDUuNjA1NDdoNC4wMjY4NmEuNTQwODUuNTQwODUsMCwwLDAsLjYwNS0uNjA1NDd2LS40Mzk0NUEuNTQwODUuNTQwODUsMCwwLDAsMTYuMDY3ODcsMTMuMjA5WiAvPiA8L3N2Zz4nfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz0nPHN2ZyB2aWV3Qm94PSIwIDAgMTggMTgiPiA8cGF0aCBjbGFzcz1xbC1maWxsIGQ9TTE2LjczOTc1LDEzLjgxNDQ1di40Mzk0NWEuNTQwODUuNTQwODUsMCwwLDEtLjYwNS42MDU0N0gxMS44NTVhLjU4MzkyLjU4MzkyLDAsMCwxLS42NDg5My0uNjA1NDdWMTQuMDEyN2MwLTIuOTA1MjcsMy4zOTk0MS0zLjQyMTg3LDMuMzk5NDEtNC41NTQ2OWEuNzc2NzUuNzc2NzUsMCwwLDAtLjg0NzE3LS43ODEyNSwxLjE3Njg0LDEuMTc2ODQsMCwwLDAtLjgzNTk0LjM4NDc3Yy0uMjc0OS4yNjM2Ny0uNTYxLjM3NC0uODU3OTEuMTMxODRsLS40MjkyLS4zNDA4MmMtLjMwODExLS4yNDIxOS0uMzg1MjUtLjUxNzU4LS4xNTQzLS44MTQ0NWEyLjk3MTU1LDIuOTcxNTUsMCwwLDEsMi40NTM2MS0xLjE3Njc2LDIuNDUzOTMsMi40NTM5MywwLDAsMSwyLjY4NDA4LDIuNDA5MThjMCwyLjQ1MzEyLTMuMTc5MiwyLjkyNjc2LTMuMjc4MzIsMy45Mzg0OGgyLjc5NDQzQS41NDA4NS41NDA4NSwwLDAsMSwxNi43Mzk3NSwxMy44MTQ0NVpNOSwzQS45OTk3NC45OTk3NCwwLDAsMCw4LDRWOEgzVjRBMSwxLDAsMCwwLDEsNFYxNGExLDEsMCwwLDAsMiwwVjEwSDh2NGExLDEsMCwwLDAsMiwwVjRBLjk5OTc0Ljk5OTc0LDAsMCwwLDksM1ogLz4gPC9zdmc+J30sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9Jzxzdmcgdmlld2JveD0iMCAwIDE4IDE4Ij4gPGxpbmUgY2xhc3M9cWwtc3Ryb2tlIHgxPTcgeDI9MTMgeTE9NCB5Mj00PjwvbGluZT4gPGxpbmUgY2xhc3M9cWwtc3Ryb2tlIHgxPTUgeDI9MTEgeTE9MTQgeTI9MTQ+PC9saW5lPiA8bGluZSBjbGFzcz1xbC1zdHJva2UgeDE9OCB4Mj0xMCB5MT0xNCB5Mj00PjwvbGluZT4gPC9zdmc+J30sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9Jzxzdmcgdmlld2JveD0iMCAwIDE4IDE4Ij4gPHJlY3QgY2xhc3M9cWwtc3Ryb2tlIGhlaWdodD0xMCB3aWR0aD0xMiB4PTMgeT00PjwvcmVjdD4gPGNpcmNsZSBjbGFzcz1xbC1maWxsIGN4PTYgY3k9NyByPTE+PC9jaXJjbGU+IDxwb2x5bGluZSBjbGFzcz0icWwtZXZlbiBxbC1maWxsIiBwb2ludHM9IjUgMTIgNSAxMSA3IDkgOCAxMCAxMSA3IDEzIDkgMTMgMTIgNSAxMiI+PC9wb2x5bGluZT4gPC9zdmc+J30sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9Jzxzdmcgdmlld2JveD0iMCAwIDE4IDE4Ij4gPGxpbmUgY2xhc3M9cWwtc3Ryb2tlIHgxPTMgeDI9MTUgeTE9MTQgeTI9MTQ+PC9saW5lPiA8bGluZSBjbGFzcz1xbC1zdHJva2UgeDE9MyB4Mj0xNSB5MT00IHkyPTQ+PC9saW5lPiA8bGluZSBjbGFzcz1xbC1zdHJva2UgeDE9OSB4Mj0xNSB5MT05IHkyPTk+PC9saW5lPiA8cG9seWxpbmUgY2xhc3M9InFsLWZpbGwgcWwtc3Ryb2tlIiBwb2ludHM9IjMgNyAzIDExIDUgOSAzIDciPjwvcG9seWxpbmU+IDwvc3ZnPid9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPSc8c3ZnIHZpZXdib3g9IjAgMCAxOCAxOCI+IDxsaW5lIGNsYXNzPXFsLXN0cm9rZSB4MT0zIHgyPTE1IHkxPTE0IHkyPTE0PjwvbGluZT4gPGxpbmUgY2xhc3M9cWwtc3Ryb2tlIHgxPTMgeDI9MTUgeTE9NCB5Mj00PjwvbGluZT4gPGxpbmUgY2xhc3M9cWwtc3Ryb2tlIHgxPTkgeDI9MTUgeTE9OSB5Mj05PjwvbGluZT4gPHBvbHlsaW5lIGNsYXNzPXFsLXN0cm9rZSBwb2ludHM9IjUgNyA1IDExIDMgOSA1IDciPjwvcG9seWxpbmU+IDwvc3ZnPid9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPSc8c3ZnIHZpZXdib3g9IjAgMCAxOCAxOCI+IDxsaW5lIGNsYXNzPXFsLXN0cm9rZSB4MT03IHgyPTExIHkxPTcgeTI9MTE+PC9saW5lPiA8cGF0aCBjbGFzcz0icWwtZXZlbiBxbC1zdHJva2UiIGQ9TTguOSw0LjU3N2EzLjQ3NiwzLjQ3NiwwLDAsMSwuMzYsNC42NzlBMy40NzYsMy40NzYsMCwwLDEsNC41NzcsOC45QzMuMTg1LDcuNSwyLjAzNSw2LjQsNC4yMTcsNC4yMTdTNy41LDMuMTg1LDguOSw0LjU3N1o+PC9wYXRoPiA8cGF0aCBjbGFzcz0icWwtZXZlbiBxbC1zdHJva2UiIGQ9TTEzLjQyMyw5LjFhMy40NzYsMy40NzYsMCwwLDAtNC42NzktLjM2LDMuNDc2LDMuNDc2LDAsMCwwLC4zNiw0LjY3OWMxLjM5MiwxLjM5MiwyLjUsMi41NDIsNC42NzkuMzZTMTQuODE1LDEwLjUsMTMuNDIzLDkuMVo+PC9wYXRoPiA8L3N2Zz4nfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz0nPHN2ZyB2aWV3Ym94PSIwIDAgMTggMTgiPiA8bGluZSBjbGFzcz1xbC1zdHJva2UgeDE9NyB4Mj0xNSB5MT00IHkyPTQ+PC9saW5lPiA8bGluZSBjbGFzcz1xbC1zdHJva2UgeDE9NyB4Mj0xNSB5MT05IHkyPTk+PC9saW5lPiA8bGluZSBjbGFzcz1xbC1zdHJva2UgeDE9NyB4Mj0xNSB5MT0xNCB5Mj0xND48L2xpbmU+IDxsaW5lIGNsYXNzPSJxbC1zdHJva2UgcWwtdGhpbiIgeDE9Mi41IHgyPTQuNSB5MT01LjUgeTI9NS41PjwvbGluZT4gPHBhdGggY2xhc3M9cWwtZmlsbCBkPU0zLjUsNkEwLjUsMC41LDAsMCwxLDMsNS41VjMuMDg1bC0wLjI3Ni4xMzhBMC41LDAuNSwwLDAsMSwyLjA1MywzYy0wLjEyNC0uMjQ3LTAuMDIzLTAuMzI0LjIyNC0wLjQ0N2wxLS41QTAuNSwwLjUsMCwwLDEsNCwyLjV2M0EwLjUsMC41LDAsMCwxLDMuNSw2Wj48L3BhdGg+IDxwYXRoIGNsYXNzPSJxbC1zdHJva2UgcWwtdGhpbiIgZD1NNC41LDEwLjVoLTJjMC0uMjM0LDEuODUtMS4wNzYsMS44NS0yLjIzNEEwLjk1OSwwLjk1OSwwLDAsMCwyLjUsOC4xNTY+PC9wYXRoPiA8cGF0aCBjbGFzcz0icWwtc3Ryb2tlIHFsLXRoaW4iIGQ9TTIuNSwxNC44NDZhMC45NTksMC45NTksMCwwLDAsMS44NS0uMTA5QTAuNywwLjcsMCwwLDAsMy43NSwxNGEwLjY4OCwwLjY4OCwwLDAsMCwuNi0wLjczNiwwLjk1OSwwLjk1OSwwLDAsMC0xLjg1LS4xMDk+PC9wYXRoPiA8L3N2Zz4nfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz0nPHN2ZyB2aWV3Ym94PSIwIDAgMTggMTgiPiA8bGluZSBjbGFzcz1xbC1zdHJva2UgeDE9NiB4Mj0xNSB5MT00IHkyPTQ+PC9saW5lPiA8bGluZSBjbGFzcz1xbC1zdHJva2UgeDE9NiB4Mj0xNSB5MT05IHkyPTk+PC9saW5lPiA8bGluZSBjbGFzcz1xbC1zdHJva2UgeDE9NiB4Mj0xNSB5MT0xNCB5Mj0xND48L2xpbmU+IDxsaW5lIGNsYXNzPXFsLXN0cm9rZSB4MT0zIHgyPTMgeTE9NCB5Mj00PjwvbGluZT4gPGxpbmUgY2xhc3M9cWwtc3Ryb2tlIHgxPTMgeDI9MyB5MT05IHkyPTk+PC9saW5lPiA8bGluZSBjbGFzcz1xbC1zdHJva2UgeDE9MyB4Mj0zIHkxPTE0IHkyPTE0PjwvbGluZT4gPC9zdmc+J30sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9JzxzdmcgY2xhc3M9IiIgdmlld2JveD0iMCAwIDE4IDE4Ij4gPGxpbmUgY2xhc3M9cWwtc3Ryb2tlIHgxPTkgeDI9MTUgeTE9NCB5Mj00PjwvbGluZT4gPHBvbHlsaW5lIGNsYXNzPXFsLXN0cm9rZSBwb2ludHM9IjMgNCA0IDUgNiAzIj48L3BvbHlsaW5lPiA8bGluZSBjbGFzcz1xbC1zdHJva2UgeDE9OSB4Mj0xNSB5MT0xNCB5Mj0xND48L2xpbmU+IDxwb2x5bGluZSBjbGFzcz1xbC1zdHJva2UgcG9pbnRzPSIzIDE0IDQgMTUgNiAxMyI+PC9wb2x5bGluZT4gPGxpbmUgY2xhc3M9cWwtc3Ryb2tlIHgxPTkgeDI9MTUgeTE9OSB5Mj05PjwvbGluZT4gPHBvbHlsaW5lIGNsYXNzPXFsLXN0cm9rZSBwb2ludHM9IjMgOSA0IDEwIDYgOCI+PC9wb2x5bGluZT4gPC9zdmc+J30sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9Jzxzdmcgdmlld2JveD0iMCAwIDE4IDE4Ij4gPHBhdGggY2xhc3M9cWwtZmlsbCBkPU0xNS41LDE1SDEzLjg2MWEzLjg1OCwzLjg1OCwwLDAsMCwxLjkxNC0yLjk3NSwxLjgsMS44LDAsMCwwLTEuNi0xLjc1MUExLjkyMSwxLjkyMSwwLDAsMCwxMi4wMjEsMTEuN2EwLjUwMDEzLDAuNTAwMTMsMCwxLDAsLjk1Ny4yOTFoMGEwLjkxNCwwLjkxNCwwLDAsMSwxLjA1My0uNzI1LDAuODEsMC44MSwwLDAsMSwuNzQ0Ljc2MmMwLDEuMDc2LTEuMTY5NzEsMS44Njk4Mi0xLjkzOTcxLDIuNDMwODJBMS40NTYzOSwxLjQ1NjM5LDAsMCwwLDEyLDE1LjVhMC41LDAuNSwwLDAsMCwuNS41aDNBMC41LDAuNSwwLDAsMCwxNS41LDE1WiAvPiA8cGF0aCBjbGFzcz1xbC1maWxsIGQ9TTkuNjUsNS4yNDFhMSwxLDAsMCwwLTEuNDA5LjEwOEw2LDcuOTY0LDMuNzU5LDUuMzQ5QTEsMSwwLDAsMCwyLjE5Miw2LjU5MTc4UTIuMjE1NDEsNi42MjEzLDIuMjQxLDYuNjQ5TDQuNjg0LDkuNSwyLjI0MSwxMi4zNUExLDEsMCwwLDAsMy43MSwxMy43MDcyMnEwLjAyNTU3LS4wMjc2OC4wNDktMC4wNTcyMkw2LDExLjAzNiw4LjI0MSwxMy42NWExLDEsMCwxLDAsMS41NjctMS4yNDI3N1E5Ljc4NDU5LDEyLjM3NzcsOS43NTksMTIuMzVMNy4zMTYsOS41LDkuNzU5LDYuNjUxQTEsMSwwLDAsMCw5LjY1LDUuMjQxWiAvPiA8L3N2Zz4nfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz0nPHN2ZyB2aWV3Ym94PSIwIDAgMTggMTgiPiA8cGF0aCBjbGFzcz1xbC1maWxsIGQ9TTE1LjUsN0gxMy44NjFhNC4wMTUsNC4wMTUsMCwwLDAsMS45MTQtMi45NzUsMS44LDEuOCwwLDAsMC0xLjYtMS43NTFBMS45MjIsMS45MjIsMCwwLDAsMTIuMDIxLDMuN2EwLjUsMC41LDAsMSwwLC45NTcuMjkxLDAuOTE3LDAuOTE3LDAsMCwxLDEuMDUzLS43MjUsMC44MSwwLjgxLDAsMCwxLC43NDQuNzYyYzAsMS4wNzctMS4xNjQsMS45MjUtMS45MzQsMi40ODZBMS40MjMsMS40MjMsMCwwLDAsMTIsNy41YTAuNSwwLjUsMCwwLDAsLjUuNWgzQTAuNSwwLjUsMCwwLDAsMTUuNSw3WiAvPiA8cGF0aCBjbGFzcz1xbC1maWxsIGQ9TTkuNjUxLDUuMjQxYTEsMSwwLDAsMC0xLjQxLjEwOEw2LDcuOTY0LDMuNzU5LDUuMzQ5YTEsMSwwLDEsMC0xLjUxOSwxLjNMNC42ODMsOS41LDIuMjQxLDEyLjM1YTEsMSwwLDEsMCwxLjUxOSwxLjNMNiwxMS4wMzYsOC4yNDEsMTMuNjVhMSwxLDAsMCwwLDEuNTE5LTEuM0w3LjMxNyw5LjUsOS43NTksNi42NTFBMSwxLDAsMCwwLDkuNjUxLDUuMjQxWiAvPiA8L3N2Zz4nfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz0nPHN2ZyB2aWV3Ym94PSIwIDAgMTggMTgiPiA8bGluZSBjbGFzcz0icWwtc3Ryb2tlIHFsLXRoaW4iIHgxPTE1LjUgeDI9Mi41IHkxPTguNSB5Mj05LjU+PC9saW5lPiA8cGF0aCBjbGFzcz1xbC1maWxsIGQ9TTkuMDA3LDhDNi41NDIsNy43OTEsNiw3LjUxOSw2LDYuNSw2LDUuNzkyLDcuMjgzLDUsOSw1YzEuNTcxLDAsMi43NjUuNjc5LDIuOTY5LDEuMzA5YTEsMSwwLDAsMCwxLjktLjYxN0MxMy4zNTYsNC4xMDYsMTEuMzU0LDMsOSwzLDYuMiwzLDQsNC41MzgsNCw2LjVhMy4yLDMuMiwwLDAsMCwuNSwxLjg0M1o+PC9wYXRoPiA8cGF0aCBjbGFzcz1xbC1maWxsIGQ9TTguOTg0LDEwQzExLjQ1NywxMC4yMDgsMTIsMTAuNDc5LDEyLDExLjVjMCwwLjcwOC0xLjI4MywxLjUtMywxLjUtMS41NzEsMC0yLjc2NS0uNjc5LTIuOTY5LTEuMzA5YTEsMSwwLDEsMC0xLjkuNjE3QzQuNjQ0LDEzLjg5NCw2LjY0NiwxNSw5LDE1YzIuOCwwLDUtMS41MzgsNS0zLjVhMy4yLDMuMiwwLDAsMC0uNS0xLjg0M1o+PC9wYXRoPiA8L3N2Zz4nfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz0nPHN2ZyB2aWV3Ym94PSIwIDAgMTggMTgiPiA8cGF0aCBjbGFzcz1xbC1zdHJva2UgZD1NNSwzVjlhNC4wMTIsNC4wMTIsMCwwLDAsNCw0SDlhNC4wMTIsNC4wMTIsMCwwLDAsNC00VjM+PC9wYXRoPiA8cmVjdCBjbGFzcz1xbC1maWxsIGhlaWdodD0xIHJ4PTAuNSByeT0wLjUgd2lkdGg9MTIgeD0zIHk9MTU+PC9yZWN0PiA8L3N2Zz4nfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz0nPHN2ZyB2aWV3Ym94PSIwIDAgMTggMTgiPiA8cmVjdCBjbGFzcz1xbC1zdHJva2UgaGVpZ2h0PTEyIHdpZHRoPTEyIHg9MyB5PTM+PC9yZWN0PiA8cmVjdCBjbGFzcz1xbC1maWxsIGhlaWdodD0xMiB3aWR0aD0xIHg9NSB5PTM+PC9yZWN0PiA8cmVjdCBjbGFzcz1xbC1maWxsIGhlaWdodD0xMiB3aWR0aD0xIHg9MTIgeT0zPjwvcmVjdD4gPHJlY3QgY2xhc3M9cWwtZmlsbCBoZWlnaHQ9MiB3aWR0aD04IHg9NSB5PTg+PC9yZWN0PiA8cmVjdCBjbGFzcz1xbC1maWxsIGhlaWdodD0xIHdpZHRoPTMgeD0zIHk9NT48L3JlY3Q+IDxyZWN0IGNsYXNzPXFsLWZpbGwgaGVpZ2h0PTEgd2lkdGg9MyB4PTMgeT03PjwvcmVjdD4gPHJlY3QgY2xhc3M9cWwtZmlsbCBoZWlnaHQ9MSB3aWR0aD0zIHg9MyB5PTEwPjwvcmVjdD4gPHJlY3QgY2xhc3M9cWwtZmlsbCBoZWlnaHQ9MSB3aWR0aD0zIHg9MyB5PTEyPjwvcmVjdD4gPHJlY3QgY2xhc3M9cWwtZmlsbCBoZWlnaHQ9MSB3aWR0aD0zIHg9MTIgeT01PjwvcmVjdD4gPHJlY3QgY2xhc3M9cWwtZmlsbCBoZWlnaHQ9MSB3aWR0aD0zIHg9MTIgeT03PjwvcmVjdD4gPHJlY3QgY2xhc3M9cWwtZmlsbCBoZWlnaHQ9MSB3aWR0aD0zIHg9MTIgeT0xMD48L3JlY3Q+IDxyZWN0IGNsYXNzPXFsLWZpbGwgaGVpZ2h0PTEgd2lkdGg9MyB4PTEyIHk9MTI+PC9yZWN0PiA8L3N2Zz4nfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz0nPHN2ZyB2aWV3Ym94PSIwIDAgMTggMTgiPiA8cG9seWdvbiBjbGFzcz1xbC1zdHJva2UgcG9pbnRzPSI3IDExIDkgMTMgMTEgMTEgNyAxMSI+PC9wb2x5Z29uPiA8cG9seWdvbiBjbGFzcz1xbC1zdHJva2UgcG9pbnRzPSI3IDcgOSA1IDExIDcgNyA3Ij48L3BvbHlnb24+IDwvc3ZnPid9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gbyh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIGkodCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiFlfHwib2JqZWN0IiE9dHlwZW9mIGUmJiJmdW5jdGlvbiIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBsKHQsZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksZS5kZWZhdWx0PWUuQnViYmxlVG9vbHRpcD12b2lkIDA7dmFyIGE9ZnVuY3Rpb24gdChlLG4scil7bnVsbD09PWUmJihlPUZ1bmN0aW9uLnByb3RvdHlwZSk7dmFyIG89T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLG4pO2lmKHZvaWQgMD09PW8pe3ZhciBpPU9iamVjdC5nZXRQcm90b3R5cGVPZihlKTtyZXR1cm4gbnVsbD09PWk/dm9pZCAwOnQoaSxuLHIpfWlmKCJ2YWx1ZSJpbiBvKXJldHVybiBvLnZhbHVlO3ZhciBsPW8uZ2V0O2lmKHZvaWQgMCE9PWwpcmV0dXJuIGwuY2FsbChyKX0scz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIHI9ZVtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIua2V5LHIpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLHIpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLHImJnQoZSxyKSxlfX0oKSx1PW4oMiksYz1yKHUpLGY9big5KSxoPXIoZikscD1uKDQ0KSxkPXIocCkseT1uKDIyKSx2PW4oMjYpLGI9cih2KSxnPVtbImJvbGQiLCJpdGFsaWMiLCJsaW5rIl0sW3toZWFkZXI6MX0se2hlYWRlcjoyfSwiYmxvY2txdW90ZSJdXSxtPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCxuKXtvKHRoaXMsZSksbnVsbCE9bi5tb2R1bGVzLnRvb2xiYXImJm51bGw9PW4ubW9kdWxlcy50b29sYmFyLmNvbnRhaW5lciYmKG4ubW9kdWxlcy50b29sYmFyLmNvbnRhaW5lcj1nKTt2YXIgcj1pKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx0LG4pKTtyZXR1cm4gci5xdWlsbC5jb250YWluZXIuY2xhc3NMaXN0LmFkZCgicWwtYnViYmxlIikscn1yZXR1cm4gbChlLHQpLHMoZSxbe2tleToiZXh0ZW5kVG9vbGJhciIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy50b29sdGlwPW5ldyBfKHRoaXMucXVpbGwsdGhpcy5vcHRpb25zLmJvdW5kcyksdGhpcy50b29sdGlwLnJvb3QuYXBwZW5kQ2hpbGQodC5jb250YWluZXIpLHRoaXMuYnVpbGRCdXR0b25zKFtdLnNsaWNlLmNhbGwodC5jb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgiYnV0dG9uIikpLGIuZGVmYXVsdCksdGhpcy5idWlsZFBpY2tlcnMoW10uc2xpY2UuY2FsbCh0LmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCJzZWxlY3QiKSksYi5kZWZhdWx0KX19XSksZX0oZC5kZWZhdWx0KTttLkRFRkFVTFRTPSgwLGMuZGVmYXVsdCkoITAse30sZC5kZWZhdWx0LkRFRkFVTFRTLHttb2R1bGVzOnt0b29sYmFyOntoYW5kbGVyczp7bGluazpmdW5jdGlvbih0KXt0P3RoaXMucXVpbGwudGhlbWUudG9vbHRpcC5lZGl0KCk6dGhpcy5xdWlsbC5mb3JtYXQoImxpbmsiLCExKX19fX19KTt2YXIgXz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQsbil7byh0aGlzLGUpO3ZhciByPWkodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHQsbikpO3JldHVybiByLnF1aWxsLm9uKGguZGVmYXVsdC5ldmVudHMuRURJVE9SX0NIQU5HRSxmdW5jdGlvbih0LGUsbixvKXtpZih0PT09aC5kZWZhdWx0LmV2ZW50cy5TRUxFQ1RJT05fQ0hBTkdFKWlmKG51bGwhPWUmJmUubGVuZ3RoPjAmJm89PT1oLmRlZmF1bHQuc291cmNlcy5VU0VSKXtyLnNob3coKSxyLnJvb3Quc3R5bGUubGVmdD0iMHB4IixyLnJvb3Quc3R5bGUud2lkdGg9IiIsci5yb290LnN0eWxlLndpZHRoPXIucm9vdC5vZmZzZXRXaWR0aCsicHgiO3ZhciBpPXIucXVpbGwuZ2V0TGluZXMoZS5pbmRleCxlLmxlbmd0aCk7aWYoMT09PWkubGVuZ3RoKXIucG9zaXRpb24oci5xdWlsbC5nZXRCb3VuZHMoZSkpO2Vsc2V7dmFyIGw9aVtpLmxlbmd0aC0xXSxhPXIucXVpbGwuZ2V0SW5kZXgobCkscz1NYXRoLm1pbihsLmxlbmd0aCgpLTEsZS5pbmRleCtlLmxlbmd0aC1hKSx1PXIucXVpbGwuZ2V0Qm91bmRzKG5ldyB5LlJhbmdlKGEscykpO3IucG9zaXRpb24odSl9fWVsc2UgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCE9PXIudGV4dGJveCYmci5xdWlsbC5oYXNGb2N1cygpJiZyLmhpZGUoKX0pLHJ9cmV0dXJuIGwoZSx0KSxzKGUsW3trZXk6Imxpc3RlbiIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2EoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLCJsaXN0ZW4iLHRoaXMpLmNhbGwodGhpcyksdGhpcy5yb290LnF1ZXJ5U2VsZWN0b3IoIi5xbC1jbG9zZSIpLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIixmdW5jdGlvbigpe3Qucm9vdC5jbGFzc0xpc3QucmVtb3ZlKCJxbC1lZGl0aW5nIil9KSx0aGlzLnF1aWxsLm9uKGguZGVmYXVsdC5ldmVudHMuU0NST0xMX09QVElNSVpFLGZ1bmN0aW9uKCl7c2V0VGltZW91dChmdW5jdGlvbigpe2lmKCF0LnJvb3QuY2xhc3NMaXN0LmNvbnRhaW5zKCJxbC1oaWRkZW4iKSl7dmFyIGU9dC5xdWlsbC5nZXRTZWxlY3Rpb24oKTtudWxsIT1lJiZ0LnBvc2l0aW9uKHQucXVpbGwuZ2V0Qm91bmRzKGUpKX19LDEpfSl9fSx7a2V5OiJjYW5jZWwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5zaG93KCl9fSx7a2V5OiJwb3NpdGlvbiIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIG49YShlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksInBvc2l0aW9uIix0aGlzKS5jYWxsKHRoaXMsdCkscj10aGlzLnJvb3QucXVlcnlTZWxlY3RvcigiLnFsLXRvb2x0aXAtYXJyb3ciKTtpZihyLnN0eWxlLm1hcmdpbkxlZnQ9IiIsMD09PW4pcmV0dXJuIG47ci5zdHlsZS5tYXJnaW5MZWZ0PS0xKm4tci5vZmZzZXRXaWR0aC8yKyJweCJ9fV0pLGV9KHAuQmFzZVRvb2x0aXApO18uVEVNUExBVEU9Wyc8c3BhbiBjbGFzcz0icWwtdG9vbHRpcC1hcnJvdyI+PC9zcGFuPicsJzxkaXYgY2xhc3M9InFsLXRvb2x0aXAtZWRpdG9yIj4nLCc8aW5wdXQgdHlwZT0idGV4dCIgZGF0YS1mb3JtdWxhPSJlPW1jXjIiIGRhdGEtbGluaz0iaHR0cHM6Ly9xdWlsbGpzLmNvbSIgZGF0YS12aWRlbz0iRW1iZWQgVVJMIj4nLCc8YSBjbGFzcz0icWwtY2xvc2UiPjwvYT4nLCI8L2Rpdj4iXS5qb2luKCIiKSxlLkJ1YmJsZVRvb2x0aXA9XyxlLmRlZmF1bHQ9bX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiBvKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gaSh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIWV8fCJvYmplY3QiIT10eXBlb2YgZSYmImZ1bmN0aW9uIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIGwodCxlKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXt2YXIgbj1bXSxyPSEwLG89ITEsaT12b2lkIDA7dHJ5e2Zvcih2YXIgbCxhPXRbU3ltYm9sLml0ZXJhdG9yXSgpOyEocj0obD1hLm5leHQoKSkuZG9uZSkmJihuLnB1c2gobC52YWx1ZSksIWV8fG4ubGVuZ3RoIT09ZSk7cj0hMCk7fWNhdGNoKHQpe289ITAsaT10fWZpbmFsbHl7dHJ5eyFyJiZhLnJldHVybiYmYS5yZXR1cm4oKX1maW5hbGx5e2lmKG8pdGhyb3cgaX19cmV0dXJuIG59cmV0dXJuIGZ1bmN0aW9uKGUsbil7aWYoQXJyYXkuaXNBcnJheShlKSlyZXR1cm4gZTtpZihTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGUpKXJldHVybiB0KGUsbik7dGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpfX0oKSxzPWZ1bmN0aW9uIHQoZSxuLHIpe251bGw9PT1lJiYoZT1GdW5jdGlvbi5wcm90b3R5cGUpO3ZhciBvPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxuKTtpZih2b2lkIDA9PT1vKXt2YXIgaT1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7cmV0dXJuIG51bGw9PT1pP3ZvaWQgMDp0KGksbixyKX1pZigidmFsdWUiaW4gbylyZXR1cm4gby52YWx1ZTt2YXIgbD1vLmdldDtpZih2b2lkIDAhPT1sKXJldHVybiBsLmNhbGwocil9LHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciByPWVbbl07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsInZhbHVlImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLmtleSxyKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxyJiZ0KGUsciksZX19KCksYz1uKDIpLGY9cihjKSxoPW4oOSkscD1yKGgpLGQ9big0NCkseT1yKGQpLHY9bigxNSksYj1yKHYpLGc9bigyMiksbT1uKDI2KSxfPXIobSksTz1bW3toZWFkZXI6WyIxIiwiMiIsIjMiLCExXX1dLFsiYm9sZCIsIml0YWxpYyIsInVuZGVybGluZSIsImxpbmsiXSxbe2xpc3Q6Im9yZGVyZWQifSx7bGlzdDoiYnVsbGV0In1dLFsiY2xlYW4iXV0sdz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQsbil7byh0aGlzLGUpLG51bGwhPW4ubW9kdWxlcy50b29sYmFyJiZudWxsPT1uLm1vZHVsZXMudG9vbGJhci5jb250YWluZXImJihuLm1vZHVsZXMudG9vbGJhci5jb250YWluZXI9Tyk7dmFyIHI9aSh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMsdCxuKSk7cmV0dXJuIHIucXVpbGwuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoInFsLXNub3ciKSxyfXJldHVybiBsKGUsdCksdShlLFt7a2V5OiJleHRlbmRUb29sYmFyIix2YWx1ZTpmdW5jdGlvbih0KXt0LmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCJxbC1zbm93IiksdGhpcy5idWlsZEJ1dHRvbnMoW10uc2xpY2UuY2FsbCh0LmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCJidXR0b24iKSksXy5kZWZhdWx0KSx0aGlzLmJ1aWxkUGlja2VycyhbXS5zbGljZS5jYWxsKHQuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoInNlbGVjdCIpKSxfLmRlZmF1bHQpLHRoaXMudG9vbHRpcD1uZXcgeCh0aGlzLnF1aWxsLHRoaXMub3B0aW9ucy5ib3VuZHMpLHQuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoIi5xbC1saW5rIikmJnRoaXMucXVpbGwua2V5Ym9hcmQuYWRkQmluZGluZyh7a2V5OiJLIixzaG9ydEtleTohMH0sZnVuY3Rpb24oZSxuKXt0LmhhbmRsZXJzLmxpbmsuY2FsbCh0LCFuLmZvcm1hdC5saW5rKX0pfX1dKSxlfSh5LmRlZmF1bHQpO3cuREVGQVVMVFM9KDAsZi5kZWZhdWx0KSghMCx7fSx5LmRlZmF1bHQuREVGQVVMVFMse21vZHVsZXM6e3Rvb2xiYXI6e2hhbmRsZXJzOntsaW5rOmZ1bmN0aW9uKHQpe2lmKHQpe3ZhciBlPXRoaXMucXVpbGwuZ2V0U2VsZWN0aW9uKCk7aWYobnVsbD09ZXx8MD09ZS5sZW5ndGgpcmV0dXJuO3ZhciBuPXRoaXMucXVpbGwuZ2V0VGV4dChlKTsvXlxTK0BcUytcLlxTKyQvLnRlc3QobikmJjAhPT1uLmluZGV4T2YoIm1haWx0bzoiKSYmKG49Im1haWx0bzoiK24pO3RoaXMucXVpbGwudGhlbWUudG9vbHRpcC5lZGl0KCJsaW5rIixuKX1lbHNlIHRoaXMucXVpbGwuZm9ybWF0KCJsaW5rIiwhMSl9fX19fSk7dmFyIHg9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0LG4pe28odGhpcyxlKTt2YXIgcj1pKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx0LG4pKTtyZXR1cm4gci5wcmV2aWV3PXIucm9vdC5xdWVyeVNlbGVjdG9yKCJhLnFsLXByZXZpZXciKSxyfXJldHVybiBsKGUsdCksdShlLFt7a2V5OiJsaXN0ZW4iLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztzKGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSwibGlzdGVuIix0aGlzKS5jYWxsKHRoaXMpLHRoaXMucm9vdC5xdWVyeVNlbGVjdG9yKCJhLnFsLWFjdGlvbiIpLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIixmdW5jdGlvbihlKXt0LnJvb3QuY2xhc3NMaXN0LmNvbnRhaW5zKCJxbC1lZGl0aW5nIik/dC5zYXZlKCk6dC5lZGl0KCJsaW5rIix0LnByZXZpZXcudGV4dENvbnRlbnQpLGUucHJldmVudERlZmF1bHQoKX0pLHRoaXMucm9vdC5xdWVyeVNlbGVjdG9yKCJhLnFsLXJlbW92ZSIpLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIixmdW5jdGlvbihlKXtpZihudWxsIT10LmxpbmtSYW5nZSl7dmFyIG49dC5saW5rUmFuZ2U7dC5yZXN0b3JlRm9jdXMoKSx0LnF1aWxsLmZvcm1hdFRleHQobiwibGluayIsITEscC5kZWZhdWx0LnNvdXJjZXMuVVNFUiksZGVsZXRlIHQubGlua1JhbmdlfWUucHJldmVudERlZmF1bHQoKSx0LmhpZGUoKX0pLHRoaXMucXVpbGwub24ocC5kZWZhdWx0LmV2ZW50cy5TRUxFQ1RJT05fQ0hBTkdFLGZ1bmN0aW9uKGUsbixyKXtpZihudWxsIT1lKXtpZigwPT09ZS5sZW5ndGgmJnI9PT1wLmRlZmF1bHQuc291cmNlcy5VU0VSKXt2YXIgbz10LnF1aWxsLnNjcm9sbC5kZXNjZW5kYW50KGIuZGVmYXVsdCxlLmluZGV4KSxpPWEobywyKSxsPWlbMF0scz1pWzFdO2lmKG51bGwhPWwpe3QubGlua1JhbmdlPW5ldyBnLlJhbmdlKGUuaW5kZXgtcyxsLmxlbmd0aCgpKTt2YXIgdT1iLmRlZmF1bHQuZm9ybWF0cyhsLmRvbU5vZGUpO3JldHVybiB0LnByZXZpZXcudGV4dENvbnRlbnQ9dSx0LnByZXZpZXcuc2V0QXR0cmlidXRlKCJocmVmIix1KSx0LnNob3coKSx2b2lkIHQucG9zaXRpb24odC5xdWlsbC5nZXRCb3VuZHModC5saW5rUmFuZ2UpKX19ZWxzZSBkZWxldGUgdC5saW5rUmFuZ2U7dC5oaWRlKCl9fSl9fSx7a2V5OiJzaG93Iix2YWx1ZTpmdW5jdGlvbigpe3MoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLCJzaG93Iix0aGlzKS5jYWxsKHRoaXMpLHRoaXMucm9vdC5yZW1vdmVBdHRyaWJ1dGUoImRhdGEtbW9kZSIpfX1dKSxlfShkLkJhc2VUb29sdGlwKTt4LlRFTVBMQVRFPVsnPGEgY2xhc3M9InFsLXByZXZpZXciIHRhcmdldD0iX2JsYW5rIiBocmVmPSJhYm91dDpibGFuayI+PC9hPicsJzxpbnB1dCB0eXBlPSJ0ZXh0IiBkYXRhLWZvcm11bGE9ImU9bWNeMiIgZGF0YS1saW5rPSJodHRwczovL3F1aWxsanMuY29tIiBkYXRhLXZpZGVvPSJFbWJlZCBVUkwiPicsJzxhIGNsYXNzPSJxbC1hY3Rpb24iPjwvYT4nLCc8YSBjbGFzcz0icWwtcmVtb3ZlIj48L2E+J10uam9pbigiIiksZS5kZWZhdWx0PXd9XSkuZGVmYXVsdH0pOwovLyMgc291cmNlTWFwcGluZ1VSTD1xdWlsbC5taW4uanMubWFwCiFmdW5jdGlvbihlKXtpZigib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHMmJiJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlKW1vZHVsZS5leHBvcnRzPWUoKTtlbHNlIGlmKCJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFtdLGUpO2Vsc2V7dmFyIHQ7dD0idW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOnRoaXMsdC5ibG9iVXRpbD1lKCl9fShmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBvKHUsZil7aWYoIW5bdV0pe2lmKCF0W3VdKXt2YXIgYT0iZnVuY3Rpb24iPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYSlyZXR1cm4gYSh1LCEwKTtpZihpKXJldHVybiBpKHUsITApO3ZhciBjPW5ldyBFcnJvcigiQ2Fubm90IGZpbmQgbW9kdWxlICciK3UrIiciKTt0aHJvdyBjLmNvZGU9Ik1PRFVMRV9OT1RfRk9VTkQiLGN9dmFyIGw9blt1XT17ZXhwb3J0czp7fX07dFt1XVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W3VdWzFdW2VdO3JldHVybiBvKG58fGUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gblt1XS5leHBvcnRzfWZvcih2YXIgaT0iZnVuY3Rpb24iPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSx1PTA7dTxyLmxlbmd0aDt1KyspbyhyW3VdKTtyZXR1cm4gb30oezE6W2Z1bmN0aW9uKGUsdCxuKXsoZnVuY3Rpb24oZSl7ZnVuY3Rpb24gbihlKXtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrKyl7dmFyIG49ZVt0XTtpZihuLmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKXt2YXIgcj1uLmJ1ZmZlcjtpZihuLmJ5dGVMZW5ndGghPT1yLmJ5dGVMZW5ndGgpe3ZhciBvPW5ldyBVaW50OEFycmF5KG4uYnl0ZUxlbmd0aCk7by5zZXQobmV3IFVpbnQ4QXJyYXkocixuLmJ5dGVPZmZzZXQsbi5ieXRlTGVuZ3RoKSkscj1vLmJ1ZmZlcn1lW3RdPXJ9fX1mdW5jdGlvbiByKGUsdCl7dD10fHx7fTt2YXIgcj1uZXcgaTtuKGUpO2Zvcih2YXIgbz0wO288ZS5sZW5ndGg7bysrKXIuYXBwZW5kKGVbb10pO3JldHVybiB0LnR5cGU/ci5nZXRCbG9iKHQudHlwZSk6ci5nZXRCbG9iKCl9ZnVuY3Rpb24gbyhlLHQpe3JldHVybiBuKGUpLG5ldyBCbG9iKGUsdHx8e30pfXZhciBpPWUuQmxvYkJ1aWxkZXJ8fGUuV2ViS2l0QmxvYkJ1aWxkZXJ8fGUuTVNCbG9iQnVpbGRlcnx8ZS5Nb3pCbG9iQnVpbGRlcix1PWZ1bmN0aW9uKCl7dHJ5e3JldHVybiAyPT09bmV3IEJsb2IoWyJoaSJdKS5zaXplfWNhdGNoKGUpe3JldHVybiExfX0oKSxmPXUmJmZ1bmN0aW9uKCl7dHJ5e3JldHVybiAyPT09bmV3IEJsb2IoW25ldyBVaW50OEFycmF5KFsxLDJdKV0pLnNpemV9Y2F0Y2goZSl7cmV0dXJuITF9fSgpLGE9aSYmaS5wcm90b3R5cGUuYXBwZW5kJiZpLnByb3RvdHlwZS5nZXRCbG9iO3QuZXhwb3J0cz1mdW5jdGlvbigpe3JldHVybiB1P2Y/ZS5CbG9iOm86YT9yOnZvaWQgMH0oKX0pLmNhbGwodGhpcywidW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmP3NlbGY6InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9KX0se31dLDI6W2Z1bmN0aW9uKGUsdCxuKXsoZnVuY3Rpb24oZSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oKXtsPSEwO2Zvcih2YXIgZSx0LG49cy5sZW5ndGg7bjspe2Zvcih0PXMscz1bXSxlPS0xOysrZTxuOyl0W2VdKCk7bj1zLmxlbmd0aH1sPSExfWZ1bmN0aW9uIHIoZSl7MSE9PXMucHVzaChlKXx8bHx8bygpfXZhciBvLGk9ZS5NdXRhdGlvbk9ic2VydmVyfHxlLldlYktpdE11dGF0aW9uT2JzZXJ2ZXI7aWYoaSl7dmFyIHU9MCxmPW5ldyBpKG4pLGE9ZS5kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7Zi5vYnNlcnZlKGEse2NoYXJhY3RlckRhdGE6ITB9KSxvPWZ1bmN0aW9uKCl7YS5kYXRhPXU9Kyt1JTJ9fWVsc2UgaWYoZS5zZXRJbW1lZGlhdGV8fHZvaWQgMD09PWUuTWVzc2FnZUNoYW5uZWwpbz0iZG9jdW1lbnQiaW4gZSYmIm9ucmVhZHlzdGF0ZWNoYW5nZSJpbiBlLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpP2Z1bmN0aW9uKCl7dmFyIHQ9ZS5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTt0Lm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe24oKSx0Lm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsLHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0KSx0PW51bGx9LGUuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKHQpfTpmdW5jdGlvbigpe3NldFRpbWVvdXQobiwwKX07ZWxzZXt2YXIgYz1uZXcgZS5NZXNzYWdlQ2hhbm5lbDtjLnBvcnQxLm9ubWVzc2FnZT1uLG89ZnVuY3Rpb24oKXtjLnBvcnQyLnBvc3RNZXNzYWdlKDApfX12YXIgbCxzPVtdO3QuZXhwb3J0cz1yfSkuY2FsbCh0aGlzLCJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGY/c2VsZjoidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6e30pfSx7fV0sMzpbZnVuY3Rpb24oZSx0LG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKCl7fWZ1bmN0aW9uIG8oZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcigicmVzb2x2ZXIgbXVzdCBiZSBhIGZ1bmN0aW9uIik7dGhpcy5zdGF0ZT13LHRoaXMucXVldWU9W10sdGhpcy5vdXRjb21lPXZvaWQgMCxlIT09ciYmYSh0aGlzLGUpfWZ1bmN0aW9uIGkoZSx0LG4pe3RoaXMucHJvbWlzZT1lLCJmdW5jdGlvbiI9PXR5cGVvZiB0JiYodGhpcy5vbkZ1bGZpbGxlZD10LHRoaXMuY2FsbEZ1bGZpbGxlZD10aGlzLm90aGVyQ2FsbEZ1bGZpbGxlZCksImZ1bmN0aW9uIj09dHlwZW9mIG4mJih0aGlzLm9uUmVqZWN0ZWQ9bix0aGlzLmNhbGxSZWplY3RlZD10aGlzLm90aGVyQ2FsbFJlamVjdGVkKX1mdW5jdGlvbiB1KGUsdCxuKXtwKGZ1bmN0aW9uKCl7dmFyIHI7dHJ5e3I9dChuKX1jYXRjaCh0KXtyZXR1cm4gdi5yZWplY3QoZSx0KX1yPT09ZT92LnJlamVjdChlLG5ldyBUeXBlRXJyb3IoIkNhbm5vdCByZXNvbHZlIHByb21pc2Ugd2l0aCBpdHNlbGYiKSk6di5yZXNvbHZlKGUscil9KX1mdW5jdGlvbiBmKGUpe3ZhciB0PWUmJmUudGhlbjtpZihlJiYoIm9iamVjdCI9PXR5cGVvZiBlfHwiZnVuY3Rpb24iPT10eXBlb2YgZSkmJiJmdW5jdGlvbiI9PXR5cGVvZiB0KXJldHVybiBmdW5jdGlvbigpe3QuYXBwbHkoZSxhcmd1bWVudHMpfX1mdW5jdGlvbiBhKGUsdCl7ZnVuY3Rpb24gbih0KXtpfHwoaT0hMCx2LnJlamVjdChlLHQpKX1mdW5jdGlvbiByKHQpe2l8fChpPSEwLHYucmVzb2x2ZShlLHQpKX1mdW5jdGlvbiBvKCl7dChyLG4pfXZhciBpPSExLHU9YyhvKTsiZXJyb3IiPT09dS5zdGF0dXMmJm4odS52YWx1ZSl9ZnVuY3Rpb24gYyhlLHQpe3ZhciBuPXt9O3RyeXtuLnZhbHVlPWUodCksbi5zdGF0dXM9InN1Y2Nlc3MifWNhdGNoKGUpe24uc3RhdHVzPSJlcnJvciIsbi52YWx1ZT1lfXJldHVybiBufWZ1bmN0aW9uIGwoZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiB0aGlzP2U6di5yZXNvbHZlKG5ldyB0aGlzKHIpLGUpfWZ1bmN0aW9uIHMoZSl7dmFyIHQ9bmV3IHRoaXMocik7cmV0dXJuIHYucmVqZWN0KHQsZSl9ZnVuY3Rpb24gaChlKXt2YXIgdD10aGlzO2lmKCJbb2JqZWN0IEFycmF5XSIhPT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkpcmV0dXJuIHRoaXMucmVqZWN0KG5ldyBUeXBlRXJyb3IoIm11c3QgYmUgYW4gYXJyYXkiKSk7dmFyIG49ZS5sZW5ndGgsbz0hMTtpZighbilyZXR1cm4gdGhpcy5yZXNvbHZlKFtdKTtmb3IodmFyIGk9bmV3IEFycmF5KG4pLHU9MCxmPS0xLGE9bmV3IHRoaXMocik7KytmPG47KSFmdW5jdGlvbihlLHIpe2Z1bmN0aW9uIGYoZSl7aVtyXT1lLCsrdSE9PW58fG98fChvPSEwLHYucmVzb2x2ZShhLGkpKX10LnJlc29sdmUoZSkudGhlbihmLGZ1bmN0aW9uKGUpe298fChvPSEwLHYucmVqZWN0KGEsZSkpfSl9KGVbZl0sZik7cmV0dXJuIGF9ZnVuY3Rpb24gZChlKXt2YXIgdD10aGlzO2lmKCJbb2JqZWN0IEFycmF5XSIhPT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkpcmV0dXJuIHRoaXMucmVqZWN0KG5ldyBUeXBlRXJyb3IoIm11c3QgYmUgYW4gYXJyYXkiKSk7dmFyIG49ZS5sZW5ndGgsbz0hMTtpZighbilyZXR1cm4gdGhpcy5yZXNvbHZlKFtdKTtmb3IodmFyIGk9LTEsdT1uZXcgdGhpcyhyKTsrK2k8bjspIWZ1bmN0aW9uKGUpe3QucmVzb2x2ZShlKS50aGVuKGZ1bmN0aW9uKGUpe298fChvPSEwLHYucmVzb2x2ZSh1LGUpKX0sZnVuY3Rpb24oZSl7b3x8KG89ITAsdi5yZWplY3QodSxlKSl9KX0oZVtpXSk7cmV0dXJuIHV9dmFyIHA9ZSgyKSx2PXt9LHk9WyJSRUpFQ1RFRCJdLGI9WyJGVUxGSUxMRUQiXSx3PVsiUEVORElORyJdO3QuZXhwb3J0cz1vLG8ucHJvdG90eXBlLmNhdGNoPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnRoZW4obnVsbCxlKX0sby5wcm90b3R5cGUudGhlbj1mdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlJiZ0aGlzLnN0YXRlPT09Ynx8ImZ1bmN0aW9uIiE9dHlwZW9mIHQmJnRoaXMuc3RhdGU9PT15KXJldHVybiB0aGlzO3ZhciBuPW5ldyB0aGlzLmNvbnN0cnVjdG9yKHIpO2lmKHRoaXMuc3RhdGUhPT13KXt1KG4sdGhpcy5zdGF0ZT09PWI/ZTp0LHRoaXMub3V0Y29tZSl9ZWxzZSB0aGlzLnF1ZXVlLnB1c2gobmV3IGkobixlLHQpKTtyZXR1cm4gbn0saS5wcm90b3R5cGUuY2FsbEZ1bGZpbGxlZD1mdW5jdGlvbihlKXt2LnJlc29sdmUodGhpcy5wcm9taXNlLGUpfSxpLnByb3RvdHlwZS5vdGhlckNhbGxGdWxmaWxsZWQ9ZnVuY3Rpb24oZSl7dSh0aGlzLnByb21pc2UsdGhpcy5vbkZ1bGZpbGxlZCxlKX0saS5wcm90b3R5cGUuY2FsbFJlamVjdGVkPWZ1bmN0aW9uKGUpe3YucmVqZWN0KHRoaXMucHJvbWlzZSxlKX0saS5wcm90b3R5cGUub3RoZXJDYWxsUmVqZWN0ZWQ9ZnVuY3Rpb24oZSl7dSh0aGlzLnByb21pc2UsdGhpcy5vblJlamVjdGVkLGUpfSx2LnJlc29sdmU9ZnVuY3Rpb24oZSx0KXt2YXIgbj1jKGYsdCk7aWYoImVycm9yIj09PW4uc3RhdHVzKXJldHVybiB2LnJlamVjdChlLG4udmFsdWUpO3ZhciByPW4udmFsdWU7aWYocilhKGUscik7ZWxzZXtlLnN0YXRlPWIsZS5vdXRjb21lPXQ7Zm9yKHZhciBvPS0xLGk9ZS5xdWV1ZS5sZW5ndGg7KytvPGk7KWUucXVldWVbb10uY2FsbEZ1bGZpbGxlZCh0KX1yZXR1cm4gZX0sdi5yZWplY3Q9ZnVuY3Rpb24oZSx0KXtlLnN0YXRlPXksZS5vdXRjb21lPXQ7Zm9yKHZhciBuPS0xLHI9ZS5xdWV1ZS5sZW5ndGg7KytuPHI7KWUucXVldWVbbl0uY2FsbFJlamVjdGVkKHQpO3JldHVybiBlfSxvLnJlc29sdmU9bCxvLnJlamVjdD1zLG8uYWxsPWgsby5yYWNlPWR9LHsyOjJ9XSw0OltmdW5jdGlvbihlLHQsbil7dC5leHBvcnRzPSJmdW5jdGlvbiI9PXR5cGVvZiBQcm9taXNlP1Byb21pc2U6ZSgzKX0sezM6M31dLDU6W2Z1bmN0aW9uKGUsdCxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcihlKXtmb3IodmFyIHQ9ZS5sZW5ndGgsbj1uZXcgQXJyYXlCdWZmZXIodCkscj1uZXcgVWludDhBcnJheShuKSxvPS0xOysrbzx0OylyW29dPWUuY2hhckNvZGVBdChvKTtyZXR1cm4gbn1mdW5jdGlvbiBvKGUpe2Zvcih2YXIgdD0iIixuPW5ldyBVaW50OEFycmF5KGUpLHI9bi5ieXRlTGVuZ3RoLG89LTE7KytvPHI7KXQrPVN0cmluZy5mcm9tQ2hhckNvZGUobltvXSk7cmV0dXJuIHR9ZnVuY3Rpb24gaShlLHQpe3JldHVybiBuZXcgaihmdW5jdGlvbihuLHIpe3ZhciBvPW5ldyBJbWFnZTt0JiYoby5jcm9zc09yaWdpbj10KSxvLm9ubG9hZD1mdW5jdGlvbigpe24obyl9LG8ub25lcnJvcj1yLG8uc3JjPWV9KX1mdW5jdGlvbiB1KGUpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpO3JldHVybiB0LndpZHRoPWUud2lkdGgsdC5oZWlnaHQ9ZS5oZWlnaHQsdC5nZXRDb250ZXh0KCIyZCIpLmRyYXdJbWFnZShlLDAsMCxlLndpZHRoLGUuaGVpZ2h0LDAsMCxlLndpZHRoLGUuaGVpZ2h0KSx0fWZ1bmN0aW9uIGYoZSx0KXtyZXR1cm4gdD10fHx7fSwic3RyaW5nIj09dHlwZW9mIHQmJih0PXt0eXBlOnR9KSxuZXcgQihlLHQpfWZ1bmN0aW9uIGEoZSl7cmV0dXJuKHdpbmRvdy5VUkx8fHdpbmRvdy53ZWJraXRVUkwpLmNyZWF0ZU9iamVjdFVSTChlKX1mdW5jdGlvbiBjKGUpe3JldHVybih3aW5kb3cuVVJMfHx3aW5kb3cud2Via2l0VVJMKS5yZXZva2VPYmplY3RVUkwoZSl9ZnVuY3Rpb24gbChlKXtyZXR1cm4gbmV3IGooZnVuY3Rpb24odCxuKXt2YXIgcj1uZXcgRmlsZVJlYWRlcixpPSJmdW5jdGlvbiI9PXR5cGVvZiByLnJlYWRBc0JpbmFyeVN0cmluZztyLm9ubG9hZGVuZD1mdW5jdGlvbihlKXt2YXIgbj1lLnRhcmdldC5yZXN1bHR8fCIiO2lmKGkpcmV0dXJuIHQobik7dChvKG4pKX0sci5vbmVycm9yPW4saT9yLnJlYWRBc0JpbmFyeVN0cmluZyhlKTpyLnJlYWRBc0FycmF5QnVmZmVyKGUpfSl9ZnVuY3Rpb24gcyhlLHQpe3JldHVybiBqLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uKCl7dmFyIG49W3IoYXRvYihlKSldO3JldHVybiB0P2Yobix7dHlwZTp0fSk6ZihuKX0pfWZ1bmN0aW9uIGgoZSx0KXtyZXR1cm4gai5yZXNvbHZlKCkudGhlbihmdW5jdGlvbigpe3JldHVybiBzKGJ0b2EoZSksdCl9KX1mdW5jdGlvbiBkKGUpe3JldHVybiBsKGUpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIGJ0b2EoZSl9KX1mdW5jdGlvbiBwKGUpe3JldHVybiBqLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uKCl7dmFyIHQ9ZS5tYXRjaCgvZGF0YTooW147XSspLylbMV0sbj1lLnJlcGxhY2UoL15bXixdKywvLCIiKTtyZXR1cm4gZihbcihhdG9iKG4pKV0se3R5cGU6dH0pfSl9ZnVuY3Rpb24gdihlKXtyZXR1cm4gZChlKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiJkYXRhOiIrZS50eXBlKyI7YmFzZTY0LCIrdH0pfWZ1bmN0aW9uIHkoZSx0LG4scil7cmV0dXJuIHQ9dHx8ImltYWdlL3BuZyIsaShlLG4pLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIHUoZSl9KS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBlLnRvRGF0YVVSTCh0LHIpfSl9ZnVuY3Rpb24gYihlLHQsbil7cmV0dXJuIGoucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgZS50b0Jsb2I/bmV3IGooZnVuY3Rpb24ocil7ZS50b0Jsb2Iocix0LG4pfSk6cChlLnRvRGF0YVVSTCh0LG4pKX0pfWZ1bmN0aW9uIHcoZSx0LG4scil7cmV0dXJuIHQ9dHx8ImltYWdlL3BuZyIsaShlLG4pLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIHUoZSl9KS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBiKGUsdCxyKX0pfWZ1bmN0aW9uIGcoZSx0KXtyZXR1cm4gai5yZXNvbHZlKCkudGhlbihmdW5jdGlvbigpe3JldHVybiBmKFtlXSx0KX0pfWZ1bmN0aW9uIG0oZSl7cmV0dXJuIG5ldyBqKGZ1bmN0aW9uKHQsbil7dmFyIHI9bmV3IEZpbGVSZWFkZXI7ci5vbmxvYWRlbmQ9ZnVuY3Rpb24oZSl7dmFyIG49ZS50YXJnZXQucmVzdWx0fHxuZXcgQXJyYXlCdWZmZXIoMCk7dChuKX0sci5vbmVycm9yPW4sci5yZWFkQXNBcnJheUJ1ZmZlcihlKX0pfXZhciBCPWUoMSksaj1lKDQpO3QuZXhwb3J0cz17Y3JlYXRlQmxvYjpmLGNyZWF0ZU9iamVjdFVSTDphLHJldm9rZU9iamVjdFVSTDpjLGltZ1NyY1RvQmxvYjp3LGltZ1NyY1RvRGF0YVVSTDp5LGNhbnZhc1RvQmxvYjpiLGRhdGFVUkxUb0Jsb2I6cCxibG9iVG9EYXRhVVJMOnYsYmxvYlRvQmFzZTY0U3RyaW5nOmQsYmFzZTY0U3RyaW5nVG9CbG9iOnMsYmluYXJ5U3RyaW5nVG9CbG9iOmgsYmxvYlRvQmluYXJ5U3RyaW5nOmwsYXJyYXlCdWZmZXJUb0Jsb2I6ZyxibG9iVG9BcnJheUJ1ZmZlcjptfX0sezE6MSw0OjR9XX0se30sWzVdKSg1KX0pOwo=</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
      <TcpPackets>
        <PacketInfo time="80862968" offset="0" length="759" />
        <PacketInfo time="80862968" offset="759" length="16355" />
        <PacketInfo time="80862968" offset="17114" length="16355" />
        <PacketInfo time="80862968" offset="33469" length="16355" />
        <PacketInfo time="80862968" offset="49824" length="16355" />
        <PacketInfo time="80862984" offset="66179" length="16355" />
        <PacketInfo time="80862984" offset="82534" length="16355" />
        <PacketInfo time="80862984" offset="98889" length="16355" />
        <PacketInfo time="80862984" offset="115244" length="16355" />
        <PacketInfo time="80862984" offset="131599" length="16355" />
        <PacketInfo time="80862984" offset="147954" length="16355" />
        <PacketInfo time="80862984" offset="164309" length="16355" />
        <PacketInfo time="80862984" offset="180664" length="16355" />
        <PacketInfo time="80862984" offset="197019" length="16355" />
        <PacketInfo time="80862984" offset="213374" length="16355" />
        <PacketInfo time="80863000" offset="229729" length="16355" />
        <PacketInfo time="80863000" offset="246084" length="16355" />
        <PacketInfo time="80863000" offset="262439" length="16355" />
        <PacketInfo time="80863000" offset="278794" length="16355" />
        <PacketInfo time="80863000" offset="295149" length="16355" />
        <PacketInfo time="80863000" offset="311504" length="16355" />
        <PacketInfo time="80863000" offset="327859" length="16355" />
        <PacketInfo time="80863000" offset="344214" length="16355" />
        <PacketInfo time="80863000" offset="360569" length="16355" />
        <PacketInfo time="80863000" offset="376924" length="16355" />
        <PacketInfo time="80863000" offset="393279" length="16355" />
        <PacketInfo time="80863015" offset="409634" length="16355" />
        <PacketInfo time="80863015" offset="425989" length="16355" />
        <PacketInfo time="80863015" offset="442344" length="16355" />
        <PacketInfo time="80863015" offset="458699" length="16355" />
        <PacketInfo time="80863015" offset="475054" length="16355" />
        <PacketInfo time="80863015" offset="491409" length="16355" />
        <PacketInfo time="80863015" offset="507764" length="16355" />
        <PacketInfo time="80863015" offset="524119" length="16355" />
        <PacketInfo time="80863015" offset="540474" length="16355" />
        <PacketInfo time="80863015" offset="556829" length="16355" />
        <PacketInfo time="80863015" offset="573184" length="16355" />
        <PacketInfo time="80863015" offset="589539" length="16355" />
        <PacketInfo time="80863031" offset="605894" length="16355" />
        <PacketInfo time="80863031" offset="622249" length="16355" />
        <PacketInfo time="80863031" offset="638604" length="16355" />
        <PacketInfo time="80863031" offset="654959" length="16355" />
        <PacketInfo time="80863031" offset="671314" length="16355" />
        <PacketInfo time="80863031" offset="687669" length="16355" />
        <PacketInfo time="80863031" offset="704024" length="16355" />
        <PacketInfo time="80863031" offset="720379" length="16355" />
        <PacketInfo time="80863031" offset="736734" length="16355" />
        <PacketInfo time="80863031" offset="753089" length="16355" />
        <PacketInfo time="80863031" offset="769444" length="16355" />
        <PacketInfo time="80863046" offset="785799" length="16355" />
        <PacketInfo time="80863046" offset="802154" length="16355" />
        <PacketInfo time="80863046" offset="818509" length="16355" />
        <PacketInfo time="80863046" offset="834864" length="16355" />
        <PacketInfo time="80863046" offset="851219" length="16355" />
        <PacketInfo time="80863046" offset="867574" length="16355" />
        <PacketInfo time="80863046" offset="883929" length="16355" />
        <PacketInfo time="80863046" offset="900284" length="16355" />
        <PacketInfo time="80863046" offset="916639" length="16355" />
        <PacketInfo time="80863046" offset="932994" length="16355" />
        <PacketInfo time="80863046" offset="949349" length="16355" />
        <PacketInfo time="80863062" offset="965704" length="16355" />
        <PacketInfo time="80863062" offset="982059" length="16355" />
        <PacketInfo time="80863062" offset="998414" length="16355" />
        <PacketInfo time="80863062" offset="1014769" length="16355" />
        <PacketInfo time="80863062" offset="1031124" length="16355" />
        <PacketInfo time="80863062" offset="1047479" length="16355" />
        <PacketInfo time="80863062" offset="1063834" length="16355" />
        <PacketInfo time="80863062" offset="1080189" length="16355" />
        <PacketInfo time="80863062" offset="1096544" length="16355" />
        <PacketInfo time="80863062" offset="1112899" length="16355" />
        <PacketInfo time="80863062" offset="1129254" length="16355" />
        <PacketInfo time="80863062" offset="1145609" length="16355" />
        <PacketInfo time="80863078" offset="1161964" length="16355" />
        <PacketInfo time="80863078" offset="1178319" length="16355" />
        <PacketInfo time="80863078" offset="1194674" length="16355" />
        <PacketInfo time="80863078" offset="1211029" length="16355" />
        <PacketInfo time="80863078" offset="1227384" length="16355" />
        <PacketInfo time="80863078" offset="1243739" length="16355" />
        <PacketInfo time="80863078" offset="1260094" length="16355" />
        <PacketInfo time="80863078" offset="1276449" length="16355" />
        <PacketInfo time="80863078" offset="1292804" length="16355" />
        <PacketInfo time="80863078" offset="1309159" length="16355" />
        <PacketInfo time="80863078" offset="1325514" length="16355" />
        <PacketInfo time="80863078" offset="1341869" length="16355" />
        <PacketInfo time="80863093" offset="1358224" length="16355" />
        <PacketInfo time="80863093" offset="1374579" length="16355" />
        <PacketInfo time="80863093" offset="1390934" length="16355" />
        <PacketInfo time="80863093" offset="1407289" length="16355" />
        <PacketInfo time="80863093" offset="1423644" length="16355" />
        <PacketInfo time="80863093" offset="1439999" length="16355" />
        <PacketInfo time="80863093" offset="1456354" length="16355" />
        <PacketInfo time="80863093" offset="1472709" length="16355" />
        <PacketInfo time="80863093" offset="1489064" length="16355" />
        <PacketInfo time="80863093" offset="1505419" length="16355" />
        <PacketInfo time="80863093" offset="1521774" length="16355" />
        <PacketInfo time="80863093" offset="1538129" length="16355" />
        <PacketInfo time="80863109" offset="1554484" length="16355" />
        <PacketInfo time="80863109" offset="1570839" length="16355" />
        <PacketInfo time="80863109" offset="1587194" length="16355" />
        <PacketInfo time="80863109" offset="1603549" length="16355" />
        <PacketInfo time="80863109" offset="1619904" length="16355" />
        <PacketInfo time="80863109" offset="1636259" length="16355" />
        <PacketInfo time="80863109" offset="1652614" length="16355" />
        <PacketInfo time="80863109" offset="1668969" length="16355" />
        <PacketInfo time="80863109" offset="1685324" length="16355" />
        <PacketInfo time="80863109" offset="1701679" length="16355" />
        <PacketInfo time="80863109" offset="1718034" length="16355" />
        <PacketInfo time="80863109" offset="1734389" length="16355" />
        <PacketInfo time="80863125" offset="1750744" length="16355" />
        <PacketInfo time="80863125" offset="1767099" length="16355" />
        <PacketInfo time="80863125" offset="1783454" length="16355" />
        <PacketInfo time="80863125" offset="1799809" length="16355" />
        <PacketInfo time="80863125" offset="1816164" length="16355" />
        <PacketInfo time="80863125" offset="1832519" length="16355" />
        <PacketInfo time="80863125" offset="1848874" length="16355" />
        <PacketInfo time="80863125" offset="1865229" length="16355" />
        <PacketInfo time="80863125" offset="1881584" length="11526" />
      </TcpPackets>
    </HTTPResponse>
  </HTTPTask>
</HTTPSnapshot>